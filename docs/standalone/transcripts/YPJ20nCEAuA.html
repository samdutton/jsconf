<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="JSConf transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>YPJ20nCEAuA</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/YPJ20nCEAuA?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="5.63" data-end="9.36">so now that we're all friends and see me</span> <span data-start="9.36" data-end="11.91">little round of my machine I'm just</span> <span data-start="11.91" data-end="14.099">going to cut right to the chase and kind</span> <span data-start="14.099" data-end="15.69">of be a bit straight up I think building</span> <span data-start="15.69" data-end="17.76">and front-end JavaScript applications is</span> <span data-start="17.76" data-end="20.22">pretty damn hard and I think there are a</span> <span data-start="20.22" data-end="21.57">bunch of factors that contribute to this</span> <span data-start="21.57" data-end="23.55">and one of those factors is that they're</span> <span data-start="23.55" data-end="25.26">just giant balls or state which is what</span> <span data-start="25.26" data-end="27.84">Pete was talking about so I thought</span> <span data-start="27.84" data-end="29.19">would be kind of interesting to take a</span> <span data-start="29.19" data-end="31.08">bit of a step back and and maybe play</span> <span data-start="31.08" data-end="33.629">the devil's advocate and take a critical</span> <span data-start="33.629" data-end="34.89">look at some of the patterns that we see</span> <span data-start="34.89" data-end="37.86">being applied on front-end JavaScript</span> <span data-start="37.86" data-end="40.02">code bases and see if they give us ways</span> <span data-start="40.02" data-end="42.27">of handling state and events in a</span> <span data-start="42.27" data-end="45.829">scalable and maintainable fashion and</span> <span data-start="45.829" data-end="47.79">then maybe we'll take a look at some of</span> <span data-start="47.79" data-end="49.71">the tactics that we can use to help us</span> <span data-start="49.71" data-end="52.17">better embrace state and events without</span> <span data-start="52.17" data-end="54.77">sacrificing clarity in our architecture</span> <span data-start="54.77" data-end="57.21">so I'll just introduce myself that's not</span> <span data-start="57.21" data-end="59.73">me I'm Amy I've come from New Zealand if</span> <span data-start="59.73" data-end="60.93">you're ever in Wellington and you want</span> <span data-start="60.93" data-end="62.13">to hang out just give me a shout on</span> <span data-start="62.13" data-end="64.229">twitter i'm a meep and it's jared see</span> <span data-start="64.229" data-end="66.39">that i work at github I'm if you want</span> <span data-start="66.39" data-end="68.31">some stickers my buddy Marcus's down</span> <span data-start="68.31" data-end="70.04">front he's got a whole pile of them</span> <span data-start="70.04" data-end="73.82">direct all of your attention that way um</span> </p>
<p><span data-start="73.82" data-end="76.74">I've also got a tiny confession I don't</span> <span data-start="76.74" data-end="79.5">write any JavaScript yet github I build</span> <span data-start="79.5" data-end="81.54">the github windows clients I'm a windows</span> <span data-start="81.54" data-end="84.18">developer I'm actually pretty new to</span> <span data-start="84.18" data-end="86.49">github and before that I was writing a</span> <span data-start="86.49" data-end="88.68">whole ton of JavaScript building epson</span> <span data-start="88.68" data-end="91.68">and backbone so in terms of architecture</span> <span data-start="91.68" data-end="94.32">front end-front end apps to have</span> <span data-start="94.32" data-end="95.52">actually quite a bit in common with</span> <span data-start="95.52" data-end="96.869">desktop applications and the thing that</span> <span data-start="96.869" data-end="98.61">ties them together is that they have</span> <span data-start="98.61" data-end="101.04">heaps and heaps of state so front-end</span> <span data-start="101.04" data-end="102.869">javascript ads contain lots of different</span> <span data-start="102.869" data-end="104.07">kinds of state they've got the state of</span> <span data-start="104.07" data-end="106.619">the court entities are models they've</span> <span data-start="106.619" data-end="108.33">got that state that needs to be kept in</span> <span data-start="108.33" data-end="110.159">sync with the server we've got the state</span> <span data-start="110.159" data-end="111.93">of the address bar we've got the state</span> <span data-start="111.93" data-end="113.189">of all the different views that are</span> <span data-start="113.189" data-end="114.63">presenting various bits of information</span> <span data-start="114.63" data-end="116.28">on the screen at any given point in time</span> <span data-start="116.28" data-end="118.439">and then we've got the overall state of</span> <span data-start="118.439" data-end="120.42">our application memory management all of</span> <span data-start="120.42" data-end="123.18">those kinds of things so on its own</span> <span data-start="123.18" data-end="125.4">state isn't very interesting what makes</span> <span data-start="125.4" data-end="127.02">an application interesting is the</span> <span data-start="127.02" data-end="129.06">interaction with that stage so we're</span> <span data-start="129.06" data-end="130.59">able to interact with the state and</span> <span data-start="130.59" data-end="133.65">force new transitions new states on the</span> <span data-start="133.65" data-end="134.63">system in some</span> <span data-start="134.63" data-end="135.47">we have something that's way more</span> <span data-start="135.47" data-end="138.23">compelling so traditionally state</span> <span data-start="138.23" data-end="139.76">transitions are going to occur by our</span> <span data-start="139.76" data-end="141.92">events so for example you've got some</span> <span data-start="141.92" data-end="143.93">data on the screen at xbox somebody into</span> <span data-start="143.93" data-end="145.61">some information they click Save the</span> <span data-start="145.61" data-end="147.65">model gets updated and we transition</span> <span data-start="147.65" data-end="149.45">into a new state it might be an invalid</span> <span data-start="149.45" data-end="152.24">state so the thing about these</span> <span data-start="152.24" data-end="154.76">heavy-duty thick client JavaScript apps</span> <span data-start="154.76" data-end="156.53">is that basically this brought these</span> <span data-start="156.53" data-end="157.94">blobs of code that kind of just sit</span> <span data-start="157.94" data-end="159.38">there and wait for interesting things to</span> <span data-start="159.38" data-end="161.75">happen and we have a bunch of ways that</span> <span data-start="161.75" data-end="163.25">we can make interesting things happens</span> <span data-start="163.25" data-end="164.93">we've got Dom events which I like click</span> <span data-start="164.93" data-end="167.15">drag k out there's a whole pile of them</span> <span data-start="167.15" data-end="169.07">and we've got model events so that might</span> <span data-start="169.07" data-end="170.99">be when we transition into that invalid</span> <span data-start="170.99" data-end="172.73">state our model might raise a signal to</span> <span data-start="172.73" data-end="174.41">say hey I'm actually in a valid state</span> <span data-start="174.41" data-end="175.73">and people who are interested in that</span> <span data-start="175.73" data-end="178.82">and we subscribe to those events we've</span> <span data-start="178.82" data-end="181.07">also got router events so these are kept</span> <span data-start="181.07" data-end="183.14">off when the address bar changes and we</span> <span data-start="183.14" data-end="184.88">need to do interesting things to the</span> <span data-start="184.88" data-end="188.06">overall view state of our application so</span> <span data-start="188.06" data-end="189.53">we've got lots of steak and we've got</span> <span data-start="189.53" data-end="191.63">lots of means and they all need to be</span> <span data-start="191.63" data-end="194.54">managed and if we don't manage them in a</span> <span data-start="194.54" data-end="196.49">way that kind of accurately separates</span> <span data-start="196.49" data-end="198.59">all of the concerns out and state and</span> <span data-start="198.59" data-end="200.3">events they're going to get really tough</span> <span data-start="200.3" data-end="203.12">to manage so I've got a really contrived</span> <span data-start="203.12" data-end="206.09">example here of estate and events being</span> <span data-start="206.09" data-end="209.96">managed in a pretty sub optimal way so</span> <span data-start="209.96" data-end="212.03">we've got a view it's a part of you</span> <span data-start="212.03" data-end="213.71">there's a there's a there's just one</span> <span data-start="213.71" data-end="216.55">lone party animal at the party party dog</span> <span data-start="216.55" data-end="218.36">and we're going to have an invitation</span> <span data-start="218.36" data-end="221.84">list as well so here we can input a new</span> <span data-start="221.84" data-end="223.58">enemy Warner right to the invite to the</span> <span data-start="223.58" data-end="225.23">party and we've got a button with an</span> <span data-start="225.23" data-end="228.89">onclick handler shout out awesome so</span> <span data-start="228.89" data-end="231.68">don't please don't do this and so when</span> <span data-start="231.68" data-end="232.91">somebody clicks that button to invite</span> <span data-start="232.91" data-end="234.74">the animal we're going to use jQuery to</span> <span data-start="234.74" data-end="236.15">reach into the dome to grab the state of</span> <span data-start="236.15" data-end="237.56">the textbox we're going to pull that bit</span> <span data-start="237.56" data-end="238.88">of information out we're going to invite</span> <span data-start="238.88" data-end="240.29">it and more to the party we're going to</span> <span data-start="240.29" data-end="242">build up a new view we're going to reach</span> <span data-start="242" data-end="243.65">back into the Brahman and put that in</span> <span data-start="243.65" data-end="245.66">there we're doing a whole pile of like</span> <span data-start="245.66" data-end="248.9">just it's spaghetti code basically so if</span> <span data-start="248.9" data-end="250.37">you're going to extrapolate that kind of</span> <span data-start="250.37" data-end="253.61">code to its natural conclusion it's it's</span> <span data-start="253.61" data-end="255.11">easy to see that we've got a state and</span> <span data-start="255.11" data-end="256.76">state changes state and state</span> <span data-start="256.76" data-end="259.13">transitions being intertwined and we're</span> <span data-start="259.13" data-end="260.48">very quickly going to end up with an</span> <span data-start="260.48" data-end="263.81">unmaintained codebase so the more state</span> <span data-start="263.81" data-end="266.06">you have the harder it is to manipulate</span> <span data-start="266.06" data-end="267.21">state and then</span> <span data-start="267.21" data-end="268.56">the trickier it all becomes to manage</span> <span data-start="268.56" data-end="271.319">and so this is where people are going</span> <span data-start="271.319" data-end="272.729">hey we've got design patterns and that's</span> <span data-start="272.729" data-end="274.47">awesome we totally do they've come to</span> <span data-start="274.47" data-end="278.699">save our souls so the thing that I think</span> <span data-start="278.699" data-end="279.96">find really interesting about design</span> <span data-start="279.96" data-end="281.699">patterns is I contrast what's going on</span> <span data-start="281.699" data-end="282.87">in like the physical world of</span> <span data-start="282.87" data-end="284.49">engineering to what's going on in the</span> <span data-start="284.49" data-end="286.639">software and world of engineering like</span> <span data-start="286.639" data-end="288.36">physical engineers are going to build</span> <span data-start="288.36" data-end="289.62">buildings like this and they have a</span> <span data-start="289.62" data-end="291.3">specific way that they need to construct</span> <span data-start="291.3" data-end="292.53">the building so that it doesn't kind of</span> <span data-start="292.53" data-end="294.419">collapse and kill everybody inside and</span> <span data-start="294.419" data-end="295.62">they're going to need to do that</span> <span data-start="295.62" data-end="298.08">regardless of the outcome of the</span> <span data-start="298.08" data-end="299.55">building whether it's going to be a meat</span> <span data-start="299.55" data-end="303.18">market or whatever but in software we we</span> <span data-start="303.18" data-end="305.52">kind of had these these loser ideas that</span> <span data-start="305.52" data-end="307.259">we can apply in very different contexts</span> <span data-start="307.259" data-end="310.05">so I mean I guess was me not bound by</span> <span data-start="310.05" data-end="312.93">the laws of physics to a point so it's</span> <span data-start="312.93" data-end="314.099">interesting because it means that we can</span> <span data-start="314.099" data-end="315.72">take patterns that have been applied and</span> <span data-start="315.72" data-end="317.699">very very different contexts and start</span> <span data-start="317.699" data-end="320.159">applying them to help us solve</span> <span data-start="320.159" data-end="322.08">interesting problems and new contexts</span> <span data-start="322.08" data-end="324.75">and it means those ideas kind of evolve</span> <span data-start="324.75" data-end="326.13">a little bit like memes on the internet</span> <span data-start="326.13" data-end="328.02">right like mean actually means anything</span> <span data-start="328.02" data-end="330.06">that's spread or inherited in an on</span> <span data-start="330.06" data-end="331.699">genetic fashion which basically means</span> <span data-start="331.699" data-end="335.97">memes or ideas so their ideas it stuck</span> <span data-start="335.97" data-end="337.409">because they're funny or because</span> <span data-start="337.409" data-end="339.12">everyone thinks that they contain an</span> <span data-start="339.12" data-end="340.77">interesting solution to a tricky problem</span> <span data-start="340.77" data-end="344.61">and I think that in v-star the MV star</span> <span data-start="344.61" data-end="346.56">family of patents is an example of this</span> <span data-start="346.56" data-end="349.59">so originally presentation patterns that</span> <span data-start="349.59" data-end="351.539">fall under this category they actually</span> <span data-start="351.539" data-end="353.969">originated from building desktop clients</span> <span data-start="353.969" data-end="356.82">and then over time web and web server</span> <span data-start="356.82" data-end="358.409">programming became really popular and</span> <span data-start="358.409" data-end="360.21">these presentation patterns were applied</span> <span data-start="360.21" data-end="363.3">in that context so we end up with web</span> <span data-start="363.3" data-end="365.12">server frameworks like rails which</span> <span data-start="365.12" data-end="367.68">implementations of MVC and then we've</span> <span data-start="367.68" data-end="369.539">got these kick-ass front-end JavaScript</span> <span data-start="369.539" data-end="371.19">frameworks which are also claiming to be</span> <span data-start="371.19" data-end="374.039">implementations of an MVC pattern and I</span> <span data-start="374.039" data-end="375.509">really don't want to turn this into a</span> <span data-start="375.509" data-end="377.49">conversation about like who's doing in</span> <span data-start="377.49" data-end="379.139">bc by the book because that's not</span> <span data-start="379.139" data-end="381.12">particularly interesting but what is</span> <span data-start="381.12" data-end="383.4">interesting is to take a look at how</span> <span data-start="383.4" data-end="386.219">each of those flavors are being applied</span> <span data-start="386.219" data-end="388.139">in the different contexts and how they</span> <span data-start="388.139" data-end="390.21">affect how we manage state and how we</span> <span data-start="390.21" data-end="393.389">manage state transitions so I'm going to</span> <span data-start="393.389" data-end="397.44">take a quick look at how we manage state</span> <span data-start="397.44" data-end="398.88">and the web server environment so</span> <span data-start="398.88" data-end="399.87">hopefully some of this is going</span> <span data-start="399.87" data-end="402.21">mostly a reminder so we've got models</span> <span data-start="402.21" data-end="404.13">they are the guts of our application</span> <span data-start="404.13" data-end="405.84">it's where all the interesting domain</span> <span data-start="405.84" data-end="408.33">logic is going to occur we've got views</span> <span data-start="408.33" data-end="410.37">and though the presentation of that of</span> <span data-start="410.37" data-end="412.74">those models and typically this is going</span> <span data-start="412.74" data-end="414.99">to be like a JSON document or an HTML</span> <span data-start="414.99" data-end="416.88">document so the interesting thing about</span> <span data-start="416.88" data-end="418.68">views in this context is that they are a</span> <span data-start="418.68" data-end="422.64">snapshot of the models current state and</span> <span data-start="422.64" data-end="424.14">then we have controllers which are</span> <span data-start="424.14" data-end="425.76">responsible for sending commands down to</span> <span data-start="425.76" data-end="428.22">the model maybe they will transition the</span> <span data-start="428.22" data-end="430.02">model into a new state mr. step back</span> <span data-start="430.02" data-end="432.03">maybe just query it and then they're</span> <span data-start="432.03" data-end="433.65">going to return a snapshot of that</span> <span data-start="433.65" data-end="435.39">current state a representation of that</span> <span data-start="435.39" data-end="438.32">current state and then we have routers</span> <span data-start="438.32" data-end="440.64">so they are responsible for doing some</span> <span data-start="440.64" data-end="441.99">pattern matching of an incoming web</span> <span data-start="441.99" data-end="444.48">request routing that off to a designated</span> <span data-start="444.48" data-end="446.43">designated controller and then to an</span> <span data-start="446.43" data-end="448.71">action which is the action selection is</span> <span data-start="448.71" data-end="450.6">normally done with a combination of the</span> </p>
<p><span data-start="450.6" data-end="453.09">URL that's come in and the HTTP verb</span> <span data-start="453.09" data-end="455.91">that's being used so how does this</span> <span data-start="455.91" data-end="457.38">relate to how state as miniature on the</span> <span data-start="457.38" data-end="459.3">web server environment or hopefully</span> <span data-start="459.3" data-end="460.59">you're going what are you talking about</span> <span data-start="460.59" data-end="461.73">we don't have state on the web server</span> <span data-start="461.73" data-end="463.35">environment we want to be stateless</span> <span data-start="463.35" data-end="464.58">because we want to be able to scalar</span> <span data-start="464.58" data-end="468.48">applications so how are we achieving the</span> <span data-start="468.48" data-end="470.22">stainless pneus while we persisting our</span> <span data-start="470.22" data-end="473.27">models to a data store of some kind and</span> <span data-start="473.27" data-end="476.04">so in this environment where state is</span> <span data-start="476.04" data-end="478.02">persisted to a data store and we're able</span> <span data-start="478.02" data-end="480.9">to address that state via HTTP like we</span> <span data-start="480.9" data-end="483.3">can say HTTP get me all the animals at</span> <span data-start="483.3" data-end="485.61">the party and then if we find out one of</span> <span data-start="485.61" data-end="487.5">the animals is causing a bit of a</span> <span data-start="487.5" data-end="489.05">commotion and we want to kick them out</span> <span data-start="489.05" data-end="492.81">we can just execute an HTTP HTTP delete</span> <span data-start="492.81" data-end="495.15">against that same resource so what we've</span> <span data-start="495.15" data-end="496.74">essentially done here is we've simulated</span> <span data-start="496.74" data-end="499.26">a state transition across the HTTP</span> <span data-start="499.26" data-end="500.94">boundary across the client-server</span> <span data-start="500.94" data-end="503.52">boundary and what that means is all</span> <span data-start="503.52" data-end="505.62">states and all state transitions are</span> <span data-start="505.62" data-end="510.21">necessarily addressable via HTTP so</span> <span data-start="510.21" data-end="511.71">quick example we've got a couple of</span> <span data-start="511.71" data-end="513.45">routes here that we're defining against</span> <span data-start="513.45" data-end="515.67">the same party resource get post and</span> <span data-start="515.67" data-end="518.4">delete the get example is going to take</span> <span data-start="518.4" data-end="520.5">the incoming perimeter it's going to go</span> <span data-start="520.5" data-end="521.67">to the data store and find the</span> <span data-start="521.67" data-end="523.26">particular animal and return a snapshot</span> <span data-start="523.26" data-end="525.81">of that current state we're going to add</span> <span data-start="525.81" data-end="527.46">an animal to the party we're going to</span> <span data-start="527.46" data-end="529.17">grab that and come with parameter again</span> <span data-start="529.17" data-end="531.39">we're going to modify the state persist</span> <span data-start="531.39" data-end="533.209">it down to the data store and then rich</span> <span data-start="533.209" data-end="535.16">a new snapshot of the pub the parties</span> <span data-start="535.16" data-end="539.119">are state with an extra attendee and the</span> <span data-start="539.119" data-end="540.529">same goes for the delete when we want to</span> <span data-start="540.529" data-end="541.699">kick somebody out we're going to modify</span> <span data-start="541.699" data-end="543.319">the state of the party persist that back</span> <span data-start="543.319" data-end="544.879">to the data store and then return a new</span> <span data-start="544.879" data-end="548.54">snapshot so routers are matching a web</span> <span data-start="548.54" data-end="550.49">request pattern it's handing it off to a</span> <span data-start="550.49" data-end="552.499">controller and invoking an action who's</span> <span data-start="552.499" data-end="553.699">going to do a model look out in an</span> <span data-start="553.699" data-end="556.249">update and return a snapshot of the new</span> <span data-start="556.249" data-end="560.779">view so because of that client-server</span> <span data-start="560.779" data-end="563.449">boundary all of the states and all of</span> <span data-start="563.449" data-end="565.129">our interesting events are addressable</span> <span data-start="565.129" data-end="568.399">via HTTP and the way that we use rounds</span> <span data-start="568.399" data-end="570.379">means that our architecture is very</span> <span data-start="570.379" data-end="573.499">linear so requests come in something may</span> <span data-start="573.499" data-end="574.939">or may not happen to change the model</span> <span data-start="574.939" data-end="577.459">state and a snapshot has returned so</span> <span data-start="577.459" data-end="578.929">we've gone down the stack and up the</span> <span data-start="578.929" data-end="584.629">stack again so the key difference for</span> <span data-start="584.629" data-end="586.519">the way that we implement MVC on the</span> <span data-start="586.519" data-end="587.809">server and the way that we're going to</span> <span data-start="587.809" data-end="590.209">implement NBC on the client is that the</span> <span data-start="590.209" data-end="592.49">implementation on the client has a lot</span> <span data-start="592.49" data-end="595.91">of state we don't need to try super hard</span> <span data-start="595.91" data-end="597.499">to be stateless anymore in fact we want</span> <span data-start="597.499" data-end="599.509">to embrace stage so we're keeping a</span> <span data-start="599.509" data-end="601.309">bunch of things in memory here to form a</span> <span data-start="601.309" data-end="603.499">cohesive application and it all comes</span> <span data-start="603.499" data-end="605.72">together to form a very rich and non</span> <span data-start="605.72" data-end="609.23">linear state-space we've got our models</span> <span data-start="609.23" data-end="611.24">they usually coupled with a snapshot</span> <span data-start="611.24" data-end="612.589">that's coming back from a server that</span> </p>
<p><span data-start="612.589" data-end="614.54">JSON document that might come back and</span> <span data-start="614.54" data-end="616.759">then we add an extra layer of complexity</span> <span data-start="616.759" data-end="618.529">on top of that we've got validation</span> <span data-start="618.529" data-end="621.889">security we are playing new behaviors</span> <span data-start="621.889" data-end="623.809">through other functions we've got to</span> <span data-start="623.809" data-end="625.459">decide when we keep that state and sync</span> <span data-start="625.459" data-end="626.99">with the server so we're keeping that in</span> <span data-start="626.99" data-end="630.11">mind at all times the number of possible</span> <span data-start="630.11" data-end="631.759">states that we've just put on top of</span> <span data-start="631.759" data-end="634.249">that snapshot has just has blown out</span> <span data-start="634.249" data-end="637.79">proportionally on the screen at any one</span> <span data-start="637.79" data-end="639.379">time we've got many different views that</span> <span data-start="639.379" data-end="640.97">are each presenting different model</span> <span data-start="640.97" data-end="643.309">states and together those views to find</span> <span data-start="643.309" data-end="645.889">the overall view state so what many</span> <span data-start="645.889" data-end="647.99">items can we see in the sidebar like are</span> <span data-start="647.99" data-end="650.329">we able to eat it the that the Palean</span> <span data-start="650.329" data-end="652.129">kick somebody out are we able to invite</span> <span data-start="652.129" data-end="654.379">a new animal to the party and are we</span> <span data-start="654.379" data-end="655.97">even able to see what's going on the</span> <span data-start="655.97" data-end="657.589">shenanigans going on inside this party</span> <span data-start="657.589" data-end="659.389">so this is adding again to the</span> <span data-start="659.389" data-end="661.759">complexity that we have in the state</span> <span data-start="661.759" data-end="664.07">space</span> <span data-start="664.08" data-end="666.18">and with overall we've got the overall</span> <span data-start="666.18" data-end="668.1">application state as well so this is</span> <span data-start="668.1" data-end="670.14">things like which models which modules</span> <span data-start="670.14" data-end="672.18">and controllers are currently active and</span> <span data-start="672.18" data-end="673.74">which ones are no longer active and</span> <span data-start="673.74" data-end="676.32">should be cleaned up in order to free up</span> <span data-start="676.32" data-end="680.67">that memory that we hogging and of</span> <span data-start="680.67" data-end="683.19">course that state our state boundary</span> <span data-start="683.19" data-end="685.32">that we had on the server that client</span> <span data-start="685.32" data-end="686.96">super boundary is no longer relevant</span> <span data-start="686.96" data-end="689.31">suddenly we don't have to emulate state</span> <span data-start="689.31" data-end="691.86">transitions across a boundary state and</span> <span data-start="691.86" data-end="693.48">the transitions occur within the same</span> <span data-start="693.48" data-end="695.82">execution context which is awesome</span> <span data-start="695.82" data-end="697.44">because it means we have a much much</span> <span data-start="697.44" data-end="699.36">richer set of concepts if we can</span> <span data-start="699.36" data-end="705.15">architect a replication around so as the</span> <span data-start="705.15" data-end="706.44">state space grows and we're moving</span> <span data-start="706.44" data-end="708.18">around the state space in a very</span> <span data-start="708.18" data-end="710.97">nonlinear fashion things get complicated</span> <span data-start="710.97" data-end="713.43">really really quickly it has a</span> <span data-start="713.43" data-end="714.87">dimensionality to the problem which</span> <span data-start="714.87" data-end="716.97">makes managing all of this really really</span> <span data-start="716.97" data-end="719.1">tricky so we need to have a plan we need</span> <span data-start="719.1" data-end="720.9">to apply some memes some ideas some</span> <span data-start="720.9" data-end="723.63">patterns to help us out here and not end</span> <span data-start="723.63" data-end="728.49">up in a spaghetti code soup so we</span> <span data-start="728.49" data-end="730.2">originally brought over these</span> <span data-start="730.2" data-end="731.79">presentation patterns onto the client to</span> <span data-start="731.79" data-end="733.44">help us deal with complexity the</span> <span data-start="733.44" data-end="734.97">complexity that we saw on the client</span> <span data-start="734.97" data-end="737.37">we've got models we've got our views in</span> <span data-start="737.37" data-end="739.74">our controllers these concepts that we</span> <span data-start="739.74" data-end="741.72">were saw on the server I mean whatever</span> <span data-start="741.72" data-end="743.25">you want to call that controller part</span> </p>
<p><span data-start="743.25" data-end="746.4">I'm I have weird feelings about that</span> <span data-start="746.4" data-end="749.61">name and then we've got routes okay and</span> <span data-start="749.61" data-end="751.65">we add those to the equations so that we</span> <span data-start="751.65" data-end="755.16">can so that we can address parts of our</span> <span data-start="755.16" data-end="756.9">state space so I look at this and I</span> <span data-start="756.9" data-end="758.76">think this is a little weird like why do</span> <span data-start="758.76" data-end="760.5">we have right routes here like on the</span> <span data-start="760.5" data-end="762.39">server the the purpose that they served</span> <span data-start="762.39" data-end="764.73">was that we needed to be able to address</span> <span data-start="764.73" data-end="766.65">all the transitions and all the states</span> <span data-start="766.65" data-end="768.81">and here we don't really need to do that</span> <span data-start="768.81" data-end="770.97">and then I remember okay it's actually</span> <span data-start="770.97" data-end="772.47">not weird at all because we still need</span> <span data-start="772.47" data-end="773.79">to be able to address parts of that</span> <span data-start="773.79" data-end="776.4">state space we absolutely need to be</span> <span data-start="776.4" data-end="778.23">able to take the URL in the address bar</span> <span data-start="778.23" data-end="779.82">and give that to your friend and have</span> <span data-start="779.82" data-end="783.17">them see exactly the same state on the</span> <span data-start="783.17" data-end="786.39">the web page so address ability and the</span> <span data-start="786.39" data-end="788.64">support of routes are still a really key</span> <span data-start="788.64" data-end="794.79">part of our of our design</span> <span data-start="794.8" data-end="797.98">so let's take a little look at the</span> <span data-start="797.98" data-end="799.45">typical way that we might structure some</span> <span data-start="799.45" data-end="801.22">of our client side code to account for</span> <span data-start="801.22" data-end="803.019">the need to be able to address all parts</span> <span data-start="803.019" data-end="804.82">of the state space so I'm going to give</span> <span data-start="804.82" data-end="808.66">this example in backbone so we've got an</span> <span data-start="808.66" data-end="811.42">animal and a collection of partying</span> <span data-start="811.42" data-end="814.12">animals we've got a party view which has</span> <span data-start="814.12" data-end="816.19">a template and a render function and</span> <span data-start="816.19" data-end="817.3">what it's going to do is it's going to</span> <span data-start="817.3" data-end="818.829">take the template it's going to take the</span> <span data-start="818.829" data-end="820">model and it's going to mash them</span> <span data-start="820" data-end="821.47">together expect something out onto the</span> <span data-start="821.47" data-end="825.7">view and then we've got our router and</span> <span data-start="825.7" data-end="826.99">we're defining a couple of routes here</span> <span data-start="826.99" data-end="829.45">we can start the party and and turn the</span> <span data-start="829.45" data-end="832.3">music on and let them go and we can also</span> <span data-start="832.3" data-end="834.73">uninvite any misbehavior people so we're</span> <span data-start="834.73" data-end="836.709">going to revoke party rights what we're</span> <span data-start="836.709" data-end="838.029">doing here is we're taking an incoming</span> <span data-start="838.029" data-end="839.95">parameter from the URL we're grabbing</span> <span data-start="839.95" data-end="841.779">that collection we are finding the</span> <span data-start="841.779" data-end="843.04">animal in the collection we're</span> <span data-start="843.04" data-end="844.6">destroying the model and we're reaching</span> <span data-start="844.6" data-end="847.269">back into the into the Dom to remove the</span> <span data-start="847.269" data-end="850.93">view and in the starting the party case</span> <span data-start="850.93" data-end="853.269">it's very similar we're creating we're</span> <span data-start="853.269" data-end="855.519">creating of you doing a fish and a</span> <span data-start="855.519" data-end="858.76">render so what's going on here we're</span> <span data-start="858.76" data-end="860.17">breaking encapsulation to push</span> <span data-start="860.17" data-end="862.149">everything up into the Russian portion</span> <span data-start="862.149" data-end="865.44">of our code so we've got this view</span> <span data-start="865.44" data-end="868.149">controller thing that's responsible for</span> <span data-start="868.149" data-end="870.97">doing some initial rendering and then</span> <span data-start="870.97" data-end="873.64">when it's got a reference to our model</span> <span data-start="873.64" data-end="874.839">and then the round kicks off and the</span> <span data-start="874.839" data-end="875.92">first thing that it does it does an</span> <span data-start="875.92" data-end="878.89">active look up for the model so we've</span> <span data-start="878.89" data-end="881.17">got these stateful concepts where our</span> <span data-start="881.17" data-end="882.459">view already has a reference to the</span> <span data-start="882.459" data-end="883.6">model but we're going to grab the</span> <span data-start="883.6" data-end="885.16">collection and do look up anywhere okay</span> <span data-start="885.16" data-end="887.5">that's fine and then we're going to</span> <span data-start="887.5" data-end="888.91">perform an extra the hints that model</span> <span data-start="888.91" data-end="890.649">and we're going to transition it into a</span> <span data-start="890.649" data-end="893.709">new state and then the next thing we</span> <span data-start="893.709" data-end="895.839">need to do is deal with some view</span> <span data-start="895.839" data-end="898.69">concerns by ie we need to remove that</span> <span data-start="898.69" data-end="901.149">few from from the screen so again we're</span> <span data-start="901.149" data-end="903.339">breaking encapsulation here the view</span> <span data-start="903.339" data-end="905.29">controller thing already has a reference</span> <span data-start="905.29" data-end="907.27">to the Dom element why are we creating</span> <span data-start="907.27" data-end="908.98">the spaghetti code in the router why</span> <span data-start="908.98" data-end="910.57">wouldn't we just let the view be in</span> <span data-start="910.57" data-end="912.31">charge over time that's going to become</span> <span data-start="912.31" data-end="916.269">very difficult to maintain over time so</span> <span data-start="916.269" data-end="918.19">on the client side we're often working</span> <span data-start="918.19" data-end="919.81">with these heavily stateful frameworks</span> <span data-start="919.81" data-end="921.67">and all the objects that we need in</span> <span data-start="921.67" data-end="923.47">order to perform a state transition that</span> <span data-start="923.47" data-end="925.51">already instantiated and already held in</span> <span data-start="925.51" data-end="928.08">memory we don't need to structure</span> <span data-start="928.08" data-end="930.03">application in the same way as we were</span> <span data-start="930.03" data-end="932.19">on the server because on the client we</span> <span data-start="932.19" data-end="934.77">can fully embrace stayed we don't need</span> <span data-start="934.77" data-end="936.81">to manipulate our models like they arose</span> <span data-start="936.81" data-end="939.06">in a database a models can be rich</span> <span data-start="939.06" data-end="943.74">interactive real objects so we took</span> <span data-start="943.74" data-end="946.11">these ideas these flavors of MVC that we</span> <span data-start="946.11" data-end="948">saw on the server and we try to apply</span> <span data-start="948" data-end="950.58">that very linear approach to the client</span> <span data-start="950.58" data-end="952.53">and we started to break encapsulation</span> <span data-start="952.53" data-end="955.32">pretty quickly an order 200 application</span> <span data-start="955.32" data-end="957.42">around the design and and the need to</span> <span data-start="957.42" data-end="959.85">support routes we started to treat state</span> <span data-start="959.85" data-end="962.49">and events and the very things that give</span> <span data-start="962.49" data-end="964.5">us that rich interactivity on the client</span> <span data-start="964.5" data-end="966.15">side we started to treat that like a</span> <span data-start="966.15" data-end="970.14">second-class citizen at the side of the</span> <span data-start="970.14" data-end="972.12">talk I showed you that or fall jQuery</span> <span data-start="972.12" data-end="975.89">madness we were doing weird things like</span> <span data-start="975.89" data-end="978.54">triggering events from the DOM and then</span> </p>
<p><span data-start="978.54" data-end="981.21">I reaching into the Dom to grab the</span> <span data-start="981.21" data-end="982.62">state and then persisting that state</span> <span data-start="982.62" data-end="984.6">back into the diamond it was all kind of</span> <span data-start="984.6" data-end="986.58">crazy we were executing that state</span> <span data-start="986.58" data-end="988.65">transition to update the DOM and show</span> <span data-start="988.65" data-end="990.99">the new state and that code doesn't</span> <span data-start="990.99" data-end="993.3">scale very well beyond a very simple use</span> <span data-start="993.3" data-end="995.76">case and the reason is because it breaks</span> <span data-start="995.76" data-end="998.19">encapsulation and I kind of feel like</span> <span data-start="998.19" data-end="999.81">we're back at this again we're using</span> <span data-start="999.81" data-end="1001.28">routes heavily because they're</span> <span data-start="1001.28" data-end="1003.41">convenient but in doing this we're</span> <span data-start="1003.41" data-end="1006.4">sacrificing clarity in our architecture</span> <span data-start="1006.4" data-end="1009.92">so to build accessible single page</span> </p>
<p><span data-start="1009.92" data-end="1011.9">JavaScript apps we still need to use</span> <span data-start="1011.9" data-end="1014.09">rounds and it's critical that we're able</span> <span data-start="1014.09" data-end="1015.59">to address portions of the state space</span> <span data-start="1015.59" data-end="1018.26">but in my mind routes are a feature</span> <span data-start="1018.26" data-end="1020.75">they're not the cornerstone of our</span> <span data-start="1020.75" data-end="1023.15">architecture the cornerstone of our</span> <span data-start="1023.15" data-end="1025.04">design and architecture should really be</span> <span data-start="1025.04" data-end="1028.339">concerned with state and events so I</span> <span data-start="1028.339" data-end="1030.74">routes the problem here I don't I don't</span> <span data-start="1030.74" data-end="1031.85">think right so the problem here I think</span> <span data-start="1031.85" data-end="1033.62">the thing that's causing us pain is only</span> <span data-start="1033.62" data-end="1035.27">using routes as the part of the</span> <span data-start="1035.27" data-end="1037.28">architecture breaking that encapsulation</span> <span data-start="1037.28" data-end="1039.32">of the views and the models in order to</span> <span data-start="1039.32" data-end="1041.12">get it done as quickly as possible it's</span> <span data-start="1041.12" data-end="1045.65">not giving us a way to scale a design so</span> <span data-start="1045.65" data-end="1047.54">separating concerns as we've seen is</span> <span data-start="1047.54" data-end="1050.03">super important we've implemented that</span> </p>
<p><span data-start="1050.03" data-end="1052.19">NBC design pattern on the client and the</span> <span data-start="1052.19" data-end="1053.42">first place to get rid of all that</span> <span data-start="1053.42" data-end="1055.91">tangled mess but somewhere in the course</span> <span data-start="1055.91" data-end="1057.47">of that doing that with two closely</span> <span data-start="1057.47" data-end="1059.55">emulated the designs that we see</span> <span data-start="1059.55" data-end="1061.14">on the server the things that work</span> <span data-start="1061.14" data-end="1062.76">really well for stateless with</span> <span data-start="1062.76" data-end="1065.01">applications and as the complexity grows</span> <span data-start="1065.01" data-end="1068.01">in our various state full application we</span> <span data-start="1068.01" data-end="1069.21">start to see the cracks and that</span> <span data-start="1069.21" data-end="1073.05">approach so thankfully I think we can</span> <span data-start="1073.05" data-end="1074.67">find a happy medium where we can embrace</span> <span data-start="1074.67" data-end="1076.11">the need for routes on the client</span> <span data-start="1076.11" data-end="1079.17">without relying on them to drive state</span> <span data-start="1079.17" data-end="1081.75">and state changes within our application</span> <span data-start="1081.75" data-end="1084.33">we can use events in a composable</span> <span data-start="1084.33" data-end="1086.25">architecture to help us separate out our</span> <span data-start="1086.25" data-end="1089.94">concerns so let's first take a look at</span> <span data-start="1089.94" data-end="1091.8">the bloated router code example that I</span> <span data-start="1091.8" data-end="1095.28">gave hopefully it's starting to start to</span> <span data-start="1095.28" data-end="1097.05">be apparent that addressing a state</span> <span data-start="1097.05" data-end="1099.09">transition like a delete is probably not</span> <span data-start="1099.09" data-end="1101.49">the best thing to do in this case so</span> <span data-start="1101.49" data-end="1103.14">we've still got our models we've got our</span> <span data-start="1103.14" data-end="1105.33">animal model and our party animal</span> <span data-start="1105.33" data-end="1107.88">collection we've got a party animal view</span> <span data-start="1107.88" data-end="1109.98">which as before has a template but now</span> <span data-start="1109.98" data-end="1112.02">it has an event hash which is cool</span> <span data-start="1112.02" data-end="1114.12">because it means that this view is now</span> <span data-start="1114.12" data-end="1116.97">listening for click events on a link and</span> <span data-start="1116.97" data-end="1118.71">it's going to write that down to a</span> <span data-start="1118.71" data-end="1122.64">delete function that delete function is</span> <span data-start="1122.64" data-end="1124.23">able to say hey I'm just going to delete</span> <span data-start="1124.23" data-end="1125.97">the model that I have a reference to and</span> <span data-start="1125.97" data-end="1128.34">then I'm going to close myself which is</span> <span data-start="1128.34" data-end="1130.95">so much more simpler than looking up a</span> <span data-start="1130.95" data-end="1134.39">model and look reaching into the DOM and</span> <span data-start="1134.39" data-end="1136.8">removing this debt from from the Dom</span> <span data-start="1136.8" data-end="1139.46">it's kind of the concerns are way more</span> <span data-start="1139.46" data-end="1143.82">way more encapsulated in this case so as</span> </p>
<p><span data-start="1143.82" data-end="1144.87">I say we don't need to do that</span> <span data-start="1144.87" data-end="1147.84">unnecessary look up anymore we're also</span> <span data-start="1147.84" data-end="1150.03">using declarative events so we combine</span> <span data-start="1150.03" data-end="1152.4">the delete link to the delete the delete</span> <span data-start="1152.4" data-end="1155.04">function on the view and it allows us to</span> <span data-start="1155.04" data-end="1156.9">call destroy on the model directly which</span> <span data-start="1156.9" data-end="1159.18">is a huge one and for bonus points we</span> <span data-start="1159.18" data-end="1162.78">live interview take care of itself so</span> <span data-start="1162.78" data-end="1164.46">that's fine but I said earlier that</span> <span data-start="1164.46" data-end="1166.44">routing is still a key part of the</span> <span data-start="1166.44" data-end="1167.85">client-side code and we need to support</span> <span data-start="1167.85" data-end="1170.19">this feature of addressability and some</span> <span data-start="1170.19" data-end="1172.86">of the state space our application is</span> <span data-start="1172.86" data-end="1174.12">going to suck if we don't do this we</span> <span data-start="1174.12" data-end="1175.8">need to be able to give those URLs to</span> <span data-start="1175.8" data-end="1177.66">our friends so that they can arrive at</span> <span data-start="1177.66" data-end="1180.9">the same state that we did so how can we</span> <span data-start="1180.9" data-end="1183.9">better embrace the need for an event</span> <span data-start="1183.9" data-end="1185.94">rich envy whatever you want to call it</span> <span data-start="1185.94" data-end="1188.25">pattern and the need for routes in a</span> <span data-start="1188.25" data-end="1190.71">clear architecture so I just want to</span> <span data-start="1190.71" data-end="1192.44">show you a couple of ideas</span> <span data-start="1192.44" data-end="1194.81">it means and you guys can apply them in</span> <span data-start="1194.81" data-end="1198.64">whichever way you choose as appropriate</span> <span data-start="1198.64" data-end="1200.66">so we're going to take those models</span> <span data-start="1200.66" data-end="1203.12">those rich objects those views which are</span> <span data-start="1203.12" data-end="1204.92">responsible for rendering templates and</span> <span data-start="1204.92" data-end="1207.53">then the views mediating any interaction</span> <span data-start="1207.53" data-end="1209.96">between the template and sorry the DOM</span> <span data-start="1209.96" data-end="1211.94">and translating that back down to the</span> <span data-start="1211.94" data-end="1213.62">model and we've got a controller object</span> <span data-start="1213.62" data-end="1215.27">which is responsible for keeping track</span> <span data-start="1215.27" data-end="1217.25">of those models and views and we're</span> <span data-start="1217.25" data-end="1218.78">going to take all of those and we're</span> <span data-start="1218.78" data-end="1219.92">going to put them into a single</span> <span data-start="1219.92" data-end="1223.09">component logical component and module</span> <span data-start="1223.09" data-end="1225.35">so module was responsible for</span> <span data-start="1225.35" data-end="1227.27">coordinating all of the state and events</span> <span data-start="1227.27" data-end="1230.78">that we have at a very micro level so</span> <span data-start="1230.78" data-end="1231.8">we're not talking a one-to-one</span> <span data-start="1231.8" data-end="1233.21">relationship here we're talking about</span> <span data-start="1233.21" data-end="1236.57">many views mini models all aggregated</span> <span data-start="1236.57" data-end="1238.67">within a module because they are related</span> <span data-start="1238.67" data-end="1240.38">to each other on some level of</span> <span data-start="1240.38" data-end="1244.25">functionality so it's a discrete area of</span> <span data-start="1244.25" data-end="1246.29">a discrete functional unit I guess you</span> <span data-start="1246.29" data-end="1250.19">could say so those modules are free to</span> <span data-start="1250.19" data-end="1252.2">present views and raise events within</span> <span data-start="1252.2" data-end="1254.03">themselves and keep track of their own</span> <span data-start="1254.03" data-end="1257.24">internal state so just to briefly note</span> <span data-start="1257.24" data-end="1258.8">that while these models are kind of</span> <span data-start="1258.8" data-end="1262.13">motor sonic not models modules are free</span> <span data-start="1262.13" data-end="1265.04">to present their views I don't think</span> <span data-start="1265.04" data-end="1266.78">they should be directly free to start</span> <span data-start="1266.78" data-end="1268.58">placing themselves on the Dom because</span> <span data-start="1268.58" data-end="1270.29">then your coupling those modules to the</span> <span data-start="1270.29" data-end="1272.84">state of the Dom at any given time so</span> <span data-start="1272.84" data-end="1274.61">rather what should happen is we should</span> <span data-start="1274.61" data-end="1277.04">delegate that responsibility to another</span> <span data-start="1277.04" data-end="1279.14">component or some another component</span> <span data-start="1279.14" data-end="1281.93">responsible for making a choice of how</span> <span data-start="1281.93" data-end="1283.82">our overall view state is going to be</span> <span data-start="1283.82" data-end="1285.89">composed and so this is going to be the</span> <span data-start="1285.89" data-end="1288.2">job of some kind of layout manager thing</span> <span data-start="1288.2" data-end="1291.08">naming things as hard it's</span> <span data-start="1291.08" data-end="1292.88">responsibility is going to be to compose</span> <span data-start="1292.88" data-end="1296.66">the UI so the layout manager is going to</span> <span data-start="1296.66" data-end="1299.54">define a top-level view a shell and it's</span> <span data-start="1299.54" data-end="1301.19">going to have areas that the modules are</span> <span data-start="1301.19" data-end="1303.26">able to render within so like a sidebar</span> <span data-start="1303.26" data-end="1307.46">for two main content region and when a</span> <span data-start="1307.46" data-end="1309.41">new module is activated the layout</span> <span data-start="1309.41" data-end="1311.51">manager is going to be responsible for</span> <span data-start="1311.51" data-end="1314.48">swapping out existing views with the new</span> <span data-start="1314.48" data-end="1316.82">views that this module is presenting so</span> <span data-start="1316.82" data-end="1318.29">internally the module can figure out</span> <span data-start="1318.29" data-end="1320.39">which control are in which view and all</span> <span data-start="1320.39" data-end="1321.8">of that kind of stuff needs to be</span> <span data-start="1321.8" data-end="1324.14">presented but the layout manager is</span> <span data-start="1324.14" data-end="1326.07">responsible for that composite</span> <span data-start="1326.07" data-end="1328">so it's going to look a little bit like</span> <span data-start="1328" data-end="1329.44">this we've got a bunch of modules</span> <span data-start="1329.44" data-end="1331.299">presenting Mike reviews and a layout</span> <span data-start="1331.299" data-end="1333.22">composer working out how they all work</span> <span data-start="1333.22" data-end="1336.1">together responsible for composing that</span> <span data-start="1336.1" data-end="1339.4">you I so this placement is going to</span> <span data-start="1339.4" data-end="1341.53">occur when our new module is activated</span> <span data-start="1341.53" data-end="1344.74">how does that work so the thing I think</span> <span data-start="1344.74" data-end="1346.9">should be responsible for this is</span> <span data-start="1346.9" data-end="1348.669">forgiving the modules to the layout</span> <span data-start="1348.669" data-end="1350.23">manager as some kind of dispatcher</span> <span data-start="1350.23" data-end="1352.12">object it's going to listen for</span> <span data-start="1352.12" data-end="1353.919">interesting events which indicate that a</span> <span data-start="1353.919" data-end="1356.799">new module needs to be involved and when</span> <span data-start="1356.799" data-end="1359.65">it when it asks when when it receives</span> <span data-start="1359.65" data-end="1361.21">these interesting events it's going to</span> <span data-start="1361.21" data-end="1362.44">load the target module it's going to</span> <span data-start="1362.44" data-end="1363.85">instantiate it and it's going to give it</span> <span data-start="1363.85" data-end="1366.7">to the layout manager who will then in</span> <span data-start="1366.7" data-end="1371.5">turn compose the application shell so</span> <span data-start="1371.5" data-end="1373.51">one of the interesting events that this</span> <span data-start="1373.51" data-end="1375.64">dispatcher object thing might listen to</span> <span data-start="1375.64" data-end="1379.87">our our routes so a routing event might</span> <span data-start="1379.87" data-end="1381.22">fire and the router is going to</span> <span data-start="1381.22" data-end="1383.26">facilitate the mapping between a URL and</span> <span data-start="1383.26" data-end="1385.57">a module or even a collection of modules</span> <span data-start="1385.57" data-end="1388.09">it's responsible for observing on and</span> <span data-start="1388.09" data-end="1390.61">acting on URL changes but it doesn't</span> <span data-start="1390.61" data-end="1392.53">actually do anything with it other than</span> <span data-start="1392.53" data-end="1394.539">say hey the routes changed and these are</span> <span data-start="1394.539" data-end="1395.71">the modules that I know you need to</span> <span data-start="1395.71" data-end="1398.919">invoke now it's going to delegate over</span> <span data-start="1398.919" data-end="1401.2">to the dispatcher and the really cool</span> <span data-start="1401.2" data-end="1402.669">thing about this as it means that other</span> <span data-start="1402.669" data-end="1404.86">events have the opportunity to be raised</span> <span data-start="1404.86" data-end="1406.72">and signal to the dispatcher that new</span> <span data-start="1406.72" data-end="1408.039">module should be loaded we're not</span> <span data-start="1408.039" data-end="1410.23">hinging our design around route changes</span> <span data-start="1410.23" data-end="1412.059">or out changes kind of sit on the side</span> <span data-start="1412.059" data-end="1422.35">as a feature</span> <span data-start="1422.36" data-end="1425.18">and then the last thing that we have is</span> <span data-start="1425.18" data-end="1428.33">the bootstrap over application so this</span> <span data-start="1428.33" data-end="1429.71">is the entry point and the extra point</span> <span data-start="1429.71" data-end="1431.42">of our application and it's responsible</span> <span data-start="1431.42" data-end="1433.61">for composing the the top level</span> <span data-start="1433.61" data-end="1435.95">architecture that we've kind of got</span> <span data-start="1435.95" data-end="1438.44">going on here and it also acts as an</span> <span data-start="1438.44" data-end="1442.46">extension point for your life cycle so</span> <span data-start="1442.46" data-end="1443.9">we've split up some of those concerns</span> <span data-start="1443.9" data-end="1446.84">that we had around state and events and</span> <span data-start="1446.84" data-end="1448.07">all the many views that we were</span> <span data-start="1448.07" data-end="1449.42">displaying at any given point in time</span> <span data-start="1449.42" data-end="1452.06">and the state of the address bar we've</span> <span data-start="1452.06" data-end="1453.86">come up with a much more composable</span> <span data-start="1453.86" data-end="1455.96">design where we're using events to</span> <span data-start="1455.96" data-end="1457.58">transition into new states and a</span> <span data-start="1457.58" data-end="1461.54">nonlinear fashion so I've actually gone</span> <span data-start="1461.54" data-end="1464.93">really quick so if it was too long and</span> <span data-start="1464.93" data-end="1467.24">you didn't read it because reasons I'll</span> <span data-start="1467.24" data-end="1469.43">sum it up for you so the management of</span> <span data-start="1469.43" data-end="1470.9">our state's basically it's really hard</span> <span data-start="1470.9" data-end="1473.42">when we don't separate our concerns when</span> <span data-start="1473.42" data-end="1475.16">when the complexity starts to blow out</span> <span data-start="1475.16" data-end="1477.59">on the client we should be using routes</span> <span data-start="1477.59" data-end="1479.33">were dressed state but never state</span> <span data-start="1479.33" data-end="1481.28">transitions and we should be taking</span> <span data-start="1481.28" data-end="1483.92">ideas from one context from it from</span> <span data-start="1483.92" data-end="1485.69">another and applying them and taking</span> <span data-start="1485.69" data-end="1487.49">inspiration server that's great that's</span> <span data-start="1487.49" data-end="1489.95">how new ideas form but if we're not</span> <span data-start="1489.95" data-end="1491.54">careful and we treat this like a</span> <span data-start="1491.54" data-end="1494.72">rulebook we start to apply patterns that</span> <span data-start="1494.72" data-end="1497.39">work well for a linear for a linear</span> <span data-start="1497.39" data-end="1499.82">architecture in an estate space where</span> <span data-start="1499.82" data-end="1501.53">it's nonlinear and the cracks start to</span> <span data-start="1501.53" data-end="1504.38">show so we need to mold these ideas to</span> <span data-start="1504.38" data-end="1506.03">support the new requirements the</span> <span data-start="1506.03" data-end="1510.14">requirement to be stifled so we need to</span> <span data-start="1510.14" data-end="1511.88">embrace events within the same xicon</span> <span data-start="1511.88" data-end="1514.34">execution context and we don't want to</span> <span data-start="1514.34" data-end="1517.97">make everything into our router we need</span> <span data-start="1517.97" data-end="1519.41">to make sure that we're architecting our</span> <span data-start="1519.41" data-end="1522.05">client side code lists like it's a web</span> <span data-start="1522.05" data-end="1524.36">server because let's face it it's not a</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
