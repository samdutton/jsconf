<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="JSConf transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>7vUs5yOuv-o</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/7vUs5yOuv-o?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="0.11" data-end="38.52">[Music]</span> <span data-start="38.53" data-end="41.06">I'm sorry this conferences loves video</span> <span data-start="41.06" data-end="44.42">effects I've gotta got to do it alright</span> <span data-start="44.42" data-end="47.739">so today we're going to talk about</span> <span data-start="47.739" data-end="53.57">loading on the web loading is a user</span> <span data-start="53.57" data-end="57.29">journey with very disparate expectations</span> <span data-start="57.29" data-end="59.66">you're basically sending thousands and</span> <span data-start="59.66" data-end="61.07">thousands of bytes down the wire and</span> <span data-start="61.07" data-end="63.32">hoping that whatever comes out from the</span> <span data-start="63.32" data-end="65.15">very end of that is something that's</span> <span data-start="65.15" data-end="67.25">actually useful to your users and helps</span> <span data-start="67.25" data-end="68.659">them interact with your applications</span> <span data-start="68.659" data-end="70.88">relatively quickly so I thought that</span> <span data-start="70.88" data-end="72.409">today we'd have a conversation about</span> <span data-start="72.409" data-end="75.92">loading now we can really have a</span> <span data-start="75.92" data-end="77.24">conversation about loading without</span> <span data-start="77.24" data-end="78.77">talking about where we're at right now</span> <span data-start="78.77" data-end="81.5">so this is what the average web page on</span> <span data-start="81.5" data-end="83.99">mobile looks like in 2017</span> <span data-start="83.99" data-end="85.7">whether it's built with sort of a</span> </p>
<p><span data-start="85.7" data-end="87.92">JavaScript framework or just a static</span> <span data-start="87.92" data-end="91.04">site in many cases it takes 16 seconds</span> <span data-start="91.04" data-end="93.56">to get interactive on a real mobile</span> <span data-start="93.56" data-end="97.009">device on 3G usually takes 19 seconds to</span> <span data-start="97.009" data-end="99.74">be fully loaded and people mostly send</span> <span data-start="99.74" data-end="101.479">you know somewhere in the region of 420</span> <span data-start="101.479" data-end="103.43">450 kilobytes of JavaScript down the</span> <span data-start="103.43" data-end="106.1">wire and why does any of this actually</span> <span data-start="106.1" data-end="108.5">matter well if we take a look at a high</span> <span data-start="108.5" data-end="110.27">level and how the browser actually</span> <span data-start="110.27" data-end="112.909">manages to get anything render to the</span> <span data-start="112.909" data-end="114.5">screen from the network it's a</span> <span data-start="114.5" data-end="116.63">relatively simple process we send a</span> <span data-start="116.63" data-end="119.63">request out server returns an HTML we go</span> <span data-start="119.63" data-end="121.909">and we parse the CSS and JavaScript and</span> <span data-start="121.909" data-end="123.109">images and anything else that comes back</span> <span data-start="123.109" data-end="124.729">and then we actually have to parse</span> <span data-start="124.729" data-end="126.829">compile and render that code in order to</span> <span data-start="126.829" data-end="128.72">render and turn onto pixels on the</span> <span data-start="128.72" data-end="131.9">screen right but it's never quite that</span> <span data-start="131.9" data-end="136.22">simple we're usually developing on</span> <span data-start="136.22" data-end="138.89">relatively powerful high-end desktop</span> <span data-start="138.89" data-end="141.53">machines and the expectations that we</span> <span data-start="141.53" data-end="143.21">have when we're profiling there are</span> <span data-start="143.21" data-end="145.4">quite different to mobile particularly</span> <span data-start="145.4" data-end="146.33">when it comes to things like JavaScript</span> <span data-start="146.33" data-end="148.55">startup performance where on a real</span> <span data-start="148.55" data-end="149.84">world mobile device you can end up</span> <span data-start="149.84" data-end="151.73">seeing anywhere between 4 and 5 times</span> <span data-start="151.73" data-end="155.24">with a slowdown so the first thing I</span> <span data-start="155.24" data-end="157.28">think that we as a community need to</span> <span data-start="157.28" data-end="159.74">shift worth doing is actually testing on</span> <span data-start="159.74" data-end="162.45">real phones and real networks</span> </p>
<p><span data-start="162.45" data-end="163.68">I know there are a bunch of people so</span> <span data-start="163.68" data-end="164.97">how many people here actually used like</span> <span data-start="164.97" data-end="167.79">the dev tools network emulation or CPU</span> <span data-start="167.79" data-end="169.86">throttling or device node so a lot of</span> <span data-start="169.86" data-end="171.39">people here that's great that's a great</span> <span data-start="171.39" data-end="173.19">first step we need to do better than</span> <span data-start="173.19" data-end="175.319">that though because mobile devices have</span> <span data-start="175.319" data-end="177.24">got different GPUs different CPUs</span> <span data-start="177.24" data-end="178.77">different memory different battery</span> <span data-start="178.77" data-end="180.72">characteristics so there's a lot that we</span> <span data-start="180.72" data-end="182.819">can do there for people that want to</span> <span data-start="182.819" data-end="184.44">start doing that today we recently</span> <span data-start="184.44" data-end="186.8">shipped the new part of webpagetest.org</span> <span data-start="186.8" data-end="189.87">called slash easy so webpagetest.org</span> <span data-start="189.87" data-end="192.33">slash easy has got a whole farm of</span> <span data-start="192.33" data-end="193.77">average mobile devices on there right</span> <span data-start="193.77" data-end="195.87">now with easy profiles for going and</span> <span data-start="195.87" data-end="198.45">checking out your performance now a lot</span> <span data-start="198.45" data-end="200.13">of the time we talk about mobile</span> <span data-start="200.13" data-end="201.63">performance these days we reference this</span> <span data-start="201.63" data-end="204.269">idea of time to interactive and the idea</span> <span data-start="204.269" data-end="206.28">there is that you're just able to make</span> <span data-start="206.28" data-end="207.66">sure that the user can actually tap</span> <span data-start="207.66" data-end="209.069">around your interface and how something</span> <span data-start="209.069" data-end="212.16">useful actually happen in this case I</span> <span data-start="212.16" data-end="213.569">think that someone is going through like</span> <span data-start="213.569" data-end="214.98">a withdrawal symptom because there isn't</span> <span data-start="214.98" data-end="216.69">actually anything on their phone looks a</span> <span data-start="216.69" data-end="220.8">little bit dead so there are a few rules</span> <span data-start="220.8" data-end="222.239">that I like to follow and I'm building</span> <span data-start="222.239" data-end="223.89">modern web apps that try to load</span> <span data-start="223.89" data-end="226.019">efficiently the first is only load what</span> <span data-start="226.019" data-end="228.299">you need so trying to make sure that if</span> <span data-start="228.299" data-end="229.86">you're shipping script and CSS and</span> <span data-start="229.86" data-end="231.239">everything else down the wire that it's</span> <span data-start="231.239" data-end="232.29">only the things that are going to</span> <span data-start="232.29" data-end="234.36">actually be useful to the users initial</span> <span data-start="234.36" data-end="236.88">experience that you're using idle time</span> <span data-start="236.88" data-end="239.7">to load in anything else so your comment</span> <span data-start="239.7" data-end="241.41">threads any additional pages that might</span> <span data-start="241.41" data-end="242.549">be needed for the rest of the user</span> <span data-start="242.549" data-end="244.32">experience now there are a lot of things</span> <span data-start="244.32" data-end="246.36">that we can do to actually help load</span> <span data-start="246.36" data-end="249.18">less code one of the first things is</span> <span data-start="249.18" data-end="250.829">code splitting so code splitting</span> <span data-start="250.829" data-end="252.18">something that a lot of you probably are</span> <span data-start="252.18" data-end="254.459">familiar with as a concept relatively</span> <span data-start="254.459" data-end="256.44">straightforward get set up using webpack</span> <span data-start="256.44" data-end="258.359">were split able or closure compiler or</span> <span data-start="258.359" data-end="260.31">browserify the basic idea is that</span> <span data-start="260.31" data-end="262.95">instead of like making your user eat an</span> <span data-start="262.95" data-end="264.66">entire pizza and get really bloated you</span> <span data-start="264.66" data-end="266.19">just give them a single piece at a time</span> <span data-start="266.19" data-end="268.47">and that way hopefully they feel you</span> <span data-start="268.47" data-end="269.76">know a little bit better about the</span> <span data-start="269.76" data-end="271.25">experience that you're shipping down</span> <span data-start="271.25" data-end="273.78">tree-shaking so removing unused exports</span> <span data-start="273.78" data-end="275.669">using things like roll-up also worth</span> <span data-start="275.669" data-end="278.4">spending time on something we don't talk</span> <span data-start="278.4" data-end="281.16">about enough is the fact that the</span> <span data-start="281.16" data-end="282.81">baselines we're using when we're trying</span> <span data-start="282.81" data-end="285.08">to ship powerful experiences on mobile</span> <span data-start="285.08" data-end="287.64">don't always set us up for success today</span> <span data-start="287.64" data-end="290.46">so if a framework for example and I love</span> </p>
<p><span data-start="290.46" data-end="292.68">I love frameworks I created two MVC ela</span> <span data-start="292.68" data-end="294.419">frameworks I use like reactant view and</span> <span data-start="294.419" data-end="294.62">free</span> <span data-start="294.62" data-end="296.66">all the time but the frameworks that we</span> <span data-start="296.66" data-end="299.54">use today are often built with desktop</span> <span data-start="299.54" data-end="301.79">machines in mind and when it comes to</span> <span data-start="301.79" data-end="303.41">actually trying them out on mobile if</span> <span data-start="303.41" data-end="304.58">we're saying you've got to be</span> <span data-start="304.58" data-end="306.38">interactive in like five seconds and</span> <span data-start="306.38" data-end="308.33">your framework is beating up like four</span> <span data-start="308.33" data-end="309.919">seconds of that and it's do it at time</span> <span data-start="309.919" data-end="311.6">that's not setting you up for success so</span> <span data-start="311.6" data-end="313.37">there's probably room that we've got to</span> <span data-start="313.37" data-end="315.02">improve there there are lots of</span> <span data-start="315.02" data-end="317.09">lightweight options today pre-act view</span> <span data-start="317.09" data-end="319.34">svelte polymer there are lots of others</span> <span data-start="319.34" data-end="320.69">they generally have a relatively though</span> <span data-start="320.69" data-end="323.93">parsing startup time over on the dev</span> <span data-start="323.93" data-end="325.19">tools side one of the things that we</span> <span data-start="325.19" data-end="327.32">recently shipped to help you with this</span> <span data-start="327.32" data-end="329.21">idea of shipping less code is a feature</span> <span data-start="329.21" data-end="331.789">called code coverage the idea here is</span> <span data-start="331.789" data-end="334.58">that you just load up you're out you hit</span> <span data-start="334.58" data-end="336.44">record in this new item in the drawer</span> <span data-start="336.44" data-end="338.63">and then we tell you what blocks of code</span> <span data-start="338.63" data-end="340.22">actually got executed and which ones</span> <span data-start="340.22" data-end="342.56">didn't so here we've got sort of an</span> <span data-start="342.56" data-end="344.3">indication that maybe you know I'm not</span> <span data-start="344.3" data-end="346.4">really using 50% of the code in the</span> <span data-start="346.4" data-end="348.139">bundle that I'm shipping down and as we</span> <span data-start="348.139" data-end="349.55">click on that and scroll through the</span> <span data-start="349.55" data-end="351.41">sources panel you can see that we</span> <span data-start="351.41" data-end="353">highlight in green code that got</span> <span data-start="353" data-end="355.37">executed and red code that didn't in</span> <span data-start="355.37" data-end="356.84">this case because this is a camera app</span> </p>
<p><span data-start="356.84" data-end="358.669">I've got a lot of code for actually</span> <span data-start="358.669" data-end="360.95">doing cross browser saving a file to an</span> <span data-start="360.95" data-end="362.9">export so I can probably be lazily</span> <span data-start="362.9" data-end="365.57">loading in other things we can do like</span> <span data-start="365.57" data-end="367.099">most of us here probably using a</span> <span data-start="367.099" data-end="369.44">transpiler of some sort to use all the</span> <span data-start="369.44" data-end="371">juicy new features javascript has got</span> <span data-start="371" data-end="373.07">but the reality is that you know cross</span> <span data-start="373.07" data-end="375.38">browser es2015 support is in a</span> <span data-start="375.38" data-end="377">relatively good place right now we don't</span> <span data-start="377" data-end="378.62">always need to be you know sending</span> <span data-start="378.62" data-end="381.229">people down es5 so if you're shipping an</span> <span data-start="381.229" data-end="383.27">experience using babel today i strongly</span> <span data-start="383.27" data-end="385.61">encourage you to try out babel preset</span> <span data-start="385.61" data-end="387.74">ends this will basically only transpile</span> <span data-start="387.74" data-end="390.169">code for the browsers that need it and</span> <span data-start="390.169" data-end="391.88">just keep everything else in es2015</span> <span data-start="391.88" data-end="394.639">let's check that out if you happen to be</span> <span data-start="394.639" data-end="397.31">using low — check out babel plugin low -</span> <span data-start="397.31" data-end="399.47">this is sort of a neat transform that</span> <span data-start="399.47" data-end="401.36">will rewrite your low — code so it only</span> <span data-start="401.36" data-end="402.77">uses the modules that you're actually</span> <span data-start="402.77" data-end="404.3">using in your source rather than the</span> <span data-start="404.3" data-end="408.229">entire package so check that out — this</span> <span data-start="408.229" data-end="410.18">week we also announced after a very long</span> <span data-start="410.18" data-end="410.75">wait</span> <span data-start="410.75" data-end="414.58">support for es2015 modules in chrome</span> <span data-start="414.58" data-end="417.62">thank you this is something that will</span> <span data-start="417.62" data-end="419.539">hopefully encourage again a little bit</span> <span data-start="419.539" data-end="421.61">less transformation and is something</span> <span data-start="421.61" data-end="422.57">that will open up a few more</span> <span data-start="422.57" data-end="423.919">opportunities for interesting loading</span> <span data-start="423.919" data-end="426.2">experiences across the board the next</span> <span data-start="426.2" data-end="427.19">thing I like to do</span> <span data-start="427.19" data-end="430.46">is order loading thoughtfully you know</span> <span data-start="430.46" data-end="432.23">more than anybody else in the stack you</span> <span data-start="432.23" data-end="433.43">know what is important to your user</span> <span data-start="433.43" data-end="435.65">journey and what needs to be sent down</span> <span data-start="435.65" data-end="437.96">earlier on than anything else something</span> <span data-start="437.96" data-end="439.97">that we recently also shipped in dev</span> <span data-start="439.97" data-end="441.53">tools to help with this is a feature</span> <span data-start="441.53" data-end="444.05">called network request blocking that's</span> <span data-start="444.05" data-end="446.24">in canary right now the idea here is</span> <span data-start="446.24" data-end="448.52">that in the network waterfall for any</span> <span data-start="448.52" data-end="450.89">site you can right-click on a network</span> <span data-start="450.89" data-end="452.9">request and you can block it or you can</span> <span data-start="452.9" data-end="454.67">block the domain and take a look at what</span> <span data-start="454.67" data-end="456.89">impact that has on the overall critical</span> <span data-start="456.89" data-end="458.63">path of your site I'm particularly</span> <span data-start="458.63" data-end="459.8">useful if you've got a lot of</span> <span data-start="459.8" data-end="462.31">third-party code that's slowing you down</span> <span data-start="462.31" data-end="464.66">and finally cache aggressively and</span> <span data-start="464.66" data-end="467.15">granularly cache as much as you can</span> <span data-start="467.15" data-end="469.43">locally that's both with HTTP cache but</span> <span data-start="469.43" data-end="471.65">also using serviceworker caching at</span> </p>
<p><span data-start="471.65" data-end="474.26">Google we've been trying to ramp up our</span> <span data-start="474.26" data-end="475.79">investment in serviceworker for a lot of</span> <span data-start="475.79" data-end="478.64">our flagship apps inbox has been using</span> <span data-start="478.64" data-end="481.19">serviceworker quite a lot and recently</span> <span data-start="481.19" data-end="483.68">saw a 10% improvement in time to</span> <span data-start="483.68" data-end="485.12">interactive just by making sure that</span> <span data-start="485.12" data-end="486.83">they're using it for things like static</span> <span data-start="486.83" data-end="491.45">resource caching now about three years</span> <span data-start="491.45" data-end="495.26">ago I was speaking at CSS comp and we</span> <span data-start="495.26" data-end="496.76">spent the whole talk sort of optimizing</span> <span data-start="496.76" data-end="499.13">jazz comp that you and I thought you</span> <span data-start="499.13" data-end="500.57">know given that I'm back here it'd be</span> <span data-start="500.57" data-end="502.72">kind of fun to do that again at a much</span> <span data-start="502.72" data-end="507.14">shorter rate but also a little bit may</span> <span data-start="507.14" data-end="510.02">be unorthodox plea so what we're going</span> <span data-start="510.02" data-end="513.11">to do is we're going to hack chrome to</span> <span data-start="513.11" data-end="515">make j/s confi you load a little bit</span> <span data-start="515" data-end="515.57">faster</span> <span data-start="515.57" data-end="517.43">this guy's not in fact a hacker he's</span> <span data-start="517.43" data-end="519.68">just like scrolling through his web pack</span> <span data-start="519.68" data-end="523">on fake or something</span> <span data-start="523" data-end="527.75">so you dive into C++ in chrome and you</span> <span data-start="527.75" data-end="529.4">find this file called resource fetcher</span> <span data-start="529.4" data-end="530.75">and resource fetcher is one of these</span> <span data-start="530.75" data-end="532.25">files I know nobody can see this so</span> <span data-start="532.25" data-end="534.08">let's just zoom in here this is one of</span> <span data-start="534.08" data-end="536.42">these files that define how chrome</span> <span data-start="536.42" data-end="538.1">actually handles the prioritization for</span> <span data-start="538.1" data-end="540.65">different types of resources so your CSS</span> <span data-start="540.65" data-end="543.47">your JavaScript your images I don't</span> <span data-start="543.47" data-end="545.03">expect anybody to read this so here's</span> <span data-start="545.03" data-end="546.85">the table of how we actually handle this</span> <span data-start="546.85" data-end="550.19">layout blocking resources like CSS and</span> <span data-start="550.19" data-end="552.65">fonts get the highest priority load in</span> <span data-start="552.65" data-end="554.6">layout blocking phase resources like</span> <span data-start="554.6" data-end="557.51">scripts or images that happens being the</span> <span data-start="557.51" data-end="560.33">viewport get a medium priority and then</span> <span data-start="560.33" data-end="561.08">everything from your</span> <span data-start="561.08" data-end="563.33">basing scripts to images that are</span> <span data-start="563.33" data-end="565.52">outside of the viewport mismatch CSS</span> <span data-start="565.52" data-end="567.41">they get a much much lower priority</span> <span data-start="567.41" data-end="569.3">what's interesting about this table</span> <span data-start="569.3" data-end="571.79">actually is that images in your viewport</span> <span data-start="571.79" data-end="573.89">get a medium priority and stuff that's</span> <span data-start="573.89" data-end="575.21">outside of they get a lower one so we</span> <span data-start="575.21" data-end="577.01">kind of do automatic lazy loading of</span> <span data-start="577.01" data-end="580.88">images to some extent by default that's</span> <span data-start="580.88" data-end="582.53">great but as a developer you probably</span> <span data-start="582.53" data-end="584.06">care more about where this is exposed</span> <span data-start="584.06" data-end="586.1">for you so in the network panel there's</span> <span data-start="586.1" data-end="587.75">a column called priority that will tell</span> <span data-start="587.75" data-end="589.34">you exactly what we're already was used</span> <span data-start="589.34" data-end="591.44">for any of the resources that you wanted</span> <span data-start="591.44" data-end="594.92">to load so we're back here and the part</span> <span data-start="594.92" data-end="595.88">of chrome that we're going to hack is</span> <span data-start="595.88" data-end="596.6">we're actually going to change</span> <span data-start="596.6" data-end="599.06">absolutely every single type of resource</span> <span data-start="599.06" data-end="601.43">to load with an extremely high priority</span> <span data-start="601.43" data-end="603.8">it sounds like a great idea right so</span> <span data-start="603.8" data-end="607.13">let's let's do that and that's going to</span> <span data-start="607.13" data-end="610.34">fix all of our problems and I can just</span> <span data-start="610.34" data-end="613.31">end the talk there right we could ship a</span> <span data-start="613.31" data-end="615.86">new browser we could call it so I</span> <span data-start="615.86" data-end="617.39">discovered Germany it's got this</span> <span data-start="617.39" data-end="619.73">wonderful world called vers lemon</span> <span data-start="619.73" data-end="623.75">discern which that's a terrible</span> <span data-start="623.75" data-end="626.18">pronunciation but it means when you try</span> <span data-start="626.18" data-end="627.89">to fix something but you actually made</span> <span data-start="627.89" data-end="632.9">it a whole lot worse and I did so this</span> <span data-start="632.9" data-end="634.79">is the original filmstrip for a jazz</span> <span data-start="634.79" data-end="636.08">talk to you and this is what it looks</span> <span data-start="636.08" data-end="637.7">like when everything is considered high</span> <span data-start="637.7" data-end="639.17">priority we've actually completely</span> <span data-start="639.17" data-end="641.27">shifted first meaningful paint way back</span> <span data-start="641.27" data-end="645.02">performance is worse lesson there when</span> <span data-start="645.02" data-end="646.28">everything is high priority</span> <span data-start="646.28" data-end="650.27">nothing is and I ended up fixing this by</span> <span data-start="650.27" data-end="651.47">going through the different types of</span> <span data-start="651.47" data-end="652.73">resources that are used in this</span> <span data-start="652.73" data-end="654.05">particular page and trying to figure out</span> <span data-start="654.05" data-end="656.09">okay well are the image of the most</span> <span data-start="656.09" data-end="658.13">important things the CSS and as it turns</span> <span data-start="658.13" data-end="661.19">out it was the CSS and fonts so let's do</span> <span data-start="661.19" data-end="663.5">this right by the browser we talked</span> <span data-start="663.5" data-end="665.15">already about sort of at the high level</span> <span data-start="665.15" data-end="667.76">how never for process work but there's a</span> <span data-start="667.76" data-end="669.56">piece of this puzzle that I didn't quite</span> <span data-start="669.56" data-end="671.72">dive into and that's the browser preload</span> <span data-start="671.72" data-end="674.63">scanner now browsers like Chrome have</span> <span data-start="674.63" data-end="677.06">got a document parser and as we go</span> <span data-start="677.06" data-end="678.47">through the tokenization phase of</span> <span data-start="678.47" data-end="679.7">actually reading through all the</span> <span data-start="679.7" data-end="681.52">different tokens that compose your HTML</span> <span data-start="681.52" data-end="684.29">we will go and try to fetch those</span> <span data-start="684.29" data-end="686.06">resources and start processing them if</span> <span data-start="686.06" data-end="688.31">we run into like a blocking script</span> <span data-start="688.31" data-end="690.59">that's going to stop the document parser</span> <span data-start="690.59" data-end="692.63">in its tracks which is why we have the</span> <span data-start="692.63" data-end="694.3">sort of fallback thing that</span> <span data-start="694.3" data-end="696.28">load scanner which is able to look ahead</span> <span data-start="696.28" data-end="699.25">even when the you know dr. MacArthur is</span> <span data-start="699.25" data-end="702.01">blocked and find other resources that we</span> <span data-start="702.01" data-end="704.98">can continue to fetch and process when</span> <span data-start="704.98" data-end="706.24">this change was first introduced in</span> <span data-start="706.24" data-end="707.44">chrome I believe it introduced like a</span> <span data-start="707.44" data-end="709.66">20% improvement over all the time so the</span> <span data-start="709.66" data-end="711.85">preload scanner is pretty cool but we</span> <span data-start="711.85" data-end="713.44">run into this other interesting</span> <span data-start="713.44" data-end="718.69">challenge which is discovery no browser</span> <span data-start="718.69" data-end="721.51">knows exactly what sequence of things to</span> <span data-start="721.51" data-end="722.8">load to make sure that your page is</span> <span data-start="722.8" data-end="724.9">going to be fast you more than anybody</span> <span data-start="724.9" data-end="726.79">else again know what's important in your</span> <span data-start="726.79" data-end="729.04">page whether it's your web pack bundles</span> <span data-start="729.04" data-end="730.51">that need to be loaded early on or</span> <span data-start="730.51" data-end="734.7">something else and so to address</span> <span data-start="734.7" data-end="737.17">discoverability and the ability for you</span> <span data-start="737.17" data-end="738.55">as an author to be able to say what you</span> <span data-start="738.55" data-end="740.65">consider to be high priority you can use</span> <span data-start="740.65" data-end="742.54">things like link rel preload which works</span> <span data-start="742.54" data-end="744.04">with scripts and stylesheets and other</span> <span data-start="744.04" data-end="746.08">types of resources and it's basically a</span> <span data-start="746.08" data-end="747.79">declarative fetch that tells the browser</span> <span data-start="747.79" data-end="749.8">that you consider something to be high</span> <span data-start="749.8" data-end="753.28">priority now this is what the impact of</span> <span data-start="753.28" data-end="755.5">using it on you know a site that happens</span> <span data-start="755.5" data-end="757.51">to be using webpack looked like you</span> <span data-start="757.51" data-end="759.22">you kind of shift all of the yellow</span> <span data-start="759.22" data-end="762.13">that's on the right right all the way to</span> <span data-start="762.13" data-end="764.74">the left at parse time I seeing this</span> <span data-start="764.74" data-end="766.78">pattern being used increasingly in</span> <span data-start="766.78" data-end="768.52">progressive web apps where it's having a</span> <span data-start="768.52" data-end="770.35">positive impact on time to interactive</span> <span data-start="770.35" data-end="772.72">for a lot of folks so I check that out</span> <span data-start="772.72" data-end="774.7">if you're interested in actually hooking</span> <span data-start="774.7" data-end="776.23">this up to your build process today I</span> <span data-start="776.23" data-end="778.57">wrote a web pack plug-in called preload</span> <span data-start="778.57" data-end="781.42">web pack plug-in they can do this for a</span> <span data-start="781.42" data-end="782.77">synchronous chunks as well as like</span> <span data-start="782.77" data-end="784.45">normal chunks so check it out if you</span> <span data-start="784.45" data-end="788.98">find it interesting over on chrome the</span> <span data-start="788.98" data-end="791.35">polymer team worked on an app a while</span> <span data-start="791.35" data-end="793.96">ago called shop and the idea behind shop</span> <span data-start="793.96" data-end="795.7">was trying to see you know if we if we</span> <span data-start="795.7" data-end="797.2">use the web platform and the web</span> <span data-start="797.2" data-end="798.64">platform features that are available to</span> <span data-start="798.64" data-end="801.04">us today just how fast we make a modern</span> <span data-start="801.04" data-end="802.6">web experience that was sort of</span> <span data-start="802.6" data-end="805.36">non-trivial and shop kind of checked</span> <span data-start="805.36" data-end="808.24">that off it was able to reach sort of</span> <span data-start="808.24" data-end="810.34">granular loading you're able to tap on</span> <span data-start="810.34" data-end="811.9">things and everything is just really</span> <span data-start="811.9" data-end="814">nice and buttery smooth on mobile but</span> <span data-start="814" data-end="816.16">how did they accomplish this so they</span> <span data-start="816.16" data-end="817.66">used a pattern we came up with about</span> <span data-start="817.66" data-end="820.39">last year called purple and the idea</span> <span data-start="820.39" data-end="822.97">with purple is that you try to make sure</span> <span data-start="822.97" data-end="825.07">that you're sending down the most</span> <span data-start="825.07" data-end="826.99">important things for the user as early</span> <span data-start="826.99" data-end="828.579">on as possible</span> <span data-start="828.579" data-end="830.499">you push the minimal code needed for a</span> <span data-start="830.499" data-end="833.619">route you render that route for next</span> <span data-start="833.619" data-end="836.8">routes you're able to precache anything</span> <span data-start="836.8" data-end="838.809">using service workers so that not only</span> <span data-start="838.809" data-end="840.55">is that stuff already available locally</span> <span data-start="840.55" data-end="841.689">in the disk cache when they try</span> <span data-start="841.689" data-end="843.55">navigating to it but it's constantly</span> <span data-start="843.55" data-end="846.16">available on repeat visits in addition</span> <span data-start="846.16" data-end="848.889">for JavaScript using serviceworker we'll</span> <span data-start="848.889" data-end="852.759">actually early on opt you into v8 code</span> <span data-start="852.759" data-end="854.949">cache which will save you a little bit</span> <span data-start="854.949" data-end="856.089">of time on things like parsing</span> <span data-start="856.089" data-end="858.04">compilation and then the pattern</span> <span data-start="858.04" data-end="860.41">suggests lazy loading code that you need</span> <span data-start="860.41" data-end="862.499">for other parts of your user experience</span> <span data-start="862.499" data-end="864.189">so let's take a look at what that</span> <span data-start="864.189" data-end="866.079">actually looks like so this is um this</span> <span data-start="866.079" data-end="868.269">is shop before any optimizations were</span> <span data-start="868.269" data-end="872.139">applied you see sort of this this step</span> <span data-start="872.139" data-end="876.22">pattern in the timeline this is a CB 2</span> <span data-start="876.22" data-end="879.549">with 3G and remember that little block</span> <span data-start="879.549" data-end="880.929">at the very start we're not actually</span> <span data-start="880.929" data-end="883.119">seeing any any activity we're going to</span> <span data-start="883.119" data-end="886.059">go back to that limit later with preload</span> <span data-start="886.059" data-end="887.649">we actually changed the shape of that</span> <span data-start="887.649" data-end="888.97">completely so we've gone from this to</span> <span data-start="888.97" data-end="890.86">something looks like this basically</span> <span data-start="890.86" data-end="892.839">we've shifted our time a little bit</span> <span data-start="892.839" data-end="895.209">everything is now going to be attempting</span> <span data-start="895.209" data-end="897.999">to load in parallel to some extent and</span> <span data-start="897.999" data-end="899.529">that's start that starts shaving off</span> <span data-start="899.529" data-end="900.819">some time over the overall user</span> <span data-start="900.819" data-end="903.579">experience but it still comes with the</span> <span data-start="903.579" data-end="906.97">cost of multiple round trips and this is</span> <span data-start="906.97" data-end="909.309">where things like hb2 server push can</span> <span data-start="909.309" data-end="910.48">actually come in useful</span> <span data-start="910.48" data-end="913.36">now what push allows us to do is as an</span> <span data-start="913.36" data-end="915.61">author specify using a manifest the</span> <span data-start="915.61" data-end="916.869">files that we know are going to be</span> <span data-start="916.869" data-end="920.35">critical to the user journey instead of</span> <span data-start="920.35" data-end="922.119">just you know pushing down the request</span> <span data-start="922.119" data-end="924.519">you know sending the browser some HTML</span> <span data-start="924.519" data-end="926.499">with spending to be parsed when we send</span> <span data-start="926.499" data-end="928.48">back that an is real HTML we can also</span> <span data-start="928.48" data-end="930.459">start sending down a list of files that</span> <span data-start="930.459" data-end="932.41">are super important to start fetching</span> <span data-start="932.41" data-end="934.66">for the experience effectively we're</span> <span data-start="934.66" data-end="937.389">filling up server think time we're today</span> <span data-start="937.389" data-end="938.889">in a lot of cases we're not actually</span> <span data-start="938.889" data-end="942.339">doing that so hey speed to server push</span> <span data-start="942.339" data-end="944.139">is great for that and the impact that it</span> <span data-start="944.139" data-end="946.179">had on this particular app was quite</span> <span data-start="946.179" data-end="947.86">stark again we've shaved thousands of</span> <span data-start="947.86" data-end="950.679">milliseconds off of the overall time for</span> <span data-start="950.679" data-end="952.6">this app to get interactive and to load</span> <span data-start="952.6" data-end="955.98">in general using this technique</span> <span data-start="955.98" data-end="958.689">unfortunately hb2 server pushes not a</span> <span data-start="958.689" data-end="961.079">silver bullet by any means</span> <span data-start="961.079" data-end="963.959">it's not particularly Kasia we're in a</span> <span data-start="963.959" data-end="965.49">perfect world we have the ability to</span> <span data-start="965.49" data-end="967.68">have a cache digest or something that</span> <span data-start="967.68" data-end="969.959">lets you know what exactly is in your</span> <span data-start="969.959" data-end="972.66">user cache and so it's very easy to run</span> <span data-start="972.66" data-end="974.519">into cases where you know every single</span> <span data-start="974.519" data-end="976.44">time someone comes to your site you're</span> <span data-start="976.44" data-end="978.3">just force pushing them you know the</span> <span data-start="978.3" data-end="980.16">same set of files even if it's inside</span> <span data-start="980.16" data-end="984.11">their cache which is not exactly ideal</span> <span data-start="984.11" data-end="988.23">so push versus preload you know push can</span> <span data-start="988.23" data-end="990.959">cut out a whole RCT it's not cache weird</span> <span data-start="990.959" data-end="992.579">there's no real prioritization in place</span> <span data-start="992.579" data-end="994.32">preload is particularly useful because</span> <span data-start="994.32" data-end="996.54">in addition to what push can do it also</span> <span data-start="996.54" data-end="998.459">you know sports cross-origin requests</span> <span data-start="998.459" data-end="1000.32">got load narrower events got content</span> <span data-start="1000.32" data-end="1003.529">negotiation but how do we address this</span> <span data-start="1003.529" data-end="1005.39">issue of h2 push not particularly</span> <span data-start="1005.39" data-end="1007.37">knowing what's in the cache what we can</span> <span data-start="1007.37" data-end="1009.079">use serviceworker if we have a</span> <span data-start="1009.079" data-end="1011.089">serviceworker registered in such a way</span> <span data-start="1011.089" data-end="1012.86">that instead of going to the network</span> <span data-start="1012.86" data-end="1014.87">every single time that we need you know</span> <span data-start="1014.87" data-end="1016.94">more resources to be fetched we're just</span> <span data-start="1016.94" data-end="1018.769">trying to get them locally based on what</span> <span data-start="1018.769" data-end="1021.2">is already cached we avoid this issue of</span> <span data-start="1021.2" data-end="1023.72">needing cache digests and it makes this</span> <span data-start="1023.72" data-end="1029.27">entire setup relatively sane for shop in</span> <span data-start="1029.27" data-end="1030.559">particular this meant that on repeat</span> <span data-start="1030.559" data-end="1032.48">visits once you tie absolutely</span> <span data-start="1032.48" data-end="1034.13">everything in purple together you're</span> <span data-start="1034.13" data-end="1035.78">actually able to boot up and get</span> <span data-start="1035.78" data-end="1037.37">interactive in just a few hundred</span> <span data-start="1037.37" data-end="1038.959">milliseconds it's quite a powerful</span> <span data-start="1038.959" data-end="1041.9">pattern so preload is good for moving</span> <span data-start="1041.9" data-end="1043.28">the start download time of an asset</span> <span data-start="1043.28" data-end="1044.99">closer to the initial request and push</span> <span data-start="1044.99" data-end="1046.85">is good for cutting out a full RTT if</span> <span data-start="1046.85" data-end="1048.23">you have a serviceworker</span> <span data-start="1048.23" data-end="1049.88">thanks to Sam Saucony for a bunch of the</span> <span data-start="1049.88" data-end="1052.52">research that he did in this area the</span> <span data-start="1052.52" data-end="1054.26">next thing I want to talk about is how a</span> <span data-start="1054.26" data-end="1056">lot of this stuff can apply to the apps</span> <span data-start="1056" data-end="1058.19">that you're probably building today out</span> <span data-start="1058.19" data-end="1059.27">of interest how many people here are</span> <span data-start="1059.27" data-end="1061.49">using react as a part of their default</span> <span data-start="1061.49" data-end="1065.36">stack almost everybody or good good size</span> <span data-start="1065.36" data-end="1067.94">the audience so I had the privilege of</span> <span data-start="1067.94" data-end="1069.89">being able to work with Twitter on their</span> <span data-start="1069.89" data-end="1071.45">new progressive web app Twitter light I</span> <span data-start="1071.45" data-end="1073.37">wanted to talk a little bit about the</span> <span data-start="1073.37" data-end="1075.74">learnings that we had there so Twitter</span> <span data-start="1075.74" data-end="1077.63">started off with this which was their</span> <span data-start="1077.63" data-end="1079.52">old mobile web experience and sort of</span> <span data-start="1079.52" data-end="1080.99">the server-side render thing it was</span> <span data-start="1080.99" data-end="1083.63">really really slow and it wasn't</span> <span data-start="1083.63" data-end="1086.6">particularly happy didn't particularly</span> <span data-start="1086.6" data-end="1089.059">encourage users to get engaging with the</span> <span data-start="1089.059" data-end="1090.95">app this is the new progressive web app</span> <span data-start="1090.95" data-end="1094.16">the Twitter shipped very very recently</span> </p>
<p><span data-start="1094.16" data-end="1097.07">Twitter light and one of the</span> <span data-start="1097.07" data-end="1098.99">accomplishments that they had by taking</span> <span data-start="1098.99" data-end="1100.25">advantage of some of the primitives that</span> <span data-start="1100.25" data-end="1101.72">we just talked about is that they're</span> <span data-start="1101.72" data-end="1103.28">able to get interactive in under five</span> <span data-start="1103.28" data-end="1106.28">seconds on 3G which is quite a nice feet</span> <span data-start="1106.28" data-end="1108.53">now this didn't come without an amount</span> <span data-start="1108.53" data-end="1110.78">of pain you know so you can use you know</span> <span data-start="1110.78" data-end="1112.82">modern frameworks like react to shift</span> <span data-start="1112.82" data-end="1114.26">aggressive web apps but you're going to</span> <span data-start="1114.26" data-end="1116.3">have to put the work in to cut down on</span> <span data-start="1116.3" data-end="1117.8">how much you know application code</span> <span data-start="1117.8" data-end="1119.84">you've got going on there you're going</span> <span data-start="1119.84" data-end="1120.95">to have to take advantage of code</span> <span data-start="1120.95" data-end="1122.09">splitting you're going to have to make</span> <span data-start="1122.09" data-end="1124.16">sure that you're just granularly loading</span> <span data-start="1124.16" data-end="1127.42">and serving things in as well as you can</span> <span data-start="1127.42" data-end="1130.28">so when Twitter first started working on</span> <span data-start="1130.28" data-end="1132.71">this app early on they they had a</span> <span data-start="1132.71" data-end="1134.15">relatively poor time to interactive</span> <span data-start="1134.15" data-end="1136.16">score so they were looking at about 15</span> <span data-start="1136.16" data-end="1138.14">16 milliseconds before anyone could</span> <span data-start="1138.14" data-end="1139.4">actually start tapping around the</span> <span data-start="1139.4" data-end="1141.83">interface so not too far away from where</span> <span data-start="1141.83" data-end="1145.61">a lot of us probably are today most of</span> <span data-start="1145.61" data-end="1148.04">their critical path was dominated by</span> <span data-start="1148.04" data-end="1150.56">time spent in script just booting up and</span> <span data-start="1150.56" data-end="1152.36">so they started taking a look at</span> <span data-start="1152.36" data-end="1154.4">patterns like purple and and how they</span> <span data-start="1154.4" data-end="1156.2">could take advantage of them the first</span> <span data-start="1156.2" data-end="1157.76">thing they introduced was support for</span> </p>
<p><span data-start="1157.76" data-end="1160.01">DNS prefetch so the ability to you know</span> <span data-start="1160.01" data-end="1162.44">just specify declaratively what servers</span> <span data-start="1162.44" data-end="1163.58">you want to start warming your DNS</span> <span data-start="1163.58" data-end="1166.34">connections up to that led to an 18%</span> <span data-start="1166.34" data-end="1168.23">perform performance improvement on what</span> <span data-start="1168.23" data-end="1170">they initially had just for at least</span> <span data-start="1170" data-end="1173">hitting things like FMP next they</span> <span data-start="1173" data-end="1175.04">investigated using preload for their</span> <span data-start="1175.04" data-end="1178.04">critical scripts I can't tell you how</span> <span data-start="1178.04" data-end="1179.66">easy this stuff is to set up like this</span> <span data-start="1179.66" data-end="1181.52">will take you you know if you're using a</span> <span data-start="1181.52" data-end="1182.99">static site it's probably less than ten</span> <span data-start="1182.99" data-end="1184.73">minutes if you're using something full</span> <span data-start="1184.73" data-end="1186.62">stack it will probably take you an hour</span> <span data-start="1186.62" data-end="1188.66">but it's we're trying out just to see if</span> <span data-start="1188.66" data-end="1189.98">it actually has a perceivable</span> <span data-start="1189.98" data-end="1192.26">improvement on your site so they ended</span> <span data-start="1192.26" data-end="1193.82">up reloading their critical script so</span> <span data-start="1193.82" data-end="1195.29">this is like their vendor bundle their</span> <span data-start="1195.29" data-end="1197.51">synchronous chip scripts as well as</span> <span data-start="1197.51" data-end="1199.55">their their main scripts that lets with</span> <span data-start="1199.55" data-end="1203.75">36% improvement on their overall time to</span> <span data-start="1203.75" data-end="1206.68">interactive next they put work into</span> <span data-start="1206.68" data-end="1208.58">actually putting pixels on the screen</span> <span data-start="1208.58" data-end="1211.88">much faster now Twitter is one of those</span> <span data-start="1211.88" data-end="1213.98">experiences that are very you know</span> <span data-start="1213.98" data-end="1216.2">meteor rich there's a lot of images in</span> <span data-start="1216.2" data-end="1219.17">there and so it's unsurprising the media</span> <span data-start="1219.17" data-end="1220.67">and images one of the things that were</span> <span data-start="1220.67" data-end="1224.57">slowing them down render wise now one of</span> <span data-start="1224.57" data-end="1225.98">the things they did was they used</span> <span data-start="1225.98" data-end="1227.75">request I'll call back</span> <span data-start="1227.75" data-end="1230.21">we defer loading of some of the images</span> <span data-start="1230.21" data-end="1232.19">in their timeline and that led to a four</span> <span data-start="1232.19" data-end="1233.9">times improvement on the render</span> <span data-start="1233.9" data-end="1236.21">performance ric is kind of awesome</span> <span data-start="1236.21" data-end="1239.81">definitely worth exploring another thing</span> <span data-start="1239.81" data-end="1241.7">that they noticed was and this was kind</span> <span data-start="1241.7" data-end="1243.83">of it's it's so silly but images are</span> <span data-start="1243.83" data-end="1246.05">still such a big part of what slows us</span> <span data-start="1246.05" data-end="1248.6">down these days they noticed that they</span> <span data-start="1248.6" data-end="1250.04">were still sending down relatively large</span> <span data-start="1250.04" data-end="1252.23">images that were not the right height or</span> <span data-start="1252.23" data-end="1254.69">width that were still encoded you know</span> <span data-start="1254.69" data-end="1256.67">sub-optimally and we're taking a long</span> <span data-start="1256.67" data-end="1258.35">time to decode as soon as they hit</span> <span data-start="1258.35" data-end="1262.43">chrome they went through the process of</span> <span data-start="1262.43" data-end="1264.26">actually optimizing that and that shaved</span> <span data-start="1264.26" data-end="1266.3">off a whole lot of time on their image</span> <span data-start="1266.3" data-end="1268.22">decodes helped them to make sure that as</span> <span data-start="1268.22" data-end="1270.2">you scroll through the timeline images</span> <span data-start="1270.2" data-end="1271.43">are at least not one of those things</span> <span data-start="1271.43" data-end="1272.66">that are causing you a bottleneck</span> <span data-start="1272.66" data-end="1274.97">another thing that they introduced was</span> <span data-start="1274.97" data-end="1277.58">data saver mode this is this idea that</span> <span data-start="1277.58" data-end="1279.92">you as a user can say well I've got a</span> <span data-start="1279.92" data-end="1282.8">limited data plan I just want you to not</span> <span data-start="1282.8" data-end="1284.99">show any images or videos unless I</span> <span data-start="1284.99" data-end="1287.21">actually tap on them and this led to a</span> <span data-start="1287.21" data-end="1290.03">70 percent improvement in many cases on</span> <span data-start="1290.03" data-end="1291.41">the amount of data consumed by the</span> <span data-start="1291.41" data-end="1293.45">application if you're looking at a web</span> <span data-start="1293.45" data-end="1295.13">platform level at what we're doing to</span> <span data-start="1295.13" data-end="1298.28">try these types of experiences we've got</span> <span data-start="1298.28" data-end="1300.47">the save data client int that you can</span> <span data-start="1300.47" data-end="1302.15">use and Twitter going to investigate</span> <span data-start="1302.15" data-end="1304.58">using that next then you've got free</span> <span data-start="1304.58" data-end="1305.09">cash</span> <span data-start="1305.09" data-end="1306.98">so initially Twitter Lite didn't have</span> <span data-start="1306.98" data-end="1309.02">support for anything offline or</span> <span data-start="1309.02" data-end="1312.41">serviceworker caching and what they did</span> <span data-start="1312.41" data-end="1314.24">was they incremental II took an approach</span> <span data-start="1314.24" data-end="1317.09">to adopting serviceworker they started</span> <span data-start="1317.09" data-end="1319.88">off by first of all statically sort of</span> <span data-start="1319.88" data-end="1322.67">caching their scripts the emoji they're</span> <span data-start="1322.67" data-end="1324.44">used whenever you try DMing someone or</span> <span data-start="1324.44" data-end="1327.8">applying to tweets as well as CSS and</span> <span data-start="1327.8" data-end="1329.72">then they ramp that up over time to</span> <span data-start="1329.72" data-end="1331.4">include things like application shell</span> <span data-start="1331.4" data-end="1335.39">caching so UI caching now what that did</span> <span data-start="1335.39" data-end="1337.79">on repeat visits was it took load time</span> <span data-start="1337.79" data-end="1342.56">down from six point ten seconds down to</span> <span data-start="1342.56" data-end="1344.81">one point four nine seconds so when you</span> <span data-start="1344.81" data-end="1346.55">after the first time that you visit</span> </p>
<p><span data-start="1346.55" data-end="1348.83">Twitter light it feels instant coming</span> <span data-start="1348.83" data-end="1350.27">back and trying to navigate across</span> <span data-start="1350.27" data-end="1355.82">different views it's pretty powerful now</span> <span data-start="1355.82" data-end="1360.2">I was cheeky and asked twitter to like</span> <span data-start="1360.2" data-end="1361.61">host 20 different versions</span> <span data-start="1361.61" data-end="1363.17">their site so I could go and profile</span> <span data-start="1363.17" data-end="1364.429">them and they were kind enough to do</span> <span data-start="1364.429" data-end="1367.16">that now on second load without a</span> <span data-start="1367.16" data-end="1368.299">serviceworker after some of these</span> <span data-start="1368.299" data-end="1370.25">changes they saw that they were 47%</span> <span data-start="1370.25" data-end="1372.74">faster on second load so repeat visits</span> <span data-start="1372.74" data-end="1374.72">with a surface worker they're 65 percent</span> <span data-start="1374.72" data-end="1379.52">faster and you've got lazy load so</span> <span data-start="1379.52" data-end="1381.17">remember when we were looking so this is</span> <span data-start="1381.17" data-end="1382.549">a lighthouse report if I didn't mention</span> <span data-start="1382.549" data-end="1383.39">it before</span> <span data-start="1383.39" data-end="1384.89">remember when we were saying earlier</span> <span data-start="1384.89" data-end="1386.39">that their time to interactive scores</span> <span data-start="1386.39" data-end="1388.7">kind of sucked and needed a little bit</span> <span data-start="1388.7" data-end="1391.1">of work well breaking that work up was</span> <span data-start="1391.1" data-end="1392.54">one of the first things they needed to</span> <span data-start="1392.54" data-end="1395.299">do so they have to do these large blocks</span> <span data-start="1395.299" data-end="1397.64">of like monolithic JavaScript bundles</span> <span data-start="1397.64" data-end="1399.35">that I know people are like you know</span> <span data-start="1399.35" data-end="1401.09">some people just don't look at me I'm</span> <span data-start="1401.09" data-end="1403.01">not doing that but a lot of people</span> <span data-start="1403.01" data-end="1404.99">actually still do this and that's</span> <span data-start="1404.99" data-end="1407.299">relatively slow to load on mobile if you</span> <span data-start="1407.299" data-end="1409.309">have a relatively large bundle even if</span> <span data-start="1409.309" data-end="1410.57">you think that like you know a few</span> <span data-start="1410.57" data-end="1412.309">hundred kilobytes isn't a lot that's</span> <span data-start="1412.309" data-end="1413.929">still extra work the browser has to do</span> <span data-start="1413.929" data-end="1416.09">to parse and compile that code before it</span> <span data-start="1416.09" data-end="1418.37">can even you know start to boot it up so</span> <span data-start="1418.37" data-end="1420.86">initially their bundles were taking five</span> <span data-start="1420.86" data-end="1422.21">and a half seconds five and a half</span> <span data-start="1422.21" data-end="1425.99">second dish to get ready before code</span> <span data-start="1425.99" data-end="1428.51">splitting and then they had this great</span> <span data-start="1428.51" data-end="1429.77">moment where they're trying to figure</span> <span data-start="1429.77" data-end="1431.27">out how you're supposed to configure web</span> <span data-start="1431.27" data-end="1433.91">pack and are still having the best of</span> <span data-start="1433.91" data-end="1434.929">times with it</span> </p>
<p><span data-start="1434.929" data-end="1437.83">I hear it's gone better with web pack -</span> <span data-start="1437.83" data-end="1441.38">we'll see and one of the things that</span> <span data-start="1441.38" data-end="1443.21">they ended up doing was this is this is</span> <span data-start="1443.21" data-end="1444.799">a lot of what their code splitting</span> <span data-start="1444.799" data-end="1446.36">looks like beyond just just using</span> <span data-start="1446.36" data-end="1448.34">require done ensure they're just making</span> <span data-start="1448.34" data-end="1449.6">sure that they're correctly using sort</span> <span data-start="1449.6" data-end="1451.37">of vendor splitting for all of their</span> <span data-start="1451.37" data-end="1453.5">bundles across different views Twitter</span> <span data-start="1453.5" data-end="1455.809">ended up creating something like 40</span> <span data-start="1455.809" data-end="1458.39">different a synchronous chunks that are</span> <span data-start="1458.39" data-end="1460.82">granularly loaded as you navigate from</span> <span data-start="1460.82" data-end="1465.5">one view to the other and the impact</span> <span data-start="1465.5" data-end="1466.85">that that had on their experience was</span> <span data-start="1466.85" data-end="1468.32">that that actual bundle ended up only</span> <span data-start="1468.32" data-end="1470.78">taking about three seconds to fully</span> <span data-start="1470.78" data-end="1473">process and it improved their overall</span> <span data-start="1473" data-end="1475.73">times interactive by the end of it</span> <span data-start="1475.73" data-end="1477.08">they're actually doing much better than</span> <span data-start="1477.08" data-end="1479.299">this now but by the end of it they were</span> <span data-start="1479.299" data-end="1481.61">getting interactive in about 5.7 seconds</span> <span data-start="1481.61" data-end="1483.59">which is still impressive as an</span> <span data-start="1483.59" data-end="1485.66">investment in just code splitting and</span> <span data-start="1485.66" data-end="1488.33">some relatively low friction ideas</span> <span data-start="1488.33" data-end="1492.96">around efficient loading so</span> <span data-start="1492.96" data-end="1495.1">one other thing that they ended up</span> <span data-start="1495.1" data-end="1497.86">finding was incredibly invaluable and</span> <span data-start="1497.86" data-end="1499.54">have been coming back to it pretty</span> <span data-start="1499.54" data-end="1501.34">regularly is just making sure that</span> <span data-start="1501.34" data-end="1502.96">they're using bundle analyzers like</span> <span data-start="1502.96" data-end="1505.24">webpack bundle analyzer to find out what</span> <span data-start="1505.24" data-end="1507.01">low-hanging fruit they have in their</span> <span data-start="1507.01" data-end="1509.77">bundles I keep running into people they</span> <span data-start="1509.77" data-end="1511.81">don't realize that moment J s or other</span> <span data-start="1511.81" data-end="1513.7">libraries are actually a big part of</span> <span data-start="1513.7" data-end="1514.99">their bundles and can probably be</span> <span data-start="1514.99" data-end="1517.24">trimmed down so if you're not using</span> <span data-start="1517.24" data-end="1519.01">things like web pack bundle analyzer or</span> <span data-start="1519.01" data-end="1521.56">source map Explorer do check them out</span> <span data-start="1521.56" data-end="1523.96">they do generally lead to at least</span> <span data-start="1523.96" data-end="1525.52">understanding a little bit more about</span> <span data-start="1525.52" data-end="1528.21">what it is you're sending down the wire</span> <span data-start="1528.21" data-end="1531.43">and in Twitter's case they were making</span> <span data-start="1531.43" data-end="1532.93">sure that they were using the bundle</span> <span data-start="1532.93" data-end="1535">analyzer plugin so that every single</span> <span data-start="1535" data-end="1536.08">time someone was actually working</span> <span data-start="1536.08" data-end="1537.61">directly on the application they could</span> <span data-start="1537.61" data-end="1539.98">see what impact that ended up having on</span> <span data-start="1539.98" data-end="1542.56">their bundle site on their actual bundle</span> <span data-start="1542.56" data-end="1547.39">shape so performance is sort of this</span> <span data-start="1547.39" data-end="1550.21">continuous game of measuring for areas</span> <span data-start="1550.21" data-end="1552.52">to improve there isn't a single thing</span> <span data-start="1552.52" data-end="1554.62">that you can do and then just leave it</span> <span data-start="1554.62" data-end="1556.39">where your site is going to you know</span> <span data-start="1556.39" data-end="1558.85">always be fast regardless of the devices</span> <span data-start="1558.85" data-end="1560.7">that your users end up trying it out on</span> <span data-start="1560.7" data-end="1563.62">for anyone that is interested in sort of</span> <span data-start="1563.62" data-end="1566.8">getting involved with more continuous</span> <span data-start="1566.8" data-end="1568.45">performance profiling you know where</span> <span data-start="1568.45" data-end="1569.95">your team are staying on top of it and</span> <span data-start="1569.95" data-end="1571.68">you're building up a performance culture</span> </p>
<p><span data-start="1571.68" data-end="1574.18">I'm happy to encourage you trying out</span> <span data-start="1574.18" data-end="1576.28">lighthouse it's one of the projects that</span> <span data-start="1576.28" data-end="1579.91">we work on lighthouse sort of is a is an</span> <span data-start="1579.91" data-end="1581.68">auditing tool for both performance</span> <span data-start="1581.68" data-end="1583.39">metrics but also progressive web app</span> <span data-start="1583.39" data-end="1585.3">features and general web performance of</span> <span data-start="1585.3" data-end="1588.97">web platform best practices and I'm also</span> <span data-start="1588.97" data-end="1592.45">happy to suggest trying out calibre by</span> <span data-start="1592.45" data-end="1595.21">Ben Schwartz calibre is sort of great in</span> <span data-start="1595.21" data-end="1597.43">that it allows you over time to track</span> <span data-start="1597.43" data-end="1599.53">everything from your bundle size through</span> <span data-start="1599.53" data-end="1601.21">to different performance metrics and see</span> <span data-start="1601.21" data-end="1602.62">you know what impact your different</span> <span data-start="1602.62" data-end="1605.32">employees had over time so check that</span> <span data-start="1605.32" data-end="1607.99">out and I'd also encourage people to</span> <span data-start="1607.99" data-end="1610.99">check out web page test integration with</span> <span data-start="1610.99" data-end="1613.78">your git hooks housing comm is a</span> <span data-start="1613.78" data-end="1615.25">progressive web app that did this and</span> <span data-start="1615.25" data-end="1616.69">basically they have this really awesome</span> <span data-start="1616.69" data-end="1619.36">setup where any time someone tries to</span> <span data-start="1619.36" data-end="1622.24">submit a new PR for a feature it runs it</span> <span data-start="1622.24" data-end="1624.07">through web page test and will include a</span> <span data-start="1624.07" data-end="1624.61">filmstrip</span> <span data-start="1624.61" data-end="1626.07">at the very bottom of your Pia</span> <span data-start="1626.07" data-end="1627.96">are to show exactly what impact that had</span> <span data-start="1627.96" data-end="1633.99">on user experience so with that I hope</span> <span data-start="1633.99" data-end="1636">you found this little journey into</span> <span data-start="1636" data-end="1637.8">loading useful I hope you found the</span> <span data-start="1637.8" data-end="1639.72">story about some of the experiences we</span> <span data-start="1639.72" data-end="1645.48">had with Twitter useful I know that you</span> <span data-start="1645.48" data-end="1647.43">know Twitter of Twitter is great it also</span> <span data-start="1647.43" data-end="1649.68">sometimes feels like group therapy where</span> <span data-start="1649.68" data-end="1652.41">no one ever it gets any better that it's</span> <span data-start="1652.41" data-end="1656.01">it's great so yeah if if you're</span> <span data-start="1656.01" data-end="1656.94">interested in learning a little bit more</span> <span data-start="1656.94" data-end="1660.33">about loading we started a new blog over</span> <span data-start="1660.33" data-end="1662.61">on a crime scene called reloading on</span> <span data-start="1662.61" data-end="1664.71">medium so medium.com slash reloading and</span> <span data-start="1664.71" data-end="1666.96">we intend on publishing more material</span> <span data-start="1666.96" data-end="1668.19">there over the next coming months about</span> <span data-start="1668.19" data-end="1670.95">everything from h to server push through</span> <span data-start="1670.95" data-end="1673.35">to broadly Gretz lee and a lot of the</span> <span data-start="1673.35" data-end="1674.31">other work that we're doing in the</span> <span data-start="1674.31" data-end="1676.95">loading space and that's it for me thank</span> <span data-start="1676.95" data-end="1677.69">you</span> <span data-start="1677.69" data-end="1684.24">[Applause]</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
