<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="JSConf transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ifSDRxWMeyU</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/ifSDRxWMeyU?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="31.93" data-end="36.44">yeah so I realized that JS conf was sold</span> <span data-start="36.44" data-end="38.75">out and I panicked and I thought oh crap</span> <span data-start="38.75" data-end="40.16">the only way I'm actually going to get</span> <span data-start="40.16" data-end="42.559">to go it's I've got to propose some kind</span> <span data-start="42.559" data-end="44.93">of talk and in all my panic I came up</span> <span data-start="44.93" data-end="48.05">with the most ridiculously crap name for</span> <span data-start="48.05" data-end="51.739">a talk ever so I'm gonna have to change</span> <span data-start="51.739" data-end="54.019">that I want something really respectable</span> <span data-start="54.019" data-end="55.909">something that might get me a book deal</span> <span data-start="55.909" data-end="57.47">you know something really solid so</span> <span data-start="57.47" data-end="60.409">instead of pimp your j/s library the new</span> <span data-start="60.409" data-end="64.1">name for the talk is a designing non</span> <span data-start="64.1" data-end="69.92">shit api's with javascript so i'm gonna</span> <span data-start="69.92" data-end="73.759">start at the beginning in the beginning</span> </p>
<p><span data-start="73.759" data-end="76.009">I say the beginning the real beginning</span> <span data-start="76.009" data-end="80.479">of JavaScript it was all Netscape 4.6 ie</span> <span data-start="80.479" data-end="82.97">4.5 format you know it was Babylon so</span> <span data-start="82.97" data-end="85.34">let's not ignore that whole stage and</span> <span data-start="85.34" data-end="89.299">start when things actually became where</span> <span data-start="89.299" data-end="91.07">the community started to organize itself</span> <span data-start="91.07" data-end="93.439">it started to organize itself around</span> <span data-start="93.439" data-end="95.299">these sort of three main libraries</span> <span data-start="95.299" data-end="98.45">prototype dojo and one that is still</span> <span data-start="98.45" data-end="100.79">around but does it get mentioned very</span> <span data-start="100.79" data-end="103.58">often machi kit they all had their</span> <span data-start="103.58" data-end="106.49">strengths and weaknesses prototype was</span> <span data-start="106.49" data-end="107.89">probably the most popular at least</span> <span data-start="107.89" data-end="113.45">around this time about 2004-2005 it was</span> <span data-start="113.45" data-end="116.479">good general purpose library it shipped</span> <span data-start="116.479" data-end="119.78">with Ruby on Rails dojo dojo have been</span> <span data-start="119.78" data-end="121.4">around in sort of several forms for a</span> <span data-start="121.4" data-end="125.15">really long time by that point so it it</span> <span data-start="125.15" data-end="127.549">probably still is but was then the most</span> <span data-start="127.549" data-end="128.869">fully featured and probably most</span> <span data-start="128.869" data-end="130.879">advanced in terms of functionality and</span> <span data-start="130.879" data-end="133.25">the market just had some really</span> <span data-start="133.25" data-end="136.22">interesting ideas such as the concept of</span> <span data-start="136.22" data-end="138.92">deferred switch is only just made it</span> <span data-start="138.92" data-end="144.23">into jquery now but then this newcomer</span> <span data-start="144.23" data-end="145.819">came along and I remember sort of you</span> <span data-start="145.819" data-end="148.069">know that this turned up on a Jackson</span> <span data-start="148.069" data-end="151.519">one today one day click through and it</span> <span data-start="151.519" data-end="154.01">was a really simple site and sort of</span> <span data-start="154.01" data-end="156.08">right front and center was with this</span> <span data-start="156.08" data-end="159.799">code example and I think I'm probably</span> <span data-start="159.799" data-end="161.329">not the only person in this room that as</span> <span data-start="161.329" data-end="163.79">soon as they saw this it kind of changed</span> <span data-start="163.79" data-end="164.88">things for them</span> <span data-start="164.88" data-end="167.49">and I think you know we all know what</span> <span data-start="167.49" data-end="170.64">happened next it went from zero to</span> <span data-start="170.64" data-end="172.32">everything has had this sort of</span> <span data-start="172.32" data-end="175.35">skyrocketing growth and almost has got</span> <span data-start="175.35" data-end="177.78">to the point now where it's almost the</span> <span data-start="177.78" data-end="181.56">default choice of library fur bracelet</span> <span data-start="181.56" data-end="184.83">browser programming so what I want to</span> <span data-start="184.83" data-end="187.7">look at is sort of why did that happen</span> <span data-start="187.7" data-end="194.58">well at least initially jquery from the</span> <span data-start="194.58" data-end="198">the internals was was not actually that</span> <span data-start="198" data-end="202.2">in that sort of important it was it was</span> <span data-start="202.2" data-end="204.15">a lot of a cobbled together thing so it</span> <span data-start="204.15" data-end="207.75">had Dean Edwards event utilities it has</span> <span data-start="207.75" data-end="210.84">a Simon Wilson selector engine and a</span> <span data-start="210.84" data-end="212.07">load of other stuff that was just sort</span> <span data-start="212.07" data-end="215.13">of cobbled together but what made it</span> <span data-start="215.13" data-end="217.08">really really important and what was</span> <span data-start="217.08" data-end="218.97">responsible for the explosive growth is</span> <span data-start="218.97" data-end="220.59">that John had created this amazing</span> <span data-start="220.59" data-end="222.96">interface and you could just imagine it</span> <span data-start="222.96" data-end="224.34">when he was designing this he didn't</span> <span data-start="224.34" data-end="226.92">design what it was going to do he</span> <span data-start="226.92" data-end="228.42">designed how he was going to do it</span> <span data-start="228.42" data-end="230.55">before starting you even writing the</span> <span data-start="230.55" data-end="238.14">code and I've sort of want to sort of</span> <span data-start="238.14" data-end="241.44">make you think about that that the fact</span> <span data-start="241.44" data-end="244.23">there as programmers we're all designers</span> <span data-start="244.23" data-end="246">where designers of the API of the code</span> <span data-start="246" data-end="248.67">that we write and it's one of them most</span> <span data-start="248.67" data-end="250.14">important things that we need to think</span> <span data-start="250.14" data-end="252.93">about it's what John thought about as a</span> <span data-start="252.93" data-end="255.87">number one priority and it's what made</span> <span data-start="255.87" data-end="258.239">jquery and several other pieces of</span> <span data-start="258.239" data-end="260.7">software really really successful and we</span> <span data-start="260.7" data-end="262.23">should be thinking about this every time</span> <span data-start="262.23" data-end="266.64">we write some code there's a three</span> <span data-start="266.64" data-end="267.99">things I'm going to discuss which I</span> <span data-start="267.99" data-end="270.95">think make really good usable api's</span> <span data-start="270.95" data-end="273.75">predictability simplicity and</span> <span data-start="273.75" data-end="277.08">flexibility so we'll dig in to the first</span> <span data-start="277.08" data-end="281.04">one predictability when I'm thinking</span> <span data-start="281.04" data-end="284.19">about this I think of you know when when</span> <span data-start="284.19" data-end="286.38">you're a kid and it was Christmas Day</span> <span data-start="286.38" data-end="289.92">you were running into the lounge to get</span> <span data-start="289.92" data-end="293.07">your presence rip open the box it's it's</span> <span data-start="293.07" data-end="294.72">like a transformer that you've always</span> <span data-start="294.72" data-end="297.51">wanted rip open the box really excited</span> <span data-start="297.51" data-end="298.77">to get it out and stop playing</span> <span data-start="298.77" data-end="300.33">with it but what you're actually greeted</span> <span data-start="300.33" data-end="303.72">with is a very complex looking manual</span> <span data-start="303.72" data-end="305.61">and stuff in loads of different parts</span> <span data-start="305.61" data-end="308.159">and you can't play with immediately so</span> </p>
<p><span data-start="308.159" data-end="310.77">I'm sure many of you alike like me when</span> <span data-start="310.77" data-end="312.71">I was that age I just immediately</span> <span data-start="312.71" data-end="314.94">thought I don't know what to do with</span> <span data-start="314.94" data-end="317.58">this light handed it over to my dad made</span> <span data-start="317.58" data-end="319.53">him work it out will I ran off to the</span> <span data-start="319.53" data-end="321.15">other side of the room with the box and</span> <span data-start="321.15" data-end="325.349">made a robot outfit and I think it's</span> <span data-start="325.349" data-end="327">developers when we're actually sort of</span> <span data-start="327" data-end="330.84">choosing to solve a higher-order problem</span> <span data-start="330.84" data-end="333.12">we don't want to have to think about how</span> <span data-start="333.12" data-end="335.13">the smaller things work which is why we</span> <span data-start="335.13" data-end="338.759">go seeking libraries and we want to be</span> <span data-start="338.759" data-end="340.05">able to make our libraries as</span> <span data-start="340.05" data-end="342.289">predictable as possible so as soon as</span> <span data-start="342.289" data-end="344.789">you the developer light looks at the</span> <span data-start="344.789" data-end="347.37">code and they can almost infer how it</span> <span data-start="347.37" data-end="349.259">works rather than have to spend all of</span> <span data-start="349.259" data-end="350.34">this time digging through the</span> <span data-start="350.34" data-end="354.63">documentation so how do we get to this</span> <span data-start="354.63" data-end="358.409">sort of level of being predictable well</span> <span data-start="358.409" data-end="360.36">you need to think about your audience</span> <span data-start="360.36" data-end="365.4">like you do with any design task the</span> <span data-start="365.4" data-end="368.699">audience in our case is really easy the</span> <span data-start="368.699" data-end="370.889">we know the audience really well it's</span> <span data-start="370.889" data-end="374.039">all the JavaScript programmers and that</span> <span data-start="374.039" data-end="378.449">means we can infer a lot about what the</span> <span data-start="378.449" data-end="380.639">our audience knows about and we can use</span> <span data-start="380.639" data-end="383.34">those Prevention's within a code to kind</span> <span data-start="383.34" data-end="385.979">of add that familiar familiarity the</span> <span data-start="385.979" data-end="389.039">first port of call you can go to is is</span> <span data-start="389.039" data-end="392.039">the actual conventions and that exists</span> <span data-start="392.039" data-end="393.99">within the library the language itself</span> <span data-start="393.99" data-end="398.13">and the standard library so you can if</span> <span data-start="398.13" data-end="400.409">if we're writing a JavaScript library</span> <span data-start="400.409" data-end="402.449">you can pretty much always be sure that</span> <span data-start="402.449" data-end="405.18">this person knows JavaScript and knows</span> <span data-start="405.18" data-end="407.639">others work with the standard library so</span> <span data-start="407.639" data-end="411.029">definitely you know stick with with that</span> <span data-start="411.029" data-end="413.909">and just get this bonus predictability</span> <span data-start="413.909" data-end="419.729">is whoo-hoo snake cases their code in</span> <span data-start="419.729" data-end="423.93">the room does anyone know that's good I</span> <span data-start="423.93" data-end="425.88">was going to ask the note the person</span> <span data-start="425.88" data-end="430.469">next to you to our slappy I think you</span> <span data-start="430.469" data-end="432.52">see a lot of code front</span> <span data-start="432.52" data-end="436.199">time that doesn't use camelcase</span> </p>
<p><span data-start="436.199" data-end="438.31">JavaScript should always be camelcase</span> <span data-start="438.31" data-end="441.49">the standard library is in cal is camel</span> <span data-start="441.49" data-end="443.47">cased it's definitely something that</span> <span data-start="443.47" data-end="445.69">there should be no debate about at this</span> <span data-start="445.69" data-end="449.379">point so first off really easy don't</span> <span data-start="449.379" data-end="452.979">deviate from camel case and also adopt</span> <span data-start="452.979" data-end="454.3">all of the other conventions that come</span> <span data-start="454.3" data-end="456.729">from the standard library constrictors</span> <span data-start="456.729" data-end="461.08">should start with uppercase and and so</span> <span data-start="461.08" data-end="466.18">on now one thing that you sort of might</span> <span data-start="466.18" data-end="467.8">think would be a good idea to sort of</span> <span data-start="467.8" data-end="470.44">gain a sort of level of predictability</span> <span data-start="470.44" data-end="472.87">and probably is good from this point of</span> <span data-start="472.87" data-end="474.819">view is you might want to actually start</span> <span data-start="474.819" data-end="476.59">by kind of poly filling missing</span> <span data-start="476.59" data-end="477.88">functionality like we heard about</span> <span data-start="477.88" data-end="483.22">yesterday i I'm not outright against</span> <span data-start="483.22" data-end="485.469">that but all I need would like say that</span> <span data-start="485.469" data-end="488.469">is be careful with that firstly for the</span> <span data-start="488.469" data-end="492.46">reasons that Andrew pointed out your</span> <span data-start="492.46" data-end="494.05">little library that solves a certain</span> <span data-start="494.05" data-end="496.5">problem isn't the right place to fix</span> <span data-start="496.5" data-end="500.11">array for each there should be if it's</span> <span data-start="500.11" data-end="501.19">going to be done anywhere it should be a</span> <span data-start="501.19" data-end="505.96">lower level library but also I think you</span> <span data-start="505.96" data-end="507.58">you start to get into the situation</span> <span data-start="507.58" data-end="509.8">where you can surprise developers it's</span> <span data-start="509.8" data-end="511.89">pretty easy to write what you think is a</span> <span data-start="511.89" data-end="514.029">polyfill that fixes for missing</span> <span data-start="514.029" data-end="516.279">functionality but it works in quite a</span> <span data-start="516.279" data-end="518.169">different way from the real</span> <span data-start="518.169" data-end="519.659">functionality that your poly filling</span> <span data-start="519.659" data-end="522.729">even in like a small way for instance if</span> <span data-start="522.729" data-end="525.49">the native thing will return like a live</span> <span data-start="525.49" data-end="528.399">node list that where new nodes will</span> <span data-start="528.399" data-end="530.68">appear in it and then your polyfill just</span> <span data-start="530.68" data-end="532.75">returns an array you've got that</span> <span data-start="532.75" data-end="534.07">slightly different behavior which</span> <span data-start="534.07" data-end="536.89">introduces a whole level of</span> <span data-start="536.89" data-end="540.85">unpredictability another place you can</span> <span data-start="540.85" data-end="543.1">go to sort of seat conventions you can</span> <span data-start="543.1" data-end="547.12">rely upon is is popular libraries talked</span> <span data-start="547.12" data-end="549.52">before about how how ubiquitous jQuery</span> <span data-start="549.52" data-end="552.399">is I think even if you're not a jQuery</span> <span data-start="552.399" data-end="555.73">guy you can almost you you're familiar</span> <span data-start="555.73" data-end="558.55">with how it works and so we can we can</span> <span data-start="558.55" data-end="561.55">use that and we can use conventions from</span> <span data-start="561.55" data-end="563.14">other popular libraries depending on the</span> <span data-start="563.14" data-end="565.66">on the domain your end so</span> <span data-start="565.66" data-end="567.7">for instance I think a really nice</span> <span data-start="567.7" data-end="570.06">example of this is is Raphael Raphael</span> <span data-start="570.06" data-end="573.25">has got really popular really quickly it</span> <span data-start="573.25" data-end="576.58">it's and it's just incredibly easy to</span> <span data-start="576.58" data-end="578.23">use you you're you're sort of they're</span> <span data-start="578.23" data-end="580.39">doing stuff with it within minutes of</span> <span data-start="580.39" data-end="582.37">just arriving on the site and seen in</span> <span data-start="582.37" data-end="584.8">one or two code examples one of the nice</span> <span data-start="584.8" data-end="587.38">things that is it that it does to um</span> <span data-start="587.38" data-end="589.9">kind of add this predictability is it</span> <span data-start="589.9" data-end="591.55">doesn't try to make new names up for</span> <span data-start="591.55" data-end="593.29">things so if you want to set an</span> <span data-start="593.29" data-end="595.81">attribute then it's got a very similar</span> <span data-start="595.81" data-end="598.09">method to jQuery it just acts exactly</span> <span data-start="598.09" data-end="600.52">like jQuery so if you're a jQuery</span> <span data-start="600.52" data-end="602.56">programmer you don't ever have to look</span> <span data-start="602.56" data-end="604.87">this method up it's just the same as</span> <span data-start="604.87" data-end="606.94">what you already know and similarly it</span> <span data-start="606.94" data-end="610.12">adds a load of others that have adopt</span> <span data-start="610.12" data-end="613.15">jQuery conventions and it's just sort of</span> <span data-start="613.15" data-end="615.97">mess less mental overhead for the</span> <span data-start="615.97" data-end="618.67">programmer we have show and hide and</span> <span data-start="618.67" data-end="621.91">various other things in there another</span> <span data-start="621.91" data-end="624.76">area you can go to is is the problem</span> <span data-start="624.76" data-end="626.47">domain if you try to tackle a certain</span> <span data-start="626.47" data-end="629.38">problem or your library is dealing with</span> <span data-start="629.38" data-end="633.48">a certain thing like HTTP or maybe CSS</span> <span data-start="633.48" data-end="636.91">you you can you can basically model your</span> </p>
<p><span data-start="636.91" data-end="638.92">API around that and use some of the</span> <span data-start="638.92" data-end="640.87">conventions from it and get this kind of</span> <span data-start="640.87" data-end="643.63">added level of predictably really nice</span> <span data-start="643.63" data-end="648.52">example of that is is the jquery CSS</span> <span data-start="648.52" data-end="651.45">manipulation so you can see here that</span> <span data-start="651.45" data-end="654.34">there's such a lot of large amount of</span> <span data-start="654.34" data-end="657.37">sort of mapping between how you would</span> <span data-start="657.37" data-end="660.88">manipulate jquery CSS and jquery is how</span> <span data-start="660.88" data-end="662.74">you would actually write a CSS</span> <span data-start="662.74" data-end="665.2">decoration that you're never going to</span> <span data-start="665.2" data-end="667.21">have to be looked at the documents to</span> <span data-start="667.21" data-end="669.07">work out how to do this you you almost</span> <span data-start="669.07" data-end="674.62">in infer how that works so to start</span> <span data-start="674.62" data-end="676.12">putting a few these ideas into practice</span> <span data-start="676.12" data-end="681.76">will start an example the example is</span> <span data-start="681.76" data-end="683.89">going to be a dom builder it's kind of</span> <span data-start="683.89" data-end="685.75">an interesting problem to tackle from an</span> </p>
<p><span data-start="685.75" data-end="688.99">API point of view because everything</span> <span data-start="688.99" data-end="692.23">that you get given in JavaScript to do</span> <span data-start="692.23" data-end="693.55">this is pretty raw you've you've</span> <span data-start="693.55" data-end="696.16">obviously got the inner HTML way that's</span> <span data-start="696.16" data-end="698.2">kind of pretty ugly but especially when</span> <span data-start="698.2" data-end="699.43">you start interpolating</span> <span data-start="699.43" data-end="701.23">variables because JavaScript's not that</span> <span data-start="701.23" data-end="703.69">good at working with strings so you just</span> <span data-start="703.69" data-end="705.399">end up with a massive pluses and quotes</span> <span data-start="705.399" data-end="707.62">and then even worse you've got the Dom</span> <span data-start="707.62" data-end="709.899">API which you can barely do anything</span> <span data-start="709.899" data-end="712.45">useful with in its raw form like this so</span> <span data-start="712.45" data-end="714.85">it's definitely something that needs</span> <span data-start="714.85" data-end="717.279">masking so we'll try and create a nice</span> </p>
<p><span data-start="717.279" data-end="721.45">API around creating Dom nodes so the</span> <span data-start="721.45" data-end="724.45">first thing to do is we'll just create</span> <span data-start="724.45" data-end="727.12">the nuts and bolts of this thing will</span> <span data-start="727.12" data-end="729.85">have this function called element takes</span> <span data-start="729.85" data-end="731.92">name it takes an object with the</span> <span data-start="731.92" data-end="734.44">attributes for that for that node and it</span> <span data-start="734.44" data-end="736.75">takes an array of children and does the</span> <span data-start="736.75" data-end="740.2">very basic thing obviously there's a lot</span> <span data-start="740.2" data-end="741.88">of optimizations you could do on this</span> <span data-start="741.88" data-end="743.92">but this is just you know simplest</span> <span data-start="743.92" data-end="746.23">possible for clarity it just creates</span> <span data-start="746.23" data-end="748.51">that note sets the attributes append</span> <span data-start="748.51" data-end="749.95">trails of children and then return to</span> <span data-start="749.95" data-end="751.99">that node so if you want to use that</span> <span data-start="751.99" data-end="755.44">code this is that after our first pass</span> <span data-start="755.44" data-end="756.88">it looks something like this I've tried</span> <span data-start="756.88" data-end="759.82">to kind of creatively indent it to make</span> <span data-start="759.82" data-end="762.82">it make a little bit of sense but as you</span> <span data-start="762.82" data-end="764.41">can see in its in its raw state it</span> <span data-start="764.41" data-end="766.93">doesn't really match to our to our</span> <span data-start="766.93" data-end="769.33">problem too many doesn't look like HTML</span> <span data-start="769.33" data-end="771.13">let's like try and make it look like</span> </p>
<p><span data-start="771.13" data-end="776.02">HTML so thinking about the API come up</span> <span data-start="776.02" data-end="778.54">with something like this where instead</span> <span data-start="778.54" data-end="781.42">of having a single method called element</span> <span data-start="781.42" data-end="784.87">will create a method for each element in</span> <span data-start="784.87" data-end="789">the HTML spec so we can do HTML form and</span> <span data-start="789" data-end="791.56">you can already see that if we do that</span> <span data-start="791.56" data-end="795.22">then we've we're moving a lot closer to</span> <span data-start="795.22" data-end="798.7">it actually looking like something that</span> <span data-start="798.7" data-end="801.79">like an HTML document so how do we do</span> <span data-start="801.79" data-end="804.52">that well we can basically sort of layer</span> <span data-start="804.52" data-end="807.52">a little bit of of job of a sort of</span> <span data-start="807.52" data-end="809.89">intervene to face veneer on top of our</span> <span data-start="809.89" data-end="813.01">our basic element function and this is</span> <span data-start="813.01" data-end="814.39">how you do it i don't think it's worth</span> <span data-start="814.39" data-end="816.61">going through the code and everything</span> <span data-start="816.61" data-end="820.149">will be on SlideShare but essentially we</span> <span data-start="820.149" data-end="822.579">create a function for all of the for</span> <span data-start="822.579" data-end="825.79">every tag and then it just creates a</span> <span data-start="825.79" data-end="828.4">function that eventually calls HTML</span> <span data-start="828.4" data-end="831.19">element and we've got like a little bit</span> <span data-start="831.19" data-end="833.35">better there</span> <span data-start="833.35" data-end="839.95">okay so next up sim simplicity now from</span> <span data-start="839.95" data-end="841.57">from the sort of web design world there</span> <span data-start="841.57" data-end="844.93">was a really sort of classic book that</span> </p>
<p><span data-start="844.93" data-end="847.3">I'm sure most of you heard of many of</span> <span data-start="847.3" data-end="849.61">you will have read called don't make me</span> <span data-start="849.61" data-end="854.08">think bye bye Steve Krug it's actually</span> <span data-start="854.08" data-end="855.94">about you know creating interfaces for</span> <span data-start="855.94" data-end="857.95">the UI but I think the basic concepts in</span> <span data-start="857.95" data-end="860.8">it you can directly apply to to API</span> <span data-start="860.8" data-end="865.66">design the the basic crux of it is don't</span> <span data-start="865.66" data-end="867.61">make the user think about anything more</span> <span data-start="867.61" data-end="869.65">than they necessarily have to do to get</span> <span data-start="869.65" data-end="871.75">this solution don't don't don't make</span> <span data-start="871.75" data-end="873.16">them make decisions that they don't need</span> <span data-start="873.16" data-end="876.4">to make and and don't confuse them with</span> <span data-start="876.4" data-end="878.83">things that don't make sense to actually</span> <span data-start="878.83" data-end="883.18">solving the problem in hand and the</span> <span data-start="883.18" data-end="884.92">problem with this is it if if you do</span> <span data-start="884.92" data-end="888.1">present all of these options to your API</span> <span data-start="888.1" data-end="889.93">all of the time you end up with like a</span> <span data-start="889.93" data-end="893.02">very very big very complex and very hard</span> <span data-start="893.02" data-end="896.95">to remember API and you know you at you</span> <span data-start="896.95" data-end="900.07">end up forcing your users to like read</span> <span data-start="900.07" data-end="901.93">the mail over and over and over again</span> <span data-start="901.93" data-end="903.64">because it you've created something</span> <span data-start="903.64" data-end="906.4">which is too big to fit in a programmers</span> <span data-start="906.4" data-end="909.91">brain so we want to avoid this and so</span> <span data-start="909.91" data-end="912.52">that the time-honored way of doing this</span> <span data-start="912.52" data-end="914.47">is by the use of sensible defaults you</span> <span data-start="914.47" data-end="918.16">just decide on things that need to be</span> <span data-start="918.16" data-end="922.33">optional and just if if if an argument</span> <span data-start="922.33" data-end="924.22">is the same way ninety percent of the</span> <span data-start="924.22" data-end="928.24">time they just don't show that option to</span> <span data-start="928.24" data-end="929.71">the programmer at all unless they</span> <span data-start="929.71" data-end="932.07">actually need it this is obviously been</span> <span data-start="932.07" data-end="936.52">exemplified buyer bye-bye rails that as</span> <span data-start="936.52" data-end="938.98">a had a long history of sensible</span> <span data-start="938.98" data-end="948.52">defaults um something I really need some</span> <span data-start="948.52" data-end="951.87">sensible defaults is this particularly</span> <span data-start="951.87" data-end="956.5">laughably bad method from the the Dom</span> </p>
<p><span data-start="956.5" data-end="959.68">API and it's just to create a mouse</span> <span data-start="959.68" data-end="961.45">event that you can then dispatch on a</span> <span data-start="961.45" data-end="963.13">certain element but look at that</span> <span data-start="963.13" data-end="965.32">argument list how would you ever</span> <span data-start="965.32" data-end="967.329">remember that if you ever want to call</span> <span data-start="967.329" data-end="969.519">function it's basically mandatory for</span> <span data-start="969.519" data-end="970.92">you to go and look at this page</span> <span data-start="970.92" data-end="973.179">similarly if once you've used that and</span> <span data-start="973.179" data-end="974.589">you have this thing lying around in your</span> <span data-start="974.589" data-end="977.35">code no one will know what the hell that</span> <span data-start="977.35" data-end="981.91">stuff means zeros forces nulls in some</span> <span data-start="981.91" data-end="984.639">kind of arbitrary order that could</span> <span data-start="984.639" data-end="986.47">definitely do with tidying up we don't</span> <span data-start="986.47" data-end="988.389">need to make the have the design to make</span> <span data-start="988.389" data-end="994.269">those decisions and another sort of less</span> <span data-start="994.269" data-end="996.279">extreme example but also annoying and</span> <span data-start="996.279" data-end="998.649">also from the Dom API is the add event</span> <span data-start="998.649" data-end="1001.139">listener we use it all the time or poet</span> <span data-start="1001.139" data-end="1004.17">well I end up doing sex I don't after</span> <span data-start="1004.17" data-end="1005.97">you can't use libraries most of the time</span> <span data-start="1005.97" data-end="1009.209">but it's it's it's fairly</span> <span data-start="1009.209" data-end="1012.29">straightforward you have the type of a</span> <span data-start="1012.29" data-end="1014.819">type of event then you have a handler</span> <span data-start="1014.819" data-end="1016.949">which is your function and then you have</span> <span data-start="1016.949" data-end="1018.54">this hanging bulleen on the end and</span> <span data-start="1018.54" data-end="1020.819">which tells the that which says whether</span> <span data-start="1020.819" data-end="1022.739">you want to use capture or not the other</span> <span data-start="1022.739" data-end="1026.279">thing is is 99.9 percent of the time you</span> <span data-start="1026.279" data-end="1029.669">don't want to use capture so why do I</span> <span data-start="1029.669" data-end="1031.169">have to worry about that and put false</span> <span data-start="1031.169" data-end="1032.76">on the end if you actually emit that</span> <span data-start="1032.76" data-end="1034.47">false from the end then you get an error</span> <span data-start="1034.47" data-end="1037.829">why don't we just like only let people</span> <span data-start="1037.829" data-end="1040.079">specify true on the end if they need</span> <span data-start="1040.079" data-end="1041.88">capture and then otherwise don't worry</span> <span data-start="1041.88" data-end="1047.279">about it so let's go back to this really</span> <span data-start="1047.279" data-end="1049.169">hideous example what would what could we</span> <span data-start="1049.169" data-end="1051.24">do to if we were writing the Dom API</span> <span data-start="1051.24" data-end="1052.919">what could we do to make this in any way</span> <span data-start="1052.919" data-end="1056.789">sensible well sort of well adopted thing</span> <span data-start="1056.789" data-end="1060.659">to do is use optional hat hashes foot</span> <span data-start="1060.659" data-end="1062.669">for the optional arguments there's</span> <span data-start="1062.669" data-end="1063.84">definitely a few things that we need</span> <span data-start="1063.84" data-end="1065.94">there we need the event type but then</span> <span data-start="1065.94" data-end="1067.95">probably from that point on all of the</span> <span data-start="1067.95" data-end="1070.74">other arguments for keyboard modifiers</span> <span data-start="1070.74" data-end="1073.019">and whether it where it whether it's</span> <span data-start="1073.019" data-end="1075.059">bubbles whether it's cancellable and so</span> <span data-start="1075.059" data-end="1077.789">on are all things that we don't really</span> <span data-start="1077.789" data-end="1080.039">need to worry about and for most cases</span> <span data-start="1080.039" data-end="1082.11">so why don't we wrap all of those up</span> <span data-start="1082.11" data-end="1085.049">into a hash so we'll have something like</span> <span data-start="1085.049" data-end="1088.409">this where the the event type is</span> <span data-start="1088.409" data-end="1089.88">required so that's just a normal</span> <span data-start="1089.88" data-end="1092.309">argument and then put everything else in</span> <span data-start="1092.309" data-end="1096.45">cider and yeah options hash and this is</span> <span data-start="1096.45" data-end="1098.309">something that you know like its</span> <span data-start="1098.309" data-end="1099.879">bread-and-butter stuff</span> <span data-start="1099.879" data-end="1104.529">an interesting article came out the</span> <span data-start="1104.529" data-end="1106.749">other day Rebecca Murphy rate which is</span> <span data-start="1106.749" data-end="1110.709">really well timed for me she sort of</span> <span data-start="1110.709" data-end="1113.919">asked around on Twitter about people's</span> <span data-start="1113.919" data-end="1116.289">opinions on where up when options hashes</span> <span data-start="1116.289" data-end="1117.729">were appropriate and when they weren't</span> <span data-start="1117.729" data-end="1120.309">and wrote up a really good article on it</span> <span data-start="1120.309" data-end="1122.889">so it kind of meant that I don't really</span> <span data-start="1122.889" data-end="1124.509">need to talk about it but this article</span> <span data-start="1124.509" data-end="1126.639">is a great read for that and it's worth</span> <span data-start="1126.639" data-end="1128.649">just reading it through and thinking</span> <span data-start="1128.649" data-end="1131.019">about it and and you know formulating an</span> <span data-start="1131.019" data-end="1135.699">opinion on it next up function calls</span> <span data-start="1135.699" data-end="1137.499">should read well if you if you're trying</span> <span data-start="1137.499" data-end="1138.819">to solve a problem you normally have</span> <span data-start="1138.819" data-end="1140.499">some kind of sentence in your head that</span> <span data-start="1140.499" data-end="1142.659">describes what you want to do for</span> <span data-start="1142.659" data-end="1144.969">instance I want to replace this node</span> <span data-start="1144.969" data-end="1148.389">with another node so when you're writing</span> <span data-start="1148.389" data-end="1150.879">your API is try and you can gain some</span> <span data-start="1150.879" data-end="1153.099">sort of memorability and simplicity by</span> <span data-start="1153.099" data-end="1155.379">trying to map that I'm not really</span> <span data-start="1155.379" data-end="1158.139">talking about going over the top and you</span> <span data-start="1158.139" data-end="1161.709">know going COBOL an applescript style</span> <span data-start="1161.709" data-end="1163.239">and making it read like English but</span> <span data-start="1163.239" data-end="1165.039">there's definitely some gains you can</span> <span data-start="1165.039" data-end="1168.339">get so here's three examples of sort of</span> <span data-start="1168.339" data-end="1173.199">doing the same thing wait and to me it's</span> <span data-start="1173.199" data-end="1175.329">fairly obvious which of the one which</span> <span data-start="1175.329" data-end="1177.519">one is the most memorable here we've got</span> <span data-start="1177.519" data-end="1179.979">the top one which is from the Dom API</span> <span data-start="1179.979" data-end="1182.559">again I trying to pick examples that</span> <span data-start="1182.559" data-end="1184.299">from the Dom API because I'm assuming</span> <span data-start="1184.299" data-end="1187.179">that no one's here who worked on that to</span> <span data-start="1187.179" data-end="1192.399">get offended but so the Dom API has</span> <span data-start="1192.399" data-end="1195.399">probably the least intuitive thing here</span> <span data-start="1195.399" data-end="1197.559">that probably annoys a lot of us on a</span> <span data-start="1197.559" data-end="1200.349">regular basis where you can't there</span> <span data-start="1200.349" data-end="1201.789">isn't a replace method on the note</span> <span data-start="1201.789" data-end="1204.069">itself you have to go to its parent node</span> <span data-start="1204.069" data-end="1208.029">and then you have to pass in the new</span> <span data-start="1208.029" data-end="1209.949">node and then the old node but really</span> <span data-start="1209.949" data-end="1211.659">what you're thinking in your head is I</span> <span data-start="1211.659" data-end="1213.909">want to replace old node with new nodes</span> <span data-start="1213.909" data-end="1216.159">so the method order there is the thing</span> <span data-start="1216.159" data-end="1219.029">that really gets me and it's just</span> <span data-start="1219.029" data-end="1222.729">counterintuitive and which leads me to</span> <span data-start="1222.729" data-end="1224.619">look at the documentation for that</span> <span data-start="1224.619" data-end="1226.539">method for more times i got i kind of</span> <span data-start="1226.539" data-end="1227.919">end up double bluffing myself and</span> <span data-start="1227.919" data-end="1230.529">thinking I know that it's the wrong way</span> <span data-start="1230.529" data-end="1232.449">round to how I think it should be but</span> <span data-start="1232.449" data-end="1233.799">then I get used to it</span> <span data-start="1233.799" data-end="1235.36">being that way around and then I think</span> <span data-start="1235.36" data-end="1238.659">it's what about i'm getting a mess dojo</span> <span data-start="1238.659" data-end="1242.289">is kind of got the middle ground it's in</span> <span data-start="1242.289" data-end="1245.379">dojo style it's the way that you achieve</span> <span data-start="1245.379" data-end="1247.09">these kind of things is a sort of much</span> <span data-start="1247.09" data-end="1249.489">more generic powerful method called</span> <span data-start="1249.489" data-end="1253.36">place that enables you to place a new</span> <span data-start="1253.36" data-end="1256.659">element in relation to reference element</span> <span data-start="1256.659" data-end="1260.499">in all kinds of different ways so it</span> <span data-start="1260.499" data-end="1263.47">again is like I would say that the place</span> <span data-start="1263.47" data-end="1265.45">of method is a little bit due to generic</span> <span data-start="1265.45" data-end="1268.869">to be to be easily noticeable you're</span> <span data-start="1268.869" data-end="1270.279">thinking replacing your head and then</span> <span data-start="1270.279" data-end="1271.779">you have to find place but i'm sure</span> <span data-start="1271.779" data-end="1273.69">that's that's not too much of a problem</span> <span data-start="1273.69" data-end="1277.149">again though it's suffering from an</span> <span data-start="1277.149" data-end="1279.7">unusual sort of argument ordering here</span> <span data-start="1279.7" data-end="1281.919">it's new node and all node again and</span> <span data-start="1281.919" data-end="1284.109">then the last argument which is the verb</span> <span data-start="1284.109" data-end="1287.529">is right at the end so it doesn't read</span> <span data-start="1287.529" data-end="1290.08">anything like replace old mode with new</span> <span data-start="1290.08" data-end="1293.08">note it's kind of in reverse and then</span> <span data-start="1293.08" data-end="1295.72">jquery obviously i think got this really</span> <span data-start="1295.72" data-end="1297.639">work right because it just reads so well</span> <span data-start="1297.639" data-end="1301.059">old node replaced with new note it's you</span> <span data-start="1301.059" data-end="1302.739">just get that simplicity in</span> <span data-start="1302.739" data-end="1306.279">predictability another thing you can try</span> <span data-start="1306.279" data-end="1309.879">and this is possibly on the side of</span> <span data-start="1309.879" data-end="1312.85">dangerous but works in some cases is try</span> <span data-start="1312.85" data-end="1315.039">and mask a little bit of the complexity</span> <span data-start="1315.039" data-end="1318.549">that in the sort of is within the nuts</span> <span data-start="1318.549" data-end="1321.22">and bolts of your library from from the</span> <span data-start="1321.22" data-end="1324.759">from the actual API user this is you</span> <span data-start="1324.759" data-end="1326.529">know often kind of lead you down the</span> <span data-start="1326.529" data-end="1330.399">path of magic and magic can often be a</span> <span data-start="1330.399" data-end="1332.259">bad thing because it introduces all</span> <span data-start="1332.259" data-end="1334.33">kinds of uncertainty into the code but</span> <span data-start="1334.33" data-end="1337.149">in some cases if you think about how</span> <span data-start="1337.149" data-end="1338.59">your interface is going to work before</span> <span data-start="1338.59" data-end="1340.029">you actually embark on solving the</span> <span data-start="1340.029" data-end="1341.619">problem you can you can come up with</span> <span data-start="1341.619" data-end="1345.669">some really nice simple things an</span> <span data-start="1345.669" data-end="1349.09">example is something we worked on a</span> </p>
<p><span data-start="1349.09" data-end="1352.239">Twitter recently which is across the</span> <span data-start="1352.239" data-end="1354.549">main communication library it's</span> <span data-start="1354.549" data-end="1356.769">basically all we do is come up with</span> <span data-start="1356.769" data-end="1358.749">various permutations of cross domain</span> <span data-start="1358.749" data-end="1361.72">communication libraries but so we set</span> <span data-start="1361.72" data-end="1363.519">about before we even started writing the</span> <span data-start="1363.519" data-end="1366.34">code we set about just designing the API</span> <span data-start="1366.34" data-end="1367.57">and writing code</span> <span data-start="1367.57" data-end="1369.58">samples and and getting a feel for how</span> <span data-start="1369.58" data-end="1371.83">it might work before we even knew you</span> <span data-start="1371.83" data-end="1372.94">know whether we were going to use</span> <span data-start="1372.94" data-end="1375.1">postmessage or whatever you know just</span> <span data-start="1375.1" data-end="1376.87">ignore that and get a text editor out</span> <span data-start="1376.87" data-end="1379.6">and start writing the code this is our</span> <span data-start="1379.6" data-end="1381.97">first permutation you sort of create a</span> <span data-start="1381.97" data-end="1384.97">connection object and then under the</span> <span data-start="1384.97" data-end="1387.97">hood we knew that an iframe would have</span> <span data-start="1387.97" data-end="1389.83">to be created and several things would</span> <span data-start="1389.83" data-end="1391.39">have to be initializing you have to wait</span> <span data-start="1391.39" data-end="1393.22">for them all to load before the</span> <span data-start="1393.22" data-end="1395.32">connection was ready to actually send a</span> <span data-start="1395.32" data-end="1397.36">signal so the obvious thing to do in</span> <span data-start="1397.36" data-end="1398.98">that case is have connection fire</span> <span data-start="1398.98" data-end="1400.93">already event and then before you</span> <span data-start="1400.93" data-end="1404.02">actually send any date or over this</span> <span data-start="1404.02" data-end="1407.44">connection you you just wait for the</span> <span data-start="1407.44" data-end="1409.36">ready event and then you can do your</span> <span data-start="1409.36" data-end="1412.26">thing but we looked at it and thought</span> <span data-start="1412.26" data-end="1415.99">yeah that makes sense but it's still</span> <span data-start="1415.99" data-end="1417.64">sort of a little bit messy what we what</span> <span data-start="1417.64" data-end="1420.13">can we do to sort of clean that that</span> <span data-start="1420.13" data-end="1422.86">interaction up a little bit so our</span> <span data-start="1422.86" data-end="1424.63">second iteration was something like this</span> <span data-start="1424.63" data-end="1427.15">where we had a connect method that</span> <span data-start="1427.15" data-end="1430.57">actually took a function which which has</span> <span data-start="1430.57" data-end="1432.25">the the connection pass to it and we</span> <span data-start="1432.25" data-end="1434.5">only call that function when the</span> <span data-start="1434.5" data-end="1437.41">infrastructure is is set up and that</span> <span data-start="1437.41" data-end="1440.38">kind of reads quite nicely but then we</span> <span data-start="1440.38" data-end="1443.44">notice that the the calls we make across</span> <span data-start="1443.44" data-end="1444.64">the cross domain bridge you are actually</span> <span data-start="1444.64" data-end="1448.18">asynchronous anyway so the the developer</span> <span data-start="1448.18" data-end="1450.16">is making a call and not expecting an</span> <span data-start="1450.16" data-end="1451.72">answer back for some time in the future</span> <span data-start="1451.72" data-end="1454.48">so why are you why are we introducing</span> <span data-start="1454.48" data-end="1457.21">two levels of a synchronicity why can't</span> <span data-start="1457.21" data-end="1460.27">we like sort of factor that out in the</span> </p>
<p><span data-start="1460.27" data-end="1462.73">API in simplifier so what we finally</span> <span data-start="1462.73" data-end="1464.14">came up with was something like this</span> <span data-start="1464.14" data-end="1466.75">where you you get the connection object</span> <span data-start="1466.75" data-end="1468.55">and then you can immediately start</span> <span data-start="1468.55" data-end="1472.27">calling methods on it under the hood we</span> <span data-start="1472.27" data-end="1473.95">actually just wait for the ready event</span> <span data-start="1473.95" data-end="1475.99">and then call all of the calls that have</span> <span data-start="1475.99" data-end="1479.86">happened that have been that have been</span> <span data-start="1479.86" data-end="1483.25">queued up since then and we sort of mask</span> <span data-start="1483.25" data-end="1485.08">away that a synchronicity which makes</span> <span data-start="1485.08" data-end="1487.36">for a much nicer interface and I think</span> <span data-start="1487.36" data-end="1489.22">if we would have actually started</span> <span data-start="1489.22" data-end="1492.73">writing the code to for the for the nuts</span> <span data-start="1492.73" data-end="1494.11">and bolts of the library before we</span> <span data-start="1494.11" data-end="1495.28">design the interface we probably</span> <span data-start="1495.28" data-end="1497.14">wouldn't have got here but the fact that</span> <span data-start="1497.14" data-end="1498.55">we were thinking about how it would be</span> <span data-start="1498.55" data-end="1500.83">nice to use before we started them</span> <span data-start="1500.83" data-end="1502.33">you know made a lot of difference in</span> <span data-start="1502.33" data-end="1510.01">this case back to the dom builder so we</span> <span data-start="1510.01" data-end="1511.929">this was how this out how far we got</span> <span data-start="1511.929" data-end="1515.049">last time and we want to be able to</span> <span data-start="1515.049" data-end="1516.64">simplify this there's a few things in</span> <span data-start="1516.64" data-end="1518.44">there that that are just hanging around</span> <span data-start="1518.44" data-end="1520.539">and they're kind of line noise so we</span> <span data-start="1520.539" data-end="1523.539">want to simplify this there's for</span> <span data-start="1523.539" data-end="1526.059">instance if if a node doesn't have any</span> <span data-start="1526.059" data-end="1528.399">attributes then you end up throwing in</span> <span data-start="1528.399" data-end="1532.12">an empty object if a node doesn't have</span> <span data-start="1532.12" data-end="1534.22">any children like the input tag you end</span> <span data-start="1534.22" data-end="1537.809">up having to always throw in an empty</span> <span data-start="1537.809" data-end="1540.88">array for the children and what we</span> <span data-start="1540.88" data-end="1542.44">really want to do is clean all of that</span> <span data-start="1542.44" data-end="1544.99">away so it looks more like this and it</span> <span data-start="1544.99" data-end="1547.299">and it starts to look a hell of a lot</span> <span data-start="1547.299" data-end="1549.789">more Oh another thing that I've got to</span> <span data-start="1549.789" data-end="1551.409">point out is if you want to just put</span> <span data-start="1551.409" data-end="1553.6">some text in at the moment you'd have to</span> <span data-start="1553.6" data-end="1555.669">do a document dot create text element</span> <span data-start="1555.669" data-end="1557.71">and have that in line and that's kind of</span> <span data-start="1557.71" data-end="1560.08">noisy as well what we want to be able to</span> <span data-start="1560.08" data-end="1562.09">do is get to this something that looks</span> <span data-start="1562.09" data-end="1564.07">that's starting to look quite a lot like</span> <span data-start="1564.07" data-end="1566.74">the actual Dom fragment that it's going</span> <span data-start="1566.74" data-end="1569.409">to create and just like move out all of</span> <span data-start="1569.409" data-end="1572.59">that line noise and basically default</span> <span data-start="1572.59" data-end="1576.82">some of the arguments we can we can do</span> <span data-start="1576.82" data-end="1580.539">that by actually and changing the the</span> <span data-start="1580.539" data-end="1585.309">sort of API sugar function we don't know</span> <span data-start="1585.309" data-end="1587.71">we're still calling HTML element with</span> <span data-start="1587.71" data-end="1589.389">the name attributes and children so that</span> <span data-start="1589.389" data-end="1591.58">remains solid but we're actually using</span> <span data-start="1591.58" data-end="1595.179">our sort of with veneering this this</span> <span data-start="1595.179" data-end="1597.97">sort of sugar layer on top of the solid</span> <span data-start="1597.97" data-end="1601.33">base and all of this code is basically</span> <span data-start="1601.33" data-end="1603.25">examining the audience or arguments</span> <span data-start="1603.25" data-end="1605.38">array and the types that are in it and</span> <span data-start="1605.38" data-end="1607.24">basically sorting things out and making</span> <span data-start="1607.24" data-end="1610.389">making things much nicer so for instance</span> <span data-start="1610.389" data-end="1613.11">at the bottom when we look through the</span> <span data-start="1613.11" data-end="1616.33">the children and then if it's a string</span> <span data-start="1616.33" data-end="1617.2">then we know to do a</span> <span data-start="1617.2" data-end="1619.69">document.createelement on it so so then</span> <span data-start="1619.69" data-end="1620.889">you're just passing a string in rather</span> <span data-start="1620.889" data-end="1622.539">than having to worry about the Dom API</span> <span data-start="1622.539" data-end="1628.96">at all the the final and probably most</span> <span data-start="1628.96" data-end="1631.899">interesting part is it's sort of how do</span> <span data-start="1631.899" data-end="1634.029">you build a library that that remains</span> <span data-start="1634.029" data-end="1634.75">flexible</span> <span data-start="1634.75" data-end="1639.16">and allows and fulfills as many use</span> <span data-start="1639.16" data-end="1642.87">cases as possible and I suppose the</span> <span data-start="1642.87" data-end="1645.91">comparison here is and I think that you</span> <span data-start="1645.91" data-end="1647.53">know this is the trajectory of nearly</span> <span data-start="1647.53" data-end="1650.74">all open source projects as they start</span> <span data-start="1650.74" data-end="1652.15">out with something really lean and mean</span> <span data-start="1652.15" data-end="1654.82">and a great idea so you know we've got</span> <span data-start="1654.82" data-end="1656.77">this pen knife it's got a knife in it</span> <span data-start="1656.77" data-end="1659.05">and it's also got a bottle opener so you</span> <span data-start="1659.05" data-end="1660.34">know what else you need when you go</span> <span data-start="1660.34" data-end="1662.14">camping you can cut things you can open</span> <span data-start="1662.14" data-end="1664.24">cans it's great but then someone comes</span> <span data-start="1664.24" data-end="1666.19">along and says yeah but wouldn't it be</span> <span data-start="1666.19" data-end="1668.32">great if like it had a compass and a</span> <span data-start="1668.32" data-end="1670.87">toothpick and make you know and and so</span> <span data-start="1670.87" data-end="1672.73">you go okay yeah i'll add a compass and</span> <span data-start="1672.73" data-end="1673.78">a toothpick that would be a good idea</span> <span data-start="1673.78" data-end="1675.97">and then so you know you're adding more</span> <span data-start="1675.97" data-end="1677.62">and more things on there more and more</span> <span data-start="1677.62" data-end="1679.87">pull requests coming and they think yeah</span> <span data-start="1679.87" data-end="1681.94">but i've got all of these other ideas</span> <span data-start="1681.94" data-end="1684.94">for features yeah if you know if you if</span> <span data-start="1684.94" data-end="1687.58">you write your libraries in in that way</span> <span data-start="1687.58" data-end="1689.83">you know then it can easily get way way</span> <span data-start="1689.83" data-end="1693.61">out of hand and i think the thing is is</span> <span data-start="1693.61" data-end="1696.1">you need to always keep in mind that</span> <span data-start="1696.1" data-end="1697.78">when you write a piece of code you're</span> <span data-start="1697.78" data-end="1699.16">never ever going to be able to please</span> <span data-start="1699.16" data-end="1701.29">everyone you know you shouldn't even</span> <span data-start="1701.29" data-end="1703.54">like try to second-guess every use case</span> <span data-start="1703.54" data-end="1704.59">and you shouldn't even try to</span> <span data-start="1704.59" data-end="1708.97">accommodate every use case and end up</span> <span data-start="1708.97" data-end="1712.12">with this kind of bloated feature set 1</span> <span data-start="1712.12" data-end="1715.18">think plan that you see a lot in lots of</span> <span data-start="1715.18" data-end="1716.8">different libraries and i think it's</span> <span data-start="1716.8" data-end="1719.5">kind of like a sort of an anti-pattern</span> <span data-start="1719.5" data-end="1721.99">that leads to software boat is is</span> <span data-start="1721.99" data-end="1724">actually with option Hassett the hashes</span> <span data-start="1724" data-end="1725.92">having an option hat is your only</span> <span data-start="1725.92" data-end="1728.5">argument is not flexibility yes you can</span> <span data-start="1728.5" data-end="1730.75">add new properties but it gets really</span> <span data-start="1730.75" data-end="1734.44">out of hand this is there's many</span> <span data-start="1734.44" data-end="1736.51">libraries that i could have picked on</span> <span data-start="1736.51" data-end="1738.16">for this it's not like so I'm not</span> <span data-start="1738.16" data-end="1739.72">singling out but this is something from</span> <span data-start="1739.72" data-end="1742.81">jQuery UI and this is the documentation</span> <span data-start="1742.81" data-end="1748.03">for the draggable component it has 28</span> <span data-start="1748.03" data-end="1752.47">options I mean how how and you know</span> <span data-start="1752.47" data-end="1754.36">that's probably likely to grow because</span> <span data-start="1754.36" data-end="1755.71">everyone's going to go oh yeah but with</span> <span data-start="1755.71" data-end="1756.88">my Dragon will object I want to be able</span> <span data-start="1756.88" data-end="1758.95">to do this and that and if you look down</span> <span data-start="1758.95" data-end="1761.32">then there for like kind of niche cases</span> <span data-start="1761.32" data-end="1764.92">like adding classes or being in a</span> <span data-start="1764.92" data-end="1767.05">certain container it's just all of it</span> <span data-start="1767.05" data-end="1768.06">you know</span> <span data-start="1768.06" data-end="1769.98">people are coming with feature requests</span> <span data-start="1769.98" data-end="1771.93">and then the concrete features are built</span> <span data-start="1771.93" data-end="1775.29">into this thing well I would suggest is</span> <span data-start="1775.29" data-end="1777.15">instead of doing that you actually think</span> <span data-start="1777.15" data-end="1780.03">about how you can add hack ability into</span> <span data-start="1780.03" data-end="1783.36">your code and your API so that you don't</span> <span data-start="1783.36" data-end="1786.51">have to accommodate every single niche</span> <span data-start="1786.51" data-end="1789.09">use but you provide the framework with</span> <span data-start="1789.09" data-end="1790.5">which people can sort of build their</span> <span data-start="1790.5" data-end="1795.03">their things on top a really sort of</span> <span data-start="1795.03" data-end="1796.53">first port of call thing that you could</span> <span data-start="1796.53" data-end="1801.3">do to fix that is this idea of there's</span> <span data-start="1801.3" data-end="1804.24">kind of this I think I first saw it in</span> <span data-start="1804.24" data-end="1806.64">in murbad chili but the idea of there</span> <span data-start="1806.64" data-end="1809.84">being a public API an internal API that</span> <span data-start="1809.84" data-end="1812.82">that's still accessible but you kind of</span> <span data-start="1812.82" data-end="1815.13">suggest people don't mess with and then</span> <span data-start="1815.13" data-end="1816.84">a protected API which you just basically</span> <span data-start="1816.84" data-end="1820.94">can't even get out I think at the moment</span> <span data-start="1820.94" data-end="1823.05">especially since the module pattern has</span> <span data-start="1823.05" data-end="1824.67">been around in JavaScript you see a lot</span> <span data-start="1824.67" data-end="1826.88">of stuff made private in JavaScript</span> <span data-start="1826.88" data-end="1829.56">libraries that don't need to be and then</span> <span data-start="1829.56" data-end="1832.26">you and once you've got truly private</span> <span data-start="1832.26" data-end="1835.26">things that you people just can't dig</span> <span data-start="1835.26" data-end="1836.85">into there and actually do their own</span> <span data-start="1836.85" data-end="1840.54">thing on top of it so i suppose what i'm</span> <span data-start="1840.54" data-end="1843.57">talking about is in a sort of you know</span> <span data-start="1843.57" data-end="1845.7">old school module pattern way you've got</span> <span data-start="1845.7" data-end="1847.62">your private methods that just existed</span> <span data-start="1847.62" data-end="1851.64">in the closure you absolutely can't be</span> <span data-start="1851.64" data-end="1855.84">messed with I think trying I I think</span> <span data-start="1855.84" data-end="1857.37">it's best to try and keep those as a as</span> <span data-start="1857.37" data-end="1860.88">a minimum really and probably only like</span> <span data-start="1860.88" data-end="1863.04">really really low level stuff but then</span> <span data-start="1863.04" data-end="1864.27">the other thing you can do is have this</span> <span data-start="1864.27" data-end="1866.73">idea of internal methods and and and the</span> <span data-start="1866.73" data-end="1870.24">the convention that I stole from herb is</span> <span data-start="1870.24" data-end="1872.31">is to underscore them so they're there</span> <span data-start="1872.31" data-end="1875.19">and if you actually looked at the this</span> <span data-start="1875.19" data-end="1877.11">lib module you'd see on the score</span> <span data-start="1877.11" data-end="1879.21">whatever and if you wanted to if you</span> <span data-start="1879.21" data-end="1881.91">really really needed to a developer</span> <span data-start="1881.91" data-end="1884.37">could actually override that and change</span> <span data-start="1884.37" data-end="1887.22">it and work with it and and then you've</span> <span data-start="1887.22" data-end="1889.35">obviously got your public API and you're</span> <span data-start="1889.35" data-end="1892.14">basically saying to the contract with</span> <span data-start="1892.14" data-end="1895.47">the programmer is you shouldn't really</span> <span data-start="1895.47" data-end="1898.65">mess with the underscore methods because</span> <span data-start="1898.65" data-end="1900.36">they are internal and they'll probably</span> <span data-start="1900.36" data-end="1901.98">change from version to version</span> <span data-start="1901.98" data-end="1903.45">so on your own head be it but if you</span> <span data-start="1903.45" data-end="1907.01">really really need to then it's there a</span> <span data-start="1907.01" data-end="1910.5">night and slightly more sort of complex</span> <span data-start="1910.5" data-end="1912.36">but a much much nicer way to build in</span> <span data-start="1912.36" data-end="1914.61">hack ability is actually by using the</span> <span data-start="1914.61" data-end="1916.559">fact that javascript has high order</span> <span data-start="1916.559" data-end="1919.29">functions wherever you accept a value</span> <span data-start="1919.29" data-end="1922.08">for for configuration you can accept a</span> <span data-start="1922.08" data-end="1924.15">function and that adds this whole level</span> <span data-start="1924.15" data-end="1927.41">of hack ability straightaway a really</span> <span data-start="1927.41" data-end="1930.44">really sort of nice simple example is</span> </p>
<p><span data-start="1930.44" data-end="1933.36">Kirk comes from from Endor which is a</span> <span data-start="1933.36" data-end="1934.95">library that's come out quite recently</span> <span data-start="1934.95" data-end="1938.49">they have this idea of they have this</span> <span data-start="1938.49" data-end="1940.29">this this method called underscore</span> <span data-start="1940.29" data-end="1942.99">select and the contract is for that</span> <span data-start="1942.99" data-end="1945.059">method that it takes a selector and the</span> <span data-start="1945.059" data-end="1946.89">root node and then it returns an array</span> <span data-start="1946.89" data-end="1948.9">of matching nodes now the cool thing</span> <span data-start="1948.9" data-end="1950.64">about that is it comes with its own</span> <span data-start="1950.64" data-end="1953.82">thing like a limited select selector</span> <span data-start="1953.82" data-end="1955.74">engine but it's really easy to just</span> <span data-start="1955.74" data-end="1958.26">overwrite that function with a function</span> <span data-start="1958.26" data-end="1960.51">that fulfills the same contract and uses</span> <span data-start="1960.51" data-end="1961.919">sizzle and then you've got all of the</span> <span data-start="1961.919" data-end="1966.03">extra jQuery style stuff in there or if</span> <span data-start="1966.03" data-end="1967.98">you're using the same thing on a mobile</span> <span data-start="1967.98" data-end="1970.86">platform then all you need to do is over</span> <span data-start="1970.86" data-end="1972.299">right that and there is something that</span> <span data-start="1972.299" data-end="1973.919">just use quick quick users query</span> <span data-start="1973.919" data-end="1977.46">selector all so just them having this</span> <span data-start="1977.46" data-end="1979.169">one foot function that allows you to</span> <span data-start="1979.169" data-end="1981.33">overwrite it is it sort of opened up</span> <span data-start="1981.33" data-end="1983.429">this whole sort of sphere of</span> <span data-start="1983.429" data-end="1986.669">possibilities in in this code and you</span> <span data-start="1986.669" data-end="1989.669">can imagine this kind of technique can</span> <span data-start="1989.669" data-end="1992.4">be used to add of like a really huge</span> <span data-start="1992.4" data-end="1997.26">degree of vaca bility another way you</span> <span data-start="1997.26" data-end="1999.48">can do it is by using inheritance you</span> <span data-start="1999.48" data-end="2001.88">can actually sort of use prototypal</span> <span data-start="2001.88" data-end="2006.559">inheritance and and build a set of base</span> <span data-start="2006.559" data-end="2009.559">objects in that basically you know map</span> <span data-start="2009.559" data-end="2011.78">to the problems in your library and then</span> <span data-start="2011.78" data-end="2014.059">you can build on top of them with the</span> <span data-start="2014.059" data-end="2016.07">core features but then they're also</span> <span data-start="2016.07" data-end="2019.179">there and you can own to expose to the</span> <span data-start="2019.179" data-end="2021.71">two other developers to build their own</span> <span data-start="2021.71" data-end="2024.83">features on top and kind of a slightly</span> <span data-start="2024.83" data-end="2028.429">more concrete example of that is in in a</span> <span data-start="2028.429" data-end="2030.08">library of mine called loadrunner load</span> <span data-start="2030.08" data-end="2034.269">runners a dependency manager and so the</span> <span data-start="2034.269" data-end="2036.07">the sort of central part of the library</span> <span data-start="2036.07" data-end="2039.94">is this this base constructor called</span> <span data-start="2039.94" data-end="2044.229">dependency and the way and what you can</span> <span data-start="2044.229" data-end="2047.049">do with that is all of the module</span> <span data-start="2047.049" data-end="2048.76">loading and the script loading stuff is</span> <span data-start="2048.76" data-end="2052.809">is built on top of is a subclass of</span> <span data-start="2052.809" data-end="2056.5">dependency but then any other developer</span> <span data-start="2056.5" data-end="2058.149">can make any other dependency on</span> <span data-start="2058.149" data-end="2059.829">anything else they like and all they</span> <span data-start="2059.829" data-end="2062.379">have to do is create a new constructor</span> <span data-start="2062.379" data-end="2064.629">that inherits from the base dependency</span> <span data-start="2064.629" data-end="2066.789">and then override any bits that need to</span> <span data-start="2066.789" data-end="2071.02">change so in this case it's a we want to</span> <span data-start="2071.02" data-end="2072.579">create a dependency on a mustache</span> <span data-start="2072.579" data-end="2075.639">template being loaded so we create this</span> <span data-start="2075.639" data-end="2077.98">new constructor inherit from dependency</span> <span data-start="2077.98" data-end="2080.109">and then all we have to do is override</span> <span data-start="2080.109" data-end="2081.819">the start method which is the method</span> <span data-start="2081.819" data-end="2084.849">that kicks off fulfilling this</span> <span data-start="2084.849" data-end="2087.129">dependency and in there you know we go</span> <span data-start="2087.129" data-end="2089.26">and get the template we pass it and then</span> <span data-start="2089.26" data-end="2091.029">we call complete which is the other part</span> <span data-start="2091.029" data-end="2093.579">of the contract once we've built this</span> <span data-start="2093.579" data-end="2097.18">thing we can use it at any place in the</span> <span data-start="2097.18" data-end="2098.829">library where you can use a dependency</span> <span data-start="2098.829" data-end="2100.539">so at the bottom there's a using</span> <span data-start="2100.539" data-end="2104.26">function that says I depend on this item</span> <span data-start="2104.26" data-end="2108.16">and then when it's done then the results</span> <span data-start="2108.16" data-end="2112.779">get past him and and so this one thing</span> <span data-start="2112.779" data-end="2114.49">that sort of built into loadrunner</span> <span data-start="2114.49" data-end="2116.74">enables anyone to build pretty much any</span> <span data-start="2116.74" data-end="2118.539">kind of dependency management on top of</span> <span data-start="2118.539" data-end="2120.279">it it doesn't have to be a script it</span> <span data-start="2120.279" data-end="2121.45">doesn't have to load over the network</span> <span data-start="2121.45" data-end="2123.7">doesn't have to be anything in</span> <span data-start="2123.7" data-end="2128.41">particular a sort of like a weight form</span> <span data-start="2128.41" data-end="2129.94">of doing a similar thing is by using</span> <span data-start="2129.94" data-end="2132.73">duck typing which I'm sure may see you</span> <span data-start="2132.73" data-end="2133.98">have come across sort of the idea that</span> <span data-start="2133.98" data-end="2137.619">if if an object fulfills a certain</span> <span data-start="2137.619" data-end="2140.95">contract it has a certain method then</span> <span data-start="2140.95" data-end="2145.569">we'll use that method implicitly we can</span> <span data-start="2145.569" data-end="2148.839">demonstrate that by adding a feature to</span> <span data-start="2148.839" data-end="2153.069">the Dom builder so what we'll what we do</span> <span data-start="2153.069" data-end="2154.779">here in our element builder function is</span> <span data-start="2154.779" data-end="2156.94">what we want to say is any object that</span> <span data-start="2156.94" data-end="2159.76">has a to DOM method then if it's there</span> <span data-start="2159.76" data-end="2163.66">will call that expect it to return a Dom</span> <span data-start="2163.66" data-end="2165.7">structure representing that object and</span> <span data-start="2165.7" data-end="2167.95">then we'll implicitly add it as a child</span> <span data-start="2167.95" data-end="2171.46">so we're just doing you know type of the</span> <span data-start="2171.46" data-end="2175.06">argument to da y equals function then</span> <span data-start="2175.06" data-end="2176.44">we'll call that function and that's</span> <span data-start="2176.44" data-end="2178.33">going to be the child instead of the</span> <span data-start="2178.33" data-end="2181.51">object itself which allows us to write</span> <span data-start="2181.51" data-end="2183.97">some really nice things so here's an</span> <span data-start="2183.97" data-end="2185.65">example we've got an object which</span> <span data-start="2185.65" data-end="2188.2">represents a tweet all we need to do is</span> <span data-start="2188.2" data-end="2190.84">add the two damn method to it that and</span> <span data-start="2190.84" data-end="2193.06">general and use the no builder again to</span> <span data-start="2193.06" data-end="2195.52">generate the Dom structure that</span> <span data-start="2195.52" data-end="2197.71">represents a single tweet and then we</span> <span data-start="2197.71" data-end="2200.53">can just drop it in and say if we had an</span> <span data-start="2200.53" data-end="2202.36">array of those then we drop that in as</span> <span data-start="2202.36" data-end="2206.2">the chapter in the child and then</span> <span data-start="2206.2" data-end="2210.3">they'll it'll do all of the work for you</span> <span data-start="2210.3" data-end="2214.48">so space the the crux of the matter is</span> <span data-start="2214.48" data-end="2215.89">when you're thinking about solving a</span> <span data-start="2215.89" data-end="2219.34">problem try not to write a code to solve</span> <span data-start="2219.34" data-end="2222.37">the problem think more about developing</span> <span data-start="2222.37" data-end="2224.08">a set of tools that will enable you to</span> <span data-start="2224.08" data-end="2228.15">solve that that class of problem and</span> <span data-start="2228.15" data-end="2230.89">then once you've got these tools that</span> <span data-start="2230.89" data-end="2233.17">sort of model the problem space then you</span> <span data-start="2233.17" data-end="2235.08">build your core features on top of that</span> <span data-start="2235.08" data-end="2238.54">the nice thing about that is because</span> <span data-start="2238.54" data-end="2240.46">you've built this sort of bag of tools</span> <span data-start="2240.46" data-end="2242.29">for solving different things you've</span> <span data-start="2242.29" data-end="2243.67">basically made yourself a plug-in</span> <span data-start="2243.67" data-end="2246.79">framework just by designing your code in</span> <span data-start="2246.79" data-end="2250.21">a certain way and I think you shouldn't</span> <span data-start="2250.21" data-end="2253.93">build any non-trivial piece of reusable</span> <span data-start="2253.93" data-end="2257.56">code that that doesn't have a sort of</span> <span data-start="2257.56" data-end="2259.57">plug-in system of some type everything</span> <span data-start="2259.57" data-end="2262.09">should be hackable because everyone has</span> <span data-start="2262.09" data-end="2264.25">different needs and if if you can</span> <span data-start="2264.25" data-end="2266.14">provide a framework for other people to</span> <span data-start="2266.14" data-end="2267.52">solve their niche problems then you</span> <span data-start="2267.52" data-end="2271.51">don't have to get that feature blow yeah</span> <span data-start="2271.51" data-end="2273.46">so it's a case of you know you build</span> <span data-start="2273.46" data-end="2280.81">tools to solve the problem so yeah now I</span> <span data-start="2280.81" data-end="2282.25">just showed you loads of things and</span> <span data-start="2282.25" data-end="2285.55">there's definitely some personal</span> <span data-start="2285.55" data-end="2286.84">preferences in there and there's</span> <span data-start="2286.84" data-end="2288.37">definitely ups and downsize to a lot of</span> <span data-start="2288.37" data-end="2290.2">the techniques that I showed you and you</span> <span data-start="2290.2" data-end="2293.17">know you are going to need to you know</span> <span data-start="2293.17" data-end="2295">make your own minds of depending on the</span> <span data-start="2295" data-end="2296.95">particular problem you're creating as</span> <span data-start="2296.95" data-end="2300.46">what to do but my main thing is that</span> <span data-start="2300.46" data-end="2303.7">you really need to think about the the</span> <span data-start="2303.7" data-end="2306.13">the your API design right up front and</span> <span data-start="2306.13" data-end="2307.69">design it like you're designing a</span> <span data-start="2307.69" data-end="2310.27">website make sure that it's really</span> <span data-start="2310.27" data-end="2312.54">usable it's as simple as it can be and</span> <span data-start="2312.54" data-end="2316.599">it it's predictable and not making the</span> <span data-start="2316.599" data-end="2318.13">programmer think about things that they</span> <span data-start="2318.13" data-end="2321.55">shouldn't do make use of the conventions</span> <span data-start="2321.55" data-end="2325.869">and yeah and lastly build in some hack</span> <span data-start="2325.869" data-end="2327.7">ability so you you're not responsible</span> <span data-start="2327.7" data-end="2332.849">for all of the niche features and so</span> <span data-start="2332.849" data-end="2335.619">we're sort of overtime because of my</span> <span data-start="2335.619" data-end="2338.41">messenger out with the display settings</span> <span data-start="2338.41" data-end="2342.01">but if there's no time for questions you</span> <span data-start="2342.01" data-end="2344.5">can heckle me on twitter at damn wrong</span> <span data-start="2344.5" data-end="2347.32">you can hassle me in the corridor or</span> <span data-start="2347.32" data-end="2349.33">better still talk to me when i'm drunk</span> <span data-start="2349.33" data-end="2350.71">cause i like arguing about things more</span> <span data-start="2350.71" data-end="2353.56">that way and yeah work for twitter and</span> <span data-start="2353.56" data-end="2356.67">they're hiring and that kind of thing</span> <span data-start="2356.67" data-end="2363.7">there you go</span> <span data-start="2363.71" data-end="2366.93">uh you know there are planes Chris we</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
