<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="JSConf transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Lw3oFjzWRqI</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/Lw3oFjzWRqI?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="9.95" data-end="11.88">one of the things we've done a lot of</span> <span data-start="11.88" data-end="14.099">and yet is really stress around with</span> <span data-start="14.099" data-end="18.18">building real time applications and it's</span> <span data-start="18.18" data-end="20.039">real time is one of those things that I</span> <span data-start="20.039" data-end="22.58">feel has a has a giant pile of potential</span> <span data-start="22.58" data-end="26.31">I think we really haven't seen what it</span> <span data-start="26.31" data-end="28.41">can be used for yet as far as I mean I</span> <span data-start="28.41" data-end="29.46">really think we can push it a little</span> <span data-start="29.46" data-end="31.289">further the first the first thing people</span> <span data-start="31.289" data-end="32.79">always do is they go write some chat</span> <span data-start="32.79" data-end="34.77">application and you know that's</span> <span data-start="34.77" data-end="37.05">interesting and it's solely useful but</span> <span data-start="37.05" data-end="38.76">it's been done and it's every other week</span> <span data-start="38.76" data-end="40.23">we get somebody it's like oh you know I</span> <span data-start="40.23" data-end="42.39">wrote a chat app in 10 lines of code</span> <span data-start="42.39" data-end="45.36">like cool way to go and that's all great</span> <span data-start="45.36" data-end="49.62">but I really think that as this</span> <span data-start="49.62" data-end="51.059">continues to get easier and easier and</span> <span data-start="51.059" data-end="53.219">easier to do we're going to see people</span> <span data-start="53.219" data-end="54.18">using it for a lot more interesting</span> <span data-start="54.18" data-end="57.77">things and that's really what what</span> <span data-start="57.77" data-end="60.42">what's so amazing about what the what</span> </p>
<p><span data-start="60.42" data-end="64.65">Sokka do does for us but so one of the</span> <span data-start="64.65" data-end="67.229">things we have to keep in mind is as web</span> <span data-start="67.229" data-end="69.33">developers is we're actually in direct</span> <span data-start="69.33" data-end="71.689">competition with native applications</span> <span data-start="71.689" data-end="74.1">that's not really something people think</span> <span data-start="74.1" data-end="76.259">about or talk about a lot but I mean the</span> <span data-start="76.259" data-end="78.24">truth is it given the choice between</span> <span data-start="78.24" data-end="81.06">using you know Gmail or Sparrow mail</span> <span data-start="81.06" data-end="83.49">from my mac sparrow gives me a nicer</span> <span data-start="83.49" data-end="85.799">experience and and that's what i use and</span> <span data-start="85.799" data-end="88.439">i end up spending money it's from to you</span> <span data-start="88.439" data-end="91.13">know to some third-party mac app</span> <span data-start="91.13" data-end="94.92">developers to use gmail and the truth of</span> <span data-start="94.92" data-end="97.74">the matter is like experience is</span> <span data-start="97.74" data-end="99.96">everything right and i think i think one</span> <span data-start="99.96" data-end="101.93">of the things that we've kind of done i</span> <span data-start="101.93" data-end="104.13">mean i'm a little more of a front end</span> <span data-start="104.13" data-end="105.93">guy my background is actually in</span> <span data-start="105.93" data-end="108.36">business not not development got into</span> <span data-start="108.36" data-end="112.35">this stuff later but i think you know</span> <span data-start="112.35" data-end="113.899">really got to keep in mind that that</span> <span data-start="113.899" data-end="117.149">recreating as much of that the</span> <span data-start="117.149" data-end="119.579">experience that people want from native</span> <span data-start="119.579" data-end="121.92">applications in the web is very possible</span> <span data-start="121.92" data-end="124.68">these days but we're kind of stuck in</span> <span data-start="124.68" data-end="126.329">this rut of feeling like we always have</span> <span data-start="126.329" data-end="128.129">the support you know we have to limp</span> <span data-start="128.129" data-end="130.2">along all these old browsers and i</span> <span data-start="130.2" data-end="131.47">really think that's a mistake and</span> <span data-start="131.47" data-end="132.55">we're kind of shooting ourselves in the</span> <span data-start="132.55" data-end="136.39">foot a little bit and that and I think</span> <span data-start="136.39" data-end="138.04">the truth of the matter is it's totally</span> <span data-start="138.04" data-end="140.17">fine you know you go buy microsoft</span> <span data-start="140.17" data-end="142.24">office in a box you read the side of it</span> <span data-start="142.24" data-end="144.79">there's minimum system requirements so</span> <span data-start="144.79" data-end="147.37">what's wrong with requiring a modern</span> <span data-start="147.37" data-end="149.68">free browser I mean the truth of it is</span> <span data-start="149.68" data-end="151.99">if you give a compelling enough reason</span> <span data-start="151.99" data-end="155.8">to use those the people will come in the</span> </p>
<p><span data-start="155.8" data-end="157.45">IT departments will switch if the</span> <span data-start="157.45" data-end="159.46">business is a big enterprise guys have</span> <span data-start="159.46" data-end="162.91">good reason to you know actually get</span> <span data-start="162.91" data-end="164.35">their people downloading chrome or</span> <span data-start="164.35" data-end="166.87">whatever it is if there's enough of</span> <span data-start="166.87" data-end="168.4">business reason that the technological</span> <span data-start="168.4" data-end="170.26">stuff goes away so I think the trick is</span> <span data-start="170.26" data-end="174.31">really as web developers to focus on you</span> <span data-start="174.31" data-end="175.99">know basically stop supporting crappy</span> <span data-start="175.99" data-end="184.15">browsers because so in yeah like I said</span> <span data-start="184.15" data-end="187">it's really not too much to ask I think</span> <span data-start="187" data-end="188.41">one of the biggest components of that</span> <span data-start="188.41" data-end="190.42">and one of the things that can make the</span> <span data-start="190.42" data-end="193.57">most compelling argument for using you</span> <span data-start="193.57" data-end="195.459">know really modern browsers is the</span> <span data-start="195.459" data-end="197.489">real-time stuff I think there's a lot of</span> <span data-start="197.489" data-end="199.75">collaboration tools and a lot of a lot</span> <span data-start="199.75" data-end="201.16">of things awaiting the thought of yet</span> <span data-start="201.16" data-end="203.29">that you can do with real time that</span> <span data-start="203.29" data-end="204.79">people just need to start experiment</span> <span data-start="204.79" data-end="206.5">when experimenting with and publishing</span> <span data-start="206.5" data-end="208.93">and just you know forget i mean socket</span> <span data-start="208.93" data-end="210.43">i/o kind of makes it easier as far as</span> <span data-start="210.43" data-end="212.32">supporting older stuff but you know what</span> <span data-start="212.32" data-end="214.959">if your app requires websockets so be it</span> <span data-start="214.959" data-end="217.81">just use it if it's got a compelling</span> <span data-start="217.81" data-end="219.82">enough of an experience then you know</span> <span data-start="219.82" data-end="221.38">people will people will do whatever they</span> <span data-start="221.38" data-end="222.58">need to do use your app and i think</span> <span data-start="222.58" data-end="223.81">really that's the approach we should be</span> <span data-start="223.81" data-end="226.09">taking instead of this like endless</span> <span data-start="226.09" data-end="227.83">reverse compatibility mode that we're</span> <span data-start="227.83" data-end="230.35">kind of stuck in and i know some people</span> <span data-start="230.35" data-end="232.09">don't you know you work in a corporation</span> <span data-start="232.09" data-end="234.22">you don't have that option but i would</span> <span data-start="234.22" data-end="236.23">just say really really really want to</span> <span data-start="236.23" data-end="237.61">stress this i think that's important and</span> </p>
<p><span data-start="237.61" data-end="239.38">I think real-time is one of those things</span> <span data-start="239.38" data-end="242.11">that can make that happen so I would</span> <span data-start="242.11" data-end="243.459">just suggest in general on this is kind</span> <span data-start="243.459" data-end="245.26">of a soapboxing obviously but really</span> <span data-start="245.26" data-end="246.88">focus on providing the most compelling</span> <span data-start="246.88" data-end="250.18">experiences and that you can and i think</span> <span data-start="250.18" data-end="252.31">i think real-time single page apps is</span> <span data-start="252.31" data-end="255.4">actually a great way to do that and as</span> <span data-start="255.4" data-end="257.109">browsers get better at integrating with</span> <span data-start="257.109" data-end="259.63">the OS and everything else you do</span> <span data-start="259.63" data-end="261.459">desktop notifications background apps</span> <span data-start="261.459" data-end="264.28">all that kind of stuff um you know it's</span> <span data-start="264.28" data-end="265.24">up to us</span> <span data-start="265.24" data-end="266.59">community to actually use that stuff</span> <span data-start="266.59" data-end="268.66">push it and show what it can be done</span> <span data-start="268.66" data-end="270.58">with it and that's what I'd love to see</span> <span data-start="270.58" data-end="275.169">happen so one of the things that that I</span> <span data-start="275.169" data-end="277.12">think is true for a lot of a lot of</span> <span data-start="277.12" data-end="281.11">people are self-taught right and really</span> <span data-start="281.11" data-end="284.259">adoption is driven by how how easy it is</span> <span data-start="284.259" data-end="286.47">to start messing around with something</span> <span data-start="286.47" data-end="289.96">if you have to have you know this giant</span> <span data-start="289.96" data-end="291.669">full stack development experience and</span> <span data-start="291.669" data-end="293.83">you you have to know how to set up you</span> <span data-start="293.83" data-end="296.8">know like basically in to do real time</span> <span data-start="296.8" data-end="298.33">the way the way people started doing it</span> <span data-start="298.33" data-end="300.34">was XMPP kind of was one of the first</span> <span data-start="300.34" data-end="302.919">approaches to doing this and that that's</span> <span data-start="302.919" data-end="304.659">flying that's great and it's you know</span> <span data-start="304.659" data-end="306.639">you've got you've got this nice API and</span> <span data-start="306.639" data-end="308.59">protocol to work with and tons of</span> <span data-start="308.59" data-end="312.009">libraries out there and whatnot but you</span> <span data-start="312.009" data-end="313.479">know then you have to know how to how to</span> <span data-start="313.479" data-end="315.58">set up and run an xmpp server along with</span> <span data-start="315.58" data-end="317.02">everything else that you're doing the</span> <span data-start="317.02" data-end="319.06">truth is you know your average front end</span> <span data-start="319.06" data-end="321.039">dev who's going to have to implement</span> <span data-start="321.039" data-end="323.409">this isn't going to know enough to spend</span> <span data-start="323.409" data-end="325.86">his weeknights you know like at home</span> <span data-start="325.86" data-end="328.21">cranking out some real time app I mean</span> <span data-start="328.21" data-end="330.07">it could happen but the truth is the</span> <span data-start="330.07" data-end="332.83">easier it gets the lower the bar to the</span> <span data-start="332.83" data-end="335.409">level of you know basically the lower</span> <span data-start="335.409" data-end="337.27">the bar is to enter that start messing</span> <span data-start="337.27" data-end="338.86">around with it easier it's going to be</span> <span data-start="338.86" data-end="340.27">in and the faster you're going to see</span> <span data-start="340.27" data-end="342.099">adoption and I think honestly I think</span> <span data-start="342.099" data-end="343.599">that's what Guillermo is really done</span> <span data-start="343.599" data-end="345.789">with socket i/o because you can run note</span> <span data-start="345.789" data-end="347.53">it's a single process it's not that hard</span> <span data-start="347.53" data-end="349.57">to set up on your machine and you can</span> <span data-start="349.57" data-end="351.46">just have this this WebSocket server and</span> <span data-start="351.46" data-end="352.599">just start sending messages back and</span> <span data-start="352.599" data-end="357.31">forth so i mean when i first started</span> <span data-start="357.31" data-end="360.729">getting into to web development I mean I</span> <span data-start="360.729" data-end="363.88">was intimidated by ajax until i saw how</span> <span data-start="363.88" data-end="365.5">easy it was to do with jquery and mike</span> <span data-start="365.5" data-end="368.53">holy crap so I think I've belabored that</span> <span data-start="368.53" data-end="371.77">point enough but the point is it's it's</span> <span data-start="371.77" data-end="375.789">getting a heck of a lot easier so most</span> <span data-start="375.789" data-end="376.69">of you how many of you guys have</span> <span data-start="376.69" data-end="379.719">actually messed with socket i/o okay so</span> <span data-start="379.719" data-end="383.139">most of you but basically it just makes</span> <span data-start="383.139" data-end="385.27">it stupidly simple to send messages back</span> <span data-start="385.27" data-end="387.099">and forth without having to think about</span> <span data-start="387.099" data-end="388.449">the transport without having to</span> <span data-start="388.449" data-end="391.15">basically just so on the on the server</span> <span data-start="391.15" data-end="393.219">all you do now you got your normal</span> <span data-start="393.219" data-end="396.46">little node server and then you can just</span> <span data-start="396.46" data-end="397.569">start sending message</span> </p>
<p><span data-start="397.569" data-end="400.149">I mean you say listen to the server and</span> <span data-start="400.149" data-end="401.83">with the changes obviously this is going</span> <span data-start="401.83" data-end="404.679">to be a little different but you can</span> <span data-start="404.679" data-end="406.059">just send messages back and forth so</span> <span data-start="406.059" data-end="407.949">then on the client you know you just</span> <span data-start="407.949" data-end="410.709">create your socket and you say it's</span> <span data-start="410.709" data-end="413.499">roughly the same API on the client and</span> <span data-start="413.499" data-end="415.689">you just send messages it's just nice</span> <span data-start="415.689" data-end="417.309">super simple bi-directional</span> <span data-start="417.309" data-end="419.74">communication you don't need to worry</span> <span data-start="419.74" data-end="421.029">about serialization you're working at</span> <span data-start="421.029" data-end="423.399">the same language both places it's it's</span> <span data-start="423.399" data-end="427.719">quite simple really so like I said my</span> <span data-start="427.719" data-end="431.74">first experience with with with all this</span> <span data-start="431.74" data-end="435.009">was just using XMPP and so we use stroke</span> </p>
<p><span data-start="435.009" data-end="437.919">GS in the client and actually you know</span> <span data-start="437.919" data-end="440.979">connect as an XMPP client turn the</span> <span data-start="440.979" data-end="442.539">browser into the next peak peak client</span> <span data-start="442.539" data-end="444.189">connect to some you know some other</span> <span data-start="444.189" data-end="449.319">service and start receiving XML you know</span> <span data-start="449.319" data-end="451.059">then you've got it and then you get a</span> <span data-start="451.059" data-end="453.039">parse XML in the browser and all this</span> <span data-start="453.039" data-end="456.059">other stuff so it's it's really a</span> <span data-start="456.059" data-end="458.769">significantly more difficult and and the</span> <span data-start="458.769" data-end="459.969">truth is there's nothing stopping us</span> <span data-start="459.969" data-end="461.469">from messing around with this stuff and</span> <span data-start="461.469" data-end="462.939">there's nothing stopping us from from</span> <span data-start="462.939" data-end="465.909">expecting that you know a browser can</span> <span data-start="465.909" data-end="468.36">support what we're trying to accomplish</span> <span data-start="468.36" data-end="471.599">one of the most important things about</span> <span data-start="471.599" data-end="473.529">building real time outs from what we've</span> <span data-start="473.529" data-end="476.68">discovered is is state so the state is</span> <span data-start="476.68" data-end="478.119">essentially just I mean if you can think</span> <span data-start="478.119" data-end="480.249">of it as kind of a stripped-down way of</span> <span data-start="480.249" data-end="483.819">representing just the core of what's in</span> <span data-start="483.819" data-end="485.86">the application right now as far as just</span> <span data-start="485.86" data-end="488.349">data no and I completely abstracted from</span> <span data-start="488.349" data-end="494.289">views everything else and so recently</span> </p>
<p><span data-start="494.289" data-end="496.059">I've started I mean I've done a lot of</span> <span data-start="496.059" data-end="497.709">stuff aback on Jas and what backbone</span> <span data-start="497.709" data-end="500.349">does is it lets you create models that</span> <span data-start="500.349" data-end="503.86">are separate from your views so you</span> <span data-start="503.86" data-end="506.379">create you create a backbone model and</span> <span data-start="506.379" data-end="509.289">then you can bind changes to specific</span> <span data-start="509.289" data-end="510.939">you can say for example I care about</span> <span data-start="510.939" data-end="513.099">this property if this property change is</span> <span data-start="513.099" data-end="515.289">called this handler really easy stuff</span> <span data-start="515.289" data-end="518.8">but what happens is you can keep you can</span> <span data-start="518.8" data-end="520.449">keep that data very kind of encapsulated</span> <span data-start="520.449" data-end="522.339">in these models and then anything that</span> <span data-start="522.339" data-end="526.6">changes you just respond to it so your</span> <span data-start="526.6" data-end="530.17">view it is just you know your view gets</span> <span data-start="530.17" data-end="531.209">past the model and</span> <span data-start="531.209" data-end="534.509">so your model you you bind changes to</span> <span data-start="534.509" data-end="536.91">the model to your views in this case you</span> <span data-start="536.91" data-end="538.559">just rear-ended the whole thing here in</span> <span data-start="538.559" data-end="539.939">this simple example I mean you could dig</span> <span data-start="539.939" data-end="542.459">in and re-render certain portions of it</span> <span data-start="542.459" data-end="543.749">or change values or whatever you want</span> <span data-start="543.749" data-end="546.449">but I mean the point is once you've</span> <span data-start="546.449" data-end="548.67">attracted your state everything else</span> <span data-start="548.67" data-end="551.879">just responds to that and so one of the</span> <span data-start="551.879" data-end="555.959">first apps that we use this for backbone</span> <span data-start="555.959" data-end="558.769">dermot set up to do Ajax type</span> <span data-start="558.769" data-end="561.3">architecture so you know they've got</span> <span data-start="561.3" data-end="564.209">kind of the built-in methods for working</span> <span data-start="564.209" data-end="566.279">with jquery ajax stuff so you write a</span> </p>
<p><span data-start="566.279" data-end="568.92">REST API and then you can just call you</span> <span data-start="568.92" data-end="570.72">know you build your collection of models</span> <span data-start="570.72" data-end="572.879">and you just call fetch and it will go</span> <span data-start="572.879" data-end="574.29">make the server call populate your</span> <span data-start="574.29" data-end="578.73">models and off you go which is cool and</span> <span data-start="578.73" data-end="580.41">then what we did is on top of that so we</span> <span data-start="580.41" data-end="582.54">would do an AJAX call and then we would</span> <span data-start="582.54" data-end="585.119">actually go subscribe to whatever items</span> <span data-start="585.119" data-end="587.309">were were brought back in an exit PP</span> <span data-start="587.309" data-end="588.689">channel and start getting live updates</span> <span data-start="588.689" data-end="592.379">do that again it works it's possible</span> <span data-start="592.379" data-end="594.929">it's but it's kind of tedious because</span> <span data-start="594.929" data-end="597.24">you have to keep track of I mean at</span> <span data-start="597.24" data-end="598.679">least your models are on living in one</span> <span data-start="598.679" data-end="602.1">place and really the kind of this this</span> <span data-start="602.1" data-end="604.379">this pattern about distracting that into</span> <span data-start="604.379" data-end="607.379">this little observable model state is</span> <span data-start="607.379" data-end="609.749">definitely super helpful as a front end</span> <span data-start="609.749" data-end="611.22">dev and because you just you just</span> <span data-start="611.22" data-end="612.689">changed everything that happens in your</span> <span data-start="612.689" data-end="614.999">view all it does is flip a flag in your</span> <span data-start="614.999" data-end="620.129">model and then your response to it so so</span> <span data-start="620.129" data-end="622.799">what after after messing around with</span> <span data-start="622.799" data-end="625.079">with with backbone and a little bit of</span> <span data-start="625.079" data-end="628.439">socket i/o I I just thought well you get</span> <span data-start="628.439" data-end="629.879">you get all these changes through</span> <span data-start="629.879" data-end="632.85">backbone and yet you kind of do this</span> <span data-start="632.85" data-end="635.54">ajax thing which is kind of not really I</span> <span data-start="635.54" data-end="638.699">mean it at that point it's kind of you</span> <span data-start="638.699" data-end="640.199">know asynchronous you make a change then</span> <span data-start="640.199" data-end="641.85">you have to call save on that model and</span> <span data-start="641.85" data-end="644.069">then that that he'll see realize that</span> <span data-start="644.069" data-end="645.36">sends it to the server and as your</span> <span data-start="645.36" data-end="649.199">server saves it so what I when I realize</span> <span data-start="649.199" data-end="651.179">that backbone can actually run on the</span> <span data-start="651.179" data-end="653.97">server as well and that opens up some</span> <span data-start="653.97" data-end="655.259">interesting possibilities because what</span> <span data-start="655.259" data-end="656.42">you can do is</span> <span data-start="656.42" data-end="658.94">is basically send the exact same model</span> <span data-start="658.94" data-end="662.089">file so you define your models once you</span> <span data-start="662.089" data-end="663.86">send that as a script tag to the browser</span> <span data-start="663.86" data-end="666.41">and you require it as a module in node</span> <span data-start="666.41" data-end="670.16">and if you have a few other things you</span> <span data-start="670.16" data-end="672.98">can actually so what I did is capsule</span> </p>
<p><span data-start="672.98" data-end="674.899">JSL does it's it's an extension of</span> <span data-start="674.899" data-end="677.029">backbone what it does is includes a way</span> <span data-start="677.029" data-end="681.17">to nest models so you have kind of a one</span> <span data-start="681.17" data-end="682.639">model that's kind of your route model</span> <span data-start="682.639" data-end="685.55">and you can add collections to it you</span> <span data-start="685.55" data-end="688.37">can add models to it and you can</span> <span data-start="688.37" data-end="690.11">serialize the entire state just off of</span> <span data-start="690.11" data-end="691.37">that root model there's an export</span> <span data-start="691.37" data-end="693.829">function that you can just use to to get</span> <span data-start="693.829" data-end="696.649">that all out and to its most concise</span> <span data-start="696.649" data-end="698.87">state possible which you can just you</span> <span data-start="698.87" data-end="701.959">know send across socket i/o am also the</span> <span data-start="701.959" data-end="705.38">change events that you get there's no</span> <span data-start="705.38" data-end="707.6">there's no event bubbling by default in</span> <span data-start="707.6" data-end="709.73">backbone so I implemented just the OS</span> <span data-start="709.73" data-end="711.769">now may away basically to pass those</span> <span data-start="711.769" data-end="713.149">events up the tree just like you would</span> <span data-start="713.149" data-end="715.07">in the browser what you're used to there</span> <span data-start="715.07" data-end="718.459">and so you can listen for publish events</span> <span data-start="718.459" data-end="722.089">on the root model and so all these</span> <span data-start="722.089" data-end="724.55">things combined you can actually very</span> <span data-start="724.55" data-end="728.57">quickly you know basically in it you're</span> <span data-start="728.57" data-end="730.76">in the exact same models on the client</span> <span data-start="730.76" data-end="733.76">as you get your connection you just send</span> <span data-start="733.76" data-end="735.74">you just export the entire app state</span> <span data-start="735.74" data-end="737.72">send it to the client and from there on</span> <span data-start="737.72" data-end="739.91">you can actually just let the change</span> <span data-start="739.91" data-end="742.72">events propagate back and forth which is</span> <span data-start="742.72" data-end="745.339">there's clearly some some interesting</span> <span data-start="745.339" data-end="746.959">problems that come along with us as far</span> <span data-start="746.959" data-end="749.06">as security and scaling or not but it's</span> <span data-start="749.06" data-end="752.269">it's a really kind of fascinating way to</span> <span data-start="752.269" data-end="754.459">build applications because no matter</span> <span data-start="754.459" data-end="755.99">where the change happens it gets</span> <span data-start="755.99" data-end="759.319">propagated everywhere or you can do it</span> <span data-start="759.319" data-end="760.85">so that you know you can say the server</span> <span data-start="760.85" data-end="764.98">is the authority here and you know the</span> <span data-start="764.98" data-end="767.66">individual client has to actually you</span> <span data-start="767.66" data-end="769.459">know click send a command that sets the</span> <span data-start="769.459" data-end="771.11">change on the server and then it gets</span> <span data-start="771.11" data-end="772.67">propagated out I mean you can choose how</span> <span data-start="772.67" data-end="775.279">you want to do it and you know you</span> <span data-start="775.279" data-end="776.72">certainly have the valve validate</span> <span data-start="776.72" data-end="777.889">anything that you're using for</span> <span data-start="777.889" data-end="779.56">permissions or anything like that just</span> <span data-start="779.56" data-end="782">to make sure that because I mean you</span> <span data-start="782" data-end="783.589">could open a console on a browser and</span> <span data-start="783.589" data-end="785.779">just edit the model and those things</span> <span data-start="785.779" data-end="787.16">that just propagate if you don't have a</span> <span data-start="787.16" data-end="787.8">secured</span> <span data-start="787.8" data-end="792.269">probably but it makes basically if</span> <span data-start="792.269" data-end="794.07">you're used to using backbone and if</span> <span data-start="794.07" data-end="795.18">you're building your apps this way it</span> <span data-start="795.18" data-end="798.51">doesn't take that much to just get this</span> <span data-start="798.51" data-end="800.91">setup and and kind of have those events</span> <span data-start="800.91" data-end="804.6">magically propagate so as a little</span> <span data-start="804.6" data-end="806.1">example here this would be like your</span> <span data-start="806.1" data-end="810.06">core app model right so what I've done</span> <span data-start="810.06" data-end="811.529">is there's this little register function</span> <span data-start="811.529" data-end="814.529">that creates a uuid for that model on</span> <span data-start="814.529" data-end="817.829">the server and and then there's these</span> <span data-start="817.829" data-end="819.81">addchild collection that child model</span> <span data-start="819.81" data-end="822.42">type functions here the methods that you</span> <span data-start="822.42" data-end="825.5">can use to build basically your tree of</span> <span data-start="825.5" data-end="827.22">describes the structure of your</span> <span data-start="827.22" data-end="832.32">application and so then you know on the</span> <span data-start="832.32" data-end="834.68">server what you would do is you know</span> <span data-start="834.68" data-end="837.39">what I'm doing right now because I was I</span> <span data-start="837.39" data-end="838.709">knew he was going to do something with</span> <span data-start="838.709" data-end="840.39">making it easier to do sessions and user</span> <span data-start="840.39" data-end="843">data and stuff first I could i oh so I</span> <span data-start="843" data-end="844.32">was kind of waiting for that but all I'm</span> <span data-start="844.32" data-end="846.329">doing is grabbing the cookie on the</span> <span data-start="846.329" data-end="848.279">client and saying hey and sending it</span> <span data-start="848.279" data-end="851.04">across socket i/o Oh which is kind of</span> <span data-start="851.04" data-end="854.339">kind of wonky but it works so basically</span> <span data-start="854.339" data-end="856.11">you know you go fetch sure you get this</span> <span data-start="856.11" data-end="858.089">session event from the client and you go</span> <span data-start="858.089" data-end="859.95">fetch your user in the day database and</span> <span data-start="859.95" data-end="862.02">you know whatever the corresponding app</span> <span data-start="862.02" data-end="863.55">state that corresponds to that</span> <span data-start="863.55" data-end="865.26">particular user and then you just</span> <span data-start="865.26" data-end="867.66">serialize the thing send it out and also</span> <span data-start="867.66" data-end="870.36">you bind you know you bind the changes</span> <span data-start="870.36" data-end="873.779">for that public event on that state for</span> <span data-start="873.779" data-end="876.12">that client on the disconnect you unbind</span> <span data-start="876.12" data-end="881.64">it so it's fairly simple stuff but it</span> <span data-start="881.64" data-end="884.51">works quite well so yeah on the on the</span> <span data-start="884.51" data-end="886.62">it's all I'm doing on the client side is</span> <span data-start="886.62" data-end="888.6">sending session across the wire and then</span> <span data-start="888.6" data-end="891.32">listening for messages and the messages</span> <span data-start="891.32" data-end="894.99">basically what i did is i came up with</span> <span data-start="894.99" data-end="897.27">just basically a simple protocol for</span> <span data-start="897.27" data-end="899.88">doing this so you get your initial state</span> <span data-start="899.88" data-end="901.29">and then you get change events you get</span> <span data-start="901.29" data-end="903.54">add events you get move events and you</span> <span data-start="903.54" data-end="906.54">get removed events and then all you do</span> <span data-start="906.54" data-end="910.29">is you look it up by that ID which the</span> <span data-start="910.29" data-end="911.61">general was generated on the server and</span> <span data-start="911.61" data-end="914.07">then you can just whatever the change</span> <span data-start="914.07" data-end="916.47">was you just simply apply it on the</span> <span data-start="916.47" data-end="918.899">other side of the connection so and it's</span> <span data-start="918.899" data-end="921.63">really up to you as far as you know</span> <span data-start="921.63" data-end="923.61">what you want to do there I've in theory</span> <span data-start="923.61" data-end="926.07">you can just have it so that any client</span> <span data-start="926.07" data-end="927.33">can change anything and it just gets</span> <span data-start="927.33" data-end="929.61">propagated it completely depends on the</span> <span data-start="929.61" data-end="931.53">use case for what you're trying to do</span> <span data-start="931.53" data-end="937.14">but so anyway this is one of the little</span> <span data-start="937.14" data-end="938.82">chat apps we built with it this was all</span> </p>
<p><span data-start="938.82" data-end="944.01">XMPP but what we did here was actually</span> <span data-start="944.01" data-end="945.75">kind of an interesting mixture of the</span> <span data-start="945.75" data-end="949.2">two so XMPP is fantastic as an external</span> <span data-start="949.2" data-end="950.58">API right because there's all these</span> <span data-start="950.58" data-end="953.34">libraries out there that that can use it</span> <span data-start="953.34" data-end="955.74">and for say you want to write an iphone</span> <span data-start="955.74" data-end="957.17">app to go along with your application</span> <span data-start="957.17" data-end="961.14">you need to provide that external API if</span> <span data-start="961.14" data-end="963.12">all you have those models living in</span> <span data-start="963.12" data-end="966.78">memory and note it's really hard to kind</span> <span data-start="966.78" data-end="968.64">of give access to that and some kind of</span> <span data-start="968.64" data-end="970.77">predictable manner to some other client</span> <span data-start="970.77" data-end="973.14">and you could write some custom custom</span> </p>
<p><span data-start="973.14" data-end="976.98">HTTP API or whatever but so anyways what</span> <span data-start="976.98" data-end="980.19">we ended up doing here is basically in</span> <span data-start="980.19" data-end="981.75">this particular use case we just add</span> <span data-start="981.75" data-end="983.04">this little chat bar at the bottom and</span> <span data-start="983.04" data-end="986.1">if somebody wants to go you know open a</span> <span data-start="986.1" data-end="988.17">new tab we don't want to have to</span> <span data-start="988.17" data-end="990.21">reconnect that with xmpp again so what</span> <span data-start="990.21" data-end="992.76">we did is just maintain an XMPP</span> <span data-start="992.76" data-end="995.1">connection on the server for each client</span> <span data-start="995.1" data-end="997.17">and then everything else is being sent</span> <span data-start="997.17" data-end="999.9">and synchronized to through capsule so</span> <span data-start="999.9" data-end="1002.27">as a result you open a new tab it's</span> <span data-start="1002.27" data-end="1004.55">immediately there it's way faster to</span> <span data-start="1004.55" data-end="1006.38">reconnect that way than having to</span> <span data-start="1006.38" data-end="1009.44">re-establish that XMPP connection so</span> <span data-start="1009.44" data-end="1010.82">that's just one of the things we did</span> <span data-start="1010.82" data-end="1014.45">with it um another thing that we kind of</span> <span data-start="1014.45" data-end="1016.28">a mess around with is this this little</span> <span data-start="1016.28" data-end="1018.65">app called and bang and it's a</span> <span data-start="1018.65" data-end="1020.57">collaboration app and what we're doing</span> <span data-start="1020.57" data-end="1023.26">here is we've got our entire team is</span> <span data-start="1023.26" data-end="1027.77">like 10 of us and so here you here we</span> <span data-start="1027.77" data-end="1029.839">have a shared team state and then</span> <span data-start="1029.839" data-end="1032.42">members live within that so the so your</span> <span data-start="1032.42" data-end="1034.819">your route state for the app is actually</span> <span data-start="1034.819" data-end="1038.3">the team and then each user is a member</span> <span data-start="1038.3" data-end="1040.49">of the team as you know it's somewhere</span> <span data-start="1040.49" data-end="1043.43">down on the tree so what happens is as</span> <span data-start="1043.43" data-end="1045.11">you make changes to your tasks and</span> <span data-start="1045.11" data-end="1048.56">whatnot um it just gets propagated to</span> <span data-start="1048.56" data-end="1052.43">the rest of the team the and and it's</span> <span data-start="1052.43" data-end="1054.89">surprisingly quick even if you even if</span> <span data-start="1054.89" data-end="1055.46">you decide</span> <span data-start="1055.46" data-end="1056.63">you're going to set this stuff on the</span> <span data-start="1056.63" data-end="1058.73">server initially and then wait for the</span> <span data-start="1058.73" data-end="1061.01">change to come back it's surprisingly</span> <span data-start="1061.01" data-end="1062.539">responsive if you're using WebSockets</span> <span data-start="1062.539" data-end="1063.62">see if you had a decent internet</span> <span data-start="1063.62" data-end="1067.7">connection so I was going to try to do a</span> <span data-start="1067.7" data-end="1069.71">little demo but I don't know how big the</span> <span data-start="1069.71" data-end="1074.99">screen is here but I mean just as an</span> <span data-start="1074.99" data-end="1076.61">example of something you can do with it</span> <span data-start="1076.61" data-end="1078.529">right so and I don't even have the</span> <span data-start="1078.529" data-end="1079.669">internet connection going here but</span> <span data-start="1079.669" data-end="1081.919">basically so you this whole thing is uh</span> <span data-start="1081.919" data-end="1084.919">is keyboard control too so you can just</span> <span data-start="1084.919" data-end="1087.409">add like you know if I add a new task</span> <span data-start="1087.409" data-end="1090.649">here it's actually what it's doing is</span> <span data-start="1090.649" data-end="1092.929">it's sending to the server saying you</span> <span data-start="1092.929" data-end="1095">know here's an ad event it's getting the</span> <span data-start="1095" data-end="1096.74">change response it's getting the the</span> <span data-start="1096.74" data-end="1100.1">addy event back and and then the view is</span> <span data-start="1100.1" data-end="1101.87">responding to that and if we had</span> <span data-start="1101.87" data-end="1107.58">multiple windows open of the same thing</span> <span data-start="1107.59" data-end="1109.94">you know the changes all happen</span> <span data-start="1109.94" data-end="1111.62">simultaneously right so it obviously</span> <span data-start="1111.62" data-end="1113.51">we've got some CSS issues going on here</span> <span data-start="1113.51" data-end="1117.35">but the fact is I mean everything is</span> <span data-start="1117.35" data-end="1119.24">simultaneous it's super fast it's super</span> <span data-start="1119.24" data-end="1121.13">easy to work with the truth is all you</span> <span data-start="1121.13" data-end="1124.19">got to do is just modify the state I</span> <span data-start="1124.19" data-end="1125.63">mean you're just setting you're just</span> <span data-start="1125.63" data-end="1127.309">setting values on this shared state and</span> <span data-start="1127.309" data-end="1128.84">everything else just kind of propagates</span> <span data-start="1128.84" data-end="1131.72">and takes care of itself we are</span> <span data-start="1131.72" data-end="1135.08">definitely doing some I mean some of the</span> <span data-start="1135.08" data-end="1136.64">obvious some of the obvious problems</span> <span data-start="1136.64" data-end="1138.559">here are persistence and scaling and</span> <span data-start="1138.559" data-end="1140.33">everything else because if you're going</span> <span data-start="1140.33" data-end="1142.039">to have to keep the entire application</span> <span data-start="1142.039" data-end="1144.919">state in memory on the server there's</span> <span data-start="1144.919" data-end="1147.679">some challenges there so we're working</span> <span data-start="1147.679" data-end="1153.039">on actually my coworker fritzy here is a</span> <span data-start="1153.039" data-end="1157.76">he's on the xsf Council of the XMPP only</span> <span data-start="1157.76" data-end="1159.83">the XMPP standards foundation Council</span> <span data-start="1159.83" data-end="1163.52">and you know so he's totally an XMPP guy</span> <span data-start="1163.52" data-end="1167.029">and what he's been looking at is</span> <span data-start="1167.029" data-end="1171.32">basically writing using Redis as kind of</span> <span data-start="1171.32" data-end="1175.19">a shared memory for for the types of</span> <span data-start="1175.19" data-end="1177.32">applications so basically your register</span> <span data-start="1177.32" data-end="1179.299">function that I called here would we</span> <span data-start="1179.299" data-end="1182.299">basically set up a feed-in when he's</span> <span data-start="1182.299" data-end="1186.289">calling thou'lt j/s and then you can use</span> </p>
<p><span data-start="1186.289" data-end="1188.29">Redis is clustering to just</span> <span data-start="1188.29" data-end="1189.31">I mean you can just tilt those as many</span> <span data-start="1189.31" data-end="1192.94">servers as you need to so and then you</span> <span data-start="1192.94" data-end="1196.87">know pub/sub events do that instead the</span> <span data-start="1196.87" data-end="1198.31">there's that I mean there's definitely</span> <span data-start="1198.31" data-end="1202.03">some other some other challenges here as</span> <span data-start="1202.03" data-end="1205.03">far as you know in the case of the team</span> <span data-start="1205.03" data-end="1206.95">here you can't just have one view that</span> <span data-start="1206.95" data-end="1209.02">responds to the same model for everybody</span> <span data-start="1209.02" data-end="1211.09">because you want every every member of</span> <span data-start="1211.09" data-end="1213.61">the team to have you know their view of</span> <span data-start="1213.61" data-end="1217.42">that so what we're doing is instead of</span> <span data-start="1217.42" data-end="1219.48">trying to I messed around a lot with in</span> <span data-start="1219.48" data-end="1222.82">gear most channels implementation think</span> <span data-start="1222.82" data-end="1223.87">would have been interesting the</span> <span data-start="1223.87" data-end="1225.82">multiplexing because then you could have</span> <span data-start="1225.82" data-end="1227.26">a team channel and you could have your</span> <span data-start="1227.26" data-end="1230.89">own channel but you know so what we're</span> <span data-start="1230.89" data-end="1232.99">doing is basically the members are</span> <span data-start="1232.99" data-end="1235.42">further down the tree but the view just</span> <span data-start="1235.42" data-end="1239.26">identifies you know this user is X user</span> <span data-start="1239.26" data-end="1242.29">and then so as a result anything that's</span> <span data-start="1242.29" data-end="1244.54">specific to that user is getting set as</span> <span data-start="1244.54" data-end="1246.7">a property of that users model in the</span> <span data-start="1246.7" data-end="1248.89">team so the entire team state is still</span> <span data-start="1248.89" data-end="1253.24">sink but the you know your view your</span> <span data-start="1253.24" data-end="1255.1">view just shows the correct one based on</span> <span data-start="1255.1" data-end="1259">session ID of that user so the other</span> <span data-start="1259" data-end="1261.16">thing is like I said providing external</span> <span data-start="1261.16" data-end="1263.59">api's and one of the things that that</span> <span data-start="1263.59" data-end="1266.37">thunk does is basically you can have</span> <span data-start="1266.37" data-end="1268.78">thunk is just a contract system with</span> </p>
<p><span data-start="1268.78" data-end="1271.21">Reddit and so you could actually have</span> <span data-start="1271.21" data-end="1274">just an XMPP interface to thunk that</span> <span data-start="1274" data-end="1275.98">just uses pub/sub you could have it</span> <span data-start="1275.98" data-end="1277.93">right you know RSS or atom feeds or</span> <span data-start="1277.93" data-end="1281.17">whatever so there's definitely some</span> <span data-start="1281.17" data-end="1283.57">stuff there that's still missing that</span> <span data-start="1283.57" data-end="1286.69">we're working on but just you know not</span> <span data-start="1286.69" data-end="1288.43">like here's how you should do real-time</span> <span data-start="1288.43" data-end="1290.44">just kind of showing what we've been</span> <span data-start="1290.44" data-end="1292.09">doing what we midpoint around with and</span> <span data-start="1292.09" data-end="1294.19">kind of what we found hopefully</span> <span data-start="1294.19" data-end="1296.5">hopefully that's useful to you guys and</span> <span data-start="1296.5" data-end="1298.8">anybody who has questions or anything</span> <span data-start="1298.8" data-end="1305.669">just any questions</span> <span data-start="1305.679" data-end="1313.789">now Jas yeah oh yeah I haven't spent a</span> <span data-start="1313.789" data-end="1315.2">lot of time looking at now Jas my</span> <span data-start="1315.2" data-end="1317.179">impression is that basically if you you</span> <span data-start="1317.179" data-end="1319.7">have this kind of magic object and if</span> <span data-start="1319.7" data-end="1322.1">you create a function on the client that</span> <span data-start="1322.1" data-end="1325.629">function becomes available on the server</span> <span data-start="1325.629" data-end="1328.879">which is interesting and that's that I</span> <span data-start="1328.879" data-end="1330.35">mean that's that's cool it's just it's</span> <span data-start="1330.35" data-end="1332.029">just an infection on top of socket i/o</span> <span data-start="1332.029" data-end="1335.69">basically right but yeah that would be</span> <span data-start="1335.69" data-end="1337.609">another interesting architecture choice</span> <span data-start="1337.609" data-end="1340.97">but I mean you could totally do that</span> <span data-start="1340.97" data-end="1343.19">anyways i mean i i've got a method in</span> <span data-start="1343.19" data-end="1344.72">here for just you know call this method</span> <span data-start="1344.72" data-end="1347.989">on this model on the server does</span> <span data-start="1347.989" data-end="1350.779">basically the same thing so it's cool I</span> <span data-start="1350.779" data-end="1356.34">mean I I haven't played with it a lot</span> <span data-start="1356.35" data-end="1365.12">other questions</span> <span data-start="1365.13" data-end="1369.6">oh yeah so I think I have one last slide</span> <span data-start="1369.6" data-end="1372.93">yeah okay so capsule capsule Jas is kind</span> <span data-start="1372.93" data-end="1374.97">of what what I wrote that it that adds</span> <span data-start="1374.97" data-end="1377.64">those features to backbone I'd love to</span> <span data-start="1377.64" data-end="1379.35">get more feedback on that I know it's</span> <span data-start="1379.35" data-end="1380.58">certainly not perfect and i know this</span> <span data-start="1380.58" data-end="1382.85">approach still has the shortcomings but</span> <span data-start="1382.85" data-end="1384.6">we're going to keep playing with an</span> <span data-start="1384.6" data-end="1388.02">experimental see what we can do and also</span> <span data-start="1388.02" data-end="1389.88">if any guys are interested in messing</span> <span data-start="1389.88" data-end="1392.94">around with an bang as a little pre</span> <span data-start="1392.94" data-end="1395.07">alpha something or other i just hit me</span> <span data-start="1395.07" data-end="1396.48">up on Twitter and I can get some invites</span> <span data-start="1396.48" data-end="1397.8">sent out because we've got that almost</span> <span data-start="1397.8" data-end="1400.11">we're almost ready to publish that stuff</span> <span data-start="1400.11" data-end="1401.94">so it's kind of a that way you can at</span> <span data-start="1401.94" data-end="1403.2">least have something that you can play</span> <span data-start="1403.2" data-end="1406.95">with and see how it works as well but</span> <span data-start="1406.95" data-end="1408.99">yeah and then just some other things</span> <span data-start="1408.99" data-end="1413.73">here one of the at jas conf which I</span> <span data-start="1413.73" data-end="1415.92">wasn't there at but funk unit is it</span> <span data-start="1415.92" data-end="1417.48">seems like a really way cool way to test</span> <span data-start="1417.48" data-end="1419.79">these types of apps because basically</span> <span data-start="1419.79" data-end="1424.44">you can just run basically it's built on</span> <span data-start="1424.44" data-end="1426.6">top of queue unit which is the jQuery</span> <span data-start="1426.6" data-end="1431.67">testing thing but they and you can bail</span> <span data-start="1431.67" data-end="1433.35">owes your app open an iframe and says</span> <span data-start="1433.35" data-end="1435.21">hey click this button do this thing and</span> <span data-start="1435.21" data-end="1436.95">make sure that this you know wait for</span> <span data-start="1436.95" data-end="1438.3">this thing to become visible kind of</span> <span data-start="1438.3" data-end="1439.86">thing and it's a really awesome way to</span> <span data-start="1439.86" data-end="1441.99">test these types of that but just as a</span> <span data-start="1441.99" data-end="1445.59">little side note so well thank you very</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
