<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="JSConf transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Wzcz7VgG9O8</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/Wzcz7VgG9O8?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="9.559" data-end="11.88">thanks a lot everyone so just make it</span> <span data-start="11.88" data-end="14.429">extra clear and are confusing I'm Dave</span> <span data-start="14.429" data-end="17.67">and he's David and we built JavaScript</span> <span data-start="17.67" data-end="20.699">kids and our dream in doing all this</span> <span data-start="20.699" data-end="23.31">stuff is to run JavaScript as fast as II</span> <span data-start="23.31" data-end="26.039">so sure that is pretty much totally</span> <span data-start="26.039" data-end="28.349">crazy but it turns out that current</span> <span data-start="28.349" data-end="29.609">systems actually are getting pretty</span> <span data-start="29.609" data-end="32.219">close and there definitely will be lots</span> <span data-start="32.219" data-end="34.26">of assembly on slides today as we show</span> <span data-start="34.26" data-end="37.649">you the native code that does this so</span> <span data-start="37.649" data-end="39.629">just a little bit of background really</span> <span data-start="39.629" data-end="42.12">what sort of makes this hard right if</span> <span data-start="42.12" data-end="44.52">you use a compiler that generally helps</span> <span data-start="44.52" data-end="46.559">make your code run fast by pine native</span> <span data-start="46.559" data-end="48.96">code so the thing that makes it hard for</span> <span data-start="48.96" data-end="50.879">javascript is the fact that javascript</span> <span data-start="50.879" data-end="52.649">is on time you don't have any type</span> <span data-start="52.649" data-end="55.23">declarations anything and the reason is</span> <span data-start="55.23" data-end="57.18">that having different types in the</span> <span data-start="57.18" data-end="59.01">program means the processor needs to do</span> <span data-start="59.01" data-end="61.5">different things so in JavaScript a plus</span> </p>
<p><span data-start="61.5" data-end="63.21">B can actually do a lot of different</span> <span data-start="63.21" data-end="64.86">things right if you're adding strings or</span> <span data-start="64.86" data-end="66.229">finding numbers that's going to require</span> <span data-start="66.229" data-end="69.27">different native code same thing for</span> <span data-start="69.27" data-end="70.74">properties if you look at these two</span> <span data-start="70.74" data-end="72.6">things here if we try to access this</span> <span data-start="72.6" data-end="75.509">color property on a string or an object</span> <span data-start="75.509" data-end="76.74">you actually have to do different things</span> <span data-start="76.74" data-end="79.89">so you need different code and in davis</span> <span data-start="79.89" data-end="81">it turns out to get even more</span> <span data-start="81" data-end="83.07">complicated so in here i just added</span> <span data-start="83.07" data-end="84.45">something we're adding a couple of</span> <span data-start="84.45" data-end="86.189">floating-point numbers as an</span> <span data-start="86.189" data-end="88.77">optimization the engine often tries to</span> <span data-start="88.77" data-end="90.659">do things with integers but you might</span> <span data-start="90.659" data-end="92.46">need floats and so even though they're</span> <span data-start="92.46" data-end="94.439">the same jst few actually need different</span> <span data-start="94.439" data-end="97.2">get code for even those two things and</span> <span data-start="97.2" data-end="99.24">it's also the same here for these two</span> <span data-start="99.24" data-end="100.77">objects on the bottom they both have a</span> <span data-start="100.77" data-end="102.299">color property if both has the same</span> <span data-start="102.299" data-end="104.82">value but in most jits you actually need</span> <span data-start="104.82" data-end="106.979">to run a little bit different code to</span> <span data-start="106.979" data-end="110.07">make that happen so today we're going to</span> <span data-start="110.07" data-end="112.47">talk about two different kinds of jets</span> <span data-start="112.47" data-end="114.81">here so first there's the simpler</span> <span data-start="114.81" data-end="117.78">untyped jet and the idea of that one is</span> <span data-start="117.78" data-end="119.07">for every little piece of your</span> </p>
<p><span data-start="119.07" data-end="120.719">JavaScript program you generate some</span> <span data-start="120.719" data-end="122.43">native code that handles all possible</span> <span data-start="122.43" data-end="124.59">types so it's like you drop down this so</span> <span data-start="124.59" data-end="126.479">a multi tool that can do everything for</span> <span data-start="126.479" data-end="128.97">every statement in your program and the</span> <span data-start="128.97" data-end="130.3">good thing about that is it's</span> <span data-start="130.3" data-end="132.28">simple to do and the generated code can</span> <span data-start="132.28" data-end="133.99">run no matter what types a program</span> <span data-start="133.99" data-end="136.09">actually has but the code is pretty big</span> <span data-start="136.09" data-end="137.53">because you're generating a lot of code</span> <span data-start="137.53" data-end="139.36">maybe some of it won't even run and it's</span> <span data-start="139.36" data-end="142.3">a little bit hard to optimize so that</span> <span data-start="142.3" data-end="143.44">one actually turns out to give you a</span> <span data-start="143.44" data-end="144.91">pretty fast code if you want to get even</span> <span data-start="144.91" data-end="146.89">better what you can do is usually called</span> <span data-start="146.89" data-end="149.26">a type so in this one either by</span> <span data-start="149.26" data-end="151.09">using some type inference or just</span> <span data-start="151.09" data-end="153.22">measuring dynamically you try to guess</span> <span data-start="153.22" data-end="154.81">types for each variable and then you</span> <span data-start="154.81" data-end="156.34">generate code specialized for those</span> <span data-start="156.34" data-end="158.89">types so in this case you know for each</span> <span data-start="158.89" data-end="160.3">statement in the program you try to</span> <span data-start="160.3" data-end="162.43">figure out the types are use a little</span> <span data-start="162.43" data-end="164.8">bit of specialized code just for that so</span> <span data-start="164.8" data-end="166.33">you get sort of smaller code and it's</span> <span data-start="166.33" data-end="168.88">more optimized the disadvantage is that</span> <span data-start="168.88" data-end="170.95">you do have to recompile of types change</span> <span data-start="170.95" data-end="172.45">right so if you were sort of guessed</span> <span data-start="172.45" data-end="175.3">there would be a nail so you used a</span> <span data-start="175.3" data-end="176.59">hammer and your compiler and it turns</span> <span data-start="176.59" data-end="178.09">out there's a screw that's not really</span> <span data-start="178.09" data-end="179.68">going to work you need to do something</span> <span data-start="179.68" data-end="183.01">else so now on to the assembly and damn</span> <span data-start="183.01" data-end="185.49">it's gonna start out by telling us about</span> <span data-start="185.49" data-end="192.49">math is this here this isn't your first</span> <span data-start="192.49" data-end="197.5">sight of it hey go yeah have a thing so</span> <span data-start="197.5" data-end="199.48">to start off let's take this sample</span> <span data-start="199.48" data-end="202.06">function here takes in a left and right</span> <span data-start="202.06" data-end="204.28">variable and just adds them and let's</span> <span data-start="204.28" data-end="205.48">see how this would work in an untyped</span> <span data-start="205.48" data-end="208.69">compiler so an untyped compiler wants to</span> <span data-start="208.69" data-end="210.25">handle everything so we want to generate</span> <span data-start="210.25" data-end="212.23">code that will handle all possible types</span> <span data-start="212.23" data-end="214.75">for left and right but we want to start</span> <span data-start="214.75" data-end="217.75">somewhere simple so let's start off with</span> <span data-start="217.75" data-end="219.88">just assuming that left and right are</span> <span data-start="219.88" data-end="222.69">going to be numbers and as you know</span> </p>
<p><span data-start="222.69" data-end="226.18">JavaScript semantics say that JavaScript</span> <span data-start="226.18" data-end="228.55">numbers are always floating point but</span> <span data-start="228.55" data-end="230.26">machines can use both integers and</span> <span data-start="230.26" data-end="234.4">floats and integers tend to be faster so</span> <span data-start="234.4" data-end="236.35">if we call this function with say five</span> <span data-start="236.35" data-end="237.67">and ten we want to treat those as</span> <span data-start="237.67" data-end="241.75">integers instead of floats so let's</span> <span data-start="241.75" data-end="243.55">start off let's say our compiler has a</span> <span data-start="243.55" data-end="245.92">register allocator and it decides that</span> <span data-start="245.92" data-end="247.66">the left and right hand side should be</span> <span data-start="247.66" data-end="250.87">in registers eax and edx we might</span> <span data-start="250.87" data-end="252.43">generate just this one instruction</span> <span data-start="252.43" data-end="254.62">machine instruction that says add the</span> <span data-start="254.62" data-end="259.2">two integers in registers EDX and eax</span> <span data-start="259.2" data-end="262.63">both say eax is actually a pointer to a</span> <span data-start="262.63" data-end="263.72">string</span> <span data-start="263.72" data-end="268.43">and EDX is number 35 so this is bad</span> <span data-start="268.43" data-end="270.8">because we'll just be adding a number to</span> <span data-start="270.8" data-end="274.31">a string which is I'm sorry a number to</span> <span data-start="274.31" data-end="276.98">a pointer to memory which is completely</span> <span data-start="276.98" data-end="279.5">bogus and at best at some kind of</span> <span data-start="279.5" data-end="283.19">security risk so we can't do that so</span> <span data-start="283.19" data-end="285.71">what we need to do is insert type checks</span> <span data-start="285.71" data-end="288.32">before the ad and that's this code in</span> <span data-start="288.32" data-end="290.72">magenta here and now the compiler needs</span> <span data-start="290.72" data-end="292.61">to keep track with both the types and</span> <span data-start="292.61" data-end="296.15">the values of the variables so let's see</span> <span data-start="296.15" data-end="297.53">what would happen when we run this code</span> <span data-start="297.53" data-end="301.69">let's say we're adding numbers 27 and 35</span> <span data-start="301.69" data-end="305.3">the first thing we'll do is check to see</span> <span data-start="305.3" data-end="308.15">if the left hands type and register EDI</span> <span data-start="308.15" data-end="312.95">is 32 an integer and it is so that check</span> <span data-start="312.95" data-end="315.83">passes next we'll check the right hand</span> <span data-start="315.83" data-end="319.25">sides type and the ebx register and it</span> <span data-start="319.25" data-end="322.31">is an integer so that passes and now we</span> <span data-start="322.31" data-end="326.6">can just take the values in eax 27 EDX</span> <span data-start="326.6" data-end="331.88">35 add them and we get our result just</span> <span data-start="331.88" data-end="335.81">62 so does this always work but let's</span> <span data-start="335.81" data-end="338.72">see what if we call F with a huge number</span> <span data-start="338.72" data-end="341.87">so this is the maximum signed integer</span> <span data-start="341.87" data-end="343.79">that can be represented on a 32-bit</span> <span data-start="343.79" data-end="348.2">machine and this time if we add them the</span> <span data-start="348.2" data-end="349.7">machine is not going to have enough bits</span> <span data-start="349.7" data-end="352.49">to represent the actual result so it'll</span> <span data-start="352.49" data-end="356.54">just overflow and get negative 2 so</span> <span data-start="356.54" data-end="357.71">let's see what's supposed to happen in</span> </p>
<p><span data-start="357.71" data-end="359.11">JavaScript when we add these two numbers</span> <span data-start="359.11" data-end="362.84">we actually get four billion and as four</span> <span data-start="362.84" data-end="366.169">billion equal to negative two no so we</span> <span data-start="366.169" data-end="368.33">have to do something there and luckily</span> <span data-start="368.33" data-end="371.18">the machine sets an overflow bit on the</span> <span data-start="371.18" data-end="374.12">CPU whenever an overflow occurs so we</span> <span data-start="374.12" data-end="376.37">can just check that bit and when it</span> <span data-start="376.37" data-end="379.9">happens do floating-point math instead</span> <span data-start="379.9" data-end="383.77">so what about floats let's say we pass f</span> <span data-start="383.77" data-end="386.9">2.7 and pie and we want that to be fast</span> <span data-start="386.9" data-end="391.28">too so in this case we can extend each</span> <span data-start="391.28" data-end="392.87">of these little type checks with another</span> <span data-start="392.87" data-end="393.88">block of code</span> <span data-start="393.88" data-end="395.95">that will try to coerce the two inputs</span> <span data-start="395.95" data-end="399.31">to floating point numbers and if those</span> <span data-start="399.31" data-end="401.08">pass and it can get floats out of them</span> <span data-start="401.08" data-end="403.42">it will add them together and continue</span> <span data-start="403.42" data-end="406.09">running jit code as you can see this on</span> <span data-start="406.09" data-end="409.03">compiling this whole add expression for</span> <span data-start="409.03" data-end="412.84">numbers is about 30 instructions so</span> <span data-start="412.84" data-end="414.22">let's write a little benchmark let's say</span> <span data-start="414.22" data-end="417.13">we have a 2-d game and we said we want</span> <span data-start="417.13" data-end="418.51">to compute the distance between this</span> <span data-start="418.51" data-end="421.69">lady and the cow we might use Euclidean</span> <span data-start="421.69" data-end="424">distance or something so this is a small</span> <span data-start="424" data-end="426.16">benchmark that loops over two variables</span> <span data-start="426.16" data-end="428.05">and just computes the distance between</span> <span data-start="428.05" data-end="433.48">them and in an untyped compiler each of</span> <span data-start="433.48" data-end="435.88">those little sub expressions would be</span> <span data-start="435.88" data-end="438.43">compiled separately and in the end we</span> <span data-start="438.43" data-end="441.19">get about 230 instructions for the</span> <span data-start="441.19" data-end="444.82">entirety of the loop and that seems like</span> <span data-start="444.82" data-end="446.89">a lot but despite that jager monkey the</span> <span data-start="446.89" data-end="449.56">n-type compiler in Firefox can run 100</span> <span data-start="449.56" data-end="451.33">million iterations of that in one second</span> <span data-start="451.33" data-end="453.28">which is pretty cool for JavaScript it</span> <span data-start="453.28" data-end="455.02">means in one second you can do 100</span> <span data-start="455.02" data-end="458.79">million operations but can we do better</span> <span data-start="458.79" data-end="461.58">so let's say we had a type compiler and</span> <span data-start="461.58" data-end="464.74">the type compiler can just maybe it</span> <span data-start="464.74" data-end="466.78">wants to assume that every value in this</span> <span data-start="466.78" data-end="469.59">function is going to be an integer and</span> <span data-start="469.59" data-end="471.54">then we can start making observations</span> <span data-start="471.54" data-end="475.39">like this a minus I times a minus I will</span> <span data-start="475.39" data-end="477.06">never change inside the intervals loop</span> <span data-start="477.06" data-end="479.83">so we can actually pull it out into the</span> <span data-start="479.83" data-end="482.98">outer loop and this is called hoisting</span> <span data-start="482.98" data-end="485.38">and why couldn't we do that in an</span> <span data-start="485.38" data-end="487.78">untyped chip well let's say we had this</span> <span data-start="487.78" data-end="490.86">crazy object with a value of hook and</span> <span data-start="490.86" data-end="492.91">every time the value of function is</span> <span data-start="492.91" data-end="494.71">called it increases this goal variable</span> <span data-start="494.71" data-end="497.11">called ham if you were to pass this</span> <span data-start="497.11" data-end="501.04">object into our benchmark JavaScript</span> <span data-start="501.04" data-end="502.42">semantics say that ham has to be</span> <span data-start="502.42" data-end="504.31">increased every time the object is used</span> <span data-start="504.31" data-end="506.44">in one of those arithmetic expressions</span> <span data-start="506.44" data-end="508.78">so the hoisting is only valid if we've</span> <span data-start="508.78" data-end="510.88">proved or assumed that every variable in</span> <span data-start="510.88" data-end="515.77">the function is an integer then we can</span> <span data-start="515.77" data-end="518.53">make another observation in P minus J</span> <span data-start="518.53" data-end="521.14">times B minus J we don't have to compute</span> </p>
<p><span data-start="521.14" data-end="523.9">P minus J twice so we can just throw</span> <span data-start="523.9" data-end="525.85">that in a temporary variable and that's</span> <span data-start="525.85" data-end="526.9">called redundancy</span> <span data-start="526.9" data-end="530.8">elimination so in the type jit this is a</span> <span data-start="530.8" data-end="533.29">sample of assembly from Mozilla's in</span> <span data-start="533.29" data-end="535.18">development type called Iron Monkey</span> <span data-start="535.18" data-end="537.94">it's not the full assembly I've removed</span> <span data-start="537.94" data-end="539.92">some crappy register allocation</span> <span data-start="539.92" data-end="541.81">instructions so we'll get to this</span> <span data-start="541.81" data-end="545.08">eventually but as you can see there's</span> <span data-start="545.08" data-end="547.96">just a subtraction multiplication and in</span> <span data-start="547.96" data-end="550.48">addition we still have our overflow</span> <span data-start="550.48" data-end="553.03">checks and on the multiplication there's</span> <span data-start="553.03" data-end="555.58">also this test instruction and that's</span> <span data-start="555.58" data-end="558.28">testing 40 because in JavaScript if you</span> <span data-start="558.28" data-end="560.98">have say negative 1 times 0 that</span> <span data-start="560.98" data-end="563.41">actually has to yield negative 0 which</span> <span data-start="563.41" data-end="565.81">can't be represented in an integer so we</span> <span data-start="565.81" data-end="568.87">have to check for that and I'm monkey</span> <span data-start="568.87" data-end="571.42">runs this in 250 milliseconds so that's</span> </p>
<p><span data-start="571.42" data-end="574.27">Forks faster than the untyped yet but if</span> <span data-start="574.27" data-end="575.83">it was a little smarter it could</span> <span data-start="575.83" data-end="578.05">recognize that if you have an expression</span> <span data-start="578.05" data-end="580.15">eight times a it'll never be negative so</span> <span data-start="580.15" data-end="581.89">we could get this down to six</span> <span data-start="581.89" data-end="584.56">instructions and that runs in just 220</span> <span data-start="584.56" data-end="586.72">milliseconds or four and a half times</span> <span data-start="586.72" data-end="590.71">faster than the untyped it so our goal</span> <span data-start="590.71" data-end="592.75">is to get as fast to see how close do we</span> <span data-start="592.75" data-end="595.87">get to that so in see this is just for</span> <span data-start="595.87" data-end="598.18">instructions really three our</span> <span data-start="598.18" data-end="600.22">subtraction multiplication add and then</span> <span data-start="600.22" data-end="604.57">a register move and see one's this in 97</span> <span data-start="604.57" data-end="607.36">milliseconds so an untyped it got within</span> <span data-start="607.36" data-end="609.94">10 X of C and at type Jake gets within</span> <span data-start="609.94" data-end="612.22">two or three acts of see that's actually</span> <span data-start="612.22" data-end="613.84">really cool considering that three or</span> <span data-start="613.84" data-end="616.18">four years ago javascript was a hundred</span> <span data-start="616.18" data-end="619.71">x slower than C but how can we do better</span> <span data-start="619.71" data-end="621.97">well in this case it's actually pretty</span> <span data-start="621.97" data-end="624.28">hard there's this semantic gap where</span> </p>
<p><span data-start="624.28" data-end="626.35">JavaScript just does not have integers</span> <span data-start="626.35" data-end="631.48">it only has floats and C has integers so</span> <span data-start="631.48" data-end="633.6">it does not need those overflow checks</span> <span data-start="633.6" data-end="635.92">and now dave is going to talk about</span> <span data-start="635.92" data-end="644.38">property access</span> <span data-start="644.39" data-end="647.97">okay so this is the other major type of</span> <span data-start="647.97" data-end="648.87">jade code that we're going to show you</span> <span data-start="648.87" data-end="651.06">is how objects and object properties</span> <span data-start="651.06" data-end="653.07">work and in general this is one of the</span> <span data-start="653.07" data-end="654.96">most important optimizations in practice</span> <span data-start="654.96" data-end="657.18">it gets a huge speed up it's important</span> <span data-start="657.18" data-end="661.05">for real programs and so I'm going to</span> <span data-start="661.05" data-end="663.21">because it's complicated right Jas</span> <span data-start="663.21" data-end="664.98">obvious properties are complicated and</span> <span data-start="664.98" data-end="666.63">the jit code gets complicated too i</span> <span data-start="666.63" data-end="668.79">boiled this down to pretty much the</span> <span data-start="668.79" data-end="670.29">simplest thing I could possibly think of</span> <span data-start="670.29" data-end="673.44">just evaluating one level expression no</span> <span data-start="673.44" data-end="676.35">next it's just to get a property and I'm</span> <span data-start="676.35" data-end="678.12">thinking of kind of a linked list here</span> <span data-start="678.12" data-end="679.83">that I can diverse I did that so I could</span> <span data-start="679.83" data-end="681.69">sort of do some benchmarks and show the</span> <span data-start="681.69" data-end="684.54">performance so in order to show you how</span> <span data-start="684.54" data-end="686.16">you get these things first I have to</span> <span data-start="686.16" data-end="688.32">show you what's inside a GS object so</span> <span data-start="688.32" data-end="690.09">here's the constructor I have in mind</span> <span data-start="690.09" data-end="692.22">and this is from spider monkey a</span> <span data-start="692.22" data-end="694.32">simplified version of how that objects</span> <span data-start="694.32" data-end="695.94">represented it's just this little memory</span> <span data-start="695.94" data-end="698.19">object to see struct so there's some</span> <span data-start="698.19" data-end="699.75">stuff in there like the prototype and</span> <span data-start="699.75" data-end="701.88">things you'd expect but the most</span> <span data-start="701.88" data-end="703.89">important things there are first there's</span> <span data-start="703.89" data-end="705.96">the shape and that's something that</span> <span data-start="705.96" data-end="707.79">gives the object format so the main</span> <span data-start="707.79" data-end="709.38">things it has are a list of properties</span> <span data-start="709.38" data-end="711.9">and then a slot index as to where you</span> <span data-start="711.9" data-end="714.42">can actually find each one and the thing</span> <span data-start="714.42" data-end="715.44">to note about the use is they're</span> <span data-start="715.44" data-end="718.05">generally shared so if you have what the</span> <span data-start="718.05" data-end="719.58">system will try to do is every object</span> <span data-start="719.58" data-end="721.26">that looks like this it will try to make</span> <span data-start="721.26" data-end="722.73">sure it gets the same shape and has</span> <span data-start="722.73" data-end="725.64">shape 45 so you can easily tell that it</span> <span data-start="725.64" data-end="728.49">does and then the automated fingers this</span> <span data-start="728.49" data-end="729.9">laws and that's just where the values</span> <span data-start="729.9" data-end="731.46">are held it's just a little array of</span> </p>
<p><span data-start="731.46" data-end="734.46">JavaScript values and so to look up the</span> <span data-start="734.46" data-end="736.17">next property what you do if you're not</span> <span data-start="736.17" data-end="738">using a jit is first you go to this</span> <span data-start="738" data-end="740.76">shape table you find next you see okay</span> <span data-start="740.76" data-end="743.13">that's in slot 1 and then you go over to</span> <span data-start="743.13" data-end="745.53">you read slot 1 you say okay that</span> <span data-start="745.53" data-end="747.92">you read slot 1 you say okay that has type special and the values though</span> <span data-start="747.92" data-end="751.02">so let's start a gentes in an untyped it</span> <span data-start="751.02" data-end="753.21">like Jager monkey so we'll just start</span> <span data-start="753.21" data-end="756.42">off first thing we'll do is load up the</span> <span data-start="756.42" data-end="758.58">type tag and verify that it's an object</span> <span data-start="758.58" data-end="760.47">it's just like before we have some fast</span> <span data-start="760.47" data-end="761.97">path for object we need to make sure we</span> <span data-start="761.97" data-end="764.43">have that so we're just loading a tag</span> <span data-start="764.43" data-end="766.68">from Emory we compared to this FF 87</span> <span data-start="766.68" data-end="768.96">which tells us it's an object so if</span> <span data-start="768.96" data-end="770.97">that's good then we continue on now</span> <span data-start="770.97" data-end="772.98">oh the value note there is some little</span> <span data-start="772.98" data-end="774.689">register allocation glitch here fairly</span> <span data-start="774.689" data-end="777.05">harmless but these things do happen and</span> <span data-start="777.05" data-end="780.81">so now we have the object one operates</span> <span data-start="780.81" data-end="783.779">what do we do next well the n-type Jade</span> <span data-start="783.779" data-end="785.639">actually has a problem here right for</span> <span data-start="785.639" data-end="787.199">that one we want to generate fast code</span> <span data-start="787.199" data-end="788.699">that handles all the types but here's</span> <span data-start="788.699" data-end="790.079">the text you can get you could get an</span> <span data-start="790.079" data-end="791.67">object that has a type that looks like</span> <span data-start="791.67" data-end="793.68">this here's a different type of object</span> <span data-start="793.68" data-end="795.72">requires different jet code here's a</span> <span data-start="795.72" data-end="797.85">different type of object even more jet</span> <span data-start="797.85" data-end="800.55">code so really there's a infinite number</span> <span data-start="800.55" data-end="802.889">of possible types here so there's no way</span> <span data-start="802.889" data-end="804.089">that you could generate them all and</span> <span data-start="804.089" data-end="805.8">worse than that the JIT doesn't even</span> <span data-start="805.8" data-end="808.379">know like what they are what shapes they</span> <span data-start="808.379" data-end="809.759">would have how you'd identify them</span> <span data-start="809.759" data-end="812.279">anything at all so pretty much at this</span> <span data-start="812.279" data-end="814.709">point we get to go to the simplicity and</span> <span data-start="814.709" data-end="817.829">ease of self-modifying code and so this</span> <span data-start="817.829" data-end="819.54">is called inline caching it's a bit of</span> <span data-start="819.54" data-end="821.279">historical term it's from the self</span> <span data-start="821.279" data-end="822.959">research that really pioneered a lot of</span> <span data-start="822.959" data-end="825.3">optimization for dynamic languages and</span> <span data-start="825.3" data-end="827.37">so to show you how that works i'm going</span> <span data-start="827.37" data-end="829.11">to work backwards so first i'm going to</span> <span data-start="829.11" data-end="831.12">show you the code we want to get so this</span> <span data-start="831.12" data-end="832.709">would be code that would run fast and</span> <span data-start="832.709" data-end="835.35">get the next property for the shake 45</span> <span data-start="835.35" data-end="838.17">so we have that top that operates that I</span> <span data-start="838.17" data-end="839.55">already showed you that gets the object</span> <span data-start="839.55" data-end="841.5">so the next thing we need to do is make</span> <span data-start="841.5" data-end="844.5">sure that we have shape 45 so in this</span> <span data-start="844.5" data-end="847.47">blue code here ESI hose the object so</span> <span data-start="847.47" data-end="849.75">we're just loading that shape field we</span> <span data-start="849.75" data-end="853.11">test it keep going it's matches so then</span> <span data-start="853.11" data-end="854.79">the next thing we do is we load that</span> <span data-start="854.79" data-end="856.529">slots porn air out of the same object</span> <span data-start="856.529" data-end="858.93">and then at the bottom here we load the</span> <span data-start="858.93" data-end="861.559">type and value so this ESI plus 12</span> <span data-start="861.559" data-end="865.41">that's loading from the slot array type</span> <span data-start="865.41" data-end="869.37">and then we load the value so the only</span> <span data-start="869.37" data-end="870.809">problem here is that these values in</span> <span data-start="870.809" data-end="872.55">white you don't know that my compile</span> <span data-start="872.55" data-end="874.199">time we don't know what the shape is we</span> <span data-start="874.199" data-end="875.699">don't know its shape to expect or what</span> <span data-start="875.699" data-end="877.439">the floor mats are and the idea of</span> <span data-start="877.439" data-end="879.12">inline caching is to really say well</span> <span data-start="879.12" data-end="880.649">let's just generate a template here and</span> <span data-start="880.649" data-end="882.87">then have it modify itself to the right</span> <span data-start="882.87" data-end="885.629">code at runtime so here is the actual</span> <span data-start="885.629" data-end="888.18">code it's the same thing except as w</span> <span data-start="888.18" data-end="890.339">values in those positions and I'll just</span> <span data-start="890.339" data-end="892.62">show you how it works by running it so</span> <span data-start="892.62" data-end="894.899">first we run this top part that gets the</span> <span data-start="894.899" data-end="897.509">type it's this FFA 7 it matches we keep</span> <span data-start="897.509" data-end="900.389">going then we wrote up this value then</span> <span data-start="900.389" data-end="901.529">we do our little funky right</span> <span data-start="901.529" data-end="903.87">allocation thing so now we load the</span> <span data-start="903.87" data-end="906.72">shape which is 45 and we compare that</span> <span data-start="906.72" data-end="909.269">with this 8f does not match so we jump</span> <span data-start="909.269" data-end="912.839">to the C++ function get prob so get</span> <span data-start="912.839" data-end="914.22">prompt there's a few things first it</span> <span data-start="914.22" data-end="915.779">sort of looks up that shape and finds</span> <span data-start="915.779" data-end="917.819">the property and then it uses that to</span> <span data-start="917.819" data-end="920.309">catch this code so it says okay the</span> <span data-start="920.309" data-end="922.8">shapes 45 so I'll patch that and it also</span> <span data-start="922.8" data-end="924.24">knows what these offsets should be</span> <span data-start="924.24" data-end="926.879">patches those finally it gets the actual</span> <span data-start="926.879" data-end="928.199">value because of course you need to do</span> <span data-start="928.199" data-end="929.699">that or to keep running properly and</span> <span data-start="929.699" data-end="933.12">keeps going so next time you ride it</span> <span data-start="933.12" data-end="935.43">works pretty much you know how that code</span> </p>
<p><span data-start="935.43" data-end="937.11">I showed you so we were on the first</span> <span data-start="937.11" data-end="940.74">part gets this value and type then we</span> <span data-start="940.74" data-end="942.569">load up the shape this time it matches</span> <span data-start="942.569" data-end="944.639">so we can go on to our fast property</span> <span data-start="944.639" data-end="946.649">access code we get the slots or eight</span> <span data-start="946.649" data-end="948.87">kind of looks like this thing and then</span> <span data-start="948.87" data-end="950.79">we get to load out the type and then we</span> <span data-start="950.79" data-end="954.689">load up the value from that okay so that</span> <span data-start="954.689" data-end="955.8">actually work pretty well it got a</span> <span data-start="955.8" data-end="957.269">tattoo above instructions it runs really</span> <span data-start="957.269" data-end="959.43">fast but Java scripts a dynamic language</span> <span data-start="959.43" data-end="960.779">and we want to be able to take advantage</span> <span data-start="960.779" data-end="963.959">of that so you know here is the shape of</span> <span data-start="963.959" data-end="965.67">object that we generate a fast path for</span> <span data-start="965.67" data-end="967.529">but somebody might write a program where</span> <span data-start="967.529" data-end="969.509">they do this right maybe you pass things</span> <span data-start="969.509" data-end="971.22">that have a label food property as well</span> <span data-start="971.22" data-end="973.889">and we really do want to make this work</span> <span data-start="973.889" data-end="976.47">correctly and run fast and it turns out</span> <span data-start="976.47" data-end="978.93">the icy thing really does it it's almost</span> <span data-start="978.93" data-end="981.87">exactly the same thing so if you run the</span> <span data-start="981.87" data-end="984.389">code again with this new shape of object</span> <span data-start="984.389" data-end="987.389">does the first part is set value so now</span> <span data-start="987.389" data-end="989.639">we get the shape which is 70 compare</span> <span data-start="989.639" data-end="992.189">that to 45 and it's not evil so now we</span> <span data-start="992.189" data-end="995.49">jump to this get pop function again so a</span> <span data-start="995.49" data-end="997.019">gift fob again it's going to look up</span> <span data-start="997.019" data-end="1000.17">that shape and find the property and now</span> <span data-start="1000.17" data-end="1002">it's supposed to patch into shape and</span> <span data-start="1002" data-end="1004.1">slot offsets but actually that wouldn't</span> <span data-start="1004.1" data-end="1005.87">be a very good idea here because we</span> <span data-start="1005.87" data-end="1008.179">could patch disseminate cody fast for</span> <span data-start="1008.179" data-end="1009.769">that new shape but it's slow for the old</span> <span data-start="1009.769" data-end="1011.48">shapes so we're kind of stuck right we</span> <span data-start="1011.48" data-end="1012.98">sort of either have to be fast for only</span> <span data-start="1012.98" data-end="1015.199">one or else we're constantly patching</span> <span data-start="1015.199" data-end="1017.47">and constant patching is definitely slow</span> <span data-start="1017.47" data-end="1019.759">so instead we're just going to generate</span> <span data-start="1019.759" data-end="1021.8">a new code for the new shape off the</span> <span data-start="1021.8" data-end="1024.02">side so it looks like this it's almost</span> <span data-start="1024.02" data-end="1026.36">exactly the same really the only</span> <span data-start="1026.36" data-end="1027.949">difference is we're comparing with shape</span> <span data-start="1027.949" data-end="1031.1">70 instead of 45 those offsets 12 and</span> <span data-start="1031.1" data-end="1033.38">eight they could be different if it was</span> <span data-start="1033.38" data-end="1035.329">position that object happens not to be</span> <span data-start="1035.329" data-end="1037.55">in this example and then we need to</span> <span data-start="1037.55" data-end="1039.38">detach these jumps a little bit right so</span> <span data-start="1039.38" data-end="1041.12">before if we didn't match we jump</span> <span data-start="1041.12" data-end="1043.01">straight to get prob but now I want to</span> <span data-start="1043.01" data-end="1044.42">jump to this new little fast function</span> <span data-start="1044.42" data-end="1046.88">here and then we'll jump back so at this</span> <span data-start="1046.88" data-end="1048.89">point we now have it fast for both</span> <span data-start="1048.89" data-end="1050.57">shapes and you can really extend this</span> <span data-start="1050.57" data-end="1051.89">process and definitely right it can</span> <span data-start="1051.89" data-end="1054.47">handle prototypes you know you can do</span> <span data-start="1054.47" data-end="1056.39">get setters really anything you want and</span> <span data-start="1056.39" data-end="1058.91">just generate as many of these as you</span> <span data-start="1058.91" data-end="1062.21">need ok so now I just want to show you</span> <span data-start="1062.21" data-end="1065.6">what a type compiler can do for this by</span> <span data-start="1065.6" data-end="1068.33">taking this untyped property access code</span> <span data-start="1068.33" data-end="1070.37">and just seeing how we can speed it up a</span> <span data-start="1070.37" data-end="1073.34">little bit so the first thing to observe</span> <span data-start="1073.34" data-end="1075.5">is that in these objects so I put one on</span> <span data-start="1075.5" data-end="1077.15">here so it has that prototype shape</span> <span data-start="1077.15" data-end="1080.15">slots sometimes but not always the Jets</span> <span data-start="1080.15" data-end="1082.04">has an optimization we'll put the value</span> <span data-start="1082.04" data-end="1084.35">slots right inside the object so if you</span> <span data-start="1084.35" data-end="1086">do that you don't really need to load</span> <span data-start="1086" data-end="1087.56">that slots pointer and then load the</span> <span data-start="1087.56" data-end="1090.5">value you could just see oh actually</span> <span data-start="1090.5" data-end="1092.36">they're at these offsets so we'll just</span> <span data-start="1092.36" data-end="1093.89">load it that way and we just eliminate</span> <span data-start="1093.89" data-end="1096.2">one load the untyped compiler can't</span> <span data-start="1096.2" data-end="1097.67">really do that because it has to really</span> <span data-start="1097.67" data-end="1099.38">conservative and assume the object could</span> <span data-start="1099.38" data-end="1101.45">look like anything the types compiler</span> <span data-start="1101.45" data-end="1103.1">gets to wait longer and say oh I know</span> <span data-start="1103.1" data-end="1104.57">exactly what these objects look like</span> <span data-start="1104.57" data-end="1109.73">before it generates any code so next if</span> <span data-start="1109.73" data-end="1110.87">you look at the bottom here you'll see</span> <span data-start="1110.87" data-end="1112.91">that we're loading this tight tag that's</span> <span data-start="1112.91" data-end="1116.3">what ESI plus 28 is into EDX and then</span> <span data-start="1116.3" data-end="1117.98">what you don't see on this screen is</span> <span data-start="1117.98" data-end="1119.48">that gets stored the memory and then it</span> <span data-start="1119.48" data-end="1121.01">gets reloaded again and then we test</span> <span data-start="1121.01" data-end="1122.3">again so we're sort of getting this</span> <span data-start="1122.3" data-end="1124.07">thing just to move it around about three</span> <span data-start="1124.07" data-end="1126.32">times then test it the types compiler</span> <span data-start="1126.32" data-end="1128.45">could actually see that and optimize it</span> <span data-start="1128.45" data-end="1130.37">better and say you know what we should</span> <span data-start="1130.37" data-end="1131.75">just test it at the bottom because</span> <span data-start="1131.75" data-end="1133.88">that's all we really need to do so</span> <span data-start="1133.88" data-end="1135.53">that's two more instructions out we</span> <span data-start="1135.53" data-end="1137.93">freed of her register so here's a little</span> <span data-start="1137.93" data-end="1139.1">thing you don't really need type for</span> <span data-start="1139.1" data-end="1141.2">this but you know it just so happens we</span> <span data-start="1141.2" data-end="1143.03">generate this move and compare but you</span> <span data-start="1143.03" data-end="1144.53">could do that with just one instruction</span> <span data-start="1144.53" data-end="1147.74">so we'll do that and then the last thing</span> <span data-start="1147.74" data-end="1150.05">is to look here at the bottom right when</span> <span data-start="1150.05" data-end="1152">we get this node next value it goes into</span> </p>
<p><span data-start="1152" data-end="1154.55">ESI in my example program that gets</span> <span data-start="1154.55" data-end="1157.04">stored in node so again it sort of gets</span> <span data-start="1157.04" data-end="1158.69">sort out and then at the top we're</span> <span data-start="1158.69" data-end="1160.4">reloading it just to put it back</span> <span data-start="1160.4" data-end="1163.1">SI we can say hey let's just leave it at</span> <span data-start="1163.1" data-end="1166.46">ESI this will work completely so we move</span> <span data-start="1166.46" data-end="1169.22">to our free to register so here's the</span> <span data-start="1169.22" data-end="1170.9">theoretical code that we get if we start</span> <span data-start="1170.9" data-end="1172.49">of use a type of pattern optimize it as</span> <span data-start="1172.49" data-end="1174.14">hard as we can that I reduced from that</span> <span data-start="1174.14" data-end="1176.96">jam code just has five instructions it's</span> <span data-start="1176.96" data-end="1178.55">really just two checks says do we have</span> <span data-start="1178.55" data-end="1180.77">an object doesn't have this shape load</span> <span data-start="1180.77" data-end="1183.05">the value so if you compare a see right</span> </p>
<p><span data-start="1183.05" data-end="1184.82">I'll let's see what need to do is the</span> <span data-start="1184.82" data-end="1188.3">green thing but it's quite folks so iron</span> <span data-start="1188.3" data-end="1189.89">monkey is not at the stage where you can</span> <span data-start="1189.89" data-end="1191.69">actually compile this code yet so let's</span> <span data-start="1191.69" data-end="1193.64">give some props to crankshaft and show a</span> <span data-start="1193.64" data-end="1195.65">better version of how they did it so I</span> <span data-start="1195.65" data-end="1197.24">just started out in my program and you</span> <span data-start="1197.24" data-end="1198.32">can see that it's actually very much</span> <span data-start="1198.32" data-end="1201.08">like what I came up with so the top here</span> <span data-start="1201.08" data-end="1203.51">they have a test to verify it's an</span> <span data-start="1203.51" data-end="1205.7">object just like we're doing those looks</span> <span data-start="1205.7" data-end="1208.04">different because instead of using sort</span> <span data-start="1208.04" data-end="1210.56">of separate type and value areas they</span> <span data-start="1210.56" data-end="1213.23">just put the last bit of the object they</span> <span data-start="1213.23" data-end="1214.73">just set it to one that's how they say a</span> <span data-start="1214.73" data-end="1217.43">snob drink so and then they check the</span> <span data-start="1217.43" data-end="1219.38">shape it's actually very similar to ours</span> <span data-start="1219.38" data-end="1221.27">you can see that they're just loading a</span> <span data-start="1221.27" data-end="1223.43">value and comparing that with some shape</span> <span data-start="1223.43" data-end="1225.23">in their case they have to have this</span> <span data-start="1225.23" data-end="1226.64">little minus one there because their</span> <span data-start="1226.64" data-end="1228.26">object pointer has that extra one from</span> <span data-start="1228.26" data-end="1230.54">the tag otherwise the same and then they</span> <span data-start="1230.54" data-end="1231.8">just load a field out so it looks</span> <span data-start="1231.8" data-end="1235.73">exactly like that all right so here's</span> <span data-start="1235.73" data-end="1236.87">the performance that you get when you</span> <span data-start="1236.87" data-end="1238.63">use all these things in a classic</span> <span data-start="1238.63" data-end="1241.58">interpreter spider monkey if I search</span> <span data-start="1241.58" data-end="1243.2">the link list with 1 million elements</span> <span data-start="1243.2" data-end="1245.84">like this it takes 100 milliseconds so</span> <span data-start="1245.84" data-end="1247.88">if we use an untied from piracy ICS we</span> <span data-start="1247.88" data-end="1249.47">get like a three or four x speed up down</span> <span data-start="1249.47" data-end="1252.68">to 29 that's jager monkey and if you use</span> <span data-start="1252.68" data-end="1254.63">a time compiler like crankshaft I found</span> <span data-start="1254.63" data-end="1256.91">that you are actually you know almost</span> <span data-start="1256.91" data-end="1260.15">within 1.5 x of C but definitely 2x very</span> <span data-start="1260.15" data-end="1262.58">very close and that's your even the</span> <span data-start="1262.58" data-end="1265.94">highly optimized seen so last things</span> <span data-start="1265.94" data-end="1268.07">that are like yes we actually can run</span> </p>
<p><span data-start="1268.07" data-end="1269.9">JavaScript within two or three ecstasy</span> <span data-start="1269.9" data-end="1271.94">sometimes now and in fact with floating</span> <span data-start="1271.94" data-end="1273.44">point things because we don't have that</span> <span data-start="1273.44" data-end="1275.45">semantic gap we found programs where it</span> <span data-start="1275.45" data-end="1278.9">runs just as fast and jazz to see and we</span> <span data-start="1278.9" data-end="1280.58">really would like to keep getting faster</span> <span data-start="1280.58" data-end="1281.93">and faster there's a bunch of stuff we</span> <span data-start="1281.93" data-end="1284.06">can do but to really get there we need</span> <span data-start="1284.06" data-end="1286.49">to bridge this semantic gap we're sort</span> <span data-start="1286.49" data-end="1287.45">of the processors</span> <span data-start="1287.45" data-end="1289.34">semantics Jas has others were two</span> <span data-start="1289.34" data-end="1291.679">different and sort of if we could nudge</span> <span data-start="1291.679" data-end="1293.36">either one a little bit close together</span> <span data-start="1293.36" data-end="1296.75">we might be able to get there so thank</span> <span data-start="1296.75" data-end="1307.93">you</span> <span data-start="1307.94" data-end="1319.389">awesome any questions</span> <span data-start="1319.399" data-end="1332.73">oh yeah Eric</span> <span data-start="1332.74" data-end="1337.33">for the for the untyped compiler when</span> <span data-start="1337.33" data-end="1339.37">you're checking the shape and it doesn't</span> <span data-start="1339.37" data-end="1342.39">match you're doing a jump to the stub</span> <span data-start="1342.39" data-end="1345.28">how does it know where it was called</span> <span data-start="1345.28" data-end="1350.26">from the stuff is there's a journey so</span> <span data-start="1350.26" data-end="1351.91">there's actually several different ways</span> <span data-start="1351.91" data-end="1353.35">of doing that do you remember which way</span> <span data-start="1353.35" data-end="1356.59">we're doing it right now the jump</span> <span data-start="1356.59" data-end="1358.92">actually goes to a little path that</span> <span data-start="1358.92" data-end="1361.48">bakes in all the information you need to</span> <span data-start="1361.48" data-end="1368.2">to patch the code all right now the</span> <span data-start="1368.2" data-end="1381.96">question over there</span> <span data-start="1381.97" data-end="1384.36">how do you handle the cache invalidation</span> <span data-start="1384.36" data-end="1388.27">like you mean you major in line cash for</span> <span data-start="1388.27" data-end="1390.94">the structure of the objects are the</span> <span data-start="1390.94" data-end="1393.85">shapes better and people change the</span> <span data-start="1393.85" data-end="1397.9">upper side like the prototype and oh how</span> <span data-start="1397.9" data-end="1402.1">does invalidation of caching works so</span> <span data-start="1402.1" data-end="1404.98">there's actually the flexure question is</span> <span data-start="1404.98" data-end="1407.74">kind of complicated but the example you</span> <span data-start="1407.74" data-end="1409.33">gave doesn't really require the</span> <span data-start="1409.33" data-end="1411.76">invalidation of the cash so if you</span> <span data-start="1411.76" data-end="1413.71">change the prototype of an object that</span> <span data-start="1413.71" data-end="1416.83">will change its shape so the next time</span> <span data-start="1416.83" data-end="1418.63">you have that code maybe it's now shape</span> <span data-start="1418.63" data-end="1420.7">46 because you change the prototype so</span> <span data-start="1420.7" data-end="1422.74">it doesn't run but there are cases where</span> <span data-start="1422.74" data-end="1424.09">you have to do that because if you do a</span> </p>
<p><span data-start="1424.09" data-end="1427.81">GC garbage collection then often that</span> <span data-start="1427.81" data-end="1429.52">will sort of clean up a bunch of old</span> <span data-start="1429.52" data-end="1431.35">shapes and it might change shape IDs and</span> <span data-start="1431.35" data-end="1433.57">things like that so on certain events</span> <span data-start="1433.57" data-end="1435.16">like that you actually do have to go</span> <span data-start="1435.16" data-end="1436.78">through and basically purge all the</span> <span data-start="1436.78" data-end="1439.15">inline caches and reset them to the</span> <span data-start="1439.15" data-end="1441.82">original state so and and it turns out</span> <span data-start="1441.82" data-end="1443.44">that doesn't really bother performance</span> <span data-start="1443.44" data-end="1444.79">too much because they kind of you know</span> <span data-start="1444.79" data-end="1451.21">get turned back on pretty quickly you</span> <span data-start="1451.21" data-end="1454.09">mentioned that you would like to see the</span> <span data-start="1454.09" data-end="1456.97">the instruction set four cpus or your</span> <span data-start="1456.97" data-end="1459.43">javascript a lineup so where you could</span> <span data-start="1459.43" data-end="1460.69">optimize things better what would you</span> <span data-start="1460.69" data-end="1463.81">like to have included in javascript the</span> <span data-start="1463.81" data-end="1466.9">language to help you achieve better</span> <span data-start="1466.9" data-end="1472.03">better speeds well I guess I don't</span> <span data-start="1472.03" data-end="1473.98">really want to make specific suggestions</span> <span data-start="1473.98" data-end="1475.12">because I think that should be up to</span> <span data-start="1475.12" data-end="1476.74">people that are sort of really language</span> <span data-start="1476.74" data-end="1479.17">designers it's kind of more like hinting</span> <span data-start="1479.17" data-end="1481.93">at what we do need but so I think typed</span> <span data-start="1481.93" data-end="1484.9">arrays help and the binary data API</span> <span data-start="1484.9" data-end="1487.6">that's coming in es6 if you're familiar</span> <span data-start="1487.6" data-end="1489.61">with that one so it's time to raise you</span> <span data-start="1489.61" data-end="1491.23">can actually create an object for you</span> <span data-start="1491.23" data-end="1492.94">say this is an array of doubles for</span> <span data-start="1492.94" data-end="1495.31">example and that means you can get a lot</span> <span data-start="1495.31" data-end="1496.69">better storage because you don't have to</span> <span data-start="1496.69" data-end="1498.46">store all these type tags and things you</span> <span data-start="1498.46" data-end="1500.17">really just store the numbers you know</span> <span data-start="1500.17" data-end="1501.22">when you read them out you know exactly</span> <span data-start="1501.22" data-end="1504.25">what you get things like that so</span> <span data-start="1504.25" data-end="1508.24">otherwise I think and so that it</span> <span data-start="1508.24" data-end="1510.1">basically gives you something like see</span> <span data-start="1510.1" data-end="1511.66">raised by an errand data API</span> <span data-start="1511.66" data-end="1513.43">gives you something like see struts so</span> <span data-start="1513.43" data-end="1515.38">you can be fast that way the main thing</span> <span data-start="1515.38" data-end="1517.33">is integers right that's sort of the</span> <span data-start="1517.33" data-end="1519.43">hard line and I could imagine different</span> <span data-start="1519.43" data-end="1520.87">things like if there is even just a</span> <span data-start="1520.87" data-end="1523.48">little dynamic type like new in 32 or</span> <span data-start="1523.48" data-end="1525.28">something like that in JavaScript like</span> <span data-start="1525.28" data-end="1527.05">that would work there's other ways of</span> <span data-start="1527.05" data-end="1528.4">doing it to you could imagine creating a</span> <span data-start="1528.4" data-end="1529.9">library that just has integer math</span> <span data-start="1529.9" data-end="1532.12">functions in it teach the jits how to</span> <span data-start="1532.12" data-end="1534.52">how to see those but it's really all</span> <span data-start="1534.52" data-end="1537.19">just about I guess some way to express I</span> <span data-start="1537.19" data-end="1540.01">want integer semantics now and then you</span> <span data-start="1540.01" data-end="1541.99">can compile it exactly the integer math</span> <span data-start="1541.99" data-end="1544.21">on the processor and be fully fast so</span> <span data-start="1544.21" data-end="1547.84">that's pretty much what you need another</span> <span data-start="1547.84" data-end="1553.9">question all right let's give these guys</span> <span data-start="1553.9" data-end="1555.13">another own applause for making</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
