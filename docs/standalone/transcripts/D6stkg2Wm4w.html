<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="JSConf transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>D6stkg2Wm4w</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/D6stkg2Wm4w?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="34.42" data-end="37.66">hello everyone so I'm going to start</span> <span data-start="37.66" data-end="40.449">with a little quiz for you so I'm going</span> <span data-start="40.449" data-end="43.809">to use some snippets of code and I want</span> <span data-start="43.809" data-end="46.12">you to tell me what programming language</span> <span data-start="46.12" data-end="51.2">it is so I start with an easy one</span> <span data-start="51.21" data-end="55.629">anybody yeah i wish i had some goodies</span> <span data-start="55.629" data-end="59.019">for words so next one is also an easy</span> <span data-start="59.019" data-end="69.169">one yeah c++ I what about the last one</span> <span data-start="69.179" data-end="74.319">yeah it's actually C++ so if you want to</span> <span data-start="74.319" data-end="76.179">make sure that c++ we just have to</span> <span data-start="76.179" data-end="80.17">include two things at the at the top and</span> <span data-start="80.17" data-end="83.95">at the bottom and what's inside looks</span> <span data-start="83.95" data-end="87.22">like javascript but it's actually C++ so</span> <span data-start="87.22" data-end="90.759">you can give that 5 2 GC c or g + + is</span> <span data-start="90.759" data-end="94.539">going to compile binary and execute like</span> <span data-start="94.539" data-end="97.659">if it was JavaScript so the goal of the</span> <span data-start="97.659" data-end="100.42">talk is to explain you how I made it</span> <span data-start="100.42" data-end="105.579">work so you might be wondering why did I</span> <span data-start="105.579" data-end="108.67">do that because Java sweeping cheapest</span> <span data-start="108.67" data-end="113.109">price like why the and so I was in</span> <span data-start="113.109" data-end="115.75">a class and they wanted me to make a</span> <span data-start="115.75" data-end="119.89">rapper a c++ wrapper around this an ugly</span> <span data-start="119.89" data-end="123.82">capi so everybody in my class they</span> <span data-start="123.82" data-end="126.64">weren't like doing a creating like</span> <span data-start="126.64" data-end="129.1">dozens of files with many classes on</span> <span data-start="129.1" data-end="132.04">everything and I was like yeah but you</span> <span data-start="132.04" data-end="135.34">you could just just put a JSON put</span> <span data-start="135.34" data-end="138.34">everything in a JSON object and oh yeah</span> <span data-start="138.34" data-end="142.6">it's working so I I try to make it work</span> <span data-start="142.6" data-end="146.89">in the in C++ and then once i get json</span> <span data-start="146.89" data-end="148.989">walking i try to do all the pattern of</span> <span data-start="148.989" data-end="153.16">the language like lambda functions on</span> <span data-start="153.16" data-end="156.25">protoje Pelini returns so my plan is</span> <span data-start="156.25" data-end="159.13">going to be first we are going to to</span> <span data-start="159.13" data-end="164.65">write a json in c++ and then we're going</span> <span data-start="164.65" data-end="167.95">to imitate the syntax of</span> <span data-start="167.95" data-end="172.629">c++ 11-under functions into into the</span> </p>
<p><span data-start="172.629" data-end="175.209">JavaScript syntax and finally we are</span> <span data-start="175.209" data-end="178.53">going to see how to under prototype I'll</span> <span data-start="178.53" data-end="182.53">prototypal inheritance so let's start</span> <span data-start="182.53" data-end="186.58">with Jason so our goal is to make this</span> <span data-start="186.58" data-end="190.989">or something like this compile in C++ so</span> <span data-start="190.989" data-end="193.87">the first thing we want to see I want to</span> <span data-start="193.87" data-end="197.17">check is the general script primitives</span> <span data-start="197.17" data-end="200.819">so in JavaScript they are  no</span> <span data-start="200.819" data-end="206.14">true false numbers and strings and you</span> <span data-start="206.14" data-end="210.549">can see on the left you can see how each</span> <span data-start="210.549" data-end="214.66">other some tax is in JavaScript and we</span> <span data-start="214.66" data-end="217.87">want it to work on C++ so the first</span> <span data-start="217.87" data-end="220.62">thing we are going to do is to make a</span> <span data-start="220.62" data-end="223.42">structure core value that is going to</span> <span data-start="223.42" data-end="225.39">annul all the different data types</span> <span data-start="225.39" data-end="228.94">because in C++ everything is strongly</span> <span data-start="228.94" data-end="232.06">typed and in javascript is dynamically</span> <span data-start="232.06" data-end="235.299">typed so we want only one that one data</span> <span data-start="235.299" data-end="238.84">type and at one time we're going to see</span> <span data-start="238.84" data-end="242.13">which one we have and dispatch like that</span> <span data-start="242.13" data-end="246.25">so we are going to make a fruit value</span> <span data-start="246.25" data-end="249.28">and the other way to overload the</span> <span data-start="249.28" data-end="252.37">constructor so a constructor with zero</span> <span data-start="252.37" data-end="255.579">argument is going to be  with</span> <span data-start="255.579" data-end="258.43">double is going to be a number an int is</span> <span data-start="258.43" data-end="260.769">going to be a number a boolean is going</span> <span data-start="260.769" data-end="263.139">to be a brown and the cost char star is</span> <span data-start="263.139" data-end="266.35">going to be a string so now how do you</span> <span data-start="266.35" data-end="268.66">call it in C++ how do you create a new</span> <span data-start="268.66" data-end="272.08">viable in C++ so there are three ways to</span> <span data-start="272.08" data-end="275.979">do it so the first one is you put the</span> <span data-start="275.979" data-end="280.21">type name and the variable name and it</span> <span data-start="280.21" data-end="282.34">will call the constructor without any</span> <span data-start="282.34" data-end="285.46">arguments and then you can put the type</span> <span data-start="285.46" data-end="288.46">the variable name and in parentheses the</span> <span data-start="288.46" data-end="292">value or you can do type viable name</span> <span data-start="292" data-end="295.81">equals to the value so yeah I am pretty</span> <span data-start="295.81" data-end="298.99">sure you can see I'm targeting now so</span> <span data-start="298.99" data-end="301.46">we're first going to tag def</span> <span data-start="301.46" data-end="304.94">you into VAR and the second one is not</span> <span data-start="304.94" data-end="307.13">very useful so we are going to remove it</span> <span data-start="307.13" data-end="310.58">and then with only those this simple</span> <span data-start="310.58" data-end="313.819">class we are able to imitate JavaScript</span> <span data-start="313.819" data-end="320.06">syntax in C++ and in fact we are able to</span> <span data-start="320.06" data-end="323.509">write the liquor I just showed before</span> <span data-start="323.509" data-end="328.31">and it's working but at the moment this</span> <span data-start="328.31" data-end="331.389">exact code is on compiling because in</span> </p>
<p><span data-start="331.389" data-end="336.86">C++ you cannot write code and anywhere</span> <span data-start="336.86" data-end="338.99">you cannot run code anywhere you have to</span> <span data-start="338.99" data-end="341.09">run code in a function so we are going</span> <span data-start="341.09" data-end="342.979">to wrap everything into a main function</span> <span data-start="342.979" data-end="347.389">and basically everything which is int</span> <span data-start="347.389" data-end="350.449">main and above is going to be our first</span> <span data-start="350.449" data-end="353.479">include and the last time we to be our</span> <span data-start="353.479" data-end="357.71">last include so at this point we can</span> <span data-start="357.71" data-end="360.139">write JavaScript primitives so it's</span> <span data-start="360.139" data-end="362.9">pretty nice and now we are going to to</span> <span data-start="362.9" data-end="366.31">see how to make arrays and jason and</span> <span data-start="366.31" data-end="370.96">objects so it's not it's not going to be</span> <span data-start="370.96" data-end="374.419">mostly a difficult implementation it's</span> <span data-start="374.419" data-end="375.74">not going to be difficult to implement</span> <span data-start="375.74" data-end="378.44">it but we are going to see how to make</span> <span data-start="378.44" data-end="381.11">it look like JavaScript and so it's</span> <span data-start="381.11" data-end="384.05">mostly about syntax Mosul implementation</span> <span data-start="384.05" data-end="388.46">so the first thing i did i tried was to</span> <span data-start="388.46" data-end="390.65">make a very thick function called a and</span> <span data-start="390.65" data-end="395.36">then give it a list of arguments and the</span> <span data-start="395.36" data-end="401.57">problem is raya dick functions in c++</span> <span data-start="401.57" data-end="404.63">are made with macros and the mac road</span> <span data-start="404.63" data-end="408.74">don't do any type conversion so here Jes</span> <span data-start="408.74" data-end="411.139">conf is going to be a cost roster and</span> <span data-start="411.139" data-end="413.659">not a value so we are kind of stuck and</span> <span data-start="413.659" data-end="416.87">we cannot reuse this one so the signal</span> <span data-start="416.87" data-end="420.74">atoms was to use some operator</span> <span data-start="420.74" data-end="423.919">overloading a curry and I was able to</span> <span data-start="423.919" data-end="427.34">get back the bracket notation but I</span> <span data-start="427.34" data-end="430.729">didn't manage to only have the bracket</span> <span data-start="430.729" data-end="433.8">notation so I have some strange door OH</span> <span data-start="433.8" data-end="438.27">and underscored coma so it looks a bit</span> <span data-start="438.27" data-end="441.27">like JavaScript but not quiet and I</span> <span data-start="441.27" data-end="444.33">wasn't pleased with it but the right the</span> <span data-start="444.33" data-end="446.789">good part with it is that it does it</span> <span data-start="446.789" data-end="450.99">does enabled type conversion so a cool</span> <span data-start="450.99" data-end="453.3">thing we can do is to rewrite the first</span> <span data-start="453.3" data-end="456.27">one as a macro that generates the second</span> <span data-start="456.27" data-end="459.349">one and we can get the first one to work</span> <span data-start="459.349" data-end="464.94">but this is not something I want the</span> <span data-start="464.94" data-end="468.09">user to type and finally I went to see</span> <span data-start="468.09" data-end="472.139">press press 11 initializer list and the</span> <span data-start="472.139" data-end="476.699">just give us something we want it's just</span> <span data-start="476.699" data-end="479.46">like a JavaScript array instead of the</span> <span data-start="479.46" data-end="481.469">square brackets you've got curly</span> <span data-start="481.469" data-end="484.319">brackets so it's pretty much walking and</span> <span data-start="484.319" data-end="487.259">the implementation is read figure so you</span> <span data-start="487.259" data-end="489.69">just overrode the value constructor and</span> <span data-start="489.69" data-end="494.969">to add to to implement an initializer</span> <span data-start="494.969" data-end="497.4">list of values and it does a time</span> <span data-start="497.4" data-end="499.62">conversion it under the viatical</span> <span data-start="499.62" data-end="502.639">agreement so it was working pretty well</span> <span data-start="502.639" data-end="506.46">so now we are we have the array is</span> <span data-start="506.46" data-end="511.229">working now we want to make the object</span> <span data-start="511.229" data-end="514.229">walking and I'm going to go to a fun</span> <span data-start="514.229" data-end="516.419">fight in the JavaScript first if you</span> <span data-start="516.419" data-end="521.07">type this in your console is going to be</span> <span data-start="521.07" data-end="525">evaluated to one because curly braces</span> <span data-start="525" data-end="528.54">will be a block and a i'm colonel will</span> <span data-start="528.54" data-end="531.62">be a level so it's unfortunate</span> <span data-start="531.62" data-end="534.959">fortunately in javascript if you put a</span> <span data-start="534.959" data-end="537.449">hey equal to that is going to become</span> <span data-start="537.449" data-end="541.29">treated as an object but in C++ this is</span> <span data-start="541.29" data-end="545.699">the standard behavior so II we are not</span> <span data-start="545.699" data-end="548.76">going to be able to reproduce Jason</span> <span data-start="548.76" data-end="550.92">notation because of that because we</span> <span data-start="550.92" data-end="553.32">cannot overload labelled operator which</span> <span data-start="553.32" data-end="558.769">doesn't exist so we cannot write it so</span> <span data-start="558.769" data-end="563.11">we're going back to try on the arrow and</span> <span data-start="563.11" data-end="565.779">the first thing I did was like on the</span> </p>
<p><span data-start="565.779" data-end="569.95">RAS make an o function that's going to</span> <span data-start="569.95" data-end="572.769">take multiple arguments and the first</span> <span data-start="572.769" data-end="574.75">argument is going to be a key the second</span> <span data-start="574.75" data-end="577.589">a value and then a key and the value etc</span> <span data-start="577.589" data-end="581.019">so it works with a trick I mentioned</span> <span data-start="581.019" data-end="584.829">before but it doesn't feel like a key</span> <span data-start="584.829" data-end="587.56">value pair and if you don't indent your</span> <span data-start="587.56" data-end="590.8">card or put brakes at the right position</span> <span data-start="590.8" data-end="595.54">it just just doesn't feel right so next</span> <span data-start="595.54" data-end="598.209">I was like a crazy into a parrot</span> <span data-start="598.209" data-end="601.63">overload and I I came up with something</span> <span data-start="601.63" data-end="604.779">like that but but the prime is it</span> <span data-start="604.779" data-end="608.44">doesn't really look like JavaScript but</span> <span data-start="608.44" data-end="611.589">with operator overload we can do some</span> <span data-start="611.589" data-end="614.95">nice things and in the end I came up</span> <span data-start="614.95" data-end="618.37">with this one so we are still using the</span> <span data-start="618.37" data-end="620.769">initializer list with the curly brackets</span> <span data-start="620.769" data-end="626.17">and in order to get the key value you</span> <span data-start="626.17" data-end="628.51">are doing underscore bracket key equals</span> <span data-start="628.51" data-end="631.029">to value so this is a bit more verbose</span> <span data-start="631.029" data-end="635.5">than key current value but I think it's</span> <span data-start="635.5" data-end="637.449">a good trade-off or at least it's the</span> <span data-start="637.449" data-end="640.81">best reader if I could come up with so</span> <span data-start="640.81" data-end="644.38">if you want to do some crazy things with</span> <span data-start="644.38" data-end="647.11">presidents with operator overloading you</span> <span data-start="647.11" data-end="648.91">have to get this president's list in my</span> <span data-start="648.91" data-end="651.76">you have to have it in mind so here it's</span> <span data-start="651.76" data-end="655.12">working because the bracket operator has</span> <span data-start="655.12" data-end="657.64">more present than G equal one which has</span> <span data-start="657.64" data-end="661.899">more precedence than the comma 1 so we</span> <span data-start="661.899" data-end="664.24">are going quickly going going to see how</span> <span data-start="664.24" data-end="667.089">is walking in reality so we've got an</span> <span data-start="667.089" data-end="668.89">underscore instance of the class</span> <span data-start="668.89" data-end="674.01">underscore that has a bracket operator</span> <span data-start="674.01" data-end="678.459">that creates a key value pair on set the</span> <span data-start="678.459" data-end="682.269">key and then the key value pair as an</span> <span data-start="682.269" data-end="685.18">equal operator that set the value so now</span> <span data-start="685.18" data-end="687.699">at this point we've got a key value pair</span> <span data-start="687.699" data-end="691.3">and we just can give the key value pair</span> <span data-start="691.3" data-end="693.64">we just can overload the constructor of</span> <span data-start="693.64" data-end="694.81">the value with</span> <span data-start="694.81" data-end="698.14">value pair and we got we got it working</span> <span data-start="698.14" data-end="700.75">so the implementation is a bit tricky</span> <span data-start="700.75" data-end="705.94">tricky but it's and now the</span> <span data-start="705.94" data-end="709.15">result is we've got JSON working so it's</span> <span data-start="709.15" data-end="712.24">not exactly the same syntax but the</span> <span data-start="712.24" data-end="714.46">great thing is we are the exact same</span> <span data-start="714.46" data-end="718.81">possibilities as JSON so we can write</span> <span data-start="718.81" data-end="721.66">the we can put all our JavaScript code</span> <span data-start="721.66" data-end="724.3">to jason to super stressed with that</span> <span data-start="724.3" data-end="730.36">it's so now we've got objects</span> <span data-start="730.36" data-end="735.67">walking and and a big another big part</span> <span data-start="735.67" data-end="739.54">of of JavaScript our lambda functions so</span> <span data-start="739.54" data-end="742.66">unfortunately for us in C++ 11 they</span> <span data-start="742.66" data-end="746.26">introduced lambda functions but we've</span> <span data-start="746.26" data-end="750.029">got a program which is that the the</span> <span data-start="750.029" data-end="753.279">syntax is ugly it's like a bracket and</span> <span data-start="753.279" data-end="756.1">everything so we we don't want to write</span> <span data-start="756.1" data-end="764.68">the the c++ syntax so what we want to do</span> <span data-start="764.68" data-end="766.75">is to write function parentage this wife</span> <span data-start="766.75" data-end="769.87">and get is translated to the thing on</span> <span data-start="769.87" data-end="775.93">the left so unfortunately the only way I</span> <span data-start="775.93" data-end="779.02">found to do it was to use a macro so</span> <span data-start="779.02" data-end="781.81">we're going to make a macro function is</span> <span data-start="781.81" data-end="783.49">going to take a leave a decrease of</span> <span data-start="783.49" data-end="785.77">arguments and just copy and paste it and</span> <span data-start="785.77" data-end="790.54">put the boilerplate around and we have</span> <span data-start="790.54" data-end="792.37">also ran across the program which is</span> <span data-start="792.37" data-end="796.12">that c++ you are in suppressed first you</span> <span data-start="796.12" data-end="798.94">have to type every viable and even in</span> <span data-start="798.94" data-end="804.85">the arguments so there's a quick ACK so</span> <span data-start="804.85" data-end="807.64">you have to put VAR before is a viable</span> <span data-start="807.64" data-end="812.65">name the argument name in our GSP p but</span> <span data-start="812.65" data-end="815.44">other than that it's working so now</span> <span data-start="815.44" data-end="818.89">we've got we are able to create lambda</span> <span data-start="818.89" data-end="824.32">functions that looks like that that</span> <span data-start="824.32" data-end="826.63">looks like javascript and now we want to</span> <span data-start="826.63" data-end="827.72">store them</span> <span data-start="827.72" data-end="831.11">so in so again in C++ everything is from</span> <span data-start="831.11" data-end="835.009">retyped so we are so two functions with</span> <span data-start="835.009" data-end="836.75">different arguments have two different</span> <span data-start="836.75" data-end="840.439">types but we are we are lucky enough</span> <span data-start="840.439" data-end="842.06">that we have only one data type to</span> <span data-start="842.06" data-end="845">handle which is a type value so at every</span> <span data-start="845" data-end="847.37">function return the value and every</span> <span data-start="847.37" data-end="851">function thanked 0 1 or more values so</span> <span data-start="851" data-end="853.819">we can just overall though the value</span> <span data-start="853.819" data-end="856.85">constructor with all the rets we want to</span> <span data-start="856.85" data-end="862.069">support then we want to call the</span> <span data-start="862.069" data-end="865.639">function we have thought and it's as</span> <span data-start="865.639" data-end="868.519">another divergence between c++ and java</span> <span data-start="868.519" data-end="872.99">script in the core semantics so in sip</span> <span data-start="872.99" data-end="876.41">in c++ if a function takes two arguments</span> <span data-start="876.41" data-end="879.23">if you give it three is why it won't</span> <span data-start="879.23" data-end="881.81">work in javascript if you give less</span> <span data-start="881.81" data-end="885.079">arguments it will feel the other with</span> <span data-start="885.079" data-end="887.959">and if you give more it will</span> <span data-start="887.959" data-end="892.459">just in your the last one so we are just</span> <span data-start="892.459" data-end="896.75">going to to write this so if we've got a</span> <span data-start="896.75" data-end="899.899">function store that has zero arguments</span> <span data-start="899.899" data-end="902.389">we just call it with zero argument if it</span> <span data-start="902.389" data-end="904.55">has one argument we are going to call</span> <span data-start="904.55" data-end="906.559">with the arguments were given and if it</span> <span data-start="906.559" data-end="908.87">as two we're going to call with a and</span> <span data-start="908.87" data-end="912.579">and so we get it working but</span> <span data-start="912.579" data-end="915.079">if you want to support many averages</span> <span data-start="915.079" data-end="919.22">it's a lot of copy and paste so the the</span> <span data-start="919.22" data-end="920.75">implementation is dependent on the</span> <span data-start="920.75" data-end="923.779">number of of the RET of the maximum</span> <span data-start="923.779" data-end="928.619">arity of functions you want to support</span> <span data-start="928.629" data-end="932.389">so now let's get to interesting thing so</span> <span data-start="932.389" data-end="937.25">we've got Jason we've got functions so</span> <span data-start="937.25" data-end="940.87">now we can tackle the one things that</span> <span data-start="940.87" data-end="944.42">javascript stands apart from all of us</span> <span data-start="944.42" data-end="947.839">or all other languages which is for the</span> <span data-start="947.839" data-end="951.55">type or inheritance so in order to do it</span> <span data-start="951.55" data-end="954.259">the concept is very simple when you have</span> <span data-start="954.259" data-end="956.6">an object and you want to reach with a</span> <span data-start="956.6" data-end="959">property from the subject you're going</span> <span data-start="959" data-end="959.889">to see if</span> <span data-start="959.889" data-end="963.069">is inside the object and if it if it is</span> <span data-start="963.069" data-end="965.379">if it is inside the object you're just</span> <span data-start="965.379" data-end="969.22">going to give it back but now if it</span> <span data-start="969.22" data-end="971.47">isn't inside you're going to ask the</span> <span data-start="971.47" data-end="973.72">parent of the object and see if it's</span> <span data-start="973.72" data-end="976.389">inside and this you are doing do it</span> <span data-start="976.389" data-end="979.809">going to do it recursively until you</span> <span data-start="979.809" data-end="983.439">find the object the property you want to</span> <span data-start="983.439" data-end="986.109">look for and if it doesn't if you if you</span> <span data-start="986.109" data-end="988.449">if the properties and they're they're</span> <span data-start="988.449" data-end="992.379">going to return the fine so in a so you</span> <span data-start="992.379" data-end="994.329">just have to overall the bracket</span> <span data-start="994.329" data-end="996.639">operator to reproduce prototypal</span> <span data-start="996.639" data-end="1000.209">inheritance and there's only one thing</span> <span data-start="1000.209" data-end="1001.709">you have to remember when implant</span> <span data-start="1001.709" data-end="1004.619">implementing this is that when you read</span> <span data-start="1004.619" data-end="1008.009">a property from an object is going to</span> <span data-start="1008.009" data-end="1010.319">climb the prototype chain however if you</span> <span data-start="1010.319" data-end="1012.899">set the property to an object is going</span> <span data-start="1012.899" data-end="1016.169">to set it on the object itself so I</span> <span data-start="1016.169" data-end="1019.019">didn't know about it and now that I know</span> <span data-start="1019.019" data-end="1026.76">it seems logical so so yeah and so now</span> <span data-start="1026.76" data-end="1029.189">we can retrieve a property from the</span> <span data-start="1029.189" data-end="1030.99">deposit I chain but how do you actually</span> <span data-start="1030.99" data-end="1033.689">set up to the type shown so I'm pretty</span> <span data-start="1033.689" data-end="1037.86">sure all of you I've I've read the do</span> <span data-start="1037.86" data-end="1040.169">black Douglas Crockford implementation</span> <span data-start="1040.169" data-end="1043.079">of objected create we just with which</span> <span data-start="1043.079" data-end="1047.089">does some crazy stuff with prototype new</span> <span data-start="1047.089" data-end="1050.46">functions and everything and in fact if</span> <span data-start="1050.46" data-end="1053.669">you allow to the user underscore</span> <span data-start="1053.669" data-end="1055.5">underscore proto it's really easy to</span> <span data-start="1055.5" data-end="1059.429">write so object of crate is a function</span> <span data-start="1059.429" data-end="1061.049">that takes a parent and return an object</span> <span data-start="1061.049" data-end="1063">which has the underscore underscore</span> <span data-start="1063" data-end="1066.12">proto property set to the parent so ill</span> <span data-start="1066.12" data-end="1069.33">we can make it work like in two lines of</span> <span data-start="1069.33" data-end="1074.76">code so it's very nice and but it's not</span> <span data-start="1074.76" data-end="1077.49">enough all the JavaScript code isn't</span> <span data-start="1077.49" data-end="1079.919">using objective trades so you want to be</span> <span data-start="1079.919" data-end="1082.47">able to use the new constructor the new</span> <span data-start="1082.47" data-end="1085.289">operator so fortunately for us it's also</span> <span data-start="1085.289" data-end="1087.419">possible to do to implement it in pure</span> </p>
<p><span data-start="1087.419" data-end="1089.82">JavaScript if you are now and does come</span> <span data-start="1089.82" data-end="1092.879">on the scalp photo so let's see how we</span> <span data-start="1092.879" data-end="1093.75">do it</span> <span data-start="1093.75" data-end="1096.11">so new is going to be a function that</span> <span data-start="1096.11" data-end="1099.9">takes a constructor and that going to</span> <span data-start="1099.9" data-end="1101.04">reach on the function that takes</span> <span data-start="1101.04" data-end="1107.88">parameters so we're going to create an</span> <span data-start="1107.88" data-end="1110.67">object which has underscore underscore</span> <span data-start="1110.67" data-end="1113.1">proto set to the constructor prototype</span> <span data-start="1113.1" data-end="1116.4">so we set the prototype chain and then</span> <span data-start="1116.4" data-end="1118.62">we are going to call the constructor in</span> <span data-start="1118.62" data-end="1121.98">in this case it's going to be point with</span> <span data-start="1121.98" data-end="1125.01">this set to be the new object we just</span> <span data-start="1125.01" data-end="1128.1">created and all the arguments are going</span> <span data-start="1128.1" data-end="1131.4">to be passing so we are just going to do</span> <span data-start="1131.4" data-end="1136.59">point apply the new object on 10 and 20</span> <span data-start="1136.59" data-end="1139.53">and return the objects so it's a really</span> <span data-start="1139.53" data-end="1141.36">nice thing that we are able to do that</span> <span data-start="1141.36" data-end="1146.73">in JavaScript well now in C++ and the</span> <span data-start="1146.73" data-end="1148.47">only downside is that you have to write</span> <span data-start="1148.47" data-end="1150.69">to wrap the constructor name into</span> <span data-start="1150.69" data-end="1154.08">parentheses but it's also accept it's</span> <span data-start="1154.08" data-end="1160.41">also working in JavaScript it's cool so</span> <span data-start="1160.41" data-end="1164.01">now I've been a I've shown you how to</span> <span data-start="1164.01" data-end="1170.66">make objects lambda functions and</span> <span data-start="1170.66" data-end="1174.62">prototypal inheritance if you ask me a</span> <span data-start="1174.62" data-end="1177.69">wet javascript is i would say those</span> <span data-start="1177.69" data-end="1181.02">three points because I to me that that's</span> <span data-start="1181.02" data-end="1183.14">the only three points that differ from</span> </p>
<p><span data-start="1183.14" data-end="1186.69">C++ or any other language so it's it's</span> <span data-start="1186.69" data-end="1188.1">really nice that we've been able to</span> <span data-start="1188.1" data-end="1191.01">implement them in C++ with a close in</span> <span data-start="1191.01" data-end="1193.62">tax so now I don't really have the time</span> <span data-start="1193.62" data-end="1197.28">to go into really really death details</span> <span data-start="1197.28" data-end="1199.55">when i'm going to show you what other</span> <span data-start="1199.55" data-end="1203.37">features we can implement so the first</span> <span data-start="1203.37" data-end="1206.16">one is going to be closure so since we</span> <span data-start="1206.16" data-end="1209.37">have longer with written in C++ we can</span> <span data-start="1209.37" data-end="1212.25">just use lambda closure oh that works</span> <span data-start="1212.25" data-end="1215.13">and there's only a little nasty bugs</span> <span data-start="1215.13" data-end="1216.93">that I don't have the time to explain</span> <span data-start="1216.93" data-end="1218.88">right now but if you want to know more</span> <span data-start="1218.88" data-end="1223.32">about it I talk to me offline then we</span> <span data-start="1223.32" data-end="1224.64">can set this</span> <span data-start="1224.64" data-end="1228.57">in the four way that says RG fine in</span> </p>
<p><span data-start="1228.57" data-end="1231.21">JavaScript so the first way is with new</span> <span data-start="1231.21" data-end="1235.23">as i showed earlier the second one is an</span> <span data-start="1235.23" data-end="1237.81">unbound call the third one is a bound</span> <span data-start="1237.81" data-end="1240.9">call like when you do a object dirt</span> <span data-start="1240.9" data-end="1244.65">function and you call it and the first</span> <span data-start="1244.65" data-end="1247.59">the last one is a using color and apply</span> <span data-start="1247.59" data-end="1251.76">and we can do it we can do it using a</span> <span data-start="1251.76" data-end="1256.07">little hack so if you remember our</span> <span data-start="1256.07" data-end="1260.72">function macro we can insert two</span> <span data-start="1260.72" data-end="1263.64">additional arguments which are this an</span> <span data-start="1263.64" data-end="1266.22">argument and then when you when we call</span> <span data-start="1266.22" data-end="1272.61">it we can add those those arguments in a</span> <span data-start="1272.61" data-end="1275.88">hidden way and the they are available to</span> <span data-start="1275.88" data-end="1283.53">the user so since we can also overload</span> <span data-start="1283.53" data-end="1287.52">all the traditional JavaScript operators</span> <span data-start="1287.52" data-end="1290.94">so less than equal plus plus plus equal</span> <span data-start="1290.94" data-end="1294.12">plus and you can make it work for all</span> <span data-start="1294.12" data-end="1296.7">the data types so a string number and</span> <span data-start="1296.7" data-end="1299.1">everything it's just a matter of using</span> <span data-start="1299.1" data-end="1303.53">the the jet on reading the JavaScript</span> <span data-start="1303.53" data-end="1305.64">specification and implementing all the</span> <span data-start="1305.64" data-end="1311.49">other cases we also get with CPS first</span> <span data-start="1311.49" data-end="1317.49">11 iteration for free because in C++ 11</span> <span data-start="1317.49" data-end="1320.69">you can do for type the viable name</span> <span data-start="1320.69" data-end="1324.81">colon and the object and then we can</span> <span data-start="1324.81" data-end="1329.01">just define in to be rewriting in colon</span> <span data-start="1329.01" data-end="1333.23">and it's working so it's pretty nice and</span> <span data-start="1333.23" data-end="1336.9">we've also got exceptions working with a</span> <span data-start="1336.9" data-end="1339.09">channel with a c++ exception mechanism</span> <span data-start="1339.09" data-end="1341.21">we just have to make sure to typecast</span> <span data-start="1341.21" data-end="1345.45">the exception value into a value object</span> <span data-start="1345.45" data-end="1349.59">and just rewrite the catch to ignore the</span> <span data-start="1349.59" data-end="1356.13">the type so we've got like ninety</span> <span data-start="1356.13" data-end="1357.69">percent of</span> <span data-start="1357.69" data-end="1361.529">of JavaScript walking in C++ with more</span> <span data-start="1361.529" data-end="1363.809">or less the same syntax so I'm really</span> <span data-start="1363.809" data-end="1367.139">proud of of it because you can pretty</span> <span data-start="1367.139" data-end="1371.61">much run any JavaScript any javascript</span> <span data-start="1371.61" data-end="1374.97">file and convert it to 2g SVP and it</span> <span data-start="1374.97" data-end="1378.69">just works but there are some divergence</span> <span data-start="1378.69" data-end="1381.24">and I couldn't fix so the first one is</span> <span data-start="1381.24" data-end="1384.72">there is no evil and you might say evil</span> <span data-start="1384.72" data-end="1387.12">is evil so it's not a problem but in</span> <span data-start="1387.12" data-end="1389.61">fact we use eval every time in</span> </p>
<p><span data-start="1389.61" data-end="1391.98">JavaScript so in the console when you</span> <span data-start="1391.98" data-end="1394.32">have a read eval print loop you are</span> <span data-start="1394.32" data-end="1397.409">using either and in the browser when you</span> <span data-start="1397.409" data-end="1399.779">add a script in line you are using evil</span> <span data-start="1399.779" data-end="1402.72">when you require a module file you are</span> <span data-start="1402.72" data-end="1406.32">using evil so not having a valley is is</span> <span data-start="1406.32" data-end="1410.34">a big issue but if instance if it since</span> <span data-start="1410.34" data-end="1413.19">it is simpler stress of does not much we</span> <span data-start="1413.19" data-end="1417.659">can do about also one real annoying</span> <span data-start="1417.659" data-end="1420.96">thing is there is no implicit return</span> <span data-start="1420.96" data-end="1425.129">so in c++ if you say the</span> <span data-start="1425.129" data-end="1427.23">function is going to return a value you</span> <span data-start="1427.23" data-end="1429.36">have to return something or the compiler</span> <span data-start="1429.36" data-end="1432.69">will stop you and I did not realize</span> <span data-start="1432.69" data-end="1436.529">until then but you you often an already</span> <span data-start="1436.529" data-end="1439.32">often miss and forgot to write a written</span> <span data-start="1439.32" data-end="1445.049">something and so it's it it makes some</span> <span data-start="1445.049" data-end="1447.12">boilerplate code on your on your GSP</span> <span data-start="1447.12" data-end="1450.059">pecan and also as we've seen we're at a</span> <span data-start="1450.059" data-end="1451.98">different syntax for ra an object</span> <span data-start="1451.98" data-end="1454.409">initialization so there are bunch of</span> <span data-start="1454.409" data-end="1456.659">thing on the bottom that you might be</span> <span data-start="1456.659" data-end="1458.759">interested in and if you want to know</span> <span data-start="1458.759" data-end="1461.34">more about them you can you can see them</span> <span data-start="1461.34" data-end="1465.059">in the slides so the other difference is</span> <span data-start="1465.059" data-end="1468.179">out there is no dot notation and I</span> <span data-start="1468.179" data-end="1473.009">couldn't find a way to emulate it and as</span> <span data-start="1473.009" data-end="1476.879">a retail  we use that notation</span> <span data-start="1476.879" data-end="1479.429">like all the time in JavaScript so</span> <span data-start="1479.429" data-end="1481.409">having to go back to the bracket on</span> <span data-start="1481.409" data-end="1484.259">string notation is really really really</span> <span data-start="1484.259" data-end="1490.58">annoying so and also that there's a</span> <span data-start="1490.58" data-end="1494.44">afro name with the empty object notation</span> <span data-start="1494.44" data-end="1497.99">since we are using initializer list I'm</span> <span data-start="1497.99" data-end="1500.33">two objects is treated as mersing so it</span> <span data-start="1500.33" data-end="1502.97">calls the empty constructor and so it's</span> <span data-start="1502.97" data-end="1505.039">written  instead of an empty</span> <span data-start="1505.039" data-end="1508.85">object so you have to just make sure to</span> <span data-start="1508.85" data-end="1514.07">know the trick and I'm very sorry but I</span> <span data-start="1514.07" data-end="1516.26">know you all like to write for a peacoat</span> <span data-start="1516.26" data-end="1519.919">and I couldn't reproduce with statements</span> <span data-start="1519.919" data-end="1522.289">so I'm sorry but I have I have a gift</span> <span data-start="1522.289" data-end="1527.899">for you so since we are in C++ you can</span> <span data-start="1527.899" data-end="1530.389">use go to so it was a bit of a</span> <span data-start="1530.389" data-end="1534.74">consolation for me so as a conclusion</span> </p>
<p><span data-start="1534.74" data-end="1537.86">I'm going to answer a question of often</span> <span data-start="1537.86" data-end="1540.35">asked which when I'm talk about the</span> <span data-start="1540.35" data-end="1543.83">project which is it is useful and my</span> <span data-start="1543.83" data-end="1546.83">honest answer will be I don't know so at</span> <span data-start="1546.83" data-end="1548.45">first when I played with it I was like</span> <span data-start="1548.45" data-end="1551.99">oh my god we can we can do everything</span> <span data-start="1551.99" data-end="1554.87">that JavaScript can do in C++ and we've</span> <span data-start="1554.87" data-end="1558.169">got an ear we have near the same syntax</span> <span data-start="1558.169" data-end="1561.95">oh yeah it's awesome but when you start</span> <span data-start="1561.95" data-end="1565.58">using it you realize that the absence of</span> <span data-start="1565.58" data-end="1567.919">the dot notation and the return on</span> <span data-start="1567.919" data-end="1570.74">defines the make your color looks really</span> <span data-start="1570.74" data-end="1573.409">like crap and you don't want to write</span> <span data-start="1573.409" data-end="1576.26">code like that and also the second</span> <span data-start="1576.26" data-end="1579.62">things is like you personally I love</span> </p>
<p><span data-start="1579.62" data-end="1580.88">JavaScript because it's a dynamic</span> <span data-start="1580.88" data-end="1583.399">language you can just save a file on the</span> <span data-start="1583.399" data-end="1586.46">reloads abrazo it's working and having a</span> <span data-start="1586.46" data-end="1589.1">10 second compilation step in between</span> <span data-start="1589.1" data-end="1593.72">was like I don't know but well if you</span> <span data-start="1593.72" data-end="1598.309">really want to use it a good benefit is</span> <span data-start="1598.309" data-end="1600.74">that you are you are able to communicate</span> <span data-start="1600.74" data-end="1603.88">with all the C++ code that exists and</span> <span data-start="1603.88" data-end="1608.09">you can just write C++ and mix C++</span> <span data-start="1608.09" data-end="1609.409">course on JavaScript course and</span> <span data-start="1609.409" data-end="1612.769">everything and it was also really fun</span> <span data-start="1612.769" data-end="1616.76">and also one thing I want to point out</span> <span data-start="1616.76" data-end="1621.86">is that c++ 11 is now able to run many</span> <span data-start="1621.86" data-end="1622.79">of the same</span> <span data-start="1622.79" data-end="1626">we used to run to do on JavaScript so</span> <span data-start="1626" data-end="1627.92">it's I think it's a big step forward at</span> <span data-start="1627.92" data-end="1632.33">the server side or our low level stuff</span> <span data-start="1632.33" data-end="1636.62">to be able to take paradism from the</span> <span data-start="1636.62" data-end="1639.59">dynamic world and put them back to the</span> <span data-start="1639.59" data-end="1643.85">static fault so if you want to play with</span> <span data-start="1643.85" data-end="1646.25">the code it's available on get up at</span> <span data-start="1646.25" data-end="1649.1">this address and if you want to know</span> <span data-start="1649.1" data-end="1650.69">more about me i have a blog and you can</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
