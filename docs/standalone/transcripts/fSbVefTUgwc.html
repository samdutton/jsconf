<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="JSConf transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>fSbVefTUgwc</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/fSbVefTUgwc?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="1.159" data-end="4.859">all right wait I think you get muted</span> <span data-start="4.859" data-end="8.189">wait yeah okay cool we can talk now yeah</span> <span data-start="8.189" data-end="9.929">and there's both of us and this is</span> <span data-start="9.929" data-end="11.46">totally not going to feedback or be</span> <span data-start="11.46" data-end="14.25">weird at all no yeah I'm gonna yeah I'm</span> <span data-start="14.25" data-end="15.78">gonna pretend I don't like you very much</span> <span data-start="15.78" data-end="19.199">okay stand over here yeah I'll just move</span> <span data-start="19.199" data-end="23.06">over here okay all right hi everybody</span> <span data-start="23.06" data-end="25.92">hey so our talk is called monkey patch</span> <span data-start="25.92" data-end="29.64">the planet but before we get to that we</span> <span data-start="29.64" data-end="32.07">wanted to talk about us a little bit so</span> <span data-start="32.07" data-end="34.579">this is an actual picture of forest ania</span> <span data-start="34.579" data-end="38.7">my name is actually Brian fjord it's</span> <span data-start="38.7" data-end="41.54">often misunderstood is Brian forward but</span> <span data-start="41.54" data-end="45.48">and I'm Forrest Norville okay that's the</span> <span data-start="45.48" data-end="50.28">best joke we have so let's talk about</span> <span data-start="50.28" data-end="52.11">what monkey patching is really briefly</span> <span data-start="52.11" data-end="53.579">will be coming back to this throughout</span> <span data-start="53.579" data-end="57.12">the talk so this is just kind of a</span> <span data-start="57.12" data-end="59.91">high-level overview it's really easy to</span> <span data-start="59.91" data-end="61.379">say that monkey patching is like</span> <span data-start="61.379" data-end="63">replacing a function on an existing</span> <span data-start="63" data-end="64.559">object or something but really that's</span> <span data-start="64.559" data-end="66.18">not what monkey patching is actually</span> <span data-start="66.18" data-end="68.31">about what Mike has a lifestyle yeah</span> <span data-start="68.31" data-end="71.369">it's a lifestyle it's a philosophy it's</span> <span data-start="71.369" data-end="72.99">a religion we get into that more later</span> <span data-start="72.99" data-end="77.07">on it's to alter the baseline behavior</span> <span data-start="77.07" data-end="80.159">of your system at runtime in a way that</span> <span data-start="80.159" data-end="82.02">is invisible to the code that is running</span> <span data-start="82.02" data-end="85.14">within it so it's a way of augmenting or</span> <span data-start="85.14" data-end="88.759">replacing or enhancing existing behavior</span> <span data-start="88.759" data-end="92.97">transparently very good okay so why why</span> <span data-start="92.97" data-end="95.549">would you use it oh this is cool so</span> <span data-start="95.549" data-end="97.92">we're like slightly cut off here plus</span> <span data-start="97.92" data-end="99.659">right we can just talk about this stuff</span> <span data-start="99.659" data-end="102.45">yeah so let's say you have an appt an</span> <span data-start="102.45" data-end="104.64">asset you hand it off to one of your</span> <span data-start="104.64" data-end="107.49">interns to write not that anybody here</span> <span data-start="107.49" data-end="110.28">did that and it's got a whole bunch of</span> <span data-start="110.28" data-end="111.899">windows alert calls in that you have to</span> <span data-start="111.899" data-end="113.759">like keep space barring through write</span> </p>
<p><span data-start="113.759" data-end="116.31">CSS is hard oh yeah I think that's what</span> <span data-start="116.31" data-end="118.38">the talks were about yesterday yeah yeah</span> <span data-start="118.38" data-end="120.06">so rather than do a modal you can just</span> <span data-start="120.06" data-end="123.03">do this yeah so you want to you want to</span> <span data-start="123.03" data-end="125.399">get rid of that so you can try to do is</span> <span data-start="125.399" data-end="126.899">or what you want to do is make it so</span> <span data-start="126.899" data-end="128.34">that it sends that to the console output</span> <span data-start="128.34" data-end="131.35">instead all right</span> <span data-start="131.35" data-end="134.02">so you want it to be like I said you</span> <span data-start="134.02" data-end="136.3">want to use wah console that woke him up</span> <span data-start="136.3" data-end="137.74">that work yeah it's close enough</span> <span data-start="137.74" data-end="139.63">whatever but you're gonna for the</span> <span data-start="139.63" data-end="140.92">coolest life later you're gonna me to go</span> <span data-start="140.92" data-end="142.99">full screening yeah all right I'll do</span> <span data-start="142.99" data-end="144.91">that oh and we should hide this thing or</span> <span data-start="144.91" data-end="147.97">like make it a little small computers</span> <span data-start="147.97" data-end="149.5">are hired okay keep talking keeps all</span> <span data-start="149.5" data-end="150.64">right well it's your turn to talk now</span> <span data-start="150.64" data-end="152.68">okay we're on to the next slide is that</span> <span data-start="152.68" data-end="154.87">how this works yeah okay all right so</span> <span data-start="154.87" data-end="156.76">one of your options for removing window</span> <span data-start="156.76" data-end="159.64">dot alert is to use this thing said so</span> <span data-start="159.64" data-end="161.53">you can just replace all of the things</span> <span data-start="161.53" data-end="163.36">in here right problem solved right first</span> <span data-start="163.36" data-end="168.04">well not so much hi cuz you know you</span> <span data-start="168.04" data-end="170.44">might end up replacing a bunch of stuff</span> <span data-start="170.44" data-end="172.33">that you didn't want to replace because</span> <span data-start="172.33" data-end="174.61">you might end up just like you know when</span> <span data-start="174.61" data-end="175.75">you do a global search and replace you</span> <span data-start="175.75" data-end="177.19">do a global search and replace maybe you</span> <span data-start="177.19" data-end="178.93">actually wanted that to still say that</span> <span data-start="178.93" data-end="181.33">it was still window alert even though</span> <span data-start="181.33" data-end="183.31">you're using console dot log so how</span> <span data-start="183.31" data-end="186.22">would you deal with that Brian well we</span> <span data-start="186.22" data-end="188.5">can use this cool module called falafel</span> <span data-start="188.5" data-end="191.95">that builds up in AST and like parses</span> <span data-start="191.95" data-end="193.84">the javascript so we know that this is</span> <span data-start="193.84" data-end="196.36">not a string window alert this is like</span> <span data-start="196.36" data-end="198.22">legit windowed on alert and you'll note</span> <span data-start="198.22" data-end="199.9">you have to you have to take care when</span> <span data-start="199.9" data-end="201.42">you're doing this and these are all</span> <span data-start="201.42" data-end="204.76">highly endorsed will never get you in</span> <span data-start="204.76" data-end="207.28">trouble methods for making sure that</span> <span data-start="207.28" data-end="208.48">you're running the right thing to make</span> <span data-start="208.48" data-end="210.61">sure that you only call your monkey</span> <span data-start="210.61" data-end="212.82">patch method when it's appropriate right</span> <span data-start="212.82" data-end="215.26">so it's still not that great though</span> <span data-start="215.26" data-end="217.81">because let's say you wrote code like</span> <span data-start="217.81" data-end="220.81">this because you're smart and you want</span> <span data-start="220.81" data-end="224.82">to access alert in the smart better way</span> <span data-start="224.82" data-end="227.86">dynamic languages are very dynamic yeah</span> <span data-start="227.86" data-end="229.87">so you can call things in all sorts of</span> <span data-start="229.87" data-end="233.32">ways so that won't work but what if we</span> <span data-start="233.32" data-end="235.9">were like super smart and used a JSP are</span> <span data-start="235.9" data-end="237.46">sir even more so we wrote a code</span> <span data-start="237.46" data-end="240.01">transform that took input like that and</span> <span data-start="240.01" data-end="242.8">maybe did output like this so like on</span> <span data-start="242.8" data-end="244.93">every function call we make sure that</span> <span data-start="244.93" data-end="246.81">the thing that we're not calling is</span> <span data-start="246.81" data-end="250.12">window dot alert right so this is</span> <span data-start="250.12" data-end="251.95">actually basically the same code it's</span> <span data-start="251.95" data-end="253.87">super simple alright just drop that in</span> <span data-start="253.87" data-end="256.27">your app and no more window alerts no</span> <span data-start="256.27" data-end="258.73">big deal I sweet there's one small</span> <span data-start="258.73" data-end="263.47">problem with that though you've actually</span> <span data-start="263.47" data-end="265.35">managed to</span> <span data-start="265.35" data-end="268.17">completely complicate your build process</span> <span data-start="268.17" data-end="270.37">because you have to do this source to</span> <span data-start="270.37" data-end="273.04">source transform you like if you want to</span> <span data-start="273.04" data-end="274.6">be able to debug this in the browser</span> <span data-start="274.6" data-end="276.22">because you can't do this at all no</span> <span data-start="276.22" data-end="277.39">really you're going to need to generate</span> <span data-start="277.39" data-end="278.62">source maps which is yet another</span> <span data-start="278.62" data-end="280.51">complication for your build process and</span> <span data-start="280.51" data-end="282.28">we have literally duplicated the number</span> <span data-start="282.28" data-end="283.69">of function calls that you're doing so</span> <span data-start="283.69" data-end="285.79">we've taken something that was probably</span> <span data-start="285.79" data-end="287.56">reasonably perform it and we've made it</span> <span data-start="287.56" data-end="288.94">while performance isn't really an issue</span> <span data-start="288.94" data-end="290.5">in node ever so that's not right you</span> <span data-start="290.5" data-end="292.63">like by Morgan Peter's right its web</span> <span data-start="292.63" data-end="295.12">scale yeah it's not horizontally no</span> <span data-start="295.12" data-end="301.15">problem two desktops you're set oh yeah</span> <span data-start="301.15" data-end="303.25">there's also this other problem which is</span> <span data-start="303.25" data-end="305.35">that you know you might end up breaking</span> <span data-start="305.35" data-end="307.66">everybody else's code and so either you</span> <span data-start="307.66" data-end="309.31">have to like maintain your own Fork of</span> <span data-start="309.31" data-end="311.35">the stuff that has your like preciously</span> <span data-start="311.35" data-end="313.95">built arc is newly created like</span> <span data-start="313.95" data-end="317.02">transformed version but or you might</span> <span data-start="317.02" data-end="318.46">want to lose through some sort of</span> <span data-start="318.46" data-end="320.38">dynamic process where it goes and it</span> <span data-start="320.38" data-end="321.55">monkey patches your code at runtime</span> </p>
<p><span data-start="321.55" data-end="323.02">Bryce wouldn't know anything about that</span> <span data-start="323.02" data-end="325.75">and like there's nothing that can go</span> <span data-start="325.75" data-end="327.43">wrong with that and there are no like</span> <span data-start="327.43" data-end="329.53">performance implications that always on</span> <span data-start="329.53" data-end="331.3">the forest you didn't it okay what will</span> </p>
<p><span data-start="331.3" data-end="333.31">I said you're selling them on it this is</span> <span data-start="333.31" data-end="335.26">yeah yeah this is great okay everyone</span> <span data-start="335.26" data-end="338.77">looks convinced okay so like a better</span> <span data-start="338.77" data-end="340.99">solution maybe would be just to do this</span> <span data-start="340.99" data-end="343.21">like window dot alert equals console dot</span> <span data-start="343.21" data-end="344.68">log fine call this is monkey patching</span> <span data-start="344.68" data-end="348.07">classic here right so done deal like no</span> <span data-start="348.07" data-end="350.8">more alerts in your app and kind of as</span> <span data-start="350.8" data-end="353.2">an added bonus monkey patching is really</span> <span data-start="353.2" data-end="355.57">funny and just like imagine the look on</span> <span data-start="355.57" data-end="357.37">the next person who has to maintain this</span> <span data-start="357.37" data-end="360.16">code space when they see what you did</span> <span data-start="360.16" data-end="362.05">yeah that's the thing about monkey</span> <span data-start="362.05" data-end="363.729">patching right it makes people kind of</span> <span data-start="363.729" data-end="366.04">mad and that's kind of awesome so like</span> <span data-start="366.04" data-end="367.69">that's a good reason to use it right</span> <span data-start="367.69" data-end="371.65">there all right cool so that's great but</span> <span data-start="371.65" data-end="374.11">what if we add some cool jQuery widget</span> <span data-start="374.11" data-end="376">onto our page that for some reason needs</span> <span data-start="376" data-end="379">window dot alert for god knows why he</span> <span data-start="379" data-end="380.77">used it to block maybe I don't know it's</span> <span data-start="380.77" data-end="385.96">a control flow techniques right so we we</span> <span data-start="385.96" data-end="387.85">want to maybe just monkey patch a</span> <span data-start="387.85" data-end="389.26">specific part of our app so some</span> <span data-start="389.26" data-end="391.71">specific context so what you might do is</span> <span data-start="391.71" data-end="393.76">grab a reference to endure that alert</span> <span data-start="393.76" data-end="395.74">replace it with console that log do your</span> <span data-start="395.74" data-end="396.5">thing and</span> <span data-start="396.5" data-end="400.39">and on replace it right yeah so that's</span> <span data-start="400.39" data-end="403.22">cool and maybe you want to write a cool</span> <span data-start="403.22" data-end="404.78">helper like this because we're</span> <span data-start="404.78" data-end="407.69">functional programmers and take the</span> <span data-start="407.69" data-end="409.46">function returns a function yeah so this</span> <span data-start="409.46" data-end="411.02">is another kind of classic monkey</span> <span data-start="411.02" data-end="413.24">patching thing that you might do like</span> <span data-start="413.24" data-end="414.65">function not apply and functional</span> <span data-start="414.65" data-end="417.32">collaery best friends and you can just</span> <span data-start="417.32" data-end="418.58">kind of sneak additional behavior in</span> <span data-start="418.58" data-end="422">there yeah that's great there's nothing</span> <span data-start="422" data-end="425.72">wrong about oh god async behavior so you</span> <span data-start="425.72" data-end="428.33">run this code here and it's going to</span> <span data-start="428.33" data-end="430.28">totally run without your monkey patching</span> <span data-start="430.28" data-end="432.97">because you did something asynchronous</span> <span data-start="432.97" data-end="435.2">right if only there was some way to fix</span> <span data-start="435.2" data-end="439.19">this behavior oh but wait there is you</span> <span data-start="439.19" data-end="440.84">just among needs a monkey patch that</span> <span data-start="440.84" data-end="444.53">timeout problem solved see you got the</span> <span data-start="444.53" data-end="446.69">same we basically do the same thing we</span> <span data-start="446.69" data-end="448.13">did before only we apply this to</span> <span data-start="448.13" data-end="450.86">window.settimeout now so now you've got</span> <span data-start="450.86" data-end="452.75">your patch run your original function</span> <span data-start="452.75" data-end="455.66">and then unpatch it sweet right also no</span> <span data-start="455.66" data-end="457.1">only done note the use of the comma</span> <span data-start="457.1" data-end="458.54">operator in this code sample that's</span> <span data-start="458.54" data-end="462.65">because I wrote this slide okay but what</span> <span data-start="462.65" data-end="464.57">about set interval like our app doesn't</span> <span data-start="464.57" data-end="467.12">do just that one async thing sure monkey</span> <span data-start="467.12" data-end="469.49">patch that interval keep going all right</span> <span data-start="469.49" data-end="471.74">cool but like there are other AP eyes to</span> <span data-start="471.74" data-end="474.59">what about those monkey patch everything</span> <span data-start="474.59" data-end="476.71">just monkey patch the entire universe</span> <span data-start="476.71" data-end="480.86">really is that okay yeah that's totally</span> <span data-start="480.86" data-end="487.07">okay ok cool so actually this is what</span> <span data-start="487.07" data-end="488.66">for us and I have each independently</span> <span data-start="488.66" data-end="490.28">done in different contexts I wrote this</span> <span data-start="490.28" data-end="492.35">thing called zone jas which gives you an</span> </p>
<p><span data-start="492.35" data-end="494.27">API that looks like this that says</span> <span data-start="494.27" data-end="496.58">monkey patch everything all the time and</span> <span data-start="496.58" data-end="498.86">unlucky patch it outside of this context</span> <span data-start="498.86" data-end="501.89">so you could accomplish the same as we</span> <span data-start="501.89" data-end="503.63">were showing in the previous slides with</span> <span data-start="503.63" data-end="504.74">a little code snippet that looks like</span> <span data-start="504.74" data-end="506.87">this and you didn't even have to monkey</span> <span data-start="506.87" data-end="508.94">patch literally every single a sync API</span> <span data-start="508.94" data-end="511.4">in the browser so that's a little bit</span> <span data-start="511.4" data-end="512.39">less work than it would have been</span> <span data-start="512.39" data-end="516.05">otherwise so I've spent a lot of time</span> <span data-start="516.05" data-end="518.63">talking about continuation local storage</span> <span data-start="518.63" data-end="520.58">for the last year or so and I've also</span> <span data-start="520.58" data-end="521.87">spent a decent amount of time talking</span> <span data-start="521.87" data-end="523.46">about a sink listener which is what</span> <span data-start="523.46" data-end="525.83">happens under the hood the cool thing</span> <span data-start="525.83" data-end="527.99">about this is i talked about how great</span> <span data-start="527.99" data-end="529.45">these things are and</span> <span data-start="529.45" data-end="531.64">nobody ever really digs deeply enough to</span> <span data-start="531.64" data-end="533.8">see and how incredibly grotesque it all</span> <span data-start="533.8" data-end="537.1">is under the hood yep this is this is a</span> <span data-start="537.1" data-end="539.56">good test part yes all that stuff's</span> <span data-start="539.56" data-end="540.73">already happened by the time you get</span> <span data-start="540.73" data-end="542.8">here and you could have set that session</span> <span data-start="542.8" data-end="545.56">anywhere and it scoped this particular</span> <span data-start="545.56" data-end="547.3">continuation change so for each</span> <span data-start="547.3" data-end="549.61">individual requests that you have coming</span> <span data-start="549.61" data-end="551.65">in we'd added this behavior the</span> <span data-start="551.65" data-end="553.75">interesting thing about this is that the</span> <span data-start="553.75" data-end="555.88">consequences are not nearly as dire as</span> <span data-start="555.88" data-end="558.34">you might think they are like depending</span> <span data-start="558.34" data-end="561.19">on what's going on you may see about 0.5</span> <span data-start="561.19" data-end="564.22">percent to about well okay like in</span> <span data-start="564.22" data-end="565.72">pathological conditions it's like</span> <span data-start="565.72" data-end="568.12">ninety-five percent overhead and like</span> <span data-start="568.12" data-end="571.84">the memory overhead is like 18 times as</span> <span data-start="571.84" data-end="572.95">much and that's all gross but that</span> <span data-start="572.95" data-end="574.06">actually doesn't happen because that's</span> <span data-start="574.06" data-end="575.92">not in code that people actually right</span> <span data-start="575.92" data-end="578.26">that's purely micro benchmark code so</span> <span data-start="578.26" data-end="579.97">that's your pathological case so you get</span> <span data-start="579.97" data-end="582.22">all this interesting async behavior that</span> <span data-start="582.22" data-end="584.23">is done by basically overriding</span> <span data-start="584.23" data-end="586.69">literally every acing function in note</span> <span data-start="586.69" data-end="588.97">right and you only have to buy 18 more</span> <span data-start="588.97" data-end="591.31">computers to do it yeah and to the best</span> <span data-start="591.31" data-end="592.75">of my knowledge this I'll just work</span> <span data-start="592.75" data-end="597.19">in I ojs as well so that's great that's</span> <span data-start="597.19" data-end="600.28">cool okay so you know yeah so this is</span> <span data-start="600.28" data-end="602.2">the key this is the Cardinal law this</span> <span data-start="602.2" data-end="604.33">stuff is super fun everybody should do</span> <span data-start="604.33" data-end="606.22">it in all of your libraries from out on</span> <span data-start="606.22" data-end="608.71">its aaron here wait he's around here</span> <span data-start="608.71" data-end="610.54">somewhere yeah you should totally get</span> <span data-start="610.54" data-end="612.34">more of this into happy going for it you</span> <span data-start="612.34" data-end="613.81">can totally solve all your domains</span> <span data-start="613.81" data-end="615.61">problems just by monkey patching the</span> <span data-start="615.61" data-end="619.21">out everything but don't break</span> <span data-start="619.21" data-end="621.46">out everything but don't break things for other people and the thing</span> <span data-start="621.46" data-end="623.89">about this is that i have done this</span> <span data-start="623.89" data-end="626.17">there are literally thousands of</span> <span data-start="626.17" data-end="628.57">production sites running an entirely</span> <span data-start="628.57" data-end="630.16">monkey patched environment because</span> <span data-start="630.16" data-end="631.63">that's how the New Relic monitoring</span> <span data-start="631.63" data-end="635.65">agent works but you and almost nothing</span> <span data-start="635.65" data-end="637.39">has gone wrong but when it has gone</span> <span data-start="637.39" data-end="639.25">wrong it has been bad because somebody</span> <span data-start="639.25" data-end="640.72">else has monkey patched something that I</span> <span data-start="640.72" data-end="643.15">need the monkey patch in an incompatible</span> <span data-start="643.15" data-end="644.92">way and everything blows up and you</span> <span data-start="644.92" data-end="646.21">can't use those things together and</span> <span data-start="646.21" data-end="648.28">everybody is sad and it's just you know</span> <span data-start="648.28" data-end="649.96">do I great for a sad is the short</span> <span data-start="649.96" data-end="652.15">version no don't that's that's that's</span> <span data-start="652.15" data-end="655.39">bad okay so here's kind of a rundown</span> <span data-start="655.39" data-end="657.19">yeah a little bit of this earlier but</span> <span data-start="657.19" data-end="659.08">you should probably call the original</span> <span data-start="659.08" data-end="660.88">function that's important because if</span> <span data-start="660.88" data-end="662.95">some other monkey patch person</span> <span data-start="662.95" data-end="664.51">in there and must render the internals</span> <span data-start="664.51" data-end="667">of your environment you want to be able</span> <span data-start="667" data-end="668.35">to apply their behavior as well</span> <span data-start="668.35" data-end="669.7">otherwise you might not clean things up</span> <span data-start="669.7" data-end="671.71">correctly you should keep the original</span> <span data-start="671.71" data-end="674.02">context so the value of this you want it</span> <span data-start="674.02" data-end="675.34">to be the same as if someone called the</span> <span data-start="675.34" data-end="677.92">original function you should pass in all</span> <span data-start="677.92" data-end="680.02">the arguments not just you know whatever</span> <span data-start="680.02" data-end="682.42">the function signature looks like very</span> <span data-start="682.42" data-end="684.07">important bunch of signatures change</span> <span data-start="684.07" data-end="685.93">yeah you can't rely on anything</span> </p>
<p><span data-start="685.93" data-end="688.18">JavaScript that's a feature and</span> <span data-start="688.18" data-end="689.95">especially because certain platforms</span> <span data-start="689.95" data-end="692.62">like issuing new major versions about</span> <span data-start="692.62" data-end="695.62">once every I don't knows how many how</span> <span data-start="695.62" data-end="698.65">long that's responsible like seven to</span> <span data-start="698.65" data-end="701.74">ten hours day is that do we know anyone</span> <span data-start="701.74" data-end="704.32">that works there and maybe I don't know</span> <span data-start="704.32" data-end="706.99">okay so yeah and then you should return</span> <span data-start="706.99" data-end="708.49">something that looks like the original</span> <span data-start="708.49" data-end="711.22">return value you should prefer modifying</span> <span data-start="711.22" data-end="712.9">the return value to like making a</span> <span data-start="712.9" data-end="714.49">totally new object because again some</span> <span data-start="714.49" data-end="715.75">crazy person might have gone in there</span> <span data-start="715.75" data-end="718.69">and magic properties but the kind of</span> <span data-start="718.69" data-end="721.6">like brain about all this stuff is</span> <span data-start="721.6" data-end="723.1">that when you are monkey patching things</span> <span data-start="723.1" data-end="724.6">you should be assuming that everybody</span> <span data-start="724.6" data-end="726.55">else's monkey patching things at the</span> <span data-start="726.55" data-end="729.22">same time it's like it's the whole the</span> </p>
<p><span data-start="729.22" data-end="732.61">Hippocratic oath first do no harm we all</span> <span data-start="732.61" data-end="733.93">said something in there about like</span> <span data-start="733.93" data-end="736.6">Smokey Bear and oh the doubts earlier</span> <span data-start="736.6" data-end="738.94">about yeah better than yeah that was any</span> <span data-start="738.94" data-end="740.62">whatever was anyone a Cub Scout like</span> <span data-start="740.62" data-end="742.06">isn't there a thing where like you know</span> <span data-start="742.06" data-end="743.35">you're supposed to clean up afterwards</span> <span data-start="743.35" data-end="745.09">and they have a nice concise saying yeah</span> <span data-start="745.09" data-end="746.56">all i can remembers will be loyal scouts</span> <span data-start="746.56" data-end="749.05">yeah and then don't start forest fires</span> <span data-start="749.05" data-end="750.97">yeah i thought that was thought good to</span> <span data-start="750.97" data-end="752.77">you I like always be prepared but I</span> <span data-start="752.77" data-end="754.06">think that's the communist youth</span> <span data-start="754.06" data-end="756.64">tomorrow so whatever okay and the last</span> <span data-start="756.64" data-end="758.88">thing is you should test your code</span> <span data-start="758.88" data-end="761.86">because like that's a good way to deal</span> <span data-start="761.86" data-end="762.91">with hater so when people look at your</span> <span data-start="762.91" data-end="763.93">crazy thing and they're like there's no</span> <span data-start="763.93" data-end="765.52">way this will work you'd be like boy</span> <span data-start="765.52" data-end="767.26">have I got a surprise for you and you</span> <span data-start="767.26" data-end="769.33">show them your test cases and they're</span> <span data-start="769.33" data-end="771.55">all green and they're like well you know</span> <span data-start="771.55" data-end="773.91">you wrote crappy code but it works and</span> <span data-start="773.91" data-end="777.01">you should try and run your tests or</span> <span data-start="777.01" data-end="779.4">your your patch your monkey patch code</span> <span data-start="779.4" data-end="782.41">against lots of other people's code and</span> <span data-start="782.41" data-end="785.02">so I actually built something called the</span> <span data-start="785.02" data-end="786.7">intermediately sized Hadron Collider</span> <span data-start="786.7" data-end="789.07">that automatically does this for you so</span> <span data-start="789.07" data-end="790.96">the Large Hadron Collider is a particle</span> <span data-start="790.96" data-end="792.55">accelerator I'm not smart enough to make</span> <span data-start="792.55" data-end="794.62">that so I took the lesson dishes route</span> <span data-start="794.62" data-end="796.259">which is right a testing tool</span> <span data-start="796.259" data-end="798.959">but with what this does is like you give</span> <span data-start="798.959" data-end="801.119">it some patch and it'll run it against</span> <span data-start="801.119" data-end="803.549">like really commonly use libraries and</span> <span data-start="803.549" data-end="805.079">make sure that their test cases pass</span> <span data-start="805.079" data-end="807.809">even in a monkey patch environment so</span> <span data-start="807.809" data-end="809.339">you can have some level of confidence</span> <span data-start="809.339" data-end="811.499">that this works so it's kind of like a</span> <span data-start="811.499" data-end="814.109">like poor man's integration test from</span> <span data-start="814.109" data-end="815.939">reading monkey patch code so you can</span> <span data-start="815.939" data-end="819.929">check it out it's on github so kind of</span> <span data-start="819.929" data-end="821.459">in summary like right terrible code</span> <span data-start="821.459" data-end="823.649">prove that it works like laughs in the</span> <span data-start="823.649" data-end="828.159">face of your haters it's pretty good oh</span> <span data-start="828.169" data-end="831.199">and then yeah we have a slide on this</span> <span data-start="831.199" data-end="835.499">right for us this is your forte yeah you</span> <span data-start="835.499" data-end="839.279">know yeah welcome I'm not gonna dance</span> <span data-start="839.279" data-end="841.559">for you guys I'm really sorry it's not</span> <span data-start="841.559" data-end="844.41">really my thing but there's actually</span> <span data-start="844.41" data-end="845.939">actually I think we need to move on to</span> <span data-start="845.939" data-end="848.339">the next slide okay well i can say some</span> <span data-start="848.339" data-end="850.229">abstract philosophical things okay right</span> <span data-start="850.229" data-end="851.519">so like usually when you want to make</span> <span data-start="851.519" data-end="852.839">new behavior the way that you do it is</span> <span data-start="852.839" data-end="854.879">you like extend some existing class or</span> <span data-start="854.879" data-end="857.699">like write a new API but the cool thing</span> <span data-start="857.699" data-end="858.869">about this is that you don't have to</span> <span data-start="858.869" data-end="861.149">touch any of the existing code like you</span> <span data-start="861.149" data-end="862.47">can just introduce new behavior all over</span> <span data-start="862.47" data-end="864.449">the place and that's kind of powerful</span> <span data-start="864.449" data-end="867.839">like you see for instance polyfills or</span> <span data-start="867.839" data-end="870.269">even prolly fills how many people here</span> <span data-start="870.269" data-end="872.669">know what a prolly filler is okay all</span> <span data-start="872.669" data-end="875.189">right okay yeah so ask your neighbor or</span> <span data-start="875.189" data-end="876.359">just listen to me because I'm gonna</span> <span data-start="876.359" data-end="879.569">explain right now the idea is like when</span> <span data-start="879.569" data-end="881.369">when you're trying to come up with a new</span> <span data-start="881.369" data-end="883.529">feature for JavaScript or for the</span> <span data-start="883.529" data-end="885.869">browser like you try and implement it in</span> </p>
<p><span data-start="885.869" data-end="887.85">JavaScript inside of the current</span> <span data-start="887.85" data-end="890.129">environment and then you can use this as</span> <span data-start="890.129" data-end="891.989">a way to try and you know figure out if</span> <span data-start="891.989" data-end="894.839">the API is good or not so there are lots</span> <span data-start="894.839" data-end="896.16">of examples of this and actually can</span> <span data-start="896.16" data-end="898.47">kind of think of zones or continuation</span> <span data-start="898.47" data-end="901.22">local storage is probably fills yeah the</span> <span data-start="901.22" data-end="903.179">kind of go back to what I was saying at</span> <span data-start="903.179" data-end="905.579">the beginning of the talk the cool thing</span> <span data-start="905.579" data-end="908.039">is you can extend the properties of your</span> <span data-start="908.039" data-end="911.339">platform for all the people using it</span> <span data-start="911.339" data-end="913.139">without actually forcing them to write</span> <span data-start="913.139" data-end="914.609">any additional code that's the real</span> <span data-start="914.609" data-end="917.519">power of monkey patching is that you can</span> <span data-start="917.519" data-end="919.439">add new capabilities remove existing</span> <span data-start="919.439" data-end="924.179">capabilities alter all kinds of crazy</span> <span data-start="924.179" data-end="926.159">stuff for a particular runtime</span> <span data-start="926.159" data-end="928.289">environment without requiring people to</span> <span data-start="928.289" data-end="930.12">actually opt into your API sore</span> <span data-start="930.12" data-end="932.22">even necessarily to learn anything like</span> <span data-start="932.22" data-end="934.5">the you know an example is that with the</span> <span data-start="934.5" data-end="936.45">new relic agent you just require this</span> <span data-start="936.45" data-end="937.95">thing you don't even need to assign that</span> <span data-start="937.95" data-end="940.2">to a variable and all of a sudden you've</span> <span data-start="940.2" data-end="941.58">got performance metrics coming out of</span> <span data-start="941.58" data-end="944.25">your appt you know in with in the case</span> <span data-start="944.25" data-end="946.23">of zones it's used by angular to handle</span> <span data-start="946.23" data-end="948.029">a lot of their their kind of magical</span> <span data-start="948.029" data-end="949.62">scoping and data binding behavior</span> <span data-start="949.62" data-end="951.54">someday someday it'll do that right now</span> <span data-start="951.54" data-end="954.15">it just sits up on github sweet someday</span> <span data-start="954.15" data-end="956.76">yeah wait there's one other cool thing I</span> <span data-start="956.76" data-end="959.76">was going to say what was it okay we're</span> <span data-start="959.76" data-end="962.07">going on the next time we rehearse this</span> <span data-start="962.07" data-end="964.71">a lot yeah well I mean we did yeah this</span> <span data-start="964.71" data-end="966.39">is kind of like that time one of my</span> <span data-start="966.39" data-end="969.66">favorite people in computers said time</span> <span data-start="969.66" data-end="973.89">monkey patches all things yes really I</span> <span data-start="973.89" data-end="976.38">don't know what that means yeah but</span> <span data-start="976.38" data-end="978.24">really we're all changing like we're all</span> <span data-start="978.24" data-end="979.95">interacting with each other as time</span> <span data-start="979.95" data-end="982.89">passes and we're all changing aspects of</span> <span data-start="982.89" data-end="985.11">each other as time passes in this this</span> <span data-start="985.11" data-end="987.21">very mysterious and hard to observe way</span> <span data-start="987.21" data-end="989.43">so really over time we're all being</span> <span data-start="989.43" data-end="995.07">monkey patched by each other right that</span> <span data-start="995.07" data-end="997.8">was really good thanks I want to point</span> <span data-start="997.8" data-end="1000.529">out by absolute favorite thing about no</span> <span data-start="1000.529" data-end="1002.36">continuation local storage is its name</span> <span data-start="1002.36" data-end="1004.7">because its name is super concise and</span> <span data-start="1004.7" data-end="1006.38">easy to type every time I need to</span> <span data-start="1006.38" data-end="1008.18">install it yeah that's so the name of</span> <span data-start="1008.18" data-end="1009.83">this module is actually the inspiration</span> <span data-start="1009.83" data-end="1011.93">for the length of the name of the thing</span> <span data-start="1011.93" data-end="1013.52">that I talked about earlier then</span> <span data-start="1013.52" data-end="1015.56">immediately sized Hadron Collider see I</span> <span data-start="1015.56" data-end="1018.47">it's descriptive it doesn't necessarily</span> <span data-start="1018.47" data-end="1022.27">tell you what it does but it's long</span> <span data-start="1022.27" data-end="1025.5">right okay so</span> <span data-start="1025.5" data-end="1028.78">there's also some cool things on github</span> <span data-start="1028.78" data-end="1031">that show how you can use monkey</span> <span data-start="1031" data-end="1034.209">patching to crazyville things or crazy</span> <span data-start="1034.209" data-end="1040.839">good things yep and yeah good luck have</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
