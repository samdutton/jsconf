<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="JSConf transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ZMZMMuXRFcE</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/ZMZMMuXRFcE?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="0" data-end="16.84">[Music]</span> <span data-start="16.85" data-end="18.21">selamat pagi</span> <span data-start="18.21" data-end="23.85">anyhow hello today I would like to talk</span> <span data-start="23.85" data-end="26.91">to you about web components and an</span> <span data-start="26.91" data-end="29.789">experimental JavaScript API called the</span> <span data-start="29.789" data-end="34.32">accessibility object model or a om when</span> <span data-start="34.32" data-end="36.149">we load some HTML into the browser</span> <span data-start="36.149" data-end="38.61">several things happen more or less at</span> <span data-start="38.61" data-end="41.55">the same time the HTML gets translated</span> <span data-start="41.55" data-end="44.43">into the Dom tree it also gets</span> <span data-start="44.43" data-end="46.68">translated into the accessibility tree</span> <span data-start="46.68" data-end="49.86">and finally it gets translated into the</span> <span data-start="49.86" data-end="52.17">user interface the part that we can see</span> <span data-start="52.17" data-end="55.739">and we can interact with so if we take a</span> <span data-start="55.739" data-end="58.41">button element our HTML is very very</span> <span data-start="58.41" data-end="60.3">simple just open and close the button</span> <span data-start="60.3" data-end="62.309">elements with some text content in the</span> <span data-start="62.309" data-end="65.339">middle our Dom looks exactly the same we</span> <span data-start="65.339" data-end="67.229">see that element is a node in the Dom</span> <span data-start="67.229" data-end="69.229">tree and the text leaf in the middle</span> <span data-start="69.229" data-end="71.46">when we look at the accessibility tree</span> <span data-start="71.46" data-end="73.77">we get more information about this node</span> <span data-start="73.77" data-end="75.84">and the node in the accessibility tree</span> <span data-start="75.84" data-end="77.52">for this button element says that it has</span> <span data-start="77.52" data-end="80.28">a role of button but its accessible name</span> <span data-start="80.28" data-end="82.439">is play that's the text inside the</span> <span data-start="82.439" data-end="84.42">button element and that it's state is</span> <span data-start="84.42" data-end="86.85">focusable so if you use a keyboard and</span> <span data-start="86.85" data-end="89.159">not a mouse or trackpad you can use the</span> <span data-start="89.159" data-end="91.079">tab key to focus on the button and</span> <span data-start="91.079" data-end="94.799">interact with it our UI then presents a</span> <span data-start="94.799" data-end="96.75">button on the screen that we can click</span> <span data-start="96.75" data-end="98.549">or interact with with a keyboard or</span> <span data-start="98.549" data-end="101.4">touchpad and with a bit of styling it</span> <span data-start="101.4" data-end="104.299">looks hopefully reasonably presentable</span> <span data-start="104.299" data-end="107.04">so if we were to try and create a button</span> <span data-start="107.04" data-end="109.649">elements using a web component there are</span> <span data-start="109.649" data-end="111.509">a couple of ways we could do this we</span> <span data-start="111.509" data-end="114.149">could use a customized custom element</span> <span data-start="114.149" data-end="117.18">this takes the HTML button element and</span> <span data-start="117.18" data-end="119.549">extends it so it means that when we set</span> <span data-start="119.549" data-end="121.649">up our web component our constructor is</span> <span data-start="121.649" data-end="123.54">really simple we just call super because</span> <span data-start="123.54" data-end="125.82">that's good practice in web components</span> <span data-start="125.82" data-end="127.829">and we don't need to do anything else</span> <span data-start="127.829" data-end="129.599">apart from give our custom element a</span> <span data-start="129.599" data-end="132.66">name in this case custom dash button if</span> <span data-start="132.66" data-end="133.62">you're not familiar we</span> <span data-start="133.62" data-end="135.69">web components and custom elements they</span> <span data-start="135.69" data-end="137.79">must always have a dash in their name</span> <span data-start="137.79" data-end="139.319">and this is just to help the browser</span> <span data-start="139.319" data-end="142.68">separate a native HTML element from the</span> </p>
<p><span data-start="142.68" data-end="145.409">HTML spec from one that we've created as</span> <span data-start="145.409" data-end="147.03">developers through the custom elements</span> <span data-start="147.03" data-end="150.239">API our connected callback is also</span> <span data-start="150.239" data-end="152.01">really simple we don't need to do very</span> <span data-start="152.01" data-end="153.989">much at all we just need to add some</span> <span data-start="153.989" data-end="157.11">click functionality to make button work</span> <span data-start="157.11" data-end="160.019">and that's pretty much all there is to</span> <span data-start="160.019" data-end="163.379">it our HTML however looks a little bit</span> <span data-start="163.379" data-end="165.959">ugly we use the button elements as we</span> <span data-start="165.959" data-end="168.66">would in standard HTML but we add the is</span> <span data-start="168.66" data-end="171.5">attribute to it so we say button is</span> <span data-start="171.5" data-end="174.84">custom button so our HTML has already</span> <span data-start="174.84" data-end="177.269">grown another attribute which is not too</span> <span data-start="177.269" data-end="180">terrible but it's not as clean in code</span> <span data-start="180" data-end="183.39">terms as we might like it to be Dom</span> <span data-start="183.39" data-end="185.129">looks pretty much exactly the same</span> <span data-start="185.129" data-end="187.23">nothing much changes in that translation</span> <span data-start="187.23" data-end="190.59">and accessibility tree also looks pretty</span> <span data-start="190.59" data-end="192.78">much the same it still says it's the</span> <span data-start="192.78" data-end="194.579">thing with a roll of button the text is</span> <span data-start="194.579" data-end="196.379">still its accessible name and it's still</span> <span data-start="196.379" data-end="198.72">focusable so effectively what we've done</span> <span data-start="198.72" data-end="201.389">is just recreate the button element as a</span> <span data-start="201.389" data-end="204.69">custom element and we can see this work</span> <span data-start="204.69" data-end="206.459">pretty much like you'd expect a button</span> <span data-start="206.459" data-end="208.53">to work only this time we'll hear a</span> <span data-start="208.53" data-end="211.4">screen reader announce the button to</span> <span data-start="211.4" data-end="214.799">play button and the screen reader picks</span> <span data-start="214.799" data-end="216.419">up that information from the</span> <span data-start="216.419" data-end="218.459">accessibility tree it recognizes the</span> <span data-start="218.459" data-end="220.919">accessible name play and it recognizes</span> <span data-start="220.919" data-end="222.87">it that it's a button and tells the user</span> <span data-start="222.87" data-end="225.75">that information there's a problem</span> <span data-start="225.75" data-end="228.06">though apart from the fact that the HTML</span> <span data-start="228.06" data-end="230.01">looks a little bit less clean than we</span> <span data-start="230.01" data-end="232.919">want it to be customized custom elements</span> <span data-start="232.919" data-end="234.389">are not particularly well supported</span> <span data-start="234.389" data-end="237.12">they're not supported in WebKit Apple is</span> <span data-start="237.12" data-end="240.12">pretty firmly opposed to introducing</span> <span data-start="240.12" data-end="242.31">support for customized custom elements</span> <span data-start="242.31" data-end="244.919">so we might have to turn our attention</span> <span data-start="244.919" data-end="247.98">to autonomous custom elements now an</span> <span data-start="247.98" data-end="250.379">autonomous custom element doesn't extend</span> <span data-start="250.379" data-end="252.51">an existing HTML element so we can't</span> <span data-start="252.51" data-end="254.579">inherit all the good behavior from say</span> <span data-start="254.579" data-end="256.169">button that we just did with the</span> <span data-start="256.169" data-end="258.75">customized element instead we have to</span> <span data-start="258.75" data-end="260.549">start pretty much from scratch and that</span> <span data-start="260.549" data-end="262.079">means we've got to do all the work that</span> <span data-start="262.079" data-end="264.479">the browser does for us normally for</span> <span data-start="264.479" data-end="265.2">ourselves</span> <span data-start="265.2" data-end="267.6">so in constructor</span> <span data-start="267.6" data-end="270.15">need to set things up a little bit</span> <span data-start="270.15" data-end="271.86">differently you'll notice that the the</span> <span data-start="271.86" data-end="274.17">definition is slightly different this</span> <span data-start="274.17" data-end="275.76">time I'm going to create a toggle button</span> <span data-start="275.76" data-end="277.65">as well you may have noticed from the</span> <span data-start="277.65" data-end="279.72">video we just played that that button</span> <span data-start="279.72" data-end="282.06">looked different when it was pressed but</span> <span data-start="282.06" data-end="283.44">the screen reader didn't pick up on that</span> <span data-start="283.44" data-end="285.57">information so we're gonna set about</span> <span data-start="285.57" data-end="287.49">creating that toggle button so the</span> <span data-start="287.49" data-end="289.71">definition has changed to be a toggle -</span> <span data-start="289.71" data-end="292.08">button this time and if we look at the</span> <span data-start="292.08" data-end="293.64">connected callback there's an awful lot</span> <span data-start="293.64" data-end="296.73">more going on inside it we need to set</span> <span data-start="296.73" data-end="299.52">the role just using setattribute so</span> <span data-start="299.52" data-end="300.81">that's the bit that fills in the</span> <span data-start="300.81" data-end="302.91">accessibility role we need to set</span> <span data-start="302.91" data-end="304.89">tabindex to zero that's the bit that</span> <span data-start="304.89" data-end="306.72">will make our custom element focusable</span> <span data-start="306.72" data-end="309.81">with the keyboard and we add in an aria</span> <span data-start="309.81" data-end="311.97">attribute aria-pressed and we set it</span> <span data-start="311.97" data-end="314.82">initially to false this is the attribute</span> <span data-start="314.82" data-end="317.19">that will tell screen readers and inform</span> <span data-start="317.19" data-end="319.14">the accessibility tree that this is a</span> <span data-start="319.14" data-end="320.88">different kind of button it's one that</span> <span data-start="320.88" data-end="323.37">can be turned on or off and we'll see</span> <span data-start="323.37" data-end="326.79">how that develops we have a function</span> <span data-start="326.79" data-end="331.68">into the click and keyboard event</span> <span data-start="331.68" data-end="333.54">handlers and we're just gonna switch the</span> <span data-start="333.54" data-end="335.64">status of the aria-pressed attribute</span> <span data-start="335.64" data-end="338.43">over so when someone uses the keyboard</span> <span data-start="338.43" data-end="340.2">or the mouse to interact with the button</span> <span data-start="340.2" data-end="342.87">will flip the value to true while it's</span> <span data-start="342.87" data-end="344.91">pressed and flip it back again to false</span> <span data-start="344.91" data-end="346.74">when it's not pressed and this will</span> <span data-start="346.74" data-end="348.06">change the accessibility state</span> <span data-start="348.06" data-end="351.33">information in the accessibility tree so</span> <span data-start="351.33" data-end="354">our HTML looks a lot more simple we just</span> <span data-start="354" data-end="356.43">open and close our toggle â€” button</span> <span data-start="356.43" data-end="358.11">elements and we still put the text on</span> <span data-start="358.11" data-end="361.26">the inside our Dom however it starts to</span> <span data-start="361.26" data-end="363.72">look a little bit messy we see all the</span> <span data-start="363.72" data-end="365.58">attributes we've just set inside the</span> <span data-start="365.58" data-end="367.29">custom elements that have indexed the</span> <span data-start="367.29" data-end="369.81">role the aria-pressed they actually leak</span> <span data-start="369.81" data-end="372.06">out from the custom element into the Dom</span> <span data-start="372.06" data-end="374.43">so unfortunately here things start to</span> <span data-start="374.43" data-end="377.31">get a bit more messy looking our</span> <span data-start="377.31" data-end="379.08">accessibility tree has also changed a</span> <span data-start="379.08" data-end="380.85">little bit the type of the button the</span> <span data-start="380.85" data-end="382.98">role of the button is now toggle button</span> <span data-start="382.98" data-end="384.96">in some browsers and some accessibility</span> </p>
<p><span data-start="384.96" data-end="387.72">API is it's known as a push button so</span> <span data-start="387.72" data-end="389.58">this is just a different type of button</span> <span data-start="389.58" data-end="391.68">everything else is pretty much the same</span> <span data-start="391.68" data-end="394.89">but the state now also has a recognition</span> <span data-start="394.89" data-end="396.24">of the fact that this button can be</span> <span data-start="396.24" data-end="399.21">pressed or not pressed so there is more</span> <span data-start="399.21" data-end="401.129">named States and roll</span> <span data-start="401.129" data-end="402.539">information available in the</span> <span data-start="402.539" data-end="405.509">accessibility tree in the browser when a</span> <span data-start="405.509" data-end="406.83">screen reader or another assistive</span> <span data-start="406.83" data-end="408.659">technology queries that information from</span> <span data-start="408.659" data-end="410.969">the browser the experience for the user</span> <span data-start="410.969" data-end="414.179">changes quite dramatically play toggle</span> <span data-start="414.179" data-end="418.849">button not pressed pressed not pressed</span> <span data-start="418.849" data-end="421.349">so we now have a custom element that is</span> <span data-start="421.349" data-end="422.819">a toggle button it has all the</span> <span data-start="422.819" data-end="424.649">accessibility characteristics that we</span> <span data-start="424.649" data-end="426.869">need to inform something like a screen</span> <span data-start="426.869" data-end="429.029">reader that it's a toggle button and the</span> <span data-start="429.029" data-end="430.979">user now gets to understand when that</span> <span data-start="430.979" data-end="433.08">button is pressed and when it's not so</span> <span data-start="433.08" data-end="435.449">the experience is a lot better for</span> <span data-start="435.449" data-end="437.459">someone who can't see the visual state</span> <span data-start="437.459" data-end="440.61">of the button changing here's where we</span> <span data-start="440.61" data-end="442.649">come to that experimental JavaScript API</span> </p>
<p><span data-start="442.649" data-end="446.219">I mentioned the AOM is still relatively</span> <span data-start="446.219" data-end="448.8">new it's being developed in the web</span> <span data-start="448.8" data-end="451.439">platform incubator community group ycg</span> <span data-start="451.439" data-end="454.829">at the w3c and it's being worked on by</span> <span data-start="454.829" data-end="458.639">people from Apple Mozilla and Google and</span> <span data-start="458.639" data-end="462.179">it's a JavaScript API that will let us</span> <span data-start="462.179" data-end="464.639">get involved in that relationship that I</span> <span data-start="464.639" data-end="466.529">mentioned in the very first slide that</span> <span data-start="466.529" data-end="468.569">until now has only happened within the</span> <span data-start="468.569" data-end="472.139">browser so up till now the accessibility</span> <span data-start="472.139" data-end="474.689">tree has only ever been created by the</span> <span data-start="474.689" data-end="476.789">browser and the only thing that has</span> <span data-start="476.789" data-end="479.099">access to that accessibility tree other</span> <span data-start="479.099" data-end="481.11">than the browser our assistive</span> <span data-start="481.11" data-end="483.539">technologies like screen readers for the</span> <span data-start="483.539" data-end="485.189">first time now as developers through the</span> </p>
<p><span data-start="485.189" data-end="488.099">AOM JavaScript API we're about to get</span> <span data-start="488.099" data-end="490.379">access to that tree ourselves and that</span> <span data-start="490.379" data-end="491.459">opens up a lot of different</span> <span data-start="491.459" data-end="494.219">possibilities and also a few challenges</span> <span data-start="494.219" data-end="495.479">and things that we're going to need to</span> <span data-start="495.479" data-end="499.079">be aware of phase one is going to</span> <span data-start="499.079" data-end="502.439">introduce Aria reflection it means we're</span> <span data-start="502.439" data-end="504.839">going to be able to set different roles</span> <span data-start="504.839" data-end="507.029">and attributes and have them reflected</span> <span data-start="507.029" data-end="509.099">back so it keeps things much simpler and</span> <span data-start="509.099" data-end="511.289">lets us use more familiar JavaScript</span> <span data-start="511.289" data-end="514.529">syntax so for reflecting the attributes</span> <span data-start="514.529" data-end="517.079">there are two interface mix-ins that</span> <span data-start="517.079" data-end="519.209">have actually been added not only to the</span> </p>
<p><span data-start="519.209" data-end="521.49">AOM specification but they will also be</span> <span data-start="521.49" data-end="523.68">added to one point two of the Aria</span> <span data-start="523.68" data-end="526.23">specification Aria is accessible rich</span> <span data-start="526.23" data-end="528.959">Internet applications and these two</span> <span data-start="528.959" data-end="530.61">interface mix-ins will let us reflect</span> <span data-start="530.61" data-end="534.46">back rolls and other Aria attributes</span> <span data-start="534.46" data-end="537.25">so if we rewrite our connected callback</span> <span data-start="537.25" data-end="539.35">for the toggle button we can see the</span> <span data-start="539.35" data-end="541.33">change in syntax instead of having to</span> <span data-start="541.33" data-end="544.6">use set attribute we can use element dot</span> <span data-start="544.6" data-end="547.06">roll equals button to set the the role</span> <span data-start="547.06" data-end="549.81">of the element we can use element dots</span> <span data-start="549.81" data-end="552.49">tabindex equals 0 and element</span> <span data-start="552.49" data-end="555.94">aria-pressed 'false notice though that</span> <span data-start="555.94" data-end="559.69">the way tabindex & aria-pressed written</span> <span data-start="559.69" data-end="562.24">has changed there's now a capital I on</span> <span data-start="562.24" data-end="563.92">the index of tabindex where there</span> <span data-start="563.92" data-end="566.02">wouldn't normally be and the dash has</span> <span data-start="566.02" data-end="567.7">gone from the Aria dashed pressed</span> <span data-start="567.7" data-end="569.77">attribute and instead it two uses</span> <span data-start="569.77" data-end="570.31">camelcase</span> <span data-start="570.31" data-end="573.22">so all of these Aria attributes have a</span> <span data-start="573.22" data-end="575.08">slightly different way of being written</span> <span data-start="575.08" data-end="577">but they achieve pretty much the same</span> <span data-start="577" data-end="578.589">thing we set all those properties and</span> <span data-start="578.589" data-end="580.87">characteristics exactly as we did in the</span> <span data-start="580.87" data-end="584.589">earlier example we can also or we will</span> <span data-start="584.589" data-end="587.2">be able to set element references now</span> <span data-start="587.2" data-end="589.12">this is where we get into the part that</span> <span data-start="589.12" data-end="590.709">is still so experimental it doesn't</span> <span data-start="590.709" data-end="592.24">actually exist in the browser's yet not</span> <span data-start="592.24" data-end="594.94">even behind the flag but what we'd be</span> <span data-start="594.94" data-end="596.77">able to do is where we have an element</span> <span data-start="596.77" data-end="599.2">sorry an attribute like Aria described</span> <span data-start="599.2" data-end="602.23">by which up till now you can use to</span> <span data-start="602.23" data-end="603.73">point to another piece of content on the</span> <span data-start="603.73" data-end="606.82">page using its ID value as the reference</span> <span data-start="606.82" data-end="608.95">point and it will associate that piece</span> <span data-start="608.95" data-end="611.35">of text with the first element so</span> <span data-start="611.35" data-end="614.14">typical example is you focus on a form</span> <span data-start="614.14" data-end="616.089">filled with a screen reader you'll here</span> <span data-start="616.089" data-end="617.65">the label of the form field announced</span> <span data-start="617.65" data-end="619.48">the type of the form field announced and</span> <span data-start="619.48" data-end="621.61">then you could use Aria described by to</span> <span data-start="621.61" data-end="623.83">associate an extra hint to help someone</span> <span data-start="623.83" data-end="625.87">fill out that information and the screen</span> <span data-start="625.87" data-end="627.37">reader would automatically read that out</span> <span data-start="627.37" data-end="631.23">to putting ID references on things is</span> <span data-start="631.23" data-end="633.49">often quite heavy weights you can have</span> <span data-start="633.49" data-end="636.07">hundreds sometimes thousands in a heavy</span> <span data-start="636.07" data-end="638.5">application of ID references on a page</span> <span data-start="638.5" data-end="640.81">but what will happen in the future is</span> <span data-start="640.81" data-end="642.61">that we'll be able to use just plain</span> </p>
<p><span data-start="642.61" data-end="645.37">JavaScript element references in our</span> <span data-start="645.37" data-end="647.14">code instead of having to use ID</span> <span data-start="647.14" data-end="649.69">references so for example we'll be able</span> <span data-start="649.69" data-end="652.149">to use Aria described by elements to</span> <span data-start="652.149" data-end="654.579">feed it one or more reference points for</span> <span data-start="654.579" data-end="656.77">the information we want to hook up in</span> <span data-start="656.77" data-end="659.41">the user interface but as I say this is</span> <span data-start="659.41" data-end="661.089">experimental yet we can't play around</span> <span data-start="661.089" data-end="663.61">with this feature if you're curious</span> <span data-start="663.61" data-end="665.98">there is a series of harness of web</span> <span data-start="665.98" data-end="667.93">platform tests available for</span> <span data-start="667.93" data-end="670.69">one a at the moment if you take a look</span> <span data-start="670.69" data-end="673.149">at it in Chrome or the new edge chromium</span> <span data-start="673.149" data-end="676.089">beta you'll find that about 65 out of</span> <span data-start="676.089" data-end="678.76">the 95 tests are currently passing so</span> <span data-start="678.76" data-end="680.92">that's all the attribute and role</span> <span data-start="680.92" data-end="682.87">reflections but none of the element</span> <span data-start="682.87" data-end="686.68">reflections Safari is doing really well</span> <span data-start="686.68" data-end="689.709">with about 79 interestingly WebKit</span> </p>
<p><span data-start="689.709" data-end="691.42">Safari has taken out from behind the</span> <span data-start="691.42" data-end="693.1">flag so this works actually at the</span> <span data-start="693.1" data-end="695.2">production level in Chrome it's still</span> <span data-start="695.2" data-end="697.08">behind the AOM accessibility flag</span> <span data-start="697.08" data-end="699.67">Firefox hasn't yet introduced any</span> <span data-start="699.67" data-end="701.62">support behind the flag or otherwise but</span> <span data-start="701.62" data-end="704.01">I'm pretty sure it will catch up soon so</span> <span data-start="704.01" data-end="706.75">hitting those tests in your browser is a</span> <span data-start="706.75" data-end="708.16">pretty good way to keep up to date with</span> <span data-start="708.16" data-end="710.32">how much of phase one is currently</span> <span data-start="710.32" data-end="713.92">available to play with phase one B</span> <span data-start="713.92" data-end="716.95">introduces custom element semantics now</span> <span data-start="716.95" data-end="718.54">the idea behind this phase is that we</span> <span data-start="718.54" data-end="720.25">can start to clean up some of that Dom</span> <span data-start="720.25" data-end="721.87">leakage that we saw with our toggle</span> <span data-start="721.87" data-end="724.42">button example we don't want all the</span> <span data-start="724.42" data-end="726.79">tabindex the role the Aria press to the</span> <span data-start="726.79" data-end="728.529">other attributes to leak out into the</span> </p>
<p><span data-start="728.529" data-end="730.149">Dom when we create a custom element we</span> <span data-start="730.149" data-end="731.339">want to keep the accessibility</span> <span data-start="731.339" data-end="734.44">encapsulated so this is the part of the</span> <span data-start="734.44" data-end="736.839">spec that will let us do that in two</span> <span data-start="736.839" data-end="738.64">different ways ultimately we'll be able</span> <span data-start="738.64" data-end="741.85">to set accessibility characteristics at</span> <span data-start="741.85" data-end="743.47">the time the custom element is created</span> <span data-start="743.47" data-end="746.4">and ones that can be adapted and changed</span> <span data-start="746.4" data-end="751.029">in the element internals so for example</span> <span data-start="751.029" data-end="752.98">we could change our code slightly so</span> <span data-start="752.98" data-end="755.62">that element definitions options include</span> <span data-start="755.62" data-end="757.029">things like setting the role and the</span> <span data-start="757.029" data-end="758.95">tabindex because we want those to be</span> <span data-start="758.95" data-end="761.14">established in the custom element the</span> <span data-start="761.14" data-end="763.57">moment it's created exactly as though we</span> <span data-start="763.57" data-end="765.16">were using a standard HTML button</span> <span data-start="765.16" data-end="768.37">element we can then do per instance</span> <span data-start="768.37" data-end="771.52">semantics using an internals variable we</span> <span data-start="771.52" data-end="773.97">can attach the internals in the</span> <span data-start="773.97" data-end="776.14">constructor for the custom element and</span> <span data-start="776.14" data-end="778.06">that lets us set things that will change</span> <span data-start="778.06" data-end="779.709">through the course of the custom</span> <span data-start="779.709" data-end="781.6">elements lifetime so aria-pressed will</span> <span data-start="781.6" data-end="783.94">change in response to user interactions</span> <span data-start="783.94" data-end="786.91">so we set that here instead of as an</span> <span data-start="786.91" data-end="789.55">immutable characteristic in the element</span> <span data-start="789.55" data-end="791.77">definition options but as I say</span> <span data-start="791.77" data-end="793.209">unfortunately at the moment we still</span> <span data-start="793.209" data-end="796.31">can't play with this just yet</span> <span data-start="796.31" data-end="799.13">phase two is all about user interactions</span> <span data-start="799.13" data-end="801.74">and events we're all really used to</span> <span data-start="801.74" data-end="804.98">events like click key down key press a</span> <span data-start="804.98" data-end="807.26">whole bunch of others but when you</span> <span data-start="807.26" data-end="809.27">introduce an assistive technology like a</span> <span data-start="809.27" data-end="811.22">screen reader into the equation things</span> <span data-start="811.22" data-end="813.67">get a little bit more complicated so</span> <span data-start="813.67" data-end="816.89">they are going to change the way that</span> <span data-start="816.89" data-end="819.77">events are synthesized and also</span> <span data-start="819.77" data-end="823.13">introduced some new events the reason</span> <span data-start="823.13" data-end="825.35">for the synthesis is to protect the</span> <span data-start="825.35" data-end="828.08">privacy of assistive technology users so</span> <span data-start="828.08" data-end="830.3">if they were just to create some</span> <span data-start="830.3" data-end="832.16">assistive technology events it would</span> <span data-start="832.16" data-end="835.01">very very easy to detect not only that</span> <span data-start="835.01" data-end="836.75">the user was using a particular</span> <span data-start="836.75" data-end="839.24">assistive technology but what type of</span> <span data-start="839.24" data-end="840.95">assistive technology they were using and</span> <span data-start="840.95" data-end="842.87">that of course would make it very easy</span> <span data-start="842.87" data-end="845.21">to determine that the person was blind</span> <span data-start="845.21" data-end="846.49">because they're using a screen reader</span> <span data-start="846.49" data-end="848.96">had mobility impairments because they're</span> <span data-start="848.96" data-end="850.82">using speech recognition and so</span> <span data-start="850.82" data-end="852.41">obviously it's important that we protect</span> <span data-start="852.41" data-end="855.17">that user privacy so what happens is</span> <span data-start="855.17" data-end="857.5">when someone using a screen reader</span> <span data-start="857.5" data-end="859.94">carries out an action it will synthesize</span> <span data-start="859.94" data-end="861.98">a click event for example so</span> <span data-start="861.98" data-end="864.68">particularly on touch devices if you tap</span> <span data-start="864.68" data-end="866.3">a device with a screen reader running</span> <span data-start="866.3" data-end="868.16">it's a double tap gesture not a single</span> <span data-start="868.16" data-end="870.11">tap that you'll be used to but that will</span> <span data-start="870.11" data-end="872.57">synthesize a click event and similarly</span> <span data-start="872.57" data-end="875.21">other events are cloaked if you like</span> <span data-start="875.21" data-end="878.42">using these synthesized events they're</span> <span data-start="878.42" data-end="880.46">also going to introduce some new events</span> <span data-start="880.46" data-end="882.83">particularly increment and decrement</span> <span data-start="882.83" data-end="886.01">scroll up scroll down and dismiss and</span> <span data-start="886.01" data-end="889.07">this very much plays into touchscreen</span> <span data-start="889.07" data-end="891.89">devices at the moment it's pretty much</span> <span data-start="891.89" data-end="895.39">impossible to create a custom slider</span> <span data-start="895.39" data-end="897.95">using all the accessibility</span> <span data-start="897.95" data-end="900.47">characteristics that are available and</span> <span data-start="900.47" data-end="902.42">to have it usable with a screen reader</span> <span data-start="902.42" data-end="904.79">on a touch device the reason is that</span> <span data-start="904.79" data-end="906.56">when you have a screen reader running on</span> <span data-start="906.56" data-end="908.81">your touch screen flick up and flick</span> <span data-start="908.81" data-end="911.63">down the gestures you'd probably use to</span> <span data-start="911.63" data-end="913.94">adjust the value of a slider are already</span> <span data-start="913.94" data-end="916.19">used for screen reader specific commands</span> <span data-start="916.19" data-end="918.2">so there's no way that those commands</span> <span data-start="918.2" data-end="921.98">can be separated out into using a slider</span> <span data-start="921.98" data-end="923.99">they're always protected they're always</span> <span data-start="923.99" data-end="926.66">ring-fenced for the screen reader so if</span> <span data-start="926.66" data-end="928.58">you go to something like the Aria</span> <span data-start="928.58" data-end="929.63">authoring practice</span> <span data-start="929.63" data-end="931.4">guide and pick up the blueprint design</span> <span data-start="931.4" data-end="934.34">pattern for a slider there implement it</span> <span data-start="934.34" data-end="935.93">perfectly but try to use it on a</span> <span data-start="935.93" data-end="937.19">touchscreen device with the screen</span> <span data-start="937.19" data-end="939.41">reader running it won't work the slider</span> <span data-start="939.41" data-end="941.57">can't be adjusted in the way that you'd</span> <span data-start="941.57" data-end="944.92">expect so these are being put into</span> <span data-start="944.92" data-end="946.82">practice these new events will come</span> <span data-start="946.82" data-end="949.93">along to help us get around that problem</span> <span data-start="949.93" data-end="953.18">phase 3 will let us introduce virtual</span> <span data-start="953.18" data-end="955.4">accessibility nodes into the tree this</span> <span data-start="955.4" data-end="956.72">is where we really start to get our</span> <span data-start="956.72" data-end="958.88">hands on that browser only functionality</span> <span data-start="958.88" data-end="962.18">will be able to add entirely new nodes</span> <span data-start="962.18" data-end="964.46">into the accessibility tree up until</span> <span data-start="964.46" data-end="966.05">this point there is always a</span> <span data-start="966.05" data-end="967.91">corresponding Dom node for an</span> <span data-start="967.91" data-end="969.95">accessibility node but we can change</span> <span data-start="969.95" data-end="972.89">that this is the bit where it starts to</span> <span data-start="972.89" data-end="974.9">feel really scary what we don't want to</span> <span data-start="974.9" data-end="976.97">happen is for developers to start</span> <span data-start="976.97" data-end="978.89">creating entirely secondary</span> <span data-start="978.89" data-end="981.08">accessibility trees just for screen</span> <span data-start="981.08" data-end="982.97">reader users that bear no resemblance to</span> <span data-start="982.97" data-end="985.52">the Dom good practice is always going to</span> <span data-start="985.52" data-end="986.9">be to try and keep those two things</span> <span data-start="986.9" data-end="989.45">synchronized with each other but one</span> <span data-start="989.45" data-end="991.49">really clear use case is doing something</span> <span data-start="991.49" data-end="994.01">with the canvas element when we draw</span> <span data-start="994.01" data-end="995.42">something to the screen using canvas</span> <span data-start="995.42" data-end="997.4">it's all done in JavaScript so there are</span> <span data-start="997.4" data-end="998.78">no HTML elements there's no</span> <span data-start="998.78" data-end="1000.28">accessibility semantics that are</span> <span data-start="1000.28" data-end="1002.38">available to the accessibility tree and</span> <span data-start="1002.38" data-end="1005.08">so two screen readers so one use of</span> <span data-start="1005.08" data-end="1006.79">being able to add virtual nodes to the</span> <span data-start="1006.79" data-end="1008.71">accessibility tree is that we can attach</span> <span data-start="1008.71" data-end="1011.5">a shadow root to the canvas element we</span> <span data-start="1011.5" data-end="1013.9">can then start adding a virtual branch</span> <span data-start="1013.9" data-end="1015.79">of the accessibility tree in there to</span> <span data-start="1015.79" data-end="1017.95">provide fullback content specifically</span> <span data-start="1017.95" data-end="1019.69">for people who can't see the JavaScript</span> <span data-start="1019.69" data-end="1021.37">rendered content inside the canvas</span> <span data-start="1021.37" data-end="1023.56">element but this is a long way off now</span> <span data-start="1023.56" data-end="1025.72">and there's a lot of obstacles to</span> <span data-start="1025.72" data-end="1027.25">getting to this point but it really does</span> <span data-start="1027.25" data-end="1029.67">have some interesting possibilities</span> <span data-start="1029.67" data-end="1032.86">phase four lastly is probably the most</span> <span data-start="1032.86" data-end="1035.05">complicated of all the phases it's going</span> <span data-start="1035.05" data-end="1036.699">to give us access to all computed</span> <span data-start="1036.699" data-end="1038.29">accessibility properties in the</span> <span data-start="1038.29" data-end="1040.9">accessibility tree both for the</span> <span data-start="1040.9" data-end="1042.579">accessibility nodes that are associated</span> <span data-start="1042.579" data-end="1045.75">with Dom nodes but also for the entire</span> <span data-start="1045.75" data-end="1047.89">accessibility tree we'll be able to walk</span> <span data-start="1047.89" data-end="1049.84">through the accessibility tree in the</span> <span data-start="1049.84" data-end="1052.15">same way that we can walk the Dom now so</span> <span data-start="1052.15" data-end="1054.01">again it's going to open up a lot of</span> <span data-start="1054.01" data-end="1055.93">possibilities for functionality and</span> <span data-start="1055.93" data-end="1058.06">capability but I think they're keeping</span> <span data-start="1058.06" data-end="1060.16">this one till the last phase because it</span> <span data-start="1060.16" data-end="1061.63">is the one that's going to take the most</span> <span data-start="1061.63" data-end="1063.63">discussion the most thinking</span> <span data-start="1063.63" data-end="1066.37">so looking at those things this is how</span> <span data-start="1066.37" data-end="1068.11">we can think about building</span> <span data-start="1068.11" data-end="1070.77">accessibility into our custom elements</span> <span data-start="1070.77" data-end="1073.299">recognizing that if we use autonomous</span> <span data-start="1073.299" data-end="1075.49">custom elements we need to add in the</span> <span data-start="1075.49" data-end="1076.96">accessibility characteristics for</span> <span data-start="1076.96" data-end="1079.96">ourselves and that the AO M in time is</span> <span data-start="1079.96" data-end="1081.82">going to give us a lot more flexibility</span> <span data-start="1081.82" data-end="1085.24">to do that but we can also use custom</span> <span data-start="1085.24" data-end="1087.07">elements in fact the whole web component</span> <span data-start="1087.07" data-end="1089.74">stack to solve accessibility problems as</span> <span data-start="1089.74" data-end="1094.51">well sorry so we can create a speak</span> <span data-start="1094.51" data-end="1097.539">content element for example I use a</span> <span data-start="1097.539" data-end="1099.22">screen reader and one thing I quite</span> <span data-start="1099.22" data-end="1101.71">often do is if I want to look at the</span> <span data-start="1101.71" data-end="1104.32">news I will go and set my screen reader</span> <span data-start="1104.32" data-end="1106.72">reading a news item on the website and</span> <span data-start="1106.72" data-end="1107.74">then I'll go off and make myself a cup</span> <span data-start="1107.74" data-end="1109.33">of tea while I'm still listening to it</span> <span data-start="1109.33" data-end="1110.74">because I don't need to look at the</span> <span data-start="1110.74" data-end="1113.049">screen my screen reader on my headset is</span> <span data-start="1113.049" data-end="1114.88">portable I can just walk around the</span> <span data-start="1114.88" data-end="1116.74">house put the kettle on make the tea and</span> <span data-start="1116.74" data-end="1119.049">still listen to the news story and I've</span> <span data-start="1119.049" data-end="1120.22">often thought this would be a really</span> <span data-start="1120.22" data-end="1122.53">useful thing for everybody to be able to</span> <span data-start="1122.53" data-end="1125.23">do being tied to your chair to your</span> <span data-start="1125.23" data-end="1127.75">computer your laptop is not always the</span> <span data-start="1127.75" data-end="1130.299">ideal experience so perhaps we can use</span> <span data-start="1130.299" data-end="1132.37">custom elements to create a widget that</span> <span data-start="1132.37" data-end="1135.309">will let us have a button on screen that</span> <span data-start="1135.309" data-end="1137.47">will read a designated piece of content</span> <span data-start="1137.47" data-end="1139.84">out loud and it turns out it's</span> <span data-start="1139.84" data-end="1142.84">reasonably easy to achieve we can use</span> <span data-start="1142.84" data-end="1145.9">the HTML template element to set up the</span> <span data-start="1145.9" data-end="1148.36">actual element we'll chuck some styling</span> <span data-start="1148.36" data-end="1150.28">in there just to make the the button and</span> <span data-start="1150.28" data-end="1154.75">the div look good we will also use some</span> <span data-start="1154.75" data-end="1159.61">slots to manage things so in the</span> <span data-start="1159.61" data-end="1161.32">template we've got a button element that</span> <span data-start="1161.32" data-end="1163.78">contains a slot element and this will</span> <span data-start="1163.78" data-end="1165.34">let us pull through content from the</span> <span data-start="1165.34" data-end="1167.049">light Dom from the the developer code</span> <span data-start="1167.049" data-end="1170.5">and we'll also set up a div that's also</span> <span data-start="1170.5" data-end="1172.299">going to be a slot for the content that</span> <span data-start="1172.299" data-end="1174.85">we want to be spoken out loud</span> <span data-start="1174.85" data-end="1177.85">in our connected callback we will do all</span> <span data-start="1177.85" data-end="1180.909">sorts of things we will grab the control</span> <span data-start="1180.909" data-end="1182.409">the thing we'll hit to make it speak</span> <span data-start="1182.409" data-end="1185.2">we'll grab the element that contains the</span> <span data-start="1185.2" data-end="1186.909">content and then from there we'll grab</span> <span data-start="1186.909" data-end="1188.62">the content that we want to be spoken</span> <span data-start="1188.62" data-end="1192.82">out loud in our function we will set up</span> <span data-start="1192.82" data-end="1196.059">the web speech API to make it talk we'll</span> <span data-start="1196.059" data-end="1196.96">create</span> <span data-start="1196.96" data-end="1200.049">since this is object and will attach to</span> <span data-start="1200.049" data-end="1201.88">that to the text that we want spoken out</span> <span data-start="1201.88" data-end="1203.529">loud that we've grabbed from the light</span> </p>
<p><span data-start="1203.529" data-end="1206.32">Dom and then lastly we need to set a</span> <span data-start="1206.32" data-end="1208.75">timeout because what we want to do is</span> <span data-start="1208.75" data-end="1211">lastly make the button look like it's</span> <span data-start="1211" data-end="1212.98">been pressed for as long as the contents</span> <span data-start="1212.98" data-end="1215.049">being spoken and then we want to return</span> <span data-start="1215.049" data-end="1217.36">it to its default States when it's</span> <span data-start="1217.36" data-end="1219.279">finished we're using the aria-pressed</span> <span data-start="1219.279" data-end="1221.02">attribute again to make sure that that</span> <span data-start="1221.02" data-end="1223.09">happens in the accessibility state as</span> <span data-start="1223.09" data-end="1225.94">well as the visual state reset state</span> <span data-start="1225.94" data-end="1229.87">then just checks after 500 milliseconds</span> <span data-start="1229.87" data-end="1231.909">and it checks to see if the speech uh</span> <span data-start="1231.909" data-end="1234.64">pterence is still talking if it is still</span> <span data-start="1234.64" data-end="1236.47">talking it resets the timer for another</span> <span data-start="1236.47" data-end="1239.35">500 if it isn't then it returns the</span> <span data-start="1239.35" data-end="1242.07">state of the button back to non pressed</span> <span data-start="1242.07" data-end="1244.75">would you one last bit of under the hood</span> <span data-start="1244.75" data-end="1246.88">magic and we're going to attach the</span> <span data-start="1246.88" data-end="1249.52">visual state of the button to the</span> <span data-start="1249.52" data-end="1252.25">attribute selector using aria-pressed so</span> <span data-start="1252.25" data-end="1254.44">as the value of aria-pressed is changed</span> <span data-start="1254.44" data-end="1256.809">the visual style of the button changes</span> <span data-start="1256.809" data-end="1258.52">accordingly and it just makes the whole</span> <span data-start="1258.52" data-end="1260.62">thing sync up a lot more easily under</span> <span data-start="1260.62" data-end="1262.72">the hood and what we get at the end of</span> <span data-start="1262.72" data-end="1264.85">it is a very simple piece of text on</span> <span data-start="1264.85" data-end="1267.429">page a button that we can hit and</span> <span data-start="1267.429" data-end="1269.679">hopefully everything all works for</span> <span data-start="1269.679" data-end="1275.909">everybody one tequila two tequila three</span> <span data-start="1275.909" data-end="1282.25">tequila floor and so custom elements</span> <span data-start="1282.25" data-end="1284.38">hopefully this has given you a brief</span> <span data-start="1284.38" data-end="1287.08">insight into can be used not only as I</span> <span data-start="1287.08" data-end="1289.87">said to solve accessibility problems but</span> <span data-start="1289.87" data-end="1291.549">if we get them right add in all the</span> <span data-start="1291.549" data-end="1293.26">accessibility properties that we need to</span> <span data-start="1293.26" data-end="1295.33">they give us a really powerful way to</span> <span data-start="1295.33" data-end="1298.99">create new and useful features on the</span> <span data-start="1298.99" data-end="1301.96">web I need to really thank a couple of</span> <span data-start="1301.96" data-end="1304.539">people Scott O'Hara and Patrick Walker</span> <span data-start="1304.539" data-end="1306.88">and Dan Hopkins who all gave me a</span> <span data-start="1306.88" data-end="1308.289">tremendous amount of help while I was</span> <span data-start="1308.289" data-end="1310.45">putting this together there's a URL</span> <span data-start="1310.45" data-end="1314.409">on-screen from Pat which leads to a way</span> <span data-start="1314.409" data-end="1316.87">to implement a slider that will work in</span> <span data-start="1316.87" data-end="1318.34">accessibility terms on touchscreen</span> <span data-start="1318.34" data-end="1320.08">devices you basically use a native</span> <span data-start="1320.08" data-end="1322.24">slider element you hook it up to the</span> <span data-start="1322.24" data-end="1323.62">custom visuals that you want to make</span> <span data-start="1323.62" data-end="1325.029">sure you keep it all in sync but if</span> <span data-start="1325.029" data-end="1326.77">you're curious about an interim solution</span> <span data-start="1326.77" data-end="1328.66">until the aom arrives</span> <span data-start="1328.66" data-end="1330.43">that's a really good one to check but</span> <span data-start="1330.43" data-end="1332.5">otherwise I recommend that you follow</span> <span data-start="1332.5" data-end="1333.73">all of these people they're all damn</span> <span data-start="1333.73" data-end="1335.62">good developers in their own right and</span> <span data-start="1335.62" data-end="1338.17">pretty damn good people too and lastly</span> <span data-start="1338.17" data-end="1341.37">thank you very much to all of you</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
