<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="JSConf transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>7GDPhHWOAJE</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/7GDPhHWOAJE?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="12.08" data-end="17.3">you</span> <span data-start="17.31" data-end="20.25">my name is Reed Burke I'm on the Yui</span> <span data-start="20.25" data-end="22.259">team at Yahoo I'm going to talk to you a</span> <span data-start="22.259" data-end="23.43">little bit about a project I'm working</span> <span data-start="23.43" data-end="26.07">on which involves using node.js for</span> <span data-start="26.07" data-end="27.75">something where it isn't accessory to</span> <span data-start="27.75" data-end="30.509">something and it's also not just nodejs</span> <span data-start="30.509" data-end="32.46">and just server-side JavaScript what I'm</span> <span data-start="32.46" data-end="34.83">working on is actually with the goal of</span> <span data-start="34.83" data-end="36.87">making client-side JavaScript both</span> <span data-start="36.87" data-end="38.73">easier to use for developers as well as</span> <span data-start="38.73" data-end="41.699">just way more performant and there could</span> <span data-start="41.699" data-end="43.44">be there could be a coexistence of these</span> <span data-start="43.44" data-end="46.739">two things using Yui loader so basically</span> <span data-start="46.739" data-end="49.11">we all agree that performance of web</span> <span data-start="49.11" data-end="50.97">apps is really important right but it's</span> <span data-start="50.97" data-end="53.909">way too hard it shouldn't be though so</span> <span data-start="53.909" data-end="56.129">what something with Yui that we've had</span> <span data-start="56.129" data-end="58.53">since the third version and made a part</span> <span data-start="58.53" data-end="60.39">of its core is that everything you</span> <span data-start="60.39" data-end="62.129">should only get what you need right you</span> <span data-start="62.129" data-end="63.119">shouldn't have to load the entire</span> <span data-start="63.119" data-end="64.439">library you shouldn't have to have all</span> <span data-start="64.439" data-end="68.13">this complexity of having everything on</span> <span data-start="68.13" data-end="70.08">your page and worrying about the</span> <span data-start="70.08" data-end="72.119">additional cost of parsing all this</span> <span data-start="72.119" data-end="73.619">stuff and downloading all this stuff and</span> <span data-start="73.619" data-end="75.06">everything so you use only what you need</span> <span data-start="75.06" data-end="79.229">with Yui and apps built with it can also</span> <span data-start="79.229" data-end="81.299">leverage the same kind of thing and</span> <span data-start="81.299" data-end="82.859">that's that's kind of the whole this</span> <span data-start="82.859" data-end="86.1">whole thing that we've had with Yui but</span> <span data-start="86.1" data-end="89.49">the problem with this and that it's it's</span> <span data-start="89.49" data-end="91.35">really good for the developer but it's</span> <span data-start="91.35" data-end="93.509">not so great for and we could probably</span> <span data-start="93.509" data-end="94.89">work on making developer tools better</span> <span data-start="94.89" data-end="96.84">for this and that I'll cover this in my</span> <span data-start="96.84" data-end="99.27">talk but whenever you find this you also</span> <span data-start="99.27" data-end="101.219">find dependency management so how do you</span> <span data-start="101.219" data-end="103.74">do that well one way is with the</span> <span data-start="103.74" data-end="105.899">configurator so what we had we've had</span> <span data-start="105.899" data-end="107.009">this configurator for a really long time</span> <span data-start="107.009" data-end="109.859">since Yui to back and why to how to</span> <span data-start="109.859" data-end="111.929">loader and the idea is that you know if</span> <span data-start="111.929" data-end="113.969">you want just certain parts you can put</span> <span data-start="113.969" data-end="115.289">this in here and it tells you all the</span> <span data-start="115.289" data-end="117.119">modules that you need and it gives you a</span> <span data-start="117.119" data-end="119.189">combo URL which most people in the room</span> <span data-start="119.189" data-end="120.479">would be familiar with it's basically</span> <span data-start="120.479" data-end="124.77">just concatenated that are used by by</span> <span data-start="124.77" data-end="126.09">what you what you need and then puts it</span> <span data-start="126.09" data-end="128.789">in one URL and so one way or another</span> <span data-start="128.789" data-end="130.83">you're doing this by either a build</span> <span data-start="130.83" data-end="132.51">script that's doing this or you're using</span> <span data-start="132.51" data-end="134.069">this service or you're hosting your own</span> <span data-start="134.069" data-end="136.8">combo like service or something right I</span> <span data-start="136.8" data-end="139.53">don't think this is the answer and so</span> <span data-start="139.53" data-end="141.42">the reason for this is that manually</span> <span data-start="141.42" data-end="143.069">updating a combo URL every time you</span> <span data-start="143.069" data-end="145.47">change something isn't scalable why</span> <span data-start="145.47" data-end="147.51">isn't it scalable well you think about</span> <span data-start="147.51" data-end="149.97">it your application isn't usually just</span> <span data-start="149.97" data-end="150.69">one page</span> <span data-start="150.69" data-end="152.07">you have a lot of different parts of</span> <span data-start="152.07" data-end="153.87">your website you know you may not have a</span> <span data-start="153.87" data-end="155.49">need an autocomplete widget on every</span> <span data-start="155.49" data-end="157.02">page you may not need to have a</span> <span data-start="157.02" data-end="158.37">scrollview on every page you may not</span> <span data-start="158.37" data-end="160.92">need your own component on every page</span> <span data-start="160.92" data-end="163.02">and so you want to be able to have your</span> <span data-start="163.02" data-end="164.78">templates or parts of your application</span> <span data-start="164.78" data-end="167.66">to just include what they need right and</span> <span data-start="167.66" data-end="170.64">that I don't think it's really easy and</span> <span data-start="170.64" data-end="173.22">if it's easy if you can do it it's it's</span> <span data-start="173.22" data-end="177.99">not that great for performance so this</span> <span data-start="177.99" data-end="180.72">is the easy API that Yui 3 gives you and</span> <span data-start="180.72" data-end="182.07">there's other I'm going to talk about</span> <span data-start="182.07" data-end="184.2">there's more than just Yui is not the</span> <span data-start="184.2" data-end="185.4">only library that does this there are</span> <span data-start="185.4" data-end="186.93">other ways to do it and you should be</span> <span data-start="186.93" data-end="188.94">using them and finding finding a way to</span> <span data-start="188.94" data-end="192.72">make it work but it's baked in and it's</span> <span data-start="192.72" data-end="195.42">it's scripts only have to tell the page</span> <span data-start="195.42" data-end="196.8">when it needs and so if you're using</span> <span data-start="196.8" data-end="198.57">something like this or making modules</span> <span data-start="198.57" data-end="201.15">with Yui or with something like required</span> <span data-start="201.15" data-end="204.21">at jas basically your your modules your</span> <span data-start="204.21" data-end="206.13">little JavaScript files that that do</span> <span data-start="206.13" data-end="207.99">implement specific bits of functionality</span> <span data-start="207.99" data-end="211.53">that's what defines what what's needed</span> <span data-start="211.53" data-end="213.03">on the page right so you could just</span> <span data-start="213.03" data-end="214.68">throw in the modules you want and they</span> <span data-start="214.68" data-end="216.03">can declare their own dependencies and</span> <span data-start="216.03" data-end="217.739">so that's something that's a really</span> <span data-start="217.739" data-end="220.11">great way to make an application and</span> <span data-start="220.11" data-end="222.42">it's what you guys should aspire to do</span> <span data-start="222.42" data-end="223.739">but it's not always perform it and</span> <span data-start="223.739" data-end="225.6">that's why we have people who are going</span> <span data-start="225.6" data-end="227.31">in and copy and pasting something out of</span> <span data-start="227.31" data-end="229.98">here or going in and actually you know</span> <span data-start="229.98" data-end="231.27">maybe you don't even have a nice tool</span> <span data-start="231.27" data-end="234.03">like this and you're just figuring out</span> <span data-start="234.03" data-end="236.28">how to combine this with shell scripts</span> <span data-start="236.28" data-end="238.02">or whatever and that isn't something I</span> <span data-start="238.02" data-end="239.43">think we should accept right we should</span> <span data-start="239.43" data-end="241.68">have an API that's this simple whether</span> <span data-start="241.68" data-end="243.72">it's Yui or not and it should be</span> <span data-start="243.72" data-end="247.28">something that that's also performing</span> <span data-start="247.28" data-end="250.68">and so again i want to i want to stress</span> <span data-start="250.68" data-end="252.209">that they're the reason why we use</span> <span data-start="252.209" data-end="253.95">modules and there's going to be two</span> <span data-start="253.95" data-end="255.57">great talks after mine that are going to</span> <span data-start="255.57" data-end="257.519">talk about javascript frameworks and</span> <span data-start="257.519" data-end="259.049">modules and you notice this is really</span> <span data-start="259.049" data-end="260.82">common the reason why we're doing this</span> <span data-start="260.82" data-end="263.43">is because it's you're delivering less</span> <span data-start="263.43" data-end="265.14">code it's only what your users need</span> <span data-start="265.14" data-end="267.45">right you're it's going to increase</span> <span data-start="267.45" data-end="269.04">performance because you're having less</span> <span data-start="269.04" data-end="271.47">code that's you're delivering even with</span> <span data-start="271.47" data-end="272.46">a fast connection you still need to</span> <span data-start="272.46" data-end="274.35">parse it that's especially significant</span> <span data-start="274.35" data-end="276.63">on mobile right even with fast</span> </p>
<p><span data-start="276.63" data-end="278.01">JavaScript fitting you know there's a</span> <span data-start="278.01" data-end="279.21">lot of competition with JavaScript</span> <span data-start="279.21" data-end="282.3">engines in browsers and that's great and</span> <span data-start="282.3" data-end="283.44">that is only going to continue but that</span> <span data-start="283.44" data-end="284.08">is an excuse</span> <span data-start="284.08" data-end="288.37">use the you know forgetting about</span> <span data-start="288.37" data-end="290.139">performance right it also manages</span> <span data-start="290.139" data-end="291.789">complexity so it makes things easier on</span> <span data-start="291.789" data-end="295.09">you so the problem is that yeah there</span> <span data-start="295.09" data-end="296.889">needs to be a way for things to be more</span> <span data-start="296.889" data-end="299.8">performant that's because with Yui 3 you</span> <span data-start="299.8" data-end="302.5">have the simple API but one running Yui</span> <span data-start="302.5" data-end="304.599">loader on a client side isn't free right</span> <span data-start="304.599" data-end="307.3">it actually takes it takes time it</span> <span data-start="307.3" data-end="308.68">doesn't take that long but it takes time</span> <span data-start="308.68" data-end="310.93">for these dependencies to be worked out</span> <span data-start="310.93" data-end="312.639">you also have to transfer all the</span> <span data-start="312.639" data-end="314.53">metadata about all the modules that</span> <span data-start="314.53" data-end="316.569">you're using on the page to the client</span> <span data-start="316.569" data-end="318.49">so that it knows about say when I asked</span> <span data-start="318.49" data-end="320.379">for YQL it knows that it needs some</span> <span data-start="320.379" data-end="322.479">module like Jason P it needs a module</span> <span data-start="322.479" data-end="325.93">like my order needs its sub modules or</span> <span data-start="325.93" data-end="328.509">what have you write as things that</span> <span data-start="328.509" data-end="331.419">requires and doing all that is expensive</span> <span data-start="331.419" data-end="333.969">even though you can cash we could we</span> <span data-start="333.969" data-end="334.96">could send things with far future</span> <span data-start="334.96" data-end="337.24">expires right like the for the module</span> <span data-start="337.24" data-end="339.4">metadata download and the Yui seed file</span> <span data-start="339.4" data-end="343.21">and all this parsing metadata and</span> <span data-start="343.21" data-end="345.55">calculating from it isn't cash and it</span> <span data-start="345.55" data-end="347.86">happens over and over one thing that</span> <span data-start="347.86" data-end="349.509">incidentally wasn't think that we were</span> <span data-start="349.509" data-end="350.889">trying to do to improve the performance</span> <span data-start="350.889" data-end="353.8">of Yui loader is actually take all that</span> <span data-start="353.8" data-end="356.379">metadata for say what the Yui library</span> <span data-start="356.379" data-end="357.729">and put it into some kind of local</span> <span data-start="357.729" data-end="360.039">storage mechanism and that didn't work</span> <span data-start="360.039" data-end="362.08">as well as we hoped because it turns out</span> <span data-start="362.08" data-end="363.969">that still taking it out of local</span> <span data-start="363.969" data-end="366.19">storage and then parsing this huge JSON</span> <span data-start="366.19" data-end="367.69">blob with everything that you would</span> <span data-start="367.69" data-end="370.9">possibly use takes about just as much</span> <span data-start="370.9" data-end="372.4">time as just doing the calculation with</span> <span data-start="372.4" data-end="374.639">with stuff that the way that we used to</span> <span data-start="374.639" data-end="377.919">and so basically we think we could do a</span> <span data-start="377.919" data-end="379.27">little bit better with this we think we</span> <span data-start="379.27" data-end="381.129">have an okay API and we could probably</span> <span data-start="381.129" data-end="385.15">even make tools for for you know making</span> <span data-start="385.15" data-end="387.43">modules that work with why I better as</span> <span data-start="387.43" data-end="389.11">well but you know in order to get there</span> <span data-start="389.11" data-end="391.029">we need to have a really good we don't</span> <span data-start="391.029" data-end="392.65">want to just say this is this makes it</span> <span data-start="392.65" data-end="394.389">easier on developers we want you guys to</span> <span data-start="394.389" data-end="396.49">have a reason to use it you know a</span> <span data-start="396.49" data-end="398.05">reason where it's not only just helps</span> <span data-start="398.05" data-end="399.129">you guys but it makes your website</span> <span data-start="399.129" data-end="401.11">faster and that's what I want to do with</span> <span data-start="401.11" data-end="404.11">my project I've we put Yui loader as a</span> <span data-start="404.11" data-end="407.319">web service and we call it why do I</span> <span data-start="407.319" data-end="409.629">loader server or why LS and so the first</span> <span data-start="409.629" data-end="411.009">thing this lets you do is you can you</span> <span data-start="411.009" data-end="412.959">could just pass it modules to load like</span> <span data-start="412.959" data-end="415.18">say if I want the drag drop module what</span> <span data-start="415.18" data-end="416.43">this is done is</span> </p>
<p><span data-start="416.43" data-end="418.77">I have this running locally and for Yui</span> <span data-start="418.77" data-end="421.35">3 30 it's just loading the drag drop</span> <span data-start="421.35" data-end="422.85">module and you can see at the it's</span> <span data-start="422.85" data-end="424.41">loading all of its dependencies that it</span> <span data-start="424.41" data-end="428.87">needs and drag drops at the very bottom</span> <span data-start="428.87" data-end="431.01">you can pass other things to this as</span> <span data-start="431.01" data-end="436.44">well so say I want to have the debug</span> <span data-start="436.44" data-end="438.48">version of this and you get that it's</span> <span data-start="438.48" data-end="439.83">just doing this on the fly this is</span> <span data-start="439.83" data-end="442.11">running a course in nodejs using why I</span> <span data-start="442.11" data-end="444.48">loader you could pass you know whatever</span> <span data-start="444.48" data-end="447.63">you want in the end of this so if I want</span> <span data-start="447.63" data-end="450.63">you could just passed a list right but</span> <span data-start="450.63" data-end="452.28">this isn't really what I came to talk</span> <span data-start="452.28" data-end="454.11">about this is kind of neat and that you</span> <span data-start="454.11" data-end="456.18">no longer have to go through i'm trying</span> <span data-start="456.18" data-end="457.62">to show the end of it but doesn't really</span> <span data-start="457.62" data-end="461.49">matter like this is this is all neat and</span> <span data-start="461.49" data-end="469.53">all let's see go back cool but there's a</span> <span data-start="469.53" data-end="471.29">better way and that's just using Yui use</span> <span data-start="471.29" data-end="474.15">okay so with with yls we kept the same</span> </p>
<p><span data-start="474.15" data-end="477.18">API right but we added extreme</span> <span data-start="477.18" data-end="479.46">performance to it but basically this</span> <span data-start="479.46" data-end="480.87">this extreme performance is on par with</span> <span data-start="480.87" data-end="482.1">something that where you'd have to go</span> <span data-start="482.1" data-end="484.02">through the painful way of using or</span> <span data-start="484.02" data-end="487.86">using your own build script or bye-bye</span> <span data-start="487.86" data-end="490.23">configurator or whatever and said you</span> <span data-start="490.23" data-end="491.52">could just have you know small</span> <span data-start="491.52" data-end="494.13">JavaScript files that that implement</span> <span data-start="494.13" data-end="496.47">pieces of functionality and actually</span> <span data-start="496.47" data-end="497.7">have them to clear the dependencies and</span> <span data-start="497.7" data-end="499.95">have it work just as well that's the</span> <span data-start="499.95" data-end="502.11">goal just as well as if you were doing</span> <span data-start="502.11" data-end="504.42">stuff the hard way and sort of sort of</span> <span data-start="504.42" data-end="506.04">downloading parsing and calculating</span> <span data-start="506.04" data-end="507.54">modded dependencies like we used to with</span> </p>
<p><span data-start="507.54" data-end="510.15">Yui we now ask why LS for them and so a</span> <span data-start="510.15" data-end="511.14">request would look something like this</span> <span data-start="511.14" data-end="514.77">right we give information about what</span> <span data-start="514.77" data-end="518.07">module you want yql what we have on the</span> <span data-start="518.07" data-end="520.47">page that's env right here and what we</span> <span data-start="520.47" data-end="523.32">have on the page is yui what version of</span> <span data-start="523.32" data-end="525.48">Yui and tests and I'll get into test in</span> <span data-start="525.48" data-end="527.13">a little bit but we think that feature</span> <span data-start="527.13" data-end="529.26">testing is very important and so what</span> <span data-start="529.26" data-end="530.31">we're doing is actually we're telling</span> <span data-start="530.31" data-end="533.1">the we're transferring state about what</span> <span data-start="533.1" data-end="535.5">tests have passed and failed on the</span> <span data-start="535.5" data-end="536.64">browser and actually transferring that</span> <span data-start="536.64" data-end="539.22">over to the server so it's very fast</span> <span data-start="539.22" data-end="541.95">because we don't have we're running this</span> <span data-start="541.95" data-end="544.59">calculation on the server and it's it's</span> <span data-start="544.59" data-end="546.12">it always winds up being faster than</span> <span data-start="546.12" data-end="547.53">what someone has especially if they're</span> <span data-start="547.53" data-end="548.31">on a phone</span> <span data-start="548.31" data-end="550.44">and you don't need to download and parse</span> <span data-start="550.44" data-end="552.87">module metadata like you did before but</span> <span data-start="552.87" data-end="555.84">the real win is the first one but this</span> <span data-start="555.84" data-end="557.7">is that this is the huge win this is</span> <span data-start="557.7" data-end="559.8">what's really exciting is that it's it's</span> <span data-start="559.8" data-end="561.57">whenever you go to the next page the</span> <span data-start="561.57" data-end="563.76">entire response has been cached so what</span> <span data-start="563.76" data-end="565.38">this means is that the first time anyone</span> <span data-start="565.38" data-end="569.37">visits some page on your website the</span> <span data-start="569.37" data-end="571.29">this URL right this this you are at the</span> <span data-start="571.29" data-end="573.27">bottom that's already been accessed if</span> <span data-start="573.27" data-end="574.41">it's if it's someone of the same browser</span> <span data-start="574.41" data-end="576.6">with the same test configuration it's</span> <span data-start="576.6" data-end="578.57">been it's been access it's cached it's</span> <span data-start="578.57" data-end="581.52">it's it's on a it's cached at least on</span> <span data-start="581.52" data-end="583.47">on yahoo side right or on the person</span> <span data-start="583.47" data-end="586.79">serving yls aside and so that means that</span> <span data-start="586.79" data-end="589.26">your other users will take advantage of</span> <span data-start="589.26" data-end="591.24">that and if it's if it's if it's the</span> <span data-start="591.24" data-end="592.71">person has visited the page and they're</span> <span data-start="592.71" data-end="595.589">getting that fast thing off of off of</span> <span data-start="595.589" data-end="597.029">the server cache that we have but then</span> <span data-start="597.029" data-end="599.37">it's in their browser cache no more</span> <span data-start="599.37" data-end="600.72">dependency calculation has to happen on</span> <span data-start="600.72" data-end="602.55">the client anymore and it never and</span> <span data-start="602.55" data-end="604.11">never did but now it doesn't have that</span> <span data-start="604.11" data-end="606.18">it's all local and you don't have to do</span> <span data-start="606.18" data-end="608.07">to go through any hoops to determine all</span> <span data-start="608.07" data-end="610.77">the modules here because that already</span> <span data-start="610.77" data-end="612.15">happened by that by that request being</span> <span data-start="612.15" data-end="614.76">available so right and the browser with</span> <span data-start="614.76" data-end="616.08">fire feature expires and then in the</span> <span data-start="616.08" data-end="618.96">server with its own caching layer that's</span> <span data-start="618.96" data-end="620.43">baked into the server not just yahoo</span> <span data-start="620.43" data-end="621.87">zone but the one that that's going to</span> <span data-start="621.87" data-end="624.6">ship with the open-source bit of it this</span> <span data-start="624.6" data-end="626.67">is personal so it's it's not just for</span> </p>
<p><span data-start="626.67" data-end="628.92">Yui the goal of the architecture the</span> <span data-start="628.92" data-end="631.23">system is that it can work with modules</span> <span data-start="631.23" data-end="633.15">that are outside of Yui while I gallery</span> <span data-start="633.15" data-end="635.88">two and three your own modules these all</span> <span data-start="635.88" data-end="637.17">should work really well and you should</span> <span data-start="637.17" data-end="638.61">be able to import them into this and use</span> <span data-start="638.61" data-end="642.81">them just like we can for Yui itself so</span> <span data-start="642.81" data-end="645.54">I want to give you a reason why I'm so</span> <span data-start="645.54" data-end="647.4">excited about this and so I want to show</span> <span data-start="647.4" data-end="649.53">you the speed difference right this is</span> <span data-start="649.53" data-end="651.39">this is you know something we try to do</span> <span data-start="651.39" data-end="652.709">by putting things in the local storage</span> <span data-start="652.709" data-end="655.08">and then getting them out and wasn't it</span> <span data-start="655.08" data-end="657.12">nearly as impressive so what I'm going</span> <span data-start="657.12" data-end="659.79">to show you is basically again I want to</span> <span data-start="659.79" data-end="661.5">reiterate that an initial page load is</span> <span data-start="661.5" data-end="662.64">is going to always be a little bit</span> <span data-start="662.64" data-end="664.5">faster since no metadata is download in</span> <span data-start="664.5" data-end="666.18">the server side JavaScript accolades</span> <span data-start="666.18" data-end="668.64">faster and everything but what I'm going</span> <span data-start="668.64" data-end="670.35">to show you is when you when someone</span> <span data-start="670.35" data-end="671.91">else's ran this once right when you</span> <span data-start="671.91" data-end="675">visited a page already the cost of Yui</span> <span data-start="675" data-end="676.74">loader right now continues to you</span> <span data-start="676.74" data-end="678.39">continue to have to do it calculate</span> <span data-start="678.39" data-end="681.74">dependencies even though</span> <span data-start="681.74" data-end="685.589">the combo URL is already cashed in the</span> <span data-start="685.589" data-end="687.33">browser so basically what I'm saying is</span> <span data-start="687.33" data-end="689.31">that no matter even though we can cash</span> <span data-start="689.31" data-end="691.019">responses coming back from the server</span> <span data-start="691.019" data-end="693.39">the thing is we still have to run this</span> </p>
<p><span data-start="693.39" data-end="695.43">JavaScript calculation as you navigate</span> <span data-start="695.43" data-end="697.95">around the page or navigate this to the</span> <span data-start="697.95" data-end="699.57">same page or if another visitor visits</span> <span data-start="699.57" data-end="701.519">they can't take advantage of this</span> <span data-start="701.519" data-end="703.38">calculation that already happened and so</span> <span data-start="703.38" data-end="704.82">what we've done is we've taken all these</span> <span data-start="704.82" data-end="706.769">instead of having you know 100 users</span> <span data-start="706.769" data-end="708.779">calculate this themselves we can now</span> <span data-start="708.779" data-end="711.3">have once you know one person do it and</span> <span data-start="711.3" data-end="712.709">so it's no slower than than it was</span> <span data-start="712.709" data-end="714.75">before right since it's the same thing</span> <span data-start="714.75" data-end="716.31">but just happening in one place and then</span> <span data-start="716.31" data-end="717.99">everyone takes advantage of it right and</span> <span data-start="717.99" data-end="719.31">so that's what I'm going to show you is</span> <span data-start="719.31" data-end="721.44">the difference between keeping it</span> <span data-start="721.44" data-end="723.899">keeping it everyone doing it versus</span> <span data-start="723.899" data-end="726.839">having it already done once and that's</span> <span data-start="726.839" data-end="728.519">that's the whole purpose of this thing</span> <span data-start="728.519" data-end="731.04">and so this is running on Chrome and</span> <span data-start="731.04" data-end="733.23">we're showing loading different various</span> <span data-start="733.23" data-end="735.329">combinations of stuff client side loader</span> <span data-start="735.329" data-end="738.93">versus why LS and it can vary as well so</span> <span data-start="738.93" data-end="740.64">this is just an example but it's always</span> <span data-start="740.64" data-end="745.32">faster sometimes dramatically so so if I</span> <span data-start="745.32" data-end="746.76">move this in a new actually a new</span> <span data-start="746.76" data-end="748.02">renderer actually winds up being even</span> <span data-start="748.02" data-end="750">faster this is actually even more</span> <span data-start="750" data-end="752.13">profound on mobile devices even with the</span> <span data-start="752.13" data-end="755.149">latest iOS we're seeing differences of</span> <span data-start="755.149" data-end="757.589">of things cut in half like nine hundred</span> <span data-start="757.589" data-end="759.51">milliseconds 150 milliseconds all the</span> <span data-start="759.51" data-end="763.38">way down to 450 the Wi-Fi here is</span> <span data-start="763.38" data-end="765.839">unfortunately I'm can't keep my phone on</span> <span data-start="765.839" data-end="770.459">it right now so but let me let me run</span> <span data-start="770.459" data-end="772.89">this in this again just to see how it</span> <span data-start="772.89" data-end="775.56">can fluctuate so yeah that's a little</span> <span data-start="775.56" data-end="776.76">bit faster and that's a lot faster this</span> <span data-start="776.76" data-end="777.779">is what the i just opened a new tab</span> <span data-start="777.779" data-end="779.82">that's only thing I did I've had the</span> <span data-start="779.82" data-end="783.839">presentation open for about a day so so</span> <span data-start="783.839" data-end="785.55">you can see it's this is what's really</span> <span data-start="785.55" data-end="787.32">exciting which we're comparing is 106</span> <span data-start="787.32" data-end="790.35">for this combination to 30 right 58 to</span> <span data-start="790.35" data-end="794.04">1444 243 and even in a less than ideal</span> <span data-start="794.04" data-end="796.079">situation that was still it was so odd</span> <span data-start="796.079" data-end="798.899">of being faster and so that's that's</span> <span data-start="798.899" data-end="801.39">pretty exciting and again with white</span> <span data-start="801.39" data-end="802.86">with the next version of Yui they'll</span> <span data-start="802.86" data-end="804.329">have this client side support in it</span> <span data-start="804.329" data-end="806.55">you'll be able to host this yourself and</span> <span data-start="806.55" data-end="808.199">hopefully even with your own modules</span> <span data-start="808.199" data-end="809.97">right but that's you won't need to</span> <span data-start="809.97" data-end="812.43">because we will provide this on our CDN</span> <span data-start="812.43" data-end="813.93">and that we do this already we have a</span> </p>
<p><span data-start="813.93" data-end="814.96">CDN combo</span> <span data-start="814.96" data-end="816.07">endler when you looked at Yui</span> <span data-start="816.07" data-end="817.87">configurator that's weird something we</span> <span data-start="817.87" data-end="819.4">host we're going to provide this on our</span> <span data-start="819.4" data-end="822.28">own CDN and it's just enabled with the</span> <span data-start="822.28" data-end="823.81">simple configuration flag so you just</span> <span data-start="823.81" data-end="824.98">tell say that you want to use this</span> <span data-start="824.98" data-end="828.64">feature and you get it when we're</span> <span data-start="828.64" data-end="830.32">building this this is some of the things</span> <span data-start="830.32" data-end="831.61">that we've we wanted to keep and</span> <span data-start="831.61" data-end="834.43">designing this kind of system I'm</span> <span data-start="834.43" data-end="835.45">running out of time so I'm going to go</span> <span data-start="835.45" data-end="836.49">through this really quick</span> <span data-start="836.49" data-end="838.09">capability-based loadings really</span> <span data-start="838.09" data-end="843.52">important so we have a excuse me a s we</span> <span data-start="843.52" data-end="846.19">have we wanted to transfer state over to</span> <span data-start="846.19" data-end="848.71">the to the server of all the things that</span> <span data-start="848.71" data-end="849.91">are on there so we transfer all these</span> <span data-start="849.91" data-end="851.2">tests and stuff that's already on the</span> <span data-start="851.2" data-end="852.37">page is sent as well like you saw</span> <span data-start="852.37" data-end="854.68">earlier and so this is kash friendly so</span> <span data-start="854.68" data-end="856.81">we don't this isn't a unique URL it's if</span> <span data-start="856.81" data-end="858.19">someone came with the same browser they</span> <span data-start="858.19" data-end="860.23">would get the same response we're using</span> <span data-start="860.23" data-end="862.9">this already in Yui library com we're</span> <span data-start="862.9" data-end="865.09">working to bring this to everyone some</span> <span data-start="865.09" data-end="867.34">other things to take away from this is</span> <span data-start="867.34" data-end="869.44">server side yui is what what I'm using</span> <span data-start="869.44" data-end="870.85">to do this it's already open source and</span> <span data-start="870.85" data-end="872.83">out there it allows why you out easily</span> <span data-start="872.83" data-end="875.59">run on node and really the loader part</span> <span data-start="875.59" data-end="877">of this is actually already open source</span> <span data-start="877" data-end="879.88">so what what's not is that is kind of</span> <span data-start="879.88" data-end="881.2">the tools and everything around it that</span> <span data-start="881.2" data-end="883.33">we're still working on scaling this</span> <span data-start="883.33" data-end="884.5">though as something I really want to</span> <span data-start="884.5" data-end="887.11">what want to show you guys is if you're</span> <span data-start="887.11" data-end="888.13">if you're working with anything that</span> <span data-start="888.13" data-end="889.42">involves an expensive javascript</span> <span data-start="889.42" data-end="892.48">computation javascript single-threaded</span> <span data-start="892.48" data-end="894.19">so when you're working with something</span> <span data-start="894.19" data-end="896.74">that's that that's blocking in</span> <span data-start="896.74" data-end="898.27">javascript that sort of requests will</span> <span data-start="898.27" data-end="900.37">pile up it's important to make sure that</span> <span data-start="900.37" data-end="901.75">you're doing the right thing so we did a</span> <span data-start="901.75" data-end="903.19">simple test of this on a machine with</span> <span data-start="903.19" data-end="904.36">two cores just to show you the</span> <span data-start="904.36" data-end="906.64">difference between running Yui loader in</span> <span data-start="906.64" data-end="909.58">the same instance of nodejs as a server</span> <span data-start="909.58" data-end="911.89">versus just putting it out in a separate</span> <span data-start="911.89" data-end="914.02">process than communicating with it over</span> <span data-start="914.02" data-end="917.08">a socket and the difference is huge so</span> <span data-start="917.08" data-end="918.52">what we're seeing is this is this is</span> <span data-start="918.52" data-end="920.32">running with two workers and this is</span> <span data-start="920.32" data-end="921.94">running with just everything in line but</span> <span data-start="921.94" data-end="923.59">with separated out the traditional</span> <span data-start="923.59" data-end="925.33">nodejs scaling way right which is just</span> <span data-start="925.33" data-end="927.61">to use spark to or cluster or something</span> <span data-start="927.61" data-end="929.68">like that for spawning different things</span> <span data-start="929.68" data-end="931.84">and this is the big part right so this</span> <span data-start="931.84" data-end="933.46">is performance we used to see taking up</span> <span data-start="933.46" data-end="935.92">to 33 or almost 4 seconds and now</span> <span data-start="935.92" data-end="937.99">everything is this nice low thing right</span> <span data-start="937.99" data-end="941.23">down here that's really nice so you want</span> <span data-start="941.23" data-end="942.64">to avoid blocking anything if you're</span> <span data-start="942.64" data-end="943.87">doing image processing working with</span> <span data-start="943.87" data-end="945.13">binary data stuff like this that can</span> <span data-start="945.13" data-end="947.56">block even if it's just for 50</span> <span data-start="947.56" data-end="948.579">milliseconds</span> <span data-start="948.579" data-end="949.899">you want to be very careful because</span> <span data-start="949.899" data-end="951.73">things will start queuing up outside of</span> <span data-start="951.73" data-end="954.279">outside of the stuff and that actually</span> <span data-start="954.279" data-end="957.699">causes memory to use it to explode like</span> <span data-start="957.699" data-end="960.36">really really bad explode on nodejs so</span> <span data-start="960.36" data-end="962.799">so we're using web workers by Peter</span> </p>
<p><span data-start="962.799" data-end="965.279">Grice and that's awesome library to use</span> <span data-start="965.279" data-end="967.089">again blowing through this stuff really</span> <span data-start="967.089" data-end="969.61">quick this isn't as interesting but what</span> <span data-start="969.61" data-end="971.47">I want to show you is this we this is</span> <span data-start="971.47" data-end="973.029">interesting just because we test the</span> <span data-start="973.029" data-end="974.23">different combinations and wasn't what</span> <span data-start="974.23" data-end="976.089">we expected instead of running one</span> <span data-start="976.089" data-end="979.149">master with 16 slaves we ran 16 Yui</span> <span data-start="979.149" data-end="981.819">workers we actually ran one master with</span> <span data-start="981.819" data-end="985.449">with a 16 masters with one Yui worker</span> <span data-start="985.449" data-end="987.069">and that wind up being most performant</span> <span data-start="987.069" data-end="988.209">because that's what you see down here in</span> <span data-start="988.209" data-end="990.759">green where we have this nice even when</span> <span data-start="990.759" data-end="992.559">we put it up to 400 requests per second</span> <span data-start="992.559" data-end="995.499">we still get a nice nice flat line with</span> <span data-start="995.499" data-end="996.73">this configuration right here that's</span> <span data-start="996.73" data-end="998.98">great and this is the improvement we</span> <span data-start="998.98" data-end="1000.66">made from this is the in line when you</span> <span data-start="1000.66" data-end="1002.879">in line things it takes 1.2 seconds on</span> <span data-start="1002.879" data-end="1005.97">our production hardware to run to run a</span> <span data-start="1005.97" data-end="1008.61">two-run just all of the different tests</span> <span data-start="1008.61" data-end="1010.339">that we have with going all over</span> <span data-start="1010.339" data-end="1012.569">different configurations of modules</span> <span data-start="1012.569" data-end="1014.429">versus this green line which is running</span> <span data-start="1014.429" data-end="1016.139">things with with one web worker so that</span> <span data-start="1016.139" data-end="1017.369">makes a big difference so you want to</span> <span data-start="1017.369" data-end="1018.899">make sure you're doing that what you</span> <span data-start="1018.899" data-end="1020.279">don't see in this graph is memory to</span> <span data-start="1020.279" data-end="1022.619">which explodes which is not good if</span> <span data-start="1022.619" data-end="1023.939">you're using long if you're doing this</span> <span data-start="1023.939" data-end="1025.829">for the long run which I encourage you</span> <span data-start="1025.829" data-end="1027.299">to when you're writing node.js stuff</span> <span data-start="1027.299" data-end="1030.449">that you go through and stress tests</span> <span data-start="1030.449" data-end="1032.88">this stuff right you want to make sure</span> <span data-start="1032.88" data-end="1034.169">that you're using something like HTTP</span> <span data-start="1034.169" data-end="1036.51">proof and that's something that was</span> <span data-start="1036.51" data-end="1038.309">written by HP it's very old there's</span> <span data-start="1038.309" data-end="1040.019">papers written about it so you know that</span> <span data-start="1040.019" data-end="1041.159">that's the kind of thing you should be</span> <span data-start="1041.159" data-end="1043.679">using node the node load works really</span> <span data-start="1043.679" data-end="1045.48">well for first stuff that's you know</span> <span data-start="1045.48" data-end="1047.189">like I've used it for stuff that's 10 30</span> <span data-start="1047.189" data-end="1049.2">minutes but what I've actually noticed</span> <span data-start="1049.2" data-end="1051.24">is when I ran a 72-hour test with no</span> <span data-start="1051.24" data-end="1053.519">load I saw that my server performance</span> <span data-start="1053.519" data-end="1055.559">was just going through the floor and</span> <span data-start="1055.559" data-end="1057.059">turns out it wasn't my server it was</span> <span data-start="1057.059" data-end="1058.47">node load right so you want to make sure</span> <span data-start="1058.47" data-end="1059.789">that you're not you're not you know</span> <span data-start="1059.789" data-end="1061.71">giving yourself grief by by using tools</span> <span data-start="1061.71" data-end="1064.139">like that are for something they're not</span> <span data-start="1064.139" data-end="1065.76">meant for right note load works really</span> <span data-start="1065.76" data-end="1067.919">really well for and gives you a lot of</span> <span data-start="1067.919" data-end="1071.34">great data for small short test runs and</span> <span data-start="1071.34" data-end="1072.539">so another thing I want to go over</span> <span data-start="1072.539" data-end="1075.179">really quick is how what we're doing to</span> <span data-start="1075.179" data-end="1077.07">test why do I use to make sure that this</span> <span data-start="1077.07" data-end="1079.289">is really robust for the release that</span> <span data-start="1079.289" data-end="1080.85">we're going to do later this year of 340</span> <span data-start="1080.85" data-end="1082.47">is use</span> <span data-start="1082.47" data-end="1084.57">box I frames for unit testing which is</span> <span data-start="1084.57" data-end="1087.09">really useful for if you need to test</span> <span data-start="1087.09" data-end="1089.7">things that require a clean browser</span> <span data-start="1089.7" data-end="1091.26">environment feature on and this is on</span> <span data-start="1091.26" data-end="1092.549">the Yui gallery so I encourage you to</span> <span data-start="1092.549" data-end="1095.64">look more into that as well some things</span> <span data-start="1095.64" data-end="1097.14">would connect you if you're curious</span> <span data-start="1097.14" data-end="1098.88">about I'm almost out of time so if</span> <span data-start="1098.88" data-end="1099.809">you're curious about this kind of stuff</span> <span data-start="1099.809" data-end="1101.76">come and see me I would love to talk</span> <span data-start="1101.76" data-end="1106.86">more about it and Jalen's really nice</span> <span data-start="1106.86" data-end="1108.179">there's a node tool that I wrote for</span> <span data-start="1108.179" data-end="1110.73">jslint that's really nice pact is</span> <span data-start="1110.73" data-end="1111.72">something that I've used for testing</span> </p>
<p><span data-start="1111.72" data-end="1115.32">HTTP servers and it you could do it in a</span> <span data-start="1115.32" data-end="1116.669">really expressive way and I want to show</span> <span data-start="1116.669" data-end="1120.57">that really quick here so actually this</span> <span data-start="1120.57" data-end="1130.14">one no this one so let's see so this is</span> <span data-start="1130.14" data-end="1131.52">really nice so I could just write tons</span> <span data-start="1131.52" data-end="1133.44">of these things where I have with packed</span> <span data-start="1133.44" data-end="1135.179">i can just have the URL in it and just</span> <span data-start="1135.179" data-end="1136.65">have a topic thing as request this is</span> <span data-start="1136.65" data-end="1139.86">using the vows h oj s test framework and</span> <span data-start="1139.86" data-end="1141.72">it's really easy and this this kind of</span> <span data-start="1141.72" data-end="1143.88">extends off the last talked just because</span> <span data-start="1143.88" data-end="1145.47">you know i don't if i want to add a new</span> <span data-start="1145.47" data-end="1146.789">test it's really easy for me to do it</span> <span data-start="1146.789" data-end="1148.919">with packed and that's really helpful</span> <span data-start="1148.919" data-end="1151.47">and then annotated code i had that but i</span> <span data-start="1151.47" data-end="1154.77">didn't show it so right this is really</span> <span data-start="1154.77" data-end="1155.909">hard on the client side which is why</span> <span data-start="1155.909" data-end="1157.14">this isn't available yet but we're</span> <span data-start="1157.14" data-end="1158.669">hoping the next how few months to have</span> <span data-start="1158.669" data-end="1161.52">this out for you guys so something that</span> <span data-start="1161.52" data-end="1162.809">i think would be really interesting and</span> <span data-start="1162.809" data-end="1164.07">if any of you guys know people that work</span> <span data-start="1164.07" data-end="1165.78">on like required ijs or if you're doing</span> <span data-start="1165.78" data-end="1167.49">something like this yourself i would</span> <span data-start="1167.49" data-end="1168.69">love to talk to them because i think</span> <span data-start="1168.69" data-end="1170.13">this is a generic problem that we could</span> <span data-start="1170.13" data-end="1173.49">we could really have you know this</span> <span data-start="1173.49" data-end="1175.59">there's no reason why you'd have to use</span> </p>
<p><span data-start="1175.59" data-end="1177.51">Yui on the client side use a technology</span> <span data-start="1177.51" data-end="1179.25">like this right and so i would love to</span> <span data-start="1179.25" data-end="1181.53">have this be the way that you know to to</span> <span data-start="1181.53" data-end="1184.289">manage your applications javascript</span> <span data-start="1184.289" data-end="1186.84">dependencies a lot of possibilities here</span> <span data-start="1186.84" data-end="1189.059">so recap client-side module loading is</span> <span data-start="1189.059" data-end="1191.22">hard this this system hopefully makes</span> <span data-start="1191.22" data-end="1193.38">that easier and one size doesn't always</span> <span data-start="1193.38" data-end="1195.27">fit all like the traditional nodejs</span> <span data-start="1195.27" data-end="1196.71">scale and stuff didn't work for us so we</span> <span data-start="1196.71" data-end="1198.63">wanted to test it and if you guys are</span> <span data-start="1198.63" data-end="1200.159">more interested in that we've we are</span> <span data-start="1200.159" data-end="1202.799">hoping to have this replace eventually</span> <span data-start="1202.799" data-end="1205.409">place the ad the default way of using</span> </p>
<p><span data-start="1205.409" data-end="1208.679">Yui be using the system so it needs to</span> <span data-start="1208.679" data-end="1210.36">need to scale and so that's what that's</span> <span data-start="1210.36" data-end="1211.789">something that we're working on at Yahoo</span> <span data-start="1211.789" data-end="1213.84">so if you're interested in that please</span> <span data-start="1213.84" data-end="1214.72">come talk to me</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
