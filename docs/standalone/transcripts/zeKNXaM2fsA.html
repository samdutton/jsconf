<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="JSConf transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>zeKNXaM2fsA</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/zeKNXaM2fsA?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="6.259" data-end="10.38">all right five minutes for Simon all</span> <span data-start="10.38" data-end="11.12">right</span> <span data-start="11.12" data-end="13.44">this animation is called minimum viable</span> <span data-start="13.44" data-end="15.21">warfare at the bottom we have a base it</span> <span data-start="15.21" data-end="16.83">can fire a single shot in its defense</span> <span data-start="16.83" data-end="18.539">raining down from the sky and the stars</span> <span data-start="18.539" data-end="20.4">their sole intent is to destroy the base</span> <span data-start="20.4" data-end="22.56">this is it this is the foundation of</span> <span data-start="22.56" data-end="23.939">some kind of game of simulation but I've</span> <span data-start="23.939" data-end="25.039">only got five minutes</span> <span data-start="25.039" data-end="27.57">so let's tweak the parameters here the</span> <span data-start="27.57" data-end="29.13">scar can fire two missiles at a time to</span> <span data-start="29.13" data-end="31.289">try and destroy the base this is wings</span> <span data-start="31.289" data-end="33.3">heavily in the skies favor it's gonna</span> <span data-start="33.3" data-end="35.13">win quickly every time</span> <span data-start="35.13" data-end="37.469">so let's tweak again this is more like</span> <span data-start="37.469" data-end="39.12">it here the bases can fire as many shots</span> <span data-start="39.12" data-end="40.41">as they want to try and defend</span> <span data-start="40.41" data-end="41.969">themselves from their missiles raining</span> <span data-start="41.969" data-end="44.1">down from the sky and impregnable</span> <span data-start="44.1" data-end="47.91">defense and then it's just a matter of</span> <span data-start="47.91" data-end="49.59">time but I have not got much time so</span> <span data-start="49.59" data-end="52.379">let's tweak again full blaze everybody</span> <span data-start="52.379" data-end="53.969">can fire as many things as they want to</span> <span data-start="53.969" data-end="55.649">try and defeat their enemy it's amazing</span> <span data-start="55.649" data-end="57.6">it looks like fireworks but the astute</span> </p>
<p><span data-start="57.6" data-end="60.09">JavaScript will observe the browser is</span> <span data-start="60.09" data-end="62.16">starting to Jiang what's the jig is</span> <span data-start="62.16" data-end="63.899">nearly tweeted 16 and you should own our</span> <span data-start="63.899" data-end="66.15">water tankers by now tanking is when we</span> <span data-start="66.15" data-end="67.439">ask the browser to do too many things</span> <span data-start="67.439" data-end="69.57">and too little time everything gets a</span> <span data-start="69.57" data-end="71.34">little bit shaky let's see some</span> <span data-start="71.34" data-end="72.84">Diagnostics there are two things going</span> <span data-start="72.84" data-end="74.76">on we have an update phase and a paint</span> <span data-start="74.76" data-end="76.68">phase in the update phase we do all the</span> <span data-start="76.68" data-end="78.21">mess required to work out where our</span> <span data-start="78.21" data-end="80.28">things should be on the screen and the</span> <span data-start="80.28" data-end="81.72">paint waves we draw them to the screen</span> <span data-start="81.72" data-end="84.45">to achieve smooth animation we need to</span> <span data-start="84.45" data-end="86.64">do this 60 times a second this gives us</span> <span data-start="86.64" data-end="88.38">a time budget of approximately 16</span> <span data-start="88.38" data-end="90.63">milliseconds to do all of our work if we</span> <span data-start="90.63" data-end="92.52">exceed this time budget the Diagnostics</span> <span data-start="92.52" data-end="94.89">go red and the browser starts to jam but</span> <span data-start="94.89" data-end="95.939">not all hope is lost</span> <span data-start="95.939" data-end="97.65">we're getting nearly 2000 things on the</span> <span data-start="97.65" data-end="99.869">screen 60 times a second before the</span> <span data-start="99.869" data-end="101.28">browser even starts the breaker switch</span> <span data-start="101.28" data-end="103.47">in more detail this is what we're doing</span> <span data-start="103.47" data-end="105.45">forever and ever we go update painting</span> <span data-start="105.45" data-end="107.82">this is called the game loop but do not</span> <span data-start="107.82" data-end="109.53">do it like this because you will burn</span> <span data-start="109.53" data-end="111.869">out your CPU so instead we use window</span> <span data-start="111.869" data-end="113.79">don't requestanimationframe here we ask</span> <span data-start="113.79" data-end="115.35">the rounds of the court us when it's</span> <span data-start="115.35" data-end="116.909">ready to draw a frame on the screen we</span> <span data-start="116.909" data-end="119.1">update we paint and the process repeats</span> <span data-start="119.1" data-end="121.2">in an ideal world the browser will call</span> <span data-start="121.2" data-end="123.299">us 60 times a second and we will get</span> <span data-start="123.299" data-end="125.18">smooth animations</span> <span data-start="125.18" data-end="127.1">we have a set of variables we use to</span> <span data-start="127.1" data-end="128.84">represent the universe we have created</span> <span data-start="128.84" data-end="130.25">we update these variables according to</span> <span data-start="130.25" data-end="131.63">some rules we use the values of the</span> <span data-start="131.63" data-end="133.28">variables to tell us where the toss up</span> <span data-start="133.28" data-end="135.08">on the screen with clear I painted</span> <span data-start="135.08" data-end="137.24">surface we draw stuff to it easy job</span> <span data-start="137.24" data-end="139.55">done but real life is never easy there's</span> <span data-start="139.55" data-end="141.62">no guarantee the browser will call us 60</span> <span data-start="141.62" data-end="142.85">times a second to do there's other</span> <span data-start="142.85" data-end="144.23">things to do and we are not that</span> <span data-start="144.23" data-end="145.94">important so we have to work out the</span> <span data-start="145.94" data-end="147.41">time difference between now and the last</span> <span data-start="147.41" data-end="149.18">time the browser called us and use that</span> <span data-start="149.18" data-end="150.8">to create a scaling factor for all of</span> <span data-start="150.8" data-end="152.15">our physics if we do this right along</span> <span data-start="152.15" data-end="154.13">the edge cases are covered here we will</span> <span data-start="154.13" data-end="156.71">get smooth animation when it's time to</span> <span data-start="156.71" data-end="158.54">draw a mutation our 5 canvas we have an</span> </p>
<p><span data-start="158.54" data-end="160.25">HTML tag we get a reference to they take</span> <span data-start="160.25" data-end="161.63">from the Dom we get a drawing context</span> <span data-start="161.63" data-end="162.92">from that reference we call methods or</span> <span data-start="162.92" data-end="164.36">make context to draw stuff in your</span> <span data-start="164.36" data-end="166.51">canvas in your browser on your screen</span> <span data-start="166.51" data-end="169.58">but to truly understand html5 canvas we</span> <span data-start="169.58" data-end="171.14">must understand how a computer display</span> <span data-start="171.14" data-end="173.63">works back when the first Star Wars</span> <span data-start="173.63" data-end="175.58">movie came out computer displays were</span> <span data-start="175.58" data-end="176.93">made out of a glass tube when in the</span> <span data-start="176.93" data-end="178.13">back glass roof was larger rectangular</span> <span data-start="178.13" data-end="179.78">on the interior surface of a cloud</span> <span data-start="179.78" data-end="183.34">rectangle was painted a token phosphor</span> <span data-start="183.34" data-end="185.63">at the rear end of the tube there was an</span> <span data-start="185.63" data-end="187.1">electron gun it would fire a stream of</span> <span data-start="187.1" data-end="188.39">electrons down the tube towards the</span> <span data-start="188.39" data-end="189.56">phosphor coated surface when the</span> <span data-start="189.56" data-end="190.82">electrons strike the fossil they will</span> <span data-start="190.82" data-end="192.65">cause it to glow temporarily red around</span> <span data-start="192.65" data-end="194.39">the stream of electrons was a set of</span> <span data-start="194.39" data-end="195.8">maintenance these magnets can cause the</span> <span data-start="195.8" data-end="197.54">beam to be deflected to any location on</span> <span data-start="197.54" data-end="199.55">the front of the glass tube now if you</span> <span data-start="199.55" data-end="200.69">have a region of memory and you</span> <span data-start="200.69" data-end="202.04">sequentially read the values of their</span> <span data-start="202.04" data-end="203.45">bits from that memory news the bellies</span> <span data-start="203.45" data-end="204.92">of those fits to modulate the electron</span> <span data-start="204.92" data-end="206.45">beam on and off this is Canada crossing</span> <span data-start="206.45" data-end="208.13">down the front of the glass tube you can</span> <span data-start="208.13" data-end="209.84">go as a representation of Aviles helping</span> <span data-start="209.84" data-end="211.19">those fists to be painted to the front</span> <span data-start="211.19" data-end="212.9">of your screen this is how a bitmap</span> <span data-start="212.9" data-end="215.39">display works we call this a raster scan</span> <span data-start="215.39" data-end="216.769">display the foundation of all could be</span> <span data-start="216.769" data-end="218.93">the displays in use today but there is</span> <span data-start="218.93" data-end="220.85">another way to do it back in the dawn of</span> <span data-start="220.85" data-end="222.86">continued back in the dawn of computing</span> <span data-start="222.86" data-end="224.84">history computers a file is powerful you</span> <span data-start="224.84" data-end="226.37">would implement your display in hardware</span> <span data-start="226.37" data-end="227.33">you would see the list of foreign</span> <span data-start="227.33" data-end="228.92">instructions to your display circuitry</span> <span data-start="228.92" data-end="230.87">these instructions will cause a Lincoln</span> <span data-start="230.87" data-end="232.489">beam to be deflected around of the front</span> <span data-start="232.489" data-end="233.51">of the screen much like you would</span> <span data-start="233.51" data-end="235.01">reliance on a piece of paper with a</span> <span data-start="235.01" data-end="237.17">pencil this technique is called Victor</span> <span data-start="237.17" data-end="239">display Victor the splicer one amazing</span> <span data-start="239" data-end="240.35">properties simply by multiplying the</span> <span data-start="240.35" data-end="241.64">intensity of the magnet set the flick</span> <span data-start="241.64" data-end="242.78">the beam as I scanned it around the</span> <span data-start="242.78" data-end="244.67">front of the classroom you can cause the</span> <span data-start="244.67" data-end="246.049">image to be scaled up and down with</span> <span data-start="246.049" data-end="247.7">incredible ease just for modifying the</span> <span data-start="247.7" data-end="249.41">value of one is 2 bytes of memory to do</span> <span data-start="249.41" data-end="250.58">the same thing with a raster scan</span> <span data-start="250.58" data-end="252.23">display requires of art of convex nest</span> <span data-start="252.23" data-end="254.209">you have to calculate the position of</span> <span data-start="254.209" data-end="255.709">every pixel you want to draw on the</span> <span data-start="255.709" data-end="257.54">screen tragically the technique of</span> <span data-start="257.54" data-end="258.56">victor displays be</span> <span data-start="258.56" data-end="261.079">lost to the sands of time but html5</span> <span data-start="261.079" data-end="262.52">canvas gives us the best of both worlds</span> <span data-start="262.52" data-end="264.68">we can rotate the scale and translate as</span> <span data-start="264.68" data-end="266.419">was incredibly safe it Nets around the</span> <span data-start="266.419" data-end="268.4">screen with abandon and if you look</span> <span data-start="268.4" data-end="270.53">closely you will see vestigial move two</span> <span data-start="270.53" data-end="272.12">lines you can I said either your direct</span> <span data-start="272.12" data-end="273.77">descendants of the original instructions</span> <span data-start="273.77" data-end="275.69">used to deflect an electron beam around</span> <span data-start="275.69" data-end="278.419">the front of a glass tube just how much</span> <span data-start="278.419" data-end="279.77">while the band oh no here you ask</span> <span data-start="279.77" data-end="281.96">here we try and draw as many shapes as</span> <span data-start="281.96" data-end="283.31">we can we fill up the screen with shapes</span> <span data-start="283.31" data-end="285.08">60 times a second before destroying each</span> <span data-start="285.08" data-end="287.47">type is translated and rotated weakening</span> <span data-start="287.47" data-end="289.7">2700 shapes on the screen a 5.5</span> <span data-start="289.7" data-end="291.83">milliseconds if you're trying to do 65 a</span> <span data-start="291.83" data-end="293.81">second animation you still have 10</span> <span data-start="293.81" data-end="295.82">milliseconds left every frame to do all</span> <span data-start="295.82" data-end="298.639">of your math and JavaScript can do a lot</span> <span data-start="298.639" data-end="307.76">of man in 10 milliseconds thank you with</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
