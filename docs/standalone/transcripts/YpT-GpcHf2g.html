<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="JSConf transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>YpT-GpcHf2g</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/YpT-GpcHf2g?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="10.53" data-end="15.07">so my talk is about building your own</span> <span data-start="15.07" data-end="18.16">programming language and using</span> <span data-start="18.16" data-end="21.64">javascript traditionally most language</span> <span data-start="21.64" data-end="25.949">building tools are saying C or C++ or</span> <span data-start="25.949" data-end="28.769">some other type of language that's more</span> <span data-start="28.769" data-end="31.81">you know in the operating system you</span> <span data-start="31.81" data-end="34.18">know one of those kind of languages</span> <span data-start="34.18" data-end="36.13">JavaScript is usually been used in the</span> <span data-start="36.13" data-end="38.289">browser but now we have environments</span> <span data-start="38.289" data-end="41.379">like common Jas node you can do these</span> <span data-start="41.379" data-end="43.329">kind of things just on your command line</span> <span data-start="43.329" data-end="49.3">without using a browser and the basic</span> <span data-start="49.3" data-end="51.19">idea I want to get across before we dive</span> <span data-start="51.19" data-end="53.53">into it is you know every program we</span> <span data-start="53.53" data-end="56.289">write is basically an interpreter we we</span> <span data-start="56.289" data-end="59.859">get data as input we execute based on</span> <span data-start="59.859" data-end="64.12">the rules of the program but some inter</span> <span data-start="64.12" data-end="67.18">are some programs take other programs as</span> <span data-start="67.18" data-end="70.09">input and so the other program is</span> <span data-start="70.09" data-end="73.18">transfer transformative data and the</span> <span data-start="73.18" data-end="75.28">program our compiler or our interpreter</span> <span data-start="75.28" data-end="77.92">executes rules based on how we want</span> <span data-start="77.92" data-end="80.229">those Chuck that structure to be</span> <span data-start="80.229" data-end="87.009">interpreted so program equals death and</span> <span data-start="87.009" data-end="90.97">basically compiler is you know just a</span> <span data-start="90.97" data-end="94.509">translator so you take one language you</span> <span data-start="94.509" data-end="96.939">figure out what the meanings are of the</span> <span data-start="96.939" data-end="98.95">symbols the words in the language and</span> <span data-start="98.95" data-end="102.189">you output another language so you know</span> </p>
<p><span data-start="102.189" data-end="105.04">Google Translate is a compiler of you</span> <span data-start="105.04" data-end="106.869">know say English to Spanish or something</span> <span data-start="106.869" data-end="112.88">like that so same basic idea</span> <span data-start="112.89" data-end="118.05">and this is a just a basic ordering of</span> <span data-start="118.05" data-end="120.39">how things go first you have your parser</span> <span data-start="120.39" data-end="122.52">which handles the syntax of the language</span> <span data-start="122.52" data-end="124.53">it figures out what the characters mean</span> <span data-start="124.53" data-end="126.48">what the words are and like what</span> <span data-start="126.48" data-end="129.03">sentences are valid in the language and</span> <span data-start="129.03" data-end="131.97">if you do a syntax error that's like you</span> <span data-start="131.97" data-end="133.95">know a malformed sentence in your</span> <span data-start="133.95" data-end="136.62">language semantic analysis we won't do</span> <span data-start="136.62" data-end="138.69">much of that we'll just that stuff like</span> <span data-start="138.69" data-end="140.94">if you want to do type checking make</span> <span data-start="140.94" data-end="143.19">sure things are you know correct but</span> <span data-start="143.19" data-end="145.14">we'll just basically just print out what</span> <span data-start="145.14" data-end="148.14">we get in in a dull language and that's</span> <span data-start="148.14" data-end="151.47">at the bottom code generation and your</span> <span data-start="151.47" data-end="155.459">interpreter and of course all this is</span> <span data-start="155.459" data-end="158.22">gonna be done in JavaScript so it's</span> <span data-start="158.22" data-end="161.09">easier for all of us to hack on and</span> <span data-start="161.09" data-end="163.67">maybe you come up with some new ideas</span> <span data-start="163.67" data-end="167.13">since JavaScript programmers are come in</span> <span data-start="167.13" data-end="170.31">lots of different varieties so the first</span> <span data-start="170.31" data-end="173.57">thing we need to handle the syntax is a</span> <span data-start="173.57" data-end="176.459">we're gonna use a parser generator you</span> <span data-start="176.459" data-end="178.17">could of course you don't do some ad hoc</span> <span data-start="178.17" data-end="180.75">form of you know reading each character</span> <span data-start="180.75" data-end="183.12">and a string input or something in you</span> <span data-start="183.12" data-end="184.83">know do your a roll your own way to</span> <span data-start="184.83" data-end="187.62">interpret or parse the language but</span> <span data-start="187.62" data-end="189.65">we're gonna use a partial generator</span> <span data-start="189.65" data-end="192.78">which sort of makes things easier and</span> <span data-start="192.78" data-end="195.33">these are a few available ones in</span> </p>
<p><span data-start="195.33" data-end="202.35">JavaScript Oh Maddy Jas Jason and PEG</span> <span data-start="202.35" data-end="208.5">Jas and Jay SCC and those two are kind</span> <span data-start="208.5" data-end="213.95">of newer I like those ones a lot but</span> <span data-start="213.95" data-end="218.1">Jason is the one I wrote so we're gonna</span> <span data-start="218.1" data-end="221.31">be using that one today and Jeremy who</span> <span data-start="221.31" data-end="223.68">did a talk on CoffeeScript earlier today</span> <span data-start="223.68" data-end="228.51">he used Jason for that language to do</span> <span data-start="228.51" data-end="231.03">the parsing phase with it and he said</span> <span data-start="231.03" data-end="234.06">it's it's a lot faster right now then</span> <span data-start="234.06" data-end="236.489">the other ones which ok you know I'll</span> <span data-start="236.489" data-end="242.13">take that so first we need a grammar a</span> <span data-start="242.13" data-end="245.51">grammar describes you know what valid</span> <span data-start="245.51" data-end="248.879">character what valid tokens are and the</span> <span data-start="248.879" data-end="252.72">structure so I don't know if you guys</span> <span data-start="252.72" data-end="254.519">have ever checked out a language</span> <span data-start="254.519" data-end="256.65">specification before if you've you know</span> <span data-start="256.65" data-end="260.85">this is snippet from the ACMA script</span> <span data-start="260.85" data-end="262.62">specification the fifth edition so it</span> <span data-start="262.62" data-end="266.58">just came out and this is the JSON since</span> </p>
<p><span data-start="266.58" data-end="268.56">JSON was added to the language they have</span> <span data-start="268.56" data-end="270.449">a grammar describing JSON right there</span> <span data-start="270.449" data-end="273.78">and our parser generator takes in a</span> <span data-start="273.78" data-end="278.15">description basically just like that and</span> <span data-start="278.15" data-end="291.21">oh so I got to kind of move the window</span> <span data-start="291.21" data-end="308.699">from this view to where did it go</span> <span data-start="308.709" data-end="331.52">and window kind of ran away</span> <span data-start="331.53" data-end="336.05">hmm</span> <span data-start="336.06" data-end="339.92">well if I can't find this window soon</span> <span data-start="339.92" data-end="348.82">well let me</span> <span data-start="348.83" data-end="354.93">actually there's a mouse</span> <span data-start="354.94" data-end="362.08">I'll just open up a new window</span> <span data-start="362.09" data-end="367.41">and or is it yeah this is when I figure</span> <span data-start="367.41" data-end="371.85">out the command line and this started</span> <span data-start="371.85" data-end="399.28">out mostly like all live demos do so</span> <span data-start="399.29" data-end="401.9">well I can show you the command line</span> <span data-start="401.9" data-end="403.91">version I wasn't to show you the website</span> <span data-start="403.91" data-end="407.87">but that's alright let me just bring</span> <span data-start="407.87" data-end="425.34">over a show and</span> <span data-start="425.35" data-end="431.53">that's not the right one so the grammar</span> <span data-start="431.53" data-end="435.69">file is as a extension of Jason which is</span> <span data-start="435.69" data-end="438.49">the grammar format and it's has ever</span> <span data-start="438.49" data-end="442.45">anyone ever heard of bison okay yeah so</span> <span data-start="442.45" data-end="443.5">we have some language people in here</span> <span data-start="443.5" data-end="447.22">it's basically the syntax of the actual</span> <span data-start="447.22" data-end="449.92">grammar form is almost basically the</span> <span data-start="449.92" data-end="452.2">same as bison syntax so it makes it easy</span> <span data-start="452.2" data-end="454.03">to port grammars that are already</span> <span data-start="454.03" data-end="455.86">written for bison which is are a lot</span> <span data-start="455.86" data-end="458.17">because you know bison and yak have been</span> <span data-start="458.17" data-end="461.53">around you know how are you however many</span> <span data-start="461.53" data-end="470.02">years so and what I've defined here is</span> <span data-start="470.02" data-end="473.28">basically a simple language it only has</span> <span data-start="473.28" data-end="476.8">variables that you can assign a value to</span> <span data-start="476.8" data-end="481.33">and then B plus expression so you can</span> <span data-start="481.33" data-end="484.3">add add variables together and assign it</span> <span data-start="484.3" data-end="485.08">to another variable</span> <span data-start="485.08" data-end="490.36">so very simple syntax in the first line</span> <span data-start="490.36" data-end="501.77">is basically saying ignore whitespace</span> <span data-start="501.78" data-end="514.11">zoom in a little bit</span> <span data-start="514.12" data-end="530.47">yeah it's hard on this screen</span> <span data-start="530.48" data-end="535.94">all right yes that's better</span> <span data-start="535.94" data-end="540.09">so the first line basically says ignore</span> <span data-start="540.09" data-end="542.01">white space so we don't care how much</span> <span data-start="542.01" data-end="544.14">white space is between two tokens and</span> <span data-start="544.14" data-end="546.69">language so you can have a variable</span> <span data-start="546.69" data-end="549.45">equals and like a long line of white</span> <span data-start="549.45" data-end="551.46">space you know a number or something</span> <span data-start="551.46" data-end="557.279">like that actually let me show you this</span> <span data-start="557.279" data-end="597.01">is an example of</span> <span data-start="597.02" data-end="601.4">yeah I'm not sure</span> <span data-start="601.41" data-end="608.499">all right so an example of the language</span> <span data-start="608.509" data-end="610.709">so our language is actually just going</span> <span data-start="610.709" data-end="615.329">to look like this x equals five or it's</span> <span data-start="615.329" data-end="616.439">not ugly using the equal sign that's</span> <span data-start="616.439" data-end="621.059">kind of boring we'll use X is five let's</span> <span data-start="621.059" data-end="631.97">say Y is 6 and Z is y all right so</span> <span data-start="631.97" data-end="634.529">that's gonna be the syntax for you know</span> <span data-start="634.529" data-end="635.789">the basics of our language then I don't</span> <span data-start="635.789" data-end="640.829">have a sort of a method to a built-in</span> <span data-start="640.829" data-end="649.379">method to show the value of that and all</span> <span data-start="649.379" data-end="655.39">right so keep that in mind</span> <span data-start="655.4" data-end="664.85">all right so back to the grammar all</span> <span data-start="664.85" data-end="667.16">right so that's how you you can make</span> <span data-start="667.16" data-end="668.87">sense of what these mean a little better</span> <span data-start="668.87" data-end="671.95">now the right there you're saying is and</span> <span data-start="671.95" data-end="674.93">you're returning what is the token so</span> <span data-start="674.93" data-end="677.029">you're basically saying match these this</span> <span data-start="677.029" data-end="678.29">is a regular expression on this side</span> <span data-start="678.29" data-end="682.7">match the exact characters is and then</span> <span data-start="682.7" data-end="686.48">return a token which is the is token and</span> <span data-start="686.48" data-end="688.04">for show it's the same thing you're</span> <span data-start="688.04" data-end="689.27">matching that those are like key words</span> <span data-start="689.27" data-end="691.58">so you're match that key word you return</span> <span data-start="691.58" data-end="694.46">show the show token and you can see a</span> <span data-start="694.46" data-end="696.52">number is just a regular expression</span> <span data-start="696.52" data-end="699.86">returning the number token and this this</span> <span data-start="699.86" data-end="701.779">is also if you're familiar of bison</span> <span data-start="701.779" data-end="703.85">you're probably familiar with Flex which</span> <span data-start="703.85" data-end="706.85">this syntax tries to mimic the Flex</span> <span data-start="706.85" data-end="709.55">syntax so it's easier to port existing</span> <span data-start="709.55" data-end="712.49">grammars and then so and the rest of</span> <span data-start="712.49" data-end="714.02">them you can kind of see and there's a</span> <span data-start="714.02" data-end="716.92">special one for the end of the file</span> <span data-start="716.92" data-end="722.54">right and then and so this is an unlike</span> <span data-start="722.54" data-end="726.08">bison flex we actually have the the</span> <span data-start="726.08" data-end="728.3">lexical scanner stuff inside of the</span> <span data-start="728.3" data-end="730.88">bison file so it's easier to just</span> <span data-start="730.88" data-end="733.66">combine it and not have two files</span> <span data-start="733.66" data-end="735.589">basically I did that so you can do it on</span> <span data-start="735.589" data-end="737.15">the website without having like two</span> <span data-start="737.15" data-end="738.56">boxes you can just have it all in one</span> <span data-start="738.56" data-end="742.01">text field and compile it and it's a</span> <span data-start="742.01" data-end="745.19">website as JSON org and I mean that the</span> <span data-start="745.19" data-end="747.56">way to try it is actually on the website</span> <span data-start="747.56" data-end="750.77">so you can experiment with it and</span> <span data-start="750.77" data-end="752.75">there's examples that load up on the try</span> <span data-start="752.75" data-end="758.93">page but moving down past the the taupe</span> <span data-start="758.93" data-end="760.12">the tokenizer</span> <span data-start="760.12" data-end="763.04">so we have the tokens they're sort of</span> <span data-start="763.04" data-end="765.47">like words we have a sort of a higher</span> <span data-start="765.47" data-end="767.36">conceptual level now not just characters</span> <span data-start="767.36" data-end="770.36">we have tokens so we move down to the</span> <span data-start="770.36" data-end="773.74">actual defining what are valid</span> <span data-start="773.74" data-end="777.34">combinations of those words so</span> <span data-start="777.34" data-end="788.38">a program you see the first one so a</span> <span data-start="788.38" data-end="794.95">program is a statement list and followed</span> <span data-start="794.95" data-end="798.43">by an end-of-file so a statement list</span> <span data-start="798.43" data-end="800.08">you jump down to that one a statement</span> <span data-start="800.08" data-end="803.26">list can be a statement followed by a</span> <span data-start="803.26" data-end="808.78">period and a statement list the</span> <span data-start="808.78" data-end="810.7">statement list rule is also cursive</span> <span data-start="810.7" data-end="812.62">that's how you get sort of like a list</span> <span data-start="812.62" data-end="815.17">it recursively calls itself so you can</span> <span data-start="815.17" data-end="823">get a series of those statements and the</span> <span data-start="823" data-end="826.87">statement rule is either an identifier</span> <span data-start="826.87" data-end="834.67">followed by is and an expression and the</span> <span data-start="834.67" data-end="837.19">you'll see those mustache lines between</span> <span data-start="837.19" data-end="839.71">the actual rule definitions and those</span> <span data-start="839.71" data-end="841.15">are the actions that are sort of</span> <span data-start="841.15" data-end="843.91">building up the AST because we want to</span> <span data-start="843.91" data-end="845.89">get transform the DES characters and the</span> <span data-start="845.89" data-end="847.84">tokens into something a data structure</span> <span data-start="847.84" data-end="850.84">we can work with the compiler and or the</span> <span data-start="850.84" data-end="854.53">interpreter so you'll see those action</span> <span data-start="854.53" data-end="856.63">lines are just building up sort of an</span> <span data-start="856.63" data-end="858.64">array that has you know what the the</span> <span data-start="858.64" data-end="862.45">token type is and somewhat extra</span> <span data-start="862.45" data-end="864.13">metadata about it and we'll get into</span> <span data-start="864.13" data-end="868.06">that little bit later but so a statement</span> <span data-start="868.06" data-end="870.37">can be an identifier with the is token</span> <span data-start="870.37" data-end="871.87">and an expression so that's the</span> <span data-start="871.87" data-end="875.23">assignment and then show which is our</span> <span data-start="875.23" data-end="876.76">special built-in function to show the</span> <span data-start="876.76" data-end="880.66">value with an expression and then of</span> <span data-start="880.66" data-end="882.31">course an expression can be an</span> <span data-start="882.31" data-end="886.24">identifier a number or an expression</span> <span data-start="886.24" data-end="888.73">plus another expression so that's also</span> <span data-start="888.73" data-end="891.76">kind of recursive that you can define an</span> <span data-start="891.76" data-end="894.85">expression to be defined within itself</span> <span data-start="894.85" data-end="898.84">so these will get expanded into either a</span> <span data-start="898.84" data-end="904.079">number or an identify</span> <span data-start="904.089" data-end="909.619">and that is the whole grammar right</span> <span data-start="909.619" data-end="912.679">there and talking about the actions a</span> <span data-start="912.679" data-end="914.809">little bit more the thought the double</span> <span data-start="914.809" data-end="916.67">dollar sign is actually sort of like a</span> <span data-start="916.67" data-end="918.889">return value so what are you going to</span> <span data-start="918.889" data-end="922.009">return from that that action and</span> <span data-start="922.009" data-end="925.069">whenever it it and whenever the parser</span> <span data-start="925.069" data-end="927.259">matches say an identifier it's going to</span> <span data-start="927.259" data-end="929.839">run that action and return it and then</span> <span data-start="929.839" data-end="933.129">say this expression X plus expression</span> <span data-start="933.129" data-end="935.149">these expressions are going to be</span> <span data-start="935.149" data-end="938.72">whatever is returned by they identifier</span> <span data-start="938.72" data-end="941.419">so this action for the expression plus</span> <span data-start="941.419" data-end="944.839">expression is is going to be combined</span> <span data-start="944.839" data-end="946.759">combining the result of one of these</span> <span data-start="946.759" data-end="949.579">actions and so there so it's it's</span> <span data-start="949.579" data-end="962.179">building up so the AST that way yeah not</span> <span data-start="962.179" data-end="963.559">exactly the regular expressions but</span> <span data-start="963.559" data-end="967.549">whatever position the the token is and</span> <span data-start="967.549" data-end="969.679">this the rule there whatever positioned</span> <span data-start="969.679" data-end="971.239">offset of the position of that token is</span> <span data-start="971.239" data-end="973.459">what that dollar assigned number is</span> <span data-start="973.459" data-end="978.86">going to reference to so yep and then</span> <span data-start="978.86" data-end="981.339">you'll notice that that the top</span> <span data-start="981.339" data-end="983.689">actually has a return statement and</span> <span data-start="983.689" data-end="986.449">that's returning the value of whatever</span> <span data-start="986.449" data-end="988.279">the program is at that point and so all</span> <span data-start="988.279" data-end="990.47">of these it it's a bottom-up parsing</span> <span data-start="990.47" data-end="994.069">algorithm so all the nodes sort of start</span> <span data-start="994.069" data-end="995.809">at the bottom and then it works away all</span> <span data-start="995.809" data-end="998.6">the way up to the program at the top and</span> <span data-start="998.6" data-end="1000.309">then it returns that but you could have</span> <span data-start="1000.309" data-end="1002.319">a return statement like anywhere in the</span> <span data-start="1002.319" data-end="1003.85">rules that would it could exit out of</span> <span data-start="1003.85" data-end="1007.869">the parser early so and inside of these</span> <span data-start="1007.869" data-end="1009.249">actions is well it's all just JavaScript</span> <span data-start="1009.249" data-end="1011.35">code so</span> <span data-start="1011.35" data-end="1012.759">those actions are just a regular</span> </p>
<p><span data-start="1012.759" data-end="1015.519">JavaScript code you can put whatever you</span> <span data-start="1015.519" data-end="1021.85">want in there right okay so at that</span> <span data-start="1021.85" data-end="1029.34">point we have a grammar we can work with</span> <span data-start="1029.35" data-end="1035.089">and I'm going to show you a little bit</span> <span data-start="1035.089" data-end="1039.169">of the the code generation phase so once</span> <span data-start="1039.169" data-end="1041.48">you have your program parsed and you</span> <span data-start="1041.48" data-end="1044.659">have a ast so we just have like a array</span> <span data-start="1044.659" data-end="1047">with sub arrays nested arrays inside of</span> <span data-start="1047" data-end="1047.24">them</span> <span data-start="1047.24" data-end="1049.58">that's our ast representation you could</span> <span data-start="1049.58" data-end="1052.279">also do create an object instead of just</span> <span data-start="1052.279" data-end="1054.14">an array you can you would you probably</span> <span data-start="1054.14" data-end="1055.669">want to create an object in CoffeeScript</span> <span data-start="1055.669" data-end="1059.12">does that because I'll show you how it</span> <span data-start="1059.12" data-end="1072.5">looks here yeah so we see our program</span> <span data-start="1072.5" data-end="1075.37">again and actually this first line is</span> <span data-start="1075.37" data-end="1077.659">you'll notice that it's come and Jas</span> <span data-start="1077.659" data-end="1080.539">requires statement so I'm using actually</span> <span data-start="1080.539" data-end="1083.269">normal on the command line to run the</span> <span data-start="1083.269" data-end="1087.08">parser so that's just requiring the</span> <span data-start="1087.08" data-end="1091.94">parser Oh actually yeah the way to I</span> <span data-start="1091.94" data-end="1094.88">should so the way to generate the actual</span> <span data-start="1094.88" data-end="1097.299">parser script so you have your grammar</span> <span data-start="1097.299" data-end="1100.46">defined in that grammar JSON file and if</span> <span data-start="1100.46" data-end="1102.22">you want to actually create the script</span> <span data-start="1102.22" data-end="1104.899">of the parser because this is a partial</span> <span data-start="1104.899" data-end="1106.789">generator so it generates the parser</span> <span data-start="1106.789" data-end="1112">you'll use narwall grammar to jason and</span> <span data-start="1112" data-end="1114.23">that's what actually creates an a</span> </p>
<p><span data-start="1114.23" data-end="1116.149">JavaScript parser that you can include</span> <span data-start="1116.149" data-end="1117.59">it doesn't have any dependencies you</span> <span data-start="1117.59" data-end="1119.149">just include that javascript file and</span> <span data-start="1119.149" data-end="1127.86">send it your input it outputs the ast so</span> <span data-start="1127.87" data-end="1142">oh and I think I have it</span> <span data-start="1142.01" data-end="1144.5">well I already have a generated one</span> <span data-start="1144.5" data-end="1147.88">already so we'll just ignore that and</span> <span data-start="1147.88" data-end="1153.169">get into the the cogeneration file so</span> <span data-start="1153.169" data-end="1159.559">we've created our parser module and</span> <span data-start="1159.559" data-end="1163.04">anyway so we require our parser at the</span> <span data-start="1163.04" data-end="1166.64">top and again the fine is our simple</span> <span data-start="1166.64" data-end="1172.04">program X is 5 y is 6 Z is X plus y and</span> <span data-start="1172.04" data-end="1175.94">then it shows E and then this is just</span> <span data-start="1175.94" data-end="1179.27">some you know our ast is what we</span> <span data-start="1179.27" data-end="1182.33">returned from our parse function so the</span> <span data-start="1182.33" data-end="1183.62">person we generate has a parse function</span> <span data-start="1183.62" data-end="1186.11">that you send in the input so a string</span> <span data-start="1186.11" data-end="1189.11">program it returns the ast which is in</span> <span data-start="1189.11" data-end="1193.33">our case is a arrays nested arrays and</span> <span data-start="1193.33" data-end="1196.09">then we have a code generation function</span> <span data-start="1196.09" data-end="1200.33">that we send the AST to and at the end</span> <span data-start="1200.33" data-end="1202.73">we'll print the source of but this code</span> <span data-start="1202.73" data-end="1204.41">generation function is just you know a</span> <span data-start="1204.41" data-end="1207.38">big switch statement and that's why this</span> <span data-start="1207.38" data-end="1208.79">probably will scale very well if you</span> <span data-start="1208.79" data-end="1209.72">want to do something like CoffeeScript</span> <span data-start="1209.72" data-end="1212.69">you create actual objects for each one</span> <span data-start="1212.69" data-end="1214.16">of these nodes and have it have its own</span> <span data-start="1214.16" data-end="1216.29">cogeneration function that you can just</span> <span data-start="1216.29" data-end="1219.919">call on on the object so that more</span> <span data-start="1219.919" data-end="1222.2">object-oriented approach but for this</span> <span data-start="1222.2" data-end="1225.02">this is what simple I did this last</span> <span data-start="1225.02" data-end="1230.15">night or something so so it's basically</span> <span data-start="1230.15" data-end="1232.88">just a big switch statement and so you</span> <span data-start="1232.88" data-end="1235.7">send it the ast in the top the top array</span> <span data-start="1235.7" data-end="1237.2">and the ast is going to be that program</span> <span data-start="1237.2" data-end="1239.84">note so it's the first part of the ACE</span> <span data-start="1239.84" data-end="1242.419">of the array is going to be program it's</span> <span data-start="1242.419" data-end="1244.91">gonna call a helper function code</span> <span data-start="1244.91" data-end="1249.08">generate on a list which is here in this</span> <span data-start="1249.08" data-end="1252.86">case just a reduce a array reduce so it</span> <span data-start="1252.86" data-end="1254.66">it starts out with a blank string and</span> <span data-start="1254.66" data-end="1258.79">keeps a pending on the next value in the</span> <span data-start="1258.79" data-end="1261.5">so yeah it basically just Co generates</span> <span data-start="1261.5" data-end="1264.44">each each of item in the list and then</span> <span data-start="1264.44" data-end="1268.37">returns that and that's that's that's</span> <span data-start="1268.37" data-end="1269.419">going to be the last one that actually</span> <span data-start="1269.419" data-end="1273.23">runs so basically it's recursive you</span> <span data-start="1273.23" data-end="1275.31">know all the</span> <span data-start="1275.31" data-end="1277.53">children of the node get code generated</span> <span data-start="1277.53" data-end="1279.33">and then that gets included in that</span> <span data-start="1279.33" data-end="1282.87">nodes full text representation so you</span> <span data-start="1282.87" data-end="1284.49">can see a number is just gonna return</span> <span data-start="1284.49" data-end="1287.85">the value of the number and an identity</span> <span data-start="1287.85" data-end="1289.8">just gonna return the string that was</span> <span data-start="1289.8" data-end="1293.25">the name the identifier is name add</span> <span data-start="1293.25" data-end="1297.92">expression code generates the the first</span> <span data-start="1297.92" data-end="1302.06">operand and then the second operand and</span> <span data-start="1302.06" data-end="1306.18">the is statement the assignment is just</span> <span data-start="1306.18" data-end="1307.89">setting a name equal to so this is</span> <span data-start="1307.89" data-end="1309.57">generating JavaScript code I should say</span> <span data-start="1309.57" data-end="1312.24">so even though it's a is statement our</span> <span data-start="1312.24" data-end="1314.82">assignment was is used is when we're</span> <span data-start="1314.82" data-end="1316.29">generating it we're using the JavaScript</span> <span data-start="1316.29" data-end="1318.45">syntax so it's equal sign here and then</span> <span data-start="1318.45" data-end="1322.26">at the end you can see the semicolon and</span> <span data-start="1322.26" data-end="1326.58">then the show statement is a print so a</span> <span data-start="1326.58" data-end="1328.89">show is just we're just gonna print out</span> <span data-start="1328.89" data-end="1330.63">what that value is if you're doing in</span> <span data-start="1330.63" data-end="1332.34">the browser you do alert or some a</span> <span data-start="1332.34" data-end="1335.97">council that log and then if somehow</span> <span data-start="1335.97" data-end="1339.78">some unknown node gets in there you can</span> <span data-start="1339.78" data-end="1342.96">through Ryton so that's the whole</span> <span data-start="1342.96" data-end="1354.67">program and if we run it</span> <span data-start="1354.68" data-end="1358.26">all right so we ran the the program and</span> <span data-start="1358.26" data-end="1362.28">you can see the JavaScript oh if you</span> <span data-start="1362.28" data-end="1364.89">guys can see it back there the</span> </p>
<p><span data-start="1364.89" data-end="1366.99">JavaScript program is what gets printed</span> <span data-start="1366.99" data-end="1370.11">out so we that's those are the strings</span> <span data-start="1370.11" data-end="1371.37">that we were building up in the Coach n</span> <span data-start="1371.37" data-end="1374.94">function so it translated it from our</span> <span data-start="1374.94" data-end="1376.74">our syntax that we made up we first</span> <span data-start="1376.74" data-end="1378.99">defined in our our grammar format and</span> <span data-start="1378.99" data-end="1381.51">then you know went through and actually</span> <span data-start="1381.51" data-end="1395.34">code generated this code here all right</span> <span data-start="1395.34" data-end="1398.46">demo code generation and instead of just</span> <span data-start="1398.46" data-end="1401.88">compiling doing this translation you can</span> <span data-start="1401.88" data-end="1406.35">also do meta circular evaluator which is</span> <span data-start="1406.35" data-end="1409.47">basically an interpreter that instead of</span> <span data-start="1409.47" data-end="1411.81">just translating this ast into text code</span> <span data-start="1411.81" data-end="1416.4">it does so a read eval print loop kind</span> <span data-start="1416.4" data-end="1418.83">of thing and if you want to if you want</span> <span data-start="1418.83" data-end="1421.92">to know about all that stuff yeah you</span> <span data-start="1421.92" data-end="1425.43">know it's a good a good book especially</span> <span data-start="1425.43" data-end="1427.41">if you're interested in programming</span> <span data-start="1427.41" data-end="1432.81">languages so and I actually I'm working</span> <span data-start="1432.81" data-end="1436.68">on something called Jay sonic it</span> <span data-start="1436.68" data-end="1438.93">basically looks kind of like Lisp but</span> <span data-start="1438.93" data-end="1441.66">instead of s expressions it's JSON so</span> <span data-start="1441.66" data-end="1444.03">and it pretty much looks just like the</span> <span data-start="1444.03" data-end="1446.64">the arrays we were building up arrays</span> <span data-start="1446.64" data-end="1448.17">with notes and that's what Lisp</span> <span data-start="1448.17" data-end="1449.76">basically looks like this looks like an</span> </p>
<p><span data-start="1449.76" data-end="1452.73">AST so you know it's sort of the same</span> <span data-start="1452.73" data-end="1455.49">idea with JSON ik but it it's not really</span> <span data-start="1455.49" data-end="1456.87">practical to write in because it's so</span> <span data-start="1456.87" data-end="1458.31">verbose you know you don't really want</span> <span data-start="1458.31" data-end="1459.99">to you wouldn't really want it writing</span> <span data-start="1459.99" data-end="1462.24">in it for real but it's great for</span> <span data-start="1462.24" data-end="1464.16">experiment experimenting with language</span> <span data-start="1464.16" data-end="1466.2">ideas because if you have your own</span> <span data-start="1466.2" data-end="1468.09">interpreter you can do whatever you want</span> <span data-start="1468.09" data-end="1470.4">if you want to create a closure and then</span> <span data-start="1470.4" data-end="1472.41">have a way to inspect the context of the</span> <span data-start="1472.41" data-end="1474.06">closure while you're inside executing</span> <span data-start="1474.06" data-end="1475.68">code you can do that if you wanted to</span> <span data-start="1475.68" data-end="1478.17">you basically any kind of introspection</span> <span data-start="1478.17" data-end="1480.33">technique you can do or anything you</span> <span data-start="1480.33" data-end="1480.99">want it at all</span> <span data-start="1480.99" data-end="1486.22">so interpreters are fun so</span> <span data-start="1486.23" data-end="1493.38">and that is the end of the top I just</span> <span data-start="1493.38" data-end="1496.98">like that picture so and there's a bunch</span> <span data-start="1496.98" data-end="1500.82">of links this gets posted somewhere and</span> </p>
<p><span data-start="1500.82" data-end="1502.83">I don't have that Jay sonic on github</span> <span data-start="1502.83" data-end="1503.82">yet but I'll probably put that up there</span> <span data-start="1503.82" data-end="1507.69">and up and then yeah in the demo or that</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
