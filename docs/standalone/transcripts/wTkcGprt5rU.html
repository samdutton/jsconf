<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="JSConf transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>wTkcGprt5rU</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/wTkcGprt5rU?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="37.65" data-end="40.51">in 1995 JavaScript was created by</span> <span data-start="40.51" data-end="44.29">Brendan Eich in 1997 ACMA produced the</span> <span data-start="44.29" data-end="46.69">first standards document under the name</span> <span data-start="46.69" data-end="48.85">Atma scripts this wasn't much like the</span> <span data-start="48.85" data-end="50.31">JavaScript that we know of today</span> <span data-start="50.31" data-end="53.59">it did have prototypical inheritance and</span> <span data-start="53.59" data-end="56.079">that's probably about the the main cool</span> <span data-start="56.079" data-end="56.98">thing about it at that point</span> <span data-start="56.98" data-end="59.32">unfortunately we were already stuck with</span> <span data-start="59.32" data-end="60.91">a lot of the bad stuff that we know of</span> <span data-start="60.91" data-end="61.45">today</span> <span data-start="61.45" data-end="65.32">it's just with it automatic semicolon</span> <span data-start="65.32" data-end="68.95">insertion and double eagles oh well in</span> <span data-start="68.95" data-end="70.99">1990 a Tekamah script — was released</span> <span data-start="70.99" data-end="73.96">just a minor revision in Equus script 3</span> <span data-start="73.96" data-end="77.409">was released in 1999 this one was a big</span> <span data-start="77.409" data-end="79.299">release this came with the triple equals</span> <span data-start="79.299" data-end="81.429">operator exceptions at the error object</span> <span data-start="81.429" data-end="84.299">and a whole lot of stuff most notably</span> <span data-start="84.299" data-end="87.069">functional or function expressions so</span> <span data-start="87.069" data-end="89.2">you have closures so Java scripting have</span> <span data-start="89.2" data-end="92.229">closures for four years it's crazy</span> <span data-start="92.229" data-end="95.38">in 2001 script for started the effort</span> <span data-start="95.38" data-end="96.909">for it started unfortunately it was just</span> <span data-start="96.909" data-end="99.88">too big in too little time and it failed</span> <span data-start="99.88" data-end="101.35">it promised a lot of cool stuff though</span> <span data-start="101.35" data-end="104.17">like type annotations variable D</span> <span data-start="104.17" data-end="105.939">structuring classes and logical stuff</span> <span data-start="105.939" data-end="109.149">according to the ECMO archives ECMO</span> <span data-start="109.149" data-end="111.63">script for just never happened</span> <span data-start="111.63" data-end="114.779">i consecrate v was released in 2008 I</span> <span data-start="114.779" data-end="116.979">came a lot of cool features such as a</span> <span data-start="116.979" data-end="119.289">prettier spud page so we're we have</span> <span data-start="119.289" data-end="121.359">colors now we're not in the 90s anymore</span> <span data-start="121.359" data-end="123.219">it did have a bunch of cool stuff like</span> <span data-start="123.219" data-end="128.2">use strict and a lot of things like</span> <span data-start="128.2" data-end="130.45">getters and setters and JSON parsing but</span> <span data-start="130.45" data-end="131.5">it's really just an incremental</span> <span data-start="131.5" data-end="132.88">improvement it was it was to set the</span> <span data-start="132.88" data-end="134.48">stage for bigger things to</span> <span data-start="134.48" data-end="136.58">and that's where we are right now we</span> <span data-start="136.58" data-end="137.75">almost have the finalized version of</span> </p>
<p><span data-start="137.75" data-end="140.239">Ekman script 6 and this brings back a</span> <span data-start="140.239" data-end="142.73">lot of what we lost in es for things</span> <span data-start="142.73" data-end="144.14">like generators and classes and</span> <span data-start="144.14" data-end="145.97">variability structuring a lot of really</span> <span data-start="145.97" data-end="149.78">cool stuff the problem is that web</span> <span data-start="149.78" data-end="151.91">developers can't use these features yet</span> <span data-start="151.91" data-end="154.01">because we have to wait for all of the</span> <span data-start="154.01" data-end="155.9">browser's to implement them several</span> <span data-start="155.9" data-end="157.31">versions back it has to have the</span> <span data-start="157.31" data-end="159.02">majority of the market share for a</span> <span data-start="159.02" data-end="161.3">normal web developer to use these maybe</span> <span data-start="161.3" data-end="163.37">you're lucky and that you can only</span> <span data-start="163.37" data-end="165.08">target the latest version of chrome of</span> </p>
<p><span data-start="165.08" data-end="166.97">Chrome and Firefox but most web</span> <span data-start="166.97" data-end="168.62">developers have to wait a long time for</span> <span data-start="168.62" data-end="172.61">these things to be implemented so a</span> <span data-start="172.61" data-end="174.17">quick poll how many of you all use</span> <span data-start="174.17" data-end="175.489">variable D structuring in your</span> <span data-start="175.489" data-end="177.519">JavaScript today</span> <span data-start="177.519" data-end="182.87">yeah like 2% of people so 14 years later</span> <span data-start="182.87" data-end="185.72">after we wanted this we still don't have</span> <span data-start="185.72" data-end="188.36">it I mean I understand why I don't blame</span> <span data-start="188.36" data-end="189.92">anybody it's it's a hard process</span> <span data-start="189.92" data-end="191.81">especially JavaScript because there's so</span> <span data-start="191.81" data-end="195.92">many really advanced implementations and</span> <span data-start="195.92" data-end="198.29">engines but this is a simple feature</span> <span data-start="198.29" data-end="200.81">that could let that could make your</span> <span data-start="200.81" data-end="202.64">codebase looks so much cleaner it's</span> <span data-start="202.64" data-end="205.37">crazy so what can we do well we can</span> <span data-start="205.37" data-end="206.989">write you has six code and compile it to</span> <span data-start="206.989" data-end="209.57">es five projects like tracer enable this</span> <span data-start="209.57" data-end="212.12">and this is really cool this is a great</span> <span data-start="212.12" data-end="215.269">idea tracer implements a host of es6</span> <span data-start="215.269" data-end="217.94">features I think pretty much most of</span> <span data-start="217.94" data-end="219.14">them I think there are a few things that</span> <span data-start="219.14" data-end="221.78">depend on the additions to the virtual</span> <span data-start="221.78" data-end="223.64">machine that we just can't compile to</span> <span data-start="223.64" data-end="225.739">what tracer does most most everything</span> <span data-start="225.739" data-end="227.81">else and this is awesome this is really</span> <span data-start="227.81" data-end="229.31">helped with early adoption of es6</span> <span data-start="229.31" data-end="233.15">features and that's great but it's an</span> <span data-start="233.15" data-end="235.4">all-or-nothing proposition there's</span> <span data-start="235.4" data-end="236.51">something technically wrong with it but</span> </p>
<p><span data-start="236.51" data-end="238.22">I think a better culture comes when you</span> <span data-start="238.22" data-end="239.66">enable smaller and more independent</span> <span data-start="239.66" data-end="242.269">modules so if if tracer is missing a</span> <span data-start="242.269" data-end="244.19">feature like variable D structuring</span> <span data-start="244.19" data-end="246.739">which it's not but if it's missing a</span> <span data-start="246.739" data-end="247.79">feature you just have to wait for that</span> <span data-start="247.79" data-end="248.9">feature to be implemented there's no</span> <span data-start="248.9" data-end="251.109">there's no it's it's hard for the</span> <span data-start="251.109" data-end="254.329">community to take to participate and</span> <span data-start="254.329" data-end="256.4">fill in the gaps we all know that</span> <span data-start="256.4" data-end="258.079">smaller independent modules are a better</span> <span data-start="258.079" data-end="259.82">way of doing things where JavaScript</span> <span data-start="259.82" data-end="262.97">folks we live and die by our modules so</span> <span data-start="262.97" data-end="264.349">the question is is it possible to have</span> <span data-start="264.349" data-end="266.75">language features a smaller more</span> <span data-start="266.75" data-end="270.44">modules so as with anything in computer</span> <span data-start="270.44" data-end="272.69">science this was solved in the 60s and</span> <span data-start="272.69" data-end="275.54">the 70s this is a hard problem so it's</span> <span data-start="275.54" data-end="277.13">probably completely solved but I think</span> <span data-start="277.13" data-end="280.49">that it was pioneered way back when I'm</span> </p>
<p><span data-start="280.49" data-end="283.06">James long and I work on Firefox</span> <span data-start="283.06" data-end="285.89">developer tools for Mozilla and I'm</span> <span data-start="285.89" data-end="287.41">gonna show you how how this could work</span> <span data-start="287.41" data-end="289.61">so to show you how how we can do this we</span> <span data-start="289.61" data-end="291.59">need to take a quick look at Lisp</span> <span data-start="291.59" data-end="294.14">Lisp has deep roots and simplicity it</span> <span data-start="294.14" data-end="296.03">started out as a small but a powerful</span> <span data-start="296.03" data-end="300.11">language with a simple syntax in 1963</span> <span data-start="300.11" data-end="302.06">Timothy Hart was a way to keep the</span> <span data-start="302.06" data-end="304.37">language small but users add their own</span> <span data-start="304.37" data-end="306.2">forms and extend the language you could</span> <span data-start="306.2" data-end="307.58">do this with a new special form called</span> <span data-start="307.58" data-end="310.9">macro macro later called</span> <span data-start="310.9" data-end="313.669">def macro allowed the community to</span> <span data-start="313.669" data-end="315.95">evolve Lisp just like adding new AP eyes</span> <span data-start="315.95" data-end="318.74">they could add new semantics the Common</span> </p>
<p><span data-start="318.74" data-end="320.96">Lisp object system see loss which was</span> <span data-start="320.96" data-end="324.08">the object system specified with Common</span> <span data-start="324.08" data-end="327.05">Lisp was inspired by two other systems</span> <span data-start="327.05" data-end="329.15">that had already been widely used common</span> <span data-start="329.15" data-end="330.95">loops and flavours these were systems</span> <span data-start="330.95" data-end="332.63">way back in the I think the seventies</span> <span data-start="332.63" data-end="334.55">maybe the sixties that had been</span> <span data-start="334.55" data-end="336.44">implemented as libraries so users could</span> <span data-start="336.44" data-end="337.88">just download these things add them to</span> <span data-start="337.88" data-end="339.62">their project and use it and they added</span> <span data-start="339.62" data-end="342.05">new special forms to define objects who</span> <span data-start="342.05" data-end="344.6">defined methods on these objects these</span> <span data-start="344.6" data-end="346.669">these libraries had already fleshed out</span> <span data-start="346.669" data-end="348.62">these these ideas for they cut these</span> <span data-start="348.62" data-end="350.96">ideas for the OP these object systems</span> <span data-start="350.96" data-end="354.26">and it it was a highly influential in</span> <span data-start="354.26" data-end="357.229">the design of C loss which was the later</span> <span data-start="357.229" data-end="358.94">the object system which was included in</span> <span data-start="358.94" data-end="361.25">the specification which is pretty cool</span> <span data-start="361.25" data-end="362.78">that you can use them in the real world</span> <span data-start="362.78" data-end="365.21">before they're actually specified so</span> <span data-start="365.21" data-end="366.47">here's how you define a method with</span> <span data-start="366.47" data-end="368.45">flavors you'll probably recognize a</span> <span data-start="368.45" data-end="370.31">little bit more in JavaScript so</span> <span data-start="370.31" data-end="371.93">obviously this is not valid JavaScript</span> <span data-start="371.93" data-end="374.96">method is a special form it's somewhat</span> <span data-start="374.96" data-end="376.1">similar to function but a little bit</span> <span data-start="376.1" data-end="377.78">more specialized it takes the type that</span> <span data-start="377.78" data-end="379.13">you're adding the method to takes the</span> <span data-start="379.13" data-end="380.479">name of the method and the arguments in</span> <span data-start="380.479" data-end="384.11">the code so current currently there's no</span> <span data-start="384.11" data-end="386.63">way to add this special form method you</span> <span data-start="386.63" data-end="388.1">have to write your own compiler to do it</span> <span data-start="388.1" data-end="389.69">but if you do that you can't use any</span> <span data-start="389.69" data-end="391.37">other language extensions that anybody</span> <span data-start="391.37" data-end="394.37">else writes and don't don't focus too</span> <span data-start="394.37" data-end="396.44">much on the actual feature don't cringe</span> <span data-start="396.44" data-end="398.479">at the actual method this is probably a</span> <span data-start="398.479" data-end="400.07">terrible way to do methods</span> <span data-start="400.07" data-end="402.23">but it's just an example of a new</span> <span data-start="402.23" data-end="404.63">special form so sweet GS is a new</span> <span data-start="404.63" data-end="407.36">powerful macro system from Java or for</span> </p>
<p><span data-start="407.36" data-end="410.42">JavaScript from Mozilla now these aren't</span> <span data-start="410.42" data-end="412.22">your run-of-the-mill C macros sweet just</span> <span data-start="412.22" data-end="413.78">provides a powerful pattern matching</span> <span data-start="413.78" data-end="416.6">language for matching on code and</span> <span data-start="416.6" data-end="418.52">sophisticated mechanisms for expanding</span> <span data-start="418.52" data-end="420.89">into new code it'd be trivial to</span> <span data-start="420.89" data-end="423.71">implement that method new special form</span> <span data-start="423.71" data-end="425.83">and really easy for you just to use it</span> <span data-start="425.83" data-end="428.21">you just add it to your project and it's</span> <span data-start="428.21" data-end="429.71">available the great thing is they can</span> <span data-start="429.71" data-end="431.84">add any number of modules that have</span> <span data-start="431.84" data-end="434.27">macros and users macros alongside of the</span> <span data-start="434.27" data-end="436.13">method macro you're not binding yourself</span> <span data-start="436.13" data-end="439.04">down to one compiler so if you formalize</span> <span data-start="439.04" data-end="440.99">a way to add new semantics just like you</span> <span data-start="440.99" data-end="442.34">add new features it makes it really easy</span> <span data-start="442.34" data-end="444.83">to extend the language and really easy</span> <span data-start="444.83" data-end="447.29">to make the community participate in the</span> <span data-start="447.29" data-end="450.29">language evolution so I have a new</span> <span data-start="450.29" data-end="451.79">language that I want to announce called</span> <span data-start="451.79" data-end="454.07">emoji scripts this is an example for you</span> <span data-start="454.07" data-end="457.49">guys the emoji script features emotion</span> <span data-start="457.49" data-end="459.95">as a value so currently in JavaScript</span> <span data-start="459.95" data-end="461.96">you can't actually use emoji which is a</span> <span data-start="461.96" data-end="464.21">real shame you have to quote it but then</span> <span data-start="464.21" data-end="465.77">you deal with strings and it's really</span> <span data-start="465.77" data-end="468.68">just a second class citizen but you</span> <span data-start="468.68" data-end="470.15">moved your script lets you embed emoji</span> <span data-start="470.15" data-end="472.22">in into JavaScript so you can actually</span> <span data-start="472.22" data-end="473.84">assign it to a variable and you can use</span> <span data-start="473.84" data-end="478.22">it so emotion literals are cool so now</span> <span data-start="478.22" data-end="479.93">with a swift Google search for emoji</span> <span data-start="479.93" data-end="481.61">finding what you want and then copy and</span> <span data-start="481.61" data-end="483.5">pasting in that single emoji into your</span> <span data-start="483.5" data-end="485.03">code you can do things like emotional</span> <span data-start="485.03" data-end="488.93">algebra there's a having person plus</span> <span data-start="488.93" data-end="491.47">fire equals a person's scream in fear</span> <span data-start="491.47" data-end="494.48">and a happy person plus a punch in the</span> <span data-start="494.48" data-end="497.57">face equals a crying person a happy</span> <span data-start="497.57" data-end="500.54">person plus a drop of water equals a</span> <span data-start="500.54" data-end="501.83">happy person with a different foot water</span> </p>
<p><span data-start="501.83" data-end="504.44">I'm not really sure what that one is you</span> <span data-start="504.44" data-end="506.81">can compare emotions so happiness things</span> <span data-start="506.81" data-end="510.2">better than sadness emoji script</span> <span data-start="510.2" data-end="513.29">enforces good practices it actually this</span> <span data-start="513.29" data-end="515.33">allows the use of the double equals</span> <span data-start="515.33" data-end="517.34">operator now maybe you just really</span> <span data-start="517.34" data-end="518.75">needed to use it maybe you just loved it</span> <span data-start="518.75" data-end="521.27">too much and you can use it any motor</span> <span data-start="521.27" data-end="523.55">script so if you want to use it you have</span> <span data-start="523.55" data-end="526.85">to use the poop operator</span> <span data-start="526.85" data-end="530.06">they this has the exact same semantics</span> <span data-start="530.06" data-end="533.93">as double equals except it's poop so</span> <span data-start="533.93" data-end="535.43">there's also a better way to a more</span> <span data-start="535.43" data-end="537.199">tourist way to throw errors instead of</span> <span data-start="537.199" data-end="539.6">having to type out throw new error you</span> <span data-start="539.6" data-end="542.149">can just use the angry face and that</span> <span data-start="542.149" data-end="544.13">throws the error with that message</span> <span data-start="544.13" data-end="546.29">there's also features automatic cat</span> <span data-start="546.29" data-end="548.089">insertion so why would you terminate</span> <span data-start="548.089" data-end="549.5">your statements with semicolons when you</span> <span data-start="549.5" data-end="551.06">could terminate your statements with</span> <span data-start="551.06" data-end="554.18">cats so now now you now you get this</span> <span data-start="554.18" data-end="556.16">better expressive language where you can</span> <span data-start="556.16" data-end="558.259">do things like if the user is not happy</span> <span data-start="558.259" data-end="560.569">then you can yell at them to be happy</span> <span data-start="560.569" data-end="562.1">there's not really a way to make him</span> <span data-start="562.1" data-end="565.279">happy with software so if you want to</span> <span data-start="565.279" data-end="567.259">use emoji script you just npm install it</span> <span data-start="567.259" data-end="569.209">this actually works you could do this</span> <span data-start="569.209" data-end="571.73">right now and you use the script emo to</span> <span data-start="571.73" data-end="576.35">compile your file so a MIDI script is</span> <span data-start="576.35" data-end="578.569">actually just a set of macros each of</span> <span data-start="578.569" data-end="579.769">those individual features were</span> <span data-start="579.769" data-end="581.48">implemented is just separate J's files</span> <span data-start="581.48" data-end="583.579">you can see there's the algebra there's</span> <span data-start="583.579" data-end="586.49">the poop macro I never thought I'd be</span> <span data-start="586.49" data-end="587.839">talking about poop when my first J's</span> <span data-start="587.839" data-end="591.17">comp talked but so as a disclosure I did</span> <span data-start="591.17" data-end="593.18">have to patch sweet GS to support emoji</span> <span data-start="593.18" data-end="595.16">which is unfortunate but let's just for</span> <span data-start="595.16" data-end="597.17">an example so you can pick out</span> <span data-start="597.17" data-end="598.87">individual features that you want to use</span> <span data-start="598.87" data-end="603.139">this command uses the the standard sweet</span> </p>
<p><span data-start="603.139" data-end="605.72">J's compiler which is SJS and it uses</span> <span data-start="605.72" data-end="608">the — M argument which means you you can</span> <span data-start="608" data-end="610.16">pass a module to sweet GS to load macros</span> <span data-start="610.16" data-end="611.72">from and it will use those macros to</span> <span data-start="611.72" data-end="614.269">expand your file so this just uses the</span> <span data-start="614.269" data-end="617.959">poop feature now I knew the irony of me</span> <span data-start="617.959" data-end="619.61">telling you not to use compilers and</span> <span data-start="619.61" data-end="621.23">then telling you to go download this</span> <span data-start="621.23" data-end="624.019">week is compiler technically technically</span> <span data-start="624.019" data-end="626.18">yes it's a compiler but it's really an</span> <span data-start="626.18" data-end="629.12">expander a macro system as a new phase</span> <span data-start="629.12" data-end="630.41">for the parse compile and execute</span> <span data-start="630.41" data-end="633.259">pipeline of a program the expand phase</span> <span data-start="633.259" data-end="634.91">and it happens before anyone before</span> <span data-start="634.91" data-end="636.35">anything else it's really just</span> <span data-start="636.35" data-end="638.99">formalizing this the way that we want to</span> <span data-start="638.99" data-end="641.3">extend the language and now that since</span> <span data-start="641.3" data-end="642.86">we formalized it we just have one</span> <span data-start="642.86" data-end="646.79">compiler and everything else just works</span> <span data-start="646.79" data-end="648.56">together really well and you get a lot</span> <span data-start="648.56" data-end="650.209">of good things like automatic source</span> </p>
<p><span data-start="650.209" data-end="652.49">Maps so all of the macros automatically</span> <span data-start="652.49" data-end="654.86">are automatically generated source maps</span> <span data-start="654.86" data-end="657.079">for free sweet J's compiler it takes</span> <span data-start="657.079" data-end="658.399">care of that if you're writing a macro</span> <span data-start="658.399" data-end="659.51">you don't have to worry about it at all</span> <span data-start="659.51" data-end="660.32">if you're using</span> <span data-start="660.32" data-end="661.73">macros you know it you're going to get</span> <span data-start="661.73" data-end="663.32">accurate source maps which I think</span> <span data-start="663.32" data-end="665.63">that's I think that's a pretty awesome a</span> <span data-start="665.63" data-end="669.62">pretty awesome thing so here's here's a</span> <span data-start="669.62" data-end="670.97">more realistic example I have a project</span> <span data-start="670.97" data-end="674.15">called es6 macros it implements</span> <span data-start="674.15" data-end="677.18">individual es6 features as macros you</span> <span data-start="677.18" data-end="678.65">can pick up the whole bundle or you can</span> <span data-start="678.65" data-end="679.94">just choose one or two features that you</span> <span data-start="679.94" data-end="682.28">want from it and of course you can use</span> <span data-start="682.28" data-end="684.14">any other macros there's some really</span> <span data-start="684.14" data-end="685.34">cool stuff that some people are doing</span> <span data-start="685.34" data-end="686.84">like pattern matching and things like</span> <span data-start="686.84" data-end="690.14">this so this is an example of the fat</span> <span data-start="690.14" data-end="692.6">arrow module if you use the fat arrow</span> <span data-start="692.6" data-end="695.9">module you can use es6 headers and which</span> <span data-start="695.9" data-end="697.22">are really cool because they keep the</span> <span data-start="697.22" data-end="699.92">outer this context so what my macro does</span> <span data-start="699.92" data-end="701.66">is it just expands it into a function</span> <span data-start="701.66" data-end="703.97">expression but it calls dot bind with</span> <span data-start="703.97" data-end="707.18">this on it so you get that with just a</span> <span data-start="707.18" data-end="709.58">pretty small macro there's also ad</span> <span data-start="709.58" data-end="712.34">structuring module where if you include</span> <span data-start="712.34" data-end="713.69">this you can use variable structuring</span> <span data-start="713.69" data-end="717.29">which I still don't understand like why</span> <span data-start="717.29" data-end="720.14">people don't use this more or like at</span> <span data-start="720.14" data-end="721.76">least use tracer to compile this because</span> <span data-start="721.76" data-end="724.43">it makes your code so much cleaner this</span> <span data-start="724.43" data-end="725.75">is the class module so you can actually</span> </p>
<p><span data-start="725.75" data-end="728.57">CSS classes my module supports the</span> <span data-start="728.57" data-end="730.97">constructor and as well as super as well</span> <span data-start="730.97" data-end="733.07">which is not in the example but if you</span> <span data-start="733.07" data-end="734.9">call super within move it'll actually</span> <span data-start="734.9" data-end="736.43">walk up the prototype chain and called</span> <span data-start="736.43" data-end="739.34">and move that's your parent so this</span> <span data-start="739.34" data-end="741.5">expands out to this which is kind of the</span> <span data-start="741.5" data-end="745.24">familiar class and takes the class</span> <span data-start="745.24" data-end="750.44">function that you're used to so here's</span> <span data-start="750.44" data-end="752.87">here's an example of interoperable</span> <span data-start="752.87" data-end="756.32">features if you just wanted the the poop</span> <span data-start="756.32" data-end="758.99">operator and the fat arrow operator you</span> <span data-start="758.99" data-end="760.79">could just npm install both of those</span> <span data-start="760.79" data-end="763.82">projects but just pass the poop and the</span> <span data-start="763.82" data-end="766.67">federal module to SJS and it'll expand</span> <span data-start="766.67" data-end="768.71">your file just with those operators it</span> <span data-start="768.71" data-end="773.99">it interoperates just fine so ready</span> <span data-start="773.99" data-end="775.58">macros is far easier than writing</span> <span data-start="775.58" data-end="778.13">compilers have fun experiment and play</span> <span data-start="778.13" data-end="779.45">with things that javascript might might</span> <span data-start="779.45" data-end="781.01">want to do in the future things that we</span> <span data-start="781.01" data-end="783.32">don't even know about this is more than</span> <span data-start="783.32" data-end="786.79">just a better way to adopt es6 features</span> <span data-start="786.79" data-end="789.47">es7 is coming as well and javascript</span> <span data-start="789.47" data-end="791.39">will always be evolving we should make</span> <span data-start="791.39" data-end="793.4">it easy to experiment in to try new</span> <span data-start="793.4" data-end="794.15">features</span> <span data-start="794.15" data-end="795.38">and they're all small independent</span> <span data-start="795.38" data-end="797.24">modules that are easy to write and to</span> <span data-start="797.24" data-end="802.76">use together so currently this is the</span> <span data-start="802.76" data-end="804.05">abstract process of adding the feature</span> <span data-start="804.05" data-end="806.95">to JavaScript there's proposal to tc39</span> <span data-start="806.95" data-end="809.29">there's discussion there's my</span> <span data-start="809.29" data-end="811.79">finalization there's implementation and</span> <span data-start="811.79" data-end="813.83">there's maturation the maturation phase</span> <span data-start="813.83" data-end="815.72">is basically its existed out there long</span> <span data-start="815.72" data-end="818.3">enough to where it's taken over enough</span> <span data-start="818.3" data-end="820.339">browser market share so it's existed in</span> <span data-start="820.339" data-end="822.89">browsers several versions back because</span> <span data-start="822.89" data-end="824.96">most web devs as you know have to</span> <span data-start="824.96" data-end="828.98">support you know 96% of the of the</span> <span data-start="828.98" data-end="830.839">browser market share so this takes</span> <span data-start="830.839" data-end="832.7">forever even if we can speed up the</span> <span data-start="832.7" data-end="834.92">discussion and finalization pieces this</span> <span data-start="834.92" data-end="836.089">creates a gap between the Ekman</span> <span data-start="836.089" data-end="838.82">committee named tc39 and the community</span> <span data-start="838.82" data-end="840.71">actually building stuff because it's six</span> <span data-start="840.71" data-end="844.46">years maybe even decades no I I think we</span> <span data-start="844.46" data-end="847.67">got stuck on es6 on es6 because this is</span> <span data-start="847.67" data-end="850.37">so large and I know tc39 is working on a</span> <span data-start="850.37" data-end="851.98">ways to push through features faster</span> <span data-start="851.98" data-end="855.77">more frequent smaller respects but the</span> <span data-start="855.77" data-end="857.21">implementation the maturation phases are</span> <span data-start="857.21" data-end="859.73">always going to take a long time so I</span> <span data-start="859.73" data-end="861.35">think one way to help with this is to</span> <span data-start="861.35" data-end="863.63">let the tc39 give the community features</span> <span data-start="863.63" data-end="865.88">early on as well as making it easy for</span> <span data-start="865.88" data-end="868.76">the community to create features imagine</span> <span data-start="868.76" data-end="871.61">if every TC tc39 proposal came with a</span> <span data-start="871.61" data-end="874.25">working macro anyone of you excited</span> <span data-start="874.25" data-end="875.69">about this in the community could go and</span> <span data-start="875.69" data-end="878.12">just use that right now and test it and</span> <span data-start="878.12" data-end="879.56">flush it out and see see how it actually</span> <span data-start="879.56" data-end="882.74">feels in real-world code yes you can do</span> <span data-start="882.74" data-end="885.08">this with compilers but what I'm saying</span> <span data-start="885.08" data-end="887.089">is it's really only scalable it's only</span> <span data-start="887.089" data-end="888.62">really a good solution if you if you</span> <span data-start="888.62" data-end="890.12">could do it as independent modules is</span> <span data-start="890.12" data-end="892.37">every feature posted to the mailing list</span> <span data-start="892.37" data-end="893.99">has an attachment that's a macro to make</span> <span data-start="893.99" data-end="899.57">it work and even better if the everyone</span> <span data-start="899.57" data-end="902.089">in the community who is excited about an</span> <span data-start="902.089" data-end="903.709">idea could actually try it out they</span> <span data-start="903.709" data-end="905.57">could actually write a macro to extend a</span> <span data-start="905.57" data-end="908.06">language and see how it works and so the</span> <span data-start="908.06" data-end="910.13">community has a greater participation so</span> </p>
<p><span data-start="910.13" data-end="911.57">I think I think it helps close the gap</span> <span data-start="911.57" data-end="913.91">between the community and committees</span> <span data-start="913.91" data-end="917.57">like tc39 of course not everything has</span> <span data-start="917.57" data-end="919.25">to be standardised in fact I think it's</span> <span data-start="919.25" data-end="920.54">better if we keep JavaScript from</span> <span data-start="920.54" data-end="922.4">getting bloated by standardizing all the</span> <span data-start="922.4" data-end="924.589">things there are huge advantages to</span> <span data-start="924.589" data-end="926.54">simply using libraries instead of</span> <span data-start="926.54" data-end="927.83">depending on platform feature</span> <span data-start="927.83" data-end="930.08">it works because it works the same</span> <span data-start="930.08" data-end="932.63">everywhere instantly I mean there might</span> <span data-start="932.63" data-end="933.68">be a possibility that you're depending</span> <span data-start="933.68" data-end="936.74">on a runtime API that's only available</span> <span data-start="936.74" data-end="938.81">in a specific version but when you when</span> <span data-start="938.81" data-end="941.06">you release a library anyone you don't</span> <span data-start="941.06" data-end="942.14">have to worry if they're working in</span> </p>
<p><span data-start="942.14" data-end="945.23">Firefox or Chrome or anything like that</span> <span data-start="945.23" data-end="946.339">it's just a library that you just</span> <span data-start="946.339" data-end="949.22">download and use the main advantage to I</span> <span data-start="949.22" data-end="950.36">think is that you don't have to worry</span> <span data-start="950.36" data-end="952.25">about backwards compatibility so any</span> <span data-start="952.25" data-end="953.589">feature that goes into a browser</span> <span data-start="953.589" data-end="955.7">requires a lot of thought because</span> <span data-start="955.7" data-end="957.89">they're thinking up mmm this doesn't</span> <span data-start="957.89" data-end="959.45">break any existing feature right this</span> <span data-start="959.45" data-end="960.98">doesn't break any existing syntax in</span> <span data-start="960.98" data-end="964.22">addition to that this isn't going to tie</span> <span data-start="964.22" data-end="965.899">us down into one thing in the far future</span> <span data-start="965.899" data-end="967.79">because the browser is always completely</span> <span data-start="967.79" data-end="969.38">backwards compatible which i think is</span> <span data-start="969.38" data-end="971.48">awesome but it kind of constrains the</span> <span data-start="971.48" data-end="973.85">language in some ways if a breaking</span> <span data-start="973.85" data-end="976.579">change if you if you if you release a</span> <span data-start="976.579" data-end="978.17">feature as a macro and you need it a</span> <span data-start="978.17" data-end="979.399">breaking change you could just either</span> <span data-start="979.399" data-end="980.959">fork the library or do like a major</span> <span data-start="980.959" data-end="982.459">version bump and maintain two different</span> <span data-start="982.459" data-end="984.14">libraries because it's a library it's</span> <span data-start="984.14" data-end="986.6">not hooked down to the jeaious engine so</span> <span data-start="986.6" data-end="988.19">they give a formalized way to treat new</span> <span data-start="988.19" data-end="989.51">language features of libraries and a lot</span> <span data-start="989.51" data-end="991.64">of community to experiment and use</span> <span data-start="991.64" data-end="993.26">things that will probably never be other</span> <span data-start="993.26" data-end="996.079">dogs have standard or will the widget</span> <span data-start="996.079" data-end="997.91">script be ever beyond the standard it</span> <span data-start="997.91" data-end="1002.079">might be but in all seriousness changing</span> <span data-start="1002.079" data-end="1004.089">language semantics should should not be</span> <span data-start="1004.089" data-end="1004.75">taken lightly</span> <span data-start="1004.75" data-end="1007.589">don't use macros just for inlining code</span> <span data-start="1007.589" data-end="1010.36">don't use macros just to remove curly</span> <span data-start="1010.36" data-end="1012.52">braces honestly if you're thinking of</span> <span data-start="1012.52" data-end="1014.35">writing the macro right now you probably</span> <span data-start="1014.35" data-end="1017.8">shouldn't I mean how how can I say this</span> <span data-start="1017.8" data-end="1019.54">after everything I just said I think</span> <span data-start="1019.54" data-end="1021.01">it's because we need to be grounded</span> <span data-start="1021.01" data-end="1023.41">don't don't experiment on your company's</span> <span data-start="1023.41" data-end="1025.78">codebase don't cut off the community by</span> <span data-start="1025.78" data-end="1028.3">using weird features only write a macro</span> <span data-start="1028.3" data-end="1030.61">if the feature is unique enough and you</span> <span data-start="1030.61" data-end="1032.199">have time to invest in teaching people</span> <span data-start="1032.199" data-end="1036.069">why it's useful Common Lisp in my</span> <span data-start="1036.069" data-end="1037.72">opinion kind of felt fell prey to this</span> <span data-start="1037.72" data-end="1039.85">it's just way too common to write macros</span> <span data-start="1039.85" data-end="1041.8">if you're working on your web app you</span> <span data-start="1041.8" data-end="1043.63">probably will write some macros to do</span> <span data-start="1043.63" data-end="1046.24">something this just creates too much</span> <span data-start="1046.24" data-end="1048.669">confusion too much divisive nough speak</span> <span data-start="1048.669" data-end="1050.47">of the semantics are changing just too</span> <span data-start="1050.47" data-end="1053.05">much my opinion closure did it right</span> <span data-start="1053.05" data-end="1054.4">they have just enough built in</span> <span data-start="1054.4" data-end="1056.29">functionality so you don't always have</span> <span data-start="1056.29" data-end="1058.45">to be writing macros and the culture</span> <span data-start="1058.45" data-end="1060.28">actually discourages macros in fact</span> <span data-start="1060.28" data-end="1061.1">which i think is what</span> <span data-start="1061.1" data-end="1063.77">need to do as well but we can't simply</span> <span data-start="1063.77" data-end="1065.66">discount macros completely don't be</span> <span data-start="1065.66" data-end="1066.38">afraid</span> <span data-start="1066.38" data-end="1068.24">closure was able to release a library</span> <span data-start="1068.24" data-end="1070.13">called core async which has is somewhat</span> <span data-start="1070.13" data-end="1071.96">similar to generators they're different</span> <span data-start="1071.96" data-end="1074.179">in many ways but the core functionality</span> <span data-start="1074.179" data-end="1076.16">is that they can pause and suspend</span> <span data-start="1076.16" data-end="1078.169">execution of a function they were able</span> <span data-start="1078.169" data-end="1079.58">to do this as a library because they</span> <span data-start="1079.58" data-end="1082.4">implemented a go block which is a new</span> <span data-start="1082.4" data-end="1084.2">special form and it compiles the code</span> <span data-start="1084.2" data-end="1086.27">inside the go block into a state machine</span> <span data-start="1086.27" data-end="1088.16">that they can control it's all just a</span> <span data-start="1088.16" data-end="1089.72">library when they release it everyone</span> <span data-start="1089.72" data-end="1090.98">can download it and just immediately</span> <span data-start="1090.98" data-end="1092.33">begin using it they don't have to wait</span> <span data-start="1092.33" data-end="1094.01">for a whole standardization process and</span> <span data-start="1094.01" data-end="1096.559">ten years from now might be able to use</span> <span data-start="1096.559" data-end="1098.9">it so I think this is especially</span> <span data-start="1098.9" data-end="1100.97">important for JavaScript the language is</span> <span data-start="1100.97" data-end="1103.37">the language evolution is already</span> <span data-start="1103.37" data-end="1105.169">happening I mean looking angular they're</span> <span data-start="1105.169" data-end="1107.39">talking about this extension to es6 to</span> <span data-start="1107.39" data-end="1109.01">make es6 plus where they have this</span> <span data-start="1109.01" data-end="1112.58">dependency injection weird stuff and you</span> <span data-start="1112.58" data-end="1114.02">know i think this is fine i think it's</span> <span data-start="1114.02" data-end="1115.429">so good to think of ways that we can</span> <span data-start="1115.429" data-end="1117.5">improve our code but i think they're</span> <span data-start="1117.5" data-end="1119.39">planning on 14 tracer i could be wrong</span> <span data-start="1119.39" data-end="1121.13">with that or they're playing around</span> <span data-start="1121.13" data-end="1122.75">forking a compiler and adding some</span> <span data-start="1122.75" data-end="1124.46">extensions the more and more you do that</span> <span data-start="1124.46" data-end="1126.32">the more and more you're styling</span> <span data-start="1126.32" data-end="1127.64">yourself away from the JavaScript</span> <span data-start="1127.64" data-end="1130.22">community I think javascript needs</span> <span data-start="1130.22" data-end="1132.049">release valves because it's just such a</span> <span data-start="1132.049" data-end="1136.13">massive language it's used everywhere so</span> <span data-start="1136.13" data-end="1137.45">macros can be useful even if you don't</span> <span data-start="1137.45" data-end="1140.69">change semantics the emoji script poop</span> <span data-start="1140.69" data-end="1143.419">feature disables double equals and this</span> <span data-start="1143.419" data-end="1144.35">is how that works</span> </p>
<p><span data-start="1144.35" data-end="1146.48">I'm not going to go into the details but</span> <span data-start="1146.48" data-end="1149.09">I'm able to throw a syntaxerror within</span> <span data-start="1149.09" data-end="1151.85">my macro so whenever the double equals</span> <span data-start="1151.85" data-end="1153.53">operator is invoked my macro is invoked</span> <span data-start="1153.53" data-end="1155.659">and my macro throws a syntax error so at</span> <span data-start="1155.659" data-end="1157.46">expand time it's just throws a syntax</span> <span data-start="1157.46" data-end="1159.32">error and says that's not allowed so</span> <span data-start="1159.32" data-end="1161.179">this is an interesting way to not only</span> <span data-start="1161.179" data-end="1162.47">expand the language but kind of</span> <span data-start="1162.47" data-end="1166.25">restricted as well in fact if you wanted</span> <span data-start="1166.25" data-end="1168.53">to use macros but you didn't want</span> <span data-start="1168.53" data-end="1169.97">anybody on the team especially that</span> <span data-start="1169.97" data-end="1172.1">overeager college grad that you just</span> <span data-start="1172.1" data-end="1174.08">hired to create macros and go crazy and</span> <span data-start="1174.08" data-end="1175.7">change things out from under you you can</span> <span data-start="1175.7" data-end="1177.26">just disable macros entirely across your</span> <span data-start="1177.26" data-end="1178.88">projects just create a macro called</span> <span data-start="1178.88" data-end="1180.47">macro and throw the syntax here and say</span> <span data-start="1180.47" data-end="1184.789">you know aloud so here's another example</span> <span data-start="1184.789" data-end="1186.62">of macros that don't introduce new new</span> <span data-start="1186.62" data-end="1189.71">semantics macros allow certain forms of</span> <span data-start="1189.71" data-end="1192.049">aspect or unit programming which means</span> <span data-start="1192.049" data-end="1194.419">you can change behavior or add behavior</span> <span data-start="1194.419" data-end="1194.78">too so</span> <span data-start="1194.78" data-end="1196.43">parts your code without actually</span> <span data-start="1196.43" data-end="1199.46">changing it I kind of just made that up</span> </p>
<p><span data-start="1199.46" data-end="1201.2">I don't really know what aspect-oriented</span> <span data-start="1201.2" data-end="1203.06">programming is technically but look at</span> <span data-start="1203.06" data-end="1205.43">the wiki page I mean a macro that traces</span> <span data-start="1205.43" data-end="1207.83">all function calls it overrides the</span> <span data-start="1207.83" data-end="1210.35">function keyword and injects a console</span> <span data-start="1210.35" data-end="1212.87">that log at the beginning calls the</span> <span data-start="1212.87" data-end="1214.01">function immediately and gets the return</span> <span data-start="1214.01" data-end="1216.35">value and then adds another console dot</span> <span data-start="1216.35" data-end="1218.12">log of the return when the return is</span> <span data-start="1218.12" data-end="1221.33">happening and I'm able to pick off the</span> <span data-start="1221.33" data-end="1222.92">name of the function this is actually</span> <span data-start="1222.92" data-end="1225.05">just one part of the macro that the real</span> <span data-start="1225.05" data-end="1226.16">macro that it wrote is a little bit more</span> <span data-start="1226.16" data-end="1227.63">sophisticated it's able to pick off the</span> <span data-start="1227.63" data-end="1229.13">name of the function even if it's like a</span> <span data-start="1229.13" data-end="1234.11">an object property you know so I took</span> <span data-start="1234.11" data-end="1236.72">this macro and I ran it through and I</span> <span data-start="1236.72" data-end="1239.54">ran and I ran jQuery with it so it</span> <span data-start="1239.54" data-end="1241.85">expanded jquery with this and so with</span> <span data-start="1241.85" data-end="1242.9">this it's really interesting i was able</span> <span data-start="1242.9" data-end="1245.09">to run this jQuery code and say with it</span> <span data-start="1245.09" data-end="1246.95">what does the execution look like within</span> <span data-start="1246.95" data-end="1251.36">jQuery so I can grab an element with the</span> <span data-start="1251.36" data-end="1254">idea of app and I can set the HTML of it</span> <span data-start="1254" data-end="1255.98">with of it with to the div with a class</span> <span data-start="1255.98" data-end="1258.26">box and I can kind of see the shape of</span> <span data-start="1258.26" data-end="1260.03">what's going on within jQuery so if I</span> <span data-start="1260.03" data-end="1261.53">wanted to learn what jQuery was doing</span> <span data-start="1261.53" data-end="1262.73">maybe I wanted to start working on</span> <span data-start="1262.73" data-end="1265.4">jQuery I just immediately see this</span> <span data-start="1265.4" data-end="1267.89">interesting functionality now a certain</span> <span data-start="1267.89" data-end="1269.03">dev tools I think are starting to</span> <span data-start="1269.03" data-end="1271.55">implement things like tracers but youyou</span> <span data-start="1271.55" data-end="1274.19">wrote this for your app for your code</span> <span data-start="1274.19" data-end="1275.69">and project and you know what you're</span> <span data-start="1275.69" data-end="1277.64">wanting to look for so you could do all</span> <span data-start="1277.64" data-end="1279.71">sorts of things with macros that are</span> <span data-start="1279.71" data-end="1281.18">specific to your app for debugging your</span> <span data-start="1281.18" data-end="1282.71">app and logging your app and doing all</span> <span data-start="1282.71" data-end="1284.27">sorts of interesting things but don't</span> <span data-start="1284.27" data-end="1285.83">actually change semantics right there</span> <span data-start="1285.83" data-end="1287.15">just adding interesting logging</span> <span data-start="1287.15" data-end="1289.94">capabilities so nobody else on the team</span> <span data-start="1289.94" data-end="1291.14">doesn't even have to worry about what's</span> <span data-start="1291.14" data-end="1294.53">going on so here's something a little</span> <span data-start="1294.53" data-end="1296.96">crazier this does this does add new</span> <span data-start="1296.96" data-end="1299.18">semantics can we implement a simplistic</span> <span data-start="1299.18" data-end="1303.32">stack allocated type system so we can</span> <span data-start="1303.32" data-end="1305.38">get bit something basic working I think</span> <span data-start="1305.38" data-end="1307.79">first let's allocate one big typed array</span> <span data-start="1307.79" data-end="1310.25">our stock and create various type two</span> <span data-start="1310.25" data-end="1313.79">views into it and my stack a located</span> <span data-start="1313.79" data-end="1314.84">type system allows you to write code</span> <span data-start="1314.84" data-end="1316.85">like this you can define a record type</span> <span data-start="1316.85" data-end="1319.25">so you have point which with fields and</span> <span data-start="1319.25" data-end="1321.11">they all have types and these types are</span> <span data-start="1321.11" data-end="1323.03">just kind of the machine low-level types</span> <span data-start="1323.03" data-end="1324.77">like double and float and you went and</span> <span data-start="1324.77" data-end="1327.92">int and short</span> <span data-start="1327.92" data-end="1329.96">but now now you can accentuate one of</span> <span data-start="1329.96" data-end="1332.62">these records and it essentially</span> <span data-start="1332.62" data-end="1336.14">allocates it on our set which we is that</span> <span data-start="1336.14" data-end="1336.74">big techhdarre</span> <span data-start="1336.74" data-end="1339.71">and this sets the X&Y to 180 this</span> <span data-start="1339.71" data-end="1342.05">expands all the way down do this so I</span> <span data-start="1342.05" data-end="1343.94">grab I grab the current side pointer and</span> <span data-start="1343.94" data-end="1345.29">that's essentially my stack allocated</span> <span data-start="1345.29" data-end="1347.69">objects it's just a pointer and I move</span> <span data-start="1347.69" data-end="1349.78">the stack pointer and then I set the</span> <span data-start="1349.78" data-end="1354.08">pieces in my stack to 180 and I'm</span> <span data-start="1354.08" data-end="1356.35">accessing it through the float</span> <span data-start="1356.35" data-end="1359.33">float64array and you can see the pointer</span> <span data-start="1359.33" data-end="1362.24">so the first one is my my cyclic a to</span> <span data-start="1362.24" data-end="1364.7">object pointer and the the second value</span> </p>
<p><span data-start="1364.7" data-end="1367.13">Y is that plus 8 because it's 8 bytes</span> <span data-start="1367.13" data-end="1370.25">wide so we can have typed allocated</span> <span data-start="1370.25" data-end="1372.98">structs and compile it down to this this</span> <span data-start="1372.98" data-end="1374.06">lets you avoid all those pesky</span> <span data-start="1374.06" data-end="1375.86">allocations if you're writing like heavy</span> <span data-start="1375.86" data-end="1378.08">graphics code it's a very interesting</span> <span data-start="1378.08" data-end="1379.58">way to kind of interleave this this is a</span> <span data-start="1379.58" data-end="1380.96">haven't put a whole lot of time you do</span> <span data-start="1380.96" data-end="1382.46">this if a new type theory better I'd</span> <span data-start="1382.46" data-end="1383.36">probably do something little bit</span> <span data-start="1383.36" data-end="1385.85">different if you want it to like return</span> <span data-start="1385.85" data-end="1387.65">this you can do that you but you could I</span> <span data-start="1387.65" data-end="1389.51">essentially copied it onto the heap if</span> <span data-start="1389.51" data-end="1391.01">you wanted to do that but there's a lot</span> <span data-start="1391.01" data-end="1392.12">of times when you're writing graphics</span> <span data-start="1392.12" data-end="1394.07">code and you just want a bunch of local</span> <span data-start="1394.07" data-end="1396.2">vectors to do some computationally heavy</span> <span data-start="1396.2" data-end="1398.39">work and always doing the object literal</span> <span data-start="1398.39" data-end="1400.13">x and y is just hitting a garbage</span> <span data-start="1400.13" data-end="1402.98">collector for no reason so who knows</span> <span data-start="1402.98" data-end="1404.33">maybe one of these features does turn</span> <span data-start="1404.33" data-end="1405.92">out to be so useful that it does become</span> <span data-start="1405.92" data-end="1407.84">standardized something that we wouldn't</span> <span data-start="1407.84" data-end="1410.51">have thought to propose at first and now</span> <span data-start="1410.51" data-end="1412.1">it will be based on real world usage and</span> <span data-start="1412.1" data-end="1413.3">most of the problems with backwards</span> <span data-start="1413.3" data-end="1415.1">compatibility will already have been</span> <span data-start="1415.1" data-end="1417.38">solved it would be neat if JavaScript</span> <span data-start="1417.38" data-end="1419.45">even integrated sweet GS itself natively</span> <span data-start="1419.45" data-end="1421.28">but if that does happen that's probably</span> <span data-start="1421.28" data-end="1422.45">a long ways off</span> <span data-start="1422.45" data-end="1423.68">but I think it could be need to do</span> <span data-start="1423.68" data-end="1425.48">something like a browser add-on that in</span> <span data-start="1425.48" data-end="1426.98">that integrates it automatically and</span> <span data-start="1426.98" data-end="1429.05">then for production you just pre compile</span> <span data-start="1429.05" data-end="1431.81">or could of course some levels really do</span> <span data-start="1431.81" data-end="1433.27">you require a platform level integration</span> <span data-start="1433.27" data-end="1435.92">just things like weak Maps but I think</span> <span data-start="1435.92" data-end="1438.92">those are actually relatively rare so</span> <span data-start="1438.92" data-end="1441.8">let's let's look at what sweet GS if you</span> <span data-start="1441.8" data-end="1443.33">wanted to actually write macros some of</span> <span data-start="1443.33" data-end="1445.97">the features that it gives you to to</span> <span data-start="1445.97" data-end="1447.2">actually do this because I haven't</span> <span data-start="1447.2" data-end="1450.41">showed you any of the actual code so if</span> <span data-start="1450.41" data-end="1452.57">features a pattern matching various</span> <span data-start="1452.57" data-end="1455.69">expansion strategies and hygiene so</span> <span data-start="1455.69" data-end="1457.76">these are fully hygienic macros so if</span> <span data-start="1457.76" data-end="1459.02">you're familiar with macros you know</span> <span data-start="1459.02" data-end="1460.52">that that's pretty much necessary for a</span> <span data-start="1460.52" data-end="1461.09">real world</span> <span data-start="1461.09" data-end="1465.77">her system so PI R imagine you've you've</span> <span data-start="1465.77" data-end="1468.47">seen this to some extent this is just a</span> <span data-start="1468.47" data-end="1470">basic pattern matching you have a list</span> <span data-start="1470" data-end="1472.64">of rules and the sweet jest system will</span> <span data-start="1472.64" data-end="1475.85">invoke your macro so it's you have a</span> <span data-start="1475.85" data-end="1477.68">macro named bar your macro will be</span> <span data-start="1477.68" data-end="1479.24">invoked when it hits the keyword bar in</span> <span data-start="1479.24" data-end="1481.28">the code and then it will walk down your</span> <span data-start="1481.28" data-end="1483.92">rules top to bottom and see see if it</span> <span data-start="1483.92" data-end="1485.12">matches a rule and if it doesn't matter</span> <span data-start="1485.12" data-end="1486.95">rule it'll throw in my chair and when it</span> <span data-start="1486.95" data-end="1488.87">does the first rule that matches it will</span> <span data-start="1488.87" data-end="1490.55">expand into the code that's within that</span> <span data-start="1490.55" data-end="1492.92">rule so this is a basic basic variable</span> <span data-start="1492.92" data-end="1494.69">destructuring array so you can see that</span> <span data-start="1494.69" data-end="1497.27">the first rule has a curly brace and</span> <span data-start="1497.27" data-end="1500.24">then a name and then of multiple</span> <span data-start="1500.24" data-end="1502.88">repeated names and then equals object so</span> <span data-start="1502.88" data-end="1505.13">you can bind current syntactic elements</span> <span data-start="1505.13" data-end="1507.47">to pattern variables with the dollar</span> <span data-start="1507.47" data-end="1509.45">sign so that basically says whatever is</span> <span data-start="1509.45" data-end="1511.7">here just bind it to me and then the the</span> <span data-start="1511.7" data-end="1514.93">dot dot means match repeated elements</span> <span data-start="1514.93" data-end="1518.51">and just a brief overview so that's</span> <span data-start="1518.51" data-end="1520.1">that's the roll macro this is a rule</span> <span data-start="1520.1" data-end="1522.22">makkal you just have a list of patterns</span> <span data-start="1522.22" data-end="1524.78">there's a a let macro which is</span> <span data-start="1524.78" data-end="1526.45">essentially the same as the rule macro</span> <span data-start="1526.45" data-end="1529.4">except you define it saying let var</span> <span data-start="1529.4" data-end="1532.46">equals macro and what this does is by</span> <span data-start="1532.46" data-end="1535.34">default recur macros are recursive so</span> <span data-start="1535.34" data-end="1537.77">when a code is expanded it will</span> <span data-start="1537.77" data-end="1543.59">reexpansion var keyword you couldn't do</span> <span data-start="1543.59" data-end="1546.23">that let macro does not recursively</span> <span data-start="1546.23" data-end="1548.45">expand oh I'm sorry it does it but I let</span> <span data-start="1548.45" data-end="1550.82">my grow if you the VAR that we've</span> <span data-start="1550.82" data-end="1552.89">referenced within the macro doesn't</span> <span data-start="1552.89" data-end="1554.45">reference my macro it references what</span> <span data-start="1554.45" data-end="1557.3">what it was defined as before my macro</span> <span data-start="1557.3" data-end="1559.28">which was the built-in var so this will</span> <span data-start="1559.28" data-end="1561.59">not recursively infinitely loop which it</span> <span data-start="1561.59" data-end="1564.47">would do with a normal macro there's in</span> <span data-start="1564.47" data-end="1567.74">fix macros which let you specify a pipe</span> <span data-start="1567.74" data-end="1569.93">or a bar in your pattern and that means</span> <span data-start="1569.93" data-end="1571.88">you can look and that that bar indicates</span> <span data-start="1571.88" data-end="1573.92">where that macro matched and that means</span> <span data-start="1573.92" data-end="1576.02">you can match before the syntactical</span> <span data-start="1576.02" data-end="1578.09">element that you've been invoked on so</span> <span data-start="1578.09" data-end="1579.86">for the arrow function syntax the FATA</span> <span data-start="1579.86" data-end="1582.02">is we need this because we need to look</span> <span data-start="1582.02" data-end="1583.94">back and grab the arguments and so</span> <span data-start="1583.94" data-end="1586.07">that's this is a basic file</span> <span data-start="1586.07" data-end="1588.95">this is actually most where all of the</span> <span data-start="1588.95" data-end="1589.66">fat arrow</span> <span data-start="1589.66" data-end="1593.54">macro you you get this like you get fed</span> <span data-start="1593.54" data-end="1594.899">arose with this macro</span> </p>
<p><span data-start="1594.899" data-end="1596.34">I think it's actually missing one rule</span> <span data-start="1596.34" data-end="1599.7">for one one style of photos but this is</span> <span data-start="1599.7" data-end="1601.019">how tiny it is you don't have to write</span> <span data-start="1601.019" data-end="1605.07">compilers this is a little bit more</span> <span data-start="1605.07" data-end="1607.169">complex but there's um there's a special</span> <span data-start="1607.169" data-end="1609.21">form called operator which defines a new</span> <span data-start="1609.21" data-end="1611.94">macro but it's but it's has a little bit</span> <span data-start="1611.94" data-end="1614.159">more semantics so this overrides the</span> <span data-start="1614.159" data-end="1616.139">plus operator it takes the precedence</span> <span data-start="1616.139" data-end="1618.09">and the associativity so 12 is the</span> <span data-start="1618.09" data-end="1619.74">president's level so if you think of</span> <span data-start="1619.74" data-end="1621.09">operators they all have our precedence</span> <span data-start="1621.09" data-end="1622.71">level like where they where they group</span> <span data-start="1622.71" data-end="1625.2">together so plus I'm doing it 12 which i</span> <span data-start="1625.2" data-end="1626.669">think is what the what the default is</span> <span data-start="1626.669" data-end="1629.1">and then a left associativity so you can</span> <span data-start="1629.1" data-end="1630.21">see that it expands is you a function</span> <span data-start="1630.21" data-end="1632.73">call add so 1 plus 2 Plus 3 plus 4</span> <span data-start="1632.73" data-end="1636.149">expands into this and it groups 1 & 2</span> <span data-start="1636.149" data-end="1638.49">first if I change the associativity to</span> <span data-start="1638.49" data-end="1640.59">right then it's going to group 3 & 4</span> <span data-start="1640.59" data-end="1644.73">first and then expand out from there so</span> <span data-start="1644.73" data-end="1646.529">this is why you need this special form</span> <span data-start="1646.529" data-end="1648.21">operator because it has the precedence</span> <span data-start="1648.21" data-end="1649.74">and the associative 'ti and things that</span> <span data-start="1649.74" data-end="1652.429">you can do with what the other macros</span> <span data-start="1652.429" data-end="1654.72">and this is the last one this is the</span> <span data-start="1654.72" data-end="1656.669">most complex one and one that should</span> <span data-start="1656.669" data-end="1658.649">rarely be needed really it's case</span> <span data-start="1658.649" data-end="1661.379">mappers these macros actually let you</span> <span data-start="1661.379" data-end="1663.929">run arbitrary JavaScript within the the</span> <span data-start="1663.929" data-end="1667.019">rule so it takes a pattern this is a</span> <span data-start="1667.019" data-end="1669.119">little bit different it takes it takes a</span> <span data-start="1669.119" data-end="1671.19">syntactic element that it bound on as</span> <span data-start="1671.19" data-end="1674.94">the first argument or as the first piece</span> <span data-start="1674.94" data-end="1677.34">in your pattern and then you have your</span> <span data-start="1677.34" data-end="1679.289">whole pattern but then you can actually</span> <span data-start="1679.289" data-end="1681.059">any JavaScript within this expanded code</span> <span data-start="1681.059" data-end="1683.369">so I can check if this condition isn't</span> <span data-start="1683.369" data-end="1685.679">true then throw a syntax error and this</span> <span data-start="1685.679" data-end="1687.36">lets you do things like break hygiene</span> <span data-start="1687.36" data-end="1690.84">gum which I'm about to talk about so so</span> <span data-start="1690.84" data-end="1692.19">hygiene like I said these are hygienic</span> </p>
<p><span data-start="1692.19" data-end="1694.799">Macker this is like crucially important</span> <span data-start="1694.799" data-end="1696.809">it's a basic thing that you need for any</span> <span data-start="1696.809" data-end="1698.549">macro system that's going to be used as</span> <span data-start="1698.549" data-end="1701.519">modules so the problem with macros</span> <span data-start="1701.519" data-end="1703.529">typically is we've defined this square</span> <span data-start="1703.529" data-end="1706.59">macro if it square X expands out to</span> <span data-start="1706.59" data-end="1708.6">these two lines of code which have</span> <span data-start="1708.6" data-end="1711.48">another suit var X so if it was just a</span> <span data-start="1711.48" data-end="1715.309">naive macro system I would have to two</span> <span data-start="1715.309" data-end="1717.57">variable declarations with the name X</span> <span data-start="1717.57" data-end="1719.519">and they would collide and they</span> <span data-start="1719.519" data-end="1722.279">overwrite and it leads to really strange</span> <span data-start="1722.279" data-end="1723.6">bugs and there's just you really need</span> <span data-start="1723.6" data-end="1726.45">hygiene to actually have a sound</span> <span data-start="1726.45" data-end="1728.399">macro system so a sweet J's says it</span> <span data-start="1728.399" data-end="1728.67">actual</span> <span data-start="1728.67" data-end="1730.83">renames the variables so the first X is</span> <span data-start="1730.83" data-end="1733.02">renamed X dollars 21 and the second one</span> <span data-start="1733.02" data-end="1734.64">is rename X are assigned to so it</span> <span data-start="1734.64" data-end="1736.05">removes everything to make sure that</span> <span data-start="1736.05" data-end="1739.14">it's right so this is the very last</span> <span data-start="1739.14" data-end="1741.9">thing I'm going to talk about you might</span> <span data-start="1741.9" data-end="1743.1">be sitting there thinking like well this</span> <span data-start="1743.1" data-end="1745.08">is totally all cool I would use this</span> <span data-start="1745.08" data-end="1746.64">except for one thing and that that's</span> <span data-start="1746.64" data-end="1748.17">that it breaks my syntax highlighter in</span> <span data-start="1748.17" data-end="1750.96">my editor so I looked at a lot of some</span> <span data-start="1750.96" data-end="1751.95">nice highlighters and they're actually</span> <span data-start="1751.95" data-end="1754.02">pretty loose most of them are regular</span> <span data-start="1754.02" data-end="1756.09">expression based you can do a lot of</span> <span data-start="1756.09" data-end="1758.61">weird operators and stuff this is</span> </p>
<p><span data-start="1758.61" data-end="1760.14">IntelliJ I just chose it because it's</span> <span data-start="1760.14" data-end="1761.43">just a really random one that I thought</span> <span data-start="1761.43" data-end="1763.08">would be a little bit more intrusive</span> <span data-start="1763.08" data-end="1764.49">about how it's actually parsing the code</span> <span data-start="1764.49" data-end="1766.47">but it actually worked fine I didn't</span> <span data-start="1766.47" data-end="1769.44">really throw any enters errors most</span> <span data-start="1769.44" data-end="1770.91">editors are pretty flexible and they're</span> <span data-start="1770.91" data-end="1772.02">just looking for the keywords and</span> <span data-start="1772.02" data-end="1772.86">they're just looking for a basic</span> <span data-start="1772.86" data-end="1774.78">delimiter is so that it can indent the</span> <span data-start="1774.78" data-end="1776.22">code right and it just pretty much</span> <span data-start="1776.22" data-end="1778.23">ignores everything else there are a few</span> <span data-start="1778.23" data-end="1781.17">exceptions jst mode in Emacs actually</span> <span data-start="1781.17" data-end="1783.24">little literally parses the JavaScript</span> <span data-start="1783.24" data-end="1785.13">code in your buffer so that it does</span> <span data-start="1785.13" data-end="1787.38">break that but honestly the more I think</span> <span data-start="1787.38" data-end="1789">about it the more I think that some of</span> <span data-start="1789" data-end="1790.65">those things aren't worth the return</span> <span data-start="1790.65" data-end="1793.17">because I really don't use like it tells</span> <span data-start="1793.17" data-end="1794.61">me when I'm missing a semicolon and</span> <span data-start="1794.61" data-end="1796.5">that's cool but J's hint can tell me</span> <span data-start="1796.5" data-end="1797.7">that or it's somewhat somewhat I think</span> <span data-start="1797.7" data-end="1799.53">and tell me that some kind of build time</span> <span data-start="1799.53" data-end="1801.93">that that's happening I'm starting to</span> <span data-start="1801.93" data-end="1803.13">think that something's like that might</span> <span data-start="1803.13" data-end="1804.33">actually end up holding back Java</span> <span data-start="1804.33" data-end="1805.86">scripts because a lot of people don't</span> <span data-start="1805.86" data-end="1808.02">use es6 because not only is ESX not</span> <span data-start="1808.02" data-end="1809.76">implemented you could use it with trace</span> <span data-start="1809.76" data-end="1811.08">or something but a lot of these other</span> <span data-start="1811.08" data-end="1813.09">tools haven't implemented like editors</span> <span data-start="1813.09" data-end="1814.92">haven't implemented like the fat arrow</span> <span data-start="1814.92" data-end="1817.56">syntax so it the the editor breaks so</span> </p>
<p><span data-start="1817.56" data-end="1818.34">I'm actually starting to think that</span> <span data-start="1818.34" data-end="1820.05">things like editors the looser the</span> <span data-start="1820.05" data-end="1824.13">highlighting is the better so I'm I mean</span> <span data-start="1824.13" data-end="1825.42">maybe I'm a little bit biased because I</span> <span data-start="1825.42" data-end="1827.82">do like to use macros but I've actually</span> <span data-start="1827.82" data-end="1830.09">seen like vim works great with the with</span> <span data-start="1830.09" data-end="1832.8">different operators and stuff like that</span> <span data-start="1832.8" data-end="1834.84">basically anything on a new line that is</span> <span data-start="1834.84" data-end="1836.49">still part of the previous previous</span> <span data-start="1836.49" data-end="1838.2">expression is just intended like two or</span> <span data-start="1838.2" data-end="1839.49">four spaces and they just kind of</span> <span data-start="1839.49" data-end="1843.21">doesn't care what it is so just a quick</span> <span data-start="1843.21" data-end="1844.98">recap javascript is under a lot of</span> <span data-start="1844.98" data-end="1846.9">pressure to evolve and suite just</span> <span data-start="1846.9" data-end="1849.42">provides powerful macros for adding</span> <span data-start="1849.42" data-end="1850.98">these features as libraries and we can</span> <span data-start="1850.98" data-end="1852.24">test them out early we can try them</span> <span data-start="1852.24" data-end="1854.7">early and see if they work compilers</span> <span data-start="1854.7" data-end="1856.65">can't work together there they're great</span> <span data-start="1856.65" data-end="1858.42">for some things but for specifically</span> <span data-start="1858.42" data-end="1861.049">language extensions there</span> <span data-start="1861.049" data-end="1863.179">a little bit more they tend to create</span> <span data-start="1863.179" data-end="1866.45">silos and we can help tc39 we can help</span> <span data-start="1866.45" data-end="1868.73">liberate javascript so we don't have to</span> <span data-start="1868.73" data-end="1871.419">wait 14 years for a variable destruction</span> <span data-start="1871.419" data-end="1872.749">that's it</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
