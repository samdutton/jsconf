<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="JSConf transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>n4oIrB4_pCA</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/n4oIrB4_pCA?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="4.22" data-end="7.5">oops I am extremely nervous right now I</span> <span data-start="7.5" data-end="9.45">feel like I can't breathe but I'm</span> <span data-start="9.45" data-end="13.95">extremely excited but first I have</span> <span data-start="13.95" data-end="19.529">something to share warning right now</span> <span data-start="19.529" data-end="23.88">your users are at risk users of the web</span> <span data-start="23.88" data-end="26.699">everywhere are frustrated in this very</span> <span data-start="26.699" data-end="28.23">moment with the applications that</span> <span data-start="28.23" data-end="31.56">they're forced used every day this is a</span> <span data-start="31.56" data-end="33.809">review from the internet somebody wrote</span> <span data-start="33.809" data-end="35.51">about their application hey Amelia</span> <span data-start="35.51" data-end="37.41">somebody wrote about their application</span> <span data-start="37.41" data-end="39.95">the new version sometimes slows down</span> <span data-start="39.95" data-end="42.899">this is a real user of a real web app</span> <span data-start="42.899" data-end="44.82">there's a real review it's from the</span> </p>
<p><span data-start="44.82" data-end="46.23">Internet so we know we can trust it</span> <span data-start="46.23" data-end="49.95">and here's another review sometimes it</span> <span data-start="49.95" data-end="52.199">takes a lot of time for loading the</span> <span data-start="52.199" data-end="58.14">contents someone else simply wrote it's</span> <span data-start="58.14" data-end="62.64">too slow this could happen to you and</span> <span data-start="62.64" data-end="66.21">this could happen to your users but I'm</span> <span data-start="66.21" data-end="68.28">here today to tell you that there is</span> <span data-start="68.28" data-end="70.799">hope my name is Wil Klein I'm from</span> <span data-start="70.799" data-end="72.75">Boulder Colorado where I work at workday</span> <span data-start="72.75" data-end="74.85">as a full stack engineer this is my</span> <span data-start="74.85" data-end="78.39">family and I also have a confession to</span> <span data-start="78.39" data-end="81.299">share I have built apps that have</span> <span data-start="81.299" data-end="85.14">reviews like these and when approached</span> <span data-start="85.14" data-end="88.47">with these complaints I will initially</span> <span data-start="88.47" data-end="91.7">reply well it works fast on my machine</span> <span data-start="91.7" data-end="95.909">but what about their machine what about</span> <span data-start="95.909" data-end="99.18">their browser I use Chrome but it turns</span> <span data-start="99.18" data-end="100.32">out there's this other browser out there</span> <span data-start="100.32" data-end="105.869">called Internet Explorer 11 and users</span> <span data-start="105.869" data-end="107.579">everywhere are forced by their IT</span> <span data-start="107.579" data-end="109.53">departments to use it to use</span> <span data-start="109.53" data-end="111.57">applications like mine and it makes my</span> <span data-start="111.57" data-end="113.42">life a living hell</span> <span data-start="113.42" data-end="115.5">what about their connection I have a</span> <span data-start="115.5" data-end="117.57">very fast internet connection at home</span> <span data-start="117.57" data-end="120.659">and at work but not everyone has that</span> <span data-start="120.659" data-end="123.63">and not everyone has a fast VPN either</span> <span data-start="123.63" data-end="125.909">sometimes their internet is fast when</span> <span data-start="125.909" data-end="128.069">they dial into a VPN across the world</span> <span data-start="128.069" data-end="131.31">everything slows down a little bit and</span> <span data-start="131.31" data-end="133.93">what about their data have you ever</span> <span data-start="133.93" data-end="138.189">seen a defect or a bug where the the</span> <span data-start="138.189" data-end="139.659">complaint is that they're they're rich</span> <span data-start="139.659" data-end="141.43">text doesn't actually render as rich</span> <span data-start="141.43" data-end="145.759">text but as HTML in a plain text field</span> <span data-start="145.769" data-end="148.209">users do interesting things with our app</span> <span data-start="148.209" data-end="150.099">that we don't quite anticipate all the</span> <span data-start="150.099" data-end="153.819">time and what about their data some of</span> <span data-start="153.819" data-end="156.489">our applications are configurable to the</span> <span data-start="156.489" data-end="158.769">user or their organization where they</span> <span data-start="158.769" data-end="162.28">can change their data model to have any</span> <span data-start="162.28" data-end="164.59">type of Ire have different types of</span> <span data-start="164.59" data-end="167.59">hierarchy and this can lead to lots of</span> <span data-start="167.59" data-end="169.989">performance woes that we can't very well</span> <span data-start="169.989" data-end="173.139">anticipate so there are many variables</span> <span data-start="173.139" data-end="175.9">that work their way into our web app</span> <span data-start="175.9" data-end="178.419">performance and our user experience and</span> <span data-start="178.419" data-end="181.06">this is a full-stack problem we can't</span> <span data-start="181.06" data-end="183.189">just look at the front end or the back</span> <span data-start="183.189" data-end="184.569">end we need to look at the full picture</span> <span data-start="184.569" data-end="186.9">and see what's happening throughout the</span> <span data-start="186.9" data-end="190.409">system to know what we might need to do</span> <span data-start="190.409" data-end="193.45">and there are tools we can use we can do</span> <span data-start="193.45" data-end="196.03">performance audits on our application we</span> <span data-start="196.03" data-end="197.68">can do performance testing on our micro</span> <span data-start="197.68" data-end="201.069">services we can monitor our services and</span> <span data-start="201.069" data-end="203.919">look at their response times and we can</span> <span data-start="203.919" data-end="205.479">even do application profiling on the</span> <span data-start="205.479" data-end="207.699">front end and the back end to look for</span> <span data-start="207.699" data-end="209.979">memory leaks and anything that might be</span> <span data-start="209.979" data-end="213.28">slowing down but none of these things</span> <span data-start="213.28" data-end="215.439">look at what's actually happening for</span> <span data-start="215.439" data-end="218.59">our users in the wild so how do we</span> <span data-start="218.59" data-end="221.199">observe our users applications in the</span> <span data-start="221.199" data-end="223.54">wild how do we observe their actual user</span> <span data-start="223.54" data-end="225.549">experience to know what's really</span> <span data-start="225.549" data-end="227.769">happening in their conditions when they</span> <span data-start="227.769" data-end="230.709">use our application we're going to talk</span> <span data-start="230.709" data-end="232.329">about that today and follow the full</span> <span data-start="232.329" data-end="234.34">stack trace and learn how we can</span> <span data-start="234.34" data-end="235.81">understand our app with the distributed</span> <span data-start="235.81" data-end="239.919">tracing my cursor is in the middle</span> <span data-start="239.919" data-end="242.56">screen I hate that so this is a</span> <span data-start="242.56" data-end="244.979">daredevil from the Netflix series and</span> <span data-start="244.979" data-end="247.15">daredevil is a very interesting Marvel</span> <span data-start="247.15" data-end="251.169">superhero he's blind but he had his</span> <span data-start="251.169" data-end="252.729">superpowers that he can sense everything</span> <span data-start="252.729" data-end="255.639">around him with his other senses so much</span> <span data-start="255.639" data-end="258.759">so that he's able to observe an</span> <span data-start="258.759" data-end="261.669">unprecedented way despite lacking any</span> <span data-start="261.669" data-end="264.159">vision so I wonder if there's something</span> <span data-start="264.159" data-end="266.38">that we can tap into that would give us</span> </p>
<p><span data-start="266.38" data-end="267.79">Bella / superpower</span> <span data-start="267.79" data-end="269.11">so we can observe what's actually</span> <span data-start="269.11" data-end="274.27">happening in the wild I believe we can</span> <span data-start="274.27" data-end="277.45">get that with distributed tracing zoom</span> <span data-start="277.45" data-end="280.42">is a little bit so this is a trace we're</span> <span data-start="280.42" data-end="281.89">gonna jump right into what this looks</span> <span data-start="281.89" data-end="284.92">like a trace is essentially a series of</span> <span data-start="284.92" data-end="289.08">timings and each row in this is a</span> <span data-start="289.08" data-end="291.73">specific timing where a specific thing</span> <span data-start="291.73" data-end="293.62">happens and each of those things is</span> <span data-start="293.62" data-end="296.17">called the span in this case the whole</span> <span data-start="296.17" data-end="299.35">trace is following a user request the</span> <span data-start="299.35" data-end="302.38">user request is going to hit slash</span> <span data-start="302.38" data-end="304.51">dispatch with the HTTP GET request and</span> <span data-start="304.51" data-end="306.15">then a bunch of things happen after that</span> <span data-start="306.15" data-end="309.16">there's other HTTP requests associated</span> <span data-start="309.16" data-end="311.62">with it to other endpoints there's</span> <span data-start="311.62" data-end="313.87">database calls to my sequel there's</span> <span data-start="313.87" data-end="316.33">access to Redis there's a bunch of</span> <span data-start="316.33" data-end="318.28">things that we can see happening when</span> <span data-start="318.28" data-end="322.06">this request processes now some of these</span> <span data-start="322.06" data-end="323.83">things happen in parallel the the first</span> <span data-start="323.83" data-end="325.3">four things and the blue and the yellow</span> <span data-start="325.3" data-end="326.56">on the brown they're happening in</span> <span data-start="326.56" data-end="328.87">parallel and that's that's good they can</span> <span data-start="328.87" data-end="331.12">happen at the same time and then you see</span> <span data-start="331.12" data-end="333.4">the next set of things happen afterwards</span> <span data-start="333.4" data-end="335.23">so some things are happening in parallel</span> <span data-start="335.23" data-end="338.1">some things are happening sequentially</span> <span data-start="338.1" data-end="340.18">and this is interesting because then we</span> <span data-start="340.18" data-end="342.22">can start to see with this trace at</span> <span data-start="342.22" data-end="344.02">least in our back in here we can see</span> <span data-start="344.02" data-end="345.97">what is happening how long is it taking</span> <span data-start="345.97" data-end="348.04">what can happen at the same time and</span> <span data-start="348.04" data-end="350.47">what's being blocked and this is where</span> <span data-start="350.47" data-end="351.79">we can start to see where bottlenecks</span> <span data-start="351.79" data-end="353.95">are happening it's also where we can</span> <span data-start="353.95" data-end="356.02">start to see what actually happens when</span> <span data-start="356.02" data-end="360.64">you use a request happens so this was</span> <span data-start="360.64" data-end="364.23">shown with Yaeger UI from Yaeger tracing</span> </p>
<p><span data-start="364.23" data-end="367.51">Iger is a open source project that is</span> <span data-start="367.51" data-end="369.16">managed by the cloud native computing</span> <span data-start="369.16" data-end="372.36">foundation there's several members of</span> <span data-start="372.36" data-end="375.22">the cloud native computing foundation</span> <span data-start="375.22" data-end="377.2">that are sponsoring and supporting this</span> <span data-start="377.2" data-end="379.03">project so hopefully it'll be around</span> <span data-start="379.03" data-end="381.04">awhile they have a number of other</span> <span data-start="381.04" data-end="382.48">projects like kubernetes so they're</span> <span data-start="382.48" data-end="383.02">doing pretty well</span> </p>
<p><span data-start="383.02" data-end="385.99">I was listening in this podcast last</span> <span data-start="385.99" data-end="387.58">week and was interviewed with Yura</span> <span data-start="387.58" data-end="388.51">Shakur Oh</span> <span data-start="388.51" data-end="390.28">one of the main authors behind the Jager</span> <span data-start="390.28" data-end="396.03">and about 12 minutes in the podcast</span> <span data-start="396.03" data-end="398.86">interviewer made a statement</span> <span data-start="398.86" data-end="402.3">everybody wants distributed tracing I</span> <span data-start="402.3" data-end="404.65">stop right there for a moment and I</span> <span data-start="404.65" data-end="407.349">started to wonder how many of you have</span> <span data-start="407.349" data-end="408.849">heard of distributed tracing before this</span> <span data-start="408.849" data-end="412.21">conference whew that's pretty good</span> <span data-start="412.21" data-end="415.27">but maybe like maybe half not everyone</span> <span data-start="415.27" data-end="417.759">and what I've found in my travels</span> <span data-start="417.759" data-end="419.919">particularly in front-end development is</span> <span data-start="419.919" data-end="422.919">a lot of people haven't heard of it and</span> <span data-start="422.919" data-end="424.15">if you don't work in enterprise software</span> <span data-start="424.15" data-end="426.25">or an organization that maybe already</span> <span data-start="426.25" data-end="428.5">has this on the back end you might not</span> <span data-start="428.5" data-end="431.62">have had exposure or the need to look at</span> <span data-start="431.62" data-end="434.259">this and the other interesting thing</span> <span data-start="434.259" data-end="436.18">about this podcast is this was about 12</span> <span data-start="436.18" data-end="437.71">minutes in they talked about micro</span> <span data-start="437.71" data-end="439.449">servers for the first 12 minutes and</span> <span data-start="439.449" data-end="440.919">that's actually where I think a lot of</span> <span data-start="440.919" data-end="442.569">the content around distributed tracing</span> <span data-start="442.569" data-end="445.06">is focused is on the back end and how we</span> <span data-start="445.06" data-end="447.25">handle the requests to our micro</span> <span data-start="447.25" data-end="449.11">services I want to look at that in a</span> <span data-start="449.11" data-end="451.93">different way today when I look at these</span> <span data-start="451.93" data-end="455.409">front end spans the the blue that you</span> <span data-start="455.409" data-end="457.629">see here at the top where it doesn't has</span> <span data-start="457.629" data-end="459.25">a front end before it these are</span> <span data-start="459.25" data-end="461.469">basically identifying when the request</span> <span data-start="461.469" data-end="463.419">came in from the front end there's no</span> <span data-start="463.419" data-end="465.88">other information about what happened in</span> <span data-start="465.88" data-end="468.55">the browser to kick off that request I</span> <span data-start="468.55" data-end="470.11">want to go a little deeper there if we</span> <span data-start="470.11" data-end="472.99">can so how do we apply this to the front</span> <span data-start="472.99" data-end="476.44">end the first thing to think about is</span> <span data-start="476.44" data-end="478.719">well what makes up a trace when do we</span> <span data-start="478.719" data-end="481.09">have a trace what do we consider a user</span> <span data-start="481.09" data-end="483.88">request so I think about two things</span> <span data-start="483.88" data-end="487.029">really when we're loading a page or</span> <span data-start="487.029" data-end="489.279">doing a route change we're loading a</span> <span data-start="489.279" data-end="491.529">whole view essentially or when there's</span> <span data-start="491.529" data-end="493.75">any UI interaction of any kind maybe</span> <span data-start="493.75" data-end="495.969">they're doing an inline edit or they're</span> <span data-start="495.969" data-end="498.46">doing a button click basically any time</span> <span data-start="498.46" data-end="500.319">the user interacts with the application</span> <span data-start="500.319" data-end="502">whether they're pulling it down for the</span> <span data-start="502" data-end="504.4">first time or navigating to another page</span> <span data-start="504.4" data-end="507.52">or clicking on a button that is when we</span> <span data-start="507.52" data-end="509.08">want to start thinking about what's</span> <span data-start="509.08" data-end="513.13">happening and that's a user action the</span> <span data-start="513.13" data-end="514.779">other way the other side to think about</span> <span data-start="514.779" data-end="516.55">is the feedback that we're giving to the</span> <span data-start="516.55" data-end="519.399">user when does the page render when has</span> <span data-start="519.399" data-end="521.589">your eye state updated when does the</span> <span data-start="521.589" data-end="523.63">user consider it to have finished when</span> <span data-start="523.63" data-end="526.66">they did something this comprises the</span> <span data-start="526.66" data-end="528.699">user experience from page load to the</span> <span data-start="528.699" data-end="530.589">page rendering from the button being</span> <span data-start="530.589" data-end="531.52">clicked</span> <span data-start="531.52" data-end="534.1">to the view updating this is what I want</span> <span data-start="534.1" data-end="535.48">to measure and what I want to capture</span> <span data-start="535.48" data-end="539.47">with my distributed traces so I go back</span> <span data-start="539.47" data-end="543.49">to this I want to take those blue</span> <span data-start="543.49" data-end="546.13">front-end bars and enrich them with more</span> <span data-start="546.13" data-end="549.28">child spans more things that comprise</span> <span data-start="549.28" data-end="552.94">those components so I can know what did</span> <span data-start="552.94" data-end="554.83">they click what happened in the browser</span> <span data-start="554.83" data-end="556.66">before the request happened when did it</span> <span data-start="556.66" data-end="558.91">request it in the browser and not just</span> <span data-start="558.91" data-end="562.75">when did we get on the back end so how</span> <span data-start="562.75" data-end="565.36">do we instrument our code we're going to</span> <span data-start="565.36" data-end="568.18">start with how we time stuff now when I</span> <span data-start="568.18" data-end="569.74">walk through some code examples here I</span> <span data-start="569.74" data-end="571.3">don't want you to get too hung up on the</span> <span data-start="571.3" data-end="574.87">nuances of the Samiha of the code or any</span> <span data-start="574.87" data-end="576.85">specific semantics it's intentionally</span> <span data-start="576.85" data-end="579.7">abstracted just to have the main idea of</span> <span data-start="579.7" data-end="581.8">what is a trace was a span how do we</span> <span data-start="581.8" data-end="583.42">time things and how we might bring that</span> <span data-start="583.42" data-end="586.87">into our application so our first</span> <span data-start="586.87" data-end="588.58">example is how do we start a trace we</span> <span data-start="588.58" data-end="590.74">need some API that lets us well start a</span> <span data-start="590.74" data-end="592.84">trace and give it a description did we</span> <span data-start="592.84" data-end="595.24">load a page or do we navigate to a new</span> </p>
<p><span data-start="595.24" data-end="598.72">URL it might look something like this</span> <span data-start="598.72" data-end="600.04">might give a description that we have a</span> <span data-start="600.04" data-end="601.45">route change and then we give it the</span> <span data-start="601.45" data-end="603.49">slug where's that window location that</span> <span data-start="603.49" data-end="608.56">we're navigating to and to record a span</span> <span data-start="608.56" data-end="611.2">within that trace more specific work</span> <span data-start="611.2" data-end="614.26">that's happening in the system for any</span> <span data-start="614.26" data-end="616.54">of work that we do we want to time it</span> <span data-start="616.54" data-end="620.02">again and here we're starting a span</span> <span data-start="620.02" data-end="622.42">instead of starting a trace and then we</span> <span data-start="622.42" data-end="625.39">want to do the work we want to see</span> <span data-start="625.39" data-end="629.26">whatever it is that we need to do could</span> <span data-start="629.26" data-end="631.66">be anything right now and then when that</span> <span data-start="631.66" data-end="635.68">work is done we want to stop the span a</span> <span data-start="635.68" data-end="637.21">quick example of that is maybe we're</span> <span data-start="637.21" data-end="639.25">making a network request maybe we're</span> <span data-start="639.25" data-end="641.38">making a request to a web service and we</span> <span data-start="641.38" data-end="643.84">need to start a span and record that</span> <span data-start="643.84" data-end="648.09">it's request and take a specific request</span> <span data-start="648.09" data-end="650.29">what's behind the API I've start tracing</span> <span data-start="650.29" data-end="655.39">start span not too much basic idea is</span> <span data-start="655.39" data-end="656.65">you want to keep track of the trace</span> <span data-start="656.65" data-end="659.26">that's active so I have a let for the</span> <span data-start="659.26" data-end="660.97">current trace and then my start trace</span> <span data-start="660.97" data-end="663.4">function sets that current trace to be a</span> <span data-start="663.4" data-end="664.76">new object</span> <span data-start="664.76" data-end="667.1">and then it has a start time and a</span> <span data-start="667.1" data-end="669.62">unique ID with those two things those</span> <span data-start="669.62" data-end="671.089">are the main components of the trace we</span> <span data-start="671.089" data-end="672.949">need to know when it started and what is</span> <span data-start="672.949" data-end="674.63">that what is its identifier because</span> <span data-start="674.63" data-end="676.639">we're going to need that later and start</span> <span data-start="676.639" data-end="678.68">fist ban is very similar we just need to</span> <span data-start="678.68" data-end="681.11">start the time for a given span and</span> <span data-start="681.11" data-end="684.38">maintain a reference to it for stopping</span> <span data-start="684.38" data-end="686.18">the trace we just record the stop time</span> <span data-start="686.18" data-end="688.79">we're just doing a new date get the time</span> <span data-start="688.79" data-end="692.839">and putting that on the trace and then</span> <span data-start="692.839" data-end="694.55">when we're done with that trace when</span> <span data-start="694.55" data-end="695.51">we've stopped it</span> <span data-start="695.51" data-end="699.199">we need to persist it in some way this</span> <span data-start="699.199" data-end="702.26">could be an HTTP request but do have a</span> <span data-start="702.26" data-end="704.81">warning there initially when you getting</span> <span data-start="704.81" data-end="706.76">started with this making an HTTP request</span> <span data-start="706.76" data-end="708.8">is great just to see what's happening</span> <span data-start="708.8" data-end="710.779">seeing that on the wire making sure you</span> <span data-start="710.779" data-end="712.43">can thread that through to the eager</span> <span data-start="712.43" data-end="714.35">back end and that it pulls up in their</span> </p>
<p><span data-start="714.35" data-end="716.93">UI but eventually you're going to want</span> <span data-start="716.93" data-end="718.37">to have strategies to not create</span> <span data-start="718.37" data-end="720.649">additional user web requests every time</span> <span data-start="720.649" data-end="723.199">the user does something so batching is a</span> <span data-start="723.199" data-end="724.699">really good strategy to roll those up</span> <span data-start="724.699" data-end="726.709">somehow and then send them all at once</span> <span data-start="726.709" data-end="731.72">so what does this look like in a real</span> <span data-start="731.72" data-end="733.85">application maybe we're using react or</span> <span data-start="733.85" data-end="737.569">view or angular this gets a little bit</span> <span data-start="737.569" data-end="740.269">tricky it will vary per application I've</span> <span data-start="740.269" data-end="742.579">done a lot with react and even with</span> <span data-start="742.579" data-end="743.12">react</span> <span data-start="743.12" data-end="745.399">there's react with redux there's react</span> <span data-start="745.399" data-end="747.589">with state manage by react context I</span> <span data-start="747.589" data-end="749.899">might even be using Apollo client with</span> <span data-start="749.899" data-end="752.269">graph QL and what this looks like in</span> <span data-start="752.269" data-end="754.01">each specific implementation looks a</span> <span data-start="754.01" data-end="755.54">little bit different so we need to roll</span> <span data-start="755.54" data-end="757.01">up our sleeves a little bit to see how</span> <span data-start="757.01" data-end="759.98">we apply those api's I suggested into a</span> <span data-start="759.98" data-end="761.889">given application</span> <span data-start="761.889" data-end="764.36">but there's one common strategy that I</span> <span data-start="764.36" data-end="767.72">advocate for we could approach all of</span> <span data-start="767.72" data-end="769.61">our UI components and all of our</span> <span data-start="769.61" data-end="772.37">requests code and instrument each one</span> <span data-start="772.37" data-end="775.43">specifically but then it's easy to miss</span> <span data-start="775.43" data-end="778.01">things so I like to opt into middleware</span> <span data-start="778.01" data-end="780.949">or plugins wherever possible so that way</span> <span data-start="780.949" data-end="782.81">when I develop a new feature it just</span> <span data-start="782.81" data-end="784.79">gets picked up by the system and</span> <span data-start="784.79" data-end="787.06">middleware handles and timings for me</span> </p>
<p><span data-start="787.06" data-end="789.44">I'll show you a light example and Redux</span> <span data-start="789.44" data-end="792.11">for this the bit I want to focus on here</span> <span data-start="792.11" data-end="794.72">is in in redox or really a lot of</span> <span data-start="794.72" data-end="796.25">middlewares there's this concept of a</span> <span data-start="796.25" data-end="797.17">next function</span> <span data-start="797.17" data-end="799.329">and the idea is that you can do things</span> <span data-start="799.329" data-end="801.85">in your middleware when you're</span> <span data-start="801.85" data-end="803.23">processing requests when the event has</span> <span data-start="803.23" data-end="805.38">happened you can do it before actually</span> <span data-start="805.38" data-end="808.54">acting on that action and you do things</span> <span data-start="808.54" data-end="811.269">afterwards so in the case of tracing we</span> <span data-start="811.269" data-end="813.73">want to start a span before say hey we</span> <span data-start="813.73" data-end="815.56">got a Redux action here's its type and</span> <span data-start="815.56" data-end="817.93">then we call next and when we call next</span> <span data-start="817.93" data-end="819.459">it's going to process it it's going to</span> <span data-start="819.459" data-end="820.839">actually pass it through the system</span> <span data-start="820.839" data-end="822.85">although middlewares can act and</span> <span data-start="822.85" data-end="826.089">eventually redux state can update it's</span> <span data-start="826.089" data-end="827.709">the same for other state management</span> <span data-start="827.709" data-end="830.56">systems and then after that we can stop</span> <span data-start="830.56" data-end="832.839">the span and record when we finish that</span> <span data-start="832.839" data-end="838.81">we also need to make this full stack I</span> <span data-start="838.81" data-end="840.61">talked about not just having the</span> <span data-start="840.61" data-end="842.649">back-end spans but connecting it to the</span> <span data-start="842.649" data-end="845.529">front-end to do that we need to share</span> <span data-start="845.529" data-end="846.699">the trace that we create on the front</span> <span data-start="846.699" data-end="850.449">end with the back end I'm gonna use a</span> <span data-start="850.449" data-end="852.85">plug-in example here I'm using super</span> <span data-start="852.85" data-end="856.149">agent super agent has an API similar to</span> </p>
<p><span data-start="856.149" data-end="857.98">I think Redux middleware and Express and</span> <span data-start="857.98" data-end="859.839">Khoa have something similar when you</span> <span data-start="859.839" data-end="861.64">plug in a middleware you say hey use</span> <span data-start="861.64" data-end="863.41">this middleware well with super agent</span> <span data-start="863.41" data-end="865.839">use a plug-in you can define hey here's</span> <span data-start="865.839" data-end="869.769">what my get request is and I can say use</span> <span data-start="869.769" data-end="871.269">for a number of plugins and I will say</span> <span data-start="871.269" data-end="874.51">use my tracing plug-in and then here's</span> <span data-start="874.51" data-end="877.39">the response body pass that back now</span> <span data-start="877.39" data-end="880">tracing plugins similar to the Redux</span> <span data-start="880" data-end="881.86">example the middle of our example a</span> <span data-start="881.86" data-end="884.199">little bit simpler though we take in the</span> <span data-start="884.199" data-end="886.87">request for it and we can set things on</span> <span data-start="886.87" data-end="889.779">the request like headers so we can go</span> <span data-start="889.779" data-end="891.99">and get the trace that we manage and</span> <span data-start="891.99" data-end="895.209">then get the trace ID and put that on as</span> <span data-start="895.209" data-end="897.91">a request header for the request so we</span> <span data-start="897.91" data-end="899.38">send that to the backend our back-end</span> <span data-start="899.38" data-end="900.85">code can say hey is there already or a</span> <span data-start="900.85" data-end="903.94">trace ID existing and if it is will</span> <span data-start="903.94" data-end="905.829">create spans and associate it as</span> <span data-start="905.829" data-end="911.74">children of that does this work what</span> <span data-start="911.74" data-end="913.51">does this look like in a full stack</span> <span data-start="913.51" data-end="916.649">application in a real world example I</span> <span data-start="916.649" data-end="919.06">have another confession I've been</span> <span data-start="919.06" data-end="920.17">working really hard to come up with a</span> <span data-start="920.17" data-end="922.75">deal for this but I wasn't able to do</span> <span data-start="922.75" data-end="926.37">that in time it's not trivial</span> <span data-start="926.37" data-end="929.019">but the value is incredibly high I'm</span> <span data-start="929.019" data-end="930.29">pretty close I'm very</span> <span data-start="930.29" data-end="934.339">to share this with you soon in fact the</span> <span data-start="934.339" data-end="936.11">current state of tracing in the front</span> <span data-start="936.11" data-end="939.38">end doing at full stack is well this</span> </p>
<p><span data-start="939.38" data-end="942.019">Help Wanted there's a repository called</span> <span data-start="942.019" data-end="943.85">year client JavaScript that's under the</span> <span data-start="943.85" data-end="946.31">Jaeger tracing project and there's no</span> <span data-start="946.31" data-end="949.88">code there's one issue extract the base</span> <span data-start="949.88" data-end="951.649">JavaScript client from Jaeger client</span> <span data-start="951.649" data-end="954.529">node so your client node is an existing</span> <span data-start="954.529" data-end="957.62">NPM module that you can pull in a node</span> <span data-start="957.62" data-end="960.23">back-end and get a bunch of utilities</span> <span data-start="960.23" data-end="961.819">for starting traces and starting spans</span> <span data-start="961.819" data-end="964.79">but it's right now coupled to node and</span> <span data-start="964.79" data-end="967.819">so there's some help wanted to take out</span> <span data-start="967.819" data-end="969.259">the node bits and make something that's</span> <span data-start="969.259" data-end="972.709">browser friendly the current state of</span> <span data-start="972.709" data-end="974.329">that is that nobody is working on this</span> <span data-start="974.329" data-end="976.19">at the moment right now but there's</span> <span data-start="976.19" data-end="977.93">multiple people before this and after</span> <span data-start="977.93" data-end="980.389">this comment saying hey we need this we</span> <span data-start="980.389" data-end="983.24">want this so I think is I think this is</span> <span data-start="983.24" data-end="985.79">gonna come up more and more of very</span> <span data-start="985.79" data-end="988.25">common cases that you already have this</span> <span data-start="988.25" data-end="989.779">in your back end or that your back end</span> <span data-start="989.779" data-end="991.67">developers will bring this into the</span> <span data-start="991.67" data-end="994.459">application first and you see that</span> <span data-start="994.459" data-end="995.87">opportunity there already solved on the</span> <span data-start="995.87" data-end="997.459">infrastructure problem and it's</span> <span data-start="997.459" data-end="999.199">something to look at bringing into the</span> <span data-start="999.199" data-end="1001.99">front-end there's there's more benefit</span> <span data-start="1001.99" data-end="1004.29">that I think is behind this than just</span> <span data-start="1004.29" data-end="1007.269">finishing what the back-end developers</span> <span data-start="1007.269" data-end="1010.42">might be starting trust me it is</span> <span data-start="1010.42" data-end="1014.769">possible so five years ago I was at a</span> <span data-start="1014.769" data-end="1016.899">company that had this they had full</span> <span data-start="1016.899" data-end="1020.38">stack traces with a pre react legacy</span> <span data-start="1020.38" data-end="1022.569">front-end framework and when we migrated</span> <span data-start="1022.569" data-end="1024.189">from that framework to react we were</span> <span data-start="1024.189" data-end="1026.02">able to look at racism and the old</span> <span data-start="1026.02" data-end="1029.47">framework and then react as well and and</span> <span data-start="1029.47" data-end="1032.049">see the differences and see what was</span> <span data-start="1032.049" data-end="1033.819">improving and even what was taking a</span> <span data-start="1033.819" data-end="1036.449">step back so we were able to when we</span> <span data-start="1036.449" data-end="1039.339">migrated into flux and eventually redox</span> <span data-start="1039.339" data-end="1040.72">were able to look at where our</span> <span data-start="1040.72" data-end="1043.089">bottlenecks in the front-end and address</span> <span data-start="1043.089" data-end="1046.87">those things it is definitely possible I</span> <span data-start="1046.87" data-end="1048.76">know a number of companies have handled</span> <span data-start="1048.76" data-end="1050.62">their own but right now we're starting</span> <span data-start="1050.62" data-end="1052.15">to see this come out and open source</span> <span data-start="1052.15" data-end="1054.94">with Yaeger tracing and now we're gonna</span> <span data-start="1054.94" data-end="1057.96">see it soon in the front end I believe</span> <span data-start="1057.96" data-end="1060.64">there's another project out there called</span> <span data-start="1060.64" data-end="1063.21">real-world i/o and this is</span> <span data-start="1063.21" data-end="1066.21">basically it's like a new to MVC it's</span> <span data-start="1066.21" data-end="1067.77">been a couple years but they basically</span> <span data-start="1067.77" data-end="1070.71">have implemented react examples and</span> <span data-start="1070.71" data-end="1072.419">angular examples and view examples they</span> <span data-start="1072.419" data-end="1073.83">basically take in any of the frameworks</span> <span data-start="1073.83" data-end="1074.82">that are out there and tried to</span> <span data-start="1074.82" data-end="1077.57">implement a medium blog clone and</span> <span data-start="1077.57" data-end="1080.059">they've not only done the front-end</span> <span data-start="1080.059" data-end="1083.34">clones front-end implementation examples</span> <span data-start="1083.34" data-end="1086.1">but they've done back in examples so I'm</span> <span data-start="1086.1" data-end="1090.24">actually working on a real-world IO fork</span> <span data-start="1090.24" data-end="1092.07">right now and trying to create examples</span> <span data-start="1092.07" data-end="1097.97">of this with a full stack so stay tuned</span> <span data-start="1097.97" data-end="1100.86">so I think again about our users and how</span> <span data-start="1100.86" data-end="1102.419">we can observe what's really happening</span> <span data-start="1102.419" data-end="1105.899">in the wild I can tell you it's amazing</span> <span data-start="1105.899" data-end="1108.75">being able to see an actual trace that</span> <span data-start="1108.75" data-end="1110.909">shows like this didn't perform the way I</span> <span data-start="1110.909" data-end="1112.89">expected and being able to see things</span> <span data-start="1112.89" data-end="1116.45">that happen that I didn't expect as well</span> <span data-start="1116.45" data-end="1119.46">because when we look at our traces is</span> <span data-start="1119.46" data-end="1121.289">it's actually not just about performance</span> <span data-start="1121.289" data-end="1124.559">when I look at this I can see everything</span> <span data-start="1124.559" data-end="1127.14">happening in the system and if I include</span> <span data-start="1127.14" data-end="1129.179">the front-end activities as well then</span> <span data-start="1129.179" data-end="1131.279">everything in a potentially complex</span> <span data-start="1131.279" data-end="1133.529">distributed system is apparent in one</span> <span data-start="1133.529" data-end="1136.35">view not just what is happening how long</span> <span data-start="1136.35" data-end="1138.809">what's blocking what and what can I</span> <span data-start="1138.809" data-end="1141.33">improve about this and being able to see</span> <span data-start="1141.33" data-end="1143.309">this happen in the wild actually user</span> <span data-start="1143.309" data-end="1147.96">requests that is amazing and with that</span> <span data-start="1147.96" data-end="1150.179">we can better understand our apps this</span> <span data-start="1150.179" data-end="1151.77">can be an incredible tool not just for</span> <span data-start="1151.77" data-end="1153.75">debugging performance but for onboarding</span> <span data-start="1153.75" data-end="1156.36">new developers for seeing how different</span> <span data-start="1156.36" data-end="1157.71">parts of the system that we haven't</span> <span data-start="1157.71" data-end="1161.789">worked with yet work so checkout yogurt</span> <span data-start="1161.789" data-end="1163.62">racing IO there's a really good place to</span> <span data-start="1163.62" data-end="1165.57">start there they have an all-in-one</span> <span data-start="1165.57" data-end="1167.64">docker image that you can pull down and</span> <span data-start="1167.64" data-end="1170.46">when you run it it runs all the things</span> <span data-start="1170.46" data-end="1174.059">you need to to to aggragate and receive</span> <span data-start="1174.059" data-end="1176.76">requests for tracing and then see view</span> <span data-start="1176.76" data-end="1180.809">them in their UI and I'll share some</span> <span data-start="1180.809" data-end="1182.52">updates on Twitter follow me at Wills</span> <span data-start="1182.52" data-end="1184.26">lab we're kin hunting that real-world</span> <span data-start="1184.26" data-end="1186.539">example to share with you all and I'll</span> <span data-start="1186.539" data-end="1188.37">be around for any questions thank you</span> <span data-start="1188.37" data-end="1189.87">all for listening it's been a blast to</span> <span data-start="1189.87" data-end="1191.159">to share this with you and I hope to</span> <span data-start="1191.159" data-end="1192.48">discuss this more with you in the future</span> <span data-start="1192.48" data-end="1193.54">thanks</span> <span data-start="1193.54" data-end="1196.8">[Applause]</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
