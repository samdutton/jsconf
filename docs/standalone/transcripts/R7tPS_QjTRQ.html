<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="JSConf transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>R7tPS_QjTRQ</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/R7tPS_QjTRQ?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="0" data-end="2.1">this is my first conference talk so I</span> <span data-start="2.1" data-end="4.52">apologize it's horrible fair with me</span> <span data-start="4.52" data-end="8.82">what I'm talking about is cool so I am</span> <span data-start="8.82" data-end="11.219">John Lennon dilla and you can find me on</span> <span data-start="11.219" data-end="14.58">github under the same name as well as on</span> <span data-start="14.58" data-end="16.32">Twitter will be talking about bizarre</span> <span data-start="16.32" data-end="19.35">all out which is the beginnings of a</span> <span data-start="19.35" data-end="23.01">tool for happy to do some static</span> <span data-start="23.01" data-end="25.74">analysis as well as dynamic analysis to</span> <span data-start="25.74" data-end="29.099">help make secure apps so I first want to</span> <span data-start="29.099" data-end="32.009">look at why we lack good security tools</span> <span data-start="32.009" data-end="35.07">in node as it is right now one of the</span> <span data-start="35.07" data-end="37.89">main reasons is that a javascript is</span> <span data-start="37.89" data-end="41.19">pretty free you can do a whole lot of</span> <span data-start="41.19" data-end="42.42">different things with it you can use</span> <span data-start="42.42" data-end="44.219">just about any programming paradigm that</span> <span data-start="44.219" data-end="46.59">you want which means that it's hard to</span> <span data-start="46.59" data-end="49.17">make a static pattern you can look</span> <span data-start="49.17" data-end="51.719">through in an application and find out</span> <span data-start="51.719" data-end="54.449">okay well this this particular method is</span> <span data-start="54.449" data-end="57.27">bad it's a it's an insecure default kind</span> <span data-start="57.27" data-end="63.42">of thing right so happy happens to help</span> <span data-start="63.42" data-end="66.96">that problem a little bit by creating</span> <span data-start="66.96" data-end="71.159">some more structure which you can see we</span> <span data-start="71.159" data-end="74.22">can do this in rails because the rails</span> <span data-start="74.22" data-end="76.2">has clearly defined patterns and secure</span> <span data-start="76.2" data-end="78.42">defaults it's a lot more structured than</span> <span data-start="78.42" data-end="81.81">most note frameworks are that's why you</span> <span data-start="81.81" data-end="83.25">can do things like break man which</span> <span data-start="83.25" data-end="85.35">everybody loves really simple to use and</span> <span data-start="85.35" data-end="88.799">it works because there's good defaults</span> <span data-start="88.799" data-end="90.93">everything's unified you're using a one</span> <span data-start="90.93" data-end="92.939">consistent library to do your</span> <span data-start="92.939" data-end="94.65">connections to databases and things like</span> <span data-start="94.65" data-end="97.259">that or is in the the more not nodular</span> <span data-start="97.259" data-end="98.79">modular space of note you're going to be</span> <span data-start="98.79" data-end="102.15">using possibly any kind of database</span> <span data-start="102.15" data-end="106.229">connection right and no it doesn't</span> <span data-start="106.229" data-end="108.75">really have the secure defaults and</span> <span data-start="108.75" data-end="112.649">clearly defined patterns instead you got</span> <span data-start="112.649" data-end="116.009">to handle them yourselves the trade-off</span> <span data-start="116.009" data-end="118.11">for the freedom is similar to the</span> <span data-start="118.11" data-end="119.28">problem that you're going to find it any</span> <span data-start="119.28" data-end="122.399">complex parser if you want the parser to</span> <span data-start="122.399" data-end="124.2">handle the input well you have to define</span> <span data-start="124.2" data-end="126.42">clear structures and fail when the</span> <span data-start="126.42" data-end="128.55">structures are corrupted when there's no</span> <span data-start="128.55" data-end="130.95">structure there's no parsing if you try</span> <span data-start="130.95" data-end="133.86">and put a piece of random binary data in</span> <span data-start="133.86" data-end="136.37">to your PDF reader it's going to crash</span> <span data-start="136.37" data-end="138.72">we have a great tool for overcoming this</span> <span data-start="138.72" data-end="141.03">though and happy validating all data</span> <span data-start="141.03" data-end="143.88">structures is the norm rather than an</span> <span data-start="143.88" data-end="146.37">outlier it's it's what people do the</span> <span data-start="146.37" data-end="148.08">more common thing you'll see in a happy</span> <span data-start="148.08" data-end="150.99">application is validators for everything</span> <span data-start="150.99" data-end="156.39">which is awesome structure and happy is</span> <span data-start="156.39" data-end="159.09">not optional it's consistent it's</span> <span data-start="159.09" data-end="161.73">validated it doesn't let you do a lot of</span> <span data-start="161.73" data-end="164.52">crazy things that other frameworks let</span> <span data-start="164.52" data-end="166.86">you do which I really a security person</span> </p>
<p><span data-start="166.86" data-end="169.74">I think that's great and it allows me to</span> <span data-start="169.74" data-end="172.35">parse the routing table it allows me to</span> <span data-start="172.35" data-end="175.17">parse various configuration options</span> <span data-start="175.17" data-end="177.39">within the application and actually</span> <span data-start="177.39" data-end="179.19">verify that some of those things are</span> <span data-start="179.19" data-end="182.37">secure so laut is already utilized this</span> <span data-start="182.37" data-end="185.91">and as we saw in previous talks things</span> <span data-start="185.91" data-end="188.58">like happy swagger have utilized this to</span> <span data-start="188.58" data-end="191.82">make auto documentation tools so you can</span> <span data-start="191.82" data-end="194.61">see documentation for your routes well I</span> <span data-start="194.61" data-end="197.459">was working on something similar a</span> <span data-start="197.459" data-end="199.08">couple months ago and thought you know</span> <span data-start="199.08" data-end="201.54">what I wonder if I could use this to</span> <span data-start="201.54" data-end="204.72">actually test the application and fuzz</span> <span data-start="204.72" data-end="206.94">it without having to give it a whole lot</span> <span data-start="206.94" data-end="213.48">of manual context and this brings us</span> <span data-start="213.48" data-end="215.79">back to the beginning the security</span> <span data-start="215.79" data-end="217.41">animation is difficult because there's</span> <span data-start="217.41" data-end="220.22">so little consistent structuring node</span> <span data-start="220.22" data-end="224.37">but happy solves that problem so break</span> <span data-start="224.37" data-end="226.23">man is two rails as a bizarre lout is</span> <span data-start="226.23" data-end="228.36">the happy that's kind of what I'm trying</span> <span data-start="228.36" data-end="232.23">to build for the happy space it's a work</span> <span data-start="232.23" data-end="234.93">in progress I've begun work on it I had</span> <span data-start="234.93" data-end="236.73">something that has worked but it's a</span> <span data-start="236.73" data-end="240.18">very very complex problem and I'll just</span> <span data-start="240.18" data-end="242.73">say that converting from happy 72 happy</span> <span data-start="242.73" data-end="244.769">eight completely broke everything</span> <span data-start="244.769" data-end="246.84">because when you're dealing with like</span> <span data-start="246.84" data-end="250.019">parsing complex internal routing tables</span> <span data-start="250.019" data-end="254.01">it's it's a lot more complex of a change</span> <span data-start="254.01" data-end="257.959">right so I've got laut as a foundation</span> <span data-start="257.959" data-end="261.87">for the beginnings of the the parsing of</span> <span data-start="261.87" data-end="263.669">the routing table with some things added</span> <span data-start="263.669" data-end="266.97">on there so I can I can warn about some</span> <span data-start="266.97" data-end="269.65">basic stuff</span> <span data-start="269.66" data-end="271.98">but there's also parts of your</span> <span data-start="271.98" data-end="274.35">application like your route handlers</span> <span data-start="274.35" data-end="277.17">themselves that are still not going to</span> <span data-start="277.17" data-end="279.99">be using a necessarily a set pattern</span> <span data-start="279.99" data-end="281.91">like you can use promises or you can use</span> <span data-start="281.91" data-end="285.39">callbacks you can use any kind of</span> <span data-start="285.39" data-end="288.06">database you want or connection library</span> <span data-start="288.06" data-end="290.25">that you want right so that kind of</span> <span data-start="290.25" data-end="292.05">stuff is difficult to parse once again</span> <span data-start="292.05" data-end="296.43">so what I've done is to use that routing</span> <span data-start="296.43" data-end="298.32">table information to pull out your</span> <span data-start="298.32" data-end="299.73">parameters that you're going to be</span> <span data-start="299.73" data-end="303.27">expecting in the API get types for them</span> <span data-start="303.27" data-end="305.61">like string number whatever find out</span> <span data-start="305.61" data-end="306.93">what you're looking for in the API</span> <span data-start="306.93" data-end="310.86">endpoint and actually inject a very</span> <span data-start="310.86" data-end="312.9">complicated set of fuzzing algorithms</span> <span data-start="312.9" data-end="316.29">that I don't have time to explain but</span> <span data-start="316.29" data-end="318.75">yeah it's pretty cool stuff I'm excited</span> <span data-start="318.75" data-end="324.84">mostly about that part so given the lack</span> <span data-start="324.84" data-end="327.18">of the developer friendly API and most</span> <span data-start="327.18" data-end="329.4">security tools they're kind of a pain to</span> <span data-start="329.4" data-end="332.31">work with even if you do security</span> <span data-start="332.31" data-end="334.89">they're terrible I'm sure your thing in</span> <span data-start="334.89" data-end="337.14">what constitutes these secure defaults</span> <span data-start="337.14" data-end="339.479">that you're talking about is bizarre all</span> <span data-start="339.479" data-end="341.85">out really effective and most</span> <span data-start="341.85" data-end="344.01">importantly how much time and effort is</span> <span data-start="344.01" data-end="348.54">this going to cost me to actually use so</span> <span data-start="348.54" data-end="350.49">secure defaults this is what I have</span> <span data-start="350.49" data-end="353.76">right now these components were working</span> <span data-start="353.76" data-end="357">at some point now they're kind of</span> <span data-start="357" data-end="359.1">disconnected and I've got to link them</span> <span data-start="359.1" data-end="360.54">back together so unfortunately won't be</span> <span data-start="360.54" data-end="363.12">able to have a demo but are there an</span> <span data-start="363.12" data-end="365.729">authenticated routes this first one</span> <span data-start="365.729" data-end="367.47">really simple you just check the route</span> <span data-start="367.47" data-end="369.419">handler see if there's there's a no</span> <span data-start="369.419" data-end="371.97">offset all the routes have CSRF</span> <span data-start="371.97" data-end="374.94">protection on are the input fields</span> <span data-start="374.94" data-end="377.72">validated or rejected do you allow</span> <span data-start="377.72" data-end="380.13">unvalidated input fields do you have</span> <span data-start="380.13" data-end="383.18">empty validate handlers in your routes</span> <span data-start="383.18" data-end="386.19">and as their sensitive data being</span> <span data-start="386.19" data-end="389.1">compared in securely I can check that</span> <span data-start="389.1" data-end="392.04">with some simple static analysis stuff</span> <span data-start="392.04" data-end="395.31">as well so is bizarre a lot effective</span> <span data-start="395.31" data-end="398.37">well within the first 10 seconds of</span> <span data-start="398.37" data-end="400.08">turning it on I found a denial of</span> <span data-start="400.08" data-end="401.52">service issue with a</span> <span data-start="401.52" data-end="404.099">process next stick in a pretty popular</span> <span data-start="404.099" data-end="409.05">module and last night there is this so i</span> <span data-start="409.05" data-end="415.409">have a repeatable segments in v8 core so</span> <span data-start="415.409" data-end="418.25">that was that was a fun 2 a.m. adventure</span> <span data-start="418.25" data-end="421.349">here's the bad news though it's not</span> <span data-start="421.349" data-end="423.36">finished yet it's far from ready for</span> <span data-start="423.36" data-end="426.69">production use I'm working on it but I</span> <span data-start="426.69" data-end="429.56">have a day job as well so I don't have a</span> <span data-start="429.56" data-end="433.56">vast amount of time to put into this but</span> </p>
<p><span data-start="433.56" data-end="436.61">I am working on it as one of my primary</span> <span data-start="436.61" data-end="440.52">projects right now so it's it's</span> <span data-start="440.52" data-end="443.28">currently more of a proof of concept you</span> <span data-start="443.28" data-end="445.349">can use it if you're interested in that</span> <span data-start="445.349" data-end="448.62">to fuzz the internals of node and v8 but</span> <span data-start="448.62" data-end="450.96">it's not going to be terribly</span> <span data-start="450.96" data-end="454.86">informative for actually figuring out</span> <span data-start="454.86" data-end="456.12">the security of your application right</span> <span data-start="456.12" data-end="458.969">now but what I want to be able to do</span> <span data-start="458.969" data-end="461.009">with this is basically to have a tool</span> <span data-start="461.009" data-end="463.59">that developers can integrate into their</span> <span data-start="463.59" data-end="467.52">testing phase and just run a simple test</span> <span data-start="467.52" data-end="469.62">it doesn't have to be crazy complicated</span> <span data-start="469.62" data-end="471.03">it doesn't have to be this huge</span> <span data-start="471.03" data-end="473.37">intimidating thing you should be able to</span> <span data-start="473.37" data-end="476.46">just put something into your tests and</span> <span data-start="476.46" data-end="477.9">know whether or not you've got routes</span> <span data-start="477.9" data-end="479.539">that you forgot to put not handling</span> <span data-start="479.539" data-end="482.759">that's not a crazy difficult thing right</span> <span data-start="482.759" data-end="486">so I want to be able to do that and as</span> <span data-start="486" data-end="488.61">well as as testing for some of those</span> <span data-start="488.61" data-end="490.8">more configuration side of things I want</span> <span data-start="490.8" data-end="493.919">to make it easy for developers to battle</span> <span data-start="493.919" data-end="498.509">hardened their applications to actually</span> <span data-start="498.509" data-end="501.599">go and put more malicious path test</span> <span data-start="501.599" data-end="503.61">cases in there because i'm sure most</span> <span data-start="503.61" data-end="505.289">people that write a good solid</span> <span data-start="505.289" data-end="507.93">application will write good test cases</span> <span data-start="507.93" data-end="510.93">for it but most of those test cases are</span> <span data-start="510.93" data-end="514.86">pretty binary does this route work when</span> <span data-start="514.86" data-end="518.279">i put good stuff into it yeah okay does</span> <span data-start="518.279" data-end="520.68">it fail when I don't put stuff into it</span> <span data-start="520.68" data-end="523.979">yeah okay it fails but there's not a</span> <span data-start="523.979" data-end="526.8">whole lot further than that it's not</span> <span data-start="526.8" data-end="528.99">going to be repeatedly injecting okay is</span> <span data-start="528.99" data-end="531.6">my parser that I wrote like going to</span> <span data-start="531.6" data-end="535.11">fail so that's that's kind of</span> <span data-start="535.11" data-end="537.93">map it's where I'm wanting to head if</span> <span data-start="537.93" data-end="540.99">you're interested in using it go ahead</span> <span data-start="540.99" data-end="543.75">and start a project follow me on Twitter</span> <span data-start="543.75" data-end="549.57">or follow of security and just yeah</span> <span data-start="549.57" data-end="550.829">we'll let you know when it's ready or</span> <span data-start="550.829" data-end="555.3">make a pull request file an issue but</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
