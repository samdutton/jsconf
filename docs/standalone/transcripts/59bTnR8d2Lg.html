<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="JSConf transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>59bTnR8d2Lg</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/59bTnR8d2Lg?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="10.91" data-end="13.41">I've been the working on a framework for</span> <span data-start="13.41" data-end="16.77">the last year and a half called fuse Jas</span> <span data-start="16.77" data-end="20.58">and over the course of that time I've</span> <span data-start="20.58" data-end="22.47">learned several things and so my</span> <span data-start="22.47" data-end="23.82">presentation today is basically what I</span> <span data-start="23.82" data-end="26.88">learned creating fuse Jas and so I'm</span> <span data-start="26.88" data-end="29.61">going to go into performance selector</span> <span data-start="29.61" data-end="31.17">engines and then a thing called sandbox</span> <span data-start="31.17" data-end="38.67">natives so let's get into it alright so</span> <span data-start="38.67" data-end="41.72">the first part of performance is</span> <span data-start="41.72" data-end="44.82">reducing abstraction basically</span> <span data-start="44.82" data-end="46.37">simplifying things down to vanilla</span> </p>
<p><span data-start="46.37" data-end="50.04">JavaScript so things run faster so in</span> <span data-start="50.04" data-end="52.29">this example here we have a function</span> <span data-start="52.29" data-end="55.56">called times that takes a method and a</span> <span data-start="55.56" data-end="57.829">context and executed a number of times</span> <span data-start="57.829" data-end="60.239">and in this example you see that there's</span> <span data-start="60.239" data-end="63.66">the the range and then a dot each and so</span> <span data-start="63.66" data-end="65.1">that's that's where it's getting</span> <span data-start="65.1" data-end="70.68">abstracted so we're going to go and just</span> <span data-start="70.68" data-end="72.6">remove that and just use a regular while</span> <span data-start="72.6" data-end="74.52">loop here and it does cost a little bit</span> <span data-start="74.52" data-end="76.44">of extra code but what you end up</span> <span data-start="76.44" data-end="78.6">getting is better performance and so if</span> <span data-start="78.6" data-end="80.54">you do this in like say your entire</span> <span data-start="80.54" data-end="82.77">framework you end up getting better</span> <span data-start="82.77" data-end="84.21">performance overall because there's less</span> <span data-start="84.21" data-end="86.7">of less complexity and less function</span> <span data-start="86.7" data-end="91.159">calls so there's reducing abstraction</span> <span data-start="91.159" data-end="98.04">the next one is method forking method</span> <span data-start="98.04" data-end="100.79">forking basically whenever you have</span> <span data-start="100.79" data-end="103.74">browser capabilities you want to do some</span> <span data-start="103.74" data-end="105.6">kind of feature detection for them in</span> <span data-start="105.6" data-end="106.979">this case this is a weak object</span> <span data-start="106.979" data-end="109.11">inference basically saying that if this</span> <span data-start="109.11" data-end="111.84">is true the â€”  then it assumes it can do</span> <span data-start="111.84" data-end="113.159">all of these things and same for this</span> <span data-start="113.159" data-end="115.229">one than that one but what this is doing</span> <span data-start="115.229" data-end="116.97">is this is for every execution it's</span> <span data-start="116.97" data-end="118.74">going through and checking it every</span> <span data-start="118.74" data-end="120.75">single time and so what method forking</span> <span data-start="120.75" data-end="122.85">does is is instead of checking it every</span> <span data-start="122.85" data-end="125.1">time you check it at the definition of</span> <span data-start="125.1" data-end="128.189">the the function so you save on these</span> <span data-start="128.189" data-end="129.319">checks every</span> <span data-start="129.319" data-end="135.29">so I'm going to walk through that okay</span> <span data-start="135.29" data-end="139.76">so first we need a way to do a feature</span> <span data-start="139.76" data-end="143.359">test for the various methods and because</span> <span data-start="143.359" data-end="145.909">these are host objects host objects are</span> <span data-start="145.909" data-end="149.269">things that aren't native and so dom is</span> <span data-start="149.269" data-end="153.379">a host object so what we do is when you</span> <span data-start="153.379" data-end="155.18">access these these properties and these</span> <span data-start="155.18" data-end="157.459">methods on host objects their</span> <span data-start="157.459" data-end="160.76">implementation dependent so they can</span> <span data-start="160.76" data-end="163.4">throw errors for example element that</span> <span data-start="163.4" data-end="166.549">offset parent on a detached element will</span> <span data-start="166.549" data-end="169.31">throw an error so the best way to do</span> <span data-start="169.31" data-end="171.019">that is by a type of check and so</span> <span data-start="171.019" data-end="172.879">basically what this is is this is host</span> <span data-start="172.879" data-end="174.829">object just checks to see that it's not</span> <span data-start="174.829" data-end="177.049">a boolean it's not a number of string or</span> <span data-start="177.049" data-end="180.65">an  value and not know and it</span> <span data-start="180.65" data-end="183.049">does so without doing like a 4 in or</span> <span data-start="183.049" data-end="185.419">just a regular property access so it</span> <span data-start="185.419" data-end="187.879">avoids throwing errors when checking for</span> <span data-start="187.879" data-end="196.699">da melt so that's that okay so this is</span> <span data-start="196.699" data-end="198.199">just stepping down through the code</span> <span data-start="198.199" data-end="200.84">alright so this is the the fall back for</span> <span data-start="200.84" data-end="203.989">the contains method basically just</span> <span data-start="203.989" data-end="206.54">straight j/s without without having to</span> <span data-start="206.54" data-end="209.269">use any particular Dom API so this is</span> <span data-start="209.269" data-end="210.59">what you always want to have as a</span> <span data-start="210.59" data-end="212.239">fallback method whenever you do method</span> <span data-start="212.239" data-end="213.889">forking so in case the browser doesn't</span> <span data-start="213.889" data-end="215.959">have any of these new fancy methods you</span> <span data-start="215.959" data-end="218.629">can at least fall back on a on a regular</span> <span data-start="218.629" data-end="221.329">j/s approach so there's that one and you</span> <span data-start="221.329" data-end="223.639">notice it's when it's checking it its</span> <span data-start="223.639" data-end="226.669">defining the method here you can see</span> <span data-start="226.669" data-end="231.03">that</span> <span data-start="231.04" data-end="235.1">okay and now this is basically checking</span> <span data-start="235.1" data-end="236.48">to see that it's got the compare</span> <span data-start="236.48" data-end="239.69">document position method and it's it's</span> <span data-start="239.69" data-end="242.57">it's using it now for this instead and</span> <span data-start="242.57" data-end="244.1">that's the only thing it is doing so now</span> <span data-start="244.1" data-end="245.36">whenever you execute it it's not</span> <span data-start="245.36" data-end="246.68">checking every single line it's just</span> <span data-start="246.68" data-end="248.92">going straight to the meat of the</span> <span data-start="248.92" data-end="252.97">functionality and then the last one</span> <span data-start="252.97" data-end="257.03">there it does it for if the method</span> <span data-start="257.03" data-end="260.84">element contains exists so that's that's</span> <span data-start="260.84" data-end="263.42">a method for you can also take it a step</span> <span data-start="263.42" data-end="266.18">further and do things like lacy</span> <span data-start="266.18" data-end="268.34">definition and what that means is</span> <span data-start="268.34" data-end="272.03">whenever you define a method you don't</span> <span data-start="272.03" data-end="273.71">actually fork until the first execution</span> <span data-start="273.71" data-end="275.51">of that method and that's good for</span> <span data-start="275.51" data-end="277.94">things like event wrappers because you</span> <span data-start="277.94" data-end="279.77">don't have an event object to start off</span> <span data-start="279.77" data-end="282.8">with and does the spin up for all of</span> <span data-start="282.8" data-end="284.54">that just requires even more testing so</span> <span data-start="284.54" data-end="286.13">it's best to do it for something like</span> <span data-start="286.13" data-end="288.17">that so what that would do is for lazy</span> <span data-start="288.17" data-end="289.97">definition is on the first execution it</span> <span data-start="289.97" data-end="292.97">then it then defines it rewrites the</span> <span data-start="292.97" data-end="297.27">method and defines it again so that's</span> </p>
<p><span data-start="297.28" data-end="303.11">Method forking all right the next one is</span> <span data-start="303.11" data-end="307.22">memorizing and basically it's just fancy</span> <span data-start="307.22" data-end="309.53">word for caching and what this is is you</span> <span data-start="309.53" data-end="312.11">just create a closure create yourself a</span> <span data-start="312.11" data-end="315.08">private variable and use that as your</span> <span data-start="315.08" data-end="316.91">cash and so for example in this camel</span> <span data-start="316.91" data-end="320.39">case method you can then this is a weak</span> <span data-start="320.39" data-end="321.95">example but you can then use it to</span> <span data-start="321.95" data-end="324.94">instead of having to calculate and</span> <span data-start="324.94" data-end="327.23">create the camel case every time for a</span> <span data-start="327.23" data-end="329.27">given strength you can cash that so the</span> <span data-start="329.27" data-end="331.13">next time it comes through you can then</span> <span data-start="331.13" data-end="333.37">access the cash instead of doing the</span> <span data-start="333.37" data-end="336.58">computation on that so that would be</span> <span data-start="336.58" data-end="339.919">cashing I wanted to just do a little bit</span> <span data-start="339.919" data-end="341.99">on the performance the rest of it is on</span> <span data-start="341.99" data-end="344.6">selectors and sandbox natives but I</span> <span data-start="344.6" data-end="348.59">wanted to at least get that through all</span> <span data-start="348.59" data-end="353.6">right so my next talk is on CSS selector</span> <span data-start="353.6" data-end="355.85">engines you know everyone knows if</span> <span data-start="355.85" data-end="358.37">sizzle it's part of jQuery prototypes</span> <span data-start="358.37" data-end="362.479">using it now machi kid and there's</span> <span data-start="362.479" data-end="363.93">there's various other engines</span> <span data-start="363.93" data-end="366.33">to it gets into some of the obscure ones</span> <span data-start="366.33" data-end="368.94">over here but today I'm going to talk</span> <span data-start="368.94" data-end="373.38">about two of them and compare it to an</span> <span data-start="373.38" data-end="374.639">original one and this is because</span> <span data-start="374.639" data-end="377.31">whenever I was creating fuse Jas I had</span> <span data-start="377.31" data-end="378.69">to choose a selector engine because I</span> <span data-start="378.69" data-end="381.27">didn't want to create my own and I kind</span> <span data-start="381.27" data-end="383.699">of wanted a black box solution to throw</span> <span data-start="383.699" data-end="387.81">in there unfortunately as I started</span> <span data-start="387.81" data-end="389.58">going along I got sucked into it and so</span> <span data-start="389.58" data-end="391.139">now I know more than I ever wanted to</span> <span data-start="391.139" data-end="393.18">about selector engines so I'm going to</span> <span data-start="393.18" data-end="396.84">go ahead and narrow it down so we're</span> <span data-start="396.84" data-end="399.03">going to narrow it down to NW matter</span> <span data-start="399.03" data-end="400.919">which is used by my framework as a</span> <span data-start="400.919" data-end="404.039">default and prototype as a secondary and</span> <span data-start="404.039" data-end="405.93">then sizzle which is used by the other</span> <span data-start="405.93" data-end="414.18">ones so here we go ok so when looking</span> <span data-start="414.18" data-end="416.46">for support i'm using prototype as an</span> <span data-start="416.46" data-end="417.66">example because it had to make the</span> <span data-start="417.66" data-end="419.61">similar decision whenever it was</span> <span data-start="419.61" data-end="422.4">choosing which selector engine to to use</span> <span data-start="422.4" data-end="424.259">and so a big thing to do is look at</span> <span data-start="424.259" data-end="425.87">browser support and browser</span> <span data-start="425.87" data-end="431.039">compatibility and so you can see its</span> <span data-start="431.039" data-end="433.889">prototype one point six point one this</span> <span data-start="433.889" data-end="436.889">is its browser supported browsers and</span> <span data-start="436.889" data-end="439.37">then you can see that NW matter supports</span> <span data-start="439.37" data-end="442.169">as far back as fire 2 point 0 plus and</span> <span data-start="442.169" data-end="445.55">then sizzle supports Safari 3 which is</span> <span data-start="445.55" data-end="448.44">inconsistent with prototypes previous</span> <span data-start="448.44" data-end="449.82">support so that means when they upgrade</span> <span data-start="449.82" data-end="452.34">they're going to lose compatibility and</span> <span data-start="452.34" data-end="454.11">so so that's that's a that's an</span> <span data-start="454.11" data-end="456.75">important thing to know firefox to i</span> <span data-start="456.75" data-end="459.57">tested it it worked but it's it's it's a</span> <span data-start="459.57" data-end="462.18">it's a difference between firefox 1.5 so</span> <span data-start="462.18" data-end="463.409">it may be something to be aware of</span> <span data-start="463.409" data-end="465.03">whenever you're making decisions about</span> <span data-start="465.03" data-end="470.9">select your engines</span> <span data-start="470.91" data-end="473.05">okay another thing to look at is the</span> <span data-start="473.05" data-end="476.14">supported selectors per engine you can</span> <span data-start="476.14" data-end="479.83">see that the legacy has has quite a lot</span> <span data-start="479.83" data-end="483.13">of supported selectors the the gray here</span> <span data-start="483.13" data-end="485.68">means it's not supported and then sizzle</span> <span data-start="485.68" data-end="487.72">you see loses support for some of these</span> <span data-start="487.72" data-end="489.31">so when users upgrade they're going to</span> <span data-start="489.31" data-end="491.53">lose support for these selectors and if</span> <span data-start="491.53" data-end="493.6">they had applications built off of them</span> <span data-start="493.6" data-end="495.52">their applications are going to break so</span> <span data-start="495.52" data-end="499.75">that is something to note and it gets</span> <span data-start="499.75" data-end="500.83">really important whenever you go into</span> <span data-start="500.83" data-end="502.51">browsers that don't have query selector</span> <span data-start="502.51" data-end="505.24">all because those are the ones that need</span> <span data-start="505.24" data-end="507.01">support for these query selector all</span> <span data-start="507.01" data-end="509.26">likes kind of even things up there and</span> <span data-start="509.26" data-end="511.78">then you can see NW match or has all of</span> <span data-start="511.78" data-end="517.03">those plus some all right speaking of</span> <span data-start="517.03" data-end="519.19">query selector all there's some bugs in</span> <span data-start="519.19" data-end="522.16">query selector all and this is important</span> <span data-start="522.16" data-end="523.9">because some frameworks we'll just dump</span> <span data-start="523.9" data-end="526.48">to query selector all as a as a quick go</span> <span data-start="526.48" data-end="529.42">to because they assume it's it's working</span> <span data-start="529.42" data-end="531.58">and consistent across browsers and that</span> <span data-start="531.58" data-end="534.12">isn't the case there's there's lots of</span> <span data-start="534.12" data-end="536.65">query selector all bugs and there's</span> <span data-start="536.65" data-end="538.45">actually more than is covered here</span> <span data-start="538.45" data-end="541.12">there's there's a lot more ie bugs out</span> <span data-start="541.12" data-end="543.25">there too so this is just an overview of</span> <span data-start="543.25" data-end="546.69">which bugs each engine supports and</span> <span data-start="546.69" data-end="550.72">fixes and so you can see that they both</span> <span data-start="550.72" data-end="552.73">have some kind of class name case</span> <span data-start="552.73" data-end="554.47">sensitivity bug and then there's these</span> <span data-start="554.47" data-end="556.51">all these other bugs that are covered</span> <span data-start="556.51" data-end="561.76">under NW measure</span> <span data-start="561.77" data-end="566.94">okay now this is testing for CSS</span> <span data-start="566.94" data-end="569.37">selector css3 select your test basically</span> <span data-start="569.37" data-end="575.01">rules that the spec defines on tests and</span> <span data-start="575.01" data-end="577.95">or this test is test the rules for that</span> <span data-start="577.95" data-end="580.05">for those and so basically it's an</span> <span data-start="580.05" data-end="581.34">unimportant I'll give you links to the</span> <span data-start="581.34" data-end="583.02">examples of these but as you mouse over</span> <span data-start="583.02" data-end="584.97">it tells you what's failing from the</span> <span data-start="584.97" data-end="587.49">spec and so you can see here there's a</span> <span data-start="587.49" data-end="591.36">few inconsistencies between browsers but</span> <span data-start="591.36" data-end="594.09">not not many and so this is right now</span> <span data-start="594.09" data-end="597.77">this is the legacy so this is ie8</span> <span data-start="597.77" data-end="601.44">compatibility mode IE eight safari three</span> <span data-start="601.44" data-end="608.61">our safari for chrome for firefox 3.6</span> <span data-start="608.61" data-end="613.47">and opera 10.5 plus so so that's the</span> <span data-start="613.47" data-end="617.99">compatibility for prototypes old engine</span> <span data-start="617.99" data-end="624.28">so now</span> <span data-start="624.29" data-end="629.75">now I'll do sizzle okay so here's sizzle</span> <span data-start="629.75" data-end="632.209">and here's the you can see the tests</span> <span data-start="632.209" data-end="633.62">that it's failing its failing quite a</span> <span data-start="633.62" data-end="635.75">few more but to be fair it doesn't have</span> <span data-start="635.75" data-end="637.519">support for a lot of those those other</span> <span data-start="637.519" data-end="639.41">selectors that I'm sure this thing is</span> <span data-start="639.41" data-end="640.85">testing so keep that in mind whenever</span> <span data-start="640.85" data-end="643.31">you're looking at this that this could</span> <span data-start="643.31" data-end="646.22">be quite a lot of the selectors a dozen</span> <span data-start="646.22" data-end="648.41">some point so that's this is sizzle</span> <span data-start="648.41" data-end="652.089">through the same browser range there and</span> <span data-start="652.089" data-end="654.5">there's there's slightly different</span> <span data-start="654.5" data-end="656.99">results from mode to mode but you can</span> <span data-start="656.99" data-end="659.66">test this out to whenever you go to the</span> <span data-start="659.66" data-end="664.519">test looks and then here is NW matter so</span> <span data-start="664.519" data-end="667.399">in css3 compliance and so this is this</span> <span data-start="667.399" data-end="669.05">is its engine basically the only problem</span> <span data-start="669.05" data-end="673.61">it has is ie bugs with one where ie</span> <span data-start="673.61" data-end="675.529">strips out certain attributes that they</span> <span data-start="675.529" data-end="678.319">have default values or empty values so</span> <span data-start="678.319" data-end="680.269">it actually removes it from the source</span> <span data-start="680.269" data-end="684.019">it removes it from the attribute method</span> <span data-start="684.019" data-end="685.85">so there's no way to detect it the other</span> <span data-start="685.85" data-end="690.17">one is text nodes and how it strips out</span> <span data-start="690.17" data-end="692.449">new lines and things like that and that</span> <span data-start="692.449" data-end="696.019">will cause issues with like the empty</span> <span data-start="696.019" data-end="699.62">selector so this is NW match through all</span> <span data-start="699.62" data-end="707.949">this now I'm going to get to let's see</span> <span data-start="707.949" data-end="710.649">now I'm going to get to matching</span> <span data-start="710.649" data-end="714.5">basically selector engines can be used</span> <span data-start="714.5" data-end="716.66">in matching can be used for event</span> <span data-start="716.66" data-end="718.579">delegation so whenever you trigger an</span> <span data-start="718.579" data-end="720.529">event you check to see if an element</span> <span data-start="720.529" data-end="722.72">matches the selector and then you're</span> <span data-start="722.72" data-end="725.6">able to proceed on and so the speed of</span> <span data-start="725.6" data-end="727.189">your match method is important because</span> <span data-start="727.189" data-end="728.36">that affects the speed of a bit</span> <span data-start="728.36" data-end="731.449">delegation so this is a charge to show</span> <span data-start="731.449" data-end="735.019">the matching speed of the various</span> <span data-start="735.019" data-end="737.779">engines and so you can see the further</span> <span data-start="737.779" data-end="740.569">over the faster it is and so you have</span> <span data-start="740.569" data-end="743.3">prototype and sizzle and then NW matcher</span> <span data-start="743.3" data-end="745.6">this also test some of the native</span> <span data-start="745.6" data-end="747.439">methods that have been introduced in</span> <span data-start="747.439" data-end="748.97">late in the the newest versions of</span> </p>
<p><span data-start="748.97" data-end="753.889">WebKit and and Firefox that because they</span> <span data-start="753.889" data-end="755.36">have their own matching methods now too</span> <span data-start="755.36" data-end="757.43">and so you can see like Firefox is</span> <span data-start="757.43" data-end="757.83">native</span> <span data-start="757.83" data-end="760.2">matching method is insanely fast but web</span> <span data-start="760.2" data-end="762.75">kits you know isn't isn't as fast in</span> <span data-start="762.75" data-end="766.64">fact regular jjs engines can can beat it</span> <span data-start="766.64" data-end="768.9">so that's the breakdown here I don't</span> <span data-start="768.9" data-end="771.6">know if you can see this is uh this is</span> <span data-start="771.6" data-end="774.54">opera that's actually 10.5 for some</span> <span data-start="774.54" data-end="776.22">reason that the browser string says nine</span> <span data-start="776.22" data-end="780.21">and then it that's 3.6 for Firefox this</span> <span data-start="780.21" data-end="787.29">is IE 8 this is ie6 this is safari 4 and</span> <span data-start="787.29" data-end="797.13">chrome for now for regular performance</span> <span data-start="797.13" data-end="799.86">this is a modified form of slick speed</span> <span data-start="799.86" data-end="803.13">that talents executions in a given</span> <span data-start="803.13" data-end="805.35">amount of time instead of just three or</span> <span data-start="805.35" data-end="807">four executions so the higher the number</span> <span data-start="807" data-end="811.08">the better and the number isn't</span> <span data-start="811.08" data-end="812.88">representative of the executions it's</span> <span data-start="812.88" data-end="815.76">actually divided by 100 or so just to</span> <span data-start="815.76" data-end="817.08">make it a pretty number else it would</span> <span data-start="817.08" data-end="820.11">they would all be thousands of execution</span> <span data-start="820.11" data-end="822.24">so we don't want to see that all right</span> <span data-start="822.24" data-end="827.4">and so zoomed in view you can see NW</span> <span data-start="827.4" data-end="834.36">matter has 914 sizzle has to 96 and then</span> <span data-start="834.36" data-end="839.13">prototype has to 92 for their old engine</span> <span data-start="839.13" data-end="841.23">and then you can see because prototype</span> <span data-start="841.23" data-end="843.33">supports both NW match your and sizzle</span> <span data-start="843.33" data-end="845.73">you can see that what there's new speeds</span> <span data-start="845.73" data-end="847.77">are whenever they're running under the</span> <span data-start="847.77" data-end="856.69">new engines which is 917 and 293</span> <span data-start="856.7" data-end="859.26">okay so if you're if you're running</span> <span data-start="859.26" data-end="861.42">prototype and you want to switch to NW</span> <span data-start="861.42" data-end="864.93">matcher you have to rake it and select</span> <span data-start="864.93" data-end="866.85">your engine and so this will allow you</span> <span data-start="866.85" data-end="874.95">to choose NW metric ok the next talk is</span> <span data-start="874.95" data-end="879.51">on sandbox natives basically sandbox</span> <span data-start="879.51" data-end="884.85">natives our way to grab array string</span> <span data-start="884.85" data-end="887.28">number all of these Native objects and</span> <span data-start="887.28" data-end="889.38">constructors off of a different</span> <span data-start="889.38" data-end="890.97">environment and import them in and this</span> <span data-start="890.97" data-end="893.94">is because you have issues with for</span> <span data-start="893.94" data-end="896.55">example when you extend an array and you</span> <span data-start="896.55" data-end="899.1">then do a 4 in on that array you end up</span> <span data-start="899.1" data-end="902.04">getting the contents of the array plus</span> <span data-start="902.04" data-end="903.51">the new method that you've added to</span> <span data-start="903.51" data-end="906.03">prototype of that array and then this</span> <span data-start="906.03" data-end="907.83">this goes into explaining but in</span> <span data-start="907.83" data-end="911.82">technical jargon what it's doing but you</span> <span data-start="911.82" data-end="918.09">also have problems with frameworks for</span> <span data-start="918.09" data-end="920.13">example framework X defines a method and</span> <span data-start="920.13" data-end="922.08">then later framework why it defines</span> <span data-start="922.08" data-end="923.91">their own method paving over them and so</span> <span data-start="923.91" data-end="925.92">when you define when you extend natives</span> <span data-start="925.92" data-end="927.57">like a ray and string and function and</span> <span data-start="927.57" data-end="929.19">all of these you run the risk of</span> <span data-start="929.19" data-end="930.96">colliding into other frameworks and</span> <span data-start="930.96" data-end="932.37">other projects that extend the same</span> <span data-start="932.37" data-end="935.91">natives so that's that's a problem and</span> <span data-start="935.91" data-end="938.19">for example this is this is a real world</span> <span data-start="938.19" data-end="941.04">case where this is prototype and this is</span> </p>
<p><span data-start="941.04" data-end="944.16">EXT j/s they both do this they really</span> <span data-start="944.16" data-end="950.22">extend the same thing all right in this</span> <span data-start="950.22" data-end="951.81">case we have a problem where a framework</span> <span data-start="951.81" data-end="954.09">defines a method or let's say your own</span> <span data-start="954.09" data-end="957.3">code defines a method extending the</span> <span data-start="957.3" data-end="959.67">array and then later on a different</span> <span data-start="959.67" data-end="961.29">method if the same name gets added to</span> <span data-start="961.29" data-end="964.02">the spec ECMAScript and so then you get</span> <span data-start="964.02" data-end="966.48">issues where your implementation which</span> <span data-start="966.48" data-end="969.27">paves the other or may not is different</span> <span data-start="969.27" data-end="971.88">than the official one and so you get</span> <span data-start="971.88" data-end="973.23">different results and so this is an</span> <span data-start="973.23" data-end="975.96">example of what else can happen wrong if</span> <span data-start="975.96" data-end="978.96">you are extending natives directly on</span> <span data-start="978.96" data-end="982.88">the window</span> <span data-start="982.89" data-end="986.62">okay the solution is sandbox natives I'm</span> <span data-start="986.62" data-end="988.09">going to go into a just a brief example</span> <span data-start="988.09" data-end="990.76">of sandbox natives and talk a little bit</span> <span data-start="990.76" data-end="994.36">of how they're created I have a series</span> <span data-start="994.36" data-end="998.35">of video casts that talk about the the</span> <span data-start="998.35" data-end="1000">whole process of sandbox natives and</span> <span data-start="1000" data-end="1002.16">things and all the link to it was in the</span> <span data-start="1002.16" data-end="1004.68">beginning and I'll probably court back</span> <span data-start="1004.68" data-end="1006.45">to it at the end basically I create</span> <span data-start="1006.45" data-end="1008.43">sandbox natives in three ways I use</span> <span data-start="1008.43" data-end="1011.73">either an iframe I use an activex object</span> <span data-start="1011.73" data-end="1015.63">called activex or HTML file or I use the</span> <span data-start="1015.63" data-end="1017.85">the proto property which is the</span> <span data-start="1017.85" data-end="1019.86">underscore underscore proto underscore</span> <span data-start="1019.86" data-end="1022.65">underscore property and using those</span> <span data-start="1022.65" data-end="1024.36">three ways and I feed your test for them</span> <span data-start="1024.36" data-end="1025.68">so they don't there's no browser</span> <span data-start="1025.68" data-end="1027.42">sniffing they're using those three</span> <span data-start="1027.42" data-end="1030.24">things I'm able to grab the Constructors</span> <span data-start="1030.24" data-end="1033.3">or modify their their prototype</span> <span data-start="1033.3" data-end="1036.449">prototypical inheritance to 22 new</span> <span data-start="1036.449" data-end="1039.72">objects so therefore you're able to</span> <span data-start="1039.72" data-end="1041.64">extend these and create real number</span> <span data-start="1041.64" data-end="1044.13">objects real real array objects real</span> <span data-start="1044.13" data-end="1046.199">string objects and you're able to extend</span> <span data-start="1046.199" data-end="1049.2">them without affecting the global array</span> <span data-start="1049.2" data-end="1052.47">or a number or string or object or any</span> <span data-start="1052.47" data-end="1054.27">of those and so this is an example of</span> <span data-start="1054.27" data-end="1056.4">doing that you can see we're fused array</span> <span data-start="1056.4" data-end="1059.34">dot prototype sighs I'm extending a real</span> <span data-start="1059.34" data-end="1062.28">array and then I'm returning a real</span> <span data-start="1062.28" data-end="1063.69">array and it has that method but then</span> <span data-start="1063.69" data-end="1065.88">the window does not have that because it</span> <span data-start="1065.88" data-end="1068.61">doesn't touch the window so that means I</span> <span data-start="1068.61" data-end="1070.2">can then play with other third-party</span> <span data-start="1070.2" data-end="1071.94">code that does and it's not going to</span> <span data-start="1071.94" data-end="1077.88">affect you okay the browser's tested for</span> <span data-start="1077.88" data-end="1080.13">this these techniques are listed here</span> <span data-start="1080.13" data-end="1082.71">it's quite a lot of browsers and also</span> <span data-start="1082.71" data-end="1086.43">the various JavaScript engines because</span> <span data-start="1086.43" data-end="1088.38">it supports the proto property a lot of</span> <span data-start="1088.38" data-end="1090.09">these engines also support that property</span> <span data-start="1090.09" data-end="1092.52">and so you can actually run sandbox</span> <span data-start="1092.52" data-end="1094.68">natives on the server side as well so</span> <span data-start="1094.68" data-end="1096.75">you can avoid extending the natives</span> <span data-start="1096.75" data-end="1098.82">there as well so this is the browser</span> <span data-start="1098.82" data-end="1106.95">supported there</span> <span data-start="1106.96" data-end="1109.24">okay and this is the list of supported</span> <span data-start="1109.24" data-end="1111.76">natives that I'm able to sandbox I could</span> <span data-start="1111.76" data-end="1113.77">probably do others but this seemed to be</span> <span data-start="1113.77" data-end="1116.529">a good number of them so its array</span> <span data-start="1116.529" data-end="1119.38">boolean date function number object reg</span> <span data-start="1119.38" data-end="1121.39">ex and string and so that means you can</span> <span data-start="1121.39" data-end="1126.98">extend these all and it won't affecting</span> <span data-start="1126.99" data-end="1129.279">all right so here's some usage of</span> <span data-start="1129.279" data-end="1132.85">sandbox natives you can create the</span> <span data-start="1132.85" data-end="1135.309">string but you notice that the string is</span> <span data-start="1135.309" data-end="1138.159">not type of string its type of object</span> <span data-start="1138.159" data-end="1140.98">because it's not a primitive because if</span> <span data-start="1140.98" data-end="1142.029">it was a primitive it would be a</span> <span data-start="1142.029" data-end="1144.37">primitive of primary document and then</span> <span data-start="1144.37" data-end="1145.75">it you wouldn't be able to have the</span> <span data-start="1145.75" data-end="1148.029">sugar associated with the method so what</span> <span data-start="1148.029" data-end="1149.95">it is is it's just like calling new</span> <span data-start="1149.95" data-end="1151.929">string it returns the string instance</span> <span data-start="1151.929" data-end="1155.409">and so type of is object and you can say</span> <span data-start="1155.409" data-end="1157.84">it's just like the new string where the</span> <span data-start="1157.84" data-end="1159.549">instance is an object but what's neat is</span> <span data-start="1159.549" data-end="1161.77">that it still has the internal class of</span> <span data-start="1161.77" data-end="1164.529">string so all the the frameworks that do</span> <span data-start="1164.529" data-end="1167.529">is string or is array they all check the</span> <span data-start="1167.529" data-end="1169.27">class property and so it's always going</span> <span data-start="1169.27" data-end="1174.59">to return string or array or function</span> <span data-start="1174.6" data-end="1179.11">and then you can also chain because</span> <span data-start="1179.11" data-end="1181.12">chaining works which which required a</span> <span data-start="1181.12" data-end="1183.73">little bit of tweaking so you can you</span> <span data-start="1183.73" data-end="1186.09">can use it just like you use your normal</span> <span data-start="1186.09" data-end="1187.84">natives whenever you're extending</span> <span data-start="1187.84" data-end="1192.45">natives okay so what's cool about this</span> <span data-start="1192.45" data-end="1195.399">most people when they think of sandbox</span> <span data-start="1195.399" data-end="1197.049">natives or something will think wow I</span> <span data-start="1197.049" data-end="1198.909">can use this for a raise subclassing</span> <span data-start="1198.909" data-end="1201.399">arrays because that's that's a pretty</span> <span data-start="1201.399" data-end="1204.13">hot thing so this shows an example of</span> <span data-start="1204.13" data-end="1206.049">creating multiple fuse multiple sand</span> <span data-start="1206.049" data-end="1208.39">boxes or fuse boxes as as it's called on</span> <span data-start="1208.39" data-end="1211.059">the name space to do different things</span> <span data-start="1211.059" data-end="1213.399">one has just regular array methods but</span> <span data-start="1213.399" data-end="1215.26">the other ones used for like a jQuery</span> <span data-start="1215.26" data-end="1218.049">syntax and you can see where querying</span> <span data-start="1218.049" data-end="1220.299">returns an instance of node list which</span> <span data-start="1220.299" data-end="1223.419">has methods on it like AG class name or</span> <span data-start="1223.419" data-end="1226">show and so you can just chain all the</span> <span data-start="1226" data-end="1231.75">way through</span> <span data-start="1231.76" data-end="1234.62">okay so now I'm going to talk a little</span> <span data-start="1234.62" data-end="1237.77">bit about fuse Jas and what it has to</span> <span data-start="1237.77" data-end="1241.52">offer fuse Jas is a fork of prototype</span> </p>
<p><span data-start="1241.52" data-end="1243.53">JSI started with prototype and have been</span> <span data-start="1243.53" data-end="1245.87">shifting it over for the last year and a</span> <span data-start="1245.87" data-end="1248.69">half so I'm going to just point out some</span> <span data-start="1248.69" data-end="1252.99">of the unique things that views Jas has</span> <span data-start="1253" data-end="1257.63">all right fuse Jas is tested in ie6 plus</span> <span data-start="1257.63" data-end="1262.13">Firefox 1.5 plus chrome Conqueror opera</span> <span data-start="1262.13" data-end="1266.39">and Safari 2.00 so it supports the older</span> <span data-start="1266.39" data-end="1268.13">set of browsers that prototype used to</span> <span data-start="1268.13" data-end="1275.18">support in their previous version some</span> <span data-start="1275.18" data-end="1277.67">of the neat things our sandbox natives</span> <span data-start="1277.67" data-end="1280.03">which allow for better third party and</span> <span data-start="1280.03" data-end="1282.14">browser support because of the issues</span> <span data-start="1282.14" data-end="1283.88">that I described I don't have any of</span> <span data-start="1283.88" data-end="1286.61">those issues because I run run them in</span> <span data-start="1286.61" data-end="1289.88">their own sandbox performance what I've</span> <span data-start="1289.88" data-end="1291.5">done is I've reduced the abstraction</span> </p>
<p><span data-start="1291.5" data-end="1294.26">I've used method forking by browser</span> <span data-start="1294.26" data-end="1296.69">features to boost the performance of the</span> <span data-start="1296.69" data-end="1297.86">engine because it's not having to go</span> <span data-start="1297.86" data-end="1300.41">through everything another big thing is</span> <span data-start="1300.41" data-end="1302.18">zero browser sniffs I use feature</span> <span data-start="1302.18" data-end="1304.13">detection feature testing an object</span> <span data-start="1304.13" data-end="1306.44">inference to to do this and basically</span> <span data-start="1306.44" data-end="1307.94">the difference between feature testing</span> <span data-start="1307.94" data-end="1311.12">and feature detection is feature testing</span> <span data-start="1311.12" data-end="1315.14">is like is sorry feature detection is</span> <span data-start="1315.14" data-end="1318.59">like a proper object inference object</span> <span data-start="1318.59" data-end="1320.54">inference usually implies that you're</span> <span data-start="1320.54" data-end="1323.45">testing for a property X in assuming</span> <span data-start="1323.45" data-end="1326.45">function y so feature testing is is</span> <span data-start="1326.45" data-end="1329.03">testing for the existence of property or</span> <span data-start="1329.03" data-end="1331.76">method X because you're about to use</span> <span data-start="1331.76" data-end="1334.25">method X so and then feature testing is</span> <span data-start="1334.25" data-end="1336.05">actually executing the method trying it</span> <span data-start="1336.05" data-end="1337.73">seeing if you get the outcome that you</span> <span data-start="1337.73" data-end="1341.09">would expect and then another neat thing</span> <span data-start="1341.09" data-end="1344.06">is that fuse jas will support framework</span> <span data-start="1344.06" data-end="1347.72">emulation which means that few GS will</span> <span data-start="1347.72" data-end="1350.27">be able to run as for example prototype</span> <span data-start="1350.27" data-end="1353.06">so all you would do is delete prototype</span> <span data-start="1353.06" data-end="1356.57">jas from your project then drop infuse</span> <span data-start="1356.57" data-end="1361.46">jas then plus the emulation j/s and it</span> <span data-start="1361.46" data-end="1363.159">will run as if it is</span> <span data-start="1363.159" data-end="1365.33">prototype so your code doesn't have to</span> <span data-start="1365.33" data-end="1367.69">change but you get the benefit of</span> <span data-start="1367.69" data-end="1370.309">increased performance increased browser</span> <span data-start="1370.309" data-end="1374.33">support feature testing and new features</span> <span data-start="1374.33" data-end="1377.24">so so that's that's a pretty neat thing</span> <span data-start="1377.24" data-end="1378.74">and then as we go along will support</span> <span data-start="1378.74" data-end="1380.99">other frameworks and then another neat</span> <span data-start="1380.99" data-end="1382.789">thing is that it's it's debug friendly</span> <span data-start="1382.789" data-end="1386.33">which means i use function expressions</span> <span data-start="1386.33" data-end="1392.24">or yeah function expressions to create</span> <span data-start="1392.24" data-end="1394.399">readable names whenever you debug into</span> <span data-start="1394.399" data-end="1396.799">console so whenever you for example put</span> <span data-start="1396.799" data-end="1398.12">this method in the console it's going to</span> <span data-start="1398.12" data-end="1400.429">spit back the name of the method and the</span> <span data-start="1400.429" data-end="1402.98">arguments accepts and so whenever you do</span> <span data-start="1402.98" data-end="1405.35">things like profile on your site or use</span> <span data-start="1405.35" data-end="1406.85">the Firebug profile instead of having</span> <span data-start="1406.85" data-end="1409.01">like anonymous function pop up all over</span> <span data-start="1409.01" data-end="1410.36">the place you're going to actually have</span> <span data-start="1410.36" data-end="1412.34">the full method there so you can see</span> <span data-start="1412.34" data-end="1418.61">them other features are its going to be</span> <span data-start="1418.61" data-end="1421.309">modular so because there's less</span> <span data-start="1421.309" data-end="1423.409">abstraction there's less dependency</span> <span data-start="1423.409" data-end="1425.63">between files and functionality so you</span> <span data-start="1425.63" data-end="1427.279">can build because you can create custom</span> <span data-start="1427.279" data-end="1429.919">builds that say don't have array</span> <span data-start="1429.919" data-end="1431.69">extensions or don't have the template or</span> <span data-start="1431.69" data-end="1433.84">the range or the Ajax or any of these</span> <span data-start="1433.84" data-end="1435.88">things because there's there's no</span> <span data-start="1435.88" data-end="1438.529">dependency on either one for the other</span> <span data-start="1438.529" data-end="1441.799">to operate and then select your engines</span> </p>
<p><span data-start="1441.799" data-end="1444.2">I support seven selector engines because</span> <span data-start="1444.2" data-end="1447.5">i like giving developers a choice and so</span> <span data-start="1447.5" data-end="1451.639">I support dojos acne EXT jss Dom query</span> <span data-start="1451.639" data-end="1455.409">NW matcher peppy sizzle slick which is</span> <span data-start="1455.409" data-end="1458.6">mootools new selector engine and then</span> <span data-start="1458.6" data-end="1462.769">sly which is a variation of that i'll</span> <span data-start="1462.769" data-end="1464.299">also be supporting quirks mode for</span> <span data-start="1464.299" data-end="1466.34">dimensions and positioning code which is</span> <span data-start="1466.34" data-end="1469.25">something that some browsers are some</span> <span data-start="1469.25" data-end="1470.899">frameworks actually don't support so</span> <span data-start="1470.899" data-end="1474.62">like jQuery I think dropped dropped it</span> <span data-start="1474.62" data-end="1477.769">recently prototypes had problems with it</span> <span data-start="1477.769" data-end="1479.45">so I'm going to make sure that I support</span> <span data-start="1479.45" data-end="1482.179">some quirks mode there other things is</span> <span data-start="1482.179" data-end="1486.139">our I up I do dham wrappers and I do</span> <span data-start="1486.139" data-end="1489.59">event wrappers for things so I'm not</span> <span data-start="1489.59" data-end="1491.48">extending the Dom either so I don't run</span> <span data-start="1491.48" data-end="1495.49">into the conflicts of names or</span> <span data-start="1495.49" data-end="1498.82">issues where things aren't being</span> <span data-start="1498.82" data-end="1501.6">extended properly because of ie bug X or</span> </p>
<p><span data-start="1501.6" data-end="1504.55">Firefox bug why so I have that and</span> <span data-start="1504.55" data-end="1506.08">another another neat thing is that when</span> <span data-start="1506.08" data-end="1508.21">I have Dom rappers you can still have</span> <span data-start="1508.21" data-end="1510.19">the functionality of extending things</span> <span data-start="1510.19" data-end="1513.01">per element so like in prototype you</span> <span data-start="1513.01" data-end="1515.11">could give just input elements a method</span> <span data-start="1515.11" data-end="1517.72">like get value and then this way too</span> <span data-start="1517.72" data-end="1520.99">because this mimics the the Dom classes</span> <span data-start="1520.99" data-end="1524.17">you can just give input elements a</span> <span data-start="1524.17" data-end="1526.6">method or just give image is a method to</span> <span data-start="1526.6" data-end="1528.79">refresh or something like that so that's</span> <span data-start="1528.79" data-end="1531.91">neat I also support cross frame or cross</span> <span data-start="1531.91" data-end="1535.78">iframe communication so the method will</span> <span data-start="1535.78" data-end="1538.42">still work on the iframe document even</span> <span data-start="1538.42" data-end="1540.04">though the iframe document does not have</span> <span data-start="1540.04" data-end="1542.38">the framework loaded in it and that's</span> <span data-start="1542.38" data-end="1544.39">because I avoid references to document</span> <span data-start="1544.39" data-end="1547.24">or the global and I resolve it by the</span> <span data-start="1547.24" data-end="1549.64">element owner document and so I'm able</span> <span data-start="1549.64" data-end="1552.94">to resolve the the iframes document in</span> <span data-start="1552.94" data-end="1557.38">these methods something else I do</span> <span data-start="1557.38" data-end="1561.429">differently is I in first I enforce</span> <span data-start="1561.429" data-end="1564.07">first in first out of in order when</span> <span data-start="1564.07" data-end="1566.32">you're observing events and a lot of</span> <span data-start="1566.32" data-end="1567.67">frameworks are doing this now and it</span> <span data-start="1567.67" data-end="1570.61">makes sense because I e is the only one</span> <span data-start="1570.61" data-end="1572.08">that really goes against the grain and</span> <span data-start="1572.08" data-end="1574.21">has a random event order execution but</span> <span data-start="1574.21" data-end="1575.71">whenever you're absorbing events a lot</span> <span data-start="1575.71" data-end="1577.84">of times you want you want your first</span> <span data-start="1577.84" data-end="1579.55">observer to execute before your second</span> <span data-start="1579.55" data-end="1581.59">and so on it so you expect that order</span> <span data-start="1581.59" data-end="1585.22">and so I make that consistent something</span> <span data-start="1585.22" data-end="1587.35">else I do is I preserve backward forward</span> <span data-start="1587.35" data-end="1589.3">cash which means I don't have a non</span> <span data-start="1589.3" data-end="1592.87">unload handler to clean up the memory</span> <span data-start="1592.87" data-end="1595.179">issues with ie because I avoid the</span> <span data-start="1595.179" data-end="1596.73">memory issues with ie in the first place</span> <span data-start="1596.73" data-end="1599.65">and so because of that I don't have to</span> <span data-start="1599.65" data-end="1602.02">break backward forward cash and so</span> <span data-start="1602.02" data-end="1604.17">whenever you flip between pages the</span> <span data-start="1604.17" data-end="1608.11">framework will continue to the state of</span> <span data-start="1608.11" data-end="1610.9">the page will still be preserved and so</span> <span data-start="1610.9" data-end="1612.25">that's that's what that's actually a</span> <span data-start="1612.25" data-end="1614.35">pretty pretty cool thing there something</span> <span data-start="1614.35" data-end="1616.15">else I do is I don't have any expand</span> <span data-start="1616.15" data-end="1619.42">owes on IE elements expand those effects</span> <span data-start="1619.42" data-end="1622.15">screen redraw and things like that and I</span> <span data-start="1622.15" data-end="1624.76">found a way to avoid any of them on IE</span> <span data-start="1624.76" data-end="1626.38">so you don't get that performance</span> <span data-start="1626.38" data-end="1627.23">penalty</span> <span data-start="1627.23" data-end="1631.669">on ie or other issues like whenever you</span> <span data-start="1631.669" data-end="1633.25">clone nodes and things like that</span> <span data-start="1633.25" data-end="1635.36">something else need is I have method</span> <span data-start="1635.36" data-end="1637.549">generics which means if any of you have</span> <span data-start="1637.549" data-end="1642.679">used or gone to mozillas MDC site you'll</span> <span data-start="1642.679" data-end="1644.15">you'll see that they have like a ray</span> <span data-start="1644.15" data-end="1647.03">slice or a push or these generics that</span> <span data-start="1647.03" data-end="1648.919">are on the constructor instead of on the</span> <span data-start="1648.919" data-end="1651.679">instance and so I have all of my methods</span> <span data-start="1651.679" data-end="1654.41">support generics as well so anything</span> <span data-start="1654.41" data-end="1657.59">that's on like the element prototype is</span> <span data-start="1657.59" data-end="1660.76">also on the elements generic form too</span> <span data-start="1660.76" data-end="1662.9">and then something else I do is I do</span> <span data-start="1662.9" data-end="1664.82">separation of Dom properties and</span> <span data-start="1664.82" data-end="1666.23">attributes and this is this is an</span> <span data-start="1666.23" data-end="1667.76">interesting thing as you get into a</span> <span data-start="1667.76" data-end="1669.65">framework you'll see that a lot of times</span> <span data-start="1669.65" data-end="1673.16">they mix up Dom properties like element</span> <span data-start="1673.16" data-end="1675.65">da checked and Dom attributes like</span> <span data-start="1675.65" data-end="1679.28">element get attribute checked and which</span> <span data-start="1679.28" data-end="1681.49">is there's a difference there because</span> <span data-start="1681.49" data-end="1684.11">attributes are source attributes which</span> <span data-start="1684.11" data-end="1685.88">means how they are when the page is</span> <span data-start="1685.88" data-end="1689.9">rendered their properties are live so</span> <span data-start="1689.9" data-end="1692">like the attribute value of an input</span> <span data-start="1692" data-end="1693.53">element is what it originally was</span> <span data-start="1693.53" data-end="1696.65">whenever the page loaded the live value</span> <span data-start="1696.65" data-end="1698.059">is the element value which is the</span> <span data-start="1698.059" data-end="1699.98">current input and so I make a kippah</span> <span data-start="1699.98" data-end="1701.179">separation there and I keep it</span> <span data-start="1701.179" data-end="1703.46">consistent in the end the method so</span> <span data-start="1703.46" data-end="1705.679">there's none of the confusion that goes</span> <span data-start="1705.679" data-end="1711.98">along with okay this is going to be some</span> <span data-start="1711.98" data-end="1715.48">performance tests with fuse j s alpha</span> <span data-start="1715.48" data-end="1718.16">you can see right now in its early stage</span> <span data-start="1718.16" data-end="1723.64">it runs about as fast as jquery 1.4 2</span> <span data-start="1723.64" data-end="1729.35">and is right around what dojo 1.4 is as</span> <span data-start="1729.35" data-end="1733.54">well or 1.4 or maybe one there so that</span> <span data-start="1733.54" data-end="1736.04">it's doing pretty good for itself at the</span> <span data-start="1736.04" data-end="1738.22">time you can see prototypes is is a</span> <span data-start="1738.22" data-end="1742.37">little slower there so that's fuse JSE's</span> <span data-start="1742.37" data-end="1746.909">performance</span> <span data-start="1746.919" data-end="1749.239">now i'm going to show you fuse jss</span> <span data-start="1749.239" data-end="1752.479">performance in ie8 and compared two</span> <span data-start="1752.479" data-end="1755.09">prototypes performance in ie8 and in</span> <span data-start="1755.09" data-end="1761.299">this case less is more because this is</span> <span data-start="1761.299" data-end="1764.149">task speed so you can see here that this</span> <span data-start="1764.149" data-end="1766.909">is 2,000 something and this is 11,000</span> <span data-start="1766.909" data-end="1768.59">something so the speed difference is</span> <span data-start="1768.59" data-end="1774.2">pretty big for ie8 and then last but not</span> <span data-start="1774.2" data-end="1777.249">least i mentioned that fuse will support</span> <span data-start="1777.249" data-end="1779.929">framework emulation and i wanted to show</span> <span data-start="1779.929" data-end="1784.039">that i'm closer to prototype support now</span> <span data-start="1784.039" data-end="1788.089">because you can see i'm getting proto</span> <span data-start="1788.089" data-end="1791.33">used to yes to run as prototype and you</span> <span data-start="1791.33" data-end="1793.219">can see the performance differences</span> <span data-start="1793.219" data-end="1798.83">right there this is a 2180 and this is</span> <span data-start="1798.83" data-end="1804.08">almost almost 3000 so the the difference</span> <span data-start="1804.08" data-end="1807.289">in speed is quite noticeable you'll have</span> <span data-start="1807.289" data-end="1813.129">additional features and that is fuse j/s</span> <span data-start="1813.129" data-end="1819.769">cool any questions yes i just want to</span> <span data-start="1819.769" data-end="1820.94">make sure i understand if you're saying</span> <span data-start="1820.94" data-end="1824.08">you emulate for the text messages</span> <span data-start="1824.08" data-end="1830.84">okay yes anything else there's got to be</span> <span data-start="1830.84" data-end="1834.11">a drama well the the the issue is on</span> <span data-start="1834.11" data-end="1837.14">performance is how they're designed</span> <span data-start="1837.14" data-end="1839.51">prototype has a lot of abstraction in</span> <span data-start="1839.51" data-end="1840.68">there because they like to use their own</span> <span data-start="1840.68" data-end="1842.39">methods over and over and at the</span> <span data-start="1842.39" data-end="1844.55">beginning I showed reducing abstraction</span> <span data-start="1844.55" data-end="1846.62">and so what I do is infuse I have</span> <span data-start="1846.62" data-end="1848.75">everything as vanilla Jas and so</span> <span data-start="1848.75" data-end="1850.67">everything is stripped down to the gist</span> <span data-start="1850.67" data-end="1852.56">the fundamentals so that's what runs</span> <span data-start="1852.56" data-end="1856.43">faster also I do things like forking the</span> <span data-start="1856.43" data-end="1858.44">methods to create faster execution and</span> <span data-start="1858.44" data-end="1860.96">so when all of that's combined you get</span> <span data-start="1860.96" data-end="1863.09">faster an entirely faster framework</span> <span data-start="1863.09" data-end="1865.43">another benefit is is because I don't</span> <span data-start="1865.43" data-end="1870.38">extend the elements I don't have a</span> <span data-start="1870.38" data-end="1873.53">penalty for let's say ie6 or ie7 that</span> <span data-start="1873.53" data-end="1874.96">doesn't have the element that prototype</span> <span data-start="1874.96" data-end="1877.31">and so that's another way to be faster</span> <span data-start="1877.31" data-end="1880.88">and so might the idea is is that as I go</span> <span data-start="1880.88" data-end="1883.37">along I'll keep optimizing and then when</span> </p>
<p><span data-start="1883.37" data-end="1884.96">I support other frameworks I'll still be</span> <span data-start="1884.96" data-end="1887.3">able to run as fast as them the reason</span> <span data-start="1887.3" data-end="1889.28">I'm able to run its prototype is because</span> <span data-start="1889.28" data-end="1891.89">I have all of my dom methods are this</span> <span data-start="1891.89" data-end="1894.74">generic the little this keyword generic</span> <span data-start="1894.74" data-end="1898.64">and that allows me to run as a node list</span> <span data-start="1898.64" data-end="1901.46">like jQuery syntax or I can then run as</span> <span data-start="1901.46" data-end="1904.37">as just a single element rapper like</span> <span data-start="1904.37" data-end="1906.41">they get the element by ID and then it</span> <span data-start="1906.41" data-end="1908.6">has the rapper or I can then dump that</span> <span data-start="1908.6" data-end="1911.66">back on to the element dot prototype to</span> <span data-start="1911.66" data-end="1914.03">run as prototype and the method still</span> <span data-start="1914.03" data-end="1915.41">works because it's this generic it</span> <span data-start="1915.41" data-end="1917.18">doesn't care that it's a rapper or an</span> <span data-start="1917.18" data-end="1918.95">element it just works and so it makes</span> <span data-start="1918.95" data-end="1920.99">the very little overhead to actually</span> <span data-start="1920.99" data-end="1924.38">create the emulation layer yes so huge</span> <span data-start="1924.38" data-end="1928.12">is including the default NW masters</span> <span data-start="1928.12" data-end="1932.26">ah how big is that compared to some of</span> <span data-start="1932.26" data-end="1934.15">the other popular frameworks like jQuery</span> <span data-start="1934.15" data-end="1937.45">there the goal is to get it to be around</span> <span data-start="1937.45" data-end="1940.39">30 kilobytes currently in the alpha</span> <span data-start="1940.39" data-end="1942.48">stage everything is inflated because</span> </p>
<p><span data-start="1942.48" data-end="1944.95">I've got the debug code in there and</span> <span data-start="1944.95" data-end="1946.66">I've got other things but the goal is to</span> <span data-start="1946.66" data-end="1950.02">be right around 30 kilobytes or so and</span> <span data-start="1950.02" data-end="1952.21">the size can actually change because you</span> <span data-start="1952.21" data-end="1954.22">can create custom builds so you can take</span> <span data-start="1954.22" data-end="1955.36">out the things you don't want like</span> <span data-start="1955.36" data-end="1957.28">template or range if you never use those</span> <span data-start="1957.28" data-end="1959.35">and just throw them out and so it allows</span> <span data-start="1959.35" data-end="1960.82">you to create a smaller more focused</span> <span data-start="1960.82" data-end="1964.75">file size also i have debugging built</span> <span data-start="1964.75" data-end="1967.15">the debug friendly function names those</span> <span data-start="1967.15" data-end="1968.65">those debug friendly function names</span> <span data-start="1968.65" data-end="1970.36">actually create an increase in file size</span> <span data-start="1970.36" data-end="1973.27">and so before you minify there's going</span> <span data-start="1973.27" data-end="1975.73">to be a pre process that you can run on</span> <span data-start="1975.73" data-end="1978.31">the custom build thing and it will strip</span> <span data-start="1978.31" data-end="1979.81">out the named expressions and cleanup</span> <span data-start="1979.81" data-end="1981.31">and so that helps reduce the size and</span> <span data-start="1981.31" data-end="1985.63">keep it at a manageable limit anything</span> <span data-start="1985.63" data-end="1999.6">else yes</span> <span data-start="1999.61" data-end="2001.84">okay in the optimal condition I either</span> <span data-start="2001.84" data-end="2005.23">use the ActiveX object or the proto</span> <span data-start="2005.23" data-end="2007.27">because proto supported by everything</span> <span data-start="2007.27" data-end="2009.82">almost and the ActiveX object avoids</span> <span data-start="2009.82" data-end="2011.86">issues with like domain a document</span> <span data-start="2011.86" data-end="2014.44">domain settings with iframes and it also</span> <span data-start="2014.44" data-end="2017.59">avoids issues in Firefox with some</span> <span data-start="2017.59" data-end="2019.27">iframe issues I had by removing and</span> <span data-start="2019.27" data-end="2021.49">inserting and then the I fall back to</span> <span data-start="2021.49" data-end="2023.74">the last resort is the iframe now in the</span> <span data-start="2023.74" data-end="2026.05">iframe I should mention that Dean</span> </p>
<p><span data-start="2026.05" data-end="2028.54">Edwards created a technique in 2006 to</span> <span data-start="2028.54" data-end="2030.1">do basically the same thing with the</span> <span data-start="2030.1" data-end="2031.99">iframe but what he did was he left the</span> <span data-start="2031.99" data-end="2033.64">iframe in the document and that affects</span> <span data-start="2033.64" data-end="2035.56">your window dot frames collection and so</span> <span data-start="2035.56" data-end="2038.29">I found a way to to insert the iframe</span> <span data-start="2038.29" data-end="2040.75">grab the natives and take the iframe out</span> <span data-start="2040.75" data-end="2042.85">and cash it so it doesn't get garbage</span> <span data-start="2042.85" data-end="2045.46">collected and so that allows me to use</span> <span data-start="2045.46" data-end="2047.14">it without affecting the window frames</span> <span data-start="2047.14" data-end="2050.84">collection so I guess the order would be</span> <span data-start="2050.85" data-end="2056.32">proto activex then I fer cool anything</span> <span data-start="2056.32" data-end="2062.36">else I'm getting the clap alright</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
