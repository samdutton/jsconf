<section>
<p><span data-start="13.91" data-end="16.47">hey thanks everyone for coming out my</span> <span data-start="16.47" data-end="18.75">name is Andrew as my colleague I'm</span> <span data-start="18.75" data-end="22.38">critics of augie and as I mentioned we</span> <span data-start="22.38" data-end="24.51">work out wayfair.com up in Boston and</span> <span data-start="24.51" data-end="26.01">there are some things that I think are</span> <span data-start="26.01" data-end="27.33">important to understand about Wayfarer</span> <span data-start="27.33" data-end="30.47">in the context of this presentation so</span> <span data-start="30.47" data-end="33.329">we're an online destination for all</span> <span data-start="33.329" data-end="36.18">things home so ecommerce site for</span> <span data-start="36.18" data-end="38.13">furniture and home goods mostly we have</span> <span data-start="38.13" data-end="40.47">a lot of products over 7 million 7,000</span> <span data-start="40.47" data-end="42">plus suppliers to have a very large data</span> <span data-start="42" data-end="46.2">set we've been around since 2002 so the</span> <span data-start="46.2" data-end="47.31">weight name wayfair is actually a little</span> <span data-start="47.31" data-end="48.93">newer we kind of rebranded a few years</span> <span data-start="48.93" data-end="51.6">ago but we've been around for a while</span> <span data-start="51.6" data-end="53.04">and our code base has been around for a</span> <span data-start="53.04" data-end="55.86">while we have several large websites</span> <span data-start="55.86" data-end="57.45">wayfair.com being the main one but they</span> <span data-start="57.45" data-end="59.31">all run on the shared code base so the</span> <span data-start="59.31" data-end="60.57">most part all our products share the</span> <span data-start="60.57" data-end="63.96">same code and that code is a PHP</span> <span data-start="63.96" data-end="66.57">back-end custom-built ecommerce platform</span> <span data-start="66.57" data-end="69.03">in MVC platform millions lines of code</span> <span data-start="69.03" data-end="71.64">thousands of JavaScript modules so it's</span> <span data-start="71.64" data-end="75.9">an extensive code base right performance</span> <span data-start="75.9" data-end="78.75">matters right I know it's obviously not</span> <span data-start="78.75" data-end="80.22">probably all if you know it but I'm just</span> <span data-start="80.22" data-end="82.59">gonna say it anyway so a</span> <span data-start="82.59" data-end="84.21">high-performance app can lead to a</span> <span data-start="84.21" data-end="86.22">better customer experience that in turn</span> <span data-start="86.22" data-end="88.62">probably leads to better revenue right</span> <span data-start="88.62" data-end="93.39">and that's kind of important so in order</span> <span data-start="93.39" data-end="95.64">to get this high performance we are kind</span> <span data-start="95.64" data-end="97.17">of doing some things on the server side</span> <span data-start="97.17" data-end="102">keys yeah so we have abused mustache in</span> </p>
<p><span data-start="102" data-end="103.229">PHP on the server side and we're</span> <span data-start="103.229" data-end="106.35">actually rendering this stuff with a C++</span> <span data-start="106.35" data-end="109.89">extension and that's like super fast we</span> <span data-start="109.89" data-end="112.979">also lazy load most of our non-critical</span> <span data-start="112.979" data-end="115.59">images like stop below the fold be these</span> <span data-start="115.59" data-end="117.78">load data and also like some j/s modules</span> <span data-start="117.78" data-end="120.09">for example if you have a modal that you</span> <span data-start="120.09" data-end="121.979">want to show and until you actually show</span> <span data-start="121.979" data-end="124.02">it we don't load the j/s for it right so</span> <span data-start="124.02" data-end="126.81">we also do some intelligent bundling on</span> <span data-start="126.81" data-end="128.28">the JavaScript side for cash</span> <span data-start="128.28" data-end="133.47">optimizations yeah so we're doing a lot</span> <span data-start="133.47" data-end="135.569">of things right in terms performance but</span> <span data-start="135.569" data-end="136.62">there was always room for improvement</span> <span data-start="136.62" data-end="138.81">and as our pages became more and more</span> <span data-start="138.81" data-end="141.42">interactive we realized that the area</span> <span data-start="141.42" data-end="142.53">where we can improve the most of the</span> <span data-start="142.53" data-end="145.45">client side so we were using backbone</span> <span data-start="145.45" data-end="147.099">on the client and some backbone works</span> <span data-start="147.099" data-end="148.959">with jquery out of box to do all your</span> <span data-start="148.959" data-end="150.519">rendering and so this is sort of a</span> <span data-start="150.519" data-end="152.47">standard render method and backbone you</span> <span data-start="152.47" data-end="155.44">implement your own render methods so in</span> <span data-start="155.44" data-end="157.84">this method basically just taking the</span> <span data-start="157.84" data-end="159.97">element for a review using the jquery</span> <span data-start="159.97" data-end="162.04">object for that that's been pre-selected</span> <span data-start="162.04" data-end="164.86">for us and we're using jquery to HTML to</span> <span data-start="164.86" data-end="167.4">pass in our new string for our HTML</span> <span data-start="167.4" data-end="170.68">that's acquired by using our template</span> <span data-start="170.68" data-end="172.42">function that we free compiled calling</span> <span data-start="172.42" data-end="173.799">render on it and passing in our data and</span> <span data-start="173.799" data-end="175.48">this was fine but they're a couple of</span> <span data-start="175.48" data-end="177.73">problems with it one being we tend to</span> <span data-start="177.73" data-end="180.58">over render so maybe only part of our</span> <span data-start="180.58" data-end="182.049">view changes maybe we're only changing a</span> <span data-start="182.049" data-end="184.569">class name or a text node but what we're</span> <span data-start="184.569" data-end="186.13">doing here in sort of a naive render</span> <span data-start="186.13" data-end="187.9">method is work rerun during everything</span> <span data-start="187.9" data-end="189.849">we read running that view no matter what</span> <span data-start="189.849" data-end="191.319">changed in fact we're rerunning that</span> <span data-start="191.319" data-end="193.48">view even if nothing changed so even if</span> <span data-start="193.48" data-end="194.95">nothing changed on our view maybe if</span> <span data-start="194.95" data-end="197.049">we're calling render whenever our data</span> <span data-start="197.049" data-end="198.88">model changes which is a common pattern</span> <span data-start="198.88" data-end="201.76">and now we're rerender even we don't</span> <span data-start="201.76" data-end="203.41">need to we're hitting the Damas we don't</span> <span data-start="203.41" data-end="206.73">have to and that became problematic oh</span> <span data-start="206.73" data-end="208.93">the other end of this the kind of</span> <span data-start="208.93" data-end="211.209">compensate for this is well devs would</span> <span data-start="211.209" data-end="212.609">just use kind of precise Dom</span> <span data-start="212.609" data-end="215.47">manipulations so we might take our our</span> <span data-start="215.47" data-end="217.42">jQuery object here and just call add</span> <span data-start="217.42" data-end="220.62">class on it so that's fine it's a fast a</span> <span data-start="220.62" data-end="225.549">problem is that this does not scale it's</span> <span data-start="225.549" data-end="227.319">not maintainable as an architecture we</span> <span data-start="227.319" data-end="229.329">started realizing that parts of our code</span> <span data-start="229.329" data-end="232.72">base ended up being filled with these</span> <span data-start="232.72" data-end="234.34">direct Dom manipulations and it was very</span> <span data-start="234.34" data-end="235.69">hard to reason about the state of our</span> <span data-start="235.69" data-end="238.69">application at any one time I'm in</span> <span data-start="238.69" data-end="240.19">addition to that you know devs have to</span> <span data-start="240.19" data-end="241.389">think about kind of low level</span> <span data-start="241.389" data-end="243.88">performance you know this would always</span> <span data-start="243.88" data-end="245.92">come up in a code review and you guys</span> <span data-start="245.92" data-end="247.269">all work with JavaScript probably every</span> <span data-start="247.269" data-end="248.739">day so maybe you're familiar with this</span> <span data-start="248.739" data-end="250.69">you know that jQuery empty is actually a</span> <span data-start="250.69" data-end="251.889">lot faster than passing in an empty</span> <span data-start="251.889" data-end="255.069">string to jquery HTML but that's not</span> <span data-start="255.069" data-end="256.329">something that all our full stack devs</span> <span data-start="256.329" data-end="258.459">were aware of and it's not something</span> <span data-start="258.459" data-end="260.38">they should have to be aware of and so</span> <span data-start="260.38" data-end="261.76">you know you'd end up with all these</span> <span data-start="261.76" data-end="263.2">little petty comments and code reviews</span> <span data-start="263.2" data-end="264.52">like this is faster than this this is</span> <span data-start="264.52" data-end="266.77">faster than this and that just we wanted</span> <span data-start="266.77" data-end="268.33">a better abstraction for that we didn't</span> <span data-start="268.33" data-end="270.01">want to have to have devs have to worry</span> <span data-start="270.01" data-end="271.18">about this sort of low level down</span> <span data-start="271.18" data-end="272.71">performance when they're writing their</span> <span data-start="272.71" data-end="277.15">code so what do we do now yeah that was</span> <span data-start="277.15" data-end="278.08">a good question and that was a question</span> <span data-start="278.08" data-end="279.1">that kind of face</span> <span data-start="279.1" data-end="281.38">our team how can we improve the</span> <span data-start="281.38" data-end="282.7">client-side performance that we have</span> <span data-start="282.7" data-end="286.75">within our current stack and you know i</span> <span data-start="286.75" data-end="288.94">think the the interesting solution was</span> <span data-start="288.94" data-end="291.82">let's just rewrite everything there are</span> <span data-start="291.82" data-end="292.9">some really great libraries out there</span> <span data-start="292.9" data-end="294.73">right we we started looking around and</span> <span data-start="294.73" data-end="296.14">we could have rear end to ember because</span> <span data-start="296.14" data-end="297.91">members really cool now and it has</span> <span data-start="297.91" data-end="300.28">glimmer so it's kind of fast and there's</span> <span data-start="300.28" data-end="303.52">really great community there were some</span> <span data-start="303.52" data-end="304.96">cool things going on with angular and we</span> <span data-start="304.96" data-end="305.89">could have decided you know we're going</span> <span data-start="305.89" data-end="307.84">to rewrite to angular 2 and we'll do</span> <span data-start="307.84" data-end="309.43">that this summer and it'll be it'll be a</span> <span data-start="309.43" data-end="311.59">project but at the end of the day we'll</span> <span data-start="311.59" data-end="312.91">have this this cool angular app for</span> <span data-start="312.91" data-end="316.93">everything to be honest what excited us</span> <span data-start="316.93" data-end="319.45">the most was react so we looked at react</span> <span data-start="319.45" data-end="321.52">and we're like this is great if I were</span> <span data-start="321.52" data-end="322.81">starting a side project like this is</span> <span data-start="322.81" data-end="324.76">exactly what I would use why don't we</span> <span data-start="324.76" data-end="327.49">just rewrite everything to react and I</span> <span data-start="327.49" data-end="329.2">think if the dev it's really exciting to</span> <span data-start="329.2" data-end="330.81">like look at this and go you know</span> <span data-start="330.81" data-end="333.37">imagine a greenfield project or we have</span> <span data-start="333.37" data-end="334.42">a legacy co-pay let's just delete</span> <span data-start="334.42" data-end="337.06">everything and rewrite it again but this</span> <span data-start="337.06" data-end="338.68">thing like the worst mistake that you</span> <span data-start="338.68" data-end="340.36">can make is actually writing entire</span> <span data-start="340.36" data-end="341.71">thing they even Joe is polski agrees</span> <span data-start="341.71" data-end="345.91">with me so I it's problematic and that's</span> <span data-start="345.91" data-end="348.58">disappointing um I think it's devs we</span> <span data-start="348.58" data-end="350.14">like want to take kind of new and shiny</span> <span data-start="350.14" data-end="353.17">yeah libraries and just use them and so</span> <span data-start="353.17" data-end="354.73">we're sort of told we can't at that's</span> <span data-start="354.73" data-end="358.15">that's disappointing rewrites</span> <span data-start="358.15" data-end="360.19">unexpensive i mean like it did it so</span> <span data-start="360.19" data-end="361.72">much time like you have to actually stop</span> <span data-start="361.72" data-end="363.07">all future development you can't really</span> <span data-start="363.07" data-end="364.84">like you know like your project does not</span> <span data-start="364.84" data-end="367.51">progress so and most of the times you</span> <span data-start="367.51" data-end="368.56">actually never get done with it because</span> <span data-start="368.56" data-end="369.91">it because of all these problems right</span> <span data-start="369.91" data-end="372.88">and without actual tests like you're</span> <span data-start="372.88" data-end="378.34">going to break a lot of stuff right yeah</span> <span data-start="378.34" data-end="380.14">so the alternative is working with</span> <span data-start="380.14" data-end="384.06">legacy code which is is not really fun</span> <span data-start="384.06" data-end="386.5">it's it's an idea when I look at it</span> <span data-start="386.5" data-end="388.06">that's that isn't that attractive</span> <span data-start="388.06" data-end="390.13">particularly for a lot of these</span> <span data-start="390.13" data-end="392.29">characteristics of legacy code bases so</span> <span data-start="392.29" data-end="394.15">legacy code bases mean you need to work</span> <span data-start="394.15" data-end="397.15">in the existing tech stack and those</span> <span data-start="397.15" data-end="398.62">might be text acts that grew organically</span> <span data-start="398.62" data-end="401.08">over a lot of years like ours where that</span> <span data-start="401.08" data-end="401.92">you know they're a little bit quirky</span> <span data-start="401.92" data-end="403.96">there are parts of it that you know if I</span> <span data-start="403.96" data-end="405.04">were to start again today maybe I</span> <span data-start="405.04" data-end="406.96">wouldn't do it that way there certainly</span> <span data-start="406.96" data-end="408.729">were reasons that that that happened</span> <span data-start="408.729" data-end="409.87">whether they be a historical or whether</span> <span data-start="409.87" data-end="411.58">they be you know unique to the problem</span> <span data-start="411.58" data-end="414.619">space that we are solving</span> <span data-start="414.629" data-end="416.71">it means that you have to use old</span> <span data-start="416.71" data-end="418.75">frameworks and libraries and this</span> <span data-start="418.75" data-end="420.34">doesn't mean bad frameworks or libraries</span> <span data-start="420.34" data-end="422.77">it just means things that are older in</span> <span data-start="422.77" data-end="424.27">some spaces this is good but it also</span> <span data-start="424.27" data-end="425.74">means that you know there might be a</span> <span data-start="425.74" data-end="428.68">community around or there might not they</span> <span data-start="428.68" data-end="430.09">might have the newest technology or they</span> <span data-start="430.09" data-end="431.44">might not but you have a lot of code</span> <span data-start="431.44" data-end="434.34">existing already in these environments</span> <span data-start="434.34" data-end="436.33">and means you have to work with</span> <span data-start="436.33" data-end="439.27">technical debt all applications have</span> <span data-start="439.27" data-end="441.46">technical debt and so when you have to</span> <span data-start="441.46" data-end="442.9">dive into your legacy code it means you</span> <span data-start="442.9" data-end="443.919">have to look at that and kind of face</span> <span data-start="443.919" data-end="445.96">that head-on and none of this is</span> <span data-start="445.96" data-end="447.93">attractive i think to to front end dev</span> <span data-start="447.93" data-end="450.789">but i think one of the most important</span> <span data-start="450.789" data-end="452.71">things about legacy code base is that it</span> <span data-start="452.71" data-end="456.58">actually works right i mean this is this</span> <span data-start="456.58" data-end="461.08">is amazing code by by Hendrick who's the</span> <span data-start="461.08" data-end="464.199">creator of ampersand I really like it</span> <span data-start="464.199" data-end="466.21">like he says that you don't really have</span> <span data-start="466.21" data-end="467.5">to burn down your whole house if you</span> <span data-start="467.5" data-end="469.96">want to remodel the kitchen right so I</span> <span data-start="469.96" data-end="471.49">mean I think that's a great analogy to</span> <span data-start="471.49" data-end="473.53">software development and I really like</span> <span data-start="473.53" data-end="474.639">my living room I really like the</span> <span data-start="474.639" data-end="475.99">bathroom and I I mean I really like all</span> <span data-start="475.99" data-end="481.02">the other rooms in my house right so so</span> <span data-start="481.02" data-end="483.159">so we have a lot of good things that are</span> <span data-start="483.159" data-end="486.46">going for us right so we also have views</span> <span data-start="486.46" data-end="489.19">shared templates so we actually have</span> <span data-start="489.19" data-end="490.63">masters champion sort of shared on the</span> <span data-start="490.63" data-end="493.9">server side and the client side so we</span> <span data-start="493.9" data-end="497.74">like that part we we have a very fast</span> <span data-start="497.74" data-end="498.94">server side rendering because we use</span> <span data-start="498.94" data-end="502.949">like a c++ extension for mustache on PHP</span> <span data-start="502.949" data-end="505.719">we also have a lot of existing backbone</span> <span data-start="505.719" data-end="507.4">components so for example like you know</span> </p>
<p><span data-start="507.4" data-end="509.77">Garrison's more to the syndics lag so we</span> <span data-start="509.77" data-end="510.909">don't want to get rid of those so we</span> <span data-start="510.909" data-end="515.8">really like all of that stuff but there</span> <span data-start="515.8" data-end="517.12">are things that we liked that were out</span> <span data-start="517.12" data-end="518.74">there already there were things that</span> <span data-start="518.74" data-end="520.27">were like we like better in libraries</span> <span data-start="520.27" data-end="522.25">that had been built in the last few</span> <span data-start="522.25" data-end="523.719">years that really sources of innovation</span> <span data-start="523.719" data-end="527.529">and they're inspiring for us so as our</span> <span data-start="527.529" data-end="528.85">application again became more more</span> <span data-start="528.85" data-end="530.68">interactive fast client side rendering</span> <span data-start="530.68" data-end="532.72">was really attractive and we looked at</span> <span data-start="532.72" data-end="534.91">libraries out there that were a lot</span> <span data-start="534.91" data-end="535.839">better than what we were doing right now</span> <span data-start="535.839" data-end="537.399">one of the big piece of this was using</span> <span data-start="537.399" data-end="539.23">virtual Dom this idea that we could do a</span> <span data-start="539.23" data-end="540.49">deafening ever DOM and memory not</span> <span data-start="540.49" data-end="541.839">actually have to hit it on until we need</span> <span data-start="541.839" data-end="544.12">to and be able to batch and do precise</span> </p>
<p><span data-start="544.12" data-end="546.279">Dom updates with an abstraction that was</span> <span data-start="546.279" data-end="546.85">a</span> <span data-start="546.85" data-end="551.56">was a lot easier to deal with we liked</span> <span data-start="551.56" data-end="553.3">this idea that we didn't have to do Dom</span> <span data-start="553.3" data-end="555.43">manipulation with a lot of these new</span> <span data-start="555.43" data-end="557.86">frameworks we really didn't want our</span> <span data-start="557.86" data-end="559.269">devs having to work with the Dom</span> <span data-start="559.269" data-end="561.55">directly it was not a scalable</span> <span data-start="561.55" data-end="562.99">architecture it was not maintainable and</span> <span data-start="562.99" data-end="564.67">it ended up with a lot of the messes and</span> <span data-start="564.67" data-end="566.47">the bugs that had to work with and we</span> <span data-start="566.47" data-end="567.639">ended up having to like search down</span> <span data-start="567.639" data-end="568.959">these obscure bugs like you see</span> <span data-start="568.959" data-end="570.16">something change on the page but you</span> <span data-start="570.16" data-end="572.35">don't know what changed it may be the</span> <span data-start="572.35" data-end="573.639">dom break point is helpful maybe it</span> <span data-start="573.639" data-end="577.3">isn't and so that can be a particularly</span> <span data-start="577.3" data-end="579.579">challenging so what do we do it all</span> <span data-start="579.579" data-end="581.259">again it seems to be a recurring</span> <span data-start="581.259" data-end="585.639">question sure it was so we looked at</span> <span data-start="585.639" data-end="587.529">what we had we looked at what was out</span> <span data-start="587.529" data-end="589.329">there and we're kind of faced with a</span> <span data-start="589.329" data-end="591.459">dilemma it really wasn't feasible to</span> <span data-start="591.459" data-end="594.73">rewrite everything we had but it wasn't</span> <span data-start="594.73" data-end="596.019">feasible to keep going down the path</span> <span data-start="596.019" data-end="598.24">that we were going and so we decided to</span> <span data-start="598.24" data-end="601.209">kind of take some advice from that idea</span> <span data-start="601.209" data-end="604.06">of modularity to take this idea that we</span> <span data-start="604.06" data-end="606.639">can look at the individual pieces of our</span> <span data-start="606.639" data-end="609.339">application the ones that we like the</span> <span data-start="609.339" data-end="611.98">ones that we wanted to swap out and do</span> <span data-start="611.98" data-end="613.99">that on a library by library basis and</span> <span data-start="613.99" data-end="615.16">there are a lot of really interesting</span> <span data-start="615.16" data-end="616.389">libraries out there that we could do</span> <span data-start="616.389" data-end="622.269">that with and so we ended up looking for</span> <span data-start="622.269" data-end="623.5">libraries that would take all these</span> <span data-start="623.5" data-end="625.87">pieces that we wanted so the first thing</span> <span data-start="625.87" data-end="627.61">that we did was look for a better way to</span> <span data-start="627.61" data-end="629.589">precompiler mustache templates there's</span> <span data-start="629.589" data-end="631.06">this library out of the Guardian called</span> <span data-start="631.06" data-end="633.759">reactive and r actives kind of made for</span> <span data-start="633.759" data-end="635.92">it for as a client-side framework and it</span> <span data-start="635.92" data-end="637.75">was cool we weren't as interested in</span> <span data-start="637.75" data-end="639.37">some of the API pieces in the front and</span> <span data-start="639.37" data-end="640.87">side of it but we realize is that we</span> <span data-start="640.87" data-end="643.089">could pull out the compiler that they</span> <span data-start="643.089" data-end="645.04">were using for mustache templates and</span> <span data-start="645.04" data-end="647.019">use that on our server when we pre</span> <span data-start="647.019" data-end="648.67">compile our templates to compile them to</span> <span data-start="648.67" data-end="651.55">objects rather than strings so we did</span> <span data-start="651.55" data-end="655.18">that we swapped out our compiler on the</span> <span data-start="655.18" data-end="658.089">server side then we went to this idea of</span> <span data-start="658.089" data-end="659.889">virtual Dom there's this library called</span> <span data-start="659.889" data-end="661.81">mercury it's sort of a smaller library</span> <span data-start="661.81" data-end="664.449">have some of the same ideas of using</span> <span data-start="664.449" data-end="667.42">virtual Dom but it decouples its virtual</span> </p>
<p><span data-start="667.42" data-end="670.12">Dom library has its own module which was</span> <span data-start="670.12" data-end="671.23">cool so we could actually pull this</span> <span data-start="671.23" data-end="672.61">library again we really weren't as</span> <span data-start="672.61" data-end="674.47">interested in the API on Mercury it</span> <span data-start="674.47" data-end="675.939">didn't have the mustache templates that</span> <span data-start="675.939" data-end="680.26">we wanted for for writing our markup but</span> <span data-start="680.26" data-end="680.98">it didn't have this</span> <span data-start="680.98" data-end="682.72">core functionality for dipping and</span> <span data-start="682.72" data-end="684.399">patching that we needed on the client</span> <span data-start="684.399" data-end="686.529">side and so we use that along with our</span> <span data-start="686.529" data-end="690.49">active precompile templates to do our</span> <span data-start="690.49" data-end="692.5">differing on the plan and then we use</span> <span data-start="692.5" data-end="694.029">backbone which we are already using</span> <span data-start="694.029" data-end="696.85">across our code base to do our normal</span> <span data-start="696.85" data-end="698.44">event finding and handle our data layer</span> <span data-start="698.44" data-end="700.6">we added a few features into this so we</span> <span data-start="700.6" data-end="702.43">actually had an event global event</span> <span data-start="702.43" data-end="705.25">handler similar to to react the handle</span> <span data-start="705.25" data-end="706.839">virtual events so bind all events in one</span> <span data-start="706.839" data-end="708.1">place as opposed to binding them all</span> <span data-start="708.1" data-end="709.959">around our document and delegating from</span> <span data-start="709.959" data-end="713.35">there we wrote an integration library to</span> <span data-start="713.35" data-end="716.74">pull this all together we call that</span> <span data-start="716.74" data-end="718.99">library at tungsten we open source it a</span> <span data-start="718.99" data-end="721.87">couple months ago so that was kind of</span> <span data-start="721.87" data-end="724.36">exciting and it's certainly not</span> <span data-start="724.36" data-end="726.459">something that will fit into you know</span> <span data-start="726.459" data-end="727.87">everyone's texts at but it made a lot of</span> <span data-start="727.87" data-end="729.76">sense for us it made a lot of sense for</span> <span data-start="729.76" data-end="731.68">us because at its core it has this idea</span> <span data-start="731.68" data-end="733.24">of modularity that it wants to be able</span> <span data-start="733.24" data-end="735.01">to have the ability to swap out</span> <span data-start="735.01" data-end="737.29">different pieces so for example we're</span> <span data-start="737.29" data-end="739.24">using the virtual Dom library from the</span> <span data-start="739.24" data-end="741.519">mercury project but we have an adapter</span> <span data-start="741.519" data-end="743.11">so that we can swap in any virtual Dom</span> <span data-start="743.11" data-end="745.12">library that we want and we benchmarked</span> <span data-start="745.12" data-end="746.23">it with different implementations in the</span> <span data-start="746.23" data-end="748.029">past and that's something that we can do</span> <span data-start="748.029" data-end="749.92">if you know if something comes down the</span> <span data-start="749.92" data-end="752.079">line a few years from now and we want to</span> <span data-start="752.079" data-end="755.41">pull in it uses backbone in our code</span> <span data-start="755.41" data-end="757.779">base but that's set a separate layer so</span> <span data-start="757.779" data-end="759.37">we're not where'd you where D couple</span> <span data-start="759.37" data-end="761.29">from backbone itself and we have</span> <span data-start="761.29" data-end="762.49">implementations and other form in</span> <span data-start="762.49" data-end="764.38">frameworks as well so that's certainly</span> <span data-start="764.38" data-end="766.149">something as we look like how we want to</span> <span data-start="766.149" data-end="767.68">handle our data on the client side and</span> <span data-start="767.68" data-end="770.05">maybe how we want to use an API for</span> <span data-start="770.05" data-end="771.73">building out our views we can change</span> <span data-start="771.73" data-end="773.319">that down the line without replacing the</span> <span data-start="773.319" data-end="776.68">whole thing and so what we're able to do</span> <span data-start="776.68" data-end="778.48">is is write something that really worked</span> <span data-start="778.48" data-end="780.01">for us and work within our tech stack</span> <span data-start="780.01" data-end="783.43">and I think at the start of it we're</span> <span data-start="783.43" data-end="785.67">sort of afraid of writing something new</span> <span data-start="785.67" data-end="787.81">you know there's the not invented here</span> <span data-start="787.81" data-end="789.67">syndrome right that you know we need</span> <span data-start="789.67" data-end="790.99">need to just write everything in house</span> <span data-start="790.99" data-end="792.73">and that's very that's very true a lot</span> <span data-start="792.73" data-end="795.16">of places i'm sure ourselves included to</span> <span data-start="795.16" data-end="797.529">some extent we write a lot of stuff</span> <span data-start="797.529" data-end="798.55">in-house and maybe we could use</span> <span data-start="798.55" data-end="800.47">externally I'm that being said I think</span> <span data-start="800.47" data-end="801.73">there's there's kind of the opposite end</span> <span data-start="801.73" data-end="803.44">of that there are teams that don't want</span> <span data-start="803.44" data-end="804.699">to write anything because they're afraid</span> <span data-start="804.699" data-end="806.56">that you know they couldn't do it as</span> <span data-start="806.56" data-end="808.329">well as as anything else that out there</span> <span data-start="808.329" data-end="811">and maybe they couldn't but you all have</span> <span data-start="811" data-end="813.04">like unique problems a lot of us are</span> <span data-start="813.04" data-end="814.209">facing very interesting</span> <span data-start="814.209" data-end="816.819">for us it was that we're not a single</span> <span data-start="816.819" data-end="818.74">page app we weren't going to be there a</span> <span data-start="818.74" data-end="819.999">lot of reasons that we couldn't switch</span> <span data-start="819.999" data-end="822.49">to a single page app SEO just being one</span> <span data-start="822.49" data-end="824.829">of them and that's certainly changing</span> <span data-start="824.829" data-end="826.48">but even that aside I think there's</span> <span data-start="826.48" data-end="827.98">something to be said for delivering a</span> <span data-start="827.98" data-end="830.079">page that's a fully render to our user a</span> <span data-start="830.079" data-end="832.6">page that progressively falls back and</span> <span data-start="832.6" data-end="834.04">works with our JavaScript which is</span> <span data-start="834.04" data-end="835.029">something that was very important to us</span> <span data-start="835.029" data-end="838.449">as well so all of these kind of features</span> <span data-start="838.449" data-end="841.629">made us a little bit more unique I think</span> <span data-start="841.629" data-end="843.73">then some of your normal single page</span> <span data-start="843.73" data-end="848.8">applications there's this also this idea</span> <span data-start="848.8" data-end="850.66">that we discovered of using existing</span> <span data-start="850.66" data-end="852.369">infrastructure and this is a picture of</span> <span data-start="852.369" data-end="854.499">barbed wire fence and I read this really</span> <span data-start="854.499" data-end="856.959">cool story a few months ago and it's</span> <span data-start="856.959" data-end="858.55">that at the early part of the 20th</span> <span data-start="858.55" data-end="860.529">century as telephone was sort of making</span> <span data-start="860.529" data-end="863.649">its way across the United States it was</span> <span data-start="863.649" data-end="865.259">really expensive tool a new wires</span> <span data-start="865.259" data-end="867.069">especially in parts of the country that</span> <span data-start="867.069" data-end="868.119">were vast and there were there were</span> <span data-start="868.119" data-end="869.86">large distances between these houses and</span> <span data-start="869.86" data-end="872.139">so in the Great Plains in the American</span> </p>
<p><span data-start="872.139" data-end="875.499">West we had whole swathes of land that</span> <span data-start="875.499" data-end="877.869">just wasn't affordable to lay new</span> <span data-start="877.869" data-end="879.309">telephone wires the telephone companies</span> <span data-start="879.309" data-end="881.049">just weren't interested in it because it</span> <span data-start="881.049" data-end="883.42">was just way too expensive and so what</span> <span data-start="883.42" data-end="889.36">farmers did in a very I think in a way</span> <span data-start="889.36" data-end="890.709">that's similar to you how hackers</span> <span data-start="890.709" data-end="892.569">approach problems is they looked at what</span> <span data-start="892.569" data-end="894.79">they had already they had a lot of these</span> <span data-start="894.79" data-end="896.41">bribed wire fences that actually join</span> <span data-start="896.41" data-end="897.85">entire farm so that they could separate</span> <span data-start="897.85" data-end="899.29">land and that's how they kept animals</span> <span data-start="899.29" data-end="901.72">from roaming between farms and they</span> <span data-start="901.72" data-end="903.879">realized that you know the</span> <span data-start="903.879" data-end="905.649">infrastructure was already there they</span> <span data-start="905.649" data-end="908.199">could leverage those barbed wires to</span> <span data-start="908.199" data-end="910.839">actually transmit telephone signals</span> <span data-start="910.839" data-end="913.36">across large areas of land without</span> <span data-start="913.36" data-end="916.149">having to build anything new and so</span> <span data-start="916.149" data-end="917.98">that's what they did these groups of</span> <span data-start="917.98" data-end="919.029">farmers just came together and they</span> <span data-start="919.029" data-end="923.989">started implementing a telephone</span> <span data-start="923.999" data-end="926.049">infrastructure through their existing</span> <span data-start="926.049" data-end="928.99">barbed wire fences and this was really</span> <span data-start="928.99" data-end="930.189">interesting to me because I looked at</span> <span data-start="930.189" data-end="932.139">this and I said you know it's not</span> <span data-start="932.139" data-end="933.759">perfect like maybe the signal was a</span> <span data-start="933.759" data-end="935.679">little bit worse maybe they had to</span> <span data-start="935.679" data-end="937.569">maintain it a little bit more but at the</span> <span data-start="937.569" data-end="939.069">end of the day they had a telephone</span> <span data-start="939.069" data-end="940.779">service that they just weren't going to</span> <span data-start="940.779" data-end="942.549">get otherwise and sure it would have</span> <span data-start="942.549" data-end="943.72">been great if they could have gotten new</span> <span data-start="943.72" data-end="946.149">new telephone poles and in strong up new</span> <span data-start="946.149" data-end="947.649">brand new copper across the whole</span> <span data-start="947.649" data-end="949.689">but that wasn't going to happen for</span> <span data-start="949.689" data-end="952.18">years and it wasn't affordable and it</span> <span data-start="952.18" data-end="953.98">was far too expensive and that sounded</span> <span data-start="953.98" data-end="956.47">really familiar so you know what we were</span> <span data-start="956.47" data-end="958.99">able to do is take the existing</span> <span data-start="958.99" data-end="961.72">infrastructure that we had with its good</span> <span data-start="961.72" data-end="964.119">parts and with its bad parts and write</span> <span data-start="964.119" data-end="965.92">something new that gave us the features</span> <span data-start="965.92" data-end="971.069">that we wanted so that's something and</span> <span data-start="971.069" data-end="974.92">so I'm just going to show some demos</span> <span data-start="974.92" data-end="979.899">here how many of you have seen the DB</span> <span data-start="979.899" data-end="983.139">monster demo implementation all right so</span> <span data-start="983.139" data-end="985.3">a few of you I'm just going to pull one</span> <span data-start="985.3" data-end="988.899">up here so this is DB monster and</span> <span data-start="988.899" data-end="991.54">angular and Ryan Florence demoed this at</span> <span data-start="991.54" data-end="993.73">recomp this year and it's just a really</span> <span data-start="993.73" data-end="997.48">basic application that updates this set</span> <span data-start="997.48" data-end="999.61">of this table sort of simulate the idea</span> <span data-start="999.61" data-end="1002.639">of a database monitoring question</span> <span data-start="1002.639" data-end="1005.55">monitoring out and so we have data</span> <span data-start="1005.55" data-end="1007.679">that's changing very quickly and we have</span> <span data-start="1007.679" data-end="1010.019">hundreds of rows which for some</span> <span data-start="1010.019" data-end="1013.86">applications might be the case so if you</span> <span data-start="1013.86" data-end="1016.499">have very you have a lot of database</span> <span data-start="1016.499" data-end="1017.939">clusters that you might eat them on or</span> <span data-start="1017.939" data-end="1019.17">anything unique monitor now you</span> <span data-start="1019.17" data-end="1020.339">certainly have applications that are</span> <span data-start="1020.339" data-end="1024.12">updating the stuff so we have</span> <span data-start="1024.12" data-end="1025.079">implementations in all different</span> <span data-start="1025.079" data-end="1026.61">libraries and the interesting thing</span> <span data-start="1026.61" data-end="1028.38">about this is that we're able to see how</span> <span data-start="1028.38" data-end="1030.51">quickly we're able to update a table</span> <span data-start="1030.51" data-end="1033.51">with 200 rose actually says 100 bits</span> <span data-start="1033.51" data-end="1035.459">200s master and slave for each row and</span> <span data-start="1035.459" data-end="1038.189">then we can see how slow it is so the</span> <span data-start="1038.189" data-end="1039.659">slower ones will drop frames because</span> </p>
<p><span data-start="1039.659" data-end="1041.339">JavaScript won't be able to handle the</span> <span data-start="1041.339" data-end="1044.49">updates and the browser will will start</span> <span data-start="1044.49" data-end="1045.63">dropping frames so you'll kind of see</span> <span data-start="1045.63" data-end="1048.39">the drink so this is angular 1.3 which I</span> <span data-start="1048.39" data-end="1053.13">think was several months ago but so</span> <span data-start="1053.13" data-end="1054.96">let's see we have we have a little bit</span> <span data-start="1054.96" data-end="1056.789">of genk as I scroll I don't know how oh</span> <span data-start="1056.789" data-end="1058.789">well it shows up on the projector and</span> <span data-start="1058.789" data-end="1064.02">pull up the console and I have a</span> <span data-start="1064.02" data-end="1069.96">function called a run timer so run timer</span> <span data-start="1069.96" data-end="1072.45">will run over five seconds and it'll see</span> <span data-start="1072.45" data-end="1074.7">how many times you can run render in a</span> <span data-start="1074.7" data-end="1076.23">second over a course of five little</span> <span data-start="1076.23" data-end="1078.37">sample</span> <span data-start="1078.37" data-end="1080.99">okay so you get 4.4 renders per second</span> <span data-start="1080.99" data-end="1082.549">so that that's you know pretty good but</span> <span data-start="1082.549" data-end="1087.91">it definitely is janky here all right</span> <span data-start="1087.91" data-end="1092.66">now we have amber one now and this is a</span> <span data-start="1092.66" data-end="1094.28">little problematic because it tends to</span> <span data-start="1094.28" data-end="1097.669">cross the browser tab sometimes all</span> <span data-start="1097.669" data-end="1104.75">right so we get occasional updates all</span> <span data-start="1104.75" data-end="1107.48">right so down to about one render a</span> <span data-start="1107.48" data-end="1109.15">second so that's that's a little slow</span> <span data-start="1109.15" data-end="1110.96">and of course these are synthetic</span> <span data-start="1110.96" data-end="1112.4">benchmarks but I think they're useful to</span> <span data-start="1112.4" data-end="1115.73">see in this case how fast we can we can</span> <span data-start="1115.73" data-end="1118.37">update or down so when I informed stem</span> <span data-start="1118.37" data-end="1122.51">of this it was all about reactor so this</span> <span data-start="1122.51" data-end="1128.48">is react we run Dover five seconds able</span> <span data-start="1128.48" data-end="1129.74">to get 10 run in a second that's pretty</span> <span data-start="1129.74" data-end="1132.049">fast it's really smooth if I scroll down</span> <span data-start="1132.049" data-end="1140.89">here a very little drink all right so</span> <span data-start="1140.89" data-end="1144.59">ember influence the glimmer engine</span> <span data-start="1144.59" data-end="1147.94">recently take their own approach to</span> <span data-start="1147.94" data-end="1151.07">updating the DOM and just as fast as</span> <span data-start="1151.07" data-end="1153.83">react now so that was really exciting at</span> <span data-start="1153.83" data-end="1156.59">amber comp this year so we get 900</span> <span data-start="1156.59" data-end="1159.74">second so just about at react speech so</span> <span data-start="1159.74" data-end="1162.08">we looked at all this this was sort of</span> <span data-start="1162.08" data-end="1163.429">what we looked at before we wrote</span> <span data-start="1163.429" data-end="1165.2">tungsten we're like really want to be</span> <span data-start="1165.2" data-end="1168.169">this fast renew we can do it with our</span> <span data-start="1168.169" data-end="1170.9">current infrastructure but you know as</span> <span data-start="1170.9" data-end="1172.159">we realize that we couldn't rewrite</span> <span data-start="1172.159" data-end="1173.69">everything we knew we probably wouldn't</span> <span data-start="1173.69" data-end="1175.4">get to those speeds and we wanted to</span> <span data-start="1175.4" data-end="1177.049">sort of be in the same ballpark that was</span> <span data-start="1177.049" data-end="1179.929">kind of the goal so let's see what we</span> <span data-start="1179.929" data-end="1187.429">can get understand Jenkins want too bad</span> <span data-start="1187.429" data-end="1193.22">let's see what we get for renders</span> <span data-start="1193.23" data-end="1196.03">alright so I'm ten or two seconds so</span> <span data-start="1196.03" data-end="1198.04">pretty pretty close to mboro glimmer and</span> <span data-start="1198.04" data-end="1206.2">react yeah thank you yeah we were really</span> <span data-start="1206.2" data-end="1208.48">happy with it and you know we looked at</span> <span data-start="1208.48" data-end="1210.16">this in at the end of the day if you</span> <span data-start="1210.16" data-end="1212.77">know a few renders more more or less per</span> <span data-start="1212.77" data-end="1215.8">second wasn't really a game changer but</span> <span data-start="1215.8" data-end="1217.84">it was is cool to be there and kind of</span> <span data-start="1217.84" data-end="1219.25">be in that space and realize that we</span> <span data-start="1219.25" data-end="1222.25">could do it you know taking our existing</span> <span data-start="1222.25" data-end="1225.07">our existing infrastructure I have this</span> <span data-start="1225.07" data-end="1227.29">last library that I want a demo in this</span> <span data-start="1227.29" data-end="1228.37">is just really lightweight library</span> <span data-start="1228.37" data-end="1230.47">called paper clip and it does dipping a</span> <span data-start="1230.47" data-end="1233.77">little bit different way it's really</span> <span data-start="1233.77" data-end="1235.81">fast so what's interesting about this is</span> <span data-start="1235.81" data-end="1237.37">we looked around we realized there's</span> <span data-start="1237.37" data-end="1238.99">still more work that we can do there's</span> <span data-start="1238.99" data-end="1241.3">still places that we can improve there</span> <span data-start="1241.3" data-end="1242.98">are still optimizations that we can make</span> <span data-start="1242.98" data-end="1244.99">in terms of updating parts to our page</span> <span data-start="1244.99" data-end="1247.23">or doing different faster or</span> <span data-start="1247.23" data-end="1248.95">conditionally doing different based on</span> <span data-start="1248.95" data-end="1251.62">our changing data the interesting thing</span> <span data-start="1251.62" data-end="1253.78">is that we can do this ourselves now as</span> <span data-start="1253.78" data-end="1255.7">opposed to having to rely on a library</span> <span data-start="1255.7" data-end="1257.83">to do that for us we can start to find</span> <span data-start="1257.83" data-end="1259.77">places in our own code in our own</span> <span data-start="1259.77" data-end="1262.12">implementations and see where it's</span> <span data-start="1262.12" data-end="1264.79">useful to make it faster where it might</span> <span data-start="1264.79" data-end="1267.24">give us the most benefit so if I pull up</span> <span data-start="1267.24" data-end="1273.58">this library which we've we've been</span> <span data-start="1273.58" data-end="1276.78">looking at it that's really fast and</span> <span data-start="1276.78" data-end="1278.92">this is actually going to be quite</span> <span data-start="1278.92" data-end="1282.34">fascinated implementations yeah 30</span> <span data-start="1282.34" data-end="1285.51">wonders say so the point being you know</span> <span data-start="1285.51" data-end="1288.46">there's more work to do and it's nice to</span> <span data-start="1288.46" data-end="1290.05">be able to do that in our existing</span> <span data-start="1290.05" data-end="1291.73">infrastructure and make progress in a</span> <span data-start="1291.73" data-end="1293.38">way that makes sense for for our use</span> <span data-start="1293.38" data-end="1296.23">cases and for our customers and yeah</span> <span data-start="1296.23" data-end="1297.79">we'd love to hear your feedback on</span> <span data-start="1297.79" data-end="1299.62">tungsten I have stickers because</span> <span data-start="1299.62" data-end="1300.91">apparently you've made it like as a</span> <span data-start="1300.91" data-end="1304.62">library you get your own stickers so uh</span> <span data-start="1304.62" data-end="1334.29">all right thank you</span> </p>
</section>