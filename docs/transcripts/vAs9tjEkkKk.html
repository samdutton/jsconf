<section>
<p><span data-start="9.32" data-end="12">hi i'll be talking about the CSS modules</span> <span data-start="12" data-end="14.12">work that we've been doing in google+</span> <span data-start="14.12" data-end="17.91">modules is a problem that's not just</span> <span data-start="17.91" data-end="19.98">applicable to google or google+ it's a</span> <span data-start="19.98" data-end="22.65">problem that's faced by all very large</span> <span data-start="22.65" data-end="24.539">applications that have lots of features</span> <span data-start="24.539" data-end="26.939">so this is just a sampling of some of</span> <span data-start="26.939" data-end="28.92">the top level pages on google+ and</span> <span data-start="28.92" data-end="31.05">within each of these pages we have tons</span> <span data-start="31.05" data-end="33.78">of features and lots of features add up</span> <span data-start="33.78" data-end="35.82">to a lot of javascript in a lot of CSS</span> <span data-start="35.82" data-end="37.829">and as you can see from these numbers</span> <span data-start="37.829" data-end="40.559">here we have a ton of CSS and so we have</span> <span data-start="40.559" data-end="45.48">a problem to solve again and this is not</span> <span data-start="45.48" data-end="47.43">the only problem we do have the problem</span> <span data-start="47.43" data-end="49.739">of big CSS and us and we want our</span> <span data-start="49.739" data-end="51.96">initial page load to be super fast but</span> <span data-start="51.96" data-end="53.969">in addition a problem we've been facing</span> <span data-start="53.969" data-end="57.75">a lot over the last year has been that</span> <span data-start="57.75" data-end="60.87">kind of broken you is a lot of our CSS</span> <span data-start="60.87" data-end="63.12">is manually curated inbuilt files and</span> <span data-start="63.12" data-end="64.92">this is brittle and it's prone to</span> <span data-start="64.92" data-end="66.9">reordering so this is the second problem</span> <span data-start="66.9" data-end="70.56">that you're trying to fix so module</span> <span data-start="70.56" data-end="72.9">systems is primarily solving the problem</span> <span data-start="72.9" data-end="75.57">of size but building a module system is</span> <span data-start="75.57" data-end="78.45">much simpler if you absolutely had no</span> <span data-start="78.45" data-end="80.97">shared code in your site so let's say</span> <span data-start="80.97" data-end="82.77">every page of your site is completely</span> <span data-start="82.77" data-end="84.75">independent and doesn't share any code</span> <span data-start="84.75" data-end="87.42">at all then it's fairly straightforward</span> <span data-start="87.42" data-end="89.79">to build a module system every page</span> <span data-start="89.79" data-end="92.22">becomes its own module and you load it</span> <span data-start="92.22" data-end="95.549">as you go but in reality though we do</span> <span data-start="95.549" data-end="97.65">have a ton of shared code and if you</span> <span data-start="97.65" data-end="98.759">don't have any shared code then you're</span> <span data-start="98.759" data-end="100.32">definitely doing something wrong because</span> <span data-start="100.32" data-end="102.439">stylez should be shared across your site</span> <span data-start="102.439" data-end="105.71">so building this dependency system</span> <span data-start="105.71" data-end="108.36">turned out to be a big win on its own</span> <span data-start="108.36" data-end="111.119">its vastly improved the CSS development</span> <span data-start="111.119" data-end="112.95">experience because now we can rely on</span> <span data-start="112.95" data-end="116.04">the framework to ensure the correct</span> <span data-start="116.04" data-end="118.53">cascade ordering and developers don't</span> <span data-start="118.53" data-end="119.909">have to keep fighting specificity</span> <span data-start="119.909" data-end="123.42">anymore so this project is a work in</span> <span data-start="123.42" data-end="125.399">progress we haven't completely launched</span> <span data-start="125.399" data-end="127.619">to all of Google+ yet we have launched</span> <span data-start="127.619" data-end="129.629">more deals to several pages on our site</span> <span data-start="129.629" data-end="132.06">and we've seen significant improvements</span> <span data-start="132.06" data-end="134.06">in CSS size</span> <span data-start="134.06" data-end="137.64">and the preprocessor we use internally</span> <span data-start="137.64" data-end="140.31">in Google is called closure style sheets</span> <span data-start="140.31" data-end="142.68">and internally we call this GSS so if I</span> <span data-start="142.68" data-end="144.48">accidentally say gess in this talk I</span> <span data-start="144.48" data-end="150.84">really mean CSS so the step one to build</span> <span data-start="150.84" data-end="152.97">an effective module system is to know</span> <span data-start="152.97" data-end="155.76">what the shared code is and this is not</span> <span data-start="155.76" data-end="158.52">always trivial to identify you might</span> <span data-start="158.52" data-end="160.59">sometimes you might notice you know the</span> <span data-start="160.59" data-end="163.41">button and a menu look similar but it's</span> <span data-start="163.41" data-end="165.9">not easy to see exactly what is similar</span> <span data-start="165.9" data-end="168">so we can at least start with the very</span> <span data-start="168" data-end="170.28">obvious let's start with the exact same</span> </p>
<p><span data-start="170.28" data-end="172.95">UI elements that keep repeating over and</span> <span data-start="172.95" data-end="174.72">over again and these are things like</span> <span data-start="174.72" data-end="177.69">buttons and icons and what's famously</span> <span data-start="177.69" data-end="180.03">called the media object and we have a</span> <span data-start="180.03" data-end="181.799">ton of these repeating patterns in</span> <span data-start="181.799" data-end="184.62">Google+ so Google+ is a social network</span> <span data-start="184.62" data-end="186.84">and the primary thing on the main page</span> <span data-start="186.84" data-end="188.79">are these posts which are contained in</span> <span data-start="188.79" data-end="191.22">what are called cards and every post has</span> <span data-start="191.22" data-end="193.38">the same characteristics every post has</span> <span data-start="193.38" data-end="195.12">an icon with the name of the person</span> <span data-start="195.12" data-end="198.329">posting it has buttons for uploading and</span> <span data-start="198.329" data-end="201">re sharing and it has common activity in</span> <span data-start="201" data-end="204.03">addition on the top left is what we call</span> <span data-start="204.03" data-end="205.68">the share box if you wanted to share</span> <span data-start="205.68" data-end="207">something with your network this is</span> <span data-start="207" data-end="210.359">where you would start typing this is a</span> <span data-start="210.359" data-end="211.5">completely different page it's my</span> <span data-start="211.5" data-end="213.78">profile page and you can see that the</span> <span data-start="213.78" data-end="215.64">top right card is different but again</span> <span data-start="215.64" data-end="217.44">the common theme here is there are posts</span> <span data-start="217.44" data-end="218.94">and the posts have the same</span> <span data-start="218.94" data-end="221.34">characteristics and again we see the</span> <span data-start="221.34" data-end="223.829">share box and you can see the common</span> <span data-start="223.829" data-end="227.579">elements outlined in red yet another</span> <span data-start="227.579" data-end="229.17">page on Google+ this is called the</span> <span data-start="229.17" data-end="231.48">community page it's a forum for people</span> <span data-start="231.48" data-end="232.859">of similar interest here it's</span> <span data-start="232.859" data-end="235.829">photography and again it has unique</span> <span data-start="235.829" data-end="237.87">elements like the left panel and the</span> <span data-start="237.87" data-end="241.85">right card but again posts and share box</span> <span data-start="241.85" data-end="245.069">photos page at first glance it looks</span> <span data-start="245.069" data-end="246.66">completely different but if you look on</span> <span data-start="246.66" data-end="248.34">the right band panel you see the same</span> <span data-start="248.34" data-end="250.739">repeating components again so you get</span> <span data-start="250.739" data-end="252.9">the point we have a ton of shared</span> <span data-start="252.9" data-end="255.6">components all over our site but this is</span> <span data-start="255.6" data-end="258.959">not all in addition to this we have lots</span> <span data-start="258.959" data-end="261.479">of shared Styles across Google Plus and</span> <span data-start="261.479" data-end="263.55">these are things like forms and colors</span> <span data-start="263.55" data-end="267.03">and layouts and then in addition to that</span> <span data-start="267.03" data-end="267.81">we have</span> <span data-start="267.81" data-end="269.52">lots of common styles across all of</span> </p>
<p><span data-start="269.52" data-end="272.07">Google and these are things like buttons</span> <span data-start="272.07" data-end="274.98">checkboxes dialogs menus this is so that</span> <span data-start="274.98" data-end="276.6">as you navigate different Google</span> <span data-start="276.6" data-end="279.54">products like map or search you get a</span> <span data-start="279.54" data-end="284.01">somewhat consistent look and feel and by</span> <span data-start="284.01" data-end="285.45">the way everything I showed you so far</span> <span data-start="285.45" data-end="287.669">is developed by completely different</span> <span data-start="287.669" data-end="289.59">teams so we have these somewhat</span> <span data-start="289.59" data-end="291.57">competing goals of all these teams</span> <span data-start="291.57" data-end="294.3">wanting to split their code by project</span> <span data-start="294.3" data-end="296.58">boundary but we want them to share all</span> <span data-start="296.58" data-end="298.83">of these common styles so this is all</span> <span data-start="298.83" data-end="300.87">the more reason why we need a dependency</span> <span data-start="300.87" data-end="303.27">system because we want a systematic</span> <span data-start="303.27" data-end="305.82">framework and not rely on developer</span> <span data-start="305.82" data-end="310.8">discipline so we saw how the homepage in</span> <span data-start="310.8" data-end="313.26">the community page share some code like</span> <span data-start="313.26" data-end="315.479">in this case they share the code for</span> <span data-start="315.479" data-end="317.729">posts and share box in addition they</span> <span data-start="317.729" data-end="320.13">have their own unique elements we</span> <span data-start="320.13" data-end="321.479">definitely want to write all of the</span> <span data-start="321.479" data-end="323.43">shared code only once we want to</span> <span data-start="323.43" data-end="325.8">download it only once to the browser and</span> <span data-start="325.8" data-end="328.41">we want to download the minimum possible</span> </p>
<p><span data-start="328.41" data-end="332.4">CSS so let's consider the larger problem</span> <span data-start="332.4" data-end="333.78">of code that's downloaded on the browser</span> <span data-start="333.78" data-end="336.51">and this is not just CSS but includes</span> <span data-start="336.51" data-end="338.25">everything the browser needs to render</span> <span data-start="338.25" data-end="340.14">the page including templates and</span> <span data-start="340.14" data-end="342.06">JavaScript so for the homepage we've</span> <span data-start="342.06" data-end="344.13">already seen we need code to render</span> <span data-start="344.13" data-end="346.32">posts render the share box and other</span> <span data-start="346.32" data-end="350.729">homepage specific elements so I'm one of</span> <span data-start="350.729" data-end="353.58">our main goals here is when we first</span> <span data-start="353.58" data-end="355.83">visit the homepage we want the page to</span> <span data-start="355.83" data-end="358.53">be super fast just load the minimum code</span> <span data-start="358.53" data-end="361.2">needed to render just that page and</span> <span data-start="361.2" data-end="363.63">nothing more and then later when we go</span> <span data-start="363.63" data-end="365.07">and visit the community page or some</span> <span data-start="365.07" data-end="367.65">other page that incrementally load cold</span> <span data-start="367.65" data-end="370.88">just for the features needed for that</span> <span data-start="370.88" data-end="373.05">now it turns out there is already a</span> <span data-start="373.05" data-end="375.12">solution for this in JavaScript and it's</span> <span data-start="375.12" data-end="376.77">called JavaScript modules and it solves</span> <span data-start="376.77" data-end="378.63">exactly this problem of incremental</span> <span data-start="378.63" data-end="381.9">download and any JavaScript developers</span> <span data-start="381.9" data-end="383.55">in group might be familiar with AMD or</span> <span data-start="383.55" data-end="387">commonjs and last year my co-workers</span> <span data-start="387" data-end="389.49">from google malta and john unveiled the</span> <span data-start="389.49" data-end="392.91">open source google module server however</span> <span data-start="392.91" data-end="394.53">there is absolutely no solution for this</span> <span data-start="394.53" data-end="398.159">and CSS yet and the question is can be</span> <span data-start="398.159" data-end="401.07">potentially use the same solution there</span> <span data-start="401.07" data-end="401.83">is a catch though</span> <span data-start="401.83" data-end="405.46">in CSS we have the problem of safety so</span> <span data-start="405.46" data-end="408.04">in this example when I go visit the</span> <span data-start="408.04" data-end="410.32">community page after the home page if</span> </p>
<p><span data-start="410.32" data-end="412.03">I'm not careful about how I write my</span> <span data-start="412.03" data-end="414.85">code the styles that I lowered later can</span> <span data-start="414.85" data-end="416.71">override the styles i've loaded earlier</span> <span data-start="416.71" data-end="418.93">so it's possible that I break the UI for</span> <span data-start="418.93" data-end="420.94">the home page so now we have this</span> <span data-start="420.94" data-end="423.88">additional goal that as we incrementally</span> <span data-start="423.88" data-end="426.61">load CSS we want absolutely no</span> <span data-start="426.61" data-end="429.51">regressions on previously shown on pages</span> <span data-start="429.51" data-end="431.77">so we're coming to the conclusion that</span> <span data-start="431.77" data-end="434.02">CSS is not as simple we have the safety</span> <span data-start="434.02" data-end="436.06">challenge that I already mentioned in</span> <span data-start="436.06" data-end="438.01">addition we know that we have a ton of</span> <span data-start="438.01" data-end="439.99">shared code we want a dependency system</span> <span data-start="439.99" data-end="442.57">but CSS doesn't have a notion of</span> <span data-start="442.57" data-end="445.03">dependencies and almost every other</span> <span data-start="445.03" data-end="447.49">language seems to have this and this is</span> <span data-start="447.49" data-end="450.01">require and comment yes or import in</span> </p>
<p><span data-start="450.01" data-end="453.79">Java and Python so how do we depend on</span> <span data-start="453.79" data-end="455.77">what we need and how do we depend only</span> <span data-start="455.77" data-end="460.66">on what we need recap of our goal here</span> <span data-start="460.66" data-end="462.07">is just deliver the minimum amount of</span> <span data-start="462.07" data-end="465.19">CSS do it incrementally and safely and</span> <span data-start="465.19" data-end="468.1">the challenges here are bundling the CSS</span> <span data-start="468.1" data-end="470.32">with its dependencies downloading it as</span> <span data-start="470.32" data-end="473.38">needed and safely composing it so we are</span> <span data-start="473.38" data-end="475.24">essentially saying we need a module</span> <span data-start="475.24" data-end="478.51">system because bundling CSS or depth is</span> <span data-start="478.51" data-end="480.19">really what a dependency system does and</span> <span data-start="480.19" data-end="482.62">downloading and composing is what an</span> <span data-start="482.62" data-end="486.4">assembly and serving system does so</span> <span data-start="486.4" data-end="487.54">let's look at each of these challenges</span> <span data-start="487.54" data-end="490.9">starting with the first one so we define</span> <span data-start="490.9" data-end="493.84">mcss module as a bundle of CSS that</span> <span data-start="493.84" data-end="495.52">supports the page of our site and is</span> <span data-start="495.52" data-end="498.19">downloaded together and we've already</span> <span data-start="498.19" data-end="501.07">identified CSS shared code and</span> <span data-start="501.07" data-end="503.05">dependencies and these are things like</span> </p>
<p><span data-start="503.05" data-end="505.93">CSS from the shared components fonts and</span> <span data-start="505.93" data-end="508.51">colors that are expressed typically as</span> <span data-start="508.51" data-end="510.91">constants and in addition we have a lot</span> <span data-start="510.91" data-end="513.64">of common CSS libraries and these are in</span> <span data-start="513.64" data-end="517.33">our case these are Google wyd styles so</span> <span data-start="517.33" data-end="519.37">let's stipulate upfront that the naive</span> <span data-start="519.37" data-end="521.89">solutions don't work for our case we</span> <span data-start="521.89" data-end="524.05">cannot just use a CSS at import on every</span> <span data-start="524.05" data-end="525.94">page we visit because this would just</span> <span data-start="525.94" data-end="527.74">duplicate download all of that shared</span> <span data-start="527.74" data-end="529.06">good and we've seen we have a ton of</span> <span data-start="529.06" data-end="531.67">shared code in addition we want to</span> <span data-start="531.67" data-end="534.64">include only what we need for example</span> <span data-start="534.64" data-end="535.45">different page</span> <span data-start="535.45" data-end="537.04">use different variants of the share box</span> </p>
<p><span data-start="537.04" data-end="540.01">I showed you now if the profile page</span> <span data-start="540.01" data-end="542.08">wants a bit one wants one out of seven</span> <span data-start="542.08" data-end="544.33">variants it should only include that one</span> <span data-start="544.33" data-end="548.26">and nothing more in another non solution</span> <span data-start="548.26" data-end="550.78">for us is we cannot take every single</span> <span data-start="550.78" data-end="552.57">style that's shared across our entire</span> <span data-start="552.57" data-end="555.85">site and bundle this together into a</span> <span data-start="555.85" data-end="558.79">giant shared EPS module this module is</span> <span data-start="558.79" data-end="560.92">going to get very large and maintainable</span> <span data-start="560.92" data-end="565.11">very quickly so let's start out with</span> <span data-start="565.11" data-end="567.55">figuring out how to express dependencies</span> <span data-start="567.55" data-end="570.61">in each of these cases with shared</span> <span data-start="570.61" data-end="573.76">components because we write styles in a</span> <span data-start="573.76" data-end="576.37">completely separate stylesheet how do we</span> <span data-start="576.37" data-end="578.86">even know which CSS belongs to each of</span> <span data-start="578.86" data-end="582.25">these while we don't know exactly which</span> </p>
<p><span data-start="582.25" data-end="585.04">CSS belongs to this we do know what</span> <span data-start="585.04" data-end="586.33">templates are needed to render those</span> <span data-start="586.33" data-end="588.43">components and we know what javascript</span> <span data-start="588.43" data-end="590.44">is needed to make them interactive and</span> <span data-start="590.44" data-end="592.54">those things are templates and the</span> <span data-start="592.54" data-end="594.76">JavaScript can in turn point us to the</span> <span data-start="594.76" data-end="597.49">CSS that they pull in so essentially</span> <span data-start="597.49" data-end="601.47">what we are saying is let's bundle</span> <span data-start="601.47" data-end="605.1">template JavaScript and CSS into</span> <span data-start="605.1" data-end="607.66">components and the starts to sound a</span> <span data-start="607.66" data-end="611.89">little bit like web components so this</span> <span data-start="611.89" data-end="615.39">idea is similar to Nicole CSS Legos</span> <span data-start="615.39" data-end="618.19">which is identify shared veges create</span> <span data-start="618.19" data-end="621.79">reusable groups of CSS the additional</span> <span data-start="621.79" data-end="623.83">concept we're bringing here is we want</span> <span data-start="623.83" data-end="625.75">to bundle templates and JavaScript</span> <span data-start="625.75" data-end="627.52">together and create self-contained</span> <span data-start="627.52" data-end="629.77">components and essentially we want the</span> <span data-start="629.77" data-end="631.51">framework to do all of the heavy lifting</span> <span data-start="631.51" data-end="634.36">and not rely on developer discipline</span> <span data-start="634.36" data-end="636.64">because the top priority for developers</span> <span data-start="636.64" data-end="640.51">is to launch their features so to create</span> <span data-start="640.51" data-end="642.91">these self components Express</span> <span data-start="642.91" data-end="644.83">dependencies from the template to the</span> </p>
<p><span data-start="644.83" data-end="647.53">CSS and from JavaScript to the CSS and</span> <span data-start="647.53" data-end="649.86">we've created syntax for both of these</span> <span data-start="649.86" data-end="652.42">so for the templates case we use closure</span> <span data-start="652.42" data-end="655.03">templates in google plus and we've come</span> <span data-start="655.03" data-end="657.58">up with this require CSS annotation that</span> <span data-start="657.58" data-end="659.77">you can just add your template pointing</span> <span data-start="659.77" data-end="663.37">to the GSS namespace and similarly we</span> <span data-start="663.37" data-end="666.16">have an annotation that we use in our</span> <span data-start="666.16" data-end="668.72">JavaScript for the same purpose</span> <span data-start="668.72" data-end="670.31">this can just as well be expressed with</span> <span data-start="670.31" data-end="674.629">AMD syntax so at the end of this after</span> <span data-start="674.629" data-end="676.97">we have identified these components</span> <span data-start="676.97" data-end="678.8">bundle them together and we are</span> <span data-start="678.8" data-end="681.11">expressing dependencies of them at the</span> <span data-start="681.11" data-end="683.329">end of this we have a component</span> <span data-start="683.329" data-end="687.829">dependency graph for this page and once</span> <span data-start="687.829" data-end="690.709">we do this across our entire site we</span> <span data-start="690.709" data-end="692.779">have a complete component dependency</span> <span data-start="692.779" data-end="697.04">graph the second type of dependencies we</span> <span data-start="697.04" data-end="698.87">identified a things like fonts and</span> <span data-start="698.87" data-end="701.509">colors and these are typically expressed</span> <span data-start="701.509" data-end="705.259">as constants for us there's established</span> <span data-start="705.259" data-end="707.42">syntax for this in most preprocessors</span> <span data-start="707.42" data-end="710.93">this is at import in SAS and we use</span> <span data-start="710.93" data-end="713.81">closure style sheets and our sin taxes</span> <span data-start="713.81" data-end="717.139">for wide and require and this fits in</span> <span data-start="717.139" data-end="721.04">really well with our CSS dependency</span> <span data-start="721.04" data-end="723.199">graph so let's say the profile page</span> <span data-start="723.199" data-end="725.839">wants a separate set of constants from</span> <span data-start="725.839" data-end="728.18">the home page it can depend on just</span> <span data-start="728.18" data-end="732.56">those costs constants so this is an</span> <span data-start="732.56" data-end="735.379">example of the provide required syntax</span> <span data-start="735.379" data-end="738.589">for constants in this case we have a</span> <span data-start="738.589" data-end="742.49">profile base GSS named a CSS namespace</span> <span data-start="742.49" data-end="746.48">that is exporting a constant for profile</span> <span data-start="746.48" data-end="748.639">update background color and if something</span> <span data-start="748.639" data-end="752.48">else wants to use that constant all it</span> <span data-start="752.48" data-end="754.49">has to do is say at require and use the</span> <span data-start="754.49" data-end="758.48">concert so now we are expanding our CSS</span> <span data-start="758.48" data-end="761.92">dependency graph to include these common</span> <span data-start="761.92" data-end="764.779">forms and colors and essentially all of</span> <span data-start="764.779" data-end="767.449">our constants and mix-ins become part of</span> <span data-start="767.449" data-end="771.17">this dependency graph we haven't covered</span> <span data-start="771.17" data-end="772.879">what we're doing with common CSS</span> <span data-start="772.879" data-end="774.889">libraries yet but we'll come back to</span> <span data-start="774.889" data-end="777.559">that soon so moving on to the next</span> <span data-start="777.559" data-end="779.48">challenge here how do we safely compose</span> <span data-start="779.48" data-end="782.12">the CSS in the browser but it's not the</span> <span data-start="782.12" data-end="784.25">background for this I have to reiterate</span> <span data-start="784.25" data-end="787.25">kind of the basic points of CSS which is</span> <span data-start="787.25" data-end="790.1">order and specificity see CSS is</span> <span data-start="790.1" data-end="792.079">inherently order dependent if you have</span> <span data-start="792.079" data-end="793.699">base tiles and you have overrides for</span> <span data-start="793.699" data-end="795.709">these styles the base tiles must be</span> <span data-start="795.709" data-end="797.47">ordered before the overrides and</span> <span data-start="797.47" data-end="801.829">specificity can trump order so in this</span> <span data-start="801.829" data-end="802.67">example if</span> </p>
<p><span data-start="802.67" data-end="805.76">I have a div rapping hello world text</span> <span data-start="805.76" data-end="807.68">and I have two classes on it blue and</span> <span data-start="807.68" data-end="810.23">red with the colors blue and red the</span> <span data-start="810.23" data-end="811.64">hello world is going to show up in blue</span> <span data-start="811.64" data-end="814.07">and the reason for this is that the</span> <span data-start="814.07" data-end="817.1">Cascade order dictates that Styles</span> <span data-start="817.1" data-end="823.79">applied not the classes in HTML however</span> <span data-start="823.79" data-end="827.39">if I added yet another class to this and</span> <span data-start="827.39" data-end="830.96">add additional class in my CSS file that</span> <span data-start="830.96" data-end="832.61">changes the color to red this is because</span> <span data-start="832.61" data-end="834.97">i have just bumped up the specificity</span> <span data-start="834.97" data-end="838.67">off the off the right class and in</span> <span data-start="838.67" data-end="840.68">general this is not a great way of</span> <span data-start="840.68" data-end="844.19">overriding because every time you want</span> <span data-start="844.19" data-end="845.99">to override something if you're going to</span> <span data-start="845.99" data-end="848.06">bump up the specificity and you're</span> <span data-start="848.06" data-end="850.16">essentially fighting in the neck on the</span> <span data-start="850.16" data-end="851.75">next override and this is famously</span> <span data-start="851.75" data-end="856.25">called the specificity Wars so we</span> <span data-start="856.25" data-end="857.75">generally want to use the Cascade or</span> <span data-start="857.75" data-end="861.35">dictate styles and not specificity so</span> <span data-start="861.35" data-end="863.36">thanks to the work that nicole has done</span> <span data-start="863.36" data-end="866.75">an object-oriented CSS there is a body</span> <span data-start="866.75" data-end="869.24">of guidelines then we've fine found</span> <span data-start="869.24" data-end="871.34">these to be really accurate it from our</span> <span data-start="871.34" data-end="873.47">own GSS development experience we want</span> <span data-start="873.47" data-end="875.3">to minimize the selectors we have want</span> <span data-start="875.3" data-end="877.46">to reuse as much as possible we want to</span> <span data-start="877.46" data-end="880.13">keep specificity low and we want to have</span> <span data-start="880.13" data-end="882.05">rules of the streams same strength and</span> <span data-start="882.05" data-end="885.95">we want the Cascade order to override</span> <span data-start="885.95" data-end="889.4">styles not specificity but ideally we</span> <span data-start="889.4" data-end="891.35">want our framework to do all of this for</span> <span data-start="891.35" data-end="893.9">us but the framework should enable us to</span> <span data-start="893.9" data-end="895.88">create simple selectors and rules of</span> <span data-start="895.88" data-end="898.94">equal strength and and cover and</span> <span data-start="898.94" data-end="900.77">basically correctly order the Cascade so</span> <span data-start="900.77" data-end="902.09">the developers are not fighting</span> <span data-start="902.09" data-end="905.78">specificity so let's take the concrete</span> <span data-start="905.78" data-end="907.81">example of a button we have a button</span> <span data-start="907.81" data-end="910.04">which has some common styles and</span> <span data-start="910.04" data-end="912.83">different pages want to override in a</span> <span data-start="912.83" data-end="915.44">slightly different way and let's say for</span> <span data-start="915.44" data-end="917.15">this example they want to change the</span> <span data-start="917.15" data-end="919.9">color in for all these different cases</span> <span data-start="919.9" data-end="922.67">there's many ways to override styles and</span> <span data-start="922.67" data-end="925.55">each one has its pros and cons and we're</span> <span data-start="925.55" data-end="927.32">going to quickly look at some of the</span> <span data-start="927.32" data-end="932.15">common ways to override styles the</span> <span data-start="932.15" data-end="934.19">typical way to do this is you should</span> <span data-start="934.19" data-end="936.019">ideally be extending</span> <span data-start="936.019" data-end="937.79">standard button class with your own</span> <span data-start="937.79" data-end="942.23">context-specific button class and often</span> <span data-start="942.23" data-end="943.579">programmers might start out with a</span> <span data-start="943.579" data-end="945.019">compound selector for this you would</span> <span data-start="945.019" data-end="946.73">write profile button dots to android</span> <span data-start="946.73" data-end="949.73">button and we've already said that this</span> <span data-start="949.73" data-end="952.009">is not the ideal way to do this as it's</span> <span data-start="952.009" data-end="954.679">prone to clashes if you further if you</span> <span data-start="954.679" data-end="956.239">want further overrides of that same</span> <span data-start="956.239" data-end="958.069">style let's say you want different</span> <span data-start="958.069" data-end="959.6">styles in profile by the way if that</span> <span data-start="959.6" data-end="960.949">button appears in the header words of</span> <span data-start="960.949" data-end="963.439">the sidebar descendant selectors is</span> <span data-start="963.439" data-end="967.67">another way to do this here and this is</span> <span data-start="967.67" data-end="969.529">definitely better than compound</span> <span data-start="969.529" data-end="972.559">selectors but to some extent you may be</span> <span data-start="972.559" data-end="976.429">tying your CSS to a predefined HTML</span> <span data-start="976.429" data-end="981.129">structure you might use tools to do this</span> <span data-start="981.129" data-end="983.839">mix-ins are a pretty standard thing in</span> <span data-start="983.839" data-end="985.249">most preprocessors and if you use a</span> <span data-start="985.249" data-end="988.489">mixin it would automatically expand the</span> <span data-start="988.489" data-end="991.72">styles in line so you're essentially</span> <span data-start="991.72" data-end="994.069">getting rid of the standard button class</span> <span data-start="994.069" data-end="997.22">and the problem with this is now you are</span> <span data-start="997.22" data-end="999.619">duplicating all of these styles in each</span> <span data-start="999.619" data-end="1001.839">context if you already said we don't</span> <span data-start="1001.839" data-end="1004.569">want any duplication yet another way to</span> <span data-start="1004.569" data-end="1007.119">do this is use the site's as an extent</span> <span data-start="1007.119" data-end="1010.709">with a placeholder and this compiles to</span> <span data-start="1010.709" data-end="1013.839">something like this and this is a vast</span> <span data-start="1013.839" data-end="1018.189">improvement over mix-ins however this is</span> <span data-start="1018.189" data-end="1021.339">not our ideal solution with a dependency</span> <span data-start="1021.339" data-end="1025.179">graph because now we have this one rule</span> <span data-start="1025.179" data-end="1027.579">which has all of these features specific</span> <span data-start="1027.579" data-end="1030.22">selectors tied together and now this</span> <span data-start="1030.22" data-end="1032.829">rule is going to show up in some shared</span> <span data-start="1032.829" data-end="1034.74">module in our dependency graph and</span> <span data-start="1034.74" data-end="1037.179">ideally we just want to keep feature</span> <span data-start="1037.179" data-end="1041.52">specific code in separate modules and</span> <span data-start="1041.52" data-end="1044.889">finally a way to do this is to simply</span> <span data-start="1044.889" data-end="1047.649">write the overriding styles keep</span> <span data-start="1047.649" data-end="1050.38">standard button as it is and it's</span> <span data-start="1050.38" data-end="1052.69">already provided in our shared library</span> <span data-start="1052.69" data-end="1055.51">anyway and let every context just add</span> <span data-start="1055.51" data-end="1058.72">its own style but here now we need to</span> <span data-start="1058.72" data-end="1061.6">rely on the correct cascade order this</span> <span data-start="1061.6" data-end="1063.82">is in fact our preferred way to override</span> <span data-start="1063.82" data-end="1067.09">styles in Google+ and we have a syntax</span> <span data-start="1067.09" data-end="1069.97">for this such as provide and require</span> <span data-start="1069.97" data-end="1072.76">so if profile button needs to be ordered</span> <span data-start="1072.76" data-end="1076.299">f after the standard button all it has</span> <span data-start="1076.299" data-end="1079.86">to do is at require the standard button</span> <span data-start="1079.86" data-end="1083.38">so we essentially expanding the</span> <span data-start="1083.38" data-end="1085.929">semantics of at require to include</span> <span data-start="1085.929" data-end="1088.179">ordering now and we've considered some</span> <span data-start="1088.179" data-end="1090.25">alternatives here's like expressing this</span> <span data-start="1090.25" data-end="1092.08">ordering in JavaScript and templates and</span> <span data-start="1092.08" data-end="1094.96">this wasn't as pretty because first of</span> <span data-start="1094.96" data-end="1096.429">all they ever do it in both places and</span> <span data-start="1096.429" data-end="1099.19">now there is CSS ordering semantics in</span> <span data-start="1099.19" data-end="1102.76">templates and in JavaScript and we also</span> <span data-start="1102.76" data-end="1104.26">like the solution because it meets our</span> <span data-start="1104.26" data-end="1106.84">requirements we minimize selectors we</span> <span data-start="1106.84" data-end="1110.65">have rules of equal strength we still</span> <span data-start="1110.65" data-end="1112.809">haven't covered how to handle style</span> <span data-start="1112.809" data-end="1115.84">overrides for components yet so first of</span> <span data-start="1115.84" data-end="1118.33">all I want to demonstrate that using</span> <span data-start="1118.33" data-end="1121.26">components with a dependency graph</span> <span data-start="1121.26" data-end="1124.299">actually guarantees correct cascade</span> <span data-start="1124.299" data-end="1128.02">order as well so let's say I have many</span> <span data-start="1128.02" data-end="1130.39">widgets on my side and they both they</span> <span data-start="1130.39" data-end="1133.6">all want to use a common component like</span> <span data-start="1133.6" data-end="1138.429">an icon so this will basically map to</span> <span data-start="1138.429" data-end="1139.9">some dependency graph if we are using</span> <span data-start="1139.9" data-end="1143.83">component and the Styles would show up</span> <span data-start="1143.83" data-end="1147.25">in the graph and eventually we are going</span> <span data-start="1147.25" data-end="1149.02">to flatten this dependency graph into</span> <span data-start="1149.02" data-end="1153.4">the Cascade but we do we still preserve</span> <span data-start="1153.4" data-end="1156.309">the order so all the ordering the arrows</span> <span data-start="1156.309" data-end="1157.75">ever there in the previous graph are</span> <span data-start="1157.75" data-end="1161.559">preserved in this cascade and the</span> <span data-start="1161.559" data-end="1163.69">framework will now create the correct</span> <span data-start="1163.69" data-end="1168.07">cascade from this graph we still haven't</span> <span data-start="1168.07" data-end="1169.39">said exactly how we are overriding</span> <span data-start="1169.39" data-end="1172.72">styles though and well the two ways we</span> <span data-start="1172.72" data-end="1174.76">do this most often in our case are</span> <span data-start="1174.76" data-end="1176.77">either using additional classes or</span> <span data-start="1176.77" data-end="1181.69">descendant selectors if the component is</span> <span data-start="1181.69" data-end="1183.97">going to be mostly overridden in almost</span> <span data-start="1183.97" data-end="1186.159">every context it's used then it's better</span> <span data-start="1186.159" data-end="1189.73">well we think it's better to simply add</span> <span data-start="1189.73" data-end="1192.039">an additional class and this means that</span> <span data-start="1192.039" data-end="1194.23">the overriding context has to plumb the</span> <span data-start="1194.23" data-end="1196.03">additional class into the components</span> <span data-start="1196.03" data-end="1198.49">template and this is fine because it's</span> <span data-start="1198.49" data-end="1200.47">essentially exposing an API for the</span> <span data-start="1200.47" data-end="1203.83">override the other way we</span> <span data-start="1203.83" data-end="1206.94">do this is with descendant selectors and</span> <span data-start="1206.94" data-end="1209.23">with it and this is still fine because</span> <span data-start="1209.23" data-end="1212.049">we're not really tying this to some</span> <span data-start="1212.049" data-end="1215.049">predefined HTML structure per se we are</span> <span data-start="1215.049" data-end="1219.97">tying into a context so so far we've</span> <span data-start="1219.97" data-end="1222.399">covered the types of CSS dependencies in</span> <span data-start="1222.399" data-end="1225.49">our system and we've shown you the</span> <span data-start="1225.49" data-end="1227.5">syntax we use to express these</span> <span data-start="1227.5" data-end="1231.22">dependencies and we've shown you the oh</span> <span data-start="1231.22" data-end="1233.64">how to override it each category and</span> <span data-start="1233.64" data-end="1235.72">we've shown you what the keys are the</span> </p>
<p><span data-start="1235.72" data-end="1242.289">Cascade order so now we've covered all</span> <span data-start="1242.289" data-end="1245.769">our categories of depths and we</span> <span data-start="1245.769" data-end="1247.87">essentially have a complete CSS</span> <span data-start="1247.87" data-end="1250.059">dependency graph that includes all of</span> <span data-start="1250.059" data-end="1252.909">our shared styles and components forms</span> <span data-start="1252.909" data-end="1255.279">and colors and the Google common CSS</span> <span data-start="1255.279" data-end="1260.409">libraries etc so this covered our</span> <span data-start="1260.409" data-end="1263.47">dependency system we have namespaces we</span> <span data-start="1263.47" data-end="1266.139">have a way of expressing dependencies so</span> <span data-start="1266.139" data-end="1268.12">now we move on to our assembly and</span> <span data-start="1268.12" data-end="1271.45">serving system so I've already touched</span> <span data-start="1271.45" data-end="1275.23">on how modules get flat well how a</span> <span data-start="1275.23" data-end="1277.57">dependency graph gets flattened to a</span> <span data-start="1277.57" data-end="1281.649">cascade and here the only additional</span> <span data-start="1281.649" data-end="1285.039">thing is that we also identify modules</span> <span data-start="1285.039" data-end="1287.08">so you're identifying granular units of</span> <span data-start="1287.08" data-end="1291.549">modules in this graph and then you</span> <span data-start="1291.549" data-end="1294.789">compile the CSS to these modules and</span> <span data-start="1294.789" data-end="1298">then the modules get translated into a</span> <span data-start="1298" data-end="1305.139">cascade so a module is a CSS grouping</span> <span data-start="1305.139" data-end="1307.74">downloaded together and we always</span> <span data-start="1307.74" data-end="1310.269">download the dependencies for every</span> <span data-start="1310.269" data-end="1312.389">module the feed load on the browser and</span> <span data-start="1312.389" data-end="1315.49">this is analogous to our notion of jas</span> <span data-start="1315.49" data-end="1318.25">modules and so we are really trying to</span> <span data-start="1318.25" data-end="1321.1">sort of piggyback on the download system</span> <span data-start="1321.1" data-end="1324.75">that we already have for joyous modules</span> <span data-start="1324.75" data-end="1328.69">now for serving it pretty much works in</span> <span data-start="1328.69" data-end="1332.559">the way you would expect you have the</span> <span data-start="1332.559" data-end="1334.779">community page depends on the modules</span> <span data-start="1334.779" data-end="1337.49">for the share box and the posts and</span> <span data-start="1337.49" data-end="1339.19">when you where it wants to render those</span> <span data-start="1339.19" data-end="1342.41">those modules in turn will pull in all</span> <span data-start="1342.41" data-end="1344.57">the other modules that they depend on</span> <span data-start="1344.57" data-end="1347.54">and so this will include your buttons</span> <span data-start="1347.54" data-end="1351.5">and your comments widgets and your fonts</span> <span data-start="1351.5" data-end="1356.24">and common styles etc and then later on</span> <span data-start="1356.24" data-end="1359.8">when we visit the homepage we only</span> <span data-start="1359.8" data-end="1362.45">additionally download just the modules</span> <span data-start="1362.45" data-end="1364.19">needed for the homepage because we</span> <span data-start="1364.19" data-end="1368.39">already have everything else so the</span> <span data-start="1368.39" data-end="1370.76">important point with this download</span> <span data-start="1370.76" data-end="1374.24">system is that it also ensures safety so</span> <span data-start="1374.24" data-end="1376.88">we mentioned earlier how you know late</span> <span data-start="1376.88" data-end="1380.17">late the later page has the potential to</span> <span data-start="1380.17" data-end="1382.55">override the styles of a previous page</span> <span data-start="1382.55" data-end="1385.52">and but here we don't you already solve</span> <span data-start="1385.52" data-end="1387.77">this problem by doing all of this hard</span> <span data-start="1387.77" data-end="1389.679">work of creating this dependency graph</span> <span data-start="1389.679" data-end="1394.61">so now there is no question of home page</span> </p>
<p><span data-start="1394.61" data-end="1396.29">Styles overriding the community page</span> <span data-start="1396.29" data-end="1398.12">Styles because all of their common</span> <span data-start="1398.12" data-end="1399.62">dependencies have already been</span> <span data-start="1399.62" data-end="1405.5">downloaded so in summary the system is</span> <span data-start="1405.5" data-end="1407.33">solving both of our original problems</span> <span data-start="1407.33" data-end="1409.91">now we're solving the problem that we</span> <span data-start="1409.91" data-end="1411.62">are initial bundle is really big and</span> <span data-start="1411.62" data-end="1413.84">it's really slow and we have manually</span> <span data-start="1413.84" data-end="1416.78">curated CSS that can get reordered and</span> <span data-start="1416.78" data-end="1422.45">break our UI and these are some open</span> <span data-start="1422.45" data-end="1424.7">source resources we use close your style</span> <span data-start="1424.7" data-end="1427.01">sheets and this has our syntax for EDD</span> <span data-start="1427.01" data-end="1429.83">provide a net require and we use closure</span> <span data-start="1429.83" data-end="1431.57">templates which doesn't have our sin tax</span> <span data-start="1431.57" data-end="1433.97">would require CSS yet which will in the</span> <span data-start="1433.97" data-end="1446.33">future and that is all</span> <span data-start="1446.34" data-end="1455.6">you</span> </p>
</section>