<section>
<p><span data-start="0.18" data-end="11.269">[Music]</span> <span data-start="11.269" data-end="13.38">thank you so much for having me although</span> <span data-start="13.38" data-end="16.049">in Singapore this is my first time in</span> <span data-start="16.049" data-end="18.33">Singapore and my first time in Southeast</span> <span data-start="18.33" data-end="22.41">Asia so I'm kind of excited you have</span> <span data-start="22.41" data-end="25.619">like so many good plants it's it's</span> <span data-start="25.619" data-end="28.949">pretty it's I love it and wildlife is</span> <span data-start="28.949" data-end="30.929">pretty good I'm like used to Cody's and</span> <span data-start="30.929" data-end="33.09">little trash pandas in my backyard but</span> <span data-start="33.09" data-end="35.13">you have like lizards which is really</span> <span data-start="35.13" data-end="35.69">cool</span> <span data-start="35.69" data-end="40.41">yeah way better alright so I'm gonna</span> <span data-start="40.41" data-end="42.57">talk about storytelling and I'm gonna</span> <span data-start="42.57" data-end="45.719">talk about using performance observers</span> <span data-start="45.719" data-end="56.129">to do that so I'm arena hello</span> </p>
<p><span data-start="56.129" data-end="58.59">I am a developer you can find me on</span> <span data-start="58.59" data-end="61.469">github I do</span> <span data-start="61.469" data-end="63.84">code for work and sometimes I maintain a</span> <span data-start="63.84" data-end="65.79">few projects here and there write up a</span> <span data-start="65.79" data-end="67.26">few projects here in there in my spare</span> <span data-start="67.26" data-end="70.74">time but in other parts of my time I</span> <span data-start="70.74" data-end="76.17">like to draw and so sometimes I draw</span> <span data-start="76.17" data-end="78.27">like random stuff but sometimes I draw</span> <span data-start="78.27" data-end="81.18">what I like to call computer art so it's</span> <span data-start="81.18" data-end="82.65">like little guides that I've put</span> <span data-start="82.65" data-end="84.39">together on several things that are</span> <span data-start="84.39" data-end="86.25">interesting in the computer world like</span> <span data-start="86.25" data-end="88.59">things on streams or working with async</span> <span data-start="88.59" data-end="91.799">hooks or how v8 works and so today's</span> <span data-start="91.799" data-end="93.329">talk is gonna be a little bit like that</span> <span data-start="93.329" data-end="95.88">but in a talk format so I've tried to</span> <span data-start="95.88" data-end="97.92">like kind of build a narrative around</span> <span data-start="97.92" data-end="99.869">using performance observers and how we</span> <span data-start="99.869" data-end="102.96">can use those as narrative in our own</span> <span data-start="102.96" data-end="106.32">applications I also like ramen so</span> <span data-start="106.32" data-end="108.57">there's a few pictures of ramen I hope</span> <span data-start="108.57" data-end="110.79">you like ramen too ate a lot of ramen</span> </p>
<p><span data-start="110.79" data-end="114.149">I had like 11 bowls of ramen for the 13</span> <span data-start="114.149" data-end="116.399">days I was in Japan and December it was</span> <span data-start="116.399" data-end="117.27">pretty great</span> <span data-start="117.27" data-end="119.52">so hello storytelling performance</span> <span data-start="119.52" data-end="121.649">observers like I said we're gonna try to</span> <span data-start="121.649" data-end="123.39">build it a little bit of a narrative as</span> <span data-start="123.39" data-end="125.909">to how we can build out applications</span> <span data-start="125.909" data-end="128.489">know a little bit more about them as we</span> <span data-start="128.489" data-end="131.34">work in our enid process</span> <span data-start="131.34" data-end="134.94">so mostly I'll be talking about node but</span> <span data-start="134.94" data-end="136.65">there might be some kind of browser</span> <span data-start="136.65" data-end="141.27">references to that as well so why are we</span> <span data-start="141.27" data-end="144.3">even here like why why do we want to</span> <span data-start="144.3" data-end="146.28">kind of find out more about our</span> <span data-start="146.28" data-end="148.65">applications I think that comes down to</span> <span data-start="148.65" data-end="153">the fact that we like we need to have</span> <span data-start="153" data-end="154.769">more knowledge as to what's going on we</span> <span data-start="154.769" data-end="157.349">want to know or when a request comes in</span> <span data-start="157.349" data-end="159.33">and what happens after that and how long</span> <span data-start="159.33" data-end="161.819">does it take for us to look up a thing</span> <span data-start="161.819" data-end="163.47">in the database how long does it take us</span> <span data-start="163.47" data-end="166.65">to do I put in the database what's the</span> <span data-start="166.65" data-end="168.66">difference between writing to the</span> <span data-start="168.66" data-end="170.7">database versus writing to Redis and</span> <span data-start="170.7" data-end="173.79">these kinds of metrics we kind of we</span> <span data-start="173.79" data-end="174.989">kind of want to know it all and</span> <span data-start="174.989" data-end="178.19">sometimes it's hard in your processes</span> <span data-start="178.19" data-end="182.239">but we want to know the numbers anyway</span> <span data-start="182.239" data-end="184.53">and numbers are pretty important so</span> <span data-start="184.53" data-end="186.36">that's kind of the thing like we want to</span> <span data-start="186.36" data-end="188.64">know the numbers because numbers gets us</span> <span data-start="188.64" data-end="190.489">places and then we can either improve or</span> </p>
<p><span data-start="190.489" data-end="193.019">I don't know I don't know if we want to</span> <span data-start="193.019" data-end="195.57">not improve but or stay the same in</span> <span data-start="195.57" data-end="198.03">terms of how we build stuff out it's</span> <span data-start="198.03" data-end="200.34">numbers numbers are pretty important but</span> <span data-start="200.34" data-end="203.64">where numbers takes us is you know to</span> <span data-start="203.64" data-end="205.59">kind of keep on with us with a theme of</span> <span data-start="205.59" data-end="207.48">storytelling and having a narrative a</span> <span data-start="207.48" data-end="209.519">lot of the times what we'll do to get</span> <span data-start="209.519" data-end="211.14">some sort of story or some sort of</span> <span data-start="211.14" data-end="213.39">tracking in our applications as having</span> <span data-start="213.39" data-end="217.14">loggers so there's one like you know</span> <span data-start="217.14" data-end="219">there is a pinot logger that gets just a</span> <span data-start="219" data-end="220.44">little bit of information about what</span> <span data-start="220.44" data-end="222.63">happens in our application we put that</span> <span data-start="222.63" data-end="225.15">together with our server and we get some</span> <span data-start="225.15" data-end="228.389">data out so we can see how long like how</span> <span data-start="228.389" data-end="231.359">long something takes can probably get a</span> <span data-start="231.359" data-end="233.579">little bit more from the process ID and</span> <span data-start="233.579" data-end="235.41">we kind of can use that information to</span> <span data-start="235.41" data-end="237.51">our advantage and kind of build out that</span> <span data-start="237.51" data-end="240.269">narrative so loggers loggers are great</span> <span data-start="240.269" data-end="243.18">but we wanted to kind of go from numbers</span> <span data-start="243.18" data-end="245.37">and we want to be able to track some</span> <span data-start="245.37" data-end="247.47">sort of information from there right we</span> <span data-start="247.47" data-end="249.03">don't want to just have numbers that are</span> <span data-start="249.03" data-end="251.01">unrelated to each other so we want to go</span> <span data-start="251.01" data-end="253.35">from numbers to tracking and eventually</span> <span data-start="253.35" data-end="255.9">maybe go to something like tracing to be</span> <span data-start="255.9" data-end="259.53">able to actually build a proper</span> <span data-start="259.53" data-end="261.34">narrative about our</span> <span data-start="261.34" data-end="271.65">so tracing wood is tracing strange I</span> <span data-start="271.65" data-end="273.849">wasn't listening to Bobby when I was</span> <span data-start="273.849" data-end="277.24">putting this together but I don't know</span> <span data-start="277.24" data-end="280.479">just kinda came to mind so open tracing</span> </p>
<p><span data-start="280.479" data-end="283.599">IO is a pretty good source or pretty</span> <span data-start="283.599" data-end="286.389">good kind of metric or sorry not we're</span> <span data-start="286.389" data-end="288.039">talking the word I'm looking for a</span> <span data-start="288.039" data-end="290.02">standard so they've put together kind of</span> <span data-start="290.02" data-end="292.09">a thing about what tracing does so</span> <span data-start="292.09" data-end="293.5">tracing tells you a story of a</span> <span data-start="293.5" data-end="295.12">transaction so tracing is a lot about</span> <span data-start="295.12" data-end="297.219">what a workflow does and what a</span> <span data-start="297.219" data-end="300.009">transaction does in your system and you</span> <span data-start="300.009" data-end="301.569">want to be able to kind of propagate it</span> <span data-start="301.569" data-end="304.15">through a system and see what it is that</span> <span data-start="304.15" data-end="306.729">you come up with so eventually you</span> <span data-start="306.729" data-end="308.65">basically have like a single parent and</span> <span data-start="308.65" data-end="311.74">a single parent has a bunch of children</span> <span data-start="311.74" data-end="313.33">that it spins up like different</span> <span data-start="313.33" data-end="315.069">processes that start off with a single</span> <span data-start="315.069" data-end="317.56">parent those children can have other</span> <span data-start="317.56" data-end="319.839">children and so eventually you kind of</span> <span data-start="319.839" data-end="321.729">build out this tree so the way to think</span> <span data-start="321.729" data-end="325">about it is that for example you have a</span> <span data-start="325" data-end="330.189">play in four parts the play itself is a</span> <span data-start="330.189" data-end="332.289">trace or parent and then the four parts</span> <span data-start="332.289" data-end="334.81">are like the spans and like the acts in</span> <span data-start="334.81" data-end="337.659">the four parts or the spans spans and</span> <span data-start="337.659" data-end="339.069">things like that so it's kind of like</span> <span data-start="339.069" data-end="342.759">your story but in a more technical point</span> <span data-start="342.759" data-end="345.729">of view and so like I said before a</span> <span data-start="345.729" data-end="349">trace is a trace is useful to put</span> <span data-start="349" data-end="352.229">together transaction right so a</span> <span data-start="352.229" data-end="354.58">transaction is something like a request</span> <span data-start="354.58" data-end="356.649">so putting together a history of a</span> <span data-start="356.649" data-end="359.589">request will build a trace of the said</span> <span data-start="359.589" data-end="361.75">request so if we were to look at</span> <span data-start="361.75" data-end="363.819">something like this we are then able to</span> <span data-start="363.819" data-end="366.069">say that okay our entire trace is this</span> <span data-start="366.069" data-end="368.56">and then it soul spans is an actual post</span> <span data-start="368.56" data-end="371.229">request and then from that post request</span> <span data-start="371.229" data-end="374.169">we went to authenticate the user we went</span> <span data-start="374.169" data-end="376.389">to from that post request get the data</span> <span data-start="376.389" data-end="379.479">save it to Redis but we also wanted to</span> <span data-start="379.479" data-end="381.099">save it to the database so these are the</span> <span data-start="381.099" data-end="383.229">two spans that can work at the same time</span> <span data-start="383.229" data-end="386.199">and then part of that is we want to send</span> <span data-start="386.199" data-end="387.789">back some sort of message to the user</span> <span data-start="387.789" data-end="390.069">and so that entire thing makes up the</span> <span data-start="390.069" data-end="391.779">trace and these different transactions</span> <span data-start="391.779" data-end="395.08">kind of put together in there</span> <span data-start="395.08" data-end="398.96">and so that I talked about tracing but</span> <span data-start="398.96" data-end="402.68">then I want to like go back to the</span> <span data-start="402.68" data-end="404.27">performance timeline and the performance</span> </p>
<p><span data-start="404.27" data-end="407.12">API so it's interesting to know the</span> <span data-start="407.12" data-end="408.68">narrative and tracing kind of helps us</span> <span data-start="408.68" data-end="411.259">build that narrative about what it is</span> <span data-start="411.259" data-end="413.24">that's going on but I wanted to look</span> <span data-start="413.24" data-end="415.249">into the performance timeline and the</span> <span data-start="415.249" data-end="417.499">performance API and see what kind of</span> <span data-start="417.499" data-end="420.879">information I can get from using that</span> <span data-start="420.879" data-end="424.93">kind of thing so what happened is that</span> <span data-start="424.93" data-end="427.159">performance timeline kind of got put</span> <span data-start="427.159" data-end="430.789">together by the w3c and that's what got</span> <span data-start="430.789" data-end="435.55">implemented in both the browser and node</span> <span data-start="435.55" data-end="439.189">so window dot performance if most</span> <span data-start="439.189" data-end="441.08">browsers now support this you're able to</span> <span data-start="441.08" data-end="445.039">kind of get whatever the information you</span> <span data-start="445.039" data-end="447.259">need on timing and navigation in window</span> <span data-start="447.259" data-end="449.719">performance the equivalent to that is</span> <span data-start="449.719" data-end="454.009">require perfect and note in node greater</span> <span data-start="454.009" data-end="456.589">than 8.5 so then you're kind of getting</span> <span data-start="456.589" data-end="458.599">the same thing by requiring per folks</span> <span data-start="458.599" data-end="461.33">and having the performance object there</span> <span data-start="461.33" data-end="463.25">are so also timings and node origin and</span> <span data-start="463.25" data-end="469.039">that's kind of thing so per folks or is</span> <span data-start="469.039" data-end="471.74">is the establishment of what an</span> <span data-start="471.74" data-end="473.419">application timeline is so what is an</span> <span data-start="473.419" data-end="476.779">application timeline so essentially it</span> <span data-start="476.779" data-end="479.539">is a timeline so a request or a trace of</span> <span data-start="479.539" data-end="480.979">their quests like we talked to you we're</span> <span data-start="480.979" data-end="483.11">talking about the trace so kind of the</span> <span data-start="483.11" data-end="484.849">same thing request you start off with</span> <span data-start="484.849" data-end="485.99">that and the things that happened</span> <span data-start="485.99" data-end="487.31">throughout that and the things you can</span> <span data-start="487.31" data-end="490.21">measure go together in an application</span> <span data-start="490.21" data-end="495.169">timeline so in a case of browser you're</span> <span data-start="495.169" data-end="496.789">kind of looking at a few different</span> <span data-start="496.789" data-end="498.74">things you're looking at when they're</span> <span data-start="498.74" data-end="500.539">reserved loads you're looking at a pain</span> <span data-start="500.539" data-end="502.49">time you might be looking at the</span> <span data-start="502.49" data-end="504.68">navigation so these are the kinds of</span> <span data-start="504.68" data-end="506.149">things that go inside the performance</span> <span data-start="506.149" data-end="507.889">timeline</span> <span data-start="507.889" data-end="510.259">so let's actually dig a little bit</span> <span data-start="510.259" data-end="512.24">deeper so require perfect let's look</span> <span data-start="512.24" data-end="515.57">into it so we're able to get a few</span> <span data-start="515.57" data-end="519.07">things from performed dot performance</span> <span data-start="519.07" data-end="521.57">per folks and</span> <span data-start="521.57" data-end="523.46">the access to mark and measure so what</span> <span data-start="523.46" data-end="525.5">are these mark and measure things well</span> <span data-start="525.5" data-end="527.09">the easiest way to go about it was</span> <span data-start="527.09" data-end="529.13">actually like digging through the API</span> <span data-start="529.13" data-end="532.31">so when you want to get something to be</span> <span data-start="532.31" data-end="534.05">marked or measured within your</span> <span data-start="534.05" data-end="538.13">performance timeline you basically want</span> <span data-start="538.13" data-end="539.96">to find out how long something takes to</span> <span data-start="539.96" data-end="542.53">load or how long's a process takes to</span> <span data-start="542.53" data-end="545.21">run or like if you're running a loop</span> <span data-start="545.21" data-end="546.8">like how long does it take you to get</span> <span data-start="546.8" data-end="548.33">through the entire look kind of thing so</span> <span data-start="548.33" data-end="552.65">what you'll start off with is you mark a</span> <span data-start="552.65" data-end="556.22">start point in your timeline or and in</span> <span data-start="556.22" data-end="557.69">your application you mark an end point</span> <span data-start="557.69" data-end="560.21">in your application and then you are</span> <span data-start="560.21" data-end="562.46">able to run a doc measure on it and see</span> <span data-start="562.46" data-end="565">how long that piece of code takes to run</span> <span data-start="565" data-end="567.98">you're then able to get entries from it</span> <span data-start="567.98" data-end="570.92">and seeing what exactly that particular</span> <span data-start="570.92" data-end="573.65">entry looks like it's start time its</span> <span data-start="573.65" data-end="578.12">duration what type it is is it and then</span> <span data-start="578.12" data-end="581.3">afterwards you've got to clear it like</span> <span data-start="581.3" data-end="583.88">erase it all together so it's not part</span> <span data-start="583.88" data-end="586.79">of your timeline anymore so what it</span> <span data-start="586.79" data-end="590">looks like code wise is like this so for</span> <span data-start="590" data-end="592.04">example we have a simple post request</span> <span data-start="592.04" data-end="595.55">that we're trying to make we're pressing</span> <span data-start="595.55" data-end="596.99">the data or we're writing into the</span> <span data-start="596.99" data-end="599.18">database and then what we want to do is</span> <span data-start="599.18" data-end="600.86">we want to set a mark in the beginning</span> <span data-start="600.86" data-end="602.81">of that pork's request just to see how</span> <span data-start="602.81" data-end="605.18">long the the put actually takes how long</span> <span data-start="605.18" data-end="607.18">does it take us to spit the data back up</span> <span data-start="607.18" data-end="610.58">to your client what you're then able to</span> <span data-start="610.58" data-end="615.2">do is mark an end within that put and</span> <span data-start="615.2" data-end="618.02">you are then able to measure it out from</span> <span data-start="618.02" data-end="618.8">start to end</span> <span data-start="618.8" data-end="622.19">so something like this and then once</span> <span data-start="622.19" data-end="624.86">you're able to get the entries of that</span> <span data-start="624.86" data-end="628.19">particular start to end measurement out</span> <span data-start="628.19" data-end="630.89">you're able to print it off and see how</span> <span data-start="630.89" data-end="634.25">long something like that take so this is</span> <span data-start="634.25" data-end="637.58">an example that I wrote making a raman</span> <span data-start="637.58" data-end="639.89">database for myself so I can know all</span> <span data-start="639.89" data-end="641.36">the good ramen shops and remember them</span> <span data-start="641.36" data-end="642.98">because at this point I went to too many</span> <span data-start="642.98" data-end="645.89">and I don't remember so I heard Keisuke</span> <span data-start="645.89" data-end="647.81">is good in Singapore somebody tell me</span> <span data-start="647.81" data-end="649.1">otherwise or like tell me a different</span> <span data-start="649.1" data-end="652.16">one so you get the performance entry out</span> <span data-start="652.16" data-end="654.3">and it's got the</span> <span data-start="654.3" data-end="656.58">the entry type start time and the</span> <span data-start="656.58" data-end="658.65">duration so able to work with that and</span> <span data-start="658.65" data-end="660.27">see how long something like that takes</span> <span data-start="660.27" data-end="664.59">cool and this is again like to zoom in</span> <span data-start="664.59" data-end="666.3">this is what the entry object looks like</span> <span data-start="666.3" data-end="669.54">name entry type start time and how long</span> <span data-start="669.54" data-end="671.64">it actually takes really useful for</span> <span data-start="671.64" data-end="673.59">debugging</span> <span data-start="673.59" data-end="675.27">so let's actually zoom in into that</span> <span data-start="675.27" data-end="677.34">performance entry so we started off by</span> <span data-start="677.34" data-end="681.63">saying we have a time line we have</span> <span data-start="681.63" data-end="683.43">certain entries inside that time line</span> <span data-start="683.43" data-end="686.34">certain things that need to load but</span> <span data-start="686.34" data-end="688.29">let's look at the performance buffer so</span> <span data-start="688.29" data-end="690.33">performance buffer is where we put all</span> <span data-start="690.33" data-end="692.4">of the entries in so every time we do a</span> <span data-start="692.4" data-end="695.16">mark like we did an example and know</span> <span data-start="695.16" data-end="696.18">what every time there's a garbage</span> <span data-start="696.18" data-end="698.64">collection entry or a function entry or</span> <span data-start="698.64" data-end="700.89">a note entry these kinds of things they</span> <span data-start="700.89" data-end="704.25">all go into the performance buffer so</span> <span data-start="704.25" data-end="706.5">there is like a used up space and unused</span> <span data-start="706.5" data-end="712.95">up space which means there and the thing</span> <span data-start="712.95" data-end="714.78">about the the buffer itself is that</span> <span data-start="714.78" data-end="717.06">there's only 150 entries you can have in</span> <span data-start="717.06" data-end="718.56">there which means you've got to clear</span> <span data-start="718.56" data-end="720.57">them so when I was mentioning previously</span> <span data-start="720.57" data-end="722.49">like we've got a clear at the end of the</span> <span data-start="722.49" data-end="724.35">the mark and the measure it's because</span> <span data-start="724.35" data-end="725.85">the buffer fills up and then we get</span> <span data-start="725.85" data-end="727.98">memory leaks so you kind of want to make</span> <span data-start="727.98" data-end="730.46">sure the buffer is consistently cleared</span> <span data-start="730.46" data-end="733.05">and so there's a few different types of</span> <span data-start="733.05" data-end="735.78">them note has different ones in the</span> <span data-start="735.78" data-end="737.46">browser so I'm gonna do the comparison</span> <span data-start="737.46" data-end="742.04">here so node has mark and measure node</span> <span data-start="742.04" data-end="745.08">garbage collection function 8 and http2</span> <span data-start="745.08" data-end="748.08">for now maybe there will be more once a</span> <span data-start="748.08" data-end="749.55">few more pull requests come in kind of</span> <span data-start="749.55" data-end="752.55">thing and the browser also does the</span> <span data-start="752.55" data-end="754.02">paint events and the frames and</span> <span data-start="754.02" data-end="757.71">navigation and resources cool but like I</span> <span data-start="757.71" data-end="760.79">said previously we this buffer only has</span> <span data-start="760.79" data-end="762.99">150 entries so we've got to be able to</span> <span data-start="762.99" data-end="764.64">clear it as we go</span> <span data-start="764.64" data-end="767.82">so you clear that by just calling duck</span> <span data-start="767.82" data-end="772.14">clear and to like give you an example of</span> <span data-start="772.14" data-end="774.87">what it looks like it's just clear marks</span> <span data-start="774.87" data-end="776.85">and clear measures and clear functions</span> <span data-start="776.85" data-end="781.11">are the ones that are present in node so</span> <span data-start="781.11" data-end="782.88">if we were to clear it and then call</span> <span data-start="782.88" data-end="785.5">measure again</span> <span data-start="785.5" data-end="794.08">we'll get will basically throw cool so</span> <span data-start="794.08" data-end="798.76">you clear it clearly buffer there but</span> <span data-start="798.76" data-end="800.23">the thing about this is like okay we're</span> <span data-start="800.23" data-end="802.81">kind of marking these as we go along as</span> <span data-start="802.81" data-end="805.27">we're debugging the application or we're</span> <span data-start="805.27" data-end="807.31">trying to establish like some</span> <span data-start="807.31" data-end="809.08">differences between writing toyotas and</span> <span data-start="809.08" data-end="811.779">writing to the database for example but</span> <span data-start="811.779" data-end="813.37">we need to be able to keep track of</span> <span data-start="813.37" data-end="816.67">these so a good way to look at this is</span> <span data-start="816.67" data-end="819.85">using the performance observers so what</span> <span data-start="819.85" data-end="821.62">our performance observers what are we</span> <span data-start="821.62" data-end="824.47">observing really so a performance</span> <span data-start="824.47" data-end="826.87">observer is just an instance that takes</span> <span data-start="826.87" data-end="829.66">a callback that works with the list of</span> <span data-start="829.66" data-end="831.37">the performance entries so the ones we</span> <span data-start="831.37" data-end="834.04">talked about previously and the observer</span> <span data-start="834.04" data-end="836.62">object so essentially in your</span> <span data-start="836.62" data-end="838.66">application you go through certain</span> <span data-start="838.66" data-end="840.31">entries so like the marks and the</span> <span data-start="840.31" data-end="842.26">measures that we were doing in the above</span> <span data-start="842.26" data-end="845.65">example and some stuff that note gives</span> <span data-start="845.65" data-end="847.57">you as is like garbage collection events</span> <span data-start="847.57" data-end="849.31">obviously you don't specifically mark</span> <span data-start="849.31" data-end="852.9">them and all those entries go into the</span> <span data-start="852.9" data-end="856.42">their observers list so all of them just</span> <span data-start="856.42" data-end="857.98">kind of keep on piling up in there and</span> <span data-start="857.98" data-end="859.15">then what you're able to do with that</span> <span data-start="859.15" data-end="860.83">list is actually get some information</span> <span data-start="860.83" data-end="863.65">out of there so a good example of that</span> <span data-start="863.65" data-end="869.32">is so this is how you would set it up</span> <span data-start="869.32" data-end="871.839">right like have a few entry types you</span> <span data-start="871.839" data-end="873.43">want to monitor and you want to your</span> <span data-start="873.43" data-end="875.95">observe it to work with function measure</span> </p>
<p><span data-start="875.95" data-end="879.279">I kind of just put them all together and</span> <span data-start="879.279" data-end="882.18">then what you do is say okay I'm gonna</span> <span data-start="882.18" data-end="884.529">buffer them as well so that they all</span> <span data-start="884.529" data-end="889.93">come in like a sync and then once I</span> <span data-start="889.93" data-end="892.57">launch my application I get the garbage</span> <span data-start="892.57" data-end="894.91">collection events and then the ones that</span> <span data-start="894.91" data-end="896.98">I've marked previously to kind of get</span> <span data-start="896.98" data-end="902.86">there and I'm actually probably just</span> <span data-start="902.86" data-end="903.88">going to show you what I did because</span> <span data-start="903.88" data-end="907.89">that code sample was kind of small</span> <span data-start="907.9" data-end="910.839">all right how's the font size on that</span> <span data-start="910.839" data-end="917.68">okay all right so I worked with the</span> <span data-start="917.68" data-end="920.98">entry types and then what my what my</span> <span data-start="920.98" data-end="922.93">server did so I just set up like a basic</span> <span data-start="922.93" data-end="925.57">server what I set up in my server is I</span> <span data-start="925.57" data-end="930.46">marked a few events so one here and then</span> </p>
<p><span data-start="930.46" data-end="933.01">I just put one in a loop so it like runs</span> <span data-start="933.01" data-end="935.44">through and afterwards are clear the</span> <span data-start="935.44" data-end="938.95">marks and what my handler dars is just</span> <span data-start="938.95" data-end="944.16">it looks at the entries that come back</span> <span data-start="944.16" data-end="948.16">so then if we were to launch the server</span> <span data-start="948.16" data-end="950.08">we'll get the to garbage collection</span> <span data-start="950.08" data-end="952.66">events and then we'll get the actual</span> <span data-start="952.66" data-end="955.18">marks that we are watching for they'll</span> <span data-start="955.18" data-end="957.13">come back and is like nice list that you</span> <span data-start="957.13" data-end="959.08">can then work with and log out and maybe</span> <span data-start="959.08" data-end="963.58">do some more information with it now I</span> <span data-start="963.58" data-end="970.96">wanted to I just switched to team acts</span> <span data-start="970.96" data-end="973.66">so I'm like my fingers are used to my</span> <span data-start="973.66" data-end="975.4">previous bindings and I keep pressing</span> <span data-start="975.4" data-end="976.9">the previous bindings and they don't</span> <span data-start="976.9" data-end="981.459">work muscle-memory am i right so I'm</span> <span data-start="981.459" data-end="983.38">gonna run start and then I'm just gonna</span> <span data-start="983.38" data-end="992.86">curl because oh no this wasn't even like</span> <span data-start="992.86" data-end="996.76">a demo demo I'm already sucking at this</span> <span data-start="996.76" data-end="999.79">so I'm gonna actually run a node example</span> <span data-start="999.79" data-end="1002.88">yes cuz that was a different thing so I</span> <span data-start="1002.88" data-end="1005.52">get the two performance entries for the</span> <span data-start="1005.52" data-end="1009.51">garbage collection to do two and then</span> </p>
<p><span data-start="1009.51" data-end="1014.12">I'm gonna run the nice little soft serve</span> <span data-start="1014.12" data-end="1019.86">on a tea and then I get all the other</span> <span data-start="1019.86" data-end="1024.689">marks that I've put in there cool so we</span> <span data-start="1024.689" data-end="1026.429">get these like objects all in one</span> <span data-start="1026.429" data-end="1028.319">convenient spot and we can monitor them</span> <span data-start="1028.319" data-end="1030.03">through the performance observer in our</span> <span data-start="1030.03" data-end="1035.49">applications which is great</span> <span data-start="1035.5" data-end="1039.28">so there's I just like these two modules</span> <span data-start="1039.28" data-end="1042.64">I wanted to introduce you to so they</span> <span data-start="1042.64" data-end="1044.799">used to only have because the</span> <span data-start="1044.799" data-end="1048.22">performance API is available in both the</span> <span data-start="1048.22" data-end="1050.47">browser and the server these two worked</span> <span data-start="1050.47" data-end="1053.5">with just the browser's api's and I just</span> <span data-start="1053.5" data-end="1055.99">patched them so they both no work would</span> <span data-start="1055.99" data-end="1057.49">note and make it a little bit easier so</span> <span data-start="1057.49" data-end="1059.23">instead of you having to set up the</span> <span data-start="1059.23" data-end="1061.299">entire observer kind of just on</span> <span data-start="1061.299" data-end="1063.61">performance just observing for you and I</span> <span data-start="1063.61" data-end="1065.38">know timing handles the timing entries</span> <span data-start="1065.38" data-end="1066.85">which were the first things we talked</span> <span data-start="1066.85" data-end="1069.85">about so it's kind of easy to get to</span> <span data-start="1069.85" data-end="1071.5">work with that and then once you're able</span> <span data-start="1071.5" data-end="1075.059">to use those or just observers</span> <span data-start="1075.059" data-end="1077.74">performance observer API or at the mark</span> <span data-start="1077.74" data-end="1079.72">and measure it kind of can just put them</span> <span data-start="1079.72" data-end="1081.94">into like any application node</span> <span data-start="1081.94" data-end="1083.289">application you want like you can work</span> <span data-start="1083.289" data-end="1086.559">make it work with FASTA Phi or like the</span> <span data-start="1086.559" data-end="1090.039">one I work on is Mary but either/or like</span> <span data-start="1090.039" data-end="1091.45">you can just put that in your</span> <span data-start="1091.45" data-end="1094.15">application and kind of start seeing how</span> <span data-start="1094.15" data-end="1097.87">you can work with those but kind of the</span> <span data-start="1097.87" data-end="1099.46">things I wanted to talk about is that</span> <span data-start="1099.46" data-end="1100.96">okay so I was playing around with these</span> <span data-start="1100.96" data-end="1103.83">and I wanted to do quite a bit of like</span> <span data-start="1103.83" data-end="1107.11">storytelling with performance observers</span> <span data-start="1107.11" data-end="1109.39">but what I ended up finding out is that</span> <span data-start="1109.39" data-end="1113.289">it's mark and measure super useful to be</span> <span data-start="1113.289" data-end="1115.6">able to figure out like how long</span> <span data-start="1115.6" data-end="1117.7">something takes in your application and</span> <span data-start="1117.7" data-end="1119.11">it's useful for debugging like</span> <span data-start="1119.11" data-end="1122.08">development purposes but it doesn't</span> <span data-start="1122.08" data-end="1124.059">actually build like a narrative property</span> <span data-start="1124.059" data-end="1126.52">properly because you're not able to kind</span> <span data-start="1126.52" data-end="1128.919">of put anything together and you want to</span> <span data-start="1128.919" data-end="1131.59">be able to have a story and you want to</span> <span data-start="1131.59" data-end="1133.39">be able to put a trace together and you</span> <span data-start="1133.39" data-end="1137.08">want to be able to kind of chain things</span> <span data-start="1137.08" data-end="1138.429">and that's a little bit harder with</span> <span data-start="1138.429" data-end="1140.14">observables so I found that it's like</span> <span data-start="1140.14" data-end="1143.08">it's definitely a development thing and</span> <span data-start="1143.08" data-end="1144.429">development environment thing to be able</span> <span data-start="1144.429" data-end="1147.19">to kind of predict that before you</span> <span data-start="1147.19" data-end="1149.409">deploy to production kind of thing so</span> <span data-start="1149.409" data-end="1151.9">building narrative is hard but the thing</span> <span data-start="1151.9" data-end="1154.059">that I found is that okay so I want to</span> <span data-start="1154.059" data-end="1156.909">be able to build narrative and the API</span> <span data-start="1156.909" data-end="1160.15">that I like for that is actually async</span> <span data-start="1160.15" data-end="1161.98">hooks and this talk was not meant to be</span> <span data-start="1161.98" data-end="1163.54">about acing hoops but I wanted to</span> <span data-start="1163.54" data-end="1165.79">briefly mention them as well so with</span> <span data-start="1165.79" data-end="1166.85">that with async Oh</span> <span data-start="1166.85" data-end="1168.8">so I think I'm able to build an actual</span> <span data-start="1168.8" data-end="1172.79">proper kind of trackable narrative that</span> </p>
<p><span data-start="1172.79" data-end="1174.65">I want to be able to see in my</span> <span data-start="1174.65" data-end="1177.83">application code and because performance</span> <span data-start="1177.83" data-end="1181.52">observers kind of add and performance</span> <span data-start="1181.52" data-end="1183.8">api adds a bit of an overhead in your</span> <span data-start="1183.8" data-end="1186.92">application async Oaks are much less so</span> <span data-start="1186.92" data-end="1188.96">and plus they add a little bit of a</span> <span data-start="1188.96" data-end="1190.73">narrative to it so you gotta kind of</span> <span data-start="1190.73" data-end="1193.37">balance those out as to what what is you</span> <span data-start="1193.37" data-end="1194.93">gotta cost it out like as to what you</span> <span data-start="1194.93" data-end="1197.96">want but like I said I didn't want this</span> <span data-start="1197.96" data-end="1200.69">talk to be on ASA cook so I just briefly</span> <span data-start="1200.69" data-end="1203">mentioning them and there's like a talk</span> <span data-start="1203" data-end="1205.1">that Thurston Lawrence did add note</span> <span data-start="1205.1" data-end="1207.05">convey about them he's done a bunch of</span> <span data-start="1207.05" data-end="1208.64">work with them and it's like really good</span> <span data-start="1208.64" data-end="1211.61">and I also wrote a little guide for them</span> <span data-start="1211.61" data-end="1214.03">as well if you want to look into that</span> <span data-start="1214.03" data-end="1217.25">and there's like a module that actually</span> <span data-start="1217.25" data-end="1219.14">helps you create traceable events that</span> <span data-start="1219.14" data-end="1221.81">you can specifically Rison to and build</span> <span data-start="1221.81" data-end="1227.54">a better narrative so kind of wrapping</span> <span data-start="1227.54" data-end="1228.95">up as to what we talked about so we</span> <span data-start="1228.95" data-end="1230.93">talked about the performance timeline we</span> <span data-start="1230.93" data-end="1234.17">talked about being able to look at the</span> <span data-start="1234.17" data-end="1235.64">timeline and see kind of what</span> <span data-start="1235.64" data-end="1239.81">performance entries we can look at and</span> <span data-start="1239.81" data-end="1241.79">what kind of useful information we can</span> <span data-start="1241.79" data-end="1246.53">derive from them so that we also talked</span> <span data-start="1246.53" data-end="1249.53">about the specific mark and measure and</span> <span data-start="1249.53" data-end="1251.81">using those to be able to debug certain</span> <span data-start="1251.81" data-end="1254.18">parts of our application and work with</span> <span data-start="1254.18" data-end="1257.12">those parts of our applications and we</span> <span data-start="1257.12" data-end="1259.31">also talked about the fact that once we</span> <span data-start="1259.31" data-end="1261.86">were able to get all of our entries in</span> <span data-start="1261.86" data-end="1264.01">one place we're able to see and compare</span> <span data-start="1264.01" data-end="1267.26">what exactly that they do in our</span> <span data-start="1267.26" data-end="1268.79">application using the performance</span> <span data-start="1268.79" data-end="1275.21">observer portion of the API yeah so that</span> <span data-start="1275.21" data-end="1277.4">was the talk I wanted to give I am</span> <span data-start="1277.4" data-end="1280.13">really happy that you're able to have me</span> </p>
<p><span data-start="1280.13" data-end="1282.23">I hope you enjoyed it and if you have</span> <span data-start="1282.23" data-end="1286.04">any more questions come say hi on</span> <span data-start="1286.04" data-end="1290.52">Twitter or just come say hi</span> </p>
</section>