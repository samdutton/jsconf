<section>
<p><span data-start="14.48" data-end="17.94">hi and welcome back from lunch am I too</span> <span data-start="17.94" data-end="23.789">loud yes no alright so let's talk about</span> <span data-start="23.789" data-end="27.33">how we build messenger calm and if you</span> <span data-start="27.33" data-end="30.029">don't know messengers calm is a full</span> <span data-start="30.029" data-end="33.12">page react application on which you can</span> <span data-start="33.12" data-end="35.46">send and receive facebook messenger</span> <span data-start="35.46" data-end="39.149">messages um why would we build such a</span> <span data-start="39.149" data-end="40.59">thing when you already have chat on</span> <span data-start="40.59" data-end="42.989">facebook well when we launched it we</span> <span data-start="42.989" data-end="44.25">gave all the reasons in the press</span> <span data-start="44.25" data-end="47.28">release and they're so true something</span> <span data-start="47.28" data-end="49.98">nice happen is a side effect a lot of</span> <span data-start="49.98" data-end="51.78">corporations for instance block access</span> <span data-start="51.78" data-end="54.57">to facebook on their corporate networks</span> <span data-start="54.57" data-end="55.649">because they want people to be</span> <span data-start="55.649" data-end="59.399">productive but they don't block access</span> <span data-start="59.399" data-end="61.5">to messenger calm at least not yet so</span> <span data-start="61.5" data-end="64.739">there's that but also we thought it</span> <span data-start="64.739" data-end="67.68">would be very cool to build and how do I</span> <span data-start="67.68" data-end="70.979">get to work on it I was just lucky I i</span> <span data-start="70.979" data-end="73.14">joined facebook right about the time it</span> <span data-start="73.14" data-end="76.009">was started and the web messages team</span> <span data-start="76.009" data-end="78.33">pitched the project i liked it and i</span> <span data-start="78.33" data-end="81.75">joined and I never looked back before we</span> <span data-start="81.75" data-end="84.299">get into actual messenger com I want to</span> <span data-start="84.299" data-end="86.13">take them over and talk about how we</span> <span data-start="86.13" data-end="88.86">front in that facebook and I think it's</span> <span data-start="88.86" data-end="90.57">time we use front-end as a verb it's</span> <span data-start="90.57" data-end="94.14">hard to talk otherwise but as most</span> <span data-start="94.14" data-end="98.369">companies do we use modules small</span> <span data-start="98.369" data-end="100.2">components this is the thing that makes</span> <span data-start="100.2" data-end="102.63">sense everyone knows everyone agrees I</span> <span data-start="102.63" data-end="105.75">think how we make modules is the same as</span> <span data-start="105.75" data-end="107.79">everyone else we will define one just</span> <span data-start="107.79" data-end="110.46">messenger foo it lives in the file that</span> <span data-start="110.46" data-end="113.04">has the same name messenger foo we just</span> <span data-start="113.04" data-end="115.35">add this doc block to the beginning of</span> <span data-start="115.35" data-end="119.549">the CSS file and ready to get started we</span> <span data-start="119.549" data-end="121.38">had our rules but we have a special kind</span> <span data-start="121.38" data-end="124.32">of syntax as you can see we use the name</span> <span data-start="124.32" data-end="126.149">of the module and a slash and then the</span> <span data-start="126.149" data-end="128.819">actual rule name this makes it very easy</span> <span data-start="128.819" data-end="131.22">to whenever you look at the class name</span> <span data-start="131.22" data-end="133.47">to know what it belongs to</span> <span data-start="133.47" data-end="136.73">and we have it so that you can only use</span> <span data-start="136.73" data-end="139.86">rules and class names that belong to</span> <span data-start="139.86" data-end="141.6">this module over here so if we try to</span> <span data-start="141.6" data-end="144.51">use messenger bar this will be a lint</span> <span data-start="144.51" data-end="146.25">error why would you want to change</span> <span data-start="146.25" data-end="149.13">messenger bar rules from with a</span> <span data-start="149.13" data-end="152.28">messenger foo we do this for</span> <span data-start="152.28" data-end="153.66">encapsulation purposes and to try to</span> <span data-start="153.66" data-end="156.35">make our CSS components small and very</span> <span data-start="156.35" data-end="159.15">focus on one thing so we can compose</span> <span data-start="159.15" data-end="161.85">multiple if we need to however sometimes</span> <span data-start="161.85" data-end="163.23">you do need to style something from</span> <span data-start="163.23" data-end="164.64">another component so we have a thing</span> <span data-start="164.64" data-end="167.67">called public classes we just define</span> <span data-start="167.67" data-end="169.62">them in a way that you can use in a</span> <span data-start="169.62" data-end="171.45">different module because sometimes you</span> <span data-start="171.45" data-end="172.77">do need to style things differently</span> <span data-start="172.77" data-end="175.26">depending on how you can post things but</span> <span data-start="175.26" data-end="177.84">this will really make a lot of sense why</span> <span data-start="177.84" data-end="179.55">would we always overwrite the public</span> <span data-start="179.55" data-end="182.15">class of another module we just</span> <span data-start="182.15" data-end="185.31">concatenate with our rule it's very</span> <span data-start="185.31" data-end="187.47">simple it just takes some getting used</span> <span data-start="187.47" data-end="189.54">to especially with a slash in the rule</span> <span data-start="189.54" data-end="191.73">name which is not valid syntax I don't</span> <span data-start="191.73" data-end="194.01">think well you don't even need to use</span> <span data-start="194.01" data-end="196.2">all that a simple rule like that is all</span> <span data-start="196.2" data-end="198.3">you need for a mile to exist we don't</span> <span data-start="198.3" data-end="199.83">even need a rule you just need to put</span> <span data-start="199.83" data-end="201.269">the module there and everything will be</span> <span data-start="201.269" data-end="204.18">public and it is how we would use it in</span> </p>
<p><span data-start="204.18" data-end="206.64">JavaScript we have a simple mark</span> <span data-start="206.64" data-end="209.64">messenger foo react component we have an</span> <span data-start="209.64" data-end="211.29">h1 and we want to just use the title</span> <span data-start="211.29" data-end="215.22">class name on it we just right you know</span> <span data-start="215.22" data-end="217.68">react does anyone here use react I'm</span> <span data-start="217.68" data-end="219.63">sure you do yes there we go put your</span> <span data-start="219.63" data-end="224.519">hands down but we can do more complex</span> <span data-start="224.519" data-end="226.32">things instead of saying just use this</span> <span data-start="226.32" data-end="228.78">class name we can pass it some JSON and</span> <span data-start="228.78" data-end="231.66">this in this JSON the property names are</span> <span data-start="231.66" data-end="233.459">the actual class names that we want to</span> <span data-start="233.459" data-end="236.28">use and the values are booleans and the</span> <span data-start="236.28" data-end="238.29">signal whether or not to include this</span> <span data-start="238.29" data-end="241.799">class in the class list and let's focus</span> <span data-start="241.799" data-end="244.47">on the the weird thing over there that's</span> </p>
<p><span data-start="244.47" data-end="250.38">CX CX is our class transform function it</span> <span data-start="250.38" data-end="252.78">serves multiple purposes for one thing</span> <span data-start="252.78" data-end="254.79">it actually evaluates the logic of which</span> <span data-start="254.79" data-end="256.83">classes to include based on the boolean</span> <span data-start="256.83" data-end="260.31">values for jasons but it's always there</span> <span data-start="260.31" data-end="263.64">we always have to use it so we know that</span> <span data-start="263.64" data-end="265.78">we can search for it</span> <span data-start="265.78" data-end="268.81">and we look for instances of CX and we</span> <span data-start="268.81" data-end="271.06">find out which modules do we need to</span> <span data-start="271.06" data-end="272.95">include in this case we need to include</span> <span data-start="272.95" data-end="275.74">messenger foo and messenger bar that CSS</span> <span data-start="275.74" data-end="278.62">these two modules and we do this not at</span> <span data-start="278.62" data-end="279.7">runtime because that will be very</span> <span data-start="279.7" data-end="281.95">inefficient we do this through static</span> <span data-start="281.95" data-end="285.7">analysis at build time we just parts all</span> <span data-start="285.7" data-end="287.32">our JavaScript files and we see which</span> <span data-start="287.32" data-end="289.6">modules are being referenced and then</span> <span data-start="289.6" data-end="291.34">whenever the module will be loaded we</span> <span data-start="291.34" data-end="293.8">already have the CSS loaded side by side</span> <span data-start="293.8" data-end="296.26">with it it's on a package and all</span> <span data-start="296.26" data-end="298.78">required and this is great because you</span> <span data-start="298.78" data-end="301.53">never forget to include your modules and</span> <span data-start="301.53" data-end="304.84">it saves you love you know time hassled</span> <span data-start="304.84" data-end="308.11">debugging effort and this enables us to</span> <span data-start="308.11" data-end="311.169">do very cool things that have to do with</span> <span data-start="311.169" data-end="313.63">the two modes and now I'm not talking</span> <span data-start="313.63" data-end="316.12">about you read software more than you</span> <span data-start="316.12" data-end="318.97">write software even when you're writing</span> <span data-start="318.97" data-end="320.47">software or when you're reading software</span> <span data-start="320.47" data-end="322.99">a code or when you're debugging it</span> <span data-start="322.99" data-end="325.63">you're still in the human mode it's you</span> <span data-start="325.63" data-end="327.13">interacting with the code that you or</span> <span data-start="327.13" data-end="329.74">somebody else is written the other mode</span> <span data-start="329.74" data-end="332.5">is the Machine mode is the machine when</span> <span data-start="332.5" data-end="334.66">it executes your code and it has to do</span> <span data-start="334.66" data-end="338.49">something with has to understand it our</span> <span data-start="338.49" data-end="341.38">our static strength our static tools our</span> <span data-start="341.38" data-end="343.24">psyche transforms and analysis allow us</span> <span data-start="343.24" data-end="344.56">to do things there are good both for</span> <span data-start="344.56" data-end="346.35">humans and for machines for instance</span> <span data-start="346.35" data-end="349.539">this is all we need to type to get all</span> <span data-start="349.539" data-end="352.15">the prefixes these get added at build</span> <span data-start="352.15" data-end="355">time automatically this is an</span> <span data-start="355" data-end="357.46">optimization done for humans it's very</span> <span data-start="357.46" data-end="359.35">unpleasant to have to type these manuals</span> </p>
<p><span data-start="359.35" data-end="361.24">I'm sure you know and you'll use prefix</span> <span data-start="361.24" data-end="363.46">free or something of the sort we go a</span> <span data-start="363.46" data-end="364.96">step further we also optimized for</span> <span data-start="364.96" data-end="367.15">machine at this level as well more or</span> <span data-start="367.15" data-end="371.169">less when a person loads our page they</span> <span data-start="371.169" data-end="373.75">load it with a browser so if I'm using</span> <span data-start="373.75" data-end="377.11">Firefox and I load messenger com why</span> <span data-start="377.11" data-end="379.63">would I get the MS transform and the</span> <span data-start="379.63" data-end="381.37">WebKit transform declarations they make</span> <span data-start="381.37" data-end="382.84">no sense the browser will ignore them</span> <span data-start="382.84" data-end="385.18">they're wasted bites we actually don't</span> <span data-start="385.18" data-end="387.94">even send them we look at what browser</span> <span data-start="387.94" data-end="389.44">you're using and we only send you the</span> <span data-start="389.44" data-end="391.66">rules that you will understand which is</span> <span data-start="391.66" data-end="393.31">very cool because this saves a lot of</span> <span data-start="393.31" data-end="396.45">bites and bites save energy in fact I</span> <span data-start="396.45" data-end="399.32">estimated just by this thing</span> <span data-start="399.32" data-end="401.21">we save enough energy which is</span> <span data-start="401.21" data-end="403.43">equivalent to about half a Hiroshima</span> <span data-start="403.43" data-end="405.62">every day to put it in a different</span> <span data-start="405.62" data-end="409.7">perspective it's enough energy to warm</span> <span data-start="409.7" data-end="412.43">up this room to a temperature of 214</span> <span data-start="412.43" data-end="416.8">cats for about a week that's a lot</span> <span data-start="416.8" data-end="419.21">another thing we do and this is actually</span> <span data-start="419.21" data-end="422.18">a pet peeve of mine it doesn't matter if</span> <span data-start="422.18" data-end="426.5">an element is 0 pixels or 0% or zero</span> <span data-start="426.5" data-end="428.72">elephants from the right it's smack on</span> <span data-start="428.72" data-end="430.79">the right we don't need the unit there</span> <span data-start="430.79" data-end="433.25">we actually do remove it the static</span> <span data-start="433.25" data-end="436.31">analysis and this again saves bytes</span> <span data-start="436.31" data-end="439.7">white save energy this simple say by</span> <span data-start="439.7" data-end="442.43">removing the unit from zero allows 200</span> <span data-start="442.43" data-end="444.17">stray cats to find a new home every</span> <span data-start="444.17" data-end="448.73">single day that's my estimation and this</span> <span data-start="448.73" data-end="451.33">managing is something we do for machines</span> <span data-start="451.33" data-end="454.22">because I am a human I'm sure your human</span> <span data-start="454.22" data-end="457.19">as well most of you and we need</span> <span data-start="457.19" data-end="460.1">something like this we need a rule that</span> <span data-start="460.1" data-end="462.47">makes sense when you read it this is the</span> <span data-start="462.47" data-end="464.48">title rule belonging to the messenger</span> <span data-start="464.48" data-end="468.17">for component a machine doesn't care a</span> <span data-start="468.17" data-end="471.77">machine needs a unique string so why not</span> <span data-start="471.77" data-end="474.16">make it something very very short a</span> <span data-start="474.16" data-end="476.9">machine will do just fine and we never</span> <span data-start="476.9" data-end="478.58">have to read this this just happens</span> <span data-start="478.58" data-end="480.89">between machines so back to our</span> </p>
<p><span data-start="480.89" data-end="485.54">JavaScript example this whole thing gets</span> <span data-start="485.54" data-end="488.15">evaluated and say we also have the</span> <span data-start="488.15" data-end="490.99">subtitle it will be those two classes</span> <span data-start="490.99" data-end="493.43">but this is after build time when this</span> <span data-start="493.43" data-end="496.19">actually runs so it's not that big long</span> <span data-start="496.19" data-end="497.78">string in the class this is just</span> <span data-start="497.78" data-end="500.66">something small like this now the</span> <span data-start="500.66" data-end="503.41">compound savings from all these bites</span> <span data-start="503.41" data-end="507.41">arteries are enough to boil all the</span> <span data-start="507.41" data-end="509.81">coffee that has and ever will be</span> <span data-start="509.81" data-end="512.12">consumed that all the CSS cons would</span> <span data-start="512.12" data-end="515.81">ever ever happen but we're not over I</span> <span data-start="515.81" data-end="517.55">mean this is just writing and maybe</span> <span data-start="517.55" data-end="520.7">debugging a but yes we're shipping code</span> <span data-start="520.7" data-end="522.65">we're shipping our code to the the users</span> <span data-start="522.65" data-end="523.88">and they're loading in their browsers</span> <span data-start="523.88" data-end="526.61">but we're not done we have another thing</span> <span data-start="526.61" data-end="528.56">it's called machine learning which we</span> <span data-start="528.56" data-end="529.97">can use we have this cool thing called</span> <span data-start="529.97" data-end="532.49">packager and remember how we reference</span> <span data-start="532.49" data-end="533.03">to</span> <span data-start="533.03" data-end="536.06">ss modules in our example messenger foo</span> <span data-start="536.06" data-end="538.73">and messenger bar well packager we'll</span> <span data-start="538.73" data-end="540.38">look at how messenger full and messenger</span> <span data-start="540.38" data-end="542.84">bar are loaded especially in relation to</span> <span data-start="542.84" data-end="545.75">messenger food out Jas and we'll see</span> <span data-start="545.75" data-end="547.31">that whenever we request messenger foo</span> <span data-start="547.31" data-end="549.5">we also request messenger bar so it</span> <span data-start="549.5" data-end="551.54">makes sense to turn these two files into</span> <span data-start="551.54" data-end="554.69">one single file and the file name will</span> <span data-start="554.69" data-end="557.15">also be very small again fewer bytes and</span> <span data-start="557.15" data-end="559.46">fewer bytes and this is these are just</span> <span data-start="559.46" data-end="564.13">randomly generated hashes but even even</span> <span data-start="564.13" data-end="568.22">machines can make mistakes two weeks ago</span> <span data-start="568.22" data-end="571.61">or so this file was generated based on</span> <span data-start="571.61" data-end="575.78">packagers heuristics and I'm sure some</span> <span data-start="575.78" data-end="578.81">of you already see the problem some</span> <span data-start="578.81" data-end="582.17">people couldn't chat for a considerable</span> <span data-start="582.17" data-end="584.54">amount of time because ad blockers</span> <span data-start="584.54" data-end="586.49">thought this was an ad when in fact it</span> <span data-start="586.49" data-end="588.14">was just a couple of our modules that we</span> <span data-start="588.14" data-end="592.04">kind of need for chats work machines are</span> <span data-start="592.04" data-end="596.48">silly but that's why we're here and here</span> <span data-start="596.48" data-end="598.37">today yesterday and just in general</span> <span data-start="598.37" data-end="600.44">people ask me a lot whether we use less</span> <span data-start="600.44" data-end="601.85">or SAS and which one would prefer at</span> </p>
<p><span data-start="601.85" data-end="604.52">Facebook or do we use tieless we use</span> <span data-start="604.52" data-end="608.39">nothing because using one of these make</span> <span data-start="608.39" data-end="610.61">it harder for people who just start to</span> <span data-start="610.61" data-end="612.83">get into the groove anyone who's ever</span> <span data-start="612.83" data-end="615.02">written a web page can work at Facebook</span> <span data-start="615.02" data-end="618.11">and they instantly know everything they</span> <span data-start="618.11" data-end="619.64">do need to know to be able to be</span> <span data-start="619.64" data-end="623.51">efficient we use plain old CSS however</span> <span data-start="623.51" data-end="625.55">we do have the static analysis and style</span> <span data-start="625.55" data-end="628.1">transform step in our build system so we</span> <span data-start="628.1" data-end="629.72">can do some funny things we use</span> <span data-start="629.72" data-end="631.85">variables of course we call him</span> <span data-start="631.85" data-end="633.17">constants though because they're not</span> <span data-start="633.17" data-end="636.11">really variable and this is how you use</span> <span data-start="636.11" data-end="641.39">a constant what it's a bar but anyway it</span> <span data-start="641.39" data-end="642.92">builds stuff we will replace it with his</span> <span data-start="642.92" data-end="645.53">actual value this is great so you don't</span> <span data-start="645.53" data-end="648.68">have to always remember you know fo six</span> <span data-start="648.68" data-end="650.99">for a magenta you can just say messenger</span> <span data-start="650.99" data-end="654.08">magenta and that will be great now the</span> <span data-start="654.08" data-end="657.35">rule that you have to use to you know to</span> <span data-start="657.35" data-end="660.5">go from a actual explicit hex value to a</span> <span data-start="660.5" data-end="663.14">constant or after how many repetitions</span> <span data-start="663.14" data-end="666.47">do you use that the rule</span> </p>
<p><span data-start="666.47" data-end="667.97">I still don't know it but I'll find out</span> <span data-start="667.97" data-end="670.19">and I'll tell you but that's enough</span> <span data-start="670.19" data-end="672.71">about how we we actually you know ship</span> <span data-start="672.71" data-end="675.53">code I think you got a pretty okay idea</span> <span data-start="675.53" data-end="678.29">of what happens hopefully otherwise</span> <span data-start="678.29" data-end="680.69">let's talk later but let's get back to</span> <span data-start="680.69" data-end="683.42">messenger calm because it all actually</span> <span data-start="683.42" data-end="685.7">started a long time ago when we rewrote</span> <span data-start="685.7" data-end="688.43">chat the facebook chat with this in a</span> <span data-start="688.43" data-end="690.65">very special way we thought let's make</span> <span data-start="690.65" data-end="693.23">some components that have no styling</span> <span data-start="693.23" data-end="694.88">they just get the data they need and</span> <span data-start="694.88" data-end="696.98">then we have different components that</span> <span data-start="696.98" data-end="699.8">will present the data this is not a new</span> <span data-start="699.8" data-end="702.41">concept but we decided to apply this</span> <span data-start="702.41" data-end="705.05">religiously through chat we call these</span> </p>
<p><span data-start="705.05" data-end="707.06">Stalag gnostic components containers and</span> <span data-start="707.06" data-end="709.49">everything is a container and needs a</span> <span data-start="709.49" data-end="711.58">presenter to actually display the data</span> <span data-start="711.58" data-end="714.56">so you wrap a you know a normal</span> <span data-start="714.56" data-end="716.15">presenter in a container and you wrap</span> <span data-start="716.15" data-end="717.98">that you know what multiple lists of</span> <span data-start="717.98" data-end="719.39">them in another container and so on you</span> <span data-start="719.39" data-end="722.18">go up and go up we call this shawarma</span> <span data-start="722.18" data-end="723.92">driven development because everything is</span> <span data-start="723.92" data-end="727.85">a rap as a simple example let's say we</span> <span data-start="727.85" data-end="729.89">would hypothetically have a list of</span> <span data-start="729.89" data-end="731.96">recent conversations that we'll just</span> <span data-start="731.96" data-end="735.92">call the style agnostic threadless we</span> <span data-start="735.92" data-end="738.14">give us some parameters we give it a</span> <span data-start="738.14" data-end="740.06">presenter which is something again we</span> <span data-start="740.06" data-end="741.86">control and we give it a class name just</span> <span data-start="741.86" data-end="744.44">so we have a hook so we can use its</span> <span data-start="744.44" data-end="746.72">public classes to style things and we're</span> <span data-start="746.72" data-end="749.45">done it goes down one level it calls the</span> <span data-start="749.45" data-end="751.94">class the component we pass in and then</span> <span data-start="751.94" data-end="754.13">again we for every conversation we just</span> <span data-start="754.13" data-end="757.4">add a new container pass down to how the</span> <span data-start="757.4" data-end="759.89">classes have the hooks and so on until</span> <span data-start="759.89" data-end="763.6">we have the whole tree shawarma and</span> <span data-start="763.6" data-end="765.86">because this was a new thing right this</span> <span data-start="765.86" data-end="768.08">is facebook com and facebook com has</span> <span data-start="768.08" data-end="770.45">been there for a while we believe that</span> <span data-start="770.45" data-end="772.01">everybody should be able to use facebook</span> <span data-start="772.01" data-end="773.93">so we support a large amount of browsers</span> <span data-start="773.93" data-end="776.59">but messenger come was a new thing and</span> <span data-start="776.59" data-end="779.15">by definition it is niche it's people</span> <span data-start="779.15" data-end="780.71">who really want to use messenger and</span> <span data-start="780.71" data-end="782.78">they want to have a nice environment to</span> <span data-start="782.78" data-end="784.55">do so and Icefall this type of</span> <span data-start="784.55" data-end="787.73">environment so we decided to not support</span> <span data-start="787.73" data-end="789.38">the old browsers and that meant we could</span> <span data-start="789.38" data-end="791.72">use the new CSS stuff we were finally</span> <span data-start="791.72" data-end="794.21">free to use flex box and suffolk CSS</span> <span data-start="794.21" data-end="796.97">grid for layout and whatnot except we</span> <span data-start="796.97" data-end="799.88">weren't because we want to</span> <span data-start="799.88" data-end="802.07">have something that looks like this and</span> <span data-start="802.07" data-end="805.94">with a CSS only solution it didn't work</span> <span data-start="805.94" data-end="808.85">out that well as Leah mentioned in her</span> <span data-start="808.85" data-end="812.03">talk just having the CSS only solution</span> <span data-start="812.03" data-end="814.22">doesn't help you is just so you can say</span> <span data-start="814.22" data-end="815.78">that you have it but it doesn't do</span> <span data-start="815.78" data-end="817.91">anything else than be and sometimes it's</span> <span data-start="817.91" data-end="820.31">wrong as well so instead of using</span> <span data-start="820.31" data-end="822.41">flexbox and CSS to it we went back to</span> <span data-start="822.41" data-end="824.72">using an old component of ours it's a</span> <span data-start="824.72" data-end="827.66">layout component and it is JavaScript</span> <span data-start="827.66" data-end="831.02">based but it's battle-tested we've been</span> <span data-start="831.02" data-end="833.3">using this for a long time we figured</span> <span data-start="833.3" data-end="834.98">out the bugs people who are much smarter</span> <span data-start="834.98" data-end="839.12">than me fix the bugs and we ship with</span> <span data-start="839.12" data-end="841.4">this and later after it was ship when we</span> <span data-start="841.4" data-end="843.68">had more time we went back and found out</span> <span data-start="843.68" data-end="846.08">what was wrong with flexbox it turns out</span> <span data-start="846.08" data-end="848.51">that because flexbox has changed so much</span> <span data-start="848.51" data-end="849.98">over time it's you know its</span> <span data-start="849.98" data-end="851.51">specification and all that and the</span> <span data-start="851.51" data-end="855.83">standard it still isn't we had some</span> <span data-start="855.83" data-end="857.15">static transform tools that were</span> <span data-start="857.15" data-end="860.27">conflicting with each other and chrome</span> <span data-start="860.27" data-end="861.68">would sometimes get the new version of</span> <span data-start="861.68" data-end="864.29">flexbox automatically transform but for</span> </p>
<p><span data-start="864.29" data-end="865.73">Safari you would get the old version</span> <span data-start="865.73" data-end="868.19">with the WebKit box and of course that</span> <span data-start="868.19" data-end="870.02">wouldn't work well what once you figure</span> <span data-start="870.02" data-end="873.41">out those issues it was okay except for</span> <span data-start="873.41" data-end="875.54">you know Internet Explorer because</span> <span data-start="875.54" data-end="877.46">engine explore is to need to specify ms</span> <span data-start="877.46" data-end="881.42">flex in a 1 10 pixels and it needs to</span> <span data-start="881.42" data-end="882.92">have pixels there because if you just</span> <span data-start="882.92" data-end="884.63">say 0 it doesn't know that it doesn't</span> <span data-start="884.63" data-end="886.31">know what you mean I remember our rule</span> <span data-start="886.31" data-end="889.25">that strips away the unit from pixels so</span> <span data-start="889.25" data-end="890.66">we just added a couple of exceptions and</span> <span data-start="890.66" data-end="893.65">we were fine to go with flexbox flexbox</span> <span data-start="893.65" data-end="895.55">well we weren't out of the woods yet</span> <span data-start="895.55" data-end="899.12">because it's a bit product even though</span> <span data-start="899.12" data-end="901.25">it's it sounds simple it actually has</span> <span data-start="901.25" data-end="903.83">very many moving parts the shawarma wrap</span> <span data-start="903.83" data-end="907.28">is very deep and I'm sure you can see</span> <span data-start="907.28" data-end="910.25">the problem with this and if you miss it</span> <span data-start="910.25" data-end="913.82">let me blow it up for you as you're</span> <span data-start="913.82" data-end="917.71">typing in a right-to-left language and</span> <span data-start="917.71" data-end="920.93">you type in comma space as you do to add</span> <span data-start="920.93" data-end="924.49">a comma the college's jumps</span> <span data-start="924.49" data-end="926.86">this is weird we never understood why</span> <span data-start="926.86" data-end="928.36">and we spend a lot of time just</span> <span data-start="928.36" data-end="930.58">debugging why this happened we thought</span> <span data-start="930.58" data-end="933.45">were supposed to some old archaic</span> <span data-start="933.45" data-end="935.92">components that we weren't including by</span> <span data-start="935.92" data-end="940.33">mistake but it turned out that it was</span> <span data-start="940.33" data-end="942.279">our over optimization as many websites</span> <span data-start="942.279" data-end="944.23">as many web applications we have just</span> <span data-start="944.23" data-end="946.33">one font definition it's a font family</span> <span data-start="946.33" data-end="947.589">we have a fun stack and everything's</span> <span data-start="947.589" data-end="950.67">fine we were using helvetica neue</span> </p>
<p><span data-start="950.67" data-end="952.81">Helvetica neue actually has this problem</span> <span data-start="952.81" data-end="954.19">that if you're typing in right to left</span> <span data-start="954.19" data-end="956.08">and you've having a character character</span> <span data-start="956.08" data-end="959.08">character comma space character space</span> <span data-start="959.08" data-end="961.209">and comma will just invert and that</span> <span data-start="961.209" data-end="963.52">looks very horrible if you're a user</span> <span data-start="963.52" data-end="966.19">that you know speaks in a right-to-left</span> <span data-start="966.19" data-end="969.76">written language so instead of using her</span> <span data-start="969.76" data-end="972.61">veticon know which is the cool thing we</span> <span data-start="972.61" data-end="974.08">detected if you're using right to left</span> <span data-start="974.08" data-end="975.49">we don't want you to have a better</span> <span data-start="975.49" data-end="977.529">experience so we just fall back to REO</span> <span data-start="977.529" data-end="981.58">REO the old boring REO but the old</span> <span data-start="981.58" data-end="983.89">boring battle-tested area which has been</span> <span data-start="983.89" data-end="985.57">improved over time and works well with</span> <span data-start="985.57" data-end="989.2">anything you throw at it and this was</span> <span data-start="989.2" data-end="990.339">just something that we just happen to</span> <span data-start="990.339" data-end="992.64">find out Helvetica neue has this problem</span> <span data-start="992.64" data-end="994.839">but there are some things within</span> <span data-start="994.839" data-end="999.94">facebook that got in our way java</span> <span data-start="999.94" data-end="1002.399">subcomponents really like pixels as size</span> <span data-start="1002.399" data-end="1005.94">dimensions as they should but remember</span> <span data-start="1005.94" data-end="1008.959">we're a full page application pixels</span> <span data-start="1008.959" data-end="1011.1">don't work well because you resize the</span> <span data-start="1011.1" data-end="1013.62">page a lot you might want to dock it to</span> <span data-start="1013.62" data-end="1016.38">the lift and not only that but we need</span> <span data-start="1016.38" data-end="1018.899">to accurately display what you have sent</span> <span data-start="1018.899" data-end="1020.279">to the other person with which you're</span> <span data-start="1020.279" data-end="1022.77">talking if you send them an image we</span> <span data-start="1022.77" data-end="1024.809">need to display like this or if you send</span> <span data-start="1024.809" data-end="1028.35">more images each case has a different</span> <span data-start="1028.35" data-end="1031.74">grid on different sizing and we need to</span> <span data-start="1031.74" data-end="1034.74">kind of make it look nice and if we try</span> <span data-start="1034.74" data-end="1036.15">to stretch images they will look</span> <span data-start="1036.15" data-end="1037.89">horrible and we needed a different</span> <span data-start="1037.89" data-end="1040.65">approach also they're always about</span> <span data-start="1040.65" data-end="1044.189">roughly half of the other conversation</span> <span data-start="1044.189" data-end="1047.25">window even if they're six or just one</span> <span data-start="1047.25" data-end="1049.74">in short we needed to be responsive and</span> <span data-start="1049.74" data-end="1050.97">that's very hard to do if you're using</span> <span data-start="1050.97" data-end="1055.86">pixels so we had to add our own</span> <span data-start="1055.86" data-end="1058.88">containers again just so we could</span> <span data-start="1058.88" data-end="1061.8">use different CSS classes that were</span> <span data-start="1061.8" data-end="1064.14">based on percentages and we couldn't use</span> <span data-start="1064.14" data-end="1066.06">a lot of the building blocks that people</span> <span data-start="1066.06" data-end="1067.56">on facebook com use out of the box</span> <span data-start="1067.56" data-end="1070.95">because they only work with pixels still</span> <span data-start="1070.95" data-end="1072.71">though we have four break points oh</span> <span data-start="1072.71" data-end="1075.39">that's not a lot but it's kind of a lot</span> <span data-start="1075.39" data-end="1078.66">because it's four and we change small</span> <span data-start="1078.66" data-end="1081.18">things that every one of them the bigger</span> <span data-start="1081.18" data-end="1083.73">thing that you'll notice is the right</span> <span data-start="1083.73" data-end="1086.34">hand side information panel if we detect</span> <span data-start="1086.34" data-end="1087.84">that we don't that you don't have enough</span> <span data-start="1087.84" data-end="1089.73">space to comfortably displayed and also</span> <span data-start="1089.73" data-end="1091.26">view the conversation will just</span> <span data-start="1091.26" data-end="1092.61">automatically close it for you you can</span> <span data-start="1092.61" data-end="1094.38">still open it if you want we have the</span> <span data-start="1094.38" data-end="1096.99">button and again if as you expand and</span> <span data-start="1096.99" data-end="1099.03">you have more space we automatically</span> <span data-start="1099.03" data-end="1102.24">open it for you actually the day we</span> <span data-start="1102.24" data-end="1103.59">released we got featured on good</span> <span data-start="1103.59" data-end="1105.6">products as you do and a person</span> <span data-start="1105.6" data-end="1108.48">literally spent enough time resizing is</span> <span data-start="1108.48" data-end="1112.41">browser window back-engineering how we</span> <span data-start="1112.41" data-end="1114.75">what the rules for this are and he was</span> <span data-start="1114.75" data-end="1117.06">so impressed that we took the time to do</span> <span data-start="1117.06" data-end="1118.65">this but this is actually something very</span> <span data-start="1118.65" data-end="1121.53">simple it makes a big difference but</span> <span data-start="1121.53" data-end="1123.3">it's something simple you can do but if</span> <span data-start="1123.3" data-end="1125.16">something is very in your face you can</span> <span data-start="1125.16" data-end="1128.24">also be responsive at a smaller scale</span> <span data-start="1128.24" data-end="1130.92">titles and messenger even on your phone</span> <span data-start="1130.92" data-end="1133.89">app are there centered so we Center the</span> <span data-start="1133.89" data-end="1135.51">page title which is messenger but we</span> <span data-start="1135.51" data-end="1137.22">also Center the conversation title in</span> <span data-start="1137.22" data-end="1140.34">this case it's an unnamed group between</span> <span data-start="1140.34" data-end="1143.48">me and two other people with long names</span> <span data-start="1143.48" data-end="1145.74">what if you want to dock your window to</span> <span data-start="1145.74" data-end="1150.06">the left of your screen truncating</span> <span data-start="1150.06" data-end="1151.95">centered text is weird especially if you</span> <span data-start="1151.95" data-end="1153.6">have icons on the other side because</span> <span data-start="1153.6" data-end="1155.55">they will take up space on evenly and</span> <span data-start="1155.55" data-end="1157.8">we'll just look weird and you can't do</span> <span data-start="1157.8" data-end="1160.44">it you can't use a CSS only solution for</span> <span data-start="1160.44" data-end="1162.15">this because it's not dependent on the</span> <span data-start="1162.15" data-end="1163.77">size of the viewport is depend on the</span> <span data-start="1163.77" data-end="1166.53">size of the name and the element that</span> <span data-start="1166.53" data-end="1167.88">contains in the name and not even</span> <span data-start="1167.88" data-end="1170.58">element query if we ever get it will</span> <span data-start="1170.58" data-end="1172.56">help us here for this you need of a</span> <span data-start="1172.56" data-end="1173.94">hybrid solution you need to measure the</span> <span data-start="1173.94" data-end="1176.31">size of the text and measure the size of</span> <span data-start="1176.31" data-end="1177.9">the container and when there's not</span> <span data-start="1177.9" data-end="1180">enough room just change a class named</span> <span data-start="1180" data-end="1182.01">float everything to the left and apply a</span> <span data-start="1182.01" data-end="1185.25">truncation if you need to now we do a</span> <span data-start="1185.25" data-end="1187.74">lot of these small things on break</span> <span data-start="1187.74" data-end="1189.36">points or when we detect that you don't</span> <span data-start="1189.36" data-end="1192.06">have enough space just so everything</span> <span data-start="1192.06" data-end="1194.25">nicely and looks nicely it's supposed to</span> <span data-start="1194.25" data-end="1196.11">be an app that's on par with the native</span> <span data-start="1196.11" data-end="1198.66">experience and that means you need to do</span> <span data-start="1198.66" data-end="1200.54">a lot of these little polishing and</span> <span data-start="1200.54" data-end="1204.72">speaking of polishing and how we know</span> <span data-start="1204.72" data-end="1207.45">titles messenger are centered that's an</span> <span data-start="1207.45" data-end="1210.33">interface guide and we have an interface</span> <span data-start="1210.33" data-end="1214.98">guy for facebook now please please tell</span> <span data-start="1214.98" data-end="1217.2">me you know what this is just say what</span> <span data-start="1217.2" data-end="1220.35">it is yes it's a fig right the Facebook</span> <span data-start="1220.35" data-end="1223.02">interface guy to fig I showed this to</span> </p>
<p><span data-start="1223.02" data-end="1225.84">Americans and they just had no idea what</span> <span data-start="1225.84" data-end="1230.1">it was they had not seen figs I went hot</span> <span data-start="1230.1" data-end="1231.9">air ballooning and the person though the</span> <span data-start="1231.9" data-end="1234.03">pilot dropped the balloon so we could</span> <span data-start="1234.03" data-end="1236.67">just brush against some walnut trees you</span> <span data-start="1236.67" data-end="1239.01">know walnuts and he said you know if you</span> <span data-start="1239.01" data-end="1240.18">reach how you can actually grab some</span> <span data-start="1240.18" data-end="1241.77">walnut so I did and I grabbed the walnut</span> <span data-start="1241.77" data-end="1244.32">and was all still green and only me and</span> <span data-start="1244.32" data-end="1246.24">the pilot knew that that's what walnuts</span> <span data-start="1246.24" data-end="1248.01">looked like Americans are weird they</span> <span data-start="1248.01" data-end="1249.57">don't know what fruit looks like in any</span> <span data-start="1249.57" data-end="1251.07">case that's the fig that's the facebook</span> <span data-start="1251.07" data-end="1252.66">in your face guide and we have a</span> <span data-start="1252.66" data-end="1254.76">different product it's a messenger thing</span> <span data-start="1254.76" data-end="1257.52">so you get the reference i'm trying to</span> <span data-start="1257.52" data-end="1261.57">make we have the mig the messenger</span> <span data-start="1261.57" data-end="1265.35">interface guide and that's just a visual</span> <span data-start="1265.35" data-end="1267.24">style guide of how things should look</span> <span data-start="1267.24" data-end="1269.25">like a different combinations and all</span> <span data-start="1269.25" data-end="1272.37">that normally it's made by a designer we</span> <span data-start="1272.37" data-end="1273.84">found that it's a lot better to be made</span> <span data-start="1273.84" data-end="1276.24">by people who are working on the product</span> <span data-start="1276.24" data-end="1277.74">not just the design is not just the</span> <span data-start="1277.74" data-end="1279.54">developers with everybody involved</span> <span data-start="1279.54" data-end="1281.94">because some things make sense the</span> <span data-start="1281.94" data-end="1283.29">designers somethings are very cool to</span> <span data-start="1283.29" data-end="1285.06">design two designers but don't make</span> <span data-start="1285.06" data-end="1286.59">sense to implement or just don't make</span> <span data-start="1286.59" data-end="1289.29">sense for people to use in any case we</span> <span data-start="1289.29" data-end="1291.56">took some of the facebook components and</span> <span data-start="1291.56" data-end="1293.7">turn them into our own components</span> <span data-start="1293.7" data-end="1297.83">remember how when Chad was rewritten</span> <span data-start="1297.83" data-end="1300.12">everything was a container and a</span> <span data-start="1300.12" data-end="1302.37">presenter that's kind of how we do</span> <span data-start="1302.37" data-end="1305.82">components everywhere we have an</span> <span data-start="1305.82" data-end="1307.41">abstract thing and something that gives</span> <span data-start="1307.41" data-end="1310.17">a presentation and we were able to take</span> <span data-start="1310.17" data-end="1311.76">the Facebook button turn into a</span> <span data-start="1311.76" data-end="1314.07">messenger button which looks a lot like</span> <span data-start="1314.07" data-end="1317.16">a button I know I'm sorry but you can</span> <span data-start="1317.16" data-end="1319.2">see you know facebook facebook on the</span> <span data-start="1319.2" data-end="1321.27">left messenger on the right even though</span> <span data-start="1321.27" data-end="1323.19">it's the same component underneath and</span> <span data-start="1323.19" data-end="1325.38">that's great because the facebook</span> <span data-start="1325.38" data-end="1326.01">components</span> <span data-start="1326.01" data-end="1327.48">have undergone a lot of work to make</span> <span data-start="1327.48" data-end="1329.34">them accessible you have we have a lot</span> <span data-start="1329.34" data-end="1332.82">of customization for Aria roles and for</span> <span data-start="1332.82" data-end="1334.2">screen readers to be able to properly</span> <span data-start="1334.2" data-end="1336.06">detect them and their states and we</span> <span data-start="1336.06" data-end="1338.28">wanted to get all that good stuff over</span> <span data-start="1338.28" data-end="1340.59">the messenger I want to take just a</span> <span data-start="1340.59" data-end="1344.31">short time to emphasize accessibility we</span> <span data-start="1344.31" data-end="1346.38">need more of this doesn't matter if it</span> <span data-start="1346.38" data-end="1348.96">looks good if you can't see it you need</span> <span data-start="1348.96" data-end="1353.19">to be able to use something and another</span> <span data-start="1353.19" data-end="1355.38">thing that's bad also focus ability but</span> <span data-start="1355.38" data-end="1358.23">just bad as an element is my new</span> <span data-start="1358.23" data-end="1361.5">favorite element the hate lets the image</span> <span data-start="1361.5" data-end="1365.97">tag let's go back to this example the</span> <span data-start="1365.97" data-end="1367.86">images here are you know the basically</span> <span data-start="1367.86" data-end="1371.4">shawarmas but they're each a different</span> <span data-start="1371.4" data-end="1372.87">image but we need to display them in a</span> <span data-start="1372.87" data-end="1374.91">nice grid if we would have a jagged</span> <span data-start="1374.91" data-end="1376.53">thing it would be horrible if we display</span> <span data-start="1376.53" data-end="1378.06">them one by one it would take up too</span> <span data-start="1378.06" data-end="1379.53">much space and use your contacts of your</span> <span data-start="1379.53" data-end="1383.07">conversation so we need to you know</span> <span data-start="1383.07" data-end="1385.02">sighs them evenly which is not always</span> <span data-start="1385.02" data-end="1387.57">possible with image tags if you also</span> <span data-start="1387.57" data-end="1389.79">want to make the images look nice and</span> <span data-start="1389.79" data-end="1393.42">then we have other use cases where with</span> <span data-start="1393.42" data-end="1394.56">your share a link will show you a</span> <span data-start="1394.56" data-end="1396.2">preview of what that link is and</span> <span data-start="1396.2" data-end="1398.28">sometimes the link will have a thumbnail</span> <span data-start="1398.28" data-end="1401.04">in this case yes hot-plug that's me I'm</span> <span data-start="1401.04" data-end="1405.57">sexy but I have a square image as my</span> <span data-start="1405.57" data-end="1408.42">profile although over here is displayed</span> <span data-start="1408.42" data-end="1411.78">in this nice wide ratio that we decided</span> <span data-start="1411.78" data-end="1413.43">would look best for all images there are</span> <span data-start="1413.43" data-end="1416.31">big enough to be displayed like this but</span> <span data-start="1416.31" data-end="1417.63">it's a square image being displayed as</span> <span data-start="1417.63" data-end="1419.34">wide but what happens if you don't have</span> <span data-start="1419.34" data-end="1421.47">a big enough image well we fall back to</span> <span data-start="1421.47" data-end="1424.23">a different more in line version we just</span> <span data-start="1424.23" data-end="1426.36">use the icon and we stretch it in a</span> <span data-start="1426.36" data-end="1428.73">different way you can't do this with</span> <span data-start="1428.73" data-end="1432.48">images and live a sane life so we just</span> <span data-start="1432.48" data-end="1434.73">obviously use background size we still</span> <span data-start="1434.73" data-end="1437.4">have invisible images on top so you can</span> <span data-start="1437.4" data-end="1439.2">still drag and drop things and we still</span> <span data-start="1439.2" data-end="1440.82">have links around them so you can open a</span> <span data-start="1440.82" data-end="1442.83">new tab right there so the accessibility</span> <span data-start="1442.83" data-end="1443.94">there is still there but the</span> <span data-start="1443.94" data-end="1445.14">presentation there well it looks like</span> <span data-start="1445.14" data-end="1447.81">the people who can see it's a lot nicer</span> <span data-start="1447.81" data-end="1450.45">and it's also something we control and</span> <span data-start="1450.45" data-end="1452.52">that is MIG compliant the messager</span> <span data-start="1452.52" data-end="1454.92">interface guide and we do everything we</span> <span data-start="1454.92" data-end="1456.96">can CSS to make sure to set it up and</span> <span data-start="1456.96" data-end="1459.19">then we close the deal in Chavez</span> <span data-start="1459.19" data-end="1461.5">some things you can't do in CSS like</span> <span data-start="1461.5" data-end="1463.45">this especially if you have a lot of</span> <span data-start="1463.45" data-end="1465.88">dynamic data and because we have these</span> <span data-start="1465.88" data-end="1468.55">polite little building blocks we can do</span> <span data-start="1468.55" data-end="1471.88">cool things I have interactive maps that</span> <span data-start="1471.88" data-end="1473.83">respect are an interface guide and</span> <span data-start="1473.83" data-end="1475.18">respect the Facebook interface guide on</span> <span data-start="1475.18" data-end="1477.55">facebook look at the look at the corners</span> <span data-start="1477.55" data-end="1479.05">they're all nice and rounded therefore</span> <span data-start="1479.05" data-end="1480.61">when the corners meet up there in the</span> <span data-start="1480.61" data-end="1483.49">top this is also partly interface guide</span> <span data-start="1483.49" data-end="1484.96">but you get this for free if you just</span> <span data-start="1484.96" data-end="1486.46">use our components because they're all</span> <span data-start="1486.46" data-end="1488.29">very small and all do just one little</span> <span data-start="1488.29" data-end="1491.59">thing you can have simple attachments</span> <span data-start="1491.59" data-end="1493.74">that just say hey here's my opinion or</span> <span data-start="1493.74" data-end="1497.02">you can have nice stunning-looking</span> <span data-start="1497.02" data-end="1500.92">images that retailers would like you to</span> <span data-start="1500.92" data-end="1503.08">still experience after you've left their</span> <span data-start="1503.08" data-end="1505.18">shop and you get notifications yes you</span> <span data-start="1505.18" data-end="1507.19">know you bought this belt is on its way</span> <span data-start="1507.19" data-end="1510.4">great and people who have built these</span> <span data-start="1510.4" data-end="1512.86">things that aren't on our team tell us</span> <span data-start="1512.86" data-end="1514.15">that they really enjoy building stuff</span> <span data-start="1514.15" data-end="1515.65">from messenger calm because of how easy</span> <span data-start="1515.65" data-end="1517.69">it is just use the small components that</span> <span data-start="1517.69" data-end="1519.84">we've built and the CSS is very small</span> <span data-start="1519.84" data-end="1524.23">but does its job very well but that's</span> <span data-start="1524.23" data-end="1525.97">not the best thing the best thing that</span> <span data-start="1525.97" data-end="1529.21">we've we feel that we've done is we were</span> <span data-start="1529.21" data-end="1532.03">the first secondary domain everything</span> <span data-start="1532.03" data-end="1534.22">you saw is basically Facebook code</span> <span data-start="1534.22" data-end="1536.8">running on a domain that is in facebook</span> <span data-start="1536.8" data-end="1538.66">and they'll never be able to take that</span> <span data-start="1538.66" data-end="1541.48">away from us so do try messenger calm</span> <span data-start="1541.48" data-end="1543.79">and let us know what you think we'll be</span> </p>
</section>