<section>
<p><span data-start="12.55" data-end="17.75">thanks for the introduction shower my</span> <span data-start="17.75" data-end="22.099">name is trickery and you can follow</span> <span data-start="22.099" data-end="23.84">along on speaker deck if you want to I</span> <span data-start="23.84" data-end="25.91">put the slides are you can see the link</span> <span data-start="25.91" data-end="27.619">there it's just the same as my twitter</span> <span data-start="27.619" data-end="31.279">handle and the title of the talk is this</span> <span data-start="31.279" data-end="34.94">will flow your mind and this talk is</span> <span data-start="34.94" data-end="37.76">actually nested it has a sub talk in it</span> <span data-start="37.76" data-end="41.059">the thing is that I found this one weird</span> <span data-start="41.059" data-end="45.02">trick while making this talk and</span> <span data-start="45.02" data-end="49.31">speakers will hate you for it it's how</span> <span data-start="49.31" data-end="53.53">to find a title for your talk step one</span> <span data-start="53.53" data-end="59.21">go to punch generator org look at the</span> <span data-start="59.21" data-end="65.789">list and find something that you like</span> <span data-start="65.799" data-end="69.17">other notable candidates were flow your</span> <span data-start="69.17" data-end="74.92">own trumpet and flow in the towel so</span> <span data-start="74.92" data-end="79.759">step through each prophet thank you but</span> <span data-start="79.759" data-end="81.35">let me fall back to the original talk</span> <span data-start="81.35" data-end="85.039">now so we've been using flow at</span> </p>
<p><span data-start="85.039" data-end="86.539">Queenston for over half a year so we</span> <span data-start="86.539" data-end="89.869">have kind of we have ever seen some of</span> <span data-start="89.869" data-end="94.189">its ups and downs and i'll go into what</span> <span data-start="94.189" data-end="96.649">it actually is in a moment but first i</span> <span data-start="96.649" data-end="97.969">just want to briefly go over their</span> <span data-start="97.969" data-end="101.6">structure of the talk the talk is very</span> <span data-start="101.6" data-end="103.7">linear it's split into five sections and</span> <span data-start="103.7" data-end="105.709">first this is the short introduction</span> <span data-start="105.709" data-end="107.509">then are really shallow dive into the</span> <span data-start="107.509" data-end="109.34">hood then I'll showcase some of the</span> <span data-start="109.34" data-end="110.899">features that flow can do and some of</span> <span data-start="110.899" data-end="113.42">its limitations and lastly I'll just go</span> <span data-start="113.42" data-end="115.189">over the lessons some of the lessons we</span> <span data-start="115.189" data-end="118.159">learned and color our experiences using</span> <span data-start="118.159" data-end="123.409">it so how many of you have heard about</span> <span data-start="123.409" data-end="130.34">flow okay a fair amount awesome so for</span> <span data-start="130.34" data-end="131.81">those of you don't know flow is a static</span> <span data-start="131.81" data-end="134.45">type checker for javascript it was open</span> <span data-start="134.45" data-end="137.12">sourced by Facebook and November of 2014</span> <span data-start="137.12" data-end="139.85">and that's their logo there it's kind of</span> <span data-start="139.85" data-end="142.84">made out of these modules of triangles</span> <span data-start="142.84" data-end="146.03">kind of and it's written in O'Connell</span> <span data-start="146.03" data-end="148.43">it's maintained by a team of around five</span> <span data-start="148.43" data-end="152.06">to seven people you can see the</span> <span data-start="152.06" data-end="154.549">contributions to master on the getup</span> <span data-start="154.549" data-end="158.39">repository since initial commit and it's</span> <span data-start="158.39" data-end="160.54">kind of interesting to compare that to</span> <span data-start="160.54" data-end="164.81">react flow is a little bit more than</span> <span data-start="164.81" data-end="168.44">half younger then react the red line</span> <span data-start="168.44" data-end="171.709">represents the lifetime of flow and we</span> <span data-start="171.709" data-end="173.87">can see that react really goes out with</span> <span data-start="173.87" data-end="177.379">a big bang and the Christmas months are</span> <span data-start="177.379" data-end="181.43">like really busy on the other hand flow</span> <span data-start="181.43" data-end="184.099">has this huge spike in contributions but</span> <span data-start="184.099" data-end="186.23">then this kind of goes into hibernation</span> <span data-start="186.23" data-end="190.37">for a few months but it's been picking</span> <span data-start="190.37" data-end="193.069">up a lot of steam lately and over the</span> <span data-start="193.069" data-end="195.53">last six months flow has actually been</span> <span data-start="195.53" data-end="197.42">more actively developed and react in</span> <span data-start="197.42" data-end="201.859">terms of contributions to master and to</span> <span data-start="201.859" data-end="204.379">compare flow and react again for no good</span> <span data-start="204.379" data-end="207.079">reason let's look at the punch cards of</span> <span data-start="207.079" data-end="210.38">the projects we can see that flow</span> <span data-start="210.38" data-end="213.65">contributors really hate contributing on</span> </p>
<p><span data-start="213.65" data-end="216.919">Sunday mornings and they ship the</span> <span data-start="216.919" data-end="221.93">hardest on Fridays but all nonsense</span> <span data-start="221.93" data-end="224.329">aside what what what is this well what</span> <span data-start="224.329" data-end="228.56">does it do how does it work so imagine</span> <span data-start="228.56" data-end="231.26">that the blue dots are JavaScript files</span> <span data-start="231.26" data-end="234.319">or modules if you will interconnected</span> <span data-start="234.319" data-end="236.78">and depending on each other what flow</span> <span data-start="236.78" data-end="239.239">does is it looks at those files parses</span> <span data-start="239.239" data-end="241.25">them and creates from the raw source</span> <span data-start="241.25" data-end="242.63">code this kind of format that it</span> <span data-start="242.63" data-end="247.37">understands and once all the files have</span> <span data-start="247.37" data-end="249.65">been parsed in this way we end up with</span> <span data-start="249.65" data-end="253.819">what is called a flow chart and using</span> <span data-start="253.819" data-end="255.44">the flow chart and this special format</span> <span data-start="255.44" data-end="257.959">flow notes down what your code is doing</span> <span data-start="257.959" data-end="260.419">for example what types go into functions</span> <span data-start="260.419" data-end="262.52">and come out of functions either by</span> <span data-start="262.52" data-end="264.949">inferring them or getting hints from</span> <span data-start="264.949" data-end="268.28">developers what kind of hints am I</span> <span data-start="268.28" data-end="270.919">talking about the hints are the type</span> <span data-start="270.919" data-end="272.78">annotations that they put to the</span> <span data-start="272.78" data-end="274.669">parameters and return types of functions</span> <span data-start="274.669" data-end="276.529">you can see that the</span> <span data-start="276.529" data-end="278.329">parameter has been annotated to be a</span> <span data-start="278.329" data-end="280.159">number and the return type of this</span> <span data-start="280.159" data-end="284.059">function must always be a string this is</span> <span data-start="284.059" data-end="285.529">an example of a function the flow can</span> <span data-start="285.529" data-end="290.119">fully understand flow is an opt-in tool</span> <span data-start="290.119" data-end="292.039">so we put this special line at the top</span> <span data-start="292.039" data-end="294.229">of files that we want to enable type</span> <span data-start="294.229" data-end="296.299">checking in this way it's really easy to</span> <span data-start="296.299" data-end="298.459">incrementally type check our large code</span> <span data-start="298.459" data-end="300.589">base that can be really important and</span> <span data-start="300.589" data-end="304.939">even vital to some projects you may not</span> <span data-start="304.939" data-end="306.529">notice that this isn't actually valid</span> </p>
<p><span data-start="306.529" data-end="308.059">JavaScript code if you try to run this</span> <span data-start="308.059" data-end="310.519">you'll get a syntax error and that's</span> <span data-start="310.519" data-end="312.739">because of the type annotations but</span> <span data-start="312.739" data-end="316.459">luckily flow support type annotations</span> <span data-start="316.459" data-end="318.709">inside of comments so the below function</span> <span data-start="318.709" data-end="320.299">is actually valid JavaScript and you can</span> <span data-start="320.299" data-end="324.409">run that but most projects nowadays use</span> <span data-start="324.409" data-end="327.349">some kind of transporation step so it's</span> <span data-start="327.349" data-end="328.759">really easy to just strip the type</span> <span data-start="328.759" data-end="330.859">annotations from the above function with</span> <span data-start="330.859" data-end="332.689">something like babe will precede react</span> <span data-start="332.689" data-end="338.599">or flow remove types but why would we</span> <span data-start="338.599" data-end="340.789">want to do this we have to type more as</span> <span data-start="340.789" data-end="343.669">in typing on our keyboards we're adding</span> <span data-start="343.669" data-end="346.069">restrictions to the code isn't a point</span> <span data-start="346.069" data-end="347.989">of dynamic languages to be faster</span> <span data-start="347.989" data-end="352.189">development and flexible and these</span> <span data-start="352.189" data-end="353.689">questions kind of bring us to the next</span> <span data-start="353.689" data-end="355.399">chapter of the talk which is why I</span> <span data-start="355.399" data-end="358.189">usually use it let me make it clear that</span> <span data-start="358.189" data-end="361.729">type checking might not be useful in all</span> <span data-start="361.729" data-end="364.639">projects if the project this small scope</span> <span data-start="364.639" data-end="366.649">tour short live it doesn't really</span> <span data-start="366.649" data-end="368.869">benefit as much from type checking that</span> <span data-start="368.869" data-end="370.969">being said flow is an opt-in tool so</span> <span data-start="370.969" data-end="373.099">it's really easy to just type check few</span> <span data-start="373.099" data-end="377.939">files and then go about your business</span> <span data-start="377.949" data-end="380.419">one of the most compelling reasons to</span> <span data-start="380.419" data-end="385.249">use type checker is bug prevention this</span> <span data-start="385.249" data-end="388.009">function should always return an object</span> <span data-start="388.009" data-end="390.919">no matter what it gets if it gets an</span> <span data-start="390.919" data-end="394.279">object its return that object else it</span> <span data-start="394.279" data-end="397.099">should return an empty object but this</span> <span data-start="397.099" data-end="399.349">function has a classic javascript bug in</span> <span data-start="399.349" data-end="406.4">it can anyone see it take a sec</span> <span data-start="406.41" data-end="410.32">ya know right so in JavaScript no</span> <span data-start="410.32" data-end="412.09">there's actually an object so if you</span> <span data-start="412.09" data-end="413.53">would pass null to this function would</span> <span data-start="413.53" data-end="416.17">go through it unharmed it won't resolve</span> <span data-start="416.17" data-end="418.89">to an empty object like we expect it to</span> <span data-start="418.89" data-end="422.41">so how we go about fixing this we could</span> <span data-start="422.41" data-end="427.93">just add a simple mail check but this is</span> <span data-start="427.93" data-end="429.67">exactly the kind of errors that flow can</span> <span data-start="429.67" data-end="432.82">help you find if we would have added</span> <span data-start="432.82" data-end="435.25">type annotations to this function pull</span> <span data-start="435.25" data-end="436.66">over the totals hey this thing you're</span> <span data-start="436.66" data-end="438.55">doing right here is not okay you have to</span> <span data-start="438.55" data-end="442.96">check for now notice the type annotation</span> <span data-start="442.96" data-end="444.88">on the x parameter has a question mark</span> <span data-start="444.88" data-end="447.58">in front of it and that tells flow that</span> </p>
<p><span data-start="447.58" data-end="449.65">X might be an object but it could also</span> <span data-start="449.65" data-end="452.17">be null or  so it's kind of a</span> <span data-start="452.17" data-end="456.85">maybe object other cases for using a</span> <span data-start="456.85" data-end="458.29">static type checker other than bug</span> <span data-start="458.29" data-end="460.78">prevention like this are auto completion</span> <span data-start="460.78" data-end="463.48">and refactoring tools as well as that</span> <span data-start="463.48" data-end="467.95">code elimination not all of those have</span> <span data-start="467.95" data-end="469.72">been implemented into useful tools back</span> <span data-start="469.72" data-end="472.3">by flow but auto-completion has and I'll</span> <span data-start="472.3" data-end="481.54">go over that in sac so what can I do you</span> <span data-start="481.54" data-end="485.17">can do auto completion so this is a</span> <span data-start="485.17" data-end="488.11">retouched action created it might</span> <span data-start="488.11" data-end="489.58">provide some context to those of you who</span> <span data-start="489.58" data-end="491.44">know Redux but is not important for this</span> <span data-start="491.44" data-end="494.92">example we're importing action types</span> <span data-start="494.92" data-end="497.11">from another file and the action types</span> <span data-start="497.11" data-end="499.72">are fully under flow fully understands</span> <span data-start="499.72" data-end="502.09">these action types it knows all the</span> <span data-start="502.09" data-end="504.16">properties on the object and the types</span> <span data-start="504.16" data-end="507.91">of those properties here I'm using a</span> <span data-start="507.91" data-end="510.31">plug-in called nuclide for the atom text</span> <span data-start="510.31" data-end="513.43">editor it's it's developed by Facebook</span> <span data-start="513.43" data-end="516.099">and it heavily integrates with flow it</span> <span data-start="516.099" data-end="518.89">provides type checks and safe and in</span> <span data-start="518.89" data-end="522.34">line adults just like each lens and also</span> <span data-start="522.34" data-end="524.71">type coverage so I can show you which</span> <span data-start="524.71" data-end="526.54">types flow can infer and which ones it</span> <span data-start="526.54" data-end="533.8">doesn't really understand</span> <span data-start="533.81" data-end="537.51">want to start typing the action types we</span> <span data-start="537.51" data-end="539.37">can see that we get Auto completion for</span> <span data-start="539.37" data-end="542.16">all of the properties and here I tried</span> <span data-start="542.16" data-end="543.78">to access the error and throw and I can</span> <span data-start="543.78" data-end="548.28">see that there are strings and this auto</span> <span data-start="548.28" data-end="551.25">completion applies to all JavaScript</span> <span data-start="551.25" data-end="554.67">native objects and all imports of</span> <span data-start="554.67" data-end="560.71">libraries that you have definitions for</span> <span data-start="560.72" data-end="563.4">fluids great support for a lot of new</span> </p>
<p><span data-start="563.4" data-end="566.49">JavaScript features and it ships with</span> <span data-start="566.49" data-end="569.19">support for native node libraries and</span> <span data-start="569.19" data-end="573.67">native jscript JavaScript objects</span> <span data-start="573.68" data-end="576.21">there's enough official repository that</span> <span data-start="576.21" data-end="581.03">is trying to gather all of this these</span> <span data-start="581.03" data-end="583.8">type signatures for all kinds of</span> <span data-start="583.8" data-end="590.14">libraries you can also write your own</span> <span data-start="590.15" data-end="593.28">it's also possible to do a little bit</span> <span data-start="593.28" data-end="595.31">more complex things with type parameters</span> <span data-start="595.31" data-end="598.26">so the big R and the big you here are</span> <span data-start="598.26" data-end="600.3">just placeholders for some type that you</span> <span data-start="600.3" data-end="606.99">will pass into this type this is a type</span> <span data-start="606.99" data-end="609.24">which describes an object which is a van</span> <span data-start="609.24" data-end="611.31">method that behaves exactly like the</span> <span data-start="611.31" data-end="613.86">done method of a promise so it's kind of</span> <span data-start="613.86" data-end="616.2">like an object which which is promise</span> <span data-start="616.2" data-end="617.82">like it behaves a little bit like a</span> <span data-start="617.82" data-end="622.71">promise and another thing the flow</span> <span data-start="622.71" data-end="626.19">supports really well is react react is</span> <span data-start="626.19" data-end="629.46">also developed by Facebook so naturally</span> <span data-start="629.46" data-end="631.14">flow can understand a lot about react</span> <span data-start="631.14" data-end="635.24">code let's look at one example of how</span> <span data-start="635.24" data-end="639.72">how flow can help reactive elbers so</span> <span data-start="639.72" data-end="643.53">flow can actually replace the the</span> <span data-start="643.53" data-end="645.96">reactor prop types type checking the run</span> <span data-start="645.96" data-end="648.9">the runtime type check that react you</span> <span data-start="648.9" data-end="652.11">can you can do with react so you can you</span> <span data-start="652.11" data-end="654.09">can throw away the runtime type checking</span> <span data-start="654.09" data-end="657.3">in favor of static type checking here</span> <span data-start="657.3" data-end="659.55">you can see a coffee image component</span> <span data-start="659.55" data-end="663">which only has one prop its format and</span> <span data-start="663" data-end="665.02">it can either be P&G or J</span> <span data-start="665.02" data-end="670.36">back so if we start to use the coffee in</span> <span data-start="670.36" data-end="674.71">it's in our application and we pass it a</span> <span data-start="674.71" data-end="677.94">format and if we give it something else</span> <span data-start="677.94" data-end="683.19">like a gif will get an inline error and</span> <span data-start="683.19" data-end="685.78">the error says that this string isn't in</span> <span data-start="685.78" data-end="688.6">the string item that you told me the</span> <span data-start="688.6" data-end="692.25">format is so this can be really useful</span> <span data-start="692.25" data-end="694.96">just for completeness sake we could have</span> <span data-start="694.96" data-end="696.55">implemented coffee images to save this</span> <span data-start="696.55" data-end="698.08">component and flow and support for that</span> <span data-start="698.08" data-end="707.37">as well so what can't do this section is</span> <span data-start="707.37" data-end="712.6">pretty short and pretty specific it</span> <span data-start="712.6" data-end="714.94">can't warn about additional properties</span> <span data-start="714.94" data-end="719.5">declared on a components prop type this</span> <span data-start="719.5" data-end="720.76">is an example of what I'm talking about</span> <span data-start="720.76" data-end="722.86">we have a hallow component which is only</span> <span data-start="722.86" data-end="726.49">has one prop name and if we invoke it</span> <span data-start="726.49" data-end="728.89">with another property like H we don't</span> <span data-start="728.89" data-end="731.41">get matter at all this is something that</span> <span data-start="731.41" data-end="735.16">the full team is looking into and will</span> <span data-start="735.16" data-end="739.35">probably be improved in the near future</span> <span data-start="739.35" data-end="741.76">the root cause of this is that flow</span> <span data-start="741.76" data-end="744.31">doesn't really support exact object I'm</span> <span data-start="744.31" data-end="746.77">kind of going to skip this slide but I</span> <span data-start="746.77" data-end="749.26">want it in the slide deck so you can</span> <span data-start="749.26" data-end="754.33">look at it later if you want to another</span> <span data-start="754.33" data-end="756.25">thing that is problematic with flow are</span> <span data-start="756.25" data-end="758.47">non-native data structures and what I</span> <span data-start="758.47" data-end="760.18">mean by non-native data structures are</span> <span data-start="760.18" data-end="762.37">their searches that don't behave like</span> <span data-start="762.37" data-end="765.25">normal JavaScript native data structures</span> <span data-start="765.25" data-end="769.06">like array and object for example we're</span> <span data-start="769.06" data-end="771.25">using immutable J's a lot and it's</span> <span data-start="771.25" data-end="773.53">really difficult to model mutable data</span> <span data-start="773.53" data-end="775.99">structures and flow I think it's mainly</span> <span data-start="775.99" data-end="778.36">because of how the API is constructed if</span> <span data-start="778.36" data-end="779.92">you're going to access a property deep</span> <span data-start="779.92" data-end="782.02">down in our object you have to give it a</span> <span data-start="782.02" data-end="783.91">key path which is an array of strings</span> <span data-start="783.91" data-end="788.41">it's really hard to model that but the</span> <span data-start="788.41" data-end="790.69">good news is that in a recent QA the</span> <span data-start="790.69" data-end="792.64">fluid flow team revealed that better</span> <span data-start="792.64" data-end="797.49">support for immutability is in the works</span> <span data-start="797.5" data-end="799.81">again I'm kind of going to skip this</span> <span data-start="799.81" data-end="801.94">slide this is this is how we're doing it</span> <span data-start="801.94" data-end="807.84">right now it's not really that good and</span> <span data-start="807.84" data-end="811.33">you can see that the kyare I was talking</span> <span data-start="811.33" data-end="814.75">about the keypad on line fourteen again</span> </p>
<p><span data-start="814.75" data-end="815.8">I'm going to skip this slide you can</span> <span data-start="815.8" data-end="820.51">look at it later if you want to this is</span> <span data-start="820.51" data-end="822.85">the last section of the talk I'll go</span> <span data-start="822.85" data-end="824.8">over some of the lessons learned then</span> <span data-start="824.8" data-end="830.56">kind of our experiences using flow so</span> <span data-start="830.56" data-end="832.24">the first point i want to make is but</span> <span data-start="832.24" data-end="834.16">it's super easy to start using an</span> <span data-start="834.16" data-end="837.01">existing project we have internal tools</span> <span data-start="837.01" data-end="839.05">that amount to about 60,000 lines of</span> </p>
<p><span data-start="839.05" data-end="840.94">JavaScript code and we started type</span> <span data-start="840.94" data-end="842.47">checking just a few files to see how it</span> <span data-start="842.47" data-end="845.41">felt and flow even copped some existing</span> <span data-start="845.41" data-end="847.24">errors while we're integrating it</span> <span data-start="847.24" data-end="849.34">indoors are a codebase incrementally</span> <span data-start="849.34" data-end="852.55">that would just what we're there since</span> <span data-start="852.55" data-end="857.98">the beginning and sometimes it doesn't</span> <span data-start="857.98" data-end="860.65">really make much sense to type check for</span> <span data-start="860.65" data-end="862.6">example functions which do really basic</span> <span data-start="862.6" data-end="864.55">operations flow can usually infer the</span> <span data-start="864.55" data-end="867.31">types of those functions so here's an</span> <span data-start="867.31" data-end="868.72">example of a function that flow can</span> <span data-start="868.72" data-end="871.51">fully understand you can infer the type</span> <span data-start="871.51" data-end="873.52">of the parameter and the return type of</span> <span data-start="873.52" data-end="876.91">the function and nuclide can really help</span> <span data-start="876.91" data-end="878.41">you here nuclear there's the plugin for</span> <span data-start="878.41" data-end="880.69">the atom text of the door and it can</span> <span data-start="880.69" data-end="882.4">highlight which part of the javascript</span> <span data-start="882.4" data-end="885.19">file flow can infer and which ones you</span> <span data-start="885.19" data-end="891.85">can't try to avoid type laziness it can</span> <span data-start="891.85" data-end="894.07">be really tempting sometimes to just</span> <span data-start="894.07" data-end="896.95">write object when you're describing a</span> <span data-start="896.95" data-end="899.56">type instead of creating a more</span> <span data-start="899.56" data-end="901.78">descriptive type that conveys more</span> <span data-start="901.78" data-end="904.81">information to flow this is happen to us</span> <span data-start="904.81" data-end="907.15">on several occasion and and it really</span> <span data-start="907.15" data-end="909.76">diminishes the benefits of static type</span> <span data-start="909.76" data-end="914.01">checking so try to avoid doing this and</span> <span data-start="914.01" data-end="917.8">do this instead notice the difference in</span> <span data-start="917.8" data-end="929.65">the power of parameter type annotation</span> <span data-start="929.66" data-end="932.81">adding type annotations in some cases</span> <span data-start="932.81" data-end="934.31">has made a code a little bit more</span> <span data-start="934.31" data-end="938.33">understandable and readable and when</span> <span data-start="938.33" data-end="939.38">you're looking at code that someone</span> <span data-start="939.38" data-end="941.21">somebody else wrote it kind of takes</span> <span data-start="941.21" data-end="943.66">just a little bit less mental power to</span> <span data-start="943.66" data-end="948.11">understand what what's going on I love</span> <span data-start="948.11" data-end="952.37">healthy discussion has also surfaced as</span> <span data-start="952.37" data-end="954.2">an effect of using the flow type system</span> <span data-start="954.2" data-end="957.11">for example in code reviews questions</span> <span data-start="957.11" data-end="958.49">like should this be able to return</span> <span data-start="958.49" data-end="960.59">or should this parameter be</span> <span data-start="960.59" data-end="963.53">optional are discussed so it really has</span> <span data-start="963.53" data-end="969.02">a positive effect on code quality so to</span> <span data-start="969.02" data-end="971.9">sum it up flow has been a great success</span> <span data-start="971.9" data-end="974.36">at quizup it's really improved our</span> <span data-start="974.36" data-end="976.73">development experience by a lot and I</span> <span data-start="976.73" data-end="978.71">recommend using that usually try it out</span> <span data-start="978.71" data-end="980.03">if you're maintaining a JavaScript code</span> <span data-start="980.03" data-end="983.39">bitch and I hope some of this stuff blew</span> <span data-start="983.39" data-end="985.82">your mind but just in case that no one's</span> <span data-start="985.82" data-end="987.2">mind was blown I'm going to blow this</span> </p>
</section>