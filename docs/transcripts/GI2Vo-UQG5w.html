<section>
<p><span data-start="6.14" data-end="10.32">hey everybody I'm Shelly 4 and today I'm</span> <span data-start="10.32" data-end="11.94">gonna talk a little bit about the</span> <span data-start="11.94" data-end="16.08">process of API and modernization for a</span> <span data-start="16.08" data-end="18.66">little brief background on me I work</span> <span data-start="18.66" data-end="21">full-time on the electron project on</span> <span data-start="21" data-end="23.64">behalf of github where I've been for the</span> <span data-start="23.64" data-end="27.06">past about two and a half years this</span> <span data-start="27.06" data-end="30.119">work has also allowed me to explore and</span> <span data-start="30.119" data-end="32.73">actively contribute to a pretty wide</span> <span data-start="32.73" data-end="34.95">range of open-source projects and</span> <span data-start="34.95" data-end="37.68">committees including node chromium and</span> <span data-start="37.68" data-end="41.34">tc39 I'm based in San Francisco drink a</span> <span data-start="41.34" data-end="42.96">lot of coffee and do a lot of crossword</span> <span data-start="42.96" data-end="47.809">puzzles so what is modernization</span> <span data-start="47.809" data-end="50.94">modernization means very little out of</span> <span data-start="50.94" data-end="54.26">context especially in the software world</span> <span data-start="54.26" data-end="57.93">it's a fun fancy buzzword but I can't</span> <span data-start="57.93" data-end="60.75">really give a whole presentation on how</span> <span data-start="60.75" data-end="63.12">you can apply its principles to your own</span> <span data-start="63.12" data-end="65.549">organization without first establishing</span> <span data-start="65.549" data-end="68.97">some shared context for what I mean</span> <span data-start="68.97" data-end="72.38">when I say it in service of that goal</span> <span data-start="72.38" data-end="75.119">let's start with the most basic</span> <span data-start="75.119" data-end="77.729">definition of the term I could find as</span> <span data-start="77.729" data-end="82.009">it applies to software so as we see here</span> <span data-start="82.009" data-end="84.86">modernization can be understood as the</span> <span data-start="84.86" data-end="89.13">conversion rewriting or porting of a</span> <span data-start="89.13" data-end="92.27">legacy system to a modern language</span> <span data-start="92.27" data-end="96.06">software library protocol or hardware</span> <span data-start="96.06" data-end="100.229">platform that's an OK start but it still</span> <span data-start="100.229" data-end="101.79">leaves us with quite a lot of unanswered</span> <span data-start="101.79" data-end="104.67">questions what does it mean for</span> <span data-start="104.67" data-end="107.549">something to even be modern there's</span> <span data-start="107.549" data-end="109.259">still a lot of wiggle room in that</span> <span data-start="109.259" data-end="112.38">definition that I just gave and even</span> <span data-start="112.38" data-end="114.54">some of its different components might</span> <span data-start="114.54" data-end="116.7">not all be understood in the same way</span> <span data-start="116.7" data-end="120.21">even amongst you the audience for</span> <span data-start="120.21" data-end="122.88">example a highly doubt that we all</span> <span data-start="122.88" data-end="125.52">understand modern language to be the</span> <span data-start="125.52" data-end="129.509">same thing for example beyond the Erb</span> <span data-start="129.509" data-end="132.48">sorry beyond that can modernization even</span> <span data-start="132.48" data-end="133.17">be universe</span> <span data-start="133.17" data-end="136.83">we understood across contexts the answer</span> <span data-start="136.83" data-end="139.59">to that question for better or worse is</span> <span data-start="139.59" data-end="143.16">that it depends and I know that's</span> <span data-start="143.16" data-end="144.51">probably not something a lot of you</span> <span data-start="144.51" data-end="147.54">really love to hear it's kind of like</span> <span data-start="147.54" data-end="149.55">running a non-deterministic software</span> <span data-start="149.55" data-end="152.52">program it doesn't really inspire a</span> <span data-start="152.52" data-end="156.03">whole lot of confidence but I'm not</span> <span data-start="156.03" data-end="157.65">really here today to give you 30 minutes</span> <span data-start="157.65" data-end="160.89">worth of maybe so let's unpack that a</span> <span data-start="160.89" data-end="164.25">little bit further modernization is</span> <span data-start="164.25" data-end="166.23">something that takes on different</span> <span data-start="166.23" data-end="169.86">meanings in different contexts and so</span> <span data-start="169.86" data-end="172.98">for you to really understand and gain</span> <span data-start="172.98" data-end="175.88">concrete lessons from its discussion I'm</span> <span data-start="175.88" data-end="179.25">going to ground it in practical examples</span> <span data-start="179.25" data-end="182.01">from something I work on every day the</span> <span data-start="182.01" data-end="185.519">electron framework modernization as</span> <span data-start="185.519" data-end="186.66">we'll soon see</span> <span data-start="186.66" data-end="190.739">can also feel a little bit like this but</span> <span data-start="190.739" data-end="192.45">there's not always an obvious path to</span> <span data-start="192.45" data-end="195.63">take and whichever one you do take can</span> <span data-start="195.63" data-end="200.13">often lay waste your best laid plans you</span> <span data-start="200.13" data-end="202.07">may now be wondering why is</span> <span data-start="202.07" data-end="204.66">modernization even something that we</span> <span data-start="204.66" data-end="207.26">actively want to do in the first place I</span> <span data-start="207.26" data-end="209.94">haven't exactly opened with the most</span> <span data-start="209.94" data-end="212.57">shiny and positive take on the thing</span> <span data-start="212.57" data-end="216.6">some principle we modernize in order to</span> <span data-start="216.6" data-end="220.47">retain and extend the value of a legacy</span> <span data-start="220.47" data-end="223.53">investment which is an investment that</span> <span data-start="223.53" data-end="227.519">continues to provide core services to an</span> <span data-start="227.519" data-end="230.73">organization there's a lot of different</span> <span data-start="230.73" data-end="233.28">reasons that you as a developer might</span> <span data-start="233.28" data-end="235.65">want to do this but for better or worse</span> <span data-start="235.65" data-end="238.23">it's something that almost all of us</span> <span data-start="238.23" data-end="242.97">will at some point need to do now some</span> <span data-start="242.97" data-end="244.859">of you might be familiar with electron</span> <span data-start="244.859" data-end="246.87">but before you really get to the good</span> <span data-start="246.87" data-end="248.91">stuff I think I'm gonna do a brief</span> <span data-start="248.91" data-end="251.7">overview just to make sure that we all</span> <span data-start="251.7" data-end="254.16">have the same base understanding of what</span> <span data-start="254.16" data-end="258.15">it is electron is the JavaScript</span> <span data-start="258.15" data-end="260.63">framework that allows you to write</span> <span data-start="260.63" data-end="263.46">desktop applications with web</span> <span data-start="263.46" data-end="266.889">technologies like JavaScript HTML</span> <span data-start="266.889" data-end="271.09">and CSS it can be used on Windows Mac</span> <span data-start="271.09" data-end="274.919">and Linux as well as a variety of other</span> <span data-start="274.919" data-end="277.9">architectures and platforms like Windows</span> <span data-start="277.9" data-end="282.37">on arm and even Raspberry Pi it works by</span> <span data-start="282.37" data-end="285.09">integrating chromium and node in</span> <span data-start="285.09" data-end="287.979">addition to a layer of C++</span> <span data-start="287.979" data-end="291.55">an objective-c which allows it to create</span> <span data-start="291.55" data-end="296.889">fully formed GUI GUIs as well as take</span> <span data-start="296.889" data-end="299.65">advantage of file system and networking</span> <span data-start="299.65" data-end="304.659">capabilities with node typically desktop</span> <span data-start="304.659" data-end="307.75">applications for an operating system are</span> <span data-start="307.75" data-end="310.75">written in the native language for each</span> <span data-start="310.75" data-end="316.18">if we take Windows Mac and Linux that</span> <span data-start="316.18" data-end="318.58">now means that you have three teams</span> <span data-start="318.58" data-end="320.74">writing three different desktop</span> <span data-start="320.74" data-end="323.169">applications to do functionally the same</span> <span data-start="323.169" data-end="327.159">thing this can be pretty costly both in</span> <span data-start="327.159" data-end="329.8">terms of monetary resources feature and</span> <span data-start="329.8" data-end="331.839">development and velocity and developer</span> <span data-start="331.839" data-end="335.169">hours with electron you will only need</span> <span data-start="335.169" data-end="337.659">to write your app once and then it will</span> <span data-start="337.659" data-end="342.819">work on all applicable platforms and we</span> <span data-start="342.819" data-end="344.409">can't really understand how</span> <span data-start="344.409" data-end="347.529">modernization affects users without</span> <span data-start="347.529" data-end="352.33">first discussing API versioning an API</span> <span data-start="352.33" data-end="356.919">is fundamentally a contract that you as</span> <span data-start="356.919" data-end="360.37">a maintainer establish with the people</span> <span data-start="360.37" data-end="363.52">consuming your API about how it's going</span> <span data-start="363.52" data-end="368.8">to behave when developers have their API</span> <span data-start="368.8" data-end="372.31">is consumed the consumers are implicitly</span> <span data-start="372.31" data-end="376.18">signing their end of a contract and you</span> <span data-start="376.18" data-end="379.3">as the maintainer are implicitly signing</span> <span data-start="379.3" data-end="383.5">your end you can think of an API a</span> <span data-start="383.5" data-end="386.949">little bit like buying a new car when</span> <span data-start="386.949" data-end="389.169">you buy that car you've probably got a</span> <span data-start="389.169" data-end="391.99">set of expectations for how that car is</span> <span data-start="391.99" data-end="394.779">going to behave and how various controls</span> <span data-start="394.779" data-end="397.18">on the car or going to affect that cars</span> <span data-start="397.18" data-end="398.169">movement</span> <span data-start="398.169" data-end="400.509">now let's say you've bought that car and</span> <span data-start="400.509" data-end="403.03">it's pretty it's shiny and you get on</span> <span data-start="403.03" data-end="404.71">the highway and you're going 80 and then</span> <span data-start="404.71" data-end="406.93">suddenly the accelerator and the brake</span> <span data-start="406.93" data-end="409.9">they switch now I don't know about you I</span> <span data-start="409.9" data-end="412.659">love a good adventure but I really like</span> <span data-start="412.659" data-end="414.43">knowing what my gas pedal is gonna do a</span> <span data-start="414.43" data-end="417.849">hundred percent of the time your users</span> <span data-start="417.849" data-end="421.449">are the same they don't want to risk</span> <span data-start="421.449" data-end="423.729">their app on something they don't feel</span> <span data-start="423.729" data-end="428.02">like they can trust so now back to one</span> <span data-start="428.02" data-end="429.879">of the questions I had on an earlier</span> <span data-start="429.879" data-end="433.02">slide how do you set these expectations</span> <span data-start="433.02" data-end="436.27">one of the more common ways to set</span> <span data-start="436.27" data-end="439.33">expectations for an API contract is</span> <span data-start="439.33" data-end="442.509">known as semantic versioning or cember</span> <span data-start="442.509" data-end="446.319">in this approach to versioning a version</span> <span data-start="446.319" data-end="449.139">is specified with three numeric</span> <span data-start="449.139" data-end="452.939">components first major then minor</span> <span data-start="452.939" data-end="457.87">finally patch as its name suggests each</span> <span data-start="457.87" data-end="460.9">one of these components confers semantic</span> <span data-start="460.9" data-end="464.409">meaning and allows a consumer to quickly</span> <span data-start="464.409" data-end="467.139">understand how updating their app to a</span> <span data-start="467.139" data-end="469.3">new version is going to affect their</span> <span data-start="469.3" data-end="472.719">apps potential behavior major version</span> <span data-start="472.719" data-end="475.599">bumps are made when you add incompatible</span> <span data-start="475.599" data-end="479.469">or braking API changes minor bumps</span> <span data-start="479.469" data-end="482.229">indicate new but backwards compatible</span> <span data-start="482.229" data-end="485.349">functionality and then finally patch</span> <span data-start="485.349" data-end="488.169">updates indicate fixes to existing</span> <span data-start="488.169" data-end="492.189">functionality but nothing new for our</span> <span data-start="492.189" data-end="495.159">purposes today I'm gonna focus on three</span> <span data-start="495.159" data-end="498.58">main buckets modernization spurned by</span> <span data-start="498.58" data-end="501.46">updates to platform modernization</span> <span data-start="501.46" data-end="504.779">related to dependencies and then finally</span> <span data-start="504.779" data-end="507.25">modernization related to programming</span> <span data-start="507.25" data-end="510.839">language specification first off</span> <span data-start="510.839" data-end="515.26">platform modernization operating systems</span> <span data-start="515.26" data-end="519.329">maintain their own unique API surfaces</span> <span data-start="519.329" data-end="522.43">which don't always adhere to the kind of</span> </p>
<p><span data-start="522.43" data-end="525.93">API contract you might be accustomed to</span> <span data-start="525.93" data-end="528.43">platforms can't really adhere to</span> <span data-start="528.43" data-end="530.35">something like cember when they're</span> <span data-start="530.35" data-end="531.41">versioning</span> <span data-start="531.41" data-end="534.44">so instead they often choose to make</span> <span data-start="534.44" data-end="537.53">updates to their API surface area based</span> <span data-start="537.53" data-end="539.93">on updates with their operating system</span> <span data-start="539.93" data-end="543.26">versions as you might imagine this can</span> <span data-start="543.26" data-end="545.66">create some mismatches with libraries</span> <span data-start="545.66" data-end="548.35">which often need to work across multiple</span> <span data-start="548.35" data-end="552.4">versions of a single operating system</span> <span data-start="552.4" data-end="555.86">one example of this is Apple's App Gate</span> <span data-start="555.86" data-end="558.83">framework which contains all the objects</span> <span data-start="558.83" data-end="561.23">that a developer needs in order to</span> <span data-start="561.23" data-end="563.87">implement the user interface for a Mac</span> </p>
<p><span data-start="563.87" data-end="568.04">OS app like Windows panels menus</span> <span data-start="568.04" data-end="570.5">scrollers text fields you get the idea</span> <span data-start="570.5" data-end="574.43">as such frameworks like electron which</span> <span data-start="574.43" data-end="576.08">hook into you and depend on this</span> <span data-start="576.08" data-end="579.5">framework need to monitor and adapt for</span> <span data-start="579.5" data-end="582.32">changes as Apple releases new versions</span> <span data-start="582.32" data-end="586.37">of its operating system the question we</span> <span data-start="586.37" data-end="589.61">then want to ask ourselves is what's the</span> <span data-start="589.61" data-end="593.57">optimal way to account for this let's</span> <span data-start="593.57" data-end="595.55">look at how electron handled a recent</span> <span data-start="595.55" data-end="598.79">snafu with just such an issue if you've</span> <span data-start="598.79" data-end="601.13">used Mac OS you'll know that there's a</span> <span data-start="601.13" data-end="604.49">tree bar at the top of the screen the</span> <span data-start="604.49" data-end="607.28">tree bar can contain individual elements</span> <span data-start="607.28" data-end="610.28">which are known to Apple as NS status</span> <span data-start="610.28" data-end="615.14">items electron exposes a module that</span> <span data-start="615.14" data-end="617.53">enables you to create and control</span> <span data-start="617.53" data-end="620.24">individual instances of these elements</span> <span data-start="620.24" data-end="623.72">through the tree module from the very</span> <span data-start="623.72" data-end="627.92">first release of Mac OS until 10.14</span> <span data-start="627.92" data-end="631.4">mojave developers could use instance</span> <span data-start="631.4" data-end="634.67">properties on these NS status items to</span> <span data-start="634.67" data-end="637.6">customize their appearance and behavior</span> <span data-start="637.6" data-end="641.72">then in Mac OS 10 point 10 they</span> <span data-start="641.72" data-end="644.21">introduced a new instance property the</span> <span data-start="644.21" data-end="646.67">button property which also allows you to</span> <span data-start="646.67" data-end="648.83">customize the appearance and behavior of</span> <span data-start="648.83" data-end="652.19">the items at the same time they</span> <span data-start="652.19" data-end="654.38">deprecated the previous instance</span> <span data-start="654.38" data-end="657.85">properties and then finally in Mac OS</span> <span data-start="657.85" data-end="659.57">10.15 katalina</span> <span data-start="659.57" data-end="661.57">these deprecated instance properties</span> <span data-start="661.57" data-end="664.07">finally ceased to work</span> <span data-start="664.07" data-end="666.47">an electron this created some pretty</span> <span data-start="666.47" data-end="668.93">nasty consequences we've been using the</span> <span data-start="668.93" data-end="671.99">previous instance properties up until</span> <span data-start="671.99" data-end="674.329">then and only actually realize this</span> <span data-start="674.329" data-end="675.829">issue had happened because the tray</span> <span data-start="675.829" data-end="677.57">issues when we are testing our catalina</span> <span data-start="677.57" data-end="679.699">literally just stopped showing up which</span> <span data-start="679.699" data-end="682.73">is you can imagine was pretty awesome so</span> <span data-start="682.73" data-end="685.339">as a result we had to quickly and</span> <span data-start="685.339" data-end="688.19">efficiently modernize our own code for</span> <span data-start="688.19" data-end="690.98">these new constraints but there is one</span> <span data-start="690.98" data-end="694.399">catch the button property no longer</span> <span data-start="694.399" data-end="697.18">allowed developers to manually manage</span> <span data-start="697.18" data-end="699.85">highlighting of NS status items</span> <span data-start="699.85" data-end="702.38">highlighting in this case is the way</span> <span data-start="702.38" data-end="704.029">that the icon appears when you click on</span> <span data-start="704.029" data-end="706.67">it previously you could set it to always</span> <span data-start="706.67" data-end="708.709">appear highlighted only appear</span> <span data-start="708.709" data-end="711.05">highlighted when clicked or never appear</span> <span data-start="711.05" data-end="713.839">highlighted so how do we handle this</span> <span data-start="713.839" data-end="716.6">change by necessity this is a breaking</span> <span data-start="716.6" data-end="720.29">change what we chose to do is to remove</span> <span data-start="720.29" data-end="723.23">this method from electron version 7</span> <span data-start="723.23" data-end="726.29">without replacement since at the time it</span> <span data-start="726.29" data-end="729.139">was in an early beta and so we wouldn't</span> <span data-start="729.139" data-end="732.49">be breaking our API contract by doing so</span> <span data-start="732.49" data-end="735.44">we then noted that the tray would</span> <span data-start="735.44" data-end="738.17">experience display issues in older</span> <span data-start="738.17" data-end="740.51">versions of electron and encouraged</span> <span data-start="740.51" data-end="745.13">users to update where they could as you</span> <span data-start="745.13" data-end="748.149">consider your own apps platform</span> <span data-start="748.149" data-end="750.98">modernization strategies there are some</span> <span data-start="750.98" data-end="752.99">things I think that electrons experience</span> <span data-start="752.99" data-end="756.47">demonstrates here we don't always make</span> <span data-start="756.47" data-end="758.959">the right choices and so we want to</span> <span data-start="758.959" data-end="761.779">share both our successes and the things</span> <span data-start="761.779" data-end="764.72">that we think we can do better we</span> <span data-start="764.72" data-end="766.639">determined these breaking changes in</span> <span data-start="766.639" data-end="769.04">practice because one of the core team</span> <span data-start="769.04" data-end="771.38">was doing some testing on Mac OS</span> </p>
<p><span data-start="771.38" data-end="773.839">Catalina but this change was ultimately</span> <span data-start="773.839" data-end="776.48">more reactionary than I think we wanted</span> <span data-start="776.48" data-end="780.05">it to be it's important to strategize</span> <span data-start="780.05" data-end="782.089">research around upcoming platform</span> <span data-start="782.089" data-end="784.939">changes in advance so that you don't end</span> <span data-start="784.939" data-end="787.009">up scrambling to minimize and user</span> <span data-start="787.009" data-end="790.85">changes in the same way that we did how</span> <span data-start="790.85" data-end="792.74">do we done that we could have avoided</span> <span data-start="792.74" data-end="796.07">users experiencing any braking changes</span> <span data-start="796.07" data-end="798.32">more than one supportive version of</span> <span data-start="798.32" data-end="801.8">electron next up is language</span> <span data-start="801.8" data-end="805.01">modernization language modernization is</span> <span data-start="805.01" data-end="807.23">that relating to the programming</span> <span data-start="807.23" data-end="810.32">language in which a framework or library</span> <span data-start="810.32" data-end="813.35">is consumed that's important in the case</span> <span data-start="813.35" data-end="816.56">of electron because while electron is a</span> </p>
<p><span data-start="816.56" data-end="818.75">JavaScript framework its underlying</span> <span data-start="818.75" data-end="821.06">architecture is actually written in a</span> <span data-start="821.06" data-end="824.15">combination of Objective C and C++ and</span> <span data-start="824.15" data-end="828.04">so modernization and electron is</span> <span data-start="828.04" data-end="830.75">modernization that allows developers to</span> <span data-start="830.75" data-end="833.53">use new additions or changes to</span> <span data-start="833.53" data-end="836.57">JavaScript as they are added to the</span> <span data-start="836.57" data-end="838.7">JavaScript frame or to the JavaScript</span> <span data-start="838.7" data-end="840.32">language through the Ekman script</span> <span data-start="840.32" data-end="843.35">specification a variety of these are</span> <span data-start="843.35" data-end="846.83">outlined here some you might be more</span> <span data-start="846.83" data-end="850.22">familiar with include promises async</span> <span data-start="850.22" data-end="852.44">await optional catch binding our</span> <span data-start="852.44" data-end="855.65">knowledge coalescing some of these</span> <span data-start="855.65" data-end="858.38">capabilities get to electron for free</span> <span data-start="858.38" data-end="861.59">when we update our dependencies like v8</span> <span data-start="861.59" data-end="864.44">but we'll save that for later and focus</span> <span data-start="864.44" data-end="866.66">on the more costly updates right now</span> <span data-start="866.66" data-end="870.38">a notable effort in the electron</span> <span data-start="870.38" data-end="873.5">codebase this past spring was known as</span> <span data-start="873.5" data-end="876.59">the promise of vacation initiative which</span> <span data-start="876.59" data-end="880.09">took most of our asynchronous api's and</span> <span data-start="880.09" data-end="882.86">transformed their usage from call back</span> <span data-start="882.86" data-end="886.25">to promise based we undertook this</span> <span data-start="886.25" data-end="888.53">initiative for a variety of the reasons</span> </p>
<p><span data-start="888.53" data-end="891.23">I've already outlined call backs have</span> <span data-start="891.23" data-end="894.35">their place undoubtedly but developers</span> <span data-start="894.35" data-end="896.72">can write arguably simpler and more</span> <span data-start="896.72" data-end="900.32">elegant code and open the doors to even</span> <span data-start="900.32" data-end="902.48">more functionality when they can write</span> <span data-start="902.48" data-end="906.29">promise based code so how do we do this</span> <span data-start="906.29" data-end="908.96">and then how did we communicate this to</span> <span data-start="908.96" data-end="911.63">our users we actually chose to do it</span> <span data-start="911.63" data-end="914">natively and I can see some of you look</span> <span data-start="914" data-end="915.47">a little bit confused by that aren't</span> <span data-start="915.47" data-end="918.05">promises a JavaScript thing so the</span> <span data-start="918.05" data-end="919.73">answer to that is actually yes but also</span> <span data-start="919.73" data-end="923.93">know to do this we actually used an</span> <span data-start="923.93" data-end="927.62">engine called v8 which Google wrote for</span> </p>
<p><span data-start="927.62" data-end="928.75">Google Chrome</span> <span data-start="928.75" data-end="931.839">it implements the same specification as</span> <span data-start="931.839" data-end="935.949">JavaScript but in C++ by writing a</span> <span data-start="935.949" data-end="938.319">wrapper over its promise functionality</span> <span data-start="938.319" data-end="941.829">we could enable our api's to cleanly</span> <span data-start="941.829" data-end="944.709">return promises at the C++ an</span> <span data-start="944.709" data-end="948.009">objective-c level without needing to</span> <span data-start="948.009" data-end="951.16">paper over them at the JavaScript level</span> <span data-start="951.16" data-end="953.35">with something from node like util dot</span> <span data-start="953.35" data-end="957.04">promise fie so basically promises but</span> <span data-start="957.04" data-end="959.62">with surprise multi-threading this looks</span> <span data-start="959.62" data-end="961.75">a little horrifying I recognize but</span> <span data-start="961.75" data-end="964.209">honestly it was pretty fun and arguably</span> <span data-start="964.209" data-end="967.149">a lot better for consumers we also</span> <span data-start="967.149" data-end="970.6">created a document to track progress of</span> <span data-start="970.6" data-end="973.48">this migration and conform to our own</span> <span data-start="973.48" data-end="976.389">cember contract by ensuring that the</span> <span data-start="976.389" data-end="978.97">changes were backwards compatible where</span> <span data-start="978.97" data-end="981.55">possible which means that they supported</span> <span data-start="981.55" data-end="983.97">both callbacks and promises</span> <span data-start="983.97" data-end="986.949">simultaneously for at least one major</span> <span data-start="986.949" data-end="990.129">version to ensure the developers had</span> <span data-start="990.129" data-end="991.99">enough lead time to make necessary</span> <span data-start="991.99" data-end="996.16">changes we also logged these backwards</span> <span data-start="996.16" data-end="998.559">compatible functions with deprecation</span> <span data-start="998.559" data-end="1002.279">warnings at runtime so is this a totally</span> <span data-start="1002.279" data-end="1005.879">smooth process also no on a high level</span> <span data-start="1005.879" data-end="1008.879">we accomplished our goal with relatively</span> <span data-start="1008.879" data-end="1011.25">few hiccups but that's not to say we</span> <span data-start="1011.25" data-end="1014.129">didn't hit any snags and one of our more</span> <span data-start="1014.129" data-end="1016.17">fun bugs we actually found that if you</span> <span data-start="1016.17" data-end="1018.689">called one API in just the right way a</span> <span data-start="1018.689" data-end="1021.329">native promise chain would trigger an</span> <span data-start="1021.329" data-end="1023.819">uncatchable promise rejection that the</span> <span data-start="1023.819" data-end="1026.069">user would only ever see as a silent</span> <span data-start="1026.069" data-end="1028.319">failure because we'd actually introduced</span> <span data-start="1028.319" data-end="1031.799">a way to write non typesafe C++ Jeff</span> </p>
<p><span data-start="1031.799" data-end="1035.85">Goldblum was ashamed of us for that so</span> <span data-start="1035.85" data-end="1037.5">what have we learned from that adventure</span> <span data-start="1037.5" data-end="1040.789">and what can you take away from it</span> <span data-start="1040.789" data-end="1044.789">for starters deprecating methods well is</span> <span data-start="1044.789" data-end="1048.36">a non-trivial task that shouldn't be</span> <span data-start="1048.36" data-end="1052.23">done haphazardly we should have been</span> <span data-start="1052.23" data-end="1057.07">more clear upfront that all changes what</span> <span data-start="1057.07" data-end="1060.01">be taking place in one major version</span> <span data-start="1060.01" data-end="1062.68">since we occasionally still get issues</span> <span data-start="1062.68" data-end="1065.19">saying that a promise based function</span> <span data-start="1065.19" data-end="1067.93">didn't work for promises when it hadn't</span> <span data-start="1067.93" data-end="1070.84">yet been converted we're looking towards</span> <span data-start="1070.84" data-end="1072.82">our docks to help us better fill that</span> <span data-start="1072.82" data-end="1075.61">gap we do want to continue our</span> <span data-start="1075.61" data-end="1079.21">transition path pattern however feedback</span> <span data-start="1079.21" data-end="1081.46">from our users indicated that they felt</span> <span data-start="1081.46" data-end="1083.67">we provided clear context and</span> <span data-start="1083.67" data-end="1086.41">information on how to upgrade methods</span> <span data-start="1086.41" data-end="1087.88">that they were already using in</span> <span data-start="1087.88" data-end="1091.99">production finally we move to dependency</span> <span data-start="1091.99" data-end="1095.41">modernization this is modernization that</span> <span data-start="1095.41" data-end="1097.48">enables access to more modern</span> <span data-start="1097.48" data-end="1099.85">capabilities through dependencies and</span> <span data-start="1099.85" data-end="1103.45">not through code we wrote ourselves for</span> <span data-start="1103.45" data-end="1106.57">electron three key dependencies of this</span> <span data-start="1106.57" data-end="1111.49">nature our chromium v8 and node updating</span> <span data-start="1111.49" data-end="1114.52">each of these gives users access to new</span> <span data-start="1114.52" data-end="1117.7">features but also brings with them</span> <span data-start="1117.7" data-end="1120.58">potentially breaking changes and so we</span> <span data-start="1120.58" data-end="1122.44">need to be very mindful about how we</span> <span data-start="1122.44" data-end="1127.12">coordinate these upgrades upgrading node</span> <span data-start="1127.12" data-end="1130.48">for example gives us access to new file</span> <span data-start="1130.48" data-end="1132.85">system and networking capabilities like</span> <span data-start="1132.85" data-end="1136.87">for example or cursive RM der since node</span> <span data-start="1136.87" data-end="1140.14">also adheres December minor bumps in</span> <span data-start="1140.14" data-end="1143.08">node also necessitate minor bumps an</span> <span data-start="1143.08" data-end="1145.51">electron and major bumps in node</span> <span data-start="1145.51" data-end="1149.14">necessitate major bumps an electron by</span> <span data-start="1149.14" data-end="1151.72">upgrading node we ensure that we stay on</span> <span data-start="1151.72" data-end="1153.91">top of security updates and see</span> <span data-start="1153.91" data-end="1155.83">performance improvements thanks to the</span> <span data-start="1155.83" data-end="1157.51">great work of the benchmarking working</span> <span data-start="1157.51" data-end="1160.87">group within notes governance chromium</span> <span data-start="1160.87" data-end="1163.06">is a bit of a different story and that</span> <span data-start="1163.06" data-end="1165.67">they don't really adhere to the same API</span> <span data-start="1165.67" data-end="1168.19">contract we do and they don't support</span> <span data-start="1168.19" data-end="1170.26">older versions passed a fairly short</span> <span data-start="1170.26" data-end="1173.71">tail we're therefore always chasing the</span> <span data-start="1173.71" data-end="1177.07">tip of chromium source tree security and</span> <span data-start="1177.07" data-end="1179.5">performance are our primary forcing</span> <span data-start="1179.5" data-end="1181.84">functions here as the most secure</span> <span data-start="1181.84" data-end="1184.57">chromium is always going to be the</span> <span data-start="1184.57" data-end="1187.21">latest chromium and the performance of</span> <span data-start="1187.21" data-end="1190.57">chromium and therefore electron is also</span> <span data-start="1190.57" data-end="1191.11">going to be</span> <span data-start="1191.11" data-end="1193.33">better the more recent a version of</span> <span data-start="1193.33" data-end="1196.809">chromium that we're using we also do get</span> <span data-start="1196.809" data-end="1198.88">some upgrades and new capabilities for</span> <span data-start="1198.88" data-end="1201.64">free from chromium like for example the</span> <span data-start="1201.64" data-end="1204.16">wick lock API that allows you to control</span> <span data-start="1204.16" data-end="1206.64">screen sleep on different platforms</span> <span data-start="1206.64" data-end="1209.29">these capabilities are still a work in</span> <span data-start="1209.29" data-end="1211.87">progress and are constantly being scoped</span> <span data-start="1211.87" data-end="1214.21">out and experimented on through what's</span> <span data-start="1214.21" data-end="1218.08">known as the fugu initiative finally v8</span> </p>
<p><span data-start="1218.08" data-end="1222.34">I mentioned v8 a bit earlier on as</span> <span data-start="1222.34" data-end="1224.41">Google's JavaScript engine that</span> <span data-start="1224.41" data-end="1226.39">implements the equi script specification</span> <span data-start="1226.39" data-end="1230.38">but in C++ for electrons purposes it's</span> <span data-start="1230.38" data-end="1232.9">also very important that we try to use</span> <span data-start="1232.9" data-end="1235.179">the latest compatible version that we</span> <span data-start="1235.179" data-end="1238.33">can this enables us to access the latest</span> <span data-start="1238.33" data-end="1240.39">features of the JavaScript spec</span> <span data-start="1240.39" data-end="1242.44">including some that you can see on the</span> <span data-start="1242.44" data-end="1245.919">slide here on the left-hand portion v8</span> <span data-start="1245.919" data-end="1247.809">also works extremely hard to be</span> <span data-start="1247.809" data-end="1250.45">performin and so as we look to make</span> <span data-start="1250.45" data-end="1253.36">electron faster and less costly it's</span> <span data-start="1253.36" data-end="1255.669">also in our best interest to track v8 as</span> <span data-start="1255.669" data-end="1259.41">closely as we can and now to the lessons</span> <span data-start="1259.41" data-end="1261.91">we've managed to consistently be</span> <span data-start="1261.91" data-end="1264.16">updating against chromium's tip of tree</span> <span data-start="1264.16" data-end="1267.7">and the latest stable node but our newly</span> <span data-start="1267.7" data-end="1270.16">short feedback loop was not without a</span> <span data-start="1270.16" data-end="1273.7">few difficult lessons sometimes your</span> <span data-start="1273.7" data-end="1275.47">dependencies won't all play nicely in</span> <span data-start="1275.47" data-end="1277.69">the sandbox together and if you know</span> <span data-start="1277.69" data-end="1278.83">that's gonna be the case</span> <span data-start="1278.83" data-end="1281.26">it's best to make your version bundling</span> <span data-start="1281.26" data-end="1284.22">decisions as far in advance as possible</span> <span data-start="1284.22" data-end="1286.54">we didn't really do that well for</span> <span data-start="1286.54" data-end="1288.79">electron version 6 and so at one point</span> <span data-start="1288.79" data-end="1291.01">we ended up having to scramble a little</span> <span data-start="1291.01" data-end="1293.38">bit and had to use a slowly less than</span> <span data-start="1293.38" data-end="1295.57">stable version of node version 12</span> <span data-start="1295.57" data-end="1298.09">because we were releasing slowly before</span> <span data-start="1298.09" data-end="1302.35">went stable this was unfortunate as it</span> <span data-start="1302.35" data-end="1303.91">didn't really change too much from the</span> <span data-start="1303.91" data-end="1306.82">consumer end but it did mildly change</span> <span data-start="1306.82" data-end="1308.62">some of their dependency modernization</span> <span data-start="1308.62" data-end="1314.169">expectations you as a developer probably</span> <span data-start="1314.169" data-end="1316.36">want to give your users the ability to</span> <span data-start="1316.36" data-end="1318.429">use whatever you've defined as the</span> <span data-start="1318.429" data-end="1321.46">latest and the greatest and your users</span> <span data-start="1321.46" data-end="1324.04">want to access these spicey latest and</span> <span data-start="1324.04" data-end="1324.55">greatest</span> <span data-start="1324.55" data-end="1327.94">without communication however these two</span> <span data-start="1327.94" data-end="1330.7">converging desires are like a chemical</span> <span data-start="1330.7" data-end="1333.1">reaction that given just the wrong</span> <span data-start="1333.1" data-end="1335.56">measurement of a single ingredient can</span> <span data-start="1335.56" data-end="1338.47">accidentally explode the whole lab what</span> <span data-start="1338.47" data-end="1340.54">if you and your users have different</span> <span data-start="1340.54" data-end="1343.23">understandings of latest and greatest</span> <span data-start="1343.23" data-end="1345.6">that's a non-trivial possibility</span> <span data-start="1345.6" data-end="1347.62">considering that you need to take into</span> <span data-start="1347.62" data-end="1349.9">account different platforms opinions</span> <span data-start="1349.9" data-end="1352.48">conventions and what you yourselves are</span> <span data-start="1352.48" data-end="1355.33">functionally capable of delivering the</span> <span data-start="1355.33" data-end="1358.54">only way to set expectations and ensure</span> <span data-start="1358.54" data-end="1360.73">that your users are aligned with your</span> <span data-start="1360.73" data-end="1363.04">efforts is to communicate with them as</span> <span data-start="1363.04" data-end="1365.65">far in advance and with this high a</span> <span data-start="1365.65" data-end="1369.75">degree of detail as possible to that end</span> <span data-start="1369.75" data-end="1372.67">optimal communication can be understood</span> <span data-start="1372.67" data-end="1376.3">to fall into three big buckets ensuring</span> <span data-start="1376.3" data-end="1378.64">redundancy communicating early and</span> <span data-start="1378.64" data-end="1382.57">providing context your users aren't and</span> <span data-start="1382.57" data-end="1384.7">shouldn't be responsible for digging</span> <span data-start="1384.7" data-end="1386.52">into the deep dark depths of your</span> <span data-start="1386.52" data-end="1388.75">documentation to figure out what's</span> <span data-start="1388.75" data-end="1391.75">coming up soon that burden is on you the</span> <span data-start="1391.75" data-end="1395.38">maintainer upcoming changes especially</span> <span data-start="1395.38" data-end="1397.96">those that break or alter existing</span> <span data-start="1397.96" data-end="1400.66">functionality should be as discoverable</span> <span data-start="1400.66" data-end="1403.45">and as context rich as you can make them</span> <span data-start="1403.45" data-end="1406.93">if there's only a single place that your</span> <span data-start="1406.93" data-end="1409.63">users can go to determine upcoming</span> <span data-start="1409.63" data-end="1411.93">changes that's a single point of failure</span> <span data-start="1411.93" data-end="1414.49">they missed that and they might get</span> <span data-start="1414.49" data-end="1418.09">blindsided in my opinion the opposite of</span> <span data-start="1418.09" data-end="1420.43">a single point of failure is not</span> <span data-start="1420.43" data-end="1423.43">necessarily no points of failure instead</span> <span data-start="1423.43" data-end="1426.57">its multiple discrete points of failure</span> <span data-start="1426.57" data-end="1429.49">we want to ensure that your users can</span> <span data-start="1429.49" data-end="1433.09">miss one or even two notices and still</span> <span data-start="1433.09" data-end="1435.31">be made aware of changes which can only</span> <span data-start="1435.31" data-end="1437.98">happen if you saturate the information</span> <span data-start="1437.98" data-end="1440.31">in as many places as possible</span> <span data-start="1440.31" data-end="1443.46">and next communicating early</span> <span data-start="1443.46" data-end="1445.84">communication is always great on</span> <span data-start="1445.84" data-end="1448.33">principle but not all communication</span> <span data-start="1448.33" data-end="1451.09">benefits users equally telling your</span> <span data-start="1451.09" data-end="1453.49">consumers about a change right as it is</span> <span data-start="1453.49" data-end="1454.99">about to affect them</span> <span data-start="1454.99" data-end="1456.42">is for all intents and purposes</span> <span data-start="1456.42" data-end="1458.23">indistinguishable from not telling them</span> <span data-start="1458.23" data-end="1461.2">at all to that end you should look</span> <span data-start="1461.2" data-end="1463.48">towards informing your users of upcoming</span> <span data-start="1463.48" data-end="1466.33">changes as soon as plans are clear</span> <span data-start="1466.33" data-end="1468.52">enough that it's unlikely you'll need to</span> <span data-start="1468.52" data-end="1472.179">alter or recant them your users should</span> <span data-start="1472.179" data-end="1474.85">also be made aware of when a change is</span> <span data-start="1474.85" data-end="1477.01">scheduled to take effect on what</span> <span data-start="1477.01" data-end="1479.23">versions that change is going to take</span> <span data-start="1479.23" data-end="1482.35">effect and what their need going to need</span> <span data-start="1482.35" data-end="1485.32">to consider in doing work for dealing</span> <span data-start="1485.32" data-end="1486.28">with your changes</span> <span data-start="1486.28" data-end="1488.71">a team of five might and probably is</span> <span data-start="1488.71" data-end="1491.11">going to be incredible but they're gonna</span> <span data-start="1491.11" data-end="1492.76">have to consider this work in a</span> <span data-start="1492.76" data-end="1494.8">fundamentally different way than a team</span> <span data-start="1494.8" data-end="1500.35">of say 50 might and finally context when</span> <span data-start="1500.35" data-end="1502.54">you make changes to your API surface</span> <span data-start="1502.54" data-end="1504.79">there's going to be a reason that you're</span> <span data-start="1504.79" data-end="1507.34">doing so unless there's a security</span> <span data-start="1507.34" data-end="1509.8">related or similar concern requiring</span> <span data-start="1509.8" data-end="1512.65">discretion why not share that context</span> <span data-start="1512.65" data-end="1514.78">with your users it'll help them</span> <span data-start="1514.78" data-end="1516.85">understand your processes more and</span> <span data-start="1516.85" data-end="1519.96">likely foster better community relations</span> <span data-start="1519.96" data-end="1523.21">when providing that context there's four</span> <span data-start="1523.21" data-end="1525.49">main questions I think are important to</span> <span data-start="1525.49" data-end="1528.52">ask yourself why are you making these</span> <span data-start="1528.52" data-end="1531.22">changes how does this benefit your users</span> <span data-start="1531.22" data-end="1535.179">how might this hurt them and then how</span> <span data-start="1535.179" data-end="1538.27">can they prepare answering these and</span> <span data-start="1538.27" data-end="1541">provide a strong contextual base for</span> <span data-start="1541" data-end="1543.1">smoother updates as your project</span> <span data-start="1543.1" data-end="1547.559">continues to grow unfortunately</span> <span data-start="1547.559" data-end="1549.46">communication can help against some</span> <span data-start="1549.46" data-end="1552.429">limits you can communicate your list of</span> <span data-start="1552.429" data-end="1554.88">breaking changes really far in advance</span> <span data-start="1554.88" data-end="1558.04">but if every major version has a hundred</span> <span data-start="1558.04" data-end="1560.29">breaking changes it's gonna be difficult</span> <span data-start="1560.29" data-end="1562.809">to keep up and the cost of updating your</span> <span data-start="1562.809" data-end="1565.48">library might become too high for some</span> <span data-start="1565.48" data-end="1568.66">of your users to that end it's important</span> <span data-start="1568.66" data-end="1570.97">to be intentional about minimizing churn</span> <span data-start="1570.97" data-end="1573.4">where possible you don't want to throw</span> <span data-start="1573.4" data-end="1575.17">your users onto an endless hamster wheel</span> <span data-start="1575.17" data-end="1577.53">of Terror because as we see here</span> <span data-start="1577.53" data-end="1580.66">everyone suffers and you don't want that</span> <span data-start="1580.66" data-end="1583.24">your consumers don't want that nobody</span> <span data-start="1583.24" data-end="1585.43">wants that</span> <span data-start="1585.43" data-end="1588.03">and as vital as modernization can be</span> <span data-start="1588.03" data-end="1590.89">sometimes the best choice can be either</span> <span data-start="1590.89" data-end="1593.91">to defer or not to modernize in</span> <span data-start="1593.91" data-end="1596.23">considering whether this is the decision</span> <span data-start="1596.23" data-end="1598.75">best for you and your team there are</span> <span data-start="1598.75" data-end="1600.19">several things you're going to want to</span> <span data-start="1600.19" data-end="1603.1">take into account chiefly as I've said</span> <span data-start="1603.1" data-end="1604.39">over and over again through this</span> <span data-start="1604.39" data-end="1608.2">presentation context is key the</span> <span data-start="1608.2" data-end="1610.78">information you have today might guide</span> <span data-start="1610.78" data-end="1612.01">you towards a slightly different</span> <span data-start="1612.01" data-end="1613.81">decision than the information you have</span> <span data-start="1613.81" data-end="1616.24">six months from now or the information</span> <span data-start="1616.24" data-end="1619.06">you had six months ago code base is live</span> <span data-start="1619.06" data-end="1621.52">and breathe and your decision now</span> <span data-start="1621.52" data-end="1623.41">doesn't mean you can't take a different</span> <span data-start="1623.41" data-end="1625.96">path down the road you want to ensure</span> <span data-start="1625.96" data-end="1628.06">that this change will have veritable</span> <span data-start="1628.06" data-end="1631.57">positive impact on your project perhaps</span> <span data-start="1631.57" data-end="1634.12">end-users won't see a change but it'll</span> <span data-start="1634.12" data-end="1635.86">decrease maintenance burden across big</span> <span data-start="1635.86" data-end="1638.77">parts of your codebase the real danger</span> <span data-start="1638.77" data-end="1641.62">lies in modernization for its own sake</span> <span data-start="1641.62" data-end="1645.49">if you can't prove impact to some part</span> <span data-start="1645.49" data-end="1647.35">of your ecosystem you should ask</span> <span data-start="1647.35" data-end="1649.63">yourself are these developer hours gonna</span> <span data-start="1649.63" data-end="1651.91">be worth it if it would increase</span> <span data-start="1651.91" data-end="1653.89">maintenance cost or increased technical</span> <span data-start="1653.89" data-end="1656.23">debt that would also likely be a vote</span> <span data-start="1656.23" data-end="1660.16">against electron has learned a lot from</span> <span data-start="1660.16" data-end="1663.04">both its successes and its failures on</span> <span data-start="1663.04" data-end="1665.71">all these fronts these examples are</span> <span data-start="1665.71" data-end="1668.74">provided in light of our experiences can</span> <span data-start="1668.74" data-end="1670.9">hopefully help you to shed light on how</span> <span data-start="1670.9" data-end="1673.24">to make better choices in your own code</span> <span data-start="1673.24" data-end="1675.58">bases but our constraints and</span> <span data-start="1675.58" data-end="1678.1">considerations are going to be different</span> <span data-start="1678.1" data-end="1680.98">than yours and so it follows that your</span> <span data-start="1680.98" data-end="1684.01">decisions may also be when you return to</span> <span data-start="1684.01" data-end="1686.26">your code bases next week I encourage</span> <span data-start="1686.26" data-end="1688.3">you to view these as heuristics rather</span> <span data-start="1688.3" data-end="1691.03">than rules heuristics require</span> <span data-start="1691.03" data-end="1693.73">situational interpretation but rules</span> <span data-start="1693.73" data-end="1697.45">hold fast across contexts you also have</span> <span data-start="1697.45" data-end="1699.7">primary responsibility for the success</span> <span data-start="1699.7" data-end="1702.82">of you users you should want the barrier</span> <span data-start="1702.82" data-end="1704.95">to their success and using your library</span> <span data-start="1704.95" data-end="1708.03">or framework to be as low as possible</span> <span data-start="1708.03" data-end="1710.98">finally all modernization requires</span> <span data-start="1710.98" data-end="1713.65">non-trivial work if this is something</span> <span data-start="1713.65" data-end="1715.42">that matters to you it should never be</span> <span data-start="1715.42" data-end="1718.36">planned as an afterthought and finally I</span> <span data-start="1718.36" data-end="1719.14">want to hear from</span> <span data-start="1719.14" data-end="1720.76">you do you have thoughts on the future</span> <span data-start="1720.76" data-end="1723.37">of electron the boundary between web and</span> <span data-start="1723.37" data-end="1725.14">desktop or what it's like to work</span> <span data-start="1725.14" data-end="1727.18">full-time on open source I'll be around</span> <span data-start="1727.18" data-end="1728.62">for the next two days and be more than</span> <span data-start="1728.62" data-end="1730.39">happy to answer any of your questions</span> <span data-start="1730.39" data-end="1732.02">thank you very much</span> </p>
</section>