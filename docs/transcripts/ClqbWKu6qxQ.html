<section>
<p><span data-start="5.19" data-end="9.24">hi everyone i'm lynn clark and I make</span> <span data-start="9.24" data-end="11.61">code cartoons and today I'm going to</span> <span data-start="11.61" data-end="13.709">walk you through the wilds of data</span> <span data-start="13.709" data-end="16.23">handling and react so how you handle</span> <span data-start="16.23" data-end="19.74">state any react application and I call</span> <span data-start="19.74" data-end="21.63">it the wilds because when you first look</span> <span data-start="21.63" data-end="24.03">at the landscape it can seem like it's</span> <span data-start="24.03" data-end="26.16">an untamed profusion of different</span> <span data-start="26.16" data-end="29.67">options for how to handle data it's</span> <span data-start="29.67" data-end="30.93">really hard to figure out when you're</span> <span data-start="30.93" data-end="33.45">looking at it what you might want to use</span> <span data-start="33.45" data-end="36.199">and why you might want to use it but</span> <span data-start="36.199" data-end="38.399">when you look closer you'll see that</span> <span data-start="38.399" data-end="41.64">there are three groupings of ways to do</span> <span data-start="41.64" data-end="44.1">this and they're actually easier to</span> <span data-start="44.1" data-end="46.05">understand than you might think so I</span> <span data-start="46.05" data-end="47.789">want to go for a whirlwind tour through</span> <span data-start="47.789" data-end="49.71">them so that you can have a better idea</span> <span data-start="49.71" data-end="51.989">when you approach your next appt why you</span> <span data-start="51.989" data-end="55.559">might want to use any one of these so</span> <span data-start="55.559" data-end="59.129">the first of these was flux and I'm</span> <span data-start="59.129" data-end="60.749">going to start with the colonel of the</span> <span data-start="60.749" data-end="64.53">idea that flux introduced that carries</span> <span data-start="64.53" data-end="68.19">through to redux and to relay and that's</span> <span data-start="68.19" data-end="71.73">it don't worry if you don't understand</span> <span data-start="71.73" data-end="73.8">it because this whole project started</span> <span data-start="73.8" data-end="76.86">because I couldn't understand it but</span> <span data-start="76.86" data-end="79.08">once you understand flux this diagram is</span> <span data-start="79.08" data-end="83.49">very clear before explaining the diagram</span> </p>
<p><span data-start="83.49" data-end="86.58">I should explain the problem that flux</span> <span data-start="86.58" data-end="91.08">solves so flux and react both come out</span> <span data-start="91.08" data-end="93.09">of Facebook and they were developed side</span> <span data-start="93.09" data-end="95.01">by side to address a certain set of</span> <span data-start="95.01" data-end="99.42">problems one really good example of this</span> <span data-start="99.42" data-end="102.21">set of problems was the notification bug</span> <span data-start="102.21" data-end="104.28">how many people remember this you know a</span> <span data-start="104.28" data-end="106.91">few years ago you go on facebook and</span> <span data-start="106.91" data-end="109.08">you'd be clicking around and all of a</span> <span data-start="109.08" data-end="110.31">sudden you see a notification for a new</span> <span data-start="110.31" data-end="112.35">message and you click the messages icon</span> <span data-start="112.35" data-end="114.87">and look at your messages and there's no</span> <span data-start="114.87" data-end="117.99">new message and so the notification goes</span> <span data-start="117.99" data-end="120.69">away and you start doing whatever you're</span> <span data-start="120.69" data-end="124.11">doing again and then all the sudden</span> <span data-start="124.11" data-end="126.72">comes back and just keep going back and</span> <span data-start="126.72" data-end="129.149">forth and back and forth and back in</span> <span data-start="129.149" data-end="133.77">this cycle this wasn't just a cycle for</span> <span data-start="133.77" data-end="136.86">you the user it was also a cycle for the</span> <span data-start="136.86" data-end="138.1">team at Facebook</span> <span data-start="138.1" data-end="140.47">you know they'd fix it it'd be resolved</span> <span data-start="140.47" data-end="141.88">for a few weeks and then all the sudden</span> <span data-start="141.88" data-end="145.6">would come back again so they wanted to</span> <span data-start="145.6" data-end="148.36">fix this once and for all and end this</span> <span data-start="148.36" data-end="152.08">cycle of unpredictability when they</span> <span data-start="152.08" data-end="153.76">looked at it more closely they realize</span> <span data-start="153.76" data-end="156.7">the source of the problems was the way</span> <span data-start="156.7" data-end="160.78">that they were handling data they had</span> <span data-start="160.78" data-end="163.99">these models and the models which held</span> <span data-start="163.99" data-end="166.18">the data would pass the data to the</span> <span data-start="166.18" data-end="168.16">views which would present the data to</span> <span data-start="168.16" data-end="170.47">the user would format it in HTML for the</span> <span data-start="170.47" data-end="174.07">user the views also provided a user</span> <span data-start="174.07" data-end="175.96">interface for the user to put data back</span> <span data-start="175.96" data-end="178.36">into the system so the views needed to</span> <span data-start="178.36" data-end="179.86">communicate back to the model they need</span> <span data-start="179.86" data-end="182.74">to update that data in the model but</span> <span data-start="182.74" data-end="184.3">sometimes when you may have changed to</span> <span data-start="184.3" data-end="186.37">one model another model would need to</span> <span data-start="186.37" data-end="188.14">update in response so you have this</span> <span data-start="188.14" data-end="191.23">communication between models too so this</span> <span data-start="191.23" data-end="193.09">starts to look kind of like an epic game</span> <span data-start="193.09" data-end="195.55">of pong it's really hard to figure out</span> <span data-start="195.55" data-end="199.72">where the ball is going to land throw in</span> <span data-start="199.72" data-end="201.55">the fact that these updates could be</span> <span data-start="201.55" data-end="203.89">triggered asynchronously you know you</span> <span data-start="203.89" data-end="207.12">could have a update that comes in and</span> <span data-start="207.12" data-end="209.5">kicks off two more that are happening</span> <span data-start="209.5" data-end="212.44">concurrently and that's kind of like</span> <span data-start="212.44" data-end="214.6">taking a bag of ping pong balls and</span> <span data-start="214.6" data-end="215.89">throwing it into your pong game like</span> <span data-start="215.89" data-end="216.97">everything is bouncing all over</span> <span data-start="216.97" data-end="219.16">everywhere as incredibly hard to figure</span> <span data-start="219.16" data-end="224.08">out where everything's go and so that</span> <span data-start="224.08" data-end="227.26">brings us back to this diagram that's</span> <span data-start="227.26" data-end="229.12">what you'll find if you see the flux</span> <span data-start="229.12" data-end="232.75">docks and this is the way that Facebook</span> <span data-start="232.75" data-end="235.6">solved that problem of the ping pong</span> <span data-start="235.6" data-end="237.27">balls just bouncing all over the place</span> <span data-start="237.27" data-end="240.72">it was with a unidirectional data flow</span> <span data-start="240.72" data-end="244.42">so you'll notice that this data flows</span> <span data-start="244.42" data-end="246.19">from one thing to the other my guess the</span> <span data-start="246.19" data-end="248.38">end it starts back at the beginning and</span> <span data-start="248.38" data-end="250.96">you should also notice that the first</span> <span data-start="250.96" data-end="253.72">thing there the first thing that starts</span> <span data-start="253.72" data-end="256.84">off this cycle is the action that's</span> <span data-start="256.84" data-end="261.25">going to become more important later but</span> <span data-start="261.25" data-end="263.2">if you don't understand what the parts</span> <span data-start="263.2" data-end="264.97">do I don't think this diagram even</span> <span data-start="264.97" data-end="266.38">though it shows you this unidirectional</span> <span data-start="266.38" data-end="268.479">data flow it doesn't give you a good</span> <span data-start="268.479" data-end="271.63">mental model of what exactly is going</span> <span data-start="271.63" data-end="277.27">on and it certainly didn't help me what</span> <span data-start="277.27" data-end="280.81">did help me was thinking about all the</span> <span data-start="280.81" data-end="282.25">different parts of flux as different</span> <span data-start="282.25" data-end="286.03">characters working together to take on a</span> <span data-start="286.03" data-end="289.12">certain task so I want to introduce you</span> <span data-start="289.12" data-end="290.92">to the characters that I have in my head</span> <span data-start="290.92" data-end="292.42">and hopefully that helps you understand</span> <span data-start="292.42" data-end="298.9">flux too so the first of these is the</span> <span data-start="298.9" data-end="300.61">action creator and I think of the action</span> <span data-start="300.61" data-end="302.73">creator as a telegraph operator</span> <span data-start="302.73" data-end="305.2">basically other characters come to the</span> <span data-start="305.2" data-end="307.42">action creator with a change that they</span> <span data-start="307.42" data-end="308.98">want to make and they have the action</span> <span data-start="308.98" data-end="312.31">creator format an action that represents</span> <span data-start="312.31" data-end="314.41">that change the action creators the one</span> <span data-start="314.41" data-end="316.21">that knows how the rest of the system</span> <span data-start="316.21" data-end="318.01">what language the rest of the system</span> <span data-start="318.01" data-end="319.45">speaks and it knows how to format these</span> <span data-start="319.45" data-end="321.13">actions in a way that the rest of the</span> <span data-start="321.13" data-end="325.06">system will understand them each change</span> <span data-start="325.06" data-end="327.67">that of you wants to make the action</span> <span data-start="327.67" data-end="329.29">creator turns into an object that</span> <span data-start="329.29" data-end="332.62">represents it the object has a type</span> <span data-start="332.62" data-end="334.69">something like message created message</span> <span data-start="334.69" data-end="339.16">read message delete and a payload which</span> <span data-start="339.16" data-end="341.35">tells it what message to do this to what</span> <span data-start="341.35" data-end="343.57">the text of that message is so you</span> <span data-start="343.57" data-end="346.65">define the list of those types like a</span> <span data-start="346.65" data-end="350.74">message create and have a full list of</span> <span data-start="350.74" data-end="353.32">all of the different possible actions in</span> <span data-start="353.32" data-end="355.03">your system so this is kind of nice</span> <span data-start="355.03" data-end="358.06">because it provides an API you know if a</span> <span data-start="358.06" data-end="359.83">new developer comes onto your projects</span> <span data-start="359.83" data-end="361.39">you just point them to this list of</span> <span data-start="361.39" data-end="363.34">different actions in your system and</span> <span data-start="363.34" data-end="365.11">they can know all the different things</span> <span data-start="365.11" data-end="369.49">that your system does so once the action</span> <span data-start="369.49" data-end="370.84">creator for mass this action creates</span> <span data-start="370.84" data-end="373.15">this object then it passes it off to the</span> <span data-start="373.15" data-end="376.18">dispatcher and I think of the dispatcher</span> <span data-start="376.18" data-end="379.39">is basically a switchboard operator it's</span> <span data-start="379.39" data-end="382.48">a big registry of callbacks it lists all</span> <span data-start="382.48" data-end="384.37">the stores has a list of all the stores</span> <span data-start="384.37" data-end="386.35">that need to be updated whenever in</span> <span data-start="386.35" data-end="390.1">action comes in and so it will send</span> <span data-start="390.1" data-end="392.47">those actions that come into it to all</span> <span data-start="392.47" data-end="393.79">the stores and I'll do it synchronously</span> <span data-start="393.79" data-end="396.61">it will actually not have different ping</span> <span data-start="396.61" data-end="398.17">pong balls going at the same time it'll</span> <span data-start="398.17" data-end="400.87">make sure that all of the action goes</span> <span data-start="400.87" data-end="402.28">through the stores before it triggers</span> <span data-start="402.28" data-end="404.11">the next one</span> <span data-start="404.11" data-end="406.21">now the flux dispatcher is different</span> <span data-start="406.21" data-end="408.16">from dispatchers in other systems and it</span> <span data-start="408.16" data-end="412.18">is different in that the action is</span> <span data-start="412.18" data-end="414.22">dispatched to every single store and</span> <span data-start="414.22" data-end="415.78">other systems a lot of times the</span> <span data-start="415.78" data-end="417.64">dispatcher will allow you to subscribe</span> <span data-start="417.64" data-end="419.86">to a certain set of actions so your</span> <span data-start="419.86" data-end="421.42">store might say I only want to hear</span> <span data-start="421.42" data-end="423.52">about message create actions and the</span> <span data-start="423.52" data-end="424.81">dispatcher will only send it that kind</span> <span data-start="424.81" data-end="427.3">of action flux sends all of the actions</span> <span data-start="427.3" data-end="429.1">to the store and it's the stores</span> <span data-start="429.1" data-end="431.5">responsibility to say hey I don't really</span> <span data-start="431.5" data-end="433.42">care about this one or I'm going to make</span> <span data-start="433.42" data-end="438.13">a change based on this type so now we</span> <span data-start="438.13" data-end="441.7">get to the store I think of the store as</span> <span data-start="441.7" data-end="444.97">an over controlling bureaucrat all state</span> <span data-start="444.97" data-end="448.08">and state logic live on the store and</span> <span data-start="448.08" data-end="450.61">there are no setters there's no way to</span> <span data-start="450.61" data-end="453.09">get in and change the data in the store</span> <span data-start="453.09" data-end="456.16">except for this action pipeline so I</span> <span data-start="456.16" data-end="457.24">think of it as you know the store is</span> <span data-start="457.24" data-end="459.07">basically saying no you're not going to</span> <span data-start="459.07" data-end="460.93">touch this data only I can touch this</span> <span data-start="460.93" data-end="462.94">data and if you want to make me to make</span> <span data-start="462.94" data-end="464.56">any changes to it you're going to have</span> <span data-start="464.56" data-end="465.4">to go through the official channels</span> <span data-start="465.4" data-end="466.75">you're gonna have to go through the</span> <span data-start="466.75" data-end="471.22">action pipeline once the store has</span> <span data-start="471.22" data-end="473.98">actually made its changes to the data we</span> <span data-start="473.98" data-end="476.74">get to the view and we have a controller</span> <span data-start="476.74" data-end="479.11">view and the view this underneath the</span> <span data-start="479.11" data-end="482.08">controller view so the view is basically</span> <span data-start="482.08" data-end="483.73">a presenter that just takes the data</span> <span data-start="483.73" data-end="486.31">that is given and turns that into the</span> <span data-start="486.31" data-end="487.63">something that the user can understand</span> <span data-start="487.63" data-end="490.93">turns it into HTML it renders the data</span> <span data-start="490.93" data-end="494.32">that it gets from the store the</span> <span data-start="494.32" data-end="495.64">controller view is a little bit more</span> <span data-start="495.64" data-end="497.17">aware of what's going on in the system</span> <span data-start="497.17" data-end="499.3">it basically acts as a middle manager</span> <span data-start="499.3" data-end="501.78">between the store and the presenter it</span> <span data-start="501.78" data-end="505.33">fetches data from the store and gives it</span> <span data-start="505.33" data-end="509.2">to the view underneath it to render so</span> <span data-start="509.2" data-end="510.73">those are the characters in flux now</span> <span data-start="510.73" data-end="512.32">let's take a look at how they all work</span> <span data-start="512.32" data-end="515.26">together to make an application happen</span> <span data-start="515.26" data-end="518.74">and before they start doing their actual</span> <span data-start="518.74" data-end="521.229">tasks they need to initialize they need</span> <span data-start="521.229" data-end="523.09">to do some set up to start talking to</span> <span data-start="523.09" data-end="524.14">each other so we're going to start with</span> <span data-start="524.14" data-end="525.76">a set up and then we'll look at how the</span> <span data-start="525.76" data-end="529.42">application works once it set up so to</span> <span data-start="529.42" data-end="531.01">set up the store will tell the</span> <span data-start="531.01" data-end="533.29">dispatcher what call back to you is</span> <span data-start="533.29" data-end="535.51">they'll say hey here's a call back as</span> <span data-start="535.51" data-end="536.98">soon as an action comes in just let me</span> <span data-start="536.98" data-end="537.48">know</span> <span data-start="537.48" data-end="542.259">and then the controller view will talk</span> <span data-start="542.259" data-end="545.35">to the store and we'll say hey can you</span> <span data-start="545.35" data-end="547.569">give me the state whatever initial state</span> <span data-start="547.569" data-end="549.37">you have and i'm going to send that down</span> <span data-start="549.37" data-end="552.819">to my views and so the store sends the</span> <span data-start="552.819" data-end="554.649">state which the control of you sends</span> <span data-start="554.649" data-end="556.72">down to the views below it to render the</span> <span data-start="556.72" data-end="558.1">this is the initial render of the app</span> <span data-start="558.1" data-end="560.769">and then the controller view goes back</span> <span data-start="560.769" data-end="563.5">up to the store and says and if any</span> <span data-start="563.5" data-end="566.92">updates come in just let me know and so</span> <span data-start="566.92" data-end="572.439">give us the store a call back to call so</span> <span data-start="572.439" data-end="573.91">everybody knows how to talk to each</span> <span data-start="573.91" data-end="577.689">other now and now we can start actually</span> <span data-start="577.689" data-end="581.68">performing having user interactions so</span> <span data-start="581.68" data-end="583.329">the user is going to update the middle</span> <span data-start="583.329" data-end="588.97">number set it to 10 and the view which</span> <span data-start="588.97" data-end="591.279">has received this user interaction is</span> <span data-start="591.279" data-end="592.66">going to go down to the action creator</span> <span data-start="592.66" data-end="594.699">and say hey here's some information can</span> <span data-start="594.699" data-end="596.17">you format in action for me and send it</span> <span data-start="596.17" data-end="598.36">off to the dispatcher so the action</span> </p>
<p><span data-start="598.36" data-end="600.37">Creator creates the action gives it the</span> <span data-start="600.37" data-end="603.459">action type and formats the payload and</span> <span data-start="603.459" data-end="605.97">then sends it off to the dispatcher and</span> <span data-start="605.97" data-end="609.43">then the dispatcher feeds it into the</span> <span data-start="609.43" data-end="612.13">store and of course this is where the</span> <span data-start="612.13" data-end="614.529">store says do I care about this how do i</span> <span data-start="614.529" data-end="616.269">change the data based on this action</span> <span data-start="616.269" data-end="619.81">type so then the store changes the the</span> <span data-start="619.81" data-end="622.689">data that it holds and it lets the</span> <span data-start="622.689" data-end="624.37">control of you know and then the</span> <span data-start="624.37" data-end="626.74">controller view says okay great and asks</span> <span data-start="626.74" data-end="629.49">the store to send down the new data and</span> <span data-start="629.49" data-end="631.99">then we'll pass it into the view below</span> <span data-start="631.99" data-end="638.29">it to rerender so that's flux you know</span> <span data-start="638.29" data-end="640.24">it ended the cycle of unpredictability</span> <span data-start="640.24" data-end="642.55">and all rejoiced and created a hundred</span> <span data-start="642.55" data-end="645.699">different implementations of it and now</span> <span data-start="645.699" data-end="649.99">we move on to redox redux is a lot like</span> <span data-start="649.99" data-end="651.85">flocks so it's just a couple of</span> <span data-start="651.85" data-end="653.98">different couple of differences between</span> </p>
<p><span data-start="653.98" data-end="657.579">Redux and flocks but if sup flux solved</span> <span data-start="657.579" data-end="667.04">the problem of this</span> <span data-start="667.05" data-end="686.319">you</span> <span data-start="686.329" data-end="688.67">but I think that this is a really good</span> <span data-start="688.67" data-end="691.16">use case for illustrating the changes</span> <span data-start="691.16" data-end="695.389">that he made so he was seeing debugging</span> <span data-start="695.389" data-end="697.1">techniques in other communities like hot</span> <span data-start="697.1" data-end="698.779">modular reloading and time travel</span> <span data-start="698.779" data-end="701.149">debugging and he wanted to introduce or</span> <span data-start="701.149" data-end="705.709">improve them and react but before I get</span> <span data-start="705.709" data-end="706.97">into that I should probably explain what</span> <span data-start="706.97" data-end="710.72">those two things are so let's start with</span> <span data-start="710.72" data-end="714.529">hot module reloading imagine that you're</span> <span data-start="714.529" data-end="716.209">developing a to-do application and this</span> <span data-start="716.209" data-end="719.179">is your to-do list object so you've</span> <span data-start="719.179" data-end="721.339">added a few to deuce you know eat sleep</span> <span data-start="721.339" data-end="725.149">and you want to change the way there</span> <span data-start="725.149" data-end="726.679">you're adding the to do's because you've</span> <span data-start="726.679" data-end="728.329">realized that as they are added to the</span> <span data-start="728.329" data-end="730.339">bottom of the list it's kind of hard to</span> <span data-start="730.339" data-end="731.779">tell that you're adding you to do is you</span> <span data-start="731.779" data-end="732.92">want to add them to the top of the list</span> <span data-start="732.92" data-end="734.269">so that people can see the new to do is</span> <span data-start="734.269" data-end="740.869">is coming in now as you're testing this</span> <span data-start="740.869" data-end="743.54">think about changing this ad to do</span> <span data-start="743.54" data-end="745.73">function so that it adds it to the front</span> <span data-start="745.73" data-end="747.29">instead of the back how would you</span> <span data-start="747.29" data-end="749.449">actually see that change happening once</span> <span data-start="749.449" data-end="750.499">you've made the change to the code how</span> <span data-start="750.499" data-end="751.669">would you actually check in your app</span> <span data-start="751.669" data-end="753.86">that it's working well you'd have to</span> <span data-start="753.86" data-end="757.04">reload this object but when you reload</span> <span data-start="757.04" data-end="759.47">the object you lose the state that's on</span> <span data-start="759.47" data-end="761.029">it you lose all of those two dues that</span> <span data-start="761.029" data-end="765.079">you would add in but you can avoid this</span> <span data-start="765.079" data-end="767.509">problem and the way that you do that is</span> <span data-start="767.509" data-end="770.66">by splitting up the object into two</span> <span data-start="770.66" data-end="772.369">different objects one that holds the</span> <span data-start="772.369" data-end="774.23">state and one that holds the</span> <span data-start="774.23" data-end="777.199">functionality that changes the state so</span> <span data-start="777.199" data-end="779.899">then you can reload the object that has</span> <span data-start="779.899" data-end="782.439">the functionality that changes the state</span> <span data-start="782.439" data-end="785.029">but you don't have to reload the object</span> <span data-start="785.029" data-end="788.959">that holds the state so this helps you</span> <span data-start="788.959" data-end="790.759">to bug faster because you don't have to</span> <span data-start="790.759" data-end="792.649">keep replicating the state every time</span> <span data-start="792.649" data-end="794.72">you change every time you fix a little</span> <span data-start="794.72" data-end="798.98">thing in your functionality time travel</span> <span data-start="798.98" data-end="801.799">debugging is kind of similar and what it</span> <span data-start="801.799" data-end="804.35">handles so with time travel debugging</span> <span data-start="804.35" data-end="806.119">let's start about thinking about how you</span> <span data-start="806.119" data-end="809.569">step through to debug a nap so you start</span> <span data-start="809.569" data-end="812.389">with initial state and then you perform</span> <span data-start="812.389" data-end="815.72">an action and that equals a new state</span> <span data-start="815.72" data-end="818.209">your application is in a different state</span> <span data-start="818.209" data-end="820.369">action and then you take another action</span> <span data-start="820.369" data-end="823.91">and another action what if your bug is</span> <span data-start="823.91" data-end="826.999">happening between step 2 and step 3 even</span> <span data-start="826.999" data-end="828.589">though we have this hot module reloading</span> <span data-start="828.589" data-end="831.139">which will keep the state you really</span> <span data-start="831.139" data-end="833.149">need to step backwards in time in order</span> <span data-start="833.149" data-end="835.55">to be able to test that between the</span> <span data-start="835.55" data-end="837.199">second and third action that you're</span> <span data-start="837.199" data-end="843.05">fixing whatever problems there what time</span> <span data-start="843.05" data-end="844.999">travel debugging does is lets you do</span> <span data-start="844.999" data-end="846.769">that it lets you step backwards in time</span> <span data-start="846.769" data-end="848.509">so that when you change your</span> <span data-start="848.509" data-end="850.699">functionality then you can perform that</span> <span data-start="850.699" data-end="852.05">action again and you don't have to do</span> <span data-start="852.05" data-end="856.519">the first or the second one again so</span> <span data-start="856.519" data-end="858.319">what do you need to do in order to make</span> <span data-start="858.319" data-end="859.79">time travel to volume work well you need</span> <span data-start="859.79" data-end="862.249">to get a snapshot of your state at each</span> <span data-start="862.249" data-end="865.61">of these points and how do you do that</span> <span data-start="865.61" data-end="867.319">well you can kind of see it already in</span> <span data-start="867.319" data-end="869.689">the way that I've drawn this you treat</span> <span data-start="869.689" data-end="873.139">this as an equation as a function your</span> <span data-start="873.139" data-end="876.589">initial state comes in and you add the</span> <span data-start="876.589" data-end="879.35">action but you don't change the initial</span> <span data-start="879.35" data-end="881.389">state you don't change that state object</span> <span data-start="881.389" data-end="885.769">you create a new state object and you</span> <span data-start="885.769" data-end="887.869">just keep an array of all these state</span> <span data-start="887.869" data-end="891.98">objects as they're going through this is</span> <span data-start="891.98" data-end="893.48">what people are talking about when they</span> <span data-start="893.48" data-end="894.949">talk about immutability it's the idea</span> <span data-start="894.949" data-end="897.559">that you don't change the things that</span> <span data-start="897.559" data-end="899.119">are coming into your function and you</span> <span data-start="899.119" data-end="901.429">don't change the object itself you just</span> <span data-start="901.429" data-end="904.009">take in some parameters and you output</span> <span data-start="904.009" data-end="907.399">you return you use your return value to</span> <span data-start="907.399" data-end="911.689">to give your caller or the value that it</span> <span data-start="911.689" data-end="915.499">means so Redux makes it possible to do</span> <span data-start="915.499" data-end="917.389">both of these things to do hot module</span> <span data-start="917.389" data-end="919.459">reloading on stateful objects and to do</span> <span data-start="919.459" data-end="922.399">time-travel debugging I'm not going to</span> <span data-start="922.399" data-end="924.439">dive too deep into a detailed</span> <span data-start="924.439" data-end="926.809">walkthrough of redox because it mostly</span> <span data-start="926.809" data-end="929.24">is like flocks and I've written this all</span> <span data-start="929.24" data-end="931.279">up if you want to go into a deep dive of</span> <span data-start="931.279" data-end="933.559">redux you can go check code cartoons com</span> <span data-start="933.559" data-end="938.329">to see that I do want to point out two</span> <span data-start="938.329" data-end="942.35">of the key differences though the first</span> <span data-start="942.35" data-end="945.379">is the way that the store works instead</span> <span data-start="945.379" data-end="946.819">of managing the logic the store just</span> <span data-start="946.819" data-end="949.579">holds on to the state it has like this</span> <span data-start="949.579" data-end="951.4">one state object the stink</span> <span data-start="951.4" data-end="954.7">single state tree it has all of the</span> <span data-start="954.7" data-end="956.86">state in the app which is holding on to</span> <span data-start="956.86" data-end="958.45">and then when an action comes in it</span> <span data-start="958.45" data-end="961.69">passes the state and the action off to</span> <span data-start="961.69" data-end="963.4">another object it passes that off to the</span> <span data-start="963.4" data-end="966.82">reducer and it's the reducer that figure</span> <span data-start="966.82" data-end="968.47">out how the state needs to change and</span> <span data-start="968.47" data-end="970.84">response to the action so you'll</span> <span data-start="970.84" data-end="972.25">remember this is what we needed for hot</span> <span data-start="972.25" data-end="974.23">module reloading you know we needed to</span> <span data-start="974.23" data-end="975.85">have an object that's holding on to the</span> <span data-start="975.85" data-end="977.32">state and an object that's actually</span> <span data-start="977.32" data-end="980.1">performing that changes on the state and</span> <span data-start="980.1" data-end="982.42">these reducers they do something else</span> <span data-start="982.42" data-end="984.91">too they make copies instead of changing</span> <span data-start="984.91" data-end="986.68">the state that's coming into them they</span> <span data-start="986.68" data-end="989.35">make copies of that state and then they</span> <span data-start="989.35" data-end="991.24">give that back to the store and so the</span> <span data-start="991.24" data-end="992.56">store just swaps out the state it's</span> <span data-start="992.56" data-end="999.13">holding on to for the new state there's</span> <span data-start="999.13" data-end="1000.66">another difference between flux and</span> <span data-start="1000.66" data-end="1002.4">redox and that's the way that the state</span> <span data-start="1002.4" data-end="1004.49">is sent from the store to the view layer</span> <span data-start="1004.49" data-end="1009.99">so you know how in flux we had the view</span> <span data-start="1009.99" data-end="1012.63">layer letting the store know that it</span> <span data-start="1012.63" data-end="1014.06">existed and that needs to have these</span> <span data-start="1014.06" data-end="1018.81">callbacks called in redox there's</span> <span data-start="1018.81" data-end="1020.1">something called the view layer binding</span> <span data-start="1020.1" data-end="1022.32">and this will take care of a lot of that</span> <span data-start="1022.32" data-end="1024.72">plumbing for you so it reduces the</span> <span data-start="1024.72" data-end="1030.42">boilerplate a bit so that's redux and</span> <span data-start="1030.42" data-end="1033.959">now we move on to relay if you've been</span> <span data-start="1033.959" data-end="1035.79">following along closely up until this</span> <span data-start="1035.79" data-end="1038.13">point you might have a question that</span> <span data-start="1038.13" data-end="1040.53">you've been thinking about where's the</span> <span data-start="1040.53" data-end="1043.44">cloud where does the interaction with</span> <span data-start="1043.44" data-end="1047.07">the server happen in flux there's not</span> <span data-start="1047.07" data-end="1050.52">really a greed upon set place to do that</span> <span data-start="1050.52" data-end="1053.16">with the server even at Facebook</span> <span data-start="1053.16" data-end="1054.54">different teams would do this in</span> <span data-start="1054.54" data-end="1059.31">different places in redox there is one</span> <span data-start="1059.31" data-end="1061.79">place which is recommended middleware</span> <span data-start="1061.79" data-end="1064.02">but it still require some extra code to</span> <span data-start="1064.02" data-end="1068.07">wire it up really connects you to the</span> <span data-start="1068.07" data-end="1070.35">cloud and it wires it all up for you</span> <span data-start="1070.35" data-end="1072.09">without you having to put in too much</span> <span data-start="1072.09" data-end="1075.71">extra work at least on the client side</span> <span data-start="1075.71" data-end="1078.24">so let's look at how relay connects your</span> <span data-start="1078.24" data-end="1079.68">client up to the cloud but first we</span> <span data-start="1079.68" data-end="1080.809">should ask</span> <span data-start="1080.809" data-end="1085.37">what's in the cloud in the case of an</span> <span data-start="1085.37" data-end="1087.679">app like Facebook it's a huge graph of</span> <span data-start="1087.679" data-end="1090.23">data and when I talk about graphs here</span> <span data-start="1090.23" data-end="1091.909">i'm talking about graphs like graph</span> <span data-start="1091.909" data-end="1094.73">theory so a whole bunch of things and</span> <span data-start="1094.73" data-end="1096.889">relationships between those things and</span> <span data-start="1096.889" data-end="1097.999">these things they'll be things like</span> <span data-start="1097.999" data-end="1100.249">users and events and the relationships</span> <span data-start="1100.249" data-end="1101.96">will be things like friend are invited</span> <span data-start="1101.96" data-end="1105.98">to in graph a graph theory these are</span> <span data-start="1105.98" data-end="1107.99">often called nodes the things are nodes</span> <span data-start="1107.99" data-end="1110.21">and the relationships between them are</span> <span data-start="1110.21" data-end="1113.929">edges so you have this huge graph of</span> <span data-start="1113.929" data-end="1115.549">things and relationships between them</span> <span data-start="1115.549" data-end="1118.789">are nodes and edges but when you're</span> <span data-start="1118.789" data-end="1120.889">showing a page to an individual user you</span> <span data-start="1120.889" data-end="1122.149">don't care about this huge graph you</span> <span data-start="1122.149" data-end="1123.95">only care about a small section of this</span> <span data-start="1123.95" data-end="1128.299">graph and what really does is it makes</span> <span data-start="1128.299" data-end="1129.799">the connection between that small</span> <span data-start="1129.799" data-end="1131.389">section of the graph that you care about</span> <span data-start="1131.389" data-end="1134.389">in the cloud and your copy of it in your</span> <span data-start="1134.389" data-end="1139.61">local cache it knows how to manage this</span> <span data-start="1139.61" data-end="1142.34">for you because you declare in your</span> <span data-start="1142.34" data-end="1144.919">components which bit of the graph each</span> <span data-start="1144.919" data-end="1147.259">component cares about so it knows</span> <span data-start="1147.259" data-end="1149.059">exactly which bits of the graph to pull</span> <span data-start="1149.059" data-end="1152.69">down so let's go pair this with the way</span> <span data-start="1152.69" data-end="1154.519">the communication with the cloud usually</span> <span data-start="1154.519" data-end="1156.919">happens in a lot of other apps not all</span> <span data-start="1156.919" data-end="1159.44">other apps but a lot of other apps you'd</span> <span data-start="1159.44" data-end="1160.879">make a request your app would make your</span> <span data-start="1160.879" data-end="1164.09">request to the server and you have a</span> <span data-start="1164.09" data-end="1166.039">component tree you have this avatar bio</span> <span data-start="1166.039" data-end="1169.1">component you'll send up the request and</span> <span data-start="1169.1" data-end="1171.799">the server knows exactly what to deliver</span> <span data-start="1171.799" data-end="1175.309">because it delivers the same thing so it</span> <span data-start="1175.309" data-end="1177.35">will deliver the name location and</span> <span data-start="1177.35" data-end="1179.059">picture properties because it that's the</span> <span data-start="1179.059" data-end="1180.289">list of things that it knows it has to</span> <span data-start="1180.289" data-end="1188.36">deliver the problem is if you need to</span> <span data-start="1188.36" data-end="1190.85">add a new property to the avatar or the</span> <span data-start="1190.85" data-end="1193.159">bio component or if you rearrange things</span> <span data-start="1193.159" data-end="1195.74">if you remove the bio component the</span> <span data-start="1195.74" data-end="1197.779">server doesn't know about that you</span> <span data-start="1197.779" data-end="1199.49">actually have to make a change in the</span> <span data-start="1199.49" data-end="1201.2">server code at the same time as you're</span> <span data-start="1201.2" data-end="1203.149">changing the client code so this is</span> <span data-start="1203.149" data-end="1207.89">coupling what really does in contrast</span> <span data-start="1207.89" data-end="1210.23">is half the components say exactly what</span> <span data-start="1210.23" data-end="1213.38">it needs it says exactly the data that</span> <span data-start="1213.38" data-end="1215.3">it needs in order to render so the</span> <span data-start="1215.3" data-end="1217.28">avatar would say i need the picture the</span> <span data-start="1217.28" data-end="1218.57">bio says i need the name and location</span> <span data-start="1218.57" data-end="1221.45">and then the parent pulls those together</span> <span data-start="1221.45" data-end="1223.4">and sends that off as a query to the</span> <span data-start="1223.4" data-end="1225.47">server and the server prepares it on</span> <span data-start="1225.47" data-end="1231.53">demand for the for the application so it</span> <span data-start="1231.53" data-end="1233">gets pulled down and sent out to the</span> <span data-start="1233" data-end="1236.03">components when it gets put in a local</span> <span data-start="1236.03" data-end="1239.36">cache when you have this kind of</span> <span data-start="1239.36" data-end="1240.89">structure it enables some really cool</span> <span data-start="1240.89" data-end="1243.47">things having your components say</span> <span data-start="1243.47" data-end="1245.39">exactly what data it corresponds to in</span> <span data-start="1245.39" data-end="1247.73">the graph it makes it possible to</span> <span data-start="1247.73" data-end="1250.7">automatically do things like splitting</span> <span data-start="1250.7" data-end="1252.26">up your query so that you can have a</span> <span data-start="1252.26" data-end="1253.88">part that's delivered immediately and</span> <span data-start="1253.88" data-end="1255.47">gets rendered to the user immediately</span> <span data-start="1255.47" data-end="1256.94">that you know crease that more</span> <span data-start="1256.94" data-end="1259.79">responsive feeling and a part that's</span> <span data-start="1259.79" data-end="1262.04">deferred you send both those queries up</span> <span data-start="1262.04" data-end="1265.22">at the same time one will come down</span> <span data-start="1265.22" data-end="1268.58">first immediately and will render out</span> <span data-start="1268.58" data-end="1271.01">the component the other will come down</span> <span data-start="1271.01" data-end="1272.81">later will get merged into the data will</span> <span data-start="1272.81" data-end="1274.82">get merged into the little bit of the</span> <span data-start="1274.82" data-end="1276.14">graph that you have in your local cache</span> <span data-start="1276.14" data-end="1278.45">and then it will be sent out to its</span> <span data-start="1278.45" data-end="1281.93">component and that will render it also</span> <span data-start="1281.93" data-end="1283.43">makes it possible for you to reduce the</span> <span data-start="1283.43" data-end="1285.05">size of queries that you're sending up</span> <span data-start="1285.05" data-end="1287.27">so let's say you have your day than this</span> <span data-start="1287.27" data-end="1290.3">local cache now and you've gotten to</span> <span data-start="1290.3" data-end="1293.18">another page and you need to get a</span> <span data-start="1293.18" data-end="1295.22">little bit more data in order to render</span> <span data-start="1295.22" data-end="1297.71">this page but you already have most of</span> <span data-start="1297.71" data-end="1299.06">the state than your local cache so you</span> <span data-start="1299.06" data-end="1300.43">don't really need to download it again</span> <span data-start="1300.43" data-end="1303.11">so we'll just take out really we'll just</span> <span data-start="1303.11" data-end="1304.4">take out the bits of data that you have</span> <span data-start="1304.4" data-end="1307.07">in your local cache push it up push up</span> <span data-start="1307.07" data-end="1310.31">the query and then when that comes down</span> </p>
<p><span data-start="1310.31" data-end="1311.99">I'll merge it into the graph send it out</span> <span data-start="1311.99" data-end="1313.52">to the component and it doesn't just do</span> <span data-start="1313.52" data-end="1314.6">this for data that you have in your</span> <span data-start="1314.6" data-end="1316.97">local cache it keeps track of pending</span> <span data-start="1316.97" data-end="1318.29">queries and what parts of the graph</span> <span data-start="1318.29" data-end="1320.06">those are pulling down so you know</span> <span data-start="1320.06" data-end="1321.53">queries that have gone off to the server</span> <span data-start="1321.53" data-end="1324.41">but haven't come back yet and it will</span> <span data-start="1324.41" data-end="1327.05">remove those from the outgoing queries</span> <span data-start="1327.05" data-end="1332.07">to</span> <span data-start="1332.08" data-end="1334.82">it also makes it really easy to sync any</span> <span data-start="1334.82" data-end="1336.83">changes that you're making to the data</span> <span data-start="1336.83" data-end="1339.529">in the browser up back up to the server</span> <span data-start="1339.529" data-end="1342.139">it will even handle optimistic changes</span> <span data-start="1342.139" data-end="1345.59">to the UI so you know assuming that</span> <span data-start="1345.59" data-end="1346.759">you're going to be able to write this</span> <span data-start="1346.759" data-end="1349.519">data to the cloud and updating the UI as</span> <span data-start="1349.519" data-end="1355.07">if you were able to do it so you send up</span> <span data-start="1355.07" data-end="1357.71">this let's say that you accepted an</span> <span data-start="1357.71" data-end="1360.049">invite to an event you send that up to</span> <span data-start="1360.049" data-end="1363.11">the server it makes the change in your</span> <span data-start="1363.11" data-end="1364.82">local cache and actually displays it to</span> <span data-start="1364.82" data-end="1367.34">the user and then when the response</span> <span data-start="1367.34" data-end="1368.84">comes back down you know might be an</span> <span data-start="1368.84" data-end="1371.059">error it might not be it'll handle that</span> <span data-start="1371.059" data-end="1374.84">whatever comes down now I don't have</span> <span data-start="1374.84" data-end="1377.299">enough time to go deeply into how relay</span> <span data-start="1377.299" data-end="1379.549">does this house you'll see there are a</span> <span data-start="1379.549" data-end="1381.049">ton of characters involved here and</span> <span data-start="1381.049" data-end="1382.46">that's because relays doing so much more</span> <span data-start="1382.46" data-end="1383.929">for you it's actually a framework as</span> <span data-start="1383.929" data-end="1386.48">opposed to flux and redux their patterns</span> <span data-start="1386.48" data-end="1388.999">for handling data but relay is a</span> <span data-start="1388.999" data-end="1392.539">framework I do want to point out the</span> <span data-start="1392.539" data-end="1394.19">thread that ties it to the other two</span> <span data-start="1394.19" data-end="1397.82">though and that is that state is changed</span> <span data-start="1397.82" data-end="1400.19">using objects that represent that change</span> <span data-start="1400.19" data-end="1403.399">in flux and redux you have the actions</span> <span data-start="1403.399" data-end="1406.519">and relay you have mutations that get</span> <span data-start="1406.519" data-end="1411.169">passed around to make these changes so</span> <span data-start="1411.169" data-end="1414.379">that's relay if you want to dig deeper</span> <span data-start="1414.379" data-end="1416.029">into it I'm going to be publishing a</span> <span data-start="1416.029" data-end="1418.34">series of posts that explained</span> <span data-start="1418.34" data-end="1420.379">everything about relay starting next</span> <span data-start="1420.379" data-end="1422.21">week so you can follow code cartoons or</span> <span data-start="1422.21" data-end="1424.159">sign up for the mailing list to get</span> <span data-start="1424.159" data-end="1427.759">notification of that so let's review</span> <span data-start="1427.759" data-end="1432.529">these three starting with flux so flux</span> <span data-start="1432.529" data-end="1435.259">addressed the unpredictability of data</span> <span data-start="1435.259" data-end="1437.149">flowing through Facebook's apps and the</span> <span data-start="1437.149" data-end="1438.919">way it did it was with a unidirectional</span> <span data-start="1438.919" data-end="1442.519">data flow you know views asking action</span> <span data-start="1442.519" data-end="1444.44">you know creating action having the</span> <span data-start="1444.44" data-end="1446.09">action creator Creed actions sending it</span> <span data-start="1446.09" data-end="1447.98">off to this patcher which sends it off</span> <span data-start="1447.98" data-end="1449.6">to the stores which changed the state</span> <span data-start="1449.6" data-end="1452.36">and then let the view know that the sea</span> <span data-start="1452.36" data-end="1453.59">has been changed and then the view</span> <span data-start="1453.59" data-end="1456.47">requests the state and sends it down to</span> <span data-start="1456.47" data-end="1462.379">the views Redux built on this and just</span> <span data-start="1462.379" data-end="1464.07">modified a few things by</span> <span data-start="1464.07" data-end="1468.06">breaking out the state into its own the</span> <span data-start="1468.06" data-end="1469.8">state storage into its own object and</span> <span data-start="1469.8" data-end="1472.53">the functionality that changes that</span> <span data-start="1472.53" data-end="1475.14">states into a different object and also</span> <span data-start="1475.14" data-end="1479.12">collecting snapshots of the state and</span> <span data-start="1479.12" data-end="1482.73">then relay built on some of the same</span> <span data-start="1482.73" data-end="1485.01">ideas as flux but made it possible for</span> <span data-start="1485.01" data-end="1487.17">you to connect the section of the graph</span> <span data-start="1487.17" data-end="1489.39">and the cloud that you care about to the</span> <span data-start="1489.39" data-end="1493.86">local cache in the browser thanks very</span> <span data-start="1493.86" data-end="1494.91">much for listening I hope that was</span> <span data-start="1494.91" data-end="1497.22">helpful and if you want to learn more</span> <span data-start="1497.22" data-end="1498.63">about any of the stuff check out code</span> </p>
</section>