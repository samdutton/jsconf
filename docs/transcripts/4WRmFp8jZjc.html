<section>
<p><span data-start="18.91" data-end="22.49">keep turning up in the break that's a</span> <span data-start="22.49" data-end="27.13">very kind of your yeah so I am Dan web I</span> <span data-start="27.13" data-end="30.77">at down wrong at Twitter I also work on</span> <span data-start="30.77" data-end="33.11">the web team it to where and today I</span> <span data-start="33.11" data-end="35.87">wanted to talk to you about flight the</span> <span data-start="35.87" data-end="38.989">the title on the website is very brief</span> <span data-start="38.989" data-end="40.64">just because I was rushing to grab one</span> <span data-start="40.64" data-end="42.32">of the slots that was in the because I</span> <span data-start="42.32" data-end="44.18">can't think in the morning so had to be</span> <span data-start="44.18" data-end="48.44">in afternoon one so ya light wanted to</span> <span data-start="48.44" data-end="49.67">really kind of give an overview about</span> <span data-start="49.67" data-end="52.969">flight and what it is and why we created</span> <span data-start="52.969" data-end="56.66">it really so Oh a couple of months ago</span> <span data-start="56.66" data-end="61.01">maybe my colleague Angus who you</span> <span data-start="61.01" data-end="62.829">probably listen to any other room Iran</span> <span data-start="62.829" data-end="66.02">wrote this blog post introducing flight</span> <span data-start="66.02" data-end="68.24">we were really excited about this this</span> <span data-start="68.24" data-end="70.759">is actually code that runs all of</span> <span data-start="70.759" data-end="73.67">twitter com and most of tweetdeck at</span> <span data-start="73.67" data-end="75.68">this point and quite a few Twitter</span> <span data-start="75.68" data-end="77.479">properties so we've actually had this</span> <span data-start="77.479" data-end="81.11">thing running and been some battle</span> <span data-start="81.11" data-end="83.36">testing it for about a year or maybe</span> <span data-start="83.36" data-end="85.79">longer but at this point we're really</span> <span data-start="85.79" data-end="88.28">excited about bring it out and showing</span> <span data-start="88.28" data-end="91.4">the world we thought we anguished over</span> <span data-start="91.4" data-end="93.11">this blog post trying to make sure that</span> <span data-start="93.11" data-end="95.119">it sort of explained all the intent</span> <span data-start="95.119" data-end="97.909">behind flight and we put it out into the</span> <span data-start="97.909" data-end="101.24">world and then waited to see what the</span> <span data-start="101.24" data-end="103.79">world had to say about it and literally</span> <span data-start="103.79" data-end="107.09">this is no joke the first comment on</span> <span data-start="107.09" data-end="110.99">hacker news was this</span> <span data-start="111" data-end="113.32">so obviously the first thing we thought</span> <span data-start="113.32" data-end="115.93">is Oh for fuck's sake hacker news but</span> <span data-start="115.93" data-end="120.07">like in a in a in a sense it's a really</span> <span data-start="120.07" data-end="121.96">good question and I think like it does</span> <span data-start="121.96" data-end="126.25">bear elaborating on there are a ton of</span> <span data-start="126.25" data-end="128.59">client-side frameworks out now out there</span> <span data-start="128.59" data-end="130.84">now we couldn't possibly need one more</span> <span data-start="130.84" data-end="133.66">on the pile and we did think about this</span> <span data-start="133.66" data-end="136.57">and buy it you know we would seek to use</span> <span data-start="136.57" data-end="138.61">something if that was out there if</span> <span data-start="138.61" data-end="140.44">they're all possible and contribute it</span> <span data-start="140.44" data-end="142.33">wrote to it rather than creating a new</span> <span data-start="142.33" data-end="146.11">thing but you know we felt that what we</span> <span data-start="146.11" data-end="148.09">were trying to achieve was distinct</span> <span data-start="148.09" data-end="149.44">enough from these and I want to explain</span> <span data-start="149.44" data-end="152.82">a bit about that so to set the scene</span> <span data-start="152.82" data-end="158.02">when i joined the web team it was not</span> <span data-start="158.02" data-end="160.96">long after new twitter was was out there</span> <span data-start="160.96" data-end="163.36">new twitter at its time was quite ahead</span> <span data-start="163.36" data-end="166.18">of its game it was a fully client-side</span> </p>
<p><span data-start="166.18" data-end="170.98">MVC application at the time when some i</span> <span data-start="170.98" data-end="172.9">don't even know when we're the backbone</span> <span data-start="172.9" data-end="174.79">was out at this point or any of the</span> <span data-start="174.79" data-end="177.37">other frameworks so it was built on a</span> <span data-start="177.37" data-end="180.07">sort of homegrown MVC framework because</span> <span data-start="180.07" data-end="181.63">there wasn't anything sort of big at the</span> <span data-start="181.63" data-end="183.7">time and you know doing a lot of really</span> <span data-start="183.7" data-end="187.81">interesting stuff and like a lot of MVC</span> <span data-start="187.81" data-end="190.45">frameworks it had the structure that</span> <span data-start="190.45" data-end="193.6">you'd expect so this isn't real code</span> </p>
<p><span data-start="193.6" data-end="195.88">I've what I've done with these code</span> <span data-start="195.88" data-end="197.29">examples is more tried to kind of</span> <span data-start="197.29" data-end="200.14">generically illustrate the kind of</span> <span data-start="200.14" data-end="202.09">conventions that you see in MVC</span> <span data-start="202.09" data-end="204.52">frameworks rather than writing code for</span> <span data-start="204.52" data-end="205.8">a particular one because I'm not</span> <span data-start="205.8" data-end="208.63">pointing at faults in a particular</span> <span data-start="208.63" data-end="210.79">framework just trying to illustrate the</span> <span data-start="210.79" data-end="212.86">kind of thing that we have so obviously</span> <span data-start="212.86" data-end="216.519">we had we had models models you can you</span> <span data-start="216.519" data-end="218.86">can request an object which is a model</span> <span data-start="218.86" data-end="221.26">you can call functions to mutate those</span> <span data-start="221.26" data-end="224.89">objects and do actions like following in</span> <span data-start="224.89" data-end="227.95">our case and in a lot of cases the these</span> <span data-start="227.95" data-end="229.78">things were asynchronous so you had a</span> <span data-start="229.78" data-end="231.82">callback to do something with that</span> <span data-start="231.82" data-end="234.79">result as well as just calling methods</span> <span data-start="234.79" data-end="237.04">directly and you can actually add event</span> <span data-start="237.04" data-end="240.549">listeners so other objects can listen to</span> <span data-start="240.549" data-end="242">follows that happen in</span> <span data-start="242" data-end="244.73">application generically we had</span> <span data-start="244.73" data-end="248.93">controllers controllers will typically</span> <span data-start="248.93" data-end="250.61">look a bit like this you have some kind</span> <span data-start="250.61" data-end="252.92">of URL Rooter that points to a</span> <span data-start="252.92" data-end="255.08">particular controller in action and</span> <span data-start="255.08" data-end="258.23">inside that we we're finding some tweets</span> <span data-start="258.23" data-end="262.33">by actually require calling them the</span> <span data-start="262.33" data-end="264.86">home timeline method on the user model</span> <span data-start="264.86" data-end="267.95">and then with those tweets we create</span> <span data-start="267.95" data-end="270.44">some views and then we stuff those into</span> <span data-start="270.44" data-end="274.88">the Dom somewhere views looks a little</span> <span data-start="274.88" data-end="277.19">bit like this we we still use mustache</span> <span data-start="277.19" data-end="281.27">and similar to how we used this backward</span> <span data-start="281.27" data-end="286.88">on Newt we're typically they render</span> <span data-start="286.88" data-end="289.4">things but they can also render sub</span> <span data-start="289.4" data-end="291.169">views as well so in this case we're</span> <span data-start="291.169" data-end="293.24">getting all of our tweets and then we're</span> <span data-start="293.24" data-end="295.61">creating a new tweet view out of those</span> <span data-start="295.61" data-end="297.68">and then rendering those and put and</span> <span data-start="297.68" data-end="300.56">putting those into the Dom so we end up</span> <span data-start="300.56" data-end="302.3">having this structure where controllers</span> <span data-start="302.3" data-end="305.18">would typically talk talk to the route</span> <span data-start="305.18" data-end="306.68">or would talk to the controller and the</span> <span data-start="306.68" data-end="308.06">controller with talk two views and</span> <span data-start="308.06" data-end="314.54">models beautiful models I think Jeremy</span> <span data-start="314.54" data-end="319.89">oshkosh is trying to interrupt the time</span> <span data-start="319.9" data-end="323.3">so these are you talk to models and</span> <span data-start="323.3" data-end="324.47">other views so there's a lot of</span> <span data-start="324.47" data-end="326.72">relationships and this is actually a</span> <span data-start="326.72" data-end="329.57">real slide that we had that we tried to</span> <span data-start="329.57" data-end="331.52">document all of the relationships in in</span> <span data-start="331.52" data-end="335.15">in Newt where's you I at the time and as</span> <span data-start="335.15" data-end="336.77">you can see it's complicated it's</span> <span data-start="336.77" data-end="339.35">whether there are a lot of relationships</span> <span data-start="339.35" data-end="342.83">and hierarchical relationships and event</span> <span data-start="342.83" data-end="344.69">relationships between all kinds of</span> <span data-start="344.69" data-end="348.14">different pieces and the thing is is I</span> <span data-start="348.14" data-end="349.76">think you know doesn't necessarily look</span> <span data-start="349.76" data-end="351.56">it but twitter com is quite a</span> <span data-start="351.56" data-end="354.65">complicated you I so this complexity was</span> <span data-start="354.65" data-end="357.56">necessary there is a ton of stuff going</span> <span data-start="357.56" data-end="359.45">on there and a ton of code needed to run</span> <span data-start="359.45" data-end="362.51">all of that stuff so that's fine that we</span> <span data-start="362.51" data-end="364.58">need this stuff to be complicated but</span> <span data-start="364.58" data-end="367.49">what the situation we had is that when</span> <span data-start="367.49" data-end="369.71">we added features what we were doing</span> <span data-start="369.71" data-end="371.75">with is adding more boxes and lines to</span> <span data-start="371.75" data-end="374.66">that diagram and increasing the amount</span> <span data-start="374.66" data-end="375.36">that</span> <span data-start="375.36" data-end="377.55">one engineer would need to understand</span> <span data-start="377.55" data-end="379.349">they need to really understand most of</span> <span data-start="379.349" data-end="381.03">them all those boxes and arrows in order</span> <span data-start="381.03" data-end="384.09">to effectively do some work because they</span> <span data-start="384.09" data-end="386.039">can't just like look at one bit of the</span> <span data-start="386.039" data-end="388.65">code and change it without knowing all</span> <span data-start="388.65" data-end="390.81">of the things that refer to it and</span> <span data-start="390.81" data-end="392.4">knowing whether than there would be</span> <span data-start="392.4" data-end="396.719">knock-on effects so how do we have a</span> <span data-start="396.719" data-end="399.08">complex application with lots of sort of</span> <span data-start="399.08" data-end="401.129">interdependencies and how do we make it</span> <span data-start="401.129" data-end="403.86">like easy for engineers to think about</span> <span data-start="403.86" data-end="406.199">so no matter how many features you add</span> <span data-start="406.199" data-end="409.379">you still it's still just as easy to</span> <span data-start="409.379" data-end="411.96">think about as when you had you know one</span> <span data-start="411.96" data-end="414.719">control on the page and the answer</span> <span data-start="414.719" data-end="418.77">really that we went for is we we were</span> <span data-start="418.77" data-end="421.68">all about decoupling we wanted every</span> <span data-start="421.68" data-end="424.5">single thing to every single sort of</span> <span data-start="424.5" data-end="426.3">representation in the UI to be</span> <span data-start="426.3" data-end="428.52">completely decoupled and not know</span> <span data-start="428.52" data-end="430.949">anything about any of the other parts of</span> <span data-start="430.949" data-end="433.199">the UI all and there are lots of</span> <span data-start="433.199" data-end="435.75">different ways I mean in a sense MVC</span> <span data-start="435.75" data-end="438.719">kind of at least sort of titans these</span> <span data-start="438.719" data-end="442.139">these couplings so it and it gives the</span> <span data-start="442.139" data-end="443.759">structure to the couplings but we wanted</span> <span data-start="443.759" data-end="445.05">to go further than that we wanted to</span> <span data-start="445.05" data-end="449.31">make sure that one UI element does not</span> <span data-start="449.31" data-end="451.349">know where its data comes from it does</span> <span data-start="451.349" data-end="454.08">not know or even care if any of the</span> <span data-start="454.08" data-end="455.699">particular components are on the screen</span> <span data-start="455.699" data-end="457.169">everything is just completely</span> <span data-start="457.169" data-end="461.219">independent and this is sort of I think</span> <span data-start="461.219" data-end="463.949">where we've gone a step further than the</span> <span data-start="463.949" data-end="466.74">most other frameworks in this respect</span> <span data-start="466.74" data-end="468.96">the way they're kind of pretentious</span> <span data-start="468.96" data-end="473.43">stupid way of looking at it is it sells</span> <span data-start="473.43" data-end="476.759">really we want each cell in a body which</span> <span data-start="476.759" data-end="479.009">is the extremely complex thing isn't</span> <span data-start="479.009" data-end="481.529">aware of what's outside it it just</span> <span data-start="481.529" data-end="484.71">listens for changes in chemicals around</span> <span data-start="484.71" data-end="487.02">it and and does its own thing but in</span> <span data-start="487.02" data-end="489.659">aggregate these cells that don't know or</span> <span data-start="489.659" data-end="492.599">care about the cells next to them create</span> <span data-start="492.599" data-end="497.129">something really complicated and the way</span> <span data-start="497.129" data-end="498.839">to get to that is the same way that</span> <span data-start="498.839" data-end="501.9">sells get to that the components need to</span> <span data-start="501.9" data-end="504.779">have this very very simple contract with</span> <span data-start="504.779" data-end="507.969">the outside world and rather than know</span> <span data-start="507.969" data-end="511.4">they've got a hold on to a view object</span> <span data-start="511.4" data-end="514.19">in the view of views have a render</span> <span data-start="514.19" data-end="518.419">method and they also have a reference to</span> <span data-start="518.419" data-end="520.519">some other object and they have to know</span> <span data-start="520.519" data-end="522.86">about the the API to that particular</span> <span data-start="522.86" data-end="525.769">object we want just this really simple</span> <span data-start="525.769" data-end="528.05">thing in the same way that sells listen</span> <span data-start="528.05" data-end="532.05">to changes in chemicals around them so</span> <span data-start="532.06" data-end="534.98">we yep we're heading for entirely</span> <span data-start="534.98" data-end="538.81">self-contained components my</span> <span data-start="538.81" data-end="540.74">non-pretentious way of looking at this</span> <span data-start="540.74" data-end="543.89">is is if the poo is trapped in the box</span> <span data-start="543.89" data-end="545.57">then it only smells when you open it</span> <span data-start="545.57" data-end="548.209">well well it's trying to explain here is</span> <span data-start="548.209" data-end="551.81">that if everything is completely</span> <span data-start="551.81" data-end="555.23">self-contained we we don't care what's</span> <span data-start="555.23" data-end="557.329">written in any one component we can</span> <span data-start="557.329" data-end="559.22">refactor the whole thing as long as it</span> <span data-start="559.22" data-end="562.459">continues to do its job we can put any</span> <span data-start="562.459" data-end="564.56">old crappy old code in there and we'll</span> <span data-start="564.56" data-end="566.57">because we can refactor that when we've</span> <span data-start="566.57" data-end="568.64">got time we don't have to worry about</span> <span data-start="568.64" data-end="571.37">some crappy design decisions in one part</span> <span data-start="571.37" data-end="573.98">of the application having like a an</span> <span data-start="573.98" data-end="576.949">effect on on that the application as a</span> <span data-start="576.949" data-end="578.39">whole and not being able to refactor</span> <span data-start="578.39" data-end="581.99">that so how did we achieve that with</span> <span data-start="581.99" data-end="586.61">flight well we already I'm always been a</span> <span data-start="586.61" data-end="590.42">great advocate of making use of what we</span> <span data-start="590.42" data-end="593.839">have and going with the flow of the</span> <span data-start="593.839" data-end="595.519">platform and in this case the browser</span> <span data-start="595.519" data-end="598.339">rather than trying to create paradigms</span> <span data-start="598.339" data-end="600.92">that sort of live alongside it so what</span> <span data-start="600.92" data-end="603.05">do we have in the in the browser well we</span> <span data-start="603.05" data-end="606.199">have we have the DOM and how can we make</span> <span data-start="606.199" data-end="609.079">use of the Dom rather than kind of bash</span> <span data-start="609.079" data-end="613.88">it into shape well the one nice thing I</span> <span data-start="613.88" data-end="618.649">think the one elegant piece the facility</span> <span data-start="618.649" data-end="620.93">that the Dom provides is actually event</span> <span data-start="620.93" data-end="624.22">an event bubbling and and the way that</span> <span data-start="624.22" data-end="626.449">events can be triggered at certain</span> <span data-start="626.449" data-end="627.949">points in a document structure and</span> <span data-start="627.949" data-end="630.05">because hopefully your document secure</span> <span data-start="630.05" data-end="633.92">in your markup is actually give some</span> <span data-start="633.92" data-end="635.93">structure to the application that the</span> <span data-start="635.93" data-end="637.76">way that events bubble up through that</span> <span data-start="637.76" data-end="639.139">structure is</span> <span data-start="639.139" data-end="641.809">a really useful way to carry messages</span> <span data-start="641.809" data-end="644.839">around the application it's got this</span> <span data-start="644.839" data-end="649.609">inherent hierarchy so the some the</span> <span data-start="649.609" data-end="651.499">tweets the markup for the tweets is</span> <span data-start="651.499" data-end="653.359">inside some markup that represents a</span> <span data-start="653.359" data-end="656.359">timeline and that markup is inside the</span> <span data-start="656.359" data-end="658.279">body of the page and so on this is this</span> <span data-start="658.279" data-end="660.41">is all structure that actually maps to</span> <span data-start="660.41" data-end="663.739">the way this application works and we</span> <span data-start="663.739" data-end="666.41">can make use of that we have a vent</span> <span data-start="666.41" data-end="670.369">bubbling so we take advantage of all of</span> <span data-start="670.369" data-end="673.429">this and an essentially a flight</span> <span data-start="673.429" data-end="675.889">component in the simple words as</span> <span data-start="675.889" data-end="677.809">possible is an object that has a</span> <span data-start="677.809" data-end="679.699">reference to a dom node so it's a simple</span> </p>
<p><span data-start="679.699" data-end="681.889">JavaScript object it has a property</span> <span data-start="681.889" data-end="685.04">called node at that point to a single</span> <span data-start="685.04" data-end="688.189">Dom node and it and there are three</span> <span data-start="688.189" data-end="689.54">things that it can do it can manipulate</span> <span data-start="689.54" data-end="692.149">that node so it can change classes on it</span> <span data-start="692.149" data-end="696.199">can put new markup into it can do me and</span> <span data-start="696.199" data-end="698.119">change styles on it if if you really</span> <span data-start="698.119" data-end="701.059">need to it can trigger event on that Dom</span> <span data-start="701.059" data-end="702.98">node so if it wants to alert the outside</span> <span data-start="702.98" data-end="704.54">world to something that's happened</span> <span data-start="704.54" data-end="707.119">within it then it can fire an event and</span> <span data-start="707.119" data-end="709.79">say okay someone clicked me and I think</span> <span data-start="709.79" data-end="712.85">this is and they mean that they want to</span> <span data-start="712.85" data-end="716.989">retweet tweet ID 55 for instance and</span> <span data-start="716.989" data-end="718.669">they can also listen for events they can</span> <span data-start="718.669" data-end="720.829">anything that they might care about that</span> <span data-start="720.829" data-end="722.66">happens in the outside world like some</span> <span data-start="722.66" data-end="728.209">new data coming in or a user clicking on</span> <span data-start="728.209" data-end="730.61">that node or some sub part of that node</span> <span data-start="730.61" data-end="731.989">they can listen to that event and then</span> <span data-start="731.989" data-end="737.089">in and respond so to get sort of right</span> <span data-start="737.089" data-end="738.649">to the meat of it I'm not sure how many</span> <span data-start="738.649" data-end="745.339">people have seen flight ok I will do</span> <span data-start="745.339" data-end="748.669">this in a medium pace there so this is a</span> <span data-start="748.669" data-end="751.819">flat component the it's essentially</span> <span data-start="751.819" data-end="754.459">quite simple the where you start when</span> <span data-start="754.459" data-end="755.809">you're reading a flight component is</span> <span data-start="755.809" data-end="760.009">down here initialize now what initialize</span> <span data-start="760.009" data-end="765.47">we'll run that when the time the a an</span> <span data-start="765.47" data-end="767.179">instance of this component because you</span> <span data-start="767.179" data-end="768.98">can see this like a class you make many</span> <span data-start="768.98" data-end="770.83">instances of one component and</span> <span data-start="770.83" data-end="773.71">each Dom node gets its own incidence of</span> <span data-start="773.71" data-end="776.98">this component so when that attached</span> <span data-start="776.98" data-end="778.63">happens when a new instance of the</span> <span data-start="778.63" data-end="780.91">component is made and attached to a Dom</span> <span data-start="780.91" data-end="783.37">element then initialize is called and</span> <span data-start="783.37" data-end="785.62">this is where you just normally set up</span> <span data-start="785.62" data-end="787.84">event handlers so in this case this is</span> <span data-start="787.84" data-end="791.62">sort of like a generic toggler thing it</span> <span data-start="791.62" data-end="795.73">listens to a click on the node and and</span> <span data-start="795.73" data-end="801.04">just kind of flicks flicks a class so</span> <span data-start="801.04" data-end="802.72">you'll see we set we set up the event</span> <span data-start="802.72" data-end="804.07">handler and then that's the event</span> <span data-start="804.07" data-end="806.77">handler really simple and then you can</span> <span data-start="806.77" data-end="809.74">put other bits of state in there and</span> <span data-start="809.74" data-end="812.92">other methods and and basically this is</span> <span data-start="812.92" data-end="814.66">your little bit of code that puppy</span> <span data-start="814.66" data-end="818.2">puppets a Dom element and that's that's</span> <span data-start="818.2" data-end="820.15">all there is to flight really this is</span> <span data-start="820.15" data-end="822.58">this is what you get but it enables us</span> <span data-start="822.58" data-end="824.47">to kind of take advantage of this this</span> <span data-start="824.47" data-end="828.16">decoupling your app basically becomes a</span> <span data-start="828.16" data-end="830.95">collection of these components all all</span> <span data-start="830.95" data-end="833.26">not knowing about each other just all</span> <span data-start="833.26" data-end="834.91">kind of doing their own thing in</span> <span data-start="834.91" data-end="837.25">complete isolation and the way that you</span> <span data-start="837.25" data-end="839.11">actually sort of structure your app and</span> <span data-start="839.11" data-end="842.02">composer is is basically just by taking</span> <span data-start="842.02" data-end="843.64">a collection of these components and</span> <span data-start="843.64" data-end="846.28">attaching them to pieces of the Dom so</span> <span data-start="846.28" data-end="850.18">you can say why my navigation component</span> <span data-start="850.18" data-end="853.12">can attach to the top nav and I'll</span> <span data-start="853.12" data-end="855.76">attach this toggler to some selector</span> <span data-start="855.76" data-end="859.84">passing some options to for what the</span> <span data-start="859.84" data-end="861.85">toggle clasp is called and this is</span> <span data-start="861.85" data-end="865.08">basically how how the whole thing works</span> <span data-start="865.08" data-end="867.64">so the idea is is instead of</span> <span data-start="867.64" data-end="870.58">understanding the the diagram before and</span> <span data-start="870.58" data-end="872.55">all of these relationships that all</span> <span data-start="872.55" data-end="875.8">point all the all different other parts</span> <span data-start="875.8" data-end="877.69">of the application when you're actually</span> <span data-start="877.69" data-end="881.05">writing or adding functionality or</span> <span data-start="881.05" data-end="883.12">changing functionality all you're doing</span> <span data-start="883.12" data-end="885.82">is considering one single component at a</span> <span data-start="885.82" data-end="888.52">time you don't have to understand how</span> <span data-start="888.52" data-end="890.28">the whole thing works you just have to</span> <span data-start="890.28" data-end="893.17">look at the component you need to change</span> <span data-start="893.17" data-end="895.11">or the component you need to add</span> <span data-start="895.11" data-end="898.15">understand how that works and then make</span> <span data-start="898.15" data-end="901.36">your changes so instead of that giant</span> <span data-start="901.36" data-end="904.46">diagram you only really need to</span> <span data-start="904.46" data-end="906.77">understand something like this my tub</span> <span data-start="906.77" data-end="912.77">this is a toggle component it you if I</span> <span data-start="912.77" data-end="914.69">is enable and disable events to the</span> <span data-start="914.69" data-end="916.82">outside world and it listens for clicks</span> <span data-start="916.82" data-end="919.1">and that's literally all you need to</span> <span data-start="919.1" data-end="922.82">understand so with that you your your</span> <span data-start="922.82" data-end="924.8">poo is trapped in its box whatever</span> <span data-start="924.8" data-end="926.63">happens inside that toggle is very</span> <span data-start="926.63" data-end="930.19">localized to that particular component</span> <span data-start="930.19" data-end="933.89">the nice thing about this and sort of a</span> <span data-start="933.89" data-end="936.02">lot of this relates to the previous talk</span> <span data-start="936.02" data-end="939.05">on iop is that we don't have to resort</span> <span data-start="939.05" data-end="942.44">to marks for tests we because everything</span> <span data-start="942.44" data-end="945.98">is so atomic and and one component</span> <span data-start="945.98" data-end="948.08">doesn't even care that there might be</span> <span data-start="948.08" data-end="950.81">other components on the page you have</span> <span data-start="950.81" data-end="952.58">this great environment for tests you</span> <span data-start="952.58" data-end="955.28">take a single component one at a time</span> <span data-start="955.28" data-end="957.68">you fire events on it and check that it</span> <span data-start="957.68" data-end="961.04">does what you want it to do and and then</span> <span data-start="961.04" data-end="962.66">you check that it finds the events that</span> <span data-start="962.66" data-end="965.12">you expect it to have and just you're</span> <span data-start="965.12" data-end="967.7">simply testing this this contract which</span> <span data-start="967.7" data-end="971.51">is a relatively easy to understand we</span> <span data-start="971.51" data-end="975.29">have a tool for that called flight</span> <span data-start="975.29" data-end="977.06">jasmine it's basically sort of a set of</span> <span data-start="977.06" data-end="979.61">jasmine helpers that allows us to test</span> <span data-start="979.61" data-end="982.52">these contracts a small example of that</span> <span data-start="982.52" data-end="985.97">is if we wanted to write sir shins about</span> <span data-start="985.97" data-end="989.5">this we just be able to say okay</span> <span data-start="989.5" data-end="992.12">describe this component called toggle it</span> <span data-start="992.12" data-end="994.34">would set up this component essentially</span> <span data-start="994.34" data-end="995.72">what it would do is gives you a fresh</span> <span data-start="995.72" data-end="998.06">piece of markup for every for every</span> <span data-start="998.06" data-end="1002.35">single test it attaches a fresh instance</span> <span data-start="1002.35" data-end="1003.79">of that node to it and then it runs a</span> <span data-start="1003.79" data-end="1006.19">single test so there's no test pollution</span> <span data-start="1006.19" data-end="1007.72">you're just testing this one thing at a</span> <span data-start="1007.72" data-end="1010">time you get a fresh incidents every</span> <span data-start="1010" data-end="1012.22">single time and you do a new basically</span> <span data-start="1012.22" data-end="1014.95">doing stuff like this so you can you can</span> <span data-start="1014.95" data-end="1017.53">spy on event so you this this test is</span> <span data-start="1017.53" data-end="1020.11">just if you click it does it fire the</span> <span data-start="1020.11" data-end="1022.87">enabled event and then you as you can</span> <span data-start="1022.87" data-end="1024.76">imagine you just kind of write a test</span> <span data-start="1024.76" data-end="1026.65">for each one of those things that we</span> <span data-start="1026.65" data-end="1029.32">have in our contract here and and you</span> <span data-start="1029.32" data-end="1032.73">don't you have pretty nice test coverage</span> <span data-start="1032.73" data-end="1035.83">so how do we apply this to twitter com</span> <span data-start="1035.83" data-end="1037.99">and something that you know</span> <span data-start="1037.99" data-end="1040.689">is non-trivial well essentially what</span> <span data-start="1040.689" data-end="1043.24">what we've done on top of this is it</span> <span data-start="1043.24" data-end="1045.04">sort of have this reasonably hard</span> <span data-start="1045.04" data-end="1047.85">separation between UI components and</span> <span data-start="1047.85" data-end="1051.429">data component so what we wanted to do</span> <span data-start="1051.429" data-end="1054.37">is have UI components whose only job is</span> <span data-start="1054.37" data-end="1058.66">to is manipulate the UI and typically</span> <span data-start="1058.66" data-end="1060.55">they take a browser event like a click</span> <span data-start="1060.55" data-end="1064.36">or a key press and then they they do a</span> <span data-start="1064.36" data-end="1067.75">little bit of logic to work to turn it</span> <span data-start="1067.75" data-end="1069.79">into a higher level an application event</span> <span data-start="1069.79" data-end="1071.89">so for instance you might have a follow</span> <span data-start="1071.89" data-end="1075.01">button and a follow button UI component</span> <span data-start="1075.01" data-end="1076.3">that will sit on top of it it will</span> <span data-start="1076.3" data-end="1079.6">listen for clicks and then fire an event</span> <span data-start="1079.6" data-end="1084.37">called follow or you I follow in using</span> <span data-start="1084.37" data-end="1087.75">our naming conventions and the user ID</span> <span data-start="1087.75" data-end="1091.66">would be done wrong for instance what</span> <span data-start="1091.66" data-end="1093.25">what then happens is we have data</span> <span data-start="1093.25" data-end="1095.08">components which are which are just</span> <span data-start="1095.08" data-end="1096.58">normal components just like the one you</span> <span data-start="1096.58" data-end="1099.64">saw but their only job is to talk to the</span> <span data-start="1099.64" data-end="1102.19">server or whatever other wherever else</span> <span data-start="1102.19" data-end="1105.22">you tore your data so they normally sit</span> <span data-start="1105.22" data-end="1107.59">on the document because there because in</span> <span data-start="1107.59" data-end="1109.87">the example of follow we we want to</span> <span data-start="1109.87" data-end="1111.34">listen to follow events wherever they</span> <span data-start="1111.34" data-end="1112.69">come from they can come from anywhere in</span> <span data-start="1112.69" data-end="1114.73">the UI so we listened to the whole</span> <span data-start="1114.73" data-end="1116.41">document listening for those follow</span> <span data-start="1116.41" data-end="1118.21">events to come up and they're making the</span> <span data-start="1118.21" data-end="1119.77">requests when the request comes back</span> <span data-start="1119.77" data-end="1122.559">they they fire another vent a broadcast</span> <span data-start="1122.559" data-end="1125.32">an event that says the follow of user</span> <span data-start="1125.32" data-end="1128.23">dan wrong was successful or arid and so</span> <span data-start="1128.23" data-end="1131.02">on and then the UI components can can</span> <span data-start="1131.02" data-end="1132.7">listen to the successor error and</span> <span data-start="1132.7" data-end="1134.98">actually should reflect that in the UI</span> <span data-start="1134.98" data-end="1137.679">and this is essentially how pretty much</span> <span data-start="1137.679" data-end="1141.7">everything works in twitter com the nice</span> <span data-start="1141.7" data-end="1144.67">thing is is that say if you click the</span> <span data-start="1144.67" data-end="1146.2">follow button you also wanted to update</span> <span data-start="1146.2" data-end="1148.66">your following count on the page then</span> <span data-start="1148.66" data-end="1152.26">the the you just basically link that to</span> <span data-start="1152.26" data-end="1153.88">the result event so you add a new</span> <span data-start="1153.88" data-end="1155.95">component which is the follower count</span> <span data-start="1155.95" data-end="1158.41">component for instance and you you just</span> <span data-start="1158.41" data-end="1160.63">listen for the yes the follow was</span> <span data-start="1160.63" data-end="1162.85">successful and increment the count but</span> <span data-start="1162.85" data-end="1164.62">the other stuff that you'd previously</span> <span data-start="1164.62" data-end="1166.9">written you don't care about that that</span> <span data-start="1166.9" data-end="1168.669">could be taken away it could not be</span> <span data-start="1168.669" data-end="1170.23">there at all and everything could still</span> <span data-start="1170.23" data-end="1170.909">work</span> <span data-start="1170.909" data-end="1174.509">no code no code is required to be</span> <span data-start="1174.509" data-end="1176.399">changed in the existing stuff you're</span> <span data-start="1176.399" data-end="1179.429">simply adding extra behavior arm I mean</span> <span data-start="1179.429" data-end="1182.729">what we tend to do is further to that is</span> <span data-start="1182.729" data-end="1185.179">though we implement a logger this way</span> <span data-start="1185.179" data-end="1187.59">previously we would have calls to our</span> <span data-start="1187.59" data-end="1189.779">logger code inside all of our models and</span> <span data-start="1189.779" data-end="1192.119">stuff so if we wanted to log when a</span> <span data-start="1192.119" data-end="1194.46">follow happened on the UI we would</span> <span data-start="1194.46" data-end="1196.259">actually like have a method call that</span> <span data-start="1196.259" data-end="1199.379">said log this thing happen but now we a</span> <span data-start="1199.379" data-end="1202.47">logger is a component that just watches</span> <span data-start="1202.47" data-end="1204.379">over the application and and just</span> <span data-start="1204.379" data-end="1206.669">listens for things that it cares about</span> <span data-start="1206.669" data-end="1208.769">and logs them it's completely separate</span> <span data-start="1208.769" data-end="1211.169">to all of our application logic and it</span> <span data-start="1211.169" data-end="1212.629">literally just sort of sits here and</span> <span data-start="1212.629" data-end="1215.159">listens for events just like anything</span> <span data-start="1215.159" data-end="1218.519">else and sends them to the server and so</span> <span data-start="1218.519" data-end="1221.669">to scale like I mean it I suppose it</span> <span data-start="1221.669" data-end="1224.22">looks something like this more</span> <span data-start="1224.22" data-end="1226.229">components more events being fired but</span> <span data-start="1226.229" data-end="1228.179">the point is you don't need to</span> <span data-start="1228.179" data-end="1231.749">understand this it's irrelevant the</span> <span data-start="1231.749" data-end="1233.789">overview all you need to understand is</span> <span data-start="1233.789" data-end="1236.46">under standard want is one component at</span> <span data-start="1236.46" data-end="1238.499">a time so the more we add and the more</span> <span data-start="1238.499" data-end="1241.259">complexity we add we don't actually add</span> <span data-start="1241.259" data-end="1242.789">to the mental overhead of being able to</span> <span data-start="1242.789" data-end="1248.129">work on this system but that is just our</span> <span data-start="1248.129" data-end="1250.559">architecture that isn't the flight way</span> <span data-start="1250.559" data-end="1254.609">of doing things we only we only</span> <span data-start="1254.609" data-end="1258.509">prescribe the component architecture and</span> <span data-start="1258.509" data-end="1260.759">the event mechanism we don't care what</span> <span data-start="1260.759" data-end="1263.279">templating you use we don't care whether</span> <span data-start="1263.279" data-end="1265.649">you do that templating on the client or</span> <span data-start="1265.649" data-end="1267.599">the server we don't make any assumptions</span> <span data-start="1267.599" data-end="1269.97">based on that at all we don't care where</span> <span data-start="1269.97" data-end="1271.859">you keep the state whether it's in sort</span> <span data-start="1271.859" data-end="1274.109">of model like objects or whether you</span> <span data-start="1274.109" data-end="1277.409">defer all that to the server it's all up</span> <span data-start="1277.409" data-end="1279.59">to you we just give you this way of</span> <span data-start="1279.59" data-end="1285.239">enforcing this coupling and so I suppose</span> <span data-start="1285.239" data-end="1286.889">the answer to the original question why</span> <span data-start="1286.889" data-end="1289.619">not just use angular well it's it's not</span> <span data-start="1289.619" data-end="1293.639">equivalent to angular I think in in many</span> <span data-start="1293.639" data-end="1296.879">ways I'd call it a it's a framework for</span> <span data-start="1296.879" data-end="1299.159">making frameworks you it's a way of</span> <span data-start="1299.159" data-end="1301.409">handling communication and decoupling</span> <span data-start="1301.409" data-end="1304.47">and you add your own architecture on top</span> <span data-start="1304.47" data-end="1308.82">an example of that is this thing that's</span> <span data-start="1308.82" data-end="1310.919">popped up just recently Icarus actually</span> <span data-start="1310.919" data-end="1315.15">sort of adds a model layer by by adding</span> <span data-start="1315.15" data-end="1318.12">some code to components so instead of</span> <span data-start="1318.12" data-end="1320.01">the data components that we have which</span> <span data-start="1320.01" data-end="1322.77">are quite raw they the data components</span> <span data-start="1322.77" data-end="1324.48">represent models and they have change</span> <span data-start="1324.48" data-end="1327.33">events that you can about you can bind</span> <span data-start="1327.33" data-end="1330.9">to and so on so and I'd love to see you</span> <span data-start="1330.9" data-end="1333.059">no more of this kind of thing that let's</span> <span data-start="1333.059" data-end="1336.95">lay a different UI paradigms on top and</span> <span data-start="1336.95" data-end="1339.09">you know make more assumptions about</span> <span data-start="1339.09" data-end="1341.789">different ways of doing things so it's</span> <span data-start="1341.789" data-end="1344.64">kind of a to bring your own architecture</span> <span data-start="1344.64" data-end="1349.11">really so what's next well we've got</span> <span data-start="1349.11" data-end="1351.299">that we've got a lot going on at the</span> <span data-start="1351.299" data-end="1354.48">moment we we just got a new logo to this</span> </p>
<p><span data-start="1354.48" data-end="1356.19">F thing Danny yes sir there's some</span> <span data-start="1356.19" data-end="1359.01">t-shirts coming probably stickers hadn't</span> <span data-start="1359.01" data-end="1363.5">thought much past that but yeah I think</span> <span data-start="1363.5" data-end="1366.929">it would be great to actually because we</span> <span data-start="1366.929" data-end="1369.51">have this sort of really reusable really</span> <span data-start="1369.51" data-end="1371.61">decoupled thing and there's been quite a</span> <span data-start="1371.61" data-end="1373.5">few components that sort of do more</span> <span data-start="1373.5" data-end="1375.51">general things that could be used in</span> <span data-start="1375.51" data-end="1377.73">lots of different apps coming coming out</span> <span data-start="1377.73" data-end="1381.299">there's there's a component the does</span> <span data-start="1381.299" data-end="1384.27">local storage and yeah a few other ones</span> <span data-start="1384.27" data-end="1385.89">that are popping up I'd love to see more</span> <span data-start="1385.89" data-end="1388.5">than that more of that and maybe we we</span> <span data-start="1388.5" data-end="1391.289">create a central repo for those another</span> <span data-start="1391.289" data-end="1394.53">thing that I'm really excited about but</span> <span data-start="1394.53" data-end="1395.909">we've only sort of thought through a</span> <span data-start="1395.909" data-end="1398.88">little bit is we think that this</span> <span data-start="1398.88" data-end="1401.7">architecture could map to web components</span> <span data-start="1401.7" data-end="1404.85">in a really really elegant way and</span> <span data-start="1404.85" data-end="1408.12">polymers just came out which I I love</span> <span data-start="1408.12" data-end="1410.25">the idea of it's obviously very new and</span> <span data-start="1410.25" data-end="1411.929">want to keep an eye on that for a while</span> <span data-start="1411.929" data-end="1415.2">but I could imagine web components and</span> <span data-start="1415.2" data-end="1416.97">flight becoming quite an interesting</span> <span data-start="1416.97" data-end="1421.34">thing so if you want to check it out</span> <span data-start="1421.34" data-end="1426.75">it's github com / twitter / flight we</span> <span data-start="1426.75" data-end="1428.88">have a Twitter account predictably which</span> <span data-start="1428.88" data-end="1432.96">is at flight yell be around if anyone's</span> <span data-start="1432.96" data-end="1436.76">interested in chatting about flight we</span> <span data-start="1436.76" data-end="1440.09">have we thought as everyone's going</span> <span data-start="1440.09" data-end="1442.94">downtown tomorrow that we pick a</span> <span data-start="1442.94" data-end="1444.86">drinking establishment and sort of post</span> <span data-start="1444.86" data-end="1447.32">up there so if anyone wants to come and</span> <span data-start="1447.32" data-end="1450.02">ask questions or chat about flight love</span> <span data-start="1450.02" data-end="1452.36">to hear are people using it and whether</span> <span data-start="1452.36" data-end="1454.99">you hate it or not love to have a</span> <span data-start="1454.99" data-end="1457.88">drunken argument about JavaScript me to</span> <span data-start="1457.88" data-end="1461.33">anyone into that yeah we'll be at eight</span> <span data-start="1461.33" data-end="1464.12">there are eight and Palace Saloon right</span> <span data-start="1464.12" data-end="1466.45">in downtown thinking tomorrow night and</span> <span data-start="1466.45" data-end="1469.37">come and chat to me we if you want to</span> <span data-start="1469.37" data-end="1471.53">come and work with flight at Twitter</span> <span data-start="1471.53" data-end="1473.75">come and chat to me because we have lots</span> <span data-start="1473.75" data-end="1476.51">of interesting web rolls coming up so</span> </p>
</section>