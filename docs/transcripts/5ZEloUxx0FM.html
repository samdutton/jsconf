<section>
<p><span data-start="37.92" data-end="40.81">so I'm Jeff Overton Facebook I work on</span> <span data-start="40.81" data-end="43.48">our JavaScript infrastructure team which</span> <span data-start="43.48" data-end="45.7">is just a weird way of saying that I</span> <span data-start="45.7" data-end="48.46">work on JavaScript tools at Facebook and</span> <span data-start="48.46" data-end="50.2">I'm here to talk to you about just which</span> <span data-start="50.2" data-end="52">is a tool that we've had internally for</span> <span data-start="52" data-end="54.25">actually kind of a couple years now we</span> <span data-start="54.25" data-end="57.01">use it for testing and I thought it was</span> <span data-start="57.01" data-end="59.8">really it's really useful and I open</span> <span data-start="59.8" data-end="61.989">sourced it about two weeks ago mostly</span> <span data-start="61.989" data-end="63.7">for selfish reasons because I wanted to</span> <span data-start="63.7" data-end="65.74">use in my personal projects but you guys</span> <span data-start="65.74" data-end="67.21">can play with it too because it's pretty</span> <span data-start="67.21" data-end="70.06">cool I think so to start with like</span> <span data-start="70.06" data-end="72.61">before we get into like what my one of</span> <span data-start="72.61" data-end="73.93">the most interesting features of just is</span> </p>
<p><span data-start="73.93" data-end="75.159">I want to go start from the beginning</span> <span data-start="75.159" data-end="77.56">and talk about like how do like redesign</span> <span data-start="77.56" data-end="79.75">apps as just like human beings right we</span> <span data-start="79.75" data-end="82.33">see this app in our head and it's this</span> <span data-start="82.33" data-end="84.24">vision and we have this idea of like</span> <span data-start="84.24" data-end="86.08">visualizing this app from the users</span> <span data-start="86.08" data-end="89.47">perspective but that's different from</span> <span data-start="89.47" data-end="91">how you build the app the way you build</span> <span data-start="91" data-end="92.47">the app is you actually break it down</span> <span data-start="92.47" data-end="96.63">conceptually into smaller pieces and</span> <span data-start="96.63" data-end="99.909">these little pieces help us like reason</span> <span data-start="99.909" data-end="101.08">about the app as we go we can</span> <span data-start="101.08" data-end="103.81">progressively iterate and like have a</span> <span data-start="103.81" data-end="105.43">partial prototype that we can play with</span> <span data-start="105.43" data-end="107.04">and iterate on and so forth and so on</span> <span data-start="107.04" data-end="109.93">and the way that these pieces usually</span> <span data-start="109.93" data-end="111.76">manifest themselves at least</span> <span data-start="111.76" data-end="113.409">historically has been scripts but</span> <span data-start="113.409" data-end="116.02">recently we have modules as well so we</span> <span data-start="116.02" data-end="118.39">have these scripts this is this hammer</span> <span data-start="118.39" data-end="120.759">that we've been given for however long</span> </p>
<p><span data-start="120.759" data-end="122.83">JavaScript's been around and they're</span> <span data-start="122.83" data-end="125.14">basically bags of statements and you put</span> <span data-start="125.14" data-end="127.93">them in you know your HTML page and if</span> <span data-start="127.93" data-end="129.399">you put a second script you have two</span> <span data-start="129.399" data-end="131.91">scripts running together and</span> <span data-start="131.91" data-end="133.2">one of the problems of the scripts is</span> <span data-start="133.2" data-end="135.21">that they run in this global scope so</span> <span data-start="135.21" data-end="138.24">they have this this disappointing nature</span> <span data-start="138.24" data-end="140.49">of like potentially interfering with</span> <span data-start="140.49" data-end="142.38">each other so really quickly to</span> <span data-start="142.38" data-end="145.41">illustrate and a simple example let's</span> <span data-start="145.41" data-end="147.3">say our app we want to be able to log in</span> <span data-start="147.3" data-end="149.69">and we want to be able to quickly</span> <span data-start="149.69" data-end="151.68">personalize the app and show the users</span> <span data-start="151.68" data-end="153.6">name in the app say hello Jeff or</span> <span data-start="153.6" data-end="156.12">whatever so we write a script it has</span> <span data-start="156.12" data-end="159.57">this get user object function and it</span> <span data-start="159.57" data-end="161.25">just talks to the Facebook API and like</span> <span data-start="161.25" data-end="163.59">gets the the first name of the last name</span> <span data-start="163.59" data-end="167.22">from the Facebook API this is cool so we</span> <span data-start="167.22" data-end="169.05">built this we test it we integrate it</span> <span data-start="169.05" data-end="171.03">with our UI we go play around the</span> <span data-start="171.03" data-end="172.44">browser while before we check this whole</span> <span data-start="172.44" data-end="175.35">thing in we try it right this is before</span> <span data-start="175.35" data-end="177.39">we send their dip out for review or</span> <span data-start="177.39" data-end="179.52">check it in and we make sure that when</span> <span data-start="179.52" data-end="180.9">we actually this thing actually works</span> <span data-start="180.9" data-end="183.42">like if you click login it actually gets</span> <span data-start="183.42" data-end="185.07">some information from Facebook and says</span> <span data-start="185.07" data-end="188.79">hello Jeff so that's great it's good we</span> <span data-start="188.79" data-end="190.56">go on we build our app two months later</span> <span data-start="190.56" data-end="191.88">we decide well not everybody has</span> </p>
<p><span data-start="191.88" data-end="193.2">Facebook some people want to use Twitter</span> <span data-start="193.2" data-end="195.45">some people don't like to use Facebook</span> <span data-start="195.45" data-end="197.58">that's okay so we just want to get</span> <span data-start="197.58" data-end="199.17">people's name so we can personalize our</span> <span data-start="199.17" data-end="201.15">app and pull their name in so we go we</span> <span data-start="201.15" data-end="203.97">build another library script file very</span> <span data-start="203.97" data-end="206.73">similar almost identical except this</span> <span data-start="206.73" data-end="208.26">time it's calling off to the Twitter API</span> <span data-start="208.26" data-end="210.69">getting from the username and phone the</span> <span data-start="210.69" data-end="212.54">first name and the last thing that way</span> <span data-start="212.54" data-end="214.86">so we test this the same way we tested</span> <span data-start="214.86" data-end="217.44">the Facebook script we go and we play</span> <span data-start="217.44" data-end="218.76">with it we login with Twitter we see</span> <span data-start="218.76" data-end="220.83">that says hello Jeff we're good we check</span> <span data-start="220.83" data-end="223.44">it in we push it and all of a sudden all</span> <span data-start="223.44" data-end="224.94">of our users start reporting they can't</span> <span data-start="224.94" data-end="228.48">log in with Facebook damn it what</span> <span data-start="228.48" data-end="238.55">happened was we over wrote Oh too far</span> <span data-start="238.56" data-end="241.95">let's do that again</span> <span data-start="241.95" data-end="244.78">we remember wrote that debt user object</span> <span data-start="244.78" data-end="246.7">function we were so focused building our</span> </p>
<p><span data-start="246.7" data-end="248.2">Twitter API library script that we</span> <span data-start="248.2" data-end="249.43">forgot that we already had a function</span> <span data-start="249.43" data-end="251.23">name that and scripts clobber each other</span> <span data-start="251.23" data-end="252.579">but we weren't thinking about that we</span> <span data-start="252.579" data-end="253.87">wrote it we weren't even thinking about</span> <span data-start="253.87" data-end="255.37">it we were testing it because we were so</span> <span data-start="255.37" data-end="256.859">focused on testing the Twitter thing</span> <span data-start="256.859" data-end="260.41">manually testing that is that we just</span> <span data-start="260.41" data-end="261.88">put it in there and tested the Twitter</span> <span data-start="261.88" data-end="263.08">and it worked so we thought we were good</span> <span data-start="263.08" data-end="263.5">to go</span> <span data-start="263.5" data-end="265.449">so this is where modules come in and I</span> <span data-start="265.449" data-end="266.74">don't think I'm telling anybody anything</span> <span data-start="266.74" data-end="268.96">new here everybody I think or most</span> <span data-start="268.96" data-end="270.88">people get the Y models are a good thing</span> <span data-start="270.88" data-end="273.22">they offer these two sort of forms of</span> <span data-start="273.22" data-end="276.16">isolation they give you the ability to</span> <span data-start="276.16" data-end="277.99">not clobber other things in your app</span> <span data-start="277.99" data-end="281.05">which is awesome by default so if I</span> <span data-start="281.05" data-end="282.55">write a get user object and either these</span> <span data-start="282.55" data-end="284.139">modules it's not going to clobber each</span> <span data-start="284.139" data-end="287.86">other but also with all the various</span> <span data-start="287.86" data-end="289.539">module systems that we have in our</span> <span data-start="289.539" data-end="291.46">options today which is annoying but</span> <span data-start="291.46" data-end="293.56">that's another problem they all offer</span> <span data-start="293.56" data-end="295.75">the ability to explicitly specify how we</span> <span data-start="295.75" data-end="299.229">interact with the rest of our app so es6</span> <span data-start="299.229" data-end="300.82">modules am become and yes you can</span> <span data-start="300.82" data-end="303.82">require import and you can export from</span> <span data-start="303.82" data-end="305.5">all of these the nice thing about that</span> <span data-start="305.5" data-end="307.15">is you explicitly identify the things</span> <span data-start="307.15" data-end="309.01">you want to you want to pull in from the</span> <span data-start="309.01" data-end="311.08">outside and you explicitly identify the</span> <span data-start="311.08" data-end="312.52">things that you want the outside to be</span> <span data-start="312.52" data-end="314.32">able to pull in from you that's really</span> <span data-start="314.32" data-end="315.729">important in being able to reason about</span> <span data-start="315.729" data-end="317.44">a small chunk of your app at a small</span> <span data-start="317.44" data-end="321.97">piece of time but that's how you design</span> <span data-start="321.97" data-end="325.349">your app let's talk about testing so if</span> <span data-start="325.349" data-end="328.449">you write some automated tests let's say</span> <span data-start="328.449" data-end="331.479">we wrote some tests here it's really</span> <span data-start="331.479" data-end="333.699">useful to have your tests give you some</span> <span data-start="333.699" data-end="336.52">information about when you're it's when</span> <span data-start="336.52" data-end="339.039">your application might fail before you</span> <span data-start="339.039" data-end="341.08">push it off into production so well the</span> <span data-start="341.08" data-end="342.22">first thing that's beneficial about</span> <span data-start="342.22" data-end="343.81">tests is that they pass and fail they</span> <span data-start="343.81" data-end="345.849">give you this immediate indication that</span> <span data-start="345.849" data-end="347.77">something is wrong with your code before</span> <span data-start="347.77" data-end="349.659">and it's maybe something that you didn't</span> <span data-start="349.659" data-end="351.099">even think of it's the Facebook library</span> <span data-start="351.099" data-end="354.22">broke or whatever but this kind of test</span> <span data-start="354.22" data-end="356.05">message sucks it's not very specific it</span> <span data-start="356.05" data-end="358.419">just says the API library failed so</span> <span data-start="358.419" data-end="360.58">really what we want out of tests we want</span> <span data-start="360.58" data-end="362.26">that signal of failure but we also want</span> <span data-start="362.26" data-end="364.36">more information we want to know what</span> <span data-start="364.36" data-end="366.099">failed let's let's like narrow that</span> <span data-start="366.099" data-end="369.4">scope down to figure out exactly like if</span> <span data-start="369.4" data-end="370.81">all we had was that</span> <span data-start="370.81" data-end="374.56">the the API module failed we have to go</span> <span data-start="374.56" data-end="376.18">manually figure out how the test</span> <span data-start="376.18" data-end="378.43">observed that something failed but if we</span> <span data-start="378.43" data-end="379.87">can write tests that actually give us</span> <span data-start="379.87" data-end="382.18">this information Twitter API jet user</span> <span data-start="382.18" data-end="384">object never called its callback that</span> <span data-start="384" data-end="385.87">significantly reduces the amount of time</span> <span data-start="385.87" data-end="386.98">we have to spend trying to figure out</span> <span data-start="386.98" data-end="388.96">what went wrong and the test did it for</span> <span data-start="388.96" data-end="389.85">us</span> <span data-start="389.85" data-end="394.69">so the next question is like well I'll</span> <span data-start="394.69" data-end="396.49">just recap here basically you have this</span> <span data-start="396.49" data-end="398.5">sort of debug problem you want to you</span> <span data-start="398.5" data-end="400.15">find out that a problem or a bug exists</span> <span data-start="400.15" data-end="401.53">test give you this very quickly and very</span> <span data-start="401.53" data-end="403.93">easily because they pass or fail the</span> <span data-start="403.93" data-end="405.43">next question and there the next thing</span> <span data-start="405.43" data-end="406.479">that you want to do is you want to be</span> <span data-start="406.479" data-end="408.07">able to reproduce or figure out how that</span> <span data-start="408.07" data-end="410.41">how to observe that bug if a user sends</span> <span data-start="410.41" data-end="412.21">your bug report if they just tell you</span> <span data-start="412.21" data-end="414.94">that your app is broken you don't that's</span> <span data-start="414.94" data-end="416.77">not useful it's the same thing with</span> <span data-start="416.77" data-end="419.08">tests so you need to know how the tests</span> <span data-start="419.08" data-end="421.12">observe that something failed and then</span> <span data-start="421.12" data-end="423.31">once you have that you can dive in and</span> <span data-start="423.31" data-end="425.05">find the root cause this is kind of</span> <span data-start="425.05" data-end="428.74">similar to what Chris shadows talk was</span> <span data-start="428.74" data-end="430.66">the other day it was like isolating the</span> <span data-start="430.66" data-end="432.22">area the problem domain and being able</span> <span data-start="432.22" data-end="433.84">to narrow down to the smallest search</span> <span data-start="433.84" data-end="442.03">search space um so we have this app and</span> <span data-start="442.03" data-end="444.039">we need to figure out how we've broken</span> <span data-start="444.039" data-end="445.84">it down into pieces to build it but now</span> <span data-start="445.84" data-end="447.58">we need to figure out how to break it</span> <span data-start="447.58" data-end="450.7">down to pieces that we want to test well</span> <span data-start="450.7" data-end="453.01">one of the most traditional ways that</span> <span data-start="453.01" data-end="455.26">you do this is you just observe that you</span> <span data-start="455.26" data-end="456.52">have these modules and there are these</span> <span data-start="456.52" data-end="457.72">grooves between them right</span> <span data-start="457.72" data-end="459.43">each of these orange things is a module</span> <span data-start="459.43" data-end="460.87">they might talk to each other they have</span> <span data-start="460.87" data-end="463.11">little sort of links between each other</span> <span data-start="463.11" data-end="465.46">these but because you have these nice</span> <span data-start="465.46" data-end="468.31">little separations between these modules</span> <span data-start="468.31" data-end="470.44">it's very easy to be able to cut them</span> <span data-start="470.44" data-end="472.479">apart the only thing you have to cut in</span> <span data-start="472.479" data-end="474.25">those little grooves in between the</span> <span data-start="474.25" data-end="476.169">modules is the links as those requires</span> <span data-start="476.169" data-end="478.479">and those imports so this is where it</span> <span data-start="478.479" data-end="482.8">just comes very useful but one of the</span> <span data-start="482.8" data-end="484.3">benefits of being able to cut out a</span> <span data-start="484.3" data-end="486.52">piece of your app is that whenever your</span> <span data-start="486.52" data-end="488.71">test fails if you know that your test is</span> <span data-start="488.71" data-end="490.93">only test is only exercising code within</span> <span data-start="490.93" data-end="492.94">that white square let's say that one</span> <span data-start="492.94" data-end="495.55">module you know that you've reduced your</span> <span data-start="495.55" data-end="497.38">server space in your app for the problem</span> <span data-start="497.38" data-end="499.75">to that white square so now debugging</span> <span data-start="499.75" data-end="502.77">that test becomes much easier</span> <span data-start="502.77" data-end="504.569">so where I'm going with this becomes</span> <span data-start="504.569" data-end="505.889">much more apparent when I actually start</span> <span data-start="505.889" data-end="508.4">showing you code so here's a very simple</span> <span data-start="508.4" data-end="512.539">test that will start writing using just</span> <span data-start="512.539" data-end="515.25">just ships with jasmine</span> <span data-start="515.25" data-end="518.969">right now at least we are hoping to be</span> <span data-start="518.969" data-end="520.289">able to make it so that you can plug in</span> <span data-start="520.289" data-end="521.94">different test frameworks as well but</span> <span data-start="521.94" data-end="524.039">we'll start with jasmine and if you're</span> <span data-start="524.039" data-end="525.899">not familiar with jasmine basically the</span> <span data-start="525.899" data-end="527.67">way you your standard test boilerplate</span> <span data-start="527.67" data-end="530.22">goes is you write a describe and that's</span> <span data-start="530.22" data-end="532.47">your test suite in traditional terms and</span> <span data-start="532.47" data-end="534.54">you have your it which is your spec or</span> <span data-start="534.54" data-end="537.3">your test and describes or test Suites</span> <span data-start="537.3" data-end="540.54">can have sets of test specs and tests in</span> <span data-start="540.54" data-end="542.76">them here we only have one and you see</span> <span data-start="542.76" data-end="545.27">that we require Facebook API right here</span> <span data-start="545.27" data-end="547.44">so what we're doing is we're getting</span> <span data-start="547.44" data-end="549.089">access to this module inside of our test</span> <span data-start="549.089" data-end="551.089">and this is the module we want to test</span> <span data-start="551.089" data-end="554.91">but this is the thing we're doing right</span> <span data-start="554.91" data-end="558.959">now got ahead of myself in real life</span> <span data-start="558.959" data-end="561.24">what would happen if we did this like in</span> <span data-start="561.24" data-end="563.07">real life like say no tor browser fire</span> <span data-start="563.07" data-end="565.89">or whatever what you're going to get</span> <span data-start="565.89" data-end="567.149">back is an object that looks like this</span> <span data-start="567.149" data-end="568.98">it has this get user object right and</span> <span data-start="568.98" data-end="570.63">it's a function and it does this stuff</span> <span data-start="570.63" data-end="573">that we saw earlier but in jest what you</span> <span data-start="573" data-end="576.18">actually get which is interesting and my</span> <span data-start="576.18" data-end="578.16">favorite part is you don't get that you</span> <span data-start="578.16" data-end="580.44">get a mock function you don't get the</span> <span data-start="580.44" data-end="583.86">real thing there's actually problematic</span> <span data-start="583.86" data-end="586.399">because you want to test the real thing</span> <span data-start="586.399" data-end="589.2">right here we want to test the Facebook</span> </p>
<p><span data-start="589.2" data-end="592.579">API but just mocks everything by default</span> <span data-start="592.579" data-end="595.74">so we have to tell Jess not to mock the</span> <span data-start="595.74" data-end="599.19">Facebook API but it's cool because we've</span> <span data-start="599.19" data-end="600.93">told just exactly what we don't want</span> <span data-start="600.93" data-end="602.91">mocked and everything else just will</span> <span data-start="602.91" data-end="605.31">just do it for us it's not that magical</span> <span data-start="605.31" data-end="607.8">the way it works is whenever you require</span> <span data-start="607.8" data-end="610.709">a function just goes off into like an</span> <span data-start="610.709" data-end="612.839">isolated environment actually requires</span> <span data-start="612.839" data-end="615.99">the the module and the reason the</span> <span data-start="615.99" data-end="618.27">environment is isolated is to make sure</span> <span data-start="618.27" data-end="620.49">that any side-effects that happen when</span> <span data-start="620.49" data-end="622.079">you require that module don't affect</span> <span data-start="622.079" data-end="624.48">your test environment but often secret</span> <span data-start="624.48" data-end="626.209">it goes off and requires the real module</span> <span data-start="626.209" data-end="628.529">looks at the exports object that come</span> <span data-start="628.529" data-end="629.76">out of it that came out of it</span> <span data-start="629.76" data-end="633.18">says oh there's a get user object</span> <span data-start="633.18" data-end="635.339">function and then it builds a fake</span> <span data-start="635.339" data-end="635.92">version</span> <span data-start="635.92" data-end="637.889">what it saw and that's what it gives you</span> <span data-start="637.889" data-end="642.149">so when you do things like requiring</span> <span data-start="642.149" data-end="645.24">other things let's go look at that</span> </p>
<p><span data-start="645.24" data-end="647.709">Facebook API module that we're requiring</span> <span data-start="647.709" data-end="649.959">the test at the top of this module will</span> <span data-start="649.959" data-end="652.51">requiring xhr well in our test</span> <span data-start="652.51" data-end="655.18">environment when we execute Facebook API</span> <span data-start="655.18" data-end="656.519">because we've said don't mock it</span> </p>
<p><span data-start="656.519" data-end="658.81">Facebook API doesn't get the real xhr</span> <span data-start="658.81" data-end="661.839">module by default and automatically it</span> <span data-start="661.839" data-end="663.76">gets one that looks like the Facebook</span> <span data-start="663.76" data-end="666.16">API module and you can see that the</span> <span data-start="666.16" data-end="668.98">sorry the xhr module you can see the xhr</span> <span data-start="668.98" data-end="671.29">module has a get function that it</span> <span data-start="671.29" data-end="675.1">exported well just has generated an just</span> <span data-start="675.1" data-end="677.23">as automatically generator to get export</span> <span data-start="677.23" data-end="679.18">for you so if you actually were to call</span> <span data-start="679.18" data-end="680.889">that function there it wouldn't do</span> <span data-start="680.889" data-end="683.199">anything it's just mocked and the whole</span> <span data-start="683.199" data-end="684.76">point here is that you don't want to</span> <span data-start="684.76" data-end="686.199">exercise any code that isn't in that</span> <span data-start="686.199" data-end="688.18">white area because if your test fails</span> <span data-start="688.18" data-end="690.07">you want to be able to be guaranteed</span> <span data-start="690.07" data-end="692.62">that it's something that you need to</span> <span data-start="692.62" data-end="694.18">search within the white area not within</span> <span data-start="694.18" data-end="697.42">your entire app so I've added some</span> <span data-start="697.42" data-end="700">contrived stuff here to make the testing</span> <span data-start="700" data-end="706.3">example simpler to explain but we've I</span> <span data-start="706.3" data-end="708.82">basically added a user cache here and</span> </p>
<p><span data-start="708.82" data-end="710.519">I've primed it with information about me</span> <span data-start="710.519" data-end="713.079">and if you call user object now rather</span> <span data-start="713.079" data-end="714.73">than always going out to the API and</span> <span data-start="714.73" data-end="716.23">fetching the information it will go to</span> <span data-start="716.23" data-end="717.519">the user cache first and if it's there</span> <span data-start="717.519" data-end="719.98">it'll return it if not it goes off and</span> <span data-start="719.98" data-end="725.92">gets it so let's see yeah let's go to</span> <span data-start="725.92" data-end="730.449">the back to the test so coming back to</span> <span data-start="730.449" data-end="732.85">the test we've required our Facebook ID</span> </p>
<p><span data-start="732.85" data-end="735.279">API module all of its dependencies have</span> <span data-start="735.279" data-end="737.05">been automatically blocked so whenever</span> <span data-start="737.05" data-end="738.91">we do anything with it we're only going</span> <span data-start="738.91" data-end="741.1">to be executing code within it the next</span> <span data-start="741.1" data-end="743.05">thing we do is we want to go ahead</span> <span data-start="743.05" data-end="744.699">because this test is making sure that</span> <span data-start="744.699" data-end="747.13">our callback function is called we want</span> <span data-start="747.13" data-end="750.1">to make this mock callback function and</span> <span data-start="750.1" data-end="752.44">we're using just has a utility for</span> <span data-start="752.44" data-end="755.62">generating mock functions it's a it's</span> <span data-start="755.62" data-end="757.569">almost the same thing if you've heard of</span> <span data-start="757.569" data-end="759.519">jasmine dot create spy it's the same</span> <span data-start="759.519" data-end="760.569">thing except we just didn't want a</span> <span data-start="760.569" data-end="762.37">couple just directly to Jasmine so we</span> <span data-start="762.37" data-end="766.11">included nan couple mocking utilities</span> <span data-start="766.11" data-end="768.699">creates this mock function all the mock</span> <span data-start="768.699" data-end="769.87">function does is work</span> <span data-start="769.87" data-end="771.94">the calls that are made to it and the</span> <span data-start="771.94" data-end="774.66">arguments that are passed to those calls</span> <span data-start="774.66" data-end="776.98">so now we're going to call our real</span> <span data-start="776.98" data-end="779.59">version of Facebook API get user objects</span> <span data-start="779.59" data-end="781.75">with Jeff Moe which remember I primed so</span> <span data-start="781.75" data-end="784.39">it's in our cache and then the next</span> <span data-start="784.39" data-end="785.98">thing we do here is this Jeff stop run</span> </p>
<p><span data-start="785.98" data-end="790.48">Alzheimer's this is a really cool</span> <span data-start="790.48" data-end="792.19">feature it's it's really it's just like</span> <span data-start="792.19" data-end="793.3">I didn't cope with this but somebody</span> <span data-start="793.3" data-end="795.13">whoever came up with this is it's it's</span> <span data-start="795.13" data-end="795.67">really neat</span> <span data-start="795.67" data-end="798.34">basically all we want to do in this test</span> <span data-start="798.34" data-end="799.87">at this point is wait for that set</span> <span data-start="799.87" data-end="801.43">timeout zero to go because remember it</span> <span data-start="801.43" data-end="805.45">was like cached which we contrived for</span> <span data-start="805.45" data-end="807.79">this example so that set time on zero</span> <span data-start="807.79" data-end="808.81">isn't going to happen until the next</span> <span data-start="808.81" data-end="811.06">event loop we don't we don't want to</span> <span data-start="811.06" data-end="812.35">wait we're just running a test we just</span> <span data-start="812.35" data-end="814.48">want to fast forward through time just</span> <span data-start="814.48" data-end="815.92">gives you the ability because you're in</span> <span data-start="815.92" data-end="818.41">the Jess environment you can run through</span> <span data-start="818.41" data-end="821.17">all the pending timers and exhaust that</span> <span data-start="821.17" data-end="823.93">timer queue right now imperative lis in</span> <span data-start="823.93" data-end="826.24">your tests so you don't the wait there's</span> <span data-start="826.24" data-end="827.71">no like asynchronous test there's no</span> <span data-start="827.71" data-end="829.93">like if your test callback never runs</span> <span data-start="829.93" data-end="831.28">then you have to wait five seconds here</span> <span data-start="831.28" data-end="832.9">a test if I'm timeout that none of that</span> <span data-start="832.9" data-end="835.32">nonsense you just run your timers now</span> <span data-start="835.32" data-end="838.3">and then lastly you can do your expect</span> <span data-start="838.3" data-end="840.43">you expect that mock callback to have</span> <span data-start="840.43" data-end="842.56">been called with your stuff and it</span> <span data-start="842.56" data-end="850.99">should pass let's see so that's how you</span> <span data-start="850.99" data-end="852.58">that's the high level like the most</span> <span data-start="852.58" data-end="854.26">interesting feature of just in my</span> <span data-start="854.26" data-end="856.21">opinion otherwise most of the other</span> <span data-start="856.21" data-end="857.47">features are just things that you've</span> <span data-start="857.47" data-end="860.73">probably seen before so but the biggest</span> <span data-start="860.73" data-end="862.6">benefit to the fact that these things</span> <span data-start="862.6" data-end="864.31">exist in just in my mind aliases they</span> <span data-start="864.31" data-end="867.7">come together so you can npm install' GS</span> </p>
<p><span data-start="867.7" data-end="870.28">CLI you just simply CD into your project</span> <span data-start="870.28" data-end="871.42">and you're on the just command and it</span> <span data-start="871.42" data-end="873.01">searches for your tests finds them</span> <span data-start="873.01" data-end="874.87">execute them it executes them in the</span> <span data-start="874.87" data-end="876.28">just environment this is very similar to</span> <span data-start="876.28" data-end="878.8">like the mote the mocha CLI or the</span> <span data-start="878.8" data-end="880.36">Jasmine node CLI that you might have</span> <span data-start="880.36" data-end="884.57">seen before and probably lots of others</span> <span data-start="884.58" data-end="887.95">so let's see yeah you run the you run</span> <span data-start="887.95" data-end="889.06">the test Runner and searches for your</span> <span data-start="889.06" data-end="891.79">test it finds them it also executes your</span> <span data-start="891.79" data-end="894.46">tests in clean environments each time so</span> <span data-start="894.46" data-end="897.13">every time you run a test file at the</span> <span data-start="897.13" data-end="898.51">end of that test file it's going to</span> <span data-start="898.51" data-end="899.89">clean everything up any side effects</span> <span data-start="899.89" data-end="901.84">that may have happened any modules you</span> <span data-start="901.84" data-end="904.03">may have required a module state it all</span> <span data-start="904.03" data-end="905.62">it's cleaned up and then when you run</span> <span data-start="905.62" data-end="907.93">the next file it it's starting from a</span> <span data-start="907.93" data-end="910.33">clean state slate so no tests can</span> <span data-start="910.33" data-end="913">interfere by means of side effects with</span> <span data-start="913" data-end="915.46">the next next test see how am i doing on</span> <span data-start="915.46" data-end="921.12">time I got plenty</span> <span data-start="921.12" data-end="923.5">what does what this actually gives us</span> <span data-start="923.5" data-end="924.94">though is the ability to run tests in</span> <span data-start="924.94" data-end="928.54">parallel so we do by default the just</span> <span data-start="928.54" data-end="930.25">command line run or not only finds tests</span> <span data-start="930.25" data-end="932.05">and execute them but actually by default</span> <span data-start="932.05" data-end="934.93">boots up a worker pool of child</span> <span data-start="934.93" data-end="937.63">processes this is a node program right</span> <span data-start="937.63" data-end="941.23">here just as a node node program and it</span> <span data-start="941.23" data-end="944.47">shells out to those child processes and</span> <span data-start="944.47" data-end="946.84">runs your tests in parallel and this is</span> <span data-start="946.84" data-end="948.31">extremely important to us at Facebook</span> <span data-start="948.31" data-end="950.08">because we have thousands of these tests</span> <span data-start="950.08" data-end="952.66">and we have to run them like often and</span> <span data-start="952.66" data-end="955.33">fast so we run our however many thousand</span> </p>
<p><span data-start="955.33" data-end="959.44">I probably should look that up tests in</span> <span data-start="959.44" data-end="961.72">well around a minute a little over a</span> <span data-start="961.72" data-end="962.08">minute</span> <span data-start="962.08" data-end="966.46">which is pretty cool let's see the the</span> <span data-start="966.46" data-end="967.78">other interesting aspect of just is</span> <span data-start="967.78" data-end="969.34">something you might have also seen</span> <span data-start="969.34" data-end="970.9">before is that it ships with Jazze Dom</span> <span data-start="970.9" data-end="973.87">so j/s Dom if you haven't heard of it is</span> <span data-start="973.87" data-end="979.39">a way in node of sort of creating a fake</span> <span data-start="979.39" data-end="982.54">version of the Dom API and they work so</span> <span data-start="982.54" data-end="984.73">if you do document aakhri element in in</span> <span data-start="984.73" data-end="987.16">your test it actually returns an object</span> <span data-start="987.16" data-end="989.05">it looks like a Dom element so you can</span> <span data-start="989.05" data-end="992.44">actually write tests on modules that are</span> <span data-start="992.44" data-end="993.61">actually interacting with the Dom</span> <span data-start="993.61" data-end="995.23">creating things putting things in a</span> <span data-start="995.23" data-end="996.64">document that body so forth and so on</span> <span data-start="996.64" data-end="998.77">and then in your test you just query</span> <span data-start="998.77" data-end="1000.75">selector all for it find it assert that</span> <span data-start="1000.75" data-end="1002.16">it did what it was supposed to do and</span> <span data-start="1002.16" data-end="1005.97">you can do your test that way that as</span> <span data-start="1005.97" data-end="1008.82">well as is cleaned up in each version so</span> <span data-start="1008.82" data-end="1010.17">you get a clean version the Dom in each</span> <span data-start="1010.17" data-end="1012.15">each run of the test and I should</span> <span data-start="1012.15" data-end="1012.99">clarify because I get this question</span> <span data-start="1012.99" data-end="1015.99">sometimes when I say we run tests in</span> <span data-start="1015.99" data-end="1018.33">parallel we run test files in parallel</span> <span data-start="1018.33" data-end="1020.97">we it's it's a very hard problem and I'm</span> <span data-start="1020.97" data-end="1023.4">not sure if it's even possible to split</span> <span data-start="1023.4" data-end="1026.91">those specs up into parallel but if you</span> <span data-start="1026.91" data-end="1028.92">have like this huge test file that takes</span> <span data-start="1028.92" data-end="1033.06">a really long time it's it's it's the</span> <span data-start="1033.06" data-end="1034.86">quickest optimisation you can do is</span> <span data-start="1034.86" data-end="1036.15">split that test in the two so that you</span> <span data-start="1036.15" data-end="1037.27">can run both of them parallel</span> <span data-start="1037.27" data-end="1042.91">so just to clarify there I think I sped</span> <span data-start="1042.91" data-end="1044.53">through that way faster than I expected</span> <span data-start="1044.53" data-end="1048.339">so that's the gist of it you can check</span> <span data-start="1048.339" data-end="1053.04">out just by installing it npm install' G</span> <span data-start="1053.04" data-end="1055.21">you can check out the code and the</span> <span data-start="1055.21" data-end="1057.28">documentation and we also most of us</span> <span data-start="1057.28" data-end="1062.76">hang out in freenode pound Jess Jas and</span> </p>
<p><span data-start="1062.76" data-end="1066.34">I'm not always on my computer but I will</span> <span data-start="1066.34" data-end="1067.63">at least try to answer questions and</span> <span data-start="1067.63" data-end="1071.65">such yeah I'll bail general I think I'm</span> </p>
</section>