<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CH6icJbLhlI</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/CH6icJbLhlI?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="37.53" data-end="40.24">thanks for the introduction</span> <span data-start="40.24" data-end="44.89">all right so I'm spike I like like he</span> <span data-start="44.89" data-end="46.42">said I work at Airbnb based out of San</span> </p>
<p><span data-start="46.42" data-end="47.95">Francisco I've been there for three</span> <span data-start="47.95" data-end="51.1">years writing JavaScript of Ruby and I</span> <span data-start="51.1" data-end="52.81">just wanna say I'm super stoked to be</span> <span data-start="52.81" data-end="55.24">here really proud this is such a great</span> <span data-start="55.24" data-end="56.44">event the best tech event I've ever been</span> <span data-start="56.44" data-end="57.97">to and just really happy to be part of</span> <span data-start="57.97" data-end="60.97">it so let's get started we're gonna talk</span> <span data-start="60.97" data-end="65.5">about isomorphic JavaScript and so</span> <span data-start="65.5" data-end="67.39">probably if I were you the first thing</span> </p>
<p><span data-start="67.39" data-end="69.429">I'd be thinking is wTF is isomorphic</span> <span data-start="69.429" data-end="72.219">JavaScript what is this big fancy</span> <span data-start="72.219" data-end="74.38">sounding word well it's simple really</span> <span data-start="74.38" data-end="76.539">the way I see it it's just JavaScript</span> <span data-start="76.539" data-end="78.28">code that can be shared between</span> <span data-start="78.28" data-end="82.359">different environments so I'm mostly</span> <span data-start="82.359" data-end="83.889">interested in the client in the server</span> <span data-start="83.889" data-end="85.81">I'm a web engineer so sharing code</span> <span data-start="85.81" data-end="87.909">between the web browser and something</span> <span data-start="87.909" data-end="90.759">like nodejs but as we've seen the last</span> <span data-start="90.759" data-end="91.659">few days there's a million different</span> </p>
<p><span data-start="91.659" data-end="93.34">JavaScript environments these days</span> <span data-start="93.34" data-end="95.469">JavaScript runtimes so you can imagine</span> <span data-start="95.469" data-end="98.2">also something like narwhal sharing code</span> <span data-start="98.2" data-end="99.609">with Narwhal because I've heard of</span> <span data-start="99.609" data-end="101.579">Narwhal it's the new Java eight</span> <span data-start="101.579" data-end="103.99">JavaScript runtime it's a successor to</span> <span data-start="103.99" data-end="106.509">rhino just to note there's not actually</span> <span data-start="106.509" data-end="108.189">an official Marvel logo so I thought</span> <span data-start="108.189" data-end="112.209">that was appropriate also native</span> <span data-start="112.209" data-end="114.7">platforms so Android iOS these can run</span> <span data-start="114.7" data-end="115.99">JavaScript really well these days and so</span> <span data-start="115.99" data-end="117.399">you can imagine we need to share code</span> <span data-start="117.399" data-end="119.799">between your web app or your server and</span> <span data-start="119.799" data-end="123.189">native platforms but also things like</span> <span data-start="123.189" data-end="126.729">spark and tehsil these are we've heard</span> <span data-start="126.729" data-end="128.5">about these last few days little devices</span> <span data-start="128.5" data-end="130.15">that can run JavaScript why can't we</span> <span data-start="130.15" data-end="132.04">share a piece of code with those two and</span> <span data-start="132.04" data-end="133.12">you want to get really crazy and</span> <span data-start="133.12" data-end="134.46">futuristic</span> <span data-start="134.46" data-end="136.56">you can share code with your cars so I</span> <span data-start="136.56" data-end="138.5">don't know if anyone's heard at the qmk</span> <span data-start="138.5" data-end="141">specification I learned about this a</span> <span data-start="141" data-end="143.16">couple months ago there's actually the</span> <span data-start="143.16" data-end="144.42">the automotive industry is coming up</span> <span data-start="144.42" data-end="146.46">with a spec to use web technologies to</span> <span data-start="146.46" data-end="148.2">build displays in cars so I'd like your</span> <span data-start="148.2" data-end="150.36">driving directions your radio</span> <span data-start="150.36" data-end="153.6">air-conditioning all that so but really</span> <span data-start="153.6" data-end="154.92">today we're just going to focus on</span> <span data-start="154.92" data-end="159.27">client-server so a really high-level</span> <span data-start="159.27" data-end="161.76">kind of overview of how I imagine this</span> <span data-start="161.76" data-end="164.34">works is you've got some code that runs</span> <span data-start="164.34" data-end="166.29">in the client side you've got some code</span> <span data-start="166.29" data-end="167.91">that runs in your back-end and there's</span> <span data-start="167.91" data-end="169.5">some layer that's shared between the</span> <span data-start="169.5" data-end="171.69">client and server so there's certain</span> <span data-start="171.69" data-end="172.53">things that would only exist in the</span> <span data-start="172.53" data-end="174.15">client side make certain you know user</span> <span data-start="174.15" data-end="176.7">interactions logging whatever and your</span> <span data-start="176.7" data-end="179.25">back-end could be node but it could be</span> </p>
<p><span data-start="179.25" data-end="182.25">Ruby or Python or you know peach whoever</span> <span data-start="182.25" data-end="183.69">the idea is it's just a persistence</span> <span data-start="183.69" data-end="185.43">layer in an API and then there's this</span> <span data-start="185.43" data-end="187.41">shared layer in between which can be</span> <span data-start="187.41" data-end="188.82">running both sides and this could be</span> <span data-start="188.82" data-end="191.55">views so templates or components or view</span> <span data-start="191.55" data-end="193.35">logic whatever it could be application</span> <span data-start="193.35" data-end="196.14">logic so models or whatever arbitrary</span> <span data-start="196.14" data-end="199.62">logic and it could be routes for example</span> <span data-start="199.62" data-end="201.42">but by the way that timer hasn't started</span> <span data-start="201.42" data-end="207.03">so I'm just gonna keep going forever so</span> <span data-start="207.03" data-end="209.07">let's talk about briefly the etymology</span> <span data-start="209.07" data-end="212.99">give the term isomorphic JavaScript so</span> <span data-start="212.99" data-end="215.58">just to be really authentic here's the</span> <span data-start="215.58" data-end="217.49">dictionary definition of isomorphic</span> <span data-start="217.49" data-end="219.57">corresponding or similar in form and</span> <span data-start="219.57" data-end="223.35">relations right that makes sense so if</span> <span data-start="223.35" data-end="224.88">we look at the latin forms to be further</span> <span data-start="224.88" data-end="228.39">pedantic ISO means same and morph means</span> <span data-start="228.39" data-end="231.96">form so same form so code that can share</span> <span data-start="231.96" data-end="233.85">a form between these different</span> <span data-start="233.85" data-end="235.59">environments but really we've got to</span> <span data-start="235.59" data-end="237.09">give credit to Charlie Robbins for</span> <span data-start="237.09" data-end="239.67">popularizing this is the first time I</span> <span data-start="239.67" data-end="241.5">ever heard of isomorphic JavaScript was</span> <span data-start="241.5" data-end="243.27">in his blog post scaling isomorphic</span> </p>
<p><span data-start="243.27" data-end="246.93">JavaScript code back in 2011 so charlie</span> <span data-start="246.93" data-end="249.27">is index zero on Twitter he's one of the</span> <span data-start="249.27" data-end="251.55">founders of new Jitsu and is he's got a</span> <span data-start="251.55" data-end="253.23">great blog post kind of describing the</span> <span data-start="253.23" data-end="256.01">different MVC versus mvvm versus MVP</span> <span data-start="256.01" data-end="258.06">patterns and how it could apply to</span> <span data-start="258.06" data-end="261.3">isomorphic code</span> <span data-start="261.31" data-end="263.139">but when I when I first started talking</span> <span data-start="263.139" data-end="264.61">about isomorphic JavaScript I released a</span> <span data-start="264.61" data-end="267.13">blog post last year and on Hacker News</span> <span data-start="267.13" data-end="268.9">most people were saying you're using it</span> <span data-start="268.9" data-end="270.73">wrong like isomorphic comes from</span> <span data-start="270.73" data-end="273.04">mathematics or it's a chemistry term or</span> <span data-start="273.04" data-end="274.72">it's this or that and they're saying</span> <span data-start="274.72" data-end="276.9">really what you mean is monomorphic or</span> <span data-start="276.9" data-end="278.98">actually hetero morphic is more</span> <span data-start="278.98" data-end="280.03">appropriate for what you're describing</span> <span data-start="280.03" data-end="283.36">or homomorphic is more correct or</span> <span data-start="283.36" data-end="284.98">polymorphic and I'm gonna say I don't</span> <span data-start="284.98" data-end="288.01">like whatever it's a word you can refer</span> <span data-start="288.01" data-end="291.13">all questions to Charlie Robbins there's</span> <span data-start="291.13" data-end="293.68">some more playful trolling as well I</span> <span data-start="293.68" data-end="295.15">don't know if you know Dee Shaw</span> <span data-start="295.15" data-end="296.979">if he might be in the audience today but</span> <span data-start="296.979" data-end="299.41">uh he he likes to make fun of me</span> <span data-start="299.41" data-end="300.85">whenever I use that term he calls it a</span> <span data-start="300.85" data-end="303.4">five-dollar word and every time I say it</span> <span data-start="303.4" data-end="305.41">he finds me five dollars in virtual</span> <span data-start="305.41" data-end="308.41">currency and so by the end of today I'm</span> <span data-start="308.41" data-end="311.48">gonna own him a couple thousand dollars</span> <span data-start="311.49" data-end="314.62">so just as an introduction let's let's</span> <span data-start="314.62" data-end="317.229">look at some apps that are using this</span> <span data-start="317.229" data-end="318.94">approach today and then we'll dive into</span> <span data-start="318.94" data-end="321.94">how you can build isomorphic apps so a</span> <span data-start="321.94" data-end="323.65">great example is Flickr I don't know if</span> <span data-start="323.65" data-end="324.669">you've seen that Flickr redesign</span> <span data-start="324.669" data-end="326.08">recently after they were bought by Yahoo</span> <span data-start="326.08" data-end="328.3">but this is their photo page so this is</span> <span data-start="328.3" data-end="330.58">like you search for silly cat and you</span> <span data-start="330.58" data-end="332.44">get this this list page and then you</span> <span data-start="332.44" data-end="335.8">click on one of one of these and it's</span> <span data-start="335.8" data-end="337">rear-ended in the client side right it's</span> <span data-start="337" data-end="338.74">like a single page app client side app</span> <span data-start="338.74" data-end="340.539">whatever rear Enders but the cool part</span> <span data-start="340.539" data-end="342.61">is if you were to refresh either this</span> <span data-start="342.61" data-end="344.47">page or the previous page it would all</span> <span data-start="344.47" data-end="347.38">come rendered from the server so each</span> <span data-start="347.38" data-end="349.35">page can be rendered fully on the server</span> <span data-start="349.35" data-end="351.72">or can be rendered in the client side</span> <span data-start="351.72" data-end="354.789">and Flickr does this using Yahoo's</span> <span data-start="354.789" data-end="357.01">modown libraries I think there's some</span> <span data-start="357.01" data-end="358.26">mowed down developers in the audience</span> <span data-start="358.26" data-end="360.4">from Yahoo but basically it's a</span> <span data-start="360.4" data-end="364.3">collection of loosely coupled modules</span> <span data-start="364.3" data-end="366.19">kind of based around Express that lets</span> <span data-start="366.19" data-end="367.57">you build apps like this and it's a</span> <span data-start="367.57" data-end="369.88">successor to mojito mojito was Yahoo's</span> <span data-start="369.88" data-end="374.35">really ambitious large project that that</span> <span data-start="374.35" data-end="376.27">attempted to build the isomorphic apps</span> <span data-start="376.27" data-end="377.56">it's something they used internally a</span> <span data-start="377.56" data-end="379.06">few years ago but it never really caught</span> <span data-start="379.06" data-end="380.65">on more broadly because it's so</span> <span data-start="380.65" data-end="385.12">monolithic and it's very Yui ish so</span> </p>
<p><span data-start="385.12" data-end="387.37">Instagram is another cool example you</span> <span data-start="387.37" data-end="388.36">might not have realized this but</span> <span data-start="388.36" data-end="390.31">Instagram comm is all built using react</span> <span data-start="390.31" data-end="393.01">and if you land on someone's histogram</span> <span data-start="393.01" data-end="393.9">page</span> <span data-start="393.9" data-end="396">it would be rendered on the server-side</span> <span data-start="396" data-end="398.79">you click on a photo would be rendered</span> <span data-start="398.79" data-end="399.99">client-side you refresh rendered</span> <span data-start="399.99" data-end="402.69">server-side it's same thing and so this</span> <span data-start="402.69" data-end="405.27">was built using Facebook's react library</span> <span data-start="405.27" data-end="408.09">as someone mentioned earlier today react</span> <span data-start="408.09" data-end="410.1">can be executed both on the client and</span> <span data-start="410.1" data-end="412.83">the server on the server it emits HTML</span> <span data-start="412.83" data-end="414.84">on this on the client it emits Dom notes</span> <span data-start="414.84" data-end="416.55">but what's really interesting about this</span> <span data-start="416.55" data-end="418.86">case is Instagram calm is a django app</span> <span data-start="418.86" data-end="421.83">so it's written in Python and they used</span> <span data-start="421.83" data-end="423.96">a node service running on the web on the</span> </p>
<p><span data-start="423.96" data-end="426.69">Python box and you would hand it a</span> <span data-start="426.69" data-end="427.919">template and some data and it would come</span> <span data-start="427.919" data-end="429.87">back at you with some HTML but there's</span> <span data-start="429.87" data-end="432.96">an asterisk here because instagram.com</span> <span data-start="432.96" data-end="435.09">no longer uses this they disabled the</span> <span data-start="435.09" data-end="436.889">node process from what I understand it's</span> <span data-start="436.889" data-end="438.93">because they there were bunch of Python</span> <span data-start="438.93" data-end="441.06">developers didn't want the overhead of</span> <span data-start="441.06" data-end="443.76">maintaining the node service but it's</span> <span data-start="443.76" data-end="447.84">possible another example I have to plug</span> </p>
<p><span data-start="447.84" data-end="449.76">Airbnb this is our mobile website and</span> <span data-start="449.76" data-end="452.94">about Airbnb com same story server</span> <span data-start="452.94" data-end="456.03">rendered but it's also a single page app</span> <span data-start="456.03" data-end="458.19">so as you navigate around and to be</span> <span data-start="458.19" data-end="461.07">rendered client-side and so we developed</span> <span data-start="461.07" data-end="463.38">a library called render based off of</span> <span data-start="463.38" data-end="466.62">this experience and render lets you take</span> <span data-start="466.62" data-end="468.24">it back one app and pull it down to the</span> <span data-start="468.24" data-end="470.28">server side and run your your models and</span> <span data-start="470.28" data-end="471.93">your views and your templates on the</span> <span data-start="471.93" data-end="473.52">server using Express but it's also a</span> <span data-start="473.52" data-end="476.97">full client side app and one of my</span> <span data-start="476.97" data-end="479.61">favorite examples is asana has anyone</span> <span data-start="479.61" data-end="481.38">heard of asana it's a really awesome</span> <span data-start="481.38" data-end="484.59">task management project management app</span> <span data-start="484.59" data-end="486.18">and it's all real time and super</span> <span data-start="486.18" data-end="487.8">advanced and stuff but what's really</span> <span data-start="487.8" data-end="489.18">special about asana is it takes a</span> <span data-start="489.18" data-end="490.11">different approach than these other</span> <span data-start="490.11" data-end="492.389">things that we've seen the entire</span> <span data-start="492.389" data-end="494.01">application runtime is synced between</span> <span data-start="494.01" data-end="497.25">the client in the server so they've</span> <span data-start="497.25" data-end="499.11">spent a couple years and rd on this and</span> <span data-start="499.11" data-end="501.06">what they come up with was a system</span> <span data-start="501.06" data-end="503.4">whereby every single user session has a</span> <span data-start="503.4" data-end="505.62">corresponding javascript process on the</span> <span data-start="505.62" data-end="508.26">server a dedicated process on the server</span> <span data-start="508.26" data-end="509.97">for every user session and as the user</span> <span data-start="509.97" data-end="513.12">navigates around in the app those those</span> <span data-start="513.12" data-end="514.5">actions are synchronized to the server</span> <span data-start="514.5" data-end="516.959">side and the server side will compute</span> <span data-start="516.959" data-end="518.58">all the same stuff it'll execute the</span> <span data-start="518.58" data-end="521.159">views and it'll fetch data and and do</span> <span data-start="521.159" data-end="522.659">all the same stuff it throws away the</span> </p>
<p><span data-start="522.659" data-end="525.81">HTML what at once is the state so they</span> <span data-start="525.81" data-end="526.769">have got they've got off</span> <span data-start="526.769" data-end="528.269">picture of the application state on the</span> <span data-start="528.269" data-end="530.67">server side as it exists on the client</span> <span data-start="530.67" data-end="533.009">side and it enables some cool stuff now</span> <span data-start="533.009" data-end="535.709">this took them a few years we can't all</span> <span data-start="535.709" data-end="539.309">do this because we were not all founded</span> <span data-start="539.309" data-end="540.689">by the youngest billionaire in the world</span> <span data-start="540.689" data-end="542.579">asana was founded by one of the Facebook</span> <span data-start="542.579" data-end="544.769">co-founders and so they they had a bit</span> <span data-start="544.769" data-end="548.22">of a runway to work with there but for</span> <span data-start="548.22" data-end="550.35">the rest of us we can use meteor so in</span> <span data-start="550.35" data-end="553.499">many ways I see meteor as a kind of an</span> <span data-start="553.499" data-end="556.049">open source take on what a saunas</span> <span data-start="556.049" data-end="558.689">building and if when I understand a few</span> <span data-start="558.689" data-end="560.399">of their engineers used to work at a</span> <span data-start="560.399" data-end="561.389">sauna and they brought over some of the</span> <span data-start="561.389" data-end="563.67">concepts but I'm sure most of you have</span> <span data-start="563.67" data-end="565.049">heard about meteor by now but it's a</span> <span data-start="565.049" data-end="567.36">real-time app framework and it does some</span> <span data-start="567.36" data-end="568.829">really cool stuff with sharing code</span> <span data-start="568.829" data-end="572.819">between client server so why would you</span> <span data-start="572.819" data-end="575.85">go to the trouble of doing this there is</span> <span data-start="575.85" data-end="576.929">some trouble you got to jump through</span> <span data-start="576.929" data-end="579.199">some hoops to share your code properly</span> <span data-start="579.199" data-end="582.029">so the first thing for me in my opinion</span> <span data-start="582.029" data-end="584.67">would be performance and this applies</span> <span data-start="584.67" data-end="587.129">mostly to the cases like Flickr where</span> <span data-start="587.129" data-end="588.48">you're rendering the whole page on the</span> <span data-start="588.48" data-end="590.069">server side even though it's a single</span> <span data-start="590.069" data-end="592.47">page app now that that comes from the</span> <span data-start="592.47" data-end="594.6">the initial page low speed is so much</span> <span data-start="594.6" data-end="595.92">faster and it feels so much faster</span> <span data-start="595.92" data-end="597.209">because you're not waiting in all the</span> <span data-start="597.209" data-end="599.069">assets to download and fetch and</span> <span data-start="599.069" data-end="601.11">initialize and and fetch data before you</span> <span data-start="601.11" data-end="602.879">render the page and you might remember</span> <span data-start="602.879" data-end="604.559">that Twitter used to be client-side</span> <span data-start="604.559" data-end="606.179">rendered right there's a hash bang in</span> <span data-start="606.179" data-end="608.339">the URL and a couple years ago they</span> <span data-start="608.339" data-end="609.869">switch back to server-side rendering and</span> <span data-start="609.869" data-end="612.47">they said they saw a five times</span> <span data-start="612.47" data-end="616.589">improvement and perceived performance so</span> <span data-start="616.589" data-end="619.679">that's that's great another reason could</span> <span data-start="619.679" data-end="623.129">be SEO so many of us I'm sure I have</span> <span data-start="623.129" data-end="625.619">built a single page app just to be told</span> <span data-start="625.619" data-end="628.049">that any needs to be crawlable by a web</span> <span data-start="628.049" data-end="631.019">crawler and if by default your entire</span> <span data-start="631.019" data-end="632.639">app can be rendered on both sides it's</span> <span data-start="632.639" data-end="635.1">not really concerned there's an asterisk</span> <span data-start="635.1" data-end="636.99">here because you may have seen last week</span> </p>
<p><span data-start="636.99" data-end="639.389">Google wrote a public blog post saying</span> <span data-start="639.389" data-end="642.119">that actually their web crawler has the</span> <span data-start="642.119" data-end="643.98">capability to execute JavaScript it's a</span> <span data-start="643.98" data-end="645.629">headless browser we've kind of known</span> <span data-start="645.629" data-end="647.61">this for a while but they've their</span> <span data-start="647.61" data-end="650.16">explicit about it now so it's this is</span> <span data-start="650.16" data-end="652.41">less of an issue but I'm sure there's</span> <span data-start="652.41" data-end="654.299">still a long tail of both crawlers that</span> <span data-start="654.299" data-end="657.86">don't have that capability</span> <span data-start="657.87" data-end="661.27">flexibility is another one because you</span> <span data-start="661.27" data-end="663.07">could run your code on either sides it</span> <span data-start="663.07" data-end="664.81">opens up a lot of doors for doing new</span> <span data-start="664.81" data-end="667.45">things and I think that meteor and asana</span> <span data-start="667.45" data-end="669.55">wouldn't have been possible if it</span> <span data-start="669.55" data-end="672.15">weren't for this ability and</span> <span data-start="672.15" data-end="675.12">maintainability I think a lot of us have</span> <span data-start="675.12" data-end="677.86">tried to share templates between client</span> <span data-start="677.86" data-end="679.51">and server for example in different</span> <span data-start="679.51" data-end="681.19">languages say in a ruby or in Python but</span> <span data-start="681.19" data-end="682.96">you end up duplicating either part of</span> <span data-start="682.96" data-end="684.46">the template or the template engine or</span> <span data-start="684.46" data-end="686.71">your view helpers or at some point</span> <span data-start="686.71" data-end="688.09">you're duplicating code and that's never</span> <span data-start="688.09" data-end="690.92">a good thing</span> <span data-start="690.93" data-end="693.64">so there's a number of use cases for why</span> <span data-start="693.64" data-end="697.14">you might want to use isomorphic code</span> <span data-start="697.14" data-end="700.78">the first would be templating I think a</span> <span data-start="700.78" data-end="703.66">lot of us when we first explore this we</span> <span data-start="703.66" data-end="705.4">look at templating we look at sharing</span> <span data-start="705.4" data-end="706.66">our code between the client and server</span> <span data-start="706.66" data-end="708.7">and so I think of templating as the</span> <span data-start="708.7" data-end="711.7">gateway drug to isomorphic JavaScript</span> <span data-start="711.7" data-end="713.83">because you start with sharing a</span> <span data-start="713.83" data-end="714.94">handlebars template or a mustache</span> <span data-start="714.94" data-end="717.37">template or whatever but pretty soon</span> <span data-start="717.37" data-end="719.32">everything that goes into populating</span> <span data-start="719.32" data-end="720.46">those templates needs to be shared so</span> <span data-start="720.46" data-end="723.52">things like internationalization you</span> <span data-start="723.52" data-end="725.02">need to translate strings on the client</span> <span data-start="725.02" data-end="727.87">and on the server date and currency</span> <span data-start="727.87" data-end="730.33">formatting at Airbnb we had a bunch of</span> <span data-start="730.33" data-end="731.95">handlebars helpers that helped us do</span> <span data-start="731.95" data-end="733.6">stuff like this and once you try to</span> <span data-start="733.6" data-end="736.12">share that you know you need to you want</span> <span data-start="736.12" data-end="737.32">to be able to render that on both sides</span> <span data-start="737.32" data-end="744.67">to arbitrary application logic that's it</span> <span data-start="744.67" data-end="745.51">could be anything right it could be</span> <span data-start="745.51" data-end="748.3">model logic or any sort of application</span> <span data-start="748.3" data-end="752.32">logic routing once you start sharing</span> <span data-start="752.32" data-end="753.64">your view layer between the client and</span> <span data-start="753.64" data-end="755.47">server you don't want to have to</span> <span data-start="755.47" data-end="757.09">duplicate your routes between say</span> <span data-start="757.09" data-end="759.07">backbone router and your rails app right</span> <span data-start="759.07" data-end="761.14">you want to have a single set of a</span> <span data-start="761.14" data-end="764.76">single source of truth for your routes</span> <span data-start="764.76" data-end="767.98">model validation how many of us have</span> <span data-start="767.98" data-end="769.81">written form validation in the client</span> <span data-start="769.81" data-end="772.03">side so there was instantaneous</span> <span data-start="772.03" data-end="773.92">you know feedback good user experience</span> <span data-start="773.92" data-end="777.67">but then duplicated some sort of like</span> <span data-start="777.67" data-end="779.29">form about our model validation in your</span> </p>
<p><span data-start="779.29" data-end="783.64">API I think it's pretty common API</span> <span data-start="783.64" data-end="786.67">interactions a lot of times we want to</span> <span data-start="786.67" data-end="788.89">make calls to an API either a first</span> <span data-start="788.89" data-end="791.26">party or a third party API using</span> <span data-start="791.26" data-end="793.93">EP or some other transport and we might</span> <span data-start="793.93" data-end="795.64">need to make that call on the client for</span> <span data-start="795.64" data-end="796.96">whatever reason we might need to make</span> <span data-start="796.96" data-end="799.33">that call on the server but if it's all</span> <span data-start="799.33" data-end="800.59">in the same language and we can share</span> <span data-start="800.59" data-end="802.78">that then there's only there's a single</span> <span data-start="802.78" data-end="807.24">a single set of semantics for doing that</span> <span data-start="807.24" data-end="810.31">and then anything else I mean whatever</span> <span data-start="810.31" data-end="812.71">you can imagine whatever is necessary</span> <span data-start="812.71" data-end="815.17">for your app your use case potentially</span> <span data-start="815.17" data-end="817.18">you could share some code between client</span> <span data-start="817.18" data-end="821.26">and server so it's important to note</span> <span data-start="821.26" data-end="823.54">that isomorphic javascript is a spectrum</span> <span data-start="823.54" data-end="826.09">there's no one way to do it there's this</span> <span data-start="826.09" data-end="828.34">a lot of different approaches so if this</span> <span data-start="828.34" data-end="830.95">is our spectrum if the blue side is like</span> <span data-start="830.95" data-end="833.89">the side where you shared just a few</span> <span data-start="833.89" data-end="836.02">bits of a view layer or a little bit of</span> <span data-start="836.02" data-end="840.1">logic and the pink side is the entire</span> <span data-start="840.1" data-end="841.9">view layer is shared right your entire</span> <span data-start="841.9" data-end="844.66">application is shared your African kind</span> <span data-start="844.66" data-end="846.49">of fall anywhere along the spectrum</span> <span data-start="846.49" data-end="848.86">depending on your use case in your</span> <span data-start="848.86" data-end="854.05">ambition and so for this side you don't</span> <span data-start="854.05" data-end="855.55">really need a lot of abstractions if</span> <span data-start="855.55" data-end="856.93">you're just sharing like some templates</span> <span data-start="856.93" data-end="858.13">for something it's pretty</span> <span data-start="858.13" data-end="859.57">straightforward to do that but the</span> <span data-start="859.57" data-end="862.51">further you go along that spectrum you</span> <span data-start="862.51" data-end="865.33">need to build more abstractions because</span> <span data-start="865.33" data-end="866.98">the client and the server are very</span> <span data-start="866.98" data-end="869.04">different environments you need to</span> <span data-start="869.04" data-end="871.54">abstract away those differences whether</span> <span data-start="871.54" data-end="873.55">it's like accessing cookies or or</span> <span data-start="873.55" data-end="875.38">anything and we'll get into that a bit</span> <span data-start="875.38" data-end="879.97">more and so for some examples Instagram</span> <span data-start="879.97" data-end="882.67">comm would be would be on this side of</span> <span data-start="882.67" data-end="883.99">the spectrum where they just shared</span> <span data-start="883.99" data-end="885.7">their view layer they had a totally</span> <span data-start="885.7" data-end="887.74">different server-side technology for</span> <span data-start="887.74" data-end="890.38">their most of their app whereas asana is</span> <span data-start="890.38" data-end="893.08">like all the way like the extreme where</span> <span data-start="893.08" data-end="898.76">the entire application is is Sheridan I</span> <span data-start="898.77" data-end="901.24">also see two categories for isomorphic</span> </p>
<p><span data-start="901.24" data-end="905.14">JavaScript code it could be environment</span> <span data-start="905.14" data-end="909.49">agnostic or it can be shimmed per</span> <span data-start="909.49" data-end="914.29">environment so an environment agnostic</span> <span data-start="914.29" data-end="916.3">code does not depend on any browser</span> <span data-start="916.3" data-end="918.82">specific properties like the window or</span> <span data-start="918.82" data-end="921.49">any server specific properties like the</span> <span data-start="921.49" data-end="923.68">process or request or response</span> <span data-start="923.68" data-end="928.6">stuff like that and an easy example</span> <span data-start="928.6" data-end="930.459">would be handlebars or probably any</span> <span data-start="930.459" data-end="932.019">templating library</span> <span data-start="932.019" data-end="933.97">it's just dealing with primitives</span> <span data-start="933.97" data-end="937.089">strings arrays objects functions so</span> <span data-start="937.089" data-end="938.68">there's no reason this shouldn't be able</span> <span data-start="938.68" data-end="940.99">to be executed in any any environment</span> <span data-start="940.99" data-end="944.459">that's like a proper JavaScript runtime</span> <span data-start="944.459" data-end="946.689">so here we're creating a template which</span> <span data-start="946.689" data-end="948.72">is a string compiling it to a function</span> <span data-start="948.72" data-end="951.579">and executing the function getting back</span> <span data-start="951.579" data-end="957.399">the rendered HTML so the other category</span> <span data-start="957.399" data-end="958.899">and the more interesting category is</span> <span data-start="958.899" data-end="962.29">shimmed per environment so these</span> <span data-start="962.29" data-end="964.149">libraries provide shims for accessing</span> <span data-start="964.149" data-end="967.749">environment specific properties so your</span> <span data-start="967.749" data-end="970.809">module can expose a single API for use</span> <span data-start="970.809" data-end="974.86">on both sides so this could be let's say</span> <span data-start="974.86" data-end="976.389">you're you're writing like a routing</span> <span data-start="976.389" data-end="979.449">library and the client side if you want</span> <span data-start="979.449" data-end="982.569">to see what the current page URL is you</span> <span data-start="982.569" data-end="983.98">would do something like window dot</span> <span data-start="983.98" data-end="986.8">location dot path name and on the server</span> <span data-start="986.8" data-end="988.449">side you'd have to access the request</span> <span data-start="988.449" data-end="991.62">request that path or or that this isn't</span> <span data-start="991.62" data-end="996.819">what you do in Express and a great</span> <span data-start="996.819" data-end="998.86">example of a library like this would be</span> <span data-start="998.86" data-end="1003.959">super agent so super agent is an HTTP</span> <span data-start="1003.959" data-end="1006.87">client library lets you make HTTP</span> <span data-start="1006.87" data-end="1009.689">requests and in this example we're</span> <span data-start="1009.689" data-end="1011.79">saying super agent get so it's a get</span> <span data-start="1011.79" data-end="1015.48">request to some JSON endpoint and end</span> <span data-start="1015.48" data-end="1018.72">and we pass in a callback and the</span> <span data-start="1018.72" data-end="1020.819">callback takes the response and the</span> <span data-start="1020.819" data-end="1022.589">response has properties like the status</span> <span data-start="1022.589" data-end="1026.579">code HTTP headers the body all this</span> <span data-start="1026.579" data-end="1028.439">stuff and it's great to be able to use</span> <span data-start="1028.439" data-end="1029.97">the same API on the client in the server</span> <span data-start="1029.97" data-end="1032.339">so how many times I mean typically we</span> <span data-start="1032.339" data-end="1036.809">use like jQuery AJAX for our Ajax needs</span> <span data-start="1036.809" data-end="1039">in the client side and then on the</span> <span data-start="1039" data-end="1041.22">server we've used HTTP module or that</span> <span data-start="1041.22" data-end="1043.169">request module or or whatever and so</span> <span data-start="1043.169" data-end="1046.5">this is a great example of a module</span> <span data-start="1046.5" data-end="1047.85">that's shimmed per environment and it</span> <span data-start="1047.85" data-end="1049.169">actually provides under the hood</span> <span data-start="1049.169" data-end="1050.88">different implementations for the two</span> <span data-start="1050.88" data-end="1053.279">different environments but it exposes a</span> <span data-start="1053.279" data-end="1057.61">single API to the developer</span> <span data-start="1057.62" data-end="1059.97">so there's a few HAP's tractions that</span> </p>
<p><span data-start="1059.97" data-end="1063.87">I'll mention a simple one would be the</span> <span data-start="1063.87" data-end="1065.97">user-agent so let's say you're doing</span> <span data-start="1065.97" data-end="1068.49">something you're writing like some</span> <span data-start="1068.49" data-end="1070.02">mobile web app or something and you need</span> <span data-start="1070.02" data-end="1072.029">to determine what platform the user is</span> <span data-start="1072.029" data-end="1074.299">on and the client side you'd say</span> <span data-start="1074.299" data-end="1076.98">navigator.useragent on the server you</span> <span data-start="1076.98" data-end="1079.049">actually have to look at the HTTP header</span> <span data-start="1079.049" data-end="1081.659">the user agent header that's attached to</span> <span data-start="1081.659" data-end="1087.23">the request cookies is a great example</span> <span data-start="1087.23" data-end="1089.85">if you're trying to set a cookie in the</span> <span data-start="1089.85" data-end="1091.919">web browser you just say document dot</span> <span data-start="1091.919" data-end="1095.12">cookie equals and then some string some</span> <span data-start="1095.12" data-end="1099.45">specially formatted string on the server</span> <span data-start="1099.45" data-end="1102.6">side you got a set a header set an HTTP</span> <span data-start="1102.6" data-end="1105.029">header and the header name is set cookie</span> <span data-start="1105.029" data-end="1106.95">so you would say response that set</span> <span data-start="1106.95" data-end="1109.59">header set cookie and then the cookie</span> <span data-start="1109.59" data-end="1113.669">string and you can imagine why we'd want</span> <span data-start="1113.669" data-end="1115.47">to do this on both sides like a lot of</span> <span data-start="1115.47" data-end="1117.72">times you need to set a cookie on the</span> <span data-start="1117.72" data-end="1119.37">client side in response to some user</span> <span data-start="1119.37" data-end="1121.32">interaction and we're constantly setting</span> <span data-start="1121.32" data-end="1126.72">cookies on the server side redirects is</span> <span data-start="1126.72" data-end="1130.049">another example so but if you're doing a</span> <span data-start="1130.049" data-end="1132.24">full page redirect in the browser you'd</span> <span data-start="1132.24" data-end="1134.159">say document dot location dot href</span> <span data-start="1134.159" data-end="1137.88">equals and then the URL or if it's a</span> <span data-start="1137.88" data-end="1140.25">push state application you might use the</span> <span data-start="1140.25" data-end="1143.19">html5 history API and say window dot</span> <span data-start="1143.19" data-end="1146.399">push state some arguments and then the</span> </p>
<p><span data-start="1146.399" data-end="1149.399">URL but on the server side we need to do</span> <span data-start="1149.399" data-end="1151.98">a full HTTP redirect response that</span> <span data-start="1151.98" data-end="1153.99">redirect and there's an additional</span> <span data-start="1153.99" data-end="1156.24">complication and that on the server</span> <span data-start="1156.24" data-end="1158.429">there's there's different HTTP status</span> <span data-start="1158.429" data-end="1159.96">codes right so there could be a 301</span> <span data-start="1159.96" data-end="1162.09">redirect 4-3 to redirect and so if</span> <span data-start="1162.09" data-end="1163.77">you're trying to build an abstraction</span> <span data-start="1163.77" data-end="1166.169">around a redirect in your app you need</span> <span data-start="1166.169" data-end="1171.27">to accommodate for those differences so</span> <span data-start="1171.27" data-end="1173.37">let's get to the fun part how to ice</span> <span data-start="1173.37" data-end="1175.44">some morph how you can build isomorphic</span> <span data-start="1175.44" data-end="1179.909">JavaScript today so what we're gonna do</span> <span data-start="1179.909" data-end="1181.35">together is we're going to write a</span> <span data-start="1181.35" data-end="1184.14">module that that solves the cookie case</span> <span data-start="1184.14" data-end="1185.789">that abstracts out the setting of</span> <span data-start="1185.789" data-end="1188.789">cookies and provides the same api on the</span> <span data-start="1188.789" data-end="1192.659">client in the server</span> <span data-start="1192.669" data-end="1195.919">so we want to make you an API that looks</span> <span data-start="1195.919" data-end="1199.64">like this set cookie cookie name the</span> <span data-start="1199.64" data-end="1205.85">cookie value that's it super simple so</span> <span data-start="1205.85" data-end="1207.71">as we mentioned before this would turn</span> <span data-start="1207.71" data-end="1209.96">into in the browser return it to</span> <span data-start="1209.96" data-end="1213.049">document dot cookie equals my serialized</span> <span data-start="1213.049" data-end="1217.039">cookie string and on the server it would</span> <span data-start="1217.039" data-end="1219.49">be we'd be setting an HTTP header</span> <span data-start="1219.49" data-end="1222.169">response that set header set cookie and</span> <span data-start="1222.169" data-end="1224.62">then this that same exact serialized</span> <span data-start="1224.62" data-end="1229.69">string but it gets more complicated</span> <span data-start="1229.69" data-end="1231.98">cookies have additional options there's</span> <span data-start="1231.98" data-end="1234.11">a path you can set a domain you can set</span> <span data-start="1234.11" data-end="1239.62">an expert header or expert property and</span> <span data-start="1239.62" data-end="1242.03">so then the cookie string can look</span> <span data-start="1242.03" data-end="1243.53">something like this document dot cookie</span> <span data-start="1243.53" data-end="1247.1">equals my cookie the value you know all</span> <span data-start="1247.1" data-end="1248.9">the stuff and when I see that you know</span> <span data-start="1248.9" data-end="1251">what I think I think yeah like I don't</span> <span data-start="1251" data-end="1253.669">want to do that like that's a lot of</span> <span data-start="1253.669" data-end="1254.72">edge cases there probably it's probably</span> <span data-start="1254.72" data-end="1257.27">years of RFC's to weed through and try</span> <span data-start="1257.27" data-end="1261.049">to do that right so luckily there's a</span> <span data-start="1261.049" data-end="1263.48">module that does this for us already the</span> <span data-start="1263.48" data-end="1266.179">cookie module on NPM is used by Express</span> <span data-start="1266.179" data-end="1269.929">and connect and 108 other libraries</span> <span data-start="1269.929" data-end="1272.33">according to NPM so let's just use this</span> <span data-start="1272.33" data-end="1275.26">because someone's already written it so</span> </p>
<p><span data-start="1275.26" data-end="1279.26">NPM and browserify to the rescue we've</span> <span data-start="1279.26" data-end="1281.78">heard a bit today about how awesome it</span> <span data-start="1281.78" data-end="1283.7">is to use browserify NPM and your</span> <span data-start="1283.7" data-end="1285.38">funding code and we're gonna we're gonna</span> <span data-start="1285.38" data-end="1291.47">continue along that among that theme so</span> <span data-start="1291.47" data-end="1294.62">a browser fie lets you use common js2</span> <span data-start="1294.62" data-end="1296.96">require your modules in the browser but</span> <span data-start="1296.96" data-end="1299.15">more interestingly it lets you package</span> <span data-start="1299.15" data-end="1300.77">up your dependencies from your node</span> <span data-start="1300.77" data-end="1303.38">modules directory so we can npm install</span> <span data-start="1303.38" data-end="1306.26">the cookie module into our into our</span> <span data-start="1306.26" data-end="1308.24">application added to our package JSON</span> <span data-start="1308.24" data-end="1311.51">and then we when we do a browser if I</span> <span data-start="1311.51" data-end="1314.659">build that will being pulled out of our</span> <span data-start="1314.659" data-end="1316.01">node modules directory and insert it</span> <span data-start="1316.01" data-end="1319.45">into our build</span> <span data-start="1319.46" data-end="1322.68">so the next step is we need to figure</span> <span data-start="1322.68" data-end="1324.27">out how we can make a shrimper</span> <span data-start="1324.27" data-end="1326.82">environment module so we're building a</span> <span data-start="1326.82" data-end="1329.1">little module that provides a single API</span> <span data-start="1329.1" data-end="1331.74">to the client and server but there's</span> <span data-start="1331.74" data-end="1335.09">different implementations under the hood</span> <span data-start="1335.09" data-end="1338.7">and the solution is to use the</span> <span data-start="1338.7" data-end="1341.61">package.json browser field so there's a</span> <span data-start="1341.61" data-end="1346.17">little-known feature of the of</span> <span data-start="1346.17" data-end="1348.3">package.json and the way it interacts</span> <span data-start="1348.3" data-end="1350.22">with browserify that lets you actually</span> <span data-start="1350.22" data-end="1352.56">specify different behaviors for browser</span> <span data-start="1352.56" data-end="1356.85">versus server so if this is our package</span> <span data-start="1356.85" data-end="1359.58">dot JSON are a real bare-bones package</span> </p>
<p><span data-start="1359.58" data-end="1364.83">JSON for our setcookie module what we</span> <span data-start="1364.83" data-end="1367.11">can do is we can add a browser field</span> <span data-start="1367.11" data-end="1370.94">here and it takes a few different forms</span> <span data-start="1370.94" data-end="1374.22">so if it's a string if it's if it's just</span> <span data-start="1374.22" data-end="1377.28">a single file name then it'll swap out</span> <span data-start="1377.28" data-end="1380.13">the entire implementation for the client</span> <span data-start="1380.13" data-end="1383.49">side so it'll ignore all of the rest of</span> <span data-start="1383.49" data-end="1387.06">the code and your your package and when</span> <span data-start="1387.06" data-end="1389.25">you browserify that bundle it will use</span> <span data-start="1389.25" data-end="1394.23">the Lib client das file instead but you</span> <span data-start="1394.23" data-end="1396.99">can get more fine-grained to so in this</span> <span data-start="1396.99" data-end="1401.04">example we've got an object and so you</span> <span data-start="1401.04" data-end="1403.98">can swap out a specific file for a</span> <span data-start="1403.98" data-end="1405.3">different file so if you've got like a</span> </p>
<p><span data-start="1405.3" data-end="1408.93">Lib nodejs module and you're within your</span> <span data-start="1408.93" data-end="1410.97">package you can swap that out for Lib</span> <span data-start="1410.97" data-end="1416.7">client yes</span> <span data-start="1416.71" data-end="1419.409">and you can also swap out dependencies</span> <span data-start="1419.409" data-end="1422.169">so we're gonna be depending on the</span> <span data-start="1422.169" data-end="1424.029">cookie module but let's say for whatever</span> <span data-start="1424.029" data-end="1427.09">reason the cookie module will work too</span> <span data-start="1427.09" data-end="1428.679">well on the server side but it had a</span> <span data-start="1428.679" data-end="1430.69">quick or it you know tried to do</span> <span data-start="1430.69" data-end="1433.21">something it shouldn't and it didn't</span> <span data-start="1433.21" data-end="1434.83">work well in the client side well if</span> <span data-start="1434.83" data-end="1437.139">there's an alternative module on NPM or</span> <span data-start="1437.139" data-end="1440.019">within your node modules you can swap</span> <span data-start="1440.019" data-end="1442.45">out that entire module for a different</span> <span data-start="1442.45" data-end="1445.749">one and so with with this with the</span> <span data-start="1445.749" data-end="1448.539">browser field we can do all sorts of</span> <span data-start="1448.539" data-end="1449.799">cool stuff and it opens up a lot of</span> <span data-start="1449.799" data-end="1451.84">doors on how you package up your modules</span> <span data-start="1451.84" data-end="1455.019">for different environments so what we're</span> <span data-start="1455.019" data-end="1455.95">gonna do is we're going to build the</span> <span data-start="1455.95" data-end="1457.96">setcookie module I actually already</span> <span data-start="1457.96" data-end="1460.749">built it you can look at the source code</span> <span data-start="1460.749" data-end="1463.84">if you want it's at my github page but</span> <span data-start="1463.84" data-end="1465.159">we're gonna we're gonna step through it</span> <span data-start="1465.159" data-end="1469.45">here so this is the structure of our</span> <span data-start="1469.45" data-end="1472.36">really basic set cookie module we've got</span> <span data-start="1472.36" data-end="1474.19">an index that is which is like the main</span> <span data-start="1474.19" data-end="1477.009">entry point for the node module we've</span> <span data-start="1477.009" data-end="1479.35">got a Lib directory and and I live</span> <span data-start="1479.35" data-end="1480.669">directory we're gonna have a setter</span> <span data-start="1480.669" data-end="1483.1">directory and that setter is gonna</span> <span data-start="1483.1" data-end="1484.659">that's going to be the implementation</span> <span data-start="1484.659" data-end="1486.549">that actually sets the cookie and we've</span> <span data-start="1486.549" data-end="1490.379">got one file for node and one for the</span> <span data-start="1490.379" data-end="1494.409">browser and so the index dot JSP the</span> <span data-start="1494.409" data-end="1496.059">node version and the client chest will</span> <span data-start="1496.059" data-end="1497.679">be the browser version and then of</span> <span data-start="1497.679" data-end="1500.11">course we're using cookie as a</span> <span data-start="1500.11" data-end="1501.429">dependency so that's going to exist on</span> <span data-start="1501.429" data-end="1507.58">our node modules directory so this is</span> <span data-start="1507.58" data-end="1509.32">what our index KS will look like the</span> <span data-start="1509.32" data-end="1512.019">entry point at the top we're requiring</span> <span data-start="1512.019" data-end="1514.48">the cookie dependency and then we're</span> <span data-start="1514.48" data-end="1516.669">requiring setter and you can see where</span> <span data-start="1516.669" data-end="1520.299">it's a relative path require Lib setter</span> <span data-start="1520.299" data-end="1524.08">and so as I'm sure you know if you if</span> <span data-start="1524.08" data-end="1527.2">you require if setter is a directory and</span> <span data-start="1527.2" data-end="1529.179">there's an index file inside of it</span> <span data-start="1529.179" data-end="1531.759">you can just use that semantics and it</span> <span data-start="1531.759" data-end="1536.86">will require that so by default it'll</span> <span data-start="1536.86" data-end="1538.33">use the index dot J is the node</span> <span data-start="1538.33" data-end="1540.309">implementation and then all we do here</span> <span data-start="1540.309" data-end="1543.909">we export our public API it's a function</span> <span data-start="1543.909" data-end="1545.59">that takes the name the value and an</span> <span data-start="1545.59" data-end="1548.169">options argument and so because the</span> <span data-start="1548.169" data-end="1549.7">cookie string is the same on the client</span> <span data-start="1549.7" data-end="1550.45">in the server</span> <span data-start="1550.45" data-end="1551.68">right the way that we see realized that</span> <span data-start="1551.68" data-end="1553.63">cookie string is exactly the same so</span> <span data-start="1553.63" data-end="1555.46">here we can use our cookie module and</span> <span data-start="1555.46" data-end="1558.22">say var cookie string equals cookie dot</span> <span data-start="1558.22" data-end="1560.59">serialize and pass it the name value in</span> <span data-start="1560.59" data-end="1564.55">options and then we hand it off to the</span> <span data-start="1564.55" data-end="1569.59">setter to actually set that string so</span> <span data-start="1569.59" data-end="1570.91">here's what the note version looks like</span> </p>
<p><span data-start="1570.91" data-end="1574.99">Lib setter index thas so it takes that</span> <span data-start="1574.99" data-end="1580.36">cookie string and the options and and</span> <span data-start="1580.36" data-end="1582.85">what it does is so so one thing I didn't</span> <span data-start="1582.85" data-end="1586.33">mention is with a node you can't just</span> <span data-start="1586.33" data-end="1587.92">like set a cookie right you I mean you</span> <span data-start="1587.92" data-end="1590.26">can't set do anything with HTTP without</span> <span data-start="1590.26" data-end="1591.94">the context of a specific request a</span> <span data-start="1591.94" data-end="1594.49">response so that's one big difference</span> <span data-start="1594.49" data-end="1595.96">between the client the server and the</span> <span data-start="1595.96" data-end="1597.88">client it's all global right like you're</span> <span data-start="1597.88" data-end="1600.76">only ever dealing with one context one</span> <span data-start="1600.76" data-end="1602.59">user session on the server side you've</span> <span data-start="1602.59" data-end="1604.21">got you could have hundreds of user</span> <span data-start="1604.21" data-end="1605.56">sessions happening at the same time on</span> <span data-start="1605.56" data-end="1606.91">your server and so you always have to</span> <span data-start="1606.91" data-end="1609.1">inject through the request or the</span> <span data-start="1609.1" data-end="1612.7">response so the API for the server side</span> <span data-start="1612.7" data-end="1616.24">you would add a re s a response option</span> <span data-start="1616.24" data-end="1619.96">to the options argument and if you don't</span> <span data-start="1619.96" data-end="1623.17">supply that will throw an error but</span> <span data-start="1623.17" data-end="1624.46">basically we're just saying response</span> <span data-start="1624.46" data-end="1626.02">that set header set cookie in the cookie</span> <span data-start="1626.02" data-end="1631.09">string and then here's what the client</span> <span data-start="1631.09" data-end="1632.8">version looks like it's pretty</span> <span data-start="1632.8" data-end="1637.91">complicated it just sets document.cookie</span> <span data-start="1637.92" data-end="1643.93">and so in our package JSON the browser</span> <span data-start="1643.93" data-end="1645.49">field would look like this we're</span> <span data-start="1645.49" data-end="1649.99">swapping out live setter index js4 live</span> <span data-start="1649.99" data-end="1651.76">set our client j s and this is exactly</span> <span data-start="1651.76" data-end="1654.16">what super agent does so a super agent</span> <span data-start="1654.16" data-end="1655.63">actually has two completely different</span> <span data-start="1655.63" data-end="1658.93">implementations for node versus the</span> <span data-start="1658.93" data-end="1664.24">browser and just to highlight if you</span> <span data-start="1664.24" data-end="1665.95">look back at our entry point our index</span> <span data-start="1665.95" data-end="1669.01">is there's there's our require this is</span> <span data-start="1669.01" data-end="1670.63">the require that will be affected by</span> <span data-start="1670.63" data-end="1675.93">that package JSON field</span> <span data-start="1675.94" data-end="1678.429">so in a nutshell that's how to ice um or</span> <span data-start="1678.429" data-end="1682.07">does it seem pretty easy so far that's</span> <span data-start="1682.07" data-end="1683.799">obviously a kind of a trivial example</span> <span data-start="1683.799" data-end="1686.72">it's a rich topic with many ins and outs</span> <span data-start="1686.72" data-end="1689.779">and I encourage you to reach out about</span> <span data-start="1689.779" data-end="1691.159">it and we can we could dive into the</span> <span data-start="1691.159" data-end="1694.039">nuts and bolts and all that but for now</span> <span data-start="1694.039" data-end="1696.62">that's all I have so I want to say thank</span> <span data-start="1696.62" data-end="1698.629">you and there's more resources about</span> <span data-start="1698.629" data-end="1700.909">isomorphic JavaScript at spike</span> <span data-start="1700.909" data-end="1705.46">technology which is my my website and I</span> <span data-start="1705.46" data-end="1707.6">since I have 5 minutes so if you've any</span> <span data-start="1707.6" data-end="1710.75">questions you can tweet them at me but</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
