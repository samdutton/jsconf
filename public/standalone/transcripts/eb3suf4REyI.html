<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>eb3suf4REyI</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/eb3suf4REyI?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="10.429" data-end="13.559">thank you so as you said my name is Mike</span> <span data-start="13.559" data-end="15.24">West you can get all the vital details</span> <span data-start="15.24" data-end="17.039">up there it's really just an exercise to</span> <span data-start="17.039" data-end="18.69">see how many times I can type my quest</span> <span data-start="18.69" data-end="21.15">on the same page the slides are actually</span> <span data-start="21.15" data-end="23.039">online right now I'm using speaker duck</span> <span data-start="23.039" data-end="25.199">because speaker 2 is awesome and my</span> <span data-start="25.199" data-end="26.67">computer decided hey I'm not going to</span> <span data-start="26.67" data-end="27.869">connect to the laptop they're to the</span> <span data-start="27.869" data-end="29.58">projector so if you want to follow along</span> <span data-start="29.58" data-end="30.66">with the slides you can grab them right</span> <span data-start="30.66" data-end="32.94">now I'd suggest you just you know hop</span> <span data-start="32.94" data-end="35.01">over there take a look at the slides and</span> <span data-start="35.01" data-end="36.54">look at the master words as well because</span> <span data-start="36.54" data-end="38.52">what I really want to do today is give</span> <span data-start="38.52" data-end="40.649">you an introduction to a kind of wide</span> <span data-start="40.649" data-end="42.75">field of things that can go wrong on</span> <span data-start="42.75" data-end="45.42">your site specifically I want to talk</span> <span data-start="45.42" data-end="47.94">about content injection attacks content</span> <span data-start="47.94" data-end="50.01">injection is probably the most pervasive</span> <span data-start="50.01" data-end="51.93">problem on the web from a security</span> <span data-start="51.93" data-end="54.57">perspective absolutely every website</span> <span data-start="54.57" data-end="57">will have a content injection hole of</span> <span data-start="57" data-end="58.739">one sort or another at one time or</span> <span data-start="58.739" data-end="60.84">another it's really difficult to do</span> <span data-start="60.84" data-end="62.719">things correctly we all make mistakes</span> </p>
<p><span data-start="62.719" data-end="65.22">Google makes mistakes and if Google is</span> <span data-start="65.22" data-end="66.93">making mistakes with teams that are</span> <span data-start="66.93" data-end="69.51">actually dedicated to security reviewing</span> <span data-start="69.51" data-end="71.369">all the code you can be damn sure that</span> <span data-start="71.369" data-end="72.75">you guys are gonna make mistakes as well</span> <span data-start="72.75" data-end="76.02">does anyone actually have a full-time</span> <span data-start="76.02" data-end="79.2">security person on their team I am</span> <span data-start="79.2" data-end="81.119">actually shocked there are people with</span> <span data-start="81.119" data-end="83.13">their hands up usually everyone sits</span> <span data-start="83.13" data-end="85.29">there and stunned silent saying what pay</span> <span data-start="85.29" data-end="87.59">someone to work on security that's crazy</span> <span data-start="87.59" data-end="92.67">generally speaking security gets is is</span> <span data-start="92.67" data-end="95.159">generally pushed to the end we usually</span> <span data-start="95.159" data-end="96.54">worry about security when it's too late</span> <span data-start="96.54" data-end="98.369">once we found a hole on the site as</span> <span data-start="98.369" data-end="100.409">opposed to worrying about it up front I</span> <span data-start="100.409" data-end="103.02">think that should probably change but</span> <span data-start="103.02" data-end="104.579">let's talk about content injection</span> <span data-start="104.579" data-end="107.07">content injection happens when you</span> <span data-start="107.07" data-end="109.5">either a one mechanism of content</span> <span data-start="109.5" data-end="112.71">injection is poor escaping so you get</span> <span data-start="112.71" data-end="115.259">some content from a user you escape it</span> <span data-start="115.259" data-end="117.119">incorrectly and then write it out to the</span> <span data-start="117.119" data-end="119.49">page what you see here is a relatively</span> <span data-start="119.49" data-end="123.2">exhaustive list of the contexts in which</span> <span data-start="123.2" data-end="126.149">code can be output to a site so you have</span> <span data-start="126.149" data-end="128.64">a color in a style tag you have a user</span> <span data-start="128.64" data-end="131.009">name directly inside of an HTML elements</span> <span data-start="131.009" data-end="132.69">you have a URL that's inside of an</span> <span data-start="132.69" data-end="133.83">attribute</span> <span data-start="133.83" data-end="135.21">have a user ID that's written directly</span> <span data-start="135.21" data-end="136.95">into script and you have some debug</span> <span data-start="136.95" data-end="139.59">information put into a comment for each</span> <span data-start="139.59" data-end="142.23">of these contexts the rules are</span> <span data-start="142.23" data-end="144.87">different for example if I have two</span> <span data-start="144.87" data-end="147.09">dashes inside of a comment that actually</span> <span data-start="147.09" data-end="149.97">closes the comment two dashes inside of</span> <span data-start="149.97" data-end="152.01">a pee tag of course have absolutely no</span> <span data-start="152.01" data-end="153.57">effect other than writing out two dashes</span> <span data-start="153.57" data-end="156.27">to the page you need to be very careful</span> <span data-start="156.27" data-end="158.46">about the ways that you escape data when</span> <span data-start="158.46" data-end="159.75">you write it out to the page you need to</span> <span data-start="159.75" data-end="161.67">know the context in which you're writing</span> <span data-start="161.67" data-end="163.29">out data and you need to make sure that</span> <span data-start="163.29" data-end="165.54">you escape the information correctly for</span> <span data-start="165.54" data-end="169.68">that context it's honestly trivial to do</span> <span data-start="169.68" data-end="172.62">all you have to do is be perfect you</span> <span data-start="172.62" data-end="174.72">simply have to know all of the rules and</span> <span data-start="174.72" data-end="177.3">apply them perfectly every time you read</span> <span data-start="177.3" data-end="179.34">out any data data that's coming from you</span> <span data-start="179.34" data-end="181.56">data that's reflected from the Dom data</span> <span data-start="181.56" data-end="183.72">that's coming from get parameters every</span> <span data-start="183.72" data-end="186.87">single time you have to be perfect it's</span> <span data-start="186.87" data-end="190.65">kind of difficult to do why is content</span> <span data-start="190.65" data-end="192.72">ejection important well to understand</span> <span data-start="192.72" data-end="194.58">that you have to understand the concept</span> <span data-start="194.58" data-end="197.37">of an origin an origin is a pairing of a</span> <span data-start="197.37" data-end="200.39">scheme a host and a port so HTTP</span> <span data-start="200.39" data-end="205.79">example.com 80 or HTTPS Google comm 443</span> <span data-start="205.79" data-end="208.47">those are two distinct origins and the</span> <span data-start="208.47" data-end="210.9">browser can guarantee that those origins</span> <span data-start="210.9" data-end="213.48">should never have direct access to</span> <span data-start="213.48" data-end="215.54">information from the other origin</span> <span data-start="215.54" data-end="219.06">example.com must never be able to access</span> <span data-start="219.06" data-end="221.459">for instance cookies from Google com or</span> <span data-start="221.459" data-end="223.47">local storage or any of a number of</span> <span data-start="223.47" data-end="227.07">other html5 storage mechanisms you're</span> <span data-start="227.07" data-end="228.36">kind of already familiar with this</span> <span data-start="228.36" data-end="230.16">concept with regard to JavaScript</span> <span data-start="230.16" data-end="232.68">because JavaScript has a number of ways</span> <span data-start="232.68" data-end="235.08">in which it can be a injected into a</span> <span data-start="235.08" data-end="238.44">page and be read interesting data like</span> <span data-start="238.44" data-end="240.33">cookies and then exfiltrate that data</span> <span data-start="240.33" data-end="244.8">out to a third party of course solving</span> <span data-start="244.8" data-end="246.69">content injection on the web is simple</span> <span data-start="246.69" data-end="248.4">right we just turn off JavaScript and</span> <span data-start="248.4" data-end="251.549">we're done easy just tell all your users</span> <span data-start="251.549" data-end="252.959">to go into content settings turn off</span> </p>
<p><span data-start="252.959" data-end="254.67">JavaScript on every web page and they</span> <span data-start="254.67" data-end="256.08">will never have another content</span> <span data-start="256.08" data-end="258.299">injection problem again sure someone</span> <span data-start="258.299" data-end="259.739">might write some content on your page</span> <span data-start="259.739" data-end="261.15">but it's just text it won't actually</span> <span data-start="261.15" data-end="263.669">execute so how could anything dangerous</span> <span data-start="263.669" data-end="267">happen I am here to talk about the</span> <span data-start="267" data-end="269.97">things there's an excellent paper and</span> <span data-start="269.97" data-end="271.53">most of the things that I'm going to</span> <span data-start="271.53" data-end="274.47">talk about today come from come from</span> </p>
<p><span data-start="274.47" data-end="276.69">Mario and come from this paper and a</span> <span data-start="276.69" data-end="278.22">number of others that he's published</span> <span data-start="278.22" data-end="280.92">I don't do attack research I am not the</span> <span data-start="280.92" data-end="283.32">right guy for that but I want to talk</span> <span data-start="283.32" data-end="284.73">about it a little bit just to give you</span> <span data-start="284.73" data-end="286.86">some context so that then at the end of</span> <span data-start="286.86" data-end="288">this talk I can talk about the things</span> <span data-start="288" data-end="290.94">that I think are important defense I can</span> <span data-start="290.94" data-end="293.34">show you how to harden your website</span> <span data-start="293.34" data-end="295.08">against these kinds of attacks and also</span> <span data-start="295.08" data-end="296.49">against all the other kinds of</span> <span data-start="296.49" data-end="298.26">cross-site scripting attacks out there I</span> <span data-start="298.26" data-end="299.79">actually really recommend that you take</span> <span data-start="299.79" data-end="301.98">a look at this paper it's kind of an</span> <span data-start="301.98" data-end="303.51">academic paper but it's really easy to</span> <span data-start="303.51" data-end="305.28">read and it walks through a lot of the</span> <span data-start="305.28" data-end="306.72">concepts that I'll be talking about here</span> <span data-start="306.72" data-end="308.58">and again all the slides are online</span> <span data-start="308.58" data-end="312.06">you'll see the URL at the end again what</span> </p>
<p><span data-start="312.06" data-end="313.56">I'm not going to talk about although I</span> <span data-start="313.56" data-end="315.54">find it incredibly interesting are</span> <span data-start="315.54" data-end="318.419">timing attacks timing attacks I would</span> <span data-start="318.419" data-end="319.83">love to talk about them but they require</span> <span data-start="319.83" data-end="321.75">JavaScript and because of that I cannot</span> <span data-start="321.75" data-end="323.61">talk about them at CSS comp but I can</span> <span data-start="323.61" data-end="325.38">show you this white paper this was</span> <span data-start="325.38" data-end="327.48">presented I think in June of this year</span> <span data-start="327.48" data-end="330.45">and it's it is absolutely stunning what</span> <span data-start="330.45" data-end="333.06">you can do simply by looking at how the</span> <span data-start="333.06" data-end="335.82">browser renders things this guy gives</span> <span data-start="335.82" data-end="337.8">you an excellent mechanism by which you</span> <span data-start="337.8" data-end="340.5">can detect whether or not a user has</span> <span data-start="340.5" data-end="343.11">visited a page the history attacks we</span> <span data-start="343.11" data-end="345.24">basically shut those down via JavaScript</span> <span data-start="345.24" data-end="347.43">in other words you can't directly read</span> <span data-start="347.43" data-end="349.62">the style of a visited link however if</span> <span data-start="349.62" data-end="352.74">you're very clever and you read the</span> <span data-start="352.74" data-end="354.9">paper it's absolutely incredible he can</span> <span data-start="354.9" data-end="357.84">actually read individual pixels across</span> <span data-start="357.84" data-end="360.27">origin through an iframe it's the most</span> <span data-start="360.27" data-end="362.12">amazing thing that I've seen in the last</span> <span data-start="362.12" data-end="364.169">couple of months I really highly</span> <span data-start="364.169" data-end="365.34">recommend you read it but that's not our</span> <span data-start="365.34" data-end="367.169">topic for today but we want to talk</span> <span data-start="367.169" data-end="369.03">about today our content injection</span> <span data-start="369.03" data-end="370.86">attacks and for a Content injection</span> <span data-start="370.86" data-end="373.02">attack to be successful it needs three</span> <span data-start="373.02" data-end="374.58">components there needs to be an</span> <span data-start="374.58" data-end="377.61">injection and I guarantee you that there</span> <span data-start="377.61" data-end="379.02">are injections on your page I'm not even</span> <span data-start="379.02" data-end="380.28">going to talk about it because it</span> <span data-start="380.28" data-end="382.35">happens everywhere it's really difficult</span> <span data-start="382.35" data-end="385.56">to avoid then it needs execution and for</span> </p>
<p><span data-start="385.56" data-end="387.6">JavaScript execution is quite clear the</span> <span data-start="387.6" data-end="390.09">code executes or it doesn't what I</span> <span data-start="390.09" data-end="393.63">propose is that execution should be you</span> <span data-start="393.63" data-end="395.82">should conceptually include things like</span> <span data-start="395.82" data-end="397.05">the application of style</span> <span data-start="397.05" data-end="400.31">if style executes on your page then</span> </p>
<p><span data-start="400.31" data-end="401.51">I'll show you some problems that can pop</span> <span data-start="401.51" data-end="404.45">up and then there needs to be some sort</span> <span data-start="404.45" data-end="407.389">of advantage for the attacker in that in</span> <span data-start="407.389" data-end="409.4">the most cases the advantage for the</span> <span data-start="409.4" data-end="411.68">attacker is exfiltration of interesting</span> <span data-start="411.68" data-end="413.72">information from your website this might</span> <span data-start="413.72" data-end="415.91">be a CSRF token we'll talk about those</span> <span data-start="415.91" data-end="417.53">in a moment it might be a password it</span> <span data-start="417.53" data-end="419.27">might be the user's bank account</span> <span data-start="419.27" data-end="422.9">information anytime the attacker can get</span> <span data-start="422.9" data-end="424.82">secret information from a page and</span> <span data-start="424.82" data-end="427.13">exfiltrate it to a third party server to</span> <span data-start="427.13" data-end="428.84">a server that they control then they've</span> <span data-start="428.84" data-end="430.48">gained some sort of advantage over you</span> <span data-start="430.48" data-end="433.25">we'll talk about how all of these can</span> <span data-start="433.25" data-end="437.33">happen within the context of CSS first</span> </p>
<p><span data-start="437.33" data-end="438.55">I'll talk about the obvious stuff</span> <span data-start="438.55" data-end="441.08">defacement phishing anything along these</span> <span data-start="441.08" data-end="443.72">lines if someone can inject style into</span> <span data-start="443.72" data-end="446.12">your page then by definition they can</span> <span data-start="446.12" data-end="447.83">change the way that your page looks and</span> <span data-start="447.83" data-end="449.78">to a certain extent they can change the</span> <span data-start="449.78" data-end="452.36">way your page behaves in the worst case</span> <span data-start="452.36" data-end="453.74">or in the most simple case they can</span> <span data-start="453.74" data-end="456.68">simply hide everything on your page and</span> <span data-start="456.68" data-end="459.08">change the background of your of your</span> <span data-start="459.08" data-end="460.28">page to something that you would not</span> <span data-start="460.28" data-end="462.38">like to have as your homepage these are</span> <span data-start="462.38" data-end="464.39">really trivial attacks there's nothing</span> <span data-start="464.39" data-end="465.979">really interesting to say about them</span> <span data-start="465.979" data-end="467.81">other than if someone can inject style</span> <span data-start="467.81" data-end="469.7">into your page they can change the way</span> <span data-start="469.7" data-end="472.85">your page looks and at best embarrass</span> <span data-start="472.85" data-end="475.34">you at worst trick users into clicking</span> <span data-start="475.34" data-end="476.419">on things that they shouldn't click on</span> <span data-start="476.419" data-end="478.31">so if you have a hole that allows</span> <span data-start="478.31" data-end="480.65">someone to inject style they can almost</span> <span data-start="480.65" data-end="482.72">certainly inject HTML as well if they</span> <span data-start="482.72" data-end="484.7">can inject HTML they could inject a form</span> <span data-start="484.7" data-end="486.53">they could inject a link and bring a</span> <span data-start="486.53" data-end="488.24">user to a page that the user isn't</span> <span data-start="488.24" data-end="490.669">expecting to go to a style injection</span> <span data-start="490.669" data-end="492.05">will help them with that it'll help them</span> <span data-start="492.05" data-end="493.64">take whatever they can inject and make</span> <span data-start="493.64" data-end="495.08">it look like it's supposed to be on your</span> <span data-start="495.08" data-end="497">page and make it very enticing for user</span> <span data-start="497" data-end="498.83">to click on so if your bank account</span> <span data-start="498.83" data-end="501.8">suddenly said hey here's five free euro</span> <span data-start="501.8" data-end="503.06">then you're probably going to click on</span> <span data-start="503.06" data-end="504.83">that button because hey five four euro</span> <span data-start="504.83" data-end="506.479">that's awesome of course my bank is</span> <span data-start="506.479" data-end="508.729">gonna give that to me because of that</span> <span data-start="508.729" data-end="511.16">any time the user that an attacker can</span> <span data-start="511.16" data-end="513.71">inject style into a page it's actually</span> <span data-start="513.71" data-end="515.27">more dangerous than you might think just</span> <span data-start="515.27" data-end="517.46">in terms of defacement but again that's</span> <span data-start="517.46" data-end="518.78">not particularly interesting because</span> <span data-start="518.78" data-end="521.87">it's kind of obvious what would be more</span> <span data-start="521.87" data-end="523.909">interesting is if we could take some</span> <span data-start="523.909" data-end="525.65">sort of secret information on the page</span> <span data-start="525.65" data-end="528.29">information that isn't actually visible</span> <span data-start="528.29" data-end="531.8">to the user and exfiltrated somehow so</span> <span data-start="531.8" data-end="533.66">for example every</span> <span data-start="533.66" data-end="535.399">time you have a form on a web site that</span> <span data-start="535.399" data-end="538.579">posts somewhere and does something in</span> <span data-start="538.579" data-end="540.529">the backend you generally want to make</span> <span data-start="540.529" data-end="542.48">sure that you are the only one that can</span> <span data-start="542.48" data-end="545.48">post to that URL one way to do that is</span> <span data-start="545.48" data-end="548.089">to have a CSRF token which basically</span> <span data-start="548.089" data-end="551.06">says you give each user a one-time pad</span> <span data-start="551.06" data-end="553.699">so here's a secret and then they use</span> <span data-start="553.699" data-end="555.529">that secret when they submit the form</span> <span data-start="555.529" data-end="557.42">because of course you can submit forms</span> <span data-start="557.42" data-end="559.67">from anywhere forms and posts are not</span> <span data-start="559.67" data-end="561.529">particularly hard to trick a user into</span> <span data-start="561.529" data-end="563.3">making this is why you want to make sure</span> <span data-start="563.3" data-end="565.339">that you give the user a secret and then</span> <span data-start="565.339" data-end="567.259">the user uses that secret to execute</span> <span data-start="567.259" data-end="569.269">something on the backend it'd be really</span> <span data-start="569.269" data-end="571.129">useful if an attacker could find some</span> <span data-start="571.129" data-end="574.1">way to pull that secret and give it over</span> <span data-start="574.1" data-end="576.47">to to themselves as opposed to only</span> <span data-start="576.47" data-end="578.12">having access to it within the context</span> <span data-start="578.12" data-end="580.55">of your page how could we go about doing</span> <span data-start="580.55" data-end="584.689">this it's an input element and we need</span> <span data-start="584.689" data-end="588.47">to use CSS in some way to apply style to</span> <span data-start="588.47" data-end="590.24">that element only when it meets certain</span> <span data-start="590.24" data-end="592.67">requirements one mechanism that we could</span> <span data-start="592.67" data-end="594.98">use of course is an attribute selector</span> <span data-start="594.98" data-end="597.379">attribute selectors are great they allow</span> <span data-start="597.379" data-end="599.689">us to apply Styles only when the</span> <span data-start="599.689" data-end="602.6">attribute matches a certain value so in</span> <span data-start="602.6" data-end="605.389">the worst case you can brute force the</span> <span data-start="605.389" data-end="607.79">value of an elements or have an</span> <span data-start="607.79" data-end="610.279">attribute on it elements by injecting a</span> <span data-start="610.279" data-end="611.99">whole lot of style or more appropriately</span> <span data-start="611.99" data-end="614.06">by injecting a link to a style sheet</span> <span data-start="614.06" data-end="616.13">such that the style sheet loads has a</span> <span data-start="616.13" data-end="618.86">whole lot of style information and the</span> </p>
<p><span data-start="618.86" data-end="621.199">CSRF token will be matched if it matches</span> <span data-start="621.199" data-end="624.319">a certain value so this shows you how</span> <span data-start="624.319" data-end="626">you would do it if the CSRF token was</span> <span data-start="626" data-end="628.97">binary most CSRF tokens are in fact not</span> <span data-start="628.97" data-end="630.47">binary they use a lot more characters</span> <span data-start="630.47" data-end="632.42">which means brute-forcing isn't</span> <span data-start="632.42" data-end="635.87">particularly fast it's actually quite</span> <span data-start="635.87" data-end="639.8">slow but once we have this once we were</span> <span data-start="639.8" data-end="642.829">able to match a value and of course you</span> <span data-start="642.829" data-end="644.149">don't have to use equals you can use</span> <span data-start="644.149" data-end="645.86">starts width you can use ends with it'd</span> <span data-start="645.86" data-end="647.63">be really nice if there was a reg axe of</span> <span data-start="647.63" data-end="649.189">some sort but there isn't I'm hoping</span> <span data-start="649.189" data-end="650.779">that comes up at some point really</span> <span data-start="650.779" data-end="652.399">excited about web components let's see</span> <span data-start="652.399" data-end="656.389">where we go with that I think that there</span> <span data-start="656.389" data-end="658.819">is so once you're able to inject script</span> <span data-start="658.819" data-end="660.889">or inject style and that style can not</span> <span data-start="660.889" data-end="663.05">certain elements on the page we still</span> <span data-start="663.05" data-end="664.699">have to have some mechanism by which we</span> <span data-start="664.699" data-end="667.52">give that information to a third party</span> <span data-start="667.52" data-end="670.64">happily CSS makes this quite trivial by</span> <span data-start="670.64" data-end="673.01">giving us the ability to load resources</span> <span data-start="673.01" data-end="675.44">from any URL on the web that's kind of</span> <span data-start="675.44" data-end="677.42">nice right so I'm gonna set a background</span> <span data-start="677.42" data-end="680.57">image on the CSRF taken of evil comm and</span> <span data-start="680.57" data-end="683.15">then CSRF equals zero and I'm going to</span> <span data-start="683.15" data-end="685.28">repeat this for every single brute-force</span> <span data-start="685.28" data-end="687.29">attack that I'm making so value equals</span> <span data-start="687.29" data-end="689.51">zero value equals one at some point I</span> <span data-start="689.51" data-end="691.25">will match the token and I will</span> <span data-start="691.25" data-end="692.81">exfiltrate that token out to a</span> <span data-start="692.81" data-end="694.7">third-party server the third party now</span> <span data-start="694.7" data-end="697.46">has the ability to if you can fish the</span> <span data-start="697.46" data-end="699.32">user in some way which is really trivial</span> <span data-start="699.32" data-end="701.96">then you'll know a CSRF token you'll</span> <span data-start="701.96" data-end="703.55">hope the user hasn't used it yet and</span> <span data-start="703.55" data-end="706.58">you'll be able to submit something that</span> <span data-start="706.58" data-end="708.35">actually has a fact as opposed to</span> <span data-start="708.35" data-end="710.81">something that doesn't this was talked</span> <span data-start="710.81" data-end="714.32">about it's way way back in 2009 it's I</span> <span data-start="714.32" data-end="715.67">think the presentation was called the</span> <span data-start="715.67" data-end="717.53">sexiest Assin which is a terrible name</span> <span data-start="717.53" data-end="720.35">for it and it's just a terrible name in</span> <span data-start="720.35" data-end="721.76">general I think they'd probably be</span> <span data-start="721.76" data-end="724.61">embarrassed about it now but the attack</span> <span data-start="724.61" data-end="727.06">is something like this I type yay and</span> <span data-start="727.06" data-end="730.67">then only using CSS they're able to</span> <span data-start="730.67" data-end="734.09">using front looking at the front looking</span> <span data-start="734.09" data-end="735.35">at the back and then combining those</span> <span data-start="735.35" data-end="736.63">selectors they're able to actually</span> <span data-start="736.63" data-end="740.99">detect what the value is across origins</span> <span data-start="740.99" data-end="745.79">which is actually kind of cool what this</span> <span data-start="745.79" data-end="748.7">proves is that simply with CSS you're</span> <span data-start="748.7" data-end="751.19">able to read the value of elements on a</span> <span data-start="751.19" data-end="752.9">page and you're able to exfiltrate that</span> <span data-start="752.9" data-end="755.18">information now this is relatively slow</span> <span data-start="755.18" data-end="757.16">we'll look at some things later on that</span> <span data-start="757.16" data-end="758.87">will speed it up and that will actually</span> <span data-start="758.87" data-end="761.27">make it more practical for an attack as</span> <span data-start="761.27" data-end="762.95">opposed to this brute force mechanism</span> <span data-start="762.95" data-end="765.44">which is kind of impractical the point</span> <span data-start="765.44" data-end="767.87">here is simply that execution and</span> <span data-start="767.87" data-end="770.57">exfiltration are not only possible but</span> <span data-start="770.57" data-end="772.64">quite plausible within the context of</span> </p>
<p><span data-start="772.64" data-end="775.07">CSS i'd recommend that you take a look</span> <span data-start="775.07" data-end="776.24">at this if you do</span> <span data-start="776.24" data-end="778.76">I think questions source then you see</span> <span data-start="778.76" data-end="782.6">the the PHP stuff this is relatively old</span> <span data-start="782.6" data-end="784.28">so the codes not awesome but it's</span> <span data-start="784.28" data-end="785.54">certainly worth looking through just to</span> <span data-start="785.54" data-end="790.43">see how it works so continuing what if</span> <span data-start="790.43" data-end="791.84">we wanted to steal a get parameter</span> <span data-start="791.84" data-end="793.58">instead of looking at something on the</span> <span data-start="793.58" data-end="794.9">page what if we wanted to look at the</span> <span data-start="794.9" data-end="797.51">URL of the document unfortunately this</span> <span data-start="797.51" data-end="800.09">only works in Firefox as a bug here that</span> <span data-start="800.09" data-end="801.209">you can star if you</span> <span data-start="801.209" data-end="803.009">to work in WebKit — I think that would</span> <span data-start="803.009" data-end="806.999">be interesting but there is an amazing</span> <span data-start="806.999" data-end="809.49">selector called Moz documents and Moz</span> <span data-start="809.49" data-end="812.16">document allows you to use a reg axe to</span> <span data-start="812.16" data-end="813.72">look at the name of the document to look</span> <span data-start="813.72" data-end="817.35">at the actual URL and then do some sort</span> <span data-start="817.35" data-end="819.42">of styling on the page based upon that</span> </p>
<p><span data-start="819.42" data-end="821.97">URL this is really really useful for</span> <span data-start="821.97" data-end="823.61">like user scripts people that are</span> <span data-start="823.61" data-end="825.779">injecting some sort of code into a page</span> <span data-start="825.779" data-end="827.279">they only want to have one style sheet</span> <span data-start="827.279" data-end="828.689">but they want to do slightly different</span> <span data-start="828.689" data-end="830.49">things on different pages it would also</span> <span data-start="830.49" data-end="832.949">give you the ability to kind of a poor</span> <span data-start="832.949" data-end="834.959">man's ability to scope style to a</span> <span data-start="834.959" data-end="836.73">certain section of your page you include</span> <span data-start="836.73" data-end="838.92">the same style sheet on every page in</span> <span data-start="838.92" data-end="840.809">your in your site but you have certain</span> <span data-start="840.809" data-end="842.009">styles that apply to your homepage</span> <span data-start="842.009" data-end="844.199">certain styles that apply to your about</span> <span data-start="844.199" data-end="846.209">page something along those lines there</span> <span data-start="846.209" data-end="847.92">are some use cases for it but it gives</span> <span data-start="847.92" data-end="849.869">us this really interesting ability to</span> <span data-start="849.869" data-end="851.939">set up regular expressions and if we</span> <span data-start="851.939" data-end="853.379">have regular expressions we can do</span> <span data-start="853.379" data-end="854.85">something much more efficient than</span> <span data-start="854.85" data-end="856.829">brute-forcing we can actually look at</span> <span data-start="856.829" data-end="858.48">each character individually and</span> <span data-start="858.48" data-end="860.699">determine what those characters are and</span> <span data-start="860.699" data-end="862.249">what the position of the characters are</span> <span data-start="862.249" data-end="866.97">so let's go whoops what is that how do I</span> <span data-start="866.97" data-end="870.709">get back this isn't my computer help</span> <span data-start="870.709" data-end="875.339">where do we go no really you think it's</span> <span data-start="875.339" data-end="879.23">funny but it's not where is my Chrome</span> <span data-start="879.23" data-end="880.679">there we go</span> <span data-start="880.679" data-end="888.269">look at that so let's go you'd think</span> <span data-start="888.269" data-end="890.009">working on Chrome I would actually know</span> <span data-start="890.009" data-end="893.009">how to use Chrome unfortunately not the</span> <span data-start="893.009" data-end="894.48">case I just write code I don't actually</span> <span data-start="894.48" data-end="896.369">know anything about how this works so</span> <span data-start="896.369" data-end="899.67">we're on a web site we'll do we'll grab</span> <span data-start="899.67" data-end="901.499">a PHP session ID which is relatively</span> <span data-start="901.499" data-end="902.79">common it's much more common than it</span> <span data-start="902.79" data-end="905.369">should be basically every templating</span> <span data-start="905.369" data-end="906.839">language will have a session ID of some</span> <span data-start="906.839" data-end="907.92">sort because some people turn off</span> <span data-start="907.92" data-end="911.1">cookies so if we get a session ID</span> <span data-start="911.1" data-end="913.23">nothing actually happened that I saw</span> <span data-start="913.23" data-end="914.97">nothing happened on this page so of</span> <span data-start="914.97" data-end="917.49">course I'm perfectly safe unfortunately</span> <span data-start="917.49" data-end="918.869">that's not the case so if we go into the</span> <span data-start="918.869" data-end="923.819">network and then reload the page oh ha</span> <span data-start="923.819" data-end="923.999">ha</span> </p>
<p><span data-start="923.999" data-end="927.689">I need Firefox is there Firefox on this</span> <span data-start="927.689" data-end="929.39">machine is</span> <span data-start="929.39" data-end="932.329">that's awesome where'd my firefox go oh</span> <span data-start="932.329" data-end="934.07">look at that oh this is gonna be great</span> <span data-start="934.07" data-end="940.97">I need my net so it'd be really nice the</span> <span data-start="940.97" data-end="942.68">Firebug stayed open when I navigated</span> <span data-start="942.68" data-end="947.57">between origins so I'm a net let's</span> <span data-start="947.57" data-end="953">reload and I'm filtered to CSS there we</span> <span data-start="953" data-end="955.73">go so what we see here is that it's</span> <span data-start="955.73" data-end="958.339">actually able to read each character and</span> <span data-start="958.339" data-end="960.649">exfiltrate both the character and the</span> <span data-start="960.649" data-end="963.14">position to a third-party server so all</span> <span data-start="963.14" data-end="965.839">evil comm has to do is look at its logs</span> <span data-start="965.839" data-end="967.88">and it now has a session ID for a user</span> <span data-start="967.88" data-end="970.339">if the user has been to evil calm before</span> <span data-start="970.339" data-end="973.1">it also has a cookie so it's able to not</span> <span data-start="973.1" data-end="975.56">only identify the user but also get a</span> <span data-start="975.56" data-end="977.18">session ID which means I can just go</span> <span data-start="977.18" data-end="978.8">back to this website use that as my</span> <span data-start="978.8" data-end="980.48">session ID and for all intents and</span> <span data-start="980.48" data-end="982.82">purposes I am this user it's a kind of</span> <span data-start="982.82" data-end="984.74">interesting attack vector again it only</span> <span data-start="984.74" data-end="987.589">works in Firefox but in Germany a lot of</span> <span data-start="987.589" data-end="989.63">people use Firefox so it's kind of an</span> <span data-start="989.63" data-end="994.13">interesting thing to do here there are</span> <span data-start="994.13" data-end="1000.399">other browsers it's all insane so we've</span> <span data-start="1000.399" data-end="1002.56">looked at CSRF tokens we've looked at</span> <span data-start="1002.56" data-end="1004.269">the get string and be really nice</span> <span data-start="1004.269" data-end="1006.149">actually if we could just steal any</span> <span data-start="1006.149" data-end="1008.8">arbitrary attribute on a page that'd be</span> <span data-start="1008.8" data-end="1010.209">kind of useful right because a lot of</span> <span data-start="1010.209" data-end="1012.279">pages especially in this brave new world</span> <span data-start="1012.279" data-end="1015.01">of single page applications are starting</span> <span data-start="1015.01" data-end="1017.23">the store things in attributes that are</span> <span data-start="1017.23" data-end="1018.699">really quite interesting for us so</span> <span data-start="1018.699" data-end="1020.86">templates did sort of data binding stuff</span> <span data-start="1020.86" data-end="1022.06">that's going on with angular and a</span> <span data-start="1022.06" data-end="1023.98">variety of other languages start storing</span> <span data-start="1023.98" data-end="1025.36">much more interesting things and</span> <span data-start="1025.36" data-end="1027.28">attributes than they used to and because</span> <span data-start="1027.28" data-end="1029.41">of that it gives us actually a really</span> <span data-start="1029.41" data-end="1031.12">interesting opportunity to start taking</span> <span data-start="1031.12" data-end="1032.86">more useful information than we were</span> <span data-start="1032.86" data-end="1035.5">able to get to before now this I don't</span> <span data-start="1035.5" data-end="1037.299">have any demo code for and set them just</span> </p>
<p><span data-start="1037.299" data-end="1039.04">I don't have any code to show you in</span> <span data-start="1039.04" data-end="1040.209">this presentation I'm just gonna show</span> <span data-start="1040.209" data-end="1042.25">you a quick demo so this is a proof of</span> <span data-start="1042.25" data-end="1045">concept and what this is going to do is</span> <span data-start="1045" data-end="1047.919">steal some information on these links so</span> <span data-start="1047.919" data-end="1050.77">let's say that we're in a a popular</span> <span data-start="1050.77" data-end="1053.62">bulletin board program that doesn't use</span> <span data-start="1053.62" data-end="1056.83">posts for its for its admin but instead</span> <span data-start="1056.83" data-end="1058.84">just says delete user and then has a</span> <span data-start="1058.84" data-end="1060.79">secret attached to that so as a get</span> <span data-start="1060.79" data-end="1063.31">parameter which is actually kind</span> <span data-start="1063.31" data-end="1065.77">common and now I'm back over here why is</span> <span data-start="1065.77" data-end="1068.77">that my antivirus is expired what's up</span> <span data-start="1068.77" data-end="1070.87">with that that's craziness don't have an</span> <span data-start="1070.87" data-end="1074.92">antivirus this is a Mac so if I reload</span> <span data-start="1074.92" data-end="1075.82">this page you'll see something</span> <span data-start="1075.82" data-end="1077.77">interesting happen right there's an</span> <span data-start="1077.77" data-end="1079.24">animation going on at the top and you</span> <span data-start="1079.24" data-end="1081.31">see some red stuff pop up and then go</span> <span data-start="1081.31" data-end="1083.8">away that's kind of interesting red</span> <span data-start="1083.8" data-end="1085.81">stuff popping up and going what could</span> <span data-start="1085.81" data-end="1088.27">that possibly be if we look at the net</span> <span data-start="1088.27" data-end="1090.76">tag then we'll see actually that what's</span> <span data-start="1090.76" data-end="1092.98">happening is the requests are somehow</span> <span data-start="1092.98" data-end="1095.61">being made and these requests are</span> <span data-start="1095.61" data-end="1099.25">exporting or exfiltrating information</span> <span data-start="1099.25" data-end="1101.2">about something that's contained in this</span> <span data-start="1101.2" data-end="1102.67">link how could this possibly be</span> <span data-start="1102.67" data-end="1105.67">happening the animation is used to</span> <span data-start="1105.67" data-end="1108.52">measure the width of an object why is</span> <span data-start="1108.52" data-end="1110.89">that important well it's important if we</span> <span data-start="1110.89" data-end="1114.07">construct a specially crafted font that</span> <span data-start="1114.07" data-end="1117.76">only has width for one character so T</span> <span data-start="1117.76" data-end="1119.44">has width but no other character has</span> <span data-start="1119.44" data-end="1122.65">width this allows me to measure the</span> <span data-start="1122.65" data-end="1125.77">width of an element with a with an</span> <span data-start="1125.77" data-end="1127.33">animation that says you know go down to</span> <span data-start="1127.33" data-end="1129.46">the right size and then come back I</span> <span data-start="1129.46" data-end="1131.56">measure the width by looking for the</span> <span data-start="1131.56" data-end="1134.08">presence of a scrollbar I can detect the</span> <span data-start="1134.08" data-end="1137.2">scrollbar because WebKit for amazing</span> <span data-start="1137.2" data-end="1139.21">reasons has a lot of scrollbar</span> <span data-start="1139.21" data-end="1141.79">properties and in this case WebKit</span> <span data-start="1141.79" data-end="1143.68">scrollbar track piece vertical</span> <span data-start="1143.68" data-end="1147.85">increments only loads when the scrollbar</span> <span data-start="1147.85" data-end="1150.28">appears most scrollbar attributes</span> <span data-start="1150.28" data-end="1152.02">actually load at page load which isn't</span> <span data-start="1152.02" data-end="1153.57">very useful for data extract</span> <span data-start="1153.57" data-end="1157.03">expectations but if we look only for</span> <span data-start="1157.03" data-end="1159.04">those specific properties that only load</span> <span data-start="1159.04" data-end="1161.71">data or only load resources when the</span> <span data-start="1161.71" data-end="1163.69">scrollbar pops up then we can measure</span> <span data-start="1163.69" data-end="1165.73">the width of an element's and then tell</span> <span data-start="1165.73" data-end="1167.86">an external server that this element was</span> <span data-start="1167.86" data-end="1169.54">this wide at some point which means</span> <span data-start="1169.54" data-end="1171.88">something in this case it means that it</span> <span data-start="1171.88" data-end="1174.22">contains an S or it contains a T this</span> <span data-start="1174.22" data-end="1175.45">gives us the information that we would</span> <span data-start="1175.45" data-end="1177.1">then need to more efficiently</span> <span data-start="1177.1" data-end="1178.48">brute-force a password or more</span> <span data-start="1178.48" data-end="1181.42">efficiently brute-force a took a token</span> <span data-start="1181.42" data-end="1183.58">of some sort you can actually make this</span> <span data-start="1183.58" data-end="1188.29">much more efficient by using contextual</span> <span data-start="1188.29" data-end="1191.17">alternatives in wofe contextual</span> <span data-start="1191.17" data-end="1192.97">alternatives are amazing they're really</span> <span data-start="1192.97" data-end="1195.31">very useful so if you look at this I</span> <span data-start="1195.31" data-end="1196.84">need to go back into full screen</span> <span data-start="1196.84" data-end="1198.909">if you look at this you'll see that the</span> <span data-start="1198.909" data-end="1201.129">text on the page is dear mom keep your</span> <span data-start="1201.129" data-end="1203.08">plates clean this time I will cook for</span> <span data-start="1203.08" data-end="1205.029">us this Sunday at 3:00 so it's a very</span> <span data-start="1205.029" data-end="1206.59">beautiful letter from a child to a</span> <span data-start="1206.59" data-end="1208.809">parent and we see that it's been made</span> <span data-start="1208.809" data-end="1210.669">even more beautiful by the presence of a</span> </p>
<p><span data-start="1210.669" data-end="1212.919">Waffen that says every time you see the</span> <span data-start="1212.919" data-end="1216.519">four characters de AR replace them with</span> <span data-start="1216.519" data-end="1218.409">a picture of a deer because a picture of</span> <span data-start="1218.409" data-end="1220.12">a deer is loveable and happy and makes</span> <span data-start="1220.12" data-end="1222.58">everyone just thrilled to get a letter</span> <span data-start="1222.58" data-end="1225.37">like this what it also does is allow us</span> <span data-start="1225.37" data-end="1228.249">to change the width of particular</span> <span data-start="1228.249" data-end="1230.74">strings of characters what this allows</span> <span data-start="1230.74" data-end="1232.869">us to do is to build a font that can be</span> <span data-start="1232.869" data-end="1234.059">used to attack people</span> <span data-start="1234.059" data-end="1236.679">you've heard of dictionary attacks we</span> <span data-start="1236.679" data-end="1238.84">can build a dictionary font so all the</span> <span data-start="1238.84" data-end="1241.33">most common passwords can each have the</span> <span data-start="1241.33" data-end="1242.799">first password can be one pixel the</span> <span data-start="1242.799" data-end="1244.389">second password can be two pixels the</span> <span data-start="1244.389" data-end="1245.919">next password can be four pixels and so</span> <span data-start="1245.919" data-end="1249.789">on we can use this information and then</span> <span data-start="1249.789" data-end="1253.69">using I'm sorry I missed something</span> <span data-start="1253.69" data-end="1255.159">the thing that's important that I forgot</span> <span data-start="1255.159" data-end="1258.22">to say is that you bring the data out</span> <span data-start="1258.22" data-end="1260.799">from the attribute by using a pseudo</span> <span data-start="1260.799" data-end="1264.73">element so you do like a after and then</span> <span data-start="1264.73" data-end="1268.21">in the after you use content and content</span> <span data-start="1268.21" data-end="1271.24">is a troop of href so you pull the</span> <span data-start="1271.24" data-end="1273.159">attribute you put it into the dom</span> <span data-start="1273.159" data-end="1274.72">somewhere where it can be measured and</span> <span data-start="1274.72" data-end="1276.549">then you measure it you saw that it was</span> <span data-start="1276.549" data-end="1278.139">like a five second animation you don't</span> <span data-start="1278.139" data-end="1279.309">have to wait five seconds you can</span> <span data-start="1279.309" data-end="1280.509">actually do it much more much more</span> <span data-start="1280.509" data-end="1282.129">quickly and this allows you to do it</span> <span data-start="1282.129" data-end="1283.659">even more quickly still because instead</span> <span data-start="1283.659" data-end="1285.399">of evaluating each character</span> <span data-start="1285.399" data-end="1286.539">individually and instead of having</span> <span data-start="1286.539" data-end="1289.57">defined twenty six different occurrences</span> <span data-start="1289.57" data-end="1291.669">on a page you can hopefully have one</span> <span data-start="1291.669" data-end="1293.11">occurrence and then look for the</span> <span data-start="1293.11" data-end="1296.08">particular word in order to determine</span> <span data-start="1296.08" data-end="1298.779">which of these things matches its and</span> </p>
<p><span data-start="1298.779" data-end="1300.22">I'm really excited about the potential</span> <span data-start="1300.22" data-end="1301.929">for media queries on elements because</span> <span data-start="1301.929" data-end="1302.98">that's gonna make something like this</span> <span data-start="1302.98" data-end="1304.45">even more valuable because you'll</span> <span data-start="1304.45" data-end="1305.559">actually be able to determine exactly</span> <span data-start="1305.559" data-end="1307.929">how wide an element is with pixel</span> <span data-start="1307.929" data-end="1310.149">precision with an animation you actually</span> <span data-start="1310.149" data-end="1311.499">have to do a timing attack you have to</span> <span data-start="1311.499" data-end="1314.019">look at the start of the page load so</span> <span data-start="1314.019" data-end="1315.549">you send some sort of information to the</span> <span data-start="1315.549" data-end="1317.529">server and then you animate and then</span> <span data-start="1317.529" data-end="1319.24">based upon how long it took you can</span> <span data-start="1319.24" data-end="1320.649">start guessing at which password it</span> <span data-start="1320.649" data-end="1324.309">might have been it's less useful than it</span> <span data-start="1324.309" data-end="1325.779">would be if we were able to pixel</span> <span data-start="1325.779" data-end="1327.58">perfectly measure each elements on the</span> <span data-start="1327.58" data-end="1329.98">page using a media query if we can start</span> <span data-start="1329.98" data-end="1330.34">doing</span> <span data-start="1330.34" data-end="1331.9">and I'm actually quite excited about the</span> <span data-start="1331.9" data-end="1334.93">potential for not only web components</span> <span data-start="1334.93" data-end="1336.55">but also attackers because that's gonna</span> <span data-start="1336.55" data-end="1339.13">be fun so anyway at the point here is</span> <span data-start="1339.13" data-end="1341.32">that by using a couple of different</span> <span data-start="1341.32" data-end="1343.57">properties of CSS you can exfiltrate</span> <span data-start="1343.57" data-end="1345.64">data that you really didn't expect to be</span> <span data-start="1345.64" data-end="1348.01">able to exfiltrate a dictionary fonts of</span> <span data-start="1348.01" data-end="1350.14">about a hundred thousand entries is less</span> <span data-start="1350.14" data-end="1350.71">than a Meg</span> <span data-start="1350.71" data-end="1353.08">so users especially if you look at</span> <span data-start="1353.08" data-end="1354.82">websites these days if you look at like</span> <span data-start="1354.82" data-end="1357.37">the iPhone 5s website it's like 17 or 18</span> </p>
<p><span data-start="1357.37" data-end="1359.41">Meg for the entire site which is kind of</span> <span data-start="1359.41" data-end="1360.91">ridiculous and in that context</span> <span data-start="1360.91" data-end="1363.91">downloading a Meg for a font is not even</span> <span data-start="1363.91" data-end="1368.05">gonna notice it's kind of cool again I</span> <span data-start="1368.05" data-end="1369.16">would recommend you look at those two</span> <span data-start="1369.16" data-end="1370.93">papers that I pointed out at the</span> <span data-start="1370.93" data-end="1372.82">beginning they go into a lot more detail</span> <span data-start="1372.82" data-end="1375.28">about the practical application of these</span> <span data-start="1375.28" data-end="1377.02">sorts of attacks what I want to do here</span> <span data-start="1377.02" data-end="1379.18">is just give you give you a flavor for</span> <span data-start="1379.18" data-end="1381.34">what can go on and what I'd like to do</span> <span data-start="1381.34" data-end="1383.59">now is tell you how you can actually</span> <span data-start="1383.59" data-end="1385.87">defend yourself against these sorts of</span> <span data-start="1385.87" data-end="1388.36">attacks the main problem that we talked</span> <span data-start="1388.36" data-end="1389.59">about it the main problem that I</span> <span data-start="1389.59" data-end="1392.02">expressed is that the browser executes</span> <span data-start="1392.02" data-end="1394.39">all the code that it sees and it</span> <span data-start="1394.39" data-end="1396.91">executes all that code in the context of</span> <span data-start="1396.91" data-end="1398.8">your origin which means in the case of</span> </p>
<p><span data-start="1398.8" data-end="1401.41">CSS but it has Dom access it can read</span> <span data-start="1401.41" data-end="1403.03">things from the DOM and can exfiltrate</span> <span data-start="1403.03" data-end="1405.76">data to third parties does anyone know</span> <span data-start="1405.76" data-end="1406.98">what this picture is</span> <span data-start="1406.98" data-end="1409.66">this painting okay a couple of people</span> <span data-start="1409.66" data-end="1411.64">this painting is Odysseus and the sirens</span> <span data-start="1411.64" data-end="1413.59">I think it's a really interesting story</span> <span data-start="1413.59" data-end="1415.09">and I think it's a metaphor that's going</span> <span data-start="1415.09" data-end="1417.34">to be a very applicable at a moment so</span> <span data-start="1417.34" data-end="1421.78">the sirens they sing beautifully so</span> <span data-start="1421.78" data-end="1423.85">beautifully in fact that it drives men</span> <span data-start="1423.85" data-end="1425.23">to the point of madness</span> <span data-start="1425.23" data-end="1427.72">especially sailors sailors are kind of</span> <span data-start="1427.72" data-end="1429.34">crazy anyway but with sirens they're</span> <span data-start="1429.34" data-end="1431.68">even more crazy and because of that they</span> <span data-start="1431.68" data-end="1433.51">just want to be mere near the music they</span> <span data-start="1433.51" data-end="1435.37">want to hear more music and they just</span> <span data-start="1435.37" data-end="1437.14">throw themselves overboard in order to</span> <span data-start="1437.14" data-end="1439.33">get closer to the music to hear more of</span> <span data-start="1439.33" data-end="1441.37">it throwing yourself overboard is not a</span> <span data-start="1441.37" data-end="1443.32">great way to steer a ship so Apes</span> <span data-start="1443.32" data-end="1445.12">usually then crash into the island where</span> <span data-start="1445.12" data-end="1446.83">the sirens live and I guess I don't know</span> <span data-start="1446.83" data-end="1451.62">they eat people who knows Odysseus is in</span> <span data-start="1451.62" data-end="1456.54">ego maniac and he is amazingly hubristic</span> <span data-start="1456.54" data-end="1459.43">because of this he wants to be the only</span> <span data-start="1459.43" data-end="1461.71">living person to have heard the song of</span> <span data-start="1461.71" data-end="1463.389">the sirens and survived he wants to</span> <span data-start="1463.389" data-end="1465.07">here this beautiful music but he doesn't</span> <span data-start="1465.07" data-end="1466.299">want to throw himself overboard that's</span> <span data-start="1466.299" data-end="1470.049">counterproductive in a deep way so what</span> <span data-start="1470.049" data-end="1472.779">does he do he tells his men to tie him</span> <span data-start="1472.779" data-end="1474.759">to the mast it ties hands behind his</span> <span data-start="1474.759" data-end="1477.429">back they bind his legs tightly which</span> <span data-start="1477.429" data-end="1478.749">means he can't get away can't do</span> <span data-start="1478.749" data-end="1481.299">anything then he instruct his men to put</span> <span data-start="1481.299" data-end="1483.129">beeswax in their ears and so you know</span> <span data-start="1483.129" data-end="1484.659">wrap things around their head is kind of</span> <span data-start="1484.659" data-end="1487.45">earphones or earplugs of some sort then</span> <span data-start="1487.45" data-end="1489.759">he tells his men okay row past the</span> <span data-start="1489.759" data-end="1491.619">island where they where the sirens are</span> <span data-start="1491.619" data-end="1493.599">don't go to the islands just you know</span> <span data-start="1493.599" data-end="1496.269">keep rowing ignore anything you see and</span> <span data-start="1496.269" data-end="1497.919">just you know get me past this island</span> <span data-start="1497.919" data-end="1500.259">the sirens come they sing their</span> <span data-start="1500.259" data-end="1502.57">beautiful songs Odysseus is driven to</span> <span data-start="1502.57" data-end="1505.149">the brink of madness but he doesn't</span> <span data-start="1505.149" data-end="1507.639">throw himself overboard he can't he's</span> <span data-start="1507.639" data-end="1510.219">bound from doing so and his men they</span> <span data-start="1510.219" data-end="1511.629">don't care about the sirens because they</span> <span data-start="1511.629" data-end="1513.009">have got stuff in their ears they're you</span> <span data-start="1513.009" data-end="1514.419">know humming to themselves who knows</span> <span data-start="1514.419" data-end="1516.489">they row him past the island he's able</span> <span data-start="1516.489" data-end="1518.139">to listen to this beautiful music but</span> <span data-start="1518.139" data-end="1519.729">he's able to survive while doing so</span> <span data-start="1519.729" data-end="1521.919">because he's given his men explicit</span> <span data-start="1521.919" data-end="1523.989">instructions and then he's prevented</span> <span data-start="1523.989" data-end="1525.879">them from doing things counter the to</span> <span data-start="1525.879" data-end="1527.799">these instructions it'd be really nice</span> <span data-start="1527.799" data-end="1529.089">if we had a mechanism to tell the</span> <span data-start="1529.089" data-end="1531.609">browser to only load the things that we</span> <span data-start="1531.609" data-end="1533.529">want it to load to only load our style</span> <span data-start="1533.529" data-end="1536.379">and not style from somewhere else we can</span> <span data-start="1536.379" data-end="1538.45">do this can do this with something</span> <span data-start="1538.45" data-end="1541.809">called content security policy condon</span> <span data-start="1541.809" data-end="1544.269">security policy is a whitelisting</span> <span data-start="1544.269" data-end="1547.059">mechanism that allows us to say script</span> <span data-start="1547.059" data-end="1549.159">from the source style from the source</span> <span data-start="1549.159" data-end="1551.829">but from no other sources please I want</span> <span data-start="1551.829" data-end="1553.989">only the things that I specifically have</span> <span data-start="1553.989" data-end="1556.299">told you that I trust here's some</span> <span data-start="1556.299" data-end="1558.94">information about my trust now execute</span> <span data-start="1558.94" data-end="1561.609">that within the context of a page I edit</span> <span data-start="1561.609" data-end="1563.919">the spec along with Adam Barth from</span> </p>
<p><span data-start="1563.919" data-end="1565.539">Google and Dan Bennett's from Mozilla</span> <span data-start="1565.539" data-end="1567.789">they are both very smart they tell me</span> <span data-start="1567.789" data-end="1569.919">what to type and I type it it works out</span> <span data-start="1569.919" data-end="1573.249">it's a beautiful relationship this is</span> <span data-start="1573.249" data-end="1575.529">the content security policy for a really</span> <span data-start="1575.529" data-end="1577.929">high value site my quest org you may</span> <span data-start="1577.929" data-end="1579.989">have heard of it it's really amazing</span> <span data-start="1579.989" data-end="1582.19">content security policy is best</span> <span data-start="1582.19" data-end="1584.769">delivered as an HTTP header the name of</span> <span data-start="1584.769" data-end="1586.45">the header is content — security -</span> <span data-start="1586.45" data-end="1588.389">policy and then you see a lot of</span> <span data-start="1588.389" data-end="1591.219">semicolon delimited directives each of</span> <span data-start="1591.219" data-end="1593.529">these directives controls a certain type</span> <span data-start="1593.529" data-end="1596.169">of content on a page we start by setting</span> <span data-start="1596.169" data-end="1597.25">a default source of</span> <span data-start="1597.25" data-end="1599.14">so we say no content should load just</span> <span data-start="1599.14" data-end="1601.09">don't load anything and then we slowly</span> <span data-start="1601.09" data-end="1602.83">open that up we say okay you can load</span> <span data-start="1602.83" data-end="1604.9">style from here you can load frames from</span> <span data-start="1604.9" data-end="1607.179">here you can load script from here this</span> <span data-start="1607.179" data-end="1609.429">gives you the very granular ability to</span> <span data-start="1609.429" data-end="1612.159">say origin one is something that I trust</span> <span data-start="1612.159" data-end="1613.659">that's my content delivery network</span> <span data-start="1613.659" data-end="1616.36">please load script from there if however</span> <span data-start="1616.36" data-end="1618.789">you see script from somewhere else don't</span> <span data-start="1618.789" data-end="1620.919">load it in fact through some sort of</span> <span data-start="1620.919" data-end="1624.429">interesting error like this refuse to</span> <span data-start="1624.429" data-end="1625.96">execute inline script because it</span> <span data-start="1625.96" data-end="1627.309">violates the following content security</span> <span data-start="1627.309" data-end="1629.89">directive those are excellent errors to</span> <span data-start="1629.89" data-end="1633.73">see this is a more or less exhaustive</span> <span data-start="1633.73" data-end="1635.409">list of the directives that exist in</span> <span data-start="1635.409" data-end="1638.289">content security policy 1.0 content</span> <span data-start="1638.289" data-end="1640.39">security policy 1.0 is available now in</span> </p>
<p><span data-start="1640.39" data-end="1642.37">Chrome as an unprefixed header it's</span> <span data-start="1642.37" data-end="1644.409">available now in Firefox also is an</span> <span data-start="1644.409" data-end="1646.87">unprefixed header I expect it will be</span> <span data-start="1646.87" data-end="1648.61">available in Safari 7 as an unprefixed</span> <span data-start="1648.61" data-end="1650.23">header because I landed that before we</span> <span data-start="1650.23" data-end="1653.44">forked and what's really interesting</span> <span data-start="1653.44" data-end="1656.22">here is the last directive report URI</span> <span data-start="1656.22" data-end="1658.809">report URI gives you a mechanism of</span> <span data-start="1658.809" data-end="1661.03">actually seeing attacks that are going</span> <span data-start="1661.03" data-end="1663.37">on so instead of just showing it to the</span> <span data-start="1663.37" data-end="1665.559">developer right at their workstation you</span> <span data-start="1665.559" data-end="1667.48">can actually post a message to your</span> <span data-start="1667.48" data-end="1669.7">server saying hey I tried to load some</span> <span data-start="1669.7" data-end="1672.13">information I failed miserably perhaps</span> <span data-start="1672.13" data-end="1673.299">you should look at that perhaps you</span> <span data-start="1673.299" data-end="1674.919">should take a look at this area and see</span> <span data-start="1674.919" data-end="1676.12">if maybe there's an injection that</span> <span data-start="1676.12" data-end="1678.64">you've missed this is what the report</span> <span data-start="1678.64" data-end="1680.44">looks like it gives you some context if</span> <span data-start="1680.44" data-end="1681.909">it comes from JavaScript we'll do our</span> <span data-start="1681.909" data-end="1683.44">best to give you like a line number and</span> <span data-start="1683.44" data-end="1687.28">a column inline script this is the last</span> <span data-start="1687.28" data-end="1688.809">thing I'll talk about inline script is</span> <span data-start="1688.809" data-end="1692.5">the biggest problem on the web in this</span> <span data-start="1692.5" data-end="1694.09">case I would say inline style is the</span> <span data-start="1694.09" data-end="1697.15">biggest problem on the web what do we do</span> <span data-start="1697.15" data-end="1698.98">with that it doesn't really come from an</span> <span data-start="1698.98" data-end="1700.87">origin right it's embedded directly in</span> <span data-start="1700.87" data-end="1703.659">the page what I would suggest is that</span> <span data-start="1703.659" data-end="1705.909">you externalize this information you put</span> <span data-start="1705.909" data-end="1707.71">it into an external javascript file you</span> <span data-start="1707.71" data-end="1709.27">do some Dom manipulation in order to set</span> <span data-start="1709.27" data-end="1710.799">up your event handlers or in the case of</span> </p>
<p><span data-start="1710.799" data-end="1712.87">CSS you simply load the style from</span> <span data-start="1712.87" data-end="1714.7">somewhere else then it has an explicit</span> <span data-start="1714.7" data-end="1717.64">origin we're able to vary in a granular</span> <span data-start="1717.64" data-end="1719.77">way determine whether or not we should</span> <span data-start="1719.77" data-end="1721.69">load it and the browser can do something</span> <span data-start="1721.69" data-end="1722.7">interesting based on that information</span> <span data-start="1722.7" data-end="1724.99">this is the only thing I want you to</span> <span data-start="1724.99" data-end="1726.85">remember from the talk this is the most</span> <span data-start="1726.85" data-end="1728.28">important thing I will show you today</span> <span data-start="1728.28" data-end="1730.96">it's an article written by an amazingly</span> <span data-start="1730.96" data-end="1733.24">some man and this article will give you</span> <span data-start="1733.24" data-end="1735.25">all the practical detail that you need</span> <span data-start="1735.25" data-end="1737.35">in order to take content security policy</span> <span data-start="1737.35" data-end="1739.24">and start actually applying it to your</span> <span data-start="1739.24" data-end="1740.919">pages it'll give you all the details</span> <span data-start="1740.919" data-end="1742.51">about all the stuff that's in one point</span> <span data-start="1742.51" data-end="1744.13">oh I need to update it from one point</span> <span data-start="1744.13" data-end="1746.2">one that hasn't quite happened yet one</span> <span data-start="1746.2" data-end="1747.779">point one is still kind of in</span> <span data-start="1747.779" data-end="1749.59">specification so there's a lot of new</span> <span data-start="1749.59" data-end="1750.669">stuff there's a lot of really</span> <span data-start="1750.669" data-end="1752.74">interesting stuff please at least</span> <span data-start="1752.74" data-end="1754.33">bookmark this article and tell somebody</span> <span data-start="1754.33" data-end="1755.59">else about it even if you don't read it</span> <span data-start="1755.59" data-end="1757.69">yourself I would really like to hear</span> <span data-start="1757.69" data-end="1760.659">from you guys what sorts of things you</span> <span data-start="1760.659" data-end="1762.46">see applications for with regard to</span> <span data-start="1762.46" data-end="1764.11">common security policy and any problems</span> <span data-start="1764.11" data-end="1765.82">that you see actually implementing on</span> <span data-start="1765.82" data-end="1768.52">your sites and with that I would say</span> <span data-start="1768.52" data-end="1784.649">thank you</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
