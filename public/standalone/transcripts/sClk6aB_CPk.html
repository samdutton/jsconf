<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>sClk6aB_CPk</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/sClk6aB_CPk?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="12.769" data-end="16.44">let me know if you can't hear me so I'm</span> <span data-start="16.44" data-end="18.96">going to talk about some work that we're</span> <span data-start="18.96" data-end="22.35">doing in the atma task force that was</span> <span data-start="22.35" data-end="23.93">just mentioned in the previous speech</span> <span data-start="23.93" data-end="26.4">it's actually called technical committee</span> <span data-start="26.4" data-end="30.779">39 and I think we've got a good group</span> <span data-start="30.779" data-end="32.219">that's now working harmoniously together</span> <span data-start="32.219" data-end="33.96">so I wanted to talk about one of the</span> <span data-start="33.96" data-end="35.34">best things that I've seen coming out of</span> <span data-start="35.34" data-end="35.7">it</span> <span data-start="35.7" data-end="37.41">which is already implemented in Firefox</span> <span data-start="37.41" data-end="42.22">and that's this notion of proxies but</span> </p>
<p><span data-start="42.23" data-end="45.62">I'm stung because the a query crew</span> <span data-start="45.62" data-end="47.489">implied that I was just playing some</span> <span data-start="47.489" data-end="49.62">YouTube videos and goofing around my</span> <span data-start="49.62" data-end="51.36">last chance conf so I'm not going to</span> <span data-start="51.36" data-end="52.559">play any videos this is getting very</span> <span data-start="52.559" data-end="55.5">technical they'll be a lot of code we're</span> <span data-start="55.5" data-end="58.079">also up against beer I'm in the Alex</span> <span data-start="58.079" data-end="60.75">Russell slot so I won't I won't keep it</span> <span data-start="60.75" data-end="62.039">too long but I will give you a test</span> <span data-start="62.039" data-end="65.28">afterwards liquor is weird I showed</span> <span data-start="65.28" data-end="66.869">people at work this episode where they</span> <span data-start="66.869" data-end="69.15">had like the Quadra box with the four</span> <span data-start="69.15" data-end="70.56">talking heads and then this heart-shaped</span> <span data-start="70.56" data-end="72.75">window in the middle with John Resig in</span> <span data-start="72.75" data-end="76.65">it and and you know unicorns or</span> <span data-start="76.65" data-end="78.42">something and it was people were very</span> <span data-start="78.42" data-end="79.5">confused by it they don't really</span> <span data-start="79.5" data-end="82.95">understand our community I'm trying to</span> <span data-start="82.95" data-end="84.799">explain it to them</span> <span data-start="84.799" data-end="87.54">html5 is like the flying unicorn that</span> <span data-start="87.54" data-end="91.159">craps skittles out of its rear end</span> <span data-start="91.159" data-end="93.06">javascript doesn't meet that kind of</span> <span data-start="93.06" data-end="94.59">stuff we're awesome</span> <span data-start="94.59" data-end="97.77">without the unicorn so about res it's</span> <span data-start="97.77" data-end="102.979">cool so thank you so let me talk about</span> <span data-start="102.979" data-end="106.079">voluntary talk about this is based on</span> <span data-start="106.079" data-end="108.299">work by Mark Miller of Google and Tom</span> <span data-start="108.299" data-end="110.84">van could some of the Free University of</span> </p>
<p><span data-start="110.84" data-end="115.229">Belgium and it's it's got a long history</span> <span data-start="115.229" data-end="118.53">in the research community that is pretty</span> <span data-start="118.53" data-end="120.27">cool I'll talk about that too so to</span> <span data-start="120.27" data-end="123.18">review we have managed to produce</span> <span data-start="123.18" data-end="124.799">something called the fifth edition of</span> <span data-start="124.799" data-end="127.92">ECMO script and it's called es5 for</span> <span data-start="127.92" data-end="129.479">short because no one wants to really say</span> <span data-start="129.479" data-end="131.76">Eckman</span> <span data-start="131.76" data-end="133.769">and it has things in it that have been</span> <span data-start="133.769" data-end="135.51">in some browsers for a long time like</span> <span data-start="135.51" data-end="137.7">the array map and for each and other</span> <span data-start="137.7" data-end="141.269">methods it has JSON based on Dougs JSON</span> <span data-start="141.269" data-end="145.019">- it has strict mode which we hope will</span> <span data-start="145.019" data-end="148.769">be an Internet Explorer 9 it has this</span> <span data-start="148.769" data-end="152.069">metaprogramming API for defining getters</span> <span data-start="152.069" data-end="153.48">and setters again there was some prior</span> <span data-start="153.48" data-end="155.819">art there that when in Mozilla like 11</span> <span data-start="155.819" data-end="158.03">years ago and got into other browsers</span> <span data-start="158.03" data-end="160.349">actually founded other browsers really</span> <span data-start="160.349" data-end="162.06">fast what happened was that that I</span> <span data-start="162.06" data-end="164.48">believe the first version of Live Maps</span> <span data-start="164.48" data-end="167.28">launched in I think it was 2005 and it</span> <span data-start="167.28" data-end="169.17">was based on Atlas which was like</span> </p>
<p><span data-start="169.17" data-end="170.73">Microsoft's answer to Ajax which was</span> <span data-start="170.73" data-end="172.65">kind of cool was just an 8x library the</span> <span data-start="172.65" data-end="174.66">way it worked though was that it assumed</span> <span data-start="174.66" data-end="178.26">that browser was IE and if it couldn't</span> <span data-start="178.26" data-end="180.15">detect document dot all or something</span> <span data-start="180.15" data-end="181.47">like that it would then say oh I'm going</span> <span data-start="181.47" data-end="183.629">to assume it's Firefox if it's Firefox I</span> <span data-start="183.629" data-end="185.579">can use you know double underscore</span> <span data-start="185.579" data-end="187.829">define getter double underscore defined</span> <span data-start="187.829" data-end="189.989">setter and sure enough it did that and</span> <span data-start="189.989" data-end="192.54">so live Maps works great in IE and work</span> <span data-start="192.54" data-end="194.04">great in firefox didn't work in Safari</span> <span data-start="194.04" data-end="196.47">or opera and I happen to know some from</span> <span data-start="196.47" data-end="198.18">some prints those companies that within</span> <span data-start="198.18" data-end="200.19">a week there was a fire drill you know</span> </p>
<p><span data-start="200.19" data-end="203.91">Steve Jobs was using certain words and</span> <span data-start="203.91" data-end="206.7">and people added define get a defined</span> <span data-start="206.7" data-end="208.29">setter and lookup getter look up said</span> <span data-start="208.29" data-end="211.349">her to JavaScript core in the WebKit</span> <span data-start="211.349" data-end="213.45">they added it to operas engine at the</span> <span data-start="213.45" data-end="215.73">time futhark because they needed to make</span> <span data-start="215.73" data-end="217.56">live maps work and that's how you get</span> <span data-start="217.56" data-end="219.69">rapid evolution on the web I I don't</span> <span data-start="219.69" data-end="221.76">like being the number two browser having</span> <span data-start="221.76" data-end="223.53">to force them to do it and then some of</span> <span data-start="223.53" data-end="224.849">my Apple friends are sensitive to this</span> <span data-start="224.849" data-end="226.95">because they don't like being forced to</span> <span data-start="226.95" data-end="229.2">do it but on the other hand you know I</span> <span data-start="229.2" data-end="230.79">he forced us all to do stuff so it was</span> <span data-start="230.79" data-end="231.38">good</span> </p>
<p><span data-start="231.38" data-end="234.54">WebKit has like less market share than</span> <span data-start="234.54" data-end="235.799">Missoula and they forced us to do stuff</span> <span data-start="235.799" data-end="238.169">and it's good so if it's good let's do</span> <span data-start="238.169" data-end="240">it I don't mind having to do it in a</span> <span data-start="240" data-end="241.47">hurry though I have said I didn't have</span> <span data-start="241.47" data-end="243.87">to do anything on a weeks notice to make</span> <span data-start="243.87" data-end="245.519">live Maps work so maybe I would feel</span> <span data-start="245.519" data-end="247.68">differently if I did but the define</span> <span data-start="247.68" data-end="249.269">getter and setter stuff was all about</span> <span data-start="249.269" data-end="252.419">making properties that had code behind</span> <span data-start="252.419" data-end="254.19">them so you could run a function when</span> <span data-start="254.19" data-end="255.66">somebody gets a property you can run in</span> <span data-start="255.66" data-end="256.739">their function when somebody sets the</span> <span data-start="256.739" data-end="258.75">value of the property and that got</span> <span data-start="258.75" data-end="260.849">cleaned up and rationalized and sort of</span> <span data-start="260.849" data-end="263.43">synthesized into the metaprogramming API</span> <span data-start="263.43" data-end="264.41">and es5</span> <span data-start="264.41" data-end="266.72">five and you could think it is like</span> <span data-start="266.72" data-end="268.61">java.lang reflect only javascript line</span> <span data-start="268.61" data-end="272.06">reflect and less painful to use it also</span> <span data-start="272.06" data-end="274.28">lets you control whether a foreign loop</span> <span data-start="274.28" data-end="276.77">will see the properties you define it</span> <span data-start="276.77" data-end="278.33">lets you walk down properties against</span> <span data-start="278.33" data-end="280.45">mutation and objects against extension</span> <span data-start="280.45" data-end="284.84">and people worry that that's too you</span> <span data-start="284.84" data-end="287.06">know alien to javascript it's certainly</span> <span data-start="287.06" data-end="288.62">not the way javascript was when I</span> <span data-start="288.62" data-end="290.03">created it I made it so you could monkey</span> </p>
<p><span data-start="290.03" data-end="291.05">Padgett because I knew it needed</span> <span data-start="291.05" data-end="292.99">patching I was doing such a rush job I</span> <span data-start="292.99" data-end="295.34">made almost everything mutable I think</span> <span data-start="295.34" data-end="297.8">only the the built-in constructors</span> <span data-start="297.8" data-end="299.48">prototype properties could not be</span> <span data-start="299.48" data-end="300.74">overwritten but everything else</span> <span data-start="300.74" data-end="302.3">including those global bindings for</span> <span data-start="302.3" data-end="304.01">object and array could be replaced and</span> <span data-start="304.01" data-end="306.65">that was intentional that was because it</span> <span data-start="306.65" data-end="309.38">needed the ability to be upgraded by</span> <span data-start="309.38" data-end="311.54">library authors such as yourselves but</span> <span data-start="311.54" data-end="312.92">now we're in a different world one I</span> <span data-start="312.92" data-end="314.93">think that having control over mutation</span> <span data-start="314.93" data-end="317.24">extension configurability is important</span> <span data-start="317.24" data-end="320.87">and we've got that in es5 so this is</span> <span data-start="320.87" data-end="322.79">actually in a Firefox 4 it's coming</span> <span data-start="322.79" data-end="325.67">along in the WebKit nightlies and it's</span> <span data-start="325.67" data-end="328.91">in an IE not into large extent so we</span> <span data-start="328.91" data-end="330.53">should just try to keep going and get it</span> <span data-start="330.53" data-end="331.54">all done</span> <span data-start="331.54" data-end="335.27">here's a quick slide on what the</span> <span data-start="335.27" data-end="337.49">metaprogramming API looks like it has</span> <span data-start="337.49" data-end="339.98">some methods on object because it's not</span> <span data-start="339.98" data-end="341.48">really possible to extend object up</span> <span data-start="341.48" data-end="344.18">prototype yet so you get these methods</span> <span data-start="344.18" data-end="347">with sometimes long names stylized names</span> <span data-start="347" data-end="349.46">like get own property descriptor you can</span> <span data-start="349.46" data-end="351.08">see that if you have a point and it has</span> <span data-start="351.08" data-end="355.85">a getter for R the radius you could</span> <span data-start="355.85" data-end="357.86">actually query for it at the bottom when</span> <span data-start="357.86" data-end="360.08">you get on property descriptor point R</span> <span data-start="360.08" data-end="362.24">in quotes you get back a descriptor that</span> <span data-start="362.24" data-end="364.97">says this thing's got again and said the</span> <span data-start="364.97" data-end="366.2">set happens to be  there's no</span> <span data-start="366.2" data-end="371.62">setter so it's really constant and by</span> <span data-start="371.62" data-end="375.14">the convention that it was defined in</span> <span data-start="375.14" data-end="377.419">the object initializer using that get R</span> <span data-start="377.419" data-end="379.85">open paren close paren syntax its</span> <span data-start="379.85" data-end="381.59">innumerable you'll see in the foreign</span> <span data-start="381.59" data-end="383.27">loop it's configurable you can you can</span> <span data-start="383.27" data-end="384.65">mess whether you can delete it mainly</span> <span data-start="384.65" data-end="388">you can replace it and that's just how</span> <span data-start="388" data-end="390.2">properties defined by object</span> <span data-start="390.2" data-end="394.13">initializers happen to work but you</span> <span data-start="394.13" data-end="395.39">could you could do more you could say</span> </p>
<p><span data-start="395.39" data-end="397.639">I'll get that define property</span> <span data-start="397.639" data-end="401.599">try to create a Z that is enumerable but</span> <span data-start="401.599" data-end="403.58">defaults that's what the grayed out part</span> <span data-start="403.58" data-end="405.8">implies — not writable and not</span> <span data-start="405.8" data-end="410.33">configurable and in that case that Z</span> <span data-start="410.33" data-end="412.629">cannot be deleted and it cannot be</span> <span data-start="412.629" data-end="414.65">rewritten to have a different value than</span> <span data-start="414.65" data-end="417.68">zero it cannot be replaced by a getter</span> <span data-start="417.68" data-end="420.349">and when you query for it you'll you'll</span> <span data-start="420.349" data-end="423.439">find out that's that's the case you'll</span> <span data-start="423.439" data-end="424.669">get back different descriptors and</span> <span data-start="424.669" data-end="427.069">here's an example at the bottom showing</span> <span data-start="427.069" data-end="429.8">another api object.create where you can</span> <span data-start="429.8" data-end="431.87">specify the prototype for the new object</span> <span data-start="431.87" data-end="433.52">you're creating as well as what's called</span> <span data-start="433.52" data-end="436.129">a property descriptor map which looks</span> <span data-start="436.129" data-end="438.349">like an object initializer whose keys</span> <span data-start="438.349" data-end="440.09">are the names of the properties and the</span> <span data-start="440.09" data-end="442.189">values are the individual descriptors</span> <span data-start="442.189" data-end="445.009">that include things like value or get</span> <span data-start="445.009" data-end="448.009">set and the boolean enumerable</span> <span data-start="448.009" data-end="450.83">configurable writable etc instead of a</span> <span data-start="450.83" data-end="453.349">big API it's got a lot of optional</span> <span data-start="453.349" data-end="454.969">parameters so it made sense to use</span> <span data-start="454.969" data-end="457.25">objects as arguments and let you write</span> <span data-start="457.25" data-end="459.56">object initializers and you can read all</span> <span data-start="459.56" data-end="462.379">about it in the spec or in documentation</span> <span data-start="462.379" data-end="463.759">that's kind of online that the mozilla</span> <span data-start="463.759" data-end="464.9">developer center in other places that</span> <span data-start="464.9" data-end="466.58">try to make it easier to read the net</span> <span data-start="466.58" data-end="470.8">respects but it's it's very powerful and</span> <span data-start="470.8" data-end="474.37">when you create such an object you get</span> <span data-start="474.37" data-end="476.99">this property descriptor map telling you</span> <span data-start="476.99" data-end="479">how how these properties should be bound</span> <span data-start="479" data-end="483.229">and object create does that if you want</span> <span data-start="483.229" data-end="485.659">to make an object that can't be messed</span> <span data-start="485.659" data-end="488.419">with there's a trio of methods on object</span> <span data-start="488.419" data-end="490.639">that are progressively more restrictive</span> <span data-start="490.639" data-end="493.46">prevent extensions object but prevent</span> <span data-start="493.46" data-end="496.339">extensions says the argument object</span> <span data-start="496.339" data-end="499.759">after that successfully returns cannot</span> <span data-start="499.759" data-end="502.25">be extended with new properties you can</span> <span data-start="502.25" data-end="504.65">still delete old properties if there are</span> <span data-start="504.65" data-end="506.06">writable properties in that point you</span> <span data-start="506.06" data-end="508.879">can reassign them reconfigure them if</span> <span data-start="508.879" data-end="510.439">they're configurable but you cannot add</span> <span data-start="510.439" data-end="512.81">new properties if you then go further or</span> <span data-start="512.81" data-end="514.49">instead of calling for an extensions</span> <span data-start="514.49" data-end="516.89">call object seal you get the effect not</span> <span data-start="516.89" data-end="519.56">only it prevent extensions but you get</span> <span data-start="519.56" data-end="522.5">all the existing properties made non</span> <span data-start="522.5" data-end="524.18">configurable so that they can't be</span> <span data-start="524.18" data-end="526.55">deleted or replaced with getters things</span> <span data-start="526.55" data-end="529.22">like that finally if you use object of</span> <span data-start="529.22" data-end="530.96">freeze that's the real power</span> <span data-start="530.96" data-end="533.87">tool that does effectively free</span> <span data-start="533.87" data-end="534.59">extensions</span> <span data-start="534.59" data-end="536.75">seal and then it goes through and it</span> <span data-start="536.75" data-end="540.17">makes every property non writable and so</span> <span data-start="540.17" data-end="543.46">these are the the sort of ways of</span> <span data-start="543.46" data-end="545.93">increasing the integrity of your objects</span> <span data-start="545.93" data-end="548.81">so that you can be sure no one's mess</span> <span data-start="548.81" data-end="550.55">them up even your own code accidentally</span> <span data-start="550.55" data-end="553.07">sometimes this is useful people argue</span> <span data-start="553.07" data-end="554.63">this is good for security and it is it's</span> <span data-start="554.63" data-end="557.21">not a silver bullet on the other hand</span> <span data-start="557.21" data-end="558.68">you might use this just for your own you</span> <span data-start="558.68" data-end="560.99">know programming sanity and there are</span> <span data-start="560.99" data-end="562.28">certain objects that should be constant</span> <span data-start="562.28" data-end="563.66">there's certain things in the language</span> <span data-start="563.66" data-end="565.01">it should be constant you can use these</span> <span data-start="565.01" data-end="568.61">these api's to do that so now I'm going</span> <span data-start="568.61" data-end="570.92">to turn to proxies and why we're adding</span> <span data-start="570.92" data-end="572.81">more metaprogramming you know why do you</span> <span data-start="572.81" data-end="575.18">need more meta it's possible to really</span> <span data-start="575.18" data-end="576.95">go crazy with meta programming and a lot</span> <span data-start="576.95" data-end="579.92">of language research has the api's that</span> <span data-start="579.92" data-end="583.15">are in the 5th edition only goes so far</span> <span data-start="583.15" data-end="585.62">we still have some things out there in</span> <span data-start="585.62" data-end="587.39">the field like spider monkeys no such</span> <span data-start="587.39" data-end="590.33">method handler which is like small talks</span> <span data-start="590.33" data-end="592.25">does not understand and there's a little</span> <span data-start="592.25" data-end="593.54">example it shows if you make an object</span> <span data-start="593.54" data-end="595.73">with no such method in spider monkey if</span> <span data-start="595.73" data-end="597.56">the value of that double underbar no</span> <span data-start="597.56" data-end="599.54">such method double any of our property</span> <span data-start="599.54" data-end="602.27">is a function taking the identifier of</span> <span data-start="602.27" data-end="605.15">the method and the arguments to it you</span> <span data-start="605.15" data-end="607.13">can see that calling some non-existent</span> <span data-start="607.13" data-end="609.02">method will actually trap to that</span> <span data-start="609.02" data-end="611.9">function and it will sure enough print</span> <span data-start="611.9" data-end="613.37">the identifier and the arguments as an</span> <span data-start="613.37" data-end="615.83">array people like this this is something</span> <span data-start="615.83" data-end="617.93">that the Beck guys use in their sort of</span> <span data-start="617.93" data-end="621.08">small talk on JavaScript Ajax library VM</span> <span data-start="621.08" data-end="624.26">thing it's it's one of the sort of</span> <span data-start="624.26" data-end="626.36">inputs to the standards process where we</span> <span data-start="626.36" data-end="628.88">see there's an extension we added its</span> <span data-start="628.88" data-end="631.28">fills a need and something needs to be</span> <span data-start="631.28" data-end="633.02">standardized now you can be sure with</span> <span data-start="633.02" data-end="634.43">double-under VARs on the name it's never</span> <span data-start="634.43" data-end="635.27">going to get through the Standards</span> </p>
<p><span data-start="635.27" data-end="637.43">Committee but this was informative to</span> <span data-start="637.43" data-end="639.29">the proxies work that Mark and Tom did</span> <span data-start="639.29" data-end="642.14">and there are good reasons that you want</span> <span data-start="642.14" data-end="644.06">to do this you want to make virtual</span> <span data-start="644.06" data-end="646.34">objects objects that aren't really there</span> <span data-start="646.34" data-end="648.5">that they front for some database or</span> <span data-start="648.5" data-end="650.18">some object that's in a persistent store</span> <span data-start="650.18" data-end="653.42">or on another machine and you ideally</span> <span data-start="653.42" data-end="655.1">want to get rid over tame this this</span> <span data-start="655.1" data-end="656.72">weird corner of the atma spec called</span> <span data-start="656.72" data-end="658.31">host objects which I was there when this</span> <span data-start="658.31" data-end="660.26">was written this was written mainly</span> <span data-start="660.26" data-end="661.779">because the I Dom</span> <span data-start="661.779" data-end="663.79">to some extent every browser store has</span> <span data-start="663.79" data-end="665.56">these objects they're implemented in C++</span> <span data-start="665.56" data-end="668.319">they reflect in the JavaScript but they</span> <span data-start="668.319" data-end="670.6">don't act quite like objects in</span> </p>
<p><span data-start="670.6" data-end="673.149">JavaScript have acted till now they may</span> <span data-start="673.149" data-end="675.22">have non configurable and non writable</span> <span data-start="675.22" data-end="678.629">non extensible properties they may have</span> <span data-start="678.629" data-end="681.189">weird bugs where if you you know asked</span> <span data-start="681.189" data-end="683.259">what the type of some thing like alert</span> <span data-start="683.259" data-end="686.41">is until ie 9 you get object instead of</span> <span data-start="686.41" data-end="688.899">function they may have the problem if</span> <span data-start="688.899" data-end="690.49">you touch them in the wrong way they'll</span> <span data-start="690.49" data-end="692.8">actually throw an exception at you those</span> <span data-start="692.8" data-end="694.6">are just bugs but but still host objects</span> <span data-start="694.6" data-end="697.029">have leeway in the atmosphere to do</span> <span data-start="697.029" data-end="698.379">weird-ass</span> <span data-start="698.379" data-end="701.41">and and that's bad but it's also good</span> <span data-start="701.41" data-end="703.54">that people need to extend JavaScript</span> <span data-start="703.54" data-end="705.939">not only with C++ with lots of security</span> <span data-start="705.939" data-end="708.249">issues but with JavaScript itself they</span> <span data-start="708.249" data-end="710.86">need to be able to keep extending the</span> <span data-start="710.86" data-end="712.779">language and the libraries in ways that</span> <span data-start="712.779" data-end="716.49">looks like built-in objects and that can</span> <span data-start="716.49" data-end="718.809">substitute for built-in objects that can</span> <span data-start="718.809" data-end="720.279">virtualized built-in objects and that</span> <span data-start="720.279" data-end="721.959">that becomes important as you build</span> <span data-start="721.959" data-end="724.12">libraries and as you try to manage</span> <span data-start="724.12" data-end="726.25">incompatibilities across browsers and</span> <span data-start="726.25" data-end="729.639">across browser versions so that's a</span> <span data-start="729.639" data-end="731.41">motivation for dynamic proxies and</span> <span data-start="731.41" data-end="733.99">there's some precedent for it that you</span> <span data-start="733.99" data-end="736.3">could say well maybe we don't really</span> <span data-start="736.3" data-end="738.18">need to go much further than the es5</span> <span data-start="738.18" data-end="740.709">getters and setters based on the prior</span> <span data-start="740.709" data-end="742.689">art maybe we just need to add gathers</span> <span data-start="742.689" data-end="744.879">and setters but really every getter and</span> <span data-start="744.879" data-end="747.25">setter defined using the es5 api or the</span> <span data-start="747.25" data-end="749.259">declarative syntax in object literals</span> <span data-start="749.259" data-end="752.62">like in the middle of slide has to pin</span> <span data-start="752.62" data-end="754.93">down the name of the property the access</span> <span data-start="754.93" data-end="756.459">to property the property with the getter</span> <span data-start="756.459" data-end="759.579">and setter and that's not general it's</span> <span data-start="759.579" data-end="762.37">ad-hoc and it hard codes the name you</span> <span data-start="762.37" data-end="764.709">can do it if you know exactly the names</span> <span data-start="764.709" data-end="766.899">of the properties you want to meta</span> <span data-start="766.899" data-end="768.639">program if you don't you're out of luck</span> <span data-start="768.639" data-end="774.309">and it's pretty verbose so perhaps you</span> <span data-start="774.309" data-end="775.569">could go a little further you could use</span> <span data-start="775.569" data-end="778.839">object.create and you could use another</span> <span data-start="778.839" data-end="781.779">api get own property names object get</span> <span data-start="781.779" data-end="783.069">own property names we'll take any object</span> <span data-start="783.069" data-end="785.62">and give you all the direct property</span> <span data-start="785.62" data-end="786.879">names whether their innumerable or not</span> <span data-start="786.879" data-end="788.499">in an array and then you could use nice</span> <span data-start="788.499" data-end="790.509">for each this shows all the es5</span> <span data-start="790.509" data-end="793.08">additions for each array X</span> <span data-start="793.08" data-end="796.56">passing a function so for each direct</span> <span data-start="796.56" data-end="799.17">property named own property name you can</span> <span data-start="799.17" data-end="801.209">then get the descriptor of that property</span> <span data-start="801.209" data-end="804.089">and you can wrap that property with a</span> <span data-start="804.089" data-end="805.56">getter and a setter that will do the</span> <span data-start="805.56" data-end="807.149">logging for you that way you don't the</span> <span data-start="807.149" data-end="812.65">hard-code the names that's better</span> <span data-start="812.66" data-end="816.12">but it's a one-time wrapping operation</span> <span data-start="816.12" data-end="819.329">and you won't catch new added properties</span> <span data-start="819.329" data-end="821.73">that are extended on the object after</span> <span data-start="821.73" data-end="823.649">this this make logger function has been</span> <span data-start="823.649" data-end="826.23">called you won't catch changes to</span> <span data-start="826.23" data-end="828.92">property attributes so it's not complete</span> <span data-start="828.92" data-end="831.75">so here finally is what we're working on</span> <span data-start="831.75" data-end="833.82">for the harmony version of JavaScript</span> <span data-start="833.82" data-end="837.329">it's new API instead of capital object</span> <span data-start="837.329" data-end="840.029">as the locus of create and other meta</span> <span data-start="840.029" data-end="841.16">programming methods we have a new</span> <span data-start="841.16" data-end="844.62">built-in class called proxy and it has a</span> <span data-start="844.62" data-end="850.73">create method which can take two things</span> <span data-start="850.73" data-end="853.47">the first is conventionally passed as an</span> <span data-start="853.47" data-end="855.709">object initializer it's the handler and</span> <span data-start="855.709" data-end="859.68">the second is the prototype for the the</span> <span data-start="859.68" data-end="861.48">new proxy object you can think of these</span> <span data-start="861.48" data-end="863.69">proxies as blank objects these are</span> <span data-start="863.69" data-end="868.14">objects that you give code to to answer</span> <span data-start="868.14" data-end="870.63">questions about properties to act on</span> <span data-start="870.63" data-end="873.24">changes to the object but but otherwise</span> <span data-start="873.24" data-end="875.24">the proxy itself is kind of empty and</span> <span data-start="875.24" data-end="877.91">the cool thing is the handler is is</span> <span data-start="877.91" data-end="882.779">isolated in the meta layer from the</span> <span data-start="882.779" data-end="884.79">proxy that the handler is your own</span> <span data-start="884.79" data-end="886.23">object maybe it's a shared object</span> <span data-start="886.23" data-end="887.91">initializer maybe it's some object that</span> <span data-start="887.91" data-end="889.68">you create maybe it's another proxy</span> <span data-start="889.68" data-end="890.43">which we'll get to</span> <span data-start="890.43" data-end="894.779">and there isn't necessarily a an object</span> <span data-start="894.779" data-end="896.31">backstage of it it could be a remote</span> <span data-start="896.31" data-end="897.449">object it could be just doing</span> <span data-start="897.449" data-end="900.12">computations to answer gets and sets but</span> <span data-start="900.12" data-end="902.329">this way you can handle all the possible</span> <span data-start="902.329" data-end="905.459">evolutions of of an object if you're</span> <span data-start="905.459" data-end="906.839">willing to create it as a proxy from</span> <span data-start="906.839" data-end="909.72">from birth and so make logger now</span> <span data-start="909.72" data-end="912.23">finally has managed to make a logger and</span> <span data-start="912.23" data-end="915.6">it's captured obviously the object that</span> <span data-start="915.6" data-end="918.6">it's being logged in its closure as an</span> <span data-start="918.6" data-end="920.91">argument so it does in fact have a have</span> <span data-start="920.91" data-end="922.829">an object that it's fronting for but</span> <span data-start="922.829" data-end="924.329">again that's that's incidental that's</span> <span data-start="924.329" data-end="926.12">not required</span> <span data-start="926.12" data-end="928.14">so you'll see this kind of diagram</span> <span data-start="928.14" data-end="930.12">throughout there's a base layer and</span> <span data-start="930.12" data-end="932.34">there's a metal layer metal layer is</span> <span data-start="932.34" data-end="936.06">like backstage at the play basis is what</span> <span data-start="936.06" data-end="938.16">the audience is seeing so when the</span> <span data-start="938.16" data-end="940.89">handler is there doing its thing the the</span> <span data-start="940.89" data-end="944.04">user the proxy with only a few</span> <span data-start="944.04" data-end="945.27">exceptions really can't tell that</span> <span data-start="945.27" data-end="946.77">they're not dealing with a regular</span> </p>
<p><span data-start="946.77" data-end="949.17">JavaScript object everything can be done</span> <span data-start="949.17" data-end="950.88">almost seamlessly and there's a few</span> <span data-start="950.88" data-end="952.11">important cases where that's not true</span> <span data-start="952.11" data-end="956.16">but I'll get to those and so one of the</span> <span data-start="956.16" data-end="958.01">things that this dash line divides is</span> <span data-start="958.01" data-end="959.85">correspondences between the meta layer</span> <span data-start="959.85" data-end="963.5">and the base layer so here you have a</span> <span data-start="963.5" data-end="966.06">base reference and expression property</span> <span data-start="966.06" data-end="969.18">of foo that turns into handler duck get</span> <span data-start="969.18" data-end="971.49">passing the proxy and the name foo as a</span> <span data-start="971.49" data-end="975.9">string so a base expression that assigns</span> <span data-start="975.9" data-end="978.24">hand without phooey quills 42 turns into</span> <span data-start="978.24" data-end="980.43">ham sorry proxy about foo equals 42</span> <span data-start="980.43" data-end="982.4">terms at the handler dot set proxy</span> <span data-start="982.4" data-end="988.62">string foo and 42 and calling proxy up</span> <span data-start="988.62" data-end="991.11">foo with an argument list turns into a</span> <span data-start="991.11" data-end="993.78">get essentially followed by an apply</span> <span data-start="993.78" data-end="997.44">it's kind of an internal apply and so</span> <span data-start="997.44" data-end="999.27">you can see how almost everything you</span> <span data-start="999.27" data-end="1001.94">could do to object maps from proxy to</span> </p>
<p><span data-start="1001.94" data-end="1007.31">Handler and indeed if you reference</span> <span data-start="1007.31" data-end="1011.72">proxy yet you're just getting the name</span> <span data-start="1011.72" data-end="1014.03">yet from the from the proxy if I calling</span> <span data-start="1014.03" data-end="1018.86">the handlers get method and proxies can</span> <span data-start="1018.86" data-end="1020.21">have prototypes this is important for</span> <span data-start="1020.21" data-end="1022.19">instance of for things like that</span> <span data-start="1022.19" data-end="1024.709">but it's up to the proxy to delegate to</span> <span data-start="1024.709" data-end="1027.709">its prototype there's no automatic</span> <span data-start="1027.709" data-end="1030.53">delegation done by the the JavaScript VM</span> <span data-start="1030.53" data-end="1034.209">the proxy is responsible for somehow</span> <span data-start="1034.209" data-end="1036.65">answering for all its properties both</span> <span data-start="1036.65" data-end="1038.57">the own or direct ones and any that</span> <span data-start="1038.57" data-end="1039.98">might come from its prototype or some</span> <span data-start="1039.98" data-end="1043.19">other object and the handler you know</span> <span data-start="1043.19" data-end="1044.75">can have a prototype too if you want to</span> <span data-start="1044.75" data-end="1046.85">build a corresponding tower in the meta</span> <span data-start="1046.85" data-end="1051.26">level and it's not just for property</span> <span data-start="1051.26" data-end="1054.77">accesses you can do things like in</span> <span data-start="1054.77" data-end="1056.9">expressions which turn into handler that</span> <span data-start="1056.9" data-end="1059.43">has these methods on the</span> <span data-start="1059.43" data-end="1061.53">handler we call traps by analogy of</span> <span data-start="1061.53" data-end="1064.56">operating system traps to distinguish</span> <span data-start="1064.56" data-end="1066.39">them so the jargon is that proxy has a</span> <span data-start="1066.39" data-end="1068.55">handler that's associated at creation</span> <span data-start="1068.55" data-end="1071.82">time otherwise not discoverable from the</span> <span data-start="1071.82" data-end="1075.06">proxy the handler has traps there's a</span> <span data-start="1075.06" data-end="1079.14">suite of them 13 I think if you delete</span> <span data-start="1079.14" data-end="1081.33">proxy dot foo that calls handler dot</span> <span data-start="1081.33" data-end="1084.78">delete with the name foo if you write a</span> <span data-start="1084.78" data-end="1087">foreign loop over a proxy the handlers</span> <span data-start="1087" data-end="1090.24">enumerate trap is called and it returns</span> <span data-start="1090.24" data-end="1095.66">an array of all the innumerable keys and</span> <span data-start="1095.66" data-end="1098.1">if you do metaprogramming using those</span> <span data-start="1098.1" data-end="1100.5">es5 object dot defined property all</span> <span data-start="1100.5" data-end="1102.6">those somewhat long the methods on</span> <span data-start="1102.6" data-end="1105.48">object in fact those have handler traps</span> <span data-start="1105.48" data-end="1107.58">too because it's important that you be</span> <span data-start="1107.58" data-end="1109.92">able to masquerade almost seamlessly you</span> <span data-start="1109.92" data-end="1112.23">should be able to intercede on any</span> <span data-start="1112.23" data-end="1114.36">behavior that an object can have and</span> <span data-start="1114.36" data-end="1116.84">that includes the metaprogramming API s</span> <span data-start="1116.84" data-end="1119.22">so there's a hand without defined</span> <span data-start="1119.22" data-end="1124.32">property but there's a few things that</span> <span data-start="1124.32" data-end="1125.31">we don't want to break these are</span> <span data-start="1125.31" data-end="1126.36">invariants in the language that are</span> <span data-start="1126.36" data-end="1129.44">important to preserve so triple equals</span> <span data-start="1129.44" data-end="1131.79">notice that there's a base expression</span> <span data-start="1131.79" data-end="1134.34">proxy triple equals Saabs there's no</span> <span data-start="1134.34" data-end="1135.84">handler call for that it's object</span> <span data-start="1135.84" data-end="1138.03">identity for objects that's all it is</span> <span data-start="1138.03" data-end="1140.34">you cannot intercede there with a</span> <span data-start="1140.34" data-end="1143.7">handler trap object not get prototype of</span> <span data-start="1143.7" data-end="1145.71">which is kind of like the read-only form</span> <span data-start="1145.71" data-end="1147.39">of double under our proto this other</span> <span data-start="1147.39" data-end="1150.84">extension there's no way to lie about</span> <span data-start="1150.84" data-end="1152.7">that that's the proto that was given to</span> <span data-start="1152.7" data-end="1156.36">proxy dot create and we'll get into this</span> <span data-start="1156.36" data-end="1158.22">a little more but I mentioned instance</span> <span data-start="1158.22" data-end="1162.12">of is also looking at proto and type of</span> <span data-start="1162.12" data-end="1164.16">for a proxy that's not a function proxy</span> <span data-start="1164.16" data-end="1166.5">that that's what's coming next is object</span> <span data-start="1166.5" data-end="1169.44">always object in the future we might be</span> <span data-start="1169.44" data-end="1171.18">able to do something it would be a</span> <span data-start="1171.18" data-end="1173.28">different thing from proxies themselves</span> <span data-start="1173.28" data-end="1174.63">but it would be closely related would</span> <span data-start="1174.63" data-end="1176.22">let you make value types we're looking</span> <span data-start="1176.22" data-end="1179.31">at that but it's not not harmonious yet</span> <span data-start="1179.31" data-end="1180.72">whereas proxies are and then are</span> <span data-start="1180.72" data-end="1183">implemented so the full handler API</span> <span data-start="1183" data-end="1185.07">looks like this it's it's quite a lot to</span> <span data-start="1185.07" data-end="1185.67">take in</span> </p>
<p><span data-start="1185.67" data-end="1188.13">I'll let you stare at it but you can see</span> <span data-start="1188.13" data-end="1190.07">on the left are the base level</span> <span data-start="1190.07" data-end="1192.69">expressions and on the right are the</span> <span data-start="1192.69" data-end="1195.96">meta-level handler trap calls with the</span> <span data-start="1195.96" data-end="1201.269">arguments that you expect and there's</span> <span data-start="1201.269" data-end="1204.659">there's a bunch of these that are for</span> <span data-start="1204.659" data-end="1206.7">the metaprogramming API and es5 there's</span> <span data-start="1206.7" data-end="1209.22">some of them for the old delete and the</span> <span data-start="1209.22" data-end="1211.109">es3 in operator things like that the</span> <span data-start="1211.109" data-end="1216.539">foreign loop and to break it down a</span> <span data-start="1216.539" data-end="1218.369">little further some of these traps are</span> <span data-start="1218.369" data-end="1221.34">called fundamental because if you</span> <span data-start="1221.34" data-end="1223.47">implement them the derived traps could</span> <span data-start="1223.47" data-end="1226.139">be constructed for you by the virtual</span> <span data-start="1226.139" data-end="1228.179">machine at some loss of efficiency so</span> <span data-start="1228.179" data-end="1230.309">derive traps are there to allow a</span> <span data-start="1230.309" data-end="1233.099">handler to optimize a little harder but</span> <span data-start="1233.099" data-end="1236.489">they are not required derive traps have</span> <span data-start="1236.489" data-end="1238.08">some interesting properties one of them</span> <span data-start="1238.08" data-end="1240.029">that we've just been discussing this I</span> <span data-start="1240.029" data-end="1241.97">think on its way to harmony status is</span> <span data-start="1241.97" data-end="1244.259">instead of just enumerate which gives</span> <span data-start="1244.259" data-end="1246.239">you an array of all the keys for</span> <span data-start="1246.239" data-end="1247.919">innumerable properties when someone is a</span> <span data-start="1247.919" data-end="1249.929">foreign loop on a proxy there should be</span> <span data-start="1249.929" data-end="1251.759">a way on a very large object or an</span> <span data-start="1251.759" data-end="1254.249">object that is a proxy for some</span> <span data-start="1254.249" data-end="1256.379">indefinite stream of values to iterate</span> <span data-start="1256.379" data-end="1258.72">lazily over those those values without</span> <span data-start="1258.72" data-end="1260.159">having to make an array that has you</span> <span data-start="1260.159" data-end="1262.499">know a billion elements in it and so</span> <span data-start="1262.499" data-end="1263.309">there's a separate</span> <span data-start="1263.309" data-end="1265.259">derived trap optional trap called</span> <span data-start="1265.259" data-end="1267.119">iterate it returns an iterator and this</span> <span data-start="1267.119" data-end="1269.039">is very much like the Python iteration</span> <span data-start="1269.039" data-end="1271.229">protocol it's based on the work we did</span> <span data-start="1271.229" data-end="1273.509">in json' 7 and it's cleaned up a bit and</span> <span data-start="1273.509" data-end="1275.759">it fits right into proxies it's a</span> <span data-start="1275.759" data-end="1277.769">perfect fit for dealing with the very</span> <span data-start="1277.769" data-end="1280.34">large object case or the infinite stream</span> <span data-start="1280.34" data-end="1286.769">value stream case now functions in</span> </p>
<p><span data-start="1286.769" data-end="1287.97">JavaScript are a little different from</span> <span data-start="1287.97" data-end="1292.379">objects it's all mysterious at first why</span> <span data-start="1292.379" data-end="1294.84">this is maybe it's not because you write</span> <span data-start="1294.84" data-end="1296.58">functions especially they have closures</span> <span data-start="1296.58" data-end="1299.669">things like that so there are function</span> <span data-start="1299.669" data-end="1300.869">proxies that you have to create</span> <span data-start="1300.869" data-end="1302.669">differently because they have two</span> <span data-start="1302.669" data-end="1305.999">additional traps beyond the ones that</span> <span data-start="1305.999" data-end="1307.47">are in the handler and these are passed</span> <span data-start="1307.47" data-end="1309.659">as separate arguments to proxy to create</span> <span data-start="1309.659" data-end="1311.609">function and these are the call and</span> <span data-start="1311.609" data-end="1314.009">construct traps and construct is</span> <span data-start="1314.009" data-end="1315.239">optional if you don't provide it then</span> <span data-start="1315.239" data-end="1318.21">the usual way that operator new works on</span> <span data-start="1318.21" data-end="1320.34">a function is is used with the call trap</span> <span data-start="1320.34" data-end="1325.019">so a function proxy has call ability</span> <span data-start="1325.019" data-end="1326.509">there's fun props</span> <span data-start="1326.509" data-end="1329.299">three and that turns into the call trap</span> <span data-start="1329.299" data-end="1330.709">passed as an argument to proxy attack</span> <span data-start="1330.709" data-end="1332.329">rate function being invoked with the</span> <span data-start="1332.329" data-end="1335.959">arguments new phone proxy one to three</span> <span data-start="1335.959" data-end="1340.82">calls the construct trap and getting the</span> <span data-start="1340.82" data-end="1342.649">prototype of a function proxy you might</span> <span data-start="1342.649" data-end="1343.309">want to do that</span> <span data-start="1343.309" data-end="1345.919">we'll call handler get which is the same</span> <span data-start="1345.919" data-end="1348.529">trap you have with with object proxies</span> <span data-start="1348.529" data-end="1350.57">works for function proxies so function</span> <span data-start="1350.57" data-end="1352.159">proxies are an extension of object</span> <span data-start="1352.159" data-end="1356.899">proxies and type of doesn't lie and</span> <span data-start="1356.899" data-end="1358.94">cannot lie type of always says function</span> <span data-start="1358.94" data-end="1363.799">for a function proxy finally as you</span> <span data-start="1363.799" data-end="1365.599">expect when you when you call get</span> <span data-start="1365.599" data-end="1370.579">prototype of you get function dot</span> <span data-start="1370.579" data-end="1371.629">prototype these things look like</span> <span data-start="1371.629" data-end="1374.509">functions type of says it get prototype</span> </p>
<p><span data-start="1374.509" data-end="1376.909">F says that you can find apply and call</span> <span data-start="1376.909" data-end="1379.309">on their proto chain therefore those get</span> <span data-start="1379.309" data-end="1380.899">trapped so you could always do something</span> <span data-start="1380.899" data-end="1383.209">weird there's a little dilemma I wanted</span> <span data-start="1383.209" data-end="1385.909">to talk about that that came up when we</span> <span data-start="1385.909" data-end="1387.259">were doing no such method and that's</span> <span data-start="1387.259" data-end="1390.409">that if you don't separate traps for</span> <span data-start="1390.409" data-end="1393.429">getting a value of a property from</span> <span data-start="1393.429" data-end="1396.259">getting that value whatever it is in</span> <span data-start="1396.259" data-end="1398.779">order to invoke it as a method then you</span> <span data-start="1398.779" data-end="1401.179">end up having to create a method on</span> <span data-start="1401.179" data-end="1403.699">every call which kind of expensive so</span> <span data-start="1403.699" data-end="1405.289">you end up having to memorize or cash</span> <span data-start="1405.289" data-end="1409.129">memo eyes that that method so that you</span> <span data-start="1409.129" data-end="1411.559">don't have a million calls construct a</span> <span data-start="1411.559" data-end="1414.589">million methods and so at one point in</span> <span data-start="1414.589" data-end="1417.889">design we had this invoked trap it</span> <span data-start="1417.889" data-end="1420.109">doesn't seem necessary and it has some</span> <span data-start="1420.109" data-end="1423.739">undesirable technical properties so we</span> <span data-start="1423.739" data-end="1425.69">got rid of it it does mean that if if</span> <span data-start="1425.69" data-end="1427.129">you're worried about this issue you're</span> <span data-start="1427.129" data-end="1428.119">going to have to cash you have to</span> <span data-start="1428.119" data-end="1432.919">memorize and again it when we were doing</span> <span data-start="1432.919" data-end="1433.94">this kind of meta programming it's</span> <span data-start="1433.94" data-end="1435.259">important to hold fast to some</span> <span data-start="1435.259" data-end="1436.609">invariants like triple equals should</span> <span data-start="1436.609" data-end="1439.099">work and this invariant you know it's</span> <span data-start="1439.099" data-end="1441.289">not exactly written in my blood anywhere</span> <span data-start="1441.289" data-end="1444.259">but it is important for existing code</span> <span data-start="1444.259" data-end="1445.819">we've seen this on the web and it ought</span> <span data-start="1445.819" data-end="1447.649">to be preserved we think in the absence</span> <span data-start="1447.649" data-end="1450.289">of other evidence so we got rid of the</span> <span data-start="1450.289" data-end="1455.469">invoked trap now proxies can do</span> <span data-start="1455.469" data-end="1457.969">everything almost everything except lie</span> <span data-start="1457.969" data-end="1459.3">about type of</span> <span data-start="1459.3" data-end="1462.12">get prototype of that an object can do</span> <span data-start="1462.12" data-end="1465.6">but what's really cool is how they give</span> <span data-start="1465.6" data-end="1467.04">you the developer's power that</span> <span data-start="1467.04" data-end="1470.88">previously has only been in the domain</span> <span data-start="1470.88" data-end="1472.35">of I would say that the browser</span> <span data-start="1472.35" data-end="1474.36">implementers who write C++ not even the</span> <span data-start="1474.36" data-end="1476.55">ecla committee because we're kind of the</span> <span data-start="1476.55" data-end="1477.99">people who formalize what the browser</span> <span data-start="1477.99" data-end="1479.97">vendors do and now in this era of</span> <span data-start="1479.97" data-end="1481.38">harmony we're trying to actually work</span> <span data-start="1481.38" data-end="1483.09">together to prototype the next</span> <span data-start="1483.09" data-end="1484.47">generation that ends up being</span> <span data-start="1484.47" data-end="1486.63">implemented in C++ code but there's no</span> <span data-start="1486.63" data-end="1488.07">good reason why this should have to be</span> <span data-start="1488.07" data-end="1490.65">in C++ code you know everything from</span> <span data-start="1490.65" data-end="1492.96">java javascript everything for the 90s</span> <span data-start="1492.96" data-end="1494.7">was done in a hurry was done backwards</span> <span data-start="1494.7" data-end="1495.99">while java actually took five years i</span> <span data-start="1495.99" data-end="1496.79">don't know why they didn't do it right</span> <span data-start="1496.79" data-end="1500.12">small talk did it right small talk took</span> <span data-start="1500.12" data-end="1502.08">decade but it got to the point where</span> <span data-start="1502.08" data-end="1503.7">everything was bootstrapped on a very</span> <span data-start="1503.7" data-end="1505.8">small amount of native machine code or</span> <span data-start="1505.8" data-end="1507.93">native assembly or basic originally and</span> <span data-start="1507.93" data-end="1510.9">it was mostly mostly written in small</span> <span data-start="1510.9" data-end="1512.28">talk which is beautiful and wonderful i</span> <span data-start="1512.28" data-end="1514.76">kept things honest and preserved the</span> <span data-start="1514.76" data-end="1516.96">uniformity and meta programmability of</span> <span data-start="1516.96" data-end="1519.15">the system it got rid of weird host</span> <span data-start="1519.15" data-end="1521.82">objects exceptions and loopholes and</span> <span data-start="1521.82" data-end="1524.31">more's the pity javascript wasn't built</span> <span data-start="1524.31" data-end="1526.35">that way but there wasn't time on the</span> <span data-start="1526.35" data-end="1527.91">other hand with proxies we can kind of</span> <span data-start="1527.91" data-end="1530.13">rebuild the world incremental ii and we</span> <span data-start="1530.13" data-end="1531.9">can give you the power to do it by</span> <span data-start="1531.9" data-end="1533.94">writing handlers creating proxies and</span> <span data-start="1533.94" data-end="1538.2">doing selective interception so you know</span> <span data-start="1538.2" data-end="1540.42">it's been great fun haha not really I'm</span> <span data-start="1540.42" data-end="1542.06">being sarcastic to write a bunch of C++</span> <span data-start="1542.06" data-end="1545.07">native code that shows up as JavaScript</span> <span data-start="1545.07" data-end="1546.81">objects it's really not fun it's</span> <span data-start="1546.81" data-end="1548.22">constantly taking your life in your</span> <span data-start="1548.22" data-end="1551.01">hands with security and in memory leaks</span> <span data-start="1551.01" data-end="1552.48">and all sorts of problems every browser</span> <span data-start="1552.48" data-end="1554.76">vendor faces this there's no no one is</span> <span data-start="1554.76" data-end="1558.06">safe no one is innocent but javascript</span> <span data-start="1558.06" data-end="1560.43">has been debugged that may have noticed</span> <span data-start="1560.43" data-end="1564.27">it's got law faster putting this ability</span> <span data-start="1564.27" data-end="1565.95">to selectively intercept it do this kind</span> <span data-start="1565.95" data-end="1568.32">of stratified dynamic proxies</span> <span data-start="1568.32" data-end="1570.09">metaprogramming in the hands of</span> <span data-start="1570.09" data-end="1574.83">developers actually is not unsafe</span> <span data-start="1574.83" data-end="1576.99">compared to writing more sequel code +</span> <span data-start="1576.99" data-end="1579.72">code it's it's more safe and it again</span> <span data-start="1579.72" data-end="1581.52">will help with distributed innovation in</span> <span data-start="1581.52" data-end="1584.94">extensibility so this is what we hope to</span> <span data-start="1584.94" data-end="1587.34">do and then we we have to draw a hard</span> <span data-start="1587.34" data-end="1590.09">line between the C++ code still and the</span> </p>
<p><span data-start="1590.09" data-end="1592.679">JavaScript code</span> <span data-start="1592.679" data-end="1594.779">we want self-hosting we want to rebuild</span> <span data-start="1594.779" data-end="1596.09">the world that small talk had</span> <span data-start="1596.09" data-end="1598.11">incrementally with all your help we want</span> <span data-start="1598.11" data-end="1600.299">to get to the mostly self-hosted very</span> <span data-start="1600.299" data-end="1602.159">little native code nirvana it's going to</span> <span data-start="1602.159" data-end="1604.02">take a long time don't know if I'll make</span> <span data-start="1604.02" data-end="1605.7">it but props you seem like an important</span> <span data-start="1605.7" data-end="1607.529">ingredient otherwise I don't see how</span> <span data-start="1607.529" data-end="1610.62">we'll get there we do not want random</span> <span data-start="1610.62" data-end="1613.919">objects created for the Dom or I don't</span> <span data-start="1613.919" data-end="1615.96">know JavaScript a reg X of object to</span> <span data-start="1615.96" data-end="1617.94">suddenly start sprouting handlers that</span> <span data-start="1617.94" data-end="1619.74">can change their behavior from what</span> <span data-start="1619.74" data-end="1621.57">existing code expects what programmers</span> <span data-start="1621.57" data-end="1624.75">expect so that's why proxies have to be</span> <span data-start="1624.75" data-end="1627.24">created fresh as kind of blank objects</span> <span data-start="1627.24" data-end="1629.07">with this behavioral intercession power</span> <span data-start="1629.07" data-end="1632.1">you cannot tap a handler onto an</span> <span data-start="1632.1" data-end="1633.89">existing object and that's an important</span> <span data-start="1633.89" data-end="1637.89">design point so here's a simple example</span> <span data-start="1637.89" data-end="1640.71">of a forwarding proxy it's given an</span> <span data-start="1640.71" data-end="1644.159">object it captures it the property on</span> <span data-start="1644.159" data-end="1646.25">this so it's meant to be called via new</span> <span data-start="1646.25" data-end="1649.049">you could do with closures to not worry</span> <span data-start="1649.049" data-end="1652.62">about this or new and this handler will</span> <span data-start="1652.62" data-end="1655.049">simply forward all the fundamental traps</span> <span data-start="1655.049" data-end="1657.24">or the ones I cared to write to the</span> <span data-start="1657.24" data-end="1659.429">target object so it's just a pass</span> <span data-start="1659.429" data-end="1663.12">through and it's just a way of creating</span> <span data-start="1663.12" data-end="1665.64">a sort of a no op proxy and it's handy</span> <span data-start="1665.64" data-end="1666.919">to have these things around when you</span> <span data-start="1666.919" data-end="1669.24">need to stick a proxy somewhere that's</span> <span data-start="1669.24" data-end="1670.529">not going to do anything or you want to</span> <span data-start="1670.529" data-end="1672.929">sort of build on its bones to add some</span> <span data-start="1672.929" data-end="1678.39">logging or some something so this is</span> <span data-start="1678.39" data-end="1681.45">kind of the sort of proxies my first</span> <span data-start="1681.45" data-end="1683.909">proxy example and at the bottom you see</span> <span data-start="1683.909" data-end="1685.98">how proxy dot create is given the</span> <span data-start="1685.98" data-end="1687.99">handler which is constructed by calling</span> <span data-start="1687.99" data-end="1690.929">this this constructor and the prototype</span> <span data-start="1690.929" data-end="1694.23">of the target object so that the proxy</span> <span data-start="1694.23" data-end="1699.48">looks like it has the same prototype and</span> <span data-start="1699.48" data-end="1702.179">here's a somewhat less vacuous example</span> <span data-start="1702.179" data-end="1703.89">this one will actually count all gets</span> <span data-start="1703.89" data-end="1707.64">and it it has to be able to start from</span> <span data-start="1707.64" data-end="1711.63">an  count it so count all</span> <span data-start="1711.63" data-end="1716.94">access is actually and returned them in</span> <span data-start="1716.94" data-end="1719.01">a stats property that there's a getter</span> <span data-start="1719.01" data-end="1724.62">for the the idea of counting all gets</span> <span data-start="1724.62" data-end="1725.7">here could be</span> <span data-start="1725.7" data-end="1726.929">otherwise you could write a bunch of</span> <span data-start="1726.929" data-end="1731.789">counters one for each kind of trap that</span> <span data-start="1731.789" data-end="1733.2">might be a little tedious but you could</span> <span data-start="1733.2" data-end="1736.26">do it and you can make a simple profile</span> <span data-start="1736.26" data-end="1739.47">or just counting gets in this case could</span> <span data-start="1739.47" data-end="1740.039">be handy</span> <span data-start="1740.039" data-end="1742.289">just seeing the counts of operations</span> <span data-start="1742.289" data-end="1746.13">enzymes helps you find bugs now in es5</span> <span data-start="1746.13" data-end="1750.929">there's a way to freeze seal prevent</span> <span data-start="1750.929" data-end="1752.789">extensions these turn into something</span> <span data-start="1752.789" data-end="1757.649">called the fix trap and all three of</span> <span data-start="1757.649" data-end="1759.929">these work through the same trap there's</span> <span data-start="1759.929" data-end="1762.75">no difference because as I mentioned</span> <span data-start="1762.75" data-end="1764.309">earlier it's prevent extensions that</span> <span data-start="1764.309" data-end="1767.159">actually is fixing the object so that</span> <span data-start="1767.159" data-end="1769.889">cannot be extended and the other ones go</span> <span data-start="1769.889" data-end="1771.09">through all the properties and do</span> <span data-start="1771.09" data-end="1772.559">further things like limit their</span> <span data-start="1772.559" data-end="1773.7">configurability limit their write</span> <span data-start="1773.7" data-end="1777.57">ability seal limits configurability</span> <span data-start="1777.57" data-end="1780.74">removes it and freeze does that and</span> <span data-start="1780.74" data-end="1782.76">removes write ability makes things</span> <span data-start="1782.76" data-end="1786.029">read-only so those those can be</span> <span data-start="1786.029" data-end="1787.889">expressed in other traps but it's the</span> <span data-start="1787.889" data-end="1789.299">fixed trap that is the fundamental one</span> <span data-start="1789.299" data-end="1792.779">for all these three of these these new</span> <span data-start="1792.779" data-end="1796.309">es5 methods for hardening objects and</span> <span data-start="1796.309" data-end="1798.389">what's really suck about this is another</span> <span data-start="1798.389" data-end="1801.09">small talk —  thing in order to make fix</span> <span data-start="1801.09" data-end="1803.549">work we actually do something at mobile</span> <span data-start="1803.549" data-end="1805.2">calling brain transplants we make a</span> <span data-start="1805.2" data-end="1808.59">brand new object that's frozen that's</span> <span data-start="1808.59" data-end="1810.95">based on the property descriptors that</span> <span data-start="1810.95" data-end="1814.019">are returned by fix so you can you can</span> <span data-start="1814.019" data-end="1815.88">specify what the object becomes when</span> <span data-start="1815.88" data-end="1817.32">it's fixed and it doesn't just get those</span> <span data-start="1817.32" data-end="1819.33">properties it becomes that object this</span> <span data-start="1819.33" data-end="1821.61">read become primitive it's not in the</span> <span data-start="1821.61" data-end="1823.44">language it's it's one of these things</span> <span data-start="1823.44" data-end="1825.269">that's that's definitely backstage of</span> <span data-start="1825.269" data-end="1828.389">reality in the VM it swaps the guts or</span> <span data-start="1828.389" data-end="1830.1">the brains of two objects so that the</span> <span data-start="1830.1" data-end="1832.95">object identity of the of the proxy</span> <span data-start="1832.95" data-end="1834.96">being fixed is preserved but it</span> <span data-start="1834.96" data-end="1836.85">literally stops being a proxy it stops</span> <span data-start="1836.85" data-end="1840.419">being this magic object that can call</span> <span data-start="1840.419" data-end="1842.279">traps on it from its handler and becomes</span> <span data-start="1842.279" data-end="1845.37">a plain old object and the plain ol</span> <span data-start="1845.37" data-end="1846.45">object that was created here of course</span> <span data-start="1846.45" data-end="1847.71">becomes the proxy and then becomes</span> <span data-start="1847.71" data-end="1850.049">garbage collected because it's it's it's</span> <span data-start="1850.049" data-end="1851.809">not retained there's no reference to it</span> <span data-start="1851.809" data-end="1854.94">that's pretty cool and that guarantees</span> <span data-start="1854.94" data-end="1857.7">that that you will never go back from</span> <span data-start="1857.7" data-end="1858.809">being fixed</span> <span data-start="1858.809" data-end="1860.94">and yet you preserve the identity of the</span> <span data-start="1860.94" data-end="1862.83">proxy once it is fixed and becomes a</span> <span data-start="1862.83" data-end="1869.909">regular object okay so this sounds kind</span> <span data-start="1869.909" data-end="1870.75">of cool maybe it sounds a little</span> <span data-start="1870.75" data-end="1873.45">abstract it sounds like I don't know you</span> <span data-start="1873.45" data-end="1874.49">know</span> <span data-start="1874.49" data-end="1879.299">platon ism or something something weird</span> <span data-start="1879.299" data-end="1882.78">like Gnosticism but there is a meta</span> <span data-start="1882.78" data-end="1885.12">level that is above or backstage of the</span> <span data-start="1885.12" data-end="1887.52">reality and this meta programming lets</span> <span data-start="1887.52" data-end="1889.5">you get it and proxies in particular let</span> <span data-start="1889.5" data-end="1893.28">you make an object behave like anything</span> <span data-start="1893.28" data-end="1897.539">and if if you write all these traps you</span> <span data-start="1897.539" data-end="1899.61">can do that and that that's that's 13</span> <span data-start="1899.61" data-end="1901.65">traps that's a mouthful but what's what</span> <span data-start="1901.65" data-end="1902.909">this will blow your mind what you can do</span> <span data-start="1902.909" data-end="1904.59">if you're if you don't want to do that</span> <span data-start="1904.59" data-end="1909">is you can make a proxy whose handler is</span> <span data-start="1909" data-end="1912.299">a proxy so you can climb up the meta</span> <span data-start="1912.299" data-end="1914.61">ladder so-called put up the meta ladder</span> <span data-start="1914.61" data-end="1919.23">one rung and write a new handler I think</span> <span data-start="1919.23" data-end="1922.98">that's legal Unicode identifier for the</span> <span data-start="1922.98" data-end="1925.86">handler so the proxy has a handler the</span> <span data-start="1925.86" data-end="1927.75">handler is a proxy it has a handler and</span> <span data-start="1927.75" data-end="1930.03">every time the handlers traps are called</span> <span data-start="1930.03" data-end="1932.07">by the virtual machine when you do some</span> <span data-start="1932.07" data-end="1934.95">base level operation on the proxy the</span> <span data-start="1934.95" data-end="1939.57">handler calls turn into meta handler</span> <span data-start="1939.57" data-end="1942.99">traps get traps so the meta handler only</span> <span data-start="1942.99" data-end="1944.82">needs to have the get trap and then it</span> <span data-start="1944.82" data-end="1947.76">can do whatever it needs to do to create</span> <span data-start="1947.76" data-end="1955.169">or find those 13 traps and that that</span> <span data-start="1955.169" data-end="1957.929">actually is handy for if we go back to</span> <span data-start="1957.929" data-end="1964.73">this example of counting see where it is</span> <span data-start="1964.73" data-end="1967.5">counting get operations remember that</span> <span data-start="1967.5" data-end="1972.84">one the the example here only trapped</span> <span data-start="1972.84" data-end="1975.929">get and I said you could write out get</span> <span data-start="1975.929" data-end="1978.929">set has they're all 13 of them but you</span> <span data-start="1978.929" data-end="1982.559">don't have to instead you can exchange</span> <span data-start="1982.559" data-end="1985.35">this example so that it uses a proxy as</span> <span data-start="1985.35" data-end="1988.02">the handler and the that meta handler</span> <span data-start="1988.02" data-end="1990.809">has a get and all it does is count the</span> <span data-start="1990.809" data-end="1992.659">named operation</span> <span data-start="1992.659" data-end="1995.45">it's being trapped by the handler so</span> <span data-start="1995.45" data-end="1997.639">it's meta meta we're getting meta on</span> <span data-start="1997.639" data-end="2000.999">meta but that's cool and there's there's</span> <span data-start="2000.999" data-end="2004.029">some great power there in not writing</span> <span data-start="2004.029" data-end="2006.099">things out too long and also in sort of</span> <span data-start="2006.099" data-end="2009.609">automating construction of rappers or</span> <span data-start="2009.609" data-end="2011.71">what are called membranes and so let me</span> <span data-start="2011.71" data-end="2014.379">talk about that these are actually used</span> <span data-start="2014.379" data-end="2016.419">in Firefox for security for cross-site</span> <span data-start="2016.419" data-end="2019.09">scripting for the privileged Zul scripts</span> <span data-start="2019.09" data-end="2021.399">to isolate them from the unprivileged</span> <span data-start="2021.399" data-end="2024.099">web content we have like seven flavors</span> <span data-start="2024.099" data-end="2025.869">of these and we've got them all kind of</span> <span data-start="2025.869" data-end="2027.34">rationalized and they've all been</span> <span data-start="2027.34" data-end="2029.619">rebuilt in Firefox 4 on top of how many</span> <span data-start="2029.619" data-end="2031.809">proxies there's a good history research</span> <span data-start="2031.809" data-end="2033.909">here mark Miller's thesis and he writes</span> <span data-start="2033.909" data-end="2034.479">org</span> <span data-start="2034.479" data-end="2036.909">it's obviously fed directly into google</span> <span data-start="2036.909" data-end="2039.58">kaha the capabilities secure a subset of</span> </p>
<p><span data-start="2039.58" data-end="2042.879">JavaScript that uses membranes also the</span> <span data-start="2042.879" data-end="2044.259">simplest use case in the object</span> <span data-start="2044.259" data-end="2046.389">capability world is that you want to</span> <span data-start="2046.389" data-end="2049">limit the authority of objects you want</span> <span data-start="2049" data-end="2051.129">to use the principle least authority but</span> <span data-start="2051.129" data-end="2052.78">when you when you give your logic throw</span> <span data-start="2052.78" data-end="2053.859">you do it by giving them an object</span> <span data-start="2053.859" data-end="2055.809">reference well what if you want to take</span> <span data-start="2055.809" data-end="2058.539">that away later that's hard to do unless</span> <span data-start="2058.539" data-end="2060.76">you have something like a revocable</span> <span data-start="2060.76" data-end="2064.359">membrane some-some way of saying no more</span> <span data-start="2064.359" data-end="2067.149">access something like a proxy so you can</span> <span data-start="2067.149" data-end="2071.139">share enough build membranes with with</span> <span data-start="2071.139" data-end="2075.01">proxies and here's a fine object ability</span> <span data-start="2075.01" data-end="2078.76">diagram showing how you can do this it's</span> <span data-start="2078.76" data-end="2084.22">kind of artistic I'll leave you leave it</span> <span data-start="2084.22" data-end="2085.809">to people to figure out what's going on</span> <span data-start="2085.809" data-end="2093.099">there but when we get no unicorns so so</span> <span data-start="2093.099" data-end="2094.779">the code is what everyone's going to</span> <span data-start="2094.779" data-end="2095.74">read because I know you want to read</span> <span data-start="2095.74" data-end="2099.64">code before you have beer what's really</span> <span data-start="2099.64" data-end="2100.72">cool is that I'm going to start with</span> <span data-start="2100.72" data-end="2101.89">this and build in toward the middle this</span> <span data-start="2101.89" data-end="2103.74">is an example that the mark and Tom had</span> <span data-start="2103.74" data-end="2107.829">it shows the power of the meta handler</span> <span data-start="2107.829" data-end="2112.99">the ability to to rift traps from the</span> <span data-start="2112.99" data-end="2115.15">handler into the meta level with one</span> <span data-start="2115.15" data-end="2118.21">piece of code so we're going to wrap</span> <span data-start="2118.21" data-end="2120.849">some target objects and it better be an</span> <span data-start="2120.849" data-end="2122.02">object and it's printer we're just going</span> <span data-start="2122.02" data-end="2124.15">to get it back we're going to make a</span> <span data-start="2124.15" data-end="2124.96">forwarding hands</span> </p>
<p><span data-start="2124.96" data-end="2125.95">I saw that already it's the snow</span> <span data-start="2125.95" data-end="2128.589">pastoring thing we're going to make a</span> <span data-start="2128.589" data-end="2132.13">revoke Handler and it has a rope handler</span> <span data-start="2132.13" data-end="2135.339">that is a proxy reveal Candler is proxy</span> <span data-start="2135.339" data-end="2137.53">up creative handler that is a proxy and</span> <span data-start="2137.53" data-end="2140.41">its handler has only a get trap and that</span> <span data-start="2140.41" data-end="2142.63">get trap whatever it's being called with</span> <span data-start="2142.63" data-end="2144.16">remember it's only being called with</span> <span data-start="2144.16" data-end="2145.27">whatever is calling the handler and</span> <span data-start="2145.27" data-end="2146.92">unless you do something to the handler</span> <span data-start="2146.92" data-end="2148.66">that's only going to be one of those</span> <span data-start="2148.66" data-end="2152.619">thirteen trap names so get set has that</span> <span data-start="2152.619" data-end="2153.52">name is going to be one of those</span> <span data-start="2153.52" data-end="2154.63">searching names you're going to wrap</span> <span data-start="2154.63" data-end="2157.69">that base handler and reflect it back</span> <span data-start="2157.69" data-end="2162.76">into the the base level and you have to</span> <span data-start="2162.76" data-end="2164.08">handle functions differently of course</span> <span data-start="2164.08" data-end="2165.64">so there's a special case for create</span> <span data-start="2165.64" data-end="2168.7">function otherwise this thing will just</span> <span data-start="2168.7" data-end="2171.19">sort of recursively wrap an object you</span> <span data-start="2171.19" data-end="2173.349">give it in a membrane and the membrane</span> <span data-start="2173.349" data-end="2175.839">will make sure that all the traps</span> <span data-start="2175.839" data-end="2178.72">whatever they are go through something</span> <span data-start="2178.72" data-end="2180.4">that I haven't shown yet which is coming</span> <span data-start="2180.4" data-end="2182.08">wrap function and what does wrap</span> <span data-start="2182.08" data-end="2183.609">function do well it's normally going to</span> <span data-start="2183.609" data-end="2186.04">just apply the trap let you do your</span> <span data-start="2186.04" data-end="2187.9">membrane thing which is the forwarding</span> <span data-start="2187.9" data-end="2189.82">thing this is the capability you've</span> <span data-start="2189.82" data-end="2191.23">given that you want to go to revoke it</span> <span data-start="2191.23" data-end="2194.89">but if the enabled flag has been set to</span> <span data-start="2194.89" data-end="2196.3">false then it's going to throw an error</span> <span data-start="2196.3" data-end="2198.849">and that's that's revoked so this simple</span> <span data-start="2198.849" data-end="2201.43">one-page example shows it's not that</span> <span data-start="2201.43" data-end="2202.69">simple but it's pretty simple</span> <span data-start="2202.69" data-end="2204.609">this shows how you can use proxies to do</span> <span data-start="2204.609" data-end="2207.88">something that is taken for me we did it</span> </p>
<p><span data-start="2207.88" data-end="2210.13">C++ it's a lot of C++ it's very bug</span> <span data-start="2210.13" data-end="2213.21">prone it's conceptually simple but but</span> <span data-start="2213.21" data-end="2215.589">complicated to implement but here is</span> <span data-start="2215.589" data-end="2217.359">it's it's fairly comprehensible it's</span> <span data-start="2217.359" data-end="2217.81">very pretty</span> <span data-start="2217.81" data-end="2219.46">and you don't have to write out those</span> <span data-start="2219.46" data-end="2221.32">thirteen trap names you just use this</span> <span data-start="2221.32" data-end="2224.109">this meta handler and you have a</span> <span data-start="2224.109" data-end="2228.64">revocable membrane so this is all based</span> <span data-start="2228.64" data-end="2231.49">on Tom Marx very good work and that's</span> <span data-start="2231.49" data-end="2235.27">based on prior work Tom van cooked some</span> <span data-start="2235.27" data-end="2237.099">others his colleagues at the Free</span> </p>
<p><span data-start="2237.099" data-end="2238.54">University of Belgium and other places</span> <span data-start="2238.54" data-end="2240.04">have been working on ambient talk which</span> <span data-start="2240.04" data-end="2241.3">is in the small talk family in the e</span> <span data-start="2241.3" data-end="2244.66">family and they had a meta programming</span> <span data-start="2244.66" data-end="2248.98">system that was called mirages based on</span> <span data-start="2248.98" data-end="2250.839">mirrors mirrors is a old paper from</span> <span data-start="2250.839" data-end="2252.849">David hunger and Gilad bracha about how</span> <span data-start="2252.849" data-end="2254.44">when you do meta programming you want it</span> <span data-start="2254.44" data-end="2255.02">to be strapped</span> </p>
<p><span data-start="2255.02" data-end="2256.28">I've been using that word what does that</span> <span data-start="2256.28" data-end="2258.32">mean well it means no more double</span> <span data-start="2258.32" data-end="2260.18">underbar proto double underbar no more</span> <span data-start="2260.18" data-end="2261.83">double underbar no such method the</span> <span data-start="2261.83" data-end="2263.45">blonde or because for one thing sticking</span> <span data-start="2263.45" data-end="2266.27">those properties at the base level means</span> <span data-start="2266.27" data-end="2267.92">you can't intercede for those names what</span> <span data-start="2267.92" data-end="2269.66">if somebody has a database or a JSON</span> <span data-start="2269.66" data-end="2270.95">file and they have double wonder or</span> <span data-start="2270.95" data-end="2273.31">Frodo in it they're kind of hosts</span> <span data-start="2273.31" data-end="2274.91">stratification means that there's a</span> <span data-start="2274.91" data-end="2278.96">mirror backstage of reality and you</span> <span data-start="2278.96" data-end="2281.57">reflect the object off of it and that's</span> <span data-start="2281.57" data-end="2282.98">how you do meta programming you kind of</span> <span data-start="2282.98" data-end="2287.45">bend the mirror so this isn't a complete</span> <span data-start="2287.45" data-end="2289.369">picture of the prior work but it's the</span> <span data-start="2289.369" data-end="2290.81">directly influential for our work it</span> <span data-start="2290.81" data-end="2292.19">does go back to small talk like almost</span> <span data-start="2292.19" data-end="2295.369">everything and you know the number of</span> <span data-start="2295.369" data-end="2298.73">traps in these systems varies but 13:8</span> <span data-start="2298.73" data-end="2300.29">bad take it from me</span> </p>
<p><span data-start="2300.29" data-end="2303.369">Java seems like the winner here with one</span> <span data-start="2303.369" data-end="2305.78">trap but it's not really a trap it's a</span> <span data-start="2305.78" data-end="2308.15">whole no class I'm not sure that this is</span> <span data-start="2308.15" data-end="2318.219">counted fairly and anyway Java sucks so</span> <span data-start="2318.229" data-end="2320.819">so why are we doing this why am i</span> <span data-start="2320.819" data-end="2322.499">telling you about this I hope that this</span> <span data-start="2322.499" data-end="2324.239">is interest interested you and piqued</span> <span data-start="2324.239" data-end="2326.999">your curiosity we're trying to solve</span> <span data-start="2326.999" data-end="2329.969">some problems as browser vendors and as</span> <span data-start="2329.969" data-end="2332.459">responsible stewards of JavaScript we</span> <span data-start="2332.459" data-end="2338.489">want to make host objects saying and we</span> <span data-start="2338.489" data-end="2341.16">want to give programmers the power that</span> <span data-start="2341.16" data-end="2344.279">is so far been only in the domain of the</span> </p>
<p><span data-start="2344.279" data-end="2348.42">C++ browser hackers proxies look like</span> <span data-start="2348.42" data-end="2350.119">they're sufficiently powerful to do this</span> <span data-start="2350.119" data-end="2352.859">they allow us to self host more and more</span> <span data-start="2352.859" data-end="2353.999">we're using them for these security</span> <span data-start="2353.999" data-end="2356.519">wrappers in Firefox for the handlers our</span> <span data-start="2356.519" data-end="2358.469">C++ by the way that we're not that crazy</span> <span data-start="2358.469" data-end="2359.849">but we're going to get there I think</span> <span data-start="2359.849" data-end="2361.529">we're going to get to the promised land</span> <span data-start="2361.529" data-end="2362.849">of almost everything written in</span> <span data-start="2362.849" data-end="2364.859">JavaScript with the performance work</span> <span data-start="2364.859" data-end="2366.749">that's going on and and this kind of</span> <span data-start="2366.749" data-end="2368.729">meta programming work in principle</span> <span data-start="2368.729" data-end="2370.17">there's no reason why we can't get rid</span> <span data-start="2370.17" data-end="2371.789">of this you know megabytes of native</span> <span data-start="2371.789" data-end="2374.099">code that were burdened with from the</span> <span data-start="2374.099" data-end="2378.18">past now you could say host objects</span> <span data-start="2378.18" data-end="2380.13">still can do you know weird-ass stuff</span> <span data-start="2380.13" data-end="2381.779">that they shouldn't do or maybe that</span> <span data-start="2381.779" data-end="2383.579">might be good the proxies can't do so</span> <span data-start="2383.579" data-end="2385.769">we're thinking about should we make</span> <span data-start="2385.769" data-end="2387.18">proxies even more powerful</span> <span data-start="2387.18" data-end="2388.709">maybe we should somehow make host</span> <span data-start="2388.709" data-end="2390.509">objects only as powerful as proxies and</span> <span data-start="2390.509" data-end="2392.729">we're serious about this in every</span> <span data-start="2392.729" data-end="2393.93">javascript engine including spider</span> <span data-start="2393.93" data-end="2396.239">monkey there's something like the proxy</span> <span data-start="2396.239" data-end="2398.519">api but it's not quite as clever it</span> <span data-start="2398.519" data-end="2400.229">doesn't have this becomes primitive I</span> <span data-start="2400.229" data-end="2402.359">probably doesn't have all the es5 traps</span> <span data-start="2402.359" data-end="2405.66">but it has you know virtual methods for</span> <span data-start="2405.66" data-end="2407.519">calling get and set on arbitrary objects</span> <span data-start="2407.519" data-end="2408.66">and that's how people implement things</span> <span data-start="2408.66" data-end="2413.069">like you know the Dom or a live connect</span> <span data-start="2413.069" data-end="2416.489">the Java reflection we would like in</span> <span data-start="2416.489" data-end="2418.829">spider monkey to make that API that</span> <span data-start="2418.829" data-end="2423.779">internal virtual method table be proxies</span> <span data-start="2423.779" data-end="2426.089">only proxies so there's nothing that</span> <span data-start="2426.089" data-end="2428.819">hosts object can do that a proxy can't</span> <span data-start="2428.819" data-end="2430.979">do and we're serious about this and will</span> <span data-start="2430.979" data-end="2432.989">help us with with maintainability and</span> <span data-start="2432.989" data-end="2435.329">sanity it would make life better for us</span> <span data-start="2435.329" data-end="2437.009">and for all the JavaScript developers</span> <span data-start="2437.009" data-end="2440.069">and I think people in equities 39 from</span> <span data-start="2440.069" data-end="2441.93">other browser vendors see this too I</span> <span data-start="2441.93" data-end="2443.91">know I've talked to Allen worse Rock and</span> </p>
<p><span data-start="2443.91" data-end="2446.009">Microsoft about this and Travis Lee head</span> <span data-start="2446.009" data-end="2448.349">of Microsoft I think they get it it</span> <span data-start="2448.349" data-end="2450.07">might take a while</span> <span data-start="2450.07" data-end="2451.81">but it looks good to those of us who are</span> <span data-start="2451.81" data-end="2454.84">working on it so this was presented this</span> <span data-start="2454.84" data-end="2456.7">past year at tc39 meetings there was a</span> <span data-start="2456.7" data-end="2459.16">lot of good obvious at prior work and</span> <span data-start="2459.16" data-end="2462.25">small talk in an academic research it</span> <span data-start="2462.25" data-end="2464.62">actually got approved in our sort of</span> <span data-start="2464.62" data-end="2467.62">semi formal process it became harmony</span> <span data-start="2467.62" data-end="2469.51">proposal so it's very likely to get into</span> <span data-start="2469.51" data-end="2472.36">the next edition of the language and the</span> <span data-start="2472.36" data-end="2474.07">spec is excellent Tom and Mark did great</span> <span data-start="2474.07" data-end="2474.73">work</span> <span data-start="2474.73" data-end="2476.44">tom has followed through on a number of</span> <span data-start="2476.44" data-end="2479.26">points diligently and what's even more</span> <span data-start="2479.26" data-end="2480.97">gratifying is on address gal ran off and</span> <span data-start="2480.97" data-end="2482.14">implemented it in like a weekend in</span> </p>
<p><span data-start="2482.14" data-end="2484.51">Firefox in SpiderMonkey in this past</span> <span data-start="2484.51" data-end="2486.52">spring and we started using it for our</span> <span data-start="2486.52" data-end="2488.62">security wrappers this was ahead of what</span> <span data-start="2488.62" data-end="2490.57">I thought would happen and it's also</span> <span data-start="2490.57" data-end="2492.55">being used for something called Zaphod I</span> <span data-start="2492.55" data-end="2494.13">don't know if anybody's heard of Zaphod</span> <span data-start="2494.13" data-end="2495.58">cool yeah</span> <span data-start="2495.58" data-end="2499.24">I'll talk about that after that is the</span> <span data-start="2499.24" data-end="2501.01">old narcissus meta-circular evaluator I</span> <span data-start="2501.01" data-end="2503.95">wrote as a Firefox plugin you can</span> <span data-start="2503.95" data-end="2505.99">substitute in place of spider monkey and</span> <span data-start="2505.99" data-end="2508.15">run is a very slow scripting engine for</span> <span data-start="2508.15" data-end="2509.8">your webpage but you can use it as a</span> <span data-start="2509.8" data-end="2511.45">research VM you can extend the language</span> <span data-start="2511.45" data-end="2512.89">very easily because it's JavaScript you</span> <span data-start="2512.89" data-end="2515.05">can hack in new syntax you can you know</span> <span data-start="2515.05" data-end="2516.34">do what you want</span> </p>
<p><span data-start="2516.34" data-end="2519.07">Zaphod this on a Don Sutton's law that</span> <span data-start="2519.07" data-end="2521.61">Oregon sand add-on it's on github you</span> <span data-start="2521.61" data-end="2524.23">know safe hovels kind of vain too so we</span> <span data-start="2524.23" data-end="2526.39">kind of went with narcissus theme he had</span> <span data-start="2526.39" data-end="2530.05">two heads there's a big picture point</span> <span data-start="2530.05" data-end="2531.04">here I want to make and this is</span> <span data-start="2531.04" data-end="2533.71">important for other standards bodies to</span> <span data-start="2533.71" data-end="2535.72">learn from it's it's not perfect Annette</span> </p>
<p><span data-start="2535.72" data-end="2538.39">MA we're not bragging but right now we</span> <span data-start="2538.39" data-end="2539.56">have something that seems to be working</span> <span data-start="2539.56" data-end="2540.97">we need to roll with it because the</span> <span data-start="2540.97" data-end="2542.17">alternative doesn't look good it looks</span> <span data-start="2542.17" data-end="2545.5">like individual innovation where other</span> <span data-start="2545.5" data-end="2548.23">people have to catch up which we've done</span> <span data-start="2548.23" data-end="2550.54">of necessity I think we didn't want to</span> <span data-start="2550.54" data-end="2553.3">just do nothing but what we're doing in</span> <span data-start="2553.3" data-end="2556.2">tc39 is we're taking well-informed</span> <span data-start="2556.2" data-end="2558.28">practically oriented academic research</span> <span data-start="2558.28" data-end="2562.12">and researchers we're taking the</span> <span data-start="2562.12" data-end="2563.68">attitude that standards must evolve</span> <span data-start="2563.68" data-end="2565.09">because there are gaps in the language</span> <span data-start="2565.09" data-end="2566.08">there are problems that need to be</span> <span data-start="2566.08" data-end="2567.91">solved for JavaScript developers for</span> <span data-start="2567.91" data-end="2570.19">browser vendors you cannot solve these</span> <span data-start="2570.19" data-end="2572.89">problems by going into the tower and</span> <span data-start="2572.89" data-end="2575.35">writing some perfect paper and then</span> <span data-start="2575.35" data-end="2577.36">coming out with with a standard you have</span> <span data-start="2577.36" data-end="2580.06">to do a prototype implementation due to</span> <span data-start="2580.06" data-end="2581.5">prototype implementation to test</span> <span data-start="2581.5" data-end="2583.34">interoperation ideally do do more</span> <span data-start="2583.34" data-end="2585.47">- and you need a lot of user testing</span> <span data-start="2585.47" data-end="2587.66">because it's a large search space to</span> <span data-start="2587.66" data-end="2589.25">cover the API here to cover all the</span> <span data-start="2589.25" data-end="2591.44">corners so it's not like you're going to</span> <span data-start="2591.44" data-end="2592.7">write the test suite even if it has</span> <span data-start="2592.7" data-end="2594.89">thousands of tests and really learn</span> <span data-start="2594.89" data-end="2595.88">everything you need to you need to</span> <span data-start="2595.88" data-end="2598.01">release this into the world from the lab</span> <span data-start="2598.01" data-end="2599.63">and that's what we're doing in Firefox</span> <span data-start="2599.63" data-end="2601.82">for even sticking with a named proxy you</span> <span data-start="2601.82" data-end="2603.23">know in JavaScript we don't have this</span> </p>
<p><span data-start="2603.23" data-end="2606.56">Moz or WebKit prefix convention we</span> <span data-start="2606.56" data-end="2608.42">haven't as much experience as the CSS</span> <span data-start="2608.42" data-end="2610.85">guys do using such a prefix on the other</span> <span data-start="2610.85" data-end="2613.43">hand they tend to use it and then forget</span> <span data-start="2613.43" data-end="2615.49">to get rid of the prefixes over time</span> <span data-start="2615.49" data-end="2619.18">we're going to try to bet on the harmony</span> <span data-start="2619.18" data-end="2621.5">continuing so that proxy actually sticks</span> <span data-start="2621.5" data-end="2623.14">and so far it hasn't collided on the web</span> <span data-start="2623.14" data-end="2625.55">you can always reassign it just like any</span> <span data-start="2625.55" data-end="2627.56">other global name but we're shipping</span> <span data-start="2627.56" data-end="2629.33">proxies in Firefox for as far as I know</span> <span data-start="2629.33" data-end="2631.4">and I think we should so we're going to</span> <span data-start="2631.4" data-end="2632.66">reach users at scale and we're going to</span> <span data-start="2632.66" data-end="2634.46">feedback what we learned the committee</span> <span data-start="2634.46" data-end="2636.17">if we have to change something I hope</span> <span data-start="2636.17" data-end="2637.58">it's not big it probably won't be will</span> <span data-start="2637.58" data-end="2640.1">tweak it the early adopters can probably</span> <span data-start="2640.1" data-end="2641.75">cope and will standardize based on that</span> <span data-start="2641.75" data-end="2643.94">learning and that's how I the best we</span> <span data-start="2643.94" data-end="2645.62">can do for web standards that actually</span> <span data-start="2645.62" data-end="2649.04">evolve that keep up with growing use</span> <span data-start="2649.04" data-end="2651.38">cases demands of developers or old</span> <span data-start="2651.38" data-end="2654.11">demands gaps in the language left over</span> <span data-start="2654.11" data-end="2657.11">from the dark ages and this is actually</span> <span data-start="2657.11" data-end="2658.31">a strong commitment in the committee</span> <span data-start="2658.31" data-end="2660.02">right now it means that we're not going</span> <span data-start="2660.02" data-end="2661.22">to go blindside each other and do</span> <span data-start="2661.22" data-end="2664.91">something weird you know bugs aside</span> <span data-start="2664.91" data-end="2666.17">we're not going to go do something we</span> <span data-start="2666.17" data-end="2667.79">haven't explained to our friends in the</span> <span data-start="2667.79" data-end="2669.74">committee because that would make for a</span> <span data-start="2669.74" data-end="2674.27">pretty icy dinner conversation just a</span> <span data-start="2674.27" data-end="2675.89">little micro benchmark this is from the</span> <span data-start="2675.89" data-end="2677.14">spring I think it's gotten better</span> <span data-start="2677.14" data-end="2680.06">proxies if they're just doing forwarding</span> <span data-start="2680.06" data-end="2682.16">like that no op proxy do have some cost</span> <span data-start="2682.16" data-end="2684.77">this is the very first implementation we</span> <span data-start="2684.77" data-end="2686.87">have not done anything to optimize the</span> <span data-start="2686.87" data-end="2689.27">trap call the cool thing about tracing</span> <span data-start="2689.27" data-end="2690.59">which we haven't trace monkey is you can</span> <span data-start="2690.59" data-end="2693.41">inline small functions aggressively so</span> <span data-start="2693.41" data-end="2695.45">if traps are very small like these</span> <span data-start="2695.45" data-end="2697.88">forwarding ones we can inline them so I</span> <span data-start="2697.88" data-end="2700.94">expect that this kind of profile result</span> <span data-start="2700.94" data-end="2703.28">will go squeeze down toward toward one</span> <span data-start="2703.28" data-end="2705.47">and there will be almost no slowdown and</span> <span data-start="2705.47" data-end="2707.69">and the overhead of having proxies in</span> <span data-start="2707.69" data-end="2709.1">your VM when you're not using them</span> <span data-start="2709.1" data-end="2711.23">should be effectively 1 and here it is I</span> <span data-start="2711.23" data-end="2713.23">mean there's some noise there and some</span> <span data-start="2713.23" data-end="2714.7">minor things that we've had to work out</span> <span data-start="2714.7" data-end="2717.64">since then but proxies don't cost and</span> <span data-start="2717.64" data-end="2718.9">like I said we're actually using them as</span> <span data-start="2718.9" data-end="2721.24">the basis for all our our host objects</span> <span data-start="2721.24" data-end="2725.44">as we go forward so proxies are awesome</span> <span data-start="2725.44" data-end="2728.71">they give you this ability to intercede</span> <span data-start="2728.71" data-end="2731.92">and create new behavior with code in a</span> <span data-start="2731.92" data-end="2734.26">handler for an arbitrary object you</span> <span data-start="2734.26" data-end="2736.39">create you can even do functions you can</span> <span data-start="2736.39" data-end="2738.64">make virtual objects that have no peer</span> <span data-start="2738.64" data-end="2740.53">object behind them no wrapped object you</span> <span data-start="2740.53" data-end="2742">can make wrappers which are important</span> <span data-start="2742" data-end="2743.76">for things like testing security</span> <span data-start="2743.76" data-end="2747.16">profiling one of the things that I think</span> <span data-start="2747.16" data-end="2748.15">we should try to build with this and</span> <span data-start="2748.15" data-end="2749.23">we're going to try to get going on this</span> <span data-start="2749.23" data-end="2753.34">soon is you know how replay VMs and</span> <span data-start="2753.34" data-end="2755.83">debugging through time traveling has</span> <span data-start="2755.83" data-end="2758.98">become popular this goes back to Ma C I</span> <span data-start="2758.98" data-end="2760.21">think it was named after the hacker</span> </p>
<p><span data-start="2760.21" data-end="2761.92">Michael Elizabeth Chastain I think he</span> <span data-start="2761.92" data-end="2764.44">did this cool debugger that used Linux's</span> <span data-start="2764.44" data-end="2766.9">debugging API to capture all the inputs</span> <span data-start="2766.9" data-end="2768.91">and outputs of your program he would</span> <span data-start="2768.91" data-end="2770.83">actually login like imagine a VCR</span> <span data-start="2770.83" data-end="2773.28">running and recording all the i/o you do</span> <span data-start="2773.28" data-end="2776.02">including a map including P trace it</span> <span data-start="2776.02" data-end="2777.85">would follow all the pointers and then</span> <span data-start="2777.85" data-end="2780.43">you could rewind and play back that</span> <span data-start="2780.43" data-end="2782.35">input to the program and if the program</span> <span data-start="2782.35" data-end="2783.91">was deterministic it would evolve to the</span> <span data-start="2783.91" data-end="2785.38">same state so you could you could do</span> <span data-start="2785.38" data-end="2788.62">kind of brute force replay debugging you</span> <span data-start="2788.62" data-end="2789.79">guys could build that with proxies</span> <span data-start="2789.79" data-end="2791.98">somebody here should go do that we're</span> <span data-start="2791.98" data-end="2793.9">going to try to do it too because that</span> <span data-start="2793.9" data-end="2795.1">would be really awesome to have like a</span> <span data-start="2795.1" data-end="2796.93">slider on your debugger or you could</span> <span data-start="2796.93" data-end="2798.64">just rewind it especially if you could</span> <span data-start="2798.64" data-end="2800.47">capture all this Dhamma FEX this is a</span> <span data-start="2800.47" data-end="2801.7">little challenging there's a lot of</span> <span data-start="2801.7" data-end="2803.59">hidden effects there and those damn host</span> <span data-start="2803.59" data-end="2805.33">objects but if you could capture them</span> <span data-start="2805.33" data-end="2807.58">all treat them as transactions and roll</span> <span data-start="2807.58" data-end="2809.65">them back invert them if they're</span> <span data-start="2809.65" data-end="2812.62">invertible save order state if you have</span> <span data-start="2812.62" data-end="2814.42">- if there's destructive operations you</span> <span data-start="2814.42" data-end="2816.07">could do a replay debugger with proxies</span> <span data-start="2816.07" data-end="2817.78">and and you could do that slider and you</span> <span data-start="2817.78" data-end="2820.06">could see Gmail kind of reef lowing back</span> <span data-start="2820.06" data-end="2822.16">to where it was before it hit your bug</span> <span data-start="2822.16" data-end="2823.81">and you could find the bug and I think</span> <span data-start="2823.81" data-end="2825.73">we're going to try to build it and see</span> <span data-start="2825.73" data-end="2826.72">how it goes and I think proxies are</span> <span data-start="2826.72" data-end="2830.02">going to be key to this the API uses</span> <span data-start="2830.02" data-end="2831.58">stratification so we're past adding</span> <span data-start="2831.58" data-end="2835.54">double underscore names we are careful</span> <span data-start="2835.54" data-end="2837.07">to preserve a few important invariants</span> <span data-start="2837.07" data-end="2841.33">in language we of course do the es5 meta</span> <span data-start="2841.33" data-end="2843.49">programming properly support frees and</span> <span data-start="2843.49" data-end="2845.62">so on and as I showed there's really no</span> <span data-start="2845.62" data-end="2846.31">performance</span> <span data-start="2846.31" data-end="2849.4">done on proxy objects so beyond all this</span> <span data-start="2849.4" data-end="2851.62">you know proxies are awesome this does</span> <span data-start="2851.62" data-end="2855.07">show two things I mentioned the</span> <span data-start="2855.07" data-end="2857.65">committee and the browser vendors and</span> <span data-start="2857.65" data-end="2860.23">you developers are working more in</span> <span data-start="2860.23" data-end="2862.42">concert than I've ever seen we should</span> <span data-start="2862.42" data-end="2864.22">push on this we should do even more</span> <span data-start="2864.22" data-end="2867.19">without you know overreaching I think we</span> <span data-start="2867.19" data-end="2869.77">should get this stuff rolled out use it</span> <span data-start="2869.77" data-end="2871.9">get feedback standardize it and do it</span> <span data-start="2871.9" data-end="2874.09">again I don't know how else to improve</span> <span data-start="2874.09" data-end="2875.56">the web and I think it's working so</span> <span data-start="2875.56" data-end="2877.54">let's let's do it and really javascript</span> <span data-start="2877.54" data-end="2878.95">is the revenge of small talk and I</span> <span data-start="2878.95" data-end="2881.16">intend to see that come to pass in full</span> <span data-start="2881.16" data-end="2884.23">and with that I'll just show you</span> </p>
<p><span data-start="2884.23" data-end="2887.5">Zaphod if I can this is here's the code</span> <span data-start="2887.5" data-end="2889.33">on github you can see it uses proxies</span> <span data-start="2889.33" data-end="2891.91">this is narcissus when I wrote our</span> <span data-start="2891.91" data-end="2893.2">sisters there weren't any proxies so I</span> <span data-start="2893.2" data-end="2894.52">had the hack in double underscore</span> <span data-start="2894.52" data-end="2897.52">defined property meta methods on an if</span> <span data-start="2897.52" data-end="2900.13">def build a spider monkey it was bad you</span> <span data-start="2900.13" data-end="2902.74">couldn't host narcissus in full on a</span> <span data-start="2902.74" data-end="2904.96">browser people took the parser and they</span> <span data-start="2904.96" data-end="2907">ported it to Ruby and you know spread it</span> <span data-start="2907" data-end="2909.37">all over but now with proxies you can</span> <span data-start="2909.37" data-end="2911.91">actually do what you need to do with</span> <span data-start="2911.91" data-end="2914.53">supported to be standardized harmonious</span> <span data-start="2914.53" data-end="2915.88">api's</span> <span data-start="2915.88" data-end="2919.15">and I hope this works this is kind of</span> <span data-start="2919.15" data-end="2921.88">bleeding edge so here's here's CNN and</span> <span data-start="2921.88" data-end="2927.78">it has some scripts on it narcissus is</span> <span data-start="2927.78" data-end="2930.25">god-awful slow we haven't done nothing</span> <span data-start="2930.25" data-end="2931.36">to optimize the performance I'm actually</span> <span data-start="2931.36" data-end="2932.74">thinking that we can make it a lot</span> <span data-start="2932.74" data-end="2936.91">faster once we get proxies in our CSS we</span> <span data-start="2936.91" data-end="2939.25">can stop doing you know basically AST</span> <span data-start="2939.25" data-end="2940.9">walking tree walking to interpret it we</span> <span data-start="2940.9" data-end="2942.85">could start doing tricks that would make</span> <span data-start="2942.85" data-end="2944.92">it actually perform really well there's</span> <span data-start="2944.92" data-end="2948.37">a little Mozilla head added by Zaphod</span> <span data-start="2948.37" data-end="2950.08">the add-on down at the bottom if you</span> <span data-start="2950.08" data-end="2952.18">mouse over it says Jas Engine equal</span> </p>
<p><span data-start="2952.18" data-end="2956.47">SpiderMonkey if I click that I have just</span> <span data-start="2956.47" data-end="2960.01">swapped narcissus which runs in spider</span> <span data-start="2960.01" data-end="2962.67">monkey for spider monkey as the</span> <span data-start="2962.67" data-end="2964.42">JavaScript engine that handles</span> <span data-start="2964.42" data-end="2966.1">application JavaScript text JavaScript</span> <span data-start="2966.1" data-end="2968.53">all those arm types if I now reload and</span> <span data-start="2968.53" data-end="2974.08">knock on wood I probably locked it up</span> <span data-start="2974.08" data-end="2976.27">but yeah it's it's now running the</span> <span data-start="2976.27" data-end="2977.98">scripts on cnn.com which are not that</span> <span data-start="2977.98" data-end="2979.93">challenging through narcissus</span> <span data-start="2979.93" data-end="2982.39">it doesn't run Gmail yet it's just</span> <span data-start="2982.39" data-end="2984.7">there's still some things missing and</span> <span data-start="2984.7" data-end="2986.59">performance is really atrocious but this</span> <span data-start="2986.59" data-end="2988.99">is Zaphod in action and it's kind of</span> <span data-start="2988.99" data-end="2991.65">crazy we actually made an application</span> <span data-start="2991.65" data-end="2994.15">narcissus mimetype we haven't register</span> <span data-start="2994.15" data-end="2995.8">we're not going to register but Zaphod</span> <span data-start="2995.8" data-end="2997.24">recognizes that so if you want to write</span> <span data-start="2997.24" data-end="2999.84">test pages that actually choose to use</span> <span data-start="2999.84" data-end="3002.34">the narcissus engine through Zaphod they</span> <span data-start="3002.34" data-end="3003.96">can target it with script I people's</span> <span data-start="3003.96" data-end="3006.87">applications are CSS I think it loaded</span> </p>
<p><span data-start="3006.87" data-end="3008.18">Wow</span> <span data-start="3008.18" data-end="3011.49">DMS let's see if everything works yeah</span> <span data-start="3011.49" data-end="3015.87">it's slow yeah there we go I believe</span> <span data-start="3015.87" data-end="3017.67">this is written yeah this is running in</span> <span data-start="3017.67" data-end="3021.48">their sis's so right here is a glimpse</span> <span data-start="3021.48" data-end="3023.93">of the future of the bootstrap</span> <span data-start="3023.93" data-end="3026.25">self-hosted small talk world we can get</span> <span data-start="3026.25" data-end="3028.46">to if we just keep working on it</span> <span data-start="3028.46" data-end="3030.47">it's too damn slow right now anyway</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
