<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>V0wJ1BnfnR8</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/V0wJ1BnfnR8?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="8.09" data-end="10.65">hello everyone thanks for being here</span> <span data-start="10.65" data-end="14.009">today at this truck so before diving in</span> <span data-start="14.009" data-end="16.139">the wondrous world of polyfills I'd like</span> <span data-start="16.139" data-end="17.91">the times to take some time to introduce</span> <span data-start="17.91" data-end="20.939">myself I'm Leah vero as you can see</span> <span data-start="20.939" data-end="23.01">there are three times it's a Greek name</span> </p>
<p><span data-start="23.01" data-end="25.949">I live in Greece I'm a front-end</span> <span data-start="25.949" data-end="29.31">developer I love CSS and JavaScript but</span> <span data-start="29.31" data-end="30.599">don't worry I'm not going to start</span> <span data-start="30.599" data-end="34.68">singing now and these are the places you</span> <span data-start="34.68" data-end="39">can find me on the web so many people</span> <span data-start="39" data-end="41.61">know me from for my CSS research and</span> <span data-start="41.61" data-end="43.469">they were asking me yesterday if it's</span> <span data-start="43.469" data-end="46.44">going to be a talk about CSS and I was</span> <span data-start="46.44" data-end="49.079">like dude it's a JavaScript conference</span> <span data-start="49.079" data-end="52.469">it's I'm not going to speak about CSS so</span> <span data-start="52.469" data-end="54.78">no it's not about CSS polyfills purple</span> <span data-start="54.78" data-end="56.969">and Polly fields are to CSS about what</span> <span data-start="56.969" data-end="59.82">4k is the sushi you can use it to eat</span> <span data-start="59.82" data-end="61.5">sushi but it's not really a very good</span> <span data-start="61.5" data-end="64.799">idea and it's not meant for that purpose</span> <span data-start="64.799" data-end="68.79">so what our polyfills boy feels is a</span> <span data-start="68.79" data-end="72.6">term coined by Remy sharp last year but</span> <span data-start="72.6" data-end="75.42">it caught up really quickly and it</span> <span data-start="75.42" data-end="79.35">actually comes from this product on the</span> <span data-start="79.35" data-end="83.64">cover that's a UK product and it's used</span> <span data-start="83.64" data-end="86.31">in the UK to cover up holes and gaps in</span> <span data-start="86.31" data-end="90.36">cracks in walls and he thought that it's</span> <span data-start="90.36" data-end="93.24">a proper term for describing what Polly</span> <span data-start="93.24" data-end="95.85">filles du in a browser because that's</span> <span data-start="95.85" data-end="97.35">essentially what they do they cover up</span> <span data-start="97.35" data-end="100.92">holes and gaps in browser support his</span> <span data-start="100.92" data-end="105.45">official definition for that was that a</span> <span data-start="105.45" data-end="110.61">polyfill is a piece of code or plugin</span> <span data-start="110.61" data-end="112.829">for example chrome frame could be</span> <span data-start="112.829" data-end="114.72">considered a kind of polyfill that</span> <span data-start="114.72" data-end="116.549">provides the technology the cue the</span> <span data-start="116.549" data-end="118.53">developer expect the browser to provide</span> <span data-start="118.53" data-end="121.649">natively or as Paul Irish poet it's</span> <span data-start="121.649" data-end="123.81">assume that mimics a future API by</span> <span data-start="123.81" data-end="125.78">providing for buck functionality to all</span> <span data-start="125.78" data-end="128.77">browsers so if that sounds a bit unclear</span> </p>
<p><span data-start="128.77" data-end="133.67">I'm pretty sure almost all of you have</span> <span data-start="133.67" data-end="136.64">done this thing at some point this is</span> <span data-start="136.64" data-end="139.7">three lines of code or five depending on</span> <span data-start="139.7" data-end="142.37">how you count them but they essentially</span> <span data-start="142.37" data-end="144.55">have all the elements of a good polyfill</span> <span data-start="144.55" data-end="147.95">they have featured a firstly detect if</span> <span data-start="147.95" data-end="151.19">the feature is present is stream</span> <span data-start="151.19" data-end="153.23">available in strengths and if it's not</span> <span data-start="153.23" data-end="155.209">they go ahead and implement the feature</span> <span data-start="155.209" data-end="158.06">and just this is a very simple feature</span> <span data-start="158.06" data-end="160.79">some one line is enough and then after</span> <span data-start="160.79" data-end="162.709">that body feels included the end</span> <span data-start="162.709" data-end="165.05">developer can use it as if it was</span> <span data-start="165.05" data-end="167.63">provided natively and they can do that</span> <span data-start="167.63" data-end="169.64">thing without being aware that the</span> <span data-start="169.64" data-end="172.34">polyfill actually exists and that's one</span> <span data-start="172.34" data-end="175.37">of the best advantages of polyfills you</span> <span data-start="175.37" data-end="177.769">don't have to learn a new API for</span> <span data-start="177.769" data-end="182.09">example jquery is a script that helps us</span> <span data-start="182.09" data-end="185.06">do some tasks that in which support is a</span> <span data-start="185.06" data-end="188.18">bit flaky for example some I all that</span> <span data-start="188.18" data-end="191">uses a touch event modern browsers you</span> <span data-start="191" data-end="194.26">even listening jquery covers up this</span> <span data-start="194.26" data-end="198.17">inconsistency but you before using it</span> <span data-start="198.17" data-end="200.45">you have to learn in your api it has a</span> <span data-start="200.45" data-end="202.31">whole documentation which you have to</span> <span data-start="202.31" data-end="203.75">learn before you're able to take</span> <span data-start="203.75" data-end="205.73">advantage of it Polly fields are not</span> <span data-start="205.73" data-end="207.799">that jQuery is not a polyfill to an API</span> <span data-start="207.799" data-end="210.769">wrapper with Polly fills you don't need</span> <span data-start="210.769" data-end="212.72">to learn anything you just the spec and</span> <span data-start="212.72" data-end="216.019">then after polyfill is included you can</span> <span data-start="216.019" data-end="218.54">move on user spec as if the</span> <span data-start="218.54" data-end="220.64">functionality was provided natively and</span> <span data-start="220.64" data-end="223.88">after some years pass you can just</span> <span data-start="223.88" data-end="227.39">remove the polyfill and your code still</span> <span data-start="227.39" data-end="229.43">works there's no dependency on the</span> <span data-start="229.43" data-end="231.5">polyfill it's just there to bridge the</span> <span data-start="231.5" data-end="235.579">gap between today and the specs because</span> <span data-start="235.579" data-end="237.739">sometimes we have amazing innovative</span> <span data-start="237.739" data-end="240.739">specs that just aren't supported yet and</span> <span data-start="240.739" data-end="242.18">we want to use them</span> <span data-start="242.18" data-end="245.239">that's what police those are for so how</span> <span data-start="245.239" data-end="247.73">can you make your own polyfill there's</span> <span data-start="247.73" data-end="249.95">like ways with so in that very simple</span> <span data-start="249.95" data-end="253.25">example of trim there are three basic</span> <span data-start="253.25" data-end="255.769">steps the first step is feature</span> <span data-start="255.769" data-end="258.139">detection is this feature already</span> <span data-start="258.139" data-end="260.479">present because if it is we don't need</span> <span data-start="260.479" data-end="262.43">to do anything we just use the native</span> <span data-start="262.43" data-end="264.77">implementation if the native</span> <span data-start="264.77" data-end="266.509">implementation is buggy and we need to</span> <span data-start="266.509" data-end="268.039">fix it somehow that's not really a</span> <span data-start="268.039" data-end="272.12">polyfill if it's not present we go to</span> <span data-start="272.12" data-end="275.02">the second step which is implementation</span> <span data-start="275.02" data-end="277.97">this is the most clever part most tricky</span> <span data-start="277.97" data-end="280.16">part where you actually have to think of</span> <span data-start="280.16" data-end="282.949">a way to emulate the functionality</span> <span data-start="282.949" data-end="285.5">that's missing in some cases it simple</span> <span data-start="285.5" data-end="288.229">like in the new xmas script methods for</span> <span data-start="288.229" data-end="290.03">strings and raise that these are the</span> <span data-start="290.03" data-end="292.31">simplest body fills in some cases it's</span> <span data-start="292.31" data-end="294.83">very tricky like for example in CSS boy</span> <span data-start="294.83" data-end="297.52">feels these are the hardest of all and</span> <span data-start="297.52" data-end="299.81">after you've done you're done with your</span> <span data-start="299.81" data-end="303.289">code and you've implemented the feature</span> <span data-start="303.289" data-end="307.13">the third part is distribution you have</span> <span data-start="307.13" data-end="309.02">your amazing code you're proud of it but</span> <span data-start="309.02" data-end="311.15">other people need to be able to find it</span> <span data-start="311.15" data-end="314.479">and use it and you you need to publish</span> <span data-start="314.479" data-end="318.349">it somewhere and in format that's easy</span> <span data-start="318.349" data-end="320.78">for them to use and you need to actually</span> <span data-start="320.78" data-end="323.81">let people know by including it in the</span> <span data-start="323.81" data-end="326.63">different lists of polyfills that are</span> <span data-start="326.63" data-end="330.62">available so let's talk a bit about the</span> <span data-start="330.62" data-end="332.449">first part that's feature detection I</span> <span data-start="332.449" data-end="334.94">think this is one of the most important</span> <span data-start="334.94" data-end="337.52">parts of polyfills because if you do</span> <span data-start="337.52" data-end="340.19">that right you save on lots of</span> <span data-start="340.19" data-end="342.169">performance if if you the feature is</span> <span data-start="342.169" data-end="344.87">already present and you move ahead and</span> <span data-start="344.87" data-end="347.72">implement it again that's a waste you</span> <span data-start="347.72" data-end="350.479">don't need that waste you need to</span> <span data-start="350.479" data-end="351.979">actually rely on the feature if it is</span> <span data-start="351.979" data-end="356.78">there so the two main strategies we use</span> <span data-start="356.78" data-end="360.86">when featured the texting are a check if</span> <span data-start="360.86" data-end="363.099">something exists this is the simplest</span> <span data-start="363.099" data-end="366.62">feature detection method you just</span> <span data-start="366.62" data-end="368.93">if an API is there for properties their</span> <span data-start="368.93" data-end="371.36">function is there and if it is you</span> <span data-start="371.36" data-end="374">assume that the feature is present this</span> <span data-start="374" data-end="375.889">is much better for performance because</span> <span data-start="375.889" data-end="377.75">you just check existence of a property</span> <span data-start="377.75" data-end="380.9">and it's much much simpler code usually</span> <span data-start="380.9" data-end="382.88">it's just one line but sometimes it</span> <span data-start="382.88" data-end="385.19">doesn't work sometimes there are false</span> <span data-start="385.19" data-end="387.199">positives or sometimes it's just not</span> <span data-start="387.199" data-end="389.02">possible to detect a feature by</span> <span data-start="389.02" data-end="392.3">detecting if something exists which</span> <span data-start="392.3" data-end="395.54">brings us to the second core idea trying</span> <span data-start="395.54" data-end="397.88">something and then trying to check if it</span> <span data-start="397.88" data-end="401.21">worked that's much more reliable because</span> <span data-start="401.21" data-end="403.039">you actually check the functionality you</span> <span data-start="403.039" data-end="404.75">don't assume that just because it's</span> <span data-start="404.75" data-end="408.16">there it works but it's also much more</span> <span data-start="408.16" data-end="412.22">verbose code it's much bigger and it's</span> <span data-start="412.22" data-end="414.62">much slower than just checking if</span> <span data-start="414.62" data-end="416.87">something is there but sometimes it's</span> <span data-start="416.87" data-end="419.99">the only way and the third method is a</span> <span data-start="419.99" data-end="422.3">combination of the previous two you</span> <span data-start="422.3" data-end="424.85">first try something and then you check</span> <span data-start="424.85" data-end="426.889">did it actually work was something</span> <span data-start="426.889" data-end="431.24">created so let's try and see how we can</span> <span data-start="431.24" data-end="435.68">detect a few common CSS HTML and</span> </p>
<p><span data-start="435.68" data-end="437.87">JavaScript features that we commonly</span> <span data-start="437.87" data-end="442.94">need the first way which uses the which</span> <span data-start="442.94" data-end="444.83">uses the first core idea taking if</span> <span data-start="444.83" data-end="447.31">something exists is checking about</span> <span data-start="447.31" data-end="450.47">JavaScript API support like for example</span> <span data-start="450.47" data-end="453.47">is local storage on window is geo</span> <span data-start="453.47" data-end="456.169">location in the navigator object or is</span> <span data-start="456.169" data-end="460.039">query selector and document as you can</span> <span data-start="460.039" data-end="462.83">see that's really easy really small we</span> <span data-start="462.83" data-end="467.41">just use one line of code for every API</span> <span data-start="467.41" data-end="470.389">checking if CSS properties are supported</span> <span data-start="470.389" data-end="472.729">is about as straight forward we just</span> <span data-start="472.729" data-end="474.71">create a dummy element and we check if</span> <span data-start="474.71" data-end="477.05">the property is in the style object in</span> <span data-start="477.05" data-end="479.27">actual cases you shouldn't create a new</span> <span data-start="479.27" data-end="481.91">element every time I'm just creating in</span> <span data-start="481.91" data-end="483.53">your element here just to make it</span> <span data-start="483.53" data-end="485.009">simpler but in</span> <span data-start="485.009" data-end="486.599">actually use cases you should cash it</span> <span data-start="486.599" data-end="488.61">because it's not really a good idea to</span> <span data-start="488.61" data-end="490.559">just create one every time its</span> <span data-start="490.559" data-end="492.33">properties function is called or maybe</span> <span data-start="492.33" data-end="493.8">you should also catch the results</span> <span data-start="493.8" data-end="496.169">because if it's supported it will always</span> <span data-start="496.169" data-end="500.189">be supported another method of checking</span> <span data-start="500.189" data-end="503.339">whether CSS properties are supported is</span> <span data-start="503.339" data-end="505.74">by using the second core idea which is</span> <span data-start="505.74" data-end="509.219">especially useful if you want to check</span> <span data-start="509.219" data-end="511.459">multiple versions of that property like</span> <span data-start="511.459" data-end="515.399">multiple prefixes so you can still</span> <span data-start="515.399" data-end="517.5">follow the previous method but you will</span> <span data-start="517.5" data-end="519.389">need to come up case your property and</span> <span data-start="519.389" data-end="521.579">you will need to create two camelcase</span> <span data-start="521.579" data-end="523.56">versions of your property because for</span> <span data-start="523.56" data-end="526.05">example border-radius that's without a</span> <span data-start="526.05" data-end="528.209">prefix is camel case to board the radius</span> <span data-start="528.209" data-end="530.79">without and the first B is this lower</span> <span data-start="530.79" data-end="533.73">case most border radius is camel cast</span> <span data-start="533.73" data-end="537.11">with a capital m and then the bees also</span> <span data-start="537.11" data-end="541.139">uppercase so in this method we I trade</span> <span data-start="541.139" data-end="543.99">over all the prefixes we get the prefix</span> <span data-start="543.99" data-end="547.079">version of the property and then we set</span> <span data-start="547.079" data-end="549.63">the CSS text of the dummy element to a</span> <span data-start="549.63" data-end="551.67">declaration that uses that property and</span> <span data-start="551.67" data-end="554.43">because inherit is supported by every</span> </p>
<p><span data-start="554.43" data-end="557.55">CSS property it should get accepted if</span> <span data-start="557.55" data-end="559.649">the property is supported it should</span> <span data-start="559.649" data-end="562.56">accept inherit so then we try to get the</span> <span data-start="562.56" data-end="565.05">value of that property and if there's a</span> <span data-start="565.05" data-end="567.389">value we returned that version of the</span> <span data-start="567.389" data-end="568.709">property because we know that property</span> <span data-start="568.709" data-end="571.05">is supported if none of these prefix</span> <span data-start="571.05" data-end="573.959">properties are supported then in this</span> <span data-start="573.959" data-end="576.48">case we return  in if the</span> <span data-start="576.48" data-end="578.069">function was more correct it should</span> <span data-start="578.069" data-end="583.8">return node checking CSS values requires</span> <span data-start="583.8" data-end="585.93">a bit of a test there's nothing we can</span> <span data-start="585.93" data-end="588.839">check existence for so we actually need</span> <span data-start="588.839" data-end="592.86">to apply the property we just choose any</span> <span data-start="592.86" data-end="595.47">rgba value it would work and actually</span> <span data-start="595.47" data-end="597.54">that method is not just for our GBA it</span> <span data-start="597.54" data-end="599.61">applies for any kind of CSS property for</span> <span data-start="599.61" data-end="603.329">calc for hsla for mozilla before L</span> <span data-start="603.329" data-end="605.85">for the element function anything so you</span> <span data-start="605.85" data-end="608.369">just choose one value that uses this</span> <span data-start="608.369" data-end="610.829">feature and then you check was there an</span> <span data-start="610.829" data-end="614.429">error is there did the property keep its</span> <span data-start="614.429" data-end="616.559">value because browsers just ditch</span> <span data-start="616.559" data-end="619.319">anything in CSS that doesn't work if you</span> <span data-start="619.319" data-end="620.97">provide an invalid property it gets</span> <span data-start="620.97" data-end="622.379">dropped if you provide an invalid value</span> <span data-start="622.379" data-end="625.259">it gets dropped so if it actually kept</span> <span data-start="625.259" data-end="629.939">that value it means it's supported CSS</span> <span data-start="629.939" data-end="632.459">selectors are also a bit tricky you need</span> <span data-start="632.459" data-end="634.889">to create a new style element you just</span> <span data-start="634.889" data-end="636.809">create a simple row by using that</span> <span data-start="636.809" data-end="638.759">selector it's an empty roll it doesn't</span> <span data-start="638.759" data-end="640.41">need to create it doesn't need to</span> <span data-start="640.41" data-end="643.739">contain any declarations just the just</span> <span data-start="643.739" data-end="645.929">as long as it uses the selector and we</span> <span data-start="645.929" data-end="647.249">append it to the document because</span> <span data-start="647.249" data-end="648.839">otherwise if it's just in the dome</span> <span data-start="648.839" data-end="653.149">hyperspace it won't it won't get applied</span> <span data-start="653.149" data-end="656.61">so then we check it was an errand</span> <span data-start="656.61" data-end="659.489">created in this case I actually attract</span> <span data-start="659.489" data-end="661.649">if there's a first CSS role you could</span> <span data-start="661.649" data-end="663.54">just check the length of CSS rules it</span> <span data-start="663.54" data-end="667.049">it's the same thing and we clean up</span> <span data-start="667.049" data-end="668.97">after all cells but by removing the</span> <span data-start="668.97" data-end="671.009">element we don't need we don't want to</span> <span data-start="671.009" data-end="672.959">leave it in the document and mess up</span> <span data-start="672.959" data-end="676.079">with the end-users code and we return</span> <span data-start="676.079" data-end="679.73">the result if it was there or not</span> <span data-start="679.73" data-end="682.739">detecting HTML elements is really hard</span> <span data-start="682.739" data-end="685.11">to do in a generic way this could be a</span> <span data-start="685.11" data-end="686.759">very optimistic thought because if you</span> <span data-start="686.759" data-end="689.309">read the dome specification it says that</span> <span data-start="689.309" data-end="691.049">every element that's not supported</span> <span data-start="691.049" data-end="693.299">should inherit from the HTML unknown</span> <span data-start="693.299" data-end="696.209">element interface however browsers arms</span> <span data-start="696.209" data-end="699.089">aren't expected to expose these</span> <span data-start="699.089" data-end="701.339">interfaces there it's not required as</span> <span data-start="701.339" data-end="702.929">long as they use them internally and</span> <span data-start="702.929" data-end="706.799">also some browsers don't even follow the</span> <span data-start="706.799" data-end="709.29">spec and they don't use that at all for</span> <span data-start="709.29" data-end="711.989">in some browsers it in here unknown</span> <span data-start="711.989" data-end="713.97">elements inherit from the HTML element</span> <span data-start="713.97" data-end="717.779">interface it's really inconsistent so we</span> <span data-start="717.779" data-end="721.079">can't do that it's it's nice but it</span> <span data-start="721.079" data-end="726.899">won't work so what we have to do instead</span> <span data-start="726.899" data-end="729.689">his check for known properties or known</span> <span data-start="729.689" data-end="731.73">methods are they present in a new</span> <span data-start="731.73" data-end="736.079">instance of the element so it's a bit</span> <span data-start="736.079" data-end="738.119">lucky because we don't know if they</span> <span data-start="738.119" data-end="741.749">actually work but it gets it gets the</span> <span data-start="741.749" data-end="744.66">job done it works it does what we do in</span> <span data-start="744.66" data-end="748.17">most cases so for example if we want to</span> <span data-start="748.17" data-end="750.3">check canvas support which i give the</span> <span data-start="750.3" data-end="752.279">get context method is thereafter we want</span> <span data-start="752.279" data-end="754.8">to check if video is supported which I</span> <span data-start="754.8" data-end="757.199">could play method if if we want it to be</span> <span data-start="757.199" data-end="758.699">a bit more accurate we could actually</span> <span data-start="758.699" data-end="760.35">check if it's a function and not just</span> <span data-start="760.35" data-end="764.759">the property HTML attributes are usually</span> <span data-start="764.759" data-end="766.709">pretty straightforward of course there</span> <span data-start="766.709" data-end="768.48">are caveats to that which will see</span> <span data-start="768.48" data-end="771.3">afterwards but in the general case you</span> <span data-start="771.3" data-end="775.47">just assign you just check if the the</span> </p>
<p><span data-start="775.47" data-end="779.04">Gator is present because browsers assign</span> <span data-start="779.04" data-end="781.319">a getter through every attribute that</span> <span data-start="781.319" data-end="783.629">they support if they support placeholder</span> <span data-start="783.629" data-end="785.49">attribute on inputs they also make a</span> <span data-start="785.49" data-end="787.889">placeholder gather and setter or if they</span> <span data-start="787.889" data-end="790.86">support multiple file inputs they create</span> <span data-start="790.86" data-end="793.379">a multiple accessor so we can just check</span> <span data-start="793.379" data-end="795.389">it if that's present it won't have a</span> <span data-start="795.389" data-end="799.17">value so checking if input dot multiple</span> <span data-start="799.17" data-end="801.54">has it through the volume won't work but</span> <span data-start="801.54" data-end="803.99">it will be present it will be defined</span> <span data-start="803.99" data-end="807.569">and attribute values are about the same</span> <span data-start="807.569" data-end="812.66">as CSS values you just say you just set</span> <span data-start="812.66" data-end="816.42">appropriate value and you check if the</span> <span data-start="816.42" data-end="819.029">browser actually kept it for example in</span> <span data-start="819.029" data-end="821.16">this case type is a supported attribute</span> <span data-start="821.16" data-end="823.759">on inputs every browser supports it but</span> <span data-start="823.759" data-end="827.879">some values aren't Lee is supported for</span> <span data-start="827.879" data-end="830.22">example the number type which is used to</span> <span data-start="830.22" data-end="832.199">create a spinner some browsers don't</span> <span data-start="832.199" data-end="835.86">support that yet like Firefox or ie so</span> <span data-start="835.86" data-end="838.23">which we set the type to a number and</span> <span data-start="838.23" data-end="839.79">then we check if the browser actually</span> <span data-start="839.79" data-end="842.49">kept that because if it doesn't it</span> <span data-start="842.49" data-end="845.61">usually reverts back to the text value</span> <span data-start="845.61" data-end="849.24">which is the default for events we can</span> <span data-start="849.24" data-end="851.79">do something similar at least for events</span> <span data-start="851.79" data-end="852.85">that have a</span> <span data-start="852.85" data-end="855.67">an accessor like on something for</span> <span data-start="855.67" data-end="859.66">example own mouth center we can set them</span> <span data-start="859.66" data-end="861.99">to a very simple function like return</span> <span data-start="861.99" data-end="865">nothing at which does nothing and then</span> <span data-start="865" data-end="866.259">check was there a function actually</span> <span data-start="866.259" data-end="870.009">created on that element if a function</span> <span data-start="870.009" data-end="872.31">was created it means it's supported if</span> <span data-start="872.31" data-end="875.589">nothing was if nothing is there it means</span> <span data-start="875.589" data-end="878.589">it's not unfortunately there's no method</span> <span data-start="878.589" data-end="882.31">there's no way to detect events like Dom</span> <span data-start="882.31" data-end="886.029">content loaded or mutation events we</span> <span data-start="886.029" data-end="887.769">don't have a way for that we have to</span> <span data-start="887.769" data-end="890.29">detect something else that we know that</span> <span data-start="890.29" data-end="892.269">if its present these events are also</span> <span data-start="892.269" data-end="894.43">present for mutation events we can</span> <span data-start="894.43" data-end="896.98">actually change the dolmen see if they</span> <span data-start="896.98" data-end="899.74">got if they got fired but it's a bit</span> <span data-start="899.74" data-end="903.279">it's much more messy than that and of</span> <span data-start="903.279" data-end="906.19">course even the examples I showed aren't</span> <span data-start="906.19" data-end="908.079">always that simple there are browser</span> <span data-start="908.079" data-end="911.829">bugs and everything so for example we</span> <span data-start="911.829" data-end="914.139">checked if local storage is supported by</span> <span data-start="914.139" data-end="915.819">checking if its present on the window</span> <span data-start="915.819" data-end="919.75">object but in firefox 3.6 accessing</span> <span data-start="919.75" data-end="922.63">local storage throws an error so you</span> <span data-start="922.63" data-end="925.06">also need to account for that or for</span> <span data-start="925.06" data-end="927.67">example opera doesn't support pointer</span> <span data-start="927.67" data-end="930.49">events on HTML elements but it still has</span> <span data-start="930.49" data-end="933.009">them in the style object because it</span> <span data-start="933.009" data-end="938.22">supports them in SVG so in a wish before</span> <span data-start="938.22" data-end="941.139">actually deciding on a feature detection</span> <span data-start="941.139" data-end="944.259">code we should really test in lots and</span> <span data-start="944.259" data-end="946">lots of browsers to see if it actually</span> <span data-start="946" data-end="948.459">works or maybe check the moderniser</span> <span data-start="948.459" data-end="951.189">source to see how they did it because</span> <span data-start="951.189" data-end="953.649">they need to test in many many browsers</span> <span data-start="953.649" data-end="957.85">to develop their framework and of course</span> <span data-start="957.85" data-end="959.439">there are some features that nobody can</span> <span data-start="959.439" data-end="965.38">detect so far the the undetectable some</span> <span data-start="965.38" data-end="967.93">features just you can't do anything</span> <span data-start="967.93" data-end="970.55">about them even modernizer can't detect</span> <span data-start="970.55" data-end="972.93">pointer events an opera used to be one</span> <span data-start="972.93" data-end="974.519">of them because it kind of falls</span> <span data-start="974.519" data-end="977.37">positive but now some clever guy whose</span> <span data-start="977.37" data-end="979.86">name I forget actually came up with the</span> <span data-start="979.86" data-end="982.17">detection method he's setting the</span> <span data-start="982.17" data-end="983.97">property and then she's checking the</span> <span data-start="983.97" data-end="986.209">computed style to see if it got applied</span> <span data-start="986.209" data-end="988.47">so now we can't detect pointer events</span> <span data-start="988.47" data-end="992.04">and the cord isn't that big but there</span> <span data-start="992.04" data-end="995.459">are many other properties that features</span> <span data-start="995.459" data-end="997.319">that can't be detected currently maybe</span> <span data-start="997.319" data-end="1001.49">you can think of a way we need that kind</span> <span data-start="1001.49" data-end="1003.709">of thought we need people to come up</span> <span data-start="1003.709" data-end="1005.42">with new ways to detect features just</span> <span data-start="1005.42" data-end="1006.8">because there they are on that list</span> <span data-start="1006.8" data-end="1009.139">doesn't mean they can't be detected it</span> <span data-start="1009.139" data-end="1011.529">just means we're not clever enough yet</span> <span data-start="1011.529" data-end="1016.55">maybe you are softer we've done with</span> <span data-start="1016.55" data-end="1019.309">feature detection we're going to the</span> <span data-start="1019.309" data-end="1021.079">interesting part with this</span> <span data-start="1021.079" data-end="1023.839">implementation actually making the stuff</span> <span data-start="1023.839" data-end="1028.61">work the first rule I think every</span> <span data-start="1028.61" data-end="1031.429">polyfill should follow is following the</span> <span data-start="1031.429" data-end="1035.839">spec not that kind of follow actually</span> <span data-start="1035.839" data-end="1038.6">being faithful to the spec and doing and</span> <span data-start="1038.6" data-end="1041.059">fit fulfilling the expectations that</span> <span data-start="1041.059" data-end="1043.549">people have is there's no use if you're</span> <span data-start="1043.549" data-end="1045.53">making a bully feel that behaves in a</span> <span data-start="1045.53" data-end="1047.839">way that you think is better but it's</span> <span data-start="1047.839" data-end="1049.28">not what's expected it will be</span> <span data-start="1049.28" data-end="1051.26">inconsistent with native implementations</span> <span data-start="1051.26" data-end="1054.049">it will be inconsistent with what people</span> <span data-start="1054.049" data-end="1055.61">have learned it won't really be a</span> <span data-start="1055.61" data-end="1057.59">polyfill it will be an API wrapper</span> <span data-start="1057.59" data-end="1060.53">masquerading as a polyfill but however</span> <span data-start="1060.53" data-end="1063.71">as much as it's important to follow the</span> <span data-start="1063.71" data-end="1066.58">spec you should also know when to stop</span> <span data-start="1066.58" data-end="1068.419">because you don't want to put your</span> <span data-start="1068.419" data-end="1071.44">polyfill to end up like this fine lady</span> <span data-start="1071.44" data-end="1074.63">you don't want your polyfill to be</span> <span data-start="1074.63" data-end="1077.899">cluttered for example I fell into that</span> <span data-start="1077.899" data-end="1082.7">this trap when i created a polyfill for</span> <span data-start="1082.7" data-end="1087.23">the html5 progress element I wanted it</span> <span data-start="1087.23" data-end="1090.08">to be as correct as possible I wanted it</span> <span data-start="1090.08" data-end="1092.72">to respond to property changes and</span> <span data-start="1092.72" data-end="1095.48">attribute changes and I wanted</span> </p>
<p><span data-start="1095.48" data-end="1098.21">CSS to be super flexible I wanted to</span> <span data-start="1098.21" data-end="1102.77">make the best progress polyfill and I</span> <span data-start="1102.77" data-end="1106.69">ended up with some code that's 200 lines</span> <span data-start="1106.69" data-end="1111.26">just to support progress bars who who</span> <span data-start="1111.26" data-end="1115.01">want to use 200 lines just to be able to</span> <span data-start="1115.01" data-end="1117.95">use the html5 progress bars your</span> <span data-start="1117.95" data-end="1120.17">polyfills need to be small so that</span> <span data-start="1120.17" data-end="1124.7">people will want to include them without</span> <span data-start="1124.7" data-end="1127.46">introducing an overhead because even</span> <span data-start="1127.46" data-end="1129.11">when they're not executed because the</span> <span data-start="1129.11" data-end="1131.11">browser already supports the feature</span> <span data-start="1131.11" data-end="1134.18">usually they get downloaded and we don't</span> <span data-start="1134.18" data-end="1136.16">need we don't want to add that much</span> <span data-start="1136.16" data-end="1138.95">bandwidth of course there are script</span> <span data-start="1138.95" data-end="1140.93">loaders that only conditionally load</span> <span data-start="1140.93" data-end="1143.15">polyfills but in the general case</span> <span data-start="1143.15" data-end="1145.67">they're just included along with any</span> <span data-start="1145.67" data-end="1150.02">other script a case that's quite</span> <span data-start="1150.02" data-end="1153.89">tempting to go overboard is a polyfill</span> <span data-start="1153.89" data-end="1156.98">for document head how many of you</span> <span data-start="1156.98" data-end="1162.29">actually have used document head it's</span> <span data-start="1162.29" data-end="1166.04">the same thing as document body but it</span> <span data-start="1166.04" data-end="1168.95">refers to the head element it's an html5</span> <span data-start="1168.95" data-end="1171.62">thing and it seems that it's really easy</span> <span data-start="1171.62" data-end="1174.2">to create a pulley feel for it you just</span> <span data-start="1174.2" data-end="1176.81">check if document head has a value and</span> <span data-start="1176.81" data-end="1179.51">if it doesn't you just assign the first</span> <span data-start="1179.51" data-end="1183.17">head element to it but however there's a</span> <span data-start="1183.17" data-end="1185.48">big problem in that and I'm pretty sure</span> <span data-start="1185.48" data-end="1187.82">some of you have already started seeing</span> <span data-start="1187.82" data-end="1191.99">it if your document only has one frame</span> <span data-start="1191.99" data-end="1196.61">that's fine it will work but if you have</span> <span data-start="1196.61" data-end="1198.53">multiple frames and you try to actually</span> <span data-start="1198.53" data-end="1202.07">use that in the other frame I want you</span> <span data-start="1202.07" data-end="1205.55">will get a type error it yes it breaks</span> <span data-start="1205.55" data-end="1208.63">expectations but what's the alternative</span> <span data-start="1208.63" data-end="1212.39">what would you do not to avoid this the</span> <span data-start="1212.39" data-end="1213.2">only solution</span> </p>
<p><span data-start="1213.2" data-end="1216.71">Shin is to hijack every frame in the</span> <span data-start="1216.71" data-end="1219.049">document monitor when frames get added</span> <span data-start="1219.049" data-end="1222.889">and also fixed the document head for</span> <span data-start="1222.889" data-end="1224.809">them as well and sometimes windows get</span> <span data-start="1224.809" data-end="1227">opened with window open so we should</span> <span data-start="1227" data-end="1229.779">replace the window open method and and</span> <span data-start="1229.779" data-end="1232.76">fix that too I mean it gets really messy</span> <span data-start="1232.76" data-end="1237.44">we don't want that that's fine the two</span> <span data-start="1237.44" data-end="1239.179">line polyfill is what most people want</span> <span data-start="1239.179" data-end="1241.01">they don't want a huge script that's</span> <span data-start="1241.01" data-end="1245.59">super intrusive and and easy to break</span> <span data-start="1245.59" data-end="1249.019">just for document head after all instead</span> <span data-start="1249.019" data-end="1251.33">of doing that I'll just assign the head</span> <span data-start="1251.33" data-end="1253.07">and the middle to have arrival and get</span> <span data-start="1253.07" data-end="1258.47">it over with the second rule I think</span> <span data-start="1258.47" data-end="1260.63">most polyfill should follow is not being</span> <span data-start="1260.63" data-end="1264.23">intrusive like I said polyfill stood</span> <span data-start="1264.23" data-end="1268.07">follow expectations and the expectations</span> <span data-start="1268.07" data-end="1271.07">aren't that you hijack your host</span> <span data-start="1271.07" data-end="1276.23">document with a relevant crap try not to</span> <span data-start="1276.23" data-end="1278.059">replace the target element with another</span> <span data-start="1278.059" data-end="1281.09">for example even if you're super careful</span> <span data-start="1281.09" data-end="1283.389">and you copy old properties and all</span> <span data-start="1283.389" data-end="1285.59">attributes and everything at the very</span> <span data-start="1285.59" data-end="1287.48">least you'll wipe out all event</span> <span data-start="1287.48" data-end="1292.309">listeners and it's really hard for the</span> <span data-start="1292.309" data-end="1297.32">end user to work with that also try not</span> <span data-start="1297.32" data-end="1300.289">to manipulate unrelated elements like</span> <span data-start="1300.289" data-end="1301.88">the body it might be tempting to add a</span> <span data-start="1301.88" data-end="1304.07">class to the body to use it in your CSS</span> <span data-start="1304.07" data-end="1306.26">if you're prolly fuel comes with the CSS</span> <span data-start="1306.26" data-end="1308.87">like HTML polyfills for example it might</span> <span data-start="1308.87" data-end="1310.46">be tempting to add a class to the body</span> <span data-start="1310.46" data-end="1313.46">to which corresponds to whether that</span> <span data-start="1313.46" data-end="1316.22">feature is supported or not but you</span> <span data-start="1316.22" data-end="1318.019">should try to find another way to do it</span> <span data-start="1318.019" data-end="1320.419">because the the horse document might</span> <span data-start="1320.419" data-end="1323.36">actually depend on how many classes the</span> <span data-start="1323.36" data-end="1326.659">body has the right they might have a</span> <span data-start="1326.659" data-end="1329.12">selector in use in their CSS about the</span> <span data-start="1329.12" data-end="1331.19">body not having a class or if the body</span> <span data-start="1331.19" data-end="1332.929">having only one class or something like</span> <span data-start="1332.929" data-end="1333.57">that</span> <span data-start="1333.57" data-end="1335.4">that will break and they'll be wondering</span> <span data-start="1335.4" data-end="1337.92">why did it break they'll find out it's</span> <span data-start="1337.92" data-end="1341.86">your bully film they won't like it much</span> <span data-start="1341.87" data-end="1344.04">adding extra elements sometimes is</span> <span data-start="1344.04" data-end="1346.47">inevitable but you should try to be as</span> <span data-start="1346.47" data-end="1348.72">conservative as possible for example if</span> <span data-start="1348.72" data-end="1351.03">you're making an HTML polyfill try to</span> <span data-start="1351.03" data-end="1353.07">take advantage of the pseudo elements</span> <span data-start="1353.07" data-end="1355.86">instead of adding new elements to the</span> <span data-start="1355.86" data-end="1357.84">dome that break existing selectors that</span> <span data-start="1357.84" data-end="1359.79">are already in the horse document for</span> <span data-start="1359.79" data-end="1362.04">example especially now with css3</span> <span data-start="1362.04" data-end="1366.09">selectors we have many CSS rules that</span> <span data-start="1366.09" data-end="1368.31">depend on the play on the place an</span> <span data-start="1368.31" data-end="1371.07">element has in the document on its index</span> <span data-start="1371.07" data-end="1373.61">among its siblings on how many elements</span> <span data-start="1373.61" data-end="1377.1">something has so you're breaking this if</span> <span data-start="1377.1" data-end="1380.01">you are the extra elements try to avoid</span> <span data-start="1380.01" data-end="1383.97">it also manipulating existing attributes</span> <span data-start="1383.97" data-end="1387.21">is sometimes the only way but try to</span> <span data-start="1387.21" data-end="1389.73">avoid that too like for example going</span> <span data-start="1389.73" data-end="1391.32">through the elements you care about and</span> <span data-start="1391.32" data-end="1394.05">changing their IDs or adding ideas or</span> <span data-start="1394.05" data-end="1396.69">stuff like that so you have to do it</span> <span data-start="1396.69" data-end="1401.1">sometimes but it breaks expectations for</span> <span data-start="1401.1" data-end="1404.24">the horse document so try to avoid it I</span> <span data-start="1404.24" data-end="1408.03">guess I don't need to tell you that that</span> <span data-start="1408.03" data-end="1410.22">you should try not to pollute the global</span> <span data-start="1410.22" data-end="1412.08">namespace probably already know it but I</span> <span data-start="1412.08" data-end="1416.16">had to to add it and also that's quite</span> <span data-start="1416.16" data-end="1419.76">obvious too but sometimes it breaks try</span> <span data-start="1419.76" data-end="1422.76">not one leaky CSS like for example you</span> <span data-start="1422.76" data-end="1424.62">should namespace your CSS to only apply</span> <span data-start="1424.62" data-end="1428.19">to what you add to what you target don't</span> <span data-start="1428.19" data-end="1430.77">add CSS like for example an element</span> <span data-start="1430.77" data-end="1432.39">selector that would leak in other</span> <span data-start="1432.39" data-end="1436.11">elements and not just your the target of</span> <span data-start="1436.11" data-end="1438.27">your polyfill and of course all these</span> <span data-start="1438.27" data-end="1440.99">it's just guidelines rules of thumb in</span> <span data-start="1440.99" data-end="1443.79">most cases you will need to break at</span> <span data-start="1443.79" data-end="1446.31">least one of them in most of oil fields</span> <span data-start="1446.31" data-end="1448.83">at least in most HTML polyfills but just</span> <span data-start="1448.83" data-end="1451.23">try to only do them if you really really</span> <span data-start="1451.23" data-end="1456.44">have to</span> <span data-start="1456.45" data-end="1458.919">also remember when we said at the</span> <span data-start="1458.919" data-end="1460.75">beginning that one of the biggest</span> <span data-start="1460.75" data-end="1464.89">advantages of polyfills is that they you</span> <span data-start="1464.89" data-end="1466.48">will be able to remove them after a</span> <span data-start="1466.48" data-end="1468.01">certain point maybe after some months</span> <span data-start="1468.01" data-end="1470.88">maybe after some years when support gets</span> <span data-start="1470.88" data-end="1473.26">better and you don't need that anymore</span> <span data-start="1473.26" data-end="1474.85">because the browsers that don't support</span> <span data-start="1474.85" data-end="1477.07">that feature a really old and nobody</span> <span data-start="1477.07" data-end="1478.69">uses them anymore so you don't want the</span> <span data-start="1478.69" data-end="1483.25">overhead so you're you should be able to</span> <span data-start="1483.25" data-end="1484.9">remove that polyfill and you're that</span> <span data-start="1484.9" data-end="1487.6">your code still works without the poly</span> <span data-start="1487.6" data-end="1489.46">filled in in browsers that support these</span> <span data-start="1489.46" data-end="1492.309">feature so you shouldn't require from</span> <span data-start="1492.309" data-end="1494.47">the end user of your polyfill to do</span> <span data-start="1494.47" data-end="1497.559">stuff like this feature detection</span> <span data-start="1497.559" data-end="1499.9">belongs in your polyfill gathering on</span> <span data-start="1499.9" data-end="1501.96">the elements and fixing them also</span> <span data-start="1501.96" data-end="1505.6">depends on your polyfill belongs to your</span> <span data-start="1505.6" data-end="1508.66">poi fill it might sound obvious but it's</span> <span data-start="1508.66" data-end="1511.36">it's really surprising how many people</span> <span data-start="1511.36" data-end="1513.58">don't follow that they make a function</span> <span data-start="1513.58" data-end="1515.559">that implements some functionality and</span> <span data-start="1515.559" data-end="1517.51">then they're like yeah use that function</span> <span data-start="1517.51" data-end="1520.179">on any element you want to fix and they</span> <span data-start="1520.179" data-end="1522.13">don't actually do that you know they</span> <span data-start="1522.13" data-end="1524.26">don't actually do anything except</span> <span data-start="1524.26" data-end="1526.39">defining that function so to use their</span> <span data-start="1526.39" data-end="1528.22">polyfill you have to actually add</span> </p>
<p><span data-start="1528.22" data-end="1530.429">JavaScript code get all these elements</span> <span data-start="1530.429" data-end="1533.85">yourself and apply that function to them</span> <span data-start="1533.85" data-end="1537.04">so afterwards when the time comes to</span> <span data-start="1537.04" data-end="1540.1">remove the polyfill your code will break</span> <span data-start="1540.1" data-end="1542.86">for example in this case it calls the</span> <span data-start="1542.86" data-end="1545.74">net method over details object when the</span> <span data-start="1545.74" data-end="1547.96">polyfill gets removed this will throw an</span> <span data-start="1547.96" data-end="1551.07">error there's no details element defined</span> <span data-start="1551.07" data-end="1554.35">so that's that's not how polyfill should</span> <span data-start="1554.35" data-end="1560.77">work also your polyfill will be applied</span> <span data-start="1560.77" data-end="1564.28">in many cases in many different cases in</span> <span data-start="1564.28" data-end="1566.47">many many times the assumptions you make</span> <span data-start="1566.47" data-end="1569.89">will be wrong many times we tend to make</span> <span data-start="1569.89" data-end="1572.23">assumptions to make our job easier but</span> <span data-start="1572.23" data-end="1574.14">those assumptions don't really don't</span> <span data-start="1574.14" data-end="1576.45">apply to every dog any document and</span> <span data-start="1576.45" data-end="1578.91">sometimes we know that and we just</span> <span data-start="1578.91" data-end="1580.62">choose to make these assumptions and</span> <span data-start="1580.62" data-end="1583.77">some other times we just didn't think of</span> <span data-start="1583.77" data-end="1587.25">that and if you actually have to make an</span> <span data-start="1587.25" data-end="1588.81">assumption for your polyfill to work</span> <span data-start="1588.81" data-end="1590.37">because maybe otherwise your code will</span> <span data-start="1590.37" data-end="1592.74">be 10 times as big that's fine but you</span> <span data-start="1592.74" data-end="1594.3">should at least know that you're making</span> <span data-start="1594.3" data-end="1596.4">this assumption it should be a known</span> <span data-start="1596.4" data-end="1601.44">unknown so attributes and properties</span> <span data-start="1601.44" data-end="1604.23">will change there will be other scripts</span> <span data-start="1604.23" data-end="1606.24">on that page it won't be just yours and</span> <span data-start="1606.24" data-end="1609.3">those scripts will actually change might</span> <span data-start="1609.3" data-end="1610.68">actually change attributes and</span> <span data-start="1610.68" data-end="1614.64">properties also new elements might get</span> <span data-start="1614.64" data-end="1617.1">at it maybe by via Ajax or maybe they'll</span> <span data-start="1617.1" data-end="1619.89">get created by some other script but the</span> <span data-start="1619.89" data-end="1622.47">thing is if you make an example for</span> <span data-start="1622.47" data-end="1625.58">example for the html5 details element</span> <span data-start="1625.58" data-end="1628.77">nothing guarantees that there will be as</span> <span data-start="1628.77" data-end="1630.42">many details element when the document</span> <span data-start="1630.42" data-end="1633">is closed as the ones that were there</span> <span data-start="1633" data-end="1637.59">when it was created CSS can be very</span> <span data-start="1637.59" data-end="1641.28">different from the one you tried you</span> <span data-start="1641.28" data-end="1643.35">might have making sinuses you might have</span> <span data-start="1643.35" data-end="1645.99">been making some assumptions and certain</span> <span data-start="1645.99" data-end="1648.68">kind of hot CSS will break them and</span> <span data-start="1648.68" data-end="1652.08">there might not even be a dome that</span> <span data-start="1652.08" data-end="1653.58">might sound weird and you might be</span> <span data-start="1653.58" data-end="1656.01">thinking about thick cases like no</span> <span data-start="1656.01" data-end="1658.53">genius for example but even in</span> <span data-start="1658.53" data-end="1660.09">client-side JavaScript there's not</span> <span data-start="1660.09" data-end="1662.85">always a dumb for example in web workers</span> <span data-start="1662.85" data-end="1666">your code might need to run in in a web</span> <span data-start="1666" data-end="1668.34">worker if it's actually a polyfill that</span> <span data-start="1668.34" data-end="1670.98">applies to something like that so you</span> <span data-start="1670.98" data-end="1673.23">shouldn't depend in a dome being present</span> <span data-start="1673.23" data-end="1675.93">and it might you might be thinking now</span> <span data-start="1675.93" data-end="1678.3">why would I depend on a dome if my</span> <span data-start="1678.3" data-end="1680.1">polyfill has nothing to do with the dome</span> <span data-start="1680.1" data-end="1683.04">and I can it can even run in a web</span> <span data-start="1683.04" data-end="1684.81">worker for example if your polyfill</span> <span data-start="1684.81" data-end="1687.57">needs to resolve URLs and get the</span> <span data-start="1687.57" data-end="1690.24">separate parts one waste partially URL</span> <span data-start="1690.24" data-end="1693.21">yourself and return the and split it in</span> <span data-start="1693.21" data-end="1694.68">two parts like the horse named the pass</span> <span data-start="1694.68" data-end="1697.74">the pestering and everything but another</span> <span data-start="1697.74" data-end="1699.25">way it would be to create a dummy</span> <span data-start="1699.25" data-end="1702.4">element and set its href to that URL and</span> <span data-start="1702.4" data-end="1704.47">then get the properties from there which</span> <span data-start="1704.47" data-end="1706.15">will might sound quite clever at the</span> <span data-start="1706.15" data-end="1708.07">time but it will break when there's no</span> <span data-start="1708.07" data-end="1711.01">don't present even though URLs aren't</span> <span data-start="1711.01" data-end="1713.11">breaking your elders in two parts isn't</span> <span data-start="1713.11" data-end="1716.92">something that needs to depend on a dome</span> <span data-start="1716.92" data-end="1719.89">and also you shouldn't even depend on</span> </p>
<p><span data-start="1719.89" data-end="1722.98">HTML it might not be HTML your polyfill</span> <span data-start="1722.98" data-end="1725.11">might need to run in an SVG document or</span> <span data-start="1725.11" data-end="1729.43">in an XML document and it should still</span> <span data-start="1729.43" data-end="1733.72">not break of course some of these are</span> <span data-start="1733.72" data-end="1738.1">edge cases and some of these are edge</span> <span data-start="1738.1" data-end="1741.22">cases and maybe you want to make the</span> <span data-start="1741.22" data-end="1743.44">decision not to support them because it</span> <span data-start="1743.44" data-end="1745.6">will make your code base huge and you</span> <span data-start="1745.6" data-end="1747.13">will fall into the trap I feel with the</span> <span data-start="1747.13" data-end="1749.35">progress element with the progress</span> <span data-start="1749.35" data-end="1752.05">polyfill but you should know that you're</span> <span data-start="1752.05" data-end="1753.79">making these assumptions and preferably</span> <span data-start="1753.79" data-end="1755.08">you should state them in the description</span> <span data-start="1755.08" data-end="1757.6">of your polyfill some people know them</span> <span data-start="1757.6" data-end="1758.83">and they won't spend time debugging</span> <span data-start="1758.83" data-end="1762.13">something that isn't supposed to work in</span> <span data-start="1762.13" data-end="1768.25">their case so the first thing responding</span> <span data-start="1768.25" data-end="1770.44">to attribute changes this only applies</span> <span data-start="1770.44" data-end="1774.88">to HTML polyfills how can we actually do</span> <span data-start="1774.88" data-end="1777.94">stuff what attributes change we have two</span> <span data-start="1777.94" data-end="1780.84">tools for this first is mutation events</span> <span data-start="1780.84" data-end="1784.81">which which are events that get fired</span> <span data-start="1784.81" data-end="1786.43">when the dome three changes when an</span> <span data-start="1786.43" data-end="1788.14">attribute gets removed when an attribute</span> <span data-start="1788.14" data-end="1790.32">changes when a new element gets added</span> <span data-start="1790.32" data-end="1792.4">the problem with those are they are</span> <span data-start="1792.4" data-end="1794.59">deprecated now and there's no</span> <span data-start="1794.59" data-end="1798.16">alternative in the standard this they're</span> <span data-start="1798.16" data-end="1800.56">preparing something but it's not even in</span> <span data-start="1800.56" data-end="1802.24">the spec there's not even a speck yet</span> <span data-start="1802.24" data-end="1805.24">and of course no browser supports it so</span> <span data-start="1805.24" data-end="1806.669">for the time being</span> <span data-start="1806.669" data-end="1808.499">even though they're deprecated they're</span> <span data-start="1808.499" data-end="1811.879">the only thing we can use and in all die</span> <span data-start="1811.879" data-end="1816.179">there's also this horrible proprietary</span> <span data-start="1816.179" data-end="1821.309">property change event which is kind of</span> <span data-start="1821.309" data-end="1823.44">horrible like all Microsoft proprietary</span> <span data-start="1823.44" data-end="1826.169">things but sometimes it's the only way</span> <span data-start="1826.169" data-end="1828.419">and in polyphenols it's the goal that</span> <span data-start="1828.419" data-end="1832.159">counts actually filling in the gap</span> <span data-start="1832.159" data-end="1834.48">because eventually it will get removed</span> <span data-start="1834.48" data-end="1837.809">polyfills by nature are temporary so</span> <span data-start="1837.809" data-end="1841.739">need do what you got to do for example</span> </p>
<p><span data-start="1841.739" data-end="1843.57">Paul Backhouse created an amazing</span> <span data-start="1843.57" data-end="1846.33">polyfill for CSS transforms and ie and</span> <span data-start="1846.33" data-end="1848.639">he used that and that's actually how I</span> <span data-start="1848.639" data-end="1850.609">learned about the property change event</span> <span data-start="1850.609" data-end="1855.57">she's using that to convert CSS</span> <span data-start="1855.57" data-end="1858.269">transitions to the matrix filter than</span> <span data-start="1858.269" data-end="1861.929">added ie uses and that allows us to make</span> </p>
<p><span data-start="1861.929" data-end="1866.85">CSS poly fills in IE that they can even</span> <span data-start="1866.85" data-end="1869.489">respond to changes which is amazing we</span> <span data-start="1869.489" data-end="1871.47">can't do that in other browsers CSS poly</span> <span data-start="1871.47" data-end="1874.529">fills our pain in the ass but in IE we</span> <span data-start="1874.529" data-end="1878.399">can with that thing so about mutation</span> <span data-start="1878.399" data-end="1882.779">events an example of a mutation event is</span> </p>
<p><span data-start="1882.779" data-end="1885.989">Dom attribute modified and that's one of</span> <span data-start="1885.989" data-end="1887.22">the two you are going to use more</span> <span data-start="1887.22" data-end="1889.259">frequently it gets fired when an</span> <span data-start="1889.259" data-end="1893.509">attribute changes and it we can get the</span> <span data-start="1893.509" data-end="1897.359">the old value from it the new value and</span> <span data-start="1897.359" data-end="1900.69">the attribute name also mutation events</span> <span data-start="1900.69" data-end="1903.779">bubble so we can just register an event</span> <span data-start="1903.779" data-end="1908.009">handler in the document and then monitor</span> <span data-start="1908.009" data-end="1910.35">all deauxma tribute modified events and</span> <span data-start="1910.35" data-end="1912.039">if they're of the</span> <span data-start="1912.039" data-end="1914.259">they're of the kind that interests us we</span> <span data-start="1914.259" data-end="1916.749">do stuff if not we don't do anything for</span> <span data-start="1916.749" data-end="1918.85">example in this case assume this is a</span> <span data-start="1918.85" data-end="1922.21">part of a placeholder polyfill it tests</span> <span data-start="1922.21" data-end="1924.309">if the node where the attribute got</span> <span data-start="1924.309" data-end="1928.269">changed is an input node and then if the</span> <span data-start="1928.269" data-end="1929.499">attribute that got changed is a</span> <span data-start="1929.499" data-end="1930.97">placeholder attribute because then we</span> <span data-start="1930.97" data-end="1932.619">need to update the placeholder or if</span> <span data-start="1932.619" data-end="1934.029">it's a value because for example if we</span> <span data-start="1934.029" data-end="1935.859">didn't have a valuable now we do we need</span> <span data-start="1935.859" data-end="1938.169">to run it we need to make the pole of</span> <span data-start="1938.169" data-end="1941.019">the placeholder vanish so if that's the</span> <span data-start="1941.019" data-end="1943.57">case we call our function in our</span> <span data-start="1943.57" data-end="1945.82">polyfill and we update the node we don't</span> <span data-start="1945.82" data-end="1947.59">even need to pass the new and the old</span> <span data-start="1947.59" data-end="1949.179">value is in this case because the only</span> <span data-start="1949.179" data-end="1954.169">thing we need is the node in this case</span> <span data-start="1954.179" data-end="1956.919">the second thing that our polyfill</span> <span data-start="1956.919" data-end="1959.109">should try to be responsive is</span> <span data-start="1959.109" data-end="1962.259">properties things are a bit better in</span> <span data-start="1962.259" data-end="1965.44">this one because we have accessors like</span> <span data-start="1965.44" data-end="1966.999">you might have heard the mascaras and</span> <span data-start="1966.999" data-end="1971.169">sellers and these are pretty standard we</span> <span data-start="1971.169" data-end="1974.009">also have on property change for old IE</span> <span data-start="1974.009" data-end="1976.539">since i since all die he treats</span> <span data-start="1976.539" data-end="1978.58">properties as attributes that event</span> <span data-start="1978.58" data-end="1981.489">works in both and if your polyfill is</span> <span data-start="1981.489" data-end="1985.239">only to fill in firefox specific</span> <span data-start="1985.239" data-end="1987.129">functionality then you also have this</span> <span data-start="1987.129" data-end="1991.539">amazing a method that supported only in</span> <span data-start="1991.539" data-end="1994.149">mosul it's its proprietary but it's so</span> <span data-start="1994.149" data-end="1996.129">amazing I think I think it should be</span> <span data-start="1996.129" data-end="1998.259">added to the spec and everybody every</span> <span data-start="1998.259" data-end="2000.47">browser should implement it instead of</span> <span data-start="2000.47" data-end="2002.97">accessors make you replace the property</span> <span data-start="2002.97" data-end="2005.34">with an accessor get a getter in the</span> <span data-start="2005.34" data-end="2007.83">cellar just one of the two object watch</span> <span data-start="2007.83" data-end="2009.659">doesn't replace the property it just</span> <span data-start="2009.659" data-end="2012.629">watches it and it fires a call back when</span> <span data-start="2012.629" data-end="2014.519">it actually changes which is exactly</span> <span data-start="2014.519" data-end="2017.669">what we want in polyfills we don't</span> <span data-start="2017.669" data-end="2019.95">really want to replace the property it's</span> <span data-start="2019.95" data-end="2022.499">a hack but it's the only thing we have</span> <span data-start="2022.499" data-end="2025.19">we actually just want to monitor changes</span> <span data-start="2025.19" data-end="2027.899">watch changes and have something that's</span> <span data-start="2027.899" data-end="2029.97">the equivalent of an event when the</span> <span data-start="2029.97" data-end="2031.83">property when the property gets changed</span> <span data-start="2031.83" data-end="2034.529">and that's the object watch is exactly</span> <span data-start="2034.529" data-end="2038.039">what we want but it's only five for</span> </p>
<p><span data-start="2038.039" data-end="2039.92">Firefox so</span> <span data-start="2039.92" data-end="2044.15">focus a bit on accessors the standard</span> <span data-start="2044.15" data-end="2046.4">syntax is the one presented here we use</span> <span data-start="2046.4" data-end="2048.35">the Defiant property method in the</span> <span data-start="2048.35" data-end="2051.13">object echoed in the object constructor</span> <span data-start="2051.13" data-end="2054.32">as you probably know all the newegg</span> <span data-start="2054.32" data-end="2056.54">mcrypt five functions and objects are</span> <span data-start="2056.54" data-end="2058.22">just added on the object constructor</span> <span data-start="2058.22" data-end="2060.23">instead of specific instances even</span> <span data-start="2060.23" data-end="2062.84">though it would be more convenient so</span> <span data-start="2062.84" data-end="2063.98">that they don't break backwards</span> <span data-start="2063.98" data-end="2066.919">compatibility with when we make pony</span> <span data-start="2066.919" data-end="2070.01">fills for them so we have the fine</span> <span data-start="2070.01" data-end="2072.76">property it except get in the set</span> <span data-start="2072.76" data-end="2077.54">property end up in the parameter and we</span> <span data-start="2077.54" data-end="2080">make some callbacks for them which get</span> <span data-start="2080" data-end="2082.88">fired when somebody attempts to set that</span> <span data-start="2082.88" data-end="2086">property so this property is essentially</span> <span data-start="2086" data-end="2088.61">functions like a property but actually</span> <span data-start="2088.61" data-end="2092.21">it's more like a function for example in</span> <span data-start="2092.21" data-end="2094.55">this case we define a getter and setter</span> <span data-start="2094.55" data-end="2098.6">for a placeholder so when somebody tries</span> <span data-start="2098.6" data-end="2104.06">to to get the placeholder value through</span> <span data-start="2104.06" data-end="2106.52">together we actually invoke this</span> <span data-start="2106.52" data-end="2108.59">function and return the attribute value</span> <span data-start="2108.59" data-end="2110.9">because it's the same in this case in</span> <span data-start="2110.9" data-end="2112.46">some other cases you might want to do</span> <span data-start="2112.46" data-end="2114.26">some math because the Gator should</span> <span data-start="2114.26" data-end="2116.18">return a number and they attribute</span> <span data-start="2116.18" data-end="2118.22">always return strings but in this case</span> <span data-start="2118.22" data-end="2121.07">it's the same and when it said we invoke</span> <span data-start="2121.07" data-end="2123.11">a function of our polyfill that updates</span> <span data-start="2123.11" data-end="2126.92">the the placeholder and also to match</span> <span data-start="2126.92" data-end="2129.26">the native implementation of placeholder</span> <span data-start="2129.26" data-end="2132.23">we make this accessor numerable and</span> <span data-start="2132.23" data-end="2133.7">configurable which essentially means</span> <span data-start="2133.7" data-end="2137.69">that a numeral is that when people use</span> <span data-start="2137.69" data-end="2139.97">this object on foreign loops it will be</span> <span data-start="2139.97" data-end="2143.15">present unlike some other properties</span> <span data-start="2143.15" data-end="2145.64">that don't get enumerated and</span> <span data-start="2145.64" data-end="2148.16">configurable means that we should be</span> <span data-start="2148.16" data-end="2150.38">able to replace it with something else</span> <span data-start="2150.38" data-end="2152.09">if we don't want these accessories</span> <span data-start="2152.09" data-end="2155.66">anymore we I kind of disagree with it</span> <span data-start="2155.66" data-end="2157.13">being configurable but that's how the</span> <span data-start="2157.13" data-end="2159.98">native implementation works and like we</span> <span data-start="2159.98" data-end="2160.56">said</span> <span data-start="2160.56" data-end="2162.66">should follow the spec you shouldn't</span> <span data-start="2162.66" data-end="2165.78">break expectations so this standard</span> <span data-start="2165.78" data-end="2169.25">syntax of accesses is supported by I ate</span> </p>
<p><span data-start="2169.25" data-end="2173.31">Firefox for pros safari 45 and opera 12</span> <span data-start="2173.31" data-end="2177.33">and of course browses after those so</span> <span data-start="2177.33" data-end="2178.74">what can we do with all the browsers</span> <span data-start="2178.74" data-end="2180.84">some of them are really up for 12 isn't</span> <span data-start="2180.84" data-end="2184.5">even released yet and some of them are</span> <span data-start="2184.5" data-end="2186.45">quite recent like safari five is still</span> <span data-start="2186.45" data-end="2189.96">kind of recent there is an older syntax</span> <span data-start="2189.96" data-end="2192.87">for getters and setters which works in</span> <span data-start="2192.87" data-end="2195.45">many more browsers in many older</span> <span data-start="2195.45" data-end="2198.12">browsers this was before akma script</span> <span data-start="2198.12" data-end="2199.86">five was published it was the first</span> <span data-start="2199.86" data-end="2203.1">syntax we had and I'm so glad we didn't</span> <span data-start="2203.1" data-end="2206.73">actually do that and the ACMA script</span> <span data-start="2206.73" data-end="2211.13">five ways so much better this actually</span> <span data-start="2211.13" data-end="2213.69">only allows us to set a getter and</span> <span data-start="2213.69" data-end="2216.93">setter we can't set we can't control</span> <span data-start="2216.93" data-end="2219.18">whether its innumerable or whether it's</span> <span data-start="2219.18" data-end="2221.55">configurable or anything but in this</span> <span data-start="2221.55" data-end="2224.4">case it does what we want and it's a</span> <span data-start="2224.4" data-end="2227.61">good fallback if you don't want to have</span> <span data-start="2227.61" data-end="2230.04">to deal with conditionals about whether</span> <span data-start="2230.04" data-end="2232.79">it is defined property supported is</span> <span data-start="2232.79" data-end="2235.68">defined get are supported there's this</span> <span data-start="2235.68" data-end="2238.8">nice polyfill by Ellie gray which</span> <span data-start="2238.8" data-end="2240.96">combines them so you can actually use</span> <span data-start="2240.96" data-end="2244.59">object defined property and it will work</span> <span data-start="2244.59" data-end="2246.36">even in those that don't support it and</span> <span data-start="2246.36" data-end="2250.83">only support that kind of getters so you</span> <span data-start="2250.83" data-end="2252.42">actually can use a poly fill in your</span> <span data-start="2252.42" data-end="2258.42">polyfill that's so meta a problem with</span> <span data-start="2258.42" data-end="2260.58">ie8 is that even though it supports</span> <span data-start="2260.58" data-end="2264.15">believe either the support successors it</span> <span data-start="2264.15" data-end="2268.2">only supports them on Dom elements so if</span> <span data-start="2268.2" data-end="2270.42">you're if you need to do something else</span> <span data-start="2270.42" data-end="2272.31">that's not related with Dom elements</span> <span data-start="2272.31" data-end="2275.37">you're kind of screwed and also if that</span> <span data-start="2275.37" data-end="2279.63">wasn't enough old ie thinks that</span> <span data-start="2279.63" data-end="2282.42">properties and attributes are the same</span> <span data-start="2282.42" data-end="2286.41">so essentially let's remember the the</span> <span data-start="2286.41" data-end="2289.02">case I showed before when the</span> <span data-start="2289.02" data-end="2291.9">placeholder property gets when when you</span> <span data-start="2291.9" data-end="2293.52">try somebody tries to read the</span> <span data-start="2293.52" data-end="2295.53">placeholder property we call get</span> <span data-start="2295.53" data-end="2297.119">attribute and wear it and the attribute</span> <span data-start="2297.119" data-end="2299.609">but what if the placehold what if the</span> <span data-start="2299.609" data-end="2301.26">placeholder attribute is essentially the</span> <span data-start="2301.26" data-end="2303.03">same as a placeholder property like what</span> <span data-start="2303.03" data-end="2305.549">all the ethics we try to read the</span> <span data-start="2305.549" data-end="2308.28">placeholder property so we try to read</span> <span data-start="2308.28" data-end="2309.63">the place from the property because</span> <span data-start="2309.63" data-end="2311.339">attributes and properties are the same</span> <span data-start="2311.339" data-end="2313.799">for all day so what does this gives us</span> <span data-start="2313.799" data-end="2316.819">give us it gives us infinite recursion</span> <span data-start="2316.819" data-end="2321.869">it so it's not horrible it will act we</span> <span data-start="2321.869" data-end="2323.79">will actually make a script that's</span> <span data-start="2323.79" data-end="2327.24">really slow and it will return in a</span> <span data-start="2327.24" data-end="2333.63">stack overflow also ie8 has this other</span> <span data-start="2333.63" data-end="2337.02">problem with define property if you try</span> <span data-start="2337.02" data-end="2340.53">to use a numerable true it will throw an</span> <span data-start="2340.53" data-end="2342.53">error which you can catch with this</span> <span data-start="2342.53" data-end="2347.28">weird code and just the solution to that</span> <span data-start="2347.28" data-end="2350.13">is just to try to apply the accessor</span> <span data-start="2350.13" data-end="2352.95">again without the innumerable true just</span> <span data-start="2352.95" data-end="2360.13">set innumerable to false and try again</span> <span data-start="2360.14" data-end="2364.44">also the third thing we said is that new</span> <span data-start="2364.44" data-end="2366.51">elements might get added for example</span> <span data-start="2366.51" data-end="2370.859">through ajax through some script so it's</span> <span data-start="2370.859" data-end="2372.839">best if our polyfill doesn't break with</span> <span data-start="2372.839" data-end="2375.66">them and it's kind of simple to account</span> <span data-start="2375.66" data-end="2380.67">for them if we're modifying elements</span> <span data-start="2380.67" data-end="2382.38">that are already supported we can just</span> <span data-start="2382.38" data-end="2385.53">add the message to the corresponding</span> <span data-start="2385.53" data-end="2389.309">prototype it you might you probably have</span> <span data-start="2389.309" data-end="2391.23">heard that modifying host objects is</span> <span data-start="2391.23" data-end="2395.01">evil but in this case you're not adding</span> <span data-start="2395.01" data-end="2396.72">property you're not adding functions</span> <span data-start="2396.72" data-end="2398.099">that were there you</span> <span data-start="2398.099" data-end="2399.599">running functions that should be there</span> <span data-start="2399.599" data-end="2402.809">and everyone if no matter how passionate</span> <span data-start="2402.809" data-end="2404.94">they are about not modifying host</span> <span data-start="2404.94" data-end="2407.249">objects everyone agrees that this is a</span> <span data-start="2407.249" data-end="2412.14">legit case of doing that so you can even</span> <span data-start="2412.14" data-end="2413.94">add a method to the element prototype</span> <span data-start="2413.94" data-end="2415.979">which is for every element or two</span> <span data-start="2415.979" data-end="2418.559">specific prototypes for example HTML</span> <span data-start="2418.559" data-end="2422.099">input element so in that case it will be</span> <span data-start="2422.099" data-end="2424.2">automatically in every new instance but</span> <span data-start="2424.2" data-end="2425.819">if you can't do that for example if</span> <span data-start="2425.819" data-end="2428.16">you're making a polyfill for a new html5</span> <span data-start="2428.16" data-end="2429.809">element that doesn't have an interface</span> <span data-start="2429.809" data-end="2432.21">in browsers that don't support it you</span> <span data-start="2432.21" data-end="2434.369">can you should use the the Dom node</span> <span data-start="2434.369" data-end="2437.489">inserted mutation event so that you do</span> <span data-start="2437.489" data-end="2441.029">stuff when an element gets added that of</span> <span data-start="2441.029" data-end="2444.059">the type we're interested in of course</span> <span data-start="2444.059" data-end="2446.249">that bubbles too so we can follow the</span> <span data-start="2446.249" data-end="2448.44">same approach as we did for DOMA tribute</span> <span data-start="2448.44" data-end="2451.95">modified we just register a general</span> <span data-start="2451.95" data-end="2453.839">hunger and we check if we're actually</span> <span data-start="2453.839" data-end="2456.989">interested in that in that particular</span> <span data-start="2456.989" data-end="2462.329">element that was added also another</span> <span data-start="2462.329" data-end="2463.94">thing you should keep in mind is</span> <span data-start="2463.94" data-end="2467.309">minimizing dependencies for example</span> <span data-start="2467.309" data-end="2469.589">libraries like jQuery might do your job</span> <span data-start="2469.589" data-end="2472.079">quite easy they might make your code a</span> <span data-start="2472.079" data-end="2474.869">bit smaller but when you're making a</span> <span data-start="2474.869" data-end="2477.569">polyfill that requires jQuery you're</span> <span data-start="2477.569" data-end="2479.46">actually requiring that everyone who</span> <span data-start="2479.46" data-end="2481.859">uses your polyfill also includes a</span> <span data-start="2481.859" data-end="2484.89">library that's like so many kilobytes of</span> <span data-start="2484.89" data-end="2486.719">code especially if it's not getting it</span> <span data-start="2486.719" data-end="2490.049">so just to add a small feature some</span> <span data-start="2490.049" data-end="2491.7">people will have to include a whole</span> <span data-start="2491.7" data-end="2493.259">library if they're not using it already</span> <span data-start="2493.259" data-end="2496.68">and especially in polyfills people want</span> <span data-start="2496.68" data-end="2499.559">to use these latest these these new</span> <span data-start="2499.559" data-end="2502.41">features so that they break free from</span> <span data-start="2502.41" data-end="2507.779">libraries so you should you should try</span> <span data-start="2507.779" data-end="2510.989">to avoid it as much as possible unless</span> <span data-start="2510.989" data-end="2513.059">it really makes your job easier unless</span> <span data-start="2513.059" data-end="2515.039">your code your polyfill becomes ten</span> <span data-start="2515.039" data-end="2517.739">lines instead of 50 lights but if it's</span> <span data-start="2517.739" data-end="2519.54">like a difference like for example</span> <span data-start="2519.54" data-end="2522.66">well it fills it use jQuery that were</span> <span data-start="2522.66" data-end="2525.15">like 40 lines with jquery and there were</span> <span data-start="2525.15" data-end="2528.03">like fifty five without jquery is that</span> <span data-start="2528.03" data-end="2536.28">really worth it also when you're making</span> <span data-start="2536.28" data-end="2538.22">a polyfill you might be tempted to</span> <span data-start="2538.22" data-end="2541.14">support every possible browser to</span> <span data-start="2541.14" data-end="2546.75">support IE 697 and because you want</span> <span data-start="2546.75" data-end="2548.4">people to use it and even in big</span> <span data-start="2548.4" data-end="2550.74">projects that require a compatibility</span> <span data-start="2550.74" data-end="2553.23">with my very old browsers but sometimes</span> <span data-start="2553.23" data-end="2557.34">this makes your code huge and it's not</span> <span data-start="2557.34" data-end="2560.27">really needed to be that huge for and</span> <span data-start="2560.27" data-end="2562.44">sometimes you should you can use the</span> <span data-start="2562.44" data-end="2564.81">internal methods that a browser can have</span> <span data-start="2564.81" data-end="2566.55">and take advantage of them and do what</span> <span data-start="2566.55" data-end="2570.51">you want for example how many of you</span> <span data-start="2570.51" data-end="2572.76">have cared about much media and what it</span> <span data-start="2572.76" data-end="2580.17">does what much media is a function it's</span> <span data-start="2580.17" data-end="2582.63">a global function and it tests whether a</span> <span data-start="2582.63" data-end="2585.41">document much as a certain media query</span> <span data-start="2585.41" data-end="2589.26">so some browsers already supported</span> <span data-start="2589.26" data-end="2593.13">supported and we decided to make a</span> <span data-start="2593.13" data-end="2595.68">polyfill for those that don't so how</span> <span data-start="2595.68" data-end="2598.65">would you go with that polyfill most</span> <span data-start="2598.65" data-end="2600.51">people would probably try to parse the</span> <span data-start="2600.51" data-end="2603.09">media query expression and then check</span> <span data-start="2603.09" data-end="2605.82">every condition separately to see if it</span> <span data-start="2605.82" data-end="2608.37">actually matches but we don't need to do</span> <span data-start="2608.37" data-end="2610.71">that it could be much smaller but just</span> <span data-start="2610.71" data-end="2612.42">taking advantage of what the browser</span> <span data-start="2612.42" data-end="2615.06">does with media queries because the</span> <span data-start="2615.06" data-end="2616.65">browser already has this functionality</span> <span data-start="2616.65" data-end="2619.67">built in so let's see how Paul Irish</span> <span data-start="2619.67" data-end="2623.34">tackled this problem he creates a new</span> <span data-start="2623.34" data-end="2626.85">element a new dev set some types and</span> <span data-start="2626.85" data-end="2629.25">styles and an ID that's unlikely to</span> <span data-start="2629.25" data-end="2633.06">collide with another ID and then it adds</span> <span data-start="2633.06" data-end="2637.019">a style element with a media query and</span> <span data-start="2637.019" data-end="2639.809">that div style elements can be anywhere</span> <span data-start="2639.809" data-end="2641.849">so they don't have to be in the head</span> <span data-start="2641.849" data-end="2643.289">they can be anywhere in the document so</span> <span data-start="2643.289" data-end="2645.419">that's pretty valid and it works and</span> <span data-start="2645.419" data-end="2648.899">then it depends that element to the to</span> <span data-start="2648.899" data-end="2654.199">the body so let's think a bit about that</span> <span data-start="2654.199" data-end="2657.119">that's that has a media query and it</span> <span data-start="2657.119" data-end="2660.029">gives that L that Dave it went for 42</span> <span data-start="2660.029" data-end="2663.329">pixels what does that mean that if the</span> <span data-start="2663.329" data-end="2665.249">media query matches the document that</span> </p>
<p><span data-start="2665.249" data-end="2668.369">Dave will have a width of 42 pixels if</span> <span data-start="2668.369" data-end="2671.939">it doesn't it will have another width so</span> <span data-start="2671.939" data-end="2675.089">now to check if luck media query applies</span> <span data-start="2675.089" data-end="2677.459">to this document we only need to check</span> <span data-start="2677.459" data-end="2679.559">if the opposite width of the tip of the</span> <span data-start="2679.559" data-end="2683.039">dev is 42 so we actually took advantage</span> <span data-start="2683.039" data-end="2685.259">of the of the built-in browser</span> <span data-start="2685.259" data-end="2688.789">capabilities for checking media queries</span> <span data-start="2688.789" data-end="2693.779">and we didn't need to pass anything so</span> <span data-start="2693.779" data-end="2696.809">after we get that value we clean up</span> <span data-start="2696.809" data-end="2698.579">after ourselves remove that deer from</span> <span data-start="2698.579" data-end="2700.649">the body and we return the result and</span> <span data-start="2700.649" data-end="2703.13">because the spec is kind of weird and it</span> <span data-start="2703.13" data-end="2706.349">requires us to return an object even</span> <span data-start="2706.349" data-end="2708.739">though it might seem stupid and</span> <span data-start="2708.739" data-end="2710.789">personally I don't agree with that much</span> <span data-start="2710.789" data-end="2713.369">we have to follow the spec and return an</span> <span data-start="2713.369" data-end="2716.939">object Leroy like it's required with the</span> <span data-start="2716.939" data-end="2722.829">result and the media query passed</span> <span data-start="2722.839" data-end="2727.409">another example of taking advantage of</span> <span data-start="2727.409" data-end="2729.869">the browser capabilities is trying to</span> <span data-start="2729.869" data-end="2733.319">implement outer HTML other HTML used to</span> <span data-start="2733.319" data-end="2735.809">be a Microsoft proprietary thing but</span> <span data-start="2735.809" data-end="2738.509">it's now in the html5 spec and</span> <span data-start="2738.509" data-end="2740.039">eventually all browsers will implement</span> <span data-start="2740.039" data-end="2747.269">it if they all don't already so some</span> <span data-start="2747.269" data-end="2750.299">people might actually try to parse the</span> <span data-start="2750.299" data-end="2752.519">the outer HTML do something with that or</span> <span data-start="2752.519" data-end="2754.559">extract the innerhtml portion and then</span> <span data-start="2754.559" data-end="2758.24">parse parse the the the talent portion</span> <span data-start="2758.24" data-end="2759.35">something like that but it's actually</span> <span data-start="2759.35" data-end="2766.61">much easier you first check if it's an</span> </p>
<p><span data-start="2766.61" data-end="2768.89">XML document by tracking the xml version</span> <span data-start="2768.89" data-end="2772.28">property of the document yeah that</span> <span data-start="2772.28" data-end="2776.09">should be document not doc and if it's</span> <span data-start="2776.09" data-end="2777.83">an XML document we can't use inner HTML</span> <span data-start="2777.83" data-end="2780.29">or anything like that so we invoke the</span> <span data-start="2780.29" data-end="2782.72">xmlserializer and we're turn we see</span> <span data-start="2782.72" data-end="2786.05">realize that node if it's not an HTML</span> <span data-start="2786.05" data-end="2787.64">and XML document which is the most</span> <span data-start="2787.64" data-end="2790.94">common case we create a new element that</span> <span data-start="2790.94" data-end="2792.74">we won't actually need but it will help</span> <span data-start="2792.74" data-end="2797.57">us in this case and we append we close</span> <span data-start="2797.57" data-end="2800.63">this the node we care about getting its</span> <span data-start="2800.63" data-end="2805.1">outer HTML we pass the false parameters</span> <span data-start="2805.1" data-end="2806.93">so that we don't clone the contents as</span> <span data-start="2806.93" data-end="2808.61">well because think about it we don't</span> <span data-start="2808.61" data-end="2812.42">need to pass through to to get the outer</span> </p>
<p><span data-start="2812.42" data-end="2814.43">HTML codes we just we can just get</span> <span data-start="2814.43" data-end="2816.77">enraged mo from that node from the</span> <span data-start="2816.77" data-end="2819.02">original notes so the only thing we care</span> <span data-start="2819.02" data-end="2821.45">about is getting the HTML for the outer</span> <span data-start="2821.45" data-end="2824.45">tag so we just apply it to that dummy</span> <span data-start="2824.45" data-end="2829.28">element then we replace we get the inner</span> <span data-start="2829.28" data-end="2832.93">HTML of the new element we replace those</span> <span data-start="2832.93" data-end="2836.21">that thing at in the middle and we had</span> <span data-start="2836.21" data-end="2839.45">enriched EML then the inner HTML of the</span> <span data-start="2839.45" data-end="2841.91">new element is what we want it's the</span> <span data-start="2841.91" data-end="2844.76">outer HTML that we wanted we didn't need</span> <span data-start="2844.76" data-end="2848.869">to do any parsing we just used the</span> <span data-start="2848.869" data-end="2853.609">browser capabilities also this is</span> <span data-start="2853.609" data-end="2854.93">sometimes an afterthought but it</span> <span data-start="2854.93" data-end="2857.42">shouldn't be if you're making an HTML</span> <span data-start="2857.42" data-end="2859.46">polyfill you shouldn't you should keep</span> <span data-start="2859.46" data-end="2861.8">accessibility in mind because native</span> <span data-start="2861.8" data-end="2866.03">elements have built-in area roles or</span> <span data-start="2866.03" data-end="2868.76">they can be focusable sometimes when the</span> <span data-start="2868.76" data-end="2871.03">spec says they should be focused ball or</span> <span data-start="2871.03" data-end="2873.41">they support some certain keyboard</span> <span data-start="2873.41" data-end="2874.47">shortcuts like</span> <span data-start="2874.47" data-end="2877.68">simplest as la- slider supports being</span> <span data-start="2877.68" data-end="2882.84">adjusted by the arrow keys but so if</span> <span data-start="2882.84" data-end="2884.25">you're actually implementing a slider</span> <span data-start="2884.25" data-end="2887.55">yourself you should try to fake these</span> <span data-start="2887.55" data-end="2889.2">things to you should make it focusable</span> <span data-start="2889.2" data-end="2892.26">by tabindex0 you should add some area</span> <span data-start="2892.26" data-end="2895.92">rolls yourself and some area attributes</span> <span data-start="2895.92" data-end="2897.66">and you should support these keyboard</span> <span data-start="2897.66" data-end="2900.41">shortcuts I've seen so many sliders that</span> <span data-start="2900.41" data-end="2902.849">can't be adjusted with the keyboard it's</span> <span data-start="2902.849" data-end="2904.2">so annoying it's not even for people</span> <span data-start="2904.2" data-end="2906.48">with disabilities everyone uses the</span> <span data-start="2906.48" data-end="2913.53">keyboard also like I said before CSS</span> <span data-start="2913.53" data-end="2915.77">poly fields are big pain in the ass if</span> <span data-start="2915.77" data-end="2918.3">if you're planning to start writing</span> <span data-start="2918.3" data-end="2921.08">polyfills don't start from CSS</span> <span data-start="2921.08" data-end="2924.09">everything is hard with them parsing is</span> <span data-start="2924.09" data-end="2925.68">hard because we need to parse the whole</span> <span data-start="2925.68" data-end="2928.89">thing because if you try to go through</span> <span data-start="2928.89" data-end="2931.08">the CSS object model the browser will</span> <span data-start="2931.08" data-end="2934.4">drop stuff it doesn't understand so</span> <span data-start="2934.4" data-end="2936.57">there's no point in doing that you</span> <span data-start="2936.57" data-end="2939.9">actually have to parse the whole CSS</span> <span data-start="2939.9" data-end="2942.78">style sheet also implementation is hard</span> <span data-start="2942.78" data-end="2945.21">at least implementations done</span> <span data-start="2945.21" data-end="2948.03">unobtrusively we all almost always have</span> <span data-start="2948.03" data-end="2950.19">to add extra elements and extra stuff</span> <span data-start="2950.19" data-end="2952.71">and it's always so intrusive and</span> <span data-start="2952.71" data-end="2954.78">reacting to changes is practically</span> <span data-start="2954.78" data-end="2957.119">impossible I mean I has this property</span> <span data-start="2957.119" data-end="2960.03">change event but other browsers don't so</span> <span data-start="2960.03" data-end="2962.76">we can't do anything about it they're</span> <span data-start="2962.76" data-end="2964.88">really hard and that's why we don't have</span> <span data-start="2964.88" data-end="2969.15">almost any CSS polyfills most of them</span> <span data-start="2969.15" data-end="2971.07">are just API rappers like i said before</span> <span data-start="2971.07" data-end="2972.72">like functions that you call to do</span> <span data-start="2972.72" data-end="2974.4">something but that's not really a</span> <span data-start="2974.4" data-end="2978.869">polyfill so after you've done you're</span> <span data-start="2978.869" data-end="2982.349">done with the creative part there comes</span> <span data-start="2982.349" data-end="2985.08">the distribution part because you might</span> <span data-start="2985.08" data-end="2988.2">be satisfied with your clever code but</span> <span data-start="2988.2" data-end="2990.66">you actually have to let other people</span> <span data-start="2990.66" data-end="2993.029">know and use it and help lacombe you</span> <span data-start="2993.029" data-end="2996.989">like like it helps you so the first part</span> <span data-start="2996.989" data-end="3000.259">is making a min ified version of your</span> <span data-start="3000.259" data-end="3004.159">script because people will actually end</span> <span data-start="3004.159" data-end="3005.9">up using that but you also have to</span> <span data-start="3005.9" data-end="3007.789">include the original version so that</span> <span data-start="3007.789" data-end="3010.009">people can study it and see what you did</span> <span data-start="3010.009" data-end="3013.13">how you didn't learn from you but you</span> <span data-start="3013.13" data-end="3014.599">should also include a mini fide version</span> <span data-start="3014.599" data-end="3017.39">to be used for production then upload it</span> <span data-start="3017.39" data-end="3020.63">to get them it's like the commonplace</span> <span data-start="3020.63" data-end="3023.959">these days for open source code and the</span> <span data-start="3023.959" data-end="3026.119">last step but one of the most important</span> <span data-start="3026.119" data-end="3028.579">is to add it to the polyfills list I</span> <span data-start="3028.579" data-end="3030.65">think this is the most official poly</span> <span data-start="3030.65" data-end="3032.569">fields list we currently have it's not</span> <span data-start="3032.569" data-end="3034.939">perfect it's just the list in the github</span> <span data-start="3034.939" data-end="3037.4">wiki and we should definitely do better</span> <span data-start="3037.4" data-end="3039.919">we need the poly fuels database of some</span> <span data-start="3039.919" data-end="3041.839">sort but currently this is the most</span> <span data-start="3041.839" data-end="3044.839">complete thing we have so you can just</span> <span data-start="3044.839" data-end="3047.539">edit this it's a wiki you owe everyone</span> <span data-start="3047.539" data-end="3051.419">can edit it and add your polyfill there</span> <span data-start="3051.429" data-end="3055.519">so now that this talk is nearing to its</span> <span data-start="3055.519" data-end="3057.88">end let's talk a bit about the people</span> <span data-start="3057.88" data-end="3061.239">that have helped a lot in this field</span> <span data-start="3061.239" data-end="3064.189">first of all Remy Sharpe is the guy who</span> <span data-start="3064.189" data-end="3066.38">actually thought of the word polyfill</span> <span data-start="3066.38" data-end="3069.499">and he's written many good polyfills</span> <span data-start="3069.499" data-end="3071.589">that are the people actually used today</span> <span data-start="3071.589" data-end="3075.229">also purple irises were written loads of</span> <span data-start="3075.229" data-end="3077.239">polyfills and he also maintains this</span> <span data-start="3077.239" data-end="3079.329">list of polyfills that i showed before</span> <span data-start="3079.329" data-end="3084.38">and i really admire le gray too he is</span> <span data-start="3084.38" data-end="3087.589">very young but he's really talented he's</span> <span data-start="3087.589" data-end="3090.439">written so many polyfills and his</span> <span data-start="3090.439" data-end="3092.959">polyfills are always amazing they</span> <span data-start="3092.959" data-end="3095.479">they're the least buggy poly fields i've</span> <span data-start="3095.479" data-end="3097.669">ever seen and he knows all these things</span> <span data-start="3097.669" data-end="3099.65">about the inner workings of browsers</span> <span data-start="3099.65" data-end="3102.709">that's like crazy but it's not just</span> <span data-start="3102.709" data-end="3106.13">these guys there are so many people that</span> <span data-start="3106.13" data-end="3109.669">have helped by creating a polyfill are</span> <span data-start="3109.669" data-end="3111.769">improving an existing polyfill this list</span> <span data-start="3111.769" data-end="3114.709">is by no means exhaustive there are so</span> <span data-start="3114.709" data-end="3117.849">many more people and these people have</span> <span data-start="3117.849" data-end="3119.51">spent their time</span> <span data-start="3119.51" data-end="3123.26">and energy just to help all of you just</span> <span data-start="3123.26" data-end="3125.45">to help the community I think they</span> <span data-start="3125.45" data-end="3135.96">deserve a loud club for that</span> <span data-start="3135.97" data-end="3140.12">and you can be you can also do that you</span> <span data-start="3140.12" data-end="3142.58">can also help the community like legatus</span> <span data-start="3142.58" data-end="3146.87">calc you while developing something you</span> <span data-start="3146.87" data-end="3148.97">can write something you can write a</span> <span data-start="3148.97" data-end="3152.12">polyfill or help in by writing a feature</span> <span data-start="3152.12" data-end="3154.61">detection test for something that's</span> <span data-start="3154.61" data-end="3157.4">considered undetectable you can really</span> <span data-start="3157.4" data-end="3160.16">make a difference and that won't really</span> <span data-start="3160.16" data-end="3162.5">help yours it will really help yourself</span> <span data-start="3162.5" data-end="3165.02">and your day to day development and will</span> <span data-start="3165.02" data-end="3167.12">make your code more future proof but it</span> <span data-start="3167.12" data-end="3170.78">will also help everyone so go ahead and</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
