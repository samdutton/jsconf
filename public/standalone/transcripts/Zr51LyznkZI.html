<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Zr51LyznkZI</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/Zr51LyznkZI?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="0.55" data-end="1.55">All right.</span> <span data-start="1.55" data-end="2.55">Hello, everyone.</span> <span data-start="2.55" data-end="6.42">My name is Patrick Woo and I am going to be talking about single page applications at</span> <span data-start="6.42" data-end="8.47">scale.</span> <span data-start="8.47" data-end="15.25">Going to turn up at Flux capacitor and with 1.21 gigawatts we can get started.</span> <span data-start="15.25" data-end="24.839">I am a software manager at AWS and we are building super private stuff for a project</span> <span data-start="24.839" data-end="26.74">called Beehive.</span> </p>
<p><span data-start="26.74" data-end="32.06">I love basketball and movies from the '80s.</span> <span data-start="32.06" data-end="36.969">We have a sponsor also here.</span> <span data-start="36.969" data-end="45.219">What do I mean by spa at scale?</span> <span data-start="45.219" data-end="48.359">Single page applications at scale?</span> <span data-start="48.359" data-end="54.559">Our project is about 200,000 lines of code.</span> <span data-start="54.559" data-end="60.949">This is pre-transpiled versions of our actual application with over 50 front end engineers</span> <span data-start="60.949" data-end="67.73">working on the project across Seattle, San Francisco, Cupertino and Vancouver.</span> </p>
<p><span data-start="67.73" data-end="69.36">We have a distributed team.</span> <span data-start="69.36" data-end="75.22">We are all excited about our launch.</span> <span data-start="75.22" data-end="78.86">We had a few bumps along the way.</span> <span data-start="78.86" data-end="83.32">Let's go back in time and I want to talk to you about our top 5 lessons learned.</span> <span data-start="83.32" data-end="87.25">First lesson is getting to know our customers.</span> <span data-start="87.25" data-end="95.78">As engineers, a lot of time we are working and we are like this works, it works on my</span> <span data-start="95.78" data-end="99.13">machine, it works on Chrome, I am good, right?</span> <span data-start="99.13" data-end="106.78">Actually, our customers are also on Edge, Firefox, Safari and maybe some are on Beaker</span> </p>
<p><span data-start="106.78" data-end="107.85">I found out.</span> <span data-start="107.85" data-end="111.29">Cross-browser compatibility is an actual thing.</span> <span data-start="111.29" data-end="121.17">You might say Patrick, these are Evergreen browsers and all compliant.</span> <span data-start="121.17" data-end="129.3">We were trying to get performance measures working and on Firefox observe without observing</span> <span data-start="129.3" data-end="140.01">was throwing an error addressed in version 63 but 60 is long-term support.</span> <span data-start="140.01" data-end="146.89">You say they solved it in version 63 so that should do the job but actually, on some corporate</span> <span data-start="146.89" data-end="151.14">environments, not everyone has the latest version of that particular browser.</span> <span data-start="151.14" data-end="155.94">We have to think about those users as well.</span> <span data-start="155.94" data-end="159.39">The other thing is operating system issues.</span> </p>
<p><span data-start="159.39" data-end="170.13">We use frameworks  like React, Vue, Angular, Babel.</span> <span data-start="170.13" data-end="175.38">Don't thinks things will just work.</span> <span data-start="175.38" data-end="195.19">We didn't know scrollbars display on PC.</span> <span data-start="195.19" data-end="202.97">That one pixel deviation was causing performance issues and the virtual list kept moving up</span> <span data-start="202.97" data-end="204.72">and down.</span> <span data-start="204.72" data-end="213.55">All the people on the business side who had PCs were complaining so we had to consider</span> <span data-start="213.55" data-end="215.92">operating systems.</span> <span data-start="215.92" data-end="220.17">The other thing is testing for great experiences includes slow connections.</span> <span data-start="220.17" data-end="224.041">What is awesome with the Chrome dev tools and I don't know if you are familiar but this</span> <span data-start="224.041" data-end="226.5">was revealing for us.</span> <span data-start="226.5" data-end="238.95">People are on slower connections that are not Wi-Fi and high-speed.</span> <span data-start="238.95" data-end="241.93">The other thing is thinking about the machines.</span> </p>
<p><span data-start="241.93" data-end="254.66">We have high powered MacBook pros and that is awesome but we had to test the CPUs.</span> <span data-start="254.66" data-end="263.58">There are great tools and some of these are Open Source projects and one is called web</span> <span data-start="263.58" data-end="264.58">page test.</span> <span data-start="264.58" data-end="274.169">We simulate a cable or 3G connection with this.</span> <span data-start="274.169" data-end="282.789">Another cool tool we learned was Lighthouse which was allowing us to see simulated experiences</span> <span data-start="282.789" data-end="283.789">as well.</span> <span data-start="283.789" data-end="288.62">It has a really great accessibility score which is awesome as well.</span> <span data-start="288.62" data-end="293.749">The second lesson was about documenting our code.</span> <span data-start="293.749" data-end="300.409">We got new engineers, 50 engineers, and we keep growing, and we had to keep shoulder</span> <span data-start="300.409" data-end="305.1">tapping people like what does this component do?</span> <span data-start="305.1" data-end="308.819">Documentation is absolutely pivotal to the project but it is really hard.</span> <span data-start="308.819" data-end="313.77">It is hard to main tape, hard to understand  —  maintain  —  and difficult to scale.</span> <span data-start="313.77" data-end="317.629">You would change a particular function and you wouldn't go back to the documentation</span> <span data-start="317.629" data-end="319.36">to update it.</span> <span data-start="319.36" data-end="321.539">That happened way too frequently.</span> </p>
<p><span data-start="321.539" data-end="324.33">We thought how can we solve this problem?</span> <span data-start="324.33" data-end="329.879">One thing we introduced was and I know people might not like this but we actually, you know,</span> <span data-start="329.879" data-end="337.189">ended up using TypeScript and TypeScript helped us having documentation in code.</span> <span data-start="337.189" data-end="344.05">It allows for self-documenting code by providing great ID support like the auto complete for</span> <span data-start="344.05" data-end="345.43">props were amazing.</span> <span data-start="345.43" data-end="346.43">Type checking.</span> </p>
<p><span data-start="346.43" data-end="351.27">Misspelling a component name helped surface those.</span> <span data-start="351.27" data-end="354.979">Require props provided a nice error message.</span> <span data-start="354.979" data-end="358.729">Helps us re-factor by naming places.</span> <span data-start="358.729" data-end="363.55">It will help us rename components for the ones we are working on.</span> <span data-start="363.55" data-end="373.4">The other thing is TypeScript interface allows us to be explicit about component props.</span> <span data-start="373.4" data-end="377.8">We have distributed teams and when we talk about the components we will builds, we talk</span> <span data-start="377.8" data-end="384.08">about it through our interfaces we first build and that was a helpful thing for us to document.</span> <span data-start="384.08" data-end="390.789">This all goes back to, you know, that awesome book we might have read, clean code, but the</span> <span data-start="390.789" data-end="398.18">author of this quote is Gary Booch, not uncle bob, clean code is simple and direct and clean</span> <span data-start="398.18" data-end="401.909">code should read like well-written prose and that is what we are hoping to adopt.</span> <span data-start="401.909" data-end="409.21">That is great for engineers but doesn't work for the business stakeholders and designers</span> <span data-start="409.21" data-end="412.069">we interact with.</span> <span data-start="412.069" data-end="415.349">The thing we adopted was Storybook.</span> <span data-start="415.349" data-end="419.909">Storybook for React components rocks.</span> <span data-start="419.909" data-end="425.249">It allows us to host documentation about our components, provides a single source of truth</span> <span data-start="425.249" data-end="429.279">for designers, product owners and our engineers.</span> </p>
<p><span data-start="429.279" data-end="434.949">One of the problems and why this was pivotal for us was we would get a spec, continuously</span> <span data-start="434.949" data-end="440.939">iterating, and I would talk to the designer and say what is the file?</span> <span data-start="440.939" data-end="442.46">Is this the actual file?</span> <span data-start="442.46" data-end="444.74">They are like, yeah, that is the final file.</span> <span data-start="444.74" data-end="446.849">Are you sure?</span> <span data-start="446.849" data-end="453.43">Let me reach out to Sandra and she is like no, this is the ultimate file.</span> <span data-start="453.43" data-end="458.839">I don't why they don't have code versioning, maybe they do, but no git for designers and</span> <span data-start="458.839" data-end="463.12">hard to find the source of truth.</span> <span data-start="463.12" data-end="468.439">What we ended up doing is Storybook allowed for a great workflow with design systems and</span> <span data-start="468.439" data-end="471.409">single source of truth.</span> </p>
<p><span data-start="471.409" data-end="480.149">We incorporated Airbnb's React sketch app.</span> <span data-start="480.149" data-end="485.9">Engineer would build a React component, generate a sketch simple symbol and design team works</span> <span data-start="485.9" data-end="494.659">on that, and they hand it to us and we employ it.</span> <span data-start="494.659" data-end="500.689">It is version controlled by git as well.</span> <span data-start="500.689" data-end="502.4">Lesson three is tests.</span> <span data-start="502.4" data-end="509.819">I know this might be obvious but it actually is one of the most, like, foundational pieces</span> <span data-start="509.819" data-end="510.979">for us.</span> </p>
<p><span data-start="510.979" data-end="515.94">Testing might seem obvious, easy, but I emphasize this as a lesson learned because it helped</span> <span data-start="515.94" data-end="518.47">us gain confidence in our code.</span> <span data-start="518.47" data-end="523.62">A lot of times we deployed to prod and we would not have too much confidence.</span> <span data-start="523.62" data-end="529.13">We thought it worked on the machines like the cross-browser compatibility issues and</span> <span data-start="529.13" data-end="537.21">we reduced a lot of regressions and also reduced the time to first commit for new hires.</span> <span data-start="537.21" data-end="545.149">We would get new hires and the code was fairly well tested it was easy for them to onboard</span> <span data-start="545.149" data-end="550.3">and within the first one or two days they were able to commit.</span> <span data-start="550.3" data-end="556.459">We have a foundational basis and reduces having to ping additional engineers to figure out</span> <span data-start="556.459" data-end="558.74">what is going on.</span> <span data-start="558.74" data-end="565.05">The testing framework we ended up using is Jest.</span> <span data-start="565.05" data-end="575.13">It allows us to write tests with enzyme, integration tests, and allows us to have component snapshot</span> <span data-start="575.13" data-end="581.54">tests and get visibility into rather than particular component has changed.</span> </p>
<p><span data-start="581.54" data-end="584.73">This is from testJavaScript.com which is an amazing resource.</span> <span data-start="584.73" data-end="587.86">It goes over the different pieces.</span> <span data-start="587.86" data-end="593.329">With static tests, you know, to catch typos and errors, we would use TypeScript for that.</span> <span data-start="593.329" data-end="599.11">Unit we use Jest and integration Jest end and end to end, we are experimenting with</span> <span data-start="599.11" data-end="604.8">using Jest with puppeteer but puppeteer is only supported on Chrome so that is an issue</span> <span data-start="604.8" data-end="607.649">we are looking into.</span> </p>
<p><span data-start="607.649" data-end="615.68">Again, I just really want to highlight how awesome testingJavascript.com is.</span> <span data-start="615.68" data-end="621.17">Definitely worth checking out but things still break in production.</span> <span data-start="621.17" data-end="623.839">We have the pipeline test.</span> <span data-start="623.839" data-end="628.899">You know, from this particular environment to this particular environment, to prod, it</span> <span data-start="628.899" data-end="630">went through code coverage.</span> <span data-start="630" data-end="632.27">I got 80%, I am good.</span> <span data-start="632.27" data-end="634.269">Integration tests are passing.</span> <span data-start="634.269" data-end="637.959">And my end to end tests are passing so I should be good.</span> <span data-start="637.959" data-end="642.5">I don't have to worry about prod and actually as an engineering manager, this is my interview</span> <span data-start="642.5" data-end="643.91">question.</span> <span data-start="643.91" data-end="645.23">Protip here.</span> <span data-start="645.23" data-end="651.889">Things can break in production and we need to think about customers while in production.</span> <span data-start="651.889" data-end="657.13">We have monitors and alarms to provide visibility into our production health for applications</span> <span data-start="657.13" data-end="660.509">to ensure the deployments and dependencies are there.</span> <span data-start="660.509" data-end="667.81">Your CDN might go down and don't you want visibility into what happened?</span> <span data-start="667.81" data-end="675.93">We are focused on the customer and don't want them being the manual QA team.</span> </p>
<p><span data-start="675.93" data-end="679.93">That is why we are focused on monitoring.</span> <span data-start="679.93" data-end="683.55">We use specifically Cloud Watch and in our case AWS.</span> <span data-start="683.55" data-end="691.139">It helps us collect, monitor, act and analyze on our actual metrics because as Kyle Stenson</span> <span data-start="691.139" data-end="697.29">of functional light JavaScript mentions, code you can't trust is code you don't understand.</span> <span data-start="697.29" data-end="703.97">I would say code you don't test, or haven't tested, is really code you don't understand</span> <span data-start="703.97" data-end="705.35">as well.</span> <span data-start="705.35" data-end="711.97">That is one of the things we learned.</span> <span data-start="711.97" data-end="712.97">All right.</span> <span data-start="712.97" data-end="713.97">Lesson four.</span> <span data-start="713.97" data-end="714.97">YAGNI.</span> <span data-start="714.97" data-end="721.709">It is a popular term meaning you ain't going to need it.</span> <span data-start="721.709" data-end="728.389">As engineers, we find of have a tendency to fall into tunnel vision.</span> <span data-start="728.389" data-end="732.61">We tend to get stuck in tunnel vision over optimizing.</span> </p>
<p><span data-start="732.61" data-end="737.05">I am trying to reduce time to interact.</span> <span data-start="737.05" data-end="739.51">I am trying to get the first meaningful paint time down.</span> <span data-start="739.51" data-end="743.269">I am trying to reduce the memory heap.</span> <span data-start="743.269" data-end="744.279">This is ridiculous.</span> <span data-start="744.279" data-end="746.96">We need to reduce this, Patrick.</span> <span data-start="746.96" data-end="750.649">We just kind of rat hole into this particular perspective.</span> <span data-start="750.649" data-end="754.69">Instead of seeking feedback early and often in atomic pieces.</span> <span data-start="754.69" data-end="762.74">When you have an atomic commit and send out a review and it is an atomic bite size piece</span> <span data-start="762.74" data-end="770.449">and you want feedback often so you don't create a massive 20-page code review or pull request</span> <span data-start="770.449" data-end="773.35">so it helps provide context.</span> <span data-start="773.35" data-end="778.15">In terms of deployments, we want to think about the features we are building.</span> <span data-start="778.15" data-end="783.939">I believe performance is important but first you need metrics on that and two you want</span> <span data-start="783.939" data-end="791.18">it in tiny atomic pieces so you can get feedback early from the customers.</span> </p>
<p><span data-start="791.18" data-end="797.529">Your customer and business are eager to help avoid wasting dev cycles.</span> <span data-start="797.529" data-end="804.079">All we need to do is stop and listen because who knows.</span> <span data-start="804.079" data-end="807.579">You might have already built something really cool, right?</span> <span data-start="807.579" data-end="814.76">One note about this slide is I also wondered is this kid really happy he broke the scooter?</span> </p>
<p><span data-start="814.76" data-end="821.08">He looks kind of happy about getting a skateboard but, again, anyway.</span> <span data-start="821.08" data-end="824.019">All right.</span> <span data-start="824.019" data-end="829.91">The biggest lesson and, you know, I think if you takeaway anything of the four lessons</span> <span data-start="829.91" data-end="836.63">we learned, that what I really want to share with this group is this one.</span> <span data-start="836.63" data-end="841.689">This biggest takeaway lesson and that is to be kind, rewind.</span> <span data-start="841.689" data-end="850.189">Earlier in the day, there used to be a place we would go and you would just go through</span> <span data-start="850.189" data-end="856.829">the aisles and pick out a nice movie and then you go to the checkout and grab a sour patch</span> <span data-start="856.829" data-end="866.759">kid, a pop, and go home and enter this block thing into this other device and hit play</span> <span data-start="866.759" data-end="867.759">and boom!</span> </p>
<p><span data-start="867.759" data-end="869.759">You are able to watch an amazing movie.</span> <span data-start="869.759" data-end="871.23">It was awesome.</span> <span data-start="871.23" data-end="878.16">At the end of it, always on this particular thing you would see be kind, rewind and because</span> <span data-start="878.16" data-end="883.269">you want to be thoughtful about the next person who is going to enjoy this movie you would</span> <span data-start="883.269" data-end="888.54">be kind and rewind  —  most of the time up less you are super lazy.</span> <span data-start="888.54" data-end="894.3">The reason I harp on this is because a lot of us as engineers, at least in my case, I</span> <span data-start="894.3" data-end="900.92">have met amazing engineer managers, technical leads and software engineers who showed empathy</span> <span data-start="900.92" data-end="904.509">and worked with me.</span> <span data-start="904.509" data-end="910.149">They showed empathy when they reviewed my code, when I was trying to learn something</span> <span data-start="910.149" data-end="915.16">complex like maybe even WebAssembly, and they showed empathy and compassion.</span> <span data-start="915.16" data-end="920.829">I think a lot of times as these things are evolving we might lose out on that.</span> </p>
<p><span data-start="920.829" data-end="925.689">One thing I like to remind our engineering teams is to continue to show that empathy.</span> <span data-start="925.689" data-end="933.04">We work with a diverse group of 50 engineers and one thing we like to do is make sure we</span> <span data-start="933.04" data-end="936.27">are not too emotional about our code review process.</span> <span data-start="936.27" data-end="947.87">You get a 20PCR and might want to be empathetic but when it comes to pair programming and</span> <span data-start="947.87" data-end="951.62">helping engineers understand a particular function also.</span> <span data-start="951.62" data-end="959.42">That is the biggest lesson I hope everyone takes away from what I am presenting on.</span> </p>
<p><span data-start="959.42" data-end="960.629">That is actually it.</span> <span data-start="960.629" data-end="972.009">That</span> <span data-start="972.009" data-end="973.009">is my presentation.</span> <span data-start="973.009" data-end="974.009">Thank you, everyone.</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
