<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>e9httij2RG0</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/e9httij2RG0?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="21.63" data-end="25.3">you</span> <span data-start="25.31" data-end="29.3">so my name is Julian I am the CEO of a</span> <span data-start="29.3" data-end="30.41">company called superheater and I'm going</span> <span data-start="30.41" data-end="31.7">to come back to this later this is a</span> <span data-start="31.7" data-end="33.83">presentation about streaming algorithms</span> <span data-start="33.83" data-end="36.92">also as as a note I tend to speak very</span> <span data-start="36.92" data-end="38.89">very fast so please do not hesitate to</span> <span data-start="38.89" data-end="41.72">kill me with science and slow down I'll</span> <span data-start="41.72" data-end="44.27">try so this is a presentation about</span> <span data-start="44.27" data-end="49.309">streaming algorithms and JavaScript as I</span> <span data-start="49.309" data-end="51.41">told earlier I am Julian 51 on Twitter</span> <span data-start="51.41" data-end="55.97">and other silos and my website is super</span> <span data-start="55.97" data-end="58.16">calm</span> <span data-start="58.16" data-end="60.44">please also I wanna take one minute for</span> <span data-start="60.44" data-end="61.67">you guys to enjoy yourself to each other</span> <span data-start="61.67" data-end="63.769">maybe find someone close to you that you</span> <span data-start="63.769" data-end="64.699">don't know that you've never talked to</span> <span data-start="64.699" data-end="67.22">because every time I sit I usually don't</span> <span data-start="67.22" data-end="68.39">know my neighbor so you have one minute</span> <span data-start="68.39" data-end="70.7">please introduce yourself exchange maybe</span> <span data-start="70.7" data-end="72.98">your email or something and then come</span> <span data-start="72.98" data-end="83.74">back to the presentation</span> <span data-start="83.75" data-end="90.789">all right ready</span> <span data-start="90.799" data-end="95.039">ready ready</span> <span data-start="95.049" data-end="98.619">oh alright alright let's go</span> <span data-start="98.619" data-end="106.84">hello let's go okay so some of you might</span> <span data-start="106.84" data-end="108.52">know what that is this is kind of a</span> <span data-start="108.52" data-end="109.929">picture of the web and I'm gonna start</span> <span data-start="109.929" data-end="111.579">with a little a history of how the web</span> <span data-start="111.579" data-end="114.579">is and how it is turning into now so for</span> <span data-start="114.579" data-end="115.869">the longest time the web has been kind</span> <span data-start="115.869" data-end="119.229">of a geography world where you move from</span> <span data-start="119.229" data-end="121.209">a site to another site following links</span> <span data-start="121.209" data-end="123.399">you will have web addresses which is</span> <span data-start="123.399" data-end="126.399">very geographically even the icons of</span> <span data-start="126.399" data-end="128.41">our browser are very Geographic when you</span> <span data-start="128.41" data-end="130.39">look at obviously Firefox it's it's it's</span> <span data-start="130.39" data-end="132.79">a it's a map of the world with a fox on</span> <span data-start="132.79" data-end="134.26">it but if you look at suffering it's</span> <span data-start="134.26" data-end="135.819">it's a compass itself so it's a very</span> <span data-start="135.819" data-end="138.43">geographical approach of the web and I</span> <span data-start="138.43" data-end="139.63">think we're slowly turning into</span> <span data-start="139.63" data-end="141.13">something that is more like this where</span> <span data-start="141.13" data-end="142.989">we have more and more of a time based</span> <span data-start="142.989" data-end="144.37">approach of the web where it's it's just</span> <span data-start="144.37" data-end="146.44">too big to just even think about how big</span> <span data-start="146.44" data-end="148.78">it is and and more and more the</span> <span data-start="148.78" data-end="150.28">information comes to us directly if you</span> <span data-start="150.28" data-end="152.23">think that Twitter I usually don't go</span> <span data-start="152.23" data-end="153.849">very far in my timeline maybe not even</span> <span data-start="153.849" data-end="155.829">birthday or something like I would go</span> <span data-start="155.829" data-end="158.26">back maybe 1020 tweets and the rest of</span> <span data-start="158.26" data-end="160.03">the data just comes to me an RSS reader</span> <span data-start="160.03" data-end="161.95">has been the same forever Facebook is</span> <span data-start="161.95" data-end="163.51">the same and more and more the</span> <span data-start="163.51" data-end="165.16">information that we consume online these</span> <span data-start="165.16" data-end="167.35">devices have notifications and it's just</span> <span data-start="167.35" data-end="168.85">data coming through us so it's less and</span> <span data-start="168.85" data-end="171.22">less about me browsing sites and more</span> <span data-start="171.22" data-end="172.54">and more about me sitting and like</span> <span data-start="172.54" data-end="174.94">getting vast amounts of data in my face</span> <span data-start="174.94" data-end="176.98">and this is actually happening at all</span> <span data-start="176.98" data-end="179.829">stages of the web more and more our</span> <span data-start="179.829" data-end="183.22">website which is to be basically some</span> <span data-start="183.22" data-end="184.93">kind of application code and a database</span> <span data-start="184.93" data-end="187.03">which has a lot of states is more and</span> <span data-start="187.03" data-end="189.76">more of a system with a lot of cues and</span> <span data-start="189.76" data-end="191.5">system where the data goes in and move</span> <span data-start="191.5" data-end="192.639">to the next step and then to the next</span> <span data-start="192.639" data-end="194.109">step and then to next step and then is</span> <span data-start="194.109" data-end="196.12">eventually served back to the user or to</span> <span data-start="196.12" data-end="199.54">or even to another user and and and</span> <span data-start="199.54" data-end="201.099">that's super feature we exactly deal</span> <span data-start="201.099" data-end="203.23">with this for those we're not familiar</span> <span data-start="203.23" data-end="204.579">with super feat what super filter is</span> <span data-start="204.579" data-end="207.73">it's basically a distributed</span> <span data-start="207.73" data-end="210.37">architecture to push RSS feeds in real</span> <span data-start="210.37" data-end="212.169">time so people will come to us give us</span> <span data-start="212.169" data-end="213.91">to use lists of feeds and when you say</span> <span data-start="213.91" data-end="215.169">people it's mostly companies they come</span> <span data-start="215.169" data-end="217.12">to us and say hey I've got like half a</span> <span data-start="217.12" data-end="218.349">million houses feeds that I need to</span> <span data-start="218.349" data-end="220.419">fetch I just don't wanna do it please</span> <span data-start="220.419" data-end="222.13">push it to me so we try to get this data</span> <span data-start="222.13" data-end="224.38">build this massive pipe of data and push</span> <span data-start="224.38" data-end="225.759">it to them in real time as soon as we</span> <span data-start="225.759" data-end="226.55">can</span> <span data-start="226.55" data-end="228.89">doing this has a lot of a lot of</span> <span data-start="228.89" data-end="231.05">challenges that we need to learn we need</span> <span data-start="231.05" data-end="233.27">to solve the first one is obviously a</span> <span data-start="233.27" data-end="234.77">memory constraint if the pipe is huge</span> <span data-start="234.77" data-end="236.93">getting all this data in real time and</span> <span data-start="236.93" data-end="238.76">when when I'm talking about all this</span> <span data-start="238.76" data-end="240.25">data it's a couple of hundreds or</span> <span data-start="240.25" data-end="242.36">thousands of updates per second</span> <span data-start="242.36" data-end="244.7">it's it has a huge memory impact and you</span> <span data-start="244.7" data-end="246.11">need to store it and forget it as soon</span> <span data-start="246.11" data-end="247.79">as you can because if you even store it</span> <span data-start="247.79" data-end="249.23">for like a minute or so in memory then</span> <span data-start="249.23" data-end="252.28">everything explodes the other</span> <span data-start="252.28" data-end="254">consequence of this as well is like</span> <span data-start="254" data-end="255.89">there is no like well I'm gonna get all</span> <span data-start="255.89" data-end="257.39">the data and then when I'm done with it</span> <span data-start="257.39" data-end="259.16">then I'll start processing it like the</span> <span data-start="259.16" data-end="260.93">data comes to you and it never ends it's</span> <span data-start="260.93" data-end="262.37">actually even increasing in volume so</span> <span data-start="262.37" data-end="264.17">you start to have to do it right away</span> <span data-start="264.17" data-end="265.64">when it happens you need to process it</span> <span data-start="265.64" data-end="268.64">and then fire-and-forget again it's also</span> <span data-start="268.64" data-end="270.32">real time like you cannot again wait for</span> <span data-start="270.32" data-end="272.57">the data to be processed before you send</span> <span data-start="272.57" data-end="273.2">it to the next step</span> <span data-start="273.2" data-end="276.14">you cannot Twitter cannot wait for the</span> <span data-start="276.14" data-end="277.64">number of retweets or start on an item</span> <span data-start="277.64" data-end="278.78">before they actually show you on the</span> <span data-start="278.78" data-end="280.58">timeline like it arrives they show it to</span> <span data-start="280.58" data-end="282.11">you and then maybe later that will show</span> <span data-start="282.11" data-end="283.31">that there's been retweets and there's</span> <span data-start="283.31" data-end="285.5">been stars or favourites on your on your</span> <span data-start="285.5" data-end="288.77">on your content this actually changes</span> <span data-start="288.77" data-end="291.14">pretty much everything that we've known</span> <span data-start="291.14" data-end="293.12">and used when building applications</span> <span data-start="293.12" data-end="294.77">including and starting with algorithms</span> <span data-start="294.77" data-end="296.54">that you cannot use what we've used so</span> <span data-start="296.54" data-end="298.88">far to build applications algorithms</span> <span data-start="298.88" data-end="299.99">that we've been that we've been using</span> <span data-start="299.99" data-end="303.68">for years to build the next app the easy</span> <span data-start="303.68" data-end="305.33">solution that rubidium I'm sure a</span> <span data-start="305.33" data-end="306.86">starting thing about is like well why</span> <span data-start="306.86" data-end="308.63">can't we do just windowing or sampling</span> <span data-start="308.63" data-end="310.07">when doing it would basically be like</span> <span data-start="310.07" data-end="311.69">fine I'm gonna keep the data for like a</span> <span data-start="311.69" data-end="314.09">minute do all my competition then trash</span> <span data-start="314.09" data-end="315.89">it and then start again so buffering for</span> <span data-start="315.89" data-end="317.29">like wait a minute or a couple seconds</span> <span data-start="317.29" data-end="321.71">this works even though it's very it's</span> <span data-start="321.71" data-end="324.32">also very inaccurate in a way that if</span> <span data-start="324.32" data-end="325.85">you want to start growing the window you</span> <span data-start="325.85" data-end="327.71">will eventually come back to the memory</span> <span data-start="327.71" data-end="329.78">foam that we've had sampling is maybe</span> <span data-start="329.78" data-end="331.25">rather than keeping all the data is</span> <span data-start="331.25" data-end="333.59">keeping maybe one every ten or one every</span> <span data-start="333.59" data-end="335.33">100 and then you start seeing patterns</span> <span data-start="335.33" data-end="337.55">from this same problem you might be</span> <span data-start="337.55" data-end="339.53">missing what the important important</span> <span data-start="339.53" data-end="342.46">data is and you actually want to have a</span> <span data-start="342.46" data-end="344.72">global vision and compute on the whole</span> <span data-start="344.72" data-end="346.07">set so we're not going to talk about</span> <span data-start="346.07" data-end="347.15">windowing and sampling in this</span> <span data-start="347.15" data-end="350.6">presentation so let's start with Max and</span> <span data-start="350.6" data-end="351.8">min this is actually very easy if you</span> <span data-start="351.8" data-end="353.72">get a flow of data that comes to you you</span> <span data-start="353.72" data-end="354.979">want to know what is the max what is the</span> <span data-start="354.979" data-end="356.87">mean the most common use case for this</span> <span data-start="356.87" data-end="357.71">oops sorry</span> <span data-start="357.71" data-end="360.289">is obviously finding kind of the best</span> <span data-start="360.289" data-end="363.2">the winner in a set of data that coming</span> <span data-start="363.2" data-end="365.69">that comes to you that's easy that's</span> <span data-start="365.69" data-end="367.97">really really easy you just keep a track</span> <span data-start="367.97" data-end="369.8">of the maximum that you've seen if the</span> <span data-start="369.8" data-end="371.99">new data that you get is bigger than the</span> <span data-start="371.99" data-end="372.979">previous one then this is the new</span> <span data-start="372.979" data-end="374.99">maximum and then keep keep will keep</span> <span data-start="374.99" data-end="377.87">doing this it's it's pretty simple I'm</span> <span data-start="377.87" data-end="379.16">gonna build a little JavaScript code and</span> <span data-start="379.16" data-end="380.96">so that you can see with a visualization</span> <span data-start="380.96" data-end="383.09">how it's done we have an object called</span> <span data-start="383.09" data-end="384.8">stream F which is basically doing math</span> <span data-start="384.8" data-end="388.82">better than hopefully regular JavaScript</span> <span data-start="388.82" data-end="391.039">does it gets data through the feed</span> <span data-start="391.039" data-end="393.53">method method compares the maximum with</span> <span data-start="393.53" data-end="395.45">the new value the new values greater</span> <span data-start="395.45" data-end="400.55">than keep it as the max we to test this</span> <span data-start="400.55" data-end="402.2">and to show presentation let's do a</span> <span data-start="402.2" data-end="403.28">little thing that generates number</span> <span data-start="403.28" data-end="404.87">randomly so this is a function that</span> <span data-start="404.87" data-end="407.81">generates a number randomly and they're</span> <span data-start="407.81" data-end="410.96">arbitrarily low I mean there's no normal</span> <span data-start="410.96" data-end="415.07">distribution and this new input thing</span> <span data-start="415.07" data-end="417.95">just yields number every 10 milliseconds</span> <span data-start="417.95" data-end="420.44">between 0 and 1 using the distribution</span> <span data-start="420.44" data-end="423.53">determined here and we just put this</span> <span data-start="423.53" data-end="425.9">that we can put that into blue plot so</span> <span data-start="425.9" data-end="430.01">let's do this just gonna run this you</span> <span data-start="430.01" data-end="432.349">see that's basically what it does and if</span> </p>
<p><span data-start="432.349" data-end="434.21">I put that into a new plot and then plot</span> <span data-start="434.21" data-end="438.41">this hopefully you will see this which</span> <span data-start="438.41" data-end="440.479">makes sense like the Green Line is the</span> <span data-start="440.479" data-end="442.7">maximum and all the points are the new</span> <span data-start="442.7" data-end="444.11">points that are being added forever</span> <span data-start="444.11" data-end="445.52">looks like I'm missing the end of the</span> <span data-start="445.52" data-end="449.84">screen here so what we can see here very</span> <span data-start="449.84" data-end="452.78">easily is basically this algorithm as a</span> <span data-start="452.78" data-end="457.729">little problem here it knows too much</span> <span data-start="457.729" data-end="459.38">basically it keeps track of the old</span> <span data-start="459.38" data-end="461.06">maximum even though like maybe in a year</span> <span data-start="461.06" data-end="463.22">this all Maxima is not really worth</span> <span data-start="463.22" data-end="464.599">remembering we need to make sure that</span> <span data-start="464.599" data-end="466.22">the algorithm is smart enough to forget</span> <span data-start="466.22" data-end="468.229">and how do we do that without again</span> <span data-start="468.229" data-end="470.93">keeping you a window it's it's actually</span> <span data-start="470.93" data-end="473.479">pretty easy we just use what we call</span> <span data-start="473.479" data-end="476.66">amortize values so doing this we rather</span> <span data-start="476.66" data-end="478.61">than keeping track of I mean we keep top</span> <span data-start="478.61" data-end="479.93">of the row value but rather than</span> <span data-start="479.93" data-end="482.03">covering the row value we add some kind</span> <span data-start="482.03" data-end="483.56">of factor which maybe is the time at</span> <span data-start="483.56" data-end="485">which we've seen this value or the index</span> <span data-start="485" data-end="488.27">in the sequence and by incrementing this</span> <span data-start="488.27" data-end="490.099">we know that all the values eventually</span> <span data-start="490.099" data-end="490.35">are going</span> <span data-start="490.35" data-end="493.02">be smaller I mean for two values that</span> <span data-start="493.02" data-end="494.55">are the same the oldest one is going to</span> <span data-start="494.55" data-end="496.8">be smaller than the new one basically</span> <span data-start="496.8" data-end="501.42">and that actually works pretty well I'm</span> <span data-start="501.42" data-end="515.01">gonna go back here if we go back to the</span> <span data-start="515.01" data-end="516.93">visualization here we see that quite</span> <span data-start="516.93" data-end="519.96">quickly obviously the the highest one or</span> <span data-start="519.96" data-end="522.18">kept in track but if there's nothing</span> <span data-start="522.18" data-end="523.68">very high for a long time then it's</span> <span data-start="523.68" data-end="526.32">slowly the the next higher value is kind</span> <span data-start="526.32" data-end="530.24">of the new maximum does that make sense</span> <span data-start="530.24" data-end="532.35">so this is an easy way to compute</span> <span data-start="532.35" data-end="533.91">maximum and have some kind of memory and</span> <span data-start="533.91" data-end="536.16">like not just take the first highest</span> <span data-start="536.16" data-end="538.68">value that we have forever being the top</span> <span data-start="538.68" data-end="543.78">one all right it works pretty much the</span> <span data-start="543.78" data-end="545.34">same with minimums rather than adding</span> <span data-start="545.34" data-end="547.47">value if you see then you remove the</span> <span data-start="547.47" data-end="549.96">value at which you are you've seen them</span> <span data-start="549.96" data-end="552.63">okay next step is the average this is a</span> <span data-start="552.63" data-end="555.69">slightly more complex problem in the way</span> <span data-start="555.69" data-end="557.46">that usually you compute averages by</span> <span data-start="557.46" data-end="558.9">summing all the values that you've seen</span> <span data-start="558.9" data-end="560.37">in the dataset and then you count all</span> <span data-start="560.37" data-end="562.26">these values and you divide the first by</span> <span data-start="562.26" data-end="564.57">the second one problem that we have</span> <span data-start="564.57" data-end="566.43">obviously we do not try keep of the data</span> <span data-start="566.43" data-end="568.14">we don't keep track of the of the values</span> <span data-start="568.14" data-end="570.54">so we have no way of summing them and</span> <span data-start="570.54" data-end="572.52">counting them afterwards well the easy</span> <span data-start="572.52" data-end="574.14">way to do this is to keep running counts</span> <span data-start="574.14" data-end="576.39">so rather than just having the data and</span> <span data-start="576.39" data-end="577.8">comparing to the previous one that we</span> <span data-start="577.8" data-end="580.53">did before now we keep track of both the</span> <span data-start="580.53" data-end="582.78">sum and the count works pretty well as</span> <span data-start="582.78" data-end="594.43">well as we can see here</span> <span data-start="594.44" data-end="596.81">so as you can see I'm pretty sure you</span> <span data-start="596.81" data-end="599.12">may be them the function that we've used</span> <span data-start="599.12" data-end="601.73">here is actually a random number between</span> <span data-start="601.73" data-end="605.449">0 and 100 and quickly as we've seen here</span> <span data-start="605.449" data-end="607.759">as we can see here the pH converges</span> <span data-start="607.759" data-end="609.11">toward 50 that's the green eye in the</span> <span data-start="609.11" data-end="611.149">middle can everybody see it yeah</span> <span data-start="611.149" data-end="614.089">quickly converges with around the middle</span> <span data-start="614.089" data-end="616.399">of the curve this is great but the</span> <span data-start="616.399" data-end="619.009">problem is sometimes your data set might</span> <span data-start="619.009" data-end="626.329">have interesting properties so like like</span> <span data-start="626.329" data-end="630.079">a different distribution and the problem</span> <span data-start="630.079" data-end="631.22">that we see with different distribution</span> <span data-start="631.22" data-end="640.509">is is obviously that if you have a</span> <span data-start="640.509" data-end="642.759">distribution that does basically a</span> <span data-start="642.759" data-end="646.31">sinusoid quickly the average becomes</span> <span data-start="646.31" data-end="647.689">uninteresting because it just sits in</span> <span data-start="647.689" data-end="649.25">the middle and doesn't really give you</span> <span data-start="649.25" data-end="651.439">any day any insight on what the data is</span> </p>
<p><span data-start="651.439" data-end="654.199">I've started this 10,000 milliseconds</span> <span data-start="654.199" data-end="655.67">ago and it's already very close to zero</span> <span data-start="655.67" data-end="658.209">if I keep this running for like an hour</span> <span data-start="658.209" data-end="660.439">nobody will be able to see anything in</span> <span data-start="660.439" data-end="663.73">the India bridge it would be meaningless</span> <span data-start="663.73" data-end="668.689">the the the value the the solution to to</span> <span data-start="668.689" data-end="671.24">counter this is to kind of wait the</span> <span data-start="671.24" data-end="673.88">averages and rather than having the same</span> <span data-start="673.88" data-end="676.97">wait for all the values in the past that</span> <span data-start="676.97" data-end="679.43">the the new data has the new the new I</span> <span data-start="679.43" data-end="680.899">mean rather than having the same wait</span> <span data-start="680.899" data-end="683.269">for all the data points that you've had</span> <span data-start="683.269" data-end="687.019">just use the previous average to come to</span> <span data-start="687.019" data-end="688.759">compute the new average with the new</span> <span data-start="688.759" data-end="690.62">number so basically you take the average</span> <span data-start="690.62" data-end="694.009">at the t minus 1 multiplied by weight</span> <span data-start="694.009" data-end="696.86">add the new value and then divide by the</span> <span data-start="696.86" data-end="698.63">weight plus 1 what this does is</span> <span data-start="698.63" data-end="700.85">basically it just shrinks the the</span> <span data-start="700.85" data-end="703.339">important of the older values into the</span> <span data-start="703.339" data-end="705.62">into the into the current weight the</span> <span data-start="705.62" data-end="709.899">current average and so we can do this</span> <span data-start="709.899" data-end="720.51">here very easily</span> <span data-start="720.52" data-end="724.19">and we can see that in this context</span> <span data-start="724.19" data-end="726.82">basically the the average still is</span> <span data-start="726.82" data-end="729.53">obviously lower than the maximum and the</span> <span data-start="729.53" data-end="730.76">minimum because it's an average but at</span> <span data-start="730.76" data-end="732.35">the same time it's it slowly starts to</span> <span data-start="732.35" data-end="734.57">not decrease anymore not change much</span> <span data-start="734.57" data-end="737.45">based on what the input is so this is</span> <span data-start="737.45" data-end="739.07">obviously bending the math in a way that</span> <span data-start="739.07" data-end="741.11">is it's not the actual average over the</span> <span data-start="741.11" data-end="742.61">whole data stream but again the whole</span> <span data-start="742.61" data-end="744.77">data seam doesn't mean anything and when</span> <span data-start="744.77" data-end="747.11">you have this size of data you need to</span> <span data-start="747.11" data-end="748.88">be able to have a kind of a running</span> <span data-start="748.88" data-end="752.36">average without the windows and keeping</span> <span data-start="752.36" data-end="756.2">the data which is exactly what we do</span> <span data-start="756.2" data-end="759.23">here the next one is standard deviation</span> <span data-start="759.23" data-end="761.18">this really starts to be complex because</span> </p>
<p><span data-start="761.18" data-end="763.16">I mean the main goal of standard</span> <span data-start="763.16" data-end="764.54">deviation is to identify the outliers</span> <span data-start="764.54" data-end="767">the the number that are either way above</span> <span data-start="767" data-end="769.43">the average or way below the average you</span> <span data-start="769.43" data-end="771.71">compare basically how far they are from</span> <span data-start="771.71" data-end="775.43">the from the from the from the standard</span> <span data-start="775.43" data-end="779.39">deviation the variance is the average of</span> <span data-start="779.39" data-end="781.22">the distance to the average this is kind</span> <span data-start="781.22" data-end="782.96">of the the math lesson that everybody</span> <span data-start="782.96" data-end="784.4">learns basically you compute the average</span> <span data-start="784.4" data-end="786.02">and then the variance is you compute the</span> <span data-start="786.02" data-end="787.7">distance for between all the points and</span> <span data-start="787.7" data-end="791.03">the average and you get what we call the</span> <span data-start="791.03" data-end="793.7">variance the problem of this is as we've</span> <span data-start="793.7" data-end="797.54">seen here it use it uses the average and</span> <span data-start="797.54" data-end="798.65">if we change the average with every</span> <span data-start="798.65" data-end="800">point we have we need to recompute the</span> <span data-start="800" data-end="801.41">distance for all of the points that</span> <span data-start="801.41" data-end="802.49">we've seen in the past we've the new</span> <span data-start="802.49" data-end="805.64">average is that clear so that's kind of</span> <span data-start="805.64" data-end="806.72">a problem because obviously we don't</span> <span data-start="806.72" data-end="808.19">give the data and we don't really want</span> <span data-start="808.19" data-end="809.39">to waste our time we're computing the</span> <span data-start="809.39" data-end="811.91">average all the time well that's great</span> <span data-start="811.91" data-end="816.05">because some scientist mathematician</span> </p>
<p><span data-start="816.05" data-end="819.5">Koenig and ujin's have actually fine</span> <span data-start="819.5" data-end="821.78">changed I mean not changed but like</span> <span data-start="821.78" data-end="824.57">found that the the the equation as an</span> <span data-start="824.57" data-end="826.19">equivalent that is much easier to use in</span> <span data-start="826.19" data-end="828.14">our context which is rather than</span> <span data-start="828.14" data-end="830.48">computing the average the distance to</span> <span data-start="830.48" data-end="832.28">the average for all the values you keep</span> <span data-start="832.28" data-end="834.56">track of a running square I mean the sum</span> <span data-start="834.56" data-end="836.6">of the running square and you just</span> <span data-start="836.6" data-end="840.26">abstract a square of the average and</span> <span data-start="840.26" data-end="842.33">then so that's exactly what we're going</span> <span data-start="842.33" data-end="844.78">to do here we have</span> </p>
<p><span data-start="844.78" data-end="848.52">Bowlings we keep the basically the</span> <span data-start="848.52" data-end="850.2">the new rolling number which is the sum</span> <span data-start="850.2" data-end="851.91">of squares and for each new value that</span> <span data-start="851.91" data-end="853.74">we get we still increment the Sam</span> <span data-start="853.74" data-end="855">stealing from an account because we need</span> <span data-start="855" data-end="857.85">it for the average we also keep track of</span> <span data-start="857.85" data-end="861.12">the new sum of square and then when we</span> <span data-start="861.12" data-end="863.43">when we need the standard deviation we</span> <span data-start="863.43" data-end="867.24">just compute the square root of the sum</span> <span data-start="867.24" data-end="869.55">of squares divided by the count minus</span> <span data-start="869.55" data-end="872.28">the square of the average and we can do</span> <span data-start="872.28" data-end="883.68">that as well you know we'll see that the</span> <span data-start="883.68" data-end="885.87">oh this is the same distribution as</span> <span data-start="885.87" data-end="888.24">before a random number between 1 and 100</span> <span data-start="888.24" data-end="893.99">and the standard deviation stays around</span> <span data-start="893.99" data-end="897.78">30 I guess yeah below of this which is</span> <span data-start="897.78" data-end="899.34">expected I guess for this kind of</span> <span data-start="899.34" data-end="903.36">distribution makes sense anyone is a</span> <span data-start="903.36" data-end="913.89">question maybe not okay all right what</span> <span data-start="913.89" data-end="926.82">what do you don't understand</span> <span data-start="926.83" data-end="932.18">all right no it's it's my fault I should</span> <span data-start="932.18" data-end="934.3">be able to tell you but basically like</span> <span data-start="934.3" data-end="937.31">the regular Matt the point here is the</span> <span data-start="937.31" data-end="939.77">regular standard deviation calculation</span> <span data-start="939.77" data-end="941.3">cannot work because obviously we need to</span> <span data-start="941.3" data-end="942.89">keep track of all the data right so we</span> <span data-start="942.89" data-end="945.74">transform that equation and use another</span> <span data-start="945.74" data-end="948.41">one that allows us to do incremental</span> <span data-start="948.41" data-end="949.91">calculation of the standard deviation</span> <span data-start="949.91" data-end="953.03">that make sense better</span> <span data-start="953.03" data-end="956.33">okay next one medians and percentiles</span> <span data-start="956.33" data-end="959.48">this one is nearly I mean it is at this</span> <span data-start="959.48" data-end="961.7">point not possible without keeping some</span> <span data-start="961.7" data-end="964.03">kind of window or some kind of sampling</span> <span data-start="964.03" data-end="967.07">which is sad but it also makes sense</span> <span data-start="967.07" data-end="968.66">because the median is trying to find</span> <span data-start="968.66" data-end="974.15">which value divides the set of data into</span> <span data-start="974.15" data-end="977.06">two sets of the same size one of Greater</span> <span data-start="977.06" data-end="978.74">elements and the other one of smaller</span> <span data-start="978.74" data-end="980.78">elements there's a way to do that with</span> <span data-start="980.78" data-end="982.82">two heaps by keeping track of some</span> <span data-start="982.82" data-end="984.65">elements so it can still be pretty low</span> <span data-start="984.65" data-end="986.96">in terms of memory the algorithm is</span> <span data-start="986.96" data-end="990.92">relatedly simple the first one if start</span> <span data-start="990.92" data-end="993.26">with obviously 2m g hips and then get</span> <span data-start="993.26" data-end="993.55">going</span> <span data-start="993.55" data-end="995.66">when you get a new number if it's</span> <span data-start="995.66" data-end="997.52">greater than the previously calculated</span> <span data-start="997.52" data-end="1000.1">median ID to the greater the heap of</span> <span data-start="1000.1" data-end="1002.02">greater numbers if you get a small one</span> <span data-start="1002.02" data-end="1003.37">then you hide it to the other one and</span> <span data-start="1003.37" data-end="1007.48">then basically if the length of either</span> </p>
<p><span data-start="1007.48" data-end="1008.8">EEP is greater than the other one you</span> <span data-start="1008.8" data-end="1010.09">rebalance so you take one element from</span> <span data-start="1010.09" data-end="1011.5">one and you put it in the other one and</span> <span data-start="1011.5" data-end="1014.5">the median is always the smallest value</span> <span data-start="1014.5" data-end="1018.37">of the greater hip that makes sense so</span> <span data-start="1018.37" data-end="1020.32">it's basically you always keep track of</span> <span data-start="1020.32" data-end="1022.96">the middle here the prime again if like</span> <span data-start="1022.96" data-end="1026.38">if you try to do this on a long time you</span> <span data-start="1026.38" data-end="1028.3">will keep the the two heaps will</span> <span data-start="1028.3" data-end="1029.41">obviously keep increasing so you have a</span> <span data-start="1029.41" data-end="1031.6">huge amount of memory that you need to</span> <span data-start="1031.6" data-end="1036.64">keep luckily you can still king the data</span> <span data-start="1036.64" data-end="1039.37">by removing data from the two heaps the</span> <span data-start="1039.37" data-end="1040.63">problem of this is that you need to make</span> <span data-start="1040.63" data-end="1041.53">sure that you don't remove too much</span> <span data-start="1041.53" data-end="1043.39">because obviously if all of a sudden</span> <span data-start="1043.39" data-end="1045.46">your your time series or your series is</span> <span data-start="1045.46" data-end="1047.5">slowly decreasing you will slowly move</span> <span data-start="1047.5" data-end="1048.79">all the data from one hip to the other</span> <span data-start="1048.79" data-end="1049.99">one and then you won't have enough data</span> <span data-start="1049.99" data-end="1052.39">to keep track of what is the what if the</span> <span data-start="1052.39" data-end="1055.24">what is the the median here which is a</span> <span data-start="1055.24" data-end="1057.79">problem</span> <span data-start="1057.8" data-end="1061.58">all right another one that is</span> <span data-start="1061.58" data-end="1064.01">interesting is in a huge data if you've</span> <span data-start="1064.01" data-end="1066.95">got a huge data set and of incoming data</span> <span data-start="1066.95" data-end="1068.6">and you want to keep track of the thing</span> <span data-start="1068.6" data-end="1070.07">that you might have already seen and</span> <span data-start="1070.07" data-end="1072.14">make sure that either you've already</span> <span data-start="1072.14" data-end="1073.55">seen because you don't want to look it</span> <span data-start="1073.55" data-end="1075.61">up or you don't you want to make sure</span> <span data-start="1075.61" data-end="1080.44">any context of say a distributed</span> <span data-start="1080.44" data-end="1082.58">algorithm that would run across a used</span> <span data-start="1082.58" data-end="1084.44">data set you want to identify unique</span> <span data-start="1084.44" data-end="1089.18">profiles on social networks you would</span> <span data-start="1089.18" data-end="1090.95">have to keep track of all the profile</span> <span data-start="1090.95" data-end="1093.35">that you've seen which can be too big so</span> <span data-start="1093.35" data-end="1097.16">a good way to do this would be to use to</span> <span data-start="1097.16" data-end="1099.41">use bloom filters basically bloom</span> <span data-start="1099.41" data-end="1101.93">filters work in a way that there are</span> <span data-start="1101.93" data-end="1103.19">very space efficient probability</span> <span data-start="1103.19" data-end="1105.02">probably probabilistic data structures</span> <span data-start="1105.02" data-end="1108.58">that uses hash functions and and</span> <span data-start="1108.58" data-end="1112.94">dimensions to identify items that you</span> <span data-start="1112.94" data-end="1114.23">might have already seen so you set bits</span> <span data-start="1114.23" data-end="1116.99">to one when you've seen some of the ITM</span> <span data-start="1116.99" data-end="1120.59">using the hashes the problem with bloom</span> <span data-start="1120.59" data-end="1122.75">filters is you can have false positive</span> <span data-start="1122.75" data-end="1126.2">which we'll see later which means that</span> <span data-start="1126.2" data-end="1127.52">they will tell you that you might have</span> <span data-start="1127.52" data-end="1129.26">already seen some piece of data even</span> <span data-start="1129.26" data-end="1131.24">though you haven't seen it already but</span> <span data-start="1131.24" data-end="1132.86">you can never have false negative which</span> <span data-start="1132.86" data-end="1134.15">would be saying that you've seen</span> <span data-start="1134.15" data-end="1135.83">something that you actually have you</span> <span data-start="1135.83" data-end="1136.61">haven't seen something that you actually</span> <span data-start="1136.61" data-end="1140.18">have seen before it's also very</span> <span data-start="1140.18" data-end="1143.42">efficient and in increasing the the I</span> <span data-start="1143.42" data-end="1144.44">mean decreasing the probability of</span> <span data-start="1144.44" data-end="1147.5">errors is kind of easy because you add a</span> <span data-start="1147.5" data-end="1149.66">little couple bits and it's and it's</span> <span data-start="1149.66" data-end="1151.4">still very small to reduce significantly</span> <span data-start="1151.4" data-end="1153.62">the amount of false positives that you</span> <span data-start="1153.62" data-end="1157.34">may see on the data set here's a little</span> <span data-start="1157.34" data-end="1158.96">example that I've stolen online and it</span> <span data-start="1158.96" data-end="1160.46">actually works pretty well so basically</span> <span data-start="1160.46" data-end="1162.74">for each data that you see you will add</span> <span data-start="1162.74" data-end="1165.29">it to the your vector so these are the</span> <span data-start="1165.29" data-end="1166.73">blue dots can you see the blue eyes</span> <span data-start="1166.73" data-end="1168.32">maybe they're too small but basically</span> <span data-start="1168.32" data-end="1176.409">for each word that you see you add them</span> <span data-start="1176.419" data-end="1178.47">something's wrong okay so basically you</span> <span data-start="1178.47" data-end="1179.97">see like the yellow ones or the one that</span> </p>
<p><span data-start="1179.97" data-end="1181.32">I've added previously the blue ones are</span> <span data-start="1181.32" data-end="1182.97">the one that I've just added so every</span> <span data-start="1182.97" data-end="1184.98">time I add a new word I'm gonna add</span> <span data-start="1184.98" data-end="1188.059">Billy in here it will just add new</span> <span data-start="1188.059" data-end="1190.049">rectangles of the data that I've seen</span> <span data-start="1190.049" data-end="1194.4">and if I look for some data it will tell</span> <span data-start="1194.4" data-end="1195.99">me if it's Darren or not so I've added</span> <span data-start="1195.99" data-end="1197.82">Berlin Paris is not there if I look for</span> <span data-start="1197.82" data-end="1201.78">building obviously no it doesn't work</span> <span data-start="1201.78" data-end="1203.669">something is wrong here obviously it's</span> <span data-start="1203.669" data-end="1211.88">there sorry oh ah yes good point okay</span> <span data-start="1211.88" data-end="1216.84">and basically Berlin now is in there so</span> <span data-start="1216.84" data-end="1218.69">bloom filters are a great way to</span> <span data-start="1218.69" data-end="1220.5">identify data at the problem that they</span> <span data-start="1220.5" data-end="1224.13">have though is if you input a large</span> <span data-start="1224.13" data-end="1225.63">enough chunk of data you will end up</span> <span data-start="1225.63" data-end="1228.059">increasing the amount of false positive</span> <span data-start="1228.059" data-end="1229.71">by a lot and you may eventually end up</span> <span data-start="1229.71" data-end="1231.45">to a point where the bloom filter will</span> <span data-start="1231.45" data-end="1233.64">always say that it seemed that it you</span> <span data-start="1233.64" data-end="1234.99">have already seen the data that you've</span> <span data-start="1234.99" data-end="1236.64">included because it basically filled the</span> <span data-start="1236.64" data-end="1240.03">whole data structure with once I'm gonna</span> <span data-start="1240.03" data-end="1242.76">switch the next like and you have</span> <span data-start="1242.76" data-end="1244.71">different ways to deal with this either</span> <span data-start="1244.71" data-end="1247.74">you can time limit the these bomb</span> <span data-start="1247.74" data-end="1248.909">features so basically you do a bloom</span> <span data-start="1248.909" data-end="1251.039">filter per hour per minute per year and</span> <span data-start="1251.039" data-end="1252.9">then you can do things like finding</span> <span data-start="1252.9" data-end="1255.27">trending trends basically so if you do</span> <span data-start="1255.27" data-end="1258.179">bloom filters per minute you fill it up</span> <span data-start="1258.179" data-end="1259.2">and then every time you get the data</span> <span data-start="1259.2" data-end="1260.73">that matches it you check if it was also</span> <span data-start="1260.73" data-end="1262.02">in the last minute in the previous</span> <span data-start="1262.02" data-end="1263.37">minute in the previous hour and you can</span> <span data-start="1263.37" data-end="1265.23">see that a given term has been showing</span> <span data-start="1265.23" data-end="1267.6">up pretty often in the past time very</span> <span data-start="1267.6" data-end="1270.33">easily with this you can also extend</span> <span data-start="1270.33" data-end="1273.179">them by adding more bytes to the vector</span> <span data-start="1273.179" data-end="1274.74">the problem of this is like an infinite</span> <span data-start="1274.74" data-end="1276.03">data stream obviously the number of</span> <span data-start="1276.03" data-end="1277.47">bytes is gonna increase as well so it</span> <span data-start="1277.47" data-end="1279.9">doesn't increase as fast but still you</span> <span data-start="1279.9" data-end="1282.87">might with thousands and thousands and</span> <span data-start="1282.87" data-end="1285">billions of items you may end up having</span> <span data-start="1285" data-end="1287.61">to keep extending which eventually might</span> <span data-start="1287.61" data-end="1290.19">be expensive in terms of memory you can</span> <span data-start="1290.19" data-end="1292.2">do what we call counting filters which</span> <span data-start="1292.2" data-end="1293.58">which are basically filters to which you</span> <span data-start="1293.58" data-end="1295.2">add in remove data and you can either</span> <span data-start="1295.2" data-end="1298.08">remove data by removing the data itself</span> <span data-start="1298.08" data-end="1300.57">or just decide that you'd agreement all</span> <span data-start="1300.57" data-end="1303.51">the elements in the bloom filter by one</span> <span data-start="1303.51" data-end="1305.309">every amount of time so every 5 minutes</span> <span data-start="1305.309" data-end="1307.44">every hour or so you just decide that</span> <span data-start="1307.44" data-end="1309.13">the bloom filter is going to lose</span> <span data-start="1309.13" data-end="1310.51">some of the data that it seems before</span> <span data-start="1310.51" data-end="1312.46">that it's seen before using this</span> <span data-start="1312.46" data-end="1317.08">technique and this is kind of the end</span> <span data-start="1317.08" data-end="1319.51">here this was really barely scratching</span> <span data-start="1319.51" data-end="1321.94">the surface of how you need to handle</span> <span data-start="1321.94" data-end="1324.1">these kind of problems of streams rather</span> <span data-start="1324.1" data-end="1326.53">than considering use datasets and state</span> <span data-start="1326.53" data-end="1328.33">that you have I would definitely</span> <span data-start="1328.33" data-end="1330.34">recommend that you look into this this</span> <span data-start="1330.34" data-end="1331.09">is something that I've completely</span> <span data-start="1331.09" data-end="1333.93">discovered a couple a couple months ago</span> <span data-start="1333.93" data-end="1338.02">and this has been fascinating to me this</span> <span data-start="1338.02" data-end="1339.76">is now the end I will happily take</span> <span data-start="1339.76" data-end="1357.25">questions if you have any this</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
