<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>g1hCfENbXFA</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/g1hCfENbXFA?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="8.49" data-end="14.74">hello so my talk is about extreme</span> <span data-start="14.74" data-end="18.25">JavaScript performance extreme just</span> <span data-start="18.25" data-end="19.689">sounds better so it's really about</span> <span data-start="19.689" data-end="22.27">JavaScript performance I think it will</span> <span data-start="22.27" data-end="27.88">take this out test test so in in the</span> <span data-start="27.88" data-end="31.349">program it says I will talk about</span> <span data-start="31.349" data-end="35.71">profiling and other stuff I left left</span> <span data-start="35.71" data-end="38.83">out the profiling part because I think</span> <span data-start="38.83" data-end="40.57">30 minutes is a little too short for</span> <span data-start="40.57" data-end="44.589">that instead I will give you a bit of a</span> <span data-start="44.589" data-end="47.769">general information about like how you</span> <span data-start="47.769" data-end="50.08">can make chava script faster and I will</span> <span data-start="50.08" data-end="55.869">show you that on some examples so the</span> <span data-start="55.869" data-end="57.879">first thing about performance which is</span> <span data-start="57.879" data-end="59.26">the most important part about</span> <span data-start="59.26" data-end="61.299">performance but it's JavaScript or</span> <span data-start="61.299" data-end="66.25">anything else is do not ever optimize</span> <span data-start="66.25" data-end="74.38">prematurely just only it's really never</span> <span data-start="74.38" data-end="76.42">optimize anything just because you think</span> <span data-start="76.42" data-end="79.54">it will be a problem in the future just</span> <span data-start="79.54" data-end="81.67">write your code so you can read it and</span> <span data-start="81.67" data-end="85.48">it's manageable in the future and only</span> <span data-start="85.48" data-end="88.18">optimize when you actually do have a</span> <span data-start="88.18" data-end="91.72">performance problem and in that case it</span> <span data-start="91.72" data-end="93.63">will help you to profile your code and</span> <span data-start="93.63" data-end="98.08">see what portions of your code actually</span> <span data-start="98.08" data-end="100.18">cause the problems the performance</span> <span data-start="100.18" data-end="105.159">problems so the code i use in the</span> <span data-start="105.159" data-end="107.71">examples of this talk you can get that</span> <span data-start="107.71" data-end="112.57">at this address trim / extreme j/s it's</span> <span data-start="112.57" data-end="116.409">a github gist so there's some code on</span> <span data-start="116.409" data-end="119.89">there just protein into an HTML file you</span> <span data-start="119.89" data-end="124.21">can look at that in your browser um so</span> </p>
<p><span data-start="124.21" data-end="125.62">JavaScript performance is very</span> <span data-start="125.62" data-end="128.25">interesting because it's not only like</span> <span data-start="128.25" data-end="130.479">you don't really have like a defined</span> <span data-start="130.479" data-end="133.47">environments your JavaScript Ramsey I</span> <span data-start="133.47" data-end="136.12">talk about JavaScript performs in the</span> <span data-start="136.12" data-end="137.99">browser especially</span> <span data-start="137.99" data-end="140.21">it would also apply to server side stuff</span> <span data-start="140.21" data-end="142.52">but let's see what's what browsers are</span> <span data-start="142.52" data-end="146.93">up there and what JavaScript engines to</span> <span data-start="146.93" data-end="151.57">have so first a spider monkey Firefox</span> <span data-start="151.57" data-end="155.03">it's pretty interesting they have done a</span> <span data-start="155.03" data-end="157.33">lot of stuff recently to make it faster</span> <span data-start="157.33" data-end="162.08">this javascriptcore in Safari and some</span> <span data-start="162.08" data-end="166.61">other WebKit browsers also very decent</span> </p>
<p><span data-start="166.61" data-end="169.85">JavaScript engine there is a chase</span> <span data-start="169.85" data-end="173.3">script which is like JavaScript without</span> <span data-start="173.3" data-end="184.1">the other yeah it's it works and we</span> <span data-start="184.1" data-end="186.59">heard already that like the IE guys are</span> <span data-start="186.59" data-end="188.18">like working on the next generation</span> <span data-start="188.18" data-end="190.82">engine that will come out like next</span> <span data-start="190.82" data-end="193.94">century and this of course we ate in in</span> <span data-start="193.94" data-end="196.07">chrome and we ate this is kind of an</span> <span data-start="196.07" data-end="199.19">exception because state Google like</span> <span data-start="199.19" data-end="201.14">really took the step ahead and to make</span> <span data-start="201.14" data-end="203.24">made a JavaScript ancient it like run</span> <span data-start="203.24" data-end="205.6">separately for each browser tab and</span> <span data-start="205.6" data-end="207.95">there's a lot of other features that are</span> <span data-start="207.95" data-end="213.5">very nice surprisingly except for chase</span> <span data-start="213.5" data-end="216.44">script each of those engines is kind of</span> <span data-start="216.44" data-end="220.22">like fastest in some situations so you</span> <span data-start="220.22" data-end="221.81">cannot say that moment is faster than</span> <span data-start="221.81" data-end="225.04">the other or you can like to general</span> <span data-start="225.04" data-end="228.01">that's like a general trend that</span> <span data-start="228.01" data-end="231.26">javascriptcore and v8 are the fastest</span> <span data-start="231.26" data-end="233.75">engines with with spider monkey like</span> <span data-start="233.75" data-end="236.33">trailing in close behind and chase</span> <span data-start="236.33" data-end="240.47">script is like somewhere else it's</span> <span data-start="240.47" data-end="241.85">really interesting if you look at the</span> <span data-start="241.85" data-end="247.91">examples anyway so my first tip is a</span> <span data-start="247.91" data-end="249.38">void function calls this is like the</span> <span data-start="249.38" data-end="252.61">beginners tip if you look at the code</span> <span data-start="252.61" data-end="255.35">here you see you have the square</span> <span data-start="255.35" data-end="259.43">function that returns the square the</span> <span data-start="259.43" data-end="261.739">parameter Square and if you do like</span> <span data-start="261.739" data-end="267.29">10,000 iterations it has to do like</span> <span data-start="267.29" data-end="269.249">10,000 function calls in there</span> <span data-start="269.249" data-end="271.409">except in JavaScript engines that in</span> <span data-start="271.409" data-end="275.129">line the code or like compared to that</span> <span data-start="275.129" data-end="277.339">if you do the statement correctly</span> <span data-start="277.339" data-end="279.959">directly in the code without the</span> <span data-start="279.959" data-end="283.519">function call in the second example so</span> <span data-start="283.519" data-end="286.859">basically what we do here we take the</span> <span data-start="286.859" data-end="289.079">function call and in line it into the</span> <span data-start="289.079" data-end="292.309">code it's it's an obvious performance</span> <span data-start="292.309" data-end="295.259">improvement because the function call</span> <span data-start="295.259" data-end="296.999">just falls away function calls are very</span> <span data-start="296.999" data-end="300.239">expensive in JavaScript normally but</span> <span data-start="300.239" data-end="302.309">this example also put also apply to like</span> <span data-start="302.309" data-end="304.969">basically every other language up there</span> <span data-start="304.969" data-end="308.749">what are the results here you can see</span> </p>
<p><span data-start="308.749" data-end="311.399">Firefox this is like for I don't know a</span> <span data-start="311.399" data-end="313.019">million iterations or something of this</span> <span data-start="313.019" data-end="317.099">code obviously much faster to inline</span> <span data-start="317.099" data-end="320.699">Safari also the difference is not quite</span> <span data-start="320.699" data-end="325.139">as high on aida is like a little bit of</span> <span data-start="325.139" data-end="328.699">a problem with the first method call and</span> <span data-start="328.699" data-end="331.709">but but you can see it's it's actually</span> <span data-start="331.709" data-end="334.559">faster than firefox i'm not quite sure</span> <span data-start="334.559" data-end="337.319">which version i used here but it's like</span> <span data-start="337.319" data-end="340.069">a recent version so interesting and</span> <span data-start="340.069" data-end="342.629">chrome like kind of beats the crap out</span> <span data-start="342.629" data-end="345.749">of the other browsers actually like with</span> <span data-start="345.749" data-end="348.679">with with both methods in of doing this</span> <span data-start="348.679" data-end="351.329">so you can see the differences in</span> <span data-start="351.329" data-end="355.169">browser performance are quite huge so</span> <span data-start="355.169" data-end="358.019">for the IE part but what happens there</span> <span data-start="358.019" data-end="362.339">this happens and interestingly this</span> <span data-start="362.339" data-end="364.079">morning comes up after one second of</span> <span data-start="364.079" data-end="367.199">running and I've got the same boring</span> <span data-start="367.199" data-end="369.719">like sometimes after five seconds of</span> <span data-start="369.719" data-end="371.429">javascript stuff that's running and</span> <span data-start="371.429" data-end="374.249">sometimes it comes up after one second i</span> <span data-start="374.249" data-end="376.259">don't i'm not quite sure what happens</span> <span data-start="376.259" data-end="381.089">there yeah so it'd be very careful with</span> <span data-start="381.089" data-end="384.179">with like tight loops that like</span> <span data-start="384.179" data-end="390.239">calculate a lot of stuff ok so we've</span> <span data-start="390.239" data-end="395.159">seen earlier that there's not a bad</span> <span data-start="395.159" data-end="397.319">worker stuff in some browsers which</span> <span data-start="397.319" data-end="399.03">might help you</span> <span data-start="399.03" data-end="403.74">avoid this kind of thing but you can</span> <span data-start="403.74" data-end="405.72">just optimize your loops and maybe like</span> <span data-start="405.72" data-end="408.3">you get under one second and then you</span> <span data-start="408.3" data-end="411.06">won't get those warnings and these</span> <span data-start="411.06" data-end="412.5">warnings interestingly behave</span> <span data-start="412.5" data-end="415.25">differently in every browser so you</span> <span data-start="415.25" data-end="419.39">manage really may vary with this anyway</span> <span data-start="419.39" data-end="424.35">secondly embrace the language what does</span> <span data-start="424.35" data-end="428.16">it mean really use JavaScript away it's</span> <span data-start="428.16" data-end="431.01">like it offers all those facilities it</span> <span data-start="431.01" data-end="434.46">has don't try to write JavaScript code</span> <span data-start="434.46" data-end="436.71">that looks like Java code or that looks</span> <span data-start="436.71" data-end="438.57">like C code or something right</span> <span data-start="438.57" data-end="442.44">javascript as an example of this if you</span> <span data-start="442.44" data-end="445.65">compare the performance of using</span> <span data-start="445.65" data-end="448.68">literals for arrays or objects with</span> <span data-start="448.68" data-end="451.35">doing new array or new object which is</span> <span data-start="451.35" data-end="457.65">see sometimes in bed code you will see</span> <span data-start="457.65" data-end="459.9">there's differences in performance these</span> <span data-start="459.9" data-end="462.03">things do not do exactly the same thing</span> <span data-start="462.03" data-end="465.66">but for all intents and purposes in</span> <span data-start="465.66" data-end="468.38">normal code they are exactly the same</span> <span data-start="468.38" data-end="472.13">how does this perform you can see</span> <span data-start="472.13" data-end="476.93">slightly faster firefox safari is like</span> <span data-start="476.93" data-end="481.89">much faster than firefox or IE quite</span> <span data-start="481.89" data-end="485.91">fast chrome is interesting you with with</span> <span data-start="485.91" data-end="488.52">like the new stuff it's it's slower than</span> <span data-start="488.52" data-end="491.01">safari but with the literals it's faster</span> <span data-start="491.01" data-end="492.84">than safari and overall it's the fastest</span> <span data-start="492.84" data-end="496.71">browser you can see you can get some</span> <span data-start="496.71" data-end="500.49">performance out of this um but but you</span> <span data-start="500.49" data-end="503.16">can do anymore let's look at this</span> <span data-start="503.16" data-end="510.96">example parse int 12.5 okay 12 that</span> <span data-start="510.96" data-end="513.42">actually should be a string here sorry</span> <span data-start="513.42" data-end="518.04">for that but you can most languages you</span> <span data-start="518.04" data-end="519.65">can do things like in a lot of ways</span> <span data-start="519.65" data-end="522.57">there's four examples pearl where to say</span> <span data-start="522.57" data-end="524.84">you can do everything in a lot of ways</span> <span data-start="524.84" data-end="528.8">probably in like infinitely many ways</span> <span data-start="528.8" data-end="530.94">it's probably not true in JavaScript</span> </p>
<p><span data-start="530.94" data-end="532.39">Patrick you can do stuff</span> <span data-start="532.39" data-end="536.02">differently for parseint its part in</span> <span data-start="536.02" data-end="537.19">this kind of an expensive operation</span> <span data-start="537.19" data-end="538.96">mostly because there's a function call</span> <span data-start="538.96" data-end="541.66">involved so what we can do instead is</span> <span data-start="541.66" data-end="546.97">this this does too for all intents and</span> <span data-start="546.97" data-end="549.82">purposes again the same thing what keg</span> <span data-start="549.82" data-end="551.41">what's what's going on here you might</span> <span data-start="551.41" data-end="553.6">might ask this is kind of like a bit</span> <span data-start="553.6" data-end="557.05">tricky so this is going on you have a</span> <span data-start="557.05" data-end="560.38">double bitwise not which floors the</span> <span data-start="560.38" data-end="563.77">number that it's given and 1 times a</span> <span data-start="563.77" data-end="566.32">string will coerce the string into a</span> <span data-start="566.32" data-end="569.92">float so it returns 12.5 and the double</span> <span data-start="569.92" data-end="574.93">bitwise not force the 12.5 to 12 bitwise</span> <span data-start="574.93" data-end="577.39">operations in JavaScript interesting in</span> <span data-start="577.39" data-end="579.13">this case because a bitwise interation</span> <span data-start="579.13" data-end="584.17">always forces the the input for the</span> <span data-start="584.17" data-end="591.88">operation into a 32-bit integer so you</span> <span data-start="591.88" data-end="594.16">can see sometimes you can use language</span> <span data-start="594.16" data-end="597.73">stuff to kind of abuse it but actually</span> <span data-start="597.73" data-end="600.52">this stuff is faster than just using the</span> <span data-start="600.52" data-end="603.58">powers in it and then some in most cases</span> <span data-start="603.58" data-end="609.1">also shorter code so we can see Firefox</span> <span data-start="609.1" data-end="612.1">faster Safari faster firefox is much</span> <span data-start="612.1" data-end="617.53">faster here it's like lot faster ie yeah</span> <span data-start="617.53" data-end="621.34">and chrome and Chrome actually passing</span> <span data-start="621.34" data-end="623.32">this faster so it seems they have</span> <span data-start="623.32" data-end="626.47">optimized the past and colander engine</span> <span data-start="626.47" data-end="629.86">to probably not be a function call but</span> <span data-start="629.86" data-end="633.04">something else direct coercion into an</span> <span data-start="633.04" data-end="636.4">integer so it's really interesting 5 x</span> <span data-start="636.4" data-end="637.93">50 times faster than safari for this</span> <span data-start="637.93" data-end="644.86">operation loops loops is another like</span> <span data-start="644.86" data-end="650.14">low-hanging performance fruit is a for</span> <span data-start="650.14" data-end="654.67">loop comparator of i loop this is two</span> <span data-start="654.67" data-end="656.47">loops to exactly the same thing except</span> <span data-start="656.47" data-end="659.68">one counts up data comes down</span> <span data-start="659.68" data-end="663.83">the vial I minus minus counts down the I</span> <span data-start="663.83" data-end="667.16">until I hit zero and then the expression</span> <span data-start="667.16" data-end="670.69">is false and then your code continues so</span> <span data-start="670.69" data-end="675.37">for for each code snippets it will add</span> <span data-start="675.37" data-end="679.46">still 10,000 times through the test</span> <span data-start="679.46" data-end="684.05">variable how is the performance as</span> <span data-start="684.05" data-end="686.36">easily explained the province is exactly</span> <span data-start="686.36" data-end="693.41">the same which means in this case you</span> <span data-start="693.41" data-end="695.24">probably should use the by loop because</span> <span data-start="695.24" data-end="699.41">the by loop is just short a code one</span> <span data-start="699.41" data-end="704.56">expression less than the for loop I</span> <span data-start="704.56" data-end="707.24">personally find it easier to read I</span> <span data-start="707.24" data-end="710.65">don't like the for statement that much</span> <span data-start="710.65" data-end="715.4">it's kind of I don't know it feels weird</span> <span data-start="715.4" data-end="721.449">if you can do something more elegantly</span> <span data-start="721.459" data-end="725.3">your mileage may vary but that's worth</span> <span data-start="725.3" data-end="727.279">much more interesting is this so this is</span> <span data-start="727.279" data-end="730.85">like a loop that counts down I 60 times</span> <span data-start="730.85" data-end="734.959">and increases J for each iteration of</span> <span data-start="734.959" data-end="736.579">course this is cole is completely</span> <span data-start="736.579" data-end="741.529">useless but makes nice example of what I</span> <span data-start="741.529" data-end="747.11">mean so here's the same thing so guess</span> <span data-start="747.11" data-end="752.66">what is faster so the unrolled loop is</span> <span data-start="752.66" data-end="756.829">like two times faster in Firefox it's</span> <span data-start="756.829" data-end="759.16">like three times fast ends of RA it's</span> <span data-start="759.16" data-end="762.47">two times faster and I eat like five</span> <span data-start="762.47" data-end="766.129">times faster on Chrome the fun part of</span> <span data-start="766.129" data-end="768.679">this is this even works if there's like</span> <span data-start="768.679" data-end="772.939">two thousand expressions there so the</span> </p>
<p><span data-start="772.939" data-end="775.309">JavaScript parses are very very</span> <span data-start="775.309" data-end="778.189">efficient in passing JavaScript but I</span> <span data-start="778.189" data-end="779.42">guess they are not very efficient in</span> <span data-start="779.42" data-end="783.529">doing loops kind of an interesting</span> <span data-start="783.529" data-end="786.079">finding so I actually did some</span> </p>
<p><span data-start="786.079" data-end="789.17">JavaScript code for in certain cases to</span> <span data-start="789.17" data-end="791.48">make it faster by unrolling loops and</span> <span data-start="791.48" data-end="793.519">just having the same statements repeated</span> <span data-start="793.519" data-end="798.549">over and over again it's very ugly but</span> <span data-start="798.549" data-end="802.749">it really helps in some cases again</span> <span data-start="802.749" data-end="805.309">think about the first slide that do not</span> <span data-start="805.309" data-end="811.339">optimized prematurely for f — -ing cage</span> <span data-start="811.339" data-end="815.929">Global's it's kind of interesting if you</span> <span data-start="815.929" data-end="817.79">have this code if you compare it the</span> <span data-start="817.79" data-end="820.97">only thing we do is is Mukesh window in</span> <span data-start="820.97" data-end="827.179">a like local variable this gives very</span> <span data-start="827.179" data-end="829.339">interesting results like Firefox is</span> <span data-start="829.339" data-end="833.209">really slow with this stuff if you</span> <span data-start="833.209" data-end="836.509">compare that the speed it's quite</span> <span data-start="836.509" data-end="840.889">interesting so in this case so far is 20</span> <span data-start="840.889" data-end="843.259">times faster than firefox it's also</span> <span data-start="843.259" data-end="846.679">faster than chrome is in this case IE</span> <span data-start="846.679" data-end="849.27">works with stuff that's</span> <span data-start="849.27" data-end="851.55">kind of I don't know what's going on in</span> </p>
<p><span data-start="851.55" data-end="855.72">AE it ie always like delivers the right</span> <span data-start="855.72" data-end="858.8">results but you never quite sure about</span> <span data-start="858.8" data-end="863.22">the performance so what this stuff shows</span> <span data-start="863.22" data-end="865.83">that you cannot really say born browser</span> <span data-start="865.83" data-end="867.93">is faster than the other except that all</span> <span data-start="867.93" data-end="872.54">browsers are faster than i ii and but</span> <span data-start="872.54" data-end="875.01">actually found some cases where I is</span> <span data-start="875.01" data-end="878.04">faster than than other browsers I ease</span> <span data-start="878.04" data-end="879.3">pretty good with some regular</span> <span data-start="879.3" data-end="882.75">expressions I think the lib regular</span> <span data-start="882.75" data-end="886.05">expression library on Windows is pretty</span> <span data-start="886.05" data-end="890.64">optimized for certain things so it might</span> <span data-start="890.64" data-end="892.5">still not hold true that like all</span> <span data-start="892.5" data-end="894.93">browsers are faster than IE in most</span> <span data-start="894.93" data-end="898.71">cases they are but in some cases I email</span> <span data-start="898.71" data-end="902.1">might even beat them so it's more</span> <span data-start="902.1" data-end="904.65">importantly you really have to test your</span> <span data-start="904.65" data-end="907.2">code and all those problems especially</span> <span data-start="907.2" data-end="909.15">if you know that you have a performance</span> <span data-start="909.15" data-end="911.4">issue in one browser it's very likely</span> <span data-start="911.4" data-end="914.46">that you have similar performance issues</span> <span data-start="914.46" data-end="917.73">in other browsers and also try your code</span> <span data-start="917.73" data-end="919.83">unlike hardware that's like not the</span> <span data-start="919.83" data-end="921.48">latest and greatest stuff that you have</span> <span data-start="921.48" data-end="925.29">for development but that your users</span> <span data-start="925.29" data-end="930.66">might have expression tuning not a</span> <span data-start="930.66" data-end="933.27">low-hanging performance field-proven in</span> <span data-start="933.27" data-end="936.84">some cases it's easily explained it's</span> <span data-start="936.84" data-end="939.06">just like switch around that order a few</span> <span data-start="939.06" data-end="941.4">expressions in the way you expect them</span> <span data-start="941.4" data-end="946.25">to mostly be in most cases in this case</span> </p>
<p><span data-start="946.25" data-end="951.27">B is false so the end times end part of</span> <span data-start="951.27" data-end="955.09">this expression will never get evaluated</span> <span data-start="955.1" data-end="961.83">can see helps quite a bit on IE it's</span> <span data-start="961.83" data-end="964.92">like almost three times as fast on the</span> <span data-start="964.92" data-end="967.17">other browsers it's also slightly faster</span> <span data-start="967.17" data-end="970.05">and it's important to note that this is</span> <span data-start="970.05" data-end="972.84">a language feature it's not like an</span> <span data-start="972.84" data-end="974.97">engine optimization anything that like</span> <span data-start="974.97" data-end="976.98">second part of this expression will</span> <span data-start="976.98" data-end="978.29">never get evaluated</span> <span data-start="978.29" data-end="983.639">so in this code you see I'll define n to</span> <span data-start="983.639" data-end="986.779">be one and I say say if true and N</span> <span data-start="986.779" data-end="990.389">equals 2 which means the second part of</span> <span data-start="990.389" data-end="992.1">this expression will only be evaluated</span> <span data-start="992.1" data-end="994.619">if the first part is true and this is</span> <span data-start="994.619" data-end="996.54">true in this case so n will be set to</span> <span data-start="996.54" data-end="1001.16">true but in the second part I say true</span> <span data-start="1001.16" data-end="1007.04">or N equals 3 so true is already true of</span> <span data-start="1007.04" data-end="1009.949">course and so the second part of the or</span> <span data-start="1009.949" data-end="1012.11">expression will not get evaluated and</span> <span data-start="1012.11" data-end="1016.759">will not get set to free you can use</span> <span data-start="1016.759" data-end="1018.139">that in some clever ways also to</span> <span data-start="1018.139" data-end="1021.649">optimize this size if you code and also</span> <span data-start="1021.649" data-end="1023.389">to make sure that no one ever will</span> <span data-start="1023.389" data-end="1026.839">understand your code again but in</span> <span data-start="1026.839" data-end="1028.76">certain cases it might be the right</span> <span data-start="1028.76" data-end="1030.38">thing to do if you really want to</span> <span data-start="1030.38" data-end="1032.209">optimize that last bit of performance</span> <span data-start="1032.209" data-end="1039.169">out if you go and finally we have stuff</span> <span data-start="1039.169" data-end="1044.959">that you should never ever do let's look</span> <span data-start="1044.959" data-end="1047.48">at the brief statement the beef</span> <span data-start="1047.48" data-end="1050.27">statement is kind of cool it allows you</span> <span data-start="1050.27" data-end="1054.799">to write shorter code but so if this</span> <span data-start="1054.799" data-end="1060.23">code again does the same thing let's</span> <span data-start="1060.23" data-end="1062.779">look at this hour Firefox mm-hmm looks</span> <span data-start="1062.779" data-end="1065.809">like five times faster to power a</span> <span data-start="1065.809" data-end="1067.909">slightly faster ie the same speech</span> <span data-start="1067.909" data-end="1071.659">interesting on Chrome it's like more</span> <span data-start="1071.659" data-end="1075.34">than x 10 times as fast without the Biff</span> <span data-start="1075.34" data-end="1078.47">it chose an interesting thing which will</span> <span data-start="1078.47" data-end="1081.32">come to in a second but let's look at</span> <span data-start="1081.32" data-end="1083.799">another thing that you should avoid</span> <span data-start="1083.799" data-end="1089.299">try-catch try-catch should probably only</span> <span data-start="1089.299" data-end="1091.159">be used in cases where you want to test</span> <span data-start="1091.159" data-end="1094.64">for browser features where you know that</span> <span data-start="1094.64" data-end="1096.83">like certain code might throw an</span> <span data-start="1096.83" data-end="1100.039">exception or like in very rare cases</span> <span data-start="1100.039" data-end="1102.409">where performance is not important but</span> <span data-start="1102.409" data-end="1105.14">you you really don't know if an</span> <span data-start="1105.14" data-end="1106.58">expression will succeed or not and you</span> <span data-start="1106.58" data-end="1109.46">don't have any facility to check</span> <span data-start="1109.46" data-end="1111.159">your input before you do your</span> <span data-start="1111.159" data-end="1116.179">expressions so what happens here so with</span> <span data-start="1116.179" data-end="1118.07">the try-catch you can see in Firefox</span> <span data-start="1118.07" data-end="1119.57">it's almost the same than firefox it's</span> <span data-start="1119.57" data-end="1124.21">not really a problem in safari or well</span> <span data-start="1124.21" data-end="1130.34">on IE same thing chrome again ten times</span> <span data-start="1130.34" data-end="1134.179">as fast it's more interesting to look at</span> <span data-start="1134.179" data-end="1137.539">this like this so you can see firefox</span> <span data-start="1137.539" data-end="1144.71">safari IE chrome what happens there by</span> <span data-start="1144.71" data-end="1146.75">it is like the same speed for both</span> <span data-start="1146.75" data-end="1149.24">expressions of football forms Biff try</span> <span data-start="1149.24" data-end="1152.39">catch without try catch on IE but not in</span> <span data-start="1152.39" data-end="1154.88">the other browsers the answer to this is</span> <span data-start="1154.88" data-end="1159.289">relatively simple in the browsers where</span> <span data-start="1159.289" data-end="1161.21">the difference is these are the modern</span> </p>
<p><span data-start="1161.21" data-end="1163.279">JavaScript engines that have just in</span> <span data-start="1163.279" data-end="1165.08">time compilers and like do a lot of</span> <span data-start="1165.08" data-end="1167.809">optimization on your code translated to</span> <span data-start="1167.809" data-end="1171.71">native code in most cases but certain</span> <span data-start="1171.71" data-end="1173.39">features are not supported by them very</span> <span data-start="1173.39" data-end="1177.11">well among them try catch and the beef</span> <span data-start="1177.11" data-end="1183.049">statement a a good way to like think</span> <span data-start="1183.049" data-end="1185.39">about this in a way of like how can I</span> <span data-start="1185.39" data-end="1188.899">avoid that these modern engines have to</span> <span data-start="1188.899" data-end="1190.88">switch to their like slower code paths</span> <span data-start="1190.88" data-end="1193.1">because I use features that they might</span> <span data-start="1193.1" data-end="1194.45">not support as well for just-in-time</span> <span data-start="1194.45" data-end="1197.169">compilation is looking at the</span> <span data-start="1197.169" data-end="1200">specification for the next version of</span> </p>
<p><span data-start="1200" data-end="1205.669">JavaScript it's equal to 60 to 50</span> <span data-start="1205.669" data-end="1211.49">edition draft whatever whatever of</span> <span data-start="1211.49" data-end="1212.63">course no one ever reads these</span> <span data-start="1212.63" data-end="1215.929">specifications because you have other</span> <span data-start="1215.929" data-end="1221.34">stuff to do like make a living stuff</span> <span data-start="1221.34" data-end="1224.1">it's you don't want to read this stuff</span> <span data-start="1224.1" data-end="1225.66">if you want to like leave this to other</span> <span data-start="1225.66" data-end="1229.5">people mostly these are a very good blog</span> <span data-start="1229.5" data-end="1232.38">post Jean rezek wrote about the features</span> <span data-start="1232.38" data-end="1234.39">in there especially about the strict</span> <span data-start="1234.39" data-end="1236.61">mode features and the strict mode is</span> <span data-start="1236.61" data-end="1239.94">very interesting so here's a link to the</span> </p>
<p><span data-start="1239.94" data-end="1244.47">Jones blog post basically avoid any</span> <span data-start="1244.47" data-end="1246.21">stuff that's not supported in the strict</span> <span data-start="1246.21" data-end="1248.07">mode and you will stand a good chance</span> <span data-start="1248.07" data-end="1250.02">that the code you write will be very</span> <span data-start="1250.02" data-end="1252.03">efficient in those new JavaScript</span> <span data-start="1252.03" data-end="1255.6">engines the strict mode for example does</span> <span data-start="1255.6" data-end="1259.35">away with the wave statement it still</span> <span data-start="1259.35" data-end="1261.39">has try-catch fall so it only works</span> <span data-start="1261.39" data-end="1264.33">partially but if you do write codes</span> <span data-start="1264.33" data-end="1267.42">that's would work with Java scripts new</span> <span data-start="1267.42" data-end="1269.28">strict mode you'll send a good chance</span> <span data-start="1269.28" data-end="1273.39">that Yoko will be very very optimized so</span> <span data-start="1273.39" data-end="1280.49">does anyone know what this code does</span> </p>
<p><span data-start="1280.5" data-end="1286.69">No</span> <span data-start="1286.7" data-end="1302.15">come on it's a JavaScript conference</span> <span data-start="1302.16" data-end="1310.18">so okay okay so this code outputs itself</span> <span data-start="1310.19" data-end="1312.81">it's just a little example whipped up</span> <span data-start="1312.81" data-end="1315.06">because I wanted to show you an</span> <span data-start="1315.06" data-end="1317.31">interesting so to say feature of</span> <span data-start="1317.31" data-end="1320.49">javascript javascript is very well</span> <span data-start="1320.49" data-end="1322.47">suited to meta programming and one</span> <span data-start="1322.47" data-end="1324.08">feature of meta programming is</span> <span data-start="1324.08" data-end="1326.28">introspection and one feature of</span> <span data-start="1326.28" data-end="1329.55">introspection is you can actually get</span> <span data-start="1329.55" data-end="1332.25">the source code of your code from within</span> <span data-start="1332.25" data-end="1334.98">your code so in JavaScript if you write</span> <span data-start="1334.98" data-end="1338.28">a JavaScript function that says</span> <span data-start="1338.28" data-end="1342.33">arguments dot co-leader to string the</span> <span data-start="1342.33" data-end="1344.91">function will output itself you will get</span> <span data-start="1344.91" data-end="1348">a string that contains the function and</span> <span data-start="1348" data-end="1349.83">with a little bit of like trickery here</span> <span data-start="1349.83" data-end="1351.6">we'd like to normalize this output</span> <span data-start="1351.6" data-end="1353.07">because this output is a little bit</span> <span data-start="1353.07" data-end="1355.56">different across engines and we can</span> <span data-start="1355.56" data-end="1361.26">alert the function itself so but what</span> <span data-start="1361.26" data-end="1366.04">does it mean so here's another function</span> <span data-start="1366.05" data-end="1368.58">you can see i define a function it</span> <span data-start="1368.58" data-end="1372.36">returns two times three I want to get at</span> <span data-start="1372.36" data-end="1374.34">the source code for this function so</span> <span data-start="1374.34" data-end="1376.64">let's have a look what their engines do</span> <span data-start="1376.64" data-end="1381">so javascriptcore gives you back</span> <span data-start="1381" data-end="1384.24">function return to them sweet Internet</span> </p>
<p><span data-start="1384.24" data-end="1387.36">Explorer gives you back function return</span> <span data-start="1387.36" data-end="1390.65">two times free chrome gives you back</span> <span data-start="1390.65" data-end="1393.81">function return two times three so what</span> <span data-start="1393.81" data-end="1397.269">does firefox to respect which 16</span> <span data-start="1397.269" data-end="1404.21">so I think this is WTF so they're in</span> <span data-start="1404.21" data-end="1405.919">Firefox actually there is another</span> <span data-start="1405.919" data-end="1407.989">function called to source which is not</span> <span data-start="1407.989" data-end="1410.539">in the specification but which gives you</span> <span data-start="1410.539" data-end="1412.22">back what you originally put into the</span> <span data-start="1412.22" data-end="1416.509">function this is an important thing to</span> <span data-start="1416.509" data-end="1420.44">say because the problem if this is that</span> <span data-start="1420.44" data-end="1424.009">if you write benchmarks browsers might</span> <span data-start="1424.009" data-end="1425.899">like to try to optimize your functions</span> <span data-start="1425.899" data-end="1427.789">for you and especially for benchmarking</span> <span data-start="1427.789" data-end="1429.889">this is pretty bad because you want to</span> <span data-start="1429.889" data-end="1432.08">know exactly what an expression does so</span> <span data-start="1432.08" data-end="1434.989">be very that like JavaScript engines</span> <span data-start="1434.989" data-end="1439.239">might rewrite your code actually and</span> <span data-start="1439.239" data-end="1445.789">yeah just note that this engines are a</span> <span data-start="1445.789" data-end="1451.429">little bit different so Amy and me wrote</span> <span data-start="1451.429" data-end="1453.859">a book on JavaScript performance you can</span> <span data-start="1453.859" data-end="1456.83">get it at xerox com so much for the</span> <span data-start="1456.83" data-end="1461.359">advertisement are again do not optimized</span> <span data-start="1461.359" data-end="1475.36">prematurely never ever thank</span> <span data-start="1475.37" data-end="1480.68">so any questions I can barely see her</span> <span data-start="1480.68" data-end="1501.91">this thing's a literary yes</span> <span data-start="1501.92" data-end="1503.78">so so the question was however the</span> <span data-start="1503.78" data-end="1507.05">measurements done obviously the</span> <span data-start="1507.05" data-end="1508.58">measurements written in JavaScript</span> <span data-start="1508.58" data-end="1512.3">itself in JavaScript you can measure</span> <span data-start="1512.3" data-end="1514.85">like a time period by using mutate get</span> <span data-start="1514.85" data-end="1518.15">time you get like the time unix</span> <span data-start="1518.15" data-end="1521.42">timestamp in milliseconds and yet like</span> <span data-start="1521.42" data-end="1524.54">you do it before and after the test what</span> </p>
<p><span data-start="1524.54" data-end="1527.11">I do is I do like a really long loop</span> <span data-start="1527.11" data-end="1531.38">that iterates like execute these</span> <span data-start="1531.38" data-end="1534.34">functions like a lot and mostly in like</span> <span data-start="1534.34" data-end="1539.03">100,000 times a million times if you if</span> <span data-start="1539.03" data-end="1540.71">you look at the sample code the</span> <span data-start="1540.71" data-end="1545.39">benchmark functions included there as we</span> <span data-start="1545.39" data-end="1547.58">described in the book we actually also</span> <span data-start="1547.58" data-end="1549.35">use like a different benchmark function</span> <span data-start="1549.35" data-end="1551.72">that also that's like a ramp up and ramp</span> <span data-start="1551.72" data-end="1555.14">down so it does basically they're like</span> <span data-start="1555.14" data-end="1556.82">1,000,000 executions three times but</span> <span data-start="1556.82" data-end="1559.25">only measures the second execution so</span> <span data-start="1559.25" data-end="1561.86">things like garbage collection and stuff</span> <span data-start="1561.86" data-end="1566.45">in JavaScript the kind of you can like</span> <span data-start="1566.45" data-end="1568.49">work around that a little bit but it's</span> <span data-start="1568.49" data-end="1570.95">still not like scientific but if you</span> <span data-start="1570.95" data-end="1573.26">execute it like ten times then the whole</span> <span data-start="1573.26" data-end="1575.57">thing you get a pretty good idea about</span> <span data-start="1575.57" data-end="1578.84">how fast the browser is the problem with</span> <span data-start="1578.84" data-end="1580.58">this comparisons as you as you have seen</span> <span data-start="1580.58" data-end="1583.34">sometimes they get very you get very</span> <span data-start="1583.34" data-end="1587.93">small numbers but because I need to like</span> <span data-start="1587.93" data-end="1591.32">compare ye to Chrome and stuff I cannot</span> <span data-start="1591.32" data-end="1594.44">use bigger numbers because i don't know</span> <span data-start="1594.44" data-end="1595.91">i want to go to bed at the end of the</span> <span data-start="1595.91" data-end="1602.72">day so and i'm sorry if i'm bashing IE</span> <span data-start="1602.72" data-end="1604.73">too much but this is like the heart</span> <span data-start="1604.73" data-end="1609.8">effects of javascript performance any</span> <span data-start="1609.8" data-end="1627.669">other questions</span> <span data-start="1627.679" data-end="1631.47">the question was if I like have like a</span> <span data-start="1631.47" data-end="1636.919">software tool that did like basically</span> <span data-start="1636.919" data-end="1640.04">optimize this code for me is that right</span> <span data-start="1640.04" data-end="1644.309">no i don't i just used like all those</span> <span data-start="1644.309" data-end="1646.669">programmer tools like brain and hands</span> <span data-start="1646.669" data-end="1652.26">mostly eyes I guess but there is some as</span> </p>
<p><span data-start="1652.26" data-end="1654.51">I said before if it probably don't have</span> <span data-start="1654.51" data-end="1656.4">enough time to like cover like profiling</span> <span data-start="1656.4" data-end="1661.77">tools but the thing is it's actually I</span> <span data-start="1661.77" data-end="1663.57">think more difficult to determine which</span> <span data-start="1663.57" data-end="1665.91">parts of your code actually like cause</span> <span data-start="1665.91" data-end="1668.91">the performance issues and then you can</span> <span data-start="1668.91" data-end="1671.16">go in and like try different things like</span> <span data-start="1671.16" data-end="1673.559">some of the things I've shown you today</span> <span data-start="1673.559" data-end="1676.83">unrolling loops trying to optimize the</span> <span data-start="1676.83" data-end="1678.45">audio of the expressions it's it's</span> <span data-start="1678.45" data-end="1680.76">different for every problem anyway I</span> <span data-start="1680.76" data-end="1683.1">guess you could write some code tools</span> <span data-start="1683.1" data-end="1686.13">that like just try certain optimizations</span> <span data-start="1686.13" data-end="1688.86">and compare them and know that like the</span> <span data-start="1688.86" data-end="1692.52">new like Google closure stuff has like</span> <span data-start="1692.52" data-end="1696.57">some of this stuff building when you put</span> <span data-start="1696.57" data-end="1699.84">your JavaScript into their compiler it</span> <span data-start="1699.84" data-end="1703.35">optimizes certain things I don't know if</span> <span data-start="1703.35" data-end="1705.419">like if it's exactly these things it's</span> <span data-start="1705.419" data-end="1710.37">too new for that but but yeah so it's</span> <span data-start="1710.37" data-end="1712.71">it's a bunch all that's available for</span> <span data-start="1712.71" data-end="1714.27">this would be like the Google closure</span> <span data-start="1714.27" data-end="1716.549">compiler actually I've tried it with</span> <span data-start="1716.549" data-end="1719.73">with some new column I'm writing called</span> </p>
<p><span data-start="1719.73" data-end="1721.35">Emil chairs which is like this mini</span> <span data-start="1721.35" data-end="1723.9">JavaScript animation library and it</span> <span data-start="1723.9" data-end="1729.21">broke the library so go figure by the</span> <span data-start="1729.21" data-end="1731.549">way I'm tomorrow at twelve-fifteen I</span> <span data-start="1731.549" data-end="1733.59">think able to talk in the underground</span> <span data-start="1733.59" data-end="1739.549">track No ok</span> <span data-start="1739.559" data-end="1744.12">I was told I was doing the talk okay so</span> <span data-start="1744.12" data-end="1747.84">maybe tomorrow able to a talk about Emil</span> <span data-start="1747.84" data-end="1749.85">J so you're welcome to that like I've</span> <span data-start="1749.85" data-end="1752.639">applied some of those things you've seen</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
