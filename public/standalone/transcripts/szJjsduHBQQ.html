<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>szJjsduHBQQ</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/szJjsduHBQQ?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="37.59" data-end="40.15">it's really amazing to be able to speak</span> <span data-start="40.15" data-end="41.89">with you all today so thank you for the</span> <span data-start="41.89" data-end="45.31">opportunity this talk is really about</span> <span data-start="45.31" data-end="47.88">package management for the browser and</span> <span data-start="47.88" data-end="50.74">the reason why the focus is on es6</span> <span data-start="50.74" data-end="56.35">modules Israeli because they currently</span> <span data-start="56.35" data-end="58.96">been drafted into the es6 specification</span> <span data-start="58.96" data-end="63.61">and they're being reviewed right now so</span> <span data-start="63.61" data-end="68.17">it's it's something on the way and the</span> <span data-start="68.17" data-end="69.789">reason why I first got interested in es6</span> <span data-start="69.789" data-end="72.64">modules myself was because I got very</span> <span data-start="72.64" data-end="73.929">frustrated with the fact that we have</span> <span data-start="73.929" data-end="76.539">all these different module formats and</span> <span data-start="76.539" data-end="78.49">the common jeaious in global scripts I</span> <span data-start="78.49" data-end="80.17">just wanted to see if there was a way</span> <span data-start="80.17" data-end="82.149">that we could unify these and it's very</span> <span data-start="82.149" data-end="84.219">much something that es6 is bringing to</span> <span data-start="84.219" data-end="86.289">javascript through the specification</span> <span data-start="86.289" data-end="90.009">it's it's a specified module syntax and</span> <span data-start="90.009" data-end="93.31">it's it's built to support bridging the</span> <span data-start="93.31" data-end="94.78">different module formats we have today</span> <span data-start="94.78" data-end="99.009">so I've got a lot of hopes for that at</span> <span data-start="99.009" data-end="102.639">the same time in the process it's it's a</span> <span data-start="102.639" data-end="104.709">whole new way to reconsider what we what</span> <span data-start="104.709" data-end="106.149">we want to think about in terms of</span> <span data-start="106.149" data-end="109.45">package management for the browser so so</span> <span data-start="109.45" data-end="111.399">that's what really excites me about es6</span> <span data-start="111.399" data-end="114.49">modules at the moment the project I want</span> <span data-start="114.49" data-end="117.369">to show you is called JSP m and it's an</span> <span data-start="117.369" data-end="119.759">experimental project exploring what's</span> <span data-start="119.759" data-end="121.99">package management for the browser can</span> <span data-start="121.99" data-end="126.399">be and the the starting point for this</span> <span data-start="126.399" data-end="130.24">idea was let's look at a package manager</span> <span data-start="130.24" data-end="132.66">for the es6 module loader</span> <span data-start="132.66" data-end="134.55">think about where we want to package</span> <span data-start="134.55" data-end="136.98">management to be where it could be and</span> <span data-start="136.98" data-end="139.44">explore that and and the core package</span> <span data-start="139.44" data-end="140.64">might into an idea you want to start</span> <span data-start="140.64" data-end="142.44">with is that installing something you</span> <span data-start="142.44" data-end="144.66">should just do a one-line install and a</span> <span data-start="144.66" data-end="146.82">one-line require so anything more than</span> <span data-start="146.82" data-end="148.41">that and you've added unnecessary</span> <span data-start="148.41" data-end="151.95">complexity and I think the argument is</span> <span data-start="151.95" data-end="153.9">that to really get to that point where</span> <span data-start="153.9" data-end="155.67">you can have a single line required and</span> <span data-start="155.67" data-end="158.85">a single line install you need to have a</span> <span data-start="158.85" data-end="160.35">package manager that understands the</span> <span data-start="160.35" data-end="163.5">loader so by having a package manager</span> <span data-start="163.5" data-end="165">that knows how the loader behaves you</span> <span data-start="165" data-end="166.17">avoid all the problems around</span> <span data-start="166.17" data-end="169.5">configuration friction so that's the</span> <span data-start="169.5" data-end="174.65">really the core idea so so let's go into</span> <span data-start="174.65" data-end="176.76">the first thing we need is a module</span> <span data-start="176.76" data-end="178.65">loader so how can we actually start</span> <span data-start="178.65" data-end="181.74">using this es6 module loader today well</span> <span data-start="181.74" data-end="184.5">there's a polyfill called the ESX module</span> <span data-start="184.5" data-end="187.05">loader party votes on github and it's</span> <span data-start="187.05" data-end="189.27">it's a complete polyfill for the way</span> <span data-start="189.27" data-end="191.49">that the es6 module loader specification</span> <span data-start="191.49" data-end="195.36">is written right now so that actually</span> <span data-start="195.36" data-end="197.34">allows us to start working with es6</span> <span data-start="197.34" data-end="200.7">modules today in the browser and no J's</span> <span data-start="200.7" data-end="205.35">on the server it's a seven kilobyte</span> <span data-start="205.35" data-end="207.84">polyfill so it's actually suitable for</span> <span data-start="207.84" data-end="213.18">production so just to explain what it</span> <span data-start="213.18" data-end="215.64">does it obviously gives us support for</span> <span data-start="215.64" data-end="217.47">the module syntax like you can see here</span> <span data-start="217.47" data-end="221.52">and but the really key thing that the</span> <span data-start="221.52" data-end="223.05">spec authors have done is they've</span> <span data-start="223.05" data-end="227.54">created this module loader pipeline so</span> <span data-start="227.54" data-end="229.77">just to explain how it works a little</span> <span data-start="229.77" data-end="232.79">bit that they've they based it on this</span> <span data-start="232.79" data-end="237.72">extensible web principles and the idea</span> <span data-start="237.72" data-end="239.01">is that they've solved the really hard</span> <span data-start="239.01" data-end="242.31">problems around modules things like how</span> <span data-start="242.31" data-end="244.26">to deal with circular references how to</span> <span data-start="244.26" data-end="246.69">deal with interrupts between AMD and es6</span> <span data-start="246.69" data-end="249.06">and common J's but then they've they've</span> <span data-start="249.06" data-end="250.95">left the exact solutions to those</span> <span data-start="250.95" data-end="254.73">problems up to hooks in the spec so we</span> <span data-start="254.73" data-end="256.38">have these loader hooks normalized</span> <span data-start="256.38" data-end="258.62">located fetch translate instantiate and</span> <span data-start="258.62" data-end="260.79">most users don't come up against the</span> <span data-start="260.79" data-end="263.37">hook but but the point is that you can</span> <span data-start="263.37" data-end="265.16">construct</span> <span data-start="265.16" data-end="268.56">customized the es6 module loader with</span> <span data-start="268.56" data-end="270.9">with new functionality and and how to</span> <span data-start="270.9" data-end="273.87">interpret modules so for example if i if</span> <span data-start="273.87" data-end="276.24">i customize the fetch hook i can</span> <span data-start="276.24" data-end="278.55">customize how to fetch jquery in the</span> <span data-start="278.55" data-end="281.91">example above in the browser your fetch</span> <span data-start="281.91" data-end="284.58">hook would be an HTTP request get</span> <span data-start="284.58" data-end="287.31">request and in the on ojs it would be an</span> </p>
<p><span data-start="287.31" data-end="290.28">FS read file maybe you want it to be an</span> <span data-start="290.28" data-end="291.84">FS start read file and if it doesn't</span> <span data-start="291.84" data-end="293.58">exist you loop through the node modules</span> <span data-start="293.58" data-end="295.92">folder so it's it's opened up those</span> <span data-start="295.92" data-end="297.9">exact implementations through these</span> <span data-start="297.9" data-end="302.88">hooks to actually use this loader in the</span> <span data-start="302.88" data-end="305.85">browser we need an initial version of</span> <span data-start="305.85" data-end="306.45">the hooks</span> <span data-start="306.45" data-end="308.4">that'll work in the browser so we need</span> <span data-start="308.4" data-end="310.02">to have that fetch hook implemented in</span> <span data-start="310.02" data-end="312.03">all the rest and that's the system</span> <span data-start="312.03" data-end="314.22">browser loader and it's actually a</span> <span data-start="314.22" data-end="317.28">separate specification so the the system</span> <span data-start="317.28" data-end="318.87">browser loader is currently based on a</span> <span data-start="318.87" data-end="322.08">mozilla sudo implementation and it's a</span> <span data-start="322.08" data-end="324.06">promise of space loader if you are</span> <span data-start="324.06" data-end="326.91">familiar with AMD loaders it is exactly</span> <span data-start="326.91" data-end="329.61">the same sort of usage apart from the</span> <span data-start="329.61" data-end="331.89">fact that it's promises based you can</span> <span data-start="331.89" data-end="333.54">basically load module names you can load</span> <span data-start="333.54" data-end="335.97">es6 modules and this is given to you by</span> <span data-start="335.97" data-end="337.8">the polyfill T is six module little</span> <span data-start="337.8" data-end="341.97">polyfill and then I started this project</span> <span data-start="341.97" data-end="344.43">called system J s and the idea was</span> <span data-start="344.43" data-end="347.67">system jeaious was we've got this basic</span> <span data-start="347.67" data-end="350.01">loader that can load es6 but we want to</span> <span data-start="350.01" data-end="351.15">make it something useful that we can</span> <span data-start="351.15" data-end="353.55">actually use today we've got the ability</span> <span data-start="353.55" data-end="355.5">to support MD common just in Global's</span> <span data-start="355.5" data-end="357.57">let's start doing that so I started</span> <span data-start="357.57" data-end="359.79">creating compatibility layers for the</span> <span data-start="359.79" data-end="363.18">loader to actually load MD load common</span> </p>
<p><span data-start="363.18" data-end="365.01">J's and and dealing with the edge cases</span> <span data-start="365.01" data-end="367.11">like things like circular references and</span> <span data-start="367.11" data-end="368.61">common J's circular references act</span> <span data-start="368.61" data-end="370.68">differently to MD circular references</span> <span data-start="370.68" data-end="374.55">and getting all that in as I say it's</span> <span data-start="374.55" data-end="376.83">it's it's very much what you would get</span> <span data-start="376.83" data-end="378.57">if you took in one of the existing AMD</span> <span data-start="378.57" data-end="380.88">loaders and rebuilt it on top of the cr6</span> <span data-start="380.88" data-end="382.17">hooks</span> <span data-start="382.17" data-end="384.27">it's got map it's got shim it's got a</span> <span data-start="384.27" data-end="387.89">plug-in system for asset loading and</span> <span data-start="387.89" data-end="389.76">bundles which was a new feature in</span> <span data-start="389.76" data-end="391.77">requires yes and then there's other</span> <span data-start="391.77" data-end="394.14">thing called versions which I explained</span> <span data-start="394.14" data-end="397.05">a bit more later</span> <span data-start="397.06" data-end="400.43">so yeah this is system dis it's a it's a</span> <span data-start="400.43" data-end="402.35">seven killer by minified and gzip</span> <span data-start="402.35" data-end="403.97">project so together with the module</span> <span data-start="403.97" data-end="405.71">loader you're getting 14 kilobytes in</span> <span data-start="405.71" data-end="407.03">production you've actually got this</span> <span data-start="407.03" data-end="409.79">dynamic loader based on the technologies</span> <span data-start="409.79" data-end="412.1">that are specified for the loader in the</span> <span data-start="412.1" data-end="414.02">future that we can use today through</span> <span data-start="414.02" data-end="417.71">these polyfill techniques so that's the</span> <span data-start="417.71" data-end="420.35">lowdown the other side of it now is</span> <span data-start="420.35" data-end="422.09">package management so if you've got this</span> <span data-start="422.09" data-end="424.19">loader can we create a package manager</span> <span data-start="424.19" data-end="426.139">to really simplify the process of using</span> <span data-start="426.139" data-end="429.02">it and the first thing I want to think</span> <span data-start="429.02" data-end="430.4">about is the sort of time scale you're</span> <span data-start="430.4" data-end="433.51">looking at four years six is actually</span> <span data-start="433.51" data-end="438.05">very similar time scale to HTTP two and</span> <span data-start="438.05" data-end="441.5">and widespread speedy and HTTP 2 so you</span> <span data-start="441.5" data-end="444.56">actually in this kind of thinking</span> <span data-start="444.56" data-end="447.53">bundling is an anti-pattern we want to</span> <span data-start="447.53" data-end="449.39">be thinking beyond bundling and and</span> <span data-start="449.39" data-end="450.53">that's there's a good reason why</span> <span data-start="450.53" data-end="453.29">bundling isn't catered for in the es6</span> <span data-start="453.29" data-end="457.61">specifc specification because it's it's</span> <span data-start="457.61" data-end="458.75">it's something we're actually going to</span> <span data-start="458.75" data-end="460.7">move away from over time and yes it will</span> <span data-start="460.7" data-end="462.59">be a while still it'll be a few years</span> <span data-start="462.59" data-end="466.6">but in that's where we want to be and</span> <span data-start="466.6" data-end="468.65">not only will that make our build</span> <span data-start="468.65" data-end="471.5">simpler but the other benefit you get is</span> <span data-start="471.5" data-end="474.8">fine grained caching so if you have a</span> <span data-start="474.8" data-end="476.27">large application you have a build of</span> <span data-start="476.27" data-end="479.51">that application you have to resend a</span> <span data-start="479.51" data-end="481.789">lot of assets again just when you make a</span> <span data-start="481.789" data-end="483.56">minor change if you can have fine grain</span> <span data-start="483.56" data-end="486.95">caching with version URLs you can just</span> <span data-start="486.95" data-end="488.51">update the versions that have changed</span> <span data-start="488.51" data-end="491.27">and the other assets remain in the cache</span> <span data-start="491.27" data-end="493.84">of your users so it is much less</span> <span data-start="493.84" data-end="497.93">redownload in you do upgrades but in</span> <span data-start="497.93" data-end="499.52">order to properly take advantage of this</span> <span data-start="499.52" data-end="502.61">we want to allow unique version URLs you</span> <span data-start="502.61" data-end="504.44">want to have a node modules folder that</span> <span data-start="504.44" data-end="506.9">you can drag onto your CDN host it as</span> <span data-start="506.9" data-end="509.27">your static assets but have those URLs</span> <span data-start="509.27" data-end="511.789">versioned so that your users can get</span> <span data-start="511.789" data-end="514.039">them cached and you can just update the</span> <span data-start="514.039" data-end="517.76">versions and the URLs and then and then</span> <span data-start="517.76" data-end="519.469">the real high problem around package</span> <span data-start="519.469" data-end="522.08">management is is obviously the</span> <span data-start="522.08" data-end="523.839">dependency management principles and</span> <span data-start="523.839" data-end="527.839">it's not enough to just assume that you</span> <span data-start="527.839" data-end="529.279">can solve every version count</span> <span data-start="529.279" data-end="530.689">you will reach a point where you have</span> <span data-start="530.689" data-end="532.279">two dependencies that you've loaded into</span> <span data-start="532.279" data-end="536.089">the page and they're both dependent on</span> <span data-start="536.089" data-end="537.74">another dependency but they need</span> <span data-start="537.74" data-end="539.48">different versions of it and you have a</span> <span data-start="539.48" data-end="541.73">version conflict and when that happens</span> <span data-start="541.73" data-end="544.939">what are you going to do you can't let</span> <span data-start="544.939" data-end="546.92">that break down the entire workflow if</span> <span data-start="546.92" data-end="549.199">you really want to get a proper package</span> <span data-start="549.199" data-end="550.519">manager going you need to be able to</span> <span data-start="550.519" data-end="552.8">deal with version conflicts and and the</span> <span data-start="552.8" data-end="554.209">way to do that is to have the multi</span> <span data-start="554.209" data-end="555.559">version support you have to be able to</span> <span data-start="555.559" data-end="557.48">run two versions of the same library at</span> <span data-start="557.48" data-end="559.97">the same time and then as much as</span> <span data-start="559.97" data-end="562.279">possible minimise that duplication so we</span> <span data-start="562.279" data-end="563.87">know the range is that every package is</span> <span data-start="563.87" data-end="566.24">allowed to be installed in two and then</span> <span data-start="566.24" data-end="569.36">we try to minimize the duplication of</span> <span data-start="569.36" data-end="570.86">versions and find the best version</span> <span data-start="570.86" data-end="572.779">solution that's going to going to work</span> <span data-start="572.779" data-end="575.149">for that the other thing we can do is</span> <span data-start="575.149" data-end="577.67">use cember and the more people can use</span> <span data-start="577.67" data-end="579.47">cember the less duplication there will</span> <span data-start="579.47" data-end="581.42">be assembler is nothing more than a</span> <span data-start="581.42" data-end="583.209">commitment to backwards compatibility</span> <span data-start="583.209" data-end="585.649">and and if you think about that when</span> <span data-start="585.649" data-end="586.999">you're building your API is and if we</span> <span data-start="586.999" data-end="587.99">think about that is we're writing</span> <span data-start="587.99" data-end="590.42">software this whole process will be a</span> <span data-start="590.42" data-end="592.999">lot easier for everyone because when I'm</span> <span data-start="592.999" data-end="595.75">in a development mode and I'm installing</span> <span data-start="595.75" data-end="598.309">dependencies into my project I can</span> <span data-start="598.309" data-end="599.87">install them to the latest versions and</span> <span data-start="599.87" data-end="603.709">know that the API is maintaining their</span> <span data-start="603.709" data-end="606.61">contracts but even with all these things</span> <span data-start="606.61" data-end="609.199">you will still still reach a point where</span> <span data-start="609.199" data-end="611">dependencies don't quite match up to</span> <span data-start="611" data-end="612.649">what you want you'll be one library that</span> <span data-start="612.649" data-end="614.389">needs jQuery one and another library</span> <span data-start="614.389" data-end="616.639">that needs jQuery two and you can't</span> <span data-start="616.639" data-end="619.55">expect the system to resolve everything</span> <span data-start="619.55" data-end="621.649">for you at some point you want to just</span> <span data-start="621.649" data-end="623.72">be able to manually override everything</span> <span data-start="623.72" data-end="625.069">that's going on and say well I just want</span> <span data-start="625.069" data-end="626.3">to make sure that the only version of</span> <span data-start="626.3" data-end="629.42">jQuery in this application is jQuery 2.1</span> <span data-start="629.42" data-end="631.339">and you want to be able to override that</span> <span data-start="631.339" data-end="634.22">at a global level so the idea was to</span> <span data-start="634.22" data-end="637.22">have a central dependency manifest a</span> <span data-start="637.22" data-end="638.959">single place where your entire</span> <span data-start="638.959" data-end="640.819">dependencies are mapped out that you can</span> <span data-start="640.819" data-end="644.059">kind of control and and have have final</span> <span data-start="644.059" data-end="646.97">say over the whole process so just to</span> <span data-start="646.97" data-end="649.579">summarise looking at package management</span> <span data-start="649.579" data-end="651.92">for an es6 module loader so trying to</span> <span data-start="651.92" data-end="655.22">build on the principles of tomorrow and</span> <span data-start="655.22" data-end="656.74">make something that we can use today</span> <span data-start="656.74" data-end="658.91">support existing modular formats and</span> <span data-start="658.91" data-end="661.759">registries flat multi version support so</span> <span data-start="661.759" data-end="662.92">you get the fine-grained cache</span> <span data-start="662.92" data-end="666.95">benefits of HTTP to a central dependency</span> <span data-start="666.95" data-end="668.87">manifest so that the developer has final</span> <span data-start="668.87" data-end="672.02">say over the full dependency tree but</span> <span data-start="672.02" data-end="673.7">then allow production bundling today so</span> <span data-start="673.7" data-end="675.41">we have those workflows that we can</span> <span data-start="675.41" data-end="679.43">actually use modules today so I'm gonna</span> <span data-start="679.43" data-end="681.86">dive straight into a demo and show you</span> <span data-start="681.86" data-end="683.029">exactly the sort of thing I'm talking</span> <span data-start="683.029" data-end="697.56">about with us</span> <span data-start="697.57" data-end="700.57">so when I was thinking of a demo the</span> <span data-start="700.57" data-end="702.329">sort of thing I was thinking of was</span> <span data-start="702.329" data-end="705.579">something that it resembles a future</span> <span data-start="705.579" data-end="707.32">workflow so something that we want to be</span> <span data-start="707.32" data-end="710.92">doing in the browser and a good example</span> <span data-start="710.92" data-end="713.92">seems to be web components using an es6</span> <span data-start="713.92" data-end="717.48">module so first we need to install JSP m</span> <span data-start="717.48" data-end="721.149">and we can do that with NPM this talk</span> <span data-start="721.149" data-end="722.709">does use the internet so if you can</span> <span data-start="722.709" data-end="724.36">please take it easy on the Wi-Fi that</span> <span data-start="724.36" data-end="726.13">were you really appreciated</span> </p>
<p><span data-start="726.13" data-end="729.97">I can now install this components with</span> <span data-start="729.97" data-end="734.62">JSP m install and I actually hosted this</span> <span data-start="734.62" data-end="736.899">component on github so I'm gonna install</span> <span data-start="736.899" data-end="748.36">it straight off of github so the naming</span> <span data-start="748.36" data-end="750.13">system here is is a consistent naming</span> <span data-start="750.13" data-end="753.88">system that is used throughout and when</span> <span data-start="753.88" data-end="755.589">I write this the first thing it asks me</span> <span data-start="755.589" data-end="757.63">to do is set up a local package to JSON</span> <span data-start="757.63" data-end="760.029">for the project where to download all</span> <span data-start="760.029" data-end="761.649">the dependencies into this JSP M</span> <span data-start="761.649" data-end="764.199">packages folder the config file to</span> <span data-start="764.199" data-end="767.23">create then it goes to github it checks</span> <span data-start="767.23" data-end="769.18">the tags looks for the latest cember</span> <span data-start="769.18" data-end="771.01">tags uses that as the stable version</span> <span data-start="771.01" data-end="774.699">installs the dependencies downloads the</span> <span data-start="774.699" data-end="777.19">es6 module loader polyfill the system</span> </p>
<p><span data-start="777.19" data-end="779.56">J's loader that contains the AMD common</span> <span data-start="779.56" data-end="783.01">J's compatibility layers and that's our</span> <span data-start="783.01" data-end="786.1">single line install if I want to</span> <span data-start="786.1" data-end="788.68">actually use this now on the page let me</span> <span data-start="788.68" data-end="797.86">just create a test page to use it so I'm</span> <span data-start="797.86" data-end="800.199">just going to load in the system J's</span> <span data-start="800.199" data-end="803.529">loader which is was downloaded as the</span> </p>
<p><span data-start="803.529" data-end="807.189">JSP and packages folder and it's a</span> <span data-start="807.189" data-end="810.37">versioned loader file this will</span> <span data-start="810.37" data-end="812.05">automatically include the polyfill</span> <span data-start="812.05" data-end="813.61">itself so we don't need to do anything</span> <span data-start="813.61" data-end="816.189">more than that and now what I have is</span> <span data-start="816.189" data-end="818.829">the system browser loader extended with</span> <span data-start="818.829" data-end="820.93">the functionality we want so I can now</span> <span data-start="820.93" data-end="823.63">use system that import and import year</span> <span data-start="823.63" data-end="827.649">six and different modules so for this</span> <span data-start="827.649" data-end="828.79">application I'm gonna have a main</span> <span data-start="828.79" data-end="830.29">application entry point that I'm going</span> <span data-start="830.29" data-end="831.01">to load</span> <span data-start="831.01" data-end="833.74">so I'm just gonna say load app and</span> <span data-start="833.74" data-end="838.09">that's it and that'll load app from the</span> <span data-start="838.09" data-end="840.58">local folder so I'm gonna edit an app</span> <span data-start="840.58" data-end="844.89">dot J's file and I installed this</span> <span data-start="844.89" data-end="847.48">components as github guy Bedford</span> <span data-start="847.48" data-end="850.42">markdown components the same name that I</span> <span data-start="850.42" data-end="852.85">used to install is the same name that I</span> <span data-start="852.85" data-end="855.76">want to use to require so common J's</span> <span data-start="855.76" data-end="856.99">really is the simplest way to write</span> <span data-start="856.99" data-end="858.61">modules so I'm just going to do a comedy</span> <span data-start="858.61" data-end="862.27">require in this example so I'm going to</span> <span data-start="862.27" data-end="864.1">require the exact same name I'm not</span> <span data-start="864.1" data-end="866.11">thinking about versions or any of those</span> <span data-start="866.11" data-end="870.82">problems and so now we've loaded the the</span> <span data-start="870.82" data-end="873.61">components and to actually use this</span> <span data-start="873.61" data-end="875.8">component it's a it's a web component</span> <span data-start="875.8" data-end="880.11">and what it does is it passes markdown</span> <span data-start="880.11" data-end="884.08">within the web component tag and also it</span> <span data-start="884.08" data-end="889.93">also features syntax highlighting so let</span> <span data-start="889.93" data-end="904.689">me just show you this</span> <span data-start="904.699" data-end="906.72">so I'm just going to create a code</span> <span data-start="906.72" data-end="920.38">example as well</span> <span data-start="920.39" data-end="924.62">right and oh I've also got to include</span> <span data-start="924.62" data-end="927.16">there was a generated configuration file</span> <span data-start="927.16" data-end="930.38">so I need to include the generation the</span> <span data-start="930.38" data-end="935.01">generated configuration file in the page</span> <span data-start="935.02" data-end="937.79">so that's that's kind of all we need to</span> <span data-start="937.79" data-end="940.13">do and hopefully it'll work so is the</span> <span data-start="940.13" data-end="942.86">one-line install one-line require and</span> <span data-start="942.86" data-end="946.13">there it is so that's a markdown</span> <span data-start="946.13" data-end="953.08">component thank you</span> <span data-start="953.09" data-end="955.04">it's yeah let me let me try and explain</span> <span data-start="955.04" data-end="957.53">exactly what's going on here and how</span> <span data-start="957.53" data-end="962.48">this is all fitting together when I when</span> </p>
<p><span data-start="962.48" data-end="964.91">I first downloaded the components it</span> <span data-start="964.91" data-end="966.92">downloaded into that JSP and packages</span> <span data-start="966.92" data-end="970.19">folder into into a versioned folder so</span> <span data-start="970.19" data-end="972.38">it's J's pin package  â€” is github for</span> <span data-start="972.38" data-end="973.7">everything that was loaded from github</span> <span data-start="973.7" data-end="979.52">and then just the name of the repo with</span> <span data-start="979.52" data-end="983.81">the version so it's a version URL and if</span> <span data-start="983.81" data-end="985.7">you look inside this folder we have</span> <span data-start="985.7" data-end="987.74">exactly the same files that are on</span> <span data-start="987.74" data-end="994.25">github so here's the github repo and the</span> <span data-start="994.25" data-end="995.81">two files I want to show you is packaged</span> <span data-start="995.81" data-end="999.28">the JSON and markdown component jeaious</span> <span data-start="999.28" data-end="1001.83">if we look at the package that jason</span> <span data-start="1001.83" data-end="1004.6">we're actually using the package JSON to</span> <span data-start="1004.6" data-end="1006.85">declare the dependencies and the way we</span> <span data-start="1006.85" data-end="1009.51">can do this without conflict with NPM is</span> <span data-start="1009.51" data-end="1012.61">by interpreting the dependencies in</span> <span data-start="1012.61" data-end="1015.01">combination with a registry property in</span> <span data-start="1015.01" data-end="1016.26">the package so Jason</span> <span data-start="1016.26" data-end="1019.78">so when J's PMC's that you've got</span> <span data-start="1019.78" data-end="1022.21">registry JSP m it knows it can interpret</span> <span data-start="1022.21" data-end="1024.43">the dependencies if you do not like the</span> <span data-start="1024.43" data-end="1026.55">idea of overwriting the dependencies</span> <span data-start="1026.55" data-end="1029.709">speak to me em but you can actually also</span> <span data-start="1029.709" data-end="1032.98">use the prefix so we could have a JSP m</span> <span data-start="1032.98" data-end="1035.31">prefix within the package to JSON and</span> <span data-start="1035.31" data-end="1038.709">that would also work and then now that</span> <span data-start="1038.709" data-end="1040.18">we we know that we're dealing with the</span> </p>
<p><span data-start="1040.18" data-end="1042.25">JSP m registry the dependencies are</span> <span data-start="1042.25" data-end="1044.41">listed first by the name that they're</span> <span data-start="1044.41" data-end="1047.14">required by within the code of this</span> <span data-start="1047.14" data-end="1049.78">package so whenever this package refers</span> <span data-start="1049.78" data-end="1052.09">to showdown this is what it's referring</span> <span data-start="1052.09" data-end="1053.98">to so that that's what the dependencies</span> <span data-start="1053.98" data-end="1056.95">just as you'd expect showdown there's</span> <span data-start="1056.95" data-end="1058.66">the markdown passing and it's also</span> <span data-start="1058.66" data-end="1060.79">loaded from github Samba compatible with</span> <span data-start="1060.79" data-end="1063.82">version or point 3.1 prism does our</span> <span data-start="1063.82" data-end="1066.01">syntax highlighting and it's also loaded</span> <span data-start="1066.01" data-end="1068.52">from github at the github pages branch</span> <span data-start="1068.52" data-end="1071.44">which is the branch that Lee ever uses</span> <span data-start="1071.44" data-end="1075.52">to publish it on I don't have to enter</span> <span data-start="1075.52" data-end="1077.38">in the full path to prism because it's</span> <span data-start="1077.38" data-end="1080.17">actually in there's there's a shortening</span> <span data-start="1080.17" data-end="1083.5">service that JSP offers just like the</span> <span data-start="1083.5" data-end="1086.29">bio registry so it stores short names</span> <span data-start="1086.29" data-end="1087.91">against their longer name so when there</span> <span data-start="1087.91" data-end="1091">is no name given with the github colon</span> <span data-start="1091" data-end="1092.74">part at the beginning it knows to just</span> <span data-start="1092.74" data-end="1095.05">look it up from the the the short list</span> <span data-start="1095.05" data-end="1097.54">registry and then we have this CSS</span> <span data-start="1097.54" data-end="1099.76">module as well so those are the three</span> <span data-start="1099.76" data-end="1106.24">dependencies and here's the code so this</span> <span data-start="1106.24" data-end="1108.7">is the component the first thing to note</span> <span data-start="1108.7" data-end="1111.7">is that web components are really nice</span> <span data-start="1111.7" data-end="1116.17">to write in es6 modules because of the</span> <span data-start="1116.17" data-end="1118.48">fact that when you run document register</span> <span data-start="1118.48" data-end="1119.68">element what you're actually running it</span> <span data-start="1119.68" data-end="1122.95">against is a class so class you're going</span> <span data-start="1122.95" data-end="1124.45">really really helps with that so we can</span> <span data-start="1124.45" data-end="1126.88">create this class x markdown component</span> <span data-start="1126.88" data-end="1128.35">normally we'd have to have an object</span> <span data-start="1128.35" data-end="1130.39">with a prototype that has a created</span> <span data-start="1130.39" data-end="1132.94">callback property the class sugar just</span> <span data-start="1132.94" data-end="1135.37">makes that a lot nice that's right we</span> <span data-start="1135.37" data-end="1137.5">can extend the HTML element very simply</span> <span data-start="1137.5" data-end="1140.53">and that gives us the this stock query</span> <span data-start="1140.53" data-end="1142.3">selector all that we call all over here</span> <span data-start="1142.3" data-end="1145.3">which is really convenient and then we</span> <span data-start="1145.3" data-end="1148.03">just do the the syntax parsing with a</span> <span data-start="1148.03" data-end="1149.89">bit of really bad whitespace</span> <span data-start="1149.89" data-end="1153.34">manipulation using es6 features and then</span> <span data-start="1153.34" data-end="1157">we do the the code highlighting so it's</span> <span data-start="1157" data-end="1159">a relatively straightforward component</span> <span data-start="1159" data-end="1160.99">but the thing i want to show you is that</span> <span data-start="1160.99" data-end="1163.45">the imports so how are these imports</span> <span data-start="1163.45" data-end="1166.72">working we're importing show down and</span> <span data-start="1166.72" data-end="1168.88">we're importing prism and the name we're</span> <span data-start="1168.88" data-end="1170.53">importing from is exactly the same name</span> <span data-start="1170.53" data-end="1173.37">in the package to JSON dependencies</span> <span data-start="1173.37" data-end="1175.96">showed um i think one of them is a</span> <span data-start="1175.96" data-end="1178.51">global one of them is an MD module we</span> <span data-start="1178.51" data-end="1179.77">don't need to we don't want to think</span> <span data-start="1179.77" data-end="1181.24">about the in syrup and the point is that</span> <span data-start="1181.24" data-end="1183.73">by allowing each package to configure</span> <span data-start="1183.73" data-end="1187.4">itself you can avoid the in syrup issues</span> <span data-start="1187.4" data-end="1189.62">and and and just get to a point where</span> <span data-start="1189.62" data-end="1191.3">you could require from packages directly</span> <span data-start="1191.3" data-end="1192.98">and that's really fundamental to that</span> <span data-start="1192.98" data-end="1196.79">that zero friction approach and then the</span> <span data-start="1196.79" data-end="1198.83">next thing we have is we import the CSS</span> <span data-start="1198.83" data-end="1203.09">file this is the CSS file within prism</span> <span data-start="1203.09" data-end="1206.78">to do the code highlighting style so</span> <span data-start="1206.78" data-end="1209.03">we're actually injecting CSS within the</span> <span data-start="1209.03" data-end="1212.27">module system the benefit of this is</span> <span data-start="1212.27" data-end="1215.39">that I can deal with abstracted names in</span> <span data-start="1215.39" data-end="1217.94">the file I can call it prism I don't</span> <span data-start="1217.94" data-end="1220.19">need to think about where prism is what</span> <span data-start="1220.19" data-end="1221.99">version it is and then I can actually</span> <span data-start="1221.99" data-end="1224.84">start loading files from within that</span> <span data-start="1224.84" data-end="1227.54">that folder again if you're familiar</span> <span data-start="1227.54" data-end="1229.91">with AMD familiar with those kinds of</span> <span data-start="1229.91" data-end="1232.46">loaders the the module names are exactly</span> <span data-start="1232.46" data-end="1234.68">the same principle the reason why we're</span> <span data-start="1234.68" data-end="1236.45">able to have these short names it's just</span> <span data-start="1236.45" data-end="1238.01">map configure it's exactly the same</span> <span data-start="1238.01" data-end="1242">ideas AMD and the way I'm loading CSS is</span> <span data-start="1242" data-end="1244.1">a plugin just like you'd get a plug-in</span> <span data-start="1244.1" data-end="1246.86">in an AMD loader the one thing I did was</span> </p>
<p><span data-start="1246.86" data-end="1248.96">I moved the exclamation mark to the end</span> <span data-start="1248.96" data-end="1250.94">so basically when it comes across an</span> <span data-start="1250.94" data-end="1252.71">asset that has an exclamation mark in</span> <span data-start="1252.71" data-end="1255.29">the name it reads the extension of the</span> <span data-start="1255.29" data-end="1257.54">file and then it looks for a module with</span> <span data-start="1257.54" data-end="1259.55">the same name as the extension and uses</span> <span data-start="1259.55" data-end="1261.38">that to do the asset injection and that</span> <span data-start="1261.38" data-end="1263.9">was the CSS module CSS is something</span> <span data-start="1263.9" data-end="1265.67">really fundamental so potentially it can</span> <span data-start="1265.67" data-end="1269.18">be brought into core at some point but</span> <span data-start="1269.18" data-end="1271.01">because the way the injection works is</span> <span data-start="1271.01" data-end="1272.6">still kind of developing it's nice to</span> <span data-start="1272.6" data-end="1274.34">have it as an isolated module so it's</span> <span data-start="1274.34" data-end="1277.07">not even really part of JSP m it's it's</span> <span data-start="1277.07" data-end="1279.02">anyone can create their own plugins to</span> <span data-start="1279.02" data-end="1282.83">do like template passing or other types</span> <span data-start="1282.83" data-end="1285.14">of injection and the way the injection</span> <span data-start="1285.14" data-end="1287.06">works is it simply injects a link tag</span> <span data-start="1287.06" data-end="1289.07">against the head waits for the onload</span> <span data-start="1289.07" data-end="1291.38">event and when the unload events fired</span> <span data-start="1291.38" data-end="1294.11">that returns the fetcher in the loader</span> <span data-start="1294.11" data-end="1296.45">hooks so plugins just override the load</span> <span data-start="1296.45" data-end="1299.66">hooks of the ESX loader and then it's</span> <span data-start="1299.66" data-end="1301.52">taken is loaded so none of this code</span> <span data-start="1301.52" data-end="1304.28">here will run until that CSS has been</span> <span data-start="1304.28" data-end="1305.93">injected into the head and completely</span> <span data-start="1305.93" data-end="1308.51">finished loading and in that way you get</span> <span data-start="1308.51" data-end="1310.07">this really nice dependency tree of</span> <span data-start="1310.07" data-end="1312.98">multi asset types with the abstracted</span> <span data-start="1312.98" data-end="1315.02">naming and its approach it's an approach</span> <span data-start="1315.02" data-end="1317.54">that I really like you don't have to use</span> <span data-start="1317.54" data-end="1319.309">it it's not it's not man</span> <span data-start="1319.309" data-end="1322.419">but it would allow me to do the nice day</span> <span data-start="1322.419" data-end="1333.679">all right so let's let's take make this</span> <span data-start="1333.679" data-end="1336.98">site look a bit nicer what I want to do</span> <span data-start="1336.98" data-end="1340.399">now is install bootstrap just to give it</span> <span data-start="1340.399" data-end="1343.07">a bit bit more of a nicer theme so again</span> </p>
<p><span data-start="1343.07" data-end="1344.299">I just want to install it by name I</span> <span data-start="1344.299" data-end="1346.1">don't really I want to think any much</span> <span data-start="1346.1" data-end="1348.289">more than that so I'm just gonna say</span> <span data-start="1348.289" data-end="1352.229">Jess for install bootstrap and</span> <span data-start="1352.239" data-end="1355.519">bootstraps also on github</span> <span data-start="1355.519" data-end="1358.07">it's got releases on github so it</span> <span data-start="1358.07" data-end="1359.239">actually downloads from the release</span> <span data-start="1359.239" data-end="1361.159">archive but it does the same tag lookup</span> <span data-start="1361.159" data-end="1362.69">works out the versions and all the rest</span> <span data-start="1362.69" data-end="1366.559">and then for the dependencies the reason</span> <span data-start="1366.559" data-end="1368.72">why bootstrap can install is because it</span> <span data-start="1368.72" data-end="1370.669">does have some JSP m metadata in the</span> <span data-start="1370.669" data-end="1374.299">package that JSON now that I'm installed</span> <span data-start="1374.299" data-end="1377.929">bootstrap in my app file I need to</span> <span data-start="1377.929" data-end="1379.7">require it so I'm just gonna say require</span> <span data-start="1379.7" data-end="1384.019">bootstrap so it's the same name and then</span> <span data-start="1384.019" data-end="1385.639">let's just see that we've got it in the</span> <span data-start="1385.639" data-end="1399.35">page</span> <span data-start="1399.36" data-end="1406.68">okay so there again injecting the CSS</span> <span data-start="1406.68" data-end="1410.62">dynamically through the module loader</span> <span data-start="1410.63" data-end="1413.73">alright so now we want to take this site</span> <span data-start="1413.73" data-end="1415.92">and put it into production if you look</span> <span data-start="1415.92" data-end="1417.57">at the network tab at the moment this is</span> <span data-start="1417.57" data-end="1419.34">obviously not at all suitable for</span> <span data-start="1419.34" data-end="1421.8">production we are passing es6</span> <span data-start="1421.8" data-end="1424.08">dynamically in the browser so that the</span> <span data-start="1424.08" data-end="1428.61">system jeaious is loading in tracer to</span> <span data-start="1428.61" data-end="1430.53">do the parsing which itself is 500</span> <span data-start="1430.53" data-end="1432.96">kilobytes there's a lot of stuff going</span> <span data-start="1432.96" data-end="1434.76">on that we don't want to be happening in</span> <span data-start="1434.76" data-end="1437.73">production we've got a 21 separate</span> <span data-start="1437.73" data-end="1439.77">requests of all these files so how can</span> <span data-start="1439.77" data-end="1442.05">we take this and make it something that</span> <span data-start="1442.05" data-end="1443.22">we can actually put into production</span> <span data-start="1443.22" data-end="1446.91">today and that can work so we do need to</span> <span data-start="1446.91" data-end="1450.84">do a bundling approach for this so to</span> <span data-start="1450.84" data-end="1454.28">make a bundle what I need to do is</span> <span data-start="1454.28" data-end="1457.11">create a bundle of a specific module and</span> <span data-start="1457.11" data-end="1459.24">in this case we have that app module</span> <span data-start="1459.24" data-end="1461.46">entry point so I'm just gonna bundle app</span> <span data-start="1461.46" data-end="1463.98">and again the naming system is exactly</span> <span data-start="1463.98" data-end="1466.8">the same naming as you would use in your</span> <span data-start="1466.8" data-end="1468.54">requires so I can actually bundle any</span> <span data-start="1468.54" data-end="1471.08">module within my current required tree</span> <span data-start="1471.08" data-end="1473.94">bundle app and that's called the file</span> <span data-start="1473.94" data-end="1476.46">app build jeaious so that will go into</span> <span data-start="1476.46" data-end="1479.4">app trace the dependencies and bundle</span> <span data-start="1479.4" data-end="1480.66">everything together into one file</span> <span data-start="1480.66" data-end="1484.71">transpiling the is-6 in cs5 and so that</span> <span data-start="1484.71" data-end="1487.11">we have the build and then I need to</span> <span data-start="1487.11" data-end="1490.2">include this in the page so I'm just</span> <span data-start="1490.2" data-end="1495.78">gonna say include Apple J's because I</span> <span data-start="1495.78" data-end="1497.67">use the new six component that used</span> <span data-start="1497.67" data-end="1500.67">class syntax I actually need to include</span> <span data-start="1500.67" data-end="1503.13">the tracer runtime as well it has a</span> <span data-start="1503.13" data-end="1505.92">class helper called create class which I</span> <span data-start="1505.92" data-end="1507.57">need to include through the tracer</span> <span data-start="1507.57" data-end="1510.81">runtime so I need to add that ideally</span> <span data-start="1510.81" data-end="1515.94">you wouldn't actually you ideally if I</span> <span data-start="1515.94" data-end="1518.37">wasn't using es6 modules I wouldn't need</span> <span data-start="1518.37" data-end="1520.26">to do this at all so if I was just using</span> </p>
<p><span data-start="1520.26" data-end="1522.69">AMD and Collins yes this wouldn't be an</span> <span data-start="1522.69" data-end="1531.879">issue</span> <span data-start="1531.889" data-end="1535.11">okay so now if you look at the network</span> <span data-start="1535.11" data-end="1542.639">tab the same the same code is now</span> <span data-start="1542.639" data-end="1545.279">running in the page but we're only</span> <span data-start="1545.279" data-end="1546.809">loading we're loading everything from</span> <span data-start="1546.809" data-end="1547.71">the single bundle</span> <span data-start="1547.71" data-end="1553.23">so that's transpiled er6 comma J is MD</span> <span data-start="1553.23" data-end="1554.549">all running together in a single bundle</span> <span data-start="1554.549" data-end="1556.59">in a way that supports all their</span> <span data-start="1556.59" data-end="1562.59">circular references together and just to</span> <span data-start="1562.59" data-end="1563.94">give you some idea of what it looks like</span> <span data-start="1563.94" data-end="1567.75">it uses this two variations of system</span> <span data-start="1567.75" data-end="1570.21">dot register and it's just kind of</span> <span data-start="1570.21" data-end="1571.649">wrapped everything up in these wrappers</span> <span data-start="1571.649" data-end="1574.82">so that's how it works</span> <span data-start="1574.82" data-end="1579.6">all right then there's one other example</span> </p>
<p><span data-start="1579.6" data-end="1583.49">I want to show you which is how we can</span> <span data-start="1583.49" data-end="1588.09">load from other registries and and also</span> <span data-start="1588.09" data-end="1589.379">what happens when you have deeper</span> <span data-start="1589.379" data-end="1596.46">dependency trees all right so what I'm</span> <span data-start="1596.46" data-end="1598.2">going to do is install a demo directly</span> <span data-start="1598.2" data-end="1600.84">off of MPM this is a demo created by</span> <span data-start="1600.84" data-end="1605.159">McCullough lysenko so it's a he's</span> <span data-start="1605.159" data-end="1608.039">finally given permission to use it and</span> <span data-start="1608.039" data-end="1609.47">I'm just gonna go ahead and install that</span> <span data-start="1609.47" data-end="1612.059">it's got quite a big dependency tree so</span> <span data-start="1612.059" data-end="1613.32">it's going to take a while to install</span> <span data-start="1613.32" data-end="1614.97">I'm just going to leave that going on</span> <span data-start="1614.97" data-end="1624.879">the side so let's get that going</span> <span data-start="1624.889" data-end="1627.869">and I'm just gonna add a button to the</span> <span data-start="1627.869" data-end="1629.519">page so that I can click this button and</span> <span data-start="1629.519" data-end="1643.42">load the stuff dynamically</span> </p>
<p><span data-start="1643.43" data-end="1645.99">I'm gonna be kind of lazy and just an</span> <span data-start="1645.99" data-end="1648.87">on-click event I wouldn't actually do</span> <span data-start="1648.87" data-end="1652.05">this normally so the thing I want to</span> <span data-start="1652.05" data-end="1653.82">import is exactly the same name I just</span> <span data-start="1653.82" data-end="1659.94">installed which is MPM voxel demo all</span> <span data-start="1659.94" data-end="1660.78">right so it's gone through the</span> <span data-start="1660.78" data-end="1662.43">dependency tree and installed and</span> <span data-start="1662.43" data-end="1664.23">resolved versions and done all that</span> <span data-start="1664.23" data-end="1668.01">stuff let's have a look at the page so</span> <span data-start="1668.01" data-end="1670.14">we got this button and this is the one</span> <span data-start="1670.14" data-end="1671.34">where it's quite fun to watch the</span> <span data-start="1671.34" data-end="1675.63">network tab go it's about it's over 60</span> <span data-start="1675.63" data-end="1679.83">modules about 120 requests so let's run</span> <span data-start="1679.83" data-end="1683.76">that and you see it runs they're all</span> <span data-start="1683.76" data-end="1685.32">common J's modules loading in the page</span> <span data-start="1685.32" data-end="1687.57">and there it's finished let's see that</span> <span data-start="1687.57" data-end="1689.7">so yeah it's it's a full WebGL demo</span> <span data-start="1689.7" data-end="1691.47">running in the browser it's using the</span> <span data-start="1691.47" data-end="1694.62">same node libraries as browserify so</span> <span data-start="1694.62" data-end="1696.99">it's pretty much replicating those kind</span> <span data-start="1696.99" data-end="1701.49">of principles and dynamically compiling</span> <span data-start="1701.49" data-end="1706.14">that all in the browser again how do I</span> <span data-start="1706.14" data-end="1708.78">actually use this in production so how</span> <span data-start="1708.78" data-end="1710.96">can I take this into production well I</span> <span data-start="1710.96" data-end="1714.83">can do a bundle just like I did just now</span> <span data-start="1714.83" data-end="1717.3">actually before I do that I want to just</span> <span data-start="1717.3" data-end="1719.01">speak about the configuration file and</span> <span data-start="1719.01" data-end="1720.36">show you what's going on with all of</span> <span data-start="1720.36" data-end="1724.28">this so here's the configuration phone</span> <span data-start="1724.28" data-end="1727.38">if you're familiar with AMD it's simply</span> <span data-start="1727.38" data-end="1729.77">map and pause config all the way through</span> <span data-start="1729.77" data-end="1733.59">so we have positon fixed setting up when</span> </p>
<p><span data-start="1733.59" data-end="1736.44">I said NPM box will demo its loading</span> <span data-start="1736.44" data-end="1739.62">from JSP and packages NPM so it's just a</span> <span data-start="1739.62" data-end="1742.38">pod set up and then the way that I can</span> <span data-start="1742.38" data-end="1744.6">load for example just bootstrap by name</span> <span data-start="1744.6" data-end="1748.11">is map config so we have global Mac</span> <span data-start="1748.11" data-end="1749.49">config that says when I require</span> <span data-start="1749.49" data-end="1751.53">bootstrap what I'm actually loading from</span> <span data-start="1751.53" data-end="1754.02">is github Twitter bootstrap version 3.1</span> <span data-start="1754.02" data-end="1757.14">point 1 and then the next thing we have</span> <span data-start="1757.14" data-end="1760.05">is contextual map config and this is</span> <span data-start="1760.05" data-end="1762.03">really valuable it's the way that we can</span> <span data-start="1762.03" data-end="1765.12">abstract the naming so bootstrap can</span> <span data-start="1765.12" data-end="1767.13">refer to jQuery by name and something</span> <span data-start="1767.13" data-end="1768.96">else can refer to jQuery by name but</span> <span data-start="1768.96" data-end="1770.85">they can have different names and this</span> <span data-start="1770.85" data-end="1772.62">was pioneered I mean this stuff was all</span> <span data-start="1772.62" data-end="1774.69">developed within the AMD world we're</span> <span data-start="1774.69" data-end="1775.059">just</span> <span data-start="1775.059" data-end="1777.789">redoing it here there's nothing really</span> <span data-start="1777.789" data-end="1778.74">new</span> <span data-start="1778.74" data-end="1781.749">so here's bootstrap version 3.1 point</span> <span data-start="1781.749" data-end="1784.419">one and you can see it's loading jQuery</span> <span data-start="1784.419" data-end="1786.549">and when you write jQuery what you're</span> <span data-start="1786.549" data-end="1788.2">actually getting is github components</span> <span data-start="1788.2" data-end="1791.379">jQuery 2.0 so its global map config</span> <span data-start="1791.379" data-end="1793.809">which is the one without the object this</span> <span data-start="1793.809" data-end="1796.57">one and then contextual map config so</span> <span data-start="1796.57" data-end="1798.879">with in bootstrap these are the names so</span> <span data-start="1798.879" data-end="1800.44">every every package can have its own</span> <span data-start="1800.44" data-end="1802.509">names and that's how you can easily do</span> <span data-start="1802.509" data-end="1805.269">the multi version stuff we've got quite</span> <span data-start="1805.269" data-end="1806.98">a deep tree now because I installed all</span> <span data-start="1806.98" data-end="1810.909">that stuff from NPM and then at the very</span> <span data-start="1810.909" data-end="1813.999">bottom we've got this versions and this</span> <span data-start="1813.999" data-end="1816.19">is the final version solution currently</span> <span data-start="1816.19" data-end="1818.879">for everything every package in the page</span> <span data-start="1818.879" data-end="1822.039">so we can see every version and there's</span> <span data-start="1822.039" data-end="1824.11">actually when I installed from this NPM</span> <span data-start="1824.11" data-end="1826.119">module it created a few version folks</span> <span data-start="1826.119" data-end="1828.82">that come up as arrays in the version</span> <span data-start="1828.82" data-end="1832.119">map so for example geo shader we're</span> <span data-start="1832.119" data-end="1834.159">currently running no point six no point</span> <span data-start="1834.159" data-end="1836.499">no point six and no point 0.5 together</span> <span data-start="1836.499" data-end="1838.6">in the page I don't want to be doing</span> <span data-start="1838.6" data-end="1840.759">that so what I can do is I can check</span> <span data-start="1840.759" data-end="1842.409">this configuration file into version</span> <span data-start="1842.409" data-end="1845.049">control there is no state in the JSP and</span> <span data-start="1845.049" data-end="1846.85">packages folder there's no information</span> <span data-start="1846.85" data-end="1848.71">about versions in there it's it's a</span> <span data-start="1848.71" data-end="1851.71">universal kind of property and I can</span> <span data-start="1851.71" data-end="1854.019">just modify this this versions config</span> <span data-start="1854.019" data-end="1855.429">here and say I actually just want to be</span> <span data-start="1855.429" data-end="1859.749">using GL shader version or point 0.6 and</span> <span data-start="1859.749" data-end="1861.759">this is how I can go through and</span> <span data-start="1861.759" data-end="1864.539">manually manipulate my own version tree</span> <span data-start="1864.539" data-end="1866.74">the problem is I'm going to now have</span> <span data-start="1866.74" data-end="1869.499">some unfulfilled dependencies so I'm</span> <span data-start="1869.499" data-end="1870.999">just going to search through them the</span> <span data-start="1870.999" data-end="1873.07">dependency map and see what is using</span> <span data-start="1873.07" data-end="1876.519">version or point 0.5 that I saw that I</span> <span data-start="1876.519" data-end="1878.559">can remove it so here's the first thing</span> <span data-start="1878.559" data-end="1881.11">that's using GL shader is calling it by</span> <span data-start="1881.11" data-end="1883.059">named Yoshida and actually getting this</span> <span data-start="1883.059" data-end="1886.299">full version no point 0.6 where's the</span> <span data-start="1886.299" data-end="1891.059">next one here so NPM error shader is</span> <span data-start="1891.059" data-end="1894.46">actually using GL shader compatible with</span> <span data-start="1894.46" data-end="1898.09">version or point 0.5 and that's what was</span> <span data-start="1898.09" data-end="1900.759">causing us to need to fork and run the</span> <span data-start="1900.759" data-end="1902.23">second version so I'm just going to</span> <span data-start="1902.23" data-end="1905.049">update this here to no point 0.6</span> <span data-start="1905.049" data-end="1906.46">we can now check that into version</span> <span data-start="1906.46" data-end="1908.77">control and that's a version up</span> </p>
<p><span data-start="1908.77" data-end="1910.39">I've changed the dependencies sub</span> <span data-start="1910.39" data-end="1913.15">dependency but because the full version</span> <span data-start="1913.15" data-end="1916.12">manifest is in one place I can have</span> <span data-start="1916.12" data-end="1918.82">final say over that so I'm just going to</span> <span data-start="1918.82" data-end="1920.86">rerun the page one more time we're now</span> <span data-start="1920.86" data-end="1922.99">running just that no point 0.6 version</span> <span data-start="1922.99" data-end="1925.09">we've resolved the fork and then I can</span> <span data-start="1925.09" data-end="1926.32">now test it and see if it's still</span> <span data-start="1926.32" data-end="1928.72">working and it is so we know that that's</span> <span data-start="1928.72" data-end="1930.88">worked and that's how I can have full</span> <span data-start="1930.88" data-end="1934.99">control over the dependency tree so now</span> <span data-start="1934.99" data-end="1937.75">I want to bundle this for production so</span> <span data-start="1937.75" data-end="1939.01">I'm just going to do JSP and bundle</span> <span data-start="1939.01" data-end="1942.79">again and the same name so the name that</span> <span data-start="1942.79" data-end="1943.99">I'm writing here will still go through</span> <span data-start="1943.99" data-end="1947.02">all those map config things and etc and</span> <span data-start="1947.02" data-end="1951.46">let's call this voxel bundle J's so that</span> <span data-start="1951.46" data-end="1953.29">creates a full bundle like a browserify</span> <span data-start="1953.29" data-end="1956.47">bundle but we only want to load this in</span> <span data-start="1956.47" data-end="1959.02">the page so someone might never click</span> <span data-start="1959.02" data-end="1960.61">that button you know it might be a</span> <span data-start="1960.61" data-end="1962.41">pop-up that features new functionality</span> <span data-start="1962.41" data-end="1965.71">or something so you might not want to</span> <span data-start="1965.71" data-end="1968.14">load everything up front I just want a</span> <span data-start="1968.14" data-end="1969.76">load in that new functionality when</span> <span data-start="1969.76" data-end="1972.7">someone clicks the button so what we can</span> <span data-start="1972.7" data-end="1974.47">do for that is something called bundles</span> <span data-start="1974.47" data-end="1979.75">config and it's it's a feature in</span> <span data-start="1979.75" data-end="1982.84">require.js today so again I didn't</span> <span data-start="1982.84" data-end="1986.62">invent it at all so we call this box</span> <span data-start="1986.62" data-end="1989.4">whole bundle was that the name I gave it</span> <span data-start="1989.4" data-end="1993.07">yes so the local name I would type</span> <span data-start="1993.07" data-end="1995.26">import voxel bundle to load that bundle</span> <span data-start="1995.26" data-end="1997.78">so I used that name and now I can say</span> <span data-start="1997.78" data-end="1999.91">what the bundle contains so what modules</span> <span data-start="1999.91" data-end="2003.33">are inside the bundle and what that</span> <span data-start="2003.33" data-end="2005.16">means is anytime I request one of these</span> <span data-start="2005.16" data-end="2006.99">modules that upfront has been declared</span> <span data-start="2006.99" data-end="2009.06">as belonging to the bundle it'll make</span> <span data-start="2009.06" data-end="2010.44">sure it's loading from that single</span> <span data-start="2010.44" data-end="2013.14">bundle I have to now enter in fully</span> <span data-start="2013.14" data-end="2015.21">normalized names because bundles contain</span> <span data-start="2015.21" data-end="2018.66">normalized module names so I'm going to</span> <span data-start="2018.66" data-end="2022.47">load in nor point 1.0 so voxel demo nor</span> <span data-start="2022.47" data-end="2024.54">point 1.0 is contained within this</span> <span data-start="2024.54" data-end="2026.46">bundle if there were other things like</span> <span data-start="2026.46" data-end="2028.59">if I put jQuery into that bundle I could</span> <span data-start="2028.59" data-end="2031.05">also add it to this list so as soon as</span> <span data-start="2031.05" data-end="2032.49">there's a requester it will go to the</span> <span data-start="2032.49" data-end="2036.33">bundle and with some luck I think that</span> <span data-start="2036.33" data-end="2037.56">should do it now</span> <span data-start="2037.56" data-end="2040.77">so if you look at the network tab we</span> <span data-start="2040.77" data-end="2042.93">load the initial page with our app build</span> <span data-start="2042.93" data-end="2045.45">that we did just now and when I click on</span> <span data-start="2045.45" data-end="2049.94">the new functionality it it didn't work</span> <span data-start="2049.94" data-end="2054.659">so why didn't that work I think it's no</span> <span data-start="2054.659" data-end="2057.87">point 0.1 so you do have to get the</span> <span data-start="2057.87" data-end="2064.29">exact name and exact version right all</span> <span data-start="2064.29" data-end="2067.56">right so when I click the button it just</span> <span data-start="2067.56" data-end="2069.72">loads that single bundle if you can see</span> <span data-start="2069.72" data-end="2072.96">it on in the network tab there and it's</span> <span data-start="2072.96" data-end="2074.63">then just like a browserify</span> <span data-start="2074.63" data-end="2077.76">bundle loading the full common J's tree</span> <span data-start="2077.76" data-end="2081.659">from within that so yeah that's it</span> <span data-start="2081.659" data-end="2084.659">that's pretty much what there is â€” it's</span> <span data-start="2084.659" data-end="2086.52">it allows you to kind of package manage</span> <span data-start="2086.52" data-end="2090.179">your existing modules today and and</span> <span data-start="2090.179" data-end="2091.23">bundle them up with these kind of</span> <span data-start="2091.23" data-end="2095.02">workflows using any a6 module loader</span> <span data-start="2095.03" data-end="2097.41">right and then there's one other thing I</span> <span data-start="2097.41" data-end="2098.76">want to talk about which is how we</span> <span data-start="2098.76" data-end="2100.89">looking at the future workflows of HTTP</span> <span data-start="2100.89" data-end="2103.5">- so I said at the beginning bundling is</span> <span data-start="2103.5" data-end="2105.69">actually an anti-pattern it's it's it's</span> <span data-start="2105.69" data-end="2106.59">something that we're going to be moving</span> <span data-start="2106.59" data-end="2109.59">away from how can this work when we're</span> <span data-start="2109.59" data-end="2110.88">actually going to be looking beyond</span> <span data-start="2110.88" data-end="2113.9">bundling and one way we can do this is</span> <span data-start="2113.9" data-end="2116.76">we basically take that JSP in packages</span> <span data-start="2116.76" data-end="2119.55">folder host it on your local assets</span> <span data-start="2119.55" data-end="2123">server and put that into production</span> <span data-start="2123" data-end="2126.72">effectively and because of the fact that</span> <span data-start="2126.72" data-end="2129.45">the the files of versioned you get</span> <span data-start="2129.45" data-end="2131.33">everything running through that and</span> <span data-start="2131.33" data-end="2134.16">there is actually a CDN set up as well</span> <span data-start="2134.16" data-end="2135.69">so you can actually run directly through</span> <span data-start="2135.69" data-end="2138.81">that and and that core thing is that the</span> <span data-start="2138.81" data-end="2141.48">config manages your full dependency tree</span> <span data-start="2141.48" data-end="2146.28">and the exact resolutions right so</span> <span data-start="2146.28" data-end="2150.18">that's it some of the next things I want</span> <span data-start="2150.18" data-end="2152.87">to work on include conditional loading</span> <span data-start="2152.87" data-end="2158.19">for example in reality I wouldn't just</span> <span data-start="2158.19" data-end="2160.47">load a web component I would want to do</span> <span data-start="2160.47" data-end="2162.93">a conditional check on my environment to</span> <span data-start="2162.93" data-end="2164.52">check that the environment supports web</span> <span data-start="2164.52" data-end="2166.98">components if it doesn't load a polyfill</span> <span data-start="2166.98" data-end="2169.95">and have that conditional loading baked</span> <span data-start="2169.95" data-end="2170.76">into the module</span> <span data-start="2170.76" data-end="2173.67">system itself and then to look at builds</span> <span data-start="2173.67" data-end="2174.98">around it and also thinking about</span> <span data-start="2174.98" data-end="2177.57">internationalized builds and how you can</span> <span data-start="2177.57" data-end="2180.63">do builds around different languages and</span> <span data-start="2180.63" data-end="2182.52">mobile build tooling for plugins as well</span> <span data-start="2182.52" data-end="2184.14">so this look at the kind of things that</span> </p>
<p><span data-start="2184.14" data-end="2189.63">I'd really like to work on next yeah so</span> <span data-start="2189.63" data-end="2190.5">that's it</span> <span data-start="2190.5" data-end="2193.86">the I'm not telling you all to go off</span> <span data-start="2193.86" data-end="2196.38">and start writing years six web</span> <span data-start="2196.38" data-end="2199.94">components what it's really about is</span> <span data-start="2199.94" data-end="2202.68">focusing on an approach that can be</span> <span data-start="2202.68" data-end="2204.18">based on the ideas of year six and you</span> <span data-start="2204.18" data-end="2206.55">can use it for AMD common J's and</span> <span data-start="2206.55" data-end="2210.84">existing workflows today and I mean the</span> <span data-start="2210.84" data-end="2214.71">real path to es6 is it is much more</span> <span data-start="2214.71" data-end="2217.08">nuanced than than just using these kind</span> <span data-start="2217.08" data-end="2220.32">of approaches but by basing the by</span> <span data-start="2220.32" data-end="2221.91">basing ourselves on these approaches we</span> <span data-start="2221.91" data-end="2225.12">can we can find a stable workflow that</span> <span data-start="2225.12" data-end="2226.65">can that can make package management</span> <span data-start="2226.65" data-end="2229.59">really easy and that's that so yeah</span> <span data-start="2229.59" data-end="2230.94">check out the projects let me know what</span> <span data-start="2230.94" data-end="2232.26">you think if you like it if you hate it</span> <span data-start="2232.26" data-end="2233.94">are we great to hear so thanks so much</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
