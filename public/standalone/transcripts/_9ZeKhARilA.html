<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>_9ZeKhARilA</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/_9ZeKhARilA?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="9.019" data-end="11.49">my name is Felix caisson deferred and</span> <span data-start="11.49" data-end="13.29">I'm going to talk about how to do</span> <span data-start="13.29" data-end="17.13">testing and noches if you are looking</span> <span data-start="17.13" data-end="19.59">for me on github Twitter IRC that's my</span> <span data-start="19.59" data-end="23.91">handle yeah Tom already gave a little</span> <span data-start="23.91" data-end="25.71">introduction about me but I've guess</span> </p>
<p><span data-start="25.71" data-end="27.24">I've been an early contributor to the</span> <span data-start="27.24" data-end="29.07">project and I kind of worked on a bunch</span> <span data-start="29.07" data-end="32.309">of model modules and actually really</span> <span data-start="32.309" data-end="35.37">liked that mad heads a talk right in</span> <span data-start="35.37" data-end="36.87">front of me because a lot of the</span> <span data-start="36.87" data-end="39.51">problems he's describing that he has was</span> <span data-start="39.51" data-end="41.219">running node and production have</span> <span data-start="41.219" data-end="44.219">different solutions in debugging lindo</span> <span data-start="44.219" data-end="46.379">stovall recently I don't know how reason</span> <span data-start="46.379" data-end="48.39">but rode on a mailing list there really</span> <span data-start="48.39" data-end="50.34">are only two acceptable models of</span> <span data-start="50.34" data-end="52.86">development sink and analyze or years</span> <span data-start="52.86" data-end="54.3">and years of testing and thousands of</span> <span data-start="54.3" data-end="56.85">machines now for most software you're</span> <span data-start="56.85" data-end="58.26">going to need a certain combination of</span> <span data-start="58.26" data-end="60">the two you're going to need to do a lot</span> <span data-start="60" data-end="61.77">of thinking and analyzing and a lot of</span> <span data-start="61.77" data-end="64.049">testing a lot of machines but i think</span> <span data-start="64.049" data-end="65.61">the sink and analyzed part can be</span> <span data-start="65.61" data-end="67.92">creighton hants to certain techniques</span> <span data-start="67.92" data-end="69.21">when it comes to testing noches</span> <span data-start="69.21" data-end="71.07">applications and they can save you a lot</span> <span data-start="71.07" data-end="72.869">of time on the debugging part and the</span> <span data-start="72.869" data-end="76.32">running on thousands of machines so let</span> <span data-start="76.32" data-end="78.869">me tell you a little story how I was</span> <span data-start="78.869" data-end="81.45">using node before I learned my lessons</span> <span data-start="81.45" data-end="83.82">and how we're using it now it kind of</span> <span data-start="83.82" data-end="87.24">started in june 2009 we were building a</span> <span data-start="87.24" data-end="89.28">product called trance loaded which is a</span> <span data-start="89.28" data-end="90.96">service for file uploading and</span> <span data-start="90.96" data-end="93.06">processing is an infrastructure service</span> <span data-start="93.06" data-end="96.09">it's kind of similar to what mess you</span> <span data-start="96.09" data-end="97.799">talked about at the MRC actually using</span> <span data-start="97.799" data-end="99.869">the note formidable file upload parcel</span> <span data-start="99.869" data-end="102.57">for that that we wrote and we initially</span> <span data-start="102.57" data-end="105.78">did set in peach key and we try to do a</span> <span data-start="105.78" data-end="108.39">lot of things that were difficult in PHP</span> <span data-start="108.39" data-end="110.49">like running a lot of processes in the</span> <span data-start="110.49" data-end="113.939">background and getting events for their</span> <span data-start="113.939" data-end="115.59">standard out in standard error to show</span> <span data-start="115.59" data-end="117.479">encoding progress information to the</span> <span data-start="117.479" data-end="119.43">users and it always felt very tedious</span> <span data-start="119.43" data-end="121.079">where were using workers we're using</span> <span data-start="121.079" data-end="123.299">hues and we just got nowhere with that</span> <span data-start="123.299" data-end="125.1">we didn't get results out upset said we</span> <span data-start="125.1" data-end="126.96">wanted it we're certainly doable but it</span> <span data-start="126.96" data-end="130.31">felt painful so we found no chairs</span> <span data-start="130.31" data-end="134.36">no jst m and we kind of fell in love</span> <span data-start="134.36" data-end="137.78">with it and we had a lot of fun using it</span> <span data-start="137.78" data-end="139.67">it really solved our problems and we</span> <span data-start="139.67" data-end="140.989">were thinking yeah that's the answer to</span> <span data-start="140.989" data-end="143.209">all of our problems but actually our</span> <span data-start="143.209" data-end="145.55">first version we totally crashed it it</span> <span data-start="145.55" data-end="148.67">did not work at all for us to be more</span> <span data-start="148.67" data-end="150.86">precise note crashed for us we were on a</span> <span data-start="150.86" data-end="154.459">very early version sing it with co 118</span> <span data-start="154.459" data-end="157.64">or something and it had a buggy piece in</span> <span data-start="157.64" data-end="159.349">the networking layer and every so often</span> <span data-start="159.349" data-end="162.41">more sober which is died without slowing</span> <span data-start="162.41" data-end="164.209">an exception just this little message</span> <span data-start="164.209" data-end="166.25">you see here f come receive success</span> <span data-start="166.25" data-end="168.35">while awesome success and then a sec</span> <span data-start="168.35" data-end="173.63">fold but without the sexual part so we</span> <span data-start="173.63" data-end="175.099">were really close to launching at that</span> <span data-start="175.099" data-end="177.41">point there we were like oh no and well</span> <span data-start="177.41" data-end="180.2">as those things happen when stuff hits</span> <span data-start="180.2" data-end="182.209">the fan there's more coming and this was</span> <span data-start="182.209" data-end="184.58">exactly the time where Ryan was changing</span> <span data-start="184.58" data-end="187.19">the promised API and nuking it</span> <span data-start="187.19" data-end="188.959">completely from the core and putting in</span> <span data-start="188.959" data-end="191.09">callbacks instead we were like oh no now</span> <span data-start="191.09" data-end="193.31">we have to rewrite all of our code on</span> <span data-start="193.31" data-end="194.959">top of the fact that our initial code</span> <span data-start="194.959" data-end="197.15">base didn't even work to begin with but</span> <span data-start="197.15" data-end="199.34">an even bigger problem was we had no</span> <span data-start="199.34" data-end="203.959">tests we had written like 10,000 lines</span> <span data-start="203.959" data-end="206.12">of no she s code and now refactoring</span> <span data-start="206.12" data-end="207.89">every single piece of the coats it uses</span> <span data-start="207.89" data-end="210.109">a promise to a call back I mean it was</span> <span data-start="210.109" data-end="212.48">not going to happen so we device the</span> <span data-start="212.48" data-end="214.13">greatest plan of all software</span> <span data-start="214.13" data-end="217.67">development ever we decided to rewrite</span> <span data-start="217.67" data-end="219.709">the whole thing that's what software</span> <span data-start="219.709" data-end="221.72">engineer that's right no that's we</span> <span data-start="221.72" data-end="223.88">really kind of went back and forth of it</span> <span data-start="223.88" data-end="225.829">if it made sense or not but we decided</span> <span data-start="225.829" data-end="227.84">said not having a test suit was actually</span> <span data-start="227.84" data-end="229.94">a really big problem even the bigger</span> <span data-start="229.94" data-end="232.069">problems and the fact that promises were</span> <span data-start="232.069" data-end="235.19">changing underneath us and at that time</span> </p>
<p><span data-start="235.19" data-end="239.09">I was watching a real con 2009 keynote</span> <span data-start="239.09" data-end="241.819">by robert martin also known as uncle bob</span> <span data-start="241.819" data-end="244.01">and he gave the presentation called what</span> <span data-start="244.01" data-end="245.93">killed small talk could kill ruby too</span> <span data-start="245.93" data-end="248.6">and it was really energetic presentation</span> <span data-start="248.6" data-end="250.459">about test ribbon development and i got</span> <span data-start="250.459" data-end="252.62">all pumped up and excited i even all</span> <span data-start="252.62" data-end="254.12">that one of the little cream wristbands</span> <span data-start="254.12" data-end="256.4">he he has for people to look at and be</span> <span data-start="256.4" data-end="258.2">constantly reminded to write the tests</span> <span data-start="258.2" data-end="260.39">first and i was very excited it's kind</span> <span data-start="260.39" data-end="261.16">of me in the</span> <span data-start="261.16" data-end="263.2">backgrounds they're being very excited</span> <span data-start="263.2" data-end="268.36">and so that's kind of how I got into</span> <span data-start="268.36" data-end="269.71">that it's been a years that have been</span> <span data-start="269.71" data-end="271.54">doing test-driven development so take</span> <span data-start="271.54" data-end="273.64">pics of what I have to say with a grain</span> <span data-start="273.64" data-end="276.28">of salt I'll talk what works for us what</span> <span data-start="276.28" data-end="278.53">doesn't and yeah let's get started with</span> <span data-start="278.53" data-end="284.02">us how to test asynchronous code when we</span> <span data-start="284.02" data-end="287.38">will start this when we decided we want</span> <span data-start="287.38" data-end="288.61">to do this test for the development</span> <span data-start="288.61" data-end="290.08">thing we want to be really disciplined</span> <span data-start="290.08" data-end="292.21">and do it all right we kind of looked</span> <span data-start="292.21" data-end="293.62">around for asynchronous testing</span> <span data-start="293.62" data-end="297.37">frameworks and but it kind of felt hot</span> <span data-start="297.37" data-end="299.86">everything we try didn't really work the</span> <span data-start="299.86" data-end="301.33">flying closure monster didn't really</span> <span data-start="301.33" data-end="303.25">help you know you already have those</span> <span data-start="303.25" data-end="305.98">closures in your code everywhere and now</span> <span data-start="305.98" data-end="307.45">you also have some in your tests and you</span> <span data-start="307.45" data-end="310.36">kind of need to make sure that each test</span> <span data-start="310.36" data-end="312.1">kinda has a done call back where you</span> <span data-start="312.1" data-end="315.34">tell it it's over and if there's an</span> <span data-start="315.34" data-end="316.99">exception that you didn't catch it's</span> <span data-start="316.99" data-end="318.64">really difficult to trace it back to the</span> <span data-start="318.64" data-end="320.44">tests that it was happening in I wishes</span> <span data-start="320.44" data-end="324.49">a mess it didn't really work for us it</span> <span data-start="324.49" data-end="327.49">turns out this is not a new problem or</span> <span data-start="327.49" data-end="328.78">anything this problem has been around</span> <span data-start="328.78" data-end="331.66">for a very long time the asynchronous</span> <span data-start="331.66" data-end="334.06">stuff is only piece of it but there's</span> <span data-start="334.06" data-end="336.25">some old news here that's why I brought</span> <span data-start="336.25" data-end="338.919">this last week's newspaper it's a German</span> <span data-start="338.919" data-end="342.43">terrible tabloid magazine and there's</span> <span data-start="342.43" data-end="343.96">little demonstration we can do with us</span> <span data-start="343.96" data-end="345.73">what I'm going to do is I'm going to</span> <span data-start="345.73" data-end="349.15">fold to sing seven times guess that's</span> <span data-start="349.15" data-end="357.42">two right now three four five</span> <span data-start="357.42" data-end="361.56">six gets tricky here seven okay there's</span> <span data-start="361.56" data-end="363.18">a lot of geeks in the room how many</span> <span data-start="363.18" data-end="368.26">pieces of paper are stacked up here now</span> <span data-start="368.27" data-end="374.22">anybody under 28 who set 128 can you</span> <span data-start="374.22" data-end="376.14">come here for a second it could need</span> <span data-start="376.14" data-end="393.22">your help on something all right come up</span> <span data-start="393.23" data-end="395.82">yeah folding it again would probably be</span> <span data-start="395.82" data-end="397.92">hard but I want you to try to rip it and</span> <span data-start="397.92" data-end="400.29">set religious yeah can you rip it oh</span> <span data-start="400.29" data-end="402.57">hell no okay there's no way to rip it</span> <span data-start="402.57" data-end="405">right no one okay okay thanks they all</span> <span data-start="405" data-end="411.03">you have to do thank you so so what's</span> <span data-start="411.03" data-end="413.13">the problem here well the problem is</span> <span data-start="413.13" data-end="415.05">said you can think of this newspaper as</span> <span data-start="415.05" data-end="416.76">a metaphor for something else you can</span> <span data-start="416.76" data-end="418.56">think of it as a simple computer program</span> <span data-start="418.56" data-end="420.66">that managed seven boolean variables you</span> <span data-start="420.66" data-end="422.28">have seven bits thing that can adds up</span> <span data-start="422.28" data-end="427.59">to 128 states and each bullying bullying</span> <span data-start="427.59" data-end="429.87">in this program has an impact on the</span> <span data-start="429.87" data-end="431.25">behavior of the software in this case it</span> <span data-start="431.25" data-end="433.95">makes a newspaper sicker and as a result</span> <span data-start="433.95" data-end="436.29">of set it is really difficult to rip</span> <span data-start="436.29" data-end="438.27">through this once and it's kind of the</span> <span data-start="438.27" data-end="439.92">same as if you try to rip through a</span> <span data-start="439.92" data-end="441.69">complex program with a single test</span> <span data-start="441.69" data-end="442.98">that's the whole premise of this</span> <span data-start="442.98" data-end="444.18">asynchronous testing you're kind of</span> <span data-start="444.18" data-end="445.8">doing end-to-end testing once you're</span> <span data-start="445.8" data-end="449.46">doing I oh and it is not a good wave for</span> <span data-start="449.46" data-end="451.92">testing it has certain benefits but it's</span> <span data-start="451.92" data-end="453.84">certainly not a solution to everything</span> <span data-start="453.84" data-end="456.51">why is that the case it's the problem is</span> <span data-start="456.51" data-end="458.82">the more variables that you get in this</span> <span data-start="458.82" data-end="461.25">case let's say boo lengths the more</span> <span data-start="461.25" data-end="463.01">possible states your software can be in</span> <span data-start="463.01" data-end="465.18">with the boolean's you get an</span> <span data-start="465.18" data-end="468.48">exponential increase in in complexity of</span> <span data-start="468.48" data-end="470.58">your software and each of these possible</span> <span data-start="470.58" data-end="472.47">combination of states could affect the</span> <span data-start="472.47" data-end="474.3">flow of your program and increase the</span> <span data-start="474.3" data-end="476.4">size or amount of tests you would need</span> <span data-start="476.4" data-end="478.47">to write from an integration perspective</span> <span data-start="478.47" data-end="480.63">exponentially so that's obviously not</span> <span data-start="480.63" data-end="482.31">going to happen but what's even worse</span> <span data-start="482.31" data-end="484.2">you don't have Bowling's you have</span> <span data-start="484.2" data-end="486">strengths you have chasing objects which</span> <span data-start="486" data-end="487.23">are really complicated because they're</span> <span data-start="487.23" data-end="488.7">nested and they have different data</span> <span data-start="488.7" data-end="490.59">structures in the marais dates whatnot</span> <span data-start="490.59" data-end="491.129">so</span> <span data-start="491.129" data-end="492.3">you don't actually end up with an</span> <span data-start="492.3" data-end="494.52">exponential explosion the end up with a</span> <span data-start="494.52" data-end="496.499">combinatorial one and if your math geek</span> <span data-start="496.499" data-end="498.239">you know that's one of those curves that</span> <span data-start="498.239" data-end="500.249">you kind of run straight into there's no</span> <span data-start="500.249" data-end="501.989">way to write enough tests for even a</span> <span data-start="501.989" data-end="503.759">simple program you'll need millions of</span> <span data-start="503.759" data-end="507.33">tests so how to test a synchronous code</span> <span data-start="507.33" data-end="509.369">as the answer is not really difficult</span> <span data-start="509.369" data-end="511.379">it's really an old answer and the</span> <span data-start="511.379" data-end="515.31">answers make it synchronous I'll get to</span> <span data-start="515.31" data-end="518.61">what that means in a second but we did</span> <span data-start="518.61" data-end="520.74">it at Prince loaded and we released</span> <span data-start="520.74" data-end="523.019">version 2 which was a lot nicer kind of</span> <span data-start="523.019" data-end="523.979">like you see in the picture with a</span> <span data-start="523.979" data-end="526.11">unique room well almost we have still</span> <span data-start="526.11" data-end="528.269">problems but it's much much better than</span> <span data-start="528.269" data-end="530.79">worse before we now have processed many</span> <span data-start="530.79" data-end="532.529">terabytes of data we have really low</span> <span data-start="532.529" data-end="534.81">buck raid I think the amount of box we</span> <span data-start="534.81" data-end="537.24">had in productions that affected users</span> <span data-start="537.24" data-end="539.339">is less than 10 and of those ten maybe</span> <span data-start="539.339" data-end="541.319">eight have been boxed where we wrote the</span> <span data-start="541.319" data-end="542.91">tests that actually specified the wrong</span> <span data-start="542.91" data-end="545.55">behavior there's not much you can do and</span> <span data-start="545.55" data-end="548.25">it's pretty clean code base or since we</span> <span data-start="548.25" data-end="550.38">want to refactor but we have close to</span> <span data-start="550.38" data-end="553.11">ninety nine percent test coverage so how</span> <span data-start="553.11" data-end="555.269">does it happen or how do you micro test</span> <span data-start="555.269" data-end="557.43">code well what I meant when I was saying</span> <span data-start="557.43" data-end="559.589">you need to make the code testing</span> <span data-start="559.589" data-end="561.209">synchronous with what I really was</span> <span data-start="561.209" data-end="563.339">saying is you have to unit test unit</span> <span data-start="563.339" data-end="565.47">testing means no io takes place you have</span> <span data-start="565.47" data-end="567.689">to inject all the stuffs that would</span> <span data-start="567.689" data-end="569.31">perform I oh you have to inject test</span> <span data-start="569.31" data-end="571.829">apples for that and that way you never</span> <span data-start="571.829" data-end="573.12">have such callback hell because</span> <span data-start="573.12" data-end="575.13">everything you're going to call is going</span> <span data-start="575.13" data-end="576.99">to be synchronous and if not well you</span> <span data-start="576.99" data-end="579.42">need to do more stopping and mocking so</span> <span data-start="579.42" data-end="582">how can you do that well rule number one</span> <span data-start="582" data-end="584.16">as I said no I oh that's how you get</span> <span data-start="584.16" data-end="585.72">there you start out when you load your</span> <span data-start="585.72" data-end="587.399">modules you make sure that nothing ever</span> <span data-start="587.399" data-end="590.13">does I oh and your tests rule number two</span> <span data-start="590.13" data-end="591.689">is that's optional depending on what you</span> <span data-start="591.689" data-end="593.13">want to test how you want to do it but</span> <span data-start="593.13" data-end="594.63">test-driven development really really</span> <span data-start="594.63" data-end="597.93">helps writes a test first if you can if</span> <span data-start="597.93" data-end="599.16">you have a piece of software that you</span> <span data-start="599.16" data-end="600.959">need to get and later on you can always</span> <span data-start="600.959" data-end="602.88">add a test for that late for that later</span> <span data-start="602.88" data-end="606.48">but TDD is much preferable the last part</span> <span data-start="606.48" data-end="608.49">is discipline I will not kid anybody</span> <span data-start="608.49" data-end="610.139">writing tests forever you seeing a line</span> <span data-start="610.139" data-end="611.97">of your code it's a pain in the</span> <span data-start="611.97" data-end="613.24">ass</span> <span data-start="613.24" data-end="619.089">it is I mean anybody who tells you it</span> <span data-start="619.089" data-end="620.649">kind of gets easier with time and it</span> <span data-start="620.649" data-end="623.14">comes really fun there hasn't really</span> <span data-start="623.14" data-end="625.81">turned that way for me I mean it you see</span> <span data-start="625.81" data-end="627.19">the results if you like what you get</span> <span data-start="627.19" data-end="628.899">there so you keep doing it but it's</span> <span data-start="628.899" data-end="631.81">really hurdle to do a big project from</span> <span data-start="631.81" data-end="633.67">scratch and write tests for everything</span> <span data-start="633.67" data-end="636.88">but I think the benefits of it kind of</span> <span data-start="636.88" data-end="640.63">outweigh the disadvantages so there's</span> <span data-start="640.63" data-end="642.51">still one problem what libraries to use</span> <span data-start="642.51" data-end="644.62">what do you lie breeze do you guys use</span> <span data-start="644.62" data-end="649.26">for testing right now anybody using bout</span> <span data-start="649.26" data-end="651.82">anybody doing like real unit testing</span> <span data-start="651.82" data-end="656.95">without io with it okay few people other</span> <span data-start="656.95" data-end="658.63">test libraries to the public expresso</span> <span data-start="658.63" data-end="662.44">maybe few people on expressive maybe</span> <span data-start="662.44" data-end="666.25">more general who's testing at all who</span> <span data-start="666.25" data-end="669.79">who's happy was there testing a few</span> <span data-start="669.79" data-end="671.17">people I need to talk to you guys later</span> <span data-start="671.17" data-end="675.37">on to see what you guys I do so my plan</span> <span data-start="675.37" data-end="677.44">for today was to release sweet</span> <span data-start="677.44" data-end="679.45">completely new libraries and I pretty</span> <span data-start="679.45" data-end="680.92">much managed it the fact that my</span> <span data-start="680.92" data-end="682.779">computer was broken the week before I</span> <span data-start="682.779" data-end="684.76">came here and chat leg and partying</span> <span data-start="684.76" data-end="686.74">didn't help but I'm pretty closed it and</span> <span data-start="686.74" data-end="688.45">they already in a state where they can</span> <span data-start="688.45" data-end="691.3">be played with the first library is</span> <span data-start="691.3" data-end="693.88">called node fake and what it does is</span> <span data-start="693.88" data-end="696.13">it's basically a simple mock mocking and</span> <span data-start="696.13" data-end="697.93">stopping library but it doesn't force</span> <span data-start="697.93" data-end="700.87">you into the concepts where you really</span> <span data-start="700.87" data-end="703.24">have to think about defining all the</span> <span data-start="703.24" data-end="705.37">methods of your mock objects beforehand</span> <span data-start="705.37" data-end="707.35">you can simply say I have an object here</span> </p>
<p><span data-start="707.35" data-end="709.27">I expect a method call on that on that</span> <span data-start="709.27" data-end="711.55">object with this signature and then</span> <span data-start="711.55" data-end="713.079">please verify this is happening in my</span> <span data-start="713.079" data-end="715.66">tests and on the other hand you can also</span> <span data-start="715.66" data-end="719.44">do as a kind of stopping approach where</span> <span data-start="719.44" data-end="721.3">you just inject a value but you don't</span> <span data-start="721.3" data-end="723.73">care return value but you don't care if</span> <span data-start="723.73" data-end="726.459">the function is ever executed or you can</span> <span data-start="726.459" data-end="729.88">as well verify state after the fact so</span> <span data-start="729.88" data-end="731.11">you can going to go for the market</span> <span data-start="731.11" data-end="733.93">approach of testing behavior or you can</span> <span data-start="733.93" data-end="738.01">go for the state association approach</span> <span data-start="738.01" data-end="742.18">and to wrap this thing up I wrote</span> <span data-start="742.18" data-end="743.8">another library called node micro test</span> <span data-start="743.8" data-end="746.05">which i will try to life them out here</span> <span data-start="746.05" data-end="746.41">but</span> <span data-start="746.41" data-end="747.759">you guys know how that always goes</span> <span data-start="747.759" data-end="749.17">something goes wrong but you'll get a</span> <span data-start="749.17" data-end="752.199">good laugh and what's this library does</span> <span data-start="752.199" data-end="754.93">it kind of helps with the discipline</span> <span data-start="754.93" data-end="757.42">part of performing no I Oh in your tests</span> <span data-start="757.42" data-end="759.97">because what it does it loads your test</span> <span data-start="759.97" data-end="763.18">faults in a separate v8 context so the</span> <span data-start="763.18" data-end="765.16">global object is completely free of any</span> <span data-start="765.16" data-end="767.199">note libraries you don't have a require</span> <span data-start="767.199" data-end="769.42">call you don't have a process object you</span> <span data-start="769.42" data-end="771.069">have nothing in there I doin checked a</span> <span data-start="771.069" data-end="772.18">few things that are just little</span> <span data-start="772.18" data-end="775">convenient but you have no way to get IO</span> <span data-start="775" data-end="777.579">down in there unless you kind of hack</span> <span data-start="777.579" data-end="779.199">around the system which which you</span> <span data-start="779.199" data-end="780.79">shouldn't do maybe there's valid use</span> <span data-start="780.79" data-end="784.389">cases what it also has it has no fake as</span> <span data-start="784.389" data-end="787">a mixin so the message i was talking</span> <span data-start="787" data-end="789.25">about on the in the fake library you get</span> <span data-start="789.25" data-end="793.48">on the same class object and i also have</span> <span data-start="793.48" data-end="796.899">a very basic test described framework in</span> <span data-start="796.899" data-end="799.42">there that if you're testing a little</span> <span data-start="799.42" data-end="802.06">structure i might separate that out</span> <span data-start="802.06" data-end="803.8">because everybody's kind of crazy but</span> <span data-start="803.8" data-end="805.779">how they want their color coded output</span> <span data-start="805.779" data-end="807.459">to look and all that stuff that i didn't</span> <span data-start="807.459" data-end="809.56">care about when writing this library but</span> <span data-start="809.56" data-end="811.48">it seems in the note community like</span> <span data-start="811.48" data-end="812.769">colors are the coolest thing in the</span> <span data-start="812.769" data-end="814.99">terminal I won't talk you that they're</span> <span data-start="814.99" data-end="817.48">cool but there's other problems to solve</span> <span data-start="817.48" data-end="820.36">first year and their Zilla so the live</span> <span data-start="820.36" data-end="823.079">coding will will start in the second and</span> <span data-start="823.079" data-end="825.399">the third libraries this one's actually</span> <span data-start="825.399" data-end="827.35">working well nice thinks of</span> <span data-start="827.35" data-end="829.209">documentation is also complete it's</span> <span data-start="829.209" data-end="831.37">called note far and it's basically find</span> <span data-start="831.37" data-end="833.92">and run so you give it a directory of</span> <span data-start="833.92" data-end="836.62">files of tests fault it will find some</span> <span data-start="836.62" data-end="838.36">more and execute them in its own note</span> <span data-start="838.36" data-end="839.92">process and kind of give you really</span> <span data-start="839.92" data-end="842.05">useful real-time output show you how</span> <span data-start="842.05" data-end="843.55">long the suit is running it prints it</span> <span data-start="843.55" data-end="845.699">all on one line it will only show you</span> <span data-start="845.699" data-end="847.93">output of your individual tests if one</span> <span data-start="847.93" data-end="849.79">of them failing you can kind of sets of</span> <span data-start="849.79" data-end="851.74">a paucity on that and that's the third</span> <span data-start="851.74" data-end="855.61">library so let's try to yeah do them bad</span> <span data-start="855.61" data-end="861.42">life coding</span> <span data-start="861.43" data-end="864.56">so I was trying to find really simple</span> <span data-start="864.56" data-end="865.85">programs that we could test here without</span> <span data-start="865.85" data-end="868.55">running out of time and this is really</span> <span data-start="868.55" data-end="871.069">cool using that stabilizing a note now</span> <span data-start="871.069" data-end="873.649">called stream pipe who has blamed played</span> <span data-start="873.649" data-end="878.089">with the stream pipe stuff okay cool and</span> <span data-start="878.089" data-end="879.199">so what we're going to do we're going to</span> <span data-start="879.199" data-end="880.97">write a little cat program which</span> <span data-start="880.97" data-end="882.709">basically takes one argument which is</span> <span data-start="882.709" data-end="885.769">another file and then opens a file</span> <span data-start="885.769" data-end="888.259">create read stream on that and then to</span> <span data-start="888.259" data-end="891.47">dust we'd stream pipe and then process</span> <span data-start="891.47" data-end="893.18">that standard out so that's like a few</span> <span data-start="893.18" data-end="894.589">lines of code and we can easily test</span> <span data-start="894.589" data-end="898.04">drive that so since we're doing</span> <span data-start="898.04" data-end="899.449">test-driven development the first thing</span> <span data-start="899.449" data-end="902.329">we're going to add is a test file so</span> <span data-start="902.329" data-end="905.12">we're going to name that test dash cat</span> <span data-start="905.12" data-end="908.509">and we're going to use the micro test</span> <span data-start="908.509" data-end="912.97">library we're going to say test equals</span> <span data-start="912.97" data-end="921.11">require micro test module then we're</span> <span data-start="921.11" data-end="922.399">going to tell it where the module is</span> <span data-start="922.399" data-end="926.689">that we're loading one of the cool</span> <span data-start="926.689" data-end="929.66">things at this point is the way this</span> <span data-start="929.66" data-end="931.699">library works is it can load any chava</span> <span data-start="931.699" data-end="933.86">script file so I'm pretty confident that</span> </p>
<p><span data-start="933.86" data-end="936.11">I can explai turon to actually test</span> <span data-start="936.11" data-end="938.029">browser scripts as well because you get</span> <span data-start="938.029" data-end="939.92">a new v8 context you can pre-fill the</span> <span data-start="939.92" data-end="941.42">global object in that so it's pretty</span> <span data-start="941.42" data-end="943.899">easy to say do the same kind of testing</span> <span data-start="943.899" data-end="947.66">with the same library and another thing</span> <span data-start="947.66" data-end="949.31">that's good as since your unit testing</span> <span data-start="949.31" data-end="950.689">here you don't actually care about the</span> <span data-start="950.689" data-end="952.31">browser behavior so the fact that this</span> <span data-start="952.31" data-end="954.019">will probably be limited to running a</span> <span data-start="954.019" data-end="955.819">node is exactly what you want here would</span> <span data-start="955.819" data-end="957.139">you want to do browser test and use</span> <span data-start="957.139" data-end="962.28">selenium or something more higher level</span> <span data-start="962.29" data-end="965.209">so we should already have a failing test</span> <span data-start="965.209" data-end="967.88">here because I haven't created saket j/s</span> <span data-start="967.88" data-end="970.55">file so yeah right here it says file not</span> <span data-start="970.55" data-end="974.36">found so yeah that's readable so the</span> <span data-start="974.36" data-end="976.339">first thing we need to do for test room</span> <span data-start="976.339" data-end="978.019">development does make a test fail we did</span> <span data-start="978.019" data-end="983.12">said and now we have to make it pass by</span> <span data-start="983.12" data-end="985.79">creating a CAD file so</span> <span data-start="985.79" data-end="988.13">close this little window so when we</span> <span data-start="988.13" data-end="990.02">execute the test now it's passing so</span> <span data-start="990.02" data-end="993.98">it's verifying our test is there the</span> <span data-start="993.98" data-end="996.86">next thing we want to do is we probably</span> <span data-start="996.86" data-end="999.86">want to include CFS module because we're</span> <span data-start="999.86" data-end="1001.81">going to need that for the read scream</span> <span data-start="1001.81" data-end="1005.16">so we're going to say our test requires</span> </p>
<p><span data-start="1005.16" data-end="1009.58">CFS module and to make this test fail we</span> <span data-start="1009.58" data-end="1011.05">have to do one more step we're going to</span> <span data-start="1011.05" data-end="1016.09">have to say our our cat module is</span> <span data-start="1016.09" data-end="1017.89">created by compiling this test and</span> <span data-start="1017.89" data-end="1019.08">what's this will do it will actually</span> <span data-start="1019.08" data-end="1021.88">load the source code run it in a new v8</span> <span data-start="1021.88" data-end="1023.95">context and if use a marshal exports</span> <span data-start="1023.95" data-end="1026.08">back and like creating this module that</span> <span data-start="1026.08" data-end="1028.03">exports object and injecting that that's</span> <span data-start="1028.03" data-end="1030.13">as far as I go in terms of mirroring the</span> <span data-start="1030.13" data-end="1031.6">node API few other things like</span> <span data-start="1031.6" data-end="1033.37">underscore file name and your name but</span> <span data-start="1033.37" data-end="1036.49">not much fluff beyond that so if we</span> <span data-start="1036.49" data-end="1041.29">execute that it's going to tell us this</span> <span data-start="1041.29" data-end="1042.97">calling off the screen I'll have to</span> <span data-start="1042.97" data-end="1049">switch to terminal for that</span> <span data-start="1049.01" data-end="1057.35">ok I guess that means bigger</span> <span data-start="1057.36" data-end="1061.77">okay module test kit has no method</span> <span data-start="1061.77" data-end="1066.48">require Oh requires this a functioning</span> <span data-start="1066.48" data-end="1069.45">here that's why it didn't work so what</span> <span data-start="1069.45" data-end="1072.059">it now says it gives us a expectation</span> <span data-start="1072.059" data-end="1074.28">that has failed it says I was expecting</span> <span data-start="1074.28" data-end="1076.14">a different call i was expecting require</span> </p>
<p><span data-start="1076.14" data-end="1078.299">FS to be called in your file but instead</span> <span data-start="1078.299" data-end="1080.34">module that verify was called which is</span> <span data-start="1080.34" data-end="1082.799">called when you call compile it verifies</span> <span data-start="1082.799" data-end="1084.36">that all expectations that have been set</span> <span data-start="1084.36" data-end="1086.64">up until that point are met and so it's</span> <span data-start="1086.64" data-end="1088.38">telling us what to do includes this</span> <span data-start="1088.38" data-end="1092.85">require FS module so that's what we're</span> <span data-start="1092.85" data-end="1094.77">going to do we're going to go back to</span> <span data-start="1094.77" data-end="1098.94">our catch ES File we're going to say bar</span> <span data-start="1098.94" data-end="1104.429">F s equals require FS and that should</span> <span data-start="1104.429" data-end="1108.09">makes a test happy ok so the next thing</span> <span data-start="1108.09" data-end="1111.809">we want to do is we want to assert that</span> <span data-start="1111.809" data-end="1114.809">on the FS object we call a create read</span> <span data-start="1114.809" data-end="1117.6">stream so what we're going to do is</span> <span data-start="1117.6" data-end="1120.059">we're going to say test expect and then</span> <span data-start="1120.059" data-end="1124.74">some reference to this module is</span> <span data-start="1124.74" data-end="1127.919">actually on the test object in a in a</span> <span data-start="1127.919" data-end="1129.9">property called required so it's test</span> <span data-start="1129.9" data-end="1133.1">that required FS and we're going to say</span> <span data-start="1133.1" data-end="1141.21">create we'd stream ok now if we execute</span> <span data-start="1141.21" data-end="1145.4">that ok my</span> <span data-start="1145.4" data-end="1150.26">let me do that over here ok so again we</span> <span data-start="1150.26" data-end="1152.87">get failing a sortation here it was</span> <span data-start="1152.87" data-end="1154.64">expecting FS that create read seemed to</span> <span data-start="1154.64" data-end="1156.35">be called its not being called so let's</span> <span data-start="1156.35" data-end="1165.18">fix that ok</span> <span data-start="1165.19" data-end="1170.17">now as the test is passing again so what</span> <span data-start="1170.17" data-end="1171.73">do we want to do next the next thing we</span> <span data-start="1171.73" data-end="1174.25">will probably want to assert is that</span> <span data-start="1174.25" data-end="1177.49">this create read stream call returns our</span> <span data-start="1177.49" data-end="1179.32">injected read stream which is not a real</span> <span data-start="1179.32" data-end="1181.03">one and then we want to make sure that</span> <span data-start="1181.03" data-end="1182.92">it's a pipe message is being called on</span> <span data-start="1182.92" data-end="1186.1">that so what we will do is we're going</span> <span data-start="1186.1" data-end="1187.81">to say we're probably going to name this</span> <span data-start="1187.81" data-end="1189.94">variable file and I use all upper case</span> <span data-start="1189.94" data-end="1192.52">for my test variables just to</span> <span data-start="1192.52" data-end="1194.32">differentiate stuff I'm you're serving</span> <span data-start="1194.32" data-end="1196.66">against from the other stuff it's a less</span> <span data-start="1196.66" data-end="1199">annoying form of duplications and adding</span> <span data-start="1199" data-end="1201.28">like a prefix or suffix to them and it</span> <span data-start="1201.28" data-end="1202.87">really helps because sometimes we</span> <span data-start="1202.87" data-end="1205.06">actually also get variables out of the</span> <span data-start="1205.06" data-end="1206.71">test and you use those with underscore</span> <span data-start="1206.71" data-end="1207.82">and they asked the same parameter</span> <span data-start="1207.82" data-end="1211.09">signatures so what we're going to do</span> <span data-start="1211.09" data-end="1214.27">here as a actually the underlying fake</span> <span data-start="1214.27" data-end="1218.59">library includes a little semantic sugar</span> <span data-start="1218.59" data-end="1220.87">that lets you create a test object what</span> <span data-start="1220.87" data-end="1222.4">this really is it's just an object and</span> <span data-start="1222.4" data-end="1224.41">if it failed since I'm a certain it's</span> <span data-start="1224.41" data-end="1226.24">going to give you this name again and so</span> <span data-start="1226.24" data-end="1228.19">you have a very clear idea of this is a</span> <span data-start="1228.19" data-end="1230.53">test variable and since you say object</span> <span data-start="1230.53" data-end="1233.44">you could probably care about reference</span> <span data-start="1233.44" data-end="1237.7">to it you don't care about the value so</span> <span data-start="1237.7" data-end="1239.5">what we need to do now is we need to</span> <span data-start="1239.5" data-end="1242.98">return that file object here so we can</span> <span data-start="1242.98" data-end="1247.87">do and return the file you wow that's</span> <span data-start="1247.87" data-end="1252.64">crazy let's not do that again so what's</span> <span data-start="1252.64" data-end="1254.56">this will do it would we return the file</span> <span data-start="1254.56" data-end="1258.07">this should not fail the test yet yep it</span> <span data-start="1258.07" data-end="1260.05">doesn't because we're not really doing</span> <span data-start="1260.05" data-end="1263.29">anything with a file object yet at this</span> <span data-start="1263.29" data-end="1264.91">point it might also be worse knowing</span> <span data-start="1264.91" data-end="1266.83">that there's shortcuts because you're</span> <span data-start="1266.83" data-end="1269.08">going to write this stuff a lot so what</span> <span data-start="1269.08" data-end="1270.16">you could have also done at this point</span> <span data-start="1270.16" data-end="1275.35">is to put put set and third parameter in</span> <span data-start="1275.35" data-end="1277.78">an array of all the arguments it's</span> <span data-start="1277.78" data-end="1279.4">expecting that's kind of semantic</span> <span data-start="1279.4" data-end="1281.89">shortcut for that but we'll go for</span> <span data-start="1281.89" data-end="1285.46">readability here so what we did not want</span> <span data-start="1285.46" data-end="1287.41">to do so we want to expect the pipe call</span> <span data-start="1287.41" data-end="1291.09">so we're going to say a test expect file</span> <span data-start="1291.09" data-end="1294.149">pipe</span> <span data-start="1294.159" data-end="1297.559">okay and let me do that in the other</span> <span data-start="1297.559" data-end="1300.919">window again so yeah it's saying I was</span> <span data-start="1300.919" data-end="1302.57">expecting a different call i was</span> <span data-start="1302.57" data-end="1305.629">expecting pipe but it didn't happen so</span> <span data-start="1305.629" data-end="1316.59">let's fix it</span> <span data-start="1316.6" data-end="1319.27">okay we're not really sure where to pipe</span> <span data-start="1319.27" data-end="1323.41">yet so let's not do that that makes the</span> <span data-start="1323.41" data-end="1325.6">test pass for once and now what we want</span> <span data-start="1325.6" data-end="1327.1">to do is we want to pipe to process</span> <span data-start="1327.1" data-end="1329.38">standard output so what we need to do is</span> <span data-start="1329.38" data-end="1331.54">we kind of need to create our own fake</span> <span data-start="1331.54" data-end="1334.33">process object this time I'm actually</span> <span data-start="1334.33" data-end="1336.15">going to just use a plain literal</span> <span data-start="1336.15" data-end="1338.17">because it's a little easier for what</span> <span data-start="1338.17" data-end="1341.41">we're doing here what we want to do is</span> <span data-start="1341.41" data-end="1343.66">we want to have the test object called</span> <span data-start="1343.66" data-end="1353.62">process standard out on this and we need</span> <span data-start="1353.62" data-end="1356.17">to tell our tests to use this object so</span> <span data-start="1356.17" data-end="1357.82">another way to inject it is we can</span> <span data-start="1357.82" data-end="1359.2">actually inject into the global object</span> <span data-start="1359.2" data-end="1361.9">of our sandbox so we're going to do test</span> <span data-start="1361.9" data-end="1368.07">context that process equals process and</span> <span data-start="1368.07" data-end="1371.86">now we can ask that our parameter to</span> <span data-start="1371.86" data-end="1374.37">pipe is actually process standard out</span> <span data-start="1374.37" data-end="1378.4">i'm using the long form here again with</span> <span data-start="1378.4" data-end="1387.75">arcs and process then it out</span> <span data-start="1387.76" data-end="1390.07">okay now it says unexpected argument</span> <span data-start="1390.07" data-end="1392.2">count it was expecting one occupant it</span> <span data-start="1392.2" data-end="1394.36">supplied function it gets 0 what's also</span> <span data-start="1394.36" data-end="1397">kind of nice it it tells us whereas the</span> <span data-start="1397" data-end="1398.56">expectation was set up that tells us in</span> <span data-start="1398.56" data-end="1400.42">our test cases worst line 18 so that</span> <span data-start="1400.42" data-end="1401.68">kind of makes it really fast to jump</span> <span data-start="1401.68" data-end="1405.42">back to where you need to fix things and</span> <span data-start="1405.42" data-end="1407.98">now we're going to due process standard</span> <span data-start="1407.98" data-end="1417.69">out oops</span> <span data-start="1417.7" data-end="1419.86">oh this didn't work i need to uppercase</span> <span data-start="1419.86" data-end="1425.38">that sorry okay if we run the two test</span> <span data-start="1425.38" data-end="1427.269">passes again that's pretty much almost</span> <span data-start="1427.269" data-end="1429.37">the whole cat program it's the only</span> <span data-start="1429.37" data-end="1432.13">thing we didn't implement was telling</span> <span data-start="1432.13" data-end="1434.049">what file to actually open on the weak</span> <span data-start="1434.049" data-end="1437.23">stream what we really want to do is we</span> <span data-start="1437.23" data-end="1440.26">want process och v2 because that's where</span> <span data-start="1440.26" data-end="1442.929">node has a first parameter we pass into</span> <span data-start="1442.929" data-end="1444.82">it so let's do that real quick we need</span> <span data-start="1444.82" data-end="1448.99">to create a fake v object here the first</span> <span data-start="1448.99" data-end="1450.429">two parameters don't matter so we're</span> <span data-start="1450.429" data-end="1454.21">going to make them know and yeah for the</span> <span data-start="1454.21" data-end="1457.389">third one where we're gets just going to</span> <span data-start="1457.389" data-end="1464.11">say file duchess or something so we go</span> <span data-start="1464.11" data-end="1466.45">back to the read stream test we add a</span> <span data-start="1466.45" data-end="1473.84">with ox expectation here crosses rb2</span> <span data-start="1473.85" data-end="1477.22">yeah we we get to expect a exception</span> <span data-start="1477.22" data-end="1483.7">again we go back into that we're going</span> <span data-start="1483.7" data-end="1489.149">to fix the test</span> <span data-start="1489.159" data-end="1492.95">okay looks like it ran anybody see</span> <span data-start="1492.95" data-end="1495.109">mistake so far or do you guys think we</span> <span data-start="1495.109" data-end="1497.749">can try running this all right let's try</span> <span data-start="1497.749" data-end="1500.239">running this let's try it out put our</span> </p>
<p><span data-start="1500.239" data-end="1502.97">CAD program ok that worked so we just</span> <span data-start="1502.97" data-end="1506.299">test drove that whole thing seeing I'm</span> <span data-start="1506.299" data-end="1508.07">running out of time shortly so I'll skip</span> <span data-start="1508.07" data-end="1509.57">ahead to the other slides there's a lot</span> <span data-start="1509.57" data-end="1511.46">of stuff in the API you can there's a</span> <span data-start="1511.46" data-end="1513.139">lot of ways you can verify this behavior</span> <span data-start="1513.139" data-end="1516.109">it has excellent support for also</span> <span data-start="1516.109" data-end="1518.179">setting expectations again classes being</span> <span data-start="1518.179" data-end="1520.009">called with a new operator and checking</span> <span data-start="1520.009" data-end="1522.499">you and stuffs there but there's lots of</span> <span data-start="1522.499" data-end="1525.289">stuff in there let me try to find my</span> <span data-start="1525.289" data-end="1528.499">remaining slides yeah so one thing</span> <span data-start="1528.499" data-end="1530.21">you're probably asking well those kind</span> <span data-start="1530.21" data-end="1531.409">of looks like a lot of code for very</span> <span data-start="1531.409" data-end="1534.549">little behavior well that's the case and</span> </p>
<p><span data-start="1534.549" data-end="1539.179">I'm gonna lie but let's look at what</span> <span data-start="1539.179" data-end="1541.609">that actually means I trans loaded so we</span> <span data-start="1541.609" data-end="1543.08">have to around six thousand lines of</span> <span data-start="1543.08" data-end="1545.119">code of library stuff there's a lot more</span> <span data-start="1545.119" data-end="1547.789">dependencies a lot of stuff rewrote but</span> <span data-start="1547.789" data-end="1548.96">we kind of have a lot of test code for</span> <span data-start="1548.96" data-end="1550.19">that we have twelve thousand lines of</span> <span data-start="1550.19" data-end="1553.639">code just testing the behavior we have a</span> <span data-start="1553.639" data-end="1555.499">lot of fixture data server configuration</span> <span data-start="1555.499" data-end="1557.48">to customer websites and dependencies</span> <span data-start="1557.48" data-end="1559.789">but those are not included in this</span> <span data-start="1559.789" data-end="1561.47">amount of test data what's really</span> <span data-start="1561.47" data-end="1563.57">interesting here is to first see that</span> <span data-start="1563.57" data-end="1565.159">measure one to two I think that's too</span> <span data-start="1565.159" data-end="1567.409">high we went a little crazy there but I</span> <span data-start="1567.409" data-end="1569.21">think one to one is what you're going to</span> <span data-start="1569.21" data-end="1570.409">get if you're going to do it seriously</span> <span data-start="1570.409" data-end="1573.889">probably a little higher what also worth</span> <span data-start="1573.889" data-end="1576.139">knowing is as a distribution between</span> <span data-start="1576.139" data-end="1578.96">micro tests and integration tests so</span> <span data-start="1578.96" data-end="1580.999">unit tests that we said I was showing</span> <span data-start="1580.999" data-end="1582.98">how to do we write a lot of cells and</span> <span data-start="1582.98" data-end="1584.48">those are actually we've written huge</span> <span data-start="1584.48" data-end="1586.7">amounts of our programs just that way</span> <span data-start="1586.7" data-end="1588.169">and then we write one integration test</span> <span data-start="1588.169" data-end="1589.7">and kind of works the first time it's</span> <span data-start="1589.7" data-end="1591.44">beautiful to see thousands of lines of</span> <span data-start="1591.44" data-end="1593.48">code coming together like that and so</span> <span data-start="1593.48" data-end="1597.529">the factor we have here is 124 and we</span> <span data-start="1597.529" data-end="1599.779">have a more integration test on trans</span> <span data-start="1599.779" data-end="1601.749">loads and I would like for other stuff</span> <span data-start="1601.749" data-end="1604.009">because we need to do crazy stuff with</span> <span data-start="1604.009" data-end="1607.309">ffmpeg we need to extract some nails</span> <span data-start="1607.309" data-end="1608.899">from the videos we encode and send your</span> <span data-start="1608.899" data-end="1611.779">visual verification against a set of</span> <span data-start="1611.779" data-end="1613.1">fixture data to see if it still works</span> <span data-start="1613.1" data-end="1615.95">ffmpeg is one of the most broken open</span> <span data-start="1615.95" data-end="1617.539">source projects ever I mean it's not</span> <span data-start="1617.539" data-end="1618.93">broken but</span> <span data-start="1618.93" data-end="1621.36">it has a very strange way to interact</span> <span data-start="1621.36" data-end="1622.95">with the community into people using it</span> </p>
<p><span data-start="1622.95" data-end="1624.6">I'm very grateful for their work but</span> <span data-start="1624.6" data-end="1627.99">notice such a nice community in to work</span> <span data-start="1627.99" data-end="1631.26">with and but what becomes even more</span> <span data-start="1631.26" data-end="1633.12">clear here's when you look at knotts the</span> <span data-start="1633.12" data-end="1634.08">amount of code butts amount of</span> <span data-start="1634.08" data-end="1636.03">hesitations see it already looks pretty</span> <span data-start="1636.03" data-end="1637.5">good we probably have too much</span> <span data-start="1637.5" data-end="1639.48">duplication our integration tests that's</span> <span data-start="1639.48" data-end="1644.34">what it means we have I don't know 190s</span> </p>
<p><span data-start="1644.34" data-end="1646.71">Ertz on the integration tests in 2300 on</span> <span data-start="1646.71" data-end="1650.46">the micro test and just a reference</span> <span data-start="1650.46" data-end="1652.56">point for something else for library</span> <span data-start="1652.56" data-end="1656.94">code note mysql has a factor of 12 1.35</span> <span data-start="1656.94" data-end="1659.88">for library versus test code I think</span> <span data-start="1659.88" data-end="1661.71">that's much more reasonable and I hope</span> <span data-start="1661.71" data-end="1663.54">to get that even first down to one to</span> <span data-start="1663.54" data-end="1667.89">one with that new micro testing I was</span> <span data-start="1667.89" data-end="1672.09">just showing it has a similar in the</span> <span data-start="1672.09" data-end="1674.99">creation versus micro testing here and</span> <span data-start="1674.99" data-end="1677.97">it's also doing pretty well when you</span> <span data-start="1677.97" data-end="1681.92">look at citations so to finish this up</span> <span data-start="1681.92" data-end="1685.17">yes this is a lot of code and it kind of</span> <span data-start="1685.17" data-end="1687.48">feels like it slows you down but one</span> <span data-start="1687.48" data-end="1689.31">really good quote on the subject us why</span> <span data-start="1689.31" data-end="1691.38">do you have breaks in a car they're not</span> <span data-start="1691.38" data-end="1693">there to go slower they actually there</span> <span data-start="1693" data-end="1694.77">to cook faster because you can speed up</span> <span data-start="1694.77" data-end="1696.81">two curves and hits a break and slim</span> <span data-start="1696.81" data-end="1698.52">around it and that's what we really see</span> <span data-start="1698.52" data-end="1701.1">with this it costs a lot of it costs a</span> <span data-start="1701.1" data-end="1702.36">little bit more time to develop new</span> <span data-start="1702.36" data-end="1704.01">features but if we hunt bucks in</span> <span data-start="1704.01" data-end="1706.05">production like someone neta sonic we</span> <span data-start="1706.05" data-end="1707.58">can actually test a lot of things on a</span> <span data-start="1707.58" data-end="1709.59">very low level like what happens if an</span> <span data-start="1709.59" data-end="1711.06">error event is being emitted here are we</span> <span data-start="1711.06" data-end="1713.04">handling that and we we are able to</span> <span data-start="1713.04" data-end="1715.23">usually pinpoint sources of error very</span> <span data-start="1715.23" data-end="1717.15">quickly write a test for it on the micro</span> <span data-start="1717.15" data-end="1718.95">level sometimes also on send equation</span> <span data-start="1718.95" data-end="1721.08">level depending on how easy it is to get</span> <span data-start="1721.08" data-end="1722.82">scissors past and then we sometimes</span> <span data-start="1722.82" data-end="1724.26">throws into creation test that shows the</span> <span data-start="1724.26" data-end="1725.91">back away because the micro test is</span> <span data-start="1725.91" data-end="1728.97">defining the behavior of our program so</span> <span data-start="1728.97" data-end="1730.65">the too long didn't read don't use</span> <span data-start="1730.65" data-end="1732.09">integration test to show the basic</span> <span data-start="1732.09" data-end="1733.65">correctness of your software and write</span> <span data-start="1733.65" data-end="1737.88">more micro test I don't know if I have</span> <span data-start="1737.88" data-end="1739.14">time for questions we can do one</span> <span data-start="1739.14" data-end="1740.669">question while we're setting up so</span> <span data-start="1740.669" data-end="1742.289">oh one or two questions so if you have</span> <span data-start="1742.289" data-end="1745.039">questions ask them quickly questions</span> <span data-start="1745.039" data-end="1749.549">anybody this whole I hear micro test</span> <span data-start="1749.549" data-end="1751.289">sent me down the dependency injection</span> <span data-start="1751.289" data-end="1754.71">sort of daiquiri and yes their approach</span> <span data-start="1754.71" data-end="1757.679">is there a frame or packaged drinking</span> <span data-start="1757.679" data-end="1762.119">use for di yes basically you don't need</span> <span data-start="1762.119" data-end="1763.799">to do dependency injection because you</span> <span data-start="1763.799" data-end="1766.649">can inject a reference to the class</span> <span data-start="1766.649" data-end="1768.45">that's being required you require</span> <span data-start="1768.45" data-end="1770.07">another class you can inject your own</span> <span data-start="1770.07" data-end="1771.659">constructor for that and then you can</span> <span data-start="1771.659" data-end="1773.549">actually say test expect it's a</span> <span data-start="1773.549" data-end="1774.869">reference to your test double</span> <span data-start="1774.869" data-end="1776.759">constructor and so you don't need to</span> <span data-start="1776.759" data-end="1778.889">change your code to test it that was one</span> <span data-start="1778.889" data-end="1780.809">of my design goals for this don't write</span> <span data-start="1780.809" data-end="1782.639">your code for tests right in for your</span> <span data-start="1782.639" data-end="1784.44">human readability and then figure out a</span> <span data-start="1784.44" data-end="1789.45">way to test it okay thank you sorry for</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
