<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>JF-PDZFt9OU</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/JF-PDZFt9OU?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="9.26" data-end="11.79">my name is John Schultz and as I said</span> <span data-start="11.79" data-end="13.849">I'm here to speak about canvas in nodejs</span> <span data-start="13.849" data-end="16.02">real briefly about me currently at</span> <span data-start="16.02" data-end="18.199">include in DC web consultant company</span> <span data-start="18.199" data-end="20.189">design firm that do mostly web</span> <span data-start="20.189" data-end="21.93">consulting before that I was at Omni TI</span> <span data-start="21.93" data-end="24.359">which was also another web consulting</span> <span data-start="24.359" data-end="28.019">company while it on the API we released</span> <span data-start="28.019" data-end="29.67">a monitoring service called Sur CONUS</span> <span data-start="29.67" data-end="30.75">and I did a lot of work with charting</span> <span data-start="30.75" data-end="32.369">there that's part of where some of this</span> <span data-start="32.369" data-end="34.11">stuff came from and you can find on</span> </p>
<p><span data-start="34.11" data-end="38.55">Twitter at JFS III so why are we doing</span> <span data-start="38.55" data-end="42.12">canvas um no it's to replace either this</span> <span data-start="42.12" data-end="43.86">script tag which is loading to library</span> <span data-start="43.86" data-end="47.629">and then instantiating it or an iframe</span> <span data-start="47.629" data-end="51.469">with image source equals and that</span> <span data-start="51.469" data-end="54">stilled only get you to but why are you</span> <span data-start="54" data-end="56.19">doing canvas a node and the best ways</span> <span data-start="56.19" data-end="58.23">give you a use case so we had made some</span> </p>
<p><span data-start="58.23" data-end="60.149">Kansas based charts for customer and</span> <span data-start="60.149" data-end="61.98">they really liked them and they wanted</span> <span data-start="61.98" data-end="64.14">to put the charts in their wiki canvas</span> <span data-start="64.14" data-end="65.85">based charts need a browser or a</span> <span data-start="65.85" data-end="67.92">document and iframes a good way to do</span> <span data-start="67.92" data-end="69.99">that and just you would link to whatever</span> <span data-start="69.99" data-end="71.67">normal content is and put you know</span> <span data-start="71.67" data-end="73.26">chrome equals false or something along</span> <span data-start="73.26" data-end="75.659">those lines unfriend problem is wiki's</span> <span data-start="75.659" data-end="80.22">don't allow my friends or most don't so</span> <span data-start="80.22" data-end="81.54">I really really want to make this work I</span> <span data-start="81.54" data-end="83.31">mean it seemed like a completely valid</span> <span data-start="83.31" data-end="85.17">use case to take these charts we had</span> <span data-start="85.17" data-end="87.299">worked on and get him to work at their</span> <span data-start="87.299" data-end="89.22">company then it was a compliment they</span> <span data-start="89.22" data-end="90.54">liked our stuff enough that they wanted</span> <span data-start="90.54" data-end="92.189">to share these items within the company</span> <span data-start="92.189" data-end="94.32">so it did a little looking and I did</span> <span data-start="94.32" data-end="96.18">find a project called Rhino canvas but</span> <span data-start="96.18" data-end="98.729">it is it looks dead in the water I</span> <span data-start="98.729" data-end="100.34">haven't seen any activity since I was 6</span> <span data-start="100.34" data-end="103.74">so I made a request on Twitter just some</span> <span data-start="103.74" data-end="104.99">of the people I could think about</span> <span data-start="104.99" data-end="107.189">basically you get what are you talking</span> <span data-start="107.189" data-end="109.14">about its image why are you doing an</span> <span data-start="109.14" data-end="110.64">image on the server or a specific item</span> <span data-start="110.64" data-end="113.579">canvas which is clearly a browser item</span> <span data-start="113.579" data-end="116.369">on the server I did talk to some other</span> <span data-start="116.369" data-end="118.409">people and Kiro was mentioned akairo</span> <span data-start="118.409" data-end="122.82">does SVG p and june PDF generation does</span> <span data-start="122.82" data-end="125.369">a lot of stuff it's got hooks for PHP</span> </p>
<p><span data-start="125.369" data-end="128.67">Perl a whole lot of other languages so I</span> <span data-start="128.67" data-end="132.06">thought that if I had to wherewithal</span> <span data-start="132.06" data-end="135.33">I could just reimplemented see but that</span> <span data-start="135.33" data-end="138.27">wasn't the most exciting thing to me the</span> <span data-start="138.27" data-end="140.099">good news is I'm serious three days</span> <span data-start="140.099" data-end="141.54">after I figured out that I would use</span> <span data-start="141.54" data-end="144.15">canvas I mean uh Cairo TJ has some post</span> <span data-start="144.15" data-end="146.61">about how he's almost done with no</span> <span data-start="146.61" data-end="150.18">candles so thankfully a couple weeks</span> <span data-start="150.18" data-end="151.98">after that learn Bruce and TJ released</span> <span data-start="151.98" data-end="155.099">note canvas and does exactly what I was</span> <span data-start="155.099" data-end="157.86">trying to do and it's canvas API</span> <span data-start="157.86" data-end="159.48">compatible so you get all the stuff you</span> <span data-start="159.48" data-end="162.15">expect you get move to line to stroke</span> </p>
<p><span data-start="162.15" data-end="164.58">Phil Phil rectangle everything you</span> <span data-start="164.58" data-end="167.13">expect out of a canvas instance and it</span> <span data-start="167.13" data-end="169.14">gives you a couple other items which to</span> <span data-start="169.14" data-end="170.28">which are really poor one of which is</span> <span data-start="170.28" data-end="172.53">really important to me create PNG stream</span> <span data-start="172.53" data-end="176.19">and to buffer so I'm going through a</span> <span data-start="176.19" data-end="178.799">couple examples this example is a little</span> <span data-start="178.799" data-end="180.09">bit trimmed down from the one that's on</span> <span data-start="180.09" data-end="183.06">the new canvas site and notice here I</span> <span data-start="183.06" data-end="184.53">mean I made a note in the comments the</span> <span data-start="184.53" data-end="186.36">only difference between a typical canvas</span> <span data-start="186.36" data-end="189.39">script is that one after acquire canvas</span> <span data-start="189.39" data-end="192.36">and then really char instantiation that</span> <span data-start="192.36" data-end="194.19">instead of saying canvas equals document</span> <span data-start="194.19" data-end="196.079">create new canvas canvas dot height</span> <span data-start="196.079" data-end="197.85">equals canvas now with equals you just</span> <span data-start="197.85" data-end="198.81">passed the height and width and the</span> <span data-start="198.81" data-end="201.359">constructor from there on you right</span> <span data-start="201.359" data-end="203.459">create canvas like you normally would</span> <span data-start="203.459" data-end="205.41">here I'm doing to data URL which is</span> <span data-start="205.41" data-end="208.59">standard method and that gives you you</span> <span data-start="208.59" data-end="210.39">know big data your I which we produce</span> <span data-start="210.39" data-end="216.12">woot here's gradients and again the only</span> <span data-start="216.12" data-end="218.1">two items that are the change here</span> <span data-start="218.1" data-end="221.16">require canvas and new canvas everything</span> <span data-start="221.16" data-end="223.889">else is the same this is the image that</span> <span data-start="223.889" data-end="229.01">it generates</span> <span data-start="229.02" data-end="231.75">oh yeah I was doing some editing yeah</span> <span data-start="231.75" data-end="233.88">it's not that magical I was changing the</span> <span data-start="233.88" data-end="235.29">plane around sighs sorry about that yeah</span> <span data-start="235.29" data-end="239.07">it's definitely type of a graph or</span> <span data-start="239.07" data-end="242.58">whatever a sparkline similar item this</span> <span data-start="242.58" data-end="244.11">is all what you would do in canvas that</span> <span data-start="244.11" data-end="248.13">you were doing on a client side so that</span> <span data-start="248.13" data-end="250.89">gets me close it means it's possible for</span> <span data-start="250.89" data-end="253.89">me to write canvas and node the real</span> <span data-start="253.89" data-end="256.29">issue is though for me I can't I still</span> <span data-start="256.29" data-end="260.09">can't use flot over on the server side I</span> <span data-start="260.09" data-end="262.89">don't want to spend my time writing a</span> <span data-start="262.89" data-end="264.27">charting library there's already one out</span> <span data-start="264.27" data-end="265.86">there there works in particular the</span> <span data-start="265.86" data-end="267.63">customer liked our graphs we had made</span> <span data-start="267.63" data-end="269.19">some new data visualizations we've done</span> <span data-start="269.19" data-end="271.05">you know customizing of the colors</span> <span data-start="271.05" data-end="272.34">whatever I didn't feel like doing that</span> <span data-start="272.34" data-end="276.45">work again so flot uses jQuery jQuery</span> <span data-start="276.45" data-end="278.43">uses the Dom so you have to find a way</span> <span data-start="278.43" data-end="281.22">to get the Dom onto the server and that</span> <span data-start="281.22" data-end="283.26">thanks to Elijah</span> <span data-start="283.26" data-end="286.5">can be in J's dome as possible Jase Tom</span> <span data-start="286.5" data-end="288">which are fuselages talked this morning</span> <span data-start="288" data-end="290.01">but it's a way to get the Dom it's a</span> <span data-start="290.01" data-end="294">common jazz implementation of the Dom so</span> <span data-start="294" data-end="298.05">why like that would be the Dom or so the</span> <span data-start="298.05" data-end="299.76">way jQuery I'm sorry go ahead</span> <span data-start="299.76" data-end="302.97">so the way within a we run the plot on</span> <span data-start="302.97" data-end="305.76">the server side and we basically go to</span> <span data-start="305.76" data-end="308.34">strapped a couple jQuery functions and</span> <span data-start="308.34" data-end="310.29">then the only problem is that where some</span> <span data-start="310.29" data-end="313.38">reason flawed uses Dom for the labels</span> <span data-start="313.38" data-end="315.21">mm-hmm but there's a project that</span> <span data-start="315.21" data-end="319.83">implements labels in camera correct I'd</span> <span data-start="319.83" data-end="320.94">love to get that actually was talking to</span> </p>
<p><span data-start="320.94" data-end="322.47">TJ about it I was trying to know the</span> <span data-start="322.47" data-end="324.84">project called drawback so what it does</span> <span data-start="324.84" data-end="329.31">is basically be able to share the same</span> <span data-start="329.31" data-end="332.1">code and apply an observer as far as</span> <span data-start="332.1" data-end="333.06">sports actually</span> <span data-start="333.06" data-end="336.96">of my chart and then for the server-side</span> <span data-start="336.96" data-end="338.97">ads hooks so for example if you want to</span> <span data-start="338.97" data-end="341.34">get up great view of the chart it's</span> <span data-start="341.34" data-end="342.75">gonna execute the same code and also</span> <span data-start="342.75" data-end="344.94">load additional plugins server like for</span> <span data-start="344.94" data-end="347.49">example rather than text in the canvas</span> <span data-start="347.49" data-end="348.63">gotcha</span> <span data-start="348.63" data-end="350.79">so we can go into that afterwards but</span> <span data-start="350.79" data-end="351.87">where camera was saying was that they</span> <span data-start="351.87" data-end="353.25">have done some work to make to where you</span> <span data-start="353.25" data-end="355.92">don't even need a s Dom to have jQuery</span> <span data-start="355.92" data-end="357.48">wrong I did like I said I was talking to</span> <span data-start="357.48" data-end="359.13">that TGA about it and I couldn't get a</span> <span data-start="359.13" data-end="360.51">hold of that so I found you'll see in a</span> <span data-start="360.51" data-end="362.1">minute here way that while it does</span> <span data-start="362.1" data-end="363.45">require to loading some additional stuff</span> <span data-start="363.45" data-end="365.07">it was also the minimum amount of work</span> <span data-start="365.07" data-end="369.06">that was required for me so jess tom is</span> <span data-start="369.06" data-end="372.33">incredible and it currently gives you</span> </p>
<p><span data-start="372.33" data-end="376.2">Dom level 1 & 2 browser support and with</span> <span data-start="376.2" data-end="378.3">that Dom I can now get jQuery to run on</span> <span data-start="378.3" data-end="380.97">the server here's an example — the same</span> <span data-start="380.97" data-end="382.98">same thing that a lodger had this</span> <span data-start="382.98" data-end="385.53">morning just get jazz Dom in this</span> <span data-start="385.53" data-end="386.88">particular case you're loading nodejs</span> <span data-start="386.88" data-end="389.28">title work and then going to inject</span> <span data-start="389.28" data-end="391.47">jQuery made a note that that is</span> <span data-start="391.47" data-end="394.38">production jQuery when it's ready their</span> <span data-start="394.38" data-end="396.3">runs jQuery against that content and</span> <span data-start="396.3" data-end="399.3">counts the number of anchors the number</span> <span data-start="399.3" data-end="401.82">of links that are there so you can do</span> <span data-start="401.82" data-end="404.03">screen scraping in this example GS Dom</span> <span data-start="404.03" data-end="406.29">so patching plot was really simple</span> <span data-start="406.29" data-end="408.78">because that canvas API is API</span> <span data-start="408.78" data-end="410.94">compatible all I really had to do in</span> <span data-start="410.94" data-end="412.77">flock was just go to the place where</span> <span data-start="412.77" data-end="415.47">that canvas was created and make a</span> <span data-start="415.47" data-end="417.51">change to it just did a branch and there</span> <span data-start="417.51" data-end="419.76">was one other thing which is that flot</span> <span data-start="419.76" data-end="421.83">in particular wants a width and a height</span> <span data-start="421.83" data-end="424.86">which it grabs from the Dom element so</span> <span data-start="424.86" data-end="426.3">since there wasn't a width and height or</span> <span data-start="426.3" data-end="428.01">jQuery wasn't able to determine those I</span> <span data-start="428.01" data-end="430.53">made it give it the config option of</span> <span data-start="430.53" data-end="432.21">giving it a width and a height so</span> <span data-start="432.21" data-end="434.16">technically I had a couple more lines</span> <span data-start="434.16" data-end="436.02">however that can that's a complaint</span> <span data-start="436.02" data-end="438.24">that's common in fly is that I want to</span> <span data-start="438.24" data-end="440.79">tell you how the dimensions of this</span> <span data-start="440.79" data-end="443.58">image perhaps you've got a div or</span> <span data-start="443.58" data-end="445.14">something that is off screen at the</span> <span data-start="445.14" data-end="447.63">moment so if it's hidden Ischl e slot</span> <span data-start="447.63" data-end="450.03">would see that as 0 0 and wouldn't</span> <span data-start="450.03" data-end="451.59">render it anyway so you can't pre-render</span> <span data-start="451.59" data-end="453.63">so that's something that's coming in a</span> <span data-start="453.63" data-end="456.48">newer version of flawed it's I needed it</span> <span data-start="456.48" data-end="458.01">in particular for this but eventually I</span> <span data-start="458.01" data-end="459.33">mean it's one less item you'd have to</span> <span data-start="459.33" data-end="461.91">patch I do have the patch this is from</span> <span data-start="461.91" data-end="463.43">oh six I've got that</span> <span data-start="463.43" data-end="468.32">was a guest I haven't made those</span> <span data-start="468.32" data-end="470.36">commissioned I did post the the patches</span> <span data-start="470.36" data-end="471.56">of there are available when I worked</span> <span data-start="471.56" data-end="474.02">with them when we did the github Fork</span> <span data-start="474.02" data-end="475.91">so I've been having discussions with me</span> <span data-start="475.91" data-end="476.81">it's not committed yet and that's</span> <span data-start="476.81" data-end="478.27">actually one of the things I'm trying to</span> <span data-start="478.27" data-end="480.95">thought get committed in there so</span> <span data-start="480.95" data-end="482.3">definitely that would be the ideals to</span> <span data-start="482.3" data-end="484.25">not have to patch anything just get a</span> <span data-start="484.25" data-end="485.33">committed because it really it's</span> <span data-start="485.33" data-end="486.92">completely compatible I can run a</span> <span data-start="486.92" data-end="489.47">client-side or server-side it's fine so</span> <span data-start="489.47" data-end="492.89">here's an example so I've got a domain</span> </p>
<p><span data-start="492.89" data-end="495.53">JSP no de which is where I play with</span> <span data-start="495.53" data-end="499.88">node stuff and so this example let's see</span> <span data-start="499.88" data-end="503.84">if I've got it all right so this is</span> <span data-start="503.84" data-end="507.7">basically just taking ajs Dom example</span> <span data-start="507.7" data-end="510.77">and converting it or whatever adding a</span> <span data-start="510.77" data-end="512.75">couple things in so in this example</span> <span data-start="512.75" data-end="516.59">required just aam give it a base Dom to</span> <span data-start="516.59" data-end="519.44">work with again production jQuery code</span> <span data-start="519.44" data-end="522.83">my patched flan and then here's one of</span> <span data-start="522.83" data-end="525.77">the there's two plugins that as Gamera</span> <span data-start="525.77" data-end="527.54">was saying the only real remaining</span> <span data-start="527.54" data-end="529.07">challenge with flawed is that it renders</span> <span data-start="529.07" data-end="532.25">labels in absolutely position divs so</span> <span data-start="532.25" data-end="533.6">they're not a part of the canvas and</span> <span data-start="533.6" data-end="535.73">when you go to do actions like — de -</span> <span data-start="535.73" data-end="537.65">URL or whatever you now don't have them</span> <span data-start="537.65" data-end="540.11">so all you would have is a canvas with</span> <span data-start="540.11" data-end="543.02">lines and fills but nothing to say the</span> <span data-start="543.02" data-end="545.21">current value is 50 or this is</span> <span data-start="545.21" data-end="547.7">pertaining to CPU usage or whatever so</span> <span data-start="547.7" data-end="550.01">there's existing canvas plugins I mean</span> <span data-start="550.01" data-end="552.95">um flop plugins to get text and this is</span> <span data-start="552.95" data-end="555.74">a totally unpatched flat plug-in</span> <span data-start="555.74" data-end="558.41">actually my guess I'll get to it later</span> <span data-start="558.41" data-end="559.82">but that will be going away at the need</span> <span data-start="559.82" data-end="561.65">for that is going away soon and then</span> <span data-start="561.65" data-end="564.44">when it's ready this is just generating</span> <span data-start="564.44" data-end="565.79">data I would have to do this if I were</span> <span data-start="565.79" data-end="567.56">showing you how to use flock just make</span> <span data-start="567.56" data-end="569.45">some random data the only things that</span> <span data-start="569.45" data-end="572.15">are of any real change are the height</span> <span data-start="572.15" data-end="574.99">and width that I mentioned earlier and</span> <span data-start="574.99" data-end="577.94">for that particular plugin it takes a</span> <span data-start="577.94" data-end="581.12">canvas text argument to grid give it</span> <span data-start="581.12" data-end="582.52">some information that out with what the</span> <span data-start="582.52" data-end="586.04">font is to be and then I set clickable</span> <span data-start="586.04" data-end="587.84">and hoverball to false those are getting</span> <span data-start="587.84" data-end="589.64">normal flawed options there's no need to</span> <span data-start="589.64" data-end="591.35">apply any sort of listeners since I'm</span> <span data-start="591.35" data-end="593.42">going to be returning a static image and</span> <span data-start="593.42" data-end="596.15">after that um a couple aliases here just</span> <span data-start="596.15" data-end="596.3">so</span> </p>
<p><span data-start="596.3" data-end="597.92">I don't have to write window dot jQuery</span> <span data-start="597.92" data-end="600.35">or window dot dollar in my code create a</span> <span data-start="600.35" data-end="603.38">sham div this signature right here plot</span> <span data-start="603.38" data-end="606.35">equals plot div data a completely</span> <span data-start="606.35" data-end="609.35">standard flock Hall get canvas there's a</span> <span data-start="609.35" data-end="612.46">normal flop method here I'm getting the</span> <span data-start="612.46" data-end="614.87">node canvas back which has those</span> <span data-start="614.87" data-end="616.67">additional methods I haven't defined</span> <span data-start="616.67" data-end="618.67">where I want to do this output and then</span> <span data-start="618.67" data-end="621.74">you the create a right stream more</span> <span data-start="621.74" data-end="623.84">importantly create a PNG stream and then</span> <span data-start="623.84" data-end="626.48">as it gets data right to that that</span> <span data-start="626.48" data-end="634.1">created jst ang which is back here I</span> <span data-start="634.1" data-end="644">think I can do that's what was actually</span> <span data-start="644" data-end="653.81">being written out so going a little bit</span> <span data-start="653.81" data-end="657.74">deeper I got GS node Jason OD / slot</span> <span data-start="657.74" data-end="659.57">which is just a way again for me to</span> <span data-start="659.57" data-end="662">experiment with stuff I wanted to do in</span> <span data-start="662" data-end="664.49">source equals something and get data</span> <span data-start="664.49" data-end="667.52">back so you can on this particular</span> <span data-start="667.52" data-end="669.92">whatever instance I have I can actually</span> <span data-start="669.92" data-end="671.62">pass parameters in via the query string</span> <span data-start="671.62" data-end="673.67">probably not what you want to do in</span> <span data-start="673.67" data-end="675.47">production but it's possible so in this</span> <span data-start="675.47" data-end="678.38">case I can give it a JSON object or just</span> <span data-start="678.38" data-end="682.24">options or just data so if you give it a</span> <span data-start="682.24" data-end="704.47">list of actions that will give those</span> <span data-start="704.48" data-end="706.92">right have an issue with that</span> <span data-start="706.92" data-end="709.14">occasionally weather I don't get there</span> <span data-start="709.14" data-end="715.8">but that is live data so I do use one</span> </p>
<p><span data-start="715.8" data-end="717.9">Dom in that earlier example I was always</span> <span data-start="717.9" data-end="720.15">doing require setting up an empty Dom</span> <span data-start="720.15" data-end="722.46">writing to it there's really no need to</span> <span data-start="722.46" data-end="726.21">do that so that's a JSON OD slush slots</span> <span data-start="726.21" data-end="727.89">and Express app so what I do is when I</span> <span data-start="727.89" data-end="729.9">create when the server is created I do</span> <span data-start="729.9" data-end="735.28">this real basic script injection where</span> <span data-start="735.29" data-end="738.87">script injection where same things you</span> <span data-start="738.87" data-end="744.21">saw earlier I just load up the patched</span> <span data-start="744.21" data-end="747.45">flock and the text plug-in that I need</span> <span data-start="747.45" data-end="749.13">just to have this there and that does it</span> <span data-start="749.13" data-end="752.22">one time I then assign window doc canvas</span> <span data-start="752.22" data-end="754.77">to that canvas that a new canvas item</span> <span data-start="754.77" data-end="756.93">and same thing I was doing before global</span> <span data-start="756.93" data-end="758.85">that jQuery equals window dollar so I</span> <span data-start="758.85" data-end="760.77">can use those later on in the script so</span> <span data-start="760.77" data-end="762.75">the idea there is that I have one Dom</span> <span data-start="762.75" data-end="765.93">that I think I'd go to next that when</span> </p>
<p><span data-start="765.93" data-end="768">I'm actually writing the image ACK all I</span> <span data-start="768" data-end="771.839">ever do is create a jQuery item and it's</span> <span data-start="771.839" data-end="773.4">always dealing with that one document so</span> <span data-start="773.4" data-end="776.4">I'm not making multiple documents we're</span> <span data-start="776.4" data-end="778.2">making a new one each time because it</span> <span data-start="778.2" data-end="780.06">just seemed wasteful and it also happens</span> <span data-start="780.06" data-end="782.43">to work here so this is render flawed</span> <span data-start="782.43" data-end="784.11">image which is what is used to render</span> <span data-start="784.11" data-end="787.95">that um jsn Odede slash plot I happen to</span> <span data-start="787.95" data-end="789.51">get some data create data like you saw</span> <span data-start="789.51" data-end="790.76">it before I'm just getting rid of that</span> <span data-start="790.76" data-end="793.5">placeholder equals jQuery I don't even</span> <span data-start="793.5" data-end="795.029">actually in this example I don't even</span> <span data-start="795.029" data-end="796.86">throw it a div this seems to be enough</span> <span data-start="796.86" data-end="800.18">to allow it to work again the standard</span> <span data-start="800.18" data-end="804.12">plot or flat call signature no canvas</span> <span data-start="804.12" data-end="805.73">just to remind me that I've got a</span> <span data-start="805.73" data-end="808.68">enhanced API and now I make a two buffer</span> <span data-start="808.68" data-end="810.209">which is what gives you this that binary</span> <span data-start="810.209" data-end="812.61">image and then I just in my response I</span> <span data-start="812.61" data-end="815.16">give that image back and I'm really I</span> <span data-start="815.16" data-end="816.779">haven't done enough testing to determine</span> <span data-start="816.779" data-end="819.18">what effect placeholder has but I</span> <span data-start="819.18" data-end="820.29">actually decided just to delete</span> <span data-start="820.29" data-end="822.63">placeholder because it couldn't hurt I</span> <span data-start="822.63" data-end="824.31">don't know it's working it might clean</span> <span data-start="824.31" data-end="825.36">memory up for me</span> </p>
<p><span data-start="825.36" data-end="826.769">I haven't been able to put this thing</span> <span data-start="826.769" data-end="828.089">under enough load to determine if that</span> <span data-start="828.089" data-end="830.089">has any effect or not</span> <span data-start="830.089" data-end="836.76">so wrapping up advantages big thing</span> <span data-start="836.76" data-end="838.95">image works everywhere explaining we had</span> <span data-start="838.95" data-end="840.63">people that wanted a wiki I couldn't do</span> <span data-start="840.63" data-end="843.589">an iframe on that you've got older</span> <span data-start="843.589" data-end="845.73">browsers or even current browsers that</span> <span data-start="845.73" data-end="848.13">don't support canvas Mobile is another</span> <span data-start="848.13" data-end="851.04">one so or if it's an either a older or</span> <span data-start="851.04" data-end="852.51">just lower powered I guess through age</span> <span data-start="852.51" data-end="856.07">or form factor they might not have</span> <span data-start="856.07" data-end="858.36">support for canvas everything's got</span> <span data-start="858.36" data-end="860.1">support for image most things you care</span> <span data-start="860.1" data-end="862.589">about code reuse and this was key with</span> <span data-start="862.589" data-end="864.54">me we had already done work into getting</span> <span data-start="864.54" data-end="866.22">these charts to look the way that I</span> <span data-start="866.22" data-end="869.43">wanted and I wanted to quickly get</span> <span data-start="869.43" data-end="871.769">something up that allowed us to use this</span> <span data-start="871.769" data-end="875.899">for this client so that was key for nice</span> <span data-start="875.899" data-end="880.079">performance images less burdens again I</span> <span data-start="880.079" data-end="881.91">mentioned lower power devices instead of</span> <span data-start="881.91" data-end="883.56">me giving a data structure to the device</span> <span data-start="883.56" data-end="885.36">having the device constructed and render</span> <span data-start="885.36" data-end="887.22">it I'm just giving binary image data</span> <span data-start="887.22" data-end="887.7">back</span> <span data-start="887.7" data-end="889.529">so there's definitely performance gained</span> <span data-start="889.529" data-end="894.68">on that for some items privacy is huge</span> <span data-start="894.68" data-end="896.73">in the monitoring service or was</span> <span data-start="896.73" data-end="898.41">mentioning with some people that just</span> <span data-start="898.41" data-end="899.64">wanted they want to share their charts</span> <span data-start="899.64" data-end="900.959">but they wanted to show the relative</span> <span data-start="900.959" data-end="902.91">change or relative effect they didn't</span> <span data-start="902.91" data-end="905.97">want to show actual membership database</span> <span data-start="905.97" data-end="907.829">queries whatever it was and if I was</span> <span data-start="907.829" data-end="909.6">just giving a JSON data structure back</span> <span data-start="909.6" data-end="912.48">you can see that in the net request is</span> <span data-start="912.48" data-end="914.399">possible to off you skate it but you're</span> <span data-start="914.399" data-end="915.6">one way another you're gonna get it it's</span> <span data-start="915.6" data-end="918.269">a JavaScript that's coming across here I</span> <span data-start="918.269" data-end="919.709">can make all the changes I want on the</span> <span data-start="919.709" data-end="921.81">server determine what I want the person</span> <span data-start="921.81" data-end="923.73">to see and return a completely opaque</span> <span data-start="923.73" data-end="926.07">image or as a because I want it to be</span> <span data-start="926.07" data-end="930.6">image back to the client caching now</span> <span data-start="930.6" data-end="933.75">that you've got a standard HTTP request</span> <span data-start="933.75" data-end="935.579">you can cache it like you would anything</span> <span data-start="935.579" data-end="937.769">else let's say you've got something like</span> <span data-start="937.769" data-end="940.89">sales and you know that if I'm given a</span> <span data-start="940.89" data-end="942.3">start and an end date and they're both</span> <span data-start="942.3" data-end="944.25">in the past new sales aren't gonna have</span> <span data-start="944.25" data-end="946.5">occurred put a far futures header on it</span> <span data-start="946.5" data-end="948.99">man you can cache it as aggressively as</span> <span data-start="948.99" data-end="950.699">you would anything else or as you live</span> <span data-start="950.699" data-end="953.37">that type of data elsewhere I'm side</span> <span data-start="953.37" data-end="954.63">note I mean if you've tried to ever</span> <span data-start="954.63" data-end="956.459">cache xhr if you've ever dealt with a</span> <span data-start="956.459" data-end="957.059">304</span> <span data-start="957.059" data-end="960.179">or of an xhr it's really problematic so</span> <span data-start="960.179" data-end="961.289">three or four says that data hasn't</span> <span data-start="961.289" data-end="962.999">changed ask the server can you give me</span> <span data-start="962.999" data-end="964.709">the data the service says use what you</span> <span data-start="964.709" data-end="967.169">have the xhr object gives you back empty</span> <span data-start="967.169" data-end="969.959">there's no way to get the data that you</span> <span data-start="969.959" data-end="972.149">did have before so when you try to do</span> <span data-start="972.149" data-end="974.729">the right thing using xhr if you give a</span> <span data-start="974.729" data-end="977.329">three or four back it's it's</span> <span data-start="977.329" data-end="979.379">debilitating or it's a really depressing</span> <span data-start="979.379" data-end="981.689">that you can't use that so this allows</span> <span data-start="981.689" data-end="985.709">me to get around that as well text one</span> <span data-start="985.709" data-end="986.669">of the benefits I guess for having a</span> <span data-start="986.669" data-end="988.139">single platform you know what you have</span> <span data-start="988.139" data-end="990.509">installed on your server so you can use</span> <span data-start="990.509" data-end="993.539">a certain file this advantages I think</span> <span data-start="993.539" data-end="994.889">the first one being I'm now bringing</span> <span data-start="994.889" data-end="997.379">load from a client back you know that</span> <span data-start="997.379" data-end="999.839">nodes are going from a node back to the</span> <span data-start="999.839" data-end="1002.359">hub so you are taking on some burden but</span> </p>
<p><span data-start="1002.359" data-end="1005.059">I think you can offset that by some of</span> <span data-start="1005.059" data-end="1007.429">the things I mentioned caching and etc</span> <span data-start="1007.429" data-end="1010.249">it's an image a lot of fun stuff done</span> <span data-start="1010.249" data-end="1013.429">canvas mouse over tooltips expand zoom I</span> <span data-start="1013.429" data-end="1015.199">can't do any of that with an image so</span> <span data-start="1015.199" data-end="1018.319">clearly that's gone and it's another</span> <span data-start="1018.319" data-end="1019.669">piece of technology in your</span> <span data-start="1019.669" data-end="1021.139">infrastructure you might not be using</span> <span data-start="1021.139" data-end="1023.899">node already again that's not too</span> <span data-start="1023.899" data-end="1025.459">terrible I mean you can make a request</span> <span data-start="1025.459" data-end="1027.019">that goes through a certain port or a</span> <span data-start="1027.019" data-end="1029.809">certain URL and just send that through</span> <span data-start="1029.809" data-end="1031.85">so it's only being run not only that</span> <span data-start="1031.85" data-end="1033.289">little bits being run by node you</span> <span data-start="1033.289" data-end="1034.369">probably have your own image server</span> <span data-start="1034.369" data-end="1036.47">anyway that's doing something similar or</span> <span data-start="1036.47" data-end="1037.85">if you're doing server-side and</span> <span data-start="1037.85" data-end="1041.209">generation you already have that memory</span> <span data-start="1041.209" data-end="1044.539">as I said I haven't dealt with enough to</span> <span data-start="1044.539" data-end="1046.49">know I'm not seeing it but I know</span> <span data-start="1046.49" data-end="1048.319">there's been there was some question</span> <span data-start="1048.319" data-end="1049.759">from Elijah if I was running into it</span> <span data-start="1049.759" data-end="1051.139">when I showed him what I did he said I</span> <span data-start="1051.139" data-end="1053.119">should be fine but this is not</span> <span data-start="1053.119" data-end="1054.35">thoroughly vetted so I'm not exactly</span> <span data-start="1054.35" data-end="1056.23">sure what people would run into with it</span> <span data-start="1056.23" data-end="1058.58">don't know of any other said this hasn't</span> <span data-start="1058.58" data-end="1060.049">been I didn't get a chance to implement</span> <span data-start="1060.049" data-end="1062.059">this at the monitoring company it's our</span> <span data-start="1062.059" data-end="1065.99">code so I'm not quite sure basic</span> <span data-start="1065.99" data-end="1067.82">questions can you do this with Gd or</span> <span data-start="1067.82" data-end="1068.389">imagemagick</span> <span data-start="1068.389" data-end="1070.49">you can but I wanted the same charts</span> <span data-start="1070.49" data-end="1071.389">that I already had</span> </p>
<p><span data-start="1071.389" data-end="1074.24">I like the client-side charting</span> <span data-start="1074.24" data-end="1075.559">libraries a lot better I think there's a</span> <span data-start="1075.559" data-end="1077.389">lot more development actually going on</span> <span data-start="1077.389" data-end="1080.69">in that so it's a lot more there's a lot</span> <span data-start="1080.69" data-end="1082.879">more for me to choose from and what I</span> <span data-start="1082.879" data-end="1084.769">like is if I find something I like I can</span> <span data-start="1084.769" data-end="1086.629">just do basically a patch like I showed</span> <span data-start="1086.629" data-end="1089.21">you before go fine work creates canvas</span> <span data-start="1089.21" data-end="1091.669">a little bit out and theoretically</span> <span data-start="1091.669" data-end="1092.69">that's it or do a little bit more</span> <span data-start="1092.69" data-end="1094.82">digging but it's really not that much</span> <span data-start="1094.82" data-end="1097.039">work to get a client-side library to</span> <span data-start="1097.039" data-end="1098.179">work on the server side</span> </p>
<p><span data-start="1098.179" data-end="1101.539">I'm sorry performance I've mentioned not</span> <span data-start="1101.539" data-end="1103.399">really sure some flat specific items</span> <span data-start="1103.399" data-end="1105.02">actually didn't realize till yesterday</span> <span data-start="1105.02" data-end="1106.85">that flat was 7 is out came out about a</span> <span data-start="1106.85" data-end="1109.97">month ago so I actually did a patch the</span> <span data-start="1109.97" data-end="1111.98">internet issues today I couldn't make my</span> <span data-start="1111.98" data-end="1114.049">changes over but it's a similar patch</span> <span data-start="1114.049" data-end="1115.669">it's really simple just the line numbers</span> <span data-start="1115.669" data-end="1116.72">changed enough that I couldn't apply the</span> <span data-start="1116.72" data-end="1119.57">same one flat oh wait so there's the</span> <span data-start="1119.57" data-end="1121.64">verse Mets an SDN right now is doing all</span> <span data-start="1121.64" data-end="1123.83">the rendering or at least doing the</span> <span data-start="1123.83" data-end="1125.539">label rendering in text so you don't</span> <span data-start="1125.539" data-end="1127.399">even need that plug-in I don't there the</span> <span data-start="1127.399" data-end="1129.71">tick label rendering in text I don't</span> <span data-start="1129.71" data-end="1131.149">think they have labels down yet but</span> <span data-start="1131.149" data-end="1132.529">that's definitely where they're moving</span> <span data-start="1132.529" data-end="1135.89">so you would just specify font size fill</span> <span data-start="1135.89" data-end="1137.57">etc options and that would be completely</span> <span data-start="1137.57" data-end="1140.029">standard which means the new that plugin</span> <span data-start="1140.029" data-end="1142.7">is gone um</span> </p>
<p><span data-start="1142.7" data-end="1144.74">Elijah mentioned note flock I'm pretty</span> <span data-start="1144.74" data-end="1146.029">sure he's talking about me there isn't a</span> <span data-start="1146.029" data-end="1148.25">node flop project I don't know if there</span> <span data-start="1148.25" data-end="1149.87">really should be ideally I'd just commit</span> <span data-start="1149.87" data-end="1151.52">the stuff back it's a patch file I'm not</span> <span data-start="1151.52" data-end="1153.919">trying to fork maintaining this stuff so</span> <span data-start="1153.919" data-end="1155.72">hopefully I will submit these if for</span> <span data-start="1155.72" data-end="1156.77">whatever reason I can't get them worked</span> <span data-start="1156.77" data-end="1159.559">in and I'll make a project which is just</span> <span data-start="1159.559" data-end="1161.39">gonna be a patch file right now just got</span> <span data-start="1161.39" data-end="1165.38">him up as guests and that's it</span> <span data-start="1165.38" data-end="1170.45">does it make any questions I had it no I</span> <span data-start="1170.45" data-end="1172.1">haven't sorry the question was have I</span> <span data-start="1172.1" data-end="1175.24">ever on Raphael j/s I have not Rafa</span> <span data-start="1175.24" data-end="1178.22">exactly so Raphael's SVG which means</span> <span data-start="1178.22" data-end="1181.07">that now I did here turn Crocs wrapping</span> <span data-start="1181.07" data-end="1183.679">theirs but I did here Raphael shut him</span> <span data-start="1183.679" data-end="1186.529">out so I believe it exists somebody we</span> <span data-start="1186.529" data-end="1187.94">should be able to do the same thing</span> <span data-start="1187.94" data-end="1190.88">because Cairo like I said also has SVG</span> <span data-start="1190.88" data-end="1193.49">support so if somebody was similarly</span> <span data-start="1193.49" data-end="1195.649">motivated or if no Raphael doesn't do we</span> <span data-start="1195.649" data-end="1197.12">think it does you should be able to do</span> <span data-start="1197.12" data-end="1199.76">that</span> <span data-start="1199.77" data-end="1207.84">near portions what's up I don't have her</span> <span data-start="1207.84" data-end="1208.98">this the question was is there a service</span> <span data-start="1208.98" data-end="1212.13">on WebGL there's a couples the answer</span> <span data-start="1212.13" data-end="1221.73">from camera I'm sorry</span> <span data-start="1221.73" data-end="1223.23">so these are there was a couple that's</span> <span data-start="1223.23" data-end="1229.17">right ahead soon the one okay thank you</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
