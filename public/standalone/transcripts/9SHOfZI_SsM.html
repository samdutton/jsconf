<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>9SHOfZI_SsM</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/9SHOfZI_SsM?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="1.87" data-end="5.73">Let's Go Big Alexander Reardon</span> </p>
</section>

<section>
<p><span data-start="33.719" data-end="34.719"><span class="speaker">Alexander</span>: Hello, yes.</span> <span data-start="34.719" data-end="38.59">Yes, as mentioned I am going to be talking to you all about big numbers, so these are</span> <span data-start="38.59" data-end="44.8">numbers that are bigger than what we can naturally do in JavaScript by default.</span> <span data-start="44.8" data-end="46.46">That's my Twitter handle there if you want to find me.</span> <span data-start="46.46" data-end="51.359">I was pretty late to the party in terms of Twitter so the last letter of my first name</span> <span data-start="51.359" data-end="55.84">and last name are collapsed but you can find me there.</span> <span data-start="55.84" data-end="56.84">Just a bit of a warning.</span> <span data-start="56.84" data-end="59.71">There will be some math in this talk.</span> <span data-start="59.71" data-end="63.032">It's kind of hard to talk about big numbers without talking about math but I will try</span> <span data-start="63.032" data-end="66.31">to keep it as easy and light as I can.</span> <span data-start="66.31" data-end="67.31">So firstly, numbers.</span> <span data-start="67.31" data-end="68.73">What are their characteristics?</span> <span data-start="68.73" data-end="71.98">What are the defining features about numbers?</span> </p>
<p><span data-start="71.98" data-end="77.43">So firstly we want to be able to store some value that then we want to retrieve at some</span> <span data-start="77.43" data-end="83.04">later point, potentially print it out on an user interface, but really the unique and</span> <span data-start="83.04" data-end="87.63">defining characteristic of numbers is the ability to do operations on those numbers,</span> <span data-start="87.63" data-end="93.3">these pre-defined mathematical things, so things like addition, subtraction, multiplication</span> <span data-start="93.3" data-end="94.3">and division.</span> <span data-start="94.3" data-end="103.23">Now, JavaScript only has one number type and's a 64 bit, and this isn't unique to JavaScript,</span> <span data-start="103.23" data-end="108.13">you will find it in other languages like Ruby and Python.</span> <span data-start="108.13" data-end="112.23">So let's look deeper.</span> <span data-start="112.23" data-end="119.29">64 bits, this is the first bit we use to control the signs, positive or negative.</span> </p>
<p><span data-start="119.29" data-end="124.51">The next 11 bits, I like to think of them as the scale, so this is how big or small</span> <span data-start="124.51" data-end="130.61">the number is and then the last 52 bits control the actual value of the number.</span> <span data-start="130.61" data-end="137.65">Now, I've got 52 bits written there because it sort of has 53 bits in that it assumes</span> <span data-start="137.65" data-end="143.349">53 but the first bit is always 1 so we can store 53 bits of information there but we</span> <span data-start="143.349" data-end="148.98">only have 52 bits and this number system is very similar to scientific notation.</span> <span data-start="148.98" data-end="157.879">So you have a value, in this case 8.12, and times by some scale to give us our result,</span> <span data-start="157.879" data-end="161.609">and this is exactly how floating point numbers work as well.</span> <span data-start="161.609" data-end="166.849">Now, I mentioned we have 53 bits and it's no coincidence that the maximum value we can</span> <span data-start="166.849" data-end="172.7">store inside these numbers, this is what happens when we set all of those in the value components</span> <span data-start="172.7" data-end="174.989">to 1, we get 2 to the 53 minus 1.</span> <span data-start="174.989" data-end="182.51">That's our maximum value that we could store and if you have seen that number around but</span> <span data-start="182.51" data-end="192.62">you didn't know where it came from, it's number dot max safe integer, is what it is.</span> </p>
<p><span data-start="192.62" data-end="200.579">We get this huge number here known as number dot max value but it's kind of a bit useless</span> <span data-start="200.579" data-end="206.93">for what we want to do in that if you have a number, say in this case this, and you add</span> <span data-start="206.93" data-end="210.92">one, you get what you expect but if you add one again you get something you didn't expect,</span> <span data-start="210.92" data-end="217.18">it doesn't do anything and you get all this weirdness.</span> <span data-start="217.18" data-end="221.389">For our purposes we are going to say because the defining characteristic of numbers was</span> <span data-start="221.389" data-end="225.87">these operations we really don't want to be going above that number or we will have unexpected</span> <span data-start="225.87" data-end="228.819">consequences so that's where JavaScript is.</span> <span data-start="228.819" data-end="234.359">Now, let's think about how we could go bigger, how we could push numbers to both store numbers</span> <span data-start="234.359" data-end="239.999">much bigger than max safe integer and do operations on them.</span> <span data-start="239.999" data-end="245.08">You might ask why would I be interested or care about big numbers?</span> <span data-start="245.08" data-end="252.29">There are valid and practical uses for big numbers, say if you are dealing with big distances,</span> <span data-start="252.29" data-end="259.98">say astronomical units, or you are doing any accumulation of big historical data so say</span> <span data-start="259.98" data-end="264.34">counting the number of characters in tweets over a period of years you might start to</span> <span data-start="264.34" data-end="269.16">run into these problems as you keep piling counts on counts.</span> </p>
<p><span data-start="269.16" data-end="273.12">Another common use case is if you are shifting decimals, so say you have a decimal value</span> <span data-start="273.12" data-end="279.02">you want to shift to become an integer value, you might hit these problems.</span> <span data-start="279.02" data-end="282.229">But really it's a bit of fun.</span> <span data-start="282.229" data-end="288.65">It's to see how far we could push this idea, overcome this limitation of 64 bit floating</span> <span data-start="288.65" data-end="291.84">numbers and it's also a bit of a challenge for us as well and hopefully we will learn</span> <span data-start="291.84" data-end="294.62">a lot by trying to overcome these barriers.</span> </p>
<p><span data-start="294.62" data-end="297.74">There's a lot of different ways of doing big numbers.</span> <span data-start="297.74" data-end="304.31">I will link this on Twitter afterwards, but it has a few other ways of doing them, and</span> <span data-start="304.31" data-end="307.11">hopefully after this talk you will see that there are probably lots of different ways</span> <span data-start="307.11" data-end="313.09">that I didn't even explore about doing big numbers so let's get into it.</span> <span data-start="313.09" data-end="318.27">This is my first technique and probably the most basic but very interesting, and that's</span> <span data-start="318.27" data-end="322.979">converting numbers into strings, so say we have the number 125, we simply convert it</span> <span data-start="322.979" data-end="324.81">to the string 125.</span> <span data-start="324.81" data-end="330.47">This is really easy, we take a number and convert it to the string, this is the format</span> <span data-start="330.47" data-end="335.479">of that system and by doing this simple trick how big can we go?</span> </p>
<p><span data-start="335.479" data-end="342.66">So say we have three slots the biggest number we can store in three slots is 999 and in</span> <span data-start="342.66" data-end="350.409">a more general sense if we had n slots we could store 10 to the n minus 1.</span> <span data-start="350.409" data-end="353.629">Which raises a question: how long is a string?</span> <span data-start="353.629" data-end="355.159">How big can these things be?</span> <span data-start="355.159" data-end="357.57">The answer today is pretty vague.</span> </p>
<p><span data-start="357.57" data-end="360.77">It's not locked down in any spec anywhere.</span> <span data-start="360.77" data-end="365.819">But if you test in browsers and Node you will find this is a safe power to use, to the power</span> <span data-start="365.819" data-end="367.449">of 27.</span> <span data-start="367.449" data-end="374.44">That's safe and consistent so that's what we will use today.</span> <span data-start="374.44" data-end="385.87">it will be this but today we will be using to the power of 27.</span> <span data-start="385.87" data-end="393.19">So what does that even mean, how big have we gone?</span> <span data-start="393.19" data-end="398.419">I've come up with this analogy which I will use for the rest of the talk as well.</span> <span data-start="398.419" data-end="403.22">So say we had a sheet of paper and on that sheet of paper we start writing numbers so</span> <span data-start="403.22" data-end="409.42">on the first line we write 1, then 1,000 on the next line, a million on the line after</span> <span data-start="409.42" data-end="411.28">that, a billion, and so on.</span> </p>
<p><span data-start="411.28" data-end="414.24">And each line is a centimetre big.</span> <span data-start="414.24" data-end="419.65">The thing to note is that each centimetre is a thousand times bigger in value than the</span> <span data-start="419.65" data-end="422.34">centimetre before it.</span> <span data-start="422.34" data-end="431.669">So with JavaScript numbers we can get 6cm down this page until we hit that max safe</span> <span data-start="431.669" data-end="433.139">integer.</span> </p>
<p><span data-start="433.139" data-end="440.509">If we use this string method it would take 474km worth of paper to store this number</span> <span data-start="440.509" data-end="444.75">which is staggering when you consider that each centimetre is a thousand times bigger</span> <span data-start="444.75" data-end="449.61">in value than the centimetre before it so this is a really simple technique and we've</span> <span data-start="449.61" data-end="453.889">completely blown away that max value that we had before.</span> <span data-start="453.889" data-end="461.071">So it's from here to Berlin and back twice, with each centimetre being bigger than the</span> <span data-start="461.071" data-end="462.449">one before it.</span> <span data-start="462.449" data-end="470.409">This is a table I am going to keep referring to as we go to record our progress, so simply</span> <span data-start="470.409" data-end="474.96">switching to decimal strings we have a huge increase in scale.</span> <span data-start="474.96" data-end="480.969">You might think that's great but really what we care about with numbers is the ability</span> <span data-start="480.969" data-end="483.36">to do operations.</span> <span data-start="483.36" data-end="488.469">I think the screen has gone.</span> </p>
<p><span data-start="488.469" data-end="500.63">Here we go, so say we wanted to do addition, with two strings, so we have a string, 256</span> <span data-start="500.63" data-end="506.09">and 182, how do we even begin to start doing addition with these numbers?</span> <span data-start="506.09" data-end="509.96">Well, we could look at the first column on the right.</span> <span data-start="509.96" data-end="514.99">We want to add 6 and 2 and we could create some system where the character 6 plus the</span> <span data-start="514.99" data-end="520.229">character 2 yields the character 8 and not do any math but because these are small integer</span> <span data-start="520.229" data-end="526.25">values we could lean on JavaScript numbers under the hood to do these small, safe operations</span> <span data-start="526.25" data-end="527.25">so we will do that for convenience.</span> <span data-start="527.25" data-end="531.36">So we have 6 and 2 and get 8.</span> <span data-start="531.36" data-end="534.649">Move to the left and we have 5 plus 8 which gives us 13.</span> <span data-start="534.649" data-end="540.76">We have a problem because we can't store 13 in one column so we do primary school mathematics</span> <span data-start="540.76" data-end="548.029">where we can subtract 10, carry 1 and [audio problem] .. and carry that number to the</span> <span data-start="548.029" data-end="553.36">next column, we have one, plus, two, plus one, which gives us 4.</span> </p>
<p><span data-start="553.36" data-end="557.93">We are able to add these strings which is pretty fun.</span> <span data-start="557.93" data-end="562">What's interesting is that was a really nice algorithm, looking at two numbers at the time</span> <span data-start="562" data-end="564.63">and constantly shifting down the number.</span> <span data-start="564.63" data-end="566.13">Let's take a look at subtraction.</span> <span data-start="566.13" data-end="572.54">This one is a little bit harder so say we have 4,005 and want to subtract 11 from it.</span> <span data-start="572.54" data-end="581.88">So 5 minus 1 gives us 4, then zero minus 1, we can't really do that so we start with a</span> <span data-start="581.88" data-end="585.931">lookup phase so we start looking down the number until we find something that we can</span> <span data-start="585.931" data-end="587.79">borrow something from.</span> </p>
<p><span data-start="587.79" data-end="591.8">So we found 4, we take one from that, we can carry a 10 back.</span> <span data-start="591.8" data-end="595.55">Now we can take something interest that so that becomes a 9 and we can carry 1 over and</span> <span data-start="595.55" data-end="602.31">now we can do something, we can take 1 from 10 which gives us 9.</span> <span data-start="602.31" data-end="607.829">Then shifting down again we have 9 minus 0 which gives us 9 and 3 minus 0 which gives</span> <span data-start="607.829" data-end="608.829">us 3.</span> </p>
<p><span data-start="608.829" data-end="610.3">Okay, we've got our answer.</span> <span data-start="610.3" data-end="612.019">But that was kind of gross, right?</span> <span data-start="612.019" data-end="617.26">We had to start shifting down, then did this search, then come back, and then search again</span> <span data-start="617.26" data-end="620.56">and if these were really big numbers this could be extremely inefficient.</span> <span data-start="620.56" data-end="622.97">You might be searching back and forth, back and forth a lot.</span> <span data-start="622.97" data-end="629.85">So this is much different to what we had with addition where we were simply moving down</span> <span data-start="629.85" data-end="631.62">two digits at a time.</span> <span data-start="631.62" data-end="636.42">So that's just something to keep in your mind that that's a pain point for this system.</span> <span data-start="636.42" data-end="637.42">Now let's look at multiplication.</span> <span data-start="637.42" data-end="638.49">Bear with me.</span> <span data-start="638.49" data-end="642.82">There is not too much heavy math more to go.</span> <span data-start="642.82" data-end="648.519">So multiplication: we could write a multiplication algorithm but really once you have addition</span> <span data-start="648.519" data-end="655.3">you can deduce multiplication for free.</span> <span data-start="655.3" data-end="663.24">So you had 0, we add 10, we add 10, we are done, you have an answer.</span> <span data-start="663.24" data-end="666.019">We could just leverage that addition function we already had.</span> <span data-start="666.019" data-end="671.56">Admittedly it's not super-performant but you have the idea.</span> </p>
<p><span data-start="671.56" data-end="672.56">Addition.</span> <span data-start="672.56" data-end="678.43">Same idea except now we are going to keep subtracting from this number until we can't</span> <span data-start="678.43" data-end="679.99">subtract anymore.</span> <span data-start="679.99" data-end="685.68">We start with number 6, subtract 2, subtract 2, subtract 2, we can't subtract anymore,</span> <span data-start="685.68" data-end="694.86">but we can count the number of times we subtract and so the answer is 3.</span> <span data-start="694.86" data-end="698.94">By having addition and subtraction we were able to get division and multiplication for</span> <span data-start="698.94" data-end="700.019">free which is great.</span> <span data-start="700.019" data-end="705.959">So as soon as we create a system with addition and subtraction we can create one that has</span> <span data-start="705.959" data-end="708.13">division and multiplication as well.</span> <span data-start="708.13" data-end="709.98">So we did pretty well.</span> <span data-start="709.98" data-end="714.699">We created a system which has a huge number value as well as being able to do this pre-confined</span> <span data-start="714.699" data-end="720.519">mathematical operation, and we built this system — again I will tweet this link at the</span> <span data-start="720.519" data-end="725.9">end — if you are interested you can have an play with it and it works for decimals and</span> <span data-start="725.9" data-end="731.79">negative values too, so have a play with that.</span> </p>
<p><span data-start="731.79" data-end="738.831">Note I've said do not use in production, I haven't tested it or anything, but have a</span> <span data-start="738.831" data-end="740.709">look at that.</span> <span data-start="740.709" data-end="749.279">So the next technique is binary strings, so this is the binary representation, a 8-bit</span> <span data-start="749.279" data-end="751.339">representation of the number.</span> <span data-start="751.339" data-end="760.149">The max value is .. and why it's minus 1 is because I'm storing the binary in a format</span> <span data-start="760.149" data-end="765.199">called two's complement and I will explain why that's important in a sec.</span> <span data-start="765.199" data-end="771.49">So now we have a bigger value than we started with, with numbers but a smaller value than</span> <span data-start="771.49" data-end="772.57">our base 10 system.</span> <span data-start="772.57" data-end="781.459">That's because we are in base 2 and can't store as much information but it's still 1,347</span> <span data-start="781.459" data-end="787.17">kilometres on this sheet of paper with every centimetre being a thousand times bigger so</span> <span data-start="787.17" data-end="792.66">still a very big number but let's take a look at subtraction in this system.</span> <span data-start="792.66" data-end="798.35">So we have the number 5 and minus 3 in binary and we know this is going to give us 2 and</span> <span data-start="798.35" data-end="803.889">we can use this method called the two's complement to model this in a different way so first</span> <span data-start="803.889" data-end="809.5">of all what we do is we flip the bits and we add one, and then we can see if we can</span> <span data-start="809.5" data-end="814.97">just add like we would before, so in binary addition one plus one, you carry the one and</span> <span data-start="814.97" data-end="820.449">you leave a zero, so we go over, now we have 1 in this column, this carry situation again,</span> <span data-start="820.449" data-end="823.38">1 plus 1, so zero and carry the 1.</span> </p>
<p><span data-start="823.38" data-end="829.589">Now we have 1 plus 1 again, we put 0 but we are carrying a 1 into this area we don't care</span> <span data-start="829.589" data-end="834.899">about called the overflow bit and you just throw it away.</span> <span data-start="834.899" data-end="841.57">What's interesting is we've ended up with the number 2 so even though we had this subtraction</span> <span data-start="841.57" data-end="845.54">problem we were able to model it using addition.</span> <span data-start="845.54" data-end="851.42">So we started with subtraction, we flipped the bits — oh, you can see the animation but</span> <span data-start="851.42" data-end="852.42">I can't.</span> <span data-start="852.42" data-end="854.079">So we actually ended up looking at it like this.</span> <span data-start="854.079" data-end="858.75">We have been able to model subtraction as if we are doing addition which is a really</span> <span data-start="858.75" data-end="861.589">nice way of looking at the problem.</span> <span data-start="861.589" data-end="862.589">Let's go bigger.</span> <span data-start="862.589" data-end="863.639">Where can we go from binary strings?</span> <span data-start="863.639" data-end="872.67">We can look at hexidecimal strings.</span> <span data-start="872.67" data-end="878.769">Hex is just a mapping 0 through 9 and 0 through 9 and A through F is 10 through 16 so we can</span> <span data-start="878.769" data-end="886.8">store values in each slot of a string so now we have this new max value of 16 to the n</span> <span data-start="886.8" data-end="892.37">minus 1 which is bigger than we had in decimal but it will have a bad subtraction story,</span> <span data-start="892.37" data-end="897.66">but we are now moving in the direction of trying to chase bigger and bigger numbers</span> <span data-start="897.66" data-end="900.13">so this one is now 5037km on paper.</span> </p>
<p><span data-start="900.13" data-end="911.34">This leads to  the question: what could we store in the slot</span> <span data-start="911.34" data-end="915.08">of a string, what's the maximum thing?</span> <span data-start="915.08" data-end="921.42">This leads to my final technique, 16 bit strings and to understand this we need to understand</span> <span data-start="921.42" data-end="923.88">how strings work a little bit better.</span> <span data-start="923.88" data-end="929.339">To understand strings we need to understand Unicode so Unicode is really simple, just</span> <span data-start="929.339" data-end="933.41">a map of symbols to integers or symbols to code points.</span> <span data-start="933.41" data-end="940.149">Code points, they just decided arbitrarily that these symbols map to these integers,</span> <span data-start="940.149" data-end="944.899">that's all it is, and there's about 1.1 million of them.</span> <span data-start="944.899" data-end="950.48">JavaScript is a language that has decided that it's going to treat every 16 bit unit</span> <span data-start="950.48" data-end="955.63">of a string as one character, and I am going to show you what that means.</span> <span data-start="955.63" data-end="962.37">Let's start with this string, the letter E. It equates to the Unicode integer of 101.</span> <span data-start="962.37" data-end="967.149">You can pull that out from the string and it's going to give you that integer back but</span> <span data-start="967.149" data-end="975.759">you will see in hexidecimal, it has a length of 1.</span> <span data-start="975.759" data-end="982.24">This will be true for any character that has a Unicode code point between 0 and 2 to the</span> <span data-start="982.24" data-end="984.009">power of 16.</span> </p>
<p><span data-start="984.009" data-end="989.08">Things get interesting when we start to move to characters that are bigger than to the</span> <span data-start="989.08" data-end="990.8">power of 16 in integer value.</span> <span data-start="990.8" data-end="995.61">So in this case we have an emoji which equates to a code point and you will see that it actually</span> <span data-start="995.61" data-end="999.1">equals in JavaScript two different Unicode strings.</span> <span data-start="999.1" data-end="1004.5">It has a length of 2 so even though visually to us it seems like it's one character according</span> <span data-start="1004.5" data-end="1008.12">to JavaScript as a language that we deal with it's two.</span> <span data-start="1008.12" data-end="1014.17">This gets even more crazy when you start to introduce things like modifiers where, according</span> <span data-start="1014.17" data-end="1024.569">to Unicode, it's two huge numbers but JavaScript needed four 16 bit strings to represent that.</span> <span data-start="1024.569" data-end="1028.51">So it looks to us like one character, JavaScript is calling it four.</span> <span data-start="1028.51" data-end="1032.91">So really the biggest things that we could store inside one slot of a string is anything</span> <span data-start="1032.91" data-end="1035.75">from 2, 0, to 2 to the power of 16.</span> <span data-start="1035.75" data-end="1043.089">So we have 2 to the power of 16 things we could store in each of these slots.</span> <span data-start="1043.089" data-end="1049.94">To put it into perspective it if we look at the piece of paper, with each centimetre being</span> <span data-start="1049.94" data-end="1054.19">a thousand times bigger than the one before it, it would be from here to Sydney and a</span> <span data-start="1054.19" data-end="1062.28">little bit back again, how much paper we would need to record that value.</span> </p>
<p><span data-start="1062.28" data-end="1063.34">But what about operations?</span> <span data-start="1063.34" data-end="1067.809">You know, if we had a string hash plus dollar, what does that give us?</span> <span data-start="1067.809" data-end="1072.83">We saw this method before where we could pull out the integer value so we could simply pull</span> <span data-start="1072.83" data-end="1077.419">that integer value out, do the addition and if we really wanted we could save that result</span> <span data-start="1077.419" data-end="1082.74">back into a Unicode string so if you didn't know hash plus dollar equals G. Cool.</span> <span data-start="1082.74" data-end="1089.12">So we've got a pretty big increase in scale and it has pushed us to the limit of what</span> <span data-start="1089.12" data-end="1091.36">we could do with strings so where do we go from here?</span> <span data-start="1091.36" data-end="1093.01">Let's have a look at arrays.</span> <span data-start="1093.01" data-end="1096.809">So firstly we had a string and I have been very deliberate with my language in saying</span> <span data-start="1096.809" data-end="1099.559">that a string has slots.</span> <span data-start="1099.559" data-end="1106.299">Now, we can also think of an array of characters, so we can think of a string as an array of</span> <span data-start="1106.299" data-end="1110.76">characters but we also have arrays in JavaScript so technically we could store anything we</span> <span data-start="1110.76" data-end="1115.51">want in one of these slots, we don't have to store just one character and the conclusion</span> <span data-start="1115.51" data-end="1120.46">of that is we could store one of these superstrings that we've created in each slot of an array.</span> <span data-start="1120.46" data-end="1122.51">So how long is an array?</span> </p>
<p><span data-start="1122.51" data-end="1125.19">Well, an array is 2 to the 32 minus 1.</span> <span data-start="1125.19" data-end="1127.58">Just so you know.</span> <span data-start="1127.58" data-end="1131.85">Which means our new max value is this huge thing here.</span> <span data-start="1131.85" data-end="1135.771">To put into perspective how much paper we would need to store that number, you would</span> <span data-start="1135.771" data-end="1139.85">have to go from the sun to Pluto — I like mentioning Pluto because it was a planet when</span> <span data-start="1139.85" data-end="1147.28">I was young and I like keeping it relevant — so from sun to Pluto 135 times.</span> </p>
<p><span data-start="1147.28" data-end="1149.6">That's how much paper you would need.</span> <span data-start="1149.6" data-end="1156.45">Yes, it's about 3 trillion kilometres worth of paper with each centimetre being a thousand</span> <span data-start="1156.45" data-end="1158.54">times bigger than the centimetre before it.</span> <span data-start="1158.54" data-end="1161.91">These numbers, I can't even process them.</span> </p>
<p><span data-start="1161.91" data-end="1166.32">This is just one level of deeper arrays.</span> <span data-start="1166.32" data-end="1171.39">There's nothing stopping us having arrays of arrays, or arrays of arrays of arrays.</span> <span data-start="1171.39" data-end="1175.74">The numbers start to get absurd and I couldn't think of any good analogies for them anymore.</span> <span data-start="1175.74" data-end="1182.97">Now, I have been thinking of mirroring, right, can we actually store these things?</span> <span data-start="1182.97" data-end="1184.09">So let's have a look.</span> <span data-start="1184.09" data-end="1190.07">We know we have 16 bits per slot, there might be some optimisation under the hood but let's</span> <span data-start="1190.07" data-end="1198">assume 16 bits per slot, 227 slots, so the amount of bits is about 2 billion bits or</span> <span data-start="1198" data-end="1203.33">268 megabytes to store one of these strings and if we are trying to store an array we</span> <span data-start="1203.33" data-end="1210.061">have 268 megabytes per slot, 232 slots, about 1 million terabytes to store these things</span> <span data-start="1210.061" data-end="1216.83">so definitely something you don't want to be doing, so we are going to stick with this.</span> <span data-start="1216.83" data-end="1219.5">268 megabytes is something we can probably deal with.</span> <span data-start="1219.5" data-end="1225.21">Now, what we could do is if we were running in Node by default you get about 1.7 on a</span> <span data-start="1225.21" data-end="1232.7">machine, you could increase your memory, but for starters we are probably going down an</span> <span data-start="1232.7" data-end="1237.809">approach we shouldn't be going down so let's take a step back and think about what we've</span> <span data-start="1237.809" data-end="1241.07">learned from looking at this string approach to doing math.</span> </p>
<p><span data-start="1241.07" data-end="1245.24">Firstly, we learnt that we can do almost any operation if we can add.</span> <span data-start="1245.24" data-end="1252.15">If we are using a binary system, if we can add, we can kind of do lots of different operations.</span> <span data-start="1252.15" data-end="1256.34">And we can add two numbers — we can add numbers together, potentially really big numbers.</span> <span data-start="1256.34" data-end="1261.47">We only need to look at two digits of that number at a time so just kind of looking down</span> <span data-start="1261.47" data-end="1264.72">the column, shifting to the right.</span> <span data-start="1264.72" data-end="1266.049">Shifting to the left sorry.</span> <span data-start="1266.049" data-end="1269.39">Okay, so let's take those learnings and apply them somewhere else so say we have this file</span> <span data-start="1269.39" data-end="1278.77">and it's encoded in UTFA which means you have flexible 8 bit encoding.</span> <span data-start="1278.77" data-end="1284.48">We have a binary string that's huge, much bigger than we could store in memory at once,</span> <span data-start="1284.48" data-end="1289.98">and let's say we have two of those files.</span> <span data-start="1289.98" data-end="1294.35">We could open a stream to those files, this is sort of like a live connection to the file</span> <span data-start="1294.35" data-end="1298.07">without reading anything in, and then we created a buffer where we are just going to read in</span> <span data-start="1298.07" data-end="1303.29">one byte at a time from each of these files, and this is why it was important that it was</span> <span data-start="1303.29" data-end="1308.83">UTFA because 0 and 1 fall in the first eight bits, we will be able to read in one digit</span> <span data-start="1308.83" data-end="1312.78">at a time which is what we want to do, read in one digit at a time from these files.</span> </p>
<p><span data-start="1312.78" data-end="1317.61">So we read in one digit at a time, we do the operation, might save the overflow if there</span> <span data-start="1317.61" data-end="1323.309">is one in memory for a bit and then output that one byte at a time to an output file,</span> <span data-start="1323.309" data-end="1324.96">and this is pretty cool.</span> <span data-start="1324.96" data-end="1331.809">So this means we could actually add incredibly big numbers that we could never really store</span> <span data-start="1331.809" data-end="1337.11">in memory, by just kind of just looking at two little things at a time and just adding</span> <span data-start="1337.11" data-end="1339.34">them and kind of passing it on.</span> </p>
<p><span data-start="1339.34" data-end="1344.48">I built this as well, it's there if you want to check it out.</span> <span data-start="1344.48" data-end="1352.44">We have two input streams, say 1 and 0, you add them, save and then add to the file.</span> <span data-start="1352.44" data-end="1358.279">It's very similar to what we had before where we just keep shifting down.</span> <span data-start="1358.279" data-end="1365.19">We can do this on numbers that are much bigger than we can store in memory, so now this table</span> <span data-start="1365.19" data-end="1367.05">starts to break down, right?</span> <span data-start="1367.05" data-end="1371.222">Our limiting factor is not — I'm sorry, I know you probably can't see the bottom of</span> <span data-start="1371.222" data-end="1374.81">the screen right now but I've just written "infinite" and your limiting factor is the</span> <span data-start="1374.81" data-end="1379.11">number you have on your machine which is a pretty big increase in scale.</span> <span data-start="1379.11" data-end="1385.94">I didn't even bother to figure out how big in terms of kilometres that would be.</span> <span data-start="1385.94" data-end="1388.61">But we can take this further.</span> <span data-start="1388.61" data-end="1392.74">What if we weren't even limited by our own machine but instead distributed this number</span> <span data-start="1392.74" data-end="1397.309">across one machine so no one machine could see the whole number at once but all these</span> <span data-start="1397.309" data-end="1402.73">no ones had pieces of the number, we could store them using that and also create some</span> <span data-start="1402.73" data-end="1405.61">sort of protocol to do distributed operations.</span> <span data-start="1405.61" data-end="1408.76">Because we don't actually need to see the whole piece of the number at once to see an</span> <span data-start="1408.76" data-end="1415.19">operation, you only need to see two digits you could distribute and then screen that</span> <span data-start="1415.19" data-end="1421.35">output to someone who cares about it, so now the limiting factor isn't our machine, it's</span> <span data-start="1421.35" data-end="1423.46">how many machines we have access to.</span> </p>
<p><span data-start="1423.46" data-end="1425.52">All right.</span> <span data-start="1425.52" data-end="1430.46">So we went big, we went really big, probably bigger than you thought we were going to go</span> <span data-start="1430.46" data-end="1433.63">today, the limiting factor being the amount of machines that you have.</span> <span data-start="1433.63" data-end="1439.89">We actually learnt a lot from implementing a numbering system using strings which you</span> <span data-start="1439.89" data-end="1444.01">might have thought was a bit strange to start with and we were able to take those learnings,</span> <span data-start="1444.01" data-end="1448.159">some of the nicer patterns we found about dealing with strings and we were able to apply</span> <span data-start="1448.159" data-end="1452.11">that in a completely different way to build on the system that maybe we didn't think about</span> <span data-start="1452.11" data-end="1453.919">when we first started.</span> <span data-start="1453.919" data-end="1458.11">So my big take away from today is: don't be afraid to try something a little bit different.</span> <span data-start="1458.11" data-end="1462.97">You might actually get some learnings from that that you can apply to some other problem,</span> <span data-start="1462.97" data-end="1467.039">or to find some solution that you didn't even think about when you first started.</span> </p>
<p><span data-start="1467.039" data-end="1471.26">Yes, so you never know what you will learn and where it will lead you.</span> <span data-start="1471.26" data-end="1475.04">Before I finish, I just want to acknowledge a good mate of mine, Stephen Campaign, a math</span> <span data-start="1475.04" data-end="1481.25">mate of mine really helped me out so a big shout out to him and also my amazing colleagues</span> <span data-start="1481.25" data-end="1485.72">whose ear I have been chewing off over the last few months wrapping my head around these</span> <span data-start="1485.72" data-end="1486.72">problems.</span> <span data-start="1486.72" data-end="1491.279">If you do want to use big numbers in production there is a library, you can use that.</span> <span data-start="1491.279" data-end="1495.47">Also if you are interested they are looking at putting infinite precision integers into</span> <span data-start="1495.47" data-end="1499.94">JavaScript, there's a draft stage, proposal hub you can check that out.</span> <span data-start="1499.94" data-end="1500.94">Great.</span> <span data-start="1500.94" data-end="1501.94">Thanks, everyone.</span> <span data-start="1501.94" data-end="1502.94">[Applause] >> Wasn't that fantastic?</span> <span data-start="1502.94" data-end="1503.94">That was absolutely incredible, and that gave me as somebody with, like, the fear of the</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
