<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>-vYak5hEGrY</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/-vYak5hEGrY?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="2.3" data-end="9.129">[Music]</span> <span data-start="9.139" data-end="13.17">welcome everyone over the next like</span> <span data-start="13.17" data-end="14.969">that's the official type talk of the</span> <span data-start="14.969" data-end="16.8">title I didn't bother to write that on</span> <span data-start="16.8" data-end="19.32">the piece of paper but welcome everyone</span> </p>
<p><span data-start="19.32" data-end="20.76">I would like to give you over the next</span> <span data-start="20.76" data-end="22.859">thirty minutes as I said a brief</span> <span data-start="22.859" data-end="24.63">introduction of like web security and</span> <span data-start="24.63" data-end="26.31">things that I believe are important for</span> <span data-start="26.31" data-end="28.019">every web developer no matter whether</span> <span data-start="28.019" data-end="29.939">you're responsible for security or not</span> <span data-start="29.939" data-end="31.859">because in my opinion everyone is</span> <span data-start="31.859" data-end="34.5">responsible for security and not just</span> <span data-start="34.5" data-end="36.63">the person who has it in their title and</span> <span data-start="36.63" data-end="38.46">hopefully by the end of the talk</span> <span data-start="38.46" data-end="40.41">all of these abbreviations gonna make it</span> <span data-start="40.41" data-end="43.05">a little bit more sense to you but</span> <span data-start="43.05" data-end="44.16">before we start I would like to</span> <span data-start="44.16" data-end="46.41">introduce myself so I'm Dominic I live</span> <span data-start="46.41" data-end="48.36">in Berlin and I work as a weapon as a</span> <span data-start="48.36" data-end="50.85">developer evangelist for a company</span> <span data-start="50.85" data-end="53.309">called Twilio we were the ones who put</span> <span data-start="53.309" data-end="54.93">out the t-shirts if you manage to grab</span> <span data-start="54.93" data-end="58.17">one and we have we're an API company</span> <span data-start="58.17" data-end="60.059">that has api's around communications</span> <span data-start="60.059" data-end="64.799">such as SMS voice video or chat as well</span> <span data-start="64.799" data-end="66.68">as things like two-factor authentication</span> <span data-start="66.68" data-end="69.09">but there's one more thing that you</span> <span data-start="69.09" data-end="70.5">should know about me and I you might</span> <span data-start="70.5" data-end="72.09">have gotten the hint by me running</span> <span data-start="72.09" data-end="74.82">around like this I'm part of a group</span> <span data-start="74.82" data-end="77.909">called one zjs we're just a bunch of</span> <span data-start="77.909" data-end="79.77">lovely people that you're more than</span> <span data-start="79.77" data-end="81.59">welcome to come up to and chat with us</span> <span data-start="81.59" data-end="84.659">that's the first time we have pulled</span> <span data-start="84.659" data-end="86.64">this off back at row J's which is an</span> <span data-start="86.64" data-end="88.799">amazing conference organized by Matt</span> </p>
<p><span data-start="88.799" data-end="91.65">Lane walking over there and now running</span> <span data-start="91.65" data-end="94.53">away it's a social network for web web</span> <span data-start="94.53" data-end="97.079">developers who are developers in general</span> <span data-start="97.079" data-end="99.6">who love onesies and you know being a</span> <span data-start="99.6" data-end="101.369">developer I obviously made sure that</span> <span data-start="101.369" data-end="103.2">this is a secure as possible so that</span> <span data-start="103.2" data-end="105.57">people with bananas come hacker if you</span> <span data-start="105.57" data-end="108.36">see the banana trying to hack their you</span> <span data-start="108.36" data-end="109.92">know and I thought of everything so it</span> <span data-start="109.92" data-end="112.11">uses HTTP and thanks for let's encrypt</span> <span data-start="112.11" data-end="114.149">there's really no excuse to not using</span> </p>
<p><span data-start="114.149" data-end="116.88">HTTPS because you can do it for free it</span> <span data-start="116.88" data-end="117.96">uses HSTs</span> <span data-start="117.96" data-end="120.32">which is the HTTP strict Transport</span> <span data-start="120.32" data-end="124.14">protocol which is the thing that makes</span> <span data-start="124.14" data-end="126">sure that you can't go to Google when</span> <span data-start="126" data-end="127.799">you're on an open network that is trying</span> <span data-start="127.799" data-end="129.619">to redirect you to a captive portal</span> <span data-start="129.619" data-end="131.64">basically what it makes sure is that</span> <span data-start="131.64" data-end="132.28">there</span> <span data-start="132.28" data-end="135.43">no down rate in your connection when you</span> <span data-start="135.43" data-end="139.54">are from HTTP to HTTPS no mixed content</span> <span data-start="139.54" data-end="141.84">meaning there's no HTTP content on my</span> <span data-start="141.84" data-end="144.34">https website</span> </p>
<p><span data-start="144.34" data-end="146.44">I'm sanitizing the input because as the</span> <span data-start="146.44" data-end="148.12">social networks obviously you can post</span> <span data-start="148.12" data-end="150.4">things in my case with markdown and I'm</span> <span data-start="150.4" data-end="153.16">sanitizing that input and there's no</span> <span data-start="153.16" data-end="155.14">room for sequel injections because if</span> <span data-start="155.14" data-end="157">you are not using a real database there</span> <span data-start="157" data-end="162.04">are no real sequel injections and I'm</span> <span data-start="162.04" data-end="163.48">not talking about no sequel databases</span> <span data-start="163.48" data-end="165.04">because there are no sequel injections</span> <span data-start="165.04" data-end="167.47">as well but I'm really just using a</span> <span data-start="167.47" data-end="169.45">plain storage so there's no room for me</span> <span data-start="169.45" data-end="171.34">to have like any sequel injections or no</span> <span data-start="171.34" data-end="173.82">sequel injections turns out though that</span> <span data-start="173.82" data-end="176.59">developing secure web applications isn't</span> <span data-start="176.59" data-end="179.98">as easy as I thought so I asked my buddy</span> </p>
<p><span data-start="179.98" data-end="181.87">Bob Ellison to kind of like take a stab</span> <span data-start="181.87" data-end="184.87">at the application and they found a</span> <span data-start="184.87" data-end="187">bunch of vulnerabilities that I wanted</span> <span data-start="187" data-end="189.25">to share with you and with that let's</span> <span data-start="189.25" data-end="190.84">actually take a look at the site now you</span> <span data-start="190.84" data-end="192.19">can actually see it so this is how the</span> <span data-start="192.19" data-end="194.019">fluffiest social network and the work</span> <span data-start="194.019" data-end="197.35">looks like I'm gonna switch to cloning</span> <span data-start="197.35" data-end="200.29">so I can all right so if we go here</span> <span data-start="200.29" data-end="202.269">that's the login portal and I'm gonna</span> <span data-start="202.269" data-end="205.39">open the dev tools here and go to the</span> <span data-start="205.39" data-end="207.19">network tab just so we can see what's</span> <span data-start="207.19" data-end="210.01">actually happening on the side and I'm</span> <span data-start="210.01" data-end="212.53">gonna log in here with my super secure</span> <span data-start="212.53" data-end="215.59">password and what we're doing is we're</span> <span data-start="215.59" data-end="219.61">doing a normal post request and we're</span> <span data-start="219.61" data-end="223.54">signing a auth token here which is what</span> <span data-start="223.54" data-end="226.84">is called a jar to jason JWT or a JSON</span> <span data-start="226.84" data-end="233.079">web token and if I go to okay installed</span> <span data-start="233.079" data-end="236.829">a small helper tool here to let me work</span> <span data-start="236.829" data-end="239.41">better with you tokens but if you never</span> <span data-start="239.41" data-end="243.239">saw how a JSON web token looked like</span> <span data-start="243.239" data-end="247.69">there's a nice tool called JWT IO where</span> <span data-start="247.69" data-end="250">we can inspect this and basically a JSON</span> <span data-start="250" data-end="251.44">web token has three different sections</span> <span data-start="251.44" data-end="254.14">so it has a it has a header which</span> <span data-start="254.14" data-end="256.299">defines hey this is actually a judge and</span> <span data-start="256.299" data-end="258.489">then it has an algorithm which is used</span> <span data-start="258.489" data-end="259.93">to generate a signature which is the</span> <span data-start="259.93" data-end="262.18">last part of it and then in the middle</span> <span data-start="262.18" data-end="264.19">we have a payload and this payload you</span> <span data-start="264.19" data-end="264.88">can have</span> <span data-start="264.88" data-end="266.95">arbitrary data now the header and the</span> <span data-start="266.95" data-end="268.72">payload you should be aware are not in</span> <span data-start="268.72" data-end="271.24">like encrypted they're simply base64</span> <span data-start="271.24" data-end="273.16">encoded so you should never have like</span> <span data-start="273.16" data-end="274.96">sensible data in there anyway it's like</span> <span data-start="274.96" data-end="276.31">there shouldn't be a password in there</span> <span data-start="276.31" data-end="280.03">please don't put a password in there but</span> <span data-start="280.03" data-end="281.32">like to make sure that this can't be</span> <span data-start="281.32" data-end="283.39">like temporary with we actually have a</span> <span data-start="283.39" data-end="285.73">signature in our case we can see the</span> <span data-start="285.73" data-end="287.26">signature right now it's invalid because</span> </p>
<p><span data-start="287.26" data-end="289.39">I'm trying to verify it verified against</span> <span data-start="289.39" data-end="291.49">a secret called secret and I was smart</span> <span data-start="291.49" data-end="295.09">enough to not use that as my secret now</span> <span data-start="295.09" data-end="296.8">the thing is if you if you look at the</span> <span data-start="296.8" data-end="299.38">spec of jobs there's a bunch of</span> <span data-start="299.38" data-end="301.24">algorithms that this should support and</span> <span data-start="301.24" data-end="304.84">one of them is called none which you as</span> <span data-start="304.84" data-end="306.28">you can see the signature disappears</span> <span data-start="306.28" data-end="307.99">because we're just simply not generating</span> <span data-start="307.99" data-end="311.11">a signature and this is sort of meant to</span> <span data-start="311.11" data-end="314.11">be for you know like non sensitive data</span> <span data-start="314.11" data-end="315.88">if you just want to try to transmit data</span> <span data-start="315.88" data-end="318.64">in like a standardized format the thing</span> <span data-start="318.64" data-end="322.42">though is that we can we can try and see</span> <span data-start="322.42" data-end="326.23">if my library is weak enough to fail</span> <span data-start="326.23" data-end="328.83">with this so we switch the role to admin</span> <span data-start="328.83" data-end="332.92">and just submit this and if we refresh</span> <span data-start="332.92" data-end="334.9">the page now let's see if you notice any</span> <span data-start="334.9" data-end="337.72">changes we're now able to authenticate</span> <span data-start="337.72" data-end="339.79">as an admin in fact we wouldn't have had</span> <span data-start="339.79" data-end="341.23">to login in the first place we could</span> <span data-start="341.23" data-end="342.73">have just generated this token um</span> <span data-start="342.73" data-end="346.12">because I'm verifying this token and</span> <span data-start="346.12" data-end="347.74">then take that as a source of truth on</span> <span data-start="347.74" data-end="349.84">my website which is what most websites</span> <span data-start="349.84" data-end="354.97">actually do and that's as you can see</span> <span data-start="354.97" data-end="356.92">not great because like we could log in</span> <span data-start="356.92" data-end="359.5">as any music so how can we protect</span> <span data-start="359.5" data-end="361.39">ourselves from that the first thing you</span> <span data-start="361.39" data-end="363.16">should do is you should really use HTTP</span> <span data-start="363.16" data-end="365.17">only cookies if you're if there's no</span> <span data-start="365.17" data-end="366.67">reason for it to be accessible in</span> </p>
<p><span data-start="366.67" data-end="368.32">JavaScript and in this case the</span> <span data-start="368.32" data-end="370.12">authentication token there is really no</span> <span data-start="370.12" data-end="372.52">use for it to be access accessible</span> <span data-start="372.52" data-end="374.17">JavaScript you should also make sure</span> <span data-start="374.17" data-end="375.94">that it's signed meaning it's signed</span> <span data-start="375.94" data-end="377.53">with a secret so that nobody else can</span> <span data-start="377.53" data-end="380.05">temper with it and it's secure meaning</span> <span data-start="380.05" data-end="381.37">it's only transfer via a secure</span> <span data-start="381.37" data-end="383.95">connection but then there's also the</span> <span data-start="383.95" data-end="386.8">fact that you should use as secure jaat</span> <span data-start="386.8" data-end="388.93">implementations so the library that I</span> <span data-start="388.93" data-end="390.76">was actually using is Jason web token</span> <span data-start="390.76" data-end="393.13">but I was using an old version of it and</span> <span data-start="393.13" data-end="394.87">the old version has two drawbacks it</span> <span data-start="394.87" data-end="396.4">doesn't allow you to whitelist</span> <span data-start="396.4" data-end="398.9">algorithms meaning specifying Oh</span> <span data-start="398.9" data-end="400.25">only the algorithms that should be</span> <span data-start="400.25" data-end="401.9">supported in this case I really just</span> <span data-start="401.9" data-end="405.08">want to support HS 256 and then good</span> <span data-start="405.08" data-end="406.79">implementations also have this fallback</span> <span data-start="406.79" data-end="409.729">where if you're trying to verify a job</span> <span data-start="409.729" data-end="412.13">that has no signature and you're trying</span> <span data-start="412.13" data-end="414.8">to verify it with a like with a secret</span> <span data-start="414.8" data-end="417.259">then this should fail like if the secret</span> <span data-start="417.259" data-end="420.139">isn't null this should always fail so if</span> <span data-start="420.139" data-end="421.58">you're if you're up to date with your</span> <span data-start="421.58" data-end="424.46">dependencies here you'll be able to have</span> <span data-start="424.46" data-end="428.27">not even that's Equifax and instead have</span> <span data-start="428.27" data-end="429.919">like a secure implementation if you're</span> <span data-start="429.919" data-end="431.36">not familiar with the accurate fact</span> <span data-start="431.36" data-end="432.949">story you should look that up but</span> <span data-start="432.949" data-end="434.72">basically that was a massive hack that</span> <span data-start="434.72" data-end="436.88">happened in the u.s. purely because the</span> <span data-start="436.88" data-end="438.229">company wasn't up to date with their</span> <span data-start="438.229" data-end="439.88">with their software and there was a</span> <span data-start="439.88" data-end="443.81">known vulnerability around this cool so</span> </p>
<p><span data-start="443.81" data-end="446.09">I said this is a social network so how</span> <span data-start="446.09" data-end="447.8">busy let me fix this because it's</span> <span data-start="447.8" data-end="450.56">getting really warm under this so</span> <span data-start="450.56" data-end="452.36">obviously you're able to post things on</span> <span data-start="452.36" data-end="454.58">this so if we go back here I said this</span> <span data-start="454.58" data-end="457.12">is markdown so we can do things like</span> <span data-start="457.12" data-end="464.51">hello Jess I'm con are you and we can</span> <span data-start="464.51" data-end="466.639">post this all this does is again it does</span> <span data-start="466.639" data-end="469.37">an HTTP POST request here with some form</span> <span data-start="469.37" data-end="471.77">data in the bottom with the actual</span> <span data-start="471.77" data-end="474.199">message and then we use the auth token</span> <span data-start="474.199" data-end="476.93">to verify that like on which user's</span> <span data-start="476.93" data-end="479.599">behalf we should post this now the</span> <span data-start="479.599" data-end="481.52">problem with that is that this can be</span> <span data-start="481.52" data-end="483.47">used by attackers to perform so-called</span> <span data-start="483.47" data-end="486.409">cross-site request forgery since we're</span> <span data-start="486.409" data-end="488.87">using cookies the browser sort of overly</span> <span data-start="488.87" data-end="491.599">eager to see hey they're like I have</span> <span data-start="491.599" data-end="493.039">cookies for this page so I'll just</span> <span data-start="493.039" data-end="494.33">submit them you know like I will just</span> <span data-start="494.33" data-end="496.4">send them with every form request even</span> <span data-start="496.4" data-end="499.159">if they're on a different domain so that</span> <span data-start="499.159" data-end="500.69">the basically an attacker can</span> <span data-start="500.69" data-end="503.24">impersonate you by just kind of getting</span> <span data-start="503.24" data-end="505.039">you to if you're logged in on a page</span> <span data-start="505.039" data-end="507.02">already to go to a website and then they</span> <span data-start="507.02" data-end="510.199">can do things on your behalf so the</span> <span data-start="510.199" data-end="511.43">first thing that happened was when I</span> <span data-start="511.43" data-end="515.93">went to this page this is a target blank</span> <span data-start="515.93" data-end="517.729">link so just a normal link that should</span> <span data-start="517.729" data-end="518.75">open in a new window</span> <span data-start="518.75" data-end="520.94">the problem with target blank links is</span> <span data-start="520.94" data-end="524.15">that the new page has access to the</span> <span data-start="524.15" data-end="526.4">opening page by using window dot opener</span> <span data-start="526.4" data-end="528.709">and window dot opener has a location</span> <span data-start="528.709" data-end="530.36">property and that works just like the</span> <span data-start="530.36" data-end="532.37">location property that you would use</span> <span data-start="532.37" data-end="534.14">your normal window meaning you can</span> <span data-start="534.14" data-end="536.839">redirect page requests you can redirect</span> <span data-start="536.839" data-end="539.45">the original page to anything else and</span> <span data-start="539.45" data-end="541.279">that's what an attacker could use then</span> <span data-start="541.279" data-end="543.8">in our case we just navigated it to like</span> <span data-start="543.8" data-end="545.39">a harmless page but this could be a</span> <span data-start="545.39" data-end="547.37">phishing page as well and users would</span> <span data-start="547.37" data-end="549.11">likely not detect that so in the case of</span> <span data-start="549.11" data-end="551.51">something like Facebook if you would</span> <span data-start="551.51" data-end="553.22">post a post a link there and they would</span> <span data-start="553.22" data-end="556.37">use target blank links the new page</span> <span data-start="556.37" data-end="558.26">could then do window that opener and</span> <span data-start="558.26" data-end="560.21">have redirect you to something that</span> <span data-start="560.21" data-end="561.89">looks like Facebook and most users would</span> <span data-start="561.89" data-end="563.45">not detect this unless they see it in</span> <span data-start="563.45" data-end="566.48">the URL bar unfortunately there's a way</span> <span data-start="566.48" data-end="568.52">to protect yourself against that there's</span> <span data-start="568.52" data-end="573.98">actually yeah there's two properties</span> <span data-start="573.98" data-end="576.11">that you should add under the rel</span> <span data-start="576.11" data-end="578.42">attribute which is no opener and no</span> <span data-start="578.42" data-end="580.4">refers oh no opener make sure in most</span> <span data-start="580.4" data-end="582.62">browsers to just not give the new page</span> <span data-start="582.62" data-end="585.23">access to window not opener and then no</span> <span data-start="585.23" data-end="587.87">refer will make sure that on the</span> <span data-start="587.87" data-end="589.7">browsers that don't support no opener</span> <span data-start="589.7" data-end="592.64">that you will actually not have access</span> <span data-start="592.64" data-end="597.17">to the refer link to protect yourself</span> <span data-start="597.17" data-end="599.27">from cross-site request forgeries or sea</span> <span data-start="599.27" data-end="602.48">surface acts this is fairly</span> <span data-start="602.48" data-end="604.25">straightforward as well it's a bit more</span> <span data-start="604.25" data-end="606.38">work because what we need to do is when</span> <span data-start="606.38" data-end="608.18">we get the page that you want to do the</span> <span data-start="608.18" data-end="610.339">like submission later on we need to</span> <span data-start="610.339" data-end="612.529">generate a C surf token so that's just a</span> <span data-start="612.529" data-end="616.279">unique token for the user that we will</span> <span data-start="616.279" data-end="618.23">set on the one hand as a cookie in our</span> <span data-start="618.23" data-end="620.45">case underscore C surf and then we will</span> <span data-start="620.45" data-end="622.45">also submit that as on the page</span> <span data-start="622.45" data-end="625.01">somewhere as for example a hidden input</span> <span data-start="625.01" data-end="627.11">field and then when the when we do the</span> <span data-start="627.11" data-end="628.79">actual post requests instead of just</span> <span data-start="628.79" data-end="630.65">submitting the cookie we will also</span> <span data-start="630.65" data-end="632.93">manually submit this value either as a</span> <span data-start="632.93" data-end="636.32">header or we will submit it as a request</span> <span data-start="636.32" data-end="639.26">body or query parameter and the reason</span> <span data-start="639.26" data-end="640.37">why this actually protects you from</span> <span data-start="640.37" data-end="641.87">these sort of attacks is that the</span> <span data-start="641.87" data-end="644.36">attacker would be able to kind of</span> <span data-start="644.36" data-end="646.04">leverage the fact that the browser sends</span> <span data-start="646.04" data-end="648.11">these cookies automatically but there's</span> <span data-start="648.11" data-end="650.51">no way for the user to read the attacker</span> <span data-start="650.51" data-end="652.73">to read the cookie because that's</span> <span data-start="652.73" data-end="656.18">blocked by only being accessible from</span> <span data-start="656.18" data-end="658.459">your own domain so that's why this</span> <span data-start="658.459" data-end="661.76">protection works now let's talk about</span> <span data-start="661.76" data-end="663.589">little Bobbie tables younger brother the</span> <span data-start="663.589" data-end="665.87">cross-site scripting attack</span> <span data-start="665.87" data-end="667.88">if you're not familiar with little Bobby</span> <span data-start="667.88" data-end="670.58">tables it originates from an xkcd comic</span> <span data-start="670.58" data-end="674.39">where family of hackers named their kid</span> <span data-start="674.39" data-end="676.279">like a sequel injection and the director</span> <span data-start="676.279" data-end="677.839">of the school is sort of mad because it</span> <span data-start="677.839" data-end="680.69">dropped all the student records because</span> <span data-start="680.69" data-end="684.05">they weren't sanitizing their inputs and</span> <span data-start="684.05" data-end="686.18">if we talk about cross-site scripting</span> <span data-start="686.18" data-end="687.65">this is one of the most famous</span> <span data-start="687.65" data-end="690.589">cross-site scripting attacks does anyone</span> <span data-start="690.589" data-end="692.21">have an idea what this source code is</span> <span data-start="692.21" data-end="694.91">from so if I haven't seen anyone who</span> <span data-start="694.91" data-end="698.48">guessed this all right so this is from a</span> <span data-start="698.48" data-end="701.36">famous attack called the myspace war</span> <span data-start="701.36" data-end="704.66">more Sammy worm or JC JC or worm and</span> <span data-start="704.66" data-end="706.43">that was a cross-site scripting attack</span> <span data-start="706.43" data-end="708.89">from 2005 performed by a person called</span> </p>
<p><span data-start="708.89" data-end="712.25">Sammy and what this would do is if he</span> <span data-start="712.25" data-end="715.31">posted this on his page and I would send</span> <span data-start="715.31" data-end="717.23">friend requests to everyone who visited</span> <span data-start="717.23" data-end="719.33">his page and then post that on their</span> <span data-start="719.33" data-end="721.07">page and then send friend requests to</span> <span data-start="721.07" data-end="723.35">them that's also how they caught him</span> <span data-start="723.35" data-end="725.12">because Sammy had overnight several</span> <span data-start="725.12" data-end="727.01">million friends on MySpace</span> <span data-start="727.01" data-end="729.08">which is a slight indicator that there</span> <span data-start="729.08" data-end="733.01">he did something and the thing with the</span> <span data-start="733.01" data-end="734.779">reason why this is interesting is that</span> <span data-start="734.779" data-end="737.14">myspace actually had access s protection</span> <span data-start="737.14" data-end="741.29">but Sammy was able to circumvent this</span> </p>
<p><span data-start="741.29" data-end="743.57">XSS protection and two of the tricks</span> <span data-start="743.57" data-end="745.49">that I personally found interesting were</span> <span data-start="745.49" data-end="749.42">these two so there wasn't any</span> <span data-start="749.42" data-end="752.33">possibility to use inline script tags so</span> <span data-start="752.33" data-end="754.339">Sammy couldn't use that however what</span> <span data-start="754.339" data-end="757.25">they allow was to use CSS so he created</span> <span data-start="757.25" data-end="759.86">a div tag and used CSS and specify the</span> <span data-start="759.86" data-end="762.52">background URL to then have a JavaScript</span> <span data-start="762.52" data-end="764.87">protocol in there that let him write</span> </p>
<p><span data-start="764.87" data-end="767.839">JavaScript they disabled though to use</span> <span data-start="767.839" data-end="770.9">quotes in there so what he had to do is</span> <span data-start="770.9" data-end="772.85">he had to basically eval another</span> <span data-start="772.85" data-end="774.709">attribute that he would pick out of the</span> </p>
<p><span data-start="774.709" data-end="776.87">Dom in this case it was just the same</span> <span data-start="776.87" data-end="779.51">diff tag and then eval that code where</span> <span data-start="779.51" data-end="781.279">you could write the code the other thing</span> <span data-start="781.279" data-end="783.5">is they blocked certain keywords such as</span> <span data-start="783.5" data-end="786.86">inner HTML or onreadystatechange which</span> <span data-start="786.86" data-end="789.17">is used on Ajax requests if you are not</span> <span data-start="789.17" data-end="791.959">using something like jQuery or if you're</span> <span data-start="791.959" data-end="794.54">not using something like fetch these</span> <span data-start="794.54" data-end="797.29">days which wasn't around at that time</span> <span data-start="797.29" data-end="799.52">however he circumvented</span> <span data-start="799.52" data-end="801.649">by basically turning those words into</span> <span data-start="801.649" data-end="803.69">strings chopping them in the middle</span> <span data-start="803.69" data-end="805.16">recon catenae ting them and then</span> <span data-start="805.16" data-end="806.779">availing that because no regular</span> <span data-start="806.779" data-end="811.339">expression was able to catch that and he</span> <span data-start="811.339" data-end="812.66">used a bunch of other tricks as well if</span> <span data-start="812.66" data-end="814.13">you want to figure if you want to read</span> <span data-start="814.13" data-end="815.089">about them you should check out that</span> <span data-start="815.089" data-end="818.39">blog post but the bottom line here is</span> <span data-start="818.39" data-end="821.42">that it's really hard serve to block XSS</span> <span data-start="821.42" data-end="823.58">and now you might say well I could just</span> <span data-start="823.58" data-end="826.1">block eval right but javascript is this</span> <span data-start="826.1" data-end="828.5">beautiful language that allows you to</span> <span data-start="828.5" data-end="830.6">write JavaScript code in a million ways</span> <span data-start="830.6" data-end="834.62">so all of these to eval and those are</span> <span data-start="834.62" data-end="836.81">not the only four solutions like we can</span> <span data-start="836.81" data-end="839.12">do way more marching clapper he is</span> <span data-start="839.12" data-end="840.589">actually from Hamburg he did a great</span> <span data-start="840.589" data-end="843.529">talk and just come Iceland about how you</span> <span data-start="843.529" data-end="847.19">grow JavaScript in Hebrew and in sort of</span> <span data-start="847.19" data-end="848.99">all sorts of other languages including</span> <span data-start="848.99" data-end="851.11">languages from the Star Wars universe</span> <span data-start="851.11" data-end="853.37">sort of like you can write this and any</span> <span data-start="853.37" data-end="854.899">kind of character set so you should</span> <span data-start="854.899" data-end="857.99">really just not trust that you can just</span> <span data-start="857.99" data-end="862.279">block things by regular expression so</span> <span data-start="862.279" data-end="864.23">bottom line is blocking XSS is not</span> <span data-start="864.23" data-end="866.6">trivial and in fact I have a</span> <span data-start="866.6" data-end="869.12">vulnerability on here as well so if we</span> <span data-start="869.12" data-end="872.12">go here the library that I'm using to</span> <span data-start="872.12" data-end="875.06">convert the markdown to HTML is called</span> <span data-start="875.06" data-end="877.01">marked it's one of the most popular</span> <span data-start="877.01" data-end="880.339">libraries on NPM for to do that and the</span> <span data-start="880.339" data-end="882.829">version that I'm using is not the latest</span> <span data-start="882.829" data-end="884.72">but the second to latest or something</span> <span data-start="884.72" data-end="886.399">and that one actually has a</span> <span data-start="886.399" data-end="888.95">vulnerability so by default it has a</span> <span data-start="888.95" data-end="892.49">sanitize function so things like alert</span> <span data-start="892.49" data-end="895.93">hello won't work but let's just be sure</span> <span data-start="895.93" data-end="898.69">so this doesn't work it's being escaped</span> <span data-start="898.69" data-end="901.67">now that we can use a similar trick -</span> </p>
<p><span data-start="901.67" data-end="904.37">Sammis and use the javascript protocol</span> <span data-start="904.37" data-end="905.779">here and we're just going to create a</span> <span data-start="905.779" data-end="908.149">link here so that's how you create a</span> <span data-start="908.149" data-end="911.149">link and markdown and we're going to try</span> <span data-start="911.149" data-end="914.18">to do alert one here I'm going to copy</span> <span data-start="914.18" data-end="916.61">this and this is being escaped as well</span> <span data-start="916.61" data-end="918.649">because the library is smart enough to</span> <span data-start="918.649" data-end="920.24">detect that that's essentially just</span> <span data-start="920.24" data-end="923.24">writing inline JavaScript now this is</span> <span data-start="923.24" data-end="924.829">where it becomes fun I'm just going to</span> <span data-start="924.829" data-end="928.43">make this a bit bigger I'm not sure how</span> <span data-start="928.43" data-end="929.6">familiar you are with character</span> <span data-start="929.6" data-end="932.209">encodings but you can express a closing</span> <span data-start="932.209" data-end="932.52">prayer and</span> </p>
<p><span data-start="932.52" data-end="935.49">Jesus as an percent hash 41 semicolon</span> <span data-start="935.49" data-end="938.34">that's literally the same character and</span> <span data-start="938.34" data-end="942.47">if you look up your ASCII table colin is</span> <span data-start="942.47" data-end="947.07">ampersand hash 58 semicolon and we post</span> <span data-start="947.07" data-end="948.33">this we'll see you that's already a</span> <span data-start="948.33" data-end="950.28">difference right there is no closing</span> <span data-start="950.28" data-end="951.6">parenthesis here anymore</span> <span data-start="951.6" data-end="954.21">there's just no text so we're getting</span> <span data-start="954.21" data-end="955.5">somewhere</span> <span data-start="955.5" data-end="956.91">but it's still smart enough to figure</span> <span data-start="956.91" data-end="959.07">out that like hey ampersand hash 58</span> <span data-start="959.07" data-end="960.69">that's a semi that's a call in so I'm</span> <span data-start="960.69" data-end="965.22">just gonna block this however if we add</span> <span data-start="965.22" data-end="967.56">this small word this the best word than</span> <span data-start="967.56" data-end="969.51">JavaScript because we never know what it</span> <span data-start="969.51" data-end="973.71">is the story looks a bit different</span> <span data-start="973.71" data-end="975.66">because suddenly the link appeared and</span> <span data-start="975.66" data-end="977.28">what happens here and if we click this</span> <span data-start="977.28" data-end="980.1">we'll see that it actually works the</span> <span data-start="980.1" data-end="981.69">reason why this works is that the</span> <span data-start="981.69" data-end="983.7">browser tries to be helpful and the</span> <span data-start="983.7" data-end="985.29">browser sees oh yeah you're using</span> <span data-start="985.29" data-end="988.53">ampersand hash 58 I don't see a</span> <span data-start="988.53" data-end="990.36">semicolon but I think that's just a typo</span> <span data-start="990.36" data-end="993.09">so I'll just insert that for you and</span> <span data-start="993.09" data-end="995.34">then everything afterwards turns valid</span> </p>
<p><span data-start="995.34" data-end="997.17">JavaScript so that's why I use this in</span> <span data-start="997.17" data-end="998.46">this case because it's a valid</span> <span data-start="998.46" data-end="1000.44">JavaScript I thought would write some</span> <span data-start="1000.44" data-end="1002.06">other things that would fail and</span> <span data-start="1002.06" data-end="1004.16">wouldn't execute the next slide but</span> <span data-start="1004.16" data-end="1005.81">because it's valid JavaScript this just</span> <span data-start="1005.81" data-end="1008.99">works shoutout to guy from sneek who</span> <span data-start="1008.99" data-end="1011.18">actually showed this to me they were</span> <span data-start="1011.18" data-end="1012.65">also the ones who fixed this in this</span> <span data-start="1012.65" data-end="1014.45">library unfortunately there's still a</span> <span data-start="1014.45" data-end="1016.82">vulnerability in this library around</span> <span data-start="1016.82" data-end="1018.62">data your eyes but it's a bit harder to</span> <span data-start="1018.62" data-end="1021.11">demonstrate so I decided to show this</span> <span data-start="1021.11" data-end="1023.15">one but the bottom line here is really</span> <span data-start="1023.15" data-end="1025.61">that encoding can be really dangerous</span> <span data-start="1025.61" data-end="1027.23">and there are a million ways to express</span> <span data-start="1027.23" data-end="1030.38">the same code so just never trust user</span> <span data-start="1030.38" data-end="1034.61">input be skeptical as you can also don't</span> <span data-start="1034.61" data-end="1036.8">trust CSS because CSS can be dangerous</span> <span data-start="1036.8" data-end="1038.81">as well Jake Archibald recently</span> <span data-start="1038.81" data-end="1040.459">published a nice blog post about this</span> <span data-start="1040.459" data-end="1042.65">kind of showing how you should just not</span> <span data-start="1042.65" data-end="1045.2">trust third-party CSS because there are</span> <span data-start="1045.2" data-end="1046.459">a bunch of things you can do about this</span> <span data-start="1046.459" data-end="1049.1">as well there it's that's just an talk</span> <span data-start="1049.1" data-end="1052.46">by itself all right let's talk about</span> </p>
<p><span data-start="1052.46" data-end="1055.25">Jason P so Jason P if you're not</span> <span data-start="1055.25" data-end="1057.77">familiar with that has especially been</span> <span data-start="1057.77" data-end="1059.96">used in the past to circumvent same</span> <span data-start="1059.96" data-end="1062.03">origin policy so that's the idea of</span> <span data-start="1062.03" data-end="1065.69">loading data asynchronously on your page</span> <span data-start="1065.69" data-end="1069.71">from from a separate domain and that's</span> <span data-start="1069.71" data-end="1071.87">by default blocked with Ajax requests</span> <span data-start="1071.87" data-end="1073.429">but there's a way to kind of like</span> <span data-start="1073.429" data-end="1075.5">circumvent that and the idea there is</span> <span data-start="1075.5" data-end="1078.2">you create a global function and then</span> <span data-start="1078.2" data-end="1080.75">you insert dynamically a script tag in</span> <span data-start="1080.75" data-end="1084.279">our case we just placed it in there and</span> <span data-start="1084.279" data-end="1087.2">this is a JSONP enabled endpoint meaning</span> <span data-start="1087.2" data-end="1088.879">it gets some query parameter with a</span> <span data-start="1088.879" data-end="1090.95">callback name and what it will do is</span> <span data-start="1090.95" data-end="1093.23">instead of returning the plain jason it</span> <span data-start="1093.23" data-end="1096.559">will wrap the json into a into a</span> <span data-start="1096.559" data-end="1099.379">function call so that basically this is</span> <span data-start="1099.379" data-end="1101.769">being triggered as a callback function</span> <span data-start="1101.769" data-end="1105.139">now this by itself is harmless unless</span> <span data-start="1105.139" data-end="1108.59">you crapoly implement it and that means</span> <span data-start="1108.59" data-end="1110.12">that you're not verifying what you're</span> <span data-start="1110.12" data-end="1112.789">passing in here is a callback and if we</span> <span data-start="1112.789" data-end="1114.5">have that and we have a cross-site</span> <span data-start="1114.5" data-end="1116.6">scripting vulnerability this is where</span> <span data-start="1116.6" data-end="1118.85">the fun part starts so for whatever</span> <span data-start="1118.85" data-end="1123.409">reason I was logged out again so and</span> <span data-start="1123.409" data-end="1126.289">again so how many of you are familiar</span> <span data-start="1126.289" data-end="1129.74">with service workers all right so if</span> <span data-start="1129.74" data-end="1131.09">you're not familiar with service workers</span> <span data-start="1131.09" data-end="1133.46">there and network proxy that you can</span> <span data-start="1133.46" data-end="1136.129">install meaning it can intercept network</span> <span data-start="1136.129" data-end="1139.789">requests and sort of is often being used</span> <span data-start="1139.789" data-end="1141.83">to create offline available apps so you</span> <span data-start="1141.83" data-end="1143.539">can cache things manually and you can</span> <span data-start="1143.539" data-end="1145.789">control the cache now this is a very</span> <span data-start="1145.789" data-end="1147.71">powerful feature and that's why the</span> <span data-start="1147.71" data-end="1149.6">browser's only allow you to install it</span> <span data-start="1149.6" data-end="1153.98">from your own domain now so that an</span> <span data-start="1153.98" data-end="1156.259">attacker can install one now if you have</span> <span data-start="1156.259" data-end="1158.6">a JSONP implementation that is</span> <span data-start="1158.6" data-end="1161.179">vulnerable meaning it doesn't verify</span> <span data-start="1161.179" data-end="1162.59">what you're passing and as a callback</span> <span data-start="1162.59" data-end="1164.84">you have a page on your own domain that</span> <span data-start="1164.84" data-end="1166.61">allows you to generate any JavaScript</span> <span data-start="1166.61" data-end="1168.889">and that's what I'm doing here so if I</span> <span data-start="1168.889" data-end="1172.97">install this if I post this and we click</span> <span data-start="1172.97" data-end="1178.1">this link we will see first nothing but</span> <span data-start="1178.1" data-end="1180.5">then I refresh the page and I can</span> <span data-start="1180.5" data-end="1182.21">refresh this as often as possible but</span> </p>
<p><span data-start="1182.21" data-end="1184.1">I'm only seeing this hacked because what</span> <span data-start="1184.1" data-end="1185.299">happened and actually that's where I</span> <span data-start="1185.299" data-end="1187.19">need the dev tools but let's see if we</span> <span data-start="1187.19" data-end="1190.34">can how they're working again I have no</span> <span data-start="1190.34" data-end="1193.19">clue what's happening here so we can see</span> <span data-start="1193.19" data-end="1195.529">that it installed a serviceworker and we</span> <span data-start="1195.529" data-end="1197.59">can see that this is a very long URL for</span> </p>
<p><span data-start="1197.59" data-end="1199.059">Service Worker because what I'm doing is</span> <span data-start="1199.059" data-end="1200.95">in the callback I'm specifying the</span> <span data-start="1200.95" data-end="1203.23">entire source code of this Service</span> <span data-start="1203.23" data-end="1205.36">Worker so we click here that's the</span> <span data-start="1205.36" data-end="1208.6">entire code basically it's a bunch of</span> <span data-start="1208.6" data-end="1211.63">codes ending with a slash slash to kind</span> <span data-start="1211.63" data-end="1213.61">of comment out the entire code mainly</span> <span data-start="1213.61" data-end="1215.65">because we don't care about it like the</span> <span data-start="1215.65" data-end="1218.38">entire payload but we could also just</span> <span data-start="1218.38" data-end="1222.85">keep that going now in here all we do is</span> <span data-start="1222.85" data-end="1225.159">we say that like hey any request that</span> <span data-start="1225.159" data-end="1228.669">isn't to port 4000 we just override it</span> <span data-start="1228.669" data-end="1233.039">with an h1 hacked and some other code</span> <span data-start="1233.039" data-end="1236.35">now this is a very obvious one to pull</span> <span data-start="1236.35" data-end="1238.48">off with this what you would typically</span> <span data-start="1238.48" data-end="1240.73">see an attacker do in this situation</span> <span data-start="1240.73" data-end="1243.039">would be to insert a script tag secretly</span> <span data-start="1243.039" data-end="1245.86">without you ever noticing it because it</span> <span data-start="1245.86" data-end="1247.539">doesn't it they don't have to overwrite</span> <span data-start="1247.539" data-end="1250.149">the entire request response they can</span> <span data-start="1250.149" data-end="1251.919">just insert something and then keep it</span> <span data-start="1251.919" data-end="1253.6">going so you would never notice this</span> <span data-start="1253.6" data-end="1255.669">like you if this is installed it's</span> <span data-start="1255.669" data-end="1258.82">really hard to detect unless someone</span> <span data-start="1258.82" data-end="1260.2">actually reads the source code of the</span> </p>
<p><span data-start="1260.2" data-end="1262.12">Service Worker they have installed which</span> <span data-start="1262.12" data-end="1264.45">at least I don't do for other websites</span> <span data-start="1264.45" data-end="1266.919">I'm not sure if that's something you do</span> <span data-start="1266.919" data-end="1271.09">as a hobby but if we unregister this and</span> <span data-start="1271.09" data-end="1274.179">refresh the page it works again except</span> <span data-start="1274.179" data-end="1275.5">that like you don't see it so I'm gonna</span> <span data-start="1275.5" data-end="1279.309">close them there we go there we go so</span> <span data-start="1279.309" data-end="1281.95">now you know the page works again cool</span> <span data-start="1281.95" data-end="1283.929">so luckily there's a for a lot of these</span> <span data-start="1283.929" data-end="1286.69">vulnerabilities there's a sort of hero</span> <span data-start="1286.69" data-end="1288.549">in town that can protect you called</span> <span data-start="1288.549" data-end="1291.34">content security policy and what this</span> <span data-start="1291.34" data-end="1293.409">does is it allows you to specify a set</span> <span data-start="1293.409" data-end="1295.149">of rules that the browser should play by</span> <span data-start="1295.149" data-end="1298.299">with respect to your resources so if we</span> <span data-start="1298.299" data-end="1300.97">go to this page which all it the only</span> <span data-start="1300.97" data-end="1303.49">difference it does is it applies ESP on</span> <span data-start="1303.49" data-end="1306.39">this so the first thing we see is that</span> <span data-start="1306.39" data-end="1309.1">down here there used to be images but</span> <span data-start="1309.1" data-end="1311.83">there they disappeared and if we click</span> <span data-start="1311.83" data-end="1314.11">here that doesn't work anymore and this</span> <span data-start="1314.11" data-end="1317.62">doesn't work either so if we look here</span> <span data-start="1317.62" data-end="1320.169">and we go into the console pane we see a</span> <span data-start="1320.169" data-end="1321.73">bunch of red messages and all of them</span> <span data-start="1321.73" data-end="1323.26">have go in the same direction of saying</span> <span data-start="1323.26" data-end="1326.89">hey all of these blocks violate the</span> <span data-start="1326.89" data-end="1330.93">content security policy or CSP so</span> <span data-start="1330.93" data-end="1333.96">look like it's essentially just an HTTP</span> <span data-start="1333.96" data-end="1336.3">header that defines these rules to play</span> <span data-start="1336.3" data-end="1339.81">by so in my case the CSP says hey the</span> <span data-start="1339.81" data-end="1343.11">default source that we allow is anything</span> <span data-start="1343.11" data-end="1345.84">from my own domain however for scripts</span> <span data-start="1345.84" data-end="1347.88">and styles I only want to allow things</span> <span data-start="1347.88" data-end="1349.77">that use a certain ons so that's</span> <span data-start="1349.77" data-end="1352.08">something that changes on every request</span> <span data-start="1352.08" data-end="1353.76">so attackers can't hard code this</span> <span data-start="1353.76" data-end="1356.13">meaning only things that you on request</span> <span data-start="1356.13" data-end="1358.26">are convinced that should be there can</span> <span data-start="1358.26" data-end="1359.58">be there</span> </p>
<p><span data-start="1359.58" data-end="1362.46">I completely block objects because I</span> <span data-start="1362.46" data-end="1364.41">don't see any use case for flash on my</span> <span data-start="1364.41" data-end="1367.5">page in fact I don't see a use case for</span> <span data-start="1367.5" data-end="1369.66">flash on any page but feel free to</span> <span data-start="1369.66" data-end="1372.99">convince me of other things for images I</span> <span data-start="1372.99" data-end="1374.46">only allow things that are hosts on my</span> <span data-start="1374.46" data-end="1376.83">own domain or if I'm API dot adorable</span> <span data-start="1376.83" data-end="1381">i/o which I use for these adorable icons</span> <span data-start="1381" data-end="1383.07">here some of them are adorable some of</span> <span data-start="1383.07" data-end="1388.65">them are sort of weird and that's why</span> <span data-start="1388.65" data-end="1390.54">for example the Twitter images didn't</span> <span data-start="1390.54" data-end="1392.12">work that were further down on the page</span> </p>
<p><span data-start="1392.12" data-end="1397.26">I block all fonts or I block all fonts</span> <span data-start="1397.26" data-end="1398.94">that are not on my own domain or on</span> <span data-start="1398.94" data-end="1401.04">google fonts and I block all mixed</span> <span data-start="1401.04" data-end="1403.17">content meaning no HTTP content on the</span> <span data-start="1403.17" data-end="1406.08">page as well as a report your I which is</span> <span data-start="1406.08" data-end="1407.94">where it would report any kind of like</span> <span data-start="1407.94" data-end="1410.22">failed request so if we go to my</span> <span data-start="1410.22" data-end="1417.06">terminal we can see we can see all these</span> <span data-start="1417.06" data-end="1419.46">requests being made here kind of like</span> <span data-start="1419.46" data-end="1420.96">giving you information about hey what</span> <span data-start="1420.96" data-end="1423.54">was violated there's a way to run this</span> <span data-start="1423.54" data-end="1426.27">in report only mode as well so if you're</span> <span data-start="1426.27" data-end="1427.95">trying to gradually move over to that</span> <span data-start="1427.95" data-end="1430.35">you can say that like hey just report</span> <span data-start="1430.35" data-end="1432.21">don't actually block the resources which</span> <span data-start="1432.21" data-end="1433.74">is a good way to kind of like detect</span> <span data-start="1433.74" data-end="1435.42">during development and stuff like that</span> <span data-start="1435.42" data-end="1437.1">like hey which is like what are actually</span> <span data-start="1437.1" data-end="1438.93">things that are being blocked by this</span> <span data-start="1438.93" data-end="1441.18">and are we destroying the functionality</span> <span data-start="1441.18" data-end="1443.12">or something</span> </p>
<p><span data-start="1443.12" data-end="1445.53">CSP though shouldn't be your like</span> <span data-start="1445.53" data-end="1448.14">security policy like you shouldn't just</span> <span data-start="1448.14" data-end="1450.3">rely on that and be like yep nothing can</span> <span data-start="1450.3" data-end="1452.13">happen to me now it should just be a</span> <span data-start="1452.13" data-end="1454.71">safety net because writing really good</span> <span data-start="1454.71" data-end="1458.1">CSP is hard so if you're relying on that</span> <span data-start="1458.1" data-end="1460.17">there was a paper of Google where they</span> <span data-start="1460.17" data-end="1463.77">have looked at CSP policies on famous</span> <span data-start="1463.77" data-end="1465.54">website and a lot of them were</span> <span data-start="1465.54" data-end="1468.09">completely insufficient so you shouldn't</span> <span data-start="1468.09" data-end="1470.22">rely on that as like as a security</span> <span data-start="1470.22" data-end="1472.47">policy always kind of think of all the</span> <span data-start="1472.47" data-end="1474.87">other vulnerabilities I showed you and</span> <span data-start="1474.87" data-end="1476.73">try to fix them just have this as a</span> <span data-start="1476.73" data-end="1478.59">safety net that in case you screwed up</span> <span data-start="1478.59" data-end="1480.12">something or a dependency screwed up</span> <span data-start="1480.12" data-end="1482.96">something that you're you're a bit safer</span> <span data-start="1482.96" data-end="1485.25">other things you should look out for are</span> <span data-start="1485.25" data-end="1487.44">things like click tracking meaning you</span> <span data-start="1487.44" data-end="1489.3">shouldn't allow two iframe your page</span> <span data-start="1489.3" data-end="1491.88">unless you really have a use case for</span> <span data-start="1491.88" data-end="1495.09">that and most pages don't so you can use</span> <span data-start="1495.09" data-end="1496.65">that but I'll do that by an HTTP header</span> <span data-start="1496.65" data-end="1499.44">they can either be deny or self self</span> <span data-start="1499.44" data-end="1500.97">would allow you still to do it on your</span> <span data-start="1500.97" data-end="1502.59">own page then I would just completely</span> <span data-start="1502.59" data-end="1504.87">block it you should check out a library</span> <span data-start="1504.87" data-end="1507.06">libraries like helmet which is a library</span> <span data-start="1507.06" data-end="1509.82">for Express that set certain HTTP</span> <span data-start="1509.82" data-end="1512.07">headers on your request that are just</span> <span data-start="1512.07" data-end="1514.38">good practices for security one of them</span> <span data-start="1514.38" data-end="1517.86">is disallowing the I framing don't show</span> <span data-start="1517.86" data-end="1519.81">versions of fronted libraries and your</span> <span data-start="1519.81" data-end="1521.94">server that's really important because</span> <span data-start="1521.94" data-end="1524.25">that's like helping the attackers to</span> <span data-start="1524.25" data-end="1526.29">like know exactly what they need to do</span> <span data-start="1526.29" data-end="1528.57">because if they know you're using react</span> <span data-start="1528.57" data-end="1532.11">versions 16-point whole point  then</span> <span data-start="1532.11" data-end="1533.37">they know all right those are the</span> <span data-start="1533.37" data-end="1537.09">vulnerabilities I should go for and same</span> <span data-start="1537.09" data-end="1538.41">goes for the server if they know your</span> <span data-start="1538.41" data-end="1540.51">expressed you're using an express server</span> <span data-start="1540.51" data-end="1542.19">they already know that like those are</span> <span data-start="1542.19" data-end="1544.5">the things I want to try uncheck for</span> <span data-start="1544.5" data-end="1546">types of input so if you're expecting</span> <span data-start="1546" data-end="1548.69">for somewhere parameter to be a string</span> <span data-start="1548.69" data-end="1551.04">check that it's really a string because</span> <span data-start="1551.04" data-end="1553.02">some libraries try to be nice to you and</span> <span data-start="1553.02" data-end="1555.48">parse things as objects if they see</span> <span data-start="1555.48" data-end="1558.33">that's a JSON for example with numbers</span> <span data-start="1558.33" data-end="1560.49">and especially with objects this can be</span> <span data-start="1560.49" data-end="1561.99">really dangerous because if you're</span> <span data-start="1561.99" data-end="1564.42">trying to do like no sequel database</span> <span data-start="1564.42" data-end="1567.42">lookup for example in MongoDB for like</span> <span data-start="1567.42" data-end="1570.48">the password being being a string and I</span> <span data-start="1570.48" data-end="1572.4">pass in an object I can do a no sequel</span> <span data-start="1572.4" data-end="1574.5">injection and have login as any user</span> <span data-start="1574.5" data-end="1577.5">through that other things consider</span> <span data-start="1577.5" data-end="1578.52">security audits</span> <span data-start="1578.52" data-end="1582.72">security is hard so contact someone who</span> <span data-start="1582.72" data-end="1584.43">is a security expert if you have someone</span> <span data-start="1584.43" data-end="1586.47">on your team that's great if you don't</span> <span data-start="1586.47" data-end="1588.69">hire someone externally because it's a</span> <span data-start="1588.69" data-end="1590.63">good investment you don't want to be</span> <span data-start="1590.63" data-end="1593.11">thinking about this only when you go</span> <span data-start="1593.11" data-end="1594.49">hacked because at that point it gets</span> <span data-start="1594.49" data-end="1596.92">really expensive stay up to date with</span> <span data-start="1596.92" data-end="1598.809">versions because their dependencies can</span> <span data-start="1598.809" data-end="1601">introduce a bunch of vulnerabilities</span> <span data-start="1601" data-end="1604.75">that you just never think of greenkeeper</span> <span data-start="1604.75" data-end="1607.15">is a great tool for that and use tools</span> <span data-start="1607.15" data-end="1608.86">to detect security vulnerabilities in</span> <span data-start="1608.86" data-end="1611.74">your dependencies so NSP or sneak are</span> <span data-start="1611.74" data-end="1613.929">great for that sneak in fact even</span> <span data-start="1613.929" data-end="1616.059">patches security vulnerabilities for you</span> <span data-start="1616.059" data-end="1618.4">like the data URI one and marked is</span> <span data-start="1618.4" data-end="1620.799">actually patched if you use sneak even</span> <span data-start="1620.799" data-end="1622.09">though it's not patched in the actual</span> <span data-start="1622.09" data-end="1626.41">library to wrap this up use HTTP only</span> <span data-start="1626.41" data-end="1628.059">cookies if there's no reason for them to</span> <span data-start="1628.059" data-end="1630.61">be available in JavaScript be skeptical</span> <span data-start="1630.61" data-end="1633.07">of JW TS just don't treat them as a</span> <span data-start="1633.07" data-end="1635.59">single source of truth and have like an</span> <span data-start="1635.59" data-end="1638.919">up-to-date library use no opener and no</span> <span data-start="1638.919" data-end="1642.4">refer on your target blank links UC surf</span> <span data-start="1642.4" data-end="1645.27">tokens whenever you have rely on like</span> <span data-start="1645.27" data-end="1646.99">cookies for example has an</span> <span data-start="1646.99" data-end="1651.22">authentication method blocking XSS isn't</span> <span data-start="1651.22" data-end="1653.62">trivial because encoding can be really</span> <span data-start="1653.62" data-end="1656.71">dangerous so just don't don't think</span> <span data-start="1656.71" data-end="1657.97">you've got that covered</span> <span data-start="1657.97" data-end="1660.82">always be skeptical and try to do</span> <span data-start="1660.82" data-end="1662.26">different things to kind of circumvent</span> <span data-start="1662.26" data-end="1665.47">that be careful of JSONP a callback</span> <span data-start="1665.47" data-end="1667.03">should never contain anything that isn't</span> <span data-start="1667.03" data-end="1669.34">a word character and here we never even</span> <span data-start="1669.34" data-end="1670.78">like a number because we could start</span> <span data-start="1670.78" data-end="1673.66">encoding things so just have only word</span> <span data-start="1673.66" data-end="1676.21">characters in there UCSB as a safety net</span> <span data-start="1676.21" data-end="1679.33">because it's really helpful and most</span> <span data-start="1679.33" data-end="1681.82">importantly stay up to date because if</span> <span data-start="1681.82" data-end="1683.14">your dependencies have vulnerabilities</span> <span data-start="1683.14" data-end="1686.2">you can have the most secure code on</span> <span data-start="1686.2" data-end="1688.679">your site you will still be vulnerable</span> </p>
<p><span data-start="1688.679" data-end="1691.36">I'll publish those slides after this</span> <span data-start="1691.36" data-end="1693.46">talk on this URL and I'll tweet about it</span> <span data-start="1693.46" data-end="1696.1">as well so you can take a look the</span> <span data-start="1696.1" data-end="1697.39">entire application that I showed you</span> <span data-start="1697.39" data-end="1699.669">including documentation resources to</span> <span data-start="1699.669" data-end="1702.13">security matters on this URL again I'm</span> <span data-start="1702.13" data-end="1705.16">going to tweet this and I have stickers</span> <span data-start="1705.16" data-end="1707.89">but both of these so if you find me</span> <span data-start="1707.89" data-end="1710.02">later I can give you some of those if</span> <span data-start="1710.02" data-end="1712.99">you're a sticker obsessed like I am and</span> <span data-start="1712.99" data-end="1714.19">with that thank you everyone for your</span> <span data-start="1714.19" data-end="1715.69">attention I'll be around for the rest of</span> <span data-start="1715.69" data-end="1721.2">the day if you have any questions</span> <span data-start="1721.21" data-end="1728.81">[Applause]</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
