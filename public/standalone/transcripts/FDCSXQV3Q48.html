<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>FDCSXQV3Q48</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/FDCSXQV3Q48?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="9.69" data-end="12.25">good evening everyone it's really</span> <span data-start="12.25" data-end="16.36">exciting to be here great crowd great</span> <span data-start="16.36" data-end="18.52">conference so let's talk about</span> <span data-start="18.52" data-end="22.42">performance a bit about me I put a lot</span> <span data-start="22.42" data-end="24.43">of effort in this life obviously and I</span> <span data-start="24.43" data-end="27.19">just keep it it's a long flight from LA</span> <span data-start="27.19" data-end="30.21">right so you've probably heard that</span> <span data-start="30.21" data-end="33.37">there's Mark Twain attributing this</span> <span data-start="33.37" data-end="36.01">quote to the British Prime Minister</span> <span data-start="36.01" data-end="38.98">Benjamin Disraeli saying that so he</span> <span data-start="38.98" data-end="40.75">reportedly said that there's three kinds</span> <span data-start="40.75" data-end="43.72">of life lized the damn lies and</span> <span data-start="43.72" data-end="47.28">statistics so I think the same can be</span> <span data-start="47.28" data-end="50.26">kind of applied to a performance because</span> <span data-start="50.26" data-end="53.799">it's it's kind of easy to to read and</span> <span data-start="53.799" data-end="56.559">follow performance advice out there but</span> <span data-start="56.559" data-end="59.44">um things that are usually not that</span> <span data-start="59.44" data-end="61.449">simple or maybe something that is is</span> <span data-start="61.449" data-end="64.21">good or has been true for a while who is</span> <span data-start="64.21" data-end="66.729">no longer true or it doesn't really</span> <span data-start="66.729" data-end="69.88">matter and so let's talk about this</span> <span data-start="69.88" data-end="72.159">thing so first we talked about the</span> <span data-start="72.159" data-end="73.54">understanding the problem with</span> <span data-start="73.54" data-end="75.759">performing some benchmarks and then give</span> <span data-start="75.759" data-end="79.63">some just some pointers and ideas so the</span> <span data-start="79.63" data-end="81.969">thing is that we are chasing moving</span> <span data-start="81.969" data-end="84.359">targets all the time because browsers</span> <span data-start="84.359" data-end="87.7">come out to come up with new versions in</span> <span data-start="87.7" data-end="91.06">most excellent JavaScript engines and it</span> <span data-start="91.06" data-end="94.329">is great for us libraries also change so</span> </p>
<p><span data-start="94.329" data-end="98.32">John racing in one talk said that he</span> <span data-start="98.32" data-end="100.63">read some advice that you know somebody</span> <span data-start="100.63" data-end="103.03">was saying in jQuery you shouldn't do a</span> <span data-start="103.03" data-end="105.28">but you should do B instead because a</span> <span data-start="105.28" data-end="108.369">slower and beats faster and so he was</span> <span data-start="108.369" data-end="110.679">kind of I don't know why wouldn't you</span> <span data-start="110.679" data-end="114.34">use a right so he he came and optimized</span> <span data-start="114.34" data-end="116.939">whatever was supposedly slow and</span> <span data-start="116.939" data-end="119.499">committed a new version so it became</span> <span data-start="119.499" data-end="121.299">actually as fast if not faster in</span> <span data-start="121.299" data-end="123.999">certain browsers so this advice was good</span> <span data-start="123.999" data-end="128.429">for an or maybe just a few days so she</span> <span data-start="128.429" data-end="131.05">different browsers different libraries</span> <span data-start="131.05" data-end="134.2">so one example of advice that is</span> <span data-start="134.2" data-end="135.43">floating around</span> <span data-start="135.43" data-end="139.75">the string concatenation people from</span> </p>
<p><span data-start="139.75" data-end="142.18">Microsoft has talked about it a lot how</span> <span data-start="142.18" data-end="144.819">it's it slower to concatenate strings</span> <span data-start="144.819" data-end="147.519">but it's it's faster if you obtain</span> <span data-start="147.519" data-end="150.189">everything to an array and then join the</span> <span data-start="150.189" data-end="153.79">array at the end so this this was true</span> <span data-start="153.79" data-end="157.45">in in ie6 but is no longer 397 and eight</span> <span data-start="157.45" data-end="160.78">and and it all kinds of depends how big</span> <span data-start="160.78" data-end="162.959">are the strings how large is the array</span> <span data-start="162.959" data-end="166.239">which browser and so on a lot of</span> <span data-start="166.239" data-end="168.79">conditions for this to be true so it</span> <span data-start="168.79" data-end="172.15">reminds me of a book by terry pratchett</span> <span data-start="172.15" data-end="176.079">were in this world they were saying that</span> <span data-start="176.079" data-end="177.639">we have to do some objectivity in</span> <span data-start="177.639" data-end="179.2">literature we cannot just say you're</span> <span data-start="179.2" data-end="181.09">kinds of stuff so you're allowed to say</span> <span data-start="181.09" data-end="182.879">that the pen is mightier than the sword</span> <span data-start="182.879" data-end="186.069">only if you explain that not only is</span> <span data-start="186.069" data-end="187.75">true is the sword is very small and the</span> <span data-start="187.75" data-end="191.65">pain is really sharp front so a bit</span> <span data-start="191.65" data-end="194.319">about benchmarking so that's the the</span> <span data-start="194.319" data-end="196.689">most common pattern maybe when people</span> <span data-start="196.689" data-end="200.019">are doing benchmarks you take the start</span> <span data-start="200.019" data-end="204.43">date you do some crazy repetitions and</span> <span data-start="204.43" data-end="207.449">do something and then take the end time</span> <span data-start="207.449" data-end="210.87">so kind of a problem with that is that</span> <span data-start="210.87" data-end="213.31">you're not actually releasing the thread</span> <span data-start="213.31" data-end="215.79">you're taking the end time right after</span> <span data-start="215.79" data-end="218.319">something is completed but does the user</span> <span data-start="218.319" data-end="220.15">see anything especially when it comes to</span> <span data-start="220.15" data-end="223.12">dumb operations so maybe these are</span> <span data-start="223.12" data-end="225.04">performed in memory but nothing is</span> <span data-start="225.04" data-end="229.329">painted on the on the screen yet so the</span> <span data-start="229.329" data-end="231.489">user is not really seeing any difference</span> <span data-start="231.489" data-end="233.799">so when you start taking the end time</span> <span data-start="233.799" data-end="237.329">with a just a set time time out of 0</span> <span data-start="237.329" data-end="242.889">then then you're releasing the thread</span> <span data-start="242.889" data-end="244.78">and taking the end time you're letting</span> <span data-start="244.78" data-end="247.419">the browser finish whatever painting and</span> <span data-start="247.419" data-end="250.65">rendering and get a much more realistic</span> <span data-start="250.65" data-end="252.909">figure about what the user is</span> <span data-start="252.909" data-end="255.97">experiencing so will be about the zero</span> <span data-start="255.97" data-end="258.97">time out so there's no such thing as a</span> <span data-start="258.97" data-end="259.6">zero</span> <span data-start="259.6" data-end="261.88">right when you say time out of 0 you're</span> <span data-start="261.88" data-end="263.92">actually saying executed as soon as</span> <span data-start="263.92" data-end="269.53">possible and this figure can be</span> <span data-start="269.53" data-end="271.42">different in across different browsers</span> <span data-start="271.42" data-end="274.45">and for example zero time out is about</span> <span data-start="274.45" data-end="278.71">15 milliseconds in IM so that's that's</span> <span data-start="278.71" data-end="282.27">also kind of important to to have</span> <span data-start="282.27" data-end="285.43">whatever your benchmarking to be long</span> <span data-start="285.43" data-end="287.32">enough take much more than 15</span> <span data-start="287.32" data-end="288.91">milliseconds because if you do a test</span> <span data-start="288.91" data-end="290.83">and say all this one took 15</span> <span data-start="290.83" data-end="292.36">milliseconds the other one took 16</span> <span data-start="292.36" data-end="294.4">milliseconds then it's probably it'd</span> <span data-start="294.4" data-end="296.92">just be ice clock is not picking up</span> <span data-start="296.92" data-end="299.77">quickly so you're actually you have no</span> <span data-start="299.77" data-end="302.44">idea which one was better and it's</span> <span data-start="302.44" data-end="305.05">always good idea to do enough tests it's</span> <span data-start="305.05" data-end="307.93">usually 200 rounds of the same test to</span> <span data-start="307.93" data-end="309.97">get the statistically significant result</span> <span data-start="309.97" data-end="313.3">and then it's also important to filter</span> <span data-start="313.3" data-end="316.72">any outliers will you have some too big</span> <span data-start="316.72" data-end="320.92">figures or too small so there's several</span> <span data-start="320.92" data-end="323.73">ways once you have run a whole bunch of</span> <span data-start="323.73" data-end="328.27">runs in a test to consider what you're</span> <span data-start="328.27" data-end="329.83">going to do with the results and the</span> <span data-start="329.83" data-end="333.16">most common the thing that people do is</span> <span data-start="333.16" data-end="335.88">taking the average which is not really</span> <span data-start="335.88" data-end="338.92">descriptive of anything because it's a</span> <span data-start="338.92" data-end="340.54">made-up number right it's an average of</span> <span data-start="340.54" data-end="343.51">a phone number of runs so it's the</span> <span data-start="343.51" data-end="345.19">easiest thing is to do to take the</span> <span data-start="345.19" data-end="348.13">medium basically just sort the array of</span> <span data-start="348.13" data-end="350.29">all the results and pick the value in</span> <span data-start="350.29" data-end="352.75">the middle because it's it's actually a</span> <span data-start="352.75" data-end="356.56">real test and or if you're going to take</span> <span data-start="356.56" data-end="358.51">the average it's a good idea to filter</span> <span data-start="358.51" data-end="360.82">the outliers basically sort all the</span> <span data-start="360.82" data-end="363.22">results remove the first quarter in the</span> <span data-start="363.22" data-end="366.7">last quarter so something like this</span> <span data-start="366.7" data-end="368.98">right when you're going to sort all the</span> <span data-start="368.98" data-end="370.84">results in your total weight of the</span> <span data-start="370.84" data-end="372.4">beginning in the end because these are</span> <span data-start="372.4" data-end="377.35">kind of outliers so if somewhere have</span> <span data-start="377.35" data-end="378.72">been</span> <span data-start="378.72" data-end="383.41">in doing this test for for Firefox right</span> <span data-start="383.41" data-end="385.54">how long it's just nothing just a time</span> <span data-start="385.54" data-end="389.02">out of 0 to see how much it takes so the</span> <span data-start="389.02" data-end="391.18">median value is exactly 10 seconds then</span> <span data-start="391.18" data-end="394.6">the average is kind of different in the</span> <span data-start="394.6" data-end="396.79">average after filtering the outliers and</span> <span data-start="396.79" data-end="399.52">so you can see that sometimes because I</span> <span data-start="399.52" data-end="402.16">was maybe is crawling or opening far</span> <span data-start="402.16" data-end="404.92">above something that took the a little</span> <span data-start="404.92" data-end="407.95">bit more time than usual so if you take</span> <span data-start="407.95" data-end="410.02">the average without filtering those kind</span> <span data-start="410.02" data-end="413.38">of values it's probably not getting a</span> <span data-start="413.38" data-end="420.94">realistic value so about benchmark so</span> <span data-start="420.94" data-end="423.37">well because we're developers right we</span> <span data-start="423.37" data-end="426.16">build website so i don't think it's our</span> <span data-start="426.16" data-end="429.01">duty to benchmark different browsers</span> <span data-start="429.01" data-end="432.06">right we can leave the browser vendors</span> <span data-start="432.06" data-end="436.66">compete with their benchmarks and just</span> <span data-start="436.66" data-end="438.25">leave it to them because when your</span> <span data-start="438.25" data-end="440.17">application around seen in one browser</span> <span data-start="440.17" data-end="441.76">right that's the browser you have to</span> <span data-start="441.76" data-end="443.71">make it as fast as possible in this</span> <span data-start="443.71" data-end="445.57">specific browser you don't care that it</span> <span data-start="445.57" data-end="448.42">might take much less time in some other</span> <span data-start="448.42" data-end="451.72">browser in the actual time values are</span> <span data-start="451.72" data-end="453.22">really not important you don't care if</span> <span data-start="453.22" data-end="455.5">some something takes 50 milliseconds or</span> <span data-start="455.5" data-end="458.11">a hundred it's usually the best idea</span> <span data-start="458.11" data-end="461.53">that i found is that you have fun you</span> <span data-start="461.53" data-end="463.69">have a problem and you can solve it in</span> <span data-start="463.69" data-end="466.12">different ways let's say you can do a or</span> <span data-start="466.12" data-end="468.82">you can do B and the question is which</span> <span data-start="468.82" data-end="472.63">one of them is faster and is it really</span> <span data-start="472.63" data-end="474.85">consistently faster across browsers and</span> <span data-start="474.85" data-end="477.64">how how much faster it is is it just ten</span> <span data-start="477.64" data-end="479.26">percent twenty percent or is it</span> <span data-start="479.26" data-end="481.06">something that is you know five times</span> <span data-start="481.06" data-end="483.6">faster or 100 times faster and I think</span> <span data-start="483.6" data-end="486.43">for most applications unless of course</span> <span data-start="486.43" data-end="488.83">you're doing some some games and stuff</span> <span data-start="488.83" data-end="492.58">like this for most applications you only</span> <span data-start="492.58" data-end="496.36">need to worry about big differences when</span> <span data-start="496.36" data-end="498.07">something is taking really read a lot of</span> <span data-start="498.07" data-end="500.2">time so I just wanted to give a shout</span> <span data-start="500.2" data-end="503.32">out to Jas perf calm</span> <span data-start="503.32" data-end="505.27">if you have seen this website it's</span> <span data-start="505.27" data-end="508.18">really nice and just built with with</span> <span data-start="508.18" data-end="511.33">that idea in mind that you have fun you</span> <span data-start="511.33" data-end="513.07">can just test the different cases right</span> <span data-start="513.07" data-end="515.95">so you can do a B or C D you can do a</span> <span data-start="515.95" data-end="520.26">lot of tests and it's a community-driven</span> <span data-start="520.26" data-end="524.53">project you can see you get a static URL</span> <span data-start="524.53" data-end="527.38">then you can share people can clone the</span> <span data-start="527.38" data-end="530.26">test and into something on top of it</span> <span data-start="530.26" data-end="533.32">modify and so on and then at the end the</span> <span data-start="533.32" data-end="535.48">results are sent to browser scope so you</span> <span data-start="535.48" data-end="537.91">can ask your friends or whoever to to</span> <span data-start="537.91" data-end="539.65">load it in people from the community</span> <span data-start="539.65" data-end="541.81">that will load the site in different</span> <span data-start="541.81" data-end="543.79">browsers then you get a nice statistic</span> <span data-start="543.79" data-end="547.87">or how this thing behaves in across</span> <span data-start="547.87" data-end="553.39">browsers so that's about benchmarking so</span> <span data-start="553.39" data-end="558.37">how about the real life because</span> <span data-start="558.37" data-end="561.31">benchmarks are already made up cases</span> <span data-start="561.31" data-end="564.07">right and they're not real applications</span> <span data-start="564.07" data-end="566.14">so there's always a risk that you'll be</span> <span data-start="566.14" data-end="568.33">making benchmarking the wrong thing or</span> <span data-start="568.33" data-end="571.72">if you decided is faster than B you have</span> <span data-start="571.72" data-end="574.69">to see how relatively how important that</span> <span data-start="574.69" data-end="578.38">is so the best way is to just profile</span> <span data-start="578.38" data-end="582.22">writing in Firebug we have the profiler</span> <span data-start="582.22" data-end="585.43">you can sort by how much time everything</span> <span data-start="585.43" data-end="589.42">takes you have the functions so you know</span> <span data-start="589.42" data-end="593.14">where your time is spent the same in web</span> <span data-start="593.14" data-end="596.65">inspector and the cool thing here is</span> <span data-start="596.65" data-end="599.56">that it in addition to that it also</span> <span data-start="599.56" data-end="602.14">gives you the time that the time it</span> <span data-start="602.14" data-end="604.83">takes for JavaScript to execute and</span> <span data-start="604.83" data-end="607.42">gives you the rendering in painting time</span> <span data-start="607.42" data-end="610.33">and also recalculating styles and that</span> <span data-start="610.33" data-end="611.59">kind of stuff something that was missing</span> <span data-start="611.59" data-end="614.41">probably year two years ago had no idea</span> <span data-start="614.41" data-end="615.52">what's what's going on with the</span> <span data-start="615.52" data-end="616.68">rendering can</span> <span data-start="616.68" data-end="619.86">at the painting that's similar tool</span> <span data-start="619.86" data-end="624">there is a speed tracer for for chrome</span> </p>
<p><span data-start="624" data-end="629.339">Chrome extension and this is for I die</span> <span data-start="629.339" data-end="633.149">no trace Ajax edition really cool it</span> <span data-start="633.149" data-end="635.399">gives you the normal network waterfall</span> <span data-start="635.399" data-end="638.459">but in addition it also tells you how</span> <span data-start="638.459" data-end="642.63">much CPU you need how much time</span> <span data-start="642.63" data-end="644.76">javascript takes and also ND in your</span> <span data-start="644.76" data-end="647.19">rendering painting recalculating styles</span> <span data-start="647.19" data-end="649.649">so the thing about it it's so detailed</span> <span data-start="649.649" data-end="653.97">that it can be kind of hard to figure</span> <span data-start="653.97" data-end="655.709">out at the beginning it just gives you</span> <span data-start="655.709" data-end="660.12">so much data tool to work with so what</span> </p>
<p><span data-start="660.12" data-end="663.6">I'm trying to say I guess is that we</span> <span data-start="663.6" data-end="665.49">should be picking our battles right</span> <span data-start="665.49" data-end="670.2">because there's this line of thought</span> <span data-start="670.2" data-end="673.32">that says that anything you do sub</span> <span data-start="673.32" data-end="675.95">optimally is a disservice to the users</span> <span data-start="675.95" data-end="678.48">only love our users they're just guests</span> <span data-start="678.48" data-end="680.97">to our pages so we have to treat them</span> <span data-start="680.97" data-end="683.339">well and it's just a disservice to to</span> <span data-start="683.339" data-end="686.25">send more bites they need it or or do</span> <span data-start="686.25" data-end="689.73">something that is not optimal but this</span> <span data-start="689.73" data-end="691.29">assumes that you have indefinite</span> <span data-start="691.29" data-end="694.98">resources to work on that on speeding up</span> <span data-start="694.98" data-end="696.93">and and also the results are diminishing</span> <span data-start="696.93" data-end="699.87">with time so if you what kind of the</span> <span data-start="699.87" data-end="702.089">time you spend optimizing and the effect</span> <span data-start="702.089" data-end="703.29">that you get it's something like this</span> <span data-start="703.29" data-end="705.57">with just a little bit of effort you get</span> <span data-start="705.57" data-end="707.97">really beneficial results and then from</span> <span data-start="707.97" data-end="710.25">there you put more effort than the</span> <span data-start="710.25" data-end="715.38">results are relatively small so the</span> <span data-start="715.38" data-end="717.93">other side to that is that you don't</span> <span data-start="717.93" data-end="719.73">have indefinite resources right as you</span> <span data-start="719.73" data-end="723.029">have a bunch of people for for working</span> <span data-start="723.029" data-end="725.579">on this website so in a way if you spend</span> <span data-start="725.579" data-end="728.61">too much time micro optimizing or and</span> <span data-start="728.61" data-end="732.51">nano optimizing then this is also a</span> <span data-start="732.51" data-end="734.49">disservice to the user because you could</span> <span data-start="734.49" data-end="735.779">have done something else instead like</span> <span data-start="735.779" data-end="738.45">make the site more accessible or user</span> <span data-start="738.45" data-end="742.04">friendly implementing new features</span> <span data-start="742.04" data-end="745.61">so let's talk quickly about how to speed</span> <span data-start="745.61" data-end="749.24">up just just some pointers right so when</span> <span data-start="749.24" data-end="751.1">you talk about speeding up JavaScript</span> <span data-start="751.1" data-end="755.089">you you can think about two sides of it</span> <span data-start="755.089" data-end="757.22">first is to load that JavaScript on the</span> <span data-start="757.22" data-end="761.089">page and then once it's loaded to make</span> <span data-start="761.089" data-end="765.37">sure that it runs as quickly as you can</span> <span data-start="765.37" data-end="768.98">so the loading I'm pretty sure you're</span> <span data-start="768.98" data-end="770.42">all familiar with the Yahoo best</span> <span data-start="770.42" data-end="773.329">practices right but I just felt obliged</span> <span data-start="773.329" data-end="775.519">to to just list them out right reducing</span> <span data-start="775.519" data-end="777.139">the number of requests combining script</span> <span data-start="777.139" data-end="779.75">g zipping minifying setting the far</span> <span data-start="779.75" data-end="782.209">future expires header and if you have</span> <span data-start="782.209" data-end="787.16">the budget use a CDN so this is most</span> <span data-start="787.16" data-end="789.41">likely to give the biggest benefit right</span> <span data-start="789.41" data-end="791.899">so once you you've done all those basics</span> <span data-start="791.899" data-end="794.87">then you can move to other stuff for</span> <span data-start="794.87" data-end="797.18">example to load the JavaScript</span> <span data-start="797.18" data-end="798.74">asynchronously right because a</span> <span data-start="798.74" data-end="802.19">synchronous is good the users are seeing</span> <span data-start="802.19" data-end="805.25">some sort of progress they see something</span> <span data-start="805.25" data-end="808.76">is render than JavaScript kick seen kind</span> <span data-start="808.76" data-end="811.55">of enhances the page and they have the</span> <span data-start="811.55" data-end="814.61">perception that something is is going on</span> <span data-start="814.61" data-end="817.37">and the page is responsive and the</span> <span data-start="817.37" data-end="821.839">application feels snap here so the</span> <span data-start="821.839" data-end="823.16">problem with JavaScript of course</span> <span data-start="823.16" data-end="825.8">especially in not the latest generation</span> <span data-start="825.8" data-end="828.68">of browsers is that JavaScript blocks</span> <span data-start="828.68" data-end="831.05">all the other downloads so if you have</span> <span data-start="831.05" data-end="833.779">images and so on the browser will stop</span> <span data-start="833.779" data-end="835.61">all the parts you know downloads until</span> <span data-start="835.61" data-end="838.399">it finishes with JavaScript and the</span> <span data-start="838.399" data-end="840.139">easiest thing is to just move the</span> </p>
<p><span data-start="840.139" data-end="842.36">JavaScript way at the bottom where</span> <span data-start="842.36" data-end="844.43">there's nothing left to block right and</span> <span data-start="844.43" data-end="848.87">just allow images to load meanwhile so</span> <span data-start="848.87" data-end="853.37">now you have to kind of newer attributes</span> <span data-start="853.37" data-end="856.25">for script tags differ and acing so the</span> <span data-start="856.25" data-end="858.5">first is been around since forever in IE</span> <span data-start="858.5" data-end="861.68">it's an IE innovation so you basically</span> <span data-start="861.68" data-end="864.009">when you when you say script before</span> <span data-start="864.009" data-end="866.569">you're actually saying that it's okay</span> <span data-start="866.569" data-end="869.509">not to load that script right away you</span> <span data-start="869.509" data-end="870.019">don't</span> <span data-start="870.019" data-end="873.709">needed it can it can proceed with the</span> <span data-start="873.709" data-end="877.279">other downloads but you want the order</span> <span data-start="877.279" data-end="878.72">of the different scripts to be</span> <span data-start="878.72" data-end="883.309">maintained so the async is the new html5</span> <span data-start="883.309" data-end="886.91">attribute where you just say you know I</span> <span data-start="886.91" data-end="889.189">don't care when it's loaded loaded when</span> <span data-start="889.189" data-end="891.92">you can and then you have a callback on</span> <span data-start="891.92" data-end="895.879">low tool to execute whenever let script</span> <span data-start="895.879" data-end="899.689">arise so in terms of timing the</span> <span data-start="899.689" data-end="901.73">difference crypts I mean first they</span> <span data-start="901.73" data-end="903.799">maintain the order and then they will be</span> <span data-start="903.799" data-end="905.6">executed in order that they appear on</span> <span data-start="905.6" data-end="907.67">the page before the dump content loaded</span> <span data-start="907.67" data-end="911.48">event and all these synchronous scripts</span> <span data-start="911.48" data-end="914.299">will probably not be in any particular</span> <span data-start="914.299" data-end="917.54">order whatever arrives first will be</span> <span data-start="917.54" data-end="922.069">executed but before the load event so</span> <span data-start="922.069" data-end="924.29">meanwhile before all the browser start</span> <span data-start="924.29" data-end="928.1">supporting the new tags you can you can</span> <span data-start="928.1" data-end="929.959">load this influence JavaScript using a</span> <span data-start="929.959" data-end="934.759">dynamic script at and in this way it</span> <span data-start="934.759" data-end="937.749">doesn't block so another kind of related</span> <span data-start="937.749" data-end="940.459">technique is to use the HTTP Chung</span> <span data-start="940.459" data-end="943.49">encoding and kind of flush part of the</span> <span data-start="943.49" data-end="947.24">page as soon as something is ready so</span> <span data-start="947.24" data-end="949.399">that allows you to allow the browser to</span> <span data-start="949.399" data-end="950.869">start downloading components before</span> <span data-start="950.869" data-end="955.91">everything is is downloaded so it's</span> <span data-start="955.91" data-end="958.639">really easy to do that in PHP in every</span> <span data-start="958.639" data-end="960.23">every server sign language you have</span> <span data-start="960.23" data-end="961.399">something like this where you can say</span> <span data-start="961.399" data-end="965.119">okay this is the my partial content /</span> <span data-start="965.119" data-end="968.269">whatever you have to the browser and how</span> <span data-start="968.269" data-end="972.41">this is it's used across a lot of big</span> <span data-start="972.41" data-end="974.419">sites but in my opinion it's not used</span> <span data-start="974.419" data-end="978.379">enough so we should be using more so</span> <span data-start="978.379" data-end="980.509">this is the google search page so as</span> <span data-start="980.509" data-end="983.629">soon as you type something and hit enter</span> <span data-start="983.629" data-end="986.629">they they're still not ready with the</span> <span data-start="986.629" data-end="989.119">search results but they will just flash</span> <span data-start="989.119" data-end="991.459">the header as soon as possible so that</span> <span data-start="991.459" data-end="993.35">you have the feeling that oh it's</span> <span data-start="993.35" data-end="995.269">responding right away right it something</span> <span data-start="995.269" data-end="997.16">happened so you have</span> <span data-start="997.16" data-end="1000.16">this feeling of control and you you know</span> <span data-start="1000.16" data-end="1001.69">what's going on on the page so meanwhile</span> <span data-start="1001.69" data-end="1002.68">they're working on the search results</span> <span data-start="1002.68" data-end="1005.829">and in the second chunk they're sending</span> <span data-start="1005.829" data-end="1008.829">all the search results and in the last</span> <span data-start="1008.829" data-end="1010.87">final chunk it's they just load the</span> <span data-start="1010.87" data-end="1014.199">javascript which if you don't get the</span> <span data-start="1014.199" data-end="1016.06">last chunk you still have a usable page</span> <span data-start="1016.06" data-end="1018.1">you can click on it if you follow the</span> <span data-start="1018.1" data-end="1020.62">links with if you have a slow Wi-Fi</span> <span data-start="1020.62" data-end="1024.61">connection you can still use the page</span> <span data-start="1024.61" data-end="1028">although it's not in in in the state</span> <span data-start="1028" data-end="1030.51">that it's the most beautiful in usable</span> <span data-start="1030.51" data-end="1033.61">so something like this happens where you</span> <span data-start="1033.61" data-end="1037.63">have the first the first chunk is</span> <span data-start="1037.63" data-end="1039.459">containing just the header and stuff</span> <span data-start="1039.459" data-end="1041.439">then you have the full body of the page</span> <span data-start="1041.439" data-end="1043.569">and then in the end either with the</span> <span data-start="1043.569" data-end="1045.669">script tag or asynchronously you load</span> <span data-start="1045.669" data-end="1050.02">the JavaScript so unfortunately I think</span> <span data-start="1050.02" data-end="1052">we're kind of lacking the tools to</span> <span data-start="1052" data-end="1054.07">figure that out so I can show you</span> <span data-start="1054.07" data-end="1058.21">something it's really ugly and kind of</span> <span data-start="1058.21" data-end="1061.12">buggy but there's this tool that I did</span> <span data-start="1061.12" data-end="1063.549">chunked view right that allows you to</span> <span data-start="1063.549" data-end="1069.4">hit a page and then then she see the</span> <span data-start="1069.4" data-end="1072.94">different chunks in that page so you can</span> <span data-start="1072.94" data-end="1074.74">see those this is the google search</span> <span data-start="1074.74" data-end="1076.89">results page right so you can see in the</span> <span data-start="1076.89" data-end="1080.2">the unzipped encoding at the end so you</span> <span data-start="1080.2" data-end="1083.61">see how in the very last chunk you get</span> <span data-start="1083.61" data-end="1086.049">you get the the external javascript</span> <span data-start="1086.049" data-end="1088.299">being over there and it's mainly just</span> </p>
<p><span data-start="1088.299" data-end="1089.95">JavaScript like all the content is</span> <span data-start="1089.95" data-end="1091.83">loaded so this is kind of interesting</span> <span data-start="1091.83" data-end="1096.36">you see all those data URI images right</span> <span data-start="1096.36" data-end="1098.5">the baby your eyes is a good way to</span> <span data-start="1098.5" data-end="1100.15">reduce the number of requests and its</span> <span data-start="1100.15" data-end="1102.76">really really important so important in</span> <span data-start="1102.76" data-end="1105.15">fact that</span> <span data-start="1105.15" data-end="1108.25">it's kind of interesting what Google are</span> <span data-start="1108.25" data-end="1111.789">doing so let me show you if you so if</span> <span data-start="1111.789" data-end="1114.88">you load at page right there's no other</span> <span data-start="1114.88" data-end="1116.62">than the spry there's no additional</span> <span data-start="1116.62" data-end="1119.11">image requests right and the page has</span> <span data-start="1119.11" data-end="1121.679">images right so they're all in line in</span> <span data-start="1121.679" data-end="1124.99">India HTML response so there's no you</span> <span data-start="1124.99" data-end="1127.72">don't benefit from the caching but it's</span> <span data-start="1127.72" data-end="1129.13">so important to reduce the number of</span> <span data-start="1129.13" data-end="1130.99">requests they are willing to send more</span> <span data-start="1130.99" data-end="1133.929">bytes in the in the results just to have</span> <span data-start="1133.929" data-end="1136.72">everything faster and something kind of</span> <span data-start="1136.72" data-end="1138.13">interesting is that if you disable</span> </p>
<p><span data-start="1138.13" data-end="1141.85">JavaScript you don't get any of those</span> <span data-start="1141.85" data-end="1146.529">images right so the kind of crazy thing</span> <span data-start="1146.529" data-end="1149.559">that you do here is when you load the</span> <span data-start="1149.559" data-end="1152.01">page you have a placeholder for those</span> <span data-start="1152.01" data-end="1156.85">images so this is a 1 by 1 gif included</span> <span data-start="1156.85" data-end="1160.51">as a data URI and repeated even so only</span> <span data-start="1160.51" data-end="1163.149">they don't make any other requests so</span> <span data-start="1163.149" data-end="1165.19">it's repeated for every image here on</span> <span data-start="1165.19" data-end="1167.38">the search results so you have this one</span> <span data-start="1167.38" data-end="1170.23">by one gift which it at the very end</span> <span data-start="1170.23" data-end="1173.2">right with the latest chunk whenever it</span> <span data-start="1173.2" data-end="1176.47">arrives it contains the URL the data URI</span> <span data-start="1176.47" data-end="1178.33">for the actual images so what they do is</span> <span data-start="1178.33" data-end="1182.169">just get that and replace the one by one</span> <span data-start="1182.169" data-end="1185.5">gift with with the real image I thought</span> <span data-start="1185.5" data-end="1186.97">it was kind of interesting and really</span> <span data-start="1186.97" data-end="1189.52">showing how how important it is to</span> <span data-start="1189.52" data-end="1193.299">reduce requests so if you're if you're</span> <span data-start="1193.299" data-end="1194.83">on a slow connection and you don't get</span> <span data-start="1194.83" data-end="1197.549">any of the images that's fine really Oh</span> <span data-start="1197.549" data-end="1202.87">mostly care about the results so there's</span> <span data-start="1202.87" data-end="1206.169">different ways to go to inject script on</span> <span data-start="1206.169" data-end="1208.059">the page the most common is probably</span> <span data-start="1208.059" data-end="1211.299">appending to the head sometimes you</span> <span data-start="1211.299" data-end="1213.49">might if you don't control this document</span> <span data-start="1213.49" data-end="1214.99">let's see if you're creating a widget</span> <span data-start="1214.99" data-end="1217.029">and you want to load in a third party</span> <span data-start="1217.029" data-end="1218.409">website and you don't know what's going</span> <span data-start="1218.409" data-end="1220.84">on there then you can access the</span> <span data-start="1220.84" data-end="1222.7">document element and get its first child</span> <span data-start="1222.7" data-end="1225.61">up in there then or you can use the body</span> <span data-start="1225.61" data-end="1227.289">because document body is pretty much</span> <span data-start="1227.289" data-end="1228.909">always defined even if you don't have a</span> <span data-start="1228.909" data-end="1232.29">body talent or that's something that</span> </p>
<p><span data-start="1232.29" data-end="1235.11">I think now we'll go on a little is</span> <span data-start="1235.11" data-end="1238.44">doing they'll get the first script</span> <span data-start="1238.44" data-end="1240.36">element on the page because in order for</span> <span data-start="1240.36" data-end="1242.52">any script to execute there's got to be</span> <span data-start="1242.52" data-end="1244.89">at least one script tag right so they</span> <span data-start="1244.89" data-end="1248.67">they find that script tag and and use</span> <span data-start="1248.67" data-end="1250.98">that as a hook so it's not completely</span> <span data-start="1250.98" data-end="1253.01">foolproof right because you can have</span> <span data-start="1253.01" data-end="1255.42">JavaScript without any script and if you</span> <span data-start="1255.42" data-end="1257.73">have let's say body onload and then in</span> <span data-start="1257.73" data-end="1260.04">line a bunch of scream but that's pretty</span> <span data-start="1260.04" data-end="1264.3">much ridiculous so talking about HTTP</span> <span data-start="1264.3" data-end="1266.49">chunking writer the flushing and so on I</span> <span data-start="1266.49" data-end="1268.14">just wanted to make a point that it's</span> <span data-start="1268.14" data-end="1270.93">not only for HTML so this is the google</span> <span data-start="1270.93" data-end="1278.16">instant so what they do here is because</span> <span data-start="1278.16" data-end="1281.01">when you're typing your you're probably</span> <span data-start="1281.01" data-end="1282.63">not paying so much attention on the</span> <span data-start="1282.63" data-end="1284.13">search results but you're looking at the</span> <span data-start="1284.13" data-end="1287.16">search suggestions first and see if any</span> <span data-start="1287.16" data-end="1288.75">of the suggestions will match what</span> <span data-start="1288.75" data-end="1290.76">you're what you're searching for so they</span> <span data-start="1290.76" data-end="1293.87">do two flushes they flush the</span> <span data-start="1293.87" data-end="1296.25">suggestions first and then the whole</span> <span data-start="1296.25" data-end="1298.52">body of all the results no it's owing in</span> <span data-start="1298.52" data-end="1302.04">whatever request they make and because</span> <span data-start="1302.04" data-end="1303.57">it's easier to just get the search</span> <span data-start="1303.57" data-end="1304.83">suggestions as opposed to all the</span> <span data-start="1304.83" data-end="1307.89">results so they do again to improve the</span> <span data-start="1307.89" data-end="1310.2">perception of speed just load as soon as</span> <span data-start="1310.2" data-end="1313.89">possible the suggestions so it's</span> <span data-start="1313.89" data-end="1316.29">something like they have a bunch of when</span> <span data-start="1316.29" data-end="1317.52">they maker because they have a bunch of</span> <span data-start="1317.52" data-end="1320.25">did kind of delimited with a comment</span> <span data-start="1320.25" data-end="1323.91">this sort of JSON objects delimited with</span> <span data-start="1323.91" data-end="1325.86">comments like this it kind of resembles</span> <span data-start="1325.86" data-end="1328.59">what big was they were talking about on</span> <span data-start="1328.59" data-end="1330.42">their blog calling it multiple</span> <span data-start="1330.42" data-end="1334.08">multi-part xhr requests all right way</span> <span data-start="1334.08" data-end="1335.67">you don't need the whole response in</span> <span data-start="1335.67" data-end="1337.74">order to to start working with with a</span> <span data-start="1337.74" data-end="1340.8">partial response so yeah this is the URL</span> <span data-start="1340.8" data-end="1343.41">to to my chunk view too if you want to</span> <span data-start="1343.41" data-end="1345.72">experiment it's kind of horrendously</span> <span data-start="1345.72" data-end="1349.26">slow but I guess until you get out into</span> <span data-start="1349.26" data-end="1351.93">it into the different tools that's a</span> <span data-start="1351.93" data-end="1353.91">nice way to peek and see what others are</span> <span data-start="1353.91" data-end="1357.99">doing oh so some some more stuff coming</span> <span data-start="1357.99" data-end="1361.59">in with html5 is the thing and the</span> <span data-start="1361.59" data-end="1363.99">prefetch attributes so link prefetch has</span> <span data-start="1363.99" data-end="1364.79">been around</span> <span data-start="1364.79" data-end="1367.43">for quite a while in Firefox button loud</span> <span data-start="1367.43" data-end="1369.59">like now it will be making its way to</span> <span data-start="1369.59" data-end="1373.79">html5 so this is a way to improve the</span> <span data-start="1373.79" data-end="1376.16">performance on the next page so while</span> <span data-start="1376.16" data-end="1378.83">the user is reading an article or typing</span> <span data-start="1378.83" data-end="1380.45">you know in a login screen or something</span> <span data-start="1380.45" data-end="1382.46">then the browser can start prefetching</span> <span data-start="1382.46" data-end="1384.08">resources that are needed on the next</span> <span data-start="1384.08" data-end="1390.47">page so currently you can you can do</span> <span data-start="1390.47" data-end="1391.97">this and we'll see just a pattern but</span> <span data-start="1391.97" data-end="1393.89">that it is really nice and easy way to</span> <span data-start="1393.89" data-end="1395.51">do it the other thing is the pink</span> <span data-start="1395.51" data-end="1399.71">attribute that is added to href so</span> <span data-start="1399.71" data-end="1402.05">because a lot of people want to track</span> <span data-start="1402.05" data-end="1404.06">clicks all right so when you click on a</span> <span data-start="1404.06" data-end="1406.46">link you want for advertising or</span> <span data-start="1406.46" data-end="1409.01">statistics and so one you want you to</span> <span data-start="1409.01" data-end="1411.82">know what what did the user click there</span> <span data-start="1411.82" data-end="1415.4">so currently the the most foolproof way</span> <span data-start="1415.4" data-end="1417.65">is to do a redirect so instead of the</span> <span data-start="1417.65" data-end="1420.29">actual link you link to a page that logs</span> <span data-start="1420.29" data-end="1421.97">and then redirects the user but that's</span> <span data-start="1421.97" data-end="1423.98">kind of a bad experience because always</span> <span data-start="1423.98" data-end="1427.37">redirect takes time so we did a study</span> <span data-start="1427.37" data-end="1432.02">with area 1 on average that any any</span> <span data-start="1432.02" data-end="1433.88">redirect on average will take at least</span> <span data-start="1433.88" data-end="1436.01">100 milliseconds but it could be slower</span> <span data-start="1436.01" data-end="1437.96">right some kind of thing may be</span> <span data-start="1437.96" data-end="1441.02">happening or if your redirect fails then</span> <span data-start="1441.02" data-end="1444.44">you actually don't see the page and also</span> <span data-start="1444.44" data-end="1447.35">for the other ways when you when you</span> <span data-start="1447.35" data-end="1448.91">click on a link is to send a beacon</span> <span data-start="1448.91" data-end="1451.28">right new images are see to something</span> <span data-start="1451.28" data-end="1453.56">but the thing is that there's a certain</span> <span data-start="1453.56" data-end="1457.52">amount of loss of click loss which for</span> <span data-start="1457.52" data-end="1459.71">for advertisers in for some statistics</span> <span data-start="1459.71" data-end="1462.41">are unacceptable let's say five percent</span> <span data-start="1462.41" data-end="1466.22">beacon loss so that's why they do some</span> <span data-start="1466.22" data-end="1468.74">crazy stuff like they send the beacon</span> <span data-start="1468.74" data-end="1471.29">and they will do a really big loop just</span> <span data-start="1471.29" data-end="1473.36">to slow down the user slow down the</span> <span data-start="1473.36" data-end="1475.13">browser to kind of increase the chances</span> <span data-start="1475.13" data-end="1478.51">that this we can all be sent correctly</span> <span data-start="1478.51" data-end="1481.37">so with a pink attribute that solves it</span> <span data-start="1481.37" data-end="1484.16">really pretty easily the user clicks on</span> <span data-start="1484.16" data-end="1486.17">the link and then the browser knows it</span> <span data-start="1486.17" data-end="1489.08">has to send beacon to up this ping URL</span> <span data-start="1489.08" data-end="1490.99">and it would take the time whenever is</span> <span data-start="1490.99" data-end="1493.159">appropriate for the browser</span> <span data-start="1493.159" data-end="1494.96">the beacon that you have confidence that</span> <span data-start="1494.96" data-end="1498.529">it will be sent so this sort of pattern</span> <span data-start="1498.529" data-end="1503.659">before when you preload stuff one</span> <span data-start="1503.659" data-end="1505.7">problem with preloading for the next</span> <span data-start="1505.7" data-end="1508.549">page is that whatever you pretty low</span> <span data-start="1508.549" data-end="1511.669">it's still going to be parsed and it's</span> <span data-start="1511.669" data-end="1513.409">going to be executed so if you pre</span> <span data-start="1513.409" data-end="1515.269">loaded CSS it might even change the page</span> <span data-start="1515.269" data-end="1519.019">or if you provide a JavaScript it's your</span> <span data-start="1519.019" data-end="1521.029">place to be parsed and so on it might</span> <span data-start="1521.029" data-end="1523.549">even the script that you preload might</span> <span data-start="1523.549" data-end="1525.139">expect that it's running on the next</span> <span data-start="1525.139" data-end="1526.7">page so it might throw an error so you</span> <span data-start="1526.7" data-end="1528.59">have to make sure that your script works</span> <span data-start="1528.59" data-end="1531.229">both ways but anyway it's it's a waste</span> <span data-start="1531.229" data-end="1535.19">of time to be to be parsing and</span> <span data-start="1535.19" data-end="1537.82">executing stuff that you don't need so</span> <span data-start="1537.82" data-end="1540.47">one quite easy solution is to use a new</span> <span data-start="1540.47" data-end="1543.679">image SRC and just request that but the</span> <span data-start="1543.679" data-end="1545.599">thing is that in in fiber what kid</span> <span data-start="1545.599" data-end="1548.509">images have different cache they are</span> <span data-start="1548.509" data-end="1549.889">kept in different place than the scripts</span> <span data-start="1549.889" data-end="1551.72">and styles so whatever you look if you</span> <span data-start="1551.72" data-end="1554.599">load a script as an image then it's not</span> <span data-start="1554.599" data-end="1556.46">going to be cash so for those you can</span> <span data-start="1556.46" data-end="1560.33">use an object tag and set its width high</span> <span data-start="1560.33" data-end="1563.45">20 in this way it's loaded and cash but</span> <span data-start="1563.45" data-end="1567.619">but never execute it so once you're done</span> <span data-start="1567.619" data-end="1570.739">loading that's where pretty much most of</span> <span data-start="1570.739" data-end="1573.47">the most of the benefits of speeding up</span> <span data-start="1573.47" data-end="1576.71">the application will come but then let's</span> <span data-start="1576.71" data-end="1578.539">talk a bit about some some micro</span> <span data-start="1578.539" data-end="1581.239">optimizations right so I think when you</span> <span data-start="1581.239" data-end="1582.44">when you talk about the runtime</span> <span data-start="1582.44" data-end="1585.32">performance kind of two ideas that you</span> <span data-start="1585.32" data-end="1587.539">can keep in your mind is that if you</span> <span data-start="1587.539" data-end="1589.97">work with local variables as well as</span> <span data-start="1589.97" data-end="1591.739">possible that's a good thing and if you</span> <span data-start="1591.739" data-end="1595.34">can avoid doing the same thing twice or</span> <span data-start="1595.34" data-end="1597.259">more than that that's great so just a</span> <span data-start="1597.259" data-end="1600.049">general guideline and let's see some of</span> <span data-start="1600.049" data-end="1604.19">those so you know the global variables</span> <span data-start="1604.19" data-end="1606.049">are evil we should go with you as far</span> <span data-start="1606.049" data-end="1610.489">inside of the function so for example in</span> <span data-start="1610.489" data-end="1612.259">this case when you have nested functions</span> <span data-start="1612.259" data-end="1615.99">and then this Ward 3 right</span> <span data-start="1615.99" data-end="1618.929">so if you don't have it then the engine</span> <span data-start="1618.929" data-end="1621.09">will will look up the scope chain find</span> <span data-start="1621.09" data-end="1623.85">this other a anything sound fine found</span> <span data-start="1623.85" data-end="1628.98">it will go to the global so so if you</span> <span data-start="1628.98" data-end="1631.559">can if you can avoid this going up the</span> <span data-start="1631.559" data-end="1634.8">scope chain that's a good thing and it</span> <span data-start="1634.8" data-end="1636.66">also helps minification because most of</span> <span data-start="1636.66" data-end="1639.27">the terminus is out there will not</span> <span data-start="1639.27" data-end="1642">rename any global variables because it's</span> <span data-start="1642" data-end="1644.67">not safe to do so so when you use local</span> <span data-start="1644.67" data-end="1647.19">variable it can be safely minified to a</span> <span data-start="1647.19" data-end="1651.059">shorter name one kind of pattern here is</span> <span data-start="1651.059" data-end="1653.46">when you if you use some sort of module</span> <span data-start="1653.46" data-end="1657.2">pattern right and inside there you have</span> <span data-start="1657.2" data-end="1660.27">you need to access the window object the</span> <span data-start="1660.27" data-end="1662.67">document maybe some other module or</span> <span data-start="1662.67" data-end="1665.24">something that I've seen people do is</span> <span data-start="1665.24" data-end="1668.73">pass all those tough to your to your</span> <span data-start="1668.73" data-end="1671.1">module at the beginning right when it's</span> <span data-start="1671.1" data-end="1673.5">defined so here you have access to the</span> <span data-start="1673.5" data-end="1675.54">go to the global object have a reference</span> <span data-start="1675.54" data-end="1678.179">to the document and so on so the thing</span> <span data-start="1678.179" data-end="1679.74">with that is that it can kind of quickly</span> <span data-start="1679.74" data-end="1682.59">turn into an anti-pattern right if your</span> <span data-start="1682.59" data-end="1684.98">module gross and you don't have nice</span> <span data-start="1684.98" data-end="1688.11">cold folding and stuff you just end up</span> <span data-start="1688.11" data-end="1689.7">scrolling up and down up and down to see</span> <span data-start="1689.7" data-end="1695.19">okay what was that horrible and using</span> <span data-start="1695.19" data-end="1696.99">local variables is especially true when</span> <span data-start="1696.99" data-end="1698.88">you when you deal with Don and we'll</span> <span data-start="1698.88" data-end="1701.87">talk a bit about that so we're using</span> <span data-start="1701.87" data-end="1704.58">reusing stuff as much as possible so for</span> <span data-start="1704.58" data-end="1707.82">example a common thing that that is</span> <span data-start="1707.82" data-end="1711.96">needed in in applications is to sniff</span> <span data-start="1711.96" data-end="1715.29">the browser features right so you don't</span> <span data-start="1715.29" data-end="1717.21">have to do that every time so once once</span> <span data-start="1717.21" data-end="1719.45">the script is loaded it's it's</span> <span data-start="1719.45" data-end="1722.22">impossible that this the engine will</span> <span data-start="1722.22" data-end="1723.87">change while your program is running</span> <span data-start="1723.87" data-end="1726.24">right so once you've sniffed that you</span> <span data-start="1726.24" data-end="1728.429">have support for our event listener is</span> <span data-start="1728.429" data-end="1729.72">not going to change throughout the life</span> <span data-start="1729.72" data-end="1732.03">of the application so it kind of makes</span> <span data-start="1732.03" data-end="1735.12">sense to do this sort of branching when</span> <span data-start="1735.12" data-end="1737.429">when the code is loaded or maybe the</span> <span data-start="1737.429" data-end="1739.41">first time that it's cold right so you</span> <span data-start="1739.41" data-end="1742.17">basically sniff whatever the browser</span> <span data-start="1742.17" data-end="1743.96">supports and then</span> <span data-start="1743.96" data-end="1746.809">define the function on the fly so this</span> <span data-start="1746.809" data-end="1749.75">browser sniffing is done only once</span> <span data-start="1749.75" data-end="1752.73">another thing is to use some sort of</span> <span data-start="1752.73" data-end="1755.85">memorization when you have we have a</span> <span data-start="1755.85" data-end="1758.279">chance that some some expensive task</span> <span data-start="1758.279" data-end="1760.86">will be repeated again you the same</span> <span data-start="1760.86" data-end="1761.97">function will be called with the same</span> <span data-start="1761.97" data-end="1764.34">parameters it'd be easiest thing is to</span> <span data-start="1764.34" data-end="1766.139">just because functions are objects right</span> <span data-start="1766.139" data-end="1768.57">so you create a new cache property to</span> <span data-start="1768.57" data-end="1770.85">your function and you know just use the</span> <span data-start="1770.85" data-end="1773.25">parameter or maybe serialize the JSON</span> <span data-start="1773.25" data-end="1775.98">the folder parameters and store that</span> <span data-start="1775.98" data-end="1778.559">result for later so one problem with</span> <span data-start="1778.559" data-end="1781.19">that is that your cash is kind of</span> <span data-start="1781.19" data-end="1783.899">visible it's accessible so you might</span> <span data-start="1783.899" data-end="1786.45">delete it or somebody else or if you</span> <span data-start="1786.45" data-end="1788.1">redefine this function or something like</span> <span data-start="1788.1" data-end="1791.429">that so other other approaches is to use</span> <span data-start="1791.429" data-end="1794.7">a closure right to protect your cash and</span> <span data-start="1794.7" data-end="1796.47">also an interesting approach would be to</span> <span data-start="1796.47" data-end="1798.72">store that in in an offline calf right</span> <span data-start="1798.72" data-end="1800.519">now they have session storage local</span> <span data-start="1800.519" data-end="1802.769">storage you know that if especially if</span> <span data-start="1802.769" data-end="1804.09">chances are that you're doing something</span> <span data-start="1804.09" data-end="1805.71">expensive that it's not going to change</span> <span data-start="1805.71" data-end="1807.72">for the next page or even for the next</span> <span data-start="1807.72" data-end="1810.779">visit it might be a good idea to to</span> <span data-start="1810.779" data-end="1812.22">store this thing in an offline cash</span> <span data-start="1812.22" data-end="1816.96">precompute some stuff for later and I've</span> <span data-start="1816.96" data-end="1820.47">seen people even do use offline caching</span> <span data-start="1820.47" data-end="1824.58">to the store and their code like Jesus</span> </p>
<p><span data-start="1824.58" data-end="1827.69">CSS and JavaScript in the cache because</span> <span data-start="1827.69" data-end="1830.94">idea for the study was that about half</span> <span data-start="1830.94" data-end="1832.98">of the users will always come with an</span> <span data-start="1832.98" data-end="1836.37">empty cache so the cash is not that that</span> <span data-start="1836.37" data-end="1838.47">relevant relate so if you can if you can</span> <span data-start="1838.47" data-end="1841.039">store it offline it's a good idea even</span> <span data-start="1841.039" data-end="1845.309">Google Gmail they they posted something</span> <span data-start="1845.309" data-end="1846.899">about doing something like this and even</span> <span data-start="1846.899" data-end="1848.73">when you have a new when they have a new</span> <span data-start="1848.73" data-end="1851.429">release they will just send a patch a</span> <span data-start="1851.429" data-end="1853.95">diff whatever change in the new release</span> <span data-start="1853.95" data-end="1856.38">and they apply the patch locally and</span> <span data-start="1856.38" data-end="1860.25">then update their offline cash so so</span> <span data-start="1860.25" data-end="1861.72">writing to the offline cash of course</span> <span data-start="1861.72" data-end="1864.539">has has the price of its own but it</span> <span data-start="1864.539" data-end="1869.02">might be useful for some cases</span> <span data-start="1869.03" data-end="1875.57">so an example of using the memorization</span> <span data-start="1875.57" data-end="1881.18">in a in you know a closure right so</span> <span data-start="1881.18" data-end="1883.67">there's many ways to do inheritance in</span> </p>
<p><span data-start="1883.67" data-end="1885.23">JavaScript so this this is kind of a</span> <span data-start="1885.23" data-end="1888.35">popular classical inheritance pattern</span> <span data-start="1888.35" data-end="1892.34">with your child constructor inherits</span> <span data-start="1892.34" data-end="1893.84">from the parent in the way to do that is</span> <span data-start="1893.84" data-end="1896.09">to use a temporary function and set its</span> <span data-start="1896.09" data-end="1898.67">prototype to the parents prototype so</span> <span data-start="1898.67" data-end="1900.98">every time you call that function in</span> <span data-start="1900.98" data-end="1903.02">actually creating the same function</span> <span data-start="1903.02" data-end="1905.3">again so it kind of makes sense to put</span> <span data-start="1905.3" data-end="1907.79">that outside and just create it once and</span> <span data-start="1907.79" data-end="1910.87">then create a return a new function that</span> <span data-start="1910.87" data-end="1914.9">uses that already created f then I have</span> <span data-start="1914.9" data-end="1917.48">a test case again this is something like</span> <span data-start="1917.48" data-end="1921.88">a nano optimization really because you</span> <span data-start="1921.88" data-end="1924.35">rarely need to do all that inheritance</span> <span data-start="1924.35" data-end="1926.6">tough but just an example of how you can</span> <span data-start="1926.6" data-end="1931.16">use to closure to store to store your</span> <span data-start="1931.16" data-end="1933.41">your whatever you want to cash right so</span> <span data-start="1933.41" data-end="1936.47">it's a bit faster between anywhere</span> <span data-start="1936.47" data-end="1938.21">between twenty and fifty percent across</span> <span data-start="1938.21" data-end="1942.41">browsers it's not something insane on</span> <span data-start="1942.41" data-end="1944.57">just an example same thing with when you</span> <span data-start="1944.57" data-end="1946.64">when you have regular expression objects</span> <span data-start="1946.64" data-end="1948.44">that you will end up creating over and</span> <span data-start="1948.44" data-end="1951.08">over again not in a look like this but</span> <span data-start="1951.08" data-end="1952.7">you know in several calls of the</span> <span data-start="1952.7" data-end="1955.22">function kind of makes sense to put that</span> <span data-start="1955.22" data-end="1958.79">regular expression outside of whatever</span> <span data-start="1958.79" data-end="1960.86">is repeating right so if it's a module</span> <span data-start="1960.86" data-end="1962.45">then you put it in a property of that</span> <span data-start="1962.45" data-end="1965.27">module or your object so you don't you</span> <span data-start="1965.27" data-end="1966.8">don't have to recreate that object every</span> <span data-start="1966.8" data-end="1972.29">time again not a huge benefit but just a</span> <span data-start="1972.29" data-end="1976.69">way to go and reuse as much as possible</span> <span data-start="1976.69" data-end="1979.88">so another thing is to always cash the</span> <span data-start="1979.88" data-end="1983.42">length in loops right so that's a common</span> <span data-start="1983.42" data-end="1986.06">way to do loops which suffers from</span> <span data-start="1986.06" data-end="1990.68">several problems so first if j is lint</span> <span data-start="1990.68" data-end="1993.92">will complain about the use of IE + +</span> <span data-start="1993.92" data-end="1994.899">right and then</span> <span data-start="1994.899" data-end="1996.729">if you subscribe to the single bar</span> <span data-start="1996.729" data-end="1998.739">pattern and then you define all your fun</span> </p>
<p><span data-start="1998.739" data-end="2001.109">Oh your voice at the top you would</span> <span data-start="2001.109" data-end="2002.219">probably change it to something like</span> <span data-start="2002.219" data-end="2004.82">this and then the next step will be to</span> <span data-start="2004.82" data-end="2008.159">to catch the length right in and take</span> <span data-start="2008.159" data-end="2009.869">the length of that array that you're</span> <span data-start="2009.869" data-end="2012.719">iterating and compared to it instead of</span> <span data-start="2012.719" data-end="2013.95">checking the length every time</span> <span data-start="2013.95" data-end="2017.999">especially true when you work with HTML</span> <span data-start="2017.999" data-end="2023.099">collections right so yeah you have yet</span> <span data-start="2023.099" data-end="2025.649">another way is to take the length and</span> <span data-start="2025.649" data-end="2028.789">then count down to it right because</span> <span data-start="2028.789" data-end="2032.279">comparing 20 / sorry but those are kind</span> <span data-start="2032.279" data-end="2035.7">of valiant micro optimization so the</span> <span data-start="2035.7" data-end="2037.289">probably the biggest thing that you have</span> <span data-start="2037.289" data-end="2039.33">to focus on after making sure that the</span> <span data-start="2039.33" data-end="2041.249">scripts are loaded as fast as possible</span> <span data-start="2041.249" data-end="2043.589">the first start first place to start</span> <span data-start="2043.589" data-end="2047.279">optimizing is the DOM and I just want to</span> <span data-start="2047.279" data-end="2050.059">give an illustration how bad things are</span> <span data-start="2050.059" data-end="2053.19">so if you do some some crazy long loop</span> <span data-start="2053.19" data-end="2055.649">and then you update the innerhtml off of</span> <span data-start="2055.649" data-end="2058.919">some element you get every time like in</span> <span data-start="2058.919" data-end="2060.179">this case fifteen thousand repetitions</span> <span data-start="2060.179" data-end="2062.73">you read the value once and right at</span> <span data-start="2062.73" data-end="2065.909">once so a better ways to go loco right</span> <span data-start="2065.909" data-end="2068.129">and use use a local variable and then</span> <span data-start="2068.129" data-end="2069.839">once you're done with it just appended</span> <span data-start="2069.839" data-end="2073.079">or update that that element wants so you</span> <span data-start="2073.079" data-end="2076.679">have only accessing the dome twice so</span> <span data-start="2076.679" data-end="2078.599">this is ridiculous example of course but</span> <span data-start="2078.599" data-end="2082.47">the thing is that's what what I meant</span> <span data-start="2082.47" data-end="2084.45">when when I want to talked about</span> <span data-start="2084.45" data-end="2087.02">comparing a would be right just to see</span> <span data-start="2087.02" data-end="2091.379">how bad it is so it's it's really bad</span> <span data-start="2091.379" data-end="2093.27">across all the browsers right anywhere</span> <span data-start="2093.27" data-end="2097.02">between it's it's not one hundred fifty</span> <span data-start="2097.02" data-end="2100.98">percent it's 150 times slower in a so</span> <span data-start="2100.98" data-end="2102.96">this is something that is worth</span> <span data-start="2102.96" data-end="2105.089">considering right instead of trying to</span> <span data-start="2105.089" data-end="2107.579">optimize twenty percent or something</span> <span data-start="2107.579" data-end="2108.93">this is you know hundreds of times</span> <span data-start="2108.93" data-end="2111.75">faster and it's it's kind of important</span> <span data-start="2111.75" data-end="2113.97">to understand so this is my slide with a</span> <span data-start="2113.97" data-end="2117.119">special effect to understand why why it</span> <span data-start="2117.119" data-end="2118.77">is the problem with the dorm right</span> <span data-start="2118.77" data-end="2121.44">because you have because the dome is</span> <span data-start="2121.44" data-end="2122.94">implemented separately from the</span> </p>
<p><span data-start="2122.94" data-end="2124.77">JavaScript engine and it makes sense</span> <span data-start="2124.77" data-end="2125.85">right because you don't</span> <span data-start="2125.85" data-end="2127.38">necessarily meet the dome to run</span> <span data-start="2127.38" data-end="2130.5">JavaScript applications or in ice case</span> <span data-start="2130.5" data-end="2133.29">you can use another language like did</span> <span data-start="2133.29" data-end="2134.91">this crypto to work with the same dome</span> <span data-start="2134.91" data-end="2138.24">right so if you think about going from</span> <span data-start="2138.24" data-end="2139.95">JavaScript and accessing something on</span> <span data-start="2139.95" data-end="2141.99">the Dom it's it's like a toll bridge</span> <span data-start="2141.99" data-end="2144.69">that's a Microsoft really nice</span> <span data-start="2144.69" data-end="2147.99">comparison so you're crossing the bridge</span> <span data-start="2147.99" data-end="2149.4">and it's a toll bridge and you have to</span> <span data-start="2149.4" data-end="2151.17">pay every time you cross it so this is</span> <span data-start="2151.17" data-end="2154.17">the special factory and then you across</span> <span data-start="2154.17" data-end="2156">the region and you pay the penalty so</span> <span data-start="2156" data-end="2159.54">you do that every time so the important</span> <span data-start="2159.54" data-end="2161.13">thing to remember is the dome is slowing</span> <span data-start="2161.13" data-end="2163.08">if you want to start somewhere that's</span> <span data-start="2163.08" data-end="2167.7">the place to start just one last thing</span> <span data-start="2167.7" data-end="2170.58">because i had patterns in the title so i</span> <span data-start="2170.58" data-end="2172.83">thought maybe people we some of you</span> <span data-start="2172.83" data-end="2174.66">might be expecting to talk about design</span> <span data-start="2174.66" data-end="2177.27">patterns so let's just quickly go over</span> <span data-start="2177.27" data-end="2180.24">that proxy design pattern like from the</span> <span data-start="2180.24" data-end="2182.67">book of four so on so Brendan I talked</span> <span data-start="2182.67" data-end="2186.36">yesterday about proxies coming to do I</span> <span data-start="2186.36" data-end="2190.11">comma script which is nice but we might</span> <span data-start="2190.11" data-end="2191.79">meanwhile you can implement it yourself</span> <span data-start="2191.79" data-end="2193.92">for certain tasks so what do what is the</span> <span data-start="2193.92" data-end="2196.08">proxy pattern is that when you have one</span> <span data-start="2196.08" data-end="2198.15">object that acts as an interface to</span> <span data-start="2198.15" data-end="2200.34">another so instead of one of your</span> <span data-start="2200.34" data-end="2202.05">calling the other one method it goes</span> <span data-start="2202.05" data-end="2205.68">through a proxy so you have something</span> <span data-start="2205.68" data-end="2208.53">like this where this is your the object</span> <span data-start="2208.53" data-end="2210.48">that wants to consume the so-called real</span> <span data-start="2210.48" data-end="2213.75">subject and but it doesn't access it</span> <span data-start="2213.75" data-end="2215.61">directly but it goes through a proxy so</span> <span data-start="2215.61" data-end="2218.16">that's nice when you have for example</span> <span data-start="2218.16" data-end="2220.74">the client wants to initialize that real</span> <span data-start="2220.74" data-end="2223.74">subject but it may never use it right so</span> <span data-start="2223.74" data-end="2226.98">it says cause some sort of init method</span> <span data-start="2226.98" data-end="2230.16">and the proxy says ok it's done but it's</span> <span data-start="2230.16" data-end="2231.87">actually nothing was done yet because</span> <span data-start="2231.87" data-end="2234.09">chances are that it might never be used</span> <span data-start="2234.09" data-end="2236.36">so then when the client actually wants</span> <span data-start="2236.36" data-end="2239.31">that we are subject to do something and</span> <span data-start="2239.31" data-end="2241.86">then the proxy was saying okay I guess</span> <span data-start="2241.86" data-end="2243.57">that's needed so it will talk or both of</span> <span data-start="2243.57" data-end="2247.98">the methods like this so for example</span> <span data-start="2247.98" data-end="2251.19">let's say you have a list of videos and</span> <span data-start="2251.19" data-end="2253.2">you want to play each video and you have</span> <span data-start="2253.2" data-end="2256.26">to make an HTTP request to get more</span> <span data-start="2256.26" data-end="2258.21">information about that video</span> <span data-start="2258.21" data-end="2260.49">and any chances are you might probably</span> <span data-start="2260.49" data-end="2262.29">expand all of them or make several</span> <span data-start="2262.29" data-end="2265.68">requests so it's a good idea the most</span> <span data-start="2265.68" data-end="2267.119">important thing when optimizing web</span> <span data-start="2267.119" data-end="2269.31">applications of course is to minimize</span> <span data-start="2269.31" data-end="2273.45">the number of requests so instead of</span> <span data-start="2273.45" data-end="2276.3">going every time through consuming that</span> </p>
<p><span data-start="2276.3" data-end="2278.609">HTTP object that you have created</span> <span data-start="2278.609" data-end="2281.609">somehow that's all the transport to the</span> <span data-start="2281.609" data-end="2284.76">server all right you can introduce proxy</span> <span data-start="2284.76" data-end="2286.74">in between and it might even something</span> <span data-start="2286.74" data-end="2290.369">as simple as just a minimal 100</span> <span data-start="2290.369" data-end="2293.099">milliseconds timeout something that the</span> <span data-start="2293.099" data-end="2294.93">user will not feel but if chances are</span> <span data-start="2294.93" data-end="2297.63">you have to make several requests in a</span> <span data-start="2297.63" data-end="2300.21">in a quick sequence then it makes sense</span> <span data-start="2300.21" data-end="2302.07">that the proxy will will combine all</span> <span data-start="2302.07" data-end="2304.68">those requests send them once get all</span> <span data-start="2304.68" data-end="2306.48">the data time which will be much faster</span> <span data-start="2306.48" data-end="2309.589">than making the separate requests and</span> <span data-start="2309.589" data-end="2312.72">you can even add some sort of caching</span> <span data-start="2312.72" data-end="2317.25">right so if if you're your client wants</span> <span data-start="2317.25" data-end="2319.5">to request the same video right the</span> <span data-start="2319.5" data-end="2322.2">second time the proxy will serve it from</span> <span data-start="2322.2" data-end="2328.64">the cache as a no that's my last slide</span> <span data-start="2328.64" data-end="2332.16">just to kind of try to summarize is</span> <span data-start="2332.16" data-end="2335.31">whenever you you try to approach a</span> <span data-start="2335.31" data-end="2337.89">performance project or or you want to</span> <span data-start="2337.89" data-end="2339.93">apply some best practices or advice out</span> <span data-start="2339.93" data-end="2342.3">there you should always ask why is it is</span> <span data-start="2342.3" data-end="2344.76">it true it's the relevant how is the</span> <span data-start="2344.76" data-end="2349.08">experiment down I know just you know</span> <span data-start="2349.08" data-end="2352.98">just question then the next thing is to</span> <span data-start="2352.98" data-end="2355.14">make sure that the script is loaded is</span> <span data-start="2355.14" data-end="2358.28">quickly and s asynchronously as possible</span> <span data-start="2358.28" data-end="2361.19">remember to touch the dumb wisely and</span> <span data-start="2361.19" data-end="2364.23">and for the micro nano optimizations</span> <span data-start="2364.23" data-end="2366.839">kind of the tool that lines to to work</span> <span data-start="2366.839" data-end="2368.76">with locals as much as possible</span> <span data-start="2368.76" data-end="2371.13">especially in the dome and then reuse</span> <span data-start="2371.13" data-end="2373.19">don't don't create the same objects or</span> <span data-start="2373.19" data-end="2377.099">same properties twice so that's all</span> <span data-start="2377.099" data-end="2378.93">ahead I'm hope I'm okay with the time</span> <span data-start="2378.93" data-end="2382.64">right</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
