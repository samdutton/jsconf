<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>fAoSidif1gs</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/fAoSidif1gs?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="18.68" data-end="19.68">Okay.</span> <span data-start="19.68" data-end="21.76">I am going to lay my cards on the table.</span> <span data-start="21.76" data-end="26.79">Building Javascript applications is hot.</span> <span data-start="26.79" data-end="33.11">A part of it is that is state and events.</span> <span data-start="33.11" data-end="43.34">I would take a step back and take a look at some of the patterns applied in JS applications</span> <span data-start="43.34" data-end="49.55">and handling state and events at scalable and maintainable fashion.</span> <span data-start="49.55" data-end="55.88">And some of the tactics to build on that.</span> <span data-start="55.88" data-end="62.7">Thanks for the introduction.</span> <span data-start="62.7" data-end="63.7">I'd introduce myself.</span> <span data-start="63.7" data-end="69.25">I am not a Lama and I come from New Zealand.</span> <span data-start="69.25" data-end="70.31">It was a long flight.</span> <span data-start="70.31" data-end="71.93">It is my first time here.</span> </p>
<p><span data-start="71.93" data-end="75.25">It has been fun.</span> <span data-start="75.25" data-end="82.64">If you are over in New Zealand, you can look at me on Twitter.</span> <span data-start="82.64" data-end="83.97">And everywhere else.</span> <span data-start="83.97" data-end="87.13">on Internet.</span> <span data-start="87.13" data-end="89.25">I work at GitHub.</span> <span data-start="89.25" data-end="92.21">Before I get started, roll into this.</span> <span data-start="92.21" data-end="94.51">I have 2 confessions to make.</span> <span data-start="94.51" data-end="101.08">My job has this, nothing to do with JS.</span> <span data-start="101.08" data-end="102.45">Don't leave just yet.</span> <span data-start="102.45" data-end="105.96">I spend my days on the native applications.</span> <span data-start="105.96" data-end="109.939">I do GitHub for Mac and Windows.</span> <span data-start="109.939" data-end="114.31">My second confession is, I'm a Windows developer.</span> </p>
<p><span data-start="114.31" data-end="116.9">Hear me out!</span> <span data-start="116.9" data-end="122.11">Before I was at GitHub I was working a lot with JS.</span> <span data-start="122.11" data-end="125.15">In terms of architecture.</span> <span data-start="125.15" data-end="132.019">The JS and the browser have a lot in common with the applications on the desktop.</span> <span data-start="132.019" data-end="135.37">It is the amount of state.</span> <span data-start="135.37" data-end="136.9">Models.</span> <span data-start="136.9" data-end="143.26">The state of the all of the different views displayed on a screen at any point of time.</span> </p>
<p><span data-start="143.26" data-end="144.93">And in the browser, the state.</span> <span data-start="144.93" data-end="149.36">It is a truckload of state we keep track of.</span> <span data-start="149.36" data-end="153.37">On its own, state isn't that interesting.</span> <span data-start="153.37" data-end="159.13">What makes an application interesting is that we are able to interact.</span> <span data-start="159.13" data-end="161.55">Force new states.</span> <span data-start="161.55" data-end="163.959">Force state transitions.</span> <span data-start="163.959" data-end="170.4">They are going to occur via events.</span> <span data-start="170.4" data-end="171.94">Data into the form.</span> <span data-start="171.94" data-end="173.28">Click the save botton.</span> <span data-start="173.28" data-end="177.53">And transition into a new state.</span> <span data-start="177.53" data-end="179.22">Maybe an invalid one.</span> <span data-start="179.22" data-end="183.769">We have a lot of ways that we can make interesting things happen.</span> <span data-start="183.769" data-end="186.76">A lot of ways we can fire events.</span> <span data-start="186.76" data-end="188.56">Dom events, model events.</span> </p>
<p><span data-start="188.56" data-end="191.01">On the channels.</span> <span data-start="191.01" data-end="197.489">We have a lot of state.</span> <span data-start="197.489" data-end="200.23">And we have a lot of events.</span> <span data-start="200.23" data-end="201.989">And it all needs to be managed.</span> <span data-start="201.989" data-end="208.06">As the complexity in the application grows, the amount of code, the features we need to</span> <span data-start="208.06" data-end="214.06">support, the amount of people we have on the team, all of that grows, becomes harder to</span> <span data-start="214.06" data-end="217.829">keep track of all of the state and events.</span> </p>
<p><span data-start="217.829" data-end="220.889">How many times you have seen code that has conflated ideas.</span> <span data-start="220.889" data-end="223.53">state and views.</span> <span data-start="223.53" data-end="228.59">State and events.</span> <span data-start="228.59" data-end="236.16">Without a way to separate thie data from the views and the state from events, it gets intertwined.</span> <span data-start="236.16" data-end="239.66">We cann't maintain it and can't change it.</span> <span data-start="239.66" data-end="243.62">On top of all of that we are feeling shitty about it.</span> <span data-start="243.62" data-end="248.82">Without the architectural plan, it is a headache.</span> <span data-start="248.82" data-end="252.36">So, what do we do?</span> <span data-start="252.36" data-end="255.949">We take the inspiration from other places.</span> <span data-start="255.949" data-end="257.01">Design patterns.</span> <span data-start="257.01" data-end="262.15">Which have proven to be problems like spaghetti code.</span> <span data-start="262.15" data-end="266.44">We are able to do this.</span> <span data-start="266.44" data-end="271.79">We can take things that have been applied in 1 context and apply that in an entirely</span> <span data-start="271.79" data-end="272.79">new one.</span> </p>
<p><span data-start="272.79" data-end="274.23">Because we can do that.</span> <span data-start="274.23" data-end="276.7">Take inspiration.</span> <span data-start="276.7" data-end="282.24">Design patterns tend to evolve in an organic fashion.</span> <span data-start="282.24" data-end="284.05">From one place to another and stick.</span> <span data-start="284.05" data-end="285.18">They are funny.</span> <span data-start="285.18" data-end="291.54">Or they contrain a solution to a tricky problem.</span> <span data-start="291.54" data-end="295.27">If you take the MV stuff.</span> </p>
<p><span data-start="295.27" data-end="298.21">This is no exception to that.</span> <span data-start="298.21" data-end="302.74">Presentation patterns actually originated out of the client.</span> <span data-start="302.74" data-end="305.36">Applications were built for the desktop.</span> <span data-start="305.36" data-end="306.81">The Smalltalk days.</span> <span data-start="306.81" data-end="311.33">Over time, Web server programming became popular.</span> <span data-start="311.33" data-end="313.36">We applied it here too.</span> <span data-start="313.36" data-end="319.9">We are building rich applications in the browser.</span> <span data-start="319.9" data-end="323.68">We have frameworks.</span> <span data-start="323.68" data-end="328.669">And then we have JS frameworks, also implementations of Mvc.</span> <span data-start="328.669" data-end="329.669">What gives?</span> <span data-start="329.669" data-end="335.59">Well, I'm not here to turn this into a conversation who is doing Mvc by the book.</span> <span data-start="335.59" data-end="337.81">That's boring.</span> <span data-start="337.81" data-end="342.58">What is interesting is to take a look at each of the flavours of MV.</span> <span data-start="342.58" data-end="348.28">And see how they are giving state and events in each of the cases.</span> <span data-start="348.28" data-end="354.05">To see which ideas can stick and which ones are causing too much pain.</span> </p>
<p><span data-start="354.05" data-end="361.72">Let's start out by looking at how Mvc would place out on the server.</span> <span data-start="361.72" data-end="363.58">This is a reminder to you guys.</span> <span data-start="363.58" data-end="369.46">Actually, can I see hands of people who are comfortable talking about Mvc?</span> <span data-start="369.46" data-end="370.59">Great.</span> <span data-start="370.59" data-end="373.97">Most of you.</span> <span data-start="373.97" data-end="375.629">Few hands who didn't go up.</span> <span data-start="375.629" data-end="378.34">I'll be quick and going through the basics.</span> <span data-start="378.34" data-end="379.71">We have our models.</span> <span data-start="379.71" data-end="380.879">They are the applications.</span> <span data-start="380.879" data-end="383.639">Where the things happen.</span> <span data-start="383.639" data-end="387.069">The views, presentations of those models.</span> <span data-start="387.069" data-end="392.41">It is in the form of a Json document.</span> <span data-start="392.41" data-end="396.419">Representations of models current state.</span> <span data-start="396.419" data-end="398.139">We have the controllers.</span> </p>
<p><span data-start="398.139" data-end="401.19">Sending commands to the model.</span> <span data-start="401.19" data-end="408.44">Transitioning the model state and returning a new snapshot of that current state.</span> <span data-start="408.44" data-end="412.509">Routes don't really fit into the traditional definition.</span> <span data-start="412.509" data-end="415.8">On the server they are key part of the architecture.</span> <span data-start="415.8" data-end="424.409">Response from matching the requests and delegating it off to a controller and action.</span> <span data-start="424.409" data-end="429.16">The point that I want to make here, how this pertains to state is managed on the server.</span> <span data-start="429.16" data-end="431.379">It is not.</span> <span data-start="431.379" data-end="433">We don't have state on ther server.</span> <span data-start="433" data-end="434.699">We might, but we probably don't.</span> <span data-start="434.699" data-end="437.8">We build stateless applications.</span> <span data-start="437.8" data-end="442.09">We scale out.</span> <span data-start="442.09" data-end="446.469">We achieve this by persisting to datastore of some kind.</span> <span data-start="446.469" data-end="448.86">Which has the question.</span> </p>
<p><span data-start="448.86" data-end="454.9">If we want to be stateless, how are we going to make interesting things to the data.</span> <span data-start="454.9" data-end="460.999">How we transition into a new state?</span> <span data-start="460.999" data-end="461.999">We address state.</span> <span data-start="461.999" data-end="462.999">Http.</span> <span data-start="462.999" data-end="466.029">Get me a list.</span> <span data-start="466.029" data-end="468.1">If we want to delete a list of books.</span> <span data-start="468.1" data-end="472.16">I don't know why.</span> <span data-start="472.16" data-end="475.52">If you did, Http, delete.</span> <span data-start="475.52" data-end="478.729">What we have done here, we have simulated a state transition.</span> <span data-start="478.729" data-end="483.12">We have simulated an event.</span> <span data-start="483.12" data-end="490.409">In this world, state and all state transitions are via Http.</span> <span data-start="490.409" data-end="492.469">The controller has an action invoked.</span> </p>
<p><span data-start="492.469" data-end="496.009">The model look up and maybe a state transition.</span> <span data-start="496.009" data-end="501.069">And a snapshot returned.</span> <span data-start="501.069" data-end="504.479">An architecture that is linear.</span> <span data-start="504.479" data-end="509.229">Requests come in and a snapshot is returned.</span> <span data-start="509.229" data-end="514.69">We go down the stack and back up.</span> <span data-start="514.69" data-end="521.37">How does it all relate to how the implementation's playout on the client?</span> <span data-start="521.37" data-end="527.17">The key difference is, on the client, we are no longer to be stateless.</span> <span data-start="527.17" data-end="530.99">We have all of the state in memory.</span> <span data-start="530.99" data-end="532.36">We can do great things.</span> <span data-start="532.36" data-end="536.26">We can build a much richer state of interactions.</span> <span data-start="536.26" data-end="537.9">We keep a bunch of things in memory.</span> <span data-start="537.9" data-end="540.589">To help us form this.</span> <span data-start="540.589" data-end="546.54">A very non linear state space.</span> <span data-start="546.54" data-end="547.54">We have our models.</span> <span data-start="547.54" data-end="551.19">They are coupled with the snapshot from the server.</span> </p>
<p><span data-start="551.19" data-end="554.839">We add complexity on top of that.</span> <span data-start="554.839" data-end="559.26">Validation, security. a lot of other kinds of behaviors.</span> <span data-start="559.26" data-end="565.54">We have an enormous amount of possible states that the model could be in.</span> <span data-start="565.54" data-end="569.85">On the screen at any point, we have a lot of views.</span> <span data-start="569.85" data-end="572.5">Each presenting models state.</span> <span data-start="572.5" data-end="578.88">And together all of those views are going to define the overall view state of the application.</span> <span data-start="578.88" data-end="581.339">What's being presented in the sidebar?</span> <span data-start="581.339" data-end="582.339">The contact view.</span> <span data-start="582.339" data-end="585.57">What is in the main region.</span> <span data-start="585.57" data-end="589.019">All of this is adding complexity to the state space.</span> <span data-start="589.019" data-end="594.459">And then we have the overall state of the application.</span> <span data-start="594.459" data-end="597.13">Questions like, which modules are invoked?</span> <span data-start="597.13" data-end="599.32">Which no longer being used?</span> <span data-start="599.32" data-end="602.1">Can I clean it up?</span> <span data-start="602.1" data-end="610.36">And then, as an added bonus, we no longer have to emulate those state transitions across</span> <span data-start="610.36" data-end="612.16">boundary.</span> </p>
<p><span data-start="612.16" data-end="619.75">They occur in the same context.</span> <span data-start="619.75" data-end="620.85">That's empowering.</span> <span data-start="620.85" data-end="625.11">We move around that state space in a non linear fashion.</span> <span data-start="625.11" data-end="628.459">It should be reflected in the code we write.</span> <span data-start="628.459" data-end="630.92">In the simplest way possible.</span> <span data-start="630.92" data-end="635.98">We need to test and predict how the application is going to behave.</span> <span data-start="635.98" data-end="637.99">We need to have a plan.</span> </p>
<p><span data-start="637.99" data-end="642.57">Apply come ideas, patterns to help us.</span> <span data-start="642.57" data-end="646.589">On the server, we bring over those presentation patterns.</span> <span data-start="646.589" data-end="650.81">Models, views, controllers.</span> <span data-start="650.81" data-end="653.42">And then we add routes to the equation.</span> <span data-start="653.42" data-end="661.06">Now, I mentioned, traditional implementations don't..</span> <span data-start="661.06" data-end="663.81">On the desktop that is true.</span> <span data-start="663.81" data-end="668.079">This is one place where the architecture differs.</span> <span data-start="668.079" data-end="672.29">Coming from the desktop I felt weird about it.</span> <span data-start="672.29" data-end="673.97">Why do we need routes?</span> <span data-start="673.97" data-end="675.199">How do they fit?</span> <span data-start="675.199" data-end="678.19">How do I put them into my architecture?</span> <span data-start="678.19" data-end="684.41">It all felt weird until I remember, we have the addressbar.</span> <span data-start="684.41" data-end="691.66">We need to be able to copy a link. and they should arrive at the same state.</span> <span data-start="691.66" data-end="699.98">Addressability is still a key for single page applications.</span> <span data-start="699.98" data-end="707.72">So what I want to do now is explore and question how we commonly see routes applied in JS apps.</span> </p>
<p><span data-start="707.72" data-end="711.48">Look at some of the ways we would structure the code.</span> <span data-start="711.48" data-end="714.28">I'll give the example in Backbone.</span> <span data-start="714.28" data-end="718.25">It might be different in each of the frameworks.</span> <span data-start="718.25" data-end="722.17">You might not see the steps.</span> <span data-start="722.17" data-end="726.17">But the series of events is going to be the same.</span> <span data-start="726.17" data-end="730.11">So, here we are dealing with a party of animals.</span> <span data-start="730.11" data-end="731.49">Party animals are pretty great.</span> </p>
<p><span data-start="731.49" data-end="737.52">We have got an animal model and a list of animals.</span> <span data-start="737.52" data-end="741.01">We have a view.</span> <span data-start="741.01" data-end="743.509">And then we have a router.</span> <span data-start="743.509" data-end="745.49">Interesting fact about backbone routers.</span> <span data-start="745.49" data-end="750.29">When they came out, it was cold a controller.</span> <span data-start="750.29" data-end="753.37">It led to confusion.</span> <span data-start="753.37" data-end="754.97">We have this router.</span> <span data-start="754.97" data-end="756.73">It defines 2 routes.</span> <span data-start="756.73" data-end="758.97">Party and uninvite.</span> <span data-start="758.97" data-end="762.569">The party one behaves liks a git.</span> <span data-start="762.569" data-end="766.99">And the uninvite like Http delete.</span> <span data-start="766.99" data-end="770.87">If we get it on the addressbar.</span> <span data-start="770.87" data-end="773.49">We invoke this function.</span> <span data-start="773.49" data-end="781.699">What it does is it looks in the collection, find the model in question, destroys it or</span> <span data-start="781.699" data-end="787.649">transitions its state and then it moves around into the dom.</span> </p>
<p><span data-start="787.649" data-end="792.3">To update the state there.</span> <span data-start="792.3" data-end="794.06">So why is this bad?</span> <span data-start="794.06" data-end="800.93">We are breaking encapsulation to push everything to the top of the code.</span> <span data-start="800.93" data-end="805.5">We have a view that is responsible for doing some iinitial rendering.</span> <span data-start="805.5" data-end="806.97">It has a reference.</span> <span data-start="806.97" data-end="814.519">The first thing we do is an active lookup of that model and then we transition the state</span> <span data-start="814.519" data-end="815.98">inside the router.</span> <span data-start="815.98" data-end="823.339">Then even crazier, we reach behind the view into the dom to update the view state.</span> <span data-start="823.339" data-end="824.57">Which feels a little weird.</span> </p>
<p><span data-start="824.57" data-end="827.23">We are breaking encapsulation.</span> <span data-start="827.23" data-end="832.589">We took those flavours that we saw on the server and tried to apply the linear approach</span> <span data-start="832.589" data-end="835.139">to the client.</span> <span data-start="835.139" data-end="836.43">We broke encapsulation.</span> <span data-start="836.43" data-end="841.709">To have the design around the native support.</span> <span data-start="841.709" data-end="849.14">We started to treat state and events, that gives the rich experience, treat them like</span> <span data-start="849.14" data-end="852.11">second class citizens.</span> <span data-start="852.11" data-end="854.259">We don't need to be manipulating the models.</span> <span data-start="854.259" data-end="855.959">Like rows in a database.</span> <span data-start="855.959" data-end="860.82">They can be rich and interactive.</span> <span data-start="860.82" data-end="864.41">We don't need to be pushing everything up to the routes.</span> <span data-start="864.41" data-end="869.99">And relying on routes to drive state transitions.</span> <span data-start="869.99" data-end="875.69">When routes become architectural driver, it is hard to know who is responsible for what.</span> </p>
<p><span data-start="875.69" data-end="882.94">In my mind, routes are a feature, not a driver.</span> <span data-start="882.94" data-end="885.69">The question is, are routes the enemy of the state?</span> <span data-start="885.69" data-end="887.95">They are not the enemy.</span> <span data-start="887.95" data-end="891.61">We really need routes like I said earlier.</span> <span data-start="891.61" data-end="894.36">It is an important consideration.</span> <span data-start="894.36" data-end="901.99">The thing that is causing pain here with managing state is only using routes as the driving</span> <span data-start="901.99" data-end="905.269">part of architecture.</span> <span data-start="905.269" data-end="909.5">We have emulated the designs that worked well for the stateless server.</span> <span data-start="909.5" data-end="914.959">The cracks start to show.</span> <span data-start="914.959" data-end="917.98">So, thankfully we can find a happy medium.</span> <span data-start="917.98" data-end="920.139">We can embrace the need for routes.</span> <span data-start="920.139" data-end="924.339">Without relying to drive state transitions.</span> <span data-start="924.339" data-end="930.12">First is address that example.</span> <span data-start="930.12" data-end="932.98">And drop the need to address state transitions.</span> <span data-start="932.98" data-end="936.65">We have our models like we had before.</span> </p>
<p><span data-start="936.65" data-end="941.66">Now our view is going to have an event hash.</span> <span data-start="941.66" data-end="942.73">This is nothing new.</span> <span data-start="942.73" data-end="944.74">Backbone has supported this long time.</span> <span data-start="944.74" data-end="946.18">All it is going to do.</span> <span data-start="946.18" data-end="949.189">Takes a click, invoke the function on the view itself.</span> <span data-start="949.189" data-end="954.06">It is going to grab the model it has a reference to.</span> <span data-start="954.06" data-end="955.25">Transition the state.</span> </p>
<p><span data-start="955.25" data-end="958.97">And remove itself from the Dom.</span> <span data-start="958.97" data-end="964.02">We don't have to do any of those unnecessary lookups.</span> <span data-start="964.02" data-end="966.56">And the view is in charge of itself.</span> <span data-start="966.56" data-end="967.74">In charge of the model.</span> <span data-start="967.74" data-end="972.51">And in charge of collapsing itself from the view.</span> <span data-start="972.51" data-end="980.29">If we don't want to address transitions and we still need to support the http get case,</span> <span data-start="980.29" data-end="982.68">how do we do it in a clear way?</span> <span data-start="982.68" data-end="988.329">I'll show you some ideas.</span> <span data-start="988.329" data-end="992.569">We are going to take the models, take the views, which render a template.</span> <span data-start="992.569" data-end="996.49">And a response from the interaction between the dom and the model.</span> <span data-start="996.49" data-end="998.71">We are going to give it to a controller object.</span> <span data-start="998.71" data-end="1002.8">It might keep track of a few models.</span> <span data-start="1002.8" data-end="1005.839">Of related functionality.</span> <span data-start="1005.839" data-end="1010.82">We are going to slide that into a module.</span> <span data-start="1010.82" data-end="1012.089">A singgle component.</span> <span data-start="1012.089" data-end="1015.82">And we are going to do this for a bunch of reasons.</span> </p>
<p><span data-start="1015.82" data-end="1016.86">Stability, composability.</span> <span data-start="1016.86" data-end="1020.12">It is sensible.</span> <span data-start="1020.12" data-end="1022.98">I love this quote.</span> <span data-start="1022.98" data-end="1026.06">It describes the idea behind modular thinking.</span> <span data-start="1026.06" data-end="1032.22">It says, the whole world is trying to build these large applications.</span> <span data-start="1032.22" data-end="1034.64">We should get off that bus right now.</span> </p>
<p><span data-start="1034.64" data-end="1036.51">It sucks, it is going nowhere.</span> <span data-start="1036.51" data-end="1043.22">We should start building smaller apps and testing those individually and bring them</span> <span data-start="1043.22" data-end="1047.28">all together to compose them in a larger application after the fact.</span> <span data-start="1047.28" data-end="1049.49">I really like that.</span> <span data-start="1049.49" data-end="1054.53">Modules are defined by functionality.</span> <span data-start="1054.53" data-end="1059.34">Within that module there is any view.</span> <span data-start="1059.34" data-end="1062.09">And keep track of its own internal state.</span> <span data-start="1062.09" data-end="1065.63">There are several options for implementing.</span> <span data-start="1065.63" data-end="1067.09">If you google.</span> <span data-start="1067.09" data-end="1072.33">It is a well discussed and understood topic.</span> <span data-start="1072.33" data-end="1076.76">We have modules, there are a lot of ways.</span> <span data-start="1076.76" data-end="1083.43">But for me, the golden rule about modules is while modules are free to present their</span> <span data-start="1083.43" data-end="1089.84">view, they are never free to place them in the dom.</span> <span data-start="1089.84" data-end="1093.46">That responsibility needs to go toanother object.</span> <span data-start="1093.46" data-end="1097.91">We don't want to couple our modules to the state of the dom.</span> </p>
<p><span data-start="1097.91" data-end="1102.35">We need to be able to remove one from one page and put it somewhere else and it should</span> <span data-start="1102.35" data-end="1104.42">function.</span> <span data-start="1104.42" data-end="1107.87">The other component responsible for making this choice.</span> <span data-start="1107.87" data-end="1111.16">I'm going to call it a layout composer.</span> <span data-start="1111.16" data-end="1113.21">Its responsibility is obvious.</span> <span data-start="1113.21" data-end="1116.46">To compose the UI.</span> <span data-start="1116.46" data-end="1118.87">A toplevel view like a shell.</span> </p>
<p><span data-start="1118.87" data-end="1124.75">With the regions that the modules are able to present themselves.</span> <span data-start="1124.75" data-end="1132.23">The composer is responsible for swapping the views in and out.</span> <span data-start="1132.23" data-end="1133.23">An example.</span> <span data-start="1133.23" data-end="1137.27">If you heard of Marionette.</span> <span data-start="1137.27" data-end="1141.37">The way it solves this problem, it has a regionmanager.</span> <span data-start="1141.37" data-end="1147.15">You can register a foo and tie it to a bar.</span> <span data-start="1147.15" data-end="1153.85">Or you can do the shorthand and define them all at once.</span> </p>
<p><span data-start="1153.85" data-end="1159.3">And the nice thing is, you can say, maincontent.Show and give it a view.</span> <span data-start="1159.3" data-end="1165.91">Internally what it is going to do is give the element maincontent to the view and render</span> <span data-start="1165.91" data-end="1168.75">itself in that place.</span> <span data-start="1168.75" data-end="1170.78">But I think we can go further.</span> <span data-start="1170.78" data-end="1172.9">We can take the composer.</span> </p>
<p><span data-start="1172.9" data-end="1174.2">Add regions.</span> <span data-start="1174.2" data-end="1177.05">But what we should be giving it is the module.</span> <span data-start="1177.05" data-end="1181.53">And in the module has a reference to the element.</span> <span data-start="1181.53" data-end="1185.45">And it is view to present the views.</span> <span data-start="1185.45" data-end="1188.33">Until the layout composer decides it no longer can.</span> </p>
<p><span data-start="1188.33" data-end="1191.63">It is l going to look like this.</span> <span data-start="1191.63" data-end="1193.66">A bunch of modules.</span> <span data-start="1193.66" data-end="1198.66">And a lay out compuser.</span> <span data-start="1198.66" data-end="1201.92">That we have running at one time.</span> </p>
<p><span data-start="1201.92" data-end="1204.95">How does this placement occur?</span> <span data-start="1204.95" data-end="1207.97">How does it work?</span> <span data-start="1207.97" data-end="1213.65">The thing that is going to be responsible for giving modules is a dispatcher.</span> <span data-start="1213.65" data-end="1215.22">It is going to listen to events.</span> <span data-start="1215.22" data-end="1220.18">It is time to load a new module.</span> <span data-start="1220.18" data-end="1225.28">On such events it is going to load the module and create an instance.</span> <span data-start="1225.28" data-end="1230.6">And then hand it over to the composer to play it.</span> <span data-start="1230.6" data-end="1235.24">And one way we can know it is time to load a new module is a routing event.</span> <span data-start="1235.24" data-end="1241.54">In this event the router is going to be responsible for 1 thing only.</span> <span data-start="1241.54" data-end="1245.29">It is going to listen and observe url changes.</span> <span data-start="1245.29" data-end="1252.05">When it hears those it is going to look up which modules need to be loaded on the screen.</span> <span data-start="1252.05" data-end="1256.57">And raise an event to the dispatcher.</span> </p>
<p><span data-start="1256.57" data-end="1260.89">I have taken this code from a library.</span> <span data-start="1260.89" data-end="1263.82">Chaplan.Js.</span> <span data-start="1263.82" data-end="1266.64">Another library I would recommend you.</span> <span data-start="1266.64" data-end="1269.07">It has great patterns.</span> <span data-start="1269.07" data-end="1274.18">One of the things is a dispatcher.</span> <span data-start="1274.18" data-end="1281.24">It describes a previous routes, current modules and current route.</span> <span data-start="1281.24" data-end="1285.42">Subscribes to Route:match.</span> <span data-start="1285.42" data-end="1289.91">It is going to load th e modules.</span> <span data-start="1289.91" data-end="1291.19">It is taking the modules.</span> <span data-start="1291.19" data-end="1292.19">Look them up.</span> <span data-start="1292.19" data-end="1294.09">Make sure they are running.</span> </p>
<p><span data-start="1294.09" data-end="1296.84">And then hand them off to the layout manager.</span> <span data-start="1296.84" data-end="1301.95">So we take on the dispatcher, responsible for creating modules.</span> <span data-start="1301.95" data-end="1303.69">And managing the lifetime.</span> <span data-start="1303.69" data-end="1311.37">Interesting here is, the dispatcher knows this module A is no longer in use.</span> <span data-start="1311.37" data-end="1318.99">It is more responsible for managing the lifetime and responsible for passing those modules</span> <span data-start="1318.99" data-end="1324.5">over to the layout composer who is going to place them in pthe overall UI.</span> <span data-start="1324.5" data-end="1330.9">One way the dispatcher knows time to load a new module is a an event occurs.</span> <span data-start="1330.9" data-end="1337.19">It is not the driver of the architecture.</span> <span data-start="1337.19" data-end="1343.01">It can be entirely driven by the events.</span> <span data-start="1343.01" data-end="1347.04">So we have split up some of the concerns that we had around state and events.</span> <span data-start="1347.04" data-end="1349.88">And the views we were displaying.</span> <span data-start="1349.88" data-end="1352.14">The state of the addressbar.</span> <span data-start="1352.14" data-end="1356.26">We have a composable design.</span> <span data-start="1356.26" data-end="1361.48">Into new states and in a non linear fashion.</span> <span data-start="1361.48" data-end="1364.64">If it was all too long and you didn't read it.</span> <span data-start="1364.64" data-end="1367.05">This conference is pretty great.</span> </p>
<p><span data-start="1367.05" data-end="1370.46">I'm not surprised if your brains are full.</span> <span data-start="1370.46" data-end="1378.49">The management gets hard when we don't separate the concerns zozer On the client, we should</span> <span data-start="1378.49" data-end="1381.45">use routes to address states.</span> <span data-start="1381.45" data-end="1384.73">But never transitions.</span> <span data-start="1384.73" data-end="1387.87">We should be taking ideas from one context to another.</span> <span data-start="1387.87" data-end="1388.87">That's awesome.</span> <span data-start="1388.87" data-end="1392.12">This is what programming fun.</span> <span data-start="1392.12" data-end="1395.63">We can take inspiration from the server how to include routes.</span> <span data-start="1395.63" data-end="1397.64">It is not a rulebook.</span> <span data-start="1397.64" data-end="1399.36">We need to be able to note these ideas.</span> <span data-start="1399.36" data-end="1401.63">To support requirement.</span> <span data-start="1401.63" data-end="1407.76">And embrace events within the same execution context.</span> <span data-start="1407.76" data-end="1409.62">We don't need to bake everything into the router.</span> <span data-start="1409.62" data-end="1411.63">It is not scalable long term.</span> </p>
<p><span data-start="1411.63" data-end="1416.89">If I have to sum up.</span> <span data-start="1416.89" data-end="1420.7">Don't architect the clintside code like it is a webserver.</span> <span data-start="1420.7" data-end="1422.52">Because it is not.</span> <span data-start="1422.52" data-end="1424.04">Don't build servers on the client.</span> <span data-start="1424.04" data-end="1425.06">Thank you.</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
