<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>1W79T2ibd5Y</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/1W79T2ibd5Y?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="2.22" data-end="10.15">[Music]</span> <span data-start="10.16" data-end="16.199">hey everyone hi you ready for the last</span> <span data-start="16.199" data-end="20.699">set of talks oh sure yeah why not cool</span> <span data-start="20.699" data-end="23.189">them hi I'm Sam I'm also known as snug</span> <span data-start="23.189" data-end="25.14">UGG throughout the internet this is the</span> <span data-start="25.14" data-end="26.82">Houdini bunny if you want Houdini bunny</span> <span data-start="26.82" data-end="29.189">stickers come find me I have a bunch of</span> <span data-start="29.189" data-end="31.32">them and this talk is available online</span> <span data-start="31.32" data-end="33.059">at that link</span> <span data-start="33.059" data-end="34.86">don't worry that link will be up again</span> <span data-start="34.86" data-end="38.52">at the end of the talk so what is</span> </p>
<p><span data-start="38.52" data-end="40.17">Houdini for those of you who haven't</span> <span data-start="40.17" data-end="43.32">been following a web standard that</span> <span data-start="43.32" data-end="45.239">doesn't really exist in any browsers yet</span> <span data-start="45.239" data-end="48.809">well the objective of the CSS tag</span> <span data-start="48.809" data-end="52.559">Houdini task force or CSS Houdini is to</span> <span data-start="52.559" data-end="54.449">jointly develop features that explain</span> <span data-start="54.449" data-end="57.48">the magic of styling and layout on the</span> <span data-start="57.48" data-end="58.64">web</span> <span data-start="58.64" data-end="60.48">practically though what does that mean</span> <span data-start="60.48" data-end="62.94">well it means extending CSS via</span> </p>
<p><span data-start="62.94" data-end="65.82">JavaScript so that authors like us don't</span> <span data-start="65.82" data-end="67.95">have to wait decades for browsers and</span> <span data-start="67.95" data-end="70.25">standards bodies to implement new things</span> <span data-start="70.25" data-end="72.81">but wait you say can't we do that</span> <span data-start="72.81" data-end="75.9">already and the answer is not quite it's</span> <span data-start="75.9" data-end="78.54">not currently possible to extend CSS</span> <span data-start="78.54" data-end="81">through JavaScript it's only possible to</span> <span data-start="81" data-end="82.619">mimic job or write JavaScript that</span> <span data-start="82.619" data-end="86.759">mimics CSS actually polyfill in CSS or</span> <span data-start="86.759" data-end="89.369">introducing new features like CSS grid</span> <span data-start="89.369" data-end="91.799">is hard to impossible to do today</span> <span data-start="91.799" data-end="94.259">especially so without being just</span> <span data-start="94.259" data-end="96.229">terrible for performance</span> </p>
<p><span data-start="96.229" data-end="98.7">Houdini will actually let authors tap</span> <span data-start="98.7" data-end="101.67">into these actual CSS engine finally</span> <span data-start="101.67" data-end="104.88">letting them extend CSS and do so at CSS</span> <span data-start="104.88" data-end="107.939">engine speeds I like to think about it</span> <span data-start="107.939" data-end="110.25">like this much like service workers are</span> <span data-start="110.25" data-end="112.079">a low-level JavaScript API for the</span> <span data-start="112.079" data-end="114.329">browser's cache Houdini introduces</span> <span data-start="114.329" data-end="116.25">low-level JavaScript API is for the</span> <span data-start="116.25" data-end="119.67">browser's render engines and I think</span> <span data-start="119.67" data-end="124.56">that's pretty cool so the question that</span> </p>
<p><span data-start="124.56" data-end="127.17">I always get is can I use it yet and the</span> <span data-start="127.17" data-end="131.069">answer is unequivocally no no you cannot</span> <span data-start="131.069" data-end="132.26">use it yet</span> <span data-start="132.26" data-end="136.099">but I mean maybe kind of things are</span> <span data-start="136.099" data-end="138.08">coming the web's changing a little bit</span> <span data-start="138.08" data-end="140.75">so maybe you kind of so normally it's a</span> <span data-start="140.75" data-end="143.989">warning today it's a heads-up so voodini</span> <span data-start="143.989" data-end="145.94">is getting pretty stable and you can</span> <span data-start="145.94" data-end="147.709">kind of start to use it in some browsers</span> <span data-start="147.709" data-end="150.59">but some of it a lot of it is pretty far</span> <span data-start="150.59" data-end="153.29">off and landscapes like I said really in</span> <span data-start="153.29" data-end="155.06">flux most of what we're going to be</span> <span data-start="155.06" data-end="157.61">talking about today is the mostly stable</span> <span data-start="157.61" data-end="159.019">bit but you're gonna need to use</span> <span data-start="159.019" data-end="160.37">polyfills and get your progressive</span> <span data-start="160.37" data-end="162.23">enhancement on in order to use this</span> <span data-start="162.23" data-end="166.64">stuff today so let's talk about the core</span> <span data-start="166.64" data-end="168.59">magical secrets of Houdini the stuff</span> <span data-start="168.59" data-end="170.269">that you need to understand make</span> <span data-start="170.269" data-end="172.64">everything else work and the first one</span> <span data-start="172.64" data-end="175.129">is this thing called worklets worklets</span> <span data-start="175.129" data-end="178">our extension points for render engines</span> <span data-start="178" data-end="180.739">they're kind of like web workers but</span> <span data-start="180.739" data-end="182.72">they're much smaller in scope they can</span> <span data-start="182.72" data-end="185.03">be parallelized to live on multiple</span> <span data-start="185.03" data-end="187.519">threads and most importantly you don't</span> <span data-start="187.519" data-end="189.56">call them the render engine calls them</span> <span data-start="189.56" data-end="190.97">they're an extension of the render</span> <span data-start="190.97" data-end="194.299">engine so this is what adding one looks</span> <span data-start="194.299" data-end="196.34">like you have a demo worklet and add</span> <span data-start="196.34" data-end="197.87">module and then a path to whatever your</span> <span data-start="197.87" data-end="201.26">workload is these are also promises so</span> <span data-start="201.26" data-end="203.269">you can promise all of them and then off</span> <span data-start="203.269" data-end="205.91">of them to do work once your worklets</span> <span data-start="205.91" data-end="209.419">are loaded every worklet has this kind</span> <span data-start="209.419" data-end="211.69">of shape to it it's got a function that</span> <span data-start="211.69" data-end="213.56">function is the function that gets</span> <span data-start="213.56" data-end="216.41">called that function has a name which is</span> <span data-start="216.41" data-end="217.4">the thing you're actually going to use</span> <span data-start="217.4" data-end="220.37">in CSS and then there's a class and all</span> <span data-start="220.37" data-end="221.959">classes will have some sort of process</span> <span data-start="221.959" data-end="223.669">function which is the actual thing the</span> <span data-start="223.669" data-end="225.47">render engine is calling whenever it</span> <span data-start="225.47" data-end="227.329">wants to use your worklet you'll see a</span> <span data-start="227.329" data-end="230.9">couple examples of this later on let's</span> <span data-start="230.9" data-end="232.04">take a look at the life cycle of a</span> <span data-start="232.04" data-end="233.959">worklet we have our render engine our</span> <span data-start="233.959" data-end="236.419">render engine spins up the main thread</span> <span data-start="236.419" data-end="239">once it's spun up the main thread will</span> <span data-start="239" data-end="241.489">also spin up multiple worklet processes</span> <span data-start="241.489" data-end="243.98">these work that processes can either be</span> <span data-start="243.98" data-end="245.69">on the main thread or they can be</span> <span data-start="245.69" data-end="248.03">parallel to the main thread it doesn't</span> <span data-start="248.03" data-end="248.329">matter</span> <span data-start="248.329" data-end="249.709">they're just going to be a bunch of them</span> <span data-start="249.709" data-end="252.859">sitting around from the main thread</span> <span data-start="252.859" data-end="253.94">we're going to call our browser</span> </p>
<p><span data-start="253.94" data-end="256.01">JavaScript and our browser Java scripts</span> <span data-start="256.01" data-end="258.349">gonna call worklet Add module that's</span> <span data-start="258.349" data-end="260.239">going to load a worklet and the worklet</span> <span data-start="260.239" data-end="262.729">will load into two or more work with</span> <span data-start="262.729" data-end="265.13">processes now here's where things get</span> <span data-start="265.13" data-end="266.06">interesting and</span> <span data-start="266.06" data-end="267.47">of our browser JavaScript calling our</span> <span data-start="267.47" data-end="269.6">worklet the render engine calls our</span> <span data-start="269.6" data-end="271.73">worklet when it needs to do a render</span> <span data-start="271.73" data-end="274.12">when it needs to use it</span> <span data-start="274.12" data-end="276.139">worklets are the underlying foundation</span> <span data-start="276.139" data-end="278.54">for which all of Houdini is based the</span> <span data-start="278.54" data-end="280.13">the magic that makes it happen it's what</span> <span data-start="280.13" data-end="286.12">makes Houdini powerful next bit typed om</span> <span data-start="286.12" data-end="288.83">the typed om expose the structure beyond</span> <span data-start="288.83" data-end="290.09">simple strings which is what we have</span> <span data-start="290.09" data-end="293.21">today for CSS values these can be</span> <span data-start="293.21" data-end="295.22">manipulated and retrieved really</span> <span data-start="295.22" data-end="296.9">performant lis and they're part of this</span> <span data-start="296.9" data-end="300.139">new CSS style value class and there are</span> <span data-start="300.139" data-end="301.52">buncha turan options there's keyword</span> <span data-start="301.52" data-end="303.77">values like idents there's position</span> <span data-start="303.77" data-end="306.26">values transform values unit values and</span> <span data-start="306.26" data-end="309.41">some math so this is what it looks like</span> <span data-start="309.41" data-end="311.24">we've got a class of example with a</span> <span data-start="311.24" data-end="313.16">background position of center bottom 10</span> <span data-start="313.16" data-end="316.28">pixels now trying to parse that out from</span> <span data-start="316.28" data-end="318.59">that string is really hard but with the</span> <span data-start="318.59" data-end="320.96">type 2 m we can get its computed map</span> <span data-start="320.96" data-end="324.229">sire computed style map and then we can</span> <span data-start="324.229" data-end="326.75">get background position X and that comes</span> <span data-start="326.75" data-end="329.87">back as a CSS unit value with a value of</span> <span data-start="329.87" data-end="333.19">50 and a unit of percentage or %</span> <span data-start="333.19" data-end="337.22">background position Y it's a sum of 100</span> <span data-start="337.22" data-end="338.63">percent because that's bottom that's</span> <span data-start="338.63" data-end="340.64">going to the bottom and then negative 10</span> <span data-start="340.64" data-end="342.47">pixels because after that bottom 10</span> <span data-start="342.47" data-end="344.69">pixels bit means in CSS so we know now</span> <span data-start="344.69" data-end="346.789">no longer need to string parse this and</span> <span data-start="346.789" data-end="349.039">do disgusting reggae regex</span> <span data-start="349.039" data-end="350.72">to actually understand what this is we</span> <span data-start="350.72" data-end="354.38">can just call it and get it typed om</span> <span data-start="354.38" data-end="358.49">gives us the structure we need to cast</span> <span data-start="358.49" data-end="362.419">the spells that we want but what can you</span> <span data-start="362.419" data-end="364.639">do with this you might say well you can</span> <span data-start="364.639" data-end="367.76">do put some pretty rad things let's talk</span> <span data-start="367.76" data-end="369.44">about the rad custom stuff that you can</span> <span data-start="369.44" data-end="374.51">do with worklets and the typed om please</span> <span data-start="374.51" data-end="376.669">allow me to introduce or reintroduce you</span> <span data-start="376.669" data-end="381.32">to window dot CSS and the first api</span> <span data-start="381.32" data-end="383.27">we're going to look at is the properties</span> <span data-start="383.27" data-end="387.65">and values api aka make the snozzberries</span> <span data-start="387.65" data-end="391.28">taste like snozzberries so this is kind</span> <span data-start="391.28" data-end="392.78">of the current state of custom</span> <span data-start="392.78" data-end="394.909">properties CSS variables we have</span> <span data-start="394.909" data-end="396.38">something called my color we set it to</span> <span data-start="396.38" data-end="399.32">green and then we set it to a URL that's</span> <span data-start="399.32" data-end="399.97">not a color</span> <span data-start="399.97" data-end="402.58">and everything is sad because urls not a</span> <span data-start="402.58" data-end="405.43">color and it doesn't know what to do but</span> <span data-start="405.43" data-end="407.98">then we can do window dot CSS dot</span> </p>
<p><span data-start="407.98" data-end="410.62">Register property tell it the property</span> <span data-start="410.62" data-end="413.59">my color has a syntax of color and now</span> <span data-start="413.59" data-end="415.51">the browser knows it's a color because</span> <span data-start="415.51" data-end="417.76">the browser knows it's a color that URL</span> <span data-start="417.76" data-end="419.74">junk is gonna get skipped which is</span> <span data-start="419.74" data-end="422.59">really nice there are a couple other</span> <span data-start="422.59" data-end="424.75">things we can do with it we can decide</span> <span data-start="424.75" data-end="427.09">whether or not inherits up the Dom or we</span> <span data-start="427.09" data-end="432.61">can also give it an initial value boom</span> <span data-start="432.61" data-end="434.44">there we go there are a bunch of</span> <span data-start="434.44" data-end="435.64">different types that you can use the</span> <span data-start="435.64" data-end="437.74">syntax so you can great lengths you can</span> <span data-start="437.74" data-end="440.14">create numbers percentages images colors</span> <span data-start="440.14" data-end="443.23">times resolutions all sorts of different</span> <span data-start="443.23" data-end="445.78">types for this syntax and you can</span> <span data-start="445.78" data-end="449.08">combine them so a single item is just a</span> <span data-start="449.08" data-end="451.57">single item length you can combine them</span> <span data-start="451.57" data-end="453.76">with a bar separator for an or so in</span> <span data-start="453.76" data-end="457.24">this case it's an image or a URL if you</span> <span data-start="457.24" data-end="458.89">have custom idents you can combine a</span> <span data-start="458.89" data-end="461.08">bunch of them so big bigger and all caps</span> <span data-start="461.08" data-end="463.12">bigger are three different valid ID ends</span> <span data-start="463.12" data-end="467.38">if you have a plus that's a space</span> <span data-start="467.38" data-end="469.03">separated this so in this case the space</span> <span data-start="469.03" data-end="471.07">separate a list of lengths and then if</span> <span data-start="471.07" data-end="471.97">you have a hash</span> <span data-start="471.97" data-end="476.98">it's a comma separated list now now that</span> <span data-start="476.98" data-end="478.36">a browser actually knows what it is we</span> <span data-start="478.36" data-end="480.94">can do some pretty interesting things so</span> <span data-start="480.94" data-end="487.48">we have over here a two buttons styled</span> <span data-start="487.48" data-end="489.4">with a linear gradient and a custom</span> <span data-start="489.4" data-end="492.22">property now if I hover over the</span> <span data-start="492.22" data-end="494.44">unregistered one it does exactly what we</span> <span data-start="494.44" data-end="496.99">think it does nothing it just pops into</span> <span data-start="496.99" data-end="498.61">that next color because we can't</span> <span data-start="498.61" data-end="501.54">transition linear gradients right well</span> <span data-start="501.54" data-end="504.79">now that we know what a custom property</span> <span data-start="504.79" data-end="506.44">is now that we know that it's a color if</span> <span data-start="506.44" data-end="512.75">we transition the custom property then</span> <span data-start="512.76" data-end="515.5">we can actually do things like</span> <span data-start="515.5" data-end="517.539">transition linear gradients or</span> <span data-start="517.539" data-end="519.159">transition anything that is a registered</span> <span data-start="519.159" data-end="521.56">custom property and that gets really</span> <span data-start="521.56" data-end="523.77">powerful as you'll see as we go along</span> <span data-start="523.77" data-end="526.57">but before we do that how can you use</span> <span data-start="526.57" data-end="528.52">them in your design systems that's the</span> <span data-start="528.52" data-end="529.93">point of this talk right how can we use</span> </p>
<p><span data-start="529.93" data-end="531.62">Houdini in design systems</span> <span data-start="531.62" data-end="534.26">well there is a proposed declarative</span> <span data-start="534.26" data-end="538.16">syntax for these custom properties that</span> <span data-start="538.16" data-end="539.48">lets you write these custom properties</span> <span data-start="539.48" data-end="542">not in JavaScript to put in CSS using at</span> <span data-start="542" data-end="544.22">property property name and then the</span> <span data-start="544.22" data-end="546.2">syntax and it roughly works out to the</span> </p>
<p><span data-start="546.2" data-end="547.58">JavaScript on the left there on the</span> <span data-start="547.58" data-end="550.16">right what's nice about this proposed</span> <span data-start="550.16" data-end="552.16">syntax is you can start using it today</span> <span data-start="552.16" data-end="555.47">with a post CSS plug in a post CSS</span> <span data-start="555.47" data-end="557">plug-in you write that property syntax</span> <span data-start="557" data-end="559.49">and it will spit out the JavaScript so</span> <span data-start="559.49" data-end="561.74">you can write all your custom properties</span> <span data-start="561.74" data-end="564.71">in your CSS deliver them as part of your</span> <span data-start="564.71" data-end="568.28">design systems as well as the JavaScript</span> <span data-start="568.28" data-end="570.53">for a fallback which then is</span> <span data-start="570.53" data-end="572.06">progressively enhanced with the if</span> <span data-start="572.06" data-end="575.93">statement so some things we can do this</span> <span data-start="575.93" data-end="578.03">we can make CSS variables smarter so if</span> <span data-start="578.03" data-end="580.19">we've got our main blue and we have a</span> <span data-start="580.19" data-end="583.01">property main blue with syntax and</span> </p>
<p><span data-start="583.01" data-end="585.23">Harrison initial value we can use that</span> <span data-start="585.23" data-end="586.88">and in fact when the property syntax</span> <span data-start="586.88" data-end="588.44">ships we can get rid of that initial</span> <span data-start="588.44" data-end="591.71">main blue call entirely because it'll</span> <span data-start="591.71" data-end="594.14">just be there available we can also make</span> <span data-start="594.14" data-end="595.91">things like this background variable</span> <span data-start="595.91" data-end="597.98">more intelligent by only allowing images</span> <span data-start="597.98" data-end="600.98">or colors and not allowing it to inherit</span> <span data-start="600.98" data-end="603.53">up the Dom right now all CSS variables</span> <span data-start="603.53" data-end="605.45">inherit up the Dom which is not</span> <span data-start="605.45" data-end="606.35">something you really want for a</span> <span data-start="606.35" data-end="609.92">background oh it's really cool when we</span> <span data-start="609.92" data-end="611.21">started to talk about worklets is you</span> <span data-start="611.21" data-end="614.03">can make truly custom properties so you</span> <span data-start="614.03" data-end="615.83">can do things like theme colors where</span> <span data-start="615.83" data-end="618.52">you have identify that you want to allow</span> <span data-start="618.52" data-end="621.05">you can do things like create custom</span> <span data-start="621.05" data-end="624.35">columns for layouts you can create your</span> <span data-start="624.35" data-end="627.23">own padding properties so all these</span> <span data-start="627.23" data-end="630.65">different actual literal custom</span> <span data-start="630.65" data-end="631.84">properties as opposed to just</span> <span data-start="631.84" data-end="633.47">placeholders for things you're going to</span> <span data-start="633.47" data-end="637.38">put into another property somewhere else</span> <span data-start="637.39" data-end="639.71">speaking of worklets let's talk about</span> <span data-start="639.71" data-end="641.9">the paint API because as Bob Rost likes</span> <span data-start="641.9" data-end="643.22">to say every day is a good day when you</span> <span data-start="643.22" data-end="648.83">paint yeah Bob Ross have you ever wanted</span> <span data-start="648.83" data-end="651.17">to use canvas as a background a mask or</span> <span data-start="651.17" data-end="653.75">a border in CSS with the styling and</span> <span data-start="653.75" data-end="655.79">flexibility of an element and the</span> <span data-start="655.79" data-end="658.79">scalability of an SVG of course you</span> <span data-start="658.79" data-end="663.62">haven't no one has but it turns out if</span> <span data-start="663.62" data-end="665.24">you can do that it's actually really</span> <span data-start="665.24" data-end="666.95">cool and you can do a lot of really</span> <span data-start="666.95" data-end="670.4">interesting things so the paint API the</span> <span data-start="670.4" data-end="672.2">class for the work that looks a little</span> <span data-start="672.2" data-end="674.03">bit something like this we have input</span> <span data-start="674.03" data-end="676.34">properties that's an array of properties</span> <span data-start="676.34" data-end="678.56">either custom properties or standard</span> <span data-start="678.56" data-end="679.76">properties you can read standard</span> <span data-start="679.76" data-end="683.09">properties into that you want to read in</span> <span data-start="683.09" data-end="685.1">from the element that this is that's</span> <span data-start="685.1" data-end="688.28">being painted you can also pass input</span> <span data-start="688.28" data-end="689.75">arguments with that same formatting</span> <span data-start="689.75" data-end="692.93">syntax as custom properties to pass in</span> <span data-start="692.93" data-end="695.48">arguments to the paint function and then</span> <span data-start="695.48" data-end="697.01">the paint function is the thing that</span> <span data-start="697.01" data-end="699.11">actually gets called it has a 2d drawing</span> <span data-start="699.11" data-end="701.63">context the size of the element the</span> <span data-start="701.63" data-end="703.22">properties that get passed in and the</span> <span data-start="703.22" data-end="706.55">arguments let's write a basic paint</span> <span data-start="706.55" data-end="708.44">worklet right now so this one's just</span> <span data-start="708.44" data-end="711.02">going to draw a big circle we're going</span> <span data-start="711.02" data-end="713.27">to get the circle color property we're</span> <span data-start="713.27" data-end="716.44">going to get it from within our paint</span> <span data-start="716.44" data-end="718.94">function and this is actually a CSS</span> <span data-start="718.94" data-end="720.71">style value this is our type domain in</span> <span data-start="720.71" data-end="723.26">action then we do some math to figure</span> <span data-start="723.26" data-end="724.64">out the center point in the radius of</span> <span data-start="724.64" data-end="728.18">our circle and we draw our circle once</span> <span data-start="728.18" data-end="730.31">we've drawn our circle we import it and</span> <span data-start="730.31" data-end="731.06">we get this</span> </p>
<p><span data-start="731.06" data-end="733.22">I mean I've drawn a big circle in the</span> <span data-start="733.22" data-end="736.07">middle in the middle of a thing I can</span> <span data-start="736.07" data-end="741.05">change its color it's nice it's a it's a</span> <span data-start="741.05" data-end="743.39">cute little circle demo but with this as</span> <span data-start="743.39" data-end="744.71">our foundation we can do really</span> <span data-start="744.71" data-end="747.38">interesting things so there's this guy</span> <span data-start="747.38" data-end="748.79">named Tim Holman and he makes great</span> <span data-start="748.79" data-end="751.04">generative art so I've converted one of</span> <span data-start="751.04" data-end="753.32">his generative art demos into an actual</span> <span data-start="753.32" data-end="757.67">paint background using this so I can</span> <span data-start="757.67" data-end="759.8">decide how many steps that I want I</span> <span data-start="759.8" data-end="763.4">start with 50 but if I do 40 and I every</span> <span data-start="763.4" data-end="765.35">time I reload the page it randomly</span> <span data-start="765.35" data-end="767.54">generates a new background image for me</span> </p>
<p><span data-start="767.54" data-end="771.65">I do this with very few lines of CSS I</span> <span data-start="771.65" data-end="773.54">don't need to load a new image in and</span> <span data-start="773.54" data-end="776.06">it's all controllable through actual CSS</span> <span data-start="776.06" data-end="778.55">the worklet isn't so big it's smaller</span> <span data-start="778.55" data-end="780.38">than loading an image and you can get an</span> <span data-start="780.38" data-end="782">infinite number of randomly generated</span> <span data-start="782" data-end="784.37">backgrounds this way much more</span> <span data-start="784.37" data-end="785.96">interesting and much more performant</span> <span data-start="785.96" data-end="788.09">then just loading in a bunch of random</span> <span data-start="788.09" data-end="791.45">images you can even combine the paint</span> <span data-start="791.45" data-end="794.48">worklet with that custom property</span> <span data-start="794.48" data-end="795.41">transition</span> <span data-start="795.41" data-end="797.51">and you can do something like this and</span> <span data-start="797.51" data-end="799.73">create a nice little ripple effect by</span> <span data-start="799.73" data-end="802.43">figuring out where you clicked and then</span> <span data-start="802.43" data-end="807.26">toggling on a class that has the end</span> <span data-start="807.26" data-end="809">transition state that you want and</span> <span data-start="809" data-end="814.22">transitioning through our paint cool how</span> <span data-start="814.22" data-end="817.55">can I use this in design systems well</span> <span data-start="817.55" data-end="819.83">there's a polyfill for it and it works</span> <span data-start="819.83" data-end="821.99">pretty well anywhere that has canvas and</span> <span data-start="821.99" data-end="823.61">you're gonna want CSS variables as well</span> <span data-start="823.61" data-end="825.26">it especially works pretty well in</span> </p>
<p><span data-start="825.26" data-end="829.55">Firefox and Safari what I think Design</span> <span data-start="829.55" data-end="830.15">Systems</span> <span data-start="830.15" data-end="831.89">I think web components or I think</span> <span data-start="831.89" data-end="834.26">components and when I write components I</span> <span data-start="834.26" data-end="835.73">think web components I've been using</span> <span data-start="835.73" data-end="837.98">them recently I really like them and I</span> <span data-start="837.98" data-end="839.54">think that they're a great way to</span> <span data-start="839.54" data-end="842.39">encapsulate styling and functionality</span> <span data-start="842.39" data-end="844.58">and we're gonna use it today to build</span> <span data-start="844.58" data-end="847.82">our our version of a paint button</span> <span data-start="847.82" data-end="849.26">although buttons aren't as cool what</span> <span data-start="849.26" data-end="852.77">we're gonna build so we have this basic</span> <span data-start="852.77" data-end="855.71">demo of tabs we have a tab you switch</span> <span data-start="855.71" data-end="858.4">tabs everything switch is hunky-dory</span> <span data-start="858.4" data-end="861.47">except these tabs have that cute little</span> <span data-start="861.47" data-end="863.75">rounded corner going out at the bottom</span> <span data-start="863.75" data-end="866.12">which if you've ever tried to actually</span> <span data-start="866.12" data-end="869.3">do is not so straightforward especially</span> <span data-start="869.3" data-end="871.57">if you want it styler Bowl through CSS</span> <span data-start="871.57" data-end="874.37">and without any extra elements so what</span> <span data-start="874.37" data-end="875.9">we're gonna do is we're going to write a</span> <span data-start="875.9" data-end="878.33">paint function a paint worklet that will</span> <span data-start="878.33" data-end="880.58">write those for us and style it based</span> <span data-start="880.58" data-end="885.36">off of the background color of our tab</span> <span data-start="885.37" data-end="887.63">so starting with a web component you</span> <span data-start="887.63" data-end="889.82">start by writing a template a template</span> <span data-start="889.82" data-end="890.57">has an ID</span> <span data-start="890.57" data-end="892.34">it has our styling the styling lives</span> <span data-start="892.34" data-end="894.44">inside of our template and it's only</span> <span data-start="894.44" data-end="896.15">going to affect this web component it</span> <span data-start="896.15" data-end="899.41">won't leak outside we've got a couple</span> <span data-start="899.41" data-end="902.21">variables up top CSS variables where</span> <span data-start="902.21" data-end="904.13">we're using a property we're passing in</span> <span data-start="904.13" data-end="905.9">called tab multiplier to do some math</span> <span data-start="905.9" data-end="908.72">for us to make sure that our bottom</span> <span data-start="908.72" data-end="910.16">rounded corners and our top rounded</span> <span data-start="910.16" data-end="913.19">corners all kind of continue to to be in</span> <span data-start="913.19" data-end="915.95">sync with each other and then we do some</span> <span data-start="915.95" data-end="918.86">of the actual a little bit annoying CSS</span> <span data-start="918.86" data-end="922.01">to get border images working with paint</span> <span data-start="922.01" data-end="924.95">and then we're good with our styling for</span> <span data-start="924.95" data-end="927.35">our HTML this is pretty basic</span> <span data-start="927.35" data-end="928.59">it's a div</span> <span data-start="928.59" data-end="931.8">and we have this part L or part</span> <span data-start="931.8" data-end="934.92">attribute on it to allow us to expose</span> <span data-start="934.92" data-end="936.9">styling outside of our web component</span> <span data-start="936.9" data-end="939.42">this is part of the new shadow parts</span> <span data-start="939.42" data-end="943.2">spec for web components the JavaScript</span> <span data-start="943.2" data-end="944.7">for getting this to actually work and be</span> <span data-start="944.7" data-end="947.4">usable is very straightforward on the</span> </p>
<p><span data-start="947.4" data-end="948.87">Left we've got our CSS paint</span> <span data-start="948.87" data-end="951.15">registrations or sorry property</span> <span data-start="951.15" data-end="953.16">registrations and we're adding our</span> <span data-start="953.16" data-end="955.29">worklet for our paint module or paint</span> <span data-start="955.29" data-end="957.78">worklet and then on the right is all the</span> <span data-start="957.78" data-end="959.76">JavaScript I need to turn that template</span> <span data-start="959.76" data-end="962.4">into a reusable web component I extend</span> <span data-start="962.4" data-end="965.13">the HTML element I grab the content of</span> <span data-start="965.13" data-end="966.72">that template and attach it to the</span> <span data-start="966.72" data-end="969.33">shadow DOM and then under custom</span> <span data-start="969.33" data-end="971.76">elements I define a rounded tab using</span> <span data-start="971.76" data-end="974.31">that class it's six lines of JavaScript</span> <span data-start="974.31" data-end="977.22">it's not so terribly hard to do and in</span> <span data-start="977.22" data-end="979.58">the end we get this what we just saw</span> <span data-start="979.58" data-end="983.37">tabs tabs tabs but because we've</span> <span data-start="983.37" data-end="985.41">encapsulated it we can start to do</span> <span data-start="985.41" data-end="988.41">things like make everything more round</span> <span data-start="988.41" data-end="993.36">or even more round and we get those nice</span> <span data-start="993.36" data-end="997.55">rounded transitions from those tabs</span> <span data-start="997.55" data-end="1000.41">dynamically through this CSS control</span> <span data-start="1000.41" data-end="1003.26">through our CSS we can even do things</span> <span data-start="1003.26" data-end="1004.91">like change the tab position so if we</span> <span data-start="1004.91" data-end="1006.35">look at our first tab this is on the</span> <span data-start="1006.35" data-end="1009.32">left we could say instead we want it on</span> <span data-start="1009.32" data-end="1011.09">the right and our rounded corner moves</span> <span data-start="1011.09" data-end="1015.02">to the other end or the middle and now</span> <span data-start="1015.02" data-end="1018.29">it's on both go back to left and because</span> <span data-start="1018.29" data-end="1020.57">we're using paint which can read in</span> <span data-start="1020.57" data-end="1022.07">regular properties I can change the</span> <span data-start="1022.07" data-end="1023.51">background of this tab to something like</span> <span data-start="1023.51" data-end="1025.58">purple and it will change what I've</span> <span data-start="1025.58" data-end="1028.49">painted as well no extra elements no</span> <span data-start="1028.49" data-end="1031.16">extra loading of anything this one paint</span> <span data-start="1031.16" data-end="1033.2">worklet is able to do all of that with</span> <span data-start="1033.2" data-end="1039.59">standard CSS backing it up now the final</span> <span data-start="1039.59" data-end="1040.64">thing we're going to talk about is the</span> <span data-start="1040.64" data-end="1042.89">layout API and the layout API is a</span> <span data-start="1042.89" data-end="1044.39">little bit heavy and it's super</span> <span data-start="1044.39" data-end="1046.34">experimental but it's kind of cool so</span> </p>
<p><span data-start="1046.34" data-end="1049.19">I'm gonna show it to you anyway the</span> <span data-start="1049.19" data-end="1051.65">paint API lets you play Tetris with your</span> <span data-start="1051.65" data-end="1055.85">web apps it literally lets you make your</span> <span data-start="1055.85" data-end="1058.64">own display properties lets you do</span> <span data-start="1058.64" data-end="1060.17">things like polyfill it awesome new</span> <span data-start="1060.17" data-end="1061.8">layouts back that you like</span> <span data-start="1061.8" data-end="1063.75">or because everyone likes a good masonry</span> <span data-start="1063.75" data-end="1065.79">layout you can write one without the</span> <span data-start="1065.79" data-end="1067.2">performance hit of running a bunch of</span> </p>
<p><span data-start="1067.2" data-end="1070.54">JavaScript on the main thread</span> <span data-start="1070.55" data-end="1073.32">now this specs a little bit complicated</span> <span data-start="1073.32" data-end="1076.02">so I'm gonna walk you through how the</span> <span data-start="1076.02" data-end="1077.79">spec thinks about layout which actually</span> <span data-start="1077.79" data-end="1079.5">can help you understand how browsers</span> <span data-start="1079.5" data-end="1082.08">think about layout layout starts with a</span> <span data-start="1082.08" data-end="1085.47">box a box is either an element or it is</span> <span data-start="1085.47" data-end="1087.72">a pseudo element the layout algorithm</span> <span data-start="1087.72" data-end="1089.46">for that box is something called the</span> <span data-start="1089.46" data-end="1093.48">current layout the boxes direct parent</span> <span data-start="1093.48" data-end="1095.55">is the parent of the layout algorithm</span> <span data-start="1095.55" data-end="1096.81">for the box's direct parent is the</span> <span data-start="1096.81" data-end="1099.3">parent layout the parent layout has</span> <span data-start="1099.3" data-end="1102.27">layout constraints those layout</span> <span data-start="1102.27" data-end="1104.7">constraints is the available room inside</span> <span data-start="1104.7" data-end="1107.97">of the parent for the box to be laid out</span> <span data-start="1107.97" data-end="1110.61">in the parent layout also has layout</span> <span data-start="1110.61" data-end="1112.86">edges these are your box model edges</span> <span data-start="1112.86" data-end="1117.03">padding scrollbar and borders current</span> <span data-start="1117.03" data-end="1119.88">layout has a child layout which is the</span> <span data-start="1119.88" data-end="1122.7">layout algorithm of layout child as if</span> <span data-start="1122.7" data-end="1125.4">it wasn't visible with display:none I</span> <span data-start="1125.4" data-end="1127.11">didn't name these things I'm sorry</span> <span data-start="1127.11" data-end="1130.14">they're named confusingly bring it up in</span> <span data-start="1130.14" data-end="1134.22">the spec now layout child can't really</span> <span data-start="1134.22" data-end="1136.83">do anything but what it can do is it can</span> <span data-start="1136.83" data-end="1139.2">generate a layout fragment and layout</span> <span data-start="1139.2" data-end="1141.54">fragments are interesting layout</span> <span data-start="1141.54" data-end="1143.97">fragments have an in-line size and a</span> <span data-start="1143.97" data-end="1145.98">block size this goes back to the</span> <span data-start="1145.98" data-end="1147.75">abstract sizing stuff that we talked</span> <span data-start="1147.75" data-end="1148.98">about all right that I think was</span> <span data-start="1148.98" data-end="1152.31">mentioned earlier so in line sizing and</span> <span data-start="1152.31" data-end="1153.87">block sizing this is stuff we can't</span> <span data-start="1153.87" data-end="1156.6">change we can't actually change the size</span> <span data-start="1156.6" data-end="1158.1">of elements when we go to lay them out</span> <span data-start="1158.1" data-end="1160.98">but we can change their inline offset</span> <span data-start="1160.98" data-end="1163.11">and block offset that's how we actually</span> <span data-start="1163.11" data-end="1166.95">position stuff around cool with that out</span> <span data-start="1166.95" data-end="1168.42">of the way let's take a look at layout</span> <span data-start="1168.42" data-end="1172.08">we've got input properties input</span> <span data-start="1172.08" data-end="1173.43">properties are actually things that go</span> <span data-start="1173.43" data-end="1176.04">on the parent layout so</span> <span data-start="1176.04" data-end="1178.53">layout API layout worklets they start</span> <span data-start="1178.53" data-end="1180.24">from the parent layout down as opposed</span> <span data-start="1180.24" data-end="1182.61">to the current layout up so input</span> <span data-start="1182.61" data-end="1184.92">properties these are things like your</span> <span data-start="1184.92" data-end="1187.83">grid template columns on display grid</span> <span data-start="1187.83" data-end="1190.32">would be input properties child input</span> <span data-start="1190.32" data-end="1191.61">properties or properties you want to</span> <span data-start="1191.61" data-end="1194.19">read in from the children of that layout</span> <span data-start="1194.19" data-end="1195.51">so this would be</span> <span data-start="1195.51" data-end="1198.63">like grid columns and then there are a</span> <span data-start="1198.63" data-end="1200.64">couple layout options there are two</span> <span data-start="1200.64" data-end="1202.26">functions that get called as part of</span> <span data-start="1202.26" data-end="1204.06">this one is intrinsic sizing or</span> <span data-start="1204.06" data-end="1207.78">intrinsic size which will figure out how</span> <span data-start="1207.78" data-end="1211.53">much room a block should take up and</span> <span data-start="1211.53" data-end="1213.39">layout which is the actual function that</span> <span data-start="1213.39" data-end="1216.81">we do our layout in now the internal</span> <span data-start="1216.81" data-end="1219.6">some intrinsic sizing are really complex</span> <span data-start="1219.6" data-end="1222.48">so we're not going to cover them the</span> <span data-start="1222.48" data-end="1224.61">easiest way to think about it is what</span> <span data-start="1224.61" data-end="1226.37">you're trying to figure out here is</span> <span data-start="1226.37" data-end="1229.83">given an unlimited amount of space how</span> <span data-start="1229.83" data-end="1233.19">big can we make a box so there's not a</span> <span data-start="1233.19" data-end="1236.67">lot of unused space and then also how</span> <span data-start="1236.67" data-end="1238.17">small can we make that box without</span> <span data-start="1238.17" data-end="1240.48">having any of the content overflow and</span> <span data-start="1240.48" data-end="1241.62">once we figure out how big it can</span> <span data-start="1241.62" data-end="1243.48">possibly be and how small it can</span> <span data-start="1243.48" data-end="1246.21">possibly be then we return that and the</span> <span data-start="1246.21" data-end="1248.07">browser figures out where it goes in</span> <span data-start="1248.07" data-end="1251.52">between those two things but the layout</span> <span data-start="1251.52" data-end="1253.23">function that's pretty easy to</span> <span data-start="1253.23" data-end="1255.51">understand the first thing we need to do</span> <span data-start="1255.51" data-end="1258.72">is we need to figure out what the total</span> <span data-start="1258.72" data-end="1260.55">size is that we can lay out our children</span> <span data-start="1260.55" data-end="1263.73">in so that's our inline size — our edge</span> <span data-start="1263.73" data-end="1266.76">inline and our block size — our block in</span> <span data-start="1266.76" data-end="1269.76">line bundle that up as an object and</span> <span data-start="1269.76" data-end="1273.84">then we loop through each one of the</span> <span data-start="1273.84" data-end="1275.82">children and generate a fragment based</span> <span data-start="1275.82" data-end="1277.86">on that constraint size this is us</span> <span data-start="1277.86" data-end="1281.61">generating layout constraints from there</span> <span data-start="1281.61" data-end="1284.22">we start actually laying stuff out we</span> <span data-start="1284.22" data-end="1287.19">get the block offset started at where</span> <span data-start="1287.19" data-end="1288.84">our edges start and then just loop over</span> <span data-start="1288.84" data-end="1292.14">everything we make it's block offset</span> <span data-start="1292.14" data-end="1295.53">whatever the block offset is we Center</span> <span data-start="1295.53" data-end="1298.08">it and then we add to the block offset</span> <span data-start="1298.08" data-end="1300.84">so we have an item go right one</span> <span data-start="1300.84" data-end="1302.94">underneath each other and finally add</span> <span data-start="1302.94" data-end="1305.73">block edges back in and we return our</span> <span data-start="1305.73" data-end="1309.03">children and this new block sizing and</span> <span data-start="1309.03" data-end="1310.7">we get something that looks like this</span> <span data-start="1310.7" data-end="1313.89">again not super duper terribly cool is</span> <span data-start="1313.89" data-end="1316.11">just a whole bunch of boxes centered on</span> <span data-start="1316.11" data-end="1317.25">one on top of another</span> <span data-start="1317.25" data-end="1319.56">but with this as our building block we</span> <span data-start="1319.56" data-end="1321.96">can do some really cool things like</span> <span data-start="1321.96" data-end="1323.37">build a layout that puts everything in a</span> <span data-start="1323.37" data-end="1326.34">circle puts everything in a circle in 40</span> <span data-start="1326.34" data-end="1329.16">lines of JavaScript for the worklet</span> <span data-start="1329.16" data-end="1332.22">with no external dependencies at render</span> <span data-start="1332.22" data-end="1335.76">engine speeds with as many elements as</span> <span data-start="1335.76" data-end="1343.02">you want that's 12 that's 18 up remind</span> <span data-start="1343.02" data-end="1345.48">me later I had disable notifications I'm</span> <span data-start="1345.48" data-end="1348.39">glad that popped up so yeah as many</span> <span data-start="1348.39" data-end="1350.07">elements as we want and we can just kind</span> <span data-start="1350.07" data-end="1357.8">of keep on going but wait there's more a</span> <span data-start="1357.8" data-end="1359.45">[Applause]</span> <span data-start="1359.45" data-end="1362.31">masonry layout cuz everyone likes</span> <span data-start="1362.31" data-end="1366.3">masonry this masonry layout is literally</span> <span data-start="1366.3" data-end="1369.6">45 lines of JavaScript with no</span> <span data-start="1369.6" data-end="1373.26">dependencies at render engine speeds you</span> <span data-start="1373.26" data-end="1375.84">can see it goes across one two three</span> <span data-start="1375.84" data-end="1378.57">four five six seven eight nine ten</span> <span data-start="1378.57" data-end="1381.3">eleven it's packing it all in there if I</span> <span data-start="1381.3" data-end="1384.54">go to my CSS if I want columns let's say</span> </p>
<p><span data-start="1384.54" data-end="1386.28">I want five columns now it's slow</span> <span data-start="1386.28" data-end="1387.99">because the images are reloading every</span> <span data-start="1387.99" data-end="1391.8">time but I have a masonry layout with</span> <span data-start="1391.8" data-end="1396.17">almost no overhead and I can make it</span> <span data-start="1396.17" data-end="1398.58">with no padding in between now I've got</span> <span data-start="1398.58" data-end="1401.97">this nice tight dense grid and that's</span> <span data-start="1401.97" data-end="1404.76">that something everyone loves but I've</span> <span data-start="1404.76" data-end="1406.62">got one more thing for you yeah you can</span> <span data-start="1406.62" data-end="1413.28">clap for masonry layout</span> <span data-start="1413.29" data-end="1416.21">I've got one less thing how do we use</span> <span data-start="1416.21" data-end="1418.76">this in our design systems well make</span> <span data-start="1418.76" data-end="1420.2">sure you layout we know how we use cuz</span> <span data-start="1420.2" data-end="1425.36">we can lay out cards forever now but how</span> <span data-start="1425.36" data-end="1429.11">about this this is a demo that kind of</span> <span data-start="1429.11" data-end="1430.3">uses everything that we've shown</span> <span data-start="1430.3" data-end="1434.65">transitioning custom properties typed om</span> <span data-start="1434.65" data-end="1437.99">custom paint worklet and that circular</span> <span data-start="1437.99" data-end="1439.91">layout that I just showed you to create</span> <span data-start="1439.91" data-end="1443.66">an animated circular navigation or dial</span> <span data-start="1443.66" data-end="1447.53">pad navigation without any JavaScript</span> <span data-start="1447.53" data-end="1450.11">for any of the animation all powered by</span> </p>
<p><span data-start="1450.11" data-end="1452.36">CSS now the animation is gonna be a</span> <span data-start="1452.36" data-end="1455.42">little bit choppy because something</span> <span data-start="1455.42" data-end="1456.68">happened in Chrome Canary and it got a</span> <span data-start="1456.68" data-end="1458.62">little bit choppy since I last gave this</span> <span data-start="1458.62" data-end="1460.97">but it looks pretty cool</span> </p>
<p><span data-start="1460.97" data-end="1470.37">I think right</span> <span data-start="1470.38" data-end="1472.87">now it's not as cool and I do that but</span> <span data-start="1472.87" data-end="1477.009">if I do that again yeah so the paint</span> <span data-start="1477.009" data-end="1480.399">worklet is animating an offset the</span> <span data-start="1480.399" data-end="1482.259">offset property and that's strong that</span> <span data-start="1482.259" data-end="1483.94">arc and it's animating it based on our</span> <span data-start="1483.94" data-end="1486.49">transition now we can do some cool</span> <span data-start="1486.49" data-end="1489.159">things with this because it's all CSS if</span> <span data-start="1489.159" data-end="1493.029">we do padding of 0 that'll stay the same</span> <span data-start="1493.029" data-end="1495.88">but when I close it everything shrinks</span> <span data-start="1495.88" data-end="1500.37">back in right now if I go really crazy</span> <span data-start="1500.37" data-end="1515.57">I'll set for 95 135</span> <span data-start="1515.58" data-end="1520.08">and now again this is 15 maybe lines of</span> </p>
<p><span data-start="1520.08" data-end="1522.72">JavaScript for the paint worklet it's 40</span> <span data-start="1522.72" data-end="1524.429">lines of JavaScript for the circle</span> <span data-start="1524.429" data-end="1527.46">layout worklet and then everything else</span> <span data-start="1527.46" data-end="1529.769">is just CSS and transitions because the</span> <span data-start="1529.769" data-end="1531.539">browser knows now knows what to do and</span> <span data-start="1531.539" data-end="1534.679">we're extending CSS through javascript</span> <span data-start="1534.679" data-end="1539.649">and you know what I think that's awesome</span> <span data-start="1539.659" data-end="1542.669">because with Houdini the future of our</span> <span data-start="1542.669" data-end="1544.499">design systems and our styling is really</span> <span data-start="1544.499" data-end="1546.989">bright and we all really need to party</span> <span data-start="1546.989" data-end="1550.259">for that because we get to add magic to</span> <span data-start="1550.259" data-end="1552.509">our design systems thank you all very</span> <span data-start="1552.509" data-end="1561.98">much</span> <span data-start="1561.99" data-end="1566.38">so again that's the link to the talks</span> <span data-start="1566.38" data-end="1568.6">here's a bunch of other good resources</span> </p>
<p><span data-start="1568.6" data-end="1571.35">Houdini glitch day is an interactive</span> <span data-start="1571.35" data-end="1573.34">introduction to Houdini that you can</span> <span data-start="1573.34" data-end="1575.29">play with your going to need Chrome</span> <span data-start="1575.29" data-end="1577.99">Canary with experimental Flags on and</span> <span data-start="1577.99" data-end="1579.55">yeah the source code for this talk is</span> <span data-start="1579.55" data-end="1580.75">available too if you want to dig into</span> <span data-start="1580.75" data-end="1583.05">all these demos thank you all</span> <span data-start="1583.05" data-end="1587.61">[Applause]</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
