<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>VccJldua8tc</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/VccJldua8tc?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="0.06" data-end="4.74">all right okay then okay</span> <span data-start="4.74" data-end="7.049">so hello thank you all I really</span> <span data-start="7.049" data-end="8.67">appreciate the opportunity to be a part</span> <span data-start="8.67" data-end="13.08">of CSS comp Budapest just massive thanks</span> <span data-start="13.08" data-end="15">to the organizers and most importantly</span> <span data-start="15" data-end="18.35">you all for welcoming me into your</span> <span data-start="18.35" data-end="20.369">ridiculously beautiful and picturesque</span> <span data-start="20.369" data-end="21.6">City</span> <span data-start="21.6" data-end="24.24">my name is Jeremy Wagner and I'm a web</span> <span data-start="24.24" data-end="25.97">performance consultant for site improve</span> <span data-start="25.97" data-end="28.349">my job is to do all I can to make the</span> <span data-start="28.349" data-end="30.539">web faster for our clients and I also</span> <span data-start="30.539" data-end="32.55">write and talk about performance a bit</span> </p>
<p><span data-start="32.55" data-end="34.92">I'm just repeating everything or that</span> <span data-start="34.92" data-end="37.77">our wonderful emcee has already said but</span> <span data-start="37.77" data-end="40.079">this talk is about paint worklets which</span> <span data-start="40.079" data-end="41.01">is a little weird for me because I</span> <span data-start="41.01" data-end="42.989">always talk about performance which has</span> <span data-start="42.989" data-end="44.789">comparably little to do performance well</span> <span data-start="44.789" data-end="46.62">mostly we'll get there</span> <span data-start="46.62" data-end="48.12">and right about now you might be</span> <span data-start="48.12" data-end="52.32">wondering Oh Jeremy what the hell are</span> <span data-start="52.32" data-end="54.809">paint worklets and it's a good question</span> <span data-start="54.809" data-end="56.43">and since I don't want to assume</span> <span data-start="56.43" data-end="58.53">everyone knows about this here's a quick</span> <span data-start="58.53" data-end="60.719">tour of what they are and what they can</span> <span data-start="60.719" data-end="63.149">do paint worklets are part of a</span> <span data-start="63.149" data-end="65.61">developing set of specifications called</span> </p>
<p><span data-start="65.61" data-end="69.689">Houdini and with the api's Houdini</span> <span data-start="69.689" data-end="71.79">provides you can write what are what are</span> <span data-start="71.79" data-end="74.46">called worklets and they let you develop</span> <span data-start="74.46" data-end="76.619">expressive and stateful animations</span> <span data-start="76.619" data-end="79.65">custom layout modes even that's a</span> <span data-start="79.65" data-end="81.99">developing thing and as is the sole</span> <span data-start="81.99" data-end="83.46">focus of this talk</span> <span data-start="83.46" data-end="86.009">generative artwork using the CSS paint</span> <span data-start="86.009" data-end="90.75">API seriously so I haven't answered your</span> <span data-start="90.75" data-end="91.979">question yet and out there you're</span> <span data-start="91.979" data-end="93.869">thinking ok fine journey buying that</span> <span data-start="93.869" data-end="96.03">whatever but what even is a worklet will</span> <span data-start="96.03" data-end="97.95">you get to the point worklets are</span> <span data-start="97.95" data-end="101.009">similar to web workers but unlike web</span> <span data-start="101.009" data-end="102.119">workers worklets</span> <span data-start="102.119" data-end="104.579">offer developers lower level access to</span> <span data-start="104.579" data-end="107.009">rendering pipelines for completing very</span> <span data-start="107.009" data-end="109.049">narrowly defined but super specific</span> <span data-start="109.049" data-end="112.14">tasks and in the case of paint worklets</span> <span data-start="112.14" data-end="114.06">we're talking about artwork that we can</span> <span data-start="114.06" data-end="115.92">generate with JavaScript and control</span> <span data-start="115.92" data-end="119.67">with CSS now I know Jay s comp is</span> <span data-start="119.67" data-end="122.49">tomorrow and not today so you're</span> <span data-start="122.49" data-end="123.84">probably thinking well with what the</span> <span data-start="123.84" data-end="125.28">hell is this I didn't ask for no</span> </p>
<p><span data-start="125.28" data-end="129.989">JavaScript at a CSS calm woo and I feel</span> <span data-start="129.989" data-end="133.09">you as much as I love JavaScript</span> <span data-start="133.09" data-end="137.62">the web can sometimes feel like this but</span> <span data-start="137.62" data-end="140.41">I feel that this technology is relevant</span> <span data-start="140.41" data-end="142.69">here even at CSS cough because even if</span> <span data-start="142.69" data-end="145.15">you're not a JavaScript devotee or</span> <span data-start="145.15" data-end="147.88">superfan you can still use paint</span> <span data-start="147.88" data-end="149.41">worklets which have already been written</span> <span data-start="149.41" data-end="151.54">in your designs without ever having to</span> <span data-start="151.54" data-end="153.4">do more than write a little CSS here</span> <span data-start="153.4" data-end="154.93">there so they're still relevant to you</span> <span data-start="154.93" data-end="158.14">and this is possible because while paint</span> <span data-start="158.14" data-end="160.03">worklets are written in JavaScript</span> <span data-start="160.03" data-end="163.09">they're embeddable in CSS and this is</span> <span data-start="163.09" data-end="164.769">what I mean by an embeddable when you</span> <span data-start="164.769" data-end="166.33">look at this lonely background image</span> <span data-start="166.33" data-end="167.62">property you might be thinking what</span> <span data-start="167.62" data-end="168.79">that's not right</span> <span data-start="168.79" data-end="171.22">isn't background image supposed to take</span> <span data-start="171.22" data-end="173.44">a URL well that's certainly the</span> <span data-start="173.44" data-end="176.14">prevailing use case but in browsers that</span> <span data-start="176.14" data-end="178.69">support paint worklets the background</span> <span data-start="178.69" data-end="180.67">image property can also take this little</span> <span data-start="180.67" data-end="183.22">nifty paint syntax too so if you think</span> <span data-start="183.22" data-end="186.19">of the URL syntax and CSS is a function</span> <span data-start="186.19" data-end="188.709">that accepts a URL string to an image</span> <span data-start="188.709" data-end="191.17">you can similarly think of paint as a</span> <span data-start="191.17" data-end="193.33">function which accepts a string that</span> <span data-start="193.33" data-end="195.64">represents and invokes a paintwork clip</span> <span data-start="195.64" data-end="197.95">and in that worklet is where you write</span> <span data-start="197.95" data-end="199.81">the JavaScript to generate background</span> <span data-start="199.81" data-end="202.51">images that CSS can use so in this</span> <span data-start="202.51" data-end="204.7">example we're calling paint to invoke a</span> <span data-start="204.7" data-end="206.56">worklet that is registered under the</span> <span data-start="206.56" data-end="209.319">name amazing but until we actually</span> <span data-start="209.319" data-end="212.23">register a worklet to that name this bit</span> <span data-start="212.23" data-end="214.12">of CSS won't do anything and therefore</span> <span data-start="214.12" data-end="217.42">will not be very amazing and this is</span> <span data-start="217.42" data-end="219.1">what that registration process looks</span> <span data-start="219.1" data-end="221.2">like which is done in JavaScript on your</span> <span data-start="221.2" data-end="224.62">page or your main app code that runs on</span> <span data-start="224.62" data-end="226.54">the main thread because the paint API</span> <span data-start="226.54" data-end="228.31">isn't available in all browsers you'll</span> <span data-start="228.31" data-end="230.26">need to do a quick check to see if</span> <span data-start="230.26" data-end="232.42">window dot CSS dot paintwork late' is a</span> <span data-start="232.42" data-end="235.15">thing that you can use and if it is you</span> <span data-start="235.15" data-end="237.16">can then use its add module method to</span> <span data-start="237.16" data-end="239.29">load your worklet from a separate</span> </p>
<p><span data-start="239.29" data-end="241.9">JavaScript file and what is a paint</span> <span data-start="241.9" data-end="243.73">worker worklet really I mean what is it</span> <span data-start="243.73" data-end="245.889">it turns out it's a class with a</span> <span data-start="245.889" data-end="248.23">predetermined shape which consists of a</span> <span data-start="248.23" data-end="252.19">method called well paint and with that</span> <span data-start="252.19" data-end="254.17">within that method is where all the code</span> <span data-start="254.17" data-end="256.329">that draws the artwork goes and the</span> <span data-start="256.329" data-end="257.739">shape of a paint worklet is not</span> <span data-start="257.739" data-end="259.539">restrictive at all so you're free to use</span> <span data-start="259.539" data-end="262.15">all their class features to organize and</span> <span data-start="262.15" data-end="264.099">and do like whatever to organize your</span> <span data-start="264.099" data-end="266.71">drawing code any way that you prefer and</span> <span data-start="266.71" data-end="268.93">it's nifty because without a little</span> <span data-start="268.93" data-end="271.36">organization your drawing code can start</span> <span data-start="271.36" data-end="274.509">to look like this and we really don't</span> <span data-start="274.509" data-end="279.069">want that do we then moving on in the</span> <span data-start="279.069" data-end="282.039">same file after and outside of your</span> <span data-start="282.039" data-end="282.91">paintwork Lit class</span> <span data-start="282.91" data-end="285.13">you can call register paint which</span> <span data-start="285.13" data-end="287.77">requires two arguments the first is the</span> <span data-start="287.77" data-end="289.78">name the string name that the paintwork</span> <span data-start="289.78" data-end="291.97">should be registered under and then the</span> <span data-start="291.97" data-end="294.46">second this that allows it to be</span> <span data-start="294.46" data-end="296.169">accessed by the paint function and then</span> <span data-start="296.169" data-end="298.06">the second is the reference to the class</span> <span data-start="298.06" data-end="299.77">that you just wrote that does all of the</span> <span data-start="299.77" data-end="300.94">painting and when this all comes</span> <span data-start="300.94" data-end="303.94">together a paint worklet finally becomes</span> <span data-start="303.94" data-end="307.72">usable by CSS but how do we draw stuff</span> <span data-start="307.72" data-end="311.38">what does that even look like well the</span> </p>
<p><span data-start="311.38" data-end="313.87">API you use conveniently to draw stuff</span> <span data-start="313.87" data-end="316.78">is really just the canvas API is 2d</span> <span data-start="316.78" data-end="318.46">drawing context something that's been</span> <span data-start="318.46" data-end="320.71">around for a very long time that some of</span> <span data-start="320.71" data-end="323.02">us have good familiarity with and that</span> <span data-start="323.02" data-end="325.27">makes sense why why develop a separate</span> </p>
<p><span data-start="325.27" data-end="327.61">API for drawing in 2d when a perfectly</span> <span data-start="327.61" data-end="329.82">good one is like right there you know</span> <span data-start="329.82" data-end="332.289">the second argument is the canvas</span> <span data-start="332.289" data-end="334.69">geometry which offers the dimensions of</span> <span data-start="334.69" data-end="336.789">the drawing space and this is essential</span> <span data-start="336.789" data-end="339.61">to ensuring your artwork responds to the</span> <span data-start="339.61" data-end="341.38">available space because you know your</span> <span data-start="341.38" data-end="342.969">elements can kind of shift and change</span> <span data-start="342.969" data-end="345.31">size that sort of thing happens and in</span> <span data-start="345.31" data-end="347.59">this madly responsive world that we live</span> <span data-start="347.59" data-end="348.82">in we want to make sure that our artwork</span> <span data-start="348.82" data-end="351.88">adapts to the container that it's in so</span> <span data-start="351.88" data-end="354.88">here's an example of a minimally viable</span> <span data-start="354.88" data-end="357.099">paint method which draws a solid black</span> <span data-start="357.099" data-end="360.159">circle with a 64 pixel radius smack dab</span> <span data-start="360.159" data-end="361.81">in the middle of the canvas no matter</span> <span data-start="361.81" data-end="364.87">what the size of that canvas is and so</span> <span data-start="364.87" data-end="367.06">if we assume this super basic paint</span> <span data-start="367.06" data-end="369.49">worklet gets registered under the not at</span> <span data-start="369.49" data-end="370.12">all</span> <span data-start="370.12" data-end="372.31">ironic name of amazing and we apply it</span> <span data-start="372.31" data-end="376.11">to an element will get this this totally</span> <span data-start="376.11" data-end="379.719">amazing thing that in no way could be</span> <span data-start="379.719" data-end="384.19">replaced by a static image whatsoever so</span> <span data-start="384.19" data-end="386.789">this might be you right about now but</span> <span data-start="386.789" data-end="389.44">that simplistic example was meant to</span> <span data-start="389.44" data-end="391.659">illustrate how we get from one line of</span> </p>
<p><span data-start="391.659" data-end="393.46">CSS to something that lets you generate</span> <span data-start="393.46" data-end="396.039">background images using a familiar API</span> <span data-start="396.039" data-end="398.469">there is so much more that this</span> <span data-start="398.469" data-end="400.18">technology is capable of so let</span> <span data-start="400.18" data-end="402.52">take a look at it and just think what if</span> <span data-start="402.52" data-end="404.4">you could use this API to create</span> <span data-start="404.4" data-end="406.81">randomly generated artwork that could</span> <span data-start="406.81" data-end="408.84">enhance your designs and practical yet</span> <span data-start="408.84" data-end="410.949">spontaneous ways that are just a little</span> <span data-start="410.949" data-end="412.03">bit different a little bit of chaos</span> <span data-start="412.03" data-end="414.16">right and that's what we're going to do</span> <span data-start="414.16" data-end="415.72">we're going to talk about the other</span> <span data-start="415.72" data-end="417.58">important aspects of this technology as</span> <span data-start="417.58" data-end="420.19">well so what we're done here the only</span> <span data-start="420.19" data-end="421.81">thing that we'll be able to cage your</span> <span data-start="421.81" data-end="425.47">creativity is you so let's see what's</span> <span data-start="425.47" data-end="427.72">possible with this expressive and cool</span> <span data-start="427.72" data-end="432.01">technology but still and I sense a</span> <span data-start="432.01" data-end="435.729">little bit of hesitancy knowing where or</span> <span data-start="435.729" data-end="438.639">just how to start can be kind of</span> <span data-start="438.639" data-end="440.44">paralyzing so it's a good frame of mind</span> <span data-start="440.44" data-end="442.419">you know a good frame of mind to get</span> <span data-start="442.419" data-end="445.03">into is to think of the canvas is like a</span> <span data-start="445.03" data-end="447.16">set of tiles where all the tiles are</span> <span data-start="447.16" data-end="449.53">separate but potentially overlapping or</span> <span data-start="449.53" data-end="451.3">connected pieces which are randomly</span> <span data-start="451.3" data-end="454.539">generated this mindset trains your focus</span> <span data-start="454.539" data-end="457.389">conveniently only on what to do in each</span> <span data-start="457.389" data-end="459.4">tile rather than allowing yourself to be</span> <span data-start="459.4" data-end="461.26">overwhelmed by what to do with the</span> <span data-start="461.26" data-end="463.69">entire space and once everything is done</span> <span data-start="463.69" data-end="465.22">you can kind of step back and just see</span> <span data-start="465.22" data-end="466.57">how all these things connect and</span> <span data-start="466.57" data-end="468.16">interlock and how they come together and</span> <span data-start="468.16" data-end="471.19">this helps us reach where I think is the</span> <span data-start="471.19" data-end="473.919">sweet spot with the paint API we can get</span> <span data-start="473.919" data-end="477.16">weird yes but that weirdness can</span> <span data-start="477.16" data-end="479.169">intersect with what's practical and</span> <span data-start="479.169" data-end="481.09">therefore usable and that to me is like</span> <span data-start="481.09" data-end="483.01">the magical part of web development the</span> <span data-start="483.01" data-end="486.07">weirdly practical stuff now some of what</span> <span data-start="486.07" data-end="487.57">you're going to see here and I feel</span> <span data-start="487.57" data-end="490.93">obliged to call this out is very much</span> <span data-start="490.93" data-end="492.789">inspired by a wonderful talk that Tim</span> </p>
<p><span data-start="492.789" data-end="495.639">Holman gave at JFK FAU last year where</span> <span data-start="495.639" data-end="497.53">he talked about generative art using the</span> <span data-start="497.53" data-end="501.58">canvas API I highly recommend you check</span> <span data-start="501.58" data-end="503.349">it out on YouTube because he is way</span> <span data-start="503.349" data-end="505.349">better at this stuff than I am and</span> <span data-start="505.349" data-end="507.76">pretty much everything in that talk is</span> <span data-start="507.76" data-end="509.71">something that you will then be able to</span> <span data-start="509.71" data-end="512.349">apply to paint worklets in the CSS paint</span> <span data-start="512.349" data-end="516.31">API so do check it out okay let's</span> <span data-start="516.31" data-end="518.5">revisit that paint method in the amazing</span> <span data-start="518.5" data-end="520.419">paint wirklich class and just maybe</span> <span data-start="520.419" data-end="522.7">change things up a little bit there's</span> <span data-start="522.7" data-end="525.19">more going on in this example then when</span> <span data-start="525.19" data-end="527.14">we were just drawing this mundane lonely</span> <span data-start="527.14" data-end="529.26">circle in the middle of a bleak canvas</span> <span data-start="529.26" data-end="531.91">so first we establish the size of each</span> <span data-start="531.91" data-end="534.1">tile which will be 32 pixels</span> <span data-start="534.1" data-end="536.86">square then we divide the canvases width</span> <span data-start="536.86" data-end="539.079">and height by the tile size and then</span> <span data-start="539.079" data-end="540.91">we'll write two loops using those values</span> <span data-start="540.91" data-end="544.449">to draw each individual tile the first</span> <span data-start="544.449" data-end="547.029">loop deals with tiles on the y-axis and</span> <span data-start="547.029" data-end="548.759">then the second loop deals with</span> <span data-start="548.759" data-end="551.11">unsurprisingly tiles on the x-axis and</span> <span data-start="551.11" data-end="552.97">the second loop is nested inside of the</span> <span data-start="552.97" data-end="554.23">first one and this will end up</span> <span data-start="554.23" data-end="556.779">populating or allow us to populate every</span> <span data-start="556.779" data-end="559.18">tile available on the canvas with</span> <span data-start="559.18" data-end="561.55">whatever it is we feel like drawing so</span> <span data-start="561.55" data-end="564.22">what you do up here is up to you but in</span> <span data-start="564.22" data-end="566.38">this example I'm going to draw a line in</span> <span data-start="566.38" data-end="568.72">every tile but the random part a bit of</span> <span data-start="568.72" data-end="571.54">it will be where the line goes in in the</span> <span data-start="571.54" data-end="574.149">tile space right so in every iteration I</span> <span data-start="574.149" data-end="576.579">call the context objects begin path</span> <span data-start="576.579" data-end="579.1">method to begin drawing a line and then</span> </p>
<p><span data-start="579.1" data-end="581.68">I leave it to math dot random or math</span> <span data-start="581.68" data-end="584.92">dot pseudo random am i right to decide</span> <span data-start="584.92" data-end="587.41">if the line will cross the tile space</span> <span data-start="587.41" data-end="589.42">from the upper left corner to the lower</span> <span data-start="589.42" data-end="591.579">lower right corner or draw a line</span> <span data-start="591.579" data-end="593.319">straight line from the upper left corner</span> <span data-start="593.319" data-end="596.019">to the lower left corner and after that</span> <span data-start="596.019" data-end="598.12">I finish up Euler rate iteration by</span> <span data-start="598.12" data-end="600.069">telling the context object to draw the</span> <span data-start="600.069" data-end="602.189">strokes so what does that look like</span> <span data-start="602.189" data-end="605.41">turns out it looks like a kind of cool</span> <span data-start="605.41" data-end="610.72">thing that changes every single time and</span> <span data-start="610.72" data-end="612.61">that is the kind of spontaneity and</span> <span data-start="612.61" data-end="614.23">randomness I'm talking about here and</span> <span data-start="614.23" data-end="616.029">that's just what you can do if you only</span> <span data-start="616.029" data-end="618.13">know like just a teeny little bit of the</span> <span data-start="618.13" data-end="620.319">canvas API but with a little ingenuity</span> <span data-start="620.319" data-end="623.35">that little teeny bit of ingenuity can</span> <span data-start="623.35" data-end="626.47">go extremely far like what if we just</span> <span data-start="626.47" data-end="628.149">decided to throw in a little something</span> <span data-start="628.149" data-end="630.1">extra and randomly decide whether or not</span> <span data-start="630.1" data-end="631.87">to draw a dot in the upper left hand</span> <span data-start="631.87" data-end="634.509">corner of each tile this gives the final</span> <span data-start="634.509" data-end="636.069">artwork a sort of circuit board</span> <span data-start="636.069" data-end="637.54">appearance which i think is kind of neat</span> <span data-start="637.54" data-end="639.79">and we can also make the tile size a bit</span> <span data-start="639.79" data-end="641.56">bigger and we can change the color and</span> <span data-start="641.56" data-end="643.449">because a canvas background is</span> <span data-start="643.449" data-end="645.97">transparent by default we can specify a</span> </p>
<p><span data-start="645.97" data-end="649.269">CSS background color property to set to</span> <span data-start="649.269" data-end="651.339">set this artwork on whatever color it is</span> <span data-start="651.339" data-end="652.569">we want so I've kind of done like this</span> <span data-start="652.569" data-end="655.99">off black grayish thing now imagine this</span> <span data-start="655.99" data-end="658.06">pattern in a pages masthead background</span> <span data-start="658.06" data-end="659.74">but maybe at a more subtle and lower</span> <span data-start="659.74" data-end="662.079">opacity that just gives the design just</span> <span data-start="662.079" data-end="664.66">a little bit of extra oof and like chaos</span> <span data-start="664.66" data-end="667.46">but without overpowering the forward</span> <span data-start="667.46" data-end="669.02">and like making things like you know</span> <span data-start="669.02" data-end="670.82">just kind of subtle like you know being</span> <span data-start="670.82" data-end="674.63">cool so that was cool but let's do a</span> <span data-start="674.63" data-end="676.13">different take on this idea and let's</span> <span data-start="676.13" data-end="677.63">like let's experiment a little bit more</span> <span data-start="677.63" data-end="678.62">like what else can we do</span> <span data-start="678.62" data-end="680.83">so here's a paint work I call blotto</span> <span data-start="680.83" data-end="684.14">which draws circles of varying size and</span> <span data-start="684.14" data-end="685.85">opacity in every tile like kind of an</span> <span data-start="685.85" data-end="688.37">inkblot kind of thing and so there's a</span> <span data-start="688.37" data-end="689.72">bit of code here so let's just walk</span> <span data-start="689.72" data-end="692.209">through it at the very beginning a</span> <span data-start="692.209" data-end="694.82">beginning of blah toes paint method we</span> <span data-start="694.82" data-end="697.25">set some variables the tile size of</span> <span data-start="697.25" data-end="700.01">course 8 by 8 pixels and then we define</span> <span data-start="700.01" data-end="702.56">this amplitude variable which aids us in</span> <span data-start="702.56" data-end="704.63">sort of generating randomly sized</span> <span data-start="704.63" data-end="706.91">circles later on and then we calculate</span> <span data-start="706.91" data-end="709.43">the number of tiles on both axes and</span> <span data-start="709.43" data-end="711.589">then we store the result of pi times 2</span> <span data-start="711.589" data-end="713.779">which means that the circle that we draw</span> <span data-start="713.779" data-end="717.529">will be a full circle at 360 degrees and</span> <span data-start="717.529" data-end="719.75">then finally we set the fill style to</span> <span data-start="719.75" data-end="722.51">this sort of like nice little blue and</span> <span data-start="722.51" data-end="723.56">now here's where we do the heavy lifting</span> <span data-start="723.56" data-end="725.69">you'll note that the loops are the same</span> <span data-start="725.69" data-end="728.18">as with the circuit board pattern and we</span> <span data-start="728.18" data-end="730.37">we do all the work inside of the second</span> <span data-start="730.37" data-end="732.92">nested loop now where it changes is that</span> <span data-start="732.92" data-end="735.29">we generate a random alpha value by</span> <span data-start="735.29" data-end="737">getting the remainder of math dot random</span> <span data-start="737" data-end="739.4">divided against itself and this will get</span> <span data-start="739.4" data-end="742.029">us a valid transparency value from 0 to</span> <span data-start="742.029" data-end="745.339">1.0 and then we multiply the tile size</span> <span data-start="745.339" data-end="747.95">by math dot random and our amplitude</span> <span data-start="747.95" data-end="750.02">value from earlier and now all we do</span> <span data-start="750.02" data-end="752.36">from here is just draw a circle with</span> <span data-start="752.36" data-end="753.86">that information that we've just sort of</span> <span data-start="753.86" data-end="755.959">come up with and then we register good</span> <span data-start="755.959" data-end="757.82">ole blotto here like this just like</span> <span data-start="757.82" data-end="760.43">usual and then we can use it and CSS</span> <span data-start="760.43" data-end="763.19">like so and because paintwork let's draw</span> <span data-start="763.19" data-end="765.41">like I said they draw on a transparent</span> <span data-start="765.41" data-end="767.42">background by default we can add a nice</span> <span data-start="767.42" data-end="769.13">little background color to sit for it to</span> <span data-start="769.13" data-end="770.6">sit on I've chosen this sort of like</span> <span data-start="770.6" data-end="772.79">off-white and so after all of that</span> <span data-start="772.79" data-end="775.69">faffing about what does it look like</span> <span data-start="775.69" data-end="778.43">pretty cool I think it's not bad if I do</span> <span data-start="778.43" data-end="779.99">say so myself I mean I don't think</span> <span data-start="779.99" data-end="781.55">anything I do is cool but I think that's</span> <span data-start="781.55" data-end="784.91">kind of cool and as before we get a</span> <span data-start="784.91" data-end="787.459">unique result every time the canvas</span> <span data-start="787.459" data-end="789.11">redraws and it gives us again that</span> <span data-start="789.11" data-end="791.149">organic feel that while stable and</span> <span data-start="791.149" data-end="794.39">familiar is just slightly chaotic and</span> <span data-start="794.39" data-end="796.88">spontaneous and I really like that every</span> <span data-start="796.88" data-end="801.65">single time it draws ok so that was</span> <span data-start="801.65" data-end="804.62">alright but let's think outside of tiles</span> <span data-start="804.62" data-end="806.33">right tiles are fun in their convenient</span> <span data-start="806.33" data-end="809.21">ways to draw like generative artwork but</span> <span data-start="809.21" data-end="810.74">let's step into the world of</span> <span data-start="810.74" data-end="813.35">trigonometry and I'm sure most of you</span> <span data-start="813.35" data-end="815">are pretty comfortable with trig but if</span> <span data-start="815" data-end="818.09">not don't worry it's it's not too hard</span> <span data-start="818.09" data-end="820.31">and I never was a good math student so</span> <span data-start="820.31" data-end="822.11">like I was brushing up on my trig last</span> <span data-start="822.11" data-end="823.22">week</span> <span data-start="823.22" data-end="824.99">here's another paint worklet I call</span> <span data-start="824.99" data-end="828.26">flashy which randomly draw stylized rays</span> <span data-start="828.26" data-end="830.27">of light sorry</span> <span data-start="830.27" data-end="832.55">around a circle which flare outward</span> <span data-start="832.55" data-end="834.2">which makes it sort of look like a</span> <span data-start="834.2" data-end="836.36">stylized rendering of the Sun which i</span> <span data-start="836.36" data-end="838.85">think is kind of cool so let's look at</span> <span data-start="838.85" data-end="840.89">the paint method and as before we'll</span> <span data-start="840.89" data-end="842.39">need to establish variables that we can</span> <span data-start="842.39" data-end="845.33">use later the first is the radius of the</span> <span data-start="845.33" data-end="846.89">main circle that the Rays will radiate</span> <span data-start="846.89" data-end="849.23">from think like the Sun itself which</span> <span data-start="849.23" data-end="852.89">we've set at 48 pixels next is the</span> <span data-start="852.89" data-end="855.11">amount of deviation of each rays with</span> <span data-start="855.11" data-end="857.33">and this is what we use to make it look</span> <span data-start="857.33" data-end="859.49">like the Rays are flaring outward as</span> <span data-start="859.49" data-end="862.64">they extend from the Sun itself out to</span> <span data-start="862.64" data-end="865.13">the edge of the canvas and next is the</span> <span data-start="865.13" data-end="867.65">outer radius which is sort of think like</span> <span data-start="867.65" data-end="871.73">a giant circle around the entire canvas</span> <span data-start="871.73" data-end="875.03">that you don't see we do this so that we</span> <span data-start="875.03" data-end="876.41">ensure that the edges of the Rays will</span> <span data-start="876.41" data-end="878.24">be drawn outside of the canvas bounds</span> <span data-start="878.24" data-end="880.01">when we use our trigonometry functions</span> <span data-start="880.01" data-end="882.14">to plot where those rays need to go and</span> <span data-start="882.14" data-end="884.69">finally we have the X&Y coordinates from</span> <span data-start="884.69" data-end="887.54">which the circle the main circle will be</span> <span data-start="887.54" data-end="891.68">drawn and we calculate the position of</span> <span data-start="891.68" data-end="893.27">this thing by multiplying the width and</span> <span data-start="893.27" data-end="895.25">height of the canvases size by some</span> <span data-start="895.25" data-end="897.65">static values to sort of ensure it sits</span> <span data-start="897.65" data-end="899.63">proportionately somewhere in the upper</span> <span data-start="899.63" data-end="902.15">left but if the element sizes changes</span> <span data-start="902.15" data-end="904.4">it'll kind of adjust a little bit and</span> <span data-start="904.4" data-end="907.13">now it's time to get drawing so first we</span> <span data-start="907.13" data-end="908.81">set the fill color and then we draw the</span> <span data-start="908.81" data-end="910.43">circle from which the rays will radiate</span> <span data-start="910.43" data-end="913.07">pretty straightforward now here's where</span> <span data-start="913.07" data-end="915.2">it gets a little interesting and this</span> <span data-start="915.2" data-end="916.58">code will all be available so if you</span> <span data-start="916.58" data-end="918.62">can't totally read it that's ok it will</span> <span data-start="918.62" data-end="921.14">be available somewhere because we are</span> <span data-start="921.14" data-end="922.04">drawing rays</span> <span data-start="922.04" data-end="923.93">radiating around a circle we'll want to</span> <span data-start="923.93" data-end="925.7">do one for loop that starts at zero</span> <span data-start="925.7" data-end="927.47">degrees and then goes all the way around</span> <span data-start="927.47" data-end="930.11">to 360 and then in each iteration will</span> <span data-start="930.11" data-end="932.09">let math dot random decide if it wants</span> <span data-start="932.09" data-end="933.59">to draw anything at all and if it</span> <span data-start="933.59" data-end="934.67">decides okay we're going</span> <span data-start="934.67" data-end="936.95">do that we'll calculate the x and</span> <span data-start="936.95" data-end="938.9">y-coordinates at the edge of the larger</span> <span data-start="938.9" data-end="941.09">circle that exists outside the canvas</span> <span data-start="941.09" data-end="942.83">bounds and so then we do this by</span> <span data-start="942.83" data-end="945.05">converting the edge of each ray from</span> <span data-start="945.05" data-end="947.71">degrees represented by our incrementer</span> <span data-start="947.71" data-end="950.9">i2 radians and from there we'll then</span> <span data-start="950.9" data-end="952.82">draw this polyline shape that uses a</span> <span data-start="952.82" data-end="954.62">trigonometry like two trigonometry</span> <span data-start="954.62" data-end="956.57">functions to figure out the x and y</span> <span data-start="956.57" data-end="958.76">coordinates to draw the lines for each</span> <span data-start="958.76" data-end="961.1">ray once the shape is drawn we fill it</span> <span data-start="961.1" data-end="962.51">with the same solid color as we used</span> <span data-start="962.51" data-end="965">with the circle then like before we</span> <span data-start="965" data-end="967.27">register that flashy little fella and</span> <span data-start="967.27" data-end="970.58">then like before we use it in the CSS</span> <span data-start="970.58" data-end="972.2">like this and give it a nice pinkish</span> <span data-start="972.2" data-end="974.21">background color to sit on and what do</span> <span data-start="974.21" data-end="976.28">you think that looks like something</span> <span data-start="976.28" data-end="979.01">pretty cool I think right it looks kind</span> <span data-start="979.01" data-end="980.78">of neat and a little bit of mass goes a</span> <span data-start="980.78" data-end="983.3">long way into making this look really</span> <span data-start="983.3" data-end="986.42">cool in stylish and like before we still</span> <span data-start="986.42" data-end="990.16">get that spontaneity that gives it that</span> <span data-start="990.16" data-end="991.97">familiar but slightly different</span> <span data-start="991.97" data-end="994.01">appearance each and every time that it</span> <span data-start="994.01" data-end="998.09">draws so and as an aside I sucked at</span> <span data-start="998.09" data-end="1002.77">math in school like like barely scraped</span> <span data-start="1002.77" data-end="1006.07">pie through algebra to sucked so if I</span> <span data-start="1006.07" data-end="1008.05">can make stuff like this pretty much</span> <span data-start="1008.05" data-end="1010.48">anyone can make stuff that looks really</span> <span data-start="1010.48" data-end="1012.97">cool with just a little bit of like you</span> <span data-start="1012.97" data-end="1015.13">know even just some basic arithmetic can</span> <span data-start="1015.13" data-end="1016.99">help you make some really cool stuff in</span> <span data-start="1016.99" data-end="1020.56">this and so a case in point like this</span> <span data-start="1020.56" data-end="1022.27">paint work that I like to call slapdash</span> <span data-start="1022.27" data-end="1024.13">this one is kind of one of the easier</span> <span data-start="1024.13" data-end="1025.54">ones to make and I use it on my website</span> <span data-start="1025.54" data-end="1028.06">currently although it might not be long</span> <span data-start="1028.06" data-end="1029.56">for this world I'm kind of getting tired</span> <span data-start="1029.56" data-end="1032.35">of it but that's okay like because I've</span> <span data-start="1032.35" data-end="1033.91">got some others up my sleeve like this</span> <span data-start="1033.91" data-end="1036.49">one which I like to call bumpy because</span> <span data-start="1036.49" data-end="1040.75">it's get it it's bumpy and then there's</span> <span data-start="1040.75" data-end="1042.43">this alternate rendering of the blotto</span> <span data-start="1042.43" data-end="1043.93">paint worklet which I showed you earlier</span> <span data-start="1043.93" data-end="1046.12">but with just sort of a larger radius on</span> <span data-start="1046.12" data-end="1048.46">the circles with a blend mode applied to</span> <span data-start="1048.46" data-end="1050.35">give it a sort of inkblot gone wild</span> <span data-start="1050.35" data-end="1052.57">effect that's kind of cool</span> <span data-start="1052.57" data-end="1053.89">and then there's yeah this blend mode</span> <span data-start="1053.89" data-end="1055.06">just kind of makes them like sort of</span> <span data-start="1055.06" data-end="1056.41">overlay each other I think it uses</span> <span data-start="1056.41" data-end="1058.87">multiply and then I started getting a</span> <span data-start="1058.87" data-end="1061.15">little bit whack here and came up with</span> <span data-start="1061.15" data-end="1062.91">this one which I like to call byte mare</span> <span data-start="1062.91" data-end="1065.71">and even though it looks 3d it's really</span> <span data-start="1065.71" data-end="1067.87">just a 2d drawing I don't think you can</span> <span data-start="1067.87" data-end="1068.53">use a 3d</span> <span data-start="1068.53" data-end="1071.32">context and paint worklets yet I use</span> <span data-start="1071.32" data-end="1073.18">some trigonometry functions just to kind</span> <span data-start="1073.18" data-end="1075.16">of fake that 3d look and I think it's</span> <span data-start="1075.16" data-end="1077.5">pretty convincing and in that same vein</span> <span data-start="1077.5" data-end="1079.48">here's my favorite one I made so far</span> <span data-start="1079.48" data-end="1083.71">which I call parallel oh wow it also</span> <span data-start="1083.71" data-end="1085.75">uses a little trig to fake that free D</span> <span data-start="1085.75" data-end="1087.52">thing again and I don't know who knows</span> <span data-start="1087.52" data-end="1089.23">where I'll go with with this next this</span> <span data-start="1089.23" data-end="1090.79">is just the last one I made that I like</span> <span data-start="1090.79" data-end="1093.07">but it's a lot of fun and if you're</span> <span data-start="1093.07" data-end="1094.39">looking to know how I did some of these</span> <span data-start="1094.39" data-end="1096.13">or where you can find that code I have a</span> <span data-start="1096.13" data-end="1097.9">little surprise for you at the end of</span> <span data-start="1097.9" data-end="1100.78">this talk but we got some other stuff to</span> <span data-start="1100.78" data-end="1103.96">talk about first okay so we had some fun</span> <span data-start="1103.96" data-end="1104.77">there for a minute</span> <span data-start="1104.77" data-end="1107.2">right like it was a wild ride but the</span> <span data-start="1107.2" data-end="1108.94">problem with paint worklets as I've</span> <span data-start="1108.94" data-end="1110.41">described them is that they're just not</span> <span data-start="1110.41" data-end="1115.15">well very flexible well as I described</span> <span data-start="1115.15" data-end="1117.4">them you just you have to change the</span> <span data-start="1117.4" data-end="1118.78">paint work look code itself to change</span> <span data-start="1118.78" data-end="1121.3">its appearance and while that can work</span> <span data-start="1121.3" data-end="1123.34">it's not very convenient and really just</span> <span data-start="1123.34" data-end="1125.23">kind of a pain what if you wanted to</span> <span data-start="1125.23" data-end="1127.63">reuse that same work lick code in</span> <span data-start="1127.63" data-end="1129.43">different places on the same site what</span> <span data-start="1129.43" data-end="1131.43">if you wanted to do wanted it to do</span> <span data-start="1131.43" data-end="1134.08">basically the same thing but adapt it to</span> <span data-start="1134.08" data-end="1136.3">different contexts solely by tweaking</span> <span data-start="1136.3" data-end="1138.4">its appearance and CSS that'd be cool</span> <span data-start="1138.4" data-end="1141.76">right guess what that is possible you</span> <span data-start="1141.76" data-end="1144.16">can set you can set up your paint</span> <span data-start="1144.16" data-end="1145.99">worklets so that their appearance can be</span> <span data-start="1145.99" data-end="1148.27">altered by what are called custom CSS</span> <span data-start="1148.27" data-end="1150.04">properties that you that you defined</span> <span data-start="1150.04" data-end="1152.11">that are relevant to your paint worklet</span> <span data-start="1152.11" data-end="1153.88">and this feature is not a part of the</span> </p>
<p><span data-start="1153.88" data-end="1156.97">CSS paint API but rather another feature</span> <span data-start="1156.97" data-end="1159.76">called the the custom properties or</span> <span data-start="1159.76" data-end="1161.91">maybe just properties and values API</span> <span data-start="1161.91" data-end="1166.15">seriously so let's go back to the CSS</span> <span data-start="1166.15" data-end="1168.1">for the flashy paint worklet example</span> <span data-start="1168.1" data-end="1169.33">from earlier</span> <span data-start="1169.33" data-end="1171.94">what would the CSS for this look like if</span> <span data-start="1171.94" data-end="1173.95">we could customize an aspect of its</span> <span data-start="1173.95" data-end="1175.47">appearance through a custom property</span> <span data-start="1175.47" data-end="1177.73">kind of something like this like if what</span> <span data-start="1177.73" data-end="1179.23">if we wanted to control the size of the</span> <span data-start="1179.23" data-end="1181.48">of the sun's radius right make that</span> <span data-start="1181.48" data-end="1185.02">circle bigger if we wanted to well the</span> <span data-start="1185.02" data-end="1186.37">the properties starting with double</span> <span data-start="1186.37" data-end="1188.56">dashes is a custom property and when we</span> <span data-start="1188.56" data-end="1191.05">set custom CSS properties on elements</span> <span data-start="1191.05" data-end="1193.27">using a paint worklet we can access</span> <span data-start="1193.27" data-end="1196.03">those values within that paint worklet</span> <span data-start="1196.03" data-end="1198.58">and now this is where the power and</span> <span data-start="1198.58" data-end="1200.86">practicality lies with this technology</span> <span data-start="1200.86" data-end="1202.39">because if a paint work</span> <span data-start="1202.39" data-end="1204.61">rendering can't be influenced by</span> <span data-start="1204.61" data-end="1206.95">anything outside of the worklet code</span> <span data-start="1206.95" data-end="1210.04">itself you'd have to change your worklet</span> <span data-start="1210.04" data-end="1212.92">code every freakin time you wanted it to</span> <span data-start="1212.92" data-end="1214.9">do something different or you'd have to</span> <span data-start="1214.9" data-end="1216.55">make multiple versions of that same</span> <span data-start="1216.55" data-end="1218.47">worklet in order to customize its</span> <span data-start="1218.47" data-end="1220.48">appearance in CSS and that's just</span> <span data-start="1220.48" data-end="1223.69">wasteful custom properties help us to</span> <span data-start="1223.69" data-end="1225.91">make paint worklets infinitely more</span> <span data-start="1225.91" data-end="1229.45">useful and reusable and they're like the</span> <span data-start="1229.45" data-end="1231.22">hook and a good song that like just in a</span> <span data-start="1231.22" data-end="1233.11">really good banging song that just makes</span> <span data-start="1233.11" data-end="1236.68">it even better so the next step is to</span> <span data-start="1236.68" data-end="1238.21">use a little thing called the properties</span> <span data-start="1238.21" data-end="1240.43">and values API to establish the identity</span> <span data-start="1240.43" data-end="1243.28">and shape of a custom property property</span> <span data-start="1243.28" data-end="1244.96">in your application JavaScript like you</span> <span data-start="1244.96" data-end="1246.46">would put this on the main thread in</span> <span data-start="1246.46" data-end="1248.35">your app code and even though it's not</span> <span data-start="1248.35" data-end="1251.29">strictly necessary to do this it's not a</span> <span data-start="1251.29" data-end="1253.75">bad idea for a few reasons for one you</span> <span data-start="1253.75" data-end="1255.73">can control what the data type is for</span> <span data-start="1255.73" data-end="1257.38">the custom property via the syntax</span> <span data-start="1257.38" data-end="1259.36">setting in this case you can see that</span> <span data-start="1259.36" data-end="1261.4">we're specifying the property's value as</span> <span data-start="1261.4" data-end="1263.59">an integer the value we set here is</span> <span data-start="1263.59" data-end="1266.32">called a CSS syntax string and it helps</span> <span data-start="1266.32" data-end="1268.21">the API to enforce what's considered a</span> <span data-start="1268.21" data-end="1270.64">valid value for a given custom property</span> <span data-start="1270.64" data-end="1274.06">and two we can decide whether or not the</span> <span data-start="1274.06" data-end="1276.13">value for this property can be inherited</span> <span data-start="1276.13" data-end="1278.17">by child elements using the inherits</span> <span data-start="1278.17" data-end="1278.68">option</span> </p>
<p><span data-start="1278.68" data-end="1280.3">I haven't found exactly where this is</span> <span data-start="1280.3" data-end="1281.98">useful yet for paint worklets but I'm</span> <span data-start="1281.98" data-end="1284.44">sure it's there somewhere I mean it's</span> <span data-start="1284.44" data-end="1286.36">it's specified I'm sure it's useful and</span> <span data-start="1286.36" data-end="1288.61">three we decide what the properties</span> <span data-start="1288.61" data-end="1291.13">default value should be via the initial</span> <span data-start="1291.13" data-end="1293.17">value option if that property is</span> <span data-start="1293.17" data-end="1294.91">unspecified so that's kind of useful</span> <span data-start="1294.91" data-end="1296.92">because properties have defaults that</span> <span data-start="1296.92" data-end="1298.24">just sort of kick in if you don't</span> <span data-start="1298.24" data-end="1300.13">specify them so we can do the same thing</span> <span data-start="1300.13" data-end="1303.28">with our custom properties so what does</span> <span data-start="1303.28" data-end="1304.96">it look like well you want paint</span> <span data-start="1304.96" data-end="1307.78">worklets to access those custom property</span> <span data-start="1307.78" data-end="1310.75">values it's not too owners really it's</span> <span data-start="1310.75" data-end="1313.96">just a two-step process the first is to</span> <span data-start="1313.96" data-end="1316.06">add a static getter method to your</span> <span data-start="1316.06" data-end="1318.09">worklet class called input properties</span> <span data-start="1318.09" data-end="1320.83">which returns an array of all the custom</span> <span data-start="1320.83" data-end="1322.51">properties that we've registered and</span> <span data-start="1322.51" data-end="1325.54">then in the worklet we can access these</span> <span data-start="1325.54" data-end="1327.04">properties through a third argument in</span> <span data-start="1327.04" data-end="1329.86">the paint method signature called</span> <span data-start="1329.86" data-end="1333.16">properties unsurprisingly the arguments</span> <span data-start="1333.16" data-end="1334.87">get method allows access</span> <span data-start="1334.87" data-end="1336.7">to the custom property values passed in</span> </p>
<p><span data-start="1336.7" data-end="1339.43">CSS here you can see that we like we</span> <span data-start="1339.43" data-end="1341.74">pull it and then we cast it to an int I</span> <span data-start="1341.74" data-end="1343.87">don't think the property properties and</span> <span data-start="1343.87" data-end="1346.24">values API is at candid candidate</span> <span data-start="1346.24" data-end="1348.01">recommendation so that might actually</span> <span data-start="1348.01" data-end="1350.77">not be the final code for what that</span> <span data-start="1350.77" data-end="1352.6">looks like</span> <span data-start="1352.6" data-end="1354.28">but then we get it in there and then at</span> <span data-start="1354.28" data-end="1355.84">this point we can then control the paint</span> <span data-start="1355.84" data-end="1358.45">worklets presentation entirely with CSS</span> <span data-start="1358.45" data-end="1360.81">and what we can achieve with this is</span> <span data-start="1360.81" data-end="1363.13">super duper powerful when we</span> <span data-start="1363.13" data-end="1365.86">parameterize paint worklets we make them</span> <span data-start="1365.86" data-end="1367.63">customizable in ways we didn't even</span> <span data-start="1367.63" data-end="1369.61">think was possible and here you can see</span> <span data-start="1369.61" data-end="1371.5">that we can dynamically change the tile</span> <span data-start="1371.5" data-end="1374.95">size of the blotto worklets output like</span> <span data-start="1374.95" data-end="1377.2">we can on we can change the color as</span> <span data-start="1377.2" data-end="1378.67">well as other influential properties</span> <span data-start="1378.67" data-end="1380.71">like the amplitude the maximum o path</span> <span data-start="1380.71" data-end="1383.47">opacity like the blend modes and stuff</span> <span data-start="1383.47" data-end="1386.79">it's pretty cool we can make them fit</span> <span data-start="1386.79" data-end="1388.69">practically anywhere and that's the</span> <span data-start="1388.69" data-end="1390.49">beauty of generative artwork applied in</span> <span data-start="1390.49" data-end="1392.53">this context it's one thing to generate</span> <span data-start="1392.53" data-end="1393.91">art with JavaScript we've been doing</span> <span data-start="1393.91" data-end="1396.01">that for a long time it's an entirely</span> <span data-start="1396.01" data-end="1397.78">different thing to control it in this</span> <span data-start="1397.78" data-end="1400.48">fashion and you can do it without having</span> <span data-start="1400.48" data-end="1403.14">to tweak more than a couple properties</span> <span data-start="1403.14" data-end="1405.88">so now that I've showed you all the cool</span> <span data-start="1405.88" data-end="1409.57">stuff it's time I inform you of the</span> <span data-start="1409.57" data-end="1412.51">unfortunate yet entirely predictable</span> <span data-start="1412.51" data-end="1414.4">reality that you must eat your</span> <span data-start="1414.4" data-end="1418.54">vegetables by which I mean it's time to</span> <span data-start="1418.54" data-end="1420.28">tell your paint to tell you that paint</span> <span data-start="1420.28" data-end="1421.69">worklets don't have solid browser</span> <span data-start="1421.69" data-end="1424.75">support and that therefore that means</span> <span data-start="1424.75" data-end="1426.16">you must treat them as a progressive</span> <span data-start="1426.16" data-end="1428.38">enhancement and you'll need a back-up</span> <span data-start="1428.38" data-end="1428.83">plan</span> <span data-start="1428.83" data-end="1430.3">right so that's a lot of what we do on</span> <span data-start="1430.3" data-end="1432.37">the web is feel like my official title</span> <span data-start="1432.37" data-end="1434.14">is like back-up plan</span> <span data-start="1434.14" data-end="1438.25">guy for everything furthermore because</span> <span data-start="1438.25" data-end="1440.74">paint worklets are JavaScript you need</span> <span data-start="1440.74" data-end="1441.58">that back-up plan</span> <span data-start="1441.58" data-end="1444.13">even in browsers that do support them so</span> <span data-start="1444.13" data-end="1445.69">support isn't terrible for the painting</span> </p>
<p><span data-start="1445.69" data-end="1446.77">API when you look at the bigger picture</span> <span data-start="1446.77" data-end="1449.38">in fact it's only one that's the only</span> <span data-start="1449.38" data-end="1451.24">part of Houdini that currently is at the</span> <span data-start="1451.24" data-end="1453.37">candidate recommendation stage at least</span> <span data-start="1453.37" data-end="1455.68">at the time of this tables rendering but</span> <span data-start="1455.68" data-end="1457.66">support for it just isn't universal so</span> <span data-start="1457.66" data-end="1459.73">you need to know how to adapt and that</span> <span data-start="1459.73" data-end="1460.99">said you shouldn't have to break your</span> <span data-start="1460.99" data-end="1463.78">back to provide a fallback because CSS</span> <span data-start="1463.78" data-end="1466.66">itself can usually solve this the thing</span> <span data-start="1466.66" data-end="1468.74">to remember about resiliency</span> <span data-start="1468.74" data-end="1471.679">when using the CSS pain API is that the</span> <span data-start="1471.679" data-end="1474.289">order in which we specify CSS properties</span> <span data-start="1474.289" data-end="1475.97">matters and that is what is going to</span> <span data-start="1475.97" data-end="1476.57">save you</span> <span data-start="1476.57" data-end="1479.029">going this route is usually enough for a</span> <span data-start="1479.029" data-end="1481.549">fallback browsers that understand this</span> </p>
<p><span data-start="1481.549" data-end="1484.76">API will use the second rule but those</span> <span data-start="1484.76" data-end="1486.98">that don't will fall back to the first</span> <span data-start="1486.98" data-end="1488.96">occurrence of that rule that they</span> <span data-start="1488.96" data-end="1490.97">consider to be valid and in this case a</span> <span data-start="1490.97" data-end="1493.61">browser like say Firefox which doesn't</span> <span data-start="1493.61" data-end="1495.02">support paint worklets yet but it's</span> <span data-start="1495.02" data-end="1497.809">coming will fall back to the first rule</span> <span data-start="1497.809" data-end="1499.58">and most of the time this approach is</span> <span data-start="1499.58" data-end="1501.409">enough the idea is that your fallback</span> <span data-start="1501.409" data-end="1503.809">should resemble the paintwork tlit like</span> <span data-start="1503.809" data-end="1505.61">someone right it doesn't usually have to</span> <span data-start="1505.61" data-end="1506.929">be much more than an approximation</span> <span data-start="1506.929" data-end="1508.76">because it's it's pretty rare that like</span> <span data-start="1508.76" data-end="1510.71">somebody would see both renderings of</span> <span data-start="1510.71" data-end="1512.899">like the fallback and the paintwork lid</span> <span data-start="1512.899" data-end="1515.99">itself like next to each other so to</span> <span data-start="1515.99" data-end="1517.37">illustrate this is my personal website</span> <span data-start="1517.37" data-end="1519.679">in chrome with the paint worklet used in</span> <span data-start="1519.679" data-end="1520.909">the backgrounds of different sections</span> <span data-start="1520.909" data-end="1522.62">it's just like that kind of slapdash</span> <span data-start="1522.62" data-end="1525.049">paintwork look that I had and now here</span> <span data-start="1525.049" data-end="1526.73">it is in a browser that doesn't and it's</span> <span data-start="1526.73" data-end="1529.19">not exactly the same but it's a</span> <span data-start="1529.19" data-end="1531.07">reasonable like kind of approximation</span> <span data-start="1531.07" data-end="1533.6">and it works well enough and just be</span> <span data-start="1533.6" data-end="1534.86">sure that you're optimizing your</span> <span data-start="1534.86" data-end="1536.69">fallback images that's the perf guy</span> <span data-start="1536.69" data-end="1538.34">within me just can't help but tell you</span> <span data-start="1538.34" data-end="1541.22">to do that if possible try to create</span> <span data-start="1541.22" data-end="1543.35">like tileable smaller patterns to keep</span> <span data-start="1543.35" data-end="1544.97">those fallback images as small as</span> <span data-start="1544.97" data-end="1547.1">possible because simple paint worklets</span> <span data-start="1547.1" data-end="1549.169">will usually just be smaller over the</span> <span data-start="1549.169" data-end="1552.409">wire than images now for another</span> <span data-start="1552.409" data-end="1554.75">question what if a paint work look just</span> <span data-start="1554.75" data-end="1556.61">like fails to load for whatever reason</span> <span data-start="1556.61" data-end="1558.559">and this is where promises are your</span> <span data-start="1558.559" data-end="1560.539">friend you might recall that in order to</span> <span data-start="1560.539" data-end="1562.94">load a paint work lift we have access to</span> <span data-start="1562.94" data-end="1565.09">a promise when it completely loads or</span> <span data-start="1565.09" data-end="1568.61">conversely when it fails to load and in</span> <span data-start="1568.61" data-end="1570.71">this case we can compensate for this in</span> <span data-start="1570.71" data-end="1573.59">the promises catch method which executes</span> <span data-start="1573.59" data-end="1575.24">if the promise was rejected in this case</span> <span data-start="1575.24" data-end="1576.86">if the paint work lead failed to load</span> <span data-start="1576.86" data-end="1578.809">for some reason and if it does fail we</span> <span data-start="1578.809" data-end="1580.37">can add a class the body element which</span> <span data-start="1580.37" data-end="1582.649">we can then target with CSS to provide a</span> <span data-start="1582.649" data-end="1585.01">fallback</span> <span data-start="1585.02" data-end="1586.88">that's the SS would look something like</span> <span data-start="1586.88" data-end="1588.35">this although that's a little weird</span> </p>
<p><span data-start="1588.35" data-end="1591.289">I said body element so work with me with</span> <span data-start="1591.289" data-end="1592.85">that inconsistency imagine it was</span> <span data-start="1592.85" data-end="1596.21">applied to the element itself instead in</span> <span data-start="1596.21" data-end="1597.47">the event that the paint work click</span> <span data-start="1597.47" data-end="1599.51">fails to load we would still get a stall</span> <span data-start="1599.51" data-end="1601.1">back background image that we can still</span> <span data-start="1601.1" data-end="1602.54">use and it's important to note that</span> <span data-start="1602.54" data-end="1604.61">least in chrome if a paint worklet fails</span> <span data-start="1604.61" data-end="1607.22">to load the CSS only fallback for non</span> <span data-start="1607.22" data-end="1608.81">supporting browsers described earlier</span> <span data-start="1608.81" data-end="1611.9">will not kick in because that it still</span> <span data-start="1611.9" data-end="1613.55">considers that paint syntax to be a</span> <span data-start="1613.55" data-end="1615.41">valid value but that worklet hasn't</span> <span data-start="1615.41" data-end="1616.49">loaded so you have to have a more</span> <span data-start="1616.49" data-end="1619.07">specific rule to make that work so</span> <span data-start="1619.07" data-end="1620.51">you'll need to provide an explicit</span> <span data-start="1620.51" data-end="1622.16">fallback otherwise you just you'll just</span> <span data-start="1622.16" data-end="1625.64">won't have a background at all okay most</span> <span data-start="1625.64" data-end="1627.11">of the talks I give are about</span> <span data-start="1627.11" data-end="1628.76">performance and I thought maybe I could</span> <span data-start="1628.76" data-end="1630.74">get through this one without any perf</span> <span data-start="1630.74" data-end="1634.91">talk but I was wrong it turns out that</span> <span data-start="1634.91" data-end="1637.16">there's a couple things to keep in mind</span> <span data-start="1637.16" data-end="1638.81">when it comes to keeping your paint work</span> <span data-start="1638.81" data-end="1640.97">looks fast as well as being considerate</span> <span data-start="1640.97" data-end="1642.2">with what with what can be a rather</span> <span data-start="1642.2" data-end="1644.42">taxing API if it's not used carefully</span> <span data-start="1644.42" data-end="1646.34">because if you don't you risk making the</span> <span data-start="1646.34" data-end="1649.46">internet more like this for people so</span> <span data-start="1649.46" data-end="1651.71">let's avoid that and talk about what you</span> <span data-start="1651.71" data-end="1653.75">can do to make paint work let's work as</span> <span data-start="1653.75" data-end="1656.57">optimally as they can because of their</span> <span data-start="1656.57" data-end="1658.82">restricted scope paint worklets won't</span> <span data-start="1658.82" data-end="1661.13">often be very large the ones I've</span> <span data-start="1661.13" data-end="1662.45">written usually end up being less than</span> <span data-start="1662.45" data-end="1665.78">two kilobytes before compression but if</span> <span data-start="1665.78" data-end="1667.64">you can help it do not run your</span> <span data-start="1667.64" data-end="1670.58">paintwork le'ts through Babel that is no</span> <span data-start="1670.58" data-end="1674.45">nose no so let's look at the impact as</span> <span data-start="1674.45" data-end="1676.58">an example that Babel transforms have by</span> <span data-start="1676.58" data-end="1678.29">taking the circuitry worklet from the</span> <span data-start="1678.29" data-end="1680.12">beginning of this talk even when it's uh</span> <span data-start="1680.12" data-end="1681.71">notified it's very small and it also</span> <span data-start="1681.71" data-end="1682.94">works in every browser that supports</span> <span data-start="1682.94" data-end="1685.97">paint worklets without babbles help</span> <span data-start="1685.97" data-end="1687.92">paint work 'let's do not need to be</span> <span data-start="1687.92" data-end="1690.43">transformed in order for them to work</span> <span data-start="1690.43" data-end="1693.2">now here's that same worklet after babel</span> <span data-start="1693.2" data-end="1694.94">transforms it and if you can't read this</span> <span data-start="1694.94" data-end="1696.29">code that's kind of the point there's a</span> <span data-start="1696.29" data-end="1698.54">lot of cruft here which affects parsing</span> <span data-start="1698.54" data-end="1701.06">compilation and execution time and the</span> <span data-start="1701.06" data-end="1702.89">omnipresent question of web development</span> <span data-start="1702.89" data-end="1704.99">seems to inevitably be should this work</span> <span data-start="1704.99" data-end="1707.03">in every browser and in this case there</span> <span data-start="1707.03" data-end="1711.41">are two answers no and hell no the Omni</span> <span data-start="1711.41" data-end="1713.6">from the paint worklets aren't supported</span> <span data-start="1713.6" data-end="1716.33">in all modern browsers yet so we don't</span> <span data-start="1716.33" data-end="1717.8">need to treat them with the web</span> <span data-start="1717.8" data-end="1719.9">compatibility mindset that we clung to</span> <span data-start="1719.9" data-end="1722.93">in the 2000s if you must must</span> <span data-start="1722.93" data-end="1724.76">if you must cut processed paint worklets</span> <span data-start="1724.76" data-end="1726.53">with babel perhaps out of a matter of</span> <span data-start="1726.53" data-end="1728.15">convenience and i can understand and</span> <span data-start="1728.15" data-end="1729.74">sure you know how to configure it to</span> <span data-start="1729.74" data-end="1731.72">minimize transforms I tend to avoid</span> <span data-start="1731.72" data-end="1733.73">including them in the asset graph of any</span> <span data-start="1733.73" data-end="1735.399">bundler until I know</span> <span data-start="1735.399" data-end="1737.2">be able to process them the way I expect</span> <span data-start="1737.2" data-end="1739.359">and this last piece of perfect base I</span> <span data-start="1739.359" data-end="1741.19">have is to be considerate of your users</span> <span data-start="1741.19" data-end="1742.809">particularly mobile ones</span> <span data-start="1742.809" data-end="1745.96">not everyone has a pixel 3 or a 20 18</span> <span data-start="1745.96" data-end="1747.879">macbook pro that can obliterate whatever</span> <span data-start="1747.879" data-end="1748.929">comes down the rendering pipeline</span> <span data-start="1748.929" data-end="1751.149">without turning into a fully functioning</span> <span data-start="1751.149" data-end="1752.669">panini grill</span> <span data-start="1752.669" data-end="1755.139">so when paint work let's draw in normal</span> <span data-start="1755.139" data-end="1757.21">scenarios such as unload or when the</span> <span data-start="1757.21" data-end="1758.95">orientation of the device changes they</span> <span data-start="1758.95" data-end="1760.479">can be resource intensive but not</span> <span data-start="1760.479" data-end="1763.299">ludicrously so but that does not mean</span> <span data-start="1763.299" data-end="1765.309">that even though worklets do their work</span> <span data-start="1765.309" data-end="1766.989">off the main thread like web workers</span> <span data-start="1766.989" data-end="1768.309">that they can't impact page</span> <span data-start="1768.309" data-end="1770.469">responsiveness this screenshot is from a</span> <span data-start="1770.469" data-end="1771.999">performance profiling session where a</span> <span data-start="1771.999" data-end="1774.609">browser was continuously resizing and a</span> <span data-start="1774.609" data-end="1776.58">paint worklet was redrawing every time</span> <span data-start="1776.58" data-end="1779.799">they worklets will redraw any time the</span> <span data-start="1779.799" data-end="1781.299">dimensions of their container change or</span> <span data-start="1781.299" data-end="1782.979">if CSS properties on that container</span> <span data-start="1782.979" data-end="1785.32">change so please resist the temptation</span> <span data-start="1785.32" data-end="1786.969">to like do stuff like make them redraw</span> <span data-start="1786.969" data-end="1789.039">constantly to like make them like</span> <span data-start="1789.039" data-end="1791.499">animate inefficiently or otherwise for</span> <span data-start="1791.499" data-end="1794.169">no real sensible reason and additionally</span> <span data-start="1794.169" data-end="1795.999">make a call on when it's not appropriate</span> <span data-start="1795.999" data-end="1797.919">to use these things we can't look at the</span> <span data-start="1797.919" data-end="1799.21">device's battery levels since the</span> <span data-start="1799.21" data-end="1801.429">battery status API is no longer a thing</span> <span data-start="1801.429" data-end="1803.649">but we do have another signal we can</span> <span data-start="1803.649" data-end="1805.57">look at and that is the device memory</span> </p>
<p><span data-start="1805.57" data-end="1807.249">API the amount of memory that the</span> <span data-start="1807.249" data-end="1808.719">approximate amount of memory that the</span> <span data-start="1808.719" data-end="1810.759">device has and as usual it's not</span> <span data-start="1810.759" data-end="1813.519">supported everywhere but checking for</span> <span data-start="1813.519" data-end="1815.469">support is as trivial as seeing if</span> <span data-start="1815.469" data-end="1817.389">navigator dot device memory is defined</span> <span data-start="1817.389" data-end="1819.039">and if it is we can get the course</span> <span data-start="1819.039" data-end="1820.989">amount of memory and here we've decided</span> <span data-start="1820.989" data-end="1824.889">that if a device has at least 4</span> <span data-start="1824.889" data-end="1826.389">gigabytes or more of memory we'll</span> <span data-start="1826.389" data-end="1827.95">register that paint worklet and then we</span> <span data-start="1827.95" data-end="1829.719">can or otherwise we can like do the</span> <span data-start="1829.719" data-end="1831.429">class hook where we decide to go to a</span> <span data-start="1831.429" data-end="1834.46">fallback and in any case if you're</span> <span data-start="1834.46" data-end="1835.749">concerned that any part of your paint</span> <span data-start="1835.749" data-end="1837.07">where click code is inefficient</span> <span data-start="1837.07" data-end="1839.559">anyway if you profile in chrome dev</span> <span data-start="1839.559" data-end="1841.269">tools in the performance profiler and</span> <span data-start="1841.269" data-end="1843.039">then after that go to the sources tab</span> <span data-start="1843.039" data-end="1845.83">you can see the impact of each line like</span> <span data-start="1845.83" data-end="1847.96">how much execution time and then you can</span> <span data-start="1847.96" data-end="1850.029">just decide whether or not that you want</span> <span data-start="1850.029" data-end="1852.249">to address any suboptimal behavior if</span> <span data-start="1852.249" data-end="1857.229">you can well it's that time but before I</span> <span data-start="1857.229" data-end="1858.669">properly part from you all I want to</span> <span data-start="1858.669" data-end="1860.289">call it a few resources I think are well</span> <span data-start="1860.289" data-end="1862.929">worth your time first off you know</span> </p>
<p><span data-start="1862.929" data-end="1864.519">Kravitz has been jamming on paint</span> <span data-start="1864.519" data-end="1866.47">worklets for a long time</span> <span data-start="1866.47" data-end="1868.419">and if you feel like my quick intro to</span> <span data-start="1868.419" data-end="1870.759">the technology just didn't cut it for</span> <span data-start="1870.759" data-end="1871.659">you I understand</span> <span data-start="1871.659" data-end="1874.149">then you Anna's article on the on the AP</span> <span data-start="1874.149" data-end="1876.46">I just cannot fail you she is just it's</span> <span data-start="1876.46" data-end="1878.379">superb at describing these things and</span> <span data-start="1878.379" data-end="1880.36">secondly Sam Richards did a more broadly</span> <span data-start="1880.36" data-end="1882.25">scoped talk on Houdini in general last</span> <span data-start="1882.25" data-end="1884.62">year at CSS conf a you some of what he's</span> <span data-start="1884.62" data-end="1886.059">talked about there may have changed a</span> <span data-start="1886.059" data-end="1888.129">bit since as Houdini is evolving but</span> <span data-start="1888.129" data-end="1889.69">it's still a great talk for anyone who</span> <span data-start="1889.69" data-end="1891.669">wants to know more about this awesome</span> <span data-start="1891.669" data-end="1893.049">set of API is that are coming down the</span> <span data-start="1893.049" data-end="1895.659">pike and now remember when I said there</span> <span data-start="1895.659" data-end="1898.419">was a surprise here it is if you're</span> <span data-start="1898.419" data-end="1900.159">interested in seeing an open source</span> <span data-start="1900.159" data-end="1901.84">showcase of the paintwork let's I've</span> <span data-start="1901.84" data-end="1903.7">written you can check out a site I've</span> <span data-start="1903.7" data-end="1906.22">made called paint lets its paint let's</span> <span data-start="1906.22" data-end="1908.59">go Roku app calm but I got a little tiny</span> </p>
<p><span data-start="1908.59" data-end="1911.08">URL thing there and I'll post the slide</span> <span data-start="1911.08" data-end="1913.629">deck later this will show each paint</span> <span data-start="1913.629" data-end="1915.85">worklet and it's custom properties so</span> <span data-start="1915.85" data-end="1917.32">you can experiment with each one and</span> <span data-start="1917.32" data-end="1918.49">they're free to download you can just</span> <span data-start="1918.49" data-end="1920.2">use them if you want I don't care if you</span> <span data-start="1920.2" data-end="1921.34">credit them I don't care what you do</span> <span data-start="1921.34" data-end="1924.7">with them and Plus each paint workflow</span> <span data-start="1924.7" data-end="1928.299">yeah I just said that so and if you have</span> <span data-start="1928.299" data-end="1929.71">a paintwork look that you've written</span> <span data-start="1929.71" data-end="1932.649">that you think is pretty cool I welcome</span> <span data-start="1932.649" data-end="1934.179">you to submit a pull request to the repo</span> <span data-start="1934.179" data-end="1935.799">or just show it to me and I can and I</span> <span data-start="1935.799" data-end="1937.389">can pull it in for you because I'm kind</span> <span data-start="1937.389" data-end="1939.519">of picky about how that gets done so if</span> <span data-start="1939.519" data-end="1941.95">you'd like want that cool let's let's</span> <span data-start="1941.95" data-end="1943.96">talk there's I'll post this you'll know</span> <span data-start="1943.96" data-end="1945.97">where this is all at pretty soon and of</span> <span data-start="1945.97" data-end="1947.379">course at the time I thought I was being</span> <span data-start="1947.379" data-end="1948.549">a clever little</span> <span data-start="1948.549" data-end="1950.289">when I wrote paint   let's but it</span> <span data-start="1950.289" data-end="1952.029">unsurprisingly turns out that someone</span> <span data-start="1952.029" data-end="1954.73">had the same idea and before I did and</span> <span data-start="1954.73" data-end="1958.12">that person was not surprisingly Yoona</span> </p>
<p><span data-start="1958.12" data-end="1960.039">Kravitz so if you want a different take</span> <span data-start="1960.039" data-end="1961.96">on the idea check out her extra dot CSS</span> <span data-start="1961.96" data-end="1963.85">site has some cool things that you can</span> <span data-start="1963.85" data-end="1965.5">check out and pull into your project as</span> <span data-start="1965.5" data-end="1967.509">well and with that I thank you for your</span> <span data-start="1967.509" data-end="1970.029">time your interest your everlasting love</span> <span data-start="1970.029" data-end="1971.83">of all things web which gives me no</span> <span data-start="1971.83" data-end="1973.99">shortage of hope and admiration for this</span> <span data-start="1973.99" data-end="1976.019">community and for welcoming me into your</span> <span data-start="1976.019" data-end="1978.639">amazingly beautiful and historically</span> <span data-start="1978.639" data-end="1981.519">awesome city here are my slides which</span> <span data-start="1981.519" data-end="1984.279">will be available at that URL hopefully</span> <span data-start="1984.279" data-end="1987.009">shortly if I can get Wi-Fi thing figured</span> <span data-start="1987.009" data-end="1987.49">out</span> <span data-start="1987.49" data-end="1990.79">and uh thank you all so very very much</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
