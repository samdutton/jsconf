<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MdcD1rNkNLE</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/MdcD1rNkNLE?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="1.43" data-end="26.34">Hello everyone, this is my first time at JSConf, I'm really excited to be here and talk to</span> <span data-start="26.34" data-end="32.94">you about servicerless apps powered by web components, I just want to give a bit of context,</span> <span data-start="32.94" data-end="40.14">I work for guardian as a senior engineer, and I work on editorialial tools, which is</span> <span data-start="40.14" data-end="45.86">the main two being the new guard yawn CMS called composer and the new media service</span> <span data-start="45.86" data-end="52.95">for managing images, these are all built as web apps, three tiered architecture, which</span> <span data-start="52.95" data-end="58.84">is this one, that means you is a front end, at the front, which is the browser, and your</span> <span data-start="58.84" data-end="63.51">code running in the browser, so typically we use Angular JS for that, then the back</span> <span data-start="63.51" data-end="69.43">end, which is the code running of your servers, for that we usually use skyline, city natura,</span> <span data-start="69.43" data-end="74.6">play, finally the data is store in the the database, we use elastic search, Mongo and</span> <span data-start="74.6" data-end="79.25">other things, these are typically referred to as presentation\h‑‑ let me turn that</span> <span data-start="79.25" data-end="82.52">off, that's going to annoy me, people tweeting me.</span> <span data-start="82.52" data-end="88.01">Presentation, middle tier and data storage, this is what we're going to refer to in the</span> <span data-start="88.01" data-end="92.34">rest of the presentation, keep that in mind.</span> </p>
<p><span data-start="92.34" data-end="96.42">The idea for this talk came in about a few months back when I started getting increasingly</span> <span data-start="96.42" data-end="103.03">jealous of this information\h‑‑ that my colleague built, the responsetive front end</span> <span data-start="103.03" data-end="110.29">site shows a lot of information about the health of the server, key system metrics,</span> <span data-start="110.29" data-end="116.25">KPIs, the deployment status, health service, and so on, so that's a really useful thing</span> <span data-start="116.25" data-end="122.67">the too have at the end of your desk, compare to what we had on my team, yeah, it was a</span> <span data-start="122.67" data-end="129.539">bit Meh, so why is it Meh, it's not just bauds it looks a bit shit, it's also complex, it's</span> <span data-start="129.539" data-end="137.459">complex as a user, I had to be on the VPN oaccess it, you can't log in on the VPN on</span> <span data-start="137.459" data-end="142.879">your phone, really tedious, it was also complex as a developer, sometimes you want to change</span> <span data-start="142.879" data-end="148.4">these dashboards, if something goes bad, last week we needed to start monitoring a new cue,</span> <span data-start="148.4" data-end="154.06">it was tedious to add new things to the dashboard, it was deployed somewhere and written in this</span> <span data-start="154.06" data-end="155.06">horrible PHP.</span> </p>
<p><span data-start="155.06" data-end="163.159">The other side of that is it's also very rigid because you only pull data from one source,</span> <span data-start="163.159" data-end="169.269">graphite, which is internal monitoring service, and, also, the configuration was very much</span> <span data-start="169.269" data-end="173.939">mix in the with this horrible PHP that I mentioned which made it hard to edit and manipulate</span> <span data-start="173.939" data-end="177.65">graphs the way I would like to be able to do.</span> <span data-start="177.65" data-end="182.069">When something's not good, you put nit the bin and you say, let's build a better one.</span> <span data-start="182.069" data-end="188.359">So, let's try and build a better one, going back to the architecture I presented earlier,</span> <span data-start="188.359" data-end="193.939">we know that we have the data storage, this is what data is, it can be possibly in graphite,</span> <span data-start="193.939" data-end="198.909">which is occurring, what we had for our more legacy systems, and more and more we're moving</span> <span data-start="198.909" data-end="206.409">towards AWS, Amazon web services, which has it's own monitoring service called Cloud watch,</span> <span data-start="206.409" data-end="210.579">that's what we're going focus on for the rest of the presentation, that's where services</span> <span data-start="210.579" data-end="215.809">are moving, so that's where the data is, and we know that we want to have the presentation,</span> <span data-start="215.809" data-end="220.409">layer display, the graph in your browser, that's what we've got, now, what about this</span> <span data-start="220.409" data-end="223.139">middle tier thing.</span> </p>
<p><span data-start="223.139" data-end="229.999">What happens with it? Do we need it? Well, so, I really love sky dive, more I love not</span> <span data-start="229.999" data-end="235.269">having to write any code or maintain servers that might go down, have to monitor the monitoring,</span> <span data-start="235.269" data-end="241.769">it's boring can we get rid of it? What do we actually need it for in the first place?</span> <span data-start="241.769" data-end="247.06">Traditionally, I think aver if Id three things that you do on the middle tier, the first</span> <span data-start="247.06" data-end="248.709">one is Auth.</span> </p>
<p><span data-start="248.709" data-end="254.349">By that I mean authentication, which is know hog the person is, and then authorization,</span> <span data-start="254.349" data-end="258.31">which is determining what their missions you is in the system.</span> <span data-start="258.31" data-end="263.389">Once you know that they can come in, okay, great, I can query the database on their behalf,</span> <span data-start="263.389" data-end="268.27">and retrieve some data, and once I've got the data, I can just render it.</span> <span data-start="268.27" data-end="271.9">That's the simplest thing that the middle tier does, and that's what wow would do if</span> <span data-start="271.9" data-end="276.86">you implement the any language.</span> <span data-start="276.86" data-end="282.669">Serverring the actual files, maybe caching, serving data, let's leave that on the side</span> <span data-start="282.669" data-end="283.669">for now.</span> <span data-start="283.669" data-end="287.139">So, let's see, can we do all of that on the client instead.</span> <span data-start="287.139" data-end="292.65">Let's say we have an HTML page, and we write all of this in JavaScript.</span> <span data-start="292.65" data-end="295.78">So how do we Saturday? We start with the Auth aspect.</span> <span data-start="295.78" data-end="301.759">Now, AWS gives us nice primitives for that, support this idea of cry didn'tbles that you</span> <span data-start="301.759" data-end="307.4">can create, and then once you have these drew enables, which is a key and a secret, don't</span> <span data-start="307.4" data-end="313.4">try and copy those, they're not real, and, the region, and once you've got that you can</span> <span data-start="313.4" data-end="317.789">define the permissions that they have, so I'm going to define these credentials, all</span> <span data-start="317.789" data-end="321.479">think can do is query Cloud watch, can't spin up new servers and so on, all they can do</span> <span data-start="321.479" data-end="324.639">is read the metrics data.</span> </p>
<p><span data-start="324.639" data-end="330.03">Define them and put them in the page like, this I have my Auth sorted.</span> <span data-start="330.03" data-end="331.03">That's in JavaScript.</span> <span data-start="331.03" data-end="336.03">Now I have my Auth, I'm going to do a query with it.</span> <span data-start="336.03" data-end="344.599">So do that, I'm going to use the AWS JDK, it's Open Source, you can download it.</span> <span data-start="344.599" data-end="349.65">It lets you query the Aws services you yeeuate a new instance of the Cloud watch service</span> <span data-start="349.65" data-end="355.009">with the cree credentials we've passed in earlier, then you can call the method to get</span> <span data-start="355.009" data-end="360.36">method statistics and define what you're querying.</span> </p>
<p><span data-start="360.36" data-end="368.289">Here we're going to look at the request count, in a given load balance or given time, and</span> <span data-start="368.289" data-end="369.289">sum it.</span> <span data-start="369.289" data-end="373.76">And when we do this, asin concurrent resolution nosily we get the response back, that's what</span> <span data-start="373.76" data-end="380.729">we see at the bottom here, that's quite, it's AWS specific, so we might transform that,</span> <span data-start="380.729" data-end="385.379">don't look at this code, basically you transform it into a time series, which a simple array</span> <span data-start="385.379" data-end="391.539">of pairs, and in the pair you got the first item is the time, the event happened at and</span> <span data-start="391.539" data-end="393.5">then the second item is the value.</span> <span data-start="393.5" data-end="395.57">Very simple data structure.</span> </p>
<p><span data-start="395.57" data-end="399.4">So we've got our day the, we have our metrics data, now we fled to render it.</span> <span data-start="399.4" data-end="404.689">I'm lacy, not go dog that myself, just load in Google chat, and write this.</span> <span data-start="404.689" data-end="410.349">It's actually quite, it's quite a lot of boilerplate here, that's what you have to do, that's from</span> <span data-start="410.349" data-end="417.389">the example on the Docs, in the middle here we actually see that we add the rows in the</span> <span data-start="417.389" data-end="423.02">middle of this big blob of JavaScript, and at the end we also say, okay, select this</span> <span data-start="423.02" data-end="425.949">element and then inject the graph in the page.</span> <span data-start="425.949" data-end="428.499">And then we get our graph.</span> <span data-start="428.499" data-end="429.499">That's great, okay.</span> <span data-start="429.499" data-end="432.189">Job done, let's all go to the pub.</span> <span data-start="432.189" data-end="439.24">Not quite, so we fixed the first aspect, it's no longer complex, it's just static HTML page</span> <span data-start="439.24" data-end="446.93">in the browser, there's no VPN crap anymore, no PHP anymore, that's sorted in terms of</span> <span data-start="446.93" data-end="452.9">rigidity we're still pulling from only one data source, now reading from AWS that's still</span> <span data-start="452.9" data-end="457.81">only one, and the configuration was mixed into all this spaghetti code I showed you</span> <span data-start="457.81" data-end="464.659">earlier, that's not very nice, it's not veri' city change graphs quite rapidly.</span> </p>
<p><span data-start="464.659" data-end="470.36">So it's not better enough, so what can we do? What we actually want, ideally is to not</span> <span data-start="470.36" data-end="475.909">have any of this broiler plate, we want to say I want this graph of request, and, well,</span> <span data-start="475.909" data-end="481.46">that's sounds very much like an element, right? Can we do that with an element? So, I'm sure</span> <span data-start="481.46" data-end="483.74">hopefully you know where I'm going with this.</span> <span data-start="483.74" data-end="489.76">Web components who in the room has heard of web components? Cool.</span> <span data-start="489.76" data-end="495.039">Who has tried web components? Quite a lot, great.</span> <span data-start="495.039" data-end="501.18">So, quick primer, so, web component is this idea of custom element, so you can say there's</span> <span data-start="501.18" data-end="507.58">this Google map element that will show a map of this Geo position, okay, if you put this</span> <span data-start="507.58" data-end="511.409">in your browser it's not going to work magically, right, it's not going do anything.</span> <span data-start="511.409" data-end="517.61">How does it work? The idea of web components you can teach the browser how to do\h‑‑</span> <span data-start="517.61" data-end="521.33">what to do with this when you see in in the page, you can define the behavior when you</span> <span data-start="521.33" data-end="525.57">see custom element and make it do anything you want.</span> <span data-start="525.57" data-end="527.73">All of this you program in JavaScript.</span> <span data-start="527.73" data-end="533.66">So, once you've defined\h‑‑ once you've written the code for this, so that it's in</span> <span data-start="533.66" data-end="538.32">the scope, this is like you import the style sheets to sort of change the presentation</span> <span data-start="538.32" data-end="543.99">of your page, this is simply using the HTML import, once you have that, well, actually</span> <span data-start="543.99" data-end="550.3">all of this, in fact it doesn't really, kind of using futuristic APIs, you need to use</span> <span data-start="550.3" data-end="557.79">poly fills, I will use platform JS, live Google rewrite to port all the Google APIs to the</span> <span data-start="557.79" data-end="561.47">current browser.</span> </p>
<p><span data-start="561.47" data-end="567.1">If HTML element is your classic Lggo blocks, this is like the Lego mind Storm, you can</span> <span data-start="567.1" data-end="568.69">do anything.</span> <span data-start="568.69" data-end="577.04">We're going to use web components we're going to lay polymer on top of this, on top of platform</span> <span data-start="577.04" data-end="583.22">J S, you don't have to use it to use web components you can use X tag from Mozilla if you prefer.</span> <span data-start="583.22" data-end="590.05">Let's use polymer it has a few niceties such as these elements scaffolding, the clarity</span> <span data-start="590.05" data-end="598.829">of sin tack, we've seen this example we just import polymers, so we can use the polymers</span> <span data-start="598.829" data-end="603.72">element to define new element called Margarita, it takes one attribute\h‑‑ my greeter\h‑‑</span> <span data-start="603.72" data-end="612.85">and we have a tag my greeter, tag many my name, as an attribute.</span> <span data-start="612.85" data-end="616.899">We see that the template that this is what the\h‑‑ we're going to put in the shad</span> <span data-start="616.899" data-end="625.139">come DOM, basically it's what's going to appear ton page instead of the my greeter element,</span> <span data-start="625.139" data-end="629.85">and it's going to say hello and then my name, this is the day the binding syntax, so polymers</span> <span data-start="629.85" data-end="636.36">supports data binding, which meanness that it's going to replace the name, sort of curly</span> <span data-start="636.36" data-end="643.59">thing with the value of the at try bud, here Seb, and because it's bidirectional, you can</span> <span data-start="643.59" data-end="648.68">also bind it to this input text, where it's going to give the initial value to the input</span> <span data-start="648.68" data-end="653.98">text Seb, if you change it ill will change it everywhere for this variable.</span> <span data-start="653.98" data-end="654.98">That's powerful.</span> </p>
<p><span data-start="654.98" data-end="658.3">And we're going to use it throughout the rest of this presentation.</span> <span data-start="658.3" data-end="661.759">Okay, so, will's dive in.</span> <span data-start="661.759" data-end="664.399">Or not ..</span> <span data-start="664.399" data-end="669.68">oh, here we go.</span> <span data-start="669.68" data-end="672.87">So we've got this Aws con fig element.</span> </p>
<p><span data-start="672.87" data-end="676.82">We've created a few element AWS‑Config.</span> <span data-start="676.82" data-end="681.459">It takes three attributes, region key and secret.</span> <span data-start="681.459" data-end="685.889">We just pass in key values to the at try brute.</span> <span data-start="685.889" data-end="691.079">What do these elements do? Nothing, not useful.</span> <span data-start="691.079" data-end="698.16">Nothing to display, it's just a configuration thing, what do we cowith it? We add a new</span> <span data-start="698.16" data-end="704.63">attribute, we call it Sync, an at try brute we're going to write out what sort of the</span> <span data-start="704.63" data-end="713.6">out put of the element is as data here we're going to out put to AWS‑Co infig, which</span> <span data-start="713.6" data-end="719.75">is what we had earlier in the JavaScript, so actually, if you go to the implementation</span> <span data-start="719.75" data-end="722.42">it looks similar to what we did earlier.</span> <span data-start="722.42" data-end="730.27">We load in polymers, A W S‑Config with four attributes then I declare how this element</span> <span data-start="730.27" data-end="735.87">works, I'm observing the first three attributes, the first three inputs, when ever any of it</span> <span data-start="735.87" data-end="737.72">changes I'm going to update.</span> </p>
<p><span data-start="737.72" data-end="742.42">I'm also going to update when the element is ready, it's been put in the page.</span> <span data-start="742.42" data-end="747.579">What does update do? It just checks that the three inputs are there, if they R.</span> <span data-start="747.579" data-end="752.05">create a new object and write it\h‑‑ sort of assign it to the same property which will</span> <span data-start="752.05" data-end="754.88">basically set it to this variable that we day bound.</span> <span data-start="754.88" data-end="761.329">So, I have this element, by the way, all of this is Open Source, it's GitHub, so you can</span> <span data-start="761.329" data-end="765.889">play with this, you can just make your own.</span> <span data-start="765.889" data-end="770.71">So we've got our credentials now as a variable, so we can pass it in to this Cloud watch element,</span> <span data-start="770.71" data-end="776.85">extract same JavaScript element we had earlier, which, does the querying using the SDK, not</span> <span data-start="776.85" data-end="781.819">going show you the code for that, basically we have this element that takes the con give</span> <span data-start="781.819" data-end="788.83">as input, it's going to have it's own sing attribute that will write asin concurrent</span> <span data-start="788.83" data-end="794.63">resolution nosily when the day the comes back, write the into the variable, that's going</span> <span data-start="794.63" data-end="802.63">to contain time series, you mass AWS dimension, just the same way you do like an option inside</span> <span data-start="802.63" data-end="803.86">a select for instance.</span> </p>
<p><span data-start="803.86" data-end="808.089">So we have our data and it looks very much like what we had before.</span> <span data-start="808.089" data-end="814.14">Of\h‑‑ is this thing working? It looks like what we had before, which is this time</span> <span data-start="814.14" data-end="818.11">series data, we can pass it in to the render element.</span> <span data-start="818.11" data-end="822.339">Now, actually, because I'm super Lazy, I'm not going to write it, I'll steal it from</span> <span data-start="822.339" data-end="831.06">Google, Google wrote their own chart element testimony wraps their Google chat library</span> <span data-start="831.06" data-end="836.899">there's a lot less of this horrible boilerplate than before, that's already a nice win.</span> <span data-start="836.899" data-end="843.98">Just passing in my data, define how it's going to look, and, there we go, we've got our chart,</span> <span data-start="843.98" data-end="844.98">so that's cool.</span> <span data-start="844.98" data-end="849.639">And, weave got all of this through web components, so what does it look likened to end, end to</span> <span data-start="849.639" data-end="855.07">end we have\h‑‑ weave got our three‑string attributes that we pass into the AWS config</span> <span data-start="855.07" data-end="864">element, that will write it to a new variable, we pass that to Cloud watch alongside parameters,</span> <span data-start="864" data-end="868.629">do the Ajax request, we can write that into another variable and pass to Google chart</span> <span data-start="868.629" data-end="874.24">and boom chart appears, great, what does this look like in code, very similar in fact, we</span> <span data-start="874.24" data-end="880.25">load in platform JS at the top, which is the poly fill, we import our three elements, we</span> <span data-start="880.25" data-end="885.86">use them in our auto binding context that gives us the data binding thing, that's it,</span> <span data-start="885.86" data-end="889.86">this is three elements, that works for single chart.</span> </p>
<p><span data-start="889.86" data-end="893.839">If we end up having more chart, more request charts you can already tell that it's going</span> <span data-start="893.839" data-end="895.2">to take quite a lot of courage.</span> <span data-start="895.2" data-end="900.79">Went up with a something like this, a lot of code application, adopt repeat yourself,</span> <span data-start="900.79" data-end="905.839">not clean to pop I paste code if you're doing it, you're doing it wrong probably.</span> <span data-start="905.839" data-end="912.73">How do you abstract this? When typical programming you paramettize it as a function, right, then</span> <span data-start="912.73" data-end="916.89">bits that change you make them parameters of the function and abstracted it way way.</span> </p>
<p><span data-start="916.89" data-end="924.129">You're going to use an element instead, maybee make the two input, the config, and load banner</span> <span data-start="924.129" data-end="929.861">which is the only thing that change in the code, question abstract it to an Aws element</span> <span data-start="929.861" data-end="936.009">and just pass in the load balance, and then we can use it and it's done what we want it,</span> <span data-start="936.009" data-end="944.019">with have the Aws element, and request a draft for the load\h‑‑ great, we've done it</span> <span data-start="944.019" data-end="951.21">for requests, we can show latent say, you can show like bucketed numbers of accounts,</span> <span data-start="951.21" data-end="953.5">you can do anything you want.</span> <span data-start="953.5" data-end="957.62">And because weave based that on small awe Tommic modules you can replace some of the</span> <span data-start="957.62" data-end="960.029">piece of the puzzle.</span> <span data-start="960.029" data-end="965.589">You can say, let's fetch the data from another source, let's fetch day from graphite instead</span> <span data-start="965.589" data-end="972.25">of AWS Cloud watch, it's a completely different server, but, because we out put this in the</span> <span data-start="972.25" data-end="974.389">same data format\h‑‑ interesting.</span> <span data-start="974.389" data-end="985.06">(Laughing) that's how impressive web components are (Laughing) because we use the same data</span> <span data-start="985.06" data-end="989.16">form mat we can pass it into the Google chat and it works just the same.</span> </p>
<p><span data-start="989.16" data-end="997.35">So, a small confession weave actually cheated all along, everywhere we pass in the the exact</span> <span data-start="997.35" data-end="1002.85">sort of string values for the time, well, that's a bit stupid, that means we're also</span> <span data-start="1002.85" data-end="1007.199">watching a given sort of time range, time interval for all our data, that's not a very</span> <span data-start="1007.199" data-end="1009.25">useful graph.</span> <span data-start="1009.25" data-end="1015.55">So what can we do instead? So, what we\h‑‑ what do we want, we want to say just the last</span> <span data-start="1015.55" data-end="1020.149">hour of data, so how do we do that? Well, the last hour of data means that the time</span> <span data-start="1020.149" data-end="1022.89">interval, ends now.</span> <span data-start="1022.89" data-end="1030.58">So, we're just going to create new variables with the now time, where does now come from,</span> <span data-start="1030.58" data-end="1036">there's an element for that, just create the new time element, that's going to export the</span> <span data-start="1036" data-end="1041.13">time, when it Eastern initialized and the time, the now variable will store a date time</span> <span data-start="1041.13" data-end="1045.86">that is passed into the Cloud watch element that's great, except that it's just\h‑‑</span> <span data-start="1045.86" data-end="1047.16">it doesn't update.</span> </p>
<p><span data-start="1047.16" data-end="1052.28">We can make it update, we can pass this a refresh attribute that says update every minute.</span> <span data-start="1052.28" data-end="1059.11">That means that actually the nice thing here is that of when now updates after a minute,</span> <span data-start="1059.11" data-end="1064.76">the now value changes and because Cloud watches also observing these inputs is going to update,</span> <span data-start="1064.76" data-end="1072.08">is going to do another request to fetch the updated data, and because the charting elementals</span> <span data-start="1072.08" data-end="1074.27">watches its inputs, it's going to update the graph.</span> <span data-start="1074.27" data-end="1080.2">It's like functional reactive programming where you define the data flow and then everything</span> <span data-start="1080.2" data-end="1084.28">updates without having to explicitly listen for special vents, nobody knows about the</span> <span data-start="1084.28" data-end="1088.83">other things happening, it's just day the bound.</span> </p>
<p><span data-start="1088.83" data-end="1092.46">We're not quite done yet because the start time is still hard coded, so what we said</span> <span data-start="1092.46" data-end="1097.681">we wanted to have a\h‑‑ time interval of one hour, so, let's do that, let's define</span> <span data-start="1097.681" data-end="1099.66">a time range, el.</span> <span data-start="1099.66" data-end="1104.85">That says one hour and then we bind the end to now, which means that the start is going</span> <span data-start="1104.85" data-end="1111.4">to be an output, which will be\h‑‑ can attach to Cloud watch element.</span> <span data-start="1111.4" data-end="1117.08">We've got now our time range of one hour, that's enforced, when it start changes, except</span> <span data-start="1117.08" data-end="1121.08">we're still not done the number of hours is fixed, what do we want? We probably want a</span> <span data-start="1121.08" data-end="1126.37">custom number of hours what if your service died a horrible death an hour and half ago,</span> <span data-start="1126.37" data-end="1130.2">we want to do change.time range.</span> <span data-start="1130.2" data-end="1135.52">So if you said the user needs to do it, we need offI element, I'm Lazy, I'm not going</span> <span data-start="1135.52" data-end="1140.68">to write my own, steel this one from gage Google that's what they're for, we take the</span> <span data-start="1140.68" data-end="1150.3">paper ment, and that's going to export a simple integer value that we're going to bind as</span> <span data-start="1150.3" data-end="1155.12">ours, when I change the value here as you see in the give, that changes the number of</span> <span data-start="1155.12" data-end="1162.42">hours, the same way as when now changes, that cascades down, changes the data and renders</span> <span data-start="1162.42" data-end="1163.42">again.</span> </p>
<p><span data-start="1163.42" data-end="1168.33">If you change the number of hours as a user, it just cascades down and changes what you</span> <span data-start="1168.33" data-end="1173.56">see in the graph automatically . so that's pretty neat.</span> <span data-start="1173.56" data-end="1178.68">This is what the code looks like, you can review this later.</span> <span data-start="1178.68" data-end="1183.94">Another thing we did, which we cheated a bit on is we've hard coded secret in the page.</span> <span data-start="1183.94" data-end="1189.97">Now if you are security expert even if you're not, this is not a good thing to do, you don't</span> <span data-start="1189.97" data-end="1193.66">want to put secrets in the page if someone sees that page, that means they can access</span> <span data-start="1193.66" data-end="1198.84">your\h‑‑ well, they can query how slow your service are, not souper dangerous, still</span> <span data-start="1198.84" data-end="1202.65">not a nice thing to do, probably don't want do that.</span> <span data-start="1202.65" data-end="1206.52">How do you do that, you need to awe then the Kate with your servers.</span> <span data-start="1206.52" data-end="1213.58">Well, what we can do is we can use this magical thing with the AWS web identity federation,</span> <span data-start="1213.58" data-end="1218.62">this is provide by the AWS, and it lets you acquire a talk with a third party or with</span> <span data-start="1218.62" data-end="1226.83">a provider like Google, Facebook, or Amazon, and then you said that token for temporary</span> <span data-start="1226.83" data-end="1231.55">set of cry didn'tbles that you can define permissions for this is what I've done here,</span> <span data-start="1231.55" data-end="1236.83">weave written a new AWS I deputy element that wraps the Google element that Google provided</span> <span data-start="1236.83" data-end="1241.45">they had to writ for me, so that's nice.</span> </p>
<p><span data-start="1241.45" data-end="1246.72">That expose the same AWS config object as the previous element did, you can substitute</span> <span data-start="1246.72" data-end="1255.08">the hard coded con fig we had previously with this one that does it in a safer way and without</span> <span data-start="1255.08" data-end="1258.93">revoling any secrets, so, that's nice.</span> <span data-start="1258.93" data-end="1263.08">So let's do live Demo.</span> <span data-start="1263.08" data-end="1265.06">(Laughing) maybe.</span> <span data-start="1265.06" data-end="1266.06">Okay.</span> <span data-start="1266.06" data-end="1275.35">So, let's see if it still works this is a demo ready to have made.</span> <span data-start="1275.35" data-end="1284.32">You see on the right there is tag API metrics, they appear here, they fetch from graphite</span> <span data-start="1284.32" data-end="1287.86">is simply I P based I have to be on the VPN for this.</span> <span data-start="1287.86" data-end="1294.3">And other thing we see is these weird rounded colored dots and these represent deploy either</span> <span data-start="1294.3" data-end="1299.74">proproduction or preproduction environment where whether they succeeded or failed.</span> <span data-start="1299.74" data-end="1302.85">This is day that's live from today, from now.</span> </p>
<p><span data-start="1302.85" data-end="1310.13">And, so, as said, we're going to use AWS identity element to do the Auth so this is the Google</span> <span data-start="1310.13" data-end="1313.66">sign in element, in is what it looks like, this is the button for it.</span> <span data-start="1313.66" data-end="1323.75">I'm just going to need Auth with Google, and that creates a tocken, trades it with Amazon</span> <span data-start="1323.75" data-end="1332.27">and gets a set of credential, everything is data bound, the data appears here magically</span> <span data-start="1332.27" data-end="1338.97">so we can see things like this, you the latency, request, and\h‑‑ this is a static page,</span> <span data-start="1338.97" data-end="1351.65">this is just a Python server, static HTML file\h‑‑ and this' all using web components.</span> <span data-start="1351.65" data-end="1362.24">(applause) you can change that, you can change what time window, it automatically updates</span> <span data-start="1362.24" data-end="1367.16">just through the magic of data binding, that's also neat, you don't have to write complex</span> <span data-start="1367.16" data-end="1371.84">logic to update.</span> </p>
<p><span data-start="1371.84" data-end="1385.51">That's the demo.</span> <span data-start="1385.51" data-end="1389.96">So does that mean we can all say Fuck server I'm just going to write JavaScript code if</span> <span data-start="1389.96" data-end="1394.95">now on and don't need to do anymore server, I'm just going to talk today that base from</span> <span data-start="1394.95" data-end="1402.45">the end of times no? Not quite partly because well, it's\h‑‑ well, if you use the web</span> <span data-start="1402.45" data-end="1407.44">components the support is still fairly limited, it doesn't support all browsers, especially</span> <span data-start="1407.44" data-end="1411.63">all the browsers, and you might want to support that.</span> </p>
<p><span data-start="1411.63" data-end="1415.96">The other thing is, as we saw, querying the database directly from the browser that doesn't</span> <span data-start="1415.96" data-end="1421.24">really scale very well, so for things with low traffic like something that develops use</span> <span data-start="1421.24" data-end="1425.82">or internal users use, thattest a fine you can use that, but I wouldn't put that on the</span> <span data-start="1425.82" data-end="1429.9">front of the Guardian web site, I don't think Patrick would like that much.</span> <span data-start="1429.9" data-end="1433.08">That would not scale very well.</span> <span data-start="1433.08" data-end="1437.77">The other thing is we want to have a system for authentication, especially if you're doing</span> <span data-start="1437.77" data-end="1441.45">read/write, even reading sensitive data like this.</span> <span data-start="1441.45" data-end="1447.01">For this the only sort of component you can rely on is the back end, you can't rely on</span> <span data-start="1447.01" data-end="1450.49">the front end for that, anyone can write it.</span> </p>
<p><span data-start="1450.49" data-end="1456.15">So, you need support from your back end services, and you can do that with IP restrictions or</span> <span data-start="1456.15" data-end="1461.99">do with that things like AWS policies, but the policies are quite course grain, you can</span> <span data-start="1461.99" data-end="1467.74">only say\h‑‑ this column in this database, so there's limitations that make it a bit</span> <span data-start="1467.74" data-end="1473.47">harder to use for write services, you can still do it for things like this, and quite</span> <span data-start="1473.47" data-end="1475.3">a lot of other cases.</span> <span data-start="1475.3" data-end="1479.85">6 in the future I think there's more things we want to do with the dashboard, this is</span> <span data-start="1479.85" data-end="1487.12">the beginning, showing deploy lines on graphs, like how many immanages I add every day, surfacing</span> <span data-start="1487.12" data-end="1491.46">JavaScript, we use the century service to coupe them, great to see when there's a spike</span> <span data-start="1491.46" data-end="1495.13">after deploy.</span> <span data-start="1495.13" data-end="1501.08">And see the server hayseed, a lot particular things you can add to the servers carrying</span> <span data-start="1501.08" data-end="1503.59">on the same pattern.</span> <span data-start="1503.59" data-end="1507.4">What have we learned so far? I think we've seen that it's possible to remove this middle</span> <span data-start="1507.4" data-end="1513.22">tier, that makes the whole system a lot simpler to maintain to edit.</span> </p>
<p><span data-start="1513.22" data-end="1517.23">It works in a variety of cases.</span> <span data-start="1517.23" data-end="1518.23">The other Inc.</span> <span data-start="1518.23" data-end="1524.13">this we've learn is that you can use web components as atomic programmable blocks like Lego blocks,</span> <span data-start="1524.13" data-end="1531.21">then you can combine them using data binding or composition or events and that lets you</span> <span data-start="1531.21" data-end="1536.51">create quite a complex system out of very simple blocks that you can then substitute.</span> </p>
<p><span data-start="1536.51" data-end="1541.45">So that's what I've got, and as said, all of this is Open Source, you can check it out,</span> <span data-start="1541.45" data-end="1547.38">so I recommend you go and play with it, find bug reports and everything and play with it</span> <span data-start="1547.38" data-end="1549.37">at home, it's safe that's all.</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
