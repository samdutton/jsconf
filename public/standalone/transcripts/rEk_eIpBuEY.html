<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>rEk_eIpBuEY</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/rEk_eIpBuEY?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="9.72" data-end="12.47">I'm going to talk about cecchetti oh</span> <span data-start="12.47" data-end="16.65">it's a open source project for enabling</span> <span data-start="16.65" data-end="18.63">WebSocket and making real time</span> <span data-start="18.63" data-end="23.13">applications easy to make on every</span> <span data-start="23.13" data-end="25.14">browser and every mobile device and we</span> <span data-start="25.14" data-end="28.32">can make it work on so my name is</span> </p>
<p><span data-start="28.32" data-end="31.41">Guillermo ouch and the CTO and</span> <span data-start="31.41" data-end="33.87">co-founder of an education startup in</span> <span data-start="33.87" data-end="37.41">San Francisco we have a big commitment</span> <span data-start="37.41" data-end="40.77">to open source and I spent part of my</span> <span data-start="40.77" data-end="44.91">time developing this technology having</span> <span data-start="44.91" data-end="48.33">heavily involved with no Jas since it</span> <span data-start="48.33" data-end="50.61">appeared I originally developed a</span> <span data-start="50.61" data-end="53.7">standalone WebSocket server that of</span> <span data-start="53.7" data-end="55.41">course would only work with WebSocket</span> <span data-start="55.41" data-end="58.47">clients and then I saw the opportunity</span> <span data-start="58.47" data-end="61.86">of making WebSocket work on more than</span> <span data-start="61.86" data-end="66.36">just cutting edge browsers i'm also a</span> <span data-start="66.36" data-end="69.78">core modules developer I've been working</span> <span data-start="69.78" data-end="71.159">on client side JavaScript for a while</span> <span data-start="71.159" data-end="75.6">and those are my if you want to reach</span> <span data-start="75.6" data-end="79.62">out or fork any of my projects you can</span> <span data-start="79.62" data-end="82.65">go to github or follow me on Twitter or</span> <span data-start="82.65" data-end="87.06">find me on freenode so Sokka do is</span> <span data-start="87.06" data-end="90.51">actually two projects there's a socket</span> <span data-start="90.51" data-end="92.37">i/o client that of course runs on the</span> <span data-start="92.37" data-end="96.47">browser uses feature detection to decide</span> <span data-start="96.47" data-end="100.02">what how to establish a real-time</span> <span data-start="100.02" data-end="102.18">communication to the server depending on</span> <span data-start="102.18" data-end="105.69">the user agent capabilities and an</span> <span data-start="105.69" data-end="109.049">officially supported socket i/o noth web</span> <span data-start="109.049" data-end="113.369">server there some projects are trying to</span> <span data-start="113.369" data-end="116.64">make socket i/o work also on other</span> <span data-start="116.64" data-end="122.31">stacks such as air leg python with</span> <span data-start="122.31" data-end="127.47">tornado twisted even google go so you</span> <span data-start="127.47" data-end="130.14">can go to the socket a website to learn</span> <span data-start="130.14" data-end="133.349">more about those so the client-side API</span> <span data-start="133.349" data-end="134.3">looks</span> </p>
<p><span data-start="134.3" data-end="135.44">I know if you guys are familiar with</span> <span data-start="135.44" data-end="137.99">WebSocket but i'm going to go into it</span> <span data-start="137.99" data-end="142.1">later the api that you instantiate from</span> <span data-start="142.1" data-end="143.78">the client looks pretty much like</span> <span data-start="143.78" data-end="147.83">WebSocket it does it does more than web</span> <span data-start="147.83" data-end="150.59">socket which is necessary for creating</span> <span data-start="150.59" data-end="154.97">real world real time applications the</span> <span data-start="154.97" data-end="156.14">premise is that it works in every</span> <span data-start="156.14" data-end="158.18">browser so you're not concerned about</span> <span data-start="158.18" data-end="162.23">compatibility and it's lightweight it's</span> <span data-start="162.23" data-end="168.11">only 10 kilobytes when compressed I'm</span> <span data-start="168.11" data-end="169.61">going to talk a little bit about about</span> <span data-start="169.61" data-end="172.4">the real time web and what I mean when I</span> <span data-start="172.4" data-end="175.9">talk about real time web applications</span> <span data-start="175.9" data-end="178.88">there when you when we talk about real</span> <span data-start="178.88" data-end="180.53">time web applications there are many</span> <span data-start="180.53" data-end="182.9">terms that come to mind and that have</span> <span data-start="182.9" data-end="186.29">been popularized over the years such as</span> <span data-start="186.29" data-end="191.45">the Bayeux prodigal comet this this</span> <span data-start="191.45" data-end="195.38">premise of server push so we're sending</span> <span data-start="195.38" data-end="197.36">data to the client which is reversing</span> <span data-start="197.36" data-end="200.39">the request response model now there's</span> <span data-start="200.39" data-end="207.31">web socket and all other protocols like</span> </p>
<p><span data-start="207.31" data-end="214.91">XMPP so what is which I'm going to start</span> <span data-start="214.91" data-end="219.86">by describing a real simple real time</span> <span data-start="219.86" data-end="224.75">application at Twitter client that</span> <span data-start="224.75" data-end="227.39">fetches know Jas tweets as they are</span> <span data-start="227.39" data-end="231.86">pushed by Twitter's and you might wish</span> <span data-start="231.86" data-end="234.35">to display the tweets on your website so</span> <span data-start="234.35" data-end="236.33">the first approach that would come to</span> <span data-start="236.33" data-end="239">mind for most people is just making</span> <span data-start="239" data-end="241.34">agents requests every five seconds right</span> <span data-start="241.34" data-end="244.61">so you could use set interval and with a</span> <span data-start="244.61" data-end="250.19">light jquery call you can get data from</span> <span data-start="250.19" data-end="255.37">server to the client in pseudo real time</span> <span data-start="255.37" data-end="259.01">of course the problem is that you're</span> <span data-start="259.01" data-end="260.69">only getting data five seconds at a time</span> <span data-start="260.69" data-end="262.88">and whatever happens in the middle</span> <span data-start="262.88" data-end="265.039">you're not showing instantly or you're</span> <span data-start="265.039" data-end="265.51">not sure</span> <span data-start="265.51" data-end="267.37">wing to the user as frequently as you</span> <span data-start="267.37" data-end="272.32">could wish so the next approach that</span> <span data-start="272.32" data-end="274.15">would come to mind was would be making a</span> <span data-start="274.15" data-end="277.93">nation skull and that as the server is</span> <span data-start="277.93" data-end="279.85">there any data ordinary tweets for me</span> <span data-start="279.85" data-end="283.99">and if there is show them if there is</span> <span data-start="283.99" data-end="288.37">not initiate another Asians request but</span> <span data-start="288.37" data-end="291.82">that approach has two major flaws one is</span> <span data-start="291.82" data-end="295.06">that taken into consideration the HTTP</span> <span data-start="295.06" data-end="297.19">latency and download time the best-case</span> <span data-start="297.19" data-end="299.71">scenario for that is that it might take</span> <span data-start="299.71" data-end="303.78">500 milliseconds between Asia's requests</span> <span data-start="303.78" data-end="305.89">where the client is basically</span> <span data-start="305.89" data-end="308.8">disconnected and another problems that</span> <span data-start="308.8" data-end="310.96">we're increasing network traffic but the</span> <span data-start="310.96" data-end="312.64">server might not have any tweets for us</span> <span data-start="312.64" data-end="315.7">might not have any data so we're</span> <span data-start="315.7" data-end="317.56">basically asking the server a law</span> <span data-start="317.56" data-end="320.59">generating a lot of calls for and we're</span> <span data-start="320.59" data-end="321.88">not sure if there is going to be data</span> <span data-start="321.88" data-end="325.09">there so they're the first solution to</span> <span data-start="325.09" data-end="327.58">this problem is called long polling it</span> <span data-start="327.58" data-end="329.89">it's not actual server push but it</span> <span data-start="329.89" data-end="331.72">that's a pretty good job for most of the</span> <span data-start="331.72" data-end="335.68">use cases because what it does is it</span> <span data-start="335.68" data-end="337.87">opens the connection and if there is no</span> <span data-start="337.87" data-end="339.49">data for us it keeps it open for a</span> <span data-start="339.49" data-end="341.89">number of seconds like 20 seconds it</span> <span data-start="341.89" data-end="344.32">effectively decreases latency and or</span> <span data-start="344.32" data-end="347.68">traffic and another advantage of this</span> <span data-start="347.68" data-end="349.15">approach is that it pretty much works in</span> <span data-start="349.15" data-end="352.3">every browser if you're using jQuery to</span> <span data-start="352.3" data-end="353.74">make the call or and any other</span> </p>
<p><span data-start="353.74" data-end="357.4">JavaScript framework you're you're</span> <span data-start="357.4" data-end="359.02">enabling your application to make a</span> <span data-start="359.02" data-end="363.03">real-time call without any overhead or</span> <span data-start="363.03" data-end="366.97">incompatibilities of course it also has</span> <span data-start="366.97" data-end="369.79">witnesses if there's a lot of data for</span> <span data-start="369.79" data-end="372.91">us then the long polling loop will be</span> <span data-start="372.91" data-end="375.43">would be effectively closing and opening</span> <span data-start="375.43" data-end="377.53">connections all the time so we're back</span> <span data-start="377.53" data-end="380.71">at our second approach which was calling</span> <span data-start="380.71" data-end="383.77">the HS create another HS code when when</span> <span data-start="383.77" data-end="386.7">when finished so again we're hitting</span> <span data-start="386.7" data-end="391.29">latency and network traffic problems so</span> <span data-start="391.29" data-end="393.31">the solution that makes the most sense</span> <span data-start="393.31" data-end="396.75">would be keeping the connection open and</span> <span data-start="396.75" data-end="399.06">there are transports there are solutions</span> <span data-start="399.06" data-end="403.88">for this too pretty common ones are</span> <span data-start="403.88" data-end="406.86">opening an iframe in not closing it and</span> <span data-start="406.86" data-end="409.98">get a script tags that are executed when</span> <span data-start="409.98" data-end="413.46">there's data and another one a little</span> <span data-start="413.46" data-end="415.65">bit less known but supported by Firefox</span> <span data-start="415.65" data-end="419.67">is the multi-part x-mix replace content</span> <span data-start="419.67" data-end="421.85">type essentially it's a normal</span> <span data-start="421.85" data-end="424.68">xmlhttprequest object that is created by</span> <span data-start="424.68" data-end="428.88">passing the multi-part flag and it</span> <span data-start="428.88" data-end="430.89">senses messages with boundaries so the</span> <span data-start="430.89" data-end="432.84">server has to say okay here's a message</span> <span data-start="432.84" data-end="438.93">the boundary some some delimiter message</span> <span data-start="438.93" data-end="441.69">and the connection is open and we're</span> <span data-start="441.69" data-end="444.57">getting data all the time the hidden</span> <span data-start="444.57" data-end="448.02">iframe also has implementation</span> <span data-start="448.02" data-end="450.99">differences we have to make sure we send</span> <span data-start="450.99" data-end="452.45">the connection keep-alive header</span> <span data-start="452.45" data-end="456.48">transfer encoding chunked those are HTTP</span> <span data-start="456.48" data-end="459.36">headers that we have to send and as a</span> <span data-start="459.36" data-end="462.21">new experience problem what happens when</span> <span data-start="462.21" data-end="464.37">you just open an iframe that is injected</span> <span data-start="464.37" data-end="466.29">into the DOM is that many browsers</span> <span data-start="466.29" data-end="468.93">browsers are going to show the progress</span> <span data-start="468.93" data-end="472.65">bar as if the page never loaded so the</span> <span data-start="472.65" data-end="477.39">user will be met with a progress bar</span> <span data-start="477.39" data-end="479.13">that it's like he's not sure what's</span> <span data-start="479.13" data-end="482.669">going on really there is a solution for</span> <span data-start="482.669" data-end="484.229">this which is implemented by cerca de</span> <span data-start="484.229" data-end="486.96">enero explorer discovered and</span> <span data-start="486.96" data-end="489.3">popularized by the gmail team when they</span> <span data-start="489.3" data-end="492.3">created gmail chat which is hiding this</span> <span data-start="492.3" data-end="494.34">iframe injecting it into a pseudo</span> <span data-start="494.34" data-end="497.94">document which is an activex HTML file</span> <span data-start="497.94" data-end="501">component that effectively hides the</span> <span data-start="501" data-end="504.18">spinners and progress bars so these are</span> <span data-start="504.18" data-end="507.09">to transport that transports that we can</span> <span data-start="507.09" data-end="509.46">leverage to make real-time communication</span> <span data-start="509.46" data-end="511.56">possible of course for certain browsers</span> <span data-start="511.56" data-end="514.8">and the server has to behave differently</span> <span data-start="514.8" data-end="518.31">depending on which transport is used so</span> <span data-start="518.31" data-end="522.3">the this technique are there they vary</span> <span data-start="522.3" data-end="525.36">by user agent they're only for incoming</span> <span data-start="525.36" data-end="527.41">data so when you open that iframe</span> <span data-start="527.41" data-end="529.569">and you need to send data to a server in</span> <span data-start="529.569" data-end="530.73">order to have bi-directional</span> <span data-start="530.73" data-end="532.81">communication you still have to use</span> <span data-start="532.81" data-end="539.41">regular Ajax so the solution by the web</span> <span data-start="539.41" data-end="542.319">standards people is called WebSocket so</span> <span data-start="542.319" data-end="545.439">you shouldn't be needing to struggle</span> <span data-start="545.439" data-end="548.019">with all these limitations we need the</span> <span data-start="548.019" data-end="550.6">prodigal that enables bi-directional</span> <span data-start="550.6" data-end="552.22">communication out of the box with a</span> <span data-start="552.22" data-end="556.93">simple API if you guys read the spec</span> <span data-start="556.93" data-end="559.18">it's it's this is the way the</span> <span data-start="559.18" data-end="562.87">description and simplicity is one of the</span> <span data-start="562.87" data-end="566.92">core goals of this protocol the way that</span> <span data-start="566.92" data-end="569.949">it works at an HTTP level is that it</span> <span data-start="569.949" data-end="573.43">updates the connection HTTP 1.1 supports</span> <span data-start="573.43" data-end="575.709">this upgrade header that basically says</span> <span data-start="575.709" data-end="578.709">at this point we're not doing a normal</span> </p>
<p><span data-start="578.709" data-end="581.23">HTTP communication we're upgrading it to</span> <span data-start="581.23" data-end="583.329">a new protocol in this case the</span> <span data-start="583.329" data-end="587.86">WebSocket protocol again the server has</span> <span data-start="587.86" data-end="591.1">to behave react to this response by</span> <span data-start="591.1" data-end="594.55">doing several things during the</span> <span data-start="594.55" data-end="599.259">handshake process draft 76 linear draft</span> <span data-start="599.259" data-end="601.93">of WebSocket introduced a security</span> <span data-start="601.93" data-end="604.829">mechanism it has a fairly unique</span> <span data-start="604.829" data-end="609.37">pregnancy framing system it does utf-8</span> <span data-start="609.37" data-end="611.649">for the encoding know binary support and</span> <span data-start="611.649" data-end="613.769">of course it's only supported by</span> <span data-start="613.769" data-end="617.709">cutting-edge browsers and it's still</span> <span data-start="617.709" data-end="619.66">ongoing constant changes it's pretty</span> <span data-start="619.66" data-end="623.829">much a work in progress but again one of</span> <span data-start="623.829" data-end="625.329">the advantages is a WebSocket is really</span> <span data-start="625.329" data-end="630.79">simple basically we declare we connect</span> <span data-start="630.79" data-end="634.63">to the server with the WSS schema and we</span> <span data-start="634.63" data-end="637.18">have three event handlers actually for</span> <span data-start="637.18" data-end="640.959">there is an error when that notifies us</span> <span data-start="640.959" data-end="643.059">when the connection is open when a</span> <span data-start="643.059" data-end="644.709">message is received and when the</span> <span data-start="644.709" data-end="648.389">connection is gratefully closed</span> <span data-start="648.399" data-end="653.06">so considering the state of WebSocket</span> <span data-start="653.06" data-end="655.79">today let's think about cross browser</span> <span data-start="655.79" data-end="659.66">support when we do latex today like I</span> <span data-start="659.66" data-end="662.39">described earlier we were used to using</span> <span data-start="662.39" data-end="666.85">some obstruction of xml httprequest</span> <span data-start="666.85" data-end="670.339">which also gives us compatibility for</span> <span data-start="670.339" data-end="673.42">example with ie6 by leveraging the</span> </p>
<p><span data-start="673.42" data-end="676.82">ActiveX object that microsoft created</span> <span data-start="676.82" data-end="680.81">back in the day they say this kind of</span> <span data-start="680.81" data-end="683.149">API make it simpler to achieve the goal</span> <span data-start="683.149" data-end="686.269">of making an asynchronous request to the</span> <span data-start="686.269" data-end="688.579">server and they also have new features</span> <span data-start="688.579" data-end="691.07">in the case of jquery we all say we now</span> <span data-start="691.07" data-end="695.079">have support for timeouts caching</span> <span data-start="695.079" data-end="698.72">filters depending on the content type of</span> <span data-start="698.72" data-end="704.06">the response and again the entire goal</span> <span data-start="704.06" data-end="706.279">is that were making age it's simple to</span> <span data-start="706.279" data-end="709.82">use and so ko has a really similar goal</span> <span data-start="709.82" data-end="713.51">so we're abstracting away all these</span> <span data-start="713.51" data-end="718.04">transports it's not just WebSocket we</span> <span data-start="718.04" data-end="720.98">can also use flash if available we can</span> <span data-start="720.98" data-end="723.92">use long polling we can use multi-part</span> </p>
<p><span data-start="723.92" data-end="726.62">HX iframes and it all depends on what</span> <span data-start="726.62" data-end="728.72">user agent is trying to connect to a</span> <span data-start="728.72" data-end="734.42">server so far Sokka do has been tested</span> <span data-start="734.42" data-end="739.79">on I 5.5 with different transports like</span> <span data-start="739.79" data-end="743.649">flash and HTML file safari 3 chrome</span> <span data-start="743.649" data-end="748.55">opera and mobile devices it again adds</span> <span data-start="748.55" data-end="752.66">new features so for example well when</span> <span data-start="752.66" data-end="754.82">you open a WebSocket connection they the</span> <span data-start="754.82" data-end="757.16">closed event will only be fired if the</span> <span data-start="757.16" data-end="760.49">connection is closed appropriately if if</span> <span data-start="760.49" data-end="762.949">the server dies or the client internet</span> <span data-start="762.949" data-end="765.5">connection is has issues that closed</span> <span data-start="765.5" data-end="768.29">event will never fire so even though the</span> </p>
<p><span data-start="768.29" data-end="771.019">API is simple we still have limitations</span> <span data-start="771.019" data-end="772.699">when we really need to create a</span> <span data-start="772.699" data-end="778.019">functional real world application</span> <span data-start="778.029" data-end="781.82">we were trying to do what all these</span> <span data-start="781.82" data-end="784.31">frameworks did for Ajax we're trying to</span> <span data-start="784.31" data-end="790.279">do for real-time communication so so far</span> <span data-start="790.279" data-end="792.68">the the project has been successfully</span> <span data-start="792.68" data-end="795.35">deployed to production in many cases if</span> <span data-start="795.35" data-end="797.3">you guys follow the node knockout</span> <span data-start="797.3" data-end="800.54">competition many people have created</span> <span data-start="800.54" data-end="802.579">real ten games and other kinds of</span> <span data-start="802.579" data-end="805.88">real-time applications with it and there</span> <span data-start="805.88" data-end="811.199">is a lot of community interest on github</span> <span data-start="811.209" data-end="814.61">but one thing to keep in mind that sucka</span> <span data-start="814.61" data-end="817.01">day was just a building block it's okay</span> <span data-start="817.01" data-end="819.95">is protocol agnostic saga de oh you can</span> <span data-start="819.95" data-end="822.589">send Jason and on the client side</span> <span data-start="822.589" data-end="825.47">interpret it and do something or you can</span> <span data-start="825.47" data-end="828.17">connect and implement the IRC protocol</span> <span data-start="828.17" data-end="830.269">for example and you can create an IRC</span> <span data-start="830.269" data-end="835.459">client and speak the IRC idioms again</span> </p>
<p><span data-start="835.459" data-end="840.48">Sokka do is just a building block</span> <span data-start="840.49" data-end="843.35">creating real-time applications is not</span> <span data-start="843.35" data-end="847.31">trivial there's many different protocols</span> <span data-start="847.31" data-end="850.57">in many different ways to do it and</span> <span data-start="850.57" data-end="852.77">again is significantly significantly</span> <span data-start="852.77" data-end="855.89">different from making certain things in</span> <span data-start="855.89" data-end="859.839">your regular web application real time</span> <span data-start="859.839" data-end="866">so i created this project that leverages</span> <span data-start="866" data-end="869.45">socket AO called no stream the goal of</span> <span data-start="869.45" data-end="873.41">no stream is being the protocol for the</span> <span data-start="873.41" data-end="875.899">most common use cases for your web</span> <span data-start="875.899" data-end="884.6">applications as an example i created a</span> <span data-start="884.6" data-end="891.199">really simple to the list application on</span> <span data-start="891.199" data-end="898.91">nodejs</span> <span data-start="898.92" data-end="902.59">so again this is a regular web</span> <span data-start="902.59" data-end="904.03">application that interfaces with the</span> <span data-start="904.03" data-end="907.66">database and displays the two Lewis</span> <span data-start="907.66" data-end="909.82">items that you have the complete and it</span> <span data-start="909.82" data-end="912.88">allows you to have new items every time</span> <span data-start="912.88" data-end="916.18">we have something the page is refreshed</span> <span data-start="916.18" data-end="924.76">and we can edit right so even though</span> <span data-start="924.76" data-end="926.44">this is a really simple application it</span> <span data-start="926.44" data-end="930.25">still has many flaws for the users the</span> <span data-start="930.25" data-end="931.87">first one is that what happens when you</span> <span data-start="931.87" data-end="934.51">open two tabs of two instances of your</span> <span data-start="934.51" data-end="937.33">application and you decide to delete an</span> <span data-start="937.33" data-end="939.64">item all of a sudden this page has two</span> <span data-start="939.64" data-end="944.32">items this page has three it ends up</span> <span data-start="944.32" data-end="945.61">hurting the user experience in this</span> <span data-start="945.61" data-end="948.43">particular case but what happens if more</span> <span data-start="948.43" data-end="951.06">than one person are trying to use this</span> <span data-start="951.06" data-end="956.71">this application so I'm going to quickly</span> <span data-start="956.71" data-end="960.97">show what the code looks like to create</span> <span data-start="960.97" data-end="962.8">this application for those not familiar</span> <span data-start="962.8" data-end="970.96">with no Jas I'm defining a model I'm</span> <span data-start="970.96" data-end="972.67">using Express web framework to defined</span> <span data-start="972.67" data-end="977.04">to define some routes like edit as</span> <span data-start="977.04" data-end="980.65">delete and I call the database and I</span> <span data-start="980.65" data-end="982.27">remove the items to have the items</span> <span data-start="982.27" data-end="985.03">respectively and then what I sent to the</span> <span data-start="985.03" data-end="989.05">client is a redirect and this is this is</span> <span data-start="989.05" data-end="990.28">what we're trying to change with no</span> <span data-start="990.28" data-end="994.69">string so i'm going to show you what the</span> <span data-start="994.69" data-end="996.69">real time version of this to do list</span> <span data-start="996.69" data-end="1001.86">looks like</span> <span data-start="1001.87" data-end="1005.44">this in this case we're attaching socket</span> <span data-start="1005.44" data-end="1014.83">i/o to the web server so and it has two</span> <span data-start="1014.83" data-end="1018.01">new features first we're displaying who</span> <span data-start="1018.01" data-end="1022.54">is editing and now we're making all the</span> <span data-start="1022.54" data-end="1023.77">interactions that I described through</span> <span data-start="1023.77" data-end="1025.66">the routes we're making them real time</span> <span data-start="1025.66" data-end="1030.54">so what happens when I open a new tab is</span> <span data-start="1030.54" data-end="1033.339">that all of a sudden they're all the</span> <span data-start="1033.339" data-end="1035.199">same and we can take it to a new level</span> <span data-start="1035.199" data-end="1039.04">and we can try out different browsers</span> <span data-start="1039.04" data-end="1042.91">it's interesting to see that so far I</span> <span data-start="1042.91" data-end="1044.65">five of course is connecting to socket</span> <span data-start="1044.65" data-end="1046.87">i/o through WebSocket because it's the</span> <span data-start="1046.87" data-end="1048.9">best transporter socket i/o can find</span> <span data-start="1048.9" data-end="1052.45">what happens when I go to Firefox is</span> <span data-start="1052.45" data-end="1056.559">that it's going to use multi-part like I</span> <span data-start="1056.559" data-end="1057.91">describe this process is complete</span> <span data-start="1057.91" data-end="1061.78">transparent to the developer and and</span> <span data-start="1061.78" data-end="1065.25">again it we are in effectively enabling</span> <span data-start="1065.25" data-end="1068.5">real-time collaboration across users if</span> </p>
<p><span data-start="1068.5" data-end="1071.14">I close one tab the counter will stop</span> <span data-start="1071.14" data-end="1075.01">will change now the real interesting</span> <span data-start="1075.01" data-end="1077.92">part about no stream is that we're all</span> <span data-start="1077.92" data-end="1080.29">these features have been created by only</span> <span data-start="1080.29" data-end="1083.5">doing two things one is firing events</span> <span data-start="1083.5" data-end="1086.62">when certain actions happen which it's a</span> <span data-start="1086.62" data-end="1089.62">great fit for no Jas of course and the</span> <span data-start="1089.62" data-end="1091.66">other thing is that i'm only using I'm</span> <span data-start="1091.66" data-end="1097.48">only telling the template language what</span> <span data-start="1097.48" data-end="1100.78">things to update so this is what a</span> <span data-start="1100.78" data-end="1102.58">template language looks like this is</span> <span data-start="1102.58" data-end="1105.52">similar to Hamill it's called Jade this</span> <span data-start="1105.52" data-end="1109.09">is the page for our old to do</span> <span data-start="1109.09" data-end="1112.42">application the traditional one I get</span> <span data-start="1112.42" data-end="1114.94">the items I go through them and I show a</span> <span data-start="1114.94" data-end="1118.75">piece of template now in the real 10</span> <span data-start="1118.75" data-end="1131.54">version</span> <span data-start="1131.55" data-end="1134.17">all I do is declare a part of the</span> <span data-start="1134.17" data-end="1136.9">template that's real time I tell it this</span> <span data-start="1136.9" data-end="1139.3">piece of disputes of template it's real</span> <span data-start="1139.3" data-end="1142.15">time and it it will repaint whenever the</span> <span data-start="1142.15" data-end="1144.34">connections event is fire and the</span> <span data-start="1144.34" data-end="1148.19">variable will be called connections</span> <span data-start="1148.2" data-end="1160.86">sayin oh oh I'm sorry</span> <span data-start="1160.87" data-end="1166.04">nope</span> <span data-start="1166.05" data-end="1172.84">and not quite</span> <span data-start="1172.85" data-end="1182.76">any suggestions lazy always good no pun</span> <span data-start="1182.76" data-end="1186.36">intended again I simply replace that 4-h</span> <span data-start="1186.36" data-end="1189">loop with this real time filter and I'm</span> <span data-start="1189" data-end="1190.86">indicating it that it will append new</span> <span data-start="1190.86" data-end="1193.05">items when the new event is fired it'll</span> <span data-start="1193.05" data-end="1195.83">repaint with edits fired and remove when</span> <span data-start="1195.83" data-end="1199.2">the removal and is fired and all i have</span> <span data-start="1199.2" data-end="1201.66">to do from my application its fire those</span> <span data-start="1201.66" data-end="1203.82">events so instead of resurrecting the</span> <span data-start="1203.82" data-end="1206">user I'm just sending a 200 response and</span> <span data-start="1206" data-end="1208.65">emitting this event so what happens is</span> <span data-start="1208.65" data-end="1211.89">that the user the you as a developer I</span> <span data-start="1211.89" data-end="1214.429">are simply making a nation's call that</span> <span data-start="1214.429" data-end="1216.9">triggers that event and through the</span> <span data-start="1216.9" data-end="1219.9">real-time socket we fired the we fire</span> <span data-start="1219.9" data-end="1223.44">the changes so not only has the need</span> <span data-start="1223.44" data-end="1225.12">effective way of making your application</span> <span data-start="1225.12" data-end="1230.01">real time it also has it also makes the</span> <span data-start="1230.01" data-end="1232.98">client-side code simpler because we're</span> <span data-start="1232.98" data-end="1234.75">no longer making a nation's request that</span> <span data-start="1234.75" data-end="1236.82">returns some HTML and then we decided to</span> <span data-start="1236.82" data-end="1238.71">inject it somewhere you don't have it's</span> <span data-start="1238.71" data-end="1242.52">transparently from the client-side point</span> <span data-start="1242.52" data-end="1253.71">of view so that's a no stream again uses</span> <span data-start="1253.71" data-end="1255.39">salga do as a building block to enable</span> <span data-start="1255.39" data-end="1256.92">it to work on every browser including</span> <span data-start="1256.92" data-end="1265.45">mobile devices and</span> <span data-start="1265.46" data-end="1269.73">you can find this particular example</span> <span data-start="1269.74" data-end="1276.62">oops at my github page JS conf to the</span> <span data-start="1276.62" data-end="1287.37">demo that's it thank you</span> <span data-start="1287.38" data-end="1310.75">any questions</span> <span data-start="1310.76" data-end="1314.91">so yeah those the differences between</span> <span data-start="1314.91" data-end="1318.33">transports including the ones related to</span> <span data-start="1318.33" data-end="1321.03">message length are taken care of by</span> <span data-start="1321.03" data-end="1323.55">cerca de oso at you when you're</span> <span data-start="1323.55" data-end="1325.44">leveraging it you're not concerned at</span> <span data-start="1325.44" data-end="1329.16">all with with how the limitation had</span> <span data-start="1329.16" data-end="1330.81">limitations of limitations of the</span> <span data-start="1330.81" data-end="1337.43">transport so Sokka dave has a very thin</span> <span data-start="1337.43" data-end="1340.56">prodigal that is of course hidden from</span> <span data-start="1340.56" data-end="1342.54">the user which is required for example</span> <span data-start="1342.54" data-end="1345.48">for long polling so in one polling the</span> <span data-start="1345.48" data-end="1346.53">client is opening and closing</span> <span data-start="1346.53" data-end="1348.84">connections but the server might want to</span> <span data-start="1348.84" data-end="1351.54">send messages during that disconnection</span> <span data-start="1351.54" data-end="1354.15">period so we need a protocol that says</span> <span data-start="1354.15" data-end="1356.16">okay this long polling client has a</span> <span data-start="1356.16" data-end="1358.65">session ID and will buffer messages from</span> <span data-start="1358.65" data-end="1361.14">for him on server side and when he</span> <span data-start="1361.14" data-end="1364.41">recollects we're saying that protocol is</span> <span data-start="1364.41" data-end="1366.21">saying okay you have ten messages so you</span> <span data-start="1366.21" data-end="1369.81">have to fire ten message events and each</span> <span data-start="1369.81" data-end="1371.94">the transfer also takes care of saying</span> <span data-start="1371.94" data-end="1374.28">okay the message length is this and if</span> <span data-start="1374.28" data-end="1377.94">it if the client can check okay is the</span> <span data-start="1377.94" data-end="1380.01">entire message here otherwise it will</span> <span data-start="1380.01" data-end="1386.99">wait for more data</span> <span data-start="1387" data-end="1390.04">correct I'm gonna open source it right</span> <span data-start="1390.04" data-end="1402.169">away</span> <span data-start="1402.179" data-end="1405.88">no stream is entirely based on no Jas</span> <span data-start="1405.88" data-end="1408.309">technologies so right now it works with</span> <span data-start="1408.309" data-end="1411.57">a specific template language created for</span> <span data-start="1411.57" data-end="1415.179">node but it wouldn't be too difficult to</span> <span data-start="1415.179" data-end="1420.519">make it work with more and again the</span> <span data-start="1420.519" data-end="1424.269">server side part of ocotillo itself the</span> <span data-start="1424.269" data-end="1426.58">protocol is documented and it can be</span> <span data-start="1426.58" data-end="1429.19">implemented on any back-end and again</span> <span data-start="1429.19" data-end="1431.5">the client side part of no stream can</span> <span data-start="1431.5" data-end="1434.86">also be leveraged for any implementation</span> <span data-start="1434.86" data-end="1450.399">that speaks the no stream protocol yeah</span> <span data-start="1450.399" data-end="1455.889">so connect is a framework that is geared</span> <span data-start="1455.889" data-end="1459.12">towards request-response cycles so</span> <span data-start="1459.12" data-end="1463.87">making it making Sokka a middleware in</span> <span data-start="1463.87" data-end="1465.399">that regard would be extremely difficult</span> <span data-start="1465.399" data-end="1468.58">and we would have to actually change how</span> <span data-start="1468.58" data-end="1472.99">connect middleware is defined but what</span> </p>
<p><span data-start="1472.99" data-end="1476.289">I'm working on is a session connect and</span> <span data-start="1476.289" data-end="1480.21">the ability for easy identification of</span> <span data-start="1480.21" data-end="1483.19">Sokka do clients to the session of your</span> <span data-start="1483.19" data-end="1485.379">website so if connect if you're</span> <span data-start="1485.379" data-end="1487.059">leveraging this session component in</span> <span data-start="1487.059" data-end="1490.139">connect you probably have some like</span> <span data-start="1490.139" data-end="1493.21">database data associated to that session</span> <span data-start="1493.21" data-end="1495">because the user might be logged in and</span> <span data-start="1495" data-end="1497.649">making that easy to retrieve from socket</span> <span data-start="1497.649" data-end="1499.779">i/o is certainly one of my goals but</span> <span data-start="1499.779" data-end="1502.59">also make it compatible with any other</span> <span data-start="1502.59" data-end="1504.7">session mechanisms that you might be</span> <span data-start="1504.7" data-end="1508.389">using not just connect and the session</span> <span data-start="1508.389" data-end="1516.499">middleware yep</span> <span data-start="1516.509" data-end="1521.09">nope</span> <span data-start="1521.1" data-end="1524.1">correct yeah any sugg and a wood would</span> <span data-start="1524.1" data-end="1530.549">totally support that yep</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
