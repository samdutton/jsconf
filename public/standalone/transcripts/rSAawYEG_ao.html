<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>rSAawYEG_ao</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/rSAawYEG_ao?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="7.28" data-end="10.38">it's a for instance okay I have an slc</span> <span data-start="10.38" data-end="14.73">directory and and in there is an</span> <span data-start="14.73" data-end="16.379">application GS which most likely</span> <span data-start="16.379" data-end="23.23">requires plenty of other stuff and</span> <span data-start="23.24" data-end="27.72">please practice that and put that in a</span> <span data-start="27.72" data-end="30.66">dist JavaScript application GS and</span> <span data-start="30.66" data-end="33.63">whatever assets you encounter along the</span> <span data-start="33.63" data-end="35.79">way put those recursively in the dist</span> <span data-start="35.79" data-end="38.46">directory that's what the dash a deist</span> <span data-start="38.46" data-end="40.469">says if I hadn't specified an asset</span> <span data-start="40.469" data-end="43.86">rooted wouldn't copy the assets met for</span> <span data-start="43.86" data-end="46.86">the provider actives you can use that</span> <span data-start="46.86" data-end="50.7">from within Ruby code so because it's</span> </p>
<p><span data-start="50.7" data-end="53.55">Ruby API anyway so that's a quite simple</span> <span data-start="53.55" data-end="55.17">there's that the main entry point is</span> <span data-start="55.17" data-end="57.21">gone sprocket secretary and you provide</span> <span data-start="57.21" data-end="59.07">basically the same thing except you can</span> <span data-start="59.07" data-end="60.57">use google being you can use especially</span> <span data-start="60.57" data-end="62.85">double star globbing which is not</span> <span data-start="62.85" data-end="65.33">necessarily available in your shell and</span> <span data-start="65.33" data-end="68.61">and then grab the concatenation save</span> <span data-start="68.61" data-end="70.229">that anywhere and you have a special</span> <span data-start="70.229" data-end="72.42">instant assets as well to install that</span> <span data-start="72.42" data-end="76.14">has it all the assets in the SS root</span> <span data-start="76.14" data-end="80.909">directory so sometimes well you don't</span> <span data-start="80.909" data-end="82.59">over be or you can choose your OB and</span> <span data-start="82.59" data-end="85.77">then for instance you're in a PHP world</span> <span data-start="85.77" data-end="89.28">like so me and therefore you need</span> <span data-start="89.28" data-end="91.5">something else so what you can do is use</span> <span data-start="91.5" data-end="94.799">a CGI script that does all this for you</span> <span data-start="94.799" data-end="97.189">say you have that tree so we have</span> <span data-start="97.189" data-end="100.29">something that kind of look alikes rails</span> <span data-start="100.29" data-end="102.38">application we have a sparkle gml file</span> <span data-start="102.38" data-end="104.369">somewhere up there in the config</span> <span data-start="104.369" data-end="109.95">directory we have our base javascript in</span> <span data-start="109.95" data-end="113.729">javascript out there and we have so that</span> <span data-start="113.729" data-end="115.68">all of those of defaults assumed by the</span> </p>
<p><span data-start="115.68" data-end="117.84">CGI script which is why I am going with</span> <span data-start="117.84" data-end="119.25">the convention here but you could</span> <span data-start="119.25" data-end="122.1">customize this crypt and then we</span> <span data-start="122.1" data-end="124.65">have a vendor directory with brackets</span> <span data-start="124.65" data-end="127.29">and in there one directory post bracket</span> <span data-start="127.29" data-end="130.17">and slc sub sub directories and now you</span> <span data-start="130.17" data-end="132.239">can have assets sub directories as well</span> <span data-start="132.239" data-end="135.81">and stuff like that and you can actually</span> <span data-start="135.81" data-end="137.52">configure all this through the spark</span> <span data-start="137.52" data-end="139.5">HTML file so this package see how much</span> <span data-start="139.5" data-end="141.69">fun would tell you won't say what the</span> <span data-start="141.69" data-end="143.7">load path is so here the lib beth is the</span> <span data-start="143.7" data-end="146.37">javascript directory plus vendors</span> <span data-start="146.37" data-end="149.28">brackets anything slc and the source</span> <span data-start="149.28" data-end="151.8">file the sources that i'm going to want</span> <span data-start="151.8" data-end="154.92">to to pass here or my site jazz first</span> <span data-start="154.92" data-end="156.54">and foremost and then any other j/s</span> <span data-start="156.54" data-end="160.89">after that if if any and i want that to</span> <span data-start="160.89" data-end="164.3">be output you to public sprockets Jess</span> <span data-start="164.3" data-end="168.239">so that's what I would want and you</span> <span data-start="168.239" data-end="173.299">write this and then you have well some</span> <span data-start="173.299" data-end="175.2">configuration to do that so for instance</span> <span data-start="175.2" data-end="177.42">this is Apache configuration and you</span> <span data-start="177.42" data-end="179.549">would just say obviously I want to exec</span> <span data-start="179.549" data-end="184.5">execute cgi's and add the handlers and</span> <span data-start="184.5" data-end="187.44">stuff and say okay if I if I request</span> <span data-start="187.44" data-end="190.23">sprockets that jazz either it exists and</span> <span data-start="190.23" data-end="191.73">then everything's fine or it doesn't</span> <span data-start="191.73" data-end="193.23">exist and then i'm going to rewrite that</span> <span data-start="193.23" data-end="195.69">internally through patched through to my</span> </p>
<p><span data-start="195.69" data-end="197.82">CGI script and i'm going to there's a</span> <span data-start="197.82" data-end="199.35">smaller environment variable that you</span> <span data-start="199.35" data-end="201.69">can put in there which tails the script</span> <span data-start="201.69" data-end="204.359">to actually save its output to the</span> <span data-start="204.359" data-end="206.7">sprockets yes so it's cached after the</span> <span data-start="206.7" data-end="210.989">first request and and all you have to do</span> <span data-start="210.989" data-end="213.6">in your source is basically just called</span> <span data-start="213.6" data-end="215.519">stash Park hds which will pass through</span> <span data-start="215.519" data-end="217.829">to a CGI script and do the concatenation</span> <span data-start="217.829" data-end="220.5">on the fly and obviously that NPH</span> <span data-start="220.5" data-end="223.41">sprockets cgi it's provided by the</span> <span data-start="223.41" data-end="226.17">script so I wanted to show you a couple</span> <span data-start="226.17" data-end="228.239">of things here's down sprockets</span> <span data-start="228.239" data-end="229.56">directory so</span> <span data-start="229.56" data-end="232.5">way to say it was my mouse here so</span> <span data-start="232.5" data-end="235.95">that's the sprockets stuff and I</span> <span data-start="235.95" data-end="238.709">actually have such projects and I wanted</span> <span data-start="238.709" data-end="243.569">to show you so you have all installation</span> <span data-start="243.569" data-end="245.13">details in that script and that script</span> <span data-start="245.13" data-end="249.63">is basically provided by within brackets</span> <span data-start="249.63" data-end="252.72">so you in the X sub directories you you</span> <span data-start="252.72" data-end="254.19">can use that and does all the work for</span> <span data-start="254.19" data-end="255.84">you it's just the Ruby script basically</span> <span data-start="255.84" data-end="262.01">and it does all that work for you and</span> <span data-start="262.01" data-end="265.65">that's that it's provided by sprockets</span> <span data-start="265.65" data-end="267.33">and that's pretty neat union of itself</span> <span data-start="267.33" data-end="269.34">obviously if you're in the rails world</span> <span data-start="269.34" data-end="272.76">as Sam staff and son isn't us many of us</span> <span data-start="272.76" data-end="276.87">are likely to be you have an extra level</span> <span data-start="276.87" data-end="280.56">of candy which is the sprockets rail jam</span> <span data-start="280.56" data-end="286.32">right which is provided as well by Sam</span> <span data-start="286.32" data-end="292.5">and what sprockets Ramsdale is it's a</span> <span data-start="292.5" data-end="295.83">plug-in you just install it or use the</span> <span data-start="295.83" data-end="298.56">same module if you want to and all you</span> <span data-start="298.56" data-end="301.11">have to do really is in your route</span> <span data-start="301.11" data-end="303.12">configuration and that's a simple call</span> <span data-start="303.12" data-end="307.34">that will do all the mapping for you and</span> <span data-start="307.34" data-end="309.57">then instead of using your regular</span> </p>
<p><span data-start="309.57" data-end="312.03">JavaScript include tags you just use a</span> <span data-start="312.03" data-end="314.37">sprocket single tag and that's it and it</span> <span data-start="314.37" data-end="316.74">will do the entire concatenation for</span> <span data-start="316.74" data-end="320.1">this it uses a config sprocket CML file</span> <span data-start="320.1" data-end="321.93">in your config directory in Wales which</span> <span data-start="321.93" data-end="323.46">does pretty much the same stuff as we</span> <span data-start="323.46" data-end="325.8">sell with the pinion with the CGI script</span> <span data-start="325.8" data-end="328.53">and accept that you don't have to do all</span> <span data-start="328.53" data-end="330.09">the Apache configuration and stuff</span> <span data-start="330.09" data-end="331.94">because well stuff the route into the</span> <span data-start="331.94" data-end="336.63">routing you just r out like this and it</span> <span data-start="336.63" data-end="338.52">will handle all the caching disputing it</span> <span data-start="338.52" data-end="340.919">provides rake tasks to install the</span> <span data-start="340.919" data-end="343.35">assets into to precompile that script</span> <span data-start="343.35" data-end="345.57">and put it in your source repository for</span> <span data-start="345.57" data-end="347.58">you if you want to you could do that for</span> <span data-start="347.58" data-end="349.05">instance if you deploy with caps Tran</span> <span data-start="349.05" data-end="351.419">you could do that on a cab deploy hook</span> <span data-start="351.419" data-end="353.669">to every time you deployed free</span> <span data-start="353.669" data-end="355.44">composite everything update to the SS</span> <span data-start="355.44" data-end="357.169">put that</span> <span data-start="357.169" data-end="359.33">you're sore on your server and your</span> <span data-start="359.33" data-end="360.529">deployment server and then you don't</span> <span data-start="360.529" data-end="363.979">have to worry about a thing so that's</span> <span data-start="363.979" data-end="370.4">also recently I was fortunate enough to</span> <span data-start="370.4" data-end="373.009">do some planting for tennis on freckle</span> <span data-start="373.009" data-end="375.349">and on Thomas came back to me and say</span> <span data-start="375.349" data-end="377.33">you know what would be awesome it to</span> <span data-start="377.33" data-end="380.24">bind that with really good JavaScript</span> <span data-start="380.24" data-end="382.999">compression so that we can squeeze even</span> <span data-start="382.999" data-end="385.61">more size out of it and not stop at</span> <span data-start="385.61" data-end="389.24">regular concatenation so yeah indeed</span> <span data-start="389.24" data-end="390.71">just because it's one big file doesn't</span> <span data-start="390.71" data-end="393.11">mean it's one small file which is really</span> <span data-start="393.11" data-end="394.46">weird sentence i'm really happy with it</span> <span data-start="394.46" data-end="400.729">and we have something called yui</span> <span data-start="400.729" data-end="402.499">compressor and why our compressor is</span> <span data-start="402.499" data-end="404.33">arguably the best to shrink are out</span> <span data-start="404.33" data-end="406.58">there currently it's one hundred percent</span> <span data-start="406.58" data-end="409.099">safe and despite that it has a lot of</span> <span data-start="409.099" data-end="413.33">optimizations and the documentation we</span> <span data-start="413.33" data-end="415.969">use on sprockets rails and and the yui</span> <span data-start="415.969" data-end="417.83">compressor wrappers and stuff just</span> <span data-start="417.83" data-end="419.749">mention a couple options like the munch</span> <span data-start="419.749" data-end="421.669">options for instance we just shortens</span> <span data-start="421.669" data-end="423.71">local variable names but there are</span> <span data-start="423.71" data-end="427.719">plenty of optimizations that you can use</span> <span data-start="427.719" data-end="430.909">it's currently seems to be better in</span> <span data-start="430.909" data-end="433.159">yield better results than stuff like</span> <span data-start="433.159" data-end="435.879">jasmine your shrink safe which is JoJo's</span> <span data-start="435.879" data-end="438.349">compressor or pack your stuff like that</span> <span data-start="438.349" data-end="441.02">and one of the good things about it is</span> <span data-start="441.02" data-end="444.08">unless you really really insist on it it</span> <span data-start="444.08" data-end="445.819">doesn't obfuscate and you should not</span> <span data-start="445.819" data-end="448.58">obfuscate your go ever because it makes</span> <span data-start="448.58" data-end="451.189">debugging hell among other things and</span> <span data-start="451.189" data-end="452.899">it's not necessary i mean the</span> <span data-start="452.899" data-end="454.49">compression you're going to get Fisk</span> </p>
<p><span data-start="454.49" data-end="456.83">Asian anyway is you can beat the crap</span> <span data-start="456.83" data-end="458.839">out of that by in GC pinpoints neato</span> <span data-start="458.839" data-end="462.499">doesn't make sense it's distributed as a</span> <span data-start="462.499" data-end="464.779">draw file so one of the small conference</span> <span data-start="464.779" data-end="466.159">you have is that you're going to have</span> <span data-start="466.159" data-end="469.789">some form of GRE installed which is</span> <span data-start="469.789" data-end="471.71">pretty straightforward on in platform</span> <span data-start="471.71" data-end="474.83">better so there's a gem wrapper which</span> <span data-start="474.83" data-end="478.789">again was provided by Sam this is why I</span> <span data-start="478.789" data-end="480.409">can pressure page you've got plenty of</span> <span data-start="480.409" data-end="482.87">information on it it it's birthday Yahoo</span> <span data-start="482.87" data-end="483.61">developing it</span> <span data-start="483.61" data-end="487.12">ok now Sam has a small Ruby wrapper you</span> <span data-start="487.12" data-end="489.28">actually put that together acting this</span> <span data-start="489.28" data-end="492.28">summer right it has a smaller bead</span> <span data-start="492.28" data-end="493.81">wrapper that wraps the right I</span> <span data-start="493.81" data-end="497.229">compressor and lets us access that</span> <span data-start="497.229" data-end="499.96">really easily through Ruby which is</span> <span data-start="499.96" data-end="504.3">awesome and you just install that and</span> <span data-start="504.3" data-end="507.039">you can access the volumes kinds of</span> <span data-start="507.039" data-end="509.53">compression and what's a specific</span> <span data-start="509.53" data-end="510.52">interest to us right now is to</span> </p>
<p><span data-start="510.52" data-end="512.62">JavaScript compressor and here's an</span> <span data-start="512.62" data-end="514.99">example option actually among many which</span> <span data-start="514.99" data-end="516.49">is managed which just tells it to</span> <span data-start="516.49" data-end="518.649">shorten local variable names which has</span> <span data-start="518.649" data-end="521.409">no impact whatsoever and you can tell</span> <span data-start="521.409" data-end="523.45">that it does that it does a few things</span> <span data-start="523.45" data-end="526.18">like replacing a square bracket member</span> <span data-start="526.18" data-end="528.97">access when it's static by a period</span> <span data-start="528.97" data-end="530.62">notation stuff like that so it actually</span> <span data-start="530.62" data-end="534.61">compresses very well and you can also</span> <span data-start="534.61" data-end="537.67">specify the code in the middle goes with</span> <span data-start="537.67" data-end="539.5">the default but you can specify stuff</span> <span data-start="539.5" data-end="541.839">like which Java interpreter you went</span> <span data-start="541.839" data-end="544.57">around and well the job final is located</span> <span data-start="544.57" data-end="546.519">by default it assumes a number of things</span> <span data-start="546.519" data-end="548.05">like the draw file is in the same</span> <span data-start="548.05" data-end="550.87">directory as the jam stuff like that but</span> <span data-start="550.87" data-end="552.94">you can and also notice that a Yui</span> <span data-start="552.94" data-end="555.31">compressor does a lot of things not only</span> </p>
<p><span data-start="555.31" data-end="557.29">JavaScript it does CSS and stuff so we</span> <span data-start="557.29" data-end="558.61">could actually use that as well to</span> <span data-start="558.61" data-end="560.56">compress like CSS assets or stuff like</span> <span data-start="560.56" data-end="567.13">that yeah it is it's distributed along</span> <span data-start="567.13" data-end="569.74">the gem because well it's licensed in a</span> <span data-start="569.74" data-end="571.48">way that lets us do that so you don't</span> <span data-start="571.48" data-end="573.82">have to install and while you are on one</span> <span data-start="573.82" data-end="576.31">side and wave I compressor on one side</span> <span data-start="576.31" data-end="578.649">and the gem on the other side let's put</span> <span data-start="578.649" data-end="580.57">yourself concern so incidentally this</span> <span data-start="580.57" data-end="583.269">thing is currently in production on</span> <span data-start="583.269" data-end="588.399">freckle Quinton's and here's a sample</span> <span data-start="588.399" data-end="590.29">configuration it's a it's very very</span> <span data-start="590.29" data-end="592.18">similar to what we saw earlier except</span> <span data-start="592.18" data-end="594.76">there is this new compress option and</span> <span data-start="594.76" data-end="598">compress can basically be just true or</span> <span data-start="598" data-end="600.699">it can be your hash of options that are</span> <span data-start="600.699" data-end="602.589">passed directly to the yui compressor</span> <span data-start="602.589" data-end="605.26">gem which usually passes them directly</span> <span data-start="605.26" data-end="612.3">to the yui compressor library i think</span> </p>
<p><span data-start="612.3" data-end="614.43">I have mentioned freaking freakish the</span> <span data-start="614.43" data-end="617.25">offical rules I complete mostly</span> <span data-start="617.25" data-end="620.07">freelancers deal with their time in an</span> <span data-start="620.07" data-end="626.94">unobtrusive efficient way and it has</span> <span data-start="626.94" data-end="628.8">this run so you can see it sparking to</span> <span data-start="628.8" data-end="630.21">us out there it's my you I come crash</span> <span data-start="630.21" data-end="633.09">them stuff so it's great and once you've</span> <span data-start="633.09" data-end="635.73">done that you've got all your javascript</span> <span data-start="635.73" data-end="637.38">is neatly structured you can use</span> </p>
<p><span data-start="637.38" data-end="640.14">Constanza it's easily maintainable you</span> <span data-start="640.14" data-end="642.03">have far less margin issues especially</span> <span data-start="642.03" data-end="644.13">as if you were unfortunate enough not to</span> <span data-start="644.13" data-end="646.35">use git and your for instance of</span> <span data-start="646.35" data-end="649.17">subversion and mergers are usually more</span> <span data-start="649.17" data-end="652.1">often than not fail force to be reasoned</span> <span data-start="652.1" data-end="655.71">and so it's you have this comfort of</span> <span data-start="655.71" data-end="658.2">using properties throughout your tree to</span> <span data-start="658.2" data-end="659.91">whatever degree of depth you want I</span> <span data-start="659.91" data-end="661.47">think we have yeah close to 60</span> <span data-start="661.47" data-end="664.47">JavaScript files on freckle and um three</span> <span data-start="664.47" data-end="668.67">or four levels of depth and uh and it's</span> <span data-start="668.67" data-end="670.92">compressed it's me to find well it's not</span> <span data-start="670.92" data-end="673.62">compressed it's it's yeah it's minified</span> <span data-start="673.62" data-end="675.87">in in the best possible way it's</span> <span data-start="675.87" data-end="677.76">constantly they do that one thing the</span> <span data-start="677.76" data-end="679.68">phone is outputted and stuff is great so</span> <span data-start="679.68" data-end="682.2">what's left for us to optimize well for</span> <span data-start="682.2" data-end="685.23">instance you could tweak your assets</span> </p>
<p><span data-start="685.23" data-end="687.39">HTTP server you could gzip for instance</span> <span data-start="687.39" data-end="689.4">which you release the crab it up any</span> <span data-start="689.4" data-end="691.05">kind of wire compression you're going to</span> <span data-start="691.05" data-end="693.87">be able to do and you could cash you</span> <span data-start="693.87" data-end="696.69">could configure your server and now</span> <span data-start="696.69" data-end="698.34">whatever reverse proxies or whatever you</span> <span data-start="698.34" data-end="701.82">have to catch the hang of it and heck</span> <span data-start="701.82" data-end="705.3">out a bit on the client side and if</span> <span data-start="705.3" data-end="707.94">necessary if you decide it's worth it</span> <span data-start="707.94" data-end="710.4">you could actually upload Main Street</span> <span data-start="710.4" data-end="712.89">believes that you use to the Google Ajax</span> </p>
<p><span data-start="712.89" data-end="716.63">API system which we'll see in a moment</span> <span data-start="716.63" data-end="720.18">that again is not necessarily what you</span> <span data-start="720.18" data-end="721.86">systematically want to use because these</span> <span data-start="721.86" data-end="723.21">guys have some form of latency</span> <span data-start="723.21" data-end="727.05">themselves here's an example I've</span> <span data-start="727.05" data-end="728.58">actually configurations actually taken</span> <span data-start="728.58" data-end="730.53">straight out of Thomas book JavaScript</span> <span data-start="730.53" data-end="732.63">performance parts</span> <span data-start="732.63" data-end="735.96">and here we mostly say like very basics</span> <span data-start="735.96" data-end="739.35">like any kind of text resource basically</span> <span data-start="739.35" data-end="744.66">should be compressed and expiry should</span> <span data-start="744.66" data-end="746.67">be active and it should be really far</span> <span data-start="746.67" data-end="748.86">away and to change that we're just going</span> <span data-start="748.86" data-end="750.93">to change names when we use rails</span> <span data-start="750.93" data-end="752.73">application rails automatically adds a</span> <span data-start="752.73" data-end="756.39">time stamp which is M time based at the</span> <span data-start="756.39" data-end="758.94">end of any asset anyway so we're we</span> <span data-start="758.94" data-end="760.5">would add we would have time stamps at</span> <span data-start="760.5" data-end="762.15">the end of all of our assets and if the</span> <span data-start="762.15" data-end="765.51">change we're going to just bypass cash</span> <span data-start="765.51" data-end="767.64">because the the result doesn't feel like</span> <span data-start="767.64" data-end="769.7">it's the same at all even name wise</span> <span data-start="769.7" data-end="772.95">which lets us put really long expiry</span> <span data-start="772.95" data-end="776.64">times here so you see that well cache</span> <span data-start="776.64" data-end="778.17">controllers public by default cache</span> <span data-start="778.17" data-end="780.57">control is most often private I think</span> <span data-start="780.57" data-end="784.41">its rails default on that point which is</span> <span data-start="784.41" data-end="786.57">good for stuff like banking or stuff</span> <span data-start="786.57" data-end="788.4">when you really want to ensure it's not</span> <span data-start="788.4" data-end="789.45">going to be character especially by</span> <span data-start="789.45" data-end="791.97">reverse proxies but here we're going</span> <span data-start="791.97" data-end="795.09">like okay let's uh let's let reverse</span> <span data-start="795.09" data-end="796.56">proxies mostly catch the hell out of</span> <span data-start="796.56" data-end="799.29">this which is great for with increasing</span> <span data-start="799.29" data-end="800.79">throughput while reducing the stress on</span> <span data-start="800.79" data-end="803.85">your application server and we are</span> <span data-start="803.85" data-end="806.4">killing any so V tanks the reason for</span> <span data-start="806.4" data-end="811.92">this is that e tanks or really dependent</span> <span data-start="811.92" data-end="813.57">on the kind of HTTP server you're using</span> <span data-start="813.57" data-end="816.93">and some of them are going to use weird</span> <span data-start="816.93" data-end="821.07">local stuff like the local IP and stuff</span> <span data-start="821.07" data-end="823.23">to use e-tags and so when you start</span> <span data-start="823.23" data-end="825.93">distributing your assets among a CDN or</span> <span data-start="825.93" data-end="829.02">whatever every single node will have</span> <span data-start="829.02" data-end="830.46">different attacks when it's the same</span> <span data-start="830.46" data-end="833.46">resource so we prefer just work with the</span> <span data-start="833.46" data-end="837.48">the fan named and whatever em time we're</span> <span data-start="837.48" data-end="839.61">going to have on the files and rely on</span> <span data-start="839.61" data-end="841.65">the good old if not matter if my fight</span> <span data-start="841.65" data-end="848.04">scenes not modified logic so here are a</span> <span data-start="848.04" data-end="851.25">few numbers that's putting onto a</span> <span data-start="851.25" data-end="853.83">produce better for instance</span> <span data-start="853.83" data-end="856.23">just the example I pulled with just</span> <span data-start="856.23" data-end="858.63">prototype the FX part of script oculus</span> <span data-start="858.63" data-end="864.06">and a very tiny application swept it it</span> <span data-start="864.06" data-end="867.33">originates out close to 300 k and when</span> <span data-start="867.33" data-end="870.93">its consolidated in one file Yui</span> <span data-start="870.93" data-end="875.19">compressed and GZ at it goes to almost</span> <span data-start="875.19" data-end="878.37">just ten percent of that so that's quite</span> <span data-start="878.37" data-end="881.25">significant as far as HTTP requests go</span> <span data-start="881.25" data-end="883.92">well either we play like the old way we</span> <span data-start="883.92" data-end="886.11">have those those massive files and</span> <span data-start="886.11" data-end="887.61">that's going to be in my example just</span> <span data-start="887.61" data-end="890.22">three files which is where under what</span> <span data-start="890.22" data-end="892.68">actual applications use let's say we</span> <span data-start="892.68" data-end="894.86">have a very significant application or</span> <span data-start="894.86" data-end="897.36">not necessarily significant but we use</span> <span data-start="897.36" data-end="900.2">like the structured split sauce approach</span> <span data-start="900.2" data-end="903.48">that can go quickly in many tens of</span> <span data-start="903.48" data-end="907.71">files at the end with this optimization</span> <span data-start="907.71" data-end="909.12">applied there's only one fine there's</span> <span data-start="909.12" data-end="910.44">only one JavaScript with everything</span> <span data-start="910.44" data-end="912.15">that's re dated in it obviously that</span> <span data-start="912.15" data-end="913.74">means that you code your javascript in a</span> <span data-start="913.74" data-end="915.39">way that every single pod detects</span> <span data-start="915.39" data-end="916.65">whether it's applicable to the current</span> <span data-start="916.65" data-end="926.21">page or not and are otherwise obviously</span> <span data-start="926.22" data-end="932.55">yeah yeah yeah because the dictionaries</span> <span data-start="932.55" data-end="934.65">better the dictionaries better basically</span> <span data-start="934.65" data-end="936">so obviously the compressions and works</span> <span data-start="936" data-end="939.18">better and here's a lot of time that</span> <span data-start="939.18" data-end="942.21">with unprimed cash so on that thing</span> <span data-start="942.21" data-end="945.48">considering the I went with a massive</span> <span data-start="945.48" data-end="947.43">amount of files and we have a huge</span> <span data-start="947.43" data-end="949.8">accumulated latency basically just</span> <span data-start="949.8" data-end="952.26">latency and that was on a page that</span> <span data-start="952.26" data-end="954.21">didn't do anything outside loading the</span> <span data-start="954.21" data-end="957.81">scripts no images know CSS so I wasn't</span> <span data-start="957.81" data-end="959.76">even putting stress with like concurrent</span> </p>
<p><span data-start="959.76" data-end="962.04">HTTP connections all the HTTP</span> <span data-start="962.04" data-end="963.48">connections that the browser could open</span> <span data-start="963.48" data-end="966.39">were for JavaScript even so I had close</span> <span data-start="966.39" data-end="969.14">to two seconds latency on localhost</span> <span data-start="969.14" data-end="972.93">right so I'll let you you do the math</span> <span data-start="972.93" data-end="976.2">with like actual online and after that I</span> <span data-start="976.2" data-end="979.38">had close to a half a second of actually</span> <span data-start="979.38" data-end="981.9">sending the data with all optimizations</span> <span data-start="981.9" data-end="985.32">gone I only have one single latency the</span> <span data-start="985.32" data-end="987.45">platen see is actually higher the first</span> <span data-start="987.45" data-end="990.09">time around because I'm hitting the GZ</span> <span data-start="990.09" data-end="992.25">ping online often you know like on the</span> <span data-start="992.25" data-end="993.63">flying cheesy thing so I'm actually</span> <span data-start="993.63" data-end="996.84">assuming here that the my javascript</span> <span data-start="996.84" data-end="999.09">wasn't gzipped yet and wasn't cashed on</span> <span data-start="999.09" data-end="1001.1">server side that I'm like the first</span> <span data-start="1001.1" data-end="1003.14">client ever so even in that worst case</span> <span data-start="1003.14" data-end="1006.44">you know you client-side I'm still</span> <span data-start="1006.44" data-end="1010.03">having barely one fourth or something of</span> <span data-start="1010.03" data-end="1013.34">of the time on the other side and with</span> <span data-start="1013.34" data-end="1015.32">the cash Prime well that's awesome</span> <span data-start="1015.32" data-end="1017.27">because even with cash prime if you have</span> <span data-start="1017.27" data-end="1018.82">a lot of files you still have to request</span> <span data-start="1018.82" data-end="1021.32">to the server stuff like oh by the way</span> <span data-start="1021.32" data-end="1023.89">if not modified scenes blah blah blah</span> <span data-start="1023.89" data-end="1026.99">and so you can still have a lot of</span> <span data-start="1026.99" data-end="1028.91">latency because of that and then I'm</span> <span data-start="1028.91" data-end="1030.59">sure you have very small data transfer</span> <span data-start="1030.59" data-end="1032.21">because it's mostly headers saying oh</span> <span data-start="1032.21" data-end="1034.22">not modified and whatever but you do</span> <span data-start="1034.22" data-end="1037.31">have a lot of Latin see what you do with</span> <span data-start="1037.31" data-end="1039.38">all the optimizations including expiry</span> <span data-start="1039.38" data-end="1041.6">and stuff is that latency is close to</span> <span data-start="1041.6" data-end="1043.58">nail for the simple reason that you said</span> </p>
<p><span data-start="1043.58" data-end="1046.64">Oh long expiry you might file name</span> <span data-start="1046.64" data-end="1048.32">didn't change so it's going to stay on</span> <span data-start="1048.32" data-end="1050.21">server on the client and the plan is</span> <span data-start="1050.21" data-end="1051.86">just going to load it for local and</span> <span data-start="1051.86" data-end="1053.31">bossy interpret</span> <span data-start="1053.31" data-end="1057.41">and that's gonna be ridiculously fast</span> <span data-start="1057.41" data-end="1060.51">obviously your mileage may vary that</span> <span data-start="1060.51" data-end="1062.04">totally depends on your application but</span> <span data-start="1062.04" data-end="1064.14">the savings out there and the factor</span> <span data-start="1064.14" data-end="1065.61">vary but the savings are very</span> <span data-start="1065.61" data-end="1070.08">significant in any case so I mentioned</span> <span data-start="1070.08" data-end="1076.61">Google Ajax libraries API that is a</span> <span data-start="1076.61" data-end="1079.89">great idea i'm basically google just i</span> <span data-start="1079.89" data-end="1084.63">think i have something in there that's</span> <span data-start="1084.63" data-end="1088.05">the javascript performance website yeah</span> <span data-start="1088.05" data-end="1090.62">those are the Google Ajax libraries API</span> <span data-start="1090.62" data-end="1093">basically Google maintains a number of</span> <span data-start="1093" data-end="1096.18">recent versions online for most of the</span> </p>
<p><span data-start="1096.18" data-end="1097.83">Dominion library so obviously jQuery</span> <span data-start="1097.83" data-end="1100.5">jQuery UI prototype script oculus since</span> <span data-start="1100.5" data-end="1103.47">52 when we make it official mootools</span> <span data-start="1103.47" data-end="1106.8">dojo sweet objects Yui the entire thing</span> <span data-start="1106.8" data-end="1109.44">xed core and recently the chrome frame</span> <span data-start="1109.44" data-end="1112.88">system so all of this is available</span> <span data-start="1112.88" data-end="1115.41">through the system you can either use a</span> <span data-start="1115.41" data-end="1117.69">javascript call to build the script call</span> <span data-start="1117.69" data-end="1120.18">or just do a regular script call and</span> <span data-start="1120.18" data-end="1122.55">avoid an extra JavaScript interpretation</span> <span data-start="1122.55" data-end="1126.72">the great thing about this is that the</span> <span data-start="1126.72" data-end="1128.34">Duke top not serving so they have really</span> <span data-start="1128.34" data-end="1131.46">good cash configuration and expiry to do</span> <span data-start="1131.46" data-end="1133.4">massive jet zipping and they have a CDN</span> <span data-start="1133.4" data-end="1136.71">so from that point of view why slow</span> <span data-start="1136.71" data-end="1138.93">would say yay on many aspects and you</span> <span data-start="1138.93" data-end="1143.79">get an a but the thing is this is Google</span> </p>
<p><span data-start="1143.79" data-end="1145.65">CDN this is the same Google City and</span> <span data-start="1145.65" data-end="1147">that sometimes let's just have like a</span> <span data-start="1147" data-end="1149.82">five-second latency on Google Analytics</span> <span data-start="1149.82" data-end="1155.75">trackers right some what</span> <span data-start="1155.75" data-end="1158.16">right it's not the same but I mean in</span> <span data-start="1158.16" data-end="1159.33">the end you get the same kind of</span> <span data-start="1159.33" data-end="1167.49">potential long latency so the is sander</span> <span data-start="1167.49" data-end="1168.87">architecture and don't make any</span> <span data-start="1168.87" data-end="1171.3">guarantee of like really you before</span> <span data-start="1171.3" data-end="1173.34">serving and they don't have to I mean</span> <span data-start="1173.34" data-end="1174.54">they're just providing that as a</span> <span data-start="1174.54" data-end="1176.94">convenient force which is great enough</span> <span data-start="1176.94" data-end="1179.22">the good thing about this what's really</span> <span data-start="1179.22" data-end="1180.6">interesting about this though is that</span> <span data-start="1180.6" data-end="1182.16">you're gonna pay that let into the first</span> <span data-start="1182.16" data-end="1184.35">time the first time you query that thing</span> <span data-start="1184.35" data-end="1186.39">and then you have a really lonely expiry</span> <span data-start="1186.39" data-end="1189.63">and so what's interesting with that is</span> <span data-start="1189.63" data-end="1192.24">that if enough people use that on their</span> <span data-start="1192.24" data-end="1196.68">websites odds are that your user</span> <span data-start="1196.68" data-end="1199.02">probably went already recently to</span> <span data-start="1199.02" data-end="1201.27">website that use that same library</span> </p>
<p><span data-start="1201.27" data-end="1204.57">YouTube through the google Ajax API and</span> <span data-start="1204.57" data-end="1207.18">so we already has that URL in n cached</span> <span data-start="1207.18" data-end="1210.57">and so you're not going to have to load</span> <span data-start="1210.57" data-end="1212.82">it at all you're going to benefit from</span> <span data-start="1212.82" data-end="1214.98">that shared cache system and it's going</span> <span data-start="1214.98" data-end="1219.54">to be good fast um I'd like to say thank</span> <span data-start="1219.54" data-end="1222.15">you to Sam because this is all this is a</span> <span data-start="1222.15" data-end="1226.23">good bacon in system july this is all</span> <span data-start="1226.23" data-end="1228.65">thanks to him it's been working on that</span> <span data-start="1228.65" data-end="1234.54">on whatever spare time he has if any so</span> <span data-start="1234.54" data-end="1236.31">this is all open source and this is own</span> <span data-start="1236.31" data-end="1239.48">get have you're more than invited to</span> <span data-start="1239.48" data-end="1243.24">forking it and play with it there are a</span> <span data-start="1243.24" data-end="1244.65">few things that are on my folks</span> <span data-start="1244.65" data-end="1246.75">currently like the sprockets rails yui</span> <span data-start="1246.75" data-end="1248.97">compressor binding is not yet in the</span> <span data-start="1248.97" data-end="1250.53">optional sprockets warehouse is just in</span> <span data-start="1250.53" data-end="1253.02">my in my fork and some has to do some</span> <span data-start="1253.02" data-end="1255.96">review with it and with that and this</span> <span data-start="1255.96" data-end="1262.46">very tiny audience it's really weird</span> <span data-start="1262.46" data-end="1266.31">i'll just say thank you and um if you</span> <span data-start="1266.31" data-end="1269.15">have any questions probably not you</span> <span data-start="1269.15" data-end="1271.32">probably not anyone actually the odds</span> <span data-start="1271.32" data-end="1282.019">are and uh yeah</span> <span data-start="1282.029" data-end="1288.159">alright</span> <span data-start="1288.169" data-end="1293.869">not in the current version now you will</span> </p>
<p><span data-start="1293.869" data-end="1297.59">Plus that would be kind of weird but uh</span> <span data-start="1297.59" data-end="1299.989">yeah I she needed that you just have to</span> <span data-start="1299.989" data-end="1303.83">patch the city iphone yeah I can see</span> <span data-start="1303.83" data-end="1306.679">what you mean well the CDI is just for</span> <span data-start="1306.679" data-end="1308.96">visuals so you can definitely tweak it</span> <span data-start="1308.96" data-end="1310.369">to whatever needs you have and look at</span> <span data-start="1310.369" data-end="1313.039">the htp power amps and and tweaking that</span> <span data-start="1313.039" data-end="1315.409">probably filter on the remote IP and</span> <span data-start="1315.409" data-end="1317.059">stuff like that and I HTTP basic</span> <span data-start="1317.059" data-end="1319.059">authentication maybe in that case and uh</span> <span data-start="1319.059" data-end="1322.609">and I have it tweaked however you want</span> <span data-start="1322.609" data-end="1324.32">yeah or you could just like upload a new</span> <span data-start="1324.32" data-end="1327.499">sprocket CML and then go but on that's</span> <span data-start="1327.499" data-end="1334.91">what it is</span> <span data-start="1334.92" data-end="1342.64">at all yeah yeah it's done by Sam but it</span> <span data-start="1342.64" data-end="1344.2">has no relation whatsoever to put a type</span> <span data-start="1344.2" data-end="1346.36">or anything it's not really basic</span> </p>
<p><span data-start="1346.36" data-end="1365.59">JavaScript yeah</span> <span data-start="1365.6" data-end="1371.1">anyone know it's I think internally it</span> <span data-start="1371.1" data-end="1373.68">works with the EOB to just change that</span> <span data-start="1373.68" data-end="1376.32">but aside from that I don't think</span> <span data-start="1376.32" data-end="1378.75">there's any specific template featuring</span> <span data-start="1378.75" data-end="1381.27">but since it's a hobby though you're</span> <span data-start="1381.27" data-end="1384">well technically you could you can put</span> <span data-start="1384" data-end="1385.95">on now actually because it's it's going</span> <span data-start="1385.95" data-end="1393.42">to I would have to check in that yeah</span> <span data-start="1393.42" data-end="1395.79">it's I either attr be and technically it</span> <span data-start="1395.79" data-end="1398.76">is Ruby code so you could do whatever or</span> <span data-start="1398.76" data-end="1402.45">is just passing for that small snippet</span> <span data-start="1402.45" data-end="1404.66">that's more than you know a less than</span> <span data-start="1404.66" data-end="1407.67">person equal snippet and replacing from</span> <span data-start="1407.67" data-end="1409.53">a hash but i think it's yah be actually</span> <span data-start="1409.53" data-end="1411.99">and so that you could do loops or</span> <span data-start="1411.99" data-end="1416.7">interpolation or anything i'm actually</span> <span data-start="1416.7" data-end="1421.57">i'm just check that out very quickly</span> <span data-start="1421.58" data-end="1425.22">there's no require a visa that sounds</span> <span data-start="1425.22" data-end="1427.89">like constant oh well yeah but that's</span> <span data-start="1427.89" data-end="1430.29">just brackets so i would have to i'm</span> <span data-start="1430.29" data-end="1435.02">just up in a quick sprocket source</span> <span data-start="1435.02" data-end="1437.31">that's actually not going to be on that</span> <span data-start="1437.31" data-end="1442.86">session I'm going to have multiple users</span> <span data-start="1442.86" data-end="1448.07">on that thing I tell you that right away</span> <span data-start="1448.07" data-end="1450.309">yeah</span> <span data-start="1450.309" data-end="1463.43">so sprockets</span> <span data-start="1463.44" data-end="1466.71">so the way it interpolates as a</span> <span data-start="1466.71" data-end="1479.42">preprocessor</span> <span data-start="1479.43" data-end="1482.1">now it doesn't use your be so it's it's</span> <span data-start="1482.1" data-end="1488.37">most likely just yeah it's just a G sub</span> <span data-start="1488.37" data-end="1492.81">call so currently it uh it wouldn't let</span> <span data-start="1492.81" data-end="1494.91">you do any significant yeah there's a</span> <span data-start="1494.91" data-end="1497.58">small interpolate constants call and it</span> <span data-start="1497.58" data-end="1500.94">does a G sub so and pools for my hash so</span> <span data-start="1500.94" data-end="1502.71">currently it doesn't do anything like</span> <span data-start="1502.71" data-end="1504.93">that but indeed especially as its Ruby</span> <span data-start="1504.93" data-end="1506.94">based you could just pull off your be</span> <span data-start="1506.94" data-end="1511.29">and do an ARB eval of your stuff and you</span> <span data-start="1511.29" data-end="1515.64">gain the whole interspersing the whole</span> <span data-start="1515.64" data-end="1517.65">ability to intersperse Ruby code in your</span> <span data-start="1517.65" data-end="1519.18">template and get some form of templating</span> <span data-start="1519.18" data-end="1525.21">because of that do you have any specific</span> <span data-start="1525.21" data-end="1529.28">like you</span> <span data-start="1529.29" data-end="1533.25">right</span> <span data-start="1533.26" data-end="1545.779">mm-hmm</span> <span data-start="1545.789" data-end="1551.669">right yeah so stuff that you could yeah</span> <span data-start="1551.669" data-end="1553.409">that you can do with like load or</span> <span data-start="1553.409" data-end="1556.289">regular load codes and stuff like that</span> <span data-start="1556.289" data-end="1575.139">oh yeah</span> <span data-start="1575.149" data-end="1579.979">either that or one primitive form of</span> <span data-start="1579.979" data-end="1582.229">that would be to just use that to switch</span> <span data-start="1582.229" data-end="1584.119">between several configuration files but</span> <span data-start="1584.119" data-end="1585.71">the gist final concatenation plan</span> <span data-start="1585.71" data-end="1589.489">selection and to get finer grained yes</span> <span data-start="1589.489" data-end="1591.32">we need stuff like if therefore on</span> <span data-start="1591.32" data-end="1594.44">whatever an hour and specific well and</span> <span data-start="1594.44" data-end="1595.849">then we just have our includes or</span> <span data-start="1595.849" data-end="1623.01">regular include codes</span> <span data-start="1623.02" data-end="1628.85">huh</span> <span data-start="1628.86" data-end="1632.37">alright well thank you for having been</span> <span data-start="1632.37" data-end="1654.54">the elite group in this session and</span> <span data-start="1654.55" data-end="1678.58">one short one long then</span> <span data-start="1678.59" data-end="1681.75">right but then you would depend on Ruby</span> <span data-start="1681.75" data-end="1685.98">and rubygems basically yeah yeah which</span> <span data-start="1685.98" data-end="1688.71">are however today mostly instant by</span> <span data-start="1688.71" data-end="1690.33">default on just about any distribution</span> <span data-start="1690.33" data-end="1702.96">but uh I think I see where you're going</span> <span data-start="1702.97" data-end="1705.68">it does have I don't know how they well</span> <span data-start="1705.68" data-end="1707.3">you do have a build process today</span> <span data-start="1707.3" data-end="1708.89">because you're already cutting your</span> <span data-start="1708.89" data-end="1710.75">source down and slicing and dicing and</span> <span data-start="1710.75" data-end="1712.37">then building building it back up again</span> <span data-start="1712.37" data-end="1715.52">and now it reminds me of the early days</span> <span data-start="1715.52" data-end="1717.5">of mootools where their main selling</span> <span data-start="1717.5" data-end="1719.03">point was like oh you can just grab</span> <span data-start="1719.03" data-end="1720.53">whatever and we're going to concatenate</span> <span data-start="1720.53" data-end="1725.84">for you and now and now we're yeah there</span> </p>
<p><span data-start="1725.84" data-end="1728">I think any anytime you go into</span> <span data-start="1728" data-end="1730.28">real-world application that actually</span> <span data-start="1730.28" data-end="1733.1">depend heavily on JavaScript what you're</span> <span data-start="1733.1" data-end="1736.04">gonna need that currently like where you</span> <span data-start="1736.04" data-end="1738.92">know 37signals mostly does regular full</span> <span data-start="1738.92" data-end="1740.87">concatenation they have this big old</span> <span data-start="1740.87" data-end="1743.9">digesting provided by rails and then the</span> <span data-start="1743.9" data-end="1747.11">cash the just cash it and having a fine</span> <span data-start="1747.11" data-end="1750.56">jus sittin by apache but they don't have</span> <span data-start="1750.56" data-end="1752.33">required they don't have anything they</span> <span data-start="1752.33" data-end="1755.69">have to basically explicitly grab</span> <span data-start="1755.69" data-end="1757.88">everything by alphabetical order and put</span> <span data-start="1757.88" data-end="1760.82">that in there and there's no there's no</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
