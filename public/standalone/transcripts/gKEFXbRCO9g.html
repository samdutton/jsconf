<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>gKEFXbRCO9g</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/gKEFXbRCO9g?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="9.83" data-end="13.19">so I'm talking about caste and nodejs</span> <span data-start="13.19" data-end="15.69">how the agenda two things I want to</span> <span data-start="15.69" data-end="16.8">really cover it's kind of almost two</span> <span data-start="16.8" data-end="19.859">different presentations in a way is an</span> <span data-start="19.859" data-end="22.35">introduction to cast and then kind of</span> <span data-start="22.35" data-end="25.47">things we learned as we as we built cast</span> <span data-start="25.47" data-end="30.029">as a project on top of nodejs so you</span> <span data-start="30.029" data-end="32.399">know the background of this is auto</span> <span data-start="32.399" data-end="35.399">scaling is mostly a dirty dirty lie it</span> <span data-start="35.399" data-end="37.02">doesn't really exist in the real world</span> <span data-start="37.02" data-end="39.03">some people do it you can Auto scale web</span> <span data-start="39.03" data-end="42.149">servers but overall most companies that</span> <span data-start="42.149" data-end="43.71">aren't Google or Facebook or you know</span> <span data-start="43.71" data-end="45.149">have massive investments in</span> <span data-start="45.149" data-end="47.07">infrastructure don't really have auto</span> <span data-start="47.07" data-end="49.91">scaling solutions but on the other hand</span> <span data-start="49.91" data-end="52.26">resources like servers or storage are</span> <span data-start="52.26" data-end="54.39">getting easier and easier to acquire but</span> <span data-start="54.39" data-end="56.43">the apps themselves are just not ready</span> <span data-start="56.43" data-end="58.77">to auto scale so what we start looking</span> <span data-start="58.77" data-end="61.949">at was what infrastructure is missing to</span> <span data-start="61.949" data-end="64.019">make this work and we really felt it</span> <span data-start="64.019" data-end="65.85">focus around deployment and service</span> <span data-start="65.85" data-end="68.46">management and that is very different</span> <span data-start="68.46" data-end="70.17">than configuration management there is</span> <span data-start="70.17" data-end="71.58">some overlap especially the closer you</span> <span data-start="71.58" data-end="72.63">get to service management with</span> <span data-start="72.63" data-end="74.4">configuration management chef and puppet</span> <span data-start="74.4" data-end="77.25">and such but we felt there's big enough</span> <span data-start="77.25" data-end="79.5">difference there it's you know you can</span> <span data-start="79.5" data-end="81.6">focus just on this deployment and</span> <span data-start="81.6" data-end="83.34">service management part and be very good</span> <span data-start="83.34" data-end="87.15">at that so at the time we're all working</span> <span data-start="87.15" data-end="89.369">for a startup called cloud kick and</span> <span data-start="89.369" data-end="90.45">we're like well screw this let's just</span> <span data-start="90.45" data-end="92.009">start writing code and do it so that's</span> <span data-start="92.009" data-end="95.759">what we did so a cast at the very</span> <span data-start="95.759" data-end="98.729">highest level today is deployment as an</span> </p>
<p><span data-start="98.729" data-end="102.96">HTTP API you can install applications</span> <span data-start="102.96" data-end="104.579">you create a tarball you upload it and</span> <span data-start="104.579" data-end="107.25">it goes you do things like upgrading it</span> <span data-start="107.25" data-end="111.479">once it's deployed start stop restart it</span> <span data-start="111.479" data-end="113.159">has built in monitor native applications</span> <span data-start="113.159" data-end="113.939">so you can tell if your application</span> <span data-start="113.939" data-end="116.729">actually started it has built an access</span> <span data-start="116.729" data-end="118.29">to the log files of those apps create</span> <span data-start="118.29" data-end="120.09">and then in a long run we want to do</span> <span data-start="120.09" data-end="121.68">things like full app configuration</span> <span data-start="121.68" data-end="123.689">across the cluster which is kind of a</span> <span data-start="123.689" data-end="126.36">miniature zookeeper</span> <span data-start="126.36" data-end="129.82">so at a high level this is what we want</span> </p>
<p><span data-start="129.82" data-end="131.32">Cass to look like in the long run it's</span> <span data-start="131.32" data-end="133.66">not all the way there right now but</span> <span data-start="133.66" data-end="135.13">basically have a series of agents that</span> <span data-start="135.13" data-end="136.87">install on your servers wherever they</span> <span data-start="136.87" data-end="139.6">are cast doesn't really care then</span> <span data-start="139.6" data-end="141.76">there's a set of rest ap is that used to</span> <span data-start="141.76" data-end="143.71">communicate with those agents and those</span> <span data-start="143.71" data-end="144.97">agents within cells are kind of</span> <span data-start="144.97" data-end="146.71">self-organizing talk to each other over</span> <span data-start="146.71" data-end="149.77">peer-to-peer protocol so basically your</span> <span data-start="149.77" data-end="151.87">cast client or a web app or whatever</span> <span data-start="151.87" data-end="154.21">interface you want talks over this rest</span> <span data-start="154.21" data-end="156.49">api to your servers which is very</span> <span data-start="156.49" data-end="158.23">different compared to the interaction</span> <span data-start="158.23" data-end="159.88">you have with a traditional system like</span> <span data-start="159.88" data-end="162.04">puppet or chef where it's generally you</span> <span data-start="162.04" data-end="163.45">have a central repository of your</span> <span data-start="163.45" data-end="165.34">configuration you know this puppet</span> <span data-start="165.34" data-end="166.93">master and there's all these puppet</span> <span data-start="166.93" data-end="168.3">agents that pull down that configuration</span> <span data-start="168.3" data-end="171.85">it's just for deployment stuff you want</span> <span data-start="171.85" data-end="173.5">much more control over when things are</span> <span data-start="173.5" data-end="175.81">happening you know when you do a upgrade</span> <span data-start="175.81" data-end="177.52">of your web app you want to all happen</span> <span data-start="177.52" data-end="178.72">in all your web servers at a specific</span> <span data-start="178.72" data-end="180.67">time we're doing incremental rolling out</span> <span data-start="180.67" data-end="183.19">of it which is just not how most</span> <span data-start="183.19" data-end="185.05">implementations of puppet and chef are</span> <span data-start="185.05" data-end="189.34">done so cast has been in development for</span> <span data-start="189.34" data-end="192.459">a while our first release like public</span> <span data-start="192.459" data-end="194.05">release that we actually think is usable</span> <span data-start="194.05" data-end="197.17">was about two weeks ago it's focused on</span> <span data-start="197.17" data-end="198.79">the single mesh machine experience which</span> <span data-start="198.79" data-end="200.59">means we don't do much stuff with multi</span> <span data-start="200.59" data-end="203.17">machine at all right now but it's</span> <span data-start="203.17" data-end="204.73">focused on giving you a REST API to</span> <span data-start="204.73" data-end="207.06">control your apps on top of that server</span> <span data-start="207.06" data-end="210.01">it's you know it's open source and</span> <span data-start="210.01" data-end="211.57">there's a big website and all that kind</span> <span data-start="211.57" data-end="214.03">of stuff so I wanted to give a little</span> <span data-start="214.03" data-end="219.07">mini demo of cast so I'm going to start</span> <span data-start="219.07" data-end="224.48">the agent oops</span> <span data-start="224.49" data-end="228.69">okay so it started an agent on my laptop</span> <span data-start="228.69" data-end="235.3">and the command line client just a</span> <span data-start="235.3" data-end="236.98">simple command line client that wraps</span> <span data-start="236.98" data-end="242.07">with things on the server so for example</span> <span data-start="242.07" data-end="244.92">services list shows my running services</span> <span data-start="244.92" data-end="248.44">then I can go to that service and tail</span> <span data-start="248.44" data-end="254.38">it and if I can do things like curl that</span> </p>
<p><span data-start="254.38" data-end="259.78">URL it you know the server logs that</span> <span data-start="259.78" data-end="261.55">request you know and you can see it over</span> <span data-start="261.55" data-end="263.26">this command line client so that's the</span> <span data-start="263.26" data-end="264.88">simplest things you know standing</span> <span data-start="264.88" data-end="267.52">started with cast you can do it has a</span> <span data-start="267.52" data-end="270.73">lot more to it well a lot more to it in</span> <span data-start="270.73" data-end="272.8">the ways so like how you make something</span> <span data-start="272.8" data-end="275.56">a cast project as a thing called cast</span> <span data-start="275.56" data-end="279.73">that JSON which defines you know general</span> <span data-start="279.73" data-end="282.58">things about the server defines how you</span> <span data-start="282.58" data-end="285.37">get into the service this example is</span> <span data-start="285.37" data-end="287.83">server Jas is Ritu nodejs but it could</span> <span data-start="287.83" data-end="289.24">be any app you know you could have a</span> <span data-start="289.24" data-end="290.83">rails thing there or a hmong girl or</span> <span data-start="290.83" data-end="292.48">whatever you wanted it's not really no</span> </p>
<p><span data-start="292.48" data-end="294.67">Jay a specific the actual thing you're</span> <span data-start="294.67" data-end="296.83">deploying it also has things like</span> <span data-start="296.83" data-end="299.56">built-in health checks so we know that</span> <span data-start="299.56" data-end="302.23">this service should create an HTTP</span> <span data-start="302.23" data-end="304.51">server on this port and we expect it 200</span> <span data-start="304.51" data-end="305.8">from it if we're not getting that we</span> <span data-start="305.8" data-end="309.54">consider the services down as a problem</span> <span data-start="309.54" data-end="316.75">okay so there's a little bit of history</span> <span data-start="316.75" data-end="320.14">to cast it's been kind of in development</span> <span data-start="320.14" data-end="323.17">for about 10 months and you can see</span> <span data-start="323.17" data-end="324.79">developments been up and down there's</span> <span data-start="324.79" data-end="327.82">some reason behind that the first thing</span> <span data-start="327.82" data-end="329.77">that happened why development kind of</span> <span data-start="329.77" data-end="332.83">paused I would say is we got our start</span> <span data-start="332.83" data-end="335.14">up got acquired by Rackspace and so all</span> <span data-start="335.14" data-end="336.37">of us were distracted with things like</span> <span data-start="336.37" data-end="339.52">you know lawyers making sure our source</span> <span data-start="339.52" data-end="341.29">code didn't have the wrong IP in it and</span> <span data-start="341.29" data-end="343.69">you know that kind of stuff and then we</span> <span data-start="343.69" data-end="345.73">got busy began year and then what really</span> <span data-start="345.73" data-end="347.71">changed our development and well we're</span> <span data-start="347.71" data-end="349.81">ready to go back on and work on it but</span> <span data-start="349.81" data-end="351.64">no Jay s04 came out and it really</span> <span data-start="351.64" data-end="353.26">enabled us and fix a lot of the issues</span> <span data-start="353.26" data-end="355.27">we saw in earlier versions of node and</span> <span data-start="355.27" data-end="357.49">so we kind of have this 10-month history</span> <span data-start="357.49" data-end="358.28">of</span> <span data-start="358.28" data-end="360.5">30 for you know we did a lot of</span> <span data-start="360.5" data-end="362.27">prototyping a lot of dev work but after</span> <span data-start="362.27" data-end="363.53">04 we actually have something that we</span> <span data-start="363.53" data-end="367.43">feel that's like usable by people so I</span> <span data-start="367.43" data-end="368.6">want to go through a lot of just our</span> <span data-start="368.6" data-end="370.97">lessons learned with building cast as a</span> <span data-start="370.97" data-end="373.97">node.js application because I think</span> <span data-start="373.97" data-end="375.169">that's where there's a lot of value for</span> <span data-start="375.169" data-end="376.97">people is you know we made a lot of</span> <span data-start="376.97" data-end="378.11">mistakes because we started 10 months</span> <span data-start="378.11" data-end="379.04">ago and there are lots of different</span> <span data-start="379.04" data-end="380.68">things that you do differently nowadays</span> <span data-start="380.68" data-end="385.43">the first one is just use NPM when we</span> <span data-start="385.43" data-end="387.11">started there were like three other</span> <span data-start="387.11" data-end="389.75">package managers and none of them were</span> <span data-start="389.75" data-end="392.96">particularly good and to say the truth I</span> <span data-start="392.96" data-end="394.25">don't think NPM was that good either at</span> <span data-start="394.25" data-end="396.41">the point but at this point there's no</span> <span data-start="396.41" data-end="399.5">reason not to choose em p.m. today</span> <span data-start="399.5" data-end="401.72">things like the local module install so</span> <span data-start="401.72" data-end="403.7">you'd bundling entire app into one we</span> <span data-start="403.7" data-end="405.47">put you know one set of node modules is</span> <span data-start="405.47" data-end="407.57">a huge improvement it makes it very easy</span> <span data-start="407.57" data-end="410.45">to move apps around servers the other</span> <span data-start="410.45" data-end="412.79">thing we've used a lot is internal NPM</span> <span data-start="412.79" data-end="415.28">registry cloud kick because we have some</span> <span data-start="415.28" data-end="417.53">products that are not open source but we</span> <span data-start="417.53" data-end="418.82">have so we want those modules use the</span> <span data-start="418.82" data-end="420.169">same pattern though so that if we ever</span> <span data-start="420.169" data-end="421.52">do make them open source is very easy</span> <span data-start="421.52" data-end="425.419">it's flipping a switch so one thing</span> <span data-start="425.419" data-end="426.89">about using things for mpm though is</span> <span data-start="426.89" data-end="430.01">that the community part of a module is</span> <span data-start="430.01" data-end="432.71">the most important thing careful of</span> <span data-start="432.71" data-end="434.99">single author you know I'm learning</span> <span data-start="434.99" data-end="437.09">nodejs modules because there's a lot of</span> <span data-start="437.09" data-end="439.64">them what you end up if you just have to</span> <span data-start="439.64" data-end="441.05">know that if you know this guy goes away</span> <span data-start="441.05" data-end="442.46">you're going to own that module and</span> <span data-start="442.46" data-end="444.47">we've done that a couple times sometimes</span> <span data-start="444.47" data-end="446.18">we submit patches they just ignore them</span> <span data-start="446.18" data-end="447.8">other times they're active and they take</span> <span data-start="447.8" data-end="449.51">them back but just be aware there's a</span> <span data-start="449.51" data-end="451.07">lot of modules out there that don't have</span> <span data-start="451.07" data-end="455.75">a lot of active maintain errs so a big</span> <span data-start="455.75" data-end="457.13">thing we learned when we started doing</span> <span data-start="457.13" data-end="459.83">node is you know we were originally a</span> <span data-start="459.83" data-end="462.47">twisted Python shop and so we had a lot</span> <span data-start="462.47" data-end="464.45">of unit tests already we're doing a lot</span> <span data-start="464.45" data-end="466.28">of heavy unit testing but it's very</span> <span data-start="466.28" data-end="469.1">important with JavaScript that there is</span> <span data-start="469.1" data-end="471.05">no compiler so you really need test</span> <span data-start="471.05" data-end="472.85">cases to show that you didn't break</span> <span data-start="472.85" data-end="475.81">something we started using expresso</span> <span data-start="475.81" data-end="478.58">which is pretty common for most people</span> <span data-start="478.58" data-end="480.62">and we felt it was great for little web</span> <span data-start="480.62" data-end="483.53">apps but we felt for our service</span> <span data-start="483.53" data-end="484.64">especially with the agent has a lot of</span> <span data-start="484.64" data-end="487.46">state in it it just wasn't sustainable</span> <span data-start="487.46" data-end="490.099">to keep using expresso so we wrote</span> <span data-start="490.099" data-end="492.8">something called whiskey which is a</span> <span data-start="492.8" data-end="494.69">you know test runner but does a lot of</span> <span data-start="494.69" data-end="497.629">things differently every test files ran</span> <span data-start="497.629" data-end="499.61">in a subprocess for example so if you a</span> <span data-start="499.61" data-end="501.229">lot of like global variable state or</span> <span data-start="501.229" data-end="504.44">state changes inside your app you can</span> <span data-start="504.44" data-end="506.81">test that in whiskey I mean need a lot</span> <span data-start="506.81" data-end="508.849">more isolation between processes which</span> <span data-start="508.849" data-end="510.199">was really important for us because our</span> <span data-start="510.199" data-end="513.14">a lot of our app is you know downloading</span> <span data-start="513.14" data-end="515.81">a file you know spawning a subprocess to</span> <span data-start="515.81" data-end="518.18">do tar things like that which are not</span> <span data-start="518.18" data-end="523.82">very easy to do in expresso so I want to</span> <span data-start="523.82" data-end="527.6">show one thing from expresso which yeah</span> <span data-start="527.6" data-end="530">internet it's not there good so one of</span> <span data-start="530" data-end="531.41">things we built on top of expresso is</span> <span data-start="531.41" data-end="533.959">test coverage sorry buildings have a</span> <span data-start="533.959" data-end="536.57">whiskey is test coverage so if you've</span> <span data-start="536.57" data-end="538.37">seen like coverage up high for python is</span> <span data-start="538.37" data-end="541.79">a very similar system you know so you</span> <span data-start="541.79" data-end="543.98">have the overall report of you know we</span> <span data-start="543.98" data-end="545.42">only have sixty-three percent test</span> <span data-start="545.42" data-end="546.8">coverage which is pretty terrible and</span> <span data-start="546.8" data-end="549.769">we're working on fixing that but the</span> <span data-start="549.769" data-end="551.66">cool thing is you can see exactly what</span> <span data-start="551.66" data-end="554.54">lines were run as part of whiskey so you</span> <span data-start="554.54" data-end="556.13">can see you know it parsed this this</span> <span data-start="556.13" data-end="558.829">file so this this line was ran but the</span> <span data-start="558.829" data-end="560.209">actual function was never called so this</span> <span data-start="560.209" data-end="562.52">line was never ran so it's you know very</span> <span data-start="562.52" data-end="564.29">easy to see how to improve your test</span> <span data-start="564.29" data-end="572.81">cases so that gets to like lint you</span> <span data-start="572.81" data-end="575.029">should also use Jace hint or jslint</span> <span data-start="575.029" data-end="577.1">depends on if you believe crockford is</span> <span data-start="577.1" data-end="579.17">right all the time it's kind of your</span> <span data-start="579.17" data-end="582.68">choice there is no J's hint which makes</span> <span data-start="582.68" data-end="585.29">it very easy just MPM install so you</span> <span data-start="585.29" data-end="587.27">know use that the one project we've been</span> <span data-start="587.27" data-end="589.04">using a lot of though is Google closure</span> <span data-start="589.04" data-end="590.839">linter which is actually written in</span> </p>
<p><span data-start="590.839" data-end="594.23">Python but in and it enforces code style</span> <span data-start="594.23" data-end="595.699">according to google's coding style</span> <span data-start="595.699" data-end="598.399">guidelines which if you don't like well</span> <span data-start="598.399" data-end="600.02">you probably shouldn't use it but we</span> <span data-start="600.02" data-end="602.089">felt we found that it was very helpful</span> <span data-start="602.089" data-end="603.829">just to have us you know coding standard</span> <span data-start="603.829" data-end="605">and we're just gonna here to the Google</span> <span data-start="605" data-end="607.79">coding standard and closure Lintz a very</span> <span data-start="607.79" data-end="611.089">helpful tool for maintaining that now</span> <span data-start="611.089" data-end="612.8">one thing you hear a lot about on the</span> <span data-start="612.8" data-end="613.94">front end side if you'll using the</span> <span data-start="613.94" data-end="617.87">closure compiler to you know detect to</span> <span data-start="617.87" data-end="619.73">do compile the JavaScript it's a single</span> <span data-start="619.73" data-end="621.649">file right and compress it but we're</span> <span data-start="621.649" data-end="625.16">using it as a linting step as a static</span> <span data-start="625.16" data-end="626.38">analysis tool</span> <span data-start="626.38" data-end="630.32">so right now it works great for single</span> <span data-start="630.32" data-end="633.2">file statical analysis but it doesn't</span> <span data-start="633.2" data-end="634.97">understand yet like the node module</span> <span data-start="634.97" data-end="637.22">structure or things like that we're</span> <span data-start="637.22" data-end="639.23">looking at how to do that so that you</span> <span data-start="639.23" data-end="643.78">know it understands cross module errors</span> <span data-start="643.78" data-end="646.07">so here's an example of what it can do</span> <span data-start="646.07" data-end="648.2">today very easily you can detect things</span> <span data-start="648.2" data-end="650.45">like inconsistent return types from the</span> <span data-start="650.45" data-end="652.37">documented types you know unused</span> <span data-start="652.37" data-end="655.34">variables in a lot of kind of basic</span> <span data-start="655.34" data-end="656.54">static analysis stuff that you just</span> <span data-start="656.54" data-end="659.3">don't have normally in JavaScript and so</span> <span data-start="659.3" data-end="660.47">it's a very easy tool to kind of</span> <span data-start="660.47" data-end="665.78">repurpose from the front end Express you</span> <span data-start="665.78" data-end="668.42">should just use it when we started we</span> <span data-start="668.42" data-end="669.92">thought oh HTTP is really easy there's</span> <span data-start="669.92" data-end="671.99">all these simple examples we'll just you</span> <span data-start="671.99" data-end="673.73">know right use HTTP router and do our</span> <span data-start="673.73" data-end="675.53">own thing and that was like totally a</span> <span data-start="675.53" data-end="678.14">mistake you know you should just use</span> </p>
<p><span data-start="678.14" data-end="680.63">Express there's no like it's so small</span> <span data-start="680.63" data-end="683.03">and the scale of things you know you</span> <span data-start="683.03" data-end="684.29">should just use it it has a lot of</span> <span data-start="684.29" data-end="685.34">utilities it's going to keep getting</span> <span data-start="685.34" data-end="687.26">better whereas if you just do your own</span> <span data-start="687.26" data-end="688.4">thing it's you're always going to come</span> <span data-start="688.4" data-end="692.6">be stuck in your world so a little story</span> <span data-start="692.6" data-end="698.96">about TLS when we started it frankly</span> <span data-start="698.96" data-end="701.27">didn't work well we started using just</span> </p>
<p><span data-start="701.27" data-end="705.83">HTTP which you know was easy but it just</span> <span data-start="705.83" data-end="707.57">didn't you know and then we like oh</span> <span data-start="707.57" data-end="708.92">we'll just turn on SSL one day when</span> <span data-start="708.92" data-end="710.6">we're ready and we turned it on and it</span> <span data-start="710.6" data-end="712.64">completely bombed just nothing would</span> <span data-start="712.64" data-end="716.66">work at all so that was 02 back in like</span> <span data-start="716.66" data-end="719.03">september-october last year and we're</span> <span data-start="719.03" data-end="722.18">like well okay so ice works with Ryan</span> <span data-start="722.18" data-end="723.35">Allah and Ryan did a lot of the work to</span> <span data-start="723.35" data-end="728.48">to rewrite the whole SSL stack and you</span> <span data-start="728.48" data-end="730.94">know we did it and it mostly works in 04</span> <span data-start="730.94" data-end="735.59">if you using since 06 for six or so it's</span> <span data-start="735.59" data-end="738.05">actually generally works for everything</span> <span data-start="738.05" data-end="739.37">we haven't found many bugs since then</span> <span data-start="739.37" data-end="741.08">but if you find a bug please let us know</span> <span data-start="741.08" data-end="748.34">we'll fix it streams so especially pries</span> <span data-start="748.34" data-end="749.93">ero for we had a lot of problems with</span> <span data-start="749.93" data-end="752.18">streams the API wasn't well defined</span> <span data-start="752.18" data-end="754.7">there's lots of other issues for example</span> <span data-start="754.7" data-end="757.34">we would untie our file or cat like over</span> <span data-start="757.34" data-end="760.11">sorry uploading a file over HTTP</span> <span data-start="760.11" data-end="762">streamed up pipe into the HTTP stream</span> <span data-start="762" data-end="763.649">and I would have like you know a twenty</span> <span data-start="763.649" data-end="765.779">percent chance of working successfully</span> <span data-start="765.779" data-end="768.269">that's not the truth anymore there's no</span> <span data-start="768.269" data-end="769.41">reason to like reinvent your own</span> <span data-start="769.41" data-end="770.76">streaming API if you're like moving</span> <span data-start="770.76" data-end="772.589">files around with HTTP you should just</span> <span data-start="772.589" data-end="774.48">use pipe there are some issues with</span> <span data-start="774.48" data-end="776.779">error handling so it's not great but</span> <span data-start="776.779" data-end="778.68">there's been a discussion as we</span> <span data-start="778.68" data-end="780.75">discussed yesterday node commit was kind</span> <span data-start="780.75" data-end="782.04">of trying to improve some of that stream</span> <span data-start="782.04" data-end="786.269">error handling I want talk about flow</span> <span data-start="786.269" data-end="790.11">control for a minute people come to node</span> <span data-start="790.11" data-end="791.25">there's a lot of people talking about</span> <span data-start="791.25" data-end="793.56">promises and other you know node fibers</span> <span data-start="793.56" data-end="796.95">and other solutions we've tried to stay</span> <span data-start="796.95" data-end="801.329">away from them as much as possible you</span> <span data-start="801.329" data-end="804.24">know it's not JA it's not javascript is</span> <span data-start="804.24" data-end="805.92">not VA it's not node at that point we</span> <span data-start="805.92" data-end="807.899">focused on using a sink is one we use a</span> <span data-start="807.899" data-end="810.6">lot we found that very good for our use</span> <span data-start="810.6" data-end="813.48">cases provides you know 20 odd utility</span> <span data-start="813.48" data-end="815.57">functions like parallel serialized map</span> <span data-start="815.57" data-end="817.62">that prevent you know the callback</span> <span data-start="817.62" data-end="822.18">chaining madness the other very common</span> <span data-start="822.18" data-end="824.55">popular one is called step you know be</span> <span data-start="824.55" data-end="826.29">so basically pick a way to do</span> <span data-start="826.29" data-end="828.3">asynchronous things that's not just</span> <span data-start="828.3" data-end="829.8">chaining callbacks you know pick a</span> <span data-start="829.8" data-end="831.12">library that gives you a little bit of</span> <span data-start="831.12" data-end="832.98">extraction but I wouldn't recommend</span> <span data-start="832.98" data-end="834.779">going off and using node fibers or</span> <span data-start="834.779" data-end="836.64">investing really having promises right</span> <span data-start="836.64" data-end="842.339">now kind of one lesson through all this</span> <span data-start="842.339" data-end="847.769">was just send patches you know Ryan is</span> <span data-start="847.769" data-end="849.209">very receptive to patches that fix</span> <span data-start="849.209" data-end="852.06">things you know when we started you know</span> <span data-start="852.06" data-end="853.32">different people on our team who</span> <span data-start="853.32" data-end="854.61">contribute quite a few patches at this</span> <span data-start="854.61" data-end="856.829">point and it's actually pretty easy you</span> <span data-start="856.829" data-end="858.81">know make a test case that breaks people</span> <span data-start="858.81" data-end="861.36">you know then he'll accept your patch</span> <span data-start="861.36" data-end="864.42">fix the code and make a pull request and</span> <span data-start="864.42" data-end="866.279">at this point the most important thing</span> <span data-start="866.279" data-end="867.48">for most people is it's mostly</span> </p>
<p><span data-start="867.48" data-end="870.24">JavaScript there's very few well there</span> <span data-start="870.24" data-end="871.529">are bugs we have to go to look in the</span> <span data-start="871.529" data-end="873.66">sea world but a lot of times there's</span> <span data-start="873.66" data-end="875.279">pure JavaScript bugs that you don't have</span> <span data-start="875.279" data-end="878.16">to look at you know you just use</span> <span data-start="878.16" data-end="879.48">patching javascript thing so it's much</span> <span data-start="879.48" data-end="880.74">easier and more accessible than most</span> <span data-start="880.74" data-end="886.769">people so as part of rackspace we've</span> <span data-start="886.769" data-end="888.779">kind of been leading the way inside</span> <span data-start="888.779" data-end="890.19">Rackspace to trying to do more and more</span> <span data-start="890.19" data-end="892.529">nodejs we're building on our team in San</span> <span data-start="892.529" data-end="894.24">Francisco just due to do</span> <span data-start="894.24" data-end="896.37">we've opened source a bunch of things</span> <span data-start="896.37" data-end="898.89">cast is the main one it's a ton of code</span> <span data-start="898.89" data-end="900.94">but we also open source things like our</span> <span data-start="900.94" data-end="903.459">node Cassandra client and we're doing a</span> <span data-start="903.459" data-end="906.88">bunch of things with our are we have a</span> <span data-start="906.88" data-end="908.8">serialization layer on top of Express</span> <span data-start="908.8" data-end="911.14">that we're open sourcing as well so I</span> <span data-start="911.14" data-end="913.81">just say go check out the code and if</span> <span data-start="913.81" data-end="915.579">there's any time or any questions I</span> <span data-start="915.579" data-end="918.31">guess okay so the question I think is</span> <span data-start="918.31" data-end="919.69">just our using cast in production right</span> <span data-start="919.69" data-end="924.7">now okay we are using it in kind of some</span> <span data-start="924.7" data-end="926.05">staging environments and playing with it</span> <span data-start="926.05" data-end="927.82">it's not yet in production and a large</span> <span data-start="927.82" data-end="931.42">scale our goal was really right now is</span> <span data-start="931.42" data-end="933.279">to get zero one out and we just kind of</span> <span data-start="933.279" data-end="935.56">finish that and then our next goal like</span> <span data-start="935.56" data-end="938.56">402 is to get cloud cake production use</span> <span data-start="938.56" data-end="940.72">as many places as we can so that's kind</span> <span data-start="940.72" data-end="943.269">of our next part of the project is we're</span> <span data-start="943.269" data-end="944.41">going to use in production and start</span> <span data-start="944.41" data-end="946.45">that feedback loop of you know that's</span> <span data-start="946.45" data-end="948.07">broken you know make the user interface</span> <span data-start="948.07" data-end="950.95">better because you know right now that</span> <span data-start="950.95" data-end="953.41">for example the cast client corresponds</span> <span data-start="953.41" data-end="955.39">very well with like the REST API but</span> <span data-start="955.39" data-end="956.47">like that's not what you want in a high</span> <span data-start="956.47" data-end="958.6">level client you want you know make this</span> <span data-start="958.6" data-end="960.699">thing go you know you don't want it to</span> <span data-start="960.699" data-end="962.74">match the rest api necessarily directly</span> <span data-start="962.74" data-end="965.05">so that's kind of our next big part of</span> <span data-start="965.05" data-end="967.69">the project is to production eyes it and</span> <span data-start="967.69" data-end="971.579">make it easier to use the question is</span> <span data-start="971.579" data-end="974.25">why didn't we use Express the first time</span> <span data-start="974.25" data-end="977.11">and that was you know last year it</span> <span data-start="977.11" data-end="978.579">wasn't even clear that sir that Express</span> <span data-start="978.579" data-end="981.459">would like win you know like 10 months</span> <span data-start="981.459" data-end="982.75">ago it was like there's a lot of the</span> <span data-start="982.75" data-end="984.339">million modules and all of them are kind</span> <span data-start="984.339" data-end="987.99">of crap and that's not the case anymore</span> <span data-start="987.99" data-end="990.399">you know and we said oh well HTTP is</span> <span data-start="990.399" data-end="991.54">really easy we'll just make out a little</span> <span data-start="991.54" data-end="993.88">router with a few reg X's you know what</span> <span data-start="993.88" data-end="995.92">you certainly could do it was fast but</span> <span data-start="995.92" data-end="998.38">like it's just not maintainable in the</span> <span data-start="998.38" data-end="1000.329">long run right and you lose out on all</span> <span data-start="1000.329" data-end="1001.56">those middlewares you just want to you</span> <span data-start="1001.56" data-end="1003.029">know oh look someone may have sweet you</span> <span data-start="1003.029" data-end="1004.74">know rate-limiting middle where I want</span> <span data-start="1004.74" data-end="1006.6">to go pull that in well it's you know</span> <span data-start="1006.6" data-end="1009.66">not quite that easy so you end up you</span> <span data-start="1009.66" data-end="1011.01">know carrying a lot of burden in and</span> <span data-start="1011.01" data-end="1012.75">maintaining your own thing when Express</span> <span data-start="1012.75" data-end="1014.459">just gives you a lot it doesn't cost you</span> <span data-start="1014.459" data-end="1016.529">very much like the cost of using Express</span> <span data-start="1016.529" data-end="1018.06">is very low</span> <span data-start="1018.06" data-end="1019.14">overall that's why I think people should</span> <span data-start="1019.14" data-end="1024.12">just use it by default at this point any</span> <span data-start="1024.12" data-end="1027.87">other questions</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
