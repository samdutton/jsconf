<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>7HxIWpuH1Wc</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/7HxIWpuH1Wc?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="20.51" data-end="23.849">nervous and definitely we can burn water</span> <span data-start="23.849" data-end="27.119">which is this really cool start up a new</span> <span data-start="27.119" data-end="30.869">system blows up well he gave my day was</span> <span data-start="30.869" data-end="35.73">here from Iman inevitable and I'll talk</span> <span data-start="35.73" data-end="39.75">a little bit of a low GS and our music</span> <span data-start="39.75" data-end="44.76">there's some distributed systems yes the</span> <span data-start="44.76" data-end="49.08">shameless blood as that I am Emelianenko</span> <span data-start="49.08" data-end="51.239">coaster and you should all check out</span> <span data-start="51.239" data-end="53.19">their web page because we do have some</span> <span data-start="53.19" data-end="55.979">pretty cool so what we do we could</span> </p>
<p><span data-start="55.979" data-end="58.47">Maggie so protesting which means we take</span> <span data-start="58.47" data-end="61.44">away cake how do you modify we mr. in</span> <span data-start="61.44" data-end="65.4">Jeff's report even more yet magic and</span> <span data-start="65.4" data-end="68.1">have a bunch of servers and I'm going to</span> <span data-start="68.1" data-end="70.86">talk about service so what's the server</span> <span data-start="70.86" data-end="75.09">we have this in the beginning one very</span> <span data-start="75.09" data-end="77.909">monolithic huge no TS server and it does</span> <span data-start="77.909" data-end="81.119">contain it Francis requests from several</span> <span data-start="81.119" data-end="85.049">sources it serves our clients choosing</span> <span data-start="85.049" data-end="87.63">in there and vaginas it does all sort of</span> <span data-start="87.63" data-end="90.689">things we talked to many is in the past</span> <span data-start="90.689" data-end="94.039">now we're talking mostly these ones</span> <span data-start="94.039" data-end="96.46">you're happy</span> <span data-start="96.46" data-end="99.61">amazone center for now so that's y SI es</span> <span data-start="99.61" data-end="104.44">original system so yeah it's a big huge</span> <span data-start="104.44" data-end="109.72">why I don't have lay down how big no GST</span> <span data-start="109.72" data-end="111.88">wishes are getting these days but it's</span> <span data-start="111.88" data-end="115.27">around 50k line of code oh it was</span> <span data-start="115.27" data-end="120.22">actually working for educators and the</span> <span data-start="120.22" data-end="124.09">en suite red is almost 1k flights every</span> <span data-start="124.09" data-end="126.79">crevice we want to freeze all your boat</span> <span data-start="126.79" data-end="130.39">motors dependencies and dependencies of</span> <span data-start="130.39" data-end="132.58">the Pegasus they displayed by quickly so</span> <span data-start="132.58" data-end="137.64">yes we consider it up a nice application</span> <span data-start="137.64" data-end="142.45">so they are arbiter of my blanket</span> <span data-start="142.45" data-end="144.7">because I working mostly certified let's</span> <span data-start="144.7" data-end="148.14">make this thing is simple and makes</span> <span data-start="148.14" data-end="151.48">super by breaking thing which is for me</span> <span data-start="151.48" data-end="155.14">a beautiful condition because it should</span> <span data-start="155.14" data-end="158.14">make in important variable is small</span> <span data-start="158.14" data-end="162.299">thing not to worry how they competition</span> <span data-start="162.299" data-end="165.43">so I just</span> <span data-start="165.43" data-end="168.7">so this real applications their program</span> <span data-start="168.7" data-end="170.739">are going over the mother brain of the</span> <span data-start="170.739" data-end="173.5">error problem and they are harder to get</span> <span data-start="173.5" data-end="175.209">right because there's so many ways I</span> <span data-start="175.209" data-end="179.23">think of doing it wrong and so forth so</span> <span data-start="179.23" data-end="184.48">on so what did i do what did we do we</span> <span data-start="184.48" data-end="186.25">took something and ready words which is</span> <span data-start="186.25" data-end="188.109">you know the body ache I think so</span> <span data-start="188.109" data-end="191.92">where's subject baby and it works on</span> <span data-start="191.92" data-end="195.459">change is hey to be one point straight</span> <span data-start="195.459" data-end="201.949">super and that's why we use it for us</span> <span data-start="201.959" data-end="206.62">and we're going what I call the service</span> <span data-start="206.62" data-end="211">and yes I cannot name it what it does it</span> <span data-start="211" data-end="213.879">is streamate you know he management</span> <span data-start="213.879" data-end="217.629">remote dependencies I optician it has</span> <span data-start="217.629" data-end="224.769">the bodies nice one point so they come</span> <span data-start="224.769" data-end="229.12">out and they go down people remove what</span> <span data-start="229.12" data-end="235.449">we try this magic in the code and all</span> <span data-start="235.449" data-end="238.69">that because I like sugar any like sugar</span> </p>
<p><span data-start="238.69" data-end="241.419">I like to just sit down and worry about</span> <span data-start="241.419" data-end="245.979">the business like I don't I'm done again</span> <span data-start="245.979" data-end="249.189">in the most complicated way so we wrote</span> <span data-start="249.189" data-end="256.06">this way this layer on top of vino and</span> <span data-start="256.07" data-end="259.049">just go back to like how I campaign</span> <span data-start="259.049" data-end="260.4">things I cannot even named things</span> <span data-start="260.4" data-end="265.2">manually like this kind of so maybe</span> <span data-start="265.2" data-end="268.11">think this is really annoying and you</span> <span data-start="268.11" data-end="269.94">have a lower Earth and Mars and you</span> <span data-start="269.94" data-end="272.79">still trying to name the object of it</span> <span data-start="272.79" data-end="276.18">name is Emily will be annoying to get it</span> <span data-start="276.18" data-end="279.21">right party so this has been going since</span> <span data-start="279.21" data-end="282.54">the 97 make for our support when</span> <span data-start="282.54" data-end="292.61">anything's wrong with Rachel so we have</span> <span data-start="292.61" data-end="296.76">necessity s.s.d.d to Microsoft and then</span> <span data-start="296.76" data-end="300.96">we have homeroom everybody knows and we</span> <span data-start="300.96" data-end="303">have SLP which is this thing from 97</span> <span data-start="303" data-end="304.98">actually which is actually very nice you</span> <span data-start="304.98" data-end="308.63">have attributes you have a multicast</span> <span data-start="308.63" data-end="312.08">unique as if it's a really broad</span> <span data-start="312.08" data-end="314.94">encompassing implementation</span> <span data-start="314.94" data-end="318.229">specification but nobody uses of course</span> <span data-start="318.229" data-end="320.85">even dhcp has something for naming</span> <span data-start="320.85" data-end="325.4">objects st unbelievable so we end up</span> <span data-start="325.4" data-end="329.52">picking mdns why because it was there</span> <span data-start="329.52" data-end="333.54">ready and it just worked and i work this</span> <span data-start="333.54" data-end="340.11">work is in quotes mdns on apple machine</span> <span data-start="340.11" data-end="342.419">will use the bunch of implementation and</span> <span data-start="342.419" data-end="345.18">it will work flawlessly but on a limited</span> <span data-start="345.18" data-end="346.86">machine it will use the valley</span> <span data-start="346.86" data-end="350.46">implementation and there is this lead</span> <span data-start="350.46" data-end="354.84">compat mdns on top of a vine and that's</span> <span data-start="354.84" data-end="359.7">a very messy piece of code I know if</span> <span data-start="359.7" data-end="361.53">anyone here had the experience of mdns</span> <span data-start="361.53" data-end="363.27">there is a node module which we use call</span> <span data-start="363.27" data-end="367.08">mdns it's super simple to use it you</span> <span data-start="367.08" data-end="369.93">just register something you give it a</span> <span data-start="369.93" data-end="373.47">name you can browse it later and it will</span> <span data-start="373.47" data-end="379.52">find using multicast on on specific IP</span> <span data-start="379.52" data-end="382.08">the thing about mdns and because it uses</span> <span data-start="382.08" data-end="383.76">this lib compat is that you get lots of</span> <span data-start="383.76" data-end="384.63">error on</span> <span data-start="384.63" data-end="387.87">no I don't know about this unknown thing</span> <span data-start="387.87" data-end="390.66">like who came up but it should be very</span> <span data-start="390.66" data-end="393.3">rare that you get an error unknown maybe</span> <span data-start="393.3" data-end="396.06">something like a cosmic ray flipping a</span> <span data-start="396.06" data-end="398.01">bit then it might be an error unknown</span> <span data-start="398.01" data-end="401.52">but in mdns case because of lead combat</span> <span data-start="401.52" data-end="403.5">you get tons of our own nose like if the</span> </p>
<p><span data-start="403.5" data-end="405.33">P thread fails or memory location</span> <span data-start="405.33" data-end="409.35">allocation fails or some other avahi</span> <span data-start="409.35" data-end="412.65">related error happens it bubbles up to</span> <span data-start="412.65" data-end="416.49">to us to the OGS implementation as an</span> <span data-start="416.49" data-end="420.42">error unknown so we are moving away from</span> <span data-start="420.42" data-end="422.25">from this because we have this in</span> <span data-start="422.25" data-end="424.32">production by the way it is this all</span> <span data-start="424.32" data-end="427.14">this I'm talking here we have a running</span> <span data-start="427.14" data-end="432.42">on Amazon or on virtual appliances and</span> <span data-start="432.42" data-end="435.92">we what I'm going to do is eventually</span> <span data-start="435.92" data-end="438.15">implement multiple engines a bit like</span> <span data-start="438.15" data-end="441.24">socket i/o has this down grain or</span> <span data-start="441.24" data-end="443.1">engineer has this upgrade procedure of</span> <span data-start="443.1" data-end="446.43">trying one engine and going up trying</span> <span data-start="446.43" data-end="450.77">different ones this is my current goal</span> <span data-start="450.77" data-end="455.49">so a bit of an example so because</span> <span data-start="455.49" data-end="456.96">because of timing i don't know if there</span> <span data-start="456.96" data-end="459.78">will be time for for demo I think maybe</span> </p>
<p><span data-start="459.78" data-end="463.5">I the thing commented out is is the</span> <span data-start="463.5" data-end="466.08">that's the example take it straight from</span> <span data-start="466.08" data-end="468.51">denote website and I just committed out</span> <span data-start="468.51" data-end="471.35">the differences which is required and</span> <span data-start="471.35" data-end="474.69">and how you create it so is I give it</span> <span data-start="474.69" data-end="477.63">this with this name here called d1 and</span> <span data-start="477.63" data-end="479.85">is the same function and instead of</span> <span data-start="479.85" data-end="482.37">picking up a port I just do a start and</span> <span data-start="482.37" data-end="484.44">this will pick up automatically a port</span> <span data-start="484.44" data-end="487.65">it will use the whatever announcement</span> <span data-start="487.65" data-end="490.71">advertisement engine in this case mdns</span> <span data-start="490.71" data-end="493.95">it will broadcast the port to anyone</span> <span data-start="493.95" data-end="496.53">interested in this in this service this</span> <span data-start="496.53" data-end="499.26">service has no versioning so whenever</span> <span data-start="499.26" data-end="502.56">you search for it it will just fine but</span> <span data-start="502.56" data-end="506.34">there is a versioning support so this is</span> <span data-start="506.34" data-end="509.63">soon this is not rocket science by far</span> <span data-start="509.63" data-end="512.31">there are other projects in fact this</span> <span data-start="512.31" data-end="514.74">this thing is been working for a couple</span> <span data-start="514.74" data-end="516.9">of months now there was another project</span> <span data-start="516.9" data-end="518.11">called hookah</span> <span data-start="518.11" data-end="522.519">by maroc I think and it does it this</span> <span data-start="522.519" data-end="524.229">thing has several like similarities with</span> <span data-start="524.229" data-end="526.51">that but it's not the same that and</span> <span data-start="526.51" data-end="530.529">because who kayo seem to have to die</span> <span data-start="530.529" data-end="532.959">down I didn't really see that much</span> <span data-start="532.959" data-end="536.38">activity or I chose to implement this</span> <span data-start="536.38" data-end="541.51">even simpler object registration for</span> </p>
<p><span data-start="541.51" data-end="549.07">Strings so declare the defocus you get</span> <span data-start="549.07" data-end="553.39">the client you just say oh give me a</span> <span data-start="553.39" data-end="556.779">servers and fine for me and denote for</span> <span data-start="556.779" data-end="559.42">that name which is d1 and then you call</span> <span data-start="559.42" data-end="562">as a as a GNote really seriously this is</span> <span data-start="562" data-end="564.51">the same you get the same objects back</span> <span data-start="564.51" data-end="568.51">nothing nothing seriously different but</span> <span data-start="568.51" data-end="570.64">this only only this server is boring</span> <span data-start="570.64" data-end="573.51">right it's not doing much what I want is</span> <span data-start="573.51" data-end="577.54">remote dependencies why because looking</span> <span data-start="577.54" data-end="581.26">back our problems are requesting usually</span> <span data-start="581.26" data-end="583.12">involves talking to several API several</span> <span data-start="583.12" data-end="585.49">external things I'll go to check this</span> <span data-start="585.49" data-end="587.26">mixed panel thing and go to the database</span> <span data-start="587.26" data-end="593.199">and you know many external tools and</span> <span data-start="593.199" data-end="596.38">api's to interface with and all of them</span> <span data-start="596.38" data-end="599.32">they have errors and we found out</span> <span data-start="599.32" data-end="603.43">through painful moments that error</span> <span data-start="603.43" data-end="606.339">handling is really not that simple and</span> <span data-start="606.339" data-end="608.5">easy when you talk into these multiple</span> <span data-start="608.5" data-end="610.66">sources you have timeouts everywhere you</span> <span data-start="610.66" data-end="613">have all sorts of things and the code</span> <span data-start="613" data-end="618.22">gets uglier bulkier so what what I want</span> <span data-start="618.22" data-end="619.899">is like I want dependencies I want</span> <span data-start="619.899" data-end="621.94">automatic dependencies on these small</span> <span data-start="621.94" data-end="624.55">services see if and I want two types</span> <span data-start="624.55" data-end="626.38">hardness soft dependency heart</span> <span data-start="626.38" data-end="628.24">dependencies if one service goes down I</span> <span data-start="628.24" data-end="631.089">want the whoever is depending on that to</span> <span data-start="631.089" data-end="633.55">go down as well and a soft is well it's</span> <span data-start="633.55" data-end="635.529">not it's just you can continue so of</span> <span data-start="635.529" data-end="637.81">course it's up to the programmer to 22</span> <span data-start="637.81" data-end="639.88">gauge what is the soft dependency what</span> <span data-start="639.88" data-end="643.51">is in a hard dependency but yeah so this</span> <span data-start="643.51" data-end="645.399">is how you implement the second server</span> <span data-start="645.399" data-end="647.649">service called d2 and it has a different</span> <span data-start="647.649" data-end="649.6">function instead of it explore this GS</span> <span data-start="649.6" data-end="649.9">com</span> <span data-start="649.9" data-end="653.2">here and the only difference is it has</span> <span data-start="653.2" data-end="655.96">this server does rely on d1 and this is</span> <span data-start="655.96" data-end="659.16">a hard dependency so d 2 goes up</span> <span data-start="659.16" data-end="662.59">whenever d1 goes up this guy is notified</span> <span data-start="662.59" data-end="664.21">and it also goes up do you want goes</span> <span data-start="664.21" data-end="666.43">down if there are no no other d ones in</span> <span data-start="666.43" data-end="670.21">the vicinity this guy will go down as</span> <span data-start="670.21" data-end="673.42">well and yeah that's this is the type of</span> <span data-start="673.42" data-end="675.13">sugar that I that I like I don't have to</span> <span data-start="675.13" data-end="678.04">really worry about like implementing</span> <span data-start="678.04" data-end="682.12">custom event handlers and checking these</span> <span data-start="682.12" data-end="683.92">things and of course again there's like</span> <span data-start="683.92" data-end="687.7">a timeout handling retries the load</span> <span data-start="687.7" data-end="689.35">balancing it will try different</span> <span data-start="689.35" data-end="691.3">endpoints according to reach riders</span> <span data-start="691.3" data-end="696.25">couple of metrics sorry yeah so what is</span> <span data-start="696.25" data-end="699.13">the working progress is cycle detection</span> <span data-start="699.13" data-end="702.13">which is fairly simple these multiple</span> <span data-start="702.13" data-end="704.82">engines in cases the advertisement is</span> <span data-start="704.82" data-end="710.17">advertising agents engines SLP is the 1</span> <span data-start="710.17" data-end="712.39">i'm coding now i started two days ago</span> <span data-start="712.39" data-end="715.69">there's a library called open SLP and in</span> <span data-start="715.69" data-end="718.72">implements the then-new the latest RFC</span> <span data-start="718.72" data-end="722.37">for SLP and that should be done soon</span> <span data-start="722.37" data-end="724.78">actually if anyone wants to help i</span> <span data-start="724.78" data-end="726.79">really like that but really appreciate</span> <span data-start="726.79" data-end="732.19">and it's a c++ native module and this</span> <span data-start="732.19" data-end="735.13">thing is which is a hack is I want to</span> <span data-start="735.13" data-end="738.01">just to add this small remote dependency</span> <span data-start="738.01" data-end="739.87">in the package.json and basically have</span> <span data-start="739.87" data-end="743.62">these two to be that rely so I can code</span> <span data-start="743.62" data-end="747.25">small npm modules and having the</span> <span data-start="747.25" data-end="749.23">package.json their remote dependency so</span> <span data-start="749.23" data-end="753.33">i can just lounge that npm module and</span> <span data-start="753.33" data-end="756.49">have addy service to automatically</span> <span data-start="756.49" data-end="758.02">already do the real I that registration</span> <span data-start="758.02" data-end="760.57">maybe even simpler isn't like just more</span> <span data-start="760.57" data-end="765.6">sugar but yeah even simpler to to manage</span> <span data-start="765.6" data-end="768.88">so I have these extra I know if I have</span> <span data-start="768.88" data-end="771.97">time maybe I won't have time so this is</span> <span data-start="771.97" data-end="774.07">the transact the stream part do you know</span> <span data-start="774.07" data-end="776.47">this stream based but streams are not</span> <span data-start="776.47" data-end="779.17">the end all they don't cure all illness</span> <span data-start="779.17" data-end="781">like students are composable they're</span> <span data-start="781" data-end="782.83">really cool but there is one thing that</span> <span data-start="782.83" data-end="783.76">we like</span> <span data-start="783.76" data-end="787.57">is a repeatable operations and it's it's</span> <span data-start="787.57" data-end="792.11">at some point you will buffer things</span> <span data-start="792.12" data-end="794.32">because you have to repeat so of course</span> <span data-start="794.32" data-end="797.92">you could do the absurd which is an</span> <span data-start="797.92" data-end="800.62">operation fail retry then operation fail</span> <span data-start="800.62" data-end="802.66">retry retry until you get to the end</span> <span data-start="802.66" data-end="804.73">user and you get an alert to him like</span> <span data-start="804.73" data-end="807.04">algae's repressive submit on the form</span> <span data-start="807.04" data-end="810.55">again but that's not really nice so at</span> <span data-start="810.55" data-end="813.13">some point in your on your pipeline you</span> <span data-start="813.13" data-end="815.77">will buffer something and retry later do</span> <span data-start="815.77" data-end="818.02">this later is could be in a millisecond</span> <span data-start="818.02" data-end="822.1">or seconds later so transactions are</span> <span data-start="822.1" data-end="824.17">kind of required and we do have another</span> <span data-start="824.17" data-end="826.84">implementation which is all I call a</span> <span data-start="826.84" data-end="828.16">pipeline but I don't know if that's the</span> <span data-start="828.16" data-end="830.68">correct name which is basically a chain</span> <span data-start="830.68" data-end="832.57">of operation steps and these steps are</span> <span data-start="832.57" data-end="836.53">and funny if I know fancy word it then</span> <span data-start="836.53" data-end="838.84">potent so you you must be sure that you</span> <span data-start="838.84" data-end="841.03">can call that thing multiple times and</span> <span data-start="841.03" data-end="844.23">it will give you the same answer and</span> <span data-start="844.23" data-end="850.09">what it does is you you will see realize</span> <span data-start="850.09" data-end="852.82">your comment some call you will have one</span> <span data-start="852.82" data-end="855.76">input and one working q / first step so</span> <span data-start="855.76" data-end="857.35">you implement a small a small function</span> <span data-start="857.35" data-end="859.84">that is processed something and this</span> <span data-start="859.84" data-end="862.03">working Q is what guarantees you that</span> <span data-start="862.03" data-end="865.48">you can retry operation safely so we use</span> <span data-start="865.48" data-end="867.54">right now readies but there is also a</span> <span data-start="867.54" data-end="873.07">kestrel in darner darner implementation</span> <span data-start="873.07" data-end="876.67">which is just fast faster castro in c++</span> <span data-start="876.67" data-end="880.93">and what you have is you have this</span> <span data-start="880.93" data-end="882.91">working q atomic operations so you even</span> <span data-start="882.91" data-end="884.77">if you fail if you timeout or whatever</span> <span data-start="884.77" data-end="887.71">you can completely kill the service put</span> <span data-start="887.71" data-end="889.96">it back up and it will automatically do</span> <span data-start="889.96" data-end="892.24">the recovery for you given that your</span> <span data-start="892.24" data-end="893.74">step is it the impotence so it's it's</span> <span data-start="893.74" data-end="896.62">not a problem and we have this in</span> <span data-start="896.62" data-end="899.08">production as well as really yeah simple</span> </p>
<p><span data-start="899.08" data-end="902.88">I won't have time to show I'm sorry so</span> <span data-start="902.88" data-end="906.4">everything will be open source I got the</span> <span data-start="906.4" data-end="910.14">approval from from the overlords and</span> <span data-start="910.14" data-end="927.72">yep I thank you thank you</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
