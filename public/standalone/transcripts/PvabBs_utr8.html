<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PvabBs_utr8</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/PvabBs_utr8?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="2.51" data-end="4.87">How are you, everyone?</span> <span data-start="30.44" data-end="31.44">[ Applause ]</span> </p>
</section>

<section>
<p><span data-start="31.44" data-end="32.44"><span class="speaker">Chris</span>: I'm Chris.</span> <span data-start="32.44" data-end="33.44">I work at Facebook.</span> <span data-start="33.44" data-end="38.019">I'm an engineering manager on the JavaScript Tools Team in London and today I'm going to</span> <span data-start="38.019" data-end="39.64">talk about building high-quality  — </span> <span data-start="39.64" data-end="46.819">[ Lapse in Audio ]</span> <span data-start="46.819" data-end="54.589"> —  and to make  —  and I'd like to show you how we applied a product mindset to Jest,</span> <span data-start="54.589" data-end="59.329">our JavaScript framework that aims to make testing painless and I want to show you how</span> <span data-start="59.329" data-end="63.03">it works to rebuild it.</span> <span data-start="63.03" data-end="68.18">By a quick show of hands, how many people have heard of Jest?</span> </p>
<p><span data-start="68.18" data-end="69.78">Who is using Jest?</span> <span data-start="69.78" data-end="70.909">Okay.</span> <span data-start="70.909" data-end="72.12">That's awesome.</span> <span data-start="72.12" data-end="76.23">If you're using it already, I'm not going to try to convince you but if you're not using</span> <span data-start="76.23" data-end="80.85">it, I want to convince you more.</span> </p>
<p><span data-start="80.85" data-end="89.68">So unfortunately, testing with Jest wasn't as painless as we wanted it to be.</span> <span data-start="89.68" data-end="96.99">Everyone was starting to adopt Jest, you know?</span> <span data-start="96.99" data-end="98.89">And I'm not making this up.</span> <span data-start="98.89" data-end="102.58">This is an actual tweet about Jest from about two years ago.</span> <span data-start="102.58" data-end="105.76">This is never something you want to hear from a project.</span> <span data-start="105.76" data-end="109.02">We knew we had some work to do.</span> </p>
<p><span data-start="109.02" data-end="112.28">And at Facebook, it wasn't that much better.</span> <span data-start="112.28" data-end="117.55">Jest worked okay as a tool so, you know, write tests for your JavaScript applications but</span> <span data-start="117.55" data-end="122.92">here's the thing, in this oil painting, you can see a party going on here.</span> <span data-start="122.92" data-end="126.17">And this Jester, he's so gloomy, and sad.</span> <span data-start="126.17" data-end="130.009">And this is literally the experience that people had at Facebook when they were dealing</span> <span data-start="130.009" data-end="132.26">with JavaScript testing.</span> </p>
<p><span data-start="132.26" data-end="136.43">Everybody was super excited about building React applications but we found that no one</span> <span data-start="136.43" data-end="141.139">was actually writing any tests because scripting with Jest wasn't great.</span> <span data-start="141.139" data-end="149.67">And so we decided to rebuild Jest and turn that sad Jester to a happy one.</span> <span data-start="149.67" data-end="152.349">But you might be asking yourself: Hold on.</span> <span data-start="152.349" data-end="153.719">Who needs testing?</span> <span data-start="153.719" data-end="154.719">Who cares?</span> <span data-start="154.719" data-end="161.01">We realize that Jest isn't great, but maybe we can get by without any testing.</span> <span data-start="161.01" data-end="166.81">But, of course, testing is an important part of the engineering process.</span> <span data-start="166.81" data-end="172.299">It significantly influences engineering behavior and we learn that people write differently</span> <span data-start="172.299" data-end="176.67">with or without a test framework.</span> <span data-start="176.67" data-end="182.29">And to be specific about this, it helps by enabling a faster iterative development cycle.</span> <span data-start="182.29" data-end="189.34">It makes sure you have four bugs in your applications and you can make releases more often.</span> </p>
<p><span data-start="189.34" data-end="193.93">So when we go on to improve testing, we can look at it as we would at any product.</span> <span data-start="193.93" data-end="198.7">You know, like, what do you do with it and how can we make that experience better?</span> <span data-start="198.7" data-end="203.549">So for Jest, it's about what do you want when you're writing a test runner, and what do</span> <span data-start="203.549" data-end="205.23">you want when you're writing tests?</span> <span data-start="205.23" data-end="211.209">For running tests, I should get feedback as soon as possible, it should give me a signal</span> <span data-start="211.209" data-end="213.15">for failing immediately.</span> <span data-start="213.15" data-end="219.799">But for writing tests, I want to have all of them available to me but also I want great</span> <span data-start="219.799" data-end="226.329">documentation to I can learn how to write effective tests and as we developed these</span> <span data-start="226.329" data-end="229.4">requirements, we can come up with three things.</span> <span data-start="229.4" data-end="235.799">One of them is performance, the other one is features, and then adoptability.</span> <span data-start="235.799" data-end="238.999">All three of these requirements, they're equally important.</span> <span data-start="238.999" data-end="244.09">You need to fulfill all of them at the same time to make a successful product.</span> <span data-start="244.09" data-end="248.529">For example, if you're building the most feature rich test runner, but then it's really, really</span> <span data-start="248.529" data-end="253.549">slow, nobody is going to adopt it, and, at the same time, if you're building a really,</span> <span data-start="253.549" data-end="257.68">really fast test runner, with no features, again, nobody will adopt it.</span> </p>
<p><span data-start="257.68" data-end="261.59">And, of course, if you are building the most amazing test runner, and nobody's using it,</span> <span data-start="261.59" data-end="263.65">then what's the point of all of this?</span> <span data-start="263.65" data-end="269.25">So I gave you a bunch of buzzwords but if we peel this product layer back a little bit</span> <span data-start="269.25" data-end="274.26">and look at an emoji, about what it was like an engineer working on this, this was really,</span> <span data-start="274.26" data-end="276.58">really hard and painful.</span> <span data-start="276.58" data-end="280.92">We had something that didn't work well and we had to fix it.</span> <span data-start="280.92" data-end="286.751">And I came up with these three things that help  —  that help you understand this process</span> <span data-start="286.751" data-end="290.94">to make something great and it's: Fix, rewrite, and polish.</span> <span data-start="290.94" data-end="295.35">It's kind of like FRP, functional reactive programming, but this is fix, rewrite, and</span> <span data-start="295.35" data-end="296.5">polish.</span> <span data-start="296.5" data-end="301.17">And let me take you through this journey by talking about the three major requirements.</span> </p>
<p><span data-start="301.17" data-end="304.72">And first is performance.</span> <span data-start="304.72" data-end="308.54">Performance at scale is really important actually.</span> <span data-start="308.54" data-end="313.94">At Facebook, we realized we had thousand of test suites and a slow test runner and so</span> <span data-start="313.94" data-end="315.98">we fixed that.</span> <span data-start="315.98" data-end="323.71">And, naturally, your instincts would tell you, let's rebuild the new thing.</span> <span data-start="323.71" data-end="326.7">But at Facebook we couldn't do that.</span> <span data-start="326.7" data-end="333.72">But we learned from past experience that big rewrites take longer than anticipated and</span> <span data-start="333.72" data-end="336.76">sometimes they don't even work out at all.</span> <span data-start="336.76" data-end="344.38">So we decided to improve our testing framework by not explicitly rewriting the whole thing,</span> <span data-start="344.38" data-end="350.96">but by making major changes incrementally in small parts of the framework itself.</span> </p>
<p><span data-start="350.96" data-end="356.19">And I want to stress that it's enough to make 1% improvements over time.</span> <span data-start="356.19" data-end="359.33">Here's where it helped.</span> <span data-start="359.33" data-end="364.9">Internally, at Facebook, we have thousands of test files and tens of thousands of modules.</span> <span data-start="364.9" data-end="369.27">You know, we have a lot of information that we need to keep track of to run tests.</span> <span data-start="369.27" data-end="374.42">It's not just which tests are associated with which modules, it's also which modules are</span> <span data-start="374.42" data-end="381.72">associated with which tests so that we can run the correct tests when files are changing.</span> <span data-start="381.72" data-end="386.8">So we rebuild the system that analyzes the entire file system, and then extracts metadata</span> <span data-start="386.8" data-end="390.32">from all the files that we care about, and then also tracks dependencies.</span> </p>
<p><span data-start="390.32" data-end="397.61">For example, if you're using Jest and you're using the store file up there, it knows not</span> <span data-start="397.61" data-end="403.69">to use the entire store test, with all the thousands of files we have.</span> <span data-start="403.69" data-end="413.86">We also have a system that parallelizes across worker processes by looking at data from previous</span> <span data-start="413.86" data-end="416.09">test runs.</span> <span data-start="416.09" data-end="418.86">That makes tests a lot faster.</span> <span data-start="418.86" data-end="422.12">And then as a told you, we made a lot of small improvements over time.</span> <span data-start="422.12" data-end="426.3">We changed how we cached transform files to make them more effective.</span> <span data-start="426.3" data-end="437">We improved the  —  because we haven't, like, worked at Jest for a while, and then we just</span> <span data-start="437" data-end="441.5">figured out what alternatives have been created since then.</span> <span data-start="441.5" data-end="446.38">So now that we have performance in a good state and we can run Jest with tens of thousands</span> <span data-start="446.38" data-end="453.46">of test files, we need to look at features.</span> <span data-start="453.46" data-end="457.73">Jest comes with dozens of awesome features out of the box, but today I'll only focus</span> <span data-start="457.73" data-end="459.61">on three of them.</span> </p>
<p><span data-start="459.61" data-end="464.2">First one is the improved output, then we'll talk about this immersive watch mode that</span> <span data-start="464.2" data-end="468.17">sucks you into Jest, and you just kind of stay there, and it's an awesome unit-testing</span> <span data-start="468.17" data-end="473.46">experience, and then we'll also talk briefly about the snapshot assertion.</span> <span data-start="473.46" data-end="477.46">So let's focus on the improved output first.</span> <span data-start="477.46" data-end="479.4">This is Jest used to look like.</span> <span data-start="479.4" data-end="485.02">Log messages all over, and stack traces that didn't matter, and you have a stack assertion</span> <span data-start="485.02" data-end="489.45">where you're comparing two objects and you have no idea what's going on, right?</span> </p>
<p><span data-start="489.45" data-end="495.01">We realized that Jest was okay when tests were passing but the value of a test framework</span> <span data-start="495.01" data-end="499.05">is to actually give you a signal about failing tests and helping you resolve those issues</span> <span data-start="499.05" data-end="505.639">and so we just rewrote the assertion library with the product mindset to see, what do engineers</span> <span data-start="505.639" data-end="507.87">want to see when a test is failing.</span> <span data-start="507.87" data-end="513.13">So, for example, we color-coded everything so that you know what is green and what is</span> <span data-start="513.13" data-end="518.32">red and we're also showing you a div when two objects don't match up so you know exactly</span> <span data-start="518.32" data-end="519.69">what's going on.</span> <span data-start="519.69" data-end="523.37">The exciting thing about this is we gave Jest its own identity.</span> <span data-start="523.37" data-end="526.7">When you see a screenshot of this framework, you instantly know that it's Jest.</span> <span data-start="526.7" data-end="527.75">It's awesome.</span> </p>
<p><span data-start="527.75" data-end="531.39">We also have this concurrent runner which is awesome.</span> <span data-start="531.39" data-end="539.69">It tells you which test is running right now, and how long it's going to take based on previous</span> <span data-start="539.69" data-end="542.03">test runs.</span> <span data-start="542.03" data-end="547.43">What's also awesome is Jest takes a note when it's failing, and next time you run it, it</span> <span data-start="547.43" data-end="552.68">actually runs the failed test first to give you a signal immediately because that's probably</span> <span data-start="552.68" data-end="557.25">what you care most at that point in time.</span> <span data-start="557.25" data-end="563.14">The next thing I want to talk about is the immersive watch mode.</span> <span data-start="563.14" data-end="566.45">It just runs tests quickly and then shows you what's happening and then what you want</span> <span data-start="566.45" data-end="568.12">to do with it.</span> </p>
<p><span data-start="568.12" data-end="576.14">So when you call it, you call it with  — watch, and then you have the p, for example, where</span> <span data-start="576.14" data-end="581.96">you have this pattern mode, and then you have this typing mode where you can select from</span> <span data-start="581.96" data-end="587.67">a dropdown, Jest knows everything about your system, and your and knows exactly which version</span> <span data-start="587.67" data-end="589.57">you have.</span> <span data-start="589.57" data-end="592.94">In the next version of Jest, we extended this a little further.</span> <span data-start="592.94" data-end="595.19">You even have keyboard navigation in this.</span> </p>
<p><span data-start="595.19" data-end="600.42">I know I've been talking about CLI tools, but these are all great CLI tools and a great</span> <span data-start="600.42" data-end="603.56">developer experience in them.</span> <span data-start="603.56" data-end="607.45">And then finally I want to talk about snapshots.</span> <span data-start="607.45" data-end="612.55">Have you ever written an assertion like this, and then you don't know exactly what you're</span> <span data-start="612.55" data-end="616.83">going to put in your test, you don't know exactly what the output of your function is?</span> <span data-start="616.83" data-end="619.91">It happens quite often, right?</span> <span data-start="619.91" data-end="626.56">We do what we always do, we comment out this assertion, and we log the value and we take</span> <span data-start="626.56" data-end="630.72">that and put it back in our test and we know what is going on here.</span> <span data-start="630.72" data-end="637.8">And judging from the faces that I see, I know that you are as guilty as I am.</span> <span data-start="637.8" data-end="645.3">So we found that people weren't writing inform tests from code that could benefit from this.</span> <span data-start="645.3" data-end="651.529">And so we introduced this new assertion that's called toMatchSnapshot() and here's how it</span> <span data-start="651.529" data-end="653.32">works.</span> <span data-start="653.32" data-end="660.27">The first time you used it, it will inspect the output of your code, and Jest will record</span> <span data-start="660.27" data-end="662.43">it a snapshot, in a snapshot file.</span> <span data-start="662.43" data-end="668.24">And then the next time you run it, it compares the output of your code.</span> </p>
<p><span data-start="668.24" data-end="675.001">For example, here we're changing a React component from Facebook.com to instagram.com, and Jest</span> <span data-start="675.001" data-end="680.87">will yell at you and say, change in your code has changed, is this intentional or not?</span> <span data-start="680.87" data-end="686.52">And you can say, I'll pass in a flag to update all the snapshots.</span> <span data-start="686.52" data-end="688.46">All right.</span> <span data-start="688.46" data-end="692.75">And a bunch of you might be looking at me like, hold on, Christoph, what are you doing</span> <span data-start="692.75" data-end="693.75">here?</span> <span data-start="693.75" data-end="694.88">This is not testing here at all.</span> <span data-start="694.88" data-end="702.1">But we found that it's actually better to be able to create these kinds of tests for</span> <span data-start="702.1" data-end="707.74">regression testing, for example, really quickly instead of just waiting until that code hits</span> <span data-start="707.74" data-end="711.23">production and that is the first time that anybody is ever running that code, right?</span> </p>
<p><span data-start="711.23" data-end="715.27">So it's preventing a lot of issues for people.</span> <span data-start="715.27" data-end="722.27">And snapshots, I want to be clear about that: They don't replace conventional testing, or</span> <span data-start="722.27" data-end="724.35">all the other assertions.</span> <span data-start="724.35" data-end="726.19">It's just an addition on top of those.</span> <span data-start="726.19" data-end="732.11">It's just one assertion among 20, or 30, or however many ships with Jest.</span> <span data-start="732.11" data-end="737.62">The difference isn't between snapshot testing and utter assertions, the difference is between</span> <span data-start="737.62" data-end="740.65">snapshot testing or no testing at all.</span> <span data-start="740.65" data-end="746.99">There are products like the JavaScript Farmer, where I'm not confident it would exist in</span> <span data-start="746.99" data-end="749.73">its current form if it weren't for snapshot testing.</span> <span data-start="749.73" data-end="754.49">It just couldn't have moved as quickly.</span> <span data-start="754.49" data-end="760.97">And as you know by now because I've told you, Jest is a great test runner, like this jester</span> <span data-start="760.97" data-end="764.63">in this photo, it takes care of everything.</span> <span data-start="764.63" data-end="768.23">Which brings me to a really exciting announcement.</span> </p>
<p><span data-start="768.23" data-end="771.85">It's actually really big but in the end, it's kind of impressive.</span> <span data-start="771.85" data-end="775.77">I'm going to show you one more feature.</span> <span data-start="775.77" data-end="779.98">Have you ever found yourself, like, juggling multiple projects in one day and you have,</span> <span data-start="779.98" data-end="783.66">like, a really hard time.</span> <span data-start="783.66" data-end="788.27">Imagine you're building a React front end and a Node.js backend, or you're working at</span> <span data-start="788.27" data-end="789.91">Facebook and you're having a terrible day.</span> <span data-start="789.91" data-end="794.551">You're trying to debug a bunch of projects in a single day, and you have a bunch of test</span> <span data-start="794.551" data-end="799.87">runs on a bunch of different products and that's not really fun.</span> <span data-start="799.87" data-end="807.55">So we taught Jest how to juggle and we call this the multiprocess runner which leads me</span> <span data-start="807.55" data-end="810.93">to this incredibly unimpressive demo.</span> <span data-start="810.93" data-end="821.88">In the next version of Jest, Jest 20, you'll be able to pass anything that you want.</span> <span data-start="821.88" data-end="827.41">It will watch all your projects at the same time in a single instance.</span> <span data-start="827.41" data-end="830.94">Here, it's going to be running a few tests in watch mode.</span> </p>
<p><span data-start="830.94" data-end="835.19">I'm starting it up with a bunch of products like Yarn, and Jest, and Relay, and React,</span> <span data-start="835.19" data-end="844.48">and you can run these tests across you will of these products.</span> <span data-start="844.48" data-end="849.92">So that's going to be shipping in the next version of Jest.</span> <span data-start="849.92" data-end="854.029">And finally about features, I want to say that the experience should be delightful.</span> <span data-start="854.029" data-end="861.779">I don't want to fight with my test runner because only if the experience is enjoyable,</span> <span data-start="861.779" data-end="866.839">then that will actually make people want to write more tests.</span> </p>
<p><span data-start="866.839" data-end="871.05">So now that we've looked at performance and features, we should also talk a little bit</span> <span data-start="871.05" data-end="875.43">about adoptability because we spent all of this time at Facebook to make Jest really,</span> <span data-start="875.43" data-end="879.64">really good and now it's  —  we just want to you give it a try, right?</span> <span data-start="879.64" data-end="882.19">How do you get started with this?</span> <span data-start="882.19" data-end="887.44">The great thing about Jest is we've turned it into this zero-configuration framework.</span> </p>
<p><span data-start="887.44" data-end="891.3">It ships with a ton of features out of the box, and all you have to do is install it</span> <span data-start="891.3" data-end="892.64">with Yarn.</span> <span data-start="892.64" data-end="897.18">And then you go on to do a simple test.</span> <span data-start="897.18" data-end="905.279">And then you just run it.</span> <span data-start="905.279" data-end="911">We also managed to bundle Jest with other JavaScript tools to form a more cohesive development</span> <span data-start="911" data-end="912.05">experience.</span> <span data-start="912.05" data-end="921.67">If you're using React Native, or Create React App, you don't need to set anything up.</span> <span data-start="921.67" data-end="924.64">This also leads me to another small announcement.</span> <span data-start="924.64" data-end="930.64">So the JavaScript tools team in London at Facebook is also working on Yarn, the passenger</span> <span data-start="930.64" data-end="931.84">manager.</span> <span data-start="931.84" data-end="934.92">Next week, we're going to ship a really tiny command that I'm excited about.</span> <span data-start="934.92" data-end="940.5">It's called YarnCreate and it's extendible and you can look at it as your new entry point</span> <span data-start="940.5" data-end="943.38">for any new reaction.</span> </p>
<p><span data-start="943.38" data-end="949.26">So you can say yarn create react app, or yarn create native file and you can create your</span> <span data-start="949.26" data-end="950.26">own like that.</span> <span data-start="950.26" data-end="955.61">So this is a super sweet way to get started with something new.</span> <span data-start="955.61" data-end="959.603">These low-friction ways are something great and you might even get started on your next</span> <span data-start="959.603" data-end="962.79">project with Jest, right?</span> <span data-start="962.79" data-end="965.59">That's not enough.</span> <span data-start="965.59" data-end="971.93">We also need to figure out how to make Jest work for you when you're already using  —  when</span> <span data-start="971.93" data-end="973.98">you already have a big project.</span> <span data-start="973.98" data-end="979.709">When you peel back the outer layer of Jest, you should ideally also find things that make</span> <span data-start="979.709" data-end="982.769">sense on its own.</span> </p>
<p><span data-start="982.769" data-end="985.23">And that wasn't always the case.</span> <span data-start="985.23" data-end="989.22">Not long ago, Jest was one big repository without much internal structure.</span> <span data-start="989.22" data-end="994.22">So we did something super obvious, we introduced structure by turning it into one big module</span> <span data-start="994.22" data-end="995.589">in a repository.</span> <span data-start="995.589" data-end="1001.88">We actually split up Jest into 13 individual packages that can be reused in many different</span> <span data-start="1001.88" data-end="1003.3">contexts.</span> <span data-start="1003.3" data-end="1008.72">We're talking about pulling things apart from one big giant thing into many, many small</span> <span data-start="1008.72" data-end="1010.51">packages.</span> <span data-start="1010.51" data-end="1015.58">This helped with the separation of concerns between the different modules and it naturally</span> <span data-start="1015.58" data-end="1018.92">led us to learning Jest into a platform.</span> <span data-start="1018.92" data-end="1025.36">We actually ship all of these packages to npm and you can install of them individually</span> <span data-start="1025.36" data-end="1030.179">and use them in contexts that sometimes don't even have anything to do with testing.</span> <span data-start="1030.179" data-end="1035.48">They range from just like an ESLint plugin, or a port plugin, or a snapshot implementation,</span> <span data-start="1035.48" data-end="1041.51">or all the low-level implementations of Jest.</span> </p>
<p><span data-start="1041.51" data-end="1049.059">In Facebook, we use this hastemap package, in Instagram, for React's native packager,</span> <span data-start="1049.059" data-end="1057.09">and and the snapshot package has also been adopted by another  —  and React development</span> <span data-start="1057.09" data-end="1064.42">libraries like storybook, and style guides.</span> <span data-start="1064.42" data-end="1068.85">And then the Jest Validate Package is a tool that can help you for your own JavaScript</span> <span data-start="1068.85" data-end="1074.71">tools to make them easier to set them up and, give meaningful error messages to your users</span> <span data-start="1074.71" data-end="1078.19">and I'll show you a quick example of this one because I think it's pretty cool.</span> <span data-start="1078.19" data-end="1085.58">I think I'm sure all of you can agree with me that it's  —  if you drop Jest Validate</span> <span data-start="1085.58" data-end="1088.57">into your own projects, you can make it easier for everybody.</span> <span data-start="1088.57" data-end="1092.309">So in this case, if you're setting up Jest for the first time, and you have a typo in</span> <span data-start="1092.309" data-end="1097.59">your configuration, it will yell at you and that's very easy to set up.</span> </p>
<p><span data-start="1097.59" data-end="1102.87">So packages help you to consolidate infrastructure and share best practices.</span> <span data-start="1102.87" data-end="1107.53">It's a good case when all the parts together, Jest, is pretty good.</span> <span data-start="1107.53" data-end="1111.97">But the parts, individually, they're also great.</span> <span data-start="1111.97" data-end="1116.549">And by sharing best practices, the way I see it, the more we can standardized in how we</span> <span data-start="1116.549" data-end="1122.86">write tests, the easier it will be for people to write effective tests.</span> <span data-start="1122.86" data-end="1128.049">And then the other effect of the separation of concerns had was it made Jest more hackable</span> <span data-start="1128.049" data-end="1133.07">and we were able to make a great open source community around it.</span> <span data-start="1133.07" data-end="1146.97">For example, which is the editor integration in VS have interesting code for Jest.</span> <span data-start="1146.97" data-end="1152.23">And we managed to merge the generic pieces back into Jest so that other ADEs could adopt</span> <span data-start="1152.23" data-end="1157.21">and provide a great user experience to Jest.</span> <span data-start="1157.21" data-end="1162.679">We managed to add two core contributes to Jest who are not working at Facebook and they're</span> <span data-start="1162.679" data-end="1164.72">contributing to Jest on their own time.</span> <span data-start="1164.72" data-end="1172.54">So I'll show you an example of that.</span> <span data-start="1172.54" data-end="1177.341">So Rahelian Miguel joined, and I was like, I should just build this type ahead like I</span> <span data-start="1177.341" data-end="1178.809">did earlier, right?</span> </p>
<p><span data-start="1178.809" data-end="1184.44">And it's a fairly complex feature, and one day I woke up and Rahelian was like, I found</span> <span data-start="1184.44" data-end="1187.69">this really interesting, and I went ahead and built it.</span> <span data-start="1187.69" data-end="1194.33">And I came back and I said, wow, this is amazing, we have to use that.</span> <span data-start="1194.33" data-end="1202.679">And then a couple of days later, he just came back and said, here's another pull request,</span> <span data-start="1202.679" data-end="1204.51">and I rewrote the entire test.</span> <span data-start="1204.51" data-end="1205.62">It's awesome.</span> <span data-start="1205.62" data-end="1207.299">Let's ship it.</span> <span data-start="1207.299" data-end="1209.74">And that was a great experience.</span> <span data-start="1209.74" data-end="1215.74">And Rahelian did a ton of great work with Jest and even presented it at React Conf.</span> <span data-start="1215.74" data-end="1221.63">And so the Jest project is easily contributable to everybody.</span> <span data-start="1221.63" data-end="1228.82">We know that there's new contributors to Jest every week that we haven't even known about</span> <span data-start="1228.82" data-end="1229.82">before.</span> </p>
<p><span data-start="1229.82" data-end="1231.4">So that's awesome.</span> <span data-start="1231.4" data-end="1242.83">And the  —  conferences like this one  —  there's tutorials, blog posts, books even written</span> <span data-start="1242.83" data-end="1248.07">about Jest, and then, finally, I feel like we have new conventions about simplifying</span> <span data-start="1248.07" data-end="1253.35">testing and writing new tests and I find that really exciting.</span> <span data-start="1253.35" data-end="1258.96">One thing that I'm going to ask you, the JavaScript community is  —  we need help with translations.</span> <span data-start="1258.96" data-end="1263.88">Documentation is essential to teach people how to write tests and if documentation is</span> <span data-start="1263.88" data-end="1268.53">not written in the language that you're most familiar with, it's really hard to get started.</span> <span data-start="1268.53" data-end="1274.52">So if you have some time, if you speak another language, please help us translate the documentation</span> <span data-start="1274.52" data-end="1275.52">for Jest.</span> </p>
<p><span data-start="1275.52" data-end="1277.62">We would really appreciate it.</span> <span data-start="1277.62" data-end="1281.23">But that's still not enough to get people to adopt Jest.</span> <span data-start="1281.23" data-end="1283.68">We need something more if you have an existing project.</span> <span data-start="1283.68" data-end="1288.11">And some people might have seen this slide before and they're catching on to what I'm</span> <span data-start="1288.11" data-end="1290">trying to do here.</span> <span data-start="1290" data-end="1295.51">So I was here about two years ago, and I announced this concept of code mods to the JavaScript</span> <span data-start="1295.51" data-end="1296.51">community, right?</span> <span data-start="1296.51" data-end="1303.75">It's, like, this system of how you can transform entire codebases to new APIs, right?</span> <span data-start="1303.75" data-end="1309.361">So there's this project called jest-codemods, and with jscodeshift, you can convert a project</span> <span data-start="1309.361" data-end="1313.53">to Jest.</span> </p>
<p><span data-start="1313.53" data-end="1314.85">Here's a small refresher.</span> <span data-start="1314.85" data-end="1321.18">Say you have this test with jscodeshift, and jest-codemods, you can automatically convert</span> <span data-start="1321.18" data-end="1327.29">this and print all of your files in a way as if you have written themselves and export</span> <span data-start="1327.29" data-end="1336.63">them immediately in a couple of seconds and I have a short demo of this.</span> <span data-start="1336.63" data-end="1337.7">So I found this project.</span> <span data-start="1337.7" data-end="1343.08">All I did so far, I've added Jest, it has a couple hundred tests and then I just type</span> <span data-start="1343.08" data-end="1344.52">jest-codemods.</span> <span data-start="1344.52" data-end="1347.58">Not codemod, codemods.</span> <span data-start="1347.58" data-end="1356.34">And I've looked at this before, and I hit inspect.</span> </p>
<p><span data-start="1356.34" data-end="1359.2">Codemods break down silos between frameworks.</span> <span data-start="1359.2" data-end="1365.29">They allow you to move from one framework to other frameworks in a couple of seconds.</span> <span data-start="1365.29" data-end="1372.309">And all we need to do now is run Jest, and I've tested it before, so you get a nice performance</span> <span data-start="1372.309" data-end="1373.309">speed-up.</span> <span data-start="1373.309" data-end="1376.43">That is the wrong version of Jest, also.</span> <span data-start="1376.43" data-end="1378.76">I apologize.</span> <span data-start="1378.76" data-end="1379.98">We need Yarn for this.</span> </p>
<p><span data-start="1379.98" data-end="1380.98">Okay.</span> <span data-start="1380.98" data-end="1382.33">This is going to take a couple of seconds.</span> <span data-start="1382.33" data-end="1383.51">So this is super exciting.</span> <span data-start="1383.51" data-end="1386.25">You can just go to a new test runner.</span> <span data-start="1386.25" data-end="1388.29">All right.</span> <span data-start="1388.29" data-end="1390">There's only about eight tests failing out of 300.</span> <span data-start="1390" data-end="1394.34">So I feel pretty good about this.</span> <span data-start="1394.34" data-end="1416.049">So I just wanted to send a quick  —  it is not  —  there it is.</span> <span data-start="1416.049" data-end="1427.77">I'll explain a bit more later.</span> <span data-start="1427.77" data-end="1431.679">All right.</span> <span data-start="1431.679" data-end="1437.62">We got this, cool.</span> </p>
<p><span data-start="1437.62" data-end="1441.75">The best part of this story that Jest code mods was entirely community driven.</span> <span data-start="1441.75" data-end="1446.15">The project was created by the community, iterated on by the community, and is maintained</span> <span data-start="1446.15" data-end="1447.24">by the community.</span> <span data-start="1447.24" data-end="1449.03">This is awesome.</span> <span data-start="1449.03" data-end="1454.07">As a result, more than 100 companies have told us they've adopted Jest in the last six</span> <span data-start="1454.07" data-end="1455.1">months alone.</span> <span data-start="1455.1" data-end="1457.789">Some of them are really big, some of them are really small.</span> </p>
<p><span data-start="1457.789" data-end="1459.32">So it's impossible without code mods.</span> <span data-start="1459.32" data-end="1464.76">If we look at metrics at Facebook, the number of tests people wrote in the last six months</span> <span data-start="1464.76" data-end="1471.2">has grown by 35%, which is more than twice as much as it has grown ever before.</span> <span data-start="1471.2" data-end="1476.179">When we improved our testing experience, people at Facebook naturally started writing more</span> <span data-start="1476.179" data-end="1477.179">tests.</span> <span data-start="1477.179" data-end="1484.57">And after all this, the experience of writing tests with Jest is not painful anymore.</span> </p>
<p><span data-start="1484.57" data-end="1491.07">And I would even say that it's more than just painless.</span> <span data-start="1491.07" data-end="1495.38">It's now a product that gives confidence to engineers when they're building software.</span> <span data-start="1495.38" data-end="1500.82">And not only did we accomplish that, we also made testing fun and exciting.</span> <span data-start="1500.82" data-end="1507.33">And, finally, I've been mentioning Jest a few times in the last 20 minutes and I've</span> <span data-start="1507.33" data-end="1510.03">pointed out a bunch of major features that we are going to do ship.</span> <span data-start="1510.03" data-end="1513.96">It's been a while since we've had a major release and we've worked really, really hard</span> <span data-start="1513.96" data-end="1514.96">on this.</span> </p>
<p><span data-start="1514.96" data-end="1520.59">It's the biggest Jest release that we've ever made and I was gonna show and ship this to</span> <span data-start="1520.59" data-end="1524.8">you right now.</span> <span data-start="1524.8" data-end="1531.97">We just need to publish it with Yarn and Lerna and this is going to be a major  —  of course,</span> <span data-start="1531.97" data-end="1533.87">it's going to be awesome.</span> <span data-start="1533.87" data-end="1536.75">And then I need to merge this.</span> <span data-start="1536.75" data-end="1539.26">I'll send another pull request right now, quick.</span> <span data-start="1539.26" data-end="1542.15">Just one moment.</span> <span data-start="1542.15" data-end="1547.61">All right.</span> <span data-start="1547.61" data-end="1550.34">Sweet.</span> <span data-start="1550.34" data-end="1553.93">So that's two pull requests.</span> <span data-start="1553.93" data-end="1556.47">I think that's enough for today.</span> <span data-start="1556.47" data-end="1558.15">[ Applause ]</span> <span data-start="1558.15" data-end="1561.52">Thank you.</span> <span data-start="1561.52" data-end="1567.66">What you've seen today is that building tools is successful when you look beyond your own</span> <span data-start="1567.66" data-end="1572">walls and you collaborate with the wider JavaScript community.</span> </p>
<p><span data-start="1572" data-end="1576.11">With Jest, which was a lesson that we learned the hard way, you know?</span> <span data-start="1576.11" data-end="1580.77">But the best part about working together is that the best ideas often come from people</span> <span data-start="1580.77" data-end="1584.63">who you don't work with every day and the result is products that we can turn with a</span> <span data-start="1584.63" data-end="1585.63">delightful experience.</span> <span data-start="1585.63" data-end="1586.63">Thank you very much.</span> <span data-start="1586.63" data-end="1587.63"Audience member: Thank you, Chris.</span> <span data-start="1587.63" data-end="1588.63">How's everyone?</span> <span data-start="1588.63" data-end="1589.63">Falling asleep?</span> <span data-start="1589.63" data-end="1590.63">Getting more coffee?</span> <span data-start="1590.63" data-end="1591.63">Where? save?</span> <span data-start="1591.63" data-end="1592.63">Well, okay.</span> <span data-start="1592.63" data-end="1593.63">I was thinking of an interpretive dance but I feel like not everyone wants to see that,</span> <span data-start="1593.63" data-end="1594.63">so maybe we're going to skip that part.</span> <span data-start="1594.63" data-end="1595.63">All right.</span> </p>
<p><span data-start="1595.63" data-end="1596.63">We skipped the awkward part of me trying to dance, which is great for you and we have</span> <span data-start="1596.63" data-end="1597.63">our next speaker, Matthew, who's working at BBC, and he's going to tell you all the awesome</span> <span data-start="1597.63" data-end="1598.63">things that you can do with video and the browser.</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
