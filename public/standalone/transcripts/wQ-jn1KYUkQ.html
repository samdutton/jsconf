<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>wQ-jn1KYUkQ</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/wQ-jn1KYUkQ?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="2.78" data-end="5.46">does it work yeah it works well that's</span> <span data-start="5.46" data-end="6.81">big</span> <span data-start="6.81" data-end="10.32">so hello my name is Ann amigas I work as</span> <span data-start="10.32" data-end="12.24">a front-end developer and designer in</span> <span data-start="12.24" data-end="15.059">lunar logic we are no management</span> <span data-start="15.059" data-end="17.13">software house based in Krakow Poland</span> <span data-start="17.13" data-end="20.91">which is not far thankfully we built</span> <span data-start="20.91" data-end="25.859">apps in rails in elixir in react and</span> <span data-start="25.859" data-end="27.96">whatever technology suits our clients</span> <span data-start="27.96" data-end="31.08">needs best the title of my talk is make</span> <span data-start="31.08" data-end="35.01">your animations perform well and I had a</span> <span data-start="35.01" data-end="38.219">pleasure to create and maintain free</span> <span data-start="38.219" data-end="40.92">open-source libraries you can ignore the</span> </p>
<p><span data-start="40.92" data-end="45.93">CSS name in the name stir and before I</span> <span data-start="45.93" data-end="48.27">give you the first tip on animation</span> <span data-start="48.27" data-end="50.039">performance I need to share a short</span> <span data-start="50.039" data-end="54.899">story about my life so about two years</span> <span data-start="54.899" data-end="57.96">ago I bought my very first own apartment</span> <span data-start="57.96" data-end="60.989">and I decided to decorate it on my own</span> <span data-start="60.989" data-end="64.949">and what I found out it's that like</span> <span data-start="64.949" data-end="67.26">decorating your house is very similar to</span> <span data-start="67.26" data-end="69.45">designing a website you just need to put</span> <span data-start="69.45" data-end="73.77">many things together that go well what I</span> <span data-start="73.77" data-end="77.61">also realized is that most of the things</span> <span data-start="77.61" data-end="79.53">that are out there in furniture shops</span> <span data-start="79.53" data-end="83.31">are not the things that I want in my</span> <span data-start="83.31" data-end="86.1">house I just didn't like the things that</span> </p>
<p><span data-start="86.1" data-end="88.68">I could afford and the things that I</span> <span data-start="88.68" data-end="91.74">couldn't afford I liked so kind of it</span> <span data-start="91.74" data-end="96.09">didn't much so this is my lamp in the</span> <span data-start="96.09" data-end="100.259">living room after two years and if I had</span> <span data-start="100.259" data-end="101.67">to compare it to something on the</span> <span data-start="101.67" data-end="105.36">website is it's this just text that says</span> <span data-start="105.36" data-end="107.43">low thing that she puts in a place where</span> <span data-start="107.43" data-end="111.03">the low there should be it just kills</span> <span data-start="111.03" data-end="112.71">you that's something like that is there</span> <span data-start="112.71" data-end="114.63">anything about it every time I see it</span> <span data-start="114.63" data-end="116.549">that you should actually put something</span> <span data-start="116.549" data-end="120.27">real there so it's good because at some</span> <span data-start="120.27" data-end="123">point you're going to replace it the</span> <span data-start="123" data-end="126.799">next piece I have is this beautiful</span> <span data-start="126.799" data-end="130.67">coffee table when I found it after light</span> <span data-start="130.67" data-end="134.81">year and a half I told that it's perfect</span> <span data-start="134.81" data-end="137.15">because it was affordable what color was</span> <span data-start="137.15" data-end="142.01">matching my place it has this shelf to</span> <span data-start="142.01" data-end="144.26">put all my art albums there so it's just</span> <span data-start="144.26" data-end="146.09">it's just perfect and I assembled it</span> <span data-start="146.09" data-end="148.19">myself so I feel it's like really</span> <span data-start="148.19" data-end="151.28">powerful after that and if I had to</span> <span data-start="151.28" data-end="153.14">compare it it would be comparing it to</span> <span data-start="153.14" data-end="155.98">the animation that just helps user to</span> <span data-start="155.98" data-end="158.42">understand the app better it just guides</span> <span data-start="158.42" data-end="161.84">him at some context so everything that</span> <span data-start="161.84" data-end="163.76">the user is doing there so it's just</span> <span data-start="163.76" data-end="169.81">really good thing and I have this chairs</span> <span data-start="169.81" data-end="172.76">well this countertop is of irregular</span> <span data-start="172.76" data-end="175.34">size the regular chairs are just too low</span> <span data-start="175.34" data-end="177.98">and regular hookers are too high for it</span> <span data-start="177.98" data-end="181.19">so I have to choose from like very small</span> <span data-start="181.19" data-end="184.4">pool of chairs I found this online and</span> <span data-start="184.4" data-end="186.65">they're like why it's for the ball and</span> <span data-start="186.65" data-end="190.64">kind of like simple so it's they're</span> <span data-start="190.64" data-end="192.17">going to be kind of okay</span> <span data-start="192.17" data-end="195.049">but it turned out they're kind of okay</span> <span data-start="195.049" data-end="197.03">it's not enough for me I just hate them</span> </p>
<p><span data-start="197.03" data-end="199.31">I never sit on them I prefer to eat</span> <span data-start="199.31" data-end="202.22">standing up the only moment that they're</span> <span data-start="202.22" data-end="204.14">in use is some the big part is when</span> <span data-start="204.14" data-end="206.57">someone gets like really drunk and</span> <span data-start="206.57" data-end="209.69">decides to sit on them and I can't get</span> <span data-start="209.69" data-end="211.73">rid of them because like I have chairs</span> <span data-start="211.73" data-end="213.56">they're like everything is fine about</span> <span data-start="213.56" data-end="215.75">them but it's just me that don't like</span> <span data-start="215.75" data-end="217.67">them and my friends whispering them</span> <span data-start="217.67" data-end="220.07">crazy just throw away and have nothing</span> <span data-start="220.07" data-end="222.56">there and what I could compare it to</span> <span data-start="222.56" data-end="225.53">it's just animation that you put</span> <span data-start="225.53" data-end="227.329">something out there without really</span> <span data-start="227.329" data-end="230.51">thinking about it and it just stays</span> <span data-start="230.51" data-end="233.72">there forever you have no time to</span> <span data-start="233.72" data-end="237.86">replace it because you know you already</span> <span data-start="237.86" data-end="239.75">you already put something there and you</span> <span data-start="239.75" data-end="241.549">have different priorities so it's like</span> <span data-start="241.549" data-end="244.04">laggy you make all your users just</span> <span data-start="244.04" data-end="246.769">downloads thousands of assets and it's</span> <span data-start="246.769" data-end="250.1">not really helping anyone it makes the</span> <span data-start="250.1" data-end="253.13">experience worse in like all cases</span> <span data-start="253.13" data-end="255.56">basically and it's going to stay there</span> <span data-start="255.56" data-end="256.16">believe me</span> <span data-start="256.16" data-end="258.5">so the first rule of performance of an</span> <span data-start="258.5" data-end="260.66">animation is just to not use them if you</span> <span data-start="260.66" data-end="262.789">don't really need them just don't force</span> <span data-start="262.789" data-end="263.17">you</span> <span data-start="263.17" data-end="267.46">to download many assets to make the</span> <span data-start="267.46" data-end="272.95">whole up more junky okay now that we</span> <span data-start="272.95" data-end="275.32">have the most important rule of CSS and</span> </p>
<p><span data-start="275.32" data-end="277.57">JavaScript and any kind of animations</span> <span data-start="277.57" data-end="280.57">behind us the important thing is to</span> <span data-start="280.57" data-end="282.7">choose the right tool so there's this</span> <span data-start="282.7" data-end="286">debate CSS or JavaScript animations some</span> <span data-start="286" data-end="289.72">people prefer this or that actually to</span> <span data-start="289.72" data-end="292.12">be honest they're both perfectly good</span> <span data-start="292.12" data-end="295.48">tools but they suit different purpose so</span> <span data-start="295.48" data-end="298.57">if you have CSS animations they're just</span> <span data-start="298.57" data-end="300.42">great if you have something simple up</span> <span data-start="300.42" data-end="303.31">simple to put up like I don't know</span> <span data-start="303.31" data-end="305.47">something that just needs to slide up</span> <span data-start="305.47" data-end="308.11">the screen this is perfect then during</span> <span data-start="308.11" data-end="310.12">the native to the browser they get all</span> <span data-start="310.12" data-end="314.07">the GPU acceleration from the browser</span> <span data-start="314.07" data-end="317.7">there's a need to put prefixes for them</span> <span data-start="317.7" data-end="321.34">unfortunately but it's not much and the</span> <span data-start="321.34" data-end="323.35">only bad thing about them is that if you</span> <span data-start="323.35" data-end="325.69">need to schedule more than like one or</span> <span data-start="325.69" data-end="328.33">two animations in CSS it's just a pain</span> <span data-start="328.33" data-end="330.19">and this is where the JavaScript</span> <span data-start="330.19" data-end="333.64">animations actually shine they're really</span> <span data-start="333.64" data-end="335.92">good at scheduling and timing so if you</span> <span data-start="335.92" data-end="337.93">need to put more than one animation and</span> <span data-start="337.93" data-end="340.36">schedule them one after another this is</span> <span data-start="340.36" data-end="340.9">great</span> <span data-start="340.9" data-end="342.13">and there are many ways how you can</span> <span data-start="342.13" data-end="344.38">implement JavaScript animations during</span> <span data-start="344.38" data-end="347.62">like pure JavaScript it needs some</span> <span data-start="347.62" data-end="349.21">optimizations I will talk about the</span> <span data-start="349.21" data-end="351.97">trick later there's web animation API</span> <span data-start="351.97" data-end="354.4">which is my personal favorite because it</span> <span data-start="354.4" data-end="357.67">takes the best things of both words it's</span> <span data-start="357.67" data-end="360.04">it's got this GPU acceleration from the</span> <span data-start="360.04" data-end="362.68">browser and at the same time it get the</span> <span data-start="362.68" data-end="365.71">scheduling and timing unfortunately it</span> <span data-start="365.71" data-end="368.53">still needs to be poly field so until</span> <span data-start="368.53" data-end="371.05">like all the browser vendors decide to</span> <span data-start="371.05" data-end="373.99">have it there well you need to polyfill</span> <span data-start="373.99" data-end="377.68">that and there are frameworks but you</span> <span data-start="377.68" data-end="379.69">need to decide if they're really needed</span> <span data-start="379.69" data-end="382.15">in your app because well it's some code</span> <span data-start="382.15" data-end="385.48">that you're downloading and well it can</span> <span data-start="385.48" data-end="388.27">be heavy like music is amazing platform</span> <span data-start="388.27" data-end="390.61">but it's really heavy so for small apps</span> <span data-start="390.61" data-end="393.13">with notes many animations is not good</span> <span data-start="393.13" data-end="394.12">choice and MJ</span> <span data-start="394.12" data-end="398.949">can be a good choice then okay so so we</span> <span data-start="398.949" data-end="402.85">have the choice of Bustos and the the</span> <span data-start="402.85" data-end="406.15">most important tip behind us but before</span> <span data-start="406.15" data-end="407.86">we actually start optimizing our</span> <span data-start="407.86" data-end="410.74">animations it's good to know what's</span> <span data-start="410.74" data-end="414.22">going up what's going on in the behind</span> <span data-start="414.22" data-end="417.639">because it makes us realize that some</span> <span data-start="417.639" data-end="421.36">optimizations can can can make things</span> <span data-start="421.36" data-end="423.04">better or worse actually</span> <span data-start="423.04" data-end="426.669">so how actually browser paints a website</span> <span data-start="426.669" data-end="429.4">let's talk about this for a moment like</span> <span data-start="429.4" data-end="432.25">very briefly so first step is the</span> <span data-start="432.25" data-end="436.18">browser makes get request and it gets</span> </p>
<p><span data-start="436.18" data-end="439.93">HTML or in turn then the h2 the hTML is</span> <span data-start="439.93" data-end="442.479">parsed and Dom is created document</span> <span data-start="442.479" data-end="445.33">object model it looks like a tree it's</span> <span data-start="445.33" data-end="447.669">got all the notes from the HTML in it</span> <span data-start="447.669" data-end="451.18">they're visible in this way after that</span> <span data-start="451.18" data-end="453.669">the styles are applied it's from the</span> <span data-start="453.669" data-end="456.34">user agent from your style sheets inline</span> <span data-start="456.34" data-end="461.53">Styles the don't is taken out and we</span> <span data-start="461.53" data-end="463.3">have a render tree render tree is very</span> <span data-start="463.3" data-end="466.69">similar to the Dom with this difference</span> <span data-start="466.69" data-end="469.51">that render tree has all the Styles</span> <span data-start="469.51" data-end="472.36">applied and there are only things that's</span> <span data-start="472.36" data-end="474.4">going to be actually visible on a page</span> <span data-start="474.4" data-end="477.669">so for example if the image elements</span> <span data-start="477.669" data-end="480.91">here had display:none and a paragraph</span> <span data-start="480.91" data-end="484.389">element had a pseudo class that's what</span> <span data-start="484.389" data-end="485.68">would happen</span> <span data-start="485.68" data-end="487.479">they'll be it would be also represented</span> <span data-start="487.479" data-end="490.389">in the render tree and then the layout</span> <span data-start="490.389" data-end="493.479">is calculated at this point the browser</span> <span data-start="493.479" data-end="495.43">is trying to figure out how much space</span> <span data-start="495.43" data-end="497.229">each of the elements is going to take</span> <span data-start="497.229" data-end="500.139">and it actually features it as a</span> <span data-start="500.139" data-end="503.68">collection of vector boxes here we need</span> <span data-start="503.68" data-end="506.5">to remember that the parent size affects</span> <span data-start="506.5" data-end="511.12">its children size after this points when</span> <span data-start="511.12" data-end="512.979">browser already figure out how much</span> <span data-start="512.979" data-end="516.459">space each element is going to take we</span> <span data-start="516.459" data-end="519.459">have everything rasterized and put into</span> <span data-start="519.459" data-end="522.18">layers you can think of layers as of</span> <span data-start="522.18" data-end="524.8">something like layers in Photoshop that</span> <span data-start="524.8" data-end="526.6">if you have things on two different</span> <span data-start="526.6" data-end="527.22">layers</span> <span data-start="527.22" data-end="529.35">then you can move them around if things</span> <span data-start="529.35" data-end="531.329">are on the same layer then there is not</span> <span data-start="531.329" data-end="533.73">much of what you can do actually they're</span> <span data-start="533.73" data-end="539.069">just glued together so yeah so our our</span> <span data-start="539.069" data-end="542.91">our collection of boxes moves to to this</span> <span data-start="542.91" data-end="544.769">two layers layers are going to be</span> <span data-start="544.769" data-end="547.35">represented as this box shadow I hope</span> <span data-start="547.35" data-end="552.11">that you appreciate how cheesy this is</span> <span data-start="552.11" data-end="555.06">okay and the last step is compositing</span> <span data-start="555.06" data-end="556.949">and at this step this is the first step</span> <span data-start="556.949" data-end="561.029">that browser takes advantage of the GPU</span> <span data-start="561.029" data-end="565.379">so it optimizes its its way around here</span> <span data-start="565.379" data-end="569.459">so the the layers that we had actually</span> <span data-start="569.459" data-end="572.339">get glued together into one frame that</span> <span data-start="572.339" data-end="575.55">is then shell to the our end user dude</span> <span data-start="575.55" data-end="578.99">it's good to one frame one picture so</span> <span data-start="578.99" data-end="582.589">this was the first render but actually</span> <span data-start="582.589" data-end="585.689">you must understand that every time the</span> <span data-start="585.689" data-end="589.29">user makes any change on the on your</span> <span data-start="589.29" data-end="590.91">page so by changing I mean like</span> <span data-start="590.91" data-end="593.069">scrolling hovering over element that</span> <span data-start="593.069" data-end="596.279">changes and hover or just clicking</span> <span data-start="596.279" data-end="598.98">something that gets a class somewhere</span> <span data-start="598.98" data-end="600.93">else then the browser needs to go</span> <span data-start="600.93" data-end="603.48">through all the steps again with the</span> <span data-start="603.48" data-end="607.04">small change that instead of having</span> <span data-start="607.04" data-end="610.5">instead of having this request at the</span> <span data-start="610.5" data-end="612.569">beginning there can be some JavaScript</span> <span data-start="612.569" data-end="617.1">that's introduces the change so there</span> <span data-start="617.1" data-end="619.319">are different types of change that you</span> <span data-start="619.319" data-end="620.879">can actually introduce and some of them</span> <span data-start="620.879" data-end="623.1">are more important for performance and</span> <span data-start="623.1" data-end="624.689">some of them are a less performance so</span> <span data-start="624.689" data-end="627.48">let's go through them the first type of</span> <span data-start="627.48" data-end="629.04">changes when we change layout</span> <span data-start="629.04" data-end="631.85">it's when we animates with height</span> <span data-start="631.85" data-end="637.5">margins left or right properties and in</span> <span data-start="637.5" data-end="639.6">this case browser needs to go through</span> <span data-start="639.6" data-end="641.339">all the steps because it needs to figure</span> <span data-start="641.339" data-end="643.05">out how much space each element is</span> <span data-start="643.05" data-end="647.579">taking and unfortunately it's it's a</span> <span data-start="647.579" data-end="650.309">very costly change then there is when we</span> <span data-start="650.309" data-end="653.579">change the paint properties the browser</span> <span data-start="653.579" data-end="655.829">knows how much space each elements takes</span> <span data-start="655.829" data-end="658.709">so it can skip this step so it's a bit</span> <span data-start="658.709" data-end="660.06">more performance</span> <span data-start="660.06" data-end="662.19">these are changes like background color</span> <span data-start="662.19" data-end="666.87">color shadows things like that and there</span> <span data-start="666.87" data-end="668.88">is the most performant type of change</span> <span data-start="668.88" data-end="671.52">when we only change compositing in</span> <span data-start="671.52" data-end="676.44">compositing its transforms or opacity in</span> <span data-start="676.44" data-end="678.57">this case we don't change layout or</span> <span data-start="678.57" data-end="680.94">paint so this is the most optimal kind</span> <span data-start="680.94" data-end="683.61">of change which means that these are the</span> <span data-start="683.61" data-end="685.47">two properties that you should be</span> <span data-start="685.47" data-end="688.62">animating like in in most cases they're</span> <span data-start="688.62" data-end="691.08">like perfectly fine to anything you want</span> <span data-start="691.08" data-end="696.57">to do in animation all right why is that</span> <span data-start="696.57" data-end="699.96">so why this should be the only purpose</span> <span data-start="699.96" data-end="703.32">is for for animating first it's this GPU</span> <span data-start="703.32" data-end="705.42">acceleration that I that I said that's</span> <span data-start="705.42" data-end="707.52">happening at the compositing stage and</span> <span data-start="707.52" data-end="711.77">the second one is layer creation so at</span> <span data-start="711.77" data-end="717.39">next to last step we had rasterizing and</span> <span data-start="717.39" data-end="719.16">creating layers but actually you need to</span> <span data-start="719.16" data-end="721.62">know that that by default browser puts</span> <span data-start="721.62" data-end="724.53">everything into one layer so we need to</span> <span data-start="724.53" data-end="726.18">figure out ways so that the browser</span> <span data-start="726.18" data-end="729.75">would create smaller layers and by</span> <span data-start="729.75" data-end="734.01">default when we have this when we have</span> <span data-start="734.01" data-end="736.2">these different layers like things can</span> <span data-start="736.2" data-end="738.36">be moved around and they don't affect</span> <span data-start="738.36" data-end="741.84">other things so it means that that the</span> <span data-start="741.84" data-end="744.81">animation is smooth so what creates</span> <span data-start="744.81" data-end="747.78">other layers frizzier perspective</span> <span data-start="747.78" data-end="750.33">transforms animated this is a keyword</span> <span data-start="750.33" data-end="754.47">animated 2d transfers or opacity if</span> <span data-start="754.47" data-end="758.46">element is top on the top or it's a</span> <span data-start="758.46" data-end="761.25">child of the compositing layer that was</span> <span data-start="761.25" data-end="764.25">already created accelerated CSS filters</span> <span data-start="764.25" data-end="767.4">and in special cases video canvas or</span> <span data-start="767.4" data-end="770.43">plugins like flash or Silverlight this</span> <span data-start="770.43" data-end="773.34">is what creates layers so we have a</span> <span data-start="773.34" data-end="776.13">small problem here and I'll give you an</span> <span data-start="776.13" data-end="778.35">example to understand it better let's</span> <span data-start="778.35" data-end="780.42">say that we have here an animation is</span> <span data-start="780.42" data-end="782.98">applied to the button and it's</span> <span data-start="782.98" data-end="787.54">it rotates the button all the time so</span> <span data-start="787.54" data-end="789.88">it's fine we have two layers button is</span> <span data-start="789.88" data-end="792.399">just moving around notes and that's</span> <span data-start="792.399" data-end="796.149">actually affecting anything around but</span> <span data-start="796.149" data-end="798.16">in most cases you would want the button</span> <span data-start="798.16" data-end="801.25">to actually be moved only for example if</span> <span data-start="801.25" data-end="804.94">someone hovers over the verse over it so</span> <span data-start="804.94" data-end="806.74">that's the point where you want the</span> <span data-start="806.74" data-end="810.94">animation to happen so the problem here</span> <span data-start="810.94" data-end="812.829">is that the browser doesn't know that</span> <span data-start="812.829" data-end="815.23">this animation is bound to happen so</span> <span data-start="815.23" data-end="818.29">it's it puts everything on one layer and</span> <span data-start="818.29" data-end="822.43">when user actually actually just hovers</span> <span data-start="822.43" data-end="824.8">over over the elements it only has to</span> <span data-start="824.8" data-end="827.26">create the new layer so everything needs</span> <span data-start="827.26" data-end="830.35">to be repainted and what users is of</span> <span data-start="830.35" data-end="831.43">course not</span> <span data-start="831.43" data-end="833.589">like the button doesn't disappear</span> <span data-start="833.589" data-end="836.529">anywhere but there is a small lag and it</span> <span data-start="836.529" data-end="839.8">can make user think that your your app</span> <span data-start="839.8" data-end="844.81">is responsive or it's just slow and the</span> <span data-start="844.81" data-end="846.67">worst part is that after animation is</span> <span data-start="846.67" data-end="849.639">done it's also pushed layers together</span> <span data-start="849.639" data-end="853.06">again so if a user hovers over it again</span> <span data-start="853.06" data-end="855.72">it will do the same thing repaint things</span> <span data-start="855.72" data-end="858.88">so there is one more thing that can make</span> <span data-start="858.88" data-end="862.66">your browser create a new layer and this</span> <span data-start="862.66" data-end="865.18">is the will change property and it can</span> <span data-start="865.18" data-end="866.74">help us with the prone that we've had</span> <span data-start="866.74" data-end="869.589">using it is very easy you just need to</span> <span data-start="869.589" data-end="871.54">apply it to the element that is going to</span> <span data-start="871.54" data-end="875.17">be changed and explicitly say like we'll</span> <span data-start="875.17" data-end="878.98">change transform browser will we'll know</span> <span data-start="878.98" data-end="881.68">that it needs to listen for a change it</span> <span data-start="881.68" data-end="883.48">will create the new layer for this</span> <span data-start="883.48" data-end="887.339">element so so we can change things</span> <span data-start="887.339" data-end="890.889">without being worried that and you learn</span> <span data-start="890.889" data-end="894.1">it to be created at the moment of of</span> <span data-start="894.1" data-end="896.29">user actually interacting with the</span> <span data-start="896.29" data-end="899.68">website there are a few rules that you</span> <span data-start="899.68" data-end="902.5">need to follow with will change first</span> <span data-start="902.5" data-end="904.81">one is you need to give a browser a</span> <span data-start="904.81" data-end="907.48">moment to think so let's say that you</span> <span data-start="907.48" data-end="911.079">want to apply some animation in hover</span> <span data-start="911.079" data-end="914.709">you cannot add like we'll change</span> <span data-start="914.709" data-end="917.319">transform for the hovered element you</span> <span data-start="917.319" data-end="919.839">need to be one step ahead of the browser</span> <span data-start="919.839" data-end="922.209">because when user hovers over element</span> <span data-start="922.209" data-end="924.79">the browser already is like making the</span> <span data-start="924.79" data-end="927.55">best optimizations it can for for it to</span> <span data-start="927.55" data-end="929.829">happen and actually putting will change</span> <span data-start="929.829" data-end="932.8">at this point could could interrupt the</span> <span data-start="932.8" data-end="935.17">browser so please check at least added</span> <span data-start="935.17" data-end="938.199">one moment before you want this change</span> <span data-start="938.199" data-end="945.37">to happen like here to just button you</span> <span data-start="945.37" data-end="947.68">can't also try to optimize too many</span> <span data-start="947.68" data-end="950.62">elements you might think that well why</span> <span data-start="950.62" data-end="953.35">just no ads will change to everything</span> <span data-start="953.35" data-end="954.819">and have everything on different</span> <span data-start="954.819" data-end="956.68">separate layers and just move things</span> <span data-start="956.68" data-end="958.6">around without affecting anything else</span> <span data-start="958.6" data-end="962.49">don't ever do this here was a nice</span> <span data-start="962.49" data-end="965.74">spider-man quote on the slide but I had</span> <span data-start="965.74" data-end="968.319">to remove it because it was just already</span> <span data-start="968.319" data-end="971.23">on CSS conf two days ago I would just</span> <span data-start="971.23" data-end="973.089">hint you that it was Uncle Sam saying</span> <span data-start="973.089" data-end="977.829">that things about responsibility so</span> <span data-start="977.829" data-end="981.1">every layer consumes memory starting to</span> <span data-start="981.1" data-end="984.16">use them wisely if user has a less</span> <span data-start="984.16" data-end="986.79">powerful device like low end phone</span> <span data-start="986.79" data-end="989.26">actually having too many layers can</span> <span data-start="989.26" data-end="993.16">trash his his or her browser and well</span> <span data-start="993.16" data-end="994.81">the experience won't be very good then</span> <span data-start="994.81" data-end="998.709">write another rule that you need to</span> <span data-start="998.709" data-end="1000.99">remember is to use use will change</span> <span data-start="1000.99" data-end="1003.06">inside sheets only if the change is</span> <span data-start="1003.06" data-end="1005.399">bound to happen constantly if you have</span> <span data-start="1005.399" data-end="1007.05">animation that will happen only once</span> <span data-start="1007.05" data-end="1010.62">it's better to move I think the will</span> <span data-start="1010.62" data-end="1014.85">change property to JavaScript and if you</span> <span data-start="1014.85" data-end="1018.089">have changed like hovering over elements</span> <span data-start="1018.089" data-end="1019.649">that will happen all the time for</span> <span data-start="1019.649" data-end="1021.149">example I don't know we show something</span> <span data-start="1021.149" data-end="1023.189">on hover on each element on the page</span> <span data-start="1023.189" data-end="1025.559">then it should say in your style sheets</span> <span data-start="1025.559" data-end="1028.199">and those it's a good idea to actually</span> <span data-start="1028.199" data-end="1030.209">remove this hint once once you're done</span> <span data-start="1030.209" data-end="1031.74">with your animations so that browser</span> <span data-start="1031.74" data-end="1035.04">wouldn't have this layer and it wouldn't</span> <span data-start="1035.04" data-end="1038.37">just listen for user to interact with</span> <span data-start="1038.37" data-end="1040.829">your page you can do this easily just</span> <span data-start="1040.829" data-end="1042.929">grab the element that is supposed to</span> <span data-start="1042.929" data-end="1045.55">have the animation on that</span> <span data-start="1045.55" data-end="1048.34">put two even listeners here for example</span> <span data-start="1048.34" data-end="1050.92">we have Mao Center so on Mouse</span> <span data-start="1050.92" data-end="1055.57">intelligence ad will change property to</span> <span data-start="1055.57" data-end="1057.73">the lemons and when the animation and</span> <span data-start="1057.73" data-end="1061.3">event fires you just remove this just</span> <span data-start="1061.3" data-end="1063.01">remove this will change property by</span> <span data-start="1063.01" data-end="1067.66">setting it out and of course it's not</span> <span data-start="1067.66" data-end="1072.34">supported in I am edge but you can use</span> <span data-start="1072.34" data-end="1075.21">the fallback which is transform</span> <span data-start="1075.21" data-end="1078.73">translate Freddie — we just add this as</span> </p>
<p><span data-start="1078.73" data-end="1081.58">I said 3d transfer is also creating a</span> <span data-start="1081.58" data-end="1084.01">new layer so it's kind of a hug but it</span> <span data-start="1084.01" data-end="1086.5">works exactly the same as will change to</span> <span data-start="1086.5" data-end="1090.88">be honest all right the next technique I</span> <span data-start="1090.88" data-end="1092.68">wanted to say is more of a principle</span> <span data-start="1092.68" data-end="1097.06">it's called flippity-flip States stands</span> <span data-start="1097.06" data-end="1099.16">for first last inverted play and it's</span> <span data-start="1099.16" data-end="1101.74">just what we were doing here so</span> <span data-start="1101.74" data-end="1104.35">basically if you wanted to pull element</span> <span data-start="1104.35" data-end="1107.02">from point A to B you don't push it by</span> <span data-start="1107.02" data-end="1109.51">200 pixels to the right you first pull</span> <span data-start="1109.51" data-end="1111.91">it 200 pixels to the left and then let</span> <span data-start="1111.91" data-end="1114.76">it slide to its original position it</span> <span data-start="1114.76" data-end="1116.59">could be implemented very easily with</span> <span data-start="1116.59" data-end="1121.27">transforms as you can see just as in the</span> <span data-start="1121.27" data-end="1124.12">example and if you would for example had</span> <span data-start="1124.12" data-end="1127.99">some kind of many that's that we wanted</span> <span data-start="1127.99" data-end="1130">to show in this way we would just</span> <span data-start="1130" data-end="1132.76">position it absolutely then we would add</span> <span data-start="1132.76" data-end="1135.19">some transform to move it out of the</span> <span data-start="1135.19" data-end="1138.19">viewports add some transitions so it</span> <span data-start="1138.19" data-end="1140.29">would slide not just show up in the</span> <span data-start="1140.29" data-end="1143.38">place and add for example a class of</span> <span data-start="1143.38" data-end="1146.26">active that when applied with just let</span> <span data-start="1146.26" data-end="1148.09">the elements slide to its original</span> <span data-start="1148.09" data-end="1152.5">position you might ask why would we do</span> <span data-start="1152.5" data-end="1155.38">that like what's the point there is this</span> <span data-start="1155.38" data-end="1158.35">100 milliseconds gap that happens in</span> <span data-start="1158.35" data-end="1160.39">between the moment that the whole page</span> <span data-start="1160.39" data-end="1162.61">is loaded and the moment that user is</span> <span data-start="1162.61" data-end="1164.98">able to interact with your page it's</span> <span data-start="1164.98" data-end="1167.59">just how our brains work we are not able</span> <span data-start="1167.59" data-end="1169.809">to interact with</span> <span data-start="1169.809" data-end="1172.929">and I think like on such short notice so</span> <span data-start="1172.929" data-end="1174.879">we're taking advantage of this hundred</span> <span data-start="1174.879" data-end="1178.059">milliseconds gap and even though it's</span> <span data-start="1178.059" data-end="1180.399">like optimize we're using transforms</span> <span data-start="1180.399" data-end="1182.409">there's still some small calculation</span> <span data-start="1182.409" data-end="1184.989">that's browser needs to make to figure</span> <span data-start="1184.989" data-end="1187.299">out where's the destination point of</span> <span data-start="1187.299" data-end="1190.09">this elements and here if we first move</span> <span data-start="1190.09" data-end="1192.19">element out and then let it slide or</span> <span data-start="1192.19" data-end="1194.469">general original position then actually</span> <span data-start="1194.469" data-end="1196.84">where we're having this animations than</span> <span data-start="1196.84" data-end="1199.379">up front so the browser did the</span> <span data-start="1199.379" data-end="1202.179">calculation this gap and when the user</span> <span data-start="1202.179" data-end="1204.429">clicks on elements the change happens</span> <span data-start="1204.429" data-end="1206.229">instantly the calculation doesn't have</span> <span data-start="1206.229" data-end="1209.259">to be done in this moment so the flip</span> <span data-start="1209.259" data-end="1211.45">technique actually can make a difference</span> <span data-start="1211.45" data-end="1214.029">on less powerful devices and low-end</span> <span data-start="1214.029" data-end="1216.429">phones so it's where where you should be</span> <span data-start="1216.429" data-end="1220.149">using it also you should use it only for</span> <span data-start="1220.149" data-end="1224.08">the animation that happens when when</span> <span data-start="1224.08" data-end="1226.089">user interacts with our with our</span> <span data-start="1226.089" data-end="1229.239">websites and there are free useful</span> <span data-start="1229.239" data-end="1231.609">resources that you can use there is a</span> <span data-start="1231.609" data-end="1234.729">flip J's library by Paul Lewis from</span> </p>
<p><span data-start="1234.729" data-end="1237.609">Google there is my library that is</span> <span data-start="1237.609" data-end="1239.769">actually a collection of examples how</span> <span data-start="1239.769" data-end="1242.049">you can use it and there is a really</span> <span data-start="1242.049" data-end="1244.599">good article by Paul Lewis who is</span> <span data-start="1244.599" data-end="1246.46">actually a creator of the technique as</span> <span data-start="1246.46" data-end="1252.07">well okay do you remember this this was</span> <span data-start="1252.07" data-end="1254.2">how the browser went through all the</span> <span data-start="1254.2" data-end="1255.849">steps to show the page to the browser to</span> <span data-start="1255.849" data-end="1258.789">our user but actually it's just one</span> <span data-start="1258.789" data-end="1262.419">frame and to have our animation looks</span> <span data-start="1262.419" data-end="1265.33">smooth we should serve this frame every</span> <span data-start="1265.33" data-end="1270.399">16 milliseconds why 16 milliseconds 60</span> <span data-start="1270.399" data-end="1272.379">frames per second is what our browsers</span> <span data-start="1272.379" data-end="1275.379">can do for for our animation so this is</span> <span data-start="1275.379" data-end="1279.19">how fast we should be serving the frames</span> <span data-start="1279.19" data-end="1281.529">to the user so that animation would look</span> <span data-start="1281.529" data-end="1282.789">good</span> <span data-start="1282.789" data-end="1284.71">one second is just thousand milliseconds</span> <span data-start="1284.71" data-end="1287.109">and when we divide tiles and by 60 it</span> <span data-start="1287.109" data-end="1290.83">gives us 16 milliseconds truth be told</span> <span data-start="1290.83" data-end="1293.349">it should be more like 10 milliseconds</span> <span data-start="1293.349" data-end="1296.589">because after after the browser goes</span> <span data-start="1296.589" data-end="1298.119">through all the steps there are still</span> <span data-start="1298.119" data-end="1300.58">some you know cleaning up to do but I</span> <span data-start="1300.58" data-end="1301.98">don't want to scare us</span> <span data-start="1301.98" data-end="1307.35">stay with 16 if we don't we if the</span> <span data-start="1307.35" data-end="1310.1">browser fails to provide us with this</span> <span data-start="1310.1" data-end="1313.41">frame every 16 milliseconds the</span> <span data-start="1313.41" data-end="1316.95">animation will just look not smooth it</span> <span data-start="1316.95" data-end="1319.08">will look junk like it there will be</span> <span data-start="1319.08" data-end="1322.14">junk the user might feel that actually</span> <span data-start="1322.14" data-end="1324.21">your application is not responding very</span> <span data-start="1324.21" data-end="1327.419">well so now imagine that browser is</span> <span data-start="1327.419" data-end="1329.49">trying to meet this 60 millisecond</span> <span data-start="1329.49" data-end="1332.22">deadline it's already at layout part</span> <span data-start="1332.22" data-end="1334.41">it's figuring out how how much space</span> <span data-start="1334.41" data-end="1337.95">each element is going to take and then</span> <span data-start="1337.95" data-end="1340.47">the JavaScript comes in like something</span> <span data-start="1340.47" data-end="1342.299">needs to be changed so the browser needs</span> <span data-start="1342.299" data-end="1344.04">to go through all the steps again like</span> <span data-start="1344.04" data-end="1346.11">it needs to recalculate the styles and</span> <span data-start="1346.11" data-end="1349.62">the layout again well things happen try</span> <span data-start="1349.62" data-end="1353.61">to meet that in 16 milliseconds browser</span> <span data-start="1353.61" data-end="1355.95">is probably going to miss the deadline</span> <span data-start="1355.95" data-end="1358.11">and the frame is going to be lost</span> <span data-start="1358.11" data-end="1361.41">animation will look terribly fortunately</span> <span data-start="1361.41" data-end="1363.48">there is a thing that can help us with</span> <span data-start="1363.48" data-end="1366.11">that and it's the requestanimationframe</span> <span data-start="1366.11" data-end="1369.03">function finally is something like truly</span> </p>
<p><span data-start="1369.03" data-end="1371.309">JavaScript e right</span> <span data-start="1371.309" data-end="1374.01">what requestanimationframe does it's</span> <span data-start="1374.01" data-end="1376.65">just it makes sure that all the</span> <span data-start="1376.65" data-end="1380.27">JavaScript that is about to somehow</span> <span data-start="1380.27" data-end="1383.85">influence the frame is going to come in</span> <span data-start="1383.85" data-end="1386.04">in the first possible moment of each</span> <span data-start="1386.04" data-end="1392.34">frame so this is how it works and it's</span> <span data-start="1392.34" data-end="1394.95">quite easy to implement this is like the</span> <span data-start="1394.95" data-end="1397.47">easiest case that we could have that we</span> <span data-start="1397.47" data-end="1402.57">just we need to just fire this function</span> <span data-start="1402.57" data-end="1405.03">with something that is about to be</span> <span data-start="1405.03" data-end="1408.21">repeated and then recursively call the</span> <span data-start="1408.21" data-end="1412.95">function from the inside and of course</span> <span data-start="1412.95" data-end="1414.75">as with everything that's cool in the</span> <span data-start="1414.75" data-end="1416.79">web there a requestanimationframe has</span> <span data-start="1416.79" data-end="1419.549">some rules it needs to vendor prefixes</span> <span data-start="1419.549" data-end="1421.679">and it needs polyfill for the</span> <span data-start="1421.679" data-end="1425.429">less-fortunate browsers fortunately</span> <span data-start="1425.429" data-end="1427.83">polyfill takes care of vendor prefixes</span> <span data-start="1427.83" data-end="1429.36">so if you're using polyfill you don't</span> <span data-start="1429.36" data-end="1430.74">have to care about that</span> <span data-start="1430.74" data-end="1434.46">also if you're using green sock or</span> <span data-start="1434.46" data-end="1436.98">web animation API or jQuery free bundle</span> <span data-start="1436.98" data-end="1439.2">and hire you also don't have to remember</span> <span data-start="1439.2" data-end="1441.15">about requestanimationframe because it's</span> <span data-start="1441.15" data-end="1444.81">already there it's inside inside these</span> <span data-start="1444.81" data-end="1447.81">tools there is canceled animation frame</span> <span data-start="1447.81" data-end="1450.39">which is like complementary function</span> <span data-start="1450.39" data-end="1452.52">that will just stop your animation from</span> <span data-start="1452.52" data-end="1456.69">happening and it's way better than using</span> <span data-start="1456.69" data-end="1459.03">set interval actually set interval is</span> <span data-start="1459.03" data-end="1462.66">what what is in the polyfill but browser</span> <span data-start="1462.66" data-end="1466.74">doesn't optimize for first set interval</span> <span data-start="1466.74" data-end="1469.05">it doesn't take that interval into</span> <span data-start="1469.05" data-end="1470.97">consideration when it's scheduling up</span> <span data-start="1470.97" data-end="1474.54">the frame and setting the role is just</span> <span data-start="1474.54" data-end="1477.03">guessing that in next 16 milliseconds</span> <span data-start="1477.03" data-end="1478.83">then your frame will happen but if</span> <span data-start="1478.83" data-end="1481.17">something offsets and goes wrong is</span> <span data-start="1481.17" data-end="1486.6">still much mr. frame and the last thing</span> </p>
<p><span data-start="1486.6" data-end="1489.09">I wanted to say to you about it is to</span> <span data-start="1489.09" data-end="1490.98">test your animations before actually</span> <span data-start="1490.98" data-end="1493.68">optimizing because things that you think</span> <span data-start="1493.68" data-end="1495.72">might actually be needed for your</span> <span data-start="1495.72" data-end="1499.17">animation might might make it worse and</span> <span data-start="1499.17" data-end="1501.36">things that should be smooth might</span> <span data-start="1501.36" data-end="1503.67">actually not work very well so test your</span> <span data-start="1503.67" data-end="1506.04">test your animations and of course the</span> <span data-start="1506.04" data-end="1509.76">best thing to the to do testing is to</span> <span data-start="1509.76" data-end="1512.52">use dev tools both in Chrome and in</span> </p>
<p><span data-start="1512.52" data-end="1516.02">Firefox at least that's what I'm using</span> <span data-start="1516.02" data-end="1519.03">for example in Chrome it can enable the</span> <span data-start="1519.03" data-end="1522.06">rendering top you need to click this</span> <span data-start="1522.06" data-end="1524.4">free small dot menu and just in more</span> <span data-start="1524.4" data-end="1526.11">tools you have friends ring tab and all</span> <span data-start="1526.11" data-end="1528.78">the cool things and then you'll be able</span> <span data-start="1528.78" data-end="1531.18">to actually see for example where the</span> <span data-start="1531.18" data-end="1534.21">layer borders are to see paint flashing</span> <span data-start="1534.21" data-end="1537.21">or you can see the FPS meter or any</span> <span data-start="1537.21" data-end="1539.25">strong performance issues that you could</span> <span data-start="1539.25" data-end="1544.56">have also you can use the timeline tool</span> <span data-start="1544.56" data-end="1546.57">to record your animation the shorter</span> <span data-start="1546.57" data-end="1548.04">they're recording the better because</span> <span data-start="1548.04" data-end="1549.81">it's easier to investigate what's going</span> <span data-start="1549.81" data-end="1554.34">on if you have the green small blocks at</span> <span data-start="1554.34" data-end="1556.23">the top it means that your animation is</span> <span data-start="1556.23" data-end="1560.25">actually smooth then there are like</span> <span data-start="1560.25" data-end="1563.13">really new shiny tools there like to</span> <span data-start="1563.13" data-end="1565.11">things that I just discovered like month</span> <span data-start="1565.11" data-end="1566.87">ago that they're there</span> <span data-start="1566.87" data-end="1570.919">layers tab which shows you why every</span> <span data-start="1570.919" data-end="1573.44">layer in the website was created it says</span> <span data-start="1573.44" data-end="1575.57">for example that is the root layer or</span> <span data-start="1575.57" data-end="1578.57">it's it's the layer is because it's on</span> <span data-start="1578.57" data-end="1580.789">top of other layer or it's because it's</span> <span data-start="1580.789" data-end="1583.94">animated transform it's really really</span> <span data-start="1583.94" data-end="1586.64">useful thing and there is the new</span> <span data-start="1586.64" data-end="1589.76">animation tab in in chrome that lets see</span> <span data-start="1589.76" data-end="1592.549">for example run your animation so we're</span> <span data-start="1592.549" data-end="1596.86">just record it and investigate it too</span> </p>
<p><span data-start="1596.87" data-end="1600.44">Firefox also has animation step and it's</span> <span data-start="1600.44" data-end="1604.639">also very similar but it was there first</span> <span data-start="1604.639" data-end="1607.34">as well you can run your animation bit</span> <span data-start="1607.34" data-end="1610.25">slower or you can if you if you inspect</span> <span data-start="1610.25" data-end="1612.32">an animated element it will show you if</span> <span data-start="1612.32" data-end="1614.57">it's optimized by this small lightning</span> <span data-start="1614.57" data-end="1617.36">bolt icon next to it or if it's not</span> <span data-start="1617.36" data-end="1619.429">optimized it will give you a warning</span> <span data-start="1619.429" data-end="1621.44">what's going on in there why it's not</span> <span data-start="1621.44" data-end="1627.139">why it's not okay so to sum up please</span> <span data-start="1627.139" data-end="1629.72">don't overuse animations if they are not</span> <span data-start="1629.72" data-end="1631.34">going to help your user and they are</span> <span data-start="1631.34" data-end="1633.559">just there for your pleasure of the or</span> <span data-start="1633.559" data-end="1636.2">the pleasure of a designer try to skip</span> <span data-start="1636.2" data-end="1639.98">them not make the user feel the junk</span> <span data-start="1639.98" data-end="1643.399">junk eNOS of Europe animate only</span> <span data-start="1643.399" data-end="1645.889">transforms and opacity because they are</span> <span data-start="1645.889" data-end="1648.289">the most performance in that way try to</span> <span data-start="1648.289" data-end="1650.809">take leverage of will change flip and</span> <span data-start="1650.809" data-end="1654.549">request animation frame wins applicable</span> <span data-start="1654.549" data-end="1657.74">don't overuse layers don't overuse the</span> <span data-start="1657.74" data-end="1660.679">wheel change property test your</span> <span data-start="1660.679" data-end="1664.37">animations animates elements that are on</span> <span data-start="1664.37" data-end="1666.769">top layers don't animate things that are</span> <span data-start="1666.769" data-end="1669.11">behind something because it will make</span> <span data-start="1669.11" data-end="1672.95">all the things up on them to be create</span> <span data-start="1672.95" data-end="1678.049">like to go to the other layers and yeah</span> <span data-start="1678.049" data-end="1680.659">test animations before optimizing the</span> <span data-start="1680.659" data-end="1683.539">most important one here are some</span> <span data-start="1683.539" data-end="1685.789">resources I'll post the slides after</span> <span data-start="1685.789" data-end="1688.87">this talk maybe tomorrow we'll see and</span> <span data-start="1688.87" data-end="1692.659">thank you very much</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
