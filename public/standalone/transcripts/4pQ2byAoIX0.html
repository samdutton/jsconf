<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>4pQ2byAoIX0</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/4pQ2byAoIX0?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="0.75" data-end="9.879">[Music]</span> <span data-start="9.889" data-end="18.27">hello so thank you very much for having</span> <span data-start="18.27" data-end="20.22">me it's a pleasure to be back here in</span> </p>
<p><span data-start="20.22" data-end="21.9">Berlin as Tim just said this is actually</span> <span data-start="21.9" data-end="24.33">my second time on this stage and it's a</span> <span data-start="24.33" data-end="25.92">conference that as everyone's already</span> <span data-start="25.92" data-end="28.08">mentioned this morning has a community</span> <span data-start="28.08" data-end="30.66">that is dear to my heart and so it's</span> <span data-start="30.66" data-end="32.43">actually an honor to be able to be back</span> <span data-start="32.43" data-end="33.78">here speaking against it Thank You</span> </p>
<p><span data-start="33.78" data-end="35.91">Chrissy calling you Kevin and the rest</span> <span data-start="35.91" data-end="37.32">of the team and this awesome work that</span> <span data-start="37.32" data-end="38.969">they've done and especially for it even</span> <span data-start="38.969" data-end="41.46">allowing me to bring my child here I've</span> <span data-start="41.46" data-end="43.2">got a one-year-old baby here with me</span> <span data-start="43.2" data-end="44.969">Freddie come and say hello to him</span> <span data-start="44.969" data-end="47.46">afterwards I'm trying to get them on the</span> <span data-start="47.46" data-end="50.399">CSS party pack later on to do some</span> <span data-start="50.399" data-end="52.829">obnoxious CSS animations as well so</span> <span data-start="52.829" data-end="54.69">we'll be kind of live coding over there</span> <span data-start="54.69" data-end="58.05">with Freddie if you want to join in so</span> <span data-start="58.05" data-end="59.46">my name is Pat you come in you can catch</span> <span data-start="59.46" data-end="62.43">me on Twitter there and I work at fastly</span> <span data-start="62.43" data-end="65.28">we're an edge cloud provider that</span> <span data-start="65.28" data-end="66.84">specializes in real-time content</span> <span data-start="66.84" data-end="69.51">delivery and my role there is a web</span> <span data-start="69.51" data-end="71.369">performance engineer where I spend a lot</span> <span data-start="71.369" data-end="73.32">of time thinking about how we can</span> <span data-start="73.32" data-end="75.78">improve the speed of one our network but</span> <span data-start="75.78" data-end="78.27">most importantly delivering content for</span> <span data-start="78.27" data-end="80.939">our customers and their users as fast as</span> <span data-start="80.939" data-end="82.799">possible and so some of which of that</span> </p>
<p><span data-start="82.799" data-end="84.09">I'm going to talk about today and show</span> <span data-start="84.09" data-end="85.229">you some of the research that I've been</span> <span data-start="85.229" data-end="89.159">doing so why am I here and you're</span> <span data-start="89.159" data-end="91.47">probably wondering what the title CSS</span> <span data-start="91.47" data-end="93.63">and the first meaningful paint even</span> <span data-start="93.63" data-end="96.03">means and so hopefully all will come</span> <span data-start="96.03" data-end="98.79">true shortly so I want to ask you a</span> <span data-start="98.79" data-end="101.61">question of how do you measure the</span> <span data-start="101.61" data-end="104.49">performance of your website what does</span> <span data-start="104.49" data-end="108.09">being fast even mean is it how long it</span> <span data-start="108.09" data-end="110.28">takes to get to a load event is it how</span> <span data-start="110.28" data-end="112.14">many bytes you send down the wire or how</span> <span data-start="112.14" data-end="115.2">many requests but I would say I would</span> <span data-start="115.2" data-end="116.7">argue that it shouldn't be any of these</span> <span data-start="116.7" data-end="118.5">things ultimately we are building web</span> <span data-start="118.5" data-end="120.899">sites for our users or our customers</span> <span data-start="120.899" data-end="123.149">users and it should be about how they</span> <span data-start="123.149" data-end="126.409">perceive the speed of your website</span> <span data-start="126.409" data-end="129.119">should we even have a golden performance</span> <span data-start="129.119" data-end="133.35">metric does it even exist I would</span> <span data-start="133.35" data-end="136.4">that shouldn't and for years we've been</span> <span data-start="136.4" data-end="139.26">optimizing our pages to be built for</span> <span data-start="139.26" data-end="142.41">these metrics that don't directly</span> <span data-start="142.41" data-end="144.39">correlate to how our websites are built</span> <span data-start="144.39" data-end="146.37">but not the user experience and how</span> <span data-start="146.37" data-end="148.02">users are perceiving these things so</span> <span data-start="148.02" data-end="150.54">time to first byte or document complete</span> <span data-start="150.54" data-end="152.91">load event how many requests I sent none</span> <span data-start="152.91" data-end="155.22">of these correlates to a good user</span> <span data-start="155.22" data-end="158.1">experience and that as I can't stress</span> <span data-start="158.1" data-end="159.6">enough at the end of the day we are</span> <span data-start="159.6" data-end="162">building our websites for real users and</span> <span data-start="162" data-end="164.01">they are coming here to do something and</span> <span data-start="164.01" data-end="165.84">so fortunately we're seeing rise of a</span> <span data-start="165.84" data-end="168.24">whole new collection of metrics focused</span> <span data-start="168.24" data-end="170.4">around user experience such as the speed</span> <span data-start="170.4" data-end="172.2">index and the first meaningful paint</span> <span data-start="172.2" data-end="173.4">which we're going to talk about today</span> <span data-start="173.4" data-end="178.02">and time to interactivity and we're also</span> <span data-start="178.02" data-end="178.83">seeing writer</span> <span data-start="178.83" data-end="180.78">being thinking about custom metrics</span> <span data-start="180.78" data-end="182.82">specific to our needs maybe for a search</span> <span data-start="182.82" data-end="185.73">results on a search pages how long it</span> <span data-start="185.73" data-end="187.35">took the user to be able to find what</span> <span data-start="187.35" data-end="188.91">they were looking for or a news</span> <span data-start="188.91" data-end="190.83">organization is how long it took the</span> <span data-start="190.83" data-end="192.57">user to find an article and read it we</span> <span data-start="192.57" data-end="194.37">should be thinking more about metrics</span> <span data-start="194.37" data-end="196.95">specific to our users needs and not</span> <span data-start="196.95" data-end="200.61">focusing on how we delivered that and</span> <span data-start="200.61" data-end="203.37">built our technology and so we're going</span> <span data-start="203.37" data-end="205.74">to focus a bit on time to first</span> <span data-start="205.74" data-end="207.51">meaningful paint today so what does that</span> <span data-start="207.51" data-end="211.38">even mean if it simply the first</span> <span data-start="211.38" data-end="213.21">meaningful paint is the time when it</span> <span data-start="213.21" data-end="215.7">pages primary content appeared on the</span> <span data-start="215.7" data-end="216.63">screen ie</span> <span data-start="216.63" data-end="218.91">put simply the time when the thing that</span> <span data-start="218.91" data-end="221.09">the user actually came to that website</span> <span data-start="221.09" data-end="223.62">appeared on the screen more detailed</span> <span data-start="223.62" data-end="225.54">it's the first paint after which the</span> <span data-start="225.54" data-end="227.88">biggest above the fold so we only care</span> <span data-start="227.88" data-end="230.4">about the viewport if you can imagine on</span> <span data-start="230.4" data-end="231.69">a mobile screen that's only what</span> <span data-start="231.69" data-end="233.97">appeared in the first viewport has</span> <span data-start="233.97" data-end="237.24">happened and so layout is when the</span> <span data-start="237.24" data-end="239.04">browser converts all of your elements</span> <span data-start="239.04" data-end="241.83">and your CSS queries into an X and y</span> <span data-start="241.83" data-end="243.57">coordinate are you where that element is</span> <span data-start="243.57" data-end="244.77">going to be painted on the screen and</span> <span data-start="244.77" data-end="247.05">its width and its height so we have the</span> <span data-start="247.05" data-end="248.73">browser has to perform layout of all of</span> <span data-start="248.73" data-end="250.14">the elements in that above the world</span> <span data-start="250.14" data-end="252.66">view and paint them to the screen and</span> <span data-start="252.66" data-end="255.54">most importantly TTS MP also takes into</span> <span data-start="255.54" data-end="258.45">consideration when custom web fonts have</span> <span data-start="258.45" data-end="260.07">loaded because I've heard that we all</span> <span data-start="260.07" data-end="262.049">like to add custom web fonts to our</span> <span data-start="262.049" data-end="263.669">websites these days much to my</span> <span data-start="263.669" data-end="266.02">discomfort and disagreement but</span> <span data-start="266.02" data-end="268.569">maybe this is better represented rigidly</span> <span data-start="268.569" data-end="271.09">how does what does TT SMP actually mean</span> <span data-start="271.09" data-end="273.55">so T definite be exactly a very new</span> <span data-start="273.55" data-end="275.47">metric we've only started using it since</span> <span data-start="275.47" data-end="277.12">last year some folks at Google wrote an</span> <span data-start="277.12" data-end="279.52">amazing white paper I'll release the</span> <span data-start="279.52" data-end="281.41">slides later where they detailed how we</span> <span data-start="281.41" data-end="283.81">can go about ascertaining the time to</span> <span data-start="283.81" data-end="285.61">first meaningful paint and unfortunately</span> <span data-start="285.61" data-end="287.86">it's not exposed via JavaScript API yet</span> <span data-start="287.86" data-end="289.63">though we are talking about it and you</span> <span data-start="289.63" data-end="292.27">have to be able to use for instance</span> <span data-start="292.27" data-end="294.43">clones internal tracing to be able to do</span> <span data-start="294.43" data-end="296.139">this but on the top here we have a graph</span> <span data-start="296.139" data-end="298.9">that represents how many layout objects</span> <span data-start="298.9" data-end="300.699">are actually painted to the screen so</span> <span data-start="300.699" data-end="303.25">that's time on the x-axis and the amount</span> <span data-start="303.25" data-end="305.409">of objects on the y-axis and how that</span> <span data-start="305.409" data-end="307.33">correlates to the user experience below</span> <span data-start="307.33" data-end="309.13">and as you can see here Google do</span> <span data-start="309.13" data-end="310.75">something very clever that they flush</span> <span data-start="310.75" data-end="313.479">the head of their document way before</span> <span data-start="313.479" data-end="315.849">they even send the search queries back</span> <span data-start="315.849" data-end="318.37">to the database and so it paints very</span> <span data-start="318.37" data-end="320.53">quickly on a 3G and emerging marketing</span> <span data-start="320.53" data-end="322.419">network you've got a paint at 1.5</span> <span data-start="322.419" data-end="324.909">seconds but actually the meaningful</span> <span data-start="324.909" data-end="326.53">paints the thing that the user actually</span> <span data-start="326.53" data-end="329.919">came here for is at 1.9 and we can see</span> <span data-start="329.919" data-end="331.479">how that directly correlates to the</span> <span data-start="331.479" data-end="332.71">amount of objects that painted the</span> <span data-start="332.71" data-end="335.139">screen and hopefully you've now got a</span> <span data-start="335.139" data-end="336.729">much better indication of this ISM a</span> <span data-start="336.729" data-end="338.65">metric that's much more useful than</span> <span data-start="338.65" data-end="341.65">start render or your time to person time</span> <span data-start="341.65" data-end="343.87">to first byte because we've given the</span> <span data-start="343.87" data-end="345.49">user what they came here for and this is</span> <span data-start="345.49" data-end="347.02">the type of metric that we should be</span> <span data-start="347.02" data-end="348.55">focusing on and talking about and</span> <span data-start="348.55" data-end="351.3">building and trying to optimize for and</span> <span data-start="351.3" data-end="354.159">maybe this is a better representative</span> <span data-start="354.159" data-end="355.78">like this so this is the SD comm</span> <span data-start="355.78" data-end="358.96">homepage and who here thinks the time to</span> <span data-start="358.96" data-end="360.909">first meaningful paint is three point</span> <span data-start="360.909" data-end="368.02">five four five four point five five so</span> <span data-start="368.02" data-end="369.87">yeah the TTS MP here is actually five</span> <span data-start="369.87" data-end="373.33">seconds on a 3G connection so you're</span> <span data-start="373.33" data-end="374.53">probably wondering how you can measure</span> <span data-start="374.53" data-end="376.84">your TT FMP yourselves fortunately</span> </p>
<p><span data-start="376.84" data-end="378.819">Google have open sourced and built you</span> <span data-start="378.819" data-end="380.59">can contribute to this lighthouse which</span> <span data-start="380.59" data-end="381.789">is they actually built this tool is</span> <span data-start="381.789" data-end="384.31">there an auditing tool to audit how your</span> <span data-start="384.31" data-end="386.289">new progressive shiny web app was</span> <span data-start="386.289" data-end="387.49">performing against some of the best</span> <span data-start="387.49" data-end="389.59">practices but it turns out that some of</span> <span data-start="389.59" data-end="391.69">the audits in it are actually very good</span> <span data-start="391.69" data-end="393.789">just for any web site you don't have to</span> <span data-start="393.789" data-end="395.26">use service workers or progressive web</span> <span data-start="395.26" data-end="396.699">apps to use lighthouse to audit your</span> <span data-start="396.699" data-end="398.56">tool and using a lot of hosts you can</span> <span data-start="398.56" data-end="399.52">install it via</span> <span data-start="399.52" data-end="401.74">a browser plug-in or CLI and have it</span> <span data-start="401.74" data-end="403.66">part of your build process you can</span> <span data-start="403.66" data-end="407.35">expose the TT FNP of your own websites I</span> <span data-start="407.35" data-end="409.12">urge you to go home in and check this</span> <span data-start="409.12" data-end="411.52">out and try it out on your own so let's</span> <span data-start="411.52" data-end="413.41">dive straight in of how we can optimize</span> <span data-start="413.41" data-end="417.22">our own websites for that TT FMP metric</span> <span data-start="417.22" data-end="420.099">and how this relates and it's extremely</span> <span data-start="420.099" data-end="422.349">tightly coupled to CSS and obviously</span> <span data-start="422.349" data-end="425.979">this is CSS comps but it's unsurprising</span> <span data-start="425.979" data-end="428.38">hopefully to most of you that CSS is so</span> <span data-start="428.38" data-end="431.259">critical to how we deliver a good user</span> <span data-start="431.259" data-end="433.389">experience to our users and so we're</span> <span data-start="433.389" data-end="434.919">going to look at past present and future</span> <span data-start="434.919" data-end="437.919">best practices for how we deliver CSS</span> <span data-start="437.919" data-end="439.93">and the assets that are related to it in</span> <span data-start="439.93" data-end="440.38">the browser</span> <span data-start="440.38" data-end="441.94">and hopefully you'll be able to apply</span> <span data-start="441.94" data-end="444.639">some of these methodologies at home now</span> <span data-start="444.639" data-end="447.25">to do this it's very easy to create a</span> <span data-start="447.25" data-end="451.06">test case study using a to do MVC app</span> <span data-start="451.06" data-end="452.02">sorry</span> <span data-start="452.02" data-end="454.659">addy if you're in the room but it's much</span> <span data-start="454.659" data-end="459.55">better I find to show we'll use real</span> <span data-start="459.55" data-end="461.229">websites to optimize for because</span> <span data-start="461.229" data-end="463.389">ultimately we are again all building</span> <span data-start="463.389" data-end="466.06">real websites and not just to do MVC app</span> <span data-start="466.06" data-end="467.949">they're delivered in two files and we</span> <span data-start="467.949" data-end="471.46">decide to throw a metric crap kind of</span> </p>
<p><span data-start="471.46" data-end="473.38">JavaScript down the pipe at the same</span> <span data-start="473.38" data-end="475.78">time and this is using real-world</span> <span data-start="475.78" data-end="477.909">conditions is when we can really see how</span> <span data-start="477.909" data-end="479.62">the optimizations have effects so</span> <span data-start="479.62" data-end="480.82">therefore for the purpose of the talk</span> <span data-start="480.82" data-end="482.949">and the research I'm going to use the FT</span> <span data-start="482.949" data-end="484.69">com home page and we're going to apply</span> <span data-start="484.69" data-end="487.09">some optimizations together to it to see</span> <span data-start="487.09" data-end="488.469">how we can improve the times first</span> <span data-start="488.469" data-end="490.18">meaningful paint so just a disclaimer</span> <span data-start="490.18" data-end="492.219">here I used to work for the Financial</span> </p>
<p><span data-start="492.219" data-end="493.9">Times so I chose it that because I know</span> <span data-start="493.9" data-end="496.539">how the page is built and they've given</span> <span data-start="496.539" data-end="498.46">me permission to do this and in fact I</span> <span data-start="498.46" data-end="500.05">think some of these developers are still</span> <span data-start="500.05" data-end="504.34">who still wet they're in the rim and but</span> <span data-start="504.34" data-end="506.259">you know it is actually a very good fast</span> <span data-start="506.259" data-end="508.539">website but it we can probably improve</span> <span data-start="508.539" data-end="509.74">it and that's what going to try and do</span> <span data-start="509.74" data-end="511.719">and so for each optimization we're going</span> <span data-start="511.719" data-end="513.7">to be testing on a real device and I</span> <span data-start="513.7" data-end="515.289">can't stress this enough and to do this</span> <span data-start="515.289" data-end="517.779">we're going to use web page test if you</span> <span data-start="517.779" data-end="519.25">haven't used web page test before I urge</span> <span data-start="519.25" data-end="521.02">you to go and do it is the number one</span> <span data-start="521.02" data-end="524.079">tool box in my arsenal of tools because</span> <span data-start="524.079" data-end="525.579">it allows me one to test on real devices</span> <span data-start="525.579" data-end="527.949">there is a real moto G sitting at the</span> <span data-start="527.949" data-end="530.35">end of this form and allows me to shape</span> <span data-start="530.35" data-end="532.87">to a real network condition that</span> <span data-start="532.87" data-end="534.61">again we are building websites for real</span> <span data-start="534.61" data-end="538.029">users okay it contrary to popular belief</span> <span data-start="538.029" data-end="540.31">the shiny iPhone that you have in your</span> <span data-start="540.31" data-end="543.4">pocket is not a real-world device and</span> <span data-start="543.4" data-end="545.589">actually the average device globally is</span> <span data-start="545.589" data-end="548.2">a low to mid n speck Android that has a</span> <span data-start="548.2" data-end="550.69">very terrible CPU performance and very</span> <span data-start="550.69" data-end="553.42">low memory so webpagetest allows us to</span> <span data-start="553.42" data-end="554.95">actually test on these physical devices</span> <span data-start="554.95" data-end="556.93">for each test we're going to run nine</span> <span data-start="556.93" data-end="559.21">tests and choose the median result of</span> <span data-start="559.21" data-end="560.86">them and we're going to use three</span> </p>
<p><span data-start="560.86" data-end="562.6">Network conditions which I'll chat about</span> <span data-start="562.6" data-end="565.27">later my friend Ben is actually going to</span> <span data-start="565.27" data-end="567.7">be talking about this kind of data of</span> <span data-start="567.7" data-end="570.19">real-world devices and what is the real</span> <span data-start="570.19" data-end="572.38">network at J's comp this weekend so I</span> <span data-start="572.38" data-end="575.41">urge you to go and look at his talk so</span> <span data-start="575.41" data-end="576.88">we need to ask ourselves these questions</span> <span data-start="576.88" data-end="579.16">first of to be working out what our</span> <span data-start="579.16" data-end="581.62">average user profile is where are your</span> <span data-start="581.62" data-end="584.35">users based what is their device</span> <span data-start="584.35" data-end="587.35">landscape in what context are they using</span> <span data-start="587.35" data-end="589.63">your website and I would be very</span> <span data-start="589.63" data-end="591.76">surprised if you can one of you can tell</span> <span data-start="591.76" data-end="593.65">me that you have a single context for</span> <span data-start="593.65" data-end="595.24">your users because that that just</span> <span data-start="595.24" data-end="597.339">doesn't exist the same person might be</span> <span data-start="597.339" data-end="600.43">accessing your website on a flaky mobile</span> <span data-start="600.43" data-end="602.89">connection in the morning and then goes</span> <span data-start="602.89" data-end="604.959">at lunch time to use that same website</span> <span data-start="604.959" data-end="607.69">on their fast a iMac with their fast</span> <span data-start="607.69" data-end="609.67">cable connection there is not this</span> <span data-start="609.67" data-end="612.13">single context what is their network</span> <span data-start="612.13" data-end="614.95">profile and what did specifically did</span> <span data-start="614.95" data-end="616.51">they come here for and that's what you</span> <span data-start="616.51" data-end="618.43">should be optimizing for so for the</span> <span data-start="618.43" data-end="620.23">purpose of the test we're going to be</span> <span data-start="620.23" data-end="622.029">trying to deliver a first meaningful</span> <span data-start="622.029" data-end="624.43">paint in three seconds on a emerging</span> <span data-start="624.43" data-end="626.44">market network which has a 400</span> <span data-start="626.44" data-end="628.36">millisecond round-trip time so that's</span> <span data-start="628.36" data-end="629.68">the time a textual request to go from</span> <span data-start="629.68" data-end="631.54">the client to the server and back again</span> <span data-start="631.54" data-end="634.72">400 milliseconds just on an emerging</span> <span data-start="634.72" data-end="635.8">marketing connection and we're going to</span> <span data-start="635.8" data-end="637.029">try and optimize for a thousand</span> <span data-start="637.029" data-end="639.37">milliseconds on cable but I can't stress</span> <span data-start="639.37" data-end="641.08">this enough that you shouldn't be taking</span> <span data-start="641.08" data-end="643.54">my base lines as well at home on what</span> <span data-start="643.54" data-end="644.44">you should be using you should be</span> <span data-start="644.44" data-end="647.2">thinking about what your user profile is</span> <span data-start="647.2" data-end="654.52">and setting budgets for those and so</span> <span data-start="654.52" data-end="657.279">that we can measure the impact of our</span> <span data-start="657.279" data-end="659.8">tests and optimizations we can set a</span> <span data-start="659.8" data-end="662.68">baseline and so this hopefully will look</span> <span data-start="662.68" data-end="664.24">very familiar to all of you this is a</span> <span data-start="664.24" data-end="666.01">hex ml document that</span> <span data-start="666.01" data-end="667.27">right near the top we have a link</span> <span data-start="667.27" data-end="670.24">element referencing our compiled main</span> </p>
<p><span data-start="670.24" data-end="672.94">CSS file I don't care how that was</span> <span data-start="672.94" data-end="674.77">compiled or if it was offered in DES</span> <span data-start="674.77" data-end="677.44">or whatever as long as you're delivering</span> <span data-start="677.44" data-end="679.27">your CSS like this this is probably how</span> <span data-start="679.27" data-end="681.13">we have been delivering CSS since the</span> <span data-start="681.13" data-end="684.79">birth of cascading style sheets is</span> <span data-start="684.79" data-end="686.23">probably how most of you in the room are</span> <span data-start="686.23" data-end="688.3">still delivering your CSS so if we were</span> <span data-start="688.3" data-end="690.1">to run that in web page test this is the</span> <span data-start="690.1" data-end="693.16">waterfall result we've got so hands up</span> <span data-start="693.16" data-end="694.87">if you use have seen Network waterfalls</span> <span data-start="694.87" data-end="697.42">before use them on daily basis awesome</span> <span data-start="697.42" data-end="699.19">so it doesn't matter if you haven't so</span> <span data-start="699.19" data-end="702.4">say the wire the x axis here is time and</span> <span data-start="702.4" data-end="705.7">the y axis axis is the network request</span> <span data-start="705.7" data-end="707.38">that the browser is making and the</span> <span data-start="707.38" data-end="708.7">priority and the order in which that</span> <span data-start="708.7" data-end="711.22">happened web page test fortunately gives</span> <span data-start="711.22" data-end="713.26">us mine types here so we've got pixels</span> <span data-start="713.26" data-end="716.11">blue CSS is green images of purple</span> <span data-start="716.11" data-end="718.87">javascript is orange and fonts are red</span> <span data-start="718.87" data-end="720.4">and for each one of these segments</span> <span data-start="720.4" data-end="722.89">there's two shades of color that when</span> <span data-start="722.89" data-end="725.47">that we have resent the request and then</span> <span data-start="725.47" data-end="726.97">the waiting period and then the download</span> <span data-start="726.97" data-end="730.12">process and how long it took so here we</span> <span data-start="730.12" data-end="732.46">can see that we requested our HTML file</span> <span data-start="732.46" data-end="734.47">it found the link element because it</span> <span data-start="734.47" data-end="736.81">paused the document incrementally that's</span> <span data-start="736.81" data-end="738.55">great thing about HTML spec is it can be</span> <span data-start="738.55" data-end="740.56">pausing clementa ly it found the link</span> <span data-start="740.56" data-end="743.32">element quite soon during their download</span> <span data-start="743.32" data-end="745.48">of the HTML and triggered request and</span> <span data-start="745.48" data-end="747.82">then the green line here is our start</span> <span data-start="747.82" data-end="749.38">render so that's not our x first</span> <span data-start="749.38" data-end="751.15">meaningful paint but that's when we</span> <span data-start="751.15" data-end="752.62">started painting on a free G</span> <span data-start="752.62" data-end="755.05">emerging-market so that gives us a</span> <span data-start="755.05" data-end="758.26">baseline around 8,000 milliseconds</span> </p>
<p><span data-start="758.26" data-end="762.42">TTFN p on 3g in emerging market and</span> <span data-start="762.42" data-end="765.85">around 2000 fur cable — way out of our</span> <span data-start="765.85" data-end="768.61">budget so now we've set a baseline so</span> <span data-start="768.61" data-end="769.93">the first experiment we want to do is we</span> <span data-start="769.93" data-end="773.17">want to inline our critical CSS and</span> <span data-start="773.17" data-end="774.37">hopefully many of you heard this</span> <span data-start="774.37" data-end="776.23">technique this is what I you came to</span> <span data-start="776.23" data-end="778.51">this very stage to talk about in 2014</span> <span data-start="778.51" data-end="780.61">and in since then it's become quite a</span> <span data-start="780.61" data-end="782.98">common practice and so let's have a</span> <span data-start="782.98" data-end="785.53">quick recap of that the first thing we</span> <span data-start="785.53" data-end="786.88">need to do is we have to look at our</span> <span data-start="786.88" data-end="790.09">critical rendering path of our page this</span> <span data-start="790.09" data-end="792.4">is the single path that a browser must</span> <span data-start="792.4" data-end="794.83">do to be all the steps it has to do</span> <span data-start="794.83" data-end="797.8">before it can paint to a screen so first</span> <span data-start="797.8" data-end="799">we have to</span> </p>
<p><span data-start="799" data-end="801.34">I'm make the get HTTP request of our</span> <span data-start="801.34" data-end="803.71">index file we get the response to that</span> <span data-start="803.71" data-end="805.27">we can start building the document</span> <span data-start="805.27" data-end="806.95">object model this is the Dom that we</span> <span data-start="806.95" data-end="808.6">will interact with in JavaScript which</span> <span data-start="808.6" data-end="810.97">is a tree like structure representing</span> <span data-start="810.97" data-end="813.01">the parent-child relationship so I have</span> <span data-start="813.01" data-end="815.05">a body tag inside that has a div which</span> <span data-start="815.05" data-end="818.26">has a key which has a span and we pass</span> <span data-start="818.26" data-end="820.81">we can construct the Dom as we parse the</span> </p>
<p><span data-start="820.81" data-end="823.33">HTML incrementally so we don't need to</span> <span data-start="823.33" data-end="825.61">wait for all of the bytes of our HTML</span> <span data-start="825.61" data-end="827.32">file to be downloaded before we can</span> <span data-start="827.32" data-end="830.02">construct the Dom which is an often</span> <span data-start="830.02" data-end="832.42">overlooked but amazing feature of the</span> <span data-start="832.42" data-end="834.76">HTML specification we find the link</span> <span data-start="834.76" data-end="836.77">elements we then have to go and stop</span> <span data-start="836.77" data-end="839.59">constructing our Dom because CSS is</span> <span data-start="839.59" data-end="841.59">known as a render blocking resource and</span> <span data-start="841.59" data-end="843.82">we have to go and perform the networking</span> <span data-start="843.82" data-end="846.43">for that get that and then we can</span> <span data-start="846.43" data-end="848.17">construct our CSS object model which is</span> <span data-start="848.17" data-end="851.14">exactly the same as the Dom and but note</span> <span data-start="851.14" data-end="853.87">the idle time here we've wasted a lot of</span> <span data-start="853.87" data-end="856.33">time on our network connection waiting</span> <span data-start="856.33" data-end="859.69">for that CSS file and also note the fact</span> <span data-start="859.69" data-end="862.18">that imagine if I was on a train I was</span> <span data-start="862.18" data-end="863.95">looking at Twitter I clicked on the link</span> <span data-start="863.95" data-end="866.92">to the FT I downloaded the HTML and then</span> </p>
<p><span data-start="866.92" data-end="869.8">I go into a tunnel and so I have no</span> <span data-start="869.8" data-end="871.839">network and now I don't have enough</span> <span data-start="871.839" data-end="873.4">network to perform that CSS but actually</span> <span data-start="873.4" data-end="875.589">I've got all of the content I could just</span> <span data-start="875.589" data-end="877.12">paint to the screen so what we've</span> <span data-start="877.12" data-end="878.62">actually done here is we've created a</span> <span data-start="878.62" data-end="880.72">single point of failure by delivering</span> <span data-start="880.72" data-end="883.87">our CSS as a separate object whereas we</span> <span data-start="883.87" data-end="885.73">do have all of the information so that</span> <span data-start="885.73" data-end="888.55">the theory here is what if we were to</span> <span data-start="888.55" data-end="892.27">inline the critical CSS just required to</span> <span data-start="892.27" data-end="894.37">render that first viewport the one that</span> <span data-start="894.37" data-end="896.17">we care about for our first meaningful</span> <span data-start="896.17" data-end="899.85">paint into the head of our document then</span> <span data-start="899.85" data-end="902.2">declare the rest of it as I synchronous</span> <span data-start="902.2" data-end="903.85">telling rather I don't care about this</span> <span data-start="903.85" data-end="905.98">for the first paint and so now we have</span> <span data-start="905.98" data-end="908.26">all of the information we need probably</span> <span data-start="908.26" data-end="910.39">within the first round trip of a network</span> <span data-start="910.39" data-end="912.19">connection so then we can construct the</span> <span data-start="912.19" data-end="915.15">render tree and render to the page so</span> <span data-start="915.15" data-end="917.5">going back to our experiment this is now</span> <span data-start="917.5" data-end="919.57">what it looks like we now have a Spile</span> <span data-start="919.57" data-end="921.25">element in the head of our document this</span> <span data-start="921.25" data-end="922.36">moves against everything we've been</span> <span data-start="922.36" data-end="924.52">taught about separation of concerns of</span> <span data-start="924.52" data-end="927.58">styles in our scholar sheets behavior in</span> <span data-start="927.58" data-end="929.74">our java scripts and then we're using a</span> <span data-start="929.74" data-end="931.48">new friend the link preload</span> <span data-start="931.48" data-end="932.65">element which we can talk about later</span> <span data-start="932.65" data-end="934.81">and here I'm using the filament groups</span> <span data-start="934.81" data-end="936.4">load CSS function to do this I think</span> <span data-start="936.4" data-end="938.59">this is for me that the best way about</span> <span data-start="938.59" data-end="940.39">doing this at the moment and it's got a</span> <span data-start="940.39" data-end="942.43">little polyfill for browsers that don't</span> <span data-start="942.43" data-end="945.82">support this so what if we were to run</span> <span data-start="945.82" data-end="947.53">this in web page there so let's recap</span> <span data-start="947.53" data-end="949.36">this as our baseline remember we're the</span> <span data-start="949.36" data-end="953.74">start render line is there and now with</span> <span data-start="953.74" data-end="956.89">in line look we've instantly got</span> <span data-start="956.89" data-end="959.02">painting as soon as we've started to</span> <span data-start="959.02" data-end="960.82">parse the HTML document we no longer</span> <span data-start="960.82" data-end="962.98">have to wait for our CSS because we've</span> <span data-start="962.98" data-end="965.62">declared that as asynchronous and so you</span> <span data-start="965.62" data-end="967.09">can imagine this is going to have a very</span> <span data-start="967.09" data-end="969.61">dramatic effect on our times first</span> <span data-start="969.61" data-end="974.44">meaningful paint metric and so here you</span> <span data-start="974.44" data-end="977.08">can see we now have a 63% improvement on</span> <span data-start="977.08" data-end="979.99">our baseline we've got 1300 millisecond</span> <span data-start="979.99" data-end="981.43">times first meaningful paint on cable</span> <span data-start="981.43" data-end="984.43">and 3200 so we basically have dit which</span> <span data-start="984.43" data-end="986.08">is extremely impressive just using one</span> <span data-start="986.08" data-end="989.8">technique but this comes with some pros</span> <span data-start="989.8" data-end="991.78">and cons we now no longer have that</span> <span data-start="991.78" data-end="993.79">single point of failure we've eliminated</span> <span data-start="993.79" data-end="997.54">all of the blocking resources but the</span> <span data-start="997.54" data-end="998.68">eagle-eyed in the room would notice that</span> <span data-start="998.68" data-end="1000.3">probably because we've declared our</span> <span data-start="1000.3" data-end="1002.76">other CSS as asynchronous that still has</span> <span data-start="1002.76" data-end="1004.59">to be loaded and we still have to apply</span> <span data-start="1004.59" data-end="1007.11">it to to be able to paint to the dom so</span> <span data-start="1007.11" data-end="1009.42">it causes a reflow and that's why it's</span> <span data-start="1009.42" data-end="1011.09">really really important that you</span> <span data-start="1011.09" data-end="1014.1">separate your truly critical everything</span> <span data-start="1014.1" data-end="1015.57">in that first viewport from the non</span> <span data-start="1015.57" data-end="1017.85">because if you were to have stuff that</span> <span data-start="1017.85" data-end="1019.41">within the top of the viewport inside</span> <span data-start="1019.41" data-end="1020.61">your known asynchronous stuff you're</span> <span data-start="1020.61" data-end="1022.65">going to cause reflow and actually have</span> <span data-start="1022.65" data-end="1025.11">a jarring user experience the most</span> <span data-start="1025.11" data-end="1026.34">important point to note here though is</span> <span data-start="1026.34" data-end="1028.5">we've made it not too cacheable by</span> <span data-start="1028.5" data-end="1030.96">aligning our CSS into the document every</span> <span data-start="1030.96" data-end="1033.36">time we change that CSS we're</span> <span data-start="1033.36" data-end="1034.92">essentially invalidating the cache for</span> <span data-start="1034.92" data-end="1036.93">all of our HTML files so if you can</span> <span data-start="1036.93" data-end="1039.15">imagine something like the FT com</span> <span data-start="1039.15" data-end="1040.77">that's a very large cache that we're</span> <span data-start="1040.77" data-end="1042.27">going to be in validating every time we</span> <span data-start="1042.27" data-end="1044.76">change some CSS and we don't benefit</span> <span data-start="1044.76" data-end="1047.46">from the browser caching that object and</span> <span data-start="1047.46" data-end="1048.69">then we're actually going to be sending</span> <span data-start="1048.69" data-end="1050.97">more bytes down the wire every time</span> <span data-start="1050.97" data-end="1052.98">which is completely unnecessary</span> <span data-start="1052.98" data-end="1055.32">it's also very hard to maintain a very</span> <span data-start="1055.32" data-end="1058.59">hard to automate inline CSS and I've</span> <span data-start="1058.59" data-end="1060.93">worked on some very large scale websites</span> <span data-start="1060.93" data-end="1063.81">and it's become a pain that we there's</span> <span data-start="1063.81" data-end="1064.75">no optimal</span> <span data-start="1064.75" data-end="1068.92">way of doing this so we've been able to</span> <span data-start="1068.92" data-end="1071.74">get our CSS down as soon as possible but</span> <span data-start="1071.74" data-end="1074.32">how can we then prioritize the delivery</span> <span data-start="1074.32" data-end="1076.15">of the other sub resources that our CSS</span> <span data-start="1076.15" data-end="1078.85">requires to achieve that time — first</span> <span data-start="1078.85" data-end="1081.27">meaningful paint I use the critical</span> <span data-start="1081.27" data-end="1083.62">resources for our page so I want to ask</span> <span data-start="1083.62" data-end="1085.78">you a question of can you think about</span> <span data-start="1085.78" data-end="1088.48">what are the critical resources that you</span> <span data-start="1088.48" data-end="1089.77">have on the website that you were</span> <span data-start="1089.77" data-end="1091.54">building yesterday or today even for</span> <span data-start="1091.54" data-end="1094.27">your customer or your company can you</span> <span data-start="1094.27" data-end="1095.74">think about those right now top of your</span> <span data-start="1095.74" data-end="1097.78">head the resources that if the networks</span> <span data-start="1097.78" data-end="1100.81">failed I only need these one two or</span> <span data-start="1100.81" data-end="1102.67">three resources to be able to deliver a</span> <span data-start="1102.67" data-end="1104.41">good user experience the rest of them</span> <span data-start="1104.41" data-end="1106.66">that adds code for the JavaScript that</span> <span data-start="1106.66" data-end="1108.7">can all be left behind have a think</span> <span data-start="1108.7" data-end="1111.01">about that so let's identify the</span> <span data-start="1111.01" data-end="1112.78">resources together for the ft.com page</span> <span data-start="1112.78" data-end="1117.67">is it a logo is it the custom web fonts</span> <span data-start="1117.67" data-end="1120.01">and we know that TTS MP has to use the</span> <span data-start="1120.01" data-end="1121.27">custom web fonts and actually we're</span> <span data-start="1121.27" data-end="1123.52">delivering the news the user needs to be</span> <span data-start="1123.52" data-end="1125.65">able to read it or is it the hero image</span> <span data-start="1125.65" data-end="1128.5">to give some context and a very sorry</span> <span data-start="1128.5" data-end="1131.71">here for the Theresa May photo bomb I'm</span> <span data-start="1131.71" data-end="1133.21">actually really annoyed with myself but</span> </p>
<p><span data-start="1133.21" data-end="1135.49">I've included her in this ditch doesn't</span> <span data-start="1135.49" data-end="1137.49">deserve it</span> <span data-start="1137.49" data-end="1140.56">so what how can we go about automating</span> <span data-start="1140.56" data-end="1142.3">the process of choosing these critical</span> <span data-start="1142.3" data-end="1144.85">resources fortunately again lighthouse</span> <span data-start="1144.85" data-end="1147.25">has got our back and they do this with</span> <span data-start="1147.25" data-end="1148.51">an audit that they call the critical</span> <span data-start="1148.51" data-end="1151.6">request change so here running ft.com</span> <span data-start="1151.6" data-end="1152.59">for lighthouse</span> <span data-start="1152.59" data-end="1155.47">we've identified a critical question of</span> <span data-start="1155.47" data-end="1157.57">five resources so you can do this even</span> <span data-start="1157.57" data-end="1158.92">though I just asked you to do that in</span> <span data-start="1158.92" data-end="1160.72">your head work out what your critical</span> <span data-start="1160.72" data-end="1162.22">resources are you can automate this</span> <span data-start="1162.22" data-end="1165.13">process and if I was to you were to take</span> <span data-start="1165.13" data-end="1166.96">away one thing from this talk today</span> <span data-start="1166.96" data-end="1171.73">please let it be this that you need to</span> <span data-start="1171.73" data-end="1173.65">be able to be optimizing this critical</span> <span data-start="1173.65" data-end="1176.53">request path eliminate every asset that</span> <span data-start="1176.53" data-end="1178.81">is in it that is not critical to the</span> <span data-start="1178.81" data-end="1180.64">core user experience of your website and</span> <span data-start="1180.64" data-end="1183.4">then optimize the remaining ones make</span> <span data-start="1183.4" data-end="1185.74">them as small as possible and prioritize</span> <span data-start="1185.74" data-end="1188.38">the delivery of those assets over the</span> <span data-start="1188.38" data-end="1190.66">network and that is how you will achieve</span> <span data-start="1190.66" data-end="1192.58">a very fast time to first meaningful</span> <span data-start="1192.58" data-end="1196.45">paint with your CSS so if we remember</span> <span data-start="1196.45" data-end="1198.53">the methodology for</span> <span data-start="1198.53" data-end="1200.09">meaning the times first meaningful paint</span> <span data-start="1200.09" data-end="1203.45">we also block on our metric waiting for</span> <span data-start="1203.45" data-end="1206.48">web fonts because they are delivering</span> <span data-start="1206.48" data-end="1208.85">the user experience after all and so</span> <span data-start="1208.85" data-end="1211.61">look how low down in our waterfall our</span> <span data-start="1211.61" data-end="1215.09">web font delivery is much much lower</span> <span data-start="1215.09" data-end="1216.86">than the CSS it's around the 20th</span> <span data-start="1216.86" data-end="1220.61">request now why is this if there's such</span> <span data-start="1220.61" data-end="1223.01">an important critical resource why is</span> <span data-start="1223.01" data-end="1225.41">the breyer browser prioritizing that</span> <span data-start="1225.41" data-end="1227.69">network request so low compared to some</span> <span data-start="1227.69" data-end="1230.66">of our imagery answer to do this we need</span> <span data-start="1230.66" data-end="1233.24">to take a look back at how browsers know</span> <span data-start="1233.24" data-end="1234.41">about painting again</span> <span data-start="1234.41" data-end="1237.11">first the browser discovers the H then</span> <span data-start="1237.11" data-end="1239.99">makes a network request for the HTML</span> <span data-start="1239.99" data-end="1242.93">document it begins pausing that document</span> <span data-start="1242.93" data-end="1247.16">it finds there discovers the CSS maybe</span> <span data-start="1247.16" data-end="1248.6">some JavaScript if you haven't declared</span> <span data-start="1248.6" data-end="1252.38">it as asynchronous then we have to CSS</span> <span data-start="1252.38" data-end="1254.36">can't unlike HTML can't be paused</span> <span data-start="1254.36" data-end="1256.67">incrementally ie we have to wait for all</span> <span data-start="1256.67" data-end="1259.79">of the bytes of CSS to come in before we</span> <span data-start="1259.79" data-end="1261.56">can construct the CSS object model and</span> <span data-start="1261.56" data-end="1262.61">there's a very good reason for this</span> <span data-start="1262.61" data-end="1264.71">because of the nature of the Cascade in</span> <span data-start="1264.71" data-end="1266.51">cascading style sheets that you might</span> <span data-start="1266.51" data-end="1268.67">have a style declaration down the bottom</span> <span data-start="1268.67" data-end="1269.87">of your file that is overwritten</span> <span data-start="1269.87" data-end="1271.76">something at the top and if we were to</span> <span data-start="1271.76" data-end="1273.02">part it incrementally and pink</span> <span data-start="1273.02" data-end="1275.21">incorrectly you might probably have some</span> <span data-start="1275.21" data-end="1277.19">stuff moving around so it's a very good</span> <span data-start="1277.19" data-end="1279.47">reason that CSS can't be parsley</span> <span data-start="1279.47" data-end="1281.24">incrementally you have to wait we can</span> <span data-start="1281.24" data-end="1282.83">get the CSS object model and these two</span> <span data-start="1282.83" data-end="1285.83">trees are joined together to form the</span> <span data-start="1285.83" data-end="1288.14">render tree and so it's exactly like the</span> </p>
<p><span data-start="1288.14" data-end="1290.78">Dom but it only contains the elements</span> <span data-start="1290.78" data-end="1292.52">that are going to be displayed on the</span> <span data-start="1292.52" data-end="1294.14">screen because you might have other</span> <span data-start="1294.14" data-end="1295.97">elements in your Dom that you've done</span> <span data-start="1295.97" data-end="1297.98">display:none on you've hidden them so</span> <span data-start="1297.98" data-end="1299.75">why does the browser need to try and</span> <span data-start="1299.75" data-end="1301.97">compute the layouts objects for those</span> <span data-start="1301.97" data-end="1304.82">when it's not going to paint them so the</span> <span data-start="1304.82" data-end="1306.68">render tree is actually what is used to</span> <span data-start="1306.68" data-end="1308.54">rasterize the page and send it and it's</span> <span data-start="1308.54" data-end="1310.58">only at this point why have I even gone</span> <span data-start="1310.58" data-end="1312.68">them on this own digression to tell you</span> <span data-start="1312.68" data-end="1315.05">this because it's only at this point</span> <span data-start="1315.05" data-end="1318.2">that the font files are found and the</span> <span data-start="1318.2" data-end="1320.72">networking for them is sense and that's</span> <span data-start="1320.72" data-end="1323.27">because you may have a whole block a</span> <span data-start="1323.27" data-end="1325.58">whole paragraph of text that have a font</span> <span data-start="1325.58" data-end="1327.47">that you've declared but you've</span> <span data-start="1327.47" data-end="1329.24">displayed none on that why should we go</span> <span data-start="1329.24" data-end="1330.71">and perform the networking for that</span> <span data-start="1330.71" data-end="1332.54">variant files by their pure nature</span> <span data-start="1332.54" data-end="1335.03">very expensive they sometimes megabytes</span> <span data-start="1335.03" data-end="1337.19">in size why should the browser perform</span> <span data-start="1337.19" data-end="1338.81">the networking for them if we're not</span> <span data-start="1338.81" data-end="1340.46">going to display them and so it's this</span> <span data-start="1340.46" data-end="1342.65">reason that the browser doesn't perform</span> <span data-start="1342.65" data-end="1345.5">networking for front until the render</span> <span data-start="1345.5" data-end="1347.21">tree is constructed but you'll notice</span> <span data-start="1347.21" data-end="1349.4">here though we've wasted an extremely</span> <span data-start="1349.4" data-end="1351.98">large amount of time waiting for that</span> <span data-start="1351.98" data-end="1355.76">period so what if we were able to hint</span> <span data-start="1355.76" data-end="1358.34">to the browser these are my critical</span> <span data-start="1358.34" data-end="1360.11">resources you're not going to find them</span> <span data-start="1360.11" data-end="1361.82">for ages because they are hidden sub</span> <span data-start="1361.82" data-end="1364.16">resource with inside the render tree but</span> </p>
<p><span data-start="1364.16" data-end="1366.92">I know as the author they are extremely</span> <span data-start="1366.92" data-end="1369.31">important so if you imagine the five</span> <span data-start="1369.31" data-end="1371.9">resources that lighthouse identified for</span> <span data-start="1371.9" data-end="1373.85">ft.com they're the things that we should</span> <span data-start="1373.85" data-end="1374.93">be hinting to the browser and so</span> <span data-start="1374.93" data-end="1376.97">fortunately the web performance working</span> <span data-start="1376.97" data-end="1378.95">group have defined a new API called</span> <span data-start="1378.95" data-end="1382.01">preload which allows us as the authors</span> <span data-start="1382.01" data-end="1383.69">of the page to indicate to the browser</span> <span data-start="1383.69" data-end="1386.96">the critical or safe hidden resources so</span> <span data-start="1386.96" data-end="1388.82">it can then prioritize a networking for</span> <span data-start="1388.82" data-end="1391.25">them so to put simply it provides a</span> <span data-start="1391.25" data-end="1394.19">derrick declarative fetch primitive that</span> <span data-start="1394.19" data-end="1396.56">initiates an early fetch this is the</span> <span data-start="1396.56" data-end="1399.17">most important bit separating fetch from</span> <span data-start="1399.17" data-end="1401.81">resource execution so I can now say go</span> <span data-start="1401.81" data-end="1404.15">and download this javascript file but</span> <span data-start="1404.15" data-end="1405.35">don't execute it because that would</span> <span data-start="1405.35" data-end="1406.76">probably be bad but perform the</span> <span data-start="1406.76" data-end="1408.8">networking for it because it's extremely</span> <span data-start="1408.8" data-end="1411.17">important delivery of my good user</span> <span data-start="1411.17" data-end="1413.69">experience so this is what it looks like</span> <span data-start="1413.69" data-end="1416.9">we now have three new primitives in HTML</span> <span data-start="1416.9" data-end="1418.91">at the top via the link element with a</span> <span data-start="1418.91" data-end="1421.88">rel preload attribute I think this is</span> <span data-start="1421.88" data-end="1423.32">extremely powerful we can do it</span> <span data-start="1423.32" data-end="1424.79">dynamically with JavaScript so you can</span> <span data-start="1424.79" data-end="1426.98">imagine if a user is hovering over a</span> <span data-start="1426.98" data-end="1429.59">button to open up a carousel with images</span> <span data-start="1429.59" data-end="1432.08">at that point as they hover you can</span> <span data-start="1432.08" data-end="1434.36">inject link preload elements to preload</span> <span data-start="1434.36" data-end="1436.46">all of the images so when they do click</span> <span data-start="1436.46" data-end="1437.42">on it you're going to have a</span> <span data-start="1437.42" data-end="1439.7">lightning-fast experience and finally my</span> <span data-start="1439.7" data-end="1442.22">favorite which is the preload link</span> <span data-start="1442.22" data-end="1444.71">header that often forgotten HTTP header</span> <span data-start="1444.71" data-end="1448.91">we can declare link elements essentially</span> <span data-start="1448.91" data-end="1451.4">but as headers so here with a HTTP</span> <span data-start="1451.4" data-end="1453.98">header on the response of our HTML file</span> <span data-start="1453.98" data-end="1456.8">we're telling the browser that go and</span> <span data-start="1456.8" data-end="1458.78">preload this CSS file is extremely</span> <span data-start="1458.78" data-end="1461.93">important and so going back to our</span> <span data-start="1461.93" data-end="1464.24">experiment on ftom we identified those</span> <span data-start="1464.24" data-end="1466.53">five resources so we're now going to set</span> <span data-start="1466.53" data-end="1468.72">the link preload header on the response</span> <span data-start="1468.72" data-end="1471.18">of the HTML and hit note here there's</span> <span data-start="1471.18" data-end="1472.58">two interesting points to note here that</span> <span data-start="1472.58" data-end="1474.99">fonts have to be declared as cross</span> <span data-start="1474.99" data-end="1477.17">origin even if they're on the same</span> <span data-start="1477.17" data-end="1480.42">origin or hosts because some genius</span> <span data-start="1480.42" data-end="1483.12">person many years ago deemed that all</span> <span data-start="1483.12" data-end="1484.95">fonts should be treated as crossed</span> <span data-start="1484.95" data-end="1486.72">origin for security purposes and the</span> <span data-start="1486.72" data-end="1488.97">important thing is the no push attribute</span> <span data-start="1488.97" data-end="1490.44">here I just want you to remember that</span> <span data-start="1490.44" data-end="1493.02">for later on so okay so we've applied</span> <span data-start="1493.02" data-end="1494.58">these linked headers what impact does</span> <span data-start="1494.58" data-end="1495.9">this have on our times first meaningful</span> <span data-start="1495.9" data-end="1499.89">paint so this is our waterfall before we</span> <span data-start="1499.89" data-end="1502.08">apply them remember the how the fonts</span> <span data-start="1502.08" data-end="1503.64">are so lowdown because they're not</span> <span data-start="1503.64" data-end="1504.9">discovered until the render tree</span> <span data-start="1504.9" data-end="1508.05">construction and by applying the link</span> <span data-start="1508.05" data-end="1509.73">headers we've been able to tell the</span> <span data-start="1509.73" data-end="1512.19">browser these are my critical resources</span> <span data-start="1512.19" data-end="1514.68">and we've instantly shifted them up so</span> <span data-start="1514.68" data-end="1516.27">hopefully you're now beginning to</span> <span data-start="1516.27" data-end="1517.74">understand what impact is going to have</span> <span data-start="1517.74" data-end="1519.05">on our time too first meaningful paint</span> <span data-start="1519.05" data-end="1522.03">that's given us a 64 percent improvement</span> <span data-start="1522.03" data-end="1524.43">on our baseline now we've hit our budget</span> <span data-start="1524.43" data-end="1526.83">for cable over thousand milliseconds and</span> <span data-start="1526.83" data-end="1529.41">we're very very close now on 3G on an</span> <span data-start="1529.41" data-end="1533.7">emerging market connection so again this</span> <span data-start="1533.7" data-end="1537.66">comes of some pros and cons it gives us</span> <span data-start="1537.66" data-end="1539.28">a way of indicating the hidden resources</span> <span data-start="1539.28" data-end="1542.46">we can now dictate the priority by order</span> <span data-start="1542.46" data-end="1543.63">sorry that's a very important thing to</span> <span data-start="1543.63" data-end="1546.54">note is that the order of these headers</span> <span data-start="1546.54" data-end="1550.65">also dictates their priority in which</span> <span data-start="1550.65" data-end="1552.42">the browser will perform the networking</span> <span data-start="1552.42" data-end="1555.57">for them so does their relation of style</span> <span data-start="1555.57" data-end="1561.84">and font and the con here though is very</span> <span data-start="1561.84" data-end="1563.4">easy to create contention on the network</span> <span data-start="1563.4" data-end="1565.2">with great power comes great</span> <span data-start="1565.2" data-end="1568.32">responsibility if you were just to set a</span> <span data-start="1568.32" data-end="1570.6">preload header for every single asset on</span> <span data-start="1570.6" data-end="1572.85">your page you're actually not allowing</span> <span data-start="1572.85" data-end="1574.59">the browser to do what it's very good at</span> <span data-start="1574.59" data-end="1576.81">doing using its preload scanner or</span> <span data-start="1576.81" data-end="1578.7">speculative posture to go and find and</span> <span data-start="1578.7" data-end="1581.73">prioritize assets so only use this</span> <span data-start="1581.73" data-end="1583.74">technique for your critical resources</span> <span data-start="1583.74" data-end="1586.77">that you've identified so we could just</span> <span data-start="1586.77" data-end="1589.83">stop there right we've improved our TTS</span> </p>
<p><span data-start="1589.83" data-end="1593.25">MP by 64 percent but surely we can do</span> <span data-start="1593.25" data-end="1596.19">more and this is where HTTP 2 new</span> <span data-start="1596.19" data-end="1598.16">feature could serve a push come</span> <span data-start="1598.16" data-end="1601.91">to play but it is now over 20 years it's</span> <span data-start="1601.91" data-end="1603.95">the first time in over 20 years that we</span> <span data-start="1603.95" data-end="1605.6">have a new version of the underlying</span> <span data-start="1605.6" data-end="1607.55">transfer protocol of the internet called</span> <span data-start="1607.55" data-end="1610.07">HSB 2 and I could literally do a whole</span> <span data-start="1610.07" data-end="1612.86">talk just on H 2 and push in itself and</span> <span data-start="1612.86" data-end="1614.96">but I don't have the time to the up for</span> <span data-start="1614.96" data-end="1616.7">one but I urge you to go and check it</span> <span data-start="1616.7" data-end="1618.05">out and the question on rely class who</span> <span data-start="1618.05" data-end="1622.82">is using HP 2 in production ok so it's</span> <span data-start="1622.82" data-end="1624.74">about 30% of the room from looks things</span> <span data-start="1624.74" data-end="1627.59">which is bit lower than I was hoping but</span> <span data-start="1627.59" data-end="1631.13">that's still very good so to understand</span> <span data-start="1631.13" data-end="1635.3">well that was a bit weird I've broken an</span> <span data-start="1635.3" data-end="1637.73">animation so and to understand what push</span> <span data-start="1637.73" data-end="1639.38">does let's look at again how your</span> <span data-start="1639.38" data-end="1641.36">average web page is constructed first we</span> <span data-start="1641.36" data-end="1643.7">make the get request to the index file</span> <span data-start="1643.7" data-end="1646.1">the server responds with the response</span> <span data-start="1646.1" data-end="1647.66">for that index file we pause the</span> <span data-start="1647.66" data-end="1649.64">document we find the link element we go</span> <span data-start="1649.64" data-end="1651.08">and make the request for the CSS file</span> <span data-start="1651.08" data-end="1657.35">and the server response of that but what</span> <span data-start="1657.35" data-end="1660.59">if we the server knows as the authors of</span> <span data-start="1660.59" data-end="1663.11">the website we know that the next item</span> <span data-start="1663.11" data-end="1665.75">or sorry resource that the client is</span> <span data-start="1665.75" data-end="1667.55">going to request is that CSS file</span> <span data-start="1667.55" data-end="1668.81">because we know it has the highest</span> <span data-start="1668.81" data-end="1671.15">priorities so what as an author we could</span> <span data-start="1671.15" data-end="1674.57">dictate to the client I am going to push</span> <span data-start="1674.57" data-end="1676.91">you these with the CSS file you don't</span> <span data-start="1676.91" data-end="1678.86">need to request it and this is where the</span> <span data-start="1678.86" data-end="1680.63">push promise frame comes in so it's a</span> <span data-start="1680.63" data-end="1683.21">data payload on a HTTP 2 connection that</span> <span data-start="1683.21" data-end="1685.34">the server says I am going to send you</span> <span data-start="1685.34" data-end="1686.81">the bytes for the CSS file you don't</span> <span data-start="1686.81" data-end="1689.27">need to request this then we can push</span> <span data-start="1689.27" data-end="1691.43">the index file and push the CSS down so</span> <span data-start="1691.43" data-end="1693.32">we're eliminating the round-trip</span> <span data-start="1693.32" data-end="1696.68">completely to request that CSS file so</span> <span data-start="1696.68" data-end="1698.09">now we can do this with h2</span> <span data-start="1698.09" data-end="1702.35">programmatically using our friend the</span> <span data-start="1702.35" data-end="1704.44">link preload header here this is the</span> <span data-start="1704.44" data-end="1706.91">semantics that we've decided upon as an</span> <span data-start="1706.91" data-end="1709.52">industry so now if going back to our SD</span> <span data-start="1709.52" data-end="1712.28">comm example we can remove our inline</span> </p>
<p><span data-start="1712.28" data-end="1714.59">CSS now and we can declare it just as a</span> <span data-start="1714.59" data-end="1716.42">normal style sheet that declared the</span> <span data-start="1716.42" data-end="1718.46">secondary the non-critical CSS is</span> <span data-start="1718.46" data-end="1721.16">asynchronous using preload and then tell</span> <span data-start="1721.16" data-end="1723.56">our hb2 server you have to have a h2</span> <span data-start="1723.56" data-end="1725.63">server enabled for this behavior to work</span> <span data-start="1725.63" data-end="1728.21">that I want you to push the critical CSS</span> <span data-start="1728.21" data-end="1729.83">and how we're doing that it's just we've</span> <span data-start="1729.83" data-end="1730.95">removed that no</span> <span data-start="1730.95" data-end="1732.299">push directive that I told you to</span> <span data-start="1732.299" data-end="1734.789">remember about earlier on so hex to</span> <span data-start="1734.789" data-end="1736.889">server will see this response it would</span> <span data-start="1736.889" data-end="1738.63">say right that author wants me to push</span> <span data-start="1738.63" data-end="1740.669">all of these resources and it will push</span> <span data-start="1740.669" data-end="1744.149">the critical CSS bytes down so let's</span> <span data-start="1744.149" data-end="1745.769">take a closer look at what's actually</span> <span data-start="1745.769" data-end="1748.32">happening on the network before we apply</span> <span data-start="1748.32" data-end="1750.929">this optimization and note that we have</span> <span data-start="1750.929" data-end="1754.26">idle time before we get our HTML bytes</span> <span data-start="1754.26" data-end="1755.82">that's when the browser has made the</span> <span data-start="1755.82" data-end="1757.559">request but we're waiting for the server</span> <span data-start="1757.559" data-end="1759.899">to respond of it at the beginning then</span> <span data-start="1759.899" data-end="1761.73">we have a very fast start render because</span> <span data-start="1761.73" data-end="1764.789">we've in lined our critical CSS then the</span> <span data-start="1764.789" data-end="1766.59">browser has some think time again it</span> <span data-start="1766.59" data-end="1768.48">then requests the main CSS file and</span> <span data-start="1768.48" data-end="1771.23">there's our x first meaningful paint now</span> <span data-start="1771.23" data-end="1773.07">then what you're going to think is going</span> <span data-start="1773.07" data-end="1774.299">to happen here but you may be a little</span> <span data-start="1774.299" data-end="1776.7">bit surprised as the impact of pushing</span> <span data-start="1776.7" data-end="1778.71">our critical CSS says removing it from</span> <span data-start="1778.71" data-end="1783.09">inline and pushing it we've actually had</span> <span data-start="1783.09" data-end="1785.07">a negative impact on the x first</span> <span data-start="1785.07" data-end="1790.679">meaningful paint and why is this we're</span> <span data-start="1790.679" data-end="1792.21">not using the idle time at the beginning</span> <span data-start="1792.21" data-end="1793.95">of the connection and to understand why</span> <span data-start="1793.95" data-end="1795.45">this is we have to have a bit of better</span> <span data-start="1795.45" data-end="1796.98">understanding what's actually happening</span> <span data-start="1796.98" data-end="1799.71">on the HTTP 2 server here HT servers use</span> <span data-start="1799.71" data-end="1802.799">a prioritization tree to determine which</span> <span data-start="1802.799" data-end="1804.96">the order of which the packets is going</span> <span data-start="1804.96" data-end="1807.029">to send down the connection and even</span> <span data-start="1807.029" data-end="1809.58">though we told our Haiti to server to</span> <span data-start="1809.58" data-end="1812.97">push the CSS via our link header because</span> <span data-start="1812.97" data-end="1815.13">we actually did it on the response of</span> <span data-start="1815.13" data-end="1818.22">the HTML document the server had all of</span> <span data-start="1818.22" data-end="1820.32">the HTML and HTML has a much higher</span> <span data-start="1820.32" data-end="1823.559">priority than CSS does so of course it's</span> <span data-start="1823.559" data-end="1825.48">going to flush all of the HTML bytes</span> <span data-start="1825.48" data-end="1827.309">down the connection before it did our</span> <span data-start="1827.309" data-end="1829.559">critical CSS even though actually what</span> <span data-start="1829.559" data-end="1832.019">we wanted it to do is flush the CSS in</span> <span data-start="1832.019" data-end="1833.97">our idle time whilst we were waiting for</span> <span data-start="1833.97" data-end="1836.279">our HTML connection and I must stress</span> <span data-start="1836.279" data-end="1837.51">here that this behavior is slightly</span> <span data-start="1837.51" data-end="1840.12">different depending on your HDTV server</span> <span data-start="1840.12" data-end="1842.279">implementation but all of the major h2</span> <span data-start="1842.279" data-end="1844.799">service at the moment prioritize and</span> <span data-start="1844.799" data-end="1847.769">quite rightly prioritized HTML over CSS</span> <span data-start="1847.769" data-end="1850.44">on the connection and so this is the</span> <span data-start="1850.44" data-end="1852.45">impact it has on our waterfall now it's</span> <span data-start="1852.45" data-end="1853.74">really interesting thing here to note is</span> <span data-start="1853.74" data-end="1856.35">the critical CSS doesn't have a light</span> <span data-start="1856.35" data-end="1858.84">green segment beforehand because it</span> <span data-start="1858.84" data-end="1860.49">didn't need to send the request and</span> <span data-start="1860.49" data-end="1862.32">therefore was there was no waiting for</span> <span data-start="1862.32" data-end="1864.27">it so this is the benefit that we get</span> <span data-start="1864.27" data-end="1866.16">from push is that we're reducing the</span> <span data-start="1866.16" data-end="1867.63">idler time from the request to the</span> <span data-start="1867.63" data-end="1870.21">response but it's we're not getting our</span> </p>
<p><span data-start="1870.21" data-end="1872.28">CSS delivered at the point that we want</span> <span data-start="1872.28" data-end="1874.59">it to in the light blue area of our HTML</span> <span data-start="1874.59" data-end="1878.79">and it's also important to note if you</span> <span data-start="1878.79" data-end="1882.059">weren't in lining your CSS and many of</span> <span data-start="1882.059" data-end="1883.29">you probably aren't this is still quite</span> <span data-start="1883.29" data-end="1884.82">a very good technique because you are</span> <span data-start="1884.82" data-end="1890.04">saving that that request time so we've</span> <span data-start="1890.04" data-end="1891.929">had a negative impact on our time to</span> <span data-start="1891.929" data-end="1893.85">first meaningful paint here only 43</span> <span data-start="1893.85" data-end="1895.29">percent improvement on our baseline</span> <span data-start="1895.29" data-end="1900.929">we've gone back to 5,000 milliseconds so</span> <span data-start="1900.929" data-end="1903.54">the question I'm asking is should we be</span> <span data-start="1903.54" data-end="1905.73">using server push at all actually we're</span> <span data-start="1905.73" data-end="1908.1">having a negative impact and most</span> <span data-start="1908.1" data-end="1911.22">importantly is using the link header</span> <span data-start="1911.22" data-end="1913.92">with a rel preload actually much too</span> <span data-start="1913.92" data-end="1916.65">late in the connection state for us to</span> <span data-start="1916.65" data-end="1918.99">indicate the CSS that we want you to</span> <span data-start="1918.99" data-end="1922.62">push and so how can we actually achieve</span> <span data-start="1922.62" data-end="1924.96">that holy grail of pushing our critical</span> </p>
<p><span data-start="1924.96" data-end="1927.36">CSS only in the server idle time and</span> <span data-start="1927.36" data-end="1929.52">this is what firstly at fastly sorry</span> <span data-start="1929.52" data-end="1932.309">we're calling async push so let's look</span> <span data-start="1932.309" data-end="1934.2">at that network utilization again from</span> <span data-start="1934.2" data-end="1936.15">my experiment and note at the beginning</span> <span data-start="1936.15" data-end="1938.49">we have that idle time waiting for the</span> <span data-start="1938.49" data-end="1939.96">server to respond it's probably</span> <span data-start="1939.96" data-end="1942.15">performing the templating going and</span> <span data-start="1942.15" data-end="1943.62">requesting your user data from your</span> <span data-start="1943.62" data-end="1946.11">database is that this server think time</span> <span data-start="1946.11" data-end="1948.51">that we want to be using to be pushing</span> <span data-start="1948.51" data-end="1951">our static assets and so a much more</span> <span data-start="1951" data-end="1952.559">common architecture that probably many</span> <span data-start="1952.559" data-end="1954.72">in the you in the room are using is that</span> <span data-start="1954.72" data-end="1956.309">you have your application server is</span> <span data-start="1956.309" data-end="1959.13">actually separate from your HTTP server</span> <span data-start="1959.13" data-end="1961.32">think you probably use nginx or Apache</span> <span data-start="1961.32" data-end="1963.87">you might use a CDN for instance and so</span> <span data-start="1963.87" data-end="1966.15">this is the request flow that the index</span> <span data-start="1966.15" data-end="1967.83">file goes through and then we get</span> <span data-start="1967.83" data-end="1971.28">response and what if that server was</span> <span data-start="1971.28" data-end="1973.2">able during an application think time</span> <span data-start="1973.2" data-end="1976.32">was able to push the critical resource</span> <span data-start="1976.32" data-end="1978.33">at that time this is the think time that</span> <span data-start="1978.33" data-end="1980.1">we want to be using so here's an example</span> <span data-start="1980.1" data-end="1982.5">of doing that using an Express style</span> <span data-start="1982.5" data-end="1985.53">request handler using HC and knows HTTP</span> <span data-start="1985.53" data-end="1987.69">- implementation the important point to</span> <span data-start="1987.69" data-end="1989.16">note here is not the implementation of</span> <span data-start="1989.16" data-end="1991.05">but what we're doing at the beginning of</span> <span data-start="1991.05" data-end="1992.91">the request the first thing we're doing</span> <span data-start="1992.91" data-end="1996.24">is flushing our critical CSS via push</span> <span data-start="1996.24" data-end="1998.13">down the network connection</span> <span data-start="1998.13" data-end="2000.59">then we go and do our templating and</span> <span data-start="2000.59" data-end="2003.2">fetching from our rendering and then we</span> <span data-start="2003.2" data-end="2005.33">respond with our link headers and this</span> <span data-start="2005.33" data-end="2007.58">is how we can utilize that idle</span> <span data-start="2007.58" data-end="2010.1">connection time and so what happens to</span> <span data-start="2010.1" data-end="2012.559">our connection state here now is we've</span> <span data-start="2012.559" data-end="2015.32">we've reached the holy grail we've been</span> <span data-start="2015.32" data-end="2017.57">able to push our critical CSS in the</span> <span data-start="2017.57" data-end="2020.03">light blue area whilst the server is</span> <span data-start="2020.03" data-end="2021.95">still thinking we've given the browser</span> <span data-start="2021.95" data-end="2025.07">everything it needs way before it even</span> <span data-start="2025.07" data-end="2028.25">gets any HTML to style and paint your</span> <span data-start="2028.25" data-end="2031.809">entire document so now we have a 65%</span> <span data-start="2031.809" data-end="2034.37">improvement on our baseline we've</span> <span data-start="2034.37" data-end="2036.65">reached that holy grail so this comes of</span> <span data-start="2036.65" data-end="2038.6">some pros and some cons obviously that</span> <span data-start="2038.6" data-end="2040.429">we're using that idle time but it's very</span> <span data-start="2040.429" data-end="2042.35">easy to create contention with push and</span> <span data-start="2042.35" data-end="2044.03">there's limited availability of this</span> <span data-start="2044.03" data-end="2045.95">because you have to have access to the</span> <span data-start="2045.95" data-end="2047.33">network connection within your server to</span> <span data-start="2047.33" data-end="2051.56">be able to do this and hopefully many of</span> <span data-start="2051.56" data-end="2053.179">the room thinking but what about the</span> <span data-start="2053.179" data-end="2055.34">repeat view every one of our tests has</span> <span data-start="2055.34" data-end="2058.609">been the first view the uncashed the</span> <span data-start="2058.609" data-end="2060.169">browser doesn't have anything cached and</span> <span data-start="2060.169" data-end="2061.82">that's what we should be optimizing for</span> <span data-start="2061.82" data-end="2063.26">for our time first meaningful paint but</span> <span data-start="2063.26" data-end="2066.23">with push if I was the user was then to</span> <span data-start="2066.23" data-end="2068.03">visit the next page on my website and I</span> <span data-start="2068.03" data-end="2069.679">was going to push those bytes we've</span> <span data-start="2069.679" data-end="2071.69">actually the browser's probably got that</span> <span data-start="2071.69" data-end="2073.609">asset cached already but we've got no</span> <span data-start="2073.609" data-end="2076.28">way of indicating to the server that we</span> <span data-start="2076.28" data-end="2078.619">have that CSS so please don't push it to</span> <span data-start="2078.619" data-end="2081.409">me and I did want to show you how to do</span> <span data-start="2081.409" data-end="2082.76">this using new technology such as</span> <span data-start="2082.76" data-end="2085.01">serviceworkers and the purple pattern</span> <span data-start="2085.01" data-end="2087.409">but unfortunately I've ran out of time</span> <span data-start="2087.409" data-end="2089.84">today but the good news is adios money</span> <span data-start="2089.84" data-end="2092.03">is from Google is going to be talking</span> <span data-start="2092.03" data-end="2093.679">exactly about these types of patterns</span> <span data-start="2093.679" data-end="2095.659">and how you can optimize for time to add</span> <span data-start="2095.659" data-end="2097.88">interactivity on your repeats view at</span> <span data-start="2097.88" data-end="2100.7">jazzpunk for this weekend so let's look</span> <span data-start="2100.7" data-end="2102.8">at the final results and I think it's</span> <span data-start="2102.8" data-end="2105.32">better to show you to them as how the</span> <span data-start="2105.32" data-end="2106.94">user is perceiving this now with our</span> <span data-start="2106.94" data-end="2109.04">async push example down the bottom all</span> <span data-start="2109.04" data-end="2110.84">the way up to the baseline we've been</span> <span data-start="2110.84" data-end="2113.21">able to improve the delivery on a 3G</span> <span data-start="2113.21" data-end="2116.24">emerging-market connection by over 3,000</span> <span data-start="2116.24" data-end="2117.59">milliseconds which is staggering</span> <span data-start="2117.59" data-end="2126.94">improvement for our performance</span> <span data-start="2126.95" data-end="2129.24">okay so finally I just wanted to leave</span> <span data-start="2129.24" data-end="2130.5">you with some glimpse of what the future</span> <span data-start="2130.5" data-end="2132.03">is happening we've now got strong</span> <span data-start="2132.03" data-end="2135.54">toolbox of AP is preload HTTP push and</span> <span data-start="2135.54" data-end="2137.73">inlining but there's still some issues</span> <span data-start="2137.73" data-end="2139.47">of each of those that I outlined the</span> <span data-start="2139.47" data-end="2142.41">biggest weakness of server push as we</span> <span data-start="2142.41" data-end="2144.33">mentioned is that by indicating that</span> <span data-start="2144.33" data-end="2146.55">push via link preload header is that</span> <span data-start="2146.55" data-end="2148.44">that initiation of the push is much too</span> <span data-start="2148.44" data-end="2149.88">late in the network connection and we</span> <span data-start="2149.88" data-end="2151.71">end up in just in the network and this</span> <span data-start="2151.71" data-end="2154.5">is where my colleague Kazuo firstly we</span> <span data-start="2154.5" data-end="2156.45">now have a working draft in the ITF of</span> <span data-start="2156.45" data-end="2160.47">the 103 early hint status code the 100</span> <span data-start="2160.47" data-end="2162.06">range a lot of people didn't even know</span> <span data-start="2162.06" data-end="2164.16">existed it's the information status code</span> <span data-start="2164.16" data-end="2165.72">range and we can now have this pattern</span> <span data-start="2165.72" data-end="2167.4">where the client requested something</span> <span data-start="2167.4" data-end="2169.41">from the server and whilst the server is</span> <span data-start="2169.41" data-end="2171.45">generating the response it can flush an</span> <span data-start="2171.45" data-end="2174.81">early hint response containing link</span> <span data-start="2174.81" data-end="2176.49">headers to all of your critical sub</span> <span data-start="2176.49" data-end="2178.38">resources and then the browser can go</span> <span data-start="2178.38" data-end="2180.18">and prioritize the networking for them</span> <span data-start="2180.18" data-end="2182.91">and finally the cache digest</span> <span data-start="2182.91" data-end="2184.68">specification remember I mentioned that</span> <span data-start="2184.68" data-end="2187.2">the repeat view of push we have no way</span> <span data-start="2187.2" data-end="2189.06">of indicating to the browser what we</span> <span data-start="2189.06" data-end="2191.67">have in a cache for our CSS for that</span> <span data-start="2191.67" data-end="2195.06">domain and so now on a h2 connection the</span> <span data-start="2195.06" data-end="2197.04">client is going to be able to send via</span> <span data-start="2197.04" data-end="2200.01">cache digest frame or a header all of</span> <span data-start="2200.01" data-end="2201.75">the files that it has for that host name</span> <span data-start="2201.75" data-end="2203.94">and then the server can decide ok I'm</span> <span data-start="2203.94" data-end="2205.65">not going to send you that CSS file</span> <span data-start="2205.65" data-end="2207.36">because I know you already have it in</span> <span data-start="2207.36" data-end="2209.55">its cache and I think this in itself is</span> <span data-start="2209.55" data-end="2210.78">going to be one of the most powerful</span> <span data-start="2210.78" data-end="2212.85">performance optimizations in the future</span> <span data-start="2212.85" data-end="2214.17">of the next five years as it gets</span> <span data-start="2214.17" data-end="2217.23">implemented in browsers so that's been a</span> <span data-start="2217.23" data-end="2218.79">whirlwind tour I've gone five minutes</span> <span data-start="2218.79" data-end="2220.14">over my slots</span> </p>
<p><span data-start="2220.14" data-end="2222.42">I'm very sorry my lovely CSS conference</span> <span data-start="2222.42" data-end="2224.67">organizers so I just wanted to leave you</span> <span data-start="2224.67" data-end="2226.8">for the last points and takeaways and</span> <span data-start="2226.8" data-end="2228.81">that is that hopefully you found that</span> <span data-start="2228.81" data-end="2231.21">resource loading in the browser is hard</span> <span data-start="2231.21" data-end="2233.61">it's much harder than you probably</span> <span data-start="2233.61" data-end="2235.8">thought it was bandwidth is often</span> <span data-start="2235.8" data-end="2238.44">underutilized but we have technologies</span> <span data-start="2238.44" data-end="2240.99">now emerging to enable us to give that</span> <span data-start="2240.99" data-end="2243.57">utilization to the browser identify your</span> <span data-start="2243.57" data-end="2245.19">critical resources and your request</span> <span data-start="2245.19" data-end="2248.04">chains use preload to indicate those</span> <span data-start="2248.04" data-end="2249.36">critical resources to the browser</span> <span data-start="2249.36" data-end="2251.67">especially your fonts if you're using</span> <span data-start="2251.67" data-end="2254.16">custom web fonts and push your critical</span> </p>
<p><span data-start="2254.16" data-end="2256.74">CSS but only in first view and please</span> <span data-start="2256.74" data-end="2259.02">try and only used within that idle</span> <span data-start="2259.02" data-end="2261.27">connection time but most importantly</span> <span data-start="2261.27" data-end="2264.21">always be testing it's the most</span> <span data-start="2264.21" data-end="2266.61">important thing to leave you with thank</span> <span data-start="2266.61" data-end="2267.94">you very much</span> <span data-start="2267.94" data-end="2270.04">[Applause]</span> <span data-start="2270.04" data-end="2271.14">[Music]</span> <span data-start="2271.14" data-end="2273.98">[Applause]</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
