<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ROt7rJ2PQis</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/ROt7rJ2PQis?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="31.989" data-end="36.199">right thank you good afternoon as Chris</span> <span data-start="36.199" data-end="38.18">said my name is Daniel Austin I'm senior</span> <span data-start="38.18" data-end="39.53">principal architect for Yahoo's</span> <span data-start="39.53" data-end="43.43">exceptional performance group the I want</span> <span data-start="43.43" data-end="45.019">to warn you i'm not going to stand up</span> <span data-start="45.019" data-end="47.649">here and edit any javascript in VI and</span> <span data-start="47.649" data-end="50">and there's no hovers or anything like</span> <span data-start="50" data-end="52.19">that what i want to do is talk to you</span> <span data-start="52.19" data-end="55.07">about what we're doing to use javascript</span> <span data-start="55.07" data-end="58.579">and json to make the web faster and if</span> <span data-start="58.579" data-end="60.229">there's any theme to this talk it's</span> <span data-start="60.229" data-end="62.329">making the web faster by making it</span> <span data-start="62.329" data-end="65.53">smarter so that's where we're headed</span> <span data-start="65.53" data-end="68.15">just but for our agenda today we're</span> <span data-start="68.15" data-end="69.77">going to talk about a new protocol</span> <span data-start="69.77" data-end="72.71">called scratch it's not related to the</span> </p>
<p><span data-start="72.71" data-end="75.32">MIT product that we saw earlier at all</span> <span data-start="75.32" data-end="77.45">that was sort of a anti serendipitous</span> <span data-start="77.45" data-end="79.82">moment for me even though I did go to</span> <span data-start="79.82" data-end="83.21">the Institute protocol design is our</span> <span data-start="83.21" data-end="85.22">next agenda item will talk about results</span> <span data-start="85.22" data-end="87.799">in current state and where do we go from</span> <span data-start="87.799" data-end="90.95">here fairly standard agenda a few words</span> <span data-start="90.95" data-end="93.29">about my group at Yahoo and what we do a</span> <span data-start="93.29" data-end="95.299">lot of what we do is building tools I</span> <span data-start="95.299" data-end="97.54">think everyone here knows about why slow</span> <span data-start="97.54" data-end="101.18">anybody not know about why slow I didn't</span> <span data-start="101.18" data-end="102.92">think so okay everybody knows why slows</span> <span data-start="102.92" data-end="106.94">written in JavaScript lot of what we do</span> <span data-start="106.94" data-end="109.1">is optimizing these are experience every</span> <span data-start="109.1" data-end="111.14">time you go to yahoo page we're out</span> <span data-start="111.14" data-end="113.36">there trying to make it faster every day</span> <span data-start="113.36" data-end="116.78">and to touch on today's topic we do a</span> <span data-start="116.78" data-end="118.61">lot of research forward thinking</span> <span data-start="118.61" data-end="121.13">advanced technology what are we going to</span> <span data-start="121.13" data-end="122.659">do to make the web faster and smarter</span> <span data-start="122.659" data-end="125.479">today and that's where we're headed</span> <span data-start="125.479" data-end="129.709">today so our goals I want to explain the</span> <span data-start="129.709" data-end="133.01">design for the scratch protocol why we</span> <span data-start="133.01" data-end="135.379">went where we win why we are excited</span> <span data-start="135.379" data-end="138.56">about JSON why we think that it's</span> <span data-start="138.56" data-end="139.7">something that we wanted to come and</span> <span data-start="139.7" data-end="141.709">talk to you about because one of our</span> <span data-start="141.709" data-end="144.23">goals is to leverage the collective</span> <span data-start="144.23" data-end="147.319">intelligence of this group on making</span> <span data-start="147.319" data-end="149.78">scratch better we want to describe our</span> <span data-start="149.78" data-end="152.629">experiments request some feedback ideas</span> <span data-start="152.629" data-end="154.939">improvements criticism constructive</span> <span data-start="154.939" data-end="159.98">criticism very welcome so the first</span> <span data-start="159.98" data-end="161.329">question I always get when I give this</span> <span data-start="161.329" data-end="163.459">talk right after why am I going to burn</span> <span data-start="163.459" data-end="165.45">the internet down and start over</span> <span data-start="165.45" data-end="169.41">is why did I call it scratch and we</span> <span data-start="169.41" data-end="172.19">started out to design this protocol</span> <span data-start="172.19" data-end="174.78">performance first in mind and it went</span> <span data-start="174.78" data-end="176.81">through several area several iterations</span> <span data-start="176.81" data-end="178.53">initially we ended up rewriting</span> <span data-start="178.53" data-end="181.73">something that looked a lot like TCP I</span> <span data-start="181.73" data-end="183.72">think everybody that goes through this</span> <span data-start="183.72" data-end="186.18">exercise ends up doing something very</span> <span data-start="186.18" data-end="188.19">similar we had congestion control we</span> <span data-start="188.19" data-end="189.989">didn't quite it reinvents slow start I</span> <span data-start="189.989" data-end="191.76">won't plead guilty to something that bad</span> <span data-start="191.76" data-end="193.86">but we went through this process of</span> <span data-start="193.86" data-end="196.319">redesigning TCP and that really was not</span> <span data-start="196.319" data-end="199.11">the right solution and and so he's</span> <span data-start="199.11" data-end="200.91">toured up we started all over again and</span> <span data-start="200.91" data-end="202.799">and we didn't like that version either</span> <span data-start="202.799" data-end="204.63">we had a bunch of homegrown UDP</span> <span data-start="204.63" data-end="206.91">libraries that didn't really work for us</span> <span data-start="206.91" data-end="208.59">so we burned it down again and started</span> <span data-start="208.59" data-end="210.989">over and and we tore it up and we</span> <span data-start="210.989" data-end="212.97">started all over again and we did that</span> <span data-start="212.97" data-end="214.26">several times that's why we call it</span> <span data-start="214.26" data-end="217.019">scratch because we started from scratch</span> <span data-start="217.019" data-end="220.019">several different times so just the</span> <span data-start="220.019" data-end="221.37">elevator pitch you're in an elevator</span> <span data-start="221.37" data-end="223.53">with an executive you've got 30 seconds</span> <span data-start="223.53" data-end="225.12">to describe it I can't do it in 30</span> <span data-start="225.12" data-end="228.03">seconds I'm sorry but maybe 90 seconds</span> <span data-start="228.03" data-end="231.09">scratch is new dual band data protocol</span> <span data-start="231.09" data-end="232.98">for the web it's designed to work</span> <span data-start="232.98" data-end="236.13">together with HTTP over TCP when we all</span> <span data-start="236.13" data-end="238.829">know we'll call that the control channel</span> <span data-start="238.829" data-end="241.53">alpha channel not related to your 8-bit</span> <span data-start="241.53" data-end="244.769">intensity map we'll also talk about</span> <span data-start="244.769" data-end="248.069">scratch UDP which is the data channel</span> <span data-start="248.069" data-end="249.63">for our protocol will call that the</span> </p>
<p><span data-start="249.63" data-end="252.139">Delta Channel if you look at my</span> <span data-start="252.139" data-end="254.389">well-designed engineering diagram</span> <span data-start="254.389" data-end="256.739">produced over here you can kind of see</span> <span data-start="256.739" data-end="259.97">that we have a erstwhile user going to a</span> <span data-start="259.97" data-end="262.889">set of machines somewhere presumably</span> <span data-start="262.889" data-end="265.56">data center obtaining some control</span> <span data-start="265.56" data-end="268.2">information and then going out making</span> <span data-start="268.2" data-end="269.52">requests against what are apparently</span> <span data-start="269.52" data-end="272.01">some data nodes using the scratch UDP</span> <span data-start="272.01" data-end="275.28">data protocol in order to access that</span> <span data-start="275.28" data-end="278.57">data this is one of the primary</span> <span data-start="278.57" data-end="282.74">architectures and the intention for our</span> <span data-start="282.74" data-end="285.11">architecture it looks a little weird</span> <span data-start="285.11" data-end="288.09">until you think about oh wait those are</span> <span data-start="288.09" data-end="294.87">CDN notes so the way we load pages today</span> <span data-start="294.87" data-end="297.99">we go and we download the base HTML we</span> <span data-start="297.99" data-end="299.249">parse through that gap</span> <span data-start="299.249" data-end="300.719">up all the links do some other things</span> <span data-start="300.719" data-end="303.389">then we go out to the CDN and we gather</span> <span data-start="303.389" data-end="306.809">multiple data objects obviously you're</span> <span data-start="306.809" data-end="309.149">small noncommercial website doesn't do</span> <span data-start="309.149" data-end="310.529">something like this but all of the major</span> <span data-start="310.529" data-end="314.249">sites do this scratch was designed to</span> <span data-start="314.249" data-end="316.499">make that scenario a lot easier this is</span> <span data-start="316.499" data-end="318.659">not the only scenario it's just one of</span> <span data-start="318.659" data-end="320.459">them all of our large commercial</span> <span data-start="320.459" data-end="323.159">providers really want to use cdns it</span> <span data-start="323.159" data-end="325.199">helps performance we're trying to make</span> <span data-start="325.199" data-end="328.399">that work in a completely different way</span> <span data-start="328.399" data-end="331.199">so this is basically the elevator pitch</span> <span data-start="331.199" data-end="333.719">for scratch there's absolutely no detail</span> <span data-start="333.719" data-end="335.549">here beyond the small engineering</span> <span data-start="335.549" data-end="338.929">diagram we're going to get into that so</span> <span data-start="338.929" data-end="340.919">motivation why do we want to do this</span> <span data-start="340.919" data-end="343.049">first thing as we look at it the web and</span> <span data-start="343.049" data-end="344.399">what we do on it today and we know that</span> </p>
<p><span data-start="344.399" data-end="346.889">TCP is not terribly efficient for what</span> <span data-start="346.889" data-end="349.199">we're trying to do small objects are not</span> <span data-start="349.199" data-end="352.259">terribly efficient via TCP you can kind</span> <span data-start="352.259" data-end="354.119">of see here we have some graphs showing</span> <span data-start="354.119" data-end="357.289">number of objects and their sizes Yahoo</span> <span data-start="357.289" data-end="360.889">Amazon you can see that these</span> <span data-start="360.889" data-end="362.519">distributions are heavily weighted</span> <span data-start="362.519" data-end="364.679">toward very small objects this is not a</span> <span data-start="364.679" data-end="366.749">mystery most things on the web are not</span> <span data-start="366.749" data-end="369.539">very large another issue we have is the</span> <span data-start="369.539" data-end="371.939">parallel ISM across the browsers is not</span> <span data-start="371.939" data-end="373.229">useful we all know that the browser</span> <span data-start="373.229" data-end="375.779">tries to gather all the data from the</span> </p>
<p><span data-start="375.779" data-end="379.019">CDN in some parallel way make it as fast</span> <span data-start="379.019" data-end="380.549">as possible if anybody's seen a</span> <span data-start="380.549" data-end="382.889">waterfall diagram we know how this works</span> <span data-start="382.889" data-end="384.629">but we know it isn't very uniform I</span> <span data-start="384.629" data-end="387.779">think ie9 opens what's the browser</span> <span data-start="387.779" data-end="389.729">connection constant friday night i think</span> <span data-start="389.729" data-end="391.769">it's six connections per unique hostname</span> <span data-start="391.769" data-end="395.909">and in firefox it's in firefox for its</span> <span data-start="395.909" data-end="399.509">15 individual connections on to a unique</span> <span data-start="399.509" data-end="401.729">hostname that's a little crazy and it</span> <span data-start="401.729" data-end="404.219">doesn't work Firefox is not twice as</span> <span data-start="404.219" data-end="407.939">fast as I eat one of the other problems</span> <span data-start="407.939" data-end="410.429">we have with TCP there's no context the</span> <span data-start="410.429" data-end="411.989">server doesn't remember you every time</span> <span data-start="411.989" data-end="413.639">you make a request you have to tell it</span> <span data-start="413.639" data-end="416.879">yes I take text HTML oh and I take gifts</span> <span data-start="416.879" data-end="419.759">to lot of redundancy in that information</span> <span data-start="419.759" data-end="421.829">will talk about state and why we need to</span> <span data-start="421.829" data-end="423.599">manage that and the fact that we do</span> <span data-start="423.599" data-end="425.219">manage state today even though we</span> <span data-start="425.219" data-end="426.959">pretend we don't or we often claim we</span> <span data-start="426.959" data-end="431.279">don't tcp treads two tries to trade</span> <span data-start="431.279" data-end="433.09">reliability for performance</span> <span data-start="433.09" data-end="435.52">in allotted cases that's a really good</span> <span data-start="435.52" data-end="437.29">trade-off it's not necessarily the</span> <span data-start="437.29" data-end="438.94">trade-off we want to make on the web if</span> <span data-start="438.94" data-end="440.53">we're going to make the web faster we've</span> <span data-start="440.53" data-end="443.65">got to make it smarter being forcing</span> <span data-start="443.65" data-end="445.21">everything to make a trade off between</span> <span data-start="445.21" data-end="447.55">reliability and performance in favor of</span> <span data-start="447.55" data-end="450.1">reliability is not a performance</span> <span data-start="450.1" data-end="453.76">optimization not designed for small</span> <span data-start="453.76" data-end="455.86">incremental changes bandwidth</span> <span data-start="455.86" data-end="458.74">efficiencies are typically very small so</span> <span data-start="458.74" data-end="460.99">typical beta for a website less than</span> <span data-start="460.99" data-end="463.21">twenty five percent I went measured the</span> <span data-start="463.21" data-end="466.15">yahoo homepage bandwidth efficiency for</span> <span data-start="466.15" data-end="470.44">the Yahoo home page eleven percent never</span> <span data-start="470.44" data-end="472.09">been able to get it past eleven percent</span> <span data-start="472.09" data-end="474.04">that's terrible we've got to be able to</span> <span data-start="474.04" data-end="474.94">do better than that one of the</span> <span data-start="474.94" data-end="477.34">motivations for scratch TCP does not</span> <span data-start="477.34" data-end="478.96">work for the way we want to use the web</span> <span data-start="478.96" data-end="482.47">today or in the future so some of our</span> <span data-start="482.47" data-end="484.93">goals around this and obviously work in</span> <span data-start="484.93" data-end="487.389">progress right we want to increase that</span> <span data-start="487.389" data-end="489.19">bandwidth efficiency could we get fifty</span> <span data-start="489.19" data-end="491.169">percent I bet I could I bet if I</span> <span data-start="491.169" data-end="493.15">eliminated the redundant headers I bet</span> <span data-start="493.15" data-end="494.77">if I manage the connection stayed a</span> <span data-start="494.77" data-end="496.9">little more intelligently I bet if I use</span> </p>
<p><span data-start="496.9" data-end="498.94">JavaScript to send objects down to the</span> <span data-start="498.94" data-end="500.65">browser without a lot of intervening</span> <span data-start="500.65" data-end="503.44">hassle hey maybe I could get fifty</span> <span data-start="503.44" data-end="506.22">percent improvement what do you think</span> <span data-start="506.22" data-end="509.86">once again the theme of the talks faster</span> <span data-start="509.86" data-end="512.02">equals smarter we need semantic</span> <span data-start="512.02" data-end="514.81">awareness we need manage contexts for</span> <span data-start="514.81" data-end="517.479">the web identity state first class</span> <span data-start="517.479" data-end="520.75">objects in the system we do this today</span> <span data-start="520.75" data-end="522.64">we manage state we have persistent</span> <span data-start="522.64" data-end="525.97">connections so that HTTP 1.1 thing we</span> <span data-start="525.97" data-end="528.19">manage state there's those cookies oh</span> <span data-start="528.19" data-end="530.5">don't get me started on cookies just do</span> <span data-start="530.5" data-end="533.44">not get me started first class objects</span> <span data-start="533.44" data-end="536.05">in the system for state identity for</span> <span data-start="536.05" data-end="538.959">encryption for several other aspects of</span> <span data-start="538.959" data-end="541.54">things that are bolted on after the fact</span> <span data-start="541.54" data-end="544.18">should be first class objects in the web</span> <span data-start="544.18" data-end="546.19">should not be treated as second-class</span> <span data-start="546.19" data-end="549.459">citizens scratch tries to remedy some of</span> <span data-start="549.459" data-end="551.98">those problems we wanted it to be robust</span> <span data-start="551.98" data-end="555.22">we don't need all of TCP and I don't</span> <span data-start="555.22" data-end="558.97">need 30 years of development on TCP we</span> <span data-start="558.97" data-end="561.28">want to target slow networks global</span> <span data-start="561.28" data-end="563.17">networks not everybody's network works</span> <span data-start="563.17" data-end="565.51">as well as Comcast want mobile and</span> <span data-start="565.51" data-end="566.83">tablet devices low</span> <span data-start="566.83" data-end="568.21">and with Internet of Things chatter</span> <span data-start="568.21" data-end="569.47">we'll talk a little bit about the</span> </p>
<p><span data-start="569.47" data-end="571.06">Internet of Things the role JavaScript</span> <span data-start="571.06" data-end="573.49">can play there those are really the</span> <span data-start="573.49" data-end="576.4">goals that we set for ourselves want to</span> <span data-start="576.4" data-end="577.81">talk a little bit about the design</span> <span data-start="577.81" data-end="581.26">decisions that we made so when we went</span> <span data-start="581.26" data-end="584.74">to look at all the work that's been done</span> <span data-start="584.74" data-end="586.96">in this space we found a lot of it we</span> <span data-start="586.96" data-end="588.67">are not the first people to think of</span> <span data-start="588.67" data-end="591.67">this idea all of these people are fellow</span> <span data-start="591.67" data-end="593.38">travelers in the goal of making the web</span> <span data-start="593.38" data-end="594.94">faster and smarter in different</span> <span data-start="594.94" data-end="596.35">directions some of them are protocols</span> <span data-start="596.35" data-end="598.18">are different layers of the stack others</span> <span data-start="598.18" data-end="600.76">are data exchange formats others have</span> <span data-start="600.76" data-end="603.1">various aspects PD is something from</span> <span data-start="603.1" data-end="605.59">google trying to multiplex HTML streams</span> <span data-start="605.59" data-end="608.89">rack Nets often used by mobile games</span> <span data-start="608.89" data-end="613.54">multiplayer games w3c just released exi</span> <span data-start="613.54" data-end="616.27">this is sort of a compact binary version</span> <span data-start="616.27" data-end="619.24">of the XML infoset sort of takes away a</span> <span data-start="619.24" data-end="621.31">lot of the ideas that we had for using</span> </p>
<p><span data-start="621.31" data-end="623.56">JSON to begin with they're too late to</span> <span data-start="623.56" data-end="626.07">the game for this but it's on here</span> <span data-start="626.07" data-end="628.9">another thing that we that did not make</span> <span data-start="628.9" data-end="630.28">this slide at something called tella</span> <span data-start="630.28" data-end="631.93">hash I don't know if anybody's heard of</span> <span data-start="631.93" data-end="633.64">this but I just found it last week it</span> <span data-start="633.64" data-end="635.74">didn't make my slide but I suggest that</span> <span data-start="635.74" data-end="637.21">you go and check it out because I just</span> <span data-start="637.21" data-end="638.56">think tella hash is doing something</span> <span data-start="638.56" data-end="641.65">extremely cool regardless of what you</span> <span data-start="641.65" data-end="644.17">think all of these folks are heading in</span> <span data-start="644.17" data-end="648.04">the same direction we tried to first Rob</span> <span data-start="648.04" data-end="649.78">these guys of every single good idea</span> <span data-start="649.78" data-end="652.06">they had to their names and and we say</span> <span data-start="652.06" data-end="653.65">thank you to everybody who worked on</span> <span data-start="653.65" data-end="655.48">those because we unashamedly stole your</span> <span data-start="655.48" data-end="659.29">ideas and and we also I don't want to to</span> <span data-start="659.29" data-end="660.52">give anybody the idea that the</span> <span data-start="660.52" data-end="662.62">relationship shown here are really</span> <span data-start="662.62" data-end="664.24">intended to illustrate the exact</span> <span data-start="664.24" data-end="666.46">relationships between scratch and all</span> <span data-start="666.46" data-end="669.01">these others I just want to give you an</span> <span data-start="669.01" data-end="671.29">idea the multitude of the different</span> <span data-start="671.29" data-end="673.66">groups working in this space and the</span> <span data-start="673.66" data-end="676.15">different approaches that they're taking</span> <span data-start="676.15" data-end="679.3">as far as i know we are the only group</span> <span data-start="679.3" data-end="681.22">that's taking the approach based on</span> <span data-start="681.22" data-end="683.65">semantic awareness all the other folks</span> <span data-start="683.65" data-end="686.11">are doing what we call faster trash</span> <span data-start="686.11" data-end="688.42">which just means we're trying to shove</span> <span data-start="688.42" data-end="690.19">the same headers the same web garbage</span> <span data-start="690.19" data-end="692.71">down on the user make it faster we call</span> <span data-start="692.71" data-end="694.63">this faster trash we don't think it's</span> <span data-start="694.63" data-end="699.28">satisfactory why UDP I had one person I</span> <span data-start="699.28" data-end="700.39">think said they didn't know what you</span> <span data-start="700.39" data-end="700.66">need</span> <span data-start="700.66" data-end="703.6">he is another protocol not similar to</span> </p>
<p><span data-start="703.6" data-end="707.019">TCP but has its own things about it that</span> <span data-start="707.019" data-end="709.029">make it worthwhile it's widely is for</span> <span data-start="709.029" data-end="710.41">all kinds of different things if you've</span> <span data-start="710.41" data-end="712">logged into your VPN lately you were</span> <span data-start="712" data-end="715.18">using UDP for that why did we choose it</span> <span data-start="715.18" data-end="719.649">need for speed for various reasons UDP</span> <span data-start="719.649" data-end="721.54">is just simply faster this is not</span> <span data-start="721.54" data-end="725.199">something that's unknown we need</span> <span data-start="725.199" data-end="727.329">flexible multi-point architectures the</span> <span data-start="727.329" data-end="729.819">little stick figure diagram I showed you</span> <span data-start="729.819" data-end="730.99">earlier with its three point</span> <span data-start="730.99" data-end="732.67">architectures very difficult in your</span> <span data-start="732.67" data-end="735.579">connection based TC tcp system doesn't</span> <span data-start="735.579" data-end="736.899">make a lot of sense because the</span> <span data-start="736.899" data-end="738.699">individual connections have no awareness</span> <span data-start="738.699" data-end="741.55">of each other small messages transient</span> <span data-start="741.55" data-end="743.949">data we didn't need consistent ordering</span> </p>
<p><span data-start="743.949" data-end="746.74">I mean seriously does it really matter</span> <span data-start="746.74" data-end="748.269">whether that beacon gets on your page</span> <span data-start="748.269" data-end="749.98">before they add wouldn't you rather have</span> <span data-start="749.98" data-end="753.459">the add first you don't care neither did</span> <span data-start="753.459" data-end="756.79">we we tried a different strategy instead</span> <span data-start="756.79" data-end="759.04">of trying to do a TCP does and make sure</span> <span data-start="759.04" data-end="761.11">that every packet arrives in time in</span> <span data-start="761.11" data-end="763.509">order we just said hey you didn't a kiss</span> <span data-start="763.509" data-end="764.769">fine we're just going to resend it's</span> <span data-start="764.769" data-end="767.019">cheap to resend resend don't transmit</span> <span data-start="767.019" data-end="768.88">there's already a significant amount of</span> <span data-start="768.88" data-end="770.709">prior art and we wanted it to be very</span> <span data-start="770.709" data-end="772.75">very simple which is not something you</span> <span data-start="772.75" data-end="777.1">can say about TCP so enough on that how</span> <span data-start="777.1" data-end="779.199">did we get there like I said originally</span> <span data-start="779.199" data-end="781.089">we started out we wrote our own UDP</span> <span data-start="781.089" data-end="783.61">libraries man this was really really a</span> <span data-start="783.61" data-end="785.23">bad idea because we learned a lot about</span> <span data-start="785.23" data-end="786.67">network programming but what we really</span> <span data-start="786.67" data-end="788.199">learned is that other people had been</span> <span data-start="788.199" data-end="790.18">there before us and they had already</span> <span data-start="790.18" data-end="792.459">done so much work and put in so much</span> <span data-start="792.459" data-end="793.75">effort that we were never going to catch</span> <span data-start="793.75" data-end="795.399">up no matter what we did and that we</span> <span data-start="795.399" data-end="797.579">were going to have to embrace and extend</span> <span data-start="797.579" data-end="800.439">use other people's stuff because on our</span> <span data-start="800.439" data-end="802.18">time schedules with our group we were</span> <span data-start="802.18" data-end="803.5">simply not going to reinvent everything</span> <span data-start="803.5" data-end="805.809">all by ourselves we ended up using</span> <span data-start="805.809" data-end="807.73">something called the UDT library</span> <span data-start="807.73" data-end="809.55">originally developed at urbana-champaign</span> <span data-start="809.55" data-end="812.17">won several sukham supercomputer</span> <span data-start="812.17" data-end="814.269">challenge awards for high performance</span> <span data-start="814.269" data-end="818.949">data transport it does a lot of cool</span> <span data-start="818.949" data-end="821.47">things connection semantics there's</span> <span data-start="821.47" data-end="824.11">hooks in there to rebuild TCP if you're</span> <span data-start="824.11" data-end="825.85">really dying to do that we avoided that</span> <span data-start="825.85" data-end="829.3">like the plague third generation code</span> <span data-start="829.3" data-end="832.18">works really well the API is similar to</span> <span data-start="832.18" data-end="834.22">the traditional bsd sockets any</span> <span data-start="834.22" data-end="835.81">and that sort of programming is not</span> <span data-start="835.81" data-end="838.21">going to feel terribly uncomfortable one</span> <span data-start="838.21" data-end="839.83">problem we had with it is that it's</span> <span data-start="839.83" data-end="842.68">almost too powerful too many features we</span> <span data-start="842.68" data-end="844">had to strip a lot of stuff out there</span> <span data-start="844" data-end="845.86">was data serialization already built</span> <span data-start="845.86" data-end="847.66">into it there was a number of things</span> <span data-start="847.66" data-end="849.16">that we did not need we just stripped</span> <span data-start="849.16" data-end="851.8">all that stuff out and in this pattern</span> <span data-start="851.8" data-end="853.99">of finding something that worked to do</span> <span data-start="853.99" data-end="855.97">what we wanted on the net stripping</span> <span data-start="855.97" data-end="858.28">everything out and then using the result</span> <span data-start="858.28" data-end="861.25">is pretty typical for scratch and and</span> <span data-start="861.25" data-end="863.31">you'll see that as we go through here</span> <span data-start="863.31" data-end="866.89">json Doug Crockford here I guess not so</span> <span data-start="866.89" data-end="868.33">i can probably get away with this slide</span> </p>
<p><span data-start="868.33" data-end="870.55">I was kind of hoping he was going to be</span> <span data-start="870.55" data-end="872.58">downstairs when I put the slide on</span> <span data-start="872.58" data-end="875.26">scratch uses JSON is its data layer</span> <span data-start="875.26" data-end="880.54">format why well Jeremy Johnson got up</span> <span data-start="880.54" data-end="882.46">here yesterday he said you know what the</span> <span data-start="882.46" data-end="883.57">reason we do this is because it's</span> <span data-start="883.57" data-end="885.66">JavaScript and Java Script is cool I</span> <span data-start="885.66" data-end="887.77">think that's pretty fair description</span> <span data-start="887.77" data-end="890.01">actually it's easy to encode and decode</span> <span data-start="890.01" data-end="892.12">available for all our platforms</span> <span data-start="892.12" data-end="894.13">gentleman before me Tom Fuchs was just</span> <span data-start="894.13" data-end="896.68">talking about iOS and how it deals with</span> <span data-start="896.68" data-end="901.06">the various JSON aspects very important</span> <span data-start="901.06" data-end="904">json is true to our ethical standard for</span> <span data-start="904" data-end="905.11">the web that everything should be</span> <span data-start="905.11" data-end="906.76">understandable by a human being and that</span> <span data-start="906.76" data-end="909.67">you don't require a machine to interpret</span> <span data-start="909.67" data-end="911.47">anything for you on the web this is a</span> <span data-start="911.47" data-end="914.38">serious ideal it's compact and</span> <span data-start="914.38" data-end="917.11">lightweight we love JSON how did we live</span> <span data-start="917.11" data-end="918.55">all those years without it I'm not</span> <span data-start="918.55" data-end="920.35">entirely sure but now that it's here</span> <span data-start="920.35" data-end="922.42">we're not going to would miss the chance</span> <span data-start="922.42" data-end="924.82">it just makes everything else a whole</span> <span data-start="924.82" data-end="926.68">lot easier I don't think this is an</span> <span data-start="926.68" data-end="928.87">audience that I need to belabor the fine</span> <span data-start="928.87" data-end="931.18">points of JSON about other audiences</span> <span data-start="931.18" data-end="932.71">they're like what's Jay saw and tell us</span> <span data-start="932.71" data-end="935.23">about it you guys are already sold I'm</span> <span data-start="935.23" data-end="937.03">standing up here preaching to the choir</span> <span data-start="937.03" data-end="941.41">and I'm actually enjoying it so we went</span> <span data-start="941.41" data-end="943.51">to do JSON and we went and did exactly</span> <span data-start="943.51" data-end="945.82">what we've done before we stole somebody</span> <span data-start="945.82" data-end="947.23">else's library stripped out the good</span> <span data-start="947.23" data-end="949.6">parts and left the rest in this case we</span> <span data-start="949.6" data-end="952.24">used an Apache project called Avro i'm</span> <span data-start="952.24" data-end="954.04">not sure if anybody's heard of it was</span> <span data-start="954.04" data-end="956.68">designed to do RPC data transport for</span> <span data-start="956.68" data-end="958.63">nodes on the grid Doug cutting if</span> <span data-start="958.63" data-end="960.34">anybody recognizes that name from the</span> <span data-start="960.34" data-end="962.41">hadoop world was one of the primary</span> <span data-start="962.41" data-end="965.8">committers for Avro that in itself</span> <span data-start="965.8" data-end="967.6">probably means it's pretty good code but</span> <span data-start="967.6" data-end="967.81">it</span> <span data-start="967.81" data-end="969.6">has some really interesting features</span> <span data-start="969.6" data-end="972.19">well managed current code base for an</span> </p>
<p><span data-start="972.19" data-end="973.96">Apache project I think everybody knows</span> <span data-start="973.96" data-end="975.46">that's pretty important a lot of</span> <span data-start="975.46" data-end="979.54">abandoned Apache projects out there avro</span> <span data-start="979.54" data-end="981.82">makes JSON a lot more robust by</span> <span data-start="981.82" data-end="984.22">extending the type system enforcing the</span> <span data-start="984.22" data-end="986.56">types with a well-defined grammar has</span> <span data-start="986.56" data-end="988.779">self contained schemas as metadata and</span> <span data-start="988.779" data-end="990.01">that's one of the cooler features I'm</span> <span data-start="990.01" data-end="991.66">going to save that feature to the end to</span> <span data-start="991.66" data-end="992.98">explain it in a little more detail</span> <span data-start="992.98" data-end="994.87">because we have something that almost</span> <span data-start="994.87" data-end="997.39">resembles an actual bit of code over</span> <span data-start="997.39" data-end="1000.21">here oh my god another thing that Avro</span> <span data-start="1000.21" data-end="1002.22">has is it's got hooks in for encryption</span> <span data-start="1002.22" data-end="1005.279">sasal lexical sorting oh my god we can</span> <span data-start="1005.279" data-end="1007.47">sort things on the web and JSON this is</span> <span data-start="1007.47" data-end="1009.9">absolutely required there's nothing you</span> <span data-start="1009.9" data-end="1012.33">can do without sorting has to be there</span> <span data-start="1012.33" data-end="1014.64">one of the best features was really the</span> <span data-start="1014.64" data-end="1017.45">ability to do the lexical sorting</span> <span data-start="1017.45" data-end="1020.46">against the Avro framework well there's</span> <span data-start="1020.46" data-end="1022.32">not a whole lot of cons it does exactly</span> <span data-start="1022.32" data-end="1024.78">what it's intended to do you know it was</span> <span data-start="1024.78" data-end="1027.42">very RPC centric it's not bad but it's</span> <span data-start="1027.42" data-end="1029.189">not what we wanted we stripped a lot of</span> <span data-start="1029.189" data-end="1030.99">that stuff out we did not use it to</span> <span data-start="1030.99" data-end="1033.6">compile code we did not use IDL to</span> <span data-start="1033.6" data-end="1035.459">define our data types although we might</span> <span data-start="1035.459" data-end="1038.49">at some point what we really wanted was</span> <span data-start="1038.49" data-end="1041.189">very robust JSON that could be generated</span> <span data-start="1041.189" data-end="1045.689">at scale and and that was really the the</span> <span data-start="1045.689" data-end="1047.52">key feature and a ver a framework</span> <span data-start="1047.52" data-end="1050.31">provided that for us just to hit on the</span> <span data-start="1050.31" data-end="1052.14">point about the self-contained schemas</span> <span data-start="1052.14" data-end="1055.14">as metadata this is a key idea in Avro</span> <span data-start="1055.14" data-end="1057.179">and and really a very key idea for</span> <span data-start="1057.179" data-end="1059.96">programming I think in order to consume</span> </p>
<p><span data-start="1059.96" data-end="1063.3">JSON produced in this way you don't need</span> <span data-start="1063.3" data-end="1066.03">anything on the client you don't need</span> <span data-start="1066.03" data-end="1068.4">fancy tools interpreters anything like</span> <span data-start="1068.4" data-end="1070.65">this because appended to the header of</span> <span data-start="1070.65" data-end="1074.52">your JSON Datagram so to speak you have</span> <span data-start="1074.52" data-end="1077.01">added the schema for the data that</span> <span data-start="1077.01" data-end="1079.14">you're sending it can be read on site</span> <span data-start="1079.14" data-end="1082.02">it's self-contained encapsulated with</span> <span data-start="1082.02" data-end="1084.21">its own metadata and you can see this</span> <span data-start="1084.21" data-end="1087.06">ridiculously bad little code segment</span> <span data-start="1087.06" data-end="1089.7">over here where I'm starting to model a</span> <span data-start="1089.7" data-end="1091.08">cookie and you can see that I've got</span> <span data-start="1091.08" data-end="1093.6">name and value like I said don't get me</span> <span data-start="1093.6" data-end="1096.03">started on cookies but but I wanted to</span> <span data-start="1096.03" data-end="1098.13">kind of give you a sense of how this</span> <span data-start="1098.13" data-end="1100.53">works to attach the schema for the data</span> <span data-start="1100.53" data-end="1101.25">at the began</span> <span data-start="1101.25" data-end="1103.74">of each Datagram because I think that</span> <span data-start="1103.74" data-end="1106.2">that is an extremely cool feature it</span> <span data-start="1106.2" data-end="1109.23">relieves us of having to do a lot of</span> <span data-start="1109.23" data-end="1111.84">client work where we would have to build</span> <span data-start="1111.84" data-end="1113.4">some sort of interpreter there'd have to</span> <span data-start="1113.4" data-end="1115.62">be some exchange of metadata you have to</span> <span data-start="1115.62" data-end="1117.06">understand what it is you're trying to</span> <span data-start="1117.06" data-end="1120.33">read JSON or otherwise and and we found</span> <span data-start="1120.33" data-end="1122.07">that this approach worked really well</span> <span data-start="1122.07" data-end="1124.47">for us you know I don't know if anybody</span> <span data-start="1124.47" data-end="1126.18">from this team is here but if so we</span> <span data-start="1126.18" data-end="1128.58">thank you we're looking out for your</span> <span data-start="1128.58" data-end="1132.69">stuff that's basically the part that I</span> <span data-start="1132.69" data-end="1134.82">wanted to talk about with respect to the</span> <span data-start="1134.82" data-end="1137.85">protocol design just quick time check</span> <span data-start="1137.85" data-end="1141">and make sure I know where I am and I</span> <span data-start="1141" data-end="1142.5">don't because my clock stopped but</span> <span data-start="1142.5" data-end="1146.4">that's okay let's talk about the results</span> <span data-start="1146.4" data-end="1149.09">let's talk about the current state the</span> <span data-start="1149.09" data-end="1152.07">just going back through the protocol</span> <span data-start="1152.07" data-end="1155.31">stack here really quickly for review UDP</span> <span data-start="1155.31" data-end="1157.32">odd the transport layer we're using this</span> </p>
<p><span data-start="1157.32" data-end="1159.78">UDP library for session management does</span> <span data-start="1159.78" data-end="1162.72">some concatenation connection semantics</span> <span data-start="1162.72" data-end="1165.78">stuff like that not as important as the</span> <span data-start="1165.78" data-end="1167.52">stuff above it and that's generally true</span> <span data-start="1167.52" data-end="1172.26">of any network stack in true OSI form</span> <span data-start="1172.26" data-end="1174.42">i'm using the OSI terminology wrongly</span> <span data-start="1174.42" data-end="1177.33">JSON is not a presentation framework</span> <span data-start="1177.33" data-end="1180.96">right nobody looks at it ray it is</span> <span data-start="1180.96" data-end="1182.97">actually a data exchange format but it</span> <span data-start="1182.97" data-end="1185.18">fits nicely here into the OSI stack</span> <span data-start="1185.18" data-end="1188.19">labeling it that way with the caveat</span> <span data-start="1188.19" data-end="1190.31">that we as we know it's not really a</span> <span data-start="1190.31" data-end="1192.77">presentation format but data exchange</span> <span data-start="1192.77" data-end="1196.23">still it fits into the stack nicely and</span> <span data-start="1196.23" data-end="1198.03">if we just sort of warped the OSI</span> <span data-start="1198.03" data-end="1199.47">terminology a little bit we can probably</span> <span data-start="1199.47" data-end="1201.24">get away with it I think everybody knows</span> <span data-start="1201.24" data-end="1204.12">what I'm trying to get at scratch Delta</span> <span data-start="1204.12" data-end="1206.85">is at the application level that's where</span> <span data-start="1206.85" data-end="1209.37">we want to talk about that's what's</span> <span data-start="1209.37" data-end="1211.35">really important about what's happening</span> <span data-start="1211.35" data-end="1216">here so special plea from the developer</span> <span data-start="1216" data-end="1218.1">of scratch I know that all the node</span> <span data-start="1218.1" data-end="1220.86">developers are in this room or at least</span> <span data-start="1220.86" data-end="1221.91">maybe not some of them might be</span> <span data-start="1221.91" data-end="1224.82">downstairs but guys I need your help on</span> <span data-start="1224.82" data-end="1226.68">this because there's nothing that's more</span> <span data-start="1226.68" data-end="1231.33">suited for using node then scratch great</span> <span data-start="1231.33" data-end="1234.12">scratch is about sending JavaScript</span> <span data-start="1234.12" data-end="1234.93">objects in</span> <span data-start="1234.93" data-end="1238.35">coated in JSON what do I need for that</span> <span data-start="1238.35" data-end="1241.77">other than node bruh no brainer this was</span> <span data-start="1241.77" data-end="1243.9">made for node node was invented for this</span> <span data-start="1243.9" data-end="1245.04">you guys didn't know that when you</span> <span data-start="1245.04" data-end="1249.33">invented node but now you know why can't</span> <span data-start="1249.33" data-end="1251.45">we use the existing node situation well</span> </p>
<p><span data-start="1251.45" data-end="1254.55">UDP support is still somewhat basic I</span> <span data-start="1254.55" data-end="1257.46">know that Paul kerna had written a a</span> <span data-start="1257.46" data-end="1261.27">little UDP transport module for for node</span> <span data-start="1261.27" data-end="1264.39">he presented that at node camp and his</span> <span data-start="1264.39" data-end="1267">very minimalist there's a there's a pcap</span> <span data-start="1267" data-end="1269.73">library Isaac schluter pointed this out</span> <span data-start="1269.73" data-end="1271.23">to me I was actually able to use his</span> <span data-start="1271.23" data-end="1272.82">little node package manager worked</span> <span data-start="1272.82" data-end="1274.89">really well and installed the pcap a</span> <span data-start="1274.89" data-end="1277.47">library and knowed it works I was able</span> <span data-start="1277.47" data-end="1280.08">to see packets coming across it doesn't</span> <span data-start="1280.08" data-end="1281.73">work very well I need your help node</span> <span data-start="1281.73" data-end="1285.63">guys really I do we expect that this</span> <span data-start="1285.63" data-end="1287.79">rather this situation is temporary hint</span> <span data-start="1287.79" data-end="1291.95">hint okay so enough for the special</span> <span data-start="1291.95" data-end="1295.22">pleading from the developer here the</span> <span data-start="1295.22" data-end="1298.35">let's talk about some test results so so</span> <span data-start="1298.35" data-end="1301.26">this isn't all blowin smoke right we've</span> <span data-start="1301.26" data-end="1303.24">actually gone and written some code and</span> <span data-start="1303.24" data-end="1305.22">made things work so let me tell you</span> <span data-start="1305.22" data-end="1306.87">about our test setup we wrote a little a</span> <span data-start="1306.87" data-end="1309.66">little app I'm sure that you can guess</span> <span data-start="1309.66" data-end="1312">we called it scratch pad there's a lot</span> <span data-start="1312" data-end="1314.04">of scratch puns I'm not going to</span> <span data-start="1314.04" data-end="1317.85">apologize for them first pass results</span> <span data-start="1317.85" data-end="1320.07">let me explain to you our test setup we</span> <span data-start="1320.07" data-end="1323.16">set up instances on AWS and five global</span> <span data-start="1323.16" data-end="1324.96">locations everybody knows you know</span> <span data-start="1324.96" data-end="1326.79">there's one in the east and the West in</span> <span data-start="1326.79" data-end="1330.18">the US Europe couple in Asia we set up a</span> <span data-start="1330.18" data-end="1334.02">circularbuffer test we created link</span> <span data-start="1334.02" data-end="1337.86">objects encapsulate a hypertext link the</span> <span data-start="1337.86" data-end="1340.08">part of HTML that actually is really</span> <span data-start="1340.08" data-end="1341.76">interesting and important or the links</span> <span data-start="1341.76" data-end="1344.31">so we created a thousand of those as</span> </p>
<p><span data-start="1344.31" data-end="1347.82">JSON scratch Delta objects and we patted</span> <span data-start="1347.82" data-end="1351.36">them out to the the same segment size as</span> <span data-start="1351.36" data-end="1353.64">we use for TCP because we wanted to do a</span> <span data-start="1353.64" data-end="1356.7">comparison tcpd UDP and see exactly what</span> <span data-start="1356.7" data-end="1358.23">was going to happen so we padded things</span> <span data-start="1358.23" data-end="1360.42">appropriately and and you can kind of</span> <span data-start="1360.42" data-end="1361.95">see some of the results here I don't</span> <span data-start="1361.95" data-end="1363.9">know if my pointers actually visible but</span> <span data-start="1363.9" data-end="1365.67">in the table here you can kind of see</span> <span data-start="1365.67" data-end="1368.519">that if we went to update a single link</span> <span data-start="1368.519" data-end="1370.019">globally so remember we've got a</span> <span data-start="1370.019" data-end="1371.58">thousand of these they're out there in a</span> <span data-start="1371.58" data-end="1373.919">buffer and we want to update a single</span> <span data-start="1373.919" data-end="1377.429">one globally all across the world how</span> <span data-start="1377.429" data-end="1379.919">long is that going to take us three</span> <span data-start="1379.919" data-end="1381.509">hundred and thirty eight milliseconds if</span> <span data-start="1381.509" data-end="1386.7">we use scratch 20 240 milliseconds if we</span> <span data-start="1386.7" data-end="1391.889">use HTTP / UDP that's huge when we went</span> <span data-start="1391.889" data-end="1395.369">to update all the links all 1000 of them</span> <span data-start="1395.369" data-end="1397.95">globally imagine how this is going to</span> <span data-start="1397.95" data-end="1399.869">work first you have to sort them first</span> <span data-start="1399.869" data-end="1401.759">have to find them then you've got to</span> <span data-start="1401.759" data-end="1404.579">modify the link to the new value we went</span> <span data-start="1404.579" data-end="1406.019">through that took us 12 hundred</span> <span data-start="1406.019" data-end="1409.259">milliseconds and actually that's right</span> <span data-start="1409.259" data-end="1411.719">we couldn't get the HTTP TCP data on</span> <span data-start="1411.719" data-end="1413.549">this one because it timed out every</span> <span data-start="1413.549" data-end="1420.059">single time the next test that we did oh</span> <span data-start="1420.059" data-end="1421.679">and the other thing I wanted to mention</span> <span data-start="1421.679" data-end="1424.32">here is that we were really concerned</span> <span data-start="1424.32" data-end="1427.619">about packet loss I don't know if any of</span> <span data-start="1427.619" data-end="1430.739">the the Google guys are here but one of</span> <span data-start="1430.739" data-end="1432.45">the things that they've found out with</span> <span data-start="1432.45" data-end="1433.859">their speedy protocol is it's very</span> <span data-start="1433.859" data-end="1436.109">subject to pack it was very sensitive to</span> <span data-start="1436.109" data-end="1438.539">packet loss we're obviously sensitive to</span> <span data-start="1438.539" data-end="1440.19">packet loss to we were really concerned</span> <span data-start="1440.19" data-end="1442.919">we did not see major differences in</span> <span data-start="1442.919" data-end="1444.989">packet loss now these numbers by the way</span> <span data-start="1444.989" data-end="1448.109">are for the only for the scratch demo we</span> <span data-start="1448.109" data-end="1449.94">did not get packet loss numbers for the</span> </p>
<p><span data-start="1449.94" data-end="1453.259">HTTP transport so the the point 11</span> <span data-start="1453.259" data-end="1455.94">number there is really only for the</span> <span data-start="1455.94" data-end="1457.499">scratch data but you can see the the</span> <span data-start="1457.499" data-end="1459.839">packet loss data is very low compared to</span> <span data-start="1459.839" data-end="1463.44">what we had expected to see so that's</span> <span data-start="1463.44" data-end="1465.299">you know that's it's an interesting test</span> <span data-start="1465.299" data-end="1467.249">we did a circularbuffer and we updated</span> <span data-start="1467.249" data-end="1469.799">some objects in memory you know it's</span> <span data-start="1469.799" data-end="1472.95">it's it's it's interesting in and the</span> <span data-start="1472.95" data-end="1475.649">results are okay more interesting still</span> <span data-start="1475.649" data-end="1477.239">not real still not you in front of a</span> <span data-start="1477.239" data-end="1478.679">real user but more interesting is that</span> <span data-start="1478.679" data-end="1480.989">we tested a real text buffer we took the</span> </p>
<p><span data-start="1480.989" data-end="1483.299">Yahoo home page and we send it around</span> <span data-start="1483.299" data-end="1485.519">into our circular buffer and we looked</span> <span data-start="1485.519" data-end="1488.039">at how fast we could send that around</span> <span data-start="1488.039" data-end="1490.019">and we looked at how fast we could do it</span> <span data-start="1490.019" data-end="1491.489">if we compressed it and we haven't</span> <span data-start="1491.489" data-end="1492.95">talked about compression but we will</span> <span data-start="1492.95" data-end="1495.269">compression is a first class object in</span> <span data-start="1495.269" data-end="1498.629">scratch everything is compressed accept</span> <span data-start="1498.629" data-end="1501.11">the things that are already compressed</span> <span data-start="1501.11" data-end="1504.5">so for sending the base file metro yahoo</span> <span data-start="1504.5" data-end="1508.34">homepage by gosh 217 seconds to get that</span> <span data-start="1508.34" data-end="1509.84">puppy around the world now speed of</span> <span data-start="1509.84" data-end="1512.33">light times around the world are not</span> <span data-start="1512.33" data-end="1515.33">that much less than that right same</span> <span data-start="1515.33" data-end="1520.7">order of magnitude the HTTP TCP method</span> <span data-start="1520.7" data-end="1523.67">three times as long I'm not sure I don't</span> <span data-start="1523.67" data-end="1524.9">think anybody's really going to be</span> <span data-start="1524.9" data-end="1528.11">surprised about that sorry I keep got to</span> <span data-start="1528.11" data-end="1529.82">stay in the light here I don't think</span> <span data-start="1529.82" data-end="1531.86">anybody's really surprised that it takes</span> <span data-start="1531.86" data-end="1534.02">three times as long with HTTP to do this</span> <span data-start="1534.02" data-end="1536.9">it is after all stateful or stateless</span> <span data-start="1536.9" data-end="1539.21">and and we know that because of the size</span> <span data-start="1539.21" data-end="1540.98">of this object is going to be several</span> <span data-start="1540.98" data-end="1543.26">packets in length 35 k is multiple</span> <span data-start="1543.26" data-end="1545.36">packets you can see in the graph here</span> <span data-start="1545.36" data-end="1547.64">you know and this is just visually</span> <span data-start="1547.64" data-end="1549.32">showing what's in the table here but in</span> <span data-start="1549.32" data-end="1551.36">the graph you can kind of see what the</span> <span data-start="1551.36" data-end="1555.88">result is 3x for scratch over HTTP tcp</span> <span data-start="1555.88" data-end="1558.95">know when I was practicing my talk today</span> </p>
<p><span data-start="1558.95" data-end="1561.2">I kinda I wondered whether I wanted to</span> <span data-start="1561.2" data-end="1563.21">make that previous statement because I</span> <span data-start="1563.21" data-end="1565.1">don't want you guys going until the New</span> <span data-start="1565.1" data-end="1566.69">York Times hey Yahoo's going to make the</span> <span data-start="1566.69" data-end="1569.27">web three times as fast it's not going</span> <span data-start="1569.27" data-end="1573.65">to happen a experimental lab tests in in</span> <span data-start="1573.65" data-end="1576.169">in a closed environment there's no real</span> <span data-start="1576.169" data-end="1578.21">relationship to what actually happens in</span> <span data-start="1578.21" data-end="1579.919">front of users especially on the</span> </p>
<p><span data-start="1579.919" data-end="1582.02">Internet we all know that so I don't</span> <span data-start="1582.02" data-end="1583.49">want everybody to leave here saying</span> <span data-start="1583.49" data-end="1585.679">Yahoo's going to make the the net three</span> <span data-start="1585.679" data-end="1588.38">times faster with scratch we do think</span> <span data-start="1588.38" data-end="1590.99">that these results have some promise and</span> <span data-start="1590.99" data-end="1592.58">that they're showing us something very</span> <span data-start="1592.58" data-end="1594.5">very interesting about our ability to</span> <span data-start="1594.5" data-end="1600.62">use UDP to be TCPS performance so this</span> <span data-start="1600.62" data-end="1602.57">is basically our first set of test</span> <span data-start="1602.57" data-end="1604.85">results this was actually pretty much</span> <span data-start="1604.85" data-end="1607.58">complete by mid-february at that point I</span> <span data-start="1607.58" data-end="1609.08">got called off to do some other things</span> <span data-start="1609.08" data-end="1613.309">and and this is really most of the test</span> <span data-start="1613.309" data-end="1615.35">results I have because I was going to</span> <span data-start="1615.35" data-end="1618.14">show a demo really I was and and the</span> <span data-start="1618.14" data-end="1620.21">demo has been scratched I ran out of</span> <span data-start="1620.21" data-end="1623.929">time and sleep I apologize so so no demo</span> <span data-start="1623.929" data-end="1626.27">this time but I did talk to Chris before</span> </p>
<p><span data-start="1626.27" data-end="1629.9">I came up here to talk and I made him a</span> <span data-start="1629.9" data-end="1631.01">deal i said i'm gonna get up here and</span> <span data-start="1631.01" data-end="1633.26">i'm gonna give the coolest talk but you</span> <span data-start="1633.26" data-end="1634.64">got to invite me back next year</span> <span data-start="1634.64" data-end="1636.86">so that I can show the results of all</span> <span data-start="1636.86" data-end="1638.33">the work that we've done because I</span> <span data-start="1638.33" data-end="1640.34">really don't have that much this time</span> <span data-start="1640.34" data-end="1642.89">we're talking about the design we're</span> <span data-start="1642.89" data-end="1645.44">still in the design state like I said</span> </p>
<p><span data-start="1645.44" data-end="1647.15">I'm not editing code and VI for the</span> <span data-start="1647.15" data-end="1649.88">presentation and I do apologize for not</span> <span data-start="1649.88" data-end="1654.23">having the demo one of the questions it</span> <span data-start="1654.23" data-end="1656.48">often comes to us when we do this is you</span> <span data-start="1656.48" data-end="1658.94">know as scratch TCP or scratch Network</span> <span data-start="1658.94" data-end="1661.46">friendly in TCP we have this idea about</span> <span data-start="1661.46" data-end="1663.83">TCP friendliness you shouldn't flood the</span> <span data-start="1663.83" data-end="1665.3">network you shouldn't congest the</span> <span data-start="1665.3" data-end="1667.61">network in favor of your traffic over</span> <span data-start="1667.61" data-end="1669.47">somebody else's traffic you shouldn't</span> <span data-start="1669.47" data-end="1671.99">send syn floods to the server obvious</span> <span data-start="1671.99" data-end="1673.79">things like this you need to be a good</span> <span data-start="1673.79" data-end="1676.16">citizen on the internet there's no such</span> <span data-start="1676.16" data-end="1678.44">concept really for UDP nobody has ever</span> <span data-start="1678.44" data-end="1680.72">defined I think UDP friendliness but we</span> <span data-start="1680.72" data-end="1685.04">want to make sure that scratch really is</span> </p>
<p><span data-start="1685.04" data-end="1686.9">Network friendly and there is some</span> <span data-start="1686.9" data-end="1689.27">interaction between TCP and UDP I don't</span> <span data-start="1689.27" data-end="1690.86">want to get into it because it gets into</span> <span data-start="1690.86" data-end="1692.96">network hairiness they'd sort of off</span> <span data-start="1692.96" data-end="1695.45">topic but there is some some interaction</span> <span data-start="1695.45" data-end="1698">this question comes up Daniel if you go</span> <span data-start="1698" data-end="1700.31">and fled the internet with UDP packets</span> <span data-start="1700.31" data-end="1702.53">from scratch what about those folks that</span> <span data-start="1702.53" data-end="1704.6">are still using TCP or need some other</span> <span data-start="1704.6" data-end="1706.64">protocol are you flooding them are you</span> <span data-start="1706.64" data-end="1708.26">blocking them are you congesting them</span> <span data-start="1708.26" data-end="1710.33">making their life more miserable in</span> <span data-start="1710.33" data-end="1712.88">order to make your life better we don't</span> <span data-start="1712.88" data-end="1715.76">want to do that our answer to the</span> <span data-start="1715.76" data-end="1717.23">question of whether scratches Network</span> <span data-start="1717.23" data-end="1720.89">friendly is yes and here's why we send</span> <span data-start="1720.89" data-end="1722.96">fewer packets more updates remember we</span> <span data-start="1722.96" data-end="1725.57">only send the headers once rights and we</span> <span data-start="1725.57" data-end="1727.93">only change send an update once up</span> <span data-start="1727.93" data-end="1729.95">something actually changes and it's</span> <span data-start="1729.95" data-end="1732.95">worth actually making an update we do</span> <span data-start="1732.95" data-end="1735.08">throttling or we can at least based on</span> <span data-start="1735.08" data-end="1738.08">the MTU and the rtt I think the the</span> <span data-start="1738.08" data-end="1740.24">initial when I wrote the initial UDP</span> <span data-start="1740.24" data-end="1741.92">library I've actually based some</span> <span data-start="1741.92" data-end="1744.35">throttling on the old jacobsen algorithm</span> <span data-start="1744.35" data-end="1748.79">right with this 778 coefficients and so</span> <span data-start="1748.79" data-end="1751.67">forth because the metadata and scratch</span> <span data-start="1751.67" data-end="1755.45">is a first class object it improves the</span> <span data-start="1755.45" data-end="1757.16">way that we interact with the network</span> <span data-start="1757.16" data-end="1760.46">because it plays a significant role in</span> <span data-start="1760.46" data-end="1762.8">the data that you receive or don't</span> <span data-start="1762.8" data-end="1764.78">receive we don't send you data that your</span> <span data-start="1764.78" data-end="1767.06">device cannot handle we don't send you</span> <span data-start="1767.06" data-end="1768.29">data that's already been</span> <span data-start="1768.29" data-end="1770.42">sent to your device we don't intend to</span> <span data-start="1770.42" data-end="1772.31">send you any superfluous data at all</span> <span data-start="1772.31" data-end="1775.04">because we know you we're managing your</span> <span data-start="1775.04" data-end="1776.78">connection we're managing your state</span> <span data-start="1776.78" data-end="1779.45">there's not a lot of repeated redundancy</span> <span data-start="1779.45" data-end="1781.67">that we need to go through metadata is a</span> <span data-start="1781.67" data-end="1783.77">first class object improves the web</span> <span data-start="1783.77" data-end="1787.64">performance for everybody we'll defined</span> <span data-start="1787.64" data-end="1789.44">endpoints and connection establishment</span> <span data-start="1789.44" data-end="1792.32">this helps a lot with it would Network</span> <span data-start="1792.32" data-end="1793.64">friendliness as well one of the things</span> <span data-start="1793.64" data-end="1795.62">about UDP packets is you can't really</span> <span data-start="1795.62" data-end="1797.21">tell what the heck is up with them I</span> <span data-start="1797.21" data-end="1800.09">mean unlike TCP they really have a port</span> <span data-start="1800.09" data-end="1802.76">in an IP number and maybe that's it if</span> <span data-start="1802.76" data-end="1805.55">we define additional semantics around</span> <span data-start="1805.55" data-end="1807.14">the connections we can make things much</span> <span data-start="1807.14" data-end="1809.09">more stable we can make it better for</span> <span data-start="1809.09" data-end="1811.55">everybody on the Internet we handle</span> <span data-start="1811.55" data-end="1814.28">smaller MTU size it's one of our goals</span> <span data-start="1814.28" data-end="1816.46">here was to be able to serve the web</span> <span data-start="1816.46" data-end="1819.2">globally anybody who's tried to serve</span> <span data-start="1819.2" data-end="1821.48">web pages into Indonesia into Singapore</span> <span data-start="1821.48" data-end="1823.55">and Australia knows that there's just</span> <span data-start="1823.55" data-end="1824.99">serious difficulties with the</span> <span data-start="1824.99" data-end="1827.33">infrastructure with sending packets</span> <span data-start="1827.33" data-end="1829.43">under the ocean or down through the</span> <span data-start="1829.43" data-end="1833.12">satellite over the cable one of the</span> <span data-start="1833.12" data-end="1834.53">effects of that is often that the</span> <span data-start="1834.53" data-end="1836.27">packets get shrunk down to the smallest</span> <span data-start="1836.27" data-end="1838.04">common denominator that can make it from</span> </p>
<p><span data-start="1838.04" data-end="1841.67">A to B and and of course this makes</span> <span data-start="1841.67" data-end="1843.38">everything a bit slower because things</span> <span data-start="1843.38" data-end="1844.64">have to be disassembled and then</span> <span data-start="1844.64" data-end="1846.56">reassembled at the end one of the goals</span> <span data-start="1846.56" data-end="1849.8">we had for scratch was to minimize that</span> <span data-start="1849.8" data-end="1851.92">make sure that we were able to handle</span> <span data-start="1851.92" data-end="1856.07">gracefully this global traffic the</span> <span data-start="1856.07" data-end="1858.2">nearest node potential to reduce the</span> <span data-start="1858.2" data-end="1862.97">payloads is a huge win what if what if</span> <span data-start="1862.97" data-end="1864.98">we manage the internet more like a p2p</span> <span data-start="1864.98" data-end="1868.31">network and and you know maybe the yahoo</span> <span data-start="1868.31" data-end="1870.86">logos and brendan's cash and you know I</span> <span data-start="1870.86" data-end="1872.27">don't have to go back to the yahoo</span> <span data-start="1872.27" data-end="1874.76">server for that I could just go into</span> <span data-start="1874.76" data-end="1876.83">someone else's cash and grab that logo I</span> <span data-start="1876.83" data-end="1880.04">mean the TTL on it hasn't expired why</span> <span data-start="1880.04" data-end="1882.35">not certain amount of nearest node</span> <span data-start="1882.35" data-end="1884.87">potential involved in scratch helps us</span> <span data-start="1884.87" data-end="1888.05">reduce the overall overhead make things</span> <span data-start="1888.05" data-end="1892.49">a lot more network friendly just a</span> <span data-start="1892.49" data-end="1893.99">little bit of talk about where we go</span> <span data-start="1893.99" data-end="1895.76">from here obviously we're in the design</span> <span data-start="1895.76" data-end="1898.4">stage for scratch first thing we want to</span> <span data-start="1898.4" data-end="1900.65">do is we want to get you guys to tell us</span> <span data-start="1900.65" data-end="1901.789">not that we're crazy</span> <span data-start="1901.789" data-end="1904.429">we already knew that right don't tell us</span> <span data-start="1904.429" data-end="1907.249">we're crazy tell us how you can help us</span> <span data-start="1907.249" data-end="1909.889">improve it tell us what we're doing</span> <span data-start="1909.889" data-end="1912.59">wrong what we've missed undoubtedly</span> <span data-start="1912.59" data-end="1915.47">missed a number of things here some of</span> <span data-start="1915.47" data-end="1917.119">the must-haves going forward that we</span> <span data-start="1917.119" data-end="1918.649">really need that are not there yet</span> <span data-start="1918.649" data-end="1920.899">better semantics currently we really</span> <span data-start="1920.899" data-end="1925.22">only have three of these schemas for 144</span> </p>
<p><span data-start="1925.22" data-end="1927.649">HTTP headers obviously the cookie object</span> <span data-start="1927.649" data-end="1930.95">descends from that one for the URIs this</span> <span data-start="1930.95" data-end="1933.2">is the one we use for the the link def</span> <span data-start="1933.2" data-end="1937.159">test with the circular buffers another</span> <span data-start="1937.159" data-end="1938.859">thing that we really need resource</span> <span data-start="1938.859" data-end="1940.97">encapsulation obviously a big part of</span> <span data-start="1940.97" data-end="1943.429">the web are these big blind binary blobs</span> <span data-start="1943.429" data-end="1944.929">we've got to find a better way to</span> <span data-start="1944.929" data-end="1947.84">encapsulate those so that we only send</span> <span data-start="1947.84" data-end="1950.149">those the minimum number of times across</span> <span data-start="1950.149" data-end="1952.849">the minimum distance once again if we</span> <span data-start="1952.849" data-end="1954.799">can dynamically update the IP of the</span> <span data-start="1954.799" data-end="1956.899">nearest copy if we can dynamically</span> <span data-start="1956.899" data-end="1959.059">update the time to live for that object</span> <span data-start="1959.059" data-end="1962.45">we can manage the users cash in a much</span> <span data-start="1962.45" data-end="1964.879">smarter much more dynamic way that</span> <span data-start="1964.879" data-end="1966.71">doesn't involve sending the whole earth</span> <span data-start="1966.71" data-end="1970.039">over the internet every day encryption</span> <span data-start="1970.039" data-end="1971.84">is another thing obviously that we want</span> <span data-start="1971.84" data-end="1975.309">to get at sasol ssl/tls all these</span> <span data-start="1975.309" data-end="1978.979">acronyms almost impossible to make any</span> <span data-start="1978.979" data-end="1981.649">of this stuff work over a proxy / UDP we</span> <span data-start="1981.649" data-end="1983.919">have simply not solve this problem yet</span> <span data-start="1983.919" data-end="1986.479">don't know that we will we may have to</span> <span data-start="1986.479" data-end="1988.489">find a different way to handle security</span> <span data-start="1988.489" data-end="1991.609">but we want security to be a first-class</span> <span data-start="1991.609" data-end="1993.799">object in our system as distinct from</span> <span data-start="1993.799" data-end="1997.009">privacy which is also a first-class</span> <span data-start="1997.009" data-end="2002.32">object in our system compression so so</span> <span data-start="2002.32" data-end="2003.94">compression is definitely one of the</span> <span data-start="2003.94" data-end="2007.09">things that we want for scratch it needs</span> <span data-start="2007.09" data-end="2009.34">to be there if you look at the data for</span> <span data-start="2009.34" data-end="2011.71">uncompressed versus compressed data it's</span> <span data-start="2011.71" data-end="2013.029">pretty obvious things have to be</span> <span data-start="2013.029" data-end="2016.029">compressed well you know gzip is</span> <span data-start="2016.029" data-end="2018.309">everybody's favorite devices supported</span> <span data-start="2018.309" data-end="2019.96">everywhere one thing we found though is</span> <span data-start="2019.96" data-end="2022.899">that in a lot of cases mobile devices</span> <span data-start="2022.899" data-end="2025.09">not the really fancy high powered ones</span> <span data-start="2025.09" data-end="2026.859">that we all know and love in this room</span> <span data-start="2026.859" data-end="2028.929">but a lot of the others have some</span> <span data-start="2028.929" data-end="2030.909">difficulties they struggle with gzip</span> <span data-start="2030.909" data-end="2034.21">gzip is a computationally intensive</span> <span data-start="2034.21" data-end="2035.29">algorithm</span> <span data-start="2035.29" data-end="2037.66">and sometimes the the decompression of</span> <span data-start="2037.66" data-end="2039.28">the data as it arrives on the device can</span> <span data-start="2039.28" data-end="2040.84">actually take longer than if you send it</span> <span data-start="2040.84" data-end="2043.51">uncompressed we've seen cases where this</span> <span data-start="2043.51" data-end="2045.79">has happened so we've looked at some</span> <span data-start="2045.79" data-end="2048.28">alternatives for compression one of the</span> <span data-start="2048.28" data-end="2050.11">ones we looked at in particular was</span> <span data-start="2050.11" data-end="2052.24">called bite pair compression I don't</span> <span data-start="2052.24" data-end="2054.64">know if anybody's actually heard of it</span> <span data-start="2054.64" data-end="2056.59">originally sort of showed up I think on</span> <span data-start="2056.59" data-end="2059.71">the modern radar screen through a dr.</span> </p>
<p><span data-start="2059.71" data-end="2062.2">Dobbs article in 1992 I'm not sure how</span> <span data-start="2062.2" data-end="2065.07">modern that is I might be dating myself</span> <span data-start="2065.07" data-end="2070.33">anybody here born in 1992 maybe anyway</span> <span data-start="2070.33" data-end="2072.34">bite pair compression came out man it</span> <span data-start="2072.34" data-end="2073.9">was completely lost one of the guys at</span> <span data-start="2073.9" data-end="2075.97">Stack Overflow much much more modern</span> <span data-start="2075.97" data-end="2077.98">than that actually went rewrote the code</span> <span data-start="2077.98" data-end="2079.21">in the modern world and it actually</span> <span data-start="2079.21" data-end="2081.19">works we've been experimenting with the</span> <span data-start="2081.19" data-end="2083.32">byte pair compression it takes a lot</span> <span data-start="2083.32" data-end="2085.66">longer to compress a file using bite</span> <span data-start="2085.66" data-end="2088.24">pair compression the decompression phase</span> <span data-start="2088.24" data-end="2090.88">is much faster much less computationally</span> <span data-start="2090.88" data-end="2093.37">intensive if you think about the the</span> <span data-start="2093.37" data-end="2095.38">nature of compression you're going to</span> <span data-start="2095.38" data-end="2097.39">compress something only once uncompress</span> <span data-start="2097.39" data-end="2100.63">it many times if you want to have the</span> <span data-start="2100.63" data-end="2103.24">computational intensity or the</span> <span data-start="2103.24" data-end="2105.49">computational cycles distributed equity</span> <span data-start="2105.49" data-end="2108.54">equitably much better with the byte pair</span> <span data-start="2108.54" data-end="2110.95">exchanged then perhaps with some other</span> <span data-start="2110.95" data-end="2113.8">compression mechanisms we haven't made a</span> <span data-start="2113.8" data-end="2115.96">design decision about compression for</span> <span data-start="2115.96" data-end="2117.79">scratch yet we may end up with bite pair</span> <span data-start="2117.79" data-end="2120.07">compression we may end up sticking with</span> <span data-start="2120.07" data-end="2122.89">gzip I mean it does work it's not you</span> <span data-start="2122.89" data-end="2125.23">know not the end of the world if we go</span> <span data-start="2125.23" data-end="2127.39">that way the mobile devices will catch</span> <span data-start="2127.39" data-end="2130.48">up there swiftly doing that obviously</span> <span data-start="2130.48" data-end="2132.1">when another one of the must-haves i</span> <span data-start="2132.1" data-end="2133.9">know i said there wouldn't be any more</span> <span data-start="2133.9" data-end="2135.61">special pleading earlier but here's one</span> <span data-start="2135.61" data-end="2137.11">last little bit of special pleading node</span> <span data-start="2137.11" data-end="2144.7">guys please back to the theme of the</span> <span data-start="2144.7" data-end="2148.8">talk smarter and faster the same things</span> <span data-start="2148.8" data-end="2153.13">we went and found out in doing this that</span> <span data-start="2153.13" data-end="2156.46">the whole notion of shoving data down to</span> <span data-start="2156.46" data-end="2162.31">the user did not work with the current</span> <span data-start="2162.31" data-end="2163.84">environment or the current web</span> <span data-start="2163.84" data-end="2166.3">technologies as they are too many</span> <span data-start="2166.3" data-end="2167.98">redundant headers too many redundant</span> <span data-start="2167.98" data-end="2169.27">style ships</span> <span data-start="2169.27" data-end="2172.39">stylesheets too many scripts being sent</span> <span data-start="2172.39" data-end="2174.73">over the wire I know anybody that's ever</span> <span data-start="2174.73" data-end="2177.85">used Yui Yui has every feature possible</span> <span data-start="2177.85" data-end="2179.2">but it's often a very heavy weight</span> <span data-start="2179.2" data-end="2183.04">package it's a good example of what we</span> <span data-start="2183.04" data-end="2186.28">want to do in terms of reducing the</span> <span data-start="2186.28" data-end="2190.06">volume of bytes sent over the wire the</span> <span data-start="2190.06" data-end="2192.01">theme of the talk in order to make the</span> <span data-start="2192.01" data-end="2193.57">web go faster we've got to make it</span> <span data-start="2193.57" data-end="2197.17">smarter we can't just do the faster</span> <span data-start="2197.17" data-end="2199.06">trash type model where we're taking the</span> <span data-start="2199.06" data-end="2202.42">same document the same HTML same headers</span> <span data-start="2202.42" data-end="2205.24">cookies all that nonsense and shoving it</span> <span data-start="2205.24" data-end="2207.19">down to the user this is what we like I</span> <span data-start="2207.19" data-end="2210.34">said what we call faster trash not the</span> <span data-start="2210.34" data-end="2213.1">way we're intending to go with scratch</span> <span data-start="2213.1" data-end="2219.61">scratch wants to be smart just a few</span> <span data-start="2219.61" data-end="2221.41">science fiction ideas what could we do</span> <span data-start="2221.41" data-end="2223.81">with scratch provided of course that my</span> <span data-start="2223.81" data-end="2225.85">team actually gets it to work and that</span> <span data-start="2225.85" data-end="2228.61">we solve some of these issues and and</span> <span data-start="2228.61" data-end="2230.17">the technology is working what are some</span> <span data-start="2230.17" data-end="2231.58">of the cooler things that we could do</span> <span data-start="2231.58" data-end="2235.21">with it so so we can improve hypertext I</span> <span data-start="2235.21" data-end="2237.1">don't know if anybody has really thought</span> <span data-start="2237.1" data-end="2239.41">about it but hypertext has not changed</span> <span data-start="2239.41" data-end="2243.1">since tim wrote the HTML spec back in</span> <span data-start="2243.1" data-end="2245.53">the day it doesn't really resemble a lot</span> <span data-start="2245.53" data-end="2247.6">of the work that douglas engelbart did</span> <span data-start="2247.6" data-end="2250.06">in inventing hypertext back in the 60s</span> <span data-start="2250.06" data-end="2252.07">if you go read the vision for hypertext</span> <span data-start="2252.07" data-end="2253.69">then and you compare it to the pathetic</span> <span data-start="2253.69" data-end="2255.49">little single-ended links we have now</span> <span data-start="2255.49" data-end="2258.52">you'll be disappointed the web as far as</span> <span data-start="2258.52" data-end="2261.64">hypertext goes very disappointing could</span> <span data-start="2261.64" data-end="2263.49">we fix that maybe we could just scratch</span> <span data-start="2263.49" data-end="2265.78">to do something like that we can make</span> <span data-start="2265.78" data-end="2268.87">links sofa where self-healing anybody</span> <span data-start="2268.87" data-end="2270.55">think 404s or a little past their</span> <span data-start="2270.55" data-end="2273.04">sell-by so always seemed a little crazy</span> <span data-start="2273.04" data-end="2276.09">to me that things break like that the</span> <span data-start="2276.09" data-end="2279.01">yes I was on the excellent group back in</span> <span data-start="2279.01" data-end="2282.31">the day we want to make links multi-home</span> <span data-start="2282.31" data-end="2283.78">there's no reason that the link can only</span> <span data-start="2283.78" data-end="2286.09">point to a single point there's no</span> <span data-start="2286.09" data-end="2287.44">reason for that doesn't make a lot of</span> <span data-start="2287.44" data-end="2289.84">sense want to make it context-aware the</span> <span data-start="2289.84" data-end="2291.58">link might point to different places</span> <span data-start="2291.58" data-end="2294.1">depending on who you in particular are</span> <span data-start="2294.1" data-end="2298.12">if we know something about you and you</span> <span data-start="2298.12" data-end="2299.65">know we know that for instance your</span> </p>
<p><span data-start="2299.65" data-end="2301.78">JavaScript programmer and you write in</span> <span data-start="2301.78" data-end="2302.43">you know</span> <span data-start="2302.43" data-end="2303.569">so you're going to search for something</span> <span data-start="2303.569" data-end="2306.15">along the lines of programming we might</span> <span data-start="2306.15" data-end="2308.069">send you to JavaScript resources or</span> <span data-start="2308.069" data-end="2310.589">provide multiple links to JavaScript</span> <span data-start="2310.589" data-end="2313.589">resources and order in a way that makes</span> <span data-start="2313.589" data-end="2316.29">sense based on what we know about you we</span> <span data-start="2316.29" data-end="2318.78">could make hypertext a heck of a lot</span> <span data-start="2318.78" data-end="2321.839">better Pierre caching the browser's</span> <span data-start="2321.839" data-end="2324.9">cache is sort of a disaster it's a bit</span> <span data-start="2324.9" data-end="2327.51">of a nightmare we stick stuff in there</span> <span data-start="2327.51" data-end="2329.49">god knows what really happens to it</span> <span data-start="2329.49" data-end="2332.76">we've added all these clue ght p headers</span> <span data-start="2332.76" data-end="2335.67">to try and get this max age and friends</span> <span data-start="2335.67" data-end="2338.579">you know it works and it works fairly</span> <span data-start="2338.579" data-end="2340.2">well I don't want to criticize it too</span> <span data-start="2340.2" data-end="2342.48">much but still it's kludgy it's a bolt</span> <span data-start="2342.48" data-end="2345.18">on that we added afterwards maybe we</span> <span data-start="2345.18" data-end="2347.79">could think about managing the cash in a</span> <span data-start="2347.79" data-end="2352.619">stateful way all of Yahoo at least all</span> <span data-start="2352.619" data-end="2354.329">the standard assets that go on most</span> <span data-start="2354.329" data-end="2357.39">people's pages about forty megabytes we</span> <span data-start="2357.39" data-end="2359.16">could probably just pre load this stuff</span> <span data-start="2359.16" data-end="2360.72">in your browser and you would like</span> <span data-start="2360.72" data-end="2362.79">surfing Yahoo a heck of a lot better if</span> <span data-start="2362.79" data-end="2365.13">we could manage that using scratch and</span> <span data-start="2365.13" data-end="2366.96">do these little micro updates may be in</span> <span data-start="2366.96" data-end="2369">a p2p fashion maybe just directly from</span> <span data-start="2369" data-end="2371.579">the control channel doesn't really</span> <span data-start="2371.579" data-end="2373.68">matter maybe we could make things a lot</span> <span data-start="2373.68" data-end="2377.04">better that way another idea that one of</span> <span data-start="2377.04" data-end="2379.319">the developers came up with is and this</span> <span data-start="2379.319" data-end="2380.79">guy's really big on this idea is the</span> </p>
<p><span data-start="2380.79" data-end="2383.46">Internet of Things this is the the idea</span> <span data-start="2383.46" data-end="2385.859">where you're walking past the pizza shop</span> <span data-start="2385.859" data-end="2388.44">and they blast a pizza coupon on to your</span> <span data-start="2388.44" data-end="2390.63">mobile device and you go into their shop</span> <span data-start="2390.63" data-end="2392.88">and spend some money I know that this</span> <span data-start="2392.88" data-end="2394.859">use case has been batted around for</span> <span data-start="2394.859" data-end="2396.809">years I think there's some places where</span> <span data-start="2396.809" data-end="2398.309">they sort of kind of maybe have it</span> <span data-start="2398.309" data-end="2400.38">working with some are fed and somewhat</span> <span data-start="2400.38" data-end="2402.96">not one of my developers popped up he</span> <span data-start="2402.96" data-end="2405.21">says hey what if all those little</span> <span data-start="2405.21" data-end="2407.339">objects were just emitting little bits</span> <span data-start="2407.339" data-end="2409.049">of JSON that described what they were</span> <span data-start="2409.049" data-end="2410.97">and what they were up to then you could</span> <span data-start="2410.97" data-end="2413.609">sort of have this background UDP sizzle</span> <span data-start="2413.609" data-end="2415.38">of things as you're walking along and</span> <span data-start="2415.38" data-end="2418.17">your device could just read that data</span> <span data-start="2418.17" data-end="2419.67">and know what to do with it in some</span> <span data-start="2419.67" data-end="2421.619">rational way because hey we sent the</span> <span data-start="2421.619" data-end="2423.77">schema along the beginning of the header</span> <span data-start="2423.77" data-end="2426.18">there's a number of different crazy</span> <span data-start="2426.18" data-end="2428.22">things that we could do these are some</span> <span data-start="2428.22" data-end="2431.45">science fiction level ideas I admit that</span> <span data-start="2431.45" data-end="2433.74">large part of what our research team</span> <span data-start="2433.74" data-end="2436.2">does is trying to think about how</span> <span data-start="2436.2" data-end="2438.02">make it better in the future not just</span> <span data-start="2438.02" data-end="2440.339">obsessing about the micro seconds in the</span> <span data-start="2440.339" data-end="2443.82">milliseconds today performance it's</span> <span data-start="2443.82" data-end="2445.95">really really really important and to</span> <span data-start="2445.95" data-end="2448.17">make the web faster we've got to make</span> <span data-start="2448.17" data-end="2451.5">its murder so that's really all I have</span> <span data-start="2451.5" data-end="2454.68">to say thank you for listening I hope</span> <span data-start="2454.68" data-end="2456.78">that this made some sort of sense to you</span> <span data-start="2456.78" data-end="2459.8">and I'll be happy to take some questions</span> <span data-start="2459.8" data-end="2462.3">just before I do my email address is</span> <span data-start="2462.3" data-end="2464.79">here on the slides also my my Twitter</span> <span data-start="2464.79" data-end="2467.31">tag and and I'd like to have somebody</span> <span data-start="2467.31" data-end="2469.5">see if they could red laser that QR code</span> <span data-start="2469.5" data-end="2471.45">on my slides I was just curious as to</span> <span data-start="2471.45" data-end="2473.369">whether you could actually red laser a</span> </p>
<p><span data-start="2473.369" data-end="2475.619">QR code from somebody's slides don't</span> <span data-start="2475.619" data-end="2477.06">worry doesn't go to any porn site or</span> <span data-start="2477.06" data-end="2478.26">anything just goes to my twitter feed</span> <span data-start="2478.26" data-end="2480.93">but I'm just curious can you actually</span> <span data-start="2480.93" data-end="2484.98">cure red laser a QR code from a slide on</span> <span data-start="2484.98" data-end="2486.93">the screen at a conference somebody try</span> <span data-start="2486.93" data-end="2490.92">it let me know all right with that thing</span> <span data-start="2490.92" data-end="2493.17">said let me take some questions here's a</span> <span data-start="2493.17" data-end="2494.49">gentleman in the back I can't really</span> <span data-start="2494.49" data-end="2496.589">make you out there sir but I'll be happy</span> <span data-start="2496.589" data-end="2501.73">to answer your question if i can</span> <span data-start="2501.74" data-end="2504.3">actually there's not this is the world</span> <span data-start="2504.3" data-end="2506.04">premiere for scratch but there will be</span> <span data-start="2506.04" data-end="2510.18">stuff out by monday the we wanted to to</span> <span data-start="2510.18" data-end="2511.71">come up here and talk to you about this</span> <span data-start="2511.71" data-end="2514.319">first and and we kind of wanted to to</span> <span data-start="2514.319" data-end="2515.64">make this the world premiere for this</span> <span data-start="2515.64" data-end="2518.76">idea not a whole lot out there you're</span> <span data-start="2518.76" data-end="2520.8">the first folks to see it you get the</span> <span data-start="2520.8" data-end="2522.99">first chance to criticize on it there</span> <span data-start="2522.99" data-end="2524.7">will be some code and some other stuff</span> <span data-start="2524.7" data-end="2530.73">on github by Monday we're questions sir</span> </p>
<p><span data-start="2530.73" data-end="2535.65">I was just wondering since SPD's already</span> <span data-start="2535.65" data-end="2537.39">starting being deployed sort of by Fiat</span> <span data-start="2537.39" data-end="2538.53">I'm have you measured it head-to-head</span> <span data-start="2538.53" data-end="2541.17">against speedy for the same content we</span> <span data-start="2541.17" data-end="2543.03">have not gone directly head-to-head</span> <span data-start="2543.03" data-end="2544.8">against speedy I think speedy is at a</span> <span data-start="2544.8" data-end="2547.109">more advanced state of development they</span> <span data-start="2547.109" data-end="2548.79">have a lot more people working on it and</span> <span data-start="2548.79" data-end="2550.41">so we have not done that but we're</span> <span data-start="2550.41" data-end="2552.18">really anxious to do it we really like</span> <span data-start="2552.18" data-end="2553.56">what the Google guys are doing with</span> <span data-start="2553.56" data-end="2555.21">speedy I guess you're probably one of</span> <span data-start="2555.21" data-end="2558.27">them no oh but the we like what they're</span> <span data-start="2558.27" data-end="2560.25">doing the multiplexing thing is really</span> <span data-start="2560.25" data-end="2571.53">interesting it's still faster trash</span> <span data-start="2571.54" data-end="2574.7">if before but sorry if performance is</span> <span data-start="2574.7" data-end="2577.4">such a concern my are using JSON instead</span> <span data-start="2577.4" data-end="2580.25">of be Jason there was some talk about</span> <span data-start="2580.25" data-end="2582.14">that we could use bj song we could've</span> <span data-start="2582.14" data-end="2584.6">used exi which is also binary asn.1</span> <span data-start="2584.6" data-end="2586.61">there's some other things we wanted to</span> <span data-start="2586.61" data-end="2589.49">be true to the web ideal everything is</span> <span data-start="2589.49" data-end="2591.83">human readable you don't need a machine</span> <span data-start="2591.83" data-end="2593.51">to understand what's going on on the</span> <span data-start="2593.51" data-end="2595.76">internet and also it's just a lot easier</span> <span data-start="2595.76" data-end="2603.47">to deal with I know people don't get up</span> <span data-start="2603.47" data-end="2605.48">here and talk about ideals that often I</span> <span data-start="2605.48" data-end="2609.77">hope that that's that's okay so you had</span> <span data-start="2609.77" data-end="2611.39">mentioned that there's no support yet</span> <span data-start="2611.39" data-end="2614.06">for SSL or TLS seems like that might be</span> <span data-start="2614.06" data-end="2615.95">a deal-breaker for a lot of people can</span> <span data-start="2615.95" data-end="2618.26">you look comment on the roadmap ahead</span> <span data-start="2618.26" data-end="2620.69">about if that's a man certainly a</span> <span data-start="2620.69" data-end="2623.06">priority but timeline wise when that may</span> <span data-start="2623.06" data-end="2627.56">or may not be implemented so so this is</span> <span data-start="2627.56" data-end="2629.81">one of the largest outstanding and solve</span> <span data-start="2629.81" data-end="2631.79">problems the gentleman's put his finger</span> <span data-start="2631.79" data-end="2633.83">right on it if you know if there's</span> <span data-start="2633.83" data-end="2636.08">really blockers to acceptance of scratch</span> <span data-start="2636.08" data-end="2637.37">beyond the fact that the client can</span> <span data-start="2637.37" data-end="2639.92">understand it right now it's that we</span> <span data-start="2639.92" data-end="2641.9">don't have a really good story to tell</span> <span data-start="2641.9" data-end="2644.18">on security it's at the top of the</span> <span data-start="2644.18" data-end="2646.43">priority list for working on as far as a</span> <span data-start="2646.43" data-end="2650.72">date I would not even want to hesitate</span> <span data-start="2650.72" data-end="2653.57">guess we will work on it thinking about</span> <span data-start="2653.57" data-end="2655.43">time cycles it's not going to happen</span> <span data-start="2655.43" data-end="2657.11">until later in the summer at the</span> <span data-start="2657.11" data-end="2658.85">earliest but it's definitely a high</span> <span data-start="2658.85" data-end="2662.65">priority and thank you for noticing it</span> <span data-start="2662.65" data-end="2666.26">so hundred I may have been hey I may</span> <span data-start="2666.26" data-end="2667.85">miss this did you talk about error</span> <span data-start="2667.85" data-end="2671.54">control so I did not talk about error</span> <span data-start="2671.54" data-end="2673.28">control although I probably should have</span> </p>
<p><span data-start="2673.28" data-end="2675.02">I talked a little bit about packet loss</span> <span data-start="2675.02" data-end="2677.06">but I didn't talk about Eric control I</span> <span data-start="2677.06" data-end="2680.06">only get 40 minutes for error control</span> <span data-start="2680.06" data-end="2681.74">what we really want to do beyond the</span> <span data-start="2681.74" data-end="2684.92">obvious crcs and and and other kinds of</span> <span data-start="2684.92" data-end="2687.5">check sums is we have in the control</span> <span data-start="2687.5" data-end="2691.13">channel a section of data actually it's</span> <span data-start="2691.13" data-end="2692.84">three packets not just one that</span> <span data-start="2692.84" data-end="2695.03">describes what's happening on the data</span> <span data-start="2695.03" data-end="2697.94">channels and allows us to do akin</span> <span data-start="2697.94" data-end="2701.78">harris and for checking the the validity</span> <span data-start="2701.78" data-end="2703.79">or the the integrity of the day so</span> <span data-start="2703.79" data-end="2705.65">you're doing selective retransmission</span> <span data-start="2705.65" data-end="2708.46">that yeah and any firewall issues</span> <span data-start="2708.46" data-end="2711.05">firewall issues we actually went and</span> <span data-start="2711.05" data-end="2713.06">wholeheartedly and I knew somebody was</span> <span data-start="2713.06" data-end="2714.349">going to bring this up thank you for</span> <span data-start="2714.349" data-end="2715.79">bringing it up because I was prepared to</span> <span data-start="2715.79" data-end="2718.099">answer that one for that we actually</span> <span data-start="2718.099" data-end="2719.72">just went and grabbed the ton code</span> <span data-start="2719.72" data-end="2721.819">that's a that's out there is several</span> <span data-start="2721.819" data-end="2723.56">people are using this there's three or</span> <span data-start="2723.56" data-end="2724.73">four different ways I don't know if</span> <span data-start="2724.73" data-end="2727.369">people are aware of how to get past</span> <span data-start="2727.369" data-end="2729.859">firewalls with UDP but things like Skype</span> <span data-start="2729.859" data-end="2732.349">use something called ton which basically</span> <span data-start="2732.349" data-end="2735.29">does a rendezvous type of approach</span> <span data-start="2735.29" data-end="2736.94">basically where you establish a</span> <span data-start="2736.94" data-end="2739.79">connection to the first possible closest</span> <span data-start="2739.79" data-end="2742.19">node to your destination then you try</span> <span data-start="2742.19" data-end="2743.54">and open a connection a little further</span> <span data-start="2743.54" data-end="2745.88">back and sort of leapfrog yourself I</span> <span data-start="2745.88" data-end="2747.38">know I'm not doing a great job of</span> <span data-start="2747.38" data-end="2748.79">describing it it really needs a</span> <span data-start="2748.79" data-end="2751.25">whiteboard but there is technology to</span> <span data-start="2751.25" data-end="2753.23">help us get through firewalls if you</span> <span data-start="2753.23" data-end="2754.7">think about the programs that are out</span> <span data-start="2754.7" data-end="2756.92">there using UDP like Skype and some of</span> <span data-start="2756.92" data-end="2758.569">the others they've obviously solved this</span> <span data-start="2758.569" data-end="2761.69">problem as physicists we can consider</span> <span data-start="2761.69" data-end="2763.4">this to be a problem you know that we</span> <span data-start="2763.4" data-end="2773">reduce this to a problem already solved</span> </p>
<p><span data-start="2773.01" data-end="2777.67">I'm sorry multicast is definitely on the</span> <span data-start="2777.67" data-end="2779.41">agenda if you think about the way that</span> <span data-start="2779.41" data-end="2780.88">things like the peer-to-peer cash</span> <span data-start="2780.88" data-end="2782.62">maintenance and so forth that I talked</span> <span data-start="2782.62" data-end="2785.65">about work that's a multicast solution</span> <span data-start="2785.65" data-end="2788.35">if we look at one of the features that</span> <span data-start="2788.35" data-end="2790.26">we wanted to put into scratch was a</span> <span data-start="2790.26" data-end="2793.42">nearest object location channel which</span> <span data-start="2793.42" data-end="2796.3">would have data about the objects that</span> <span data-start="2796.3" data-end="2798.91">you know or love or have in your cash</span> <span data-start="2798.91" data-end="2800.8">have some association with we want to</span> <span data-start="2800.8" data-end="2802.57">have a data channel that shows where</span> <span data-start="2802.57" data-end="2805.27">those are or their nearest points near</span> <span data-start="2805.27" data-end="2807.1">its nearby point that's going to have to</span> <span data-start="2807.1" data-end="2809.05">be a multicast solution so multicast</span> <span data-start="2809.05" data-end="2811.75">definitely on our agenda it's a little</span> <span data-start="2811.75" data-end="2814.69">more complicated but it's definitely got</span> <span data-start="2814.69" data-end="2825.16">to be there Laura did you remember to</span> <span data-start="2825.16" data-end="2827.23">load the bacon oh I knew I forgot</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
