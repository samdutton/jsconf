<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ZGPOQOLv1p0</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/ZGPOQOLv1p0?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="1.7" data-end="5.69">hi can everyone hear me yeah okay cool</span> <span data-start="5.69" data-end="8.37">today I'm gonna be talking about sharing</span> <span data-start="8.37" data-end="10.92">is caring and in particular how you can</span> <span data-start="10.92" data-end="13.049">use our browsers to share with other</span> <span data-start="13.049" data-end="15.45">browsers using a technology called web</span> <span data-start="15.45" data-end="18.359">RTC RT C stands for real-time</span> <span data-start="18.359" data-end="20.279">communication and it could be real-time</span> <span data-start="20.279" data-end="23.13">communication of audio video and other</span> <span data-start="23.13" data-end="27.42">kinds of files a few things I want to</span> <span data-start="27.42" data-end="30.029">cover today are a bit of the contrast of</span> <span data-start="30.029" data-end="32.25">what we do in our day to day work for me</span> <span data-start="32.25" data-end="33.69">most of the time I'm writing code for</span> <span data-start="33.69" data-end="35.489">the client or I'm writing code for a</span> <span data-start="35.489" data-end="37.32">server so I'm used to writing code that</span> <span data-start="37.32" data-end="39.39">involves sending out requests and</span> <span data-start="39.39" data-end="42.079">getting back responses from a server</span> <span data-start="42.079" data-end="44.19">some other people might be used to</span> <span data-start="44.19" data-end="46.289">writing code like WebSocket code which</span> <span data-start="46.289" data-end="48.45">is bi-directional communication between</span> <span data-start="48.45" data-end="51.059">a server and a browser where a server</span> <span data-start="51.059" data-end="52.92">can actually push information over to a</span> <span data-start="52.92" data-end="56.879">browser so this is makes up most of the</span> <span data-start="56.879" data-end="59.37">websites we use so why do we really need</span> <span data-start="59.37" data-end="62.309">something like WebRTC well the thing is</span> <span data-start="62.309" data-end="66.57">once upon a time a long time ago it used</span> <span data-start="66.57" data-end="68.4">to take a really long time to download</span> <span data-start="68.4" data-end="71.729">files it would take a really really long</span> <span data-start="71.729" data-end="75.259">time to download a song and then so we</span> <span data-start="75.259" data-end="77.759">people came up with peer-to-peer</span> <span data-start="77.759" data-end="79.95">technologies that allowed people to</span> <span data-start="79.95" data-end="82.47">share files quickly and easily so if I</span> <span data-start="82.47" data-end="84.21">had part of a song and someone had a</span> <span data-start="84.21" data-end="86.85">part of the same song we can sort of</span> <span data-start="86.85" data-end="89.34">share those parts and then that would</span> <span data-start="89.34" data-end="92.79">just result in a faster download we sort</span> <span data-start="92.79" data-end="94.07">of forgot about that</span> <span data-start="94.07" data-end="96.99">when stuff like YouTube came up and our</span> <span data-start="96.99" data-end="98.52">internet connections got faster and</span> <span data-start="98.52" data-end="100.86">servers became way more efficient but</span> <span data-start="100.86" data-end="104.04">right now the thing is out of our</span> </p>
<p><span data-start="104.04" data-end="106.439">Internet traffic 70 percent of that is</span> <span data-start="106.439" data-end="109.38">now streaming video so it's gonna become</span> <span data-start="109.38" data-end="110.79">an issue when we start having millions</span> <span data-start="110.79" data-end="112.47">and millions of people watching the same</span> <span data-start="112.47" data-end="115.11">episode of Game of Thrones or trying to</span> <span data-start="115.11" data-end="117.899">download the same file so there are new</span> <span data-start="117.899" data-end="119.64">companies coming out such as pear 5</span> <span data-start="119.64" data-end="122.07">which are using WebRTC technologies in</span> <span data-start="122.07" data-end="124.14">order to help people share and download</span> <span data-start="124.14" data-end="126.619">those files faster it helps people</span> <span data-start="126.619" data-end="129.72">stream video at better quality if they</span> <span data-start="129.72" data-end="131.4">happen to be in Australia but the server</span> <span data-start="131.4" data-end="133.77">for that video happens to be in London</span> <span data-start="133.77" data-end="135.93">Technologies like pr5 will enable that</span> <span data-start="135.93" data-end="138.06">person to watch that video as if it's a</span> <span data-start="138.06" data-end="141.96">seamless experience another use of what</span> </p>
<p><span data-start="141.96" data-end="144.6">RTC is web torrent web torrent works</span> <span data-start="144.6" data-end="146.67">with the BitTorrent protocol in order to</span> <span data-start="146.67" data-end="149.4">help you stream video files right into</span> <span data-start="149.4" data-end="151.8">your browser so instead of you having to</span> <span data-start="151.8" data-end="153.54">use something like transmission or</span> <span data-start="153.54" data-end="154.92">utorrent or any sort of BitTorrent</span> <span data-start="154.92" data-end="157.17">client you can just go to like a really</span> <span data-start="157.17" data-end="160.76">beautiful web page and watch that file</span> <span data-start="160.76" data-end="163.55">people kind of worry about bit torrents</span> <span data-start="163.55" data-end="166.74">they kind of associated with privacy but</span> <span data-start="166.74" data-end="168.63">it's actually possible now like inter</span> </p>
<p><span data-start="168.63" data-end="171.15">Ledger's doing demos where you can like</span> <span data-start="171.15" data-end="173.25">actually have micro payments associated</span> <span data-start="173.25" data-end="175.62">to a bit torrent download you can attach</span> <span data-start="175.62" data-end="178.74">metadata to an mp3 or a video file and</span> <span data-start="178.74" data-end="180.75">people can pay as they're streaming and</span> <span data-start="180.75" data-end="182.19">downloading your file even though it's</span> <span data-start="182.19" data-end="186.93">peer-to-peer so back to the whole</span> </p>
<p><span data-start="186.93" data-end="190.38">WebSockets thing we when we do</span> <span data-start="190.38" data-end="191.16">WebSockets</span> <span data-start="191.16" data-end="192.63">it's almost stuff like push</span> <span data-start="192.63" data-end="194.73">notifications and it sends little bits</span> <span data-start="194.73" data-end="197.94">of data in order web RTC doesn't care</span> <span data-start="197.94" data-end="201.18">about dropping packets it just sends</span> <span data-start="201.18" data-end="203.88">everything in a big big stream so it's a</span> <span data-start="203.88" data-end="205.83">big stream of video it's a big stream of</span> <span data-start="205.83" data-end="208.2">data for online game you're playing if</span> <span data-start="208.2" data-end="209.55">you lose a packet that's not the</span> <span data-start="209.55" data-end="211.08">important part the important part is</span> <span data-start="211.08" data-end="212.34">that you get most of the data you need</span> <span data-start="212.34" data-end="217.11">at the right time so again back to peer</span> <span data-start="217.11" data-end="220.38">to peer web mercy see the browser</span> <span data-start="220.38" data-end="222.9">support is getting better and better it</span> <span data-start="222.9" data-end="224.99">used to just be for Chrome and Firefox</span> <span data-start="224.99" data-end="228.38">but now it's also for edge and Safari</span> <span data-start="228.38" data-end="230.79">most of the time it's recommended that</span> <span data-start="230.79" data-end="234.09">use a shim called adapter Jas to account</span> <span data-start="234.09" data-end="236.49">for slightly different names or naming</span> <span data-start="236.49" data-end="241.44">in the API between browsers one thing</span> </p>
<p><span data-start="241.44" data-end="243.15">I'm going to spend a lot of time on is</span> <span data-start="243.15" data-end="246.24">how to connect the pairs so the thing</span> <span data-start="246.24" data-end="249.33">with WebRTC is that browsers and</span> <span data-start="249.33" data-end="250.89">computers are very good at sharing data</span> <span data-start="250.89" data-end="253.25">but they're not very good about caring</span> <span data-start="253.25" data-end="255.23">meaning they're not very good about</span> <span data-start="255.23" data-end="257.459">caring about each other or finding each</span> <span data-start="257.459" data-end="260.04">other so in order to connect to pairs we</span> <span data-start="260.04" data-end="261.81">have to talk about a lot of technical</span> <span data-start="261.81" data-end="263.76">terms I'm going to touch on really</span> <span data-start="263.76" data-end="266.88">quickly such as SDP</span> <span data-start="266.88" data-end="274.85">offers answers IP addresses ports</span> <span data-start="274.85" data-end="280.41">routers firewalls ice the interactive</span> <span data-start="280.41" data-end="282.78">connectivity establishment different</span> <span data-start="282.78" data-end="284.34">kinds of ice servers such as stun</span> <span data-start="284.34" data-end="287.85">session traversal utilities for not turn</span> <span data-start="287.85" data-end="290.58">traversal relay using that and then I'm</span> <span data-start="290.58" data-end="292.5">just going to very quickly touch on the</span> <span data-start="292.5" data-end="294.27">data channel which is available through</span> <span data-start="294.27" data-end="296.58">an rtcpeerconnection the data channel is</span> <span data-start="296.58" data-end="298.14">what allows us to share data with each</span> <span data-start="298.14" data-end="301.68">other so the first part making a</span> <span data-start="301.68" data-end="304.74">connection we take making a connection</span> <span data-start="304.74" data-end="307.35">for granted most of us we have eyes we</span> <span data-start="307.35" data-end="309.27">have ears if we see another person on</span> <span data-start="309.27" data-end="311.07">the street it's very easy for us to</span> <span data-start="311.07" data-end="313.44">connect with another person we just</span> <span data-start="313.44" data-end="315.33">start talking to them they can hear us</span> <span data-start="315.33" data-end="317.43">they start talking back and we've made a</span> <span data-start="317.43" data-end="320.02">connection</span> <span data-start="320.03" data-end="322.86">however for computers it's not that easy</span> <span data-start="322.86" data-end="324.48">computers don't know how to find other</span> <span data-start="324.48" data-end="327.36">computers computers are pretty familiar</span> <span data-start="327.36" data-end="329.76">with finding websites you just tell a</span> <span data-start="329.76" data-end="331.62">computer to go to a certain domain and</span> <span data-start="331.62" data-end="333.84">that domain is associated with an IP</span> <span data-start="333.84" data-end="335.97">address and a port and that way the</span> <span data-start="335.97" data-end="339.36">computer can find the website so that</span> <span data-start="339.36" data-end="340.77">kind of thing your computer is pretty</span> <span data-start="340.77" data-end="343.17">comfortable with but there's things that</span> <span data-start="343.17" data-end="344.7">the computer doesn't even know about its</span> <span data-start="344.7" data-end="347.1">own self your computer doesn't even know</span> <span data-start="347.1" data-end="350.79">its own IP address which we're going to</span> <span data-start="350.79" data-end="355.08">talk about in a bit so I lied a bit at</span> <span data-start="355.08" data-end="358.29">the beginning WebRTC is peer-to-peer but</span> <span data-start="358.29" data-end="359.67">you actually need servers to help</span> <span data-start="359.67" data-end="362.1">connect those peers those servers don't</span> <span data-start="362.1" data-end="363.42">need to know anything about your peers</span> <span data-start="363.42" data-end="364.71">and they don't need to store any data</span> <span data-start="364.71" data-end="366.45">that those peers are exchanging with you</span> <span data-start="366.45" data-end="368.88">we cheat the other yeah but they need</span> <span data-start="368.88" data-end="371.76">those servers help make a connection so</span> <span data-start="371.76" data-end="374.91">an example here we need to do a lot of</span> <span data-start="374.91" data-end="377.37">this thing called signaling so at the</span> <span data-start="377.37" data-end="378.93">beginning of the connection the two</span> <span data-start="378.93" data-end="381.63">pairs do a lot of signaling and then</span> <span data-start="381.63" data-end="383.31">once the signaling is done and they're</span> <span data-start="383.31" data-end="386.07">connected it's almost like the signaling</span> <span data-start="386.07" data-end="392.25">server can follow away</span> <span data-start="392.26" data-end="394.82">so signaling starts off with this thing</span> <span data-start="394.82" data-end="396.38">called a session description protocol</span> <span data-start="396.38" data-end="399.38">this is the almost the equivalent of</span> <span data-start="399.38" data-end="402.26">like just finding out if anyone's out</span> <span data-start="402.26" data-end="405.23">there so a computer needs to find out if</span> <span data-start="405.23" data-end="407.66">another computers out there they make up</span> <span data-start="407.66" data-end="409.46">a session description protocol and send</span> <span data-start="409.46" data-end="413.06">it out so this is sent out in the form</span> <span data-start="413.06" data-end="416.12">of an offer the offer goes through the</span> <span data-start="416.12" data-end="418.25">router through the signaling server and</span> <span data-start="418.25" data-end="421.31">then reaches the other pair the pair</span> <span data-start="421.31" data-end="423.05">accepts the remote offer and then they</span> <span data-start="423.05" data-end="425.72">store it as a remote description once</span> <span data-start="425.72" data-end="427.22">they've done that they create another</span> <span data-start="427.22" data-end="431.03">part SDP called an answer and then that</span> <span data-start="431.03" data-end="434.24">answer is sent out on the network and it</span> <span data-start="434.24" data-end="437.15">goes through the signaling server and it</span> <span data-start="437.15" data-end="441.32">goes back to the other pair so the pair</span> <span data-start="441.32" data-end="443.12">accepts the remote answer and sets it as</span> <span data-start="443.12" data-end="445.04">the remote description however at this</span> <span data-start="445.04" data-end="447.94">point we've sent offer we sent an answer</span> <span data-start="447.94" data-end="451.4">but a connection between the two pairs</span> <span data-start="451.4" data-end="453.8">haven't been made yet so all they know</span> <span data-start="453.8" data-end="455.69">at this point is that someone is sending</span> <span data-start="455.69" data-end="457.43">out an offer someone's ready to accept</span> <span data-start="457.43" data-end="458.78">that offer they want to make a</span> <span data-start="458.78" data-end="460.37">connection but they still don't know how</span> <span data-start="460.37" data-end="462.35">to make the connection and they make</span> <span data-start="462.35" data-end="464">this connection by doing something we</span> <span data-start="464" data-end="468.26">call exchanging ice candidates so this</span> <span data-start="468.26" data-end="470.03">is a little complicated I'm going to</span> <span data-start="470.03" data-end="474.5">start at the beginning so basically the</span> <span data-start="474.5" data-end="476.51">computer knows that there's someone else</span> <span data-start="476.51" data-end="478.18">out there that they want to connect with</span> <span data-start="478.18" data-end="480.56">but they don't actually know where that</span> <span data-start="480.56" data-end="483.05">other computer is and in fact like I</span> <span data-start="483.05" data-end="485">mentioned the computer doesn't even know</span> <span data-start="485" data-end="487.97">where they are computers connect to</span> <span data-start="487.97" data-end="490.22">other computers by this thing called IP</span> <span data-start="490.22" data-end="493.13">addresses imports but because of our</span> <span data-start="493.13" data-end="497.3">routers we only know our private IP when</span> <span data-start="497.3" data-end="499.85">we're on a home network to connect with</span> <span data-start="499.85" data-end="502.04">another pair we need to know our public</span> </p>
<p><span data-start="502.04" data-end="504.02">IP and we also need to know the peers</span> <span data-start="504.02" data-end="507.08">public IP and this whole thing about</span> <span data-start="507.08" data-end="509.87">only nosing your private IP is something</span> <span data-start="509.87" data-end="512.27">called NAT which is basically a</span> <span data-start="512.27" data-end="513.92">technical term for hiding your address</span> <span data-start="513.92" data-end="516.02">from you the other thing we have to</span> <span data-start="516.02" data-end="517.97">worry about in order in other in</span> <span data-start="517.97" data-end="520.43">addition to this thing called NAT is we</span> <span data-start="520.43" data-end="524.23">have to know a tiny bit about firewalls</span> <span data-start="524.24" data-end="526.04">so the thing with firewalls is that</span> <span data-start="526.04" data-end="528.709">firewalls block ports and to connect</span> <span data-start="528.709" data-end="529.939">with another parent we need to know</span> <span data-start="529.939" data-end="532.16">their public IP and we also need to know</span> <span data-start="532.16" data-end="535.61">their port so how do we get around these</span> <span data-start="535.61" data-end="537.079">issues with our routers and our</span> <span data-start="537.079" data-end="540.589">firewalls how do we get around that so</span> <span data-start="540.589" data-end="541.999">the two computers can actually make a</span> <span data-start="541.999" data-end="544.49">connection we get around these with</span> <span data-start="544.49" data-end="546.379">something called ice the in turn</span> <span data-start="546.379" data-end="548.199">interactive connectivity establishment</span> <span data-start="548.199" data-end="550.699">it's a framework for getting two pairs</span> <span data-start="550.699" data-end="553.249">to connect to each other and ice has two</span> <span data-start="553.249" data-end="556.309">kinds of servers one of them is a sun's</span> <span data-start="556.309" data-end="559.1">stun server which is session traversal</span> <span data-start="559.1" data-end="561.259">utilities for NAT and the other kind of</span> <span data-start="561.259" data-end="564.259">server is a turn server which is</span> <span data-start="564.259" data-end="568.279">traversal using relay net so a few quick</span> <span data-start="568.279" data-end="571.879">things about these servers the stun</span> <span data-start="571.879" data-end="574.009">server is often free there's lots</span> <span data-start="574.009" data-end="576.559">available and when you're using a stun</span> <span data-start="576.559" data-end="578.749">server you're only exchanging maybe 10</span> <span data-start="578.749" data-end="581.72">kilobytes of information at a time so</span> <span data-start="581.72" data-end="583.819">the cost is next to nothing people</span> <span data-start="583.819" data-end="585.429">usually give out Sun servers for free</span> <span data-start="585.429" data-end="588.319">turn servers are used to relay media in</span> <span data-start="588.319" data-end="590.029">case your peer-to-peer connection isn't</span> <span data-start="590.029" data-end="592.279">strong enough and because it's relaying</span> <span data-start="592.279" data-end="593.899">media and large amounts of files turn</span> <span data-start="593.899" data-end="597.799">servers can be quite expensive so the</span> <span data-start="597.799" data-end="599.449">thing with these ice servers is that</span> <span data-start="599.449" data-end="600.769">these ice servers give you ice</span> <span data-start="600.769" data-end="603.259">candidates so while that whole offer</span> <span data-start="603.259" data-end="605.329">answer process is going on that I spoke</span> <span data-start="605.329" data-end="607.819">about earlier at the same time these</span> <span data-start="607.819" data-end="610.639">pairs are also like making a connection</span> <span data-start="610.639" data-end="615.889">to often a stun server so the stun</span> <span data-start="615.889" data-end="618.799">server they get ice candidates from the</span> <span data-start="618.799" data-end="620.779">stun server and the main purpose of a</span> <span data-start="620.779" data-end="623.329">stun server is to find out your IP so</span> <span data-start="623.329" data-end="625.819">the stun server tells the peer what</span> <span data-start="625.819" data-end="629.329">their IP is and it gets sent back to the</span> <span data-start="629.329" data-end="632.36">peer once they have some candidates</span> <span data-start="632.36" data-end="635.72">ready the pair's exchange candidates by</span> <span data-start="635.72" data-end="638.54">the signaling server and then that's how</span> <span data-start="638.54" data-end="641.089">they reach each other and once they find</span> <span data-start="641.089" data-end="643.819">enough ice candidates they have a</span> <span data-start="643.819" data-end="647.119">connection so it's kind of a complicated</span> <span data-start="647.119" data-end="651.649">process but there is that's the that's</span> <span data-start="651.649" data-end="653.089">the gist of it you have to send out</span> <span data-start="653.089" data-end="655.069">offers you have to send out answers and</span> <span data-start="655.069" data-end="656.749">you have to exchange ice candidates in</span> <span data-start="656.749" data-end="657.89">order to make</span> <span data-start="657.89" data-end="661.61">connection sometimes son servers aren't</span> <span data-start="661.61" data-end="663.29">enough to give you a valid ice candidate</span> <span data-start="663.29" data-end="665.66">this happens when your router employs a</span> <span data-start="665.66" data-end="668.45">restriction called symmetric net also</span> <span data-start="668.45" data-end="670.31">like I said earlier when you're reeling</span> <span data-start="670.31" data-end="672.89">large amounts of data you can't rely on</span> <span data-start="672.89" data-end="675.11">stun alone so this is where the turn</span> <span data-start="675.11" data-end="677.92">servers come in if anyone's ever used</span> <span data-start="677.92" data-end="681.2">videoconferencing in slack slack uses</span> </p>
<p><span data-start="681.2" data-end="684.05">WebRTC and they rely almost entirely on</span> <span data-start="684.05" data-end="688.49">turn servers so one thing I want to talk</span> <span data-start="688.49" data-end="690.62">about really quickly is troubleshooting</span> <span data-start="690.62" data-end="694.25">before I dive into the code just kind of</span> <span data-start="694.25" data-end="695.81">like my experiences like working with</span> <span data-start="695.81" data-end="698.45">WebRTC and issues I've come into contact</span> <span data-start="698.45" data-end="702.19">with so the first thing I discovered is</span> <span data-start="702.19" data-end="705.56">WebRTC as of last couple years I think</span> <span data-start="705.56" data-end="707.99">it requires a secure connection so even</span> <span data-start="707.99" data-end="709.07">though you're just writing maybe</span> <span data-start="709.07" data-end="711.019">client-side code you have to make sure</span> <span data-start="711.019" data-end="712.85">that you have a certificate and you have</span> <span data-start="712.85" data-end="715.22">to make sure it's HTTPS especially for</span> <span data-start="715.22" data-end="716.72">some of the api's such as getusermedia</span> <span data-start="716.72" data-end="719.3">which takes control of a user's camera</span> <span data-start="719.3" data-end="720.8">like if you're controlling someone's</span> <span data-start="720.8" data-end="722.839">camera or their microphone you want to</span> <span data-start="722.839" data-end="724.39">make sure you're sending out whatever</span> <span data-start="724.39" data-end="726.769">video stream you're getting from them in</span> <span data-start="726.769" data-end="729.92">a secure encrypted connection because</span> <span data-start="729.92" data-end="731.87">your client-side code is secure though</span> <span data-start="731.87" data-end="733.37">whatever you're using for your signaling</span> <span data-start="733.37" data-end="736.459">and WebRTC doesn't you can use sip or</span> <span data-start="736.459" data-end="738.589">you can use WebSockets for whatever</span> <span data-start="738.589" data-end="740.3">you're using for signaling also has to</span> <span data-start="740.3" data-end="742.22">be secure so depending on how</span> <span data-start="742.22" data-end="744.17">comfortable you're comfortable you are</span> <span data-start="744.17" data-end="746.48">with setting up a TLS certificate I</span> <span data-start="746.48" data-end="748.1">think if you're just like messing around</span> <span data-start="748.1" data-end="749.54">you're just starting you just want to</span> <span data-start="749.54" data-end="751.88">make something basic and WebRTC to feel</span> <span data-start="751.88" data-end="754.19">find out if you like it or not I would</span> <span data-start="754.19" data-end="757.19">stick with using firebase for your kind</span> <span data-start="757.19" data-end="759.44">of first kind of messing around the</span> <span data-start="759.44" data-end="763.01">other thing I found out is like in my</span> <span data-start="763.01" data-end="765.05">personal experience I think Firefox is a</span> <span data-start="765.05" data-end="767.589">lot better to do WebRTC development in</span> <span data-start="767.589" data-end="770.81">the developer the internal WebRTC tool</span> <span data-start="770.81" data-end="772.99">is a lot more user friendly it has logs</span> <span data-start="772.99" data-end="775.31">it tells you if the offers being sent</span> <span data-start="775.31" data-end="779.269">out and received correctly I know that</span> </p>
<p><span data-start="779.269" data-end="781.07">Chrome is like kind of pushing WebRTC</span> <span data-start="781.07" data-end="782.63">and it's probably like I'd had in terms</span> <span data-start="782.63" data-end="784.22">of the technology available but I just</span> <span data-start="784.22" data-end="786.62">find Firefox was a little more friendly</span> <span data-start="786.62" data-end="791.24">to do development in another thing I</span> <span data-start="791.24" data-end="793.82">didn't know when I first started messing</span> <span data-start="793.82" data-end="795.589">around with making peer connections like</span> <span data-start="795.589" data-end="796.7">rtcpeerconnection</span> <span data-start="796.7" data-end="798.68">is that you can only send signals</span> <span data-start="798.68" data-end="801.37">between two pair connections at a time</span> <span data-start="801.37" data-end="804.17">if you try to do something like this</span> <span data-start="804.17" data-end="807.23">it's not going to work if you're kind of</span> <span data-start="807.23" data-end="809.36">trying to broadcast messages from one</span> <span data-start="809.36" data-end="810.74">pair connection out to two pair</span> <span data-start="810.74" data-end="812.72">connections you're getting get all sorts</span> <span data-start="812.72" data-end="815.209">of errors and the problem with these</span> <span data-start="815.209" data-end="817.459">errors is that those errors are</span> <span data-start="817.459" data-end="819.529">misleading that's not actually what's</span> <span data-start="819.529" data-end="821.54">going wrong with your peer connection</span> <span data-start="821.54" data-end="822.92">you're not sending out the wrong thing</span> <span data-start="822.92" data-end="824.99">in the wrong state it's not that you're</span> <span data-start="824.99" data-end="826.61">missing a turn server that your turn</span> <span data-start="826.61" data-end="828.529">server is broken it's actually because</span> <span data-start="828.529" data-end="831.32">you're sending out the wrong message to</span> <span data-start="831.32" data-end="833.209">the wrong peer and it's getting confused</span> <span data-start="833.209" data-end="835.339">so you have to be really careful</span> <span data-start="835.339" data-end="837.29">whenever you're architecting or</span> <span data-start="837.29" data-end="839.99">designing your signaling system to kind</span> <span data-start="839.99" data-end="842.149">of keep things like unique IDs and make</span> <span data-start="842.149" data-end="843.86">sure you're sending out the message to</span> <span data-start="843.86" data-end="848.029">the exact pair the other thing I found</span> <span data-start="848.029" data-end="850.76">like in my personal experience is that a</span> <span data-start="850.76" data-end="852.38">lot of the tutorials are pretty</span> <span data-start="852.38" data-end="855.5">misleading often you see the remote pair</span> <span data-start="855.5" data-end="857.779">and the local pair they're often shown</span> <span data-start="857.779" data-end="859.64">in the same script so you'll see</span> <span data-start="859.64" data-end="861.529">something like this in the Mozilla Docs</span> <span data-start="861.529" data-end="865.16">and you see that local connection and</span> <span data-start="865.16" data-end="867.23">the remote connection are kind of on the</span> <span data-start="867.23" data-end="869.149">same page but really you almost have to</span> <span data-start="869.149" data-end="871.339">have a mental model where you take that</span> <span data-start="871.339" data-end="873.56">code you see in the tutorial and you rip</span> <span data-start="873.56" data-end="875.12">out the remote connection and you keep</span> <span data-start="875.12" data-end="877.339">that in a separate web page which is as</span> <span data-start="877.339" data-end="878.99">you can imagine a little confusing here</span> <span data-start="878.99" data-end="880.25">like you'd have to rewrite all your</span> <span data-start="880.25" data-end="885.14">promise code another thing I want to</span> <span data-start="885.14" data-end="887.329">briefly talk about I'm just going to</span> <span data-start="887.329" data-end="889.76">show a bit of code now is that we I just</span> <span data-start="889.76" data-end="891.68">spoke a lot about how this whole offer</span> <span data-start="891.68" data-end="894.649">answer exchange process but I think like</span> <span data-start="894.649" data-end="896.51">if you're just starting out it's good to</span> <span data-start="896.51" data-end="898.13">have a library that sort of abstracts a</span> <span data-start="898.13" data-end="900.35">lot of stuff like this away from you so</span> </p>
<p><span data-start="900.35" data-end="903.079">I found it was really useful to use this</span> <span data-start="903.079" data-end="907.88">library called simple peer so as you can</span> <span data-start="907.88" data-end="909.74">see all you do is require the library</span> <span data-start="909.74" data-end="912.5">you create a new pair so there always</span> <span data-start="912.5" data-end="914.27">has to be one pair that sounds that the</span> <span data-start="914.27" data-end="917.42">offer so if you have two pairs one pair</span> <span data-start="917.42" data-end="919.16">has to be there to send out the offer so</span> <span data-start="919.16" data-end="920.81">in this library you do that by setting</span> <span data-start="920.81" data-end="923.42">the initiator to true and then you can</span> <span data-start="923.42" data-end="924.99">just listen for</span> <span data-start="924.99" data-end="927.54">these four events you can listen for the</span> <span data-start="927.54" data-end="929.04">error so if there's any errors you can</span> <span data-start="929.04" data-end="931.11">log it to see what's going on</span> <span data-start="931.11" data-end="933.48">parents signal that usually happens when</span> <span data-start="933.48" data-end="935.55">a pair is ready to send out an offer or</span> <span data-start="935.55" data-end="937.68">an answer or send out some ice candidate</span> <span data-start="937.68" data-end="941.07">information so in your signal event you</span> <span data-start="941.07" data-end="943.41">just use your your firebase and you send</span> <span data-start="943.41" data-end="944.88">out the messages you need to the correct</span> <span data-start="944.88" data-end="948.209">pair on connect once you're connected</span> <span data-start="948.209" data-end="950.79">all you have to do if you use a simple</span> <span data-start="950.79" data-end="952.38">peer library if you want to use the data</span> <span data-start="952.38" data-end="954.149">channel is just send stuff using the</span> <span data-start="954.149" data-end="958.23">send method so and you can also handle</span> <span data-start="958.23" data-end="961.41">incoming data here's some example</span> <span data-start="961.41" data-end="964.44">firebase stuff it's if anyone's worked</span> <span data-start="964.44" data-end="966">with firebase before I think the first</span> <span data-start="966" data-end="967.529">three lines are first four lines they're</span> <span data-start="967.529" data-end="970.399">pretty like familiar you import firebase</span> <span data-start="970.399" data-end="973.5">in the config it's just you cut and</span> <span data-start="973.5" data-end="974.79">paste what you get from the firebase</span> <span data-start="974.79" data-end="976.44">website when you set up a new firebase</span> <span data-start="976.44" data-end="979.23">database you initialize your app with</span> <span data-start="979.23" data-end="981.3">your configuration and then you get a</span> <span data-start="981.3" data-end="982.86">reference to your database and then when</span> <span data-start="982.86" data-end="984.54">you want to send the message you just</span> <span data-start="984.54" data-end="986.61">you just push that message to the</span> <span data-start="986.61" data-end="988.89">database and if you do it with a unique</span> </p>
<p><span data-start="988.89" data-end="991.079">ID the other peer knows like hey this</span> <span data-start="991.079" data-end="993.029">message is from me based on the ID and</span> <span data-start="993.029" data-end="994.92">I'll accept that message and I'll use</span> <span data-start="994.92" data-end="996.57">that when I'm signaling and trying to</span> <span data-start="996.57" data-end="1002.57">find another pair so I have a simple</span> <span data-start="1002.57" data-end="1004.82">file upload example here I'm just gonna</span> <span data-start="1004.82" data-end="1010.07">kind of play an animation of it so this</span> <span data-start="1010.07" data-end="1012.38">is a destination page it's connected to</span> <span data-start="1012.38" data-end="1015.23">one user and then the data channel is</span> <span data-start="1015.23" data-end="1021.68">sending cat pictures over and that's</span> <span data-start="1021.68" data-end="1024.439">what it does it's just it's hard to see</span> <span data-start="1024.439" data-end="1025.579">how this is different from like a</span> <span data-start="1025.579" data-end="1027.62">regular file upload but really what's</span> <span data-start="1027.62" data-end="1029.54">happening here is that instead of you</span> <span data-start="1029.54" data-end="1031.25">uploading an image to like an s3 bucket</span> <span data-start="1031.25" data-end="1033.02">and then displaying it on a web page</span> <span data-start="1033.02" data-end="1035.059">this image is going directly from your</span> <span data-start="1035.059" data-end="1039">browser to another person's browser</span> <span data-start="1039.01" data-end="1042.47">so in summary WebRTC allows computers</span> <span data-start="1042.47" data-end="1044.209">share media directly with other</span> <span data-start="1044.209" data-end="1046.22">computers without an intermediary server</span> <span data-start="1046.22" data-end="1049.04">however to connect two pairs you need to</span> <span data-start="1049.04" data-end="1050.6">use some kind of signaling server and</span> <span data-start="1050.6" data-end="1054.95">eye servers are required I just want to</span> <span data-start="1054.95" data-end="1059.39">show one thing really quick</span> <span data-start="1059.4" data-end="1065.95">might possibly need some okay here yeah</span> <span data-start="1065.95" data-end="1068.58">okay so I'm just gonna make this bigger</span> <span data-start="1068.58" data-end="1071.35">this is one thing I really like it's a</span> <span data-start="1071.35" data-end="1073.87">little hard to see but if you if you go</span> <span data-start="1073.87" data-end="1076.39">into Firefox and you type in about :</span> </p>
<p><span data-start="1076.39" data-end="1079.51">WebRTC this pulls up your internal web</span> <span data-start="1079.51" data-end="1084.91">RTC tools and if you go to web I'm just</span> <span data-start="1084.91" data-end="1092.8">gonna go to web wait can I get some</span> <span data-start="1092.8" data-end="1100.59">technical help just for a second</span> <span data-start="1100.6" data-end="1128.22">hey just uh when I'm like you know what</span> <span data-start="1128.23" data-end="1146.97">hmmm maybe I'll try can we just try this</span> <span data-start="1146.98" data-end="1164.87">sorry just give me a minute</span> <span data-start="1164.88" data-end="1167.1">always to connect it to a keyboard or</span> <span data-start="1167.1" data-end="1175.86">some just okay so okay I was going to</span> <span data-start="1175.86" data-end="1177.3">show a website to show how it worked</span> <span data-start="1177.3" data-end="1179.97">with the internal web RTC tools but I</span> <span data-start="1179.97" data-end="1181.38">think having a little bit of technical</span> <span data-start="1181.38" data-end="1183.9">difficulty so that's it for my talk</span> <span data-start="1183.9" data-end="1185.85">hopefully it's a good intro to WebRTC</span> <span data-start="1185.85" data-end="1187.44">and some cool tools you can use to get</span> <span data-start="1187.44" data-end="1189.56">up and running with it</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
