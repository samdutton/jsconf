<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>sgJRA8FUeAE</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/sgJRA8FUeAE?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="7.7" data-end="9.87">all right my name is thomas yang shook</span> <span data-start="9.87" data-end="13.29">i'm working for microsoft i'm currently</span> <span data-start="13.29" data-end="16.02">focusing on making sure that windows is</span> <span data-start="16.02" data-end="18.42">a great hosting platform for know Jas so</span> <span data-start="18.42" data-end="19.65">I'm working on a couple of projects</span> <span data-start="19.65" data-end="24.75">related to know Jas and windows if you</span> <span data-start="24.75" data-end="26.22">are interested about that topic i will</span> <span data-start="26.22" data-end="28.41">be available after this talk to to talk</span> <span data-start="28.41" data-end="31.949">about it so feel free to get me and we</span> <span data-start="31.949" data-end="33.84">can go there please talk about is about</span> <span data-start="33.84" data-end="36.57">something entirely different this is</span> <span data-start="36.57" data-end="38.85">about high density several side</span> </p>
<p><span data-start="38.85" data-end="42.18">JavaScript which is pretty much about</span> <span data-start="42.18" data-end="45.239">how to do more with less so let's get</span> <span data-start="45.239" data-end="49.86">started so let's say you have just</span> <span data-start="49.86" data-end="51.42">developed a web application something</span> <span data-start="51.42" data-end="53.37">that most likely has happened to most of</span> <span data-start="53.37" data-end="56.67">us oh and let's have a look at that</span> <span data-start="56.67" data-end="62">application actually</span> <span data-start="62.01" data-end="65.7">so this is a application written in</span> <span data-start="65.7" data-end="71.399">server side JavaScript and it's a simple</span> <span data-start="71.399" data-end="97.27">web chat up</span> <span data-start="97.28" data-end="99.799">so nothing unusual basically you can hit</span> <span data-start="99.799" data-end="102.83">an HTTP endpoint that endpoint will</span> <span data-start="102.83" data-end="106.07">serve you an HTML page with a bunch of</span> <span data-start="106.07" data-end="108.77">client-side JavaScript the does HTTP</span> <span data-start="108.77" data-end="111.53">long polling against rest endpoints</span> <span data-start="111.53" data-end="115.07">exposed by the same backend posted in</span> <span data-start="115.07" data-end="119.94">that server side JavaScript application</span> <span data-start="119.95" data-end="122.36">the one interesting thing about that app</span> <span data-start="122.36" data-end="125.149">is that it falls into a category of what</span> </p>
<p><span data-start="125.149" data-end="133.34">I call a lightweight web application and</span> <span data-start="133.34" data-end="135.89">what I mean by that there is a class of</span> <span data-start="135.89" data-end="138.739">applications that are using very few</span> <span data-start="138.739" data-end="141.37">resources both in terms of CPU memory</span> <span data-start="141.37" data-end="147.319">networking and possibly disk usage so</span> <span data-start="147.319" data-end="149.06">the next question you are facing after</span> <span data-start="149.06" data-end="150.7">we have developed such an application is</span> <span data-start="150.7" data-end="153.98">what I hosted and there is a number of</span> <span data-start="153.98" data-end="157.76">choices today on the marketplace varying</span> <span data-start="157.76" data-end="161.2">in the level of functionality and price</span> <span data-start="161.2" data-end="164">but bottom line what what it boils down</span> <span data-start="164" data-end="166.91">to and don't hold me to that number but</span> <span data-start="166.91" data-end="168.98">you know 5 euro will probably buy you a</span> <span data-start="168.98" data-end="171.14">reasonably decent shirt hosting plan</span> <span data-start="171.14" data-end="175.07">today my claim is that five euro is way</span> <span data-start="175.07" data-end="177.62">too much to ask in terms of hosting a</span> <span data-start="177.62" data-end="180.41">lightweight web application hosting such</span> <span data-start="180.41" data-end="183.61">apps such should be much less expensive</span> <span data-start="183.61" data-end="186.68">so the question is is there anything we</span> <span data-start="186.68" data-end="189.62">can do about it to make them less</span> <span data-start="189.62" data-end="192.98">expensive to run and I during this talk</span> </p>
<p><span data-start="192.98" data-end="195.26">I'd like to have a look at ways we can</span> <span data-start="195.26" data-end="197.78">help hosting companies lower their costs</span> <span data-start="197.78" data-end="199.88">of running such apps and therefore</span> <span data-start="199.88" data-end="202.579">potentially provide them with an</span> <span data-start="202.579" data-end="206.299">incentive to reduce the pricing of the</span> <span data-start="206.299" data-end="209.68">shirt hosting plans</span> <span data-start="209.69" data-end="213.33">so after you deploy your application to</span> <span data-start="213.33" data-end="217.38">the any of the onion of the shirt</span> <span data-start="217.38" data-end="219">hosting providers will probably end up</span> <span data-start="219" data-end="221.64">running a place like this so there is a</span> <span data-start="221.64" data-end="223.98">data center with a large number of</span> <span data-start="223.98" data-end="226.89">machines your app is running on one of</span> <span data-start="226.89" data-end="229.14">them probably alongside a number of</span> <span data-start="229.14" data-end="231.63">other applications possibly applications</span> <span data-start="231.63" data-end="234.09">written by our competitors and this is</span> <span data-start="234.09" data-end="235.41">pretty much what you are paying the five</span> <span data-start="235.41" data-end="238.41">euro for the breakdown of the cost of</span> <span data-start="238.41" data-end="241.92">operating a data center it falls into</span> <span data-start="241.92" data-end="244.049">three categories there is this cost of</span> <span data-start="244.049" data-end="246.84">buying the hardware there is a cost of</span> <span data-start="246.84" data-end="249.48">electricity and maintenance and there is</span> <span data-start="249.48" data-end="252.09">the cost of electricity is most actually</span> <span data-start="252.09" data-end="254.61">cooling the data center and there is a</span> <span data-start="254.61" data-end="256.2">cost of maintenance and these categories</span> <span data-start="256.2" data-end="260.669">are roughly thirty three percent each so</span> <span data-start="260.669" data-end="262.53">the key takeaway from this is if we can</span> <span data-start="262.53" data-end="264.419">reduce the number of machines that are</span> <span data-start="264.419" data-end="266.7">necessary to run a certain number of web</span> <span data-start="266.7" data-end="269.78">applications we can pretty much</span> <span data-start="269.78" data-end="271.62">proportionally reduce the overall cost</span> <span data-start="271.62" data-end="274.08">of running a datacenter and therefore</span> <span data-start="274.08" data-end="276.18">provide an incentive to hosting</span> <span data-start="276.18" data-end="279.59">companies to reduce the pricing of the</span> <span data-start="279.59" data-end="285.39">short hosting plan so the typical</span> <span data-start="285.39" data-end="289.26">breakdown of the plans that the short</span> <span data-start="289.26" data-end="291.72">hosting companies offer falls into three</span> <span data-start="291.72" data-end="293.82">categories you can go and get yourself a</span> <span data-start="293.82" data-end="296.13">dedicated piece of hardware that will</span> <span data-start="296.13" data-end="299.09">cost you most let's say 200 your mouth</span> <span data-start="299.09" data-end="302.07">then you can go and get a virtual</span> <span data-start="302.07" data-end="303.99">machine running on a piece of hardware</span> <span data-start="303.99" data-end="305.52">that virtual machine running alongside</span> <span data-start="305.52" data-end="309.5">virtual machines owned by others who</span> <span data-start="309.5" data-end="311.37">purchased computing power from that</span> <span data-start="311.37" data-end="314.82">hosting company virtual machine provides</span> <span data-start="314.82" data-end="318.18">a good level of isolation between these</span> <span data-start="318.18" data-end="321.66">execution environments typically these</span> <span data-start="321.66" data-end="324.66">hosting plans are manifest themselves as</span> <span data-start="324.66" data-end="327">the so-called root access to the system</span> <span data-start="327" data-end="328.53">because effectively you're an</span> <span data-start="328.53" data-end="330.69">administrator of the virtual machine but</span> <span data-start="330.69" data-end="332.78">it is still not a physical box is just a</span> <span data-start="332.78" data-end="336.6">slice of the physical box in the last</span> <span data-start="336.6" data-end="338.43">class of</span> <span data-start="338.43" data-end="342.12">short hosting plans offer today revolves</span> <span data-start="342.12" data-end="345.06">around process level isolation so</span> <span data-start="345.06" data-end="347.1">typically you'll basically have a</span> <span data-start="347.1" data-end="349.83">username created on a system and you'll</span> <span data-start="349.83" data-end="351.75">be able to host your application as part</span> <span data-start="351.75" data-end="355.86">of that username so operate most</span> <span data-start="355.86" data-end="357.75">operating system modern operating system</span> <span data-start="357.75" data-end="361.74">offer a kind of user level isolation</span> <span data-start="361.74" data-end="363">within the operating system where you</span> <span data-start="363" data-end="365.7">can control access to resources meter</span> <span data-start="365.7" data-end="369.71">access to resources at the level of</span> <span data-start="369.71" data-end="372.39">process that there is running within the</span> <span data-start="372.39" data-end="373.77">credentials of a particular user</span> <span data-start="373.77" data-end="375.75">registered with that system and this is</span> <span data-start="375.75" data-end="378.24">perhaps the densest you can get in terms</span> <span data-start="378.24" data-end="381.93">of application density in case of the</span> <span data-start="381.93" data-end="385.65">most moisture hosting plans today so</span> <span data-start="385.65" data-end="387.69">this is what you're paying the five euro</span> <span data-start="387.69" data-end="393.39">for a monthly basis there are two things</span> <span data-start="393.39" data-end="395.46">you really care about when you choose</span> <span data-start="395.46" data-end="398.33">your show hosting provider one is</span> <span data-start="398.33" data-end="400.56">isolation of your application you really</span> <span data-start="400.56" data-end="402.75">want to make sure that your app when it</span> <span data-start="402.75" data-end="407.61">is deployed to the data center is not</span> <span data-start="407.61" data-end="410.91">affected by what other applications are</span> <span data-start="410.91" data-end="413.04">doing you don't want other applications</span> <span data-start="413.04" data-end="414.63">running on the same physical machine as</span> <span data-start="414.63" data-end="418.82">yours for example take away all cpu</span> <span data-start="418.82" data-end="421.71">capacity from your application or affect</span> <span data-start="421.71" data-end="425.79">how much networking you can do the</span> <span data-start="425.79" data-end="427.92">second aspect also isolation is one the</span> <span data-start="427.92" data-end="430.56">second aspect is resource consumption</span> <span data-start="430.56" data-end="432.45">you really want to make sure that what</span> <span data-start="432.45" data-end="434.94">you're paying for really guarantee see a</span> <span data-start="434.94" data-end="437.34">certain level of access to memory CPU</span> <span data-start="437.34" data-end="440.49">networking and days can you really want</span> <span data-start="440.49" data-end="441.45">to make sure that you're paying your</span> <span data-start="441.45" data-end="444.72">fair share of the resources it kind of</span> <span data-start="444.72" data-end="446.46">in proportion to what the applications</span> <span data-start="446.46" data-end="448.17">from all the applications are consuming</span> <span data-start="448.17" data-end="452.43">on that box so in case of the class of</span> <span data-start="452.43" data-end="454.08">applications i'm talking about here the</span> <span data-start="454.08" data-end="456.57">lightweight web applications as i said</span> <span data-start="456.57" data-end="460.14">before cpu usage networking and disk is</span> <span data-start="460.14" data-end="465.029">probably not the</span> <span data-start="465.039" data-end="467.599">factor that bounds the number of</span> <span data-start="467.599" data-end="469.039">applications that can be running in one</span> <span data-start="469.039" data-end="471.409">box I think in this in case of these</span> <span data-start="471.409" data-end="474.409">apps today it will be the memory simply</span> <span data-start="474.409" data-end="476.3">because of the process level isolation a</span> <span data-start="476.3" data-end="477.68">single process has a certain weight</span> <span data-start="477.68" data-end="480.08">behind it and you can only run a certain</span> <span data-start="480.08" data-end="481.55">number of processes on a single physical</span> <span data-start="481.55" data-end="483.379">machine and regardless of the operating</span> <span data-start="483.379" data-end="486.919">system you are using so let's have a</span> <span data-start="486.919" data-end="489.83">look at what exactly does it mean to run</span> </p>
<p><span data-start="489.83" data-end="492.68">I the process scope let's come back to</span> <span data-start="492.68" data-end="498.05">our shut up I'll just stop an instance</span> <span data-start="498.05" data-end="519.14">again let's just make sure it is running</span> <span data-start="519.15" data-end="522.09">yep so now as you let's have a look at</span> <span data-start="522.09" data-end="523.67">the resource consumption of the process</span> <span data-start="523.67" data-end="527.19">so first of all you're not is that cpu</span> <span data-start="527.19" data-end="529.32">usage is pretty much negligible all cpu</span> <span data-start="529.32" data-end="530.52">usage is actually coming from other</span> <span data-start="530.52" data-end="533.34">processes running on the machine the my</span> <span data-start="533.34" data-end="535.11">light weight of obligations are sitting</span> <span data-start="535.11" data-end="537.03">there no doing nothing waiting for a</span> <span data-start="537.03" data-end="538.98">message from the client so this is to be</span> <span data-start="538.98" data-end="542.88">expected let's have a look at the memory</span> <span data-start="542.88" data-end="548.61">consumption so this is my process there</span> <span data-start="548.61" data-end="550.44">are many ways you can measure memory</span> <span data-start="550.44" data-end="551.88">consumption of a process there are many</span> <span data-start="551.88" data-end="553.86">different metrics that the one that is</span> <span data-start="553.86" data-end="556.98">most relevant in the context of this</span> <span data-start="556.98" data-end="559.11">discussion I think is what on Windows is</span> <span data-start="559.11" data-end="561.93">called private working set so this is</span> <span data-start="561.93" data-end="565.88">the number of bytes that that is</span> <span data-start="565.88" data-end="568.47">dedicated to the exclusive use of that</span> <span data-start="568.47" data-end="570.06">process so it is not shirt between</span> <span data-start="570.06" data-end="571.47">processes that for example doesn't</span> <span data-start="571.47" data-end="574.29">belong to any shirt library that is</span> <span data-start="574.29" data-end="578.85">ridiculous processes and a subset of</span> <span data-start="578.85" data-end="580.98">those buys that actually resides in</span> <span data-start="580.98" data-end="583.35">physical memory at the time so this is</span> <span data-start="583.35" data-end="586.83">not something that is paged out to or</span> <span data-start="586.83" data-end="588.69">swapped out today's it is something that</span> <span data-start="588.69" data-end="590.79">has to reside in physical memory for in</span> <span data-start="590.79" data-end="592.32">order for that application to function</span> <span data-start="592.32" data-end="597.5">correctly so that number would represent</span> <span data-start="597.5" data-end="600.69">what chunk of the physical memory</span> <span data-start="600.69" data-end="602.64">resource is that particular process</span> <span data-start="602.64" data-end="604.83">using and therefore how many of these</span> <span data-start="604.83" data-end="606.66">processes could you run at maximum on</span> <span data-start="606.66" data-end="608.64">the honor system with a given amount of</span> <span data-start="608.64" data-end="610.74">physical memory so in case of the</span> <span data-start="610.74" data-end="614.58">process we are running here this is 2.6</span> <span data-start="614.58" data-end="618.15">megabytes right now so i'll just take</span> <span data-start="618.15" data-end="620.19">note of that number and you'll use it in</span> <span data-start="620.19" data-end="626.15">a moment so process level isolation</span> <span data-start="626.15" data-end="631.199">memory</span> <span data-start="631.209" data-end="633.74">and what you're paying for that level of</span> <span data-start="633.74" data-end="644.779">isolation is 5 euro so naturally the</span> <span data-start="644.779" data-end="648.019">question is can we do better and given</span> <span data-start="648.019" data-end="649.339">that I'm only ten minutes into this</span> <span data-start="649.339" data-end="650.72">presentation you can expect that the</span> <span data-start="650.72" data-end="655.25">answer is I hope so so how about trying</span> <span data-start="655.25" data-end="658.1">to use threads in order to isolate</span> <span data-start="658.1" data-end="664.88">applications most modern operating</span> <span data-start="664.88" data-end="669.589">system provides primitives that helped</span> <span data-start="669.589" data-end="672.139">write applications that are isolated at</span> <span data-start="672.139" data-end="674.93">the process scope you can for example</span> <span data-start="674.93" data-end="677.569">put limits on the number of handles the</span> <span data-start="677.569" data-end="679.819">process can create you can put limits on</span> <span data-start="679.819" data-end="682.899">the amount of memory process can consume</span> <span data-start="682.899" data-end="686.269">at the thread level the number of</span> <span data-start="686.269" data-end="688.94">resources you can constrain or control</span> <span data-start="688.94" data-end="690.86">at the level of the operating system</span> <span data-start="690.86" data-end="692.449">from the outside of the process is very</span> <span data-start="692.449" data-end="696.439">limited for example threads are free to</span> <span data-start="696.439" data-end="699.139">access memory within that process there</span> <span data-start="699.139" data-end="701.12">is no makin no native mechanism within</span> <span data-start="701.12" data-end="702.62">any of the operating system that would</span> <span data-start="702.62" data-end="706.569">prevent one thread from accessing memory</span> <span data-start="706.569" data-end="709.189">that another thread has allocated within</span> <span data-start="709.189" data-end="712.519">the same process and this is what the</span> <span data-start="712.519" data-end="715.189">difference between native applications</span> <span data-start="715.189" data-end="718.399">and managed applications becomes</span> <span data-start="718.399" data-end="720.829">important so whenever you are writing an</span> <span data-start="720.829" data-end="726.259">application that you really don't know</span> <span data-start="726.259" data-end="728.48">anything about it could be written in C</span> </p>
<p><span data-start="728.48" data-end="730.93">C++ and use the full functionality</span> <span data-start="730.93" data-end="733.97">offered by an operating system there is</span> <span data-start="733.97" data-end="736.069">really no way to reason about resource</span> <span data-start="736.069" data-end="737.99">consumption at the SAP process level</span> <span data-start="737.99" data-end="740.12">there is no way to constrain resources</span> <span data-start="740.12" data-end="743.509">on a per thread level when the threads</span> <span data-start="743.509" data-end="746.72">running within that app well managed</span> <span data-start="746.72" data-end="748.55">execution environments like server-side</span> <span data-start="748.55" data-end="752.42">JavaScript provide us is a layer that</span> <span data-start="752.42" data-end="754.399">separates the operating system from the</span> <span data-start="754.399" data-end="756.62">application called a hosting layer in</span> <span data-start="756.62" data-end="758.93">case of nodejs it is actually the node</span> <span data-start="758.93" data-end="764.079">code which consists of the v8 JavaScript</span> <span data-start="764.079" data-end="767.6">engine plus the node specific</span> <span data-start="767.6" data-end="769.49">functionality the event loop and all the</span> <span data-start="769.49" data-end="774.74">native modules so it is up to that layer</span> <span data-start="774.74" data-end="776.63">to expose certain primitives to the</span> <span data-start="776.63" data-end="778.76">application to use if the layer chooses</span> <span data-start="778.76" data-end="780.62">to allow the application to spawn new</span> <span data-start="780.62" data-end="783.8">processes it's a certain decision that</span> <span data-start="783.8" data-end="785.24">is made at the hosting layer know the</span> <span data-start="785.24" data-end="787.459">operating system layer so that layer</span> <span data-start="787.459" data-end="790.49">could effectively provide a constraint</span> <span data-start="790.49" data-end="792.38">set of primitives to the application</span> <span data-start="792.38" data-end="799.13">such that it is easy and actually</span> <span data-start="799.13" data-end="802.069">possible to control resource consumption</span> <span data-start="802.069" data-end="805.449">and limit resource consumption a</span> <span data-start="805.449" data-end="808.67">finer-grained in the process so in</span> <span data-start="808.67" data-end="809.899">theory you could run multiple</span> <span data-start="809.899" data-end="811.85">applications within a single process and</span> <span data-start="811.85" data-end="813.98">use the hosting layer to provide both</span> <span data-start="813.98" data-end="816.8">isolation and resource metering between</span> <span data-start="816.8" data-end="823.779">these applications so a solution that</span> <span data-start="823.779" data-end="827.389">uses hosting layer around a javascript</span> <span data-start="827.389" data-end="832.49">v8 engine could look like like this we</span> <span data-start="832.49" data-end="834.05">will have one process there is running</span> <span data-start="834.05" data-end="836">multiple threads each thread will be</span> <span data-start="836" data-end="838.85">running a different application a</span> </p>
<p><span data-start="838.85" data-end="840.709">JavaScript application these</span> <span data-start="840.709" data-end="843.259">applications theoretically can compete</span> <span data-start="843.259" data-end="846.38">for access to operating system resources</span> <span data-start="846.38" data-end="849.139">and it is up to the hosting layer to</span> <span data-start="849.139" data-end="851.54">ensure fair access to resources as well</span> <span data-start="851.54" data-end="855.199">as isolation between these context so</span> <span data-start="855.199" data-end="861.16">JavaScript the v8 engine provides a few</span> <span data-start="861.16" data-end="864.91">key concepts that help realize that</span> <span data-start="864.91" data-end="867.68">possibility so first of all there is a</span> <span data-start="867.68" data-end="870.709">concept of a v8 isolate an isolette</span> <span data-start="870.709" data-end="873.829">allows you to create a standalone</span> <span data-start="873.829" data-end="876.259">instance of a JavaScript engine within a</span> <span data-start="876.259" data-end="877.61">process and you can have multiple of</span> <span data-start="877.61" data-end="879.74">those what standalone means in this case</span> <span data-start="879.74" data-end="881.899">is that each instance is completely</span> <span data-start="881.899" data-end="883.79">isolated from each other in terms of the</span> <span data-start="883.79" data-end="887.059">resources then the memory resources it</span> <span data-start="887.059" data-end="889.25">uses because its own he passes on</span> <span data-start="889.25" data-end="892.01">garbage collector if you dispose of a</span> <span data-start="892.01" data-end="894.589">sea of one v8 isolate within the process</span> <span data-start="894.589" data-end="899.54">it doesn't affect the other isolates so</span> <span data-start="899.54" data-end="902.149">as far as I understand v8 isolates have</span> <span data-start="902.149" data-end="906.439">been meant to support concurrent</span> <span data-start="906.439" data-end="907.939">execution of multiple JavaScript</span> <span data-start="907.939" data-end="909.439">programs within a single process and</span> <span data-start="909.439" data-end="912.199">different threads a second concert that</span> <span data-start="912.199" data-end="913.76">is not shown here and I'll go into that</span> <span data-start="913.76" data-end="917.689">later is a Viet context VidCon text</span> <span data-start="917.689" data-end="920">provides the in that kind of data</span> <span data-start="920" data-end="922.22">environment within which JavaScript</span> <span data-start="922.22" data-end="925.04">application execute specifically in case</span> <span data-start="925.04" data-end="927.38">of JavaScript it controls the global</span> <span data-start="927.38" data-end="930.799">object that is available to the</span> <span data-start="930.799" data-end="933.319">application code when it runs so you can</span> <span data-start="933.319" data-end="935.089">have multiple</span> <span data-start="935.089" data-end="938.329">v8 context and multiple isolates when</span> <span data-start="938.329" data-end="940.249">you run JavaScript code you have to</span> <span data-start="940.249" data-end="943.97">choose one isolate and one v8 context</span> <span data-start="943.97" data-end="945.439">the data application will be running in</span> <span data-start="945.439" data-end="947.6">in this case the reason I didn't show a</span> <span data-start="947.6" data-end="950.99">context is because there is kind of one</span> <span data-start="950.99" data-end="953.18">to one relationship between isolate any</span> <span data-start="953.18" data-end="954.949">context so for each isolate I create I</span> <span data-start="954.949" data-end="957.559">get only one context and execute the the</span> </p>
<p><span data-start="957.559" data-end="958.939">JavaScript application within that</span> <span data-start="958.939" data-end="963.47">context so let's have a look at how that</span> <span data-start="963.47" data-end="973.07">looks like</span> <span data-start="973.08" data-end="975.9">so the tensile prototype which is that</span> <span data-start="975.9" data-end="977.31">little hosting lane that I've created</span> <span data-start="977.31" data-end="979.98">for the purpose of this demo allows you</span> <span data-start="979.98" data-end="982.26">to actually start multiple apps inside</span> <span data-start="982.26" data-end="985.83">of a single process so i can three start</span> <span data-start="985.83" data-end="988.38">three web chat applications in this case</span> <span data-start="988.38" data-end="992.07">and each of these apps is again running</span> <span data-start="992.07" data-end="997.26">on its own thread and using its own v8</span> <span data-start="997.26" data-end="999.03">isolate so the data of these apps is</span> <span data-start="999.03" data-end="1001.97">completely isolated in key in terms of</span> <span data-start="1001.97" data-end="1004.58">access to the cpu it is actually the</span> <span data-start="1004.58" data-end="1006.2">operating system that ensures fair</span> <span data-start="1006.2" data-end="1008.39">access to the severe because thread</span> <span data-start="1008.39" data-end="1009.77">scheduling happens in the operating</span> <span data-start="1009.77" data-end="1013.82">system level so let's not just test the</span> <span data-start="1013.82" data-end="1015.62">hypothesis that these apps are actually</span> <span data-start="1015.62" data-end="1029.949">isolated I'll pick the first one</span> <span data-start="1029.959" data-end="1034.52">so this is strut one and I'll take the</span> <span data-start="1034.52" data-end="1050.62">second one</span> <span data-start="1050.63" data-end="1053.3">and this is the chapter so you can you</span> <span data-start="1053.3" data-end="1056.09">can do chatting in this window it</span> <span data-start="1056.09" data-end="1057.41">doesn't affect the chat in the other</span> <span data-start="1057.41" data-end="1059.57">window so the level of the day doubt</span> <span data-start="1059.57" data-end="1061.94">that these chat rooms exchange they are</span> <span data-start="1061.94" data-end="1064.22">isolated now in terms of resource</span> <span data-start="1064.22" data-end="1067.61">consumption one thing that the hosting</span> <span data-start="1067.61" data-end="1069.65">layer that I've implemented here does is</span> <span data-start="1069.65" data-end="1072.53">also provide metering of resource</span> <span data-start="1072.53" data-end="1082.19">consumption on a per program basis so</span> <span data-start="1082.19" data-end="1084.86">what it does it basically shows you cpu</span> <span data-start="1084.86" data-end="1088.04">usage network usage and memory usage on</span> <span data-start="1088.04" data-end="1091.52">a per program basis so you notice that</span> <span data-start="1091.52" data-end="1093.2">you know this particular web chat</span> <span data-start="1093.2" data-end="1095.72">instance has used that many cpu cycles</span> <span data-start="1095.72" data-end="1098.63">so far the exchange a certain number of</span> <span data-start="1098.63" data-end="1102.26">bytes and that number will increase as</span> <span data-start="1102.26" data-end="1107.48">you type something number of HTTP</span> <span data-start="1107.48" data-end="1109.79">requests and also memory usage so memory</span> <span data-start="1109.79" data-end="1113.36">usage refers to the name of our</span> <span data-start="1113.36" data-end="1116.69">locations within the heap maintained by</span> <span data-start="1116.69" data-end="1118.79">the v8 isolated applications running in</span> <span data-start="1118.79" data-end="1122.36">one thing to notice is that these</span> <span data-start="1122.36" data-end="1124.28">numbers and are different from the</span> <span data-start="1124.28" data-end="1130.95">second web shot that I have running here</span> <span data-start="1130.96" data-end="1134.17">so this is let's say thirty four</span> <span data-start="1134.17" data-end="1137.33">kilobytes exchange this is 3 80</span> <span data-start="1137.33" data-end="1138.86">kilobytes exchange so you've got</span> <span data-start="1138.86" data-end="1141.41">metering and resource control the</span> <span data-start="1141.41" data-end="1143.03">program level and these programs are</span> <span data-start="1143.03" data-end="1144.29">running within the same process on</span> <span data-start="1144.29" data-end="1148.97">different threats so this is greatest</span> <span data-start="1148.97" data-end="1150.68">demonstrates that at that level we can</span> <span data-start="1150.68" data-end="1155.24">actually measure resources and isolate</span> <span data-start="1155.24" data-end="1157.67">applications of the subprocess level now</span> <span data-start="1157.67" data-end="1160.25">let's see how heavy weight it is to run</span> <span data-start="1160.25" data-end="1173.17">many of those applications</span> <span data-start="1173.18" data-end="1177.37">so right 50 of them in a single process</span> <span data-start="1177.37" data-end="1179.45">now let's have a look at the memory</span> <span data-start="1179.45" data-end="1185.87">footprint of this 70 megabytes so go</span> <span data-start="1185.87" data-end="1196.25">back to excel thread 70 megabytes by 50</span> <span data-start="1196.25" data-end="1200">in programs so it is 1.4 megabyte per</span> <span data-start="1200" data-end="1204.53">program now if you if you assume that</span> <span data-start="1204.53" data-end="1208.1">the short hosting plan will will be</span> <span data-start="1208.1" data-end="1209.87">proportional to the memory consumption</span> <span data-start="1209.87" data-end="1212.06">of that application that shirt hosting</span> <span data-start="1212.06" data-end="1226.88">plan would cost less than 3 Europe</span> <span data-start="1226.89" data-end="1231.58">so basically what i have shown right now</span> <span data-start="1231.58" data-end="1233.38">is that from the perspective of the data</span> <span data-start="1233.38" data-end="1236.74">center the the hosting provider can now</span> <span data-start="1236.74" data-end="1239.52">run the same number of applications on</span> <span data-start="1239.52" data-end="1242.32">less hardware so this is a great out</span> <span data-start="1242.32" data-end="1243.82">section of the hardware at the end of</span> <span data-start="1243.82" data-end="1248.14">the rackspace they're giving there are</span> <span data-start="1248.14" data-end="1250.08">fewer machines used to run the same</span> <span data-start="1250.08" data-end="1254.14">number of apps theoretically the cost of</span> <span data-start="1254.14" data-end="1257.02">the shell toasting goes down and it can</span> <span data-start="1257.02" data-end="1258.28">be reflected in the price of the</span> <span data-start="1258.28" data-end="1261.45">hosting plan which is now around 3 euro</span> <span data-start="1261.45" data-end="1264.64">can you do better than that is there any</span> <span data-start="1264.64" data-end="1269.96">way we can reduce the price even further</span> <span data-start="1269.97" data-end="1272.35">so let's see there is a way we can</span> <span data-start="1272.35" data-end="1274.87">actually share a single thread among</span> <span data-start="1274.87" data-end="1277.3">several applications running on the</span> <span data-start="1277.3" data-end="1279.79">system in a way that still provides the</span> <span data-start="1279.79" data-end="1282.04">guarantees that we can isolate data</span> <span data-start="1282.04" data-end="1285.73">between the applications and control</span> <span data-start="1285.73" data-end="1286.96">resource consumption for each</span> <span data-start="1286.96" data-end="1293.38">application and this is what the v8</span> <span data-start="1293.38" data-end="1299.95">context comes in in this solution I'm</span> <span data-start="1299.95" data-end="1302.65">going to use a single thread in the</span> <span data-start="1302.65" data-end="1305.32">process a single d8 isolate which means</span> <span data-start="1305.32" data-end="1306.91">that all the applications running within</span> <span data-start="1306.91" data-end="1309.43">that process will use the same keep the</span> <span data-start="1309.43" data-end="1311.82">same gap in the same garbage collector</span> <span data-start="1311.82" data-end="1314.17">however I will use a different v8</span> <span data-start="1314.17" data-end="1316.93">context for each of these apps this is</span> <span data-start="1316.93" data-end="1319.12">actually the model that no Jas is using</span> <span data-start="1319.12" data-end="1323.83">today however to my knowledge node has</span> <span data-start="1323.83" data-end="1325.84">not been started off with intent to</span> <span data-start="1325.84" data-end="1329.59">actually provide the level of isolation</span> <span data-start="1329.59" data-end="1330.79">that allows you to run competing</span> <span data-start="1330.79" data-end="1333.19">applications within the same process you</span> <span data-start="1333.19" data-end="1336.21">can spawn multiple contexts inside of</span> <span data-start="1336.21" data-end="1340.36">node using the vm module but</span> <span data-start="1340.36" data-end="1342.73">the code executing in this context is</span> <span data-start="1342.73" data-end="1345.429">kind of by default as soon to execute</span> <span data-start="1345.429" data-end="1348.07">within the same kind of trust boundary</span> <span data-start="1348.07" data-end="1353.799">you can belong to the same tenant of in</span> <span data-start="1353.799" data-end="1358.24">the in the context of short hosting so</span> <span data-start="1358.24" data-end="1359.86">why is that there are actually two</span> <span data-start="1359.86" data-end="1364.9">challenges with this model one is the</span> <span data-start="1364.9" data-end="1367.12">the most evil program you can write as</span> <span data-start="1367.12" data-end="1369.549">this basically while true this this</span> <span data-start="1369.549" data-end="1374.38">program will take the CPU and prevent</span> <span data-start="1374.38" data-end="1376.96">other programs that attempts to run on</span> <span data-start="1376.96" data-end="1380.11">the same thread from executing at the</span> <span data-start="1380.11" data-end="1381.669">operating system level that the</span> <span data-start="1381.669" data-end="1384.1">operating system will when at season</span> <span data-start="1384.1" data-end="1385.809">infinite loop like that it'll actually</span> <span data-start="1385.809" data-end="1387.97">at some point preempted up thread and</span> <span data-start="1387.97" data-end="1391.15">give the cpu to another thread that is</span> <span data-start="1391.15" data-end="1393.16">open on that system but remember that in</span> <span data-start="1393.16" data-end="1395.2">this particular case we are running</span> <span data-start="1395.2" data-end="1397.48">multiple JavaScript applications that</span> <span data-start="1397.48" data-end="1399.16">potentially compete with each other on a</span> <span data-start="1399.16" data-end="1401.29">single thread so if one of those</span> <span data-start="1401.29" data-end="1403.87">applications has called like that it</span> <span data-start="1403.87" data-end="1406.919">will basically hold up to the CPU</span> <span data-start="1406.919" data-end="1408.82">infinitely from the perspective of</span> <span data-start="1408.82" data-end="1411.64">sharing it with other JavaScript</span> <span data-start="1411.64" data-end="1416.86">applications so this is not to say it is</span> <span data-start="1416.86" data-end="1419.11">not impossible to prevent this from</span> <span data-start="1419.11" data-end="1420.549">happening remember the name on your arm</span> <span data-start="1420.549" data-end="1422.5">code like this in JavaScript what</span> <span data-start="1422.5" data-end="1424.96">happens at the JavaScript engine layer</span> <span data-start="1424.96" data-end="1429.22">that code gets compile into some form of</span> <span data-start="1429.22" data-end="1432.74">assembly code and it is not</span> <span data-start="1432.74" data-end="1435.63">theoretically not impossible to inject</span> <span data-start="1435.63" data-end="1439.05">checks into the generated code that will</span> <span data-start="1439.05" data-end="1442.26">prevent runaway programs from executing</span> <span data-start="1442.26" data-end="1444.54">however such mechanism that does not</span> <span data-start="1444.54" data-end="1447.27">exist today in any of the JavaScript</span> <span data-start="1447.27" data-end="1451.38">engines that I know of another problem</span> <span data-start="1451.38" data-end="1454.1">with the context based approach is</span> <span data-start="1454.1" data-end="1459.02">limiting memory consumption so running</span> <span data-start="1459.02" data-end="1461.58">several applications using different</span> <span data-start="1461.58" data-end="1464.49">contexts on the same v8 as I slit</span> <span data-start="1464.49" data-end="1467.58">implies that all these apps are</span> <span data-start="1467.58" data-end="1469.35">allocating memory from the same heap</span> <span data-start="1469.35" data-end="1470.97">managed by a single instance of the</span> </p>
<p><span data-start="1470.97" data-end="1473.76">JavaScript engine so a program like that</span> <span data-start="1473.76" data-end="1478.59">will effectively result in every</span> <span data-start="1478.59" data-end="1482.49">increasing memory allocation and there</span> <span data-start="1482.49" data-end="1486.66">is no mechanism in the VA JavaScript</span> <span data-start="1486.66" data-end="1489.54">engine today that kind of native</span> <span data-start="1489.54" data-end="1491.91">mechanism that allows you to control</span> <span data-start="1491.91" data-end="1494.49">memory consumption repair context level</span> <span data-start="1494.49" data-end="1496.62">such functionally can be built in on top</span> <span data-start="1496.62" data-end="1499.02">of the primitives provided by the v8 but</span> <span data-start="1499.02" data-end="1501.27">this is not something that my hosting</span> <span data-start="1501.27" data-end="1504.09">layer currently has so again these are</span> <span data-start="1504.09" data-end="1508.14">two challenges with this approach none</span> <span data-start="1508.14" data-end="1510.87">of which is kind of a smoking gun reason</span> <span data-start="1510.87" data-end="1512.99">not to do it I think there are ways to</span> <span data-start="1512.99" data-end="1515.76">to address that problem however it is</span> <span data-start="1515.76" data-end="1519.27">not immediately available in either the</span> <span data-start="1519.27" data-end="1521.7">hosting layer that I've done all the v8</span> <span data-start="1521.7" data-end="1525.3">engine so nevertheless let's have a look</span> <span data-start="1525.3" data-end="1528.78">at what's the density that running</span> </p>
<p><span data-start="1528.78" data-end="1530.76">JavaScript applications or the sub</span> <span data-start="1530.76" data-end="1540.899">thread level using v8 context gives us</span> <span data-start="1540.909" data-end="1547.599">so I'm now going to run dancer using</span> <span data-start="1547.599" data-end="1549.519">context as the isolation boundary</span> <span data-start="1549.519" data-end="1554.859">between applications and this time I'm</span> <span data-start="1554.859" data-end="1557.859">going to rise the ball and around 1,000</span> <span data-start="1557.859" data-end="1579.23">of them</span> <span data-start="1579.24" data-end="1588.13">you</span> <span data-start="1588.14" data-end="1593.71">here</span> <span data-start="1593.72" data-end="1596.03">alright so you have 1000 web chat</span> <span data-start="1596.03" data-end="1599.54">applications running within a single OS</span> <span data-start="1599.54" data-end="1603.5">process using a single thread and</span> <span data-start="1603.5" data-end="1606.32">different v8 context for that provide</span> <span data-start="1606.32" data-end="1607.82">isolation of data between these</span> <span data-start="1607.82" data-end="1610.43">applications so there's a large number</span> <span data-start="1610.43" data-end="1612.5">so let's just make sure that it is still</span> <span data-start="1612.5" data-end="1625.12">running indeed</span> <span data-start="1625.13" data-end="1629.25">you go um so let's have a look at the</span> <span data-start="1629.25" data-end="1634.169">resource consumption again cpu is pretty</span> <span data-start="1634.169" data-end="1636.09">much still dormant remember these are</span> <span data-start="1636.09" data-end="1637.44">lightweight with obligations that are</span> <span data-start="1637.44" data-end="1639.09">not using cpu they're just sitting there</span> <span data-start="1639.09" data-end="1641.309">and maintaining a state of readiness to</span> <span data-start="1641.309" data-end="1643.289">accept user messages so from that</span> <span data-start="1643.289" data-end="1646.32">perspective you are fine if you look at</span> <span data-start="1646.32" data-end="1650.4">the process memory consumption 150</span> <span data-start="1650.4" data-end="1659.96">megabytes</span> <span data-start="1659.97" data-end="1662.43">one thousand roses no thousand</span> <span data-start="1662.43" data-end="1670.62">applications oops so that's 150</span> <span data-start="1670.62" data-end="1673.26">kilobytes per application so this is</span> <span data-start="1673.26" data-end="1674.64">actually pretty good let's see how a</span> <span data-start="1674.64" data-end="1676.98">short hosting plan like that would cost</span> <span data-start="1676.98" data-end="1679.65">if it was to be priced and in proportion</span> <span data-start="1679.65" data-end="1687.06">to memory consumption 30 cents so that's</span> <span data-start="1687.06" data-end="1693.69">better than five Bureau so with that I'm</span> <span data-start="1693.69" data-end="1695.73">actually going to start a little social</span> <span data-start="1695.73" data-end="1729.12">experiment</span> <span data-start="1729.13" data-end="1731.49">so if you have any questions about</span> <span data-start="1731.49" data-end="1737.29">fighting city server-side JavaScript why</span> <span data-start="1737.29" data-end="1739.42">don't you look up Twitter go to this URL</span> <span data-start="1739.42" data-end="1741.82">and ask it and let's see what</span> <span data-start="1741.82" data-end="1756.68">unmonitored web chat results with</span> <span data-start="1756.69" data-end="1760.78">so again if you look at the data center</span> <span data-start="1760.78" data-end="1765.4">we started off with we allow the hosting</span> <span data-start="1765.4" data-end="1767.65">company to share a bunch of extra</span> <span data-start="1767.65" data-end="1771.76">machines by going subprocess level the</span> <span data-start="1771.76" data-end="1773.56">end result is if you turn these cost</span> <span data-start="1773.56" data-end="1777.19">savings into the reduction of the shot</span> <span data-start="1777.19" data-end="1779.47">hosting plan price with around 3 euro</span> <span data-start="1779.47" data-end="1782.44">cents which is a reasonable price to pay</span> <span data-start="1782.44" data-end="1783.52">anything for my little web chat</span> <span data-start="1783.52" data-end="1786.82">application so basically we started off</span> <span data-start="1786.82" data-end="1788.68">with the notion that five euros too much</span> <span data-start="1788.68" data-end="1791.59">to pay for for hosting very simple web</span> <span data-start="1791.59" data-end="1796.33">applications like that we have shown and</span> <span data-start="1796.33" data-end="1798.31">demonstrate mechanisms that can be used</span> <span data-start="1798.31" data-end="1801.78">to lower the price quite dramatically</span> <span data-start="1801.78" data-end="1807.81">over 10 x and if you are interested in</span> <span data-start="1807.81" data-end="1810.82">looking at the source code of the denser</span> <span data-start="1810.82" data-end="1812.89">cost which is really a very thin wrapper</span> <span data-start="1812.89" data-end="1816.49">around the javascript v8 engine it is</span> <span data-start="1816.49" data-end="1819.88">available on github on the same account</span> <span data-start="1819.88" data-end="1822.22">there is also a project called is know</span> <span data-start="1822.22" data-end="1824.02">that i'm working on kind of during the</span> <span data-start="1824.02" data-end="1828.69">day at microsoft that that is used to</span> <span data-start="1828.69" data-end="1833.1">help hosting no J's applications in IAS</span> <span data-start="1833.1" data-end="1835.36">if you have any questions there is most</span> <span data-start="1835.36" data-end="1838.15">little pieces my contact and with that</span> <span data-start="1838.15" data-end="1857.049">let's go back to the questions</span> <span data-start="1857.059" data-end="1859.86">hi great presentation so I have a</span> <span data-start="1859.86" data-end="1863.58">question about the overhead so how does</span> <span data-start="1863.58" data-end="1866.82">the the overhead plays into to this how</span> <span data-start="1866.82" data-end="1871.1">much does the context switching of v8</span> <span data-start="1871.1" data-end="1874.38">coast in terms of CPU and memory usage</span> <span data-start="1874.38" data-end="1877.2">in this because we saw all dormant</span> <span data-start="1877.2" data-end="1880.38">processes and DD applications were</span> <span data-start="1880.38" data-end="1883.799">enthused intensively so did you just put</span> <span data-start="1883.799" data-end="1886.169">this into under stress into to verify</span> <span data-start="1886.169" data-end="1891.09">how it relate how it compares with a</span> <span data-start="1891.09" data-end="1893.37">traditional approach with process</span> <span data-start="1893.37" data-end="1896.28">isolation yeah so effectively what this</span> <span data-start="1896.28" data-end="1897.75">approach is showing that there are</span> <span data-start="1897.75" data-end="1901.59">certain constant cost of creating a</span> <span data-start="1901.59" data-end="1903.929">process on an operating system as well</span> <span data-start="1903.929" data-end="1905.82">as certain constant cost of creating a</span> <span data-start="1905.82" data-end="1909">thread in an operating system that if</span> <span data-start="1909" data-end="1910.59">you take that cost and you actually</span> <span data-start="1910.59" data-end="1913.14">average it out across a large number of</span> <span data-start="1913.14" data-end="1914.58">applications that becomes manageable</span> <span data-start="1914.58" data-end="1919.14">small so in case of of a process it is</span> <span data-start="1919.14" data-end="1921">basically all the static like libraries</span> <span data-start="1921" data-end="1923.01">that you have to load up in order for a</span> <span data-start="1923.01" data-end="1924.99">process to function once you spin</span> <span data-start="1924.99" data-end="1926.669">multiple threads within the process that</span> <span data-start="1926.669" data-end="1929.549">actually show the static libraries not</span> <span data-start="1929.549" data-end="1932.61">cost averages out nicely at a threat</span> <span data-start="1932.61" data-end="1935.01">level once you create an additional</span> <span data-start="1935.01" data-end="1938.669">thread you have to allocate a stack size</span> <span data-start="1938.669" data-end="1941.76">for each thread which again you can</span> <span data-start="1941.76" data-end="1945.299">average out the cost of that memory</span> <span data-start="1945.299" data-end="1946.98">allocation when when you're running</span> <span data-start="1946.98" data-end="1949.89">multiple apps on a single thread on top</span> <span data-start="1949.89" data-end="1951.84">of that there is the cost of running a</span> <span data-start="1951.84" data-end="1954.36">single JavaScript engine which basically</span> <span data-start="1954.36" data-end="1957.27">allocates its own heap memory to manage</span> <span data-start="1957.27" data-end="1959.16">memory locations of the JavaScript</span> <span data-start="1959.16" data-end="1963.96">program so whenever you can show the key</span> <span data-start="1963.96" data-end="1967.02">across many apps you can also reduce the</span> <span data-start="1967.02" data-end="1968.2">average</span> <span data-start="1968.2" data-end="1979.62">memory consumption will be dubs</span> <span data-start="1979.63" data-end="1986.07">by the way is Andrea here</span> <span data-start="1986.08" data-end="1993.82">get yourself a mic up there hi em</span> <span data-start="1993.82" data-end="1996.07">question how is Mary using your online</span> <span data-start="1996.07" data-end="1999.309">news is the same like we saw on your</span> <span data-start="1999.309" data-end="2002.49">winners or because I would imagine a lot</span> <span data-start="2002.49" data-end="2006.72">of hosting platforms would use lonex I'm</span> <span data-start="2006.72" data-end="2009.33">sorry can you repeat I yo this is tested</span> <span data-start="2009.33" data-end="2011.399">on Windows I guess have you measured how</span> <span data-start="2011.399" data-end="2014.46">many usages and liners is the same I've</span> <span data-start="2014.46" data-end="2018.059">done similar experiments on Linux using</span> <span data-start="2018.059" data-end="2021.12">node with a second approach the the one</span> <span data-start="2021.12" data-end="2025.919">in which you run multiple JavaScript</span> <span data-start="2025.919" data-end="2028.019">applications using context level</span> <span data-start="2028.019" data-end="2030.419">isolation and there is also very very</span> <span data-start="2030.419" data-end="2033.149">comparable you know the difference is</span> <span data-start="2033.149" data-end="2035.549">you could point out between Windows and</span> </p>
<p><span data-start="2035.549" data-end="2038.13">Linux in this case would really probably</span> <span data-start="2038.13" data-end="2041.639">revolve around possibly around memory</span> <span data-start="2041.639" data-end="2043.289">allocations of the process and Fred</span> <span data-start="2043.289" data-end="2045.179">scope whenever you are running</span> <span data-start="2045.179" data-end="2049.889">applications in that quantity and you</span> <span data-start="2049.889" data-end="2051.929">average out the memory allocations they</span> <span data-start="2051.929" data-end="2054.899">really become irrelevant these</span> <span data-start="2054.899" data-end="2062.04">differences become really leery minor so</span> <span data-start="2062.04" data-end="2065.52">there is also a third model in which you</span> <span data-start="2065.52" data-end="2068.849">will have a application well thread per</span> <span data-start="2068.849" data-end="2071.94">application but to make the threads</span> <span data-start="2071.94" data-end="2074.429">share the same v8 instance so it has</span> <span data-start="2074.429" data-end="2077.01">something called the preemption which</span> <span data-start="2077.01" data-end="2081">allows you to basically say 28 please</span> <span data-start="2081" data-end="2084.899">switch between these threats every two</span> <span data-start="2084.899" data-end="2088.29">milliseconds or something and this will</span> <span data-start="2088.29" data-end="2092.099">first give you a lower memory usage like</span> <span data-start="2092.099" data-end="2095.559">in your second model and</span> <span data-start="2095.559" data-end="2097.569">in the same time you will be protected</span> <span data-start="2097.569" data-end="2100.15">from the wild true loops because we it</span> <span data-start="2100.15" data-end="2102.249">will just trimmed between the thread</span> <span data-start="2102.249" data-end="2105.729">skewing each thread a fair amount of via</span> <span data-start="2105.729" data-end="2108.999">rock yes I agree there are many many</span> <span data-start="2108.999" data-end="2111.16">models I haven't experimented with that</span> <span data-start="2111.16" data-end="2113.739">are perfectly legitimate these are just</span> <span data-start="2113.739" data-end="2116.499">to kind of reference points in the</span> <span data-start="2116.499" data-end="2119.14">entire space of possible solutions so</span> <span data-start="2119.14" data-end="2130.43">definitely as you're right</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
