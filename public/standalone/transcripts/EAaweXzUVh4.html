<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>EAaweXzUVh4</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/EAaweXzUVh4?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="0.179" data-end="61.8">Keeping Passwsords Safe in 2017 By</span> <span data-start="61.8" data-end="82.27">Emil Bay</span> <span data-start="82.27" data-end="105.229">[no audio] >> I have worked at an advertisement agency</span> <span data-start="105.229" data-end="108.22">and I worked at a high performance computing lab.</span> </p>
<p><span data-start="108.22" data-end="113.369">And most recently I've worked at a newspaper as a data journalist.</span> <span data-start="113.369" data-end="119.83">But today we're talking about passwords.</span> <span data-start="119.83" data-end="123.46">Just to get everyone on the same page, I'm sure you know what passwords are.</span> <span data-start="123.46" data-end="130.649">But technically if you know a password, it's something to identify yourself.</span> <span data-start="130.649" data-end="136.689">If you know a password, it's pretty much equivalent to your identity online.</span> <span data-start="136.689" data-end="140.079">When you do on a Website, it's not like you're showing your passport or anything like that.</span> <span data-start="140.079" data-end="142.109">You have a password.</span> </p>
<p><span data-start="142.109" data-end="148.139">And the state of the world, everyone has passwords.</span> <span data-start="148.139" data-end="154.659">My grandmother has a password as well.�if you can steal someone's password, it has a</span> <span data-start="154.659" data-end="157.189">lot of implications.</span> <span data-start="157.189" data-end="162.56">And as a matter of fact, most people only have one password.</span> </p>
<p><span data-start="162.56" data-end="165.419">So your password is your identity.</span> <span data-start="165.419" data-end="167.7">If someone steals it, they have your whole identity.</span> <span data-start="167.7" data-end="172.269">They can log in as you everyone on the Internet kind of thing.</span> <span data-start="172.269" data-end="175.419">So what can we do about this?</span> <span data-start="175.419" data-end="177.499">As I see it, three things we can do.</span> </p>
<p><span data-start="177.499" data-end="182.799">Eradicate all security holes which is a pretty noble task.</span> <span data-start="182.799" data-end="185.129">I think that's what the world strives to do, right?</span> <span data-start="185.129" data-end="187.439">But it's probably not going to work out in the shortterm.</span> <span data-start="187.439" data-end="199.589">Another thing and another thing we can do is have unique passwords everywhere.</span> <span data-start="199.589" data-end="204.069">I don't know about you, but I keep a password safe with a unique password for every Website.</span> </p>
<p><span data-start="204.069" data-end="208.76">You can't trust Websites, I'm going to show you.</span> <span data-start="208.76" data-end="216.079">But as software provider, you can use safer password storage.</span> <span data-start="216.079" data-end="219.159">That's what we're going to talk about today.</span> <span data-start="219.159" data-end="220.879">So here's a question for you.</span> <span data-start="220.879" data-end="223.249">What do all these companies have in common?</span> <span data-start="223.249" data-end="227.159">They were visited by this guy.</span> <span data-start="227.159" data-end="230.279">Now, in the Lego world, every Lego man looks alike.</span> <span data-start="230.279" data-end="231.34">This is not me.</span> <span data-start="231.34" data-end="236.359">This is some other Lego guy, right?</span> <span data-start="236.359" data-end="241.67">So in this talk the way we're going to go about things is we're going to build safe</span> <span data-start="241.67" data-end="244.819">password storage from the ground up.</span> <span data-start="244.819" data-end="249.18">The first and easiest way to store passwords is plain text.</span> <span data-start="249.18" data-end="256.739">And I'm sure plain text to a lot of you guys it already has ate alarm bells ringing, right?</span> <span data-start="256.739" data-end="258.379">So let's look at some code here.</span> </p>
<p><span data-start="258.379" data-end="263.71">Look at the examples after the talk, this is the model I've used throughout all the</span> <span data-start="263.71" data-end="264.71">examples.</span> <span data-start="264.71" data-end="267.6">So we have a database of some kind.</span> <span data-start="267.6" data-end="271.93">In this case, it's just a map that sits over in another file.</span> <span data-start="271.93" data-end="275.22">Then we have a register function and a login function.</span> <span data-start="275.22" data-end="279.11">Often these two functions are not symmetrical.</span> <span data-start="279.11" data-end="285.27">You store the function, and on the other you have to verify that the password was the same</span> <span data-start="285.27" data-end="287.71">as was provided when you signed up.</span> <span data-start="287.71" data-end="294.68">And we return true or false depending on whether the password is valid.</span> <span data-start="294.68" data-end="298.68">And you can see down here at the bottom I have a register function where I register</span> <span data-start="298.68" data-end="304.9">my user name and then because we are in Germany, I have chosen the password to be handschuh,</span> <span data-start="304.9" data-end="306.3">which is glove.</span> <span data-start="306.3" data-end="308.99">But literally translated means "Hand shoe."</span> <span data-start="308.99" data-end="310.9">I don't know.</span> <span data-start="310.9" data-end="314.65">And we should attempt to log in and see true on the console.</span> <span data-start="314.65" data-end="323.471">And afterwards I'm going to use the wrong password which means funny� but it can mean</span> <span data-start="323.471" data-end="325.27">funny guy kind of thing.</span> </p>
<p><span data-start="325.27" data-end="328.8">Let's see that the model for the talk works.</span> <span data-start="328.8" data-end="331.539">We get a true and a false, which we're supposed to.</span> <span data-start="331.539" data-end="332.599">Great.</span> <span data-start="332.599" data-end="337.8">Now, as I said before, plain text doesn't really work out.</span> <span data-start="337.8" data-end="342.659">But that doesn't stop these guys from actually implementing plain text storage for passwords.</span> <span data-start="342.659" data-end="348.69">I don't know if you have heard about this famous Sony hack in 2011 where they stole</span> <span data-start="348.69" data-end="353.729">all of the PlayStation network� they were stored in plain text.</span> <span data-start="353.729" data-end="360.69">Bell, a Canadian television provider stored all the passwords in plain text.</span> <span data-start="360.69" data-end="362.86">Comcast.</span> <span data-start="362.86" data-end="365.03">Yeah.</span> <span data-start="365.03" data-end="366.729">So the problem, plain text.</span> <span data-start="366.729" data-end="368.879">Just a problem enough itself.</span> <span data-start="368.879" data-end="370.28">What can we do about it?</span> <span data-start="370.28" data-end="372.44">We can try to obscure the passwords.</span> <span data-start="372.44" data-end="374.55">We're not going to encrypt the passwords.</span> </p>
<p><span data-start="374.55" data-end="376.129">That's not what we're going.</span> <span data-start="376.129" data-end="381.879">We're going to look at another vendor later that did encrypt their passwords but had no</span> <span data-start="381.879" data-end="385.509">idea what they were doing.</span> <span data-start="385.509" data-end="389.28">What are we going to use?</span> </p>
<p><span data-start="389.28" data-end="391.85">It's something called a hash function.</span> <span data-start="391.85" data-end="397.659">You probably know what a hash function is or heard the word hash function.</span> <span data-start="397.659" data-end="403.27">And hash functions powers the small, random numbers you get from your Git commits.</span> <span data-start="403.27" data-end="408.759">But they have other properties that are variable.</span> <span data-start="408.759" data-end="409.91">One is deterministic.</span> <span data-start="409.91" data-end="414.22">So deterministic means that the output is solely dependent on the input.</span> <span data-start="414.22" data-end="420.59">There is nothing in there, what's the alignment of the planets, what's the random number,</span> <span data-start="420.59" data-end="423.52">take a rabbit out of a hat.</span> <span data-start="423.52" data-end="425.219">So deterministic, very important.</span> <span data-start="425.219" data-end="429.12">Number two, it's preimage resistant.</span> <span data-start="429.12" data-end="432.96">That's a nice way of saying that it's one way.</span> <span data-start="432.96" data-end="437.37">It means that you can't take the output and figure out what the input was.</span> </p>
<p><span data-start="437.37" data-end="439.59">You can only take the input and get the output.</span> <span data-start="439.59" data-end="440.819">Never the other way around kind of thing.</span> <span data-start="440.819" data-end="447.509">And it has another property that sounds kind of similar, the preimage assistant.</span> <span data-start="447.509" data-end="453.59">And that means if you have a hash function, or you have the hash, you know what the input</span> <span data-start="453.59" data-end="457.599">to the hash function was, you can find another input that gives the same hash.</span> <span data-start="457.599" data-end="465.15">So that means you can find another password that gives the same hash.</span> <span data-start="465.15" data-end="469.419">Meaning that you would be able to find like a completely different password and try to</span> <span data-start="469.419" data-end="471.74">crack the hashing function.</span> </p>
<p><span data-start="471.74" data-end="474.159">And last thing is collision resistance.</span> <span data-start="474.159" data-end="476.47">And that's kind of an involuntary collision.</span> <span data-start="476.47" data-end="482.96">Meaning by some accident two passwords map to the same hash, which is this as well.</span> <span data-start="482.96" data-end="485.919">So these are the properties the hash function has to obey.</span> <span data-start="485.919" data-end="487.52">And we're not going to build a hash function.</span> <span data-start="487.52" data-end="490.219">There are hash functions out there.</span> <span data-start="490.219" data-end="496.38">I spent like three years being able to write this notation here.</span> </p>
<p><span data-start="496.38" data-end="497.919">So� yeah.</span> <span data-start="497.919" data-end="498.919">Waste of time.</span> <span data-start="498.919" data-end="499.919">So I will save you.</span> <span data-start="499.919" data-end="502.069">But this looks fancy, right?</span> </p>
<p><span data-start="502.069" data-end="506.36">So another nice thing about hash functions� hash functions have heaps and heaps of applications.</span> <span data-start="506.36" data-end="508.159">We are going to use them for passwords.</span> <span data-start="508.159" data-end="515.02">But the most amazing property about hash functions means that you can take an extremely long</span> <span data-start="515.02" data-end="520.5">stream of bits and you can hash it down to something that's finite.</span> <span data-start="520.5" data-end="522.57">So it has like the bits in there.</span> <span data-start="522.57" data-end="524.12">It's amazing.</span> <span data-start="524.12" data-end="528.959">If you study hash functions, it will boggle your mind.</span> <span data-start="528.959" data-end="531.74">So was there the demo?</span> </p>
<p><span data-start="531.74" data-end="532.98">No, that's at the end.</span> <span data-start="532.98" data-end="533.98">Here's hash functions.</span> <span data-start="533.98" data-end="534.98">You have heard of some of them.</span> <span data-start="534.98" data-end="545.37">MD5 was the first hash functions I learned about when I was building a system in PHP.</span> <span data-start="545.37" data-end="548.31">I was born in 1993, MD5 was breaking in 1996.</span> <span data-start="548.31" data-end="551.38">I was still wearing a diaper when it was broken.</span> <span data-start="551.38" data-end="556.14">You probably heard about the recent shatter attack.</span> </p>
<p><span data-start="556.14" data-end="558.49">This is broken too.</span> <span data-start="558.49" data-end="562.87">It had a nice run, but, yeah, it's gone now.</span> <span data-start="562.87" data-end="564.51">Then we have a couple of other hash functions.</span> <span data-start="564.51" data-end="565.73">These are in green.</span> <span data-start="565.73" data-end="571.25">These are cryptographically secure hash functions, but they are fast, and that's something we</span> <span data-start="571.25" data-end="572.25">don't want.</span> <span data-start="572.25" data-end="573.25">I'll show in a minute.</span> <span data-start="573.25" data-end="577.69">And you might have a hard time seeing this.</span> <span data-start="577.69" data-end="585.81">But I'll read, B script, S script, they are hash functions that you can use to store passwords.</span> <span data-start="585.81" data-end="588.399">Not what I recommend, but you can do that.</span> <span data-start="588.399" data-end="590.1">And then I have nothing is say about this one later.</span> </p>
<p><span data-start="590.1" data-end="594.279">I have a little demo.</span> <span data-start="594.279" data-end="599.5">Just open it up here.</span> <span data-start="599.5" data-end="605.49">So because everyone knows MD5, and to make it clear that this is not the way you should</span> <span data-start="605.49" data-end="608.36">do it, I used it as a hash function up here.</span> <span data-start="608.36" data-end="614.64">If you run this, you can see that it� note.</span> <span data-start="614.64" data-end="617.459">It gives the same output as before.</span> <span data-start="617.459" data-end="624.73">Pretty simple now instead of doing a strict equality to the string, we have to hash the</span> <span data-start="624.73" data-end="630.6">password again and compare the two hashes.</span> <span data-start="630.6" data-end="634.54">And you can see here, I also tried to use some German words.</span> <span data-start="634.54" data-end="638.43">Schildkrote, turtle and belina.</span> <span data-start="638.43" data-end="640.02">Yeah.</span> <span data-start="640.02" data-end="643.019">We get what we expect.</span> <span data-start="643.019" data-end="651.779">This is the boiled down version of how you would do a hash in note with core script.</span> <span data-start="651.779" data-end="657.269">The output of a hash function is often called a digest because you're like digesting something</span> <span data-start="657.269" data-end="660.98">big into something small.</span> <span data-start="660.98" data-end="662.26">These are the offenders.</span> </p>
<p><span data-start="662.26" data-end="664.649">I don't know if you know these guys.</span> <span data-start="664.649" data-end="670.16">But in 2015� and I said this was broken when I was wearing a diaper.</span> <span data-start="670.16" data-end="675.22">In 2015, these guys were hacked and passwords leaked.</span> <span data-start="675.22" data-end="681.589">And it turned out that they had used MD5 as the hash function for their passwords.</span> <span data-start="681.589" data-end="688.6">[ Laughter ] So why is this a bad idea?</span> <span data-start="688.6" data-end="694.509">It's because there's a very famous attack called a dictionary attack that you can perform</span> <span data-start="694.509" data-end="699.67">on a password that is hashed this way.</span> <span data-start="699.67" data-end="704.87">What you do is you have a dictionary, a large table of words or common passwords or some</span> <span data-start="704.87" data-end="708.05">way of generating candidate passwords.</span> <span data-start="708.05" data-end="713.709">Then you take all the passwords, or the words that your candidate has, and run them through</span> <span data-start="713.709" data-end="714.709">the hash function.</span> </p>
<p><span data-start="714.709" data-end="715.709">That's very fast.</span> <span data-start="715.709" data-end="720.779">And afterward look up in the table whether you could find� whether you have a hash</span> <span data-start="720.779" data-end="722.73">that matches the password you're trying to match.</span> <span data-start="722.73" data-end="724.93">And then you have the plain text.</span> <span data-start="724.93" data-end="729.45">This might seem farfetched, but it's actually very fast to run.</span> <span data-start="729.45" data-end="732.54">So here I have been taking the� oh, wait.</span> <span data-start="732.54" data-end="734.18">Is this going to work?</span> <span data-start="734.18" data-end="735.18">Yeah, it's going to work.</span> <span data-start="735.18" data-end="739.92">I have been taking the builtin diction that's pretty much on all index machines.</span> </p>
<p><span data-start="739.92" data-end="745.43">And I run the code that was on the last slide and we are going to try and crack my password.</span> <span data-start="745.43" data-end="751.29">And this is a shitty Mac book pro that runs on 1.2 gigahertz.</span> <span data-start="751.29" data-end="756.529">It was state of the art hardwarewise eight years ago.</span> <span data-start="756.529" data-end="760.769">And cracked my password in 1.3 seconds.</span> <span data-start="760.769" data-end="768.75">So rainbow tables are very powerful if people don't know what they're doing kind of thing.</span> <span data-start="768.75" data-end="770.11">So problem.</span> <span data-start="770.11" data-end="771.17">Rainbow tables.</span> <span data-start="771.17" data-end="775.04">What can we do about it?</span> </p>
<p><span data-start="775.04" data-end="778.87">If a lot of people in the same database have the same passwords, they're going to have</span> <span data-start="778.87" data-end="781.08">the same hash.</span> <span data-start="781.08" data-end="785.33">And research shows that a lot of people choose very common passwords.</span> <span data-start="785.33" data-end="791.009">So we are going to try and obscure that people have the same passwords, or make it very hard</span> <span data-start="791.009" data-end="793.62">to generate these rainbow tables.</span> <span data-start="793.62" data-end="798.459">So we want the identical passwords to yield unique hashes.</span> <span data-start="798.459" data-end="799.74">So how do we do that?</span> <span data-start="799.74" data-end="802.04">We use solid hashes.</span> <span data-start="802.04" data-end="807.97">So solid hashes make� so the way you do a dictionary attack is that you generate these</span> <span data-start="807.97" data-end="814.66">huge rainbow tables because storage is cheap and you can go and buy premade rainbow tables.</span> <span data-start="814.66" data-end="819.639">So we want to make it impractical to generate these rainbow tables.</span> <span data-start="819.639" data-end="825.54">And the way we do that is that we solve the passwords.</span> <span data-start="825.54" data-end="833.04">So in this case� I can actually use� I generate a crypt graphically secure number</span> <span data-start="833.04" data-end="838.779">of bytes and I go to the password and then the separator and then the password.</span> </p>
<p><span data-start="838.779" data-end="848.01">And when we store in the database, we need to� this doesn't have to be private, it's</span> <span data-start="848.01" data-end="849.6">just a random value.</span> <span data-start="849.6" data-end="850.6">It's not random.</span> <span data-start="850.6" data-end="854.11">It's stored in the database.</span> <span data-start="854.11" data-end="860.709">Because the point is that if an adversary breaks your database and dumps the passwords,</span> <span data-start="860.709" data-end="864.18">then you would have to generate a unique rainbow table for the users.</span> <span data-start="864.18" data-end="869.81">Because they have a random piece of data in the password.</span> <span data-start="869.81" data-end="872.959">And we can run this if we want to.</span> <span data-start="872.959" data-end="875.519">It's not too interesting.</span> <span data-start="875.519" data-end="876.8">Oh, wait.</span> <span data-start="876.8" data-end="878.88">That's because I just� so� yeah.</span> <span data-start="878.88" data-end="880.37">Just goes like that.</span> <span data-start="880.37" data-end="882.22">Very fast and efficient.</span> </p>
<p><span data-start="882.22" data-end="887.31">And it's since we implement, here's the details.</span> <span data-start="887.31" data-end="894.129">I just chose 64 random bytes because all hash functions have something called block size.</span> <span data-start="894.129" data-end="898.3">MD5 has a block size of I think 512 bits.</span> <span data-start="898.3" data-end="899.88">64 times 8.</span> <span data-start="899.88" data-end="900.88">That's 512.</span> <span data-start="900.88" data-end="902.92">I don't know.</span> <span data-start="902.92" data-end="903.92">Maybe.</span> <span data-start="903.92" data-end="906.029">Something like that.</span> </p>
<p><span data-start="906.029" data-end="908.32">So� yeah.</span> <span data-start="908.32" data-end="909.32">These are the offenders.</span> <span data-start="909.32" data-end="914.779">It's still very easy to break these solid hashes.</span> <span data-start="914.779" data-end="918.22">It was state of the art like eight years ago.</span> <span data-start="918.22" data-end="924.61">And I guess that's why it is still like common knowledge that it's okay to just install passwords,</span> <span data-start="924.61" data-end="925.99">install them in the database.</span> </p>
<p><span data-start="925.99" data-end="932.66">But what these guys did is they used a fast and efficient hash function.</span> <span data-start="932.66" data-end="937.149">Some of them used MD5, still broken, still don't do that.</span> <span data-start="937.149" data-end="940.949">And some of them used the one that's now broken.</span> <span data-start="940.949" data-end="941.959">Don't do that either.</span> <span data-start="941.959" data-end="945.31">That can be forgiven in a way.</span> <span data-start="945.31" data-end="949.22">They still had eight years to migrate.</span> <span data-start="949.22" data-end="951.72">I don't know if that's forgiven.</span> <span data-start="951.72" data-end="953.49">Problem.</span> </p>
<p><span data-start="953.49" data-end="954.49">It's way too efficient.</span> <span data-start="954.49" data-end="956.72">It takes too little time to crack the passwords.</span> <span data-start="956.72" data-end="966.25">You can go to Amazon and rent out one of their big servers and crack up the password hashing.</span> <span data-start="966.25" data-end="972.25">I saw benchmark for saltedsh1 with the tool called hash cap.</span> <span data-start="972.25" data-end="979.57">And it could do 2 million a second on the big server.</span> </p>
<p><span data-start="979.57" data-end="982.05">There's the sound again.</span> <span data-start="982.05" data-end="986.3">The big Amazon server only cost something like $8 an hour.</span> <span data-start="986.3" data-end="991.269">So when you think about cracking passwords, you have to think about not how much time</span> <span data-start="991.269" data-end="994.519">does it take, you have to think about how many dollars does it cost?</span> <span data-start="994.519" data-end="999.93">The other day I read about a mathematician at a U.S. University working with the special</span> <span data-start="999.93" data-end="1000.93">curves.</span> <span data-start="1000.93" data-end="1005.779">And to study the curves you had to generate heaps and heaps of them.</span> <span data-start="1005.779" data-end="1010.42">To generate all the curves, he was trying to study took 60CPU years.</span> <span data-start="1010.42" data-end="1012.569">It sounds like a long time.</span> <span data-start="1012.569" data-end="1020.17">It took him just an afternoon to run 60 years of computation.</span> <span data-start="1020.17" data-end="1027.9">That's where the intuition we have about time doesn't map to cracking passwords.</span> <span data-start="1027.9" data-end="1029.23">So what can we do about this?</span> <span data-start="1029.23" data-end="1031.56">Depends on money.</span> <span data-start="1031.56" data-end="1035.37">So we can try and make it less efficient to crack our passwords.</span> </p>
<p><span data-start="1035.37" data-end="1037.34">How do we do that?</span> <span data-start="1037.34" data-end="1039.91">We use is rated hashing.</span> <span data-start="1039.91" data-end="1046.81">It's one of the techniques you can use if what you're doing needs to be compliant, you</span> <span data-start="1046.81" data-end="1054.2">can use a builtin function in Node crypt called PB� passwordbased key iteration function</span> <span data-start="1054.2" data-end="1055.75">2.</span> <span data-start="1055.75" data-end="1058.54">That's what we're going to do now.</span> <span data-start="1058.54" data-end="1067.89">The thinking with the hash functions, you give a password, but also a work factor.</span> <span data-start="1067.89" data-end="1072.58">How many times does it need to take the output to one hash iteration and use it for the next</span> <span data-start="1072.58" data-end="1075.73">hash iteration and so on and so forth.</span> <span data-start="1075.73" data-end="1082.07">And here we are going to use at� I want to use number five instead.</span> <span data-start="1082.07" data-end="1083.12">Oh.</span> <span data-start="1083.12" data-end="1089.33">So you can see now it takes a bit of time.</span> <span data-start="1089.33" data-end="1091.04">There was the true, there was the false.</span> <span data-start="1091.04" data-end="1096.02">So now we are doing something like, I don't know, 200 milliseconds for every time you</span> <span data-start="1096.02" data-end="1098.23">need to authenticate a user.</span> <span data-start="1098.23" data-end="1105.22">Now, an attack, instead of one millisecond per password or per hash, has to spend 200</span> <span data-start="1105.22" data-end="1106.22">milliseconds per hash.</span> </p>
<p><span data-start="1106.22" data-end="1115.1">And now those 60CPU years turn into a thousand CPU years or similar.</span> <span data-start="1115.1" data-end="1118.5">This is what you need to do to use the PBKDF2.</span> <span data-start="1118.5" data-end="1121.42">You can see there's a lot of parameters you have to save in the database.</span> <span data-start="1121.42" data-end="1124.06">And a lot of things can go wrong.</span> <span data-start="1124.06" data-end="1127.6">What about the future when this hash function is broken.</span> </p>
<p><span data-start="1127.6" data-end="1128.99">All that stuff.</span> <span data-start="1128.99" data-end="1134.39">You need to choose an iteration count, how many times to run for risk.</span> <span data-start="1134.39" data-end="1138.95">How long a hash you want and what hash algorithm you want to use.</span> <span data-start="1138.95" data-end="1144.43">And pass that in, runs asynchronous in another worker thread and doesn't block the event</span> <span data-start="1144.43" data-end="1145.46">loop.</span> <span data-start="1145.46" data-end="1151.94">And back you get an�error on the hash.</span> <span data-start="1151.94" data-end="1153.58">I don't recommend you do this.</span> </p>
<p><span data-start="1153.58" data-end="1155.44">Dropbox did this.</span> <span data-start="1155.44" data-end="1157.3">It's not bad.</span> <span data-start="1157.3" data-end="1160.24">I don't want to call them out.</span> <span data-start="1160.24" data-end="1166.22">They used Bcrypt.</span> </p>
<p><span data-start="1166.22" data-end="1169.34">It's based on a block cyber called Blowfish.</span> <span data-start="1169.34" data-end="1179.99">And the only issue with Bcrypt, kind of a nonissue, it limits the password to 72 characters.</span> <span data-start="1179.99" data-end="1184.07">I don't know anyone who would be able to remember a 72character password.</span> <span data-start="1184.07" data-end="1191.45">It's more of a problem with pass phrase instead of a password.</span> <span data-start="1191.45" data-end="1196.72">So the problem here is still that it's very easy to just run all these hash functions</span> <span data-start="1196.72" data-end="1197.72">in parallel.</span> </p>
<p><span data-start="1197.72" data-end="1201.58">And that's the whole deal with the GPU is that instead of having one call with a lot</span> <span data-start="1201.58" data-end="1206.38">of memory, you have like thousands of calls each with very little memory.</span> <span data-start="1206.38" data-end="1208.58">And I'm saying memory and memory all the time.</span> <span data-start="1208.58" data-end="1212.91">I'm kind of hinting at what we can do next for even more money?</span> <span data-start="1212.91" data-end="1215.18">Spend all the money on hashing.</span> <span data-start="1215.18" data-end="1218.37">And now we are getting to what is kind of state of the art today.</span> </p>
<p><span data-start="1218.37" data-end="1221.43">And that is key iteration functions.</span> <span data-start="1221.43" data-end="1227.69">But a special kind of key iteration function that is purposefully slow because it both</span> <span data-start="1227.69" data-end="1232.43">uses a lot of memory and a lot of computation.</span> <span data-start="1232.43" data-end="1233.66">And here we have it.</span> <span data-start="1233.66" data-end="1234.66">Argon2.</span> <span data-start="1234.66" data-end="1240.53">In 2013, the academic community kind of had enough.</span> <span data-start="1240.53" data-end="1244.02">Way too many breaches, way too easy to crack passwords.</span> <span data-start="1244.02" data-end="1251.1">And there was no one place you could point to just say just use this and forget about</span> <span data-start="1251.1" data-end="1252.1">the details.</span> <span data-start="1252.1" data-end="1253.51">They made a competition.</span> <span data-start="1253.51" data-end="1260.92">They had a lot of entries, and argon�2 was their recommendation at the end of the competition.</span> <span data-start="1260.92" data-end="1266.18">So let's fire it up.</span> </p>
<p><span data-start="1266.18" data-end="1271.46">So let's see� that's the number seven.</span> <span data-start="1271.46" data-end="1272.68">And you can see.</span> <span data-start="1272.68" data-end="1274.13">It's computing.</span> <span data-start="1274.13" data-end="1275.57">Take a long time.</span> </p>
<p><span data-start="1275.57" data-end="1279.7">Maybe it's taking too long a time.</span> <span data-start="1279.7" data-end="1281.24">So that's what I was saying about this.</span> <span data-start="1281.24" data-end="1282.93">There we go.</span> <span data-start="1282.93" data-end="1287.08">So that was the first verification, and now it's trying to verify the next one.</span> <span data-start="1287.08" data-end="1289.42">And you can see that it comes out there.</span> <span data-start="1289.42" data-end="1299.55">Now, one issue is that� and I'll show that by showing you the code.</span> <span data-start="1299.55" data-end="1302.55">So the issue is that this is blocking.</span> <span data-start="1302.55" data-end="1309.02">I was trying to, when the hash function was spun up to authenticate, I was trying to log</span> <span data-start="1309.02" data-end="1310.16">out.</span> <span data-start="1310.16" data-end="1316.83">I was trying to log out console with the hash to show you that the event loop wasn't blocked,</span> <span data-start="1316.83" data-end="1317.83">but it was.</span> <span data-start="1317.83" data-end="1318.83">So that's kind of an issue.</span> <span data-start="1318.83" data-end="1325.13">If you have a server running with thousands of people trying to authenticate, then you</span> <span data-start="1325.13" data-end="1327.5">only have one guy at a time authenticating.</span> </p>
<p><span data-start="1327.5" data-end="1330.6">And that's going to get your users very mad at you.</span> <span data-start="1330.6" data-end="1337.56">So the good thing about this is I want to show you just the performance profile of the</span> <span data-start="1337.56" data-end="1338.93">two functions.</span> <span data-start="1338.93" data-end="1348.54">So here I have the PBKDF2 in a file where I ramped up the iteration count to something</span> <span data-start="1348.54" data-end="1351.89">very high so we have a chance to stop it.</span> <span data-start="1351.89" data-end="1360.74">It's a UNIX command to show how much memory and CPU a given process is using.</span> <span data-start="1360.74" data-end="1363.17">So I'm going spin up here.</span> <span data-start="1363.17" data-end="1367">You can see that the Node processer is pinking the CPU at 100%.</span> <span data-start="1367" data-end="1375.27">But it's using 9 megabytes of memory, which isn't very much.</span> <span data-start="1375.27" data-end="1383.95">I mean, the top of the line GPU server at Amazon has something like 24 kilo bytes of</span> <span data-start="1383.95" data-end="1386.02">memory.</span> </p>
<p><span data-start="1386.02" data-end="1391.27">I don't know how much it is� but it's a lot.</span> <span data-start="1391.27" data-end="1392.67">Heaps and heaps.</span> <span data-start="1392.67" data-end="1393.91">So just kill this.</span> <span data-start="1393.91" data-end="1399.4">And instead let's go and look what the performance profile of Argon2 is.</span> <span data-start="1399.4" data-end="1404.15">So, again, I spun up the work factor.</span> <span data-start="1404.15" data-end="1405.15">Like heaps.</span> <span data-start="1405.15" data-end="1406.74">And let's try and run it.</span> <span data-start="1406.74" data-end="1412.37">And you can see now that it's, again, pegging the CPU, but it's also taking up 500 megabytes</span> <span data-start="1412.37" data-end="1414.04">of memory.</span> <span data-start="1414.04" data-end="1416.53">So it's very easy to do the math.</span> <span data-start="1416.53" data-end="1419.58">24 gigabytes divided by 500, that's like 48.</span> <span data-start="1419.58" data-end="1428.51">You can do 48 of these cracking attempts in parallel, which isn't very much.</span> <span data-start="1428.51" data-end="1430.42">So� nice.</span> <span data-start="1430.42" data-end="1434">But the problem is, there was blocking.</span> </p>
<p><span data-start="1434" data-end="1438.53">This is the� if you want to do the blocking stuff, this is how I do it.</span> <span data-start="1438.53" data-end="1444.03">I have a small library with one of my friends called Matias McIntosh online.</span> <span data-start="1444.03" data-end="1448.27">It exposes it as the PB hash function.</span> <span data-start="1448.27" data-end="1452.9">You can use it, but as you can see, it's a bit complicated.</span> <span data-start="1452.9" data-end="1455.11">So� yeah.</span> <span data-start="1455.11" data-end="1456.11">I was blocking.</span> <span data-start="1456.11" data-end="1457.11">What can we do?</span> <span data-start="1457.11" data-end="1458.4">We can make it asynchronous.</span> <span data-start="1458.4" data-end="1459.4">That's what you have done for you.</span> <span data-start="1459.4" data-end="1461.13">I have made it asynchronous.</span> <span data-start="1461.13" data-end="1465.74">All you have to do is run npm install and secure password and I'll make the password</span> <span data-start="1465.74" data-end="1467.58">secure for you.</span> <span data-start="1467.58" data-end="1473.2">That's why I have the� [ Applause ]</span> <span data-start="1473.2" data-end="1475.67">So you can use this today.</span> <span data-start="1475.67" data-end="1480.99">It came out like two weeks ago and I'm still adding in a bunch of other features.</span> </p>
<p><span data-start="1480.99" data-end="1486.11">One feature I'm still missing is because it's using so much memory it's actually a very</span> <span data-start="1486.11" data-end="1490.51">real scenario that your box might run out of memory and the process will crash.</span> <span data-start="1490.51" data-end="1492.55">The system will kill it for you.</span> <span data-start="1492.55" data-end="1499.66">So I'm using� I'm still working on putting like a queue mechanism and you can check the</span> <span data-start="1499.66" data-end="1505.48">queue and choose whether to bounce of the hashing tool, another machine or something</span> <span data-start="1505.48" data-end="1506.85">like that.</span> </p>
<p><span data-start="1506.85" data-end="1508.82">It's very easy to use.</span> <span data-start="1508.82" data-end="1510.22">Here all there is to it.</span> <span data-start="1510.22" data-end="1516.84">Don't need to think about salting or the work parameters or the algorithms or anything like</span> <span data-start="1516.84" data-end="1517.84">that.</span> </p>
<p><span data-start="1517.84" data-end="1519.43">Think about forward compatibility.</span> <span data-start="1519.43" data-end="1521.25">It's very important when we do hash functions.</span> <span data-start="1521.25" data-end="1526.04">Because if there's a paper coming out tomorrow saying there's a reduction attack on Argon2,</span> <span data-start="1526.04" data-end="1528.58">we want to switch to something else, maybe.</span> <span data-start="1528.58" data-end="1532.3">We can do that with this library too.</span> <span data-start="1532.3" data-end="1534.49">Doesn't get much easier than this.</span> <span data-start="1534.49" data-end="1536.28">I can just show you.</span> <span data-start="1536.28" data-end="1541.72">So the parameters we ran it with before in blocking mode were high.</span> </p>
<p><span data-start="1541.72" data-end="1545.89">So the secure password, the default settings should be good for now.</span> <span data-start="1545.89" data-end="1551.22">They are set to what the backing library calls interactive settings.</span> <span data-start="1551.22" data-end="1554.96">So settings suitable for passwords on the web.</span> <span data-start="1554.96" data-end="1557.09">And if we run it, it's pretty fast.</span> <span data-start="1557.09" data-end="1564.08">You don't have to wait for several seconds to compute the hash and authenticate them.</span> <span data-start="1564.08" data-end="1566.7">Now, we are running out of time.</span> <span data-start="1566.7" data-end="1570.65">So you can take this home with you.</span> <span data-start="1570.65" data-end="1571.9">It has a couple of options.</span> <span data-start="1571.9" data-end="1574.72">You can see in the readme what you can configure.</span> <span data-start="1574.72" data-end="1580.72">It's very easy to use and it has an equally easy verify function for you to use.</span> <span data-start="1580.72" data-end="1586.41">There's also a sync version in there if you want to use that, for command line stuff or</span> <span data-start="1586.41" data-end="1587.41">whatever.</span> <span data-start="1587.41" data-end="1588.41">So� yeah.</span> <span data-start="1588.41" data-end="1589.41">Wait.</span> </p>
<p><span data-start="1589.41" data-end="1590.41">There we go.</span> <span data-start="1590.41" data-end="1591.41">Thank you.</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
