<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SmZ9XcTpMS4</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/SmZ9XcTpMS4?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="1.64" data-end="19.439">> Jake Archibald: Can you all hear me? Right, so, I'm not getting a whole lot of anything</span> <span data-start="19.439" data-end="20.439">on the screen. (Hey .. oh, no .. here we go. And I think we are good to go. Right.</span> <span data-start="20.439" data-end="22.289">We go on the screen, brilliant, hello, we've come a long way haven't we in the past 20</span> <span data-start="22.289" data-end="27.63">years since the '90s, I mean, back then you would have some friends over, it'd be going</span> <span data-start="27.63" data-end="32.66">great, then two of your friends would start having a disagreement involving the release</span> <span data-start="32.66" data-end="37.989">gait of ghost busters, but then it starts to get heated, none of them are backing down,</span> <span data-start="37.989" data-end="44.28">the mood of the dinner party is at stake, but it's okay, for you hold aloft the answer,</span> <span data-start="44.28" data-end="51.42">for you are the proud owner of Microsoft Cinemania. Giving you instant access to the history of</span> <span data-start="51.42" data-end="57.6">cinema. Well, it's not really instant, first you must go to the room with the computer</span> <span data-start="57.6" data-end="65.19">in and turn it on, and then the fan starts whirring, you get that friendly static crackle</span> <span data-start="65.19" data-end="73.67">as the CRT monitor whirs into action, windows 3.1 slowly boots up. Then you get your desktop,</span> <span data-start="73.67" data-end="83">eventually. And it does this (Horn sound) and that really sets expectations we are dealing</span> <span data-start="83" data-end="88.11">with an operating system that thinks that booting successfully is a fanfare worthy moment</span> <span data-start="88.11" data-end="100.77">(Applause) and by the power of multimedia C ROM you veal that ghost busters was release</span> <span data-start="100.77" data-end="109.49">in the 1984, you did that in under ten minutes, the dinner party is saved. The web changed</span> <span data-start="109.49" data-end="117.2">everything, with the web you get information instantly, no installation, they looked out</span> <span data-start="117.2" data-end="121.909">of date the CDs almost instantly, having separate apps for these things became weird, the stuff</span> <span data-start="121.909" data-end="127.11">ton internet was better, built with new interconnected with the modern world in run, the browser</span> </p>
<p><span data-start="127.11" data-end="133.98">Runtime replaced more my native App, office tooling, code editors, native apps became</span> <span data-start="133.98" data-end="139.03">the exception, if you look at the top ten selling laptops on Amazon they include chrome</span> <span data-start="139.03" data-end="145.879">books that's how secondary native apps are, though that's not true on mobile. The native</span> <span data-start="145.879" data-end="149.47">apps still rule, because they build to the strength of the platform and a lot of the</span> <span data-start="149.47" data-end="155.51">web predates that, some of the web is hostile to mobile. This is a creative agency that</span> <span data-start="155.51" data-end="159.23">I won't name; this is what you get if you visit their site.</span> <span data-start="159.23" data-end="164.32">> Choosing your creative agency isn't like buying a pair of shoes, so why group make</span> <span data-start="164.32" data-end="174.08">yourself Coffee and visit our site on real screen. They're kind over right, I never had</span> <span data-start="174.08" data-end="185.75">a shoe tell me to Fuck off and come back when I have real feet. You can see the things they're</span> <span data-start="185.75" data-end="193.05">expert in, which includes, responsive sites, of course (Laughing) the more worrying case</span> <span data-start="193.05" data-end="198.84">the sites are simply hostile to just the mobile web, not just the mobile platform, this is</span> <span data-start="198.84" data-end="203.659">a horrible situation, the user has gone to these sites in a browser following a deep</span> <span data-start="203.659" data-end="208.05">link rather than sending them the thing they want, we send them to another thing where</span> <span data-start="208.05" data-end="213.5">they can download a thing to install a thing that can run that Macon train the thing they</span> <span data-start="213.5" data-end="218.29">originally wanted somewhere in in the interface. It's not a good United Nations experience,</span> <span data-start="218.29" data-end="225.15">it's one developers think is good to get you after the web to the native app. Think about</span> <span data-start="225.15" data-end="230.89">the native apps you use and rely on, this that is where the web is failing what caused</span> <span data-start="230.89" data-end="234.69">that failure, what features do they have that can make it impossible to replicate on the</span> <span data-start="234.69" data-end="242.84">web. I use these apps often, or they can't be done on the web because of push notification,</span> <span data-start="242.84" data-end="247.319">that is vital for the apps in yellow, they tell me someone sent me something, or something</span> <span data-start="247.319" data-end="252.74">happens in the background when the App isn't open,I rarely use trip it, I forget I have</span> <span data-start="252.74" data-end="258.791">it. Then it'll send me a notification that a flight is delayed or canceled. Background</span> </p>
<p><span data-start="258.791" data-end="264.98">Sync, from downloading pod cast to sending an e‑mail late their failed to send at the</span> <span data-start="264.98" data-end="270.95">time, which sends to off line, I depend on this for more apps that I realize for playing</span> <span data-start="270.95" data-end="274.92">music, checking where my hotel is, looking up a meeting location, I continue want to</span> <span data-start="274.92" data-end="285.54">depend on connectivity for these things, we need better performance and integration to</span> <span data-start="285.54" data-end="290.64">the O several, battery staps, accounting information, the web can't do these, and that's a bug,</span> <span data-start="290.64" data-end="295.55">what gives me hope is that these are bugs that are getting fixed not just being thought</span> <span data-start="295.55" data-end="299.82">about, code is landing to fix these things, and these are the ones I want to talk about</span> <span data-start="299.82" data-end="304.201">today these require something new, background Sync, that happen in the background, push</span> <span data-start="304.201" data-end="309.04">notification are received and dealt with in the background. Off line, doesn't run in the</span> <span data-start="309.04" data-end="314.65">background but requires context to run before pages, and that thing is the service worker.</span> <span data-start="314.65" data-end="321.6">And this is the Spec. That bit got a round applause at GoogleIO (Applause) don't patronize,</span> <span data-start="321.6" data-end="330.6">me, I could of dressed it up a bit. I like what graphic cards into in this present, they're</span> <span data-start="330.6" data-end="335.41">just circuit boards, but they need to sort of dress themselves up to make them look like</span> <span data-start="335.41" data-end="339.72">the must have for people. Even though they don't do anything on their own. The boxes</span> <span data-start="339.72" data-end="344.24">they come in are amazing in this kind of sub deviant arts craft, you get the usual sort</span> <span data-start="344.24" data-end="349.66">of sexist nonsense you get with gaming, you always get things like the hideous off string</span> <span data-start="349.66" data-end="360.02">of Sh reck and Yoda and also teenage mutant Ninja dog. So in this vain, I present to you</span> <span data-start="360.02" data-end="372.84">the service worker! (Applause) that's Memrod using his evil pow tore control browser feature.</span> </p>
<p><span data-start="372.84" data-end="379.9">We need a logo, stop me. This is something being worked on between Google Mozilla Sam</span> <span data-start="379.9" data-end="387.87">sung. It has no Dom access, unlike a shared worker it can exist without a reference to</span> <span data-start="387.87" data-end="394.12">it and shuts down when not in used this is the gabbinge background context we need. It's</span> <span data-start="394.12" data-end="401.31">in Bruce tore day, you'll need COMCanary, you'll need go about about flags and enable</span> <span data-start="401.31" data-end="407.62">experimental browser feature and restart. If chrome isn't your thing you can use fire</span> <span data-start="407.62" data-end="414.98">fox nightly, go to about Config and enable service worker and give the Bruce ear restart.</span> <span data-start="414.98" data-end="420.72">I'm going to stick with canary, Google played for my flight and hoe it will, it would be</span> <span data-start="420.72" data-end="427.9">rude not to. And the debugging tool is forever ahead. If you want to know what support or</span> <span data-start="427.9" data-end="435.041">sub features, it's service worker ready and tells you which browser support what. It's</span> <span data-start="435.041" data-end="440.37">the foundation for the others, off line suffers from the same misconceptions as progressive</span> <span data-start="440.37" data-end="446.78">enhancement, I think, people say my App doesn't need to work off line because my users have</span> <span data-start="446.78" data-end="450.72">permanent internet connectivity, but it's not just about zero connectivity, it's about</span> <span data-start="450.72" data-end="457.63">treating the network as an enhancement, when user clicks a link to your site, the URL start</span> <span data-start="457.63" data-end="462.61">a navigation, a document is created, but we have to go to network to get the data for</span> <span data-start="462.61" data-end="469.151">that, that can take a long time, it will come back eventually, we can't rend E. we have</span> <span data-start="469.151" data-end="475.49">to send request for the Java, the images, as these come back we can start to render,</span> <span data-start="475.49" data-end="481.71">but the sub resource trigger other sub resources, fonts, images used in the CSS, when they come</span> <span data-start="481.71" data-end="487.36">back we get towards our find render. As a practical example I'll take train ‑‑ it's</span> <span data-start="487.36" data-end="497.37">a responsive site, I was on a train when I started building it I had a moment of zero</span> <span data-start="497.37" data-end="503.81">inspiration. But let's load it on a phone that's 250‑kilo births fifteen‑year‑old</span> <span data-start="503.81" data-end="509.47">me would have kill you for a 256 kill birth con next, not the best today but far from</span> <span data-start="509.47" data-end="516.97">the worst. So, three, two, one, go. We get the first render, that wasn't JavaScript dependent</span> <span data-start="516.97" data-end="520.77">. we get content after 5 seconds that's from</span> </p>
<p><span data-start="520.77" data-end="529.32">Flickr, those images are 200 K each, that's what it gave me if I wanted to coverer this</span> <span data-start="529.32" data-end="536.08">density. First image through, after thirty‑seconds, other images start loading, after what seems</span> <span data-start="536.08" data-end="543.31">like years, we get the full render. Now, that video wasn't real‑time, I had to cut it</span> <span data-start="543.31" data-end="548.64">down, it took so long, those are the correct figures, we can compress the images better,</span> <span data-start="548.64" data-end="554.32">we can do things to insure the top images load first,I just took what Flickr gave me.</span> <span data-start="554.32" data-end="561.68">We are still beating native, the equivalent is the visit the App store, download, it's</span> <span data-start="561.68" data-end="567.96">a slow user experience, but native kicks our ass on the second visit it used that initial</span> <span data-start="567.96" data-end="572.92">download and install cash loads of stuff, we have the browser cash, but the whole internet</span> <span data-start="572.92" data-end="578.72">is fighting for that, if we change one line in CSS or java script, we change the file</span> <span data-start="578.72" data-end="584.221">name, we break the cash,we like to deploy often, we're breaking the cash office. This</span> <span data-start="584.221" data-end="590.1">page register for a service worker allowing us to do something about the second load.</span> </p>
<p><span data-start="590.1" data-end="596.99">Registration estruation is simple, miter JavaScript like, this you can also scope it to an area</span> <span data-start="596.99" data-end="601.57">of your origin, and that's use informal you have single origin with many apps, like Google</span> <span data-start="601.57" data-end="607.95">does with calendar and stuff like that. The default scope is the whole origin, which we'll</span> <span data-start="607.95" data-end="612.08">use here, it returns a promise so you can find out if it works or not. You can register</span> <span data-start="612.08" data-end="618.93">for a service worker on 750 DPS, the service worker is so power it would p a disaster it</span> <span data-start="618.93" data-end="626.75">fall boss a man in the middle is a good place to butt demo stuff and local host is exempt</span> <span data-start="626.75" data-end="635.93">for development. Console log, listen for install events, service worker for the first time,</span> <span data-start="635.93" data-end="639.68">so let's see that in action. First, I'm going to go to service worker internal, which is</span> <span data-start="639.68" data-end="644.14">where our debugging stuff is living at the moment, as you can see there's nothing there.</span> </p>
<p><span data-start="644.14" data-end="650.15">Then I'll open the train site, a dead version of it . As you can see on the bottom corner</span> <span data-start="650.15" data-end="655.51">there, our service worker is successfully registered F we go to service worker internals</span> <span data-start="655.51" data-end="662.43">there, it is, there's our console log, we can launch Dev tools, we can also set break</span> <span data-start="662.43" data-end="669.16">points run stuff on the console, etc… If we fast forward time a bit, the service worker</span> <span data-start="669.16" data-end="674.33">terminates, that's not a bug, it's just not needed at the moment, closes to conserve memory.</span> <span data-start="674.33" data-end="680.29">And congratulations, at that point, you're now wielding the power of the service worker,</span> <span data-start="680.29" data-end="687.54">but what did that actually get us? Nothing. (Laughing) but, wait, oh, my God, it's actually</span> <span data-start="687.54" data-end="694.46">a good thing that it does nothing. The unapologetically made it good. Compare it to App cash, if you</span> <span data-start="694.46" data-end="701.81">give manifest, and that manifest only contains the words cash manifest,I would expect to</span> <span data-start="701.81" data-end="708.57">go from this to this said no one ever in the world. So, we didn't want to do that, service</span> <span data-start="708.57" data-end="712.74">worker doesn't do anything unless you tell it to do something, App Cache broke a lot</span> <span data-start="712.74" data-end="721.51">of eggs and failed to make a omelet, has the right ingredients, routing fetching cashing,</span> <span data-start="721.51" data-end="729.91">updates and version control,blouse first reverse the piles of implicit behavior, which are,</span> <span data-start="729.91" data-end="735.69">of course, guarded by the army of robot wasps. If you've used that Cache before you'll know</span> <span data-start="735.69" data-end="743.99">what I mean. We sort it out, without getting stung. This is the extensible web. Don't ask</span> <span data-start="743.99" data-end="750.35">don't take fish, ask for a fisher rod, but take the fish as well. We need both high and</span> <span data-start="750.35" data-end="760.43">low level AIs, the service worker is event driven we've seen install, it's also fetch,</span> <span data-start="760.43" data-end="766.1">this fires for any navigation for your scope, but also for any sub resource from that page.</span> </p>
<p><span data-start="766.1" data-end="771.75">In service worker internals, we're going to start off the service worker, inspect it,</span> <span data-start="771.75" data-end="778.5">navigate to our train site, you see as soon as we navigate we hit the break point many</span> <span data-start="778.5" data-end="787.75">if net fetch, we get one for the CSS, we skip from there, we'll get the logo, the JavaScript,</span> <span data-start="787.75" data-end="795.07">we rendered before JavaScript because we care about performance, get API call to Flikr.</span> <span data-start="795.07" data-end="802.8">And then get all the image requests coming in. But, hey, the cool bit is, this is ‑‑ this</span> <span data-start="802.8" data-end="807.59">is an event, like other vents like clique, touch start, key down, you can present the</span> <span data-start="807.59" data-end="812.71">default and do something else Y. can respond with something else. Responses can be created</span> <span data-start="812.71" data-end="822.4">manually, give it some texts, and if do we, that the page gives us this to this. But the</span> <span data-start="822.4" data-end="828.74">swears interesting thing here S. we delivered that without going to the network at all,</span> <span data-start="828.74" data-end="835.14">making it the first off line demo of the talk only almost halfway through, but we can do</span> <span data-start="835.14" data-end="839.51">better than that. When the browser discover the service worker for first time, we'll send</span> <span data-start="839.51" data-end="845.38">it to the network, get it to make load of requests and get responses it might with fast</span> <span data-start="845.38" data-end="850.18">it might be slow,the network is not predictable, we're not disrupting the user they already</span> <span data-start="850.18" data-end="856.839">have the page open. If our response comes back we'll put them in the Cache, this pre‑Cache</span> <span data-start="856.839" data-end="863.02">method is what native would do with an initial install back age, we do it in the background</span> <span data-start="863.02" data-end="871.42">without disrupting the user, the loot page template, JavaScript, all the stat tick stuff,</span> <span data-start="871.42" data-end="877.26">when we get a request for one of those things, we'll just get it from the Cache, the uncertainty</span> <span data-start="877.26" data-end="883.49">of the network is no learn our problem, this is simple thanks to the cashing API, full</span> <span data-start="883.49" data-end="891.17">control of the Cache in the install event from earlier, we get this vent ‑‑ and</span> <span data-start="891.17" data-end="895.57">we can pass a promise into there that extends the installation process, use to indicate</span> <span data-start="895.57" data-end="903.51">success and failure as well. Here we're going to create a Cache, give a name, and then add</span> <span data-start="903.51" data-end="909.95">stuff to it, our static has sets, if any of these fail, the whole operation fails. And,</span> <span data-start="909.95" data-end="913.52">service worker won't control pages, so if the install succeeds we know we have these</span> <span data-start="913.52" data-end="918.2">thing in the Cach oh, there are deopinion Dennis, it's not thee canary yet, there's</span> <span data-start="918.2" data-end="927.42">a poly fill, the proper implementation in a few weeks. How do we use these Cache items,</span> <span data-start="927.42" data-end="935.17">responds with Cac hade.match, it will find a response that matches that request, it's</span> <span data-start="935.17" data-end="941.029">done by method, URL, similar to the browser Cach e if there's no match you'll get no back,</span> <span data-start="941.029" data-end="947.79">if we get no, we can send something else, what should we do instead, we could send a</span> <span data-start="947.79" data-end="954.44">fall back entry, what if we want to try the network, to do this we need the make a request</span> <span data-start="954.44" data-end="961.279">using JavaScript. In 1999, Microsoft engineers were design ago new excitingAPI, what should</span> <span data-start="961.279" data-end="967.121">they call it, it contained abbreviations, initialisms, they shouldn't decide if it should</span> <span data-start="967.121" data-end="977.92">be all caps or just the first letter like getElement by ‑‑ so they did both XMLHttpReques</span> <span data-start="977.92" data-end="987.8">the ‑‑ restricted to HTTP but it isn't, and request, you get a request object back,</span> <span data-start="987.8" data-end="995.78">yet you don't. We tried to modernize it is a bit, fetching some JSON, is verboten, we've</span> <span data-start="995.78" data-end="999.91">been patching this API for fifteen years, I do not want to use this AI when it's old</span> <span data-start="999.91" data-end="1008.58">enough to drink. Thankfully, the fetch back by Mozilla, it gives lower level control,</span> <span data-start="1008.58" data-end="1016.97">weave already seen some of it. Lower APSI usually easier to use than higher level one,</span> </p>
<p><span data-start="1016.97" data-end="1024.35">HHR is so bad, it's not true here, the equivalent to this in Fetch Fetch URL gives you a promise,</span> <span data-start="1024.35" data-end="1030.85">pass it how you want, gives you a promise, done. This is a forward thinking API, arrow</span> <span data-start="1030.85" data-end="1037.26">functions make it easier, Async functions can make it a one liner if you want. To answer</span> <span data-start="1037.26" data-end="1044.3">the question, how do we send this request to network, fetch. So what improvements does</span> <span data-start="1044.3" data-end="1051.42">this give us, 3, 2, 1, go. We reverend almost instantly, we get content after a couple of</span> <span data-start="1051.42" data-end="1055.92">seconds, we still go to the network, but our JavaScript rivered so much quicker, we're</span> <span data-start="1055.92" data-end="1063.41">able to start it so much sooner, still a sad sorry ‑‑ let's fix that. When there's</span> <span data-start="1063.41" data-end="1070.97">a request for a Flickr, if we have it in the cash it will return from the cash over wise</span> <span data-start="1070.97" data-end="1080.059">we go to the network, when when we get response back, we'll send to the cash and the page,</span> <span data-start="1080.059" data-end="1087.14">this is also good for Avatars, things you want to Cache as you go along, we're going</span> <span data-start="1087.14" data-end="1097.79">to special case URLs that end in static Flickr.com, take the request, try to take frit the darks</span> <span data-start="1097.79" data-end="1103.36">fetch it from the network, add it to our Cache, send it to the browser, need be careful, we're</span> <span data-start="1103.36" data-end="1109.31">adding to the cash for every image request, we'll need the garden at some point. For now,</span> <span data-start="1109.31" data-end="1115.46">how does that improve things, 3, 2, 3e 1, go. We render quickly, content comes through</span> <span data-start="1115.46" data-end="1119.89">quickly, this time we have images, all of the images weave seen already, but not this</span> <span data-start="1119.89" data-end="1126.15">one at the top that's new, that comes through in 11 seconds, and that's pretty good, but</span> <span data-start="1126.15" data-end="1131.9">we're still dependent on network for the initial API call that tells us which images to display,</span> <span data-start="1131.9" data-end="1140.559">let's fix that. So this one's a little bit different, the page does a fetch for the API,</span> <span data-start="1140.559" data-end="1147.06">via the service worker,as everything does, it also goes straight to the Cache, because</span> <span data-start="1147.06" data-end="1153.55">pages can access the Cache too, it'll render with it, that will trigger the requests for</span> <span data-start="1153.55" data-end="1160.24">the old images that is also in the cash the service worker goes to the network, gets data</span> <span data-start="1160.24" data-end="1164.741">back, we do what we do with the images, wend it both to the cash and the page, this is</span> <span data-start="1164.741" data-end="1172.02">a good point to clean up the Cache, with this pattern it makes two requests, once from the</span> <span data-start="1172.02" data-end="1176.12">we shall question, once from the network, we get to render quickly with all content</span> <span data-start="1176.12" data-end="1180.96">but provide up to date content when we find it, the best native apps find it, very few,</span> <span data-start="1180.96" data-end="1188.26">but the best ones do. Here's where we're at now, we also want to special case K PI.Flickr.com.</span> </p>
<p><span data-start="1188.26" data-end="1195.2">In that case we'll do, this I'm not going to go through this line by line, this is fetching</span> <span data-start="1195.2" data-end="1199.88">data, returning it to the browser, this start of Gnarly bit in the middle, pausing data</span> <span data-start="1199.88" data-end="1206.91">from Flickr, and removing ones from the cash that we don't need anymore this is a little</span> <span data-start="1206.91" data-end="1213.73">bit Gnarly with promises ES 78 functions make it neater, that's the service worker ‑‑ this</span> <span data-start="1213.73" data-end="1220.84">makes two request requests so one over on the page side,www.to the Cache, one to network.</span> <span data-start="1220.84" data-end="1225.661">Afterf the respond come in after the Cac he, we'll update, we'll know an error if they</span> <span data-start="1225.661" data-end="1235.84">both fail provide data. If the Cache but network fails, we fail silently. That was probably</span> <span data-start="1235.84" data-end="1246.03">too much code to show on slides. But my point is we're expressing complex behavior using</span> <span data-start="1246.03" data-end="1252.541">small amounts of code, and the effect of that, let's remind ourself where we started, first</span> <span data-start="1252.541" data-end="1258.03">visit, takes quite a long time to get the first render, just over a second, then content</span> <span data-start="1258.03" data-end="1264.47">comes in after over five seconds and then we're waiting forever for the images. Of with</span> <span data-start="1264.47" data-end="1269.7">service worker and the code we've written to manager the network and Caching, 3, 2,</span> <span data-start="1269.7" data-end="1274.809">1, go,we have what looks like a complete view rendered quickly, new data comes in after</span> <span data-start="1274.809" data-end="1281.31">a few seconds, doesn't disrupt the user, we get the image, we shaved a second off our</span> <span data-start="1281.31" data-end="1286.98">first render, over 30 seconds for what looks like a complete view. You can get content</span> <span data-start="1286.98" data-end="1291.429">on the screen in a fraction of a second whether you have a fast, slow or no connection, it</span> <span data-start="1291.429" data-end="1305.36">doesn't matter this catches up to native. First up, push, something I depend on for</span> <span data-start="1305.36" data-end="1312.26">many apps before we look at code, going to give a live demo a go, which is (Laughing)</span> <span data-start="1312.26" data-end="1341.27">see how this goes. Remi, could you help me with this? So .. Remy, you're going to send</span> <span data-start="1341.27" data-end="1345.57">a chat in there, but not until we have something on the screen.</span> <span data-start="1345.57" data-end="1360.019">> Huh… I got it by the way… > Fine ‑‑</span> <span data-start="1360.019" data-end="1371.38">> It's pretty good. > You’re enjoying your morning so far, was</span> <span data-start="1371.38" data-end="1372.57">breakfast good? > Yes</span> <span data-start="1372.57" data-end="1378.1">> I didn't breakfast, I was afraid I might throw it up. (Laughing)</span> <span data-start="1378.1" data-end="1385.88">> Oh, there we go. This is a simple chat App, this is running in an internal build of Chromium,</span> <span data-start="1385.88" data-end="1392.94">but based on actual speck work. If you could type in any message in there.</span> <span data-start="1392.94" data-end="1397.94">> Oh, that's nice, thank you whoever tweeted that, oh, that's lovely, no one tweet anything</span> <span data-start="1397.94" data-end="1406.88">rude right now. > How's the WiFi holding up? I guess it's</span> <span data-start="1406.88" data-end="1417.31">‑‑ > Let's refresh that. Go again.Ed oh, that's</span> <span data-start="1417.31" data-end="1420.94">a disaster, isn't it I'll refresh this one as well.</span> <span data-start="1420.94" data-end="1425.029">> Go again, if not, we'll just babe don it ‑‑</span> <span data-start="1425.029" data-end="1428.059">> You say don't swear, > Yes, but it's great because it's not going</span> <span data-start="1428.059" data-end="1435.549">to display, so .. well, agreement tweets, which is a good sign. Oh, this worked like</span> <span data-start="1435.549" data-end="1442.01">five minutes ago. No, we might just have to aBonn don it. I'm going to drop on to roaming</span> <span data-start="1442.01" data-end="1447.55">and see if that helps. > Restart Chrome</span> <span data-start="1447.55" data-end="1453.73">oh, that's a good idea. That normally fixing everything. We're using fire fox here to send</span> <span data-start="1453.73" data-end="1458.96">the messages, so I can always blame them. Give it one more go, if not, we'll just bane</span> <span data-start="1458.96" data-end="1470.09">don it. Yes,thank you Remy! (Applause) no, stay. That's ‑‑ we've seen that happen</span> <span data-start="1470.09" data-end="1476.85">before, this is nothing new, what I'm going to do now is I'm going to close Chromium completely,</span> <span data-start="1476.85" data-end="1485.309">int browsers not open at all. No recent apps on. So .. many Remy would you care to send</span> <span data-start="1485.309" data-end="1493.179">another message. Now, what we're getting here, this is a push notification using open web</span> <span data-start="1493.179" data-end="1499.08">features, and completely native notification, the browser was closed started up the service</span> <span data-start="1499.08" data-end="1503.29">worker in the background and we got a push notification, because we're using native notification,</span> <span data-start="1503.29" data-end="1515.41">it appeared on multifamily watch as well just using the open web. (Applause) Remy's birth</span> <span data-start="1515.41" data-end="1534.429">day as well! Can we switch over to the laptop, is that possible (Happy birthday, to you ‑‑ happy</span> <span data-start="1534.429" data-end="1552.07">birthday to you. Happy birthday, happy birth dear Remy, happy birthday to you! (Applause)</span> <span data-start="1552.07" data-end="1558.12">> Brilliant. So .. right, I'm hideously running over now, the way we coded that, it's just</span> <span data-start="1558.12" data-end="1562.33">a standard, from your page, you register for push messaging, we'll give you the details</span> <span data-start="1562.33" data-end="1567.72">like the ID and end point where to send messages, but when that actually, when that's called</span> <span data-start="1567.72" data-end="1572.04">you gel get an vent in the service worker, you'll get to do what you want at this point,</span> <span data-start="1572.04" data-end="1577.94">look at data, update cache, show notification, once again, you get to did what you want,</span> <span data-start="1577.94" data-end="1583.24">in that case you can navigate to that page, refocus an existing tab. Background sink is</span> <span data-start="1583.24" data-end="1590.57">similar, you don't need a service operator for that, sometime late your fire an vent</span> <span data-start="1590.57" data-end="1595.45">in the service worker to do something for me that I was unable to do earlier. These</span> <span data-start="1595.45" data-end="1599.72">things require use permission, of course, they'll be told of this.</span> <span data-start="1599.72" data-end="1602.98">> You have ten minutes. > I have ten minutes, oh,I'm going to tell</span> <span data-start="1602.98" data-end="1613.83">you about how to code push and Sythisc, then (Laughing) okay, how did that demo work, Jack?</span> </p>
<p><span data-start="1613.83" data-end="1619.1">Well, I'll tell you. From the page you call navigator.serviceWorker.ready that gives you</span> <span data-start="1619.1" data-end="1627.37">the registration ‑‑ navigator.serviceWorker ‑‑ on our registration we call push.register,</span> <span data-start="1627.37" data-end="1631.09">that gives you the details and you post those to the service, you'll associate that with</span> <span data-start="1631.09" data-end="1636.34">the current use their will give you the end point information where you'll send the information.</span> <span data-start="1636.34" data-end="1643.37">For home, GSM, Google Cloud messaging, every browser can use their own, you'll need an</span> <span data-start="1643.37" data-end="1648.309">account set up with the different push messaging providers the data you'll send to these things</span> <span data-start="1648.309" data-end="1651.9">will be exactly the same, you'll just have to know which way you're sending it, which</span> <span data-start="1651.9" data-end="1660.35">will be a URL, when the user receives a message, you get a push event and you have a look to</span> <span data-start="1660.35" data-end="1667.36">see what kind of data, I'm going to react to that, I'm going to do ‑‑ after this</span> </p>
<p><span data-start="1667.36" data-end="1673.5">I'll show a notification. Something, this is something that native, even the really</span> <span data-start="1673.5" data-end="1679.85">best native apps, they get it wrong, often I'll get a tweet, I won't notice it when it</span> <span data-start="1679.85" data-end="1684.37">around arrive, on the under ground I'll see the notification, I'll click et, I'll get</span> <span data-start="1684.37" data-end="1693.151">nothing because they haven't cached that data off line. You get an vent when you get a click</span> <span data-start="1693.151" data-end="1699.309">notification and you do what you want, usually navigating to the page, give a we to enumerate</span> <span data-start="1699.309" data-end="1704.53">the client, which there pages within your scope, look at theme them, see if they're</span> <span data-start="1704.53" data-end="1711.22">focused, hidden, hang on, there's already a window that has focus, so I don't need to</span> <span data-start="1711.22" data-end="1715.66">show a notification or I don't need to navigate anywhere,I can determine that stuff ahead</span> <span data-start="1715.66" data-end="1720.97">of time. What about background Sync, lets you wake up the service worker at some vague</span> <span data-start="1720.97" data-end="1726.57">point in the future to do whatever you want this is a bit similar to push, it's a lot</span> <span data-start="1726.57" data-end="1730.88">simpler, if you try to send an e‑mail but the user has no connection, the user is down</span> <span data-start="1730.88" data-end="1738.29">it fails, you can saver it somewhere, IDB or another cache AI, then register for a Sync</span> <span data-start="1738.29" data-end="1746.03">event, that triggers a permission dialogue, then, sometimes later when the user has good</span> <span data-start="1746.03" data-end="1754.28">connectivity, you get a Sync vent, if the ID empty in‑box, get the out box and try</span> <span data-start="1754.28" data-end="1758.95">to send all the e‑mails, in this pattern, it works similar to installer event, if you</span> <span data-start="1758.95" data-end="1766.9">pass the event ‑‑ it will reschedule. If we fail to send the e‑mail it will be</span> <span data-start="1766.9" data-end="1776.37">scheduled for later this is registering for a single Sync event, you ask for ones on an</span> <span data-start="1776.37" data-end="1782.26">interval as well, use updating train did that that that the background, the ‑‑ is a</span> <span data-start="1782.26" data-end="1793.419">minimum, when things happen determined heuristically, if you register for a Sync once day and we</span> <span data-start="1793.419" data-end="1799.27">know the user looks allot your App like about 9:00 in the morning, we can schedule the Sync</span> <span data-start="1799.27" data-end="1808.28">for 10‑9, and coalescing it with other sink events. With service worker we gain a lot</span> <span data-start="1808.28" data-end="1814.03">of the features that make native superior, butane the bits that keep the web super your,</span> <span data-start="1814.03" data-end="1819.84">the instant on, no install required, open platform. Chrome is going to start chipping</span> <span data-start="1819.84" data-end="1825.99">this stuff this year, it's already if canary, it'll go to stable this year, fire fox actively</span> <span data-start="1825.99" data-end="1830.32">developing, Microsoft is investigating it, we haven't heard anything from apple, but</span> <span data-start="1830.32" data-end="1836.83">that's not unusual at this stage, it's designed to be an enhancement, I mean no browser is</span> <span data-start="1836.83" data-end="1838.169">going to have it on the first visit</span> <span data-start="1838.169" data-end="1843.35">> Have to prepare, use basic object detection you can give the benefit to the browsers that</span> <span data-start="1843.35" data-end="1853.01">support it, which is a lot of users in chrome's case. It doesn't turn push messages into ‑‑ it</span> <span data-start="1853.01" data-end="1858.049">gives you nothing for free, but it treats you like an adult, gifts you the moving parts</span> <span data-start="1858.049" data-end="1864.059">and do what you want, make things faster, work off line, create new features trance</span> <span data-start="1864.059" data-end="1873.13">code a video former using streams, turn build a client side Wik I, do it in a way this'</span> <span data-start="1873.13" data-end="1880.179">unique your App, the way that gives the best user experience. I am heavily biased. I think</span> <span data-start="1880.179" data-end="1887.38">this changes what the web is capable. Let's build some cool stuff with it. Thank you very</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
