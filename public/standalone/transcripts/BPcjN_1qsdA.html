<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>BPcjN_1qsdA</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/BPcjN_1qsdA?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="18.64" data-end="21.89">hi everyone I'm going to talk about a</span> <span data-start="21.89" data-end="22.97">couple of tools that I've been working</span> <span data-start="22.97" data-end="26.33">on and how they help you bundle your</span> <span data-start="26.33" data-end="28.25">front-end web applications with HTTP two</span> <span data-start="28.25" data-end="31.4">so a couple things I'm uncover is just a</span> <span data-start="31.4" data-end="34.43">rough intro on how server push actually</span> <span data-start="34.43" data-end="36.26">works not the basics of HTTP to I'm</span> <span data-start="36.26" data-end="37.55">assuming a familiar with that or there's</span> <span data-start="37.55" data-end="39.62">other talks to explain that better and</span> <span data-start="39.62" data-end="40.61">then there's two demos that I want to</span> <span data-start="40.61" data-end="41.96">show the two projects that i mentioned</span> <span data-start="41.96" data-end="44.42">one is going to help you reduce latency</span> <span data-start="44.42" data-end="46.82">and save bandwidth so therefore</span> <span data-start="46.82" data-end="48.68">accelerate your websites and the other</span> <span data-start="48.68" data-end="51.02">one is going to help you a transpile but</span> <span data-start="51.02" data-end="53.329">particularly for projects that are being</span> <span data-start="53.329" data-end="57.95">served with HTTP server push it's</span> <span data-start="57.95" data-end="60.2">produced over push is basically adding</span> <span data-start="60.2" data-end="62.27">bundling like you would do with a web</span> <span data-start="62.27" data-end="63.8">pack or browserify all these things into</span> <span data-start="63.8" data-end="66.56">the protocol layer it's a introduces a</span> <span data-start="66.56" data-end="69.74">new semantics into the protocol most of</span> <span data-start="69.74" data-end="71.96">the other stuff in HP two is really just</span> <span data-start="71.96" data-end="74.09">the same as HTTP 1.1 but better so you</span> <span data-start="74.09" data-end="75.47">get marginal improvements in performance</span> <span data-start="75.47" data-end="77.479">but would a to b to server push you can</span> <span data-start="77.479" data-end="81.92">achieve much greater advantages so lots</span> <span data-start="81.92" data-end="84.02">of different little little uh you know</span> <span data-start="84.02" data-end="86.57">pros and cons up my plusses for a server</span> <span data-start="86.57" data-end="89.96">push over the legacy file concatenation</span> </p>
<p><span data-start="89.96" data-end="92.93">I guess you'd call it so its native in</span> <span data-start="92.93" data-end="94.729">the browser so the browser can optimize</span> <span data-start="94.729" data-end="96.68">it it works for any file and not just</span> <span data-start="96.68" data-end="98.99">JavaScript or CSS or images it just</span> <span data-start="98.99" data-end="103.58">works blindly across it all you can cash</span> <span data-start="103.58" data-end="105.86">individual files and update just those</span> <span data-start="105.86" data-end="108.38">ones rather than an entire bundle and it</span> <span data-start="108.38" data-end="109.67">works on a foot on the very first</span> <span data-start="109.67" data-end="111.11">request so you don't have to like load</span> <span data-start="111.11" data-end="113.299">the HTML and then serve your</span> <span data-start="113.299" data-end="114.59">concatenated file you can serve</span> <span data-start="114.59" data-end="116.54">everything from the straight from the</span> <span data-start="116.54" data-end="119.78">first response all right and you know</span> <span data-start="119.78" data-end="120.799">falcon combination we're all familiar</span> <span data-start="120.799" data-end="123.11">with some of the problems that it has so</span> <span data-start="123.11" data-end="125.56">i want to show you basically how a</span> <span data-start="125.56" data-end="128.599">server push request flow goes real quick</span> <span data-start="128.599" data-end="130.249">so you get a request coming in from a</span> <span data-start="130.249" data-end="131.989">browser to your web server let's say for</span> <span data-start="131.989" data-end="133.44">/ for the home</span> <span data-start="133.44" data-end="135.12">page what's going to happen is your</span> <span data-start="135.12" data-end="136.23">observer is going to analyze that and</span> <span data-start="136.23" data-end="137.46">say okay you know if you're looking for</span> <span data-start="137.46" data-end="138.69">the home page you're probably gonna need</span> <span data-start="138.69" data-end="140.4">a fab you con as well so I'm going to</span> <span data-start="140.4" data-end="142.26">serve you a fake request because that's</span> <span data-start="142.26" data-end="143.76">what a promise is it's a fake request</span> <span data-start="143.76" data-end="145.35">not just a response with a request first</span> <span data-start="145.35" data-end="147">and it's going to say I'm going to put</span> <span data-start="147" data-end="149.31">it on another HP to stream HP has lots</span> <span data-start="149.31" data-end="150.72">of different streams they all go over</span> <span data-start="150.72" data-end="153.66">the same socket but just keep that a</span> <span data-start="153.66" data-end="156.81">concept in mind but it can push lots of</span> <span data-start="156.81" data-end="158.25">lots of different promises right lots of</span> <span data-start="158.25" data-end="159.54">different requests I did anticipating</span> <span data-start="159.54" data-end="162.12">the client to make finally it's going to</span> <span data-start="162.12" data-end="163.47">serve the actual response to the</span> <span data-start="163.47" data-end="165.3">original request it's going to serve the</span> <span data-start="165.3" data-end="167.01">headers in the body and then once that's</span> <span data-start="167.01" data-end="168.81">once the browser has that it's going to</span> <span data-start="168.81" data-end="171.24">start pushing all those promises so now</span> <span data-start="171.24" data-end="172.59">it's serving the responses to these</span> <span data-start="172.59" data-end="175.65">requests that it pretended occurred so</span> <span data-start="175.65" data-end="177.09">those I'll go over it over the wire and</span> <span data-start="177.09" data-end="180.03">we've got a lot of these streams going</span> <span data-start="180.03" data-end="182.01">on independently so you can prioritize</span> <span data-start="182.01" data-end="184.32">things you can schedule things it's</span> <span data-start="184.32" data-end="186.24">pretty cool so let's see what we can do</span> <span data-start="186.24" data-end="188.25">we've got a tool called HTTP to server</span> <span data-start="188.25" data-end="191.1">and let's do a little demo see what</span> <span data-start="191.1" data-end="193.98">happens if we try to sum in comparison</span> <span data-start="193.98" data-end="196.35">to previous practices I've taken one of</span> </p>
<p><span data-start="196.35" data-end="198.84">Simon Swain's epic projects from last</span> <span data-start="198.84" data-end="201.209">year's conference and I want to see how</span> <span data-start="201.209" data-end="205.26">how fast it works with HB 2 versus hp1</span> <span data-start="205.26" data-end="207.12">concatenation here on the left-hand side</span> <span data-start="207.12" data-end="208.85">I've got a browser simulating a</span> <span data-start="208.85" data-end="213.63">connection from Singapore to San</span> </p>
<p><span data-start="213.63" data-end="215.58">Francisco that's roughly you know 300</span> <span data-start="215.58" data-end="217.8">milliseconds of artificial latency but</span> <span data-start="217.8" data-end="219.45">I've got a gigabit connection because</span> <span data-start="219.45" data-end="221.34">Singapore's pretty good like that but</span> <span data-start="221.34" data-end="222.63">what's going to happen with this latency</span> <span data-start="222.63" data-end="226.29">if we run a server that serves the HTTP</span> <span data-start="226.29" data-end="228.75">one version of the project which has a</span> <span data-start="228.75" data-end="230.54">lot of jobs with clouds and some CSS and</span> <span data-start="230.54" data-end="234.12">then we load that page that extra</span> <span data-start="234.12" data-end="235.59">latency is going to force a lot of round</span> <span data-start="235.59" data-end="238.94">trips so we've seeing this graph here</span> <span data-start="238.94" data-end="242.1">this traditional waterfall the green</span> <span data-start="242.1" data-end="243.6">parts are basically the latency on the</span> <span data-start="243.6" data-end="245.16">network there's very little time</span> <span data-start="245.16" data-end="246.239">actually transferring because I've got a</span> <span data-start="246.239" data-end="248.489">gigabit right but the latency is going</span> <span data-start="248.489" data-end="251.13">to kill my app look at that so it's</span> <span data-start="251.13" data-end="252.959">taking like four seconds all right so</span> <span data-start="252.959" data-end="255.36">let's see what happens with HTTP two if</span> </p>
<p><span data-start="255.36" data-end="257.25">I runnin HP to server I'll have to do is</span> <span data-start="257.25" data-end="258.859">this and by the way to the HP to server</span> <span data-start="258.859" data-end="261.84">it's blind to any kind of file type so i</span> <span data-start="261.84" data-end="263.16">don't have to configure you know</span> <span data-start="263.16" data-end="264.87">complicated gulp script or a web pack</span> <span data-start="264.87" data-end="267.28">config it just serves everything in</span> <span data-start="267.28" data-end="271.24">pushes it very easy so let me turn off</span> <span data-start="271.24" data-end="274.3">this cpu monster all right and go over</span> <span data-start="274.3" data-end="277.57">to the HP to site run that and see what</span> <span data-start="277.57" data-end="278.889">happens it's got its got one or cuts and</span> <span data-start="278.889" data-end="280.72">it's pushing tons of files all those</span> <span data-start="280.72" data-end="283.48">requests are now getting pushed how long</span> <span data-start="283.48" data-end="285.82">did I take about the same oh that's not</span> <span data-start="285.82" data-end="288.34">good right so why is that so there's a</span> <span data-start="288.34" data-end="290.38">lot of that it goes up if you look at</span> <span data-start="290.38" data-end="292.3">this left here is excruciatingly Lee</span> <span data-start="292.3" data-end="293.8">slow right you get a request and then</span> <span data-start="293.8" data-end="295.78">you know if a vivir con takes 100 5</span> <span data-start="295.78" data-end="299.26">milliseconds what's hell so this server</span> <span data-start="299.26" data-end="301.87">is optimizing your files with you know</span> <span data-start="301.87" data-end="303.34">complicated compression that takes about</span> <span data-start="303.34" data-end="304.69">a hundred times longer than gzip so it's</span> <span data-start="304.69" data-end="306.16">not meant to be streaming so when you</span> <span data-start="306.16" data-end="307.45">start the server it's gonna have a cold</span> <span data-start="307.45" data-end="309.73">cash when you're running this again and</span> <span data-start="309.73" data-end="311.44">again it's going to start warming up the</span> <span data-start="311.44" data-end="312.97">cash you know keeping all these assets</span> <span data-start="312.97" data-end="314.29">in memory and a compressed State and</span> <span data-start="314.29" data-end="316.51">eliminate all of that so let's say we</span> <span data-start="316.51" data-end="318.82">clear the log the server is still</span> <span data-start="318.82" data-end="322.03">running and we can go back caching is</span> <span data-start="322.03" data-end="324.25">disabled you can see and run it again</span> </p>
<p><span data-start="324.25" data-end="326.68">BAM how fast was that right so</span> <span data-start="326.68" data-end="328.69">everything is now like you know 0 0 1</span> <span data-start="328.69" data-end="332.44">millisecond and on the network it took a</span> <span data-start="332.44" data-end="334.479">second so we're three times faster just</span> <span data-start="334.479" data-end="336.22">eliminating all the latency that's what</span> <span data-start="336.22" data-end="338.62">server push will do you get one shot of</span> <span data-start="338.62" data-end="340.33">latency that's the minimal amount of</span> <span data-start="340.33" data-end="341.32">latency that you're going to have to</span> <span data-start="341.32" data-end="342.58">accept because that's just your network</span> <span data-start="342.58" data-end="344.11">but everything else can be eliminated</span> <span data-start="344.11" data-end="346.3">with HP server push rest concatenation</span> <span data-start="346.3" data-end="348.97">cannot do this so all right that's</span> <span data-start="348.97" data-end="350.47">pretty good result let's talk about how</span> <span data-start="350.47" data-end="356.2">that actually works go back so our page</span> <span data-start="356.2" data-end="357.85">load time is really a function of</span> <span data-start="357.85" data-end="360.19">latency and bandwidth there's a it's</span> <span data-start="360.19" data-end="361.57">called a bandwidth delay product if you</span> <span data-start="361.57" data-end="362.919">wanna look this up you know basically</span> <span data-start="362.919" data-end="364.18">the product of your data link capacity</span> <span data-start="364.18" data-end="365.74">that's like your aggregate band was like</span> <span data-start="365.74" data-end="367.99">a gigabit per second and your round trip</span> <span data-start="367.99" data-end="369.94">time measured in seconds would be you</span> <span data-start="369.94" data-end="371.44">know point three seconds from here to</span> <span data-start="371.44" data-end="375.31">you know west coast of us this is called</span> <span data-start="375.31" data-end="378.43">the long fast networks I'm not sure it's</span> <span data-start="378.43" data-end="380.56">called 11 or elephant I like elephants</span> <span data-start="380.56" data-end="382.44">so I'm going to call it elephants and</span> <span data-start="382.44" data-end="384.669">this is a common case for most people</span> <span data-start="384.669" data-end="385.72">around the world nowadays that you have</span> <span data-start="385.72" data-end="386.77">a data center that's around the world</span> <span data-start="386.77" data-end="388.03">and you yourself have a very</span> <span data-start="388.03" data-end="390.01">high-powered mobile device and you're</span> <span data-start="390.01" data-end="392.14">probably on a pretty speedy 4G</span> <span data-start="392.14" data-end="394.99">connection or beyond going forward and</span> <span data-start="394.99" data-end="397.27">we need to optimize the latency so how</span> <span data-start="397.27" data-end="398.95">does a to do that we saw it basically</span> <span data-start="398.95" data-end="400.7">cuts out your graph</span> <span data-start="400.7" data-end="401.99">you know left-hand side loads in one</span> <span data-start="401.99" data-end="404.09">second if you have a lot of latency take</span> <span data-start="404.09" data-end="405.47">like an order of magnitude more than</span> <span data-start="405.47" data-end="408.14">that just because requests induce and</span> <span data-start="408.14" data-end="410.84">compound this latency so that's pretty</span> <span data-start="410.84" data-end="412.46">sweet what else can we do to eliminate</span> <span data-start="412.46" data-end="414.38">well the other half the product would be</span> <span data-start="414.38" data-end="416.33">the bandwidth if you can if you can get</span> <span data-start="416.33" data-end="418.01">free bandwidth from compression and this</span> <span data-start="418.01" data-end="420.26">magical thing called cash digests that</span> <span data-start="420.26" data-end="422">will help a lot so let's let's look at</span> <span data-start="422" data-end="423.65">that so I mentioned that we doing this</span> <span data-start="423.65" data-end="426.47">very fancy compression it introduces a</span> <span data-start="426.47" data-end="428.48">massive load of you know computational</span> <span data-start="428.48" data-end="431.24">demand on the server but you know but</span> <span data-start="431.24" data-end="433.01">caching we can we can avoid you know any</span> <span data-start="433.01" data-end="435.29">kind of performance impact and the two</span> <span data-start="435.29" data-end="437.33">codecs that i'm using here zup flea or</span> <span data-start="437.33" data-end="438.62">zip fly I don't know how it could</span> <span data-start="438.62" data-end="441.26">pronounce it basically that's compatible</span> <span data-start="441.26" data-end="442.46">with gzip so any browser that supports</span> <span data-start="442.46" data-end="444.98">gzip it's going to support this slightly</span> <span data-start="444.98" data-end="446.9">more compressed version of your output</span> <span data-start="446.9" data-end="449.39">but if you're using let's say Firefox or</span> </p>
<p><span data-start="449.39" data-end="451.97">Chrome you can support broadly and</span> <span data-start="451.97" data-end="454.55">that's going to save significant amounts</span> <span data-start="454.55" data-end="456.32">of bandwidth now it's only working on</span> <span data-start="456.32" data-end="459.08">HTTPS if you hadn't if you notice that</span> <span data-start="459.08" data-end="461.45">in the the demo data showed the HTTP one</span> <span data-start="461.45" data-end="462.95">version was just you know playing static</span> <span data-start="462.95" data-end="465.71">web server running on HTTP but the HTTP</span> <span data-start="465.71" data-end="468.26">two one had to run on HTTPS and one of</span> <span data-start="468.26" data-end="469.67">the troubles that I think a lot of</span> <span data-start="469.67" data-end="471.11">developers are familiar with is setting</span> <span data-start="471.11" data-end="472.46">up like certificates for localhost</span> <span data-start="472.46" data-end="474.44">development getting the sign adding the</span> <span data-start="474.44" data-end="476.36">exceptions to your browser to pain so</span> </p>
<p><span data-start="476.36" data-end="477.95">I've kind of taken care of that it's</span> <span data-start="477.95" data-end="479.81">when you run HP server the first time</span> <span data-start="479.81" data-end="482.06">it'll register generator tificate hook</span> <span data-start="482.06" data-end="483.62">it up to your keychain and your browser</span> <span data-start="483.62" data-end="485.54">will just have a green secure website</span> <span data-start="485.54" data-end="487.25">thing it's fantastic so even if you just</span> <span data-start="487.25" data-end="488.78">use it for that you're gonna have a good</span> <span data-start="488.78" data-end="492.83">time next we've got cash digests to save</span> <span data-start="492.83" data-end="495.02">us then say for some bandwidth and this</span> <span data-start="495.02" data-end="497.27">is huge and this is new to me until like</span> <span data-start="497.27" data-end="499.37">a month ago I not a computer science</span> <span data-start="499.37" data-end="502.22">type of person so I didn't know anything</span> <span data-start="502.22" data-end="504.68">about bloom filters and I was like lord</span> <span data-start="504.68" data-end="507.17">of the rings gollum coded bloom filters</span> <span data-start="507.17" data-end="510.2">it's a thing right but basically right</span> <span data-start="510.2" data-end="511.85">what we're doing is we're telling the</span> <span data-start="511.85" data-end="513.5">server which files we've already got</span> <span data-start="513.5" data-end="516.17">cached and we're basically hashing</span> <span data-start="516.17" data-end="518.39">fingerprinting every file or just the</span> </p>
<p><span data-start="518.39" data-end="520.52">URL taking a couple of bits from that</span> <span data-start="520.52" data-end="522.11">sticking them all together into a little</span> <span data-start="522.11" data-end="524.33">header and telling the server here this</span> <span data-start="524.33" data-end="525.71">is these are the files we have anything</span> <span data-start="525.71" data-end="527.3">y'all anything that matches that that</span> <span data-start="527.3" data-end="528.5">you're trying to push me just don't push</span> <span data-start="528.5" data-end="530.66">it so essentially we're skipping all of</span> <span data-start="530.66" data-end="532.22">the unnecessary files that haven't</span> <span data-start="532.22" data-end="533.63">changed since the last time I visited a</span> <span data-start="533.63" data-end="534.529">page he</span> <span data-start="534.529" data-end="536.389">savings because most of times not your</span> <span data-start="536.389" data-end="538.67">entire app is changing tiny parts of</span> <span data-start="538.67" data-end="540.949">your code base incrementally evolve but</span> <span data-start="540.949" data-end="541.91">most of the libraries and frameworks</span> <span data-start="541.91" data-end="544.759">they're not changing all the time so</span> <span data-start="544.759" data-end="546.56">that's basically how it works that's</span> <span data-start="546.56" data-end="548.689">what it's meant to do there's a speck</span> <span data-start="548.689" data-end="550.999">pretty recent from this year that's</span> <span data-start="550.999" data-end="555.319">doing this all over HTTP frames I'm</span> <span data-start="555.319" data-end="557.12">using because if the browser knee</span> <span data-start="557.12" data-end="558.529">support that natively I'm using a</span> <span data-start="558.529" data-end="559.91">service worker for Chrome and Firefox</span> <span data-start="559.91" data-end="562.249">and a cookie fallback so it works on</span> <span data-start="562.249" data-end="564.139">every single browser right now which is</span> <span data-start="564.139" data-end="565.519">pretty cool so we save a lot of</span> <span data-start="565.519" data-end="566.809">bandwidth and we save a lot of latency</span> <span data-start="566.809" data-end="567.86">whether i do because all these round</span> <span data-start="567.86" data-end="571.029">trips are now eliminated so second tool</span> <span data-start="571.029" data-end="574.249">that I've got for you is called unbundle</span> <span data-start="574.249" data-end="576.199">and I'll show you a little demo of that</span> <span data-start="576.199" data-end="578.089">as well this is going to help you with</span> <span data-start="578.089" data-end="579.879">the front-end development side of things</span> <span data-start="579.879" data-end="581.72">everyone's familiar with the JavaScript</span> <span data-start="581.72" data-end="583.579">fatigue so let's let's set up a little</span> <span data-start="583.579" data-end="586.49">imaginary tiny little hello world</span> <span data-start="586.49" data-end="589.91">project so we know we want to use proper</span> <span data-start="589.91" data-end="591.8">tools we've got react framework from NPM</span> <span data-start="591.8" data-end="595.069">which is awesome and p.m. i mean i'm not</span> <span data-start="595.069" data-end="597.379">really react whatever each their own and</span> </p>
<p><span data-start="597.379" data-end="600.199">I've got a minimalist application</span> <span data-start="600.199" data-end="603.5">javascript HTML and there we go so what</span> <span data-start="603.5" data-end="604.73">do we normally do we set up a web pack</span> <span data-start="604.73" data-end="607.04">build or a gulp thing or you know who</span> <span data-start="607.04" data-end="608.559">knows what right it's a lot of work</span> <span data-start="608.559" data-end="611.68">let's cut all that short and say</span> <span data-start="611.68" data-end="615.439">unbundle and it's going to run but you</span> <span data-start="615.439" data-end="616.85">know this this computer has about the</span> <span data-start="616.85" data-end="618.649">power of most people's phones if you</span> <span data-start="618.649" data-end="621.319">bought them this year but yet it's going</span> <span data-start="621.319" data-end="623.54">to be pretty quick right the reason is</span> <span data-start="623.54" data-end="625.1">that it's doing all this stuff in</span> <span data-start="625.1" data-end="626.6">parallel so I've got two cores in here</span> <span data-start="626.6" data-end="628.85">no to physical cores so he's going to</span> <span data-start="628.85" data-end="630.649">run you know parallel builds on this and</span> <span data-start="630.649" data-end="632.269">it's tracing all of the files that we</span> <span data-start="632.269" data-end="634.459">have which is all mostly react obviously</span> <span data-start="634.459" data-end="636.529">this is one one of my own files and</span> <span data-start="636.529" data-end="639.379">probably 170 files from react it</span> <span data-start="639.379" data-end="642.29">processed them all and then we run HTTP</span> <span data-start="642.29" data-end="644.66">to server and we're going to host that</span> <span data-start="644.66" data-end="647.929">website maybe not okay I gotta kill the</span> </p>
<p><span data-start="647.929" data-end="652.6">I don't give me a second here we go okay</span> <span data-start="652.6" data-end="656.23">port issues</span> <span data-start="656.24" data-end="658.53">here we go so we're running our server</span> <span data-start="658.53" data-end="661.62">now and serving the files that we just</span> <span data-start="661.62" data-end="663.15">created that's the static files and</span> <span data-start="663.15" data-end="664.68">because these commands have nothing</span> <span data-start="664.68" data-end="666.03">inherently to each other but they just</span> <span data-start="666.03" data-end="667.53">assume you know sensible defaults so</span> <span data-start="667.53" data-end="669.54">they kind of work well together you</span> <span data-start="669.54" data-end="671.07">could use either one without theater so</span> <span data-start="671.07" data-end="672.87">let's clear our browser no tricks up our</span> <span data-start="672.87" data-end="675.57">sleeves and see what happens if we load</span> <span data-start="675.57" data-end="679.77">our app okay like I said the first time</span> <span data-start="679.77" data-end="681.84">the caching meets the load okay well it</span> <span data-start="681.84" data-end="683.7">worked so we've got our es6 app we've</span> <span data-start="683.7" data-end="686.01">got node modules it's all working it's</span> <span data-start="686.01" data-end="688.26">pretty sweet and if we look at the log</span> <span data-start="688.26" data-end="690.48">we can see there's a lot going on here</span> <span data-start="690.48" data-end="693.54">what is that right but really we're</span> <span data-start="693.54" data-end="695.19">using push just like before with the</span> <span data-start="695.19" data-end="698.7">static cold war demo here we've got one</span> <span data-start="698.7" data-end="700.41">request coming in at the top this get</span> <span data-start="700.41" data-end="702.12">for the homepage and then we're just</span> <span data-start="702.12" data-end="705.06">going to push app GS and a lot of emoji</span> <span data-start="705.06" data-end="706.41">that's kind of interesting we'll talk</span> <span data-start="706.41" data-end="708.9">about that but a lot of these node</span> <span data-start="708.9" data-end="709.8">modules is you're going to push</span> <span data-start="709.8" data-end="711.51">individually rather than like a web pack</span> <span data-start="711.51" data-end="713.43">bundle everything in one in one blob</span> <span data-start="713.43" data-end="715.41">it's all happening individually and at</span> <span data-start="715.41" data-end="716.43">the end here does a service worker</span> <span data-start="716.43" data-end="718.02">that's got something to do with the cash</span> <span data-start="718.02" data-end="720.66">digests so that's kind of sweet let's</span> <span data-start="720.66" data-end="729.839">let's jump back into the slides so this</span> <span data-start="729.839" data-end="732">tool is all based on you know really</span> <span data-start="732" data-end="734.97">incredible technology browser 54</span> <span data-start="734.97" data-end="737.339">dependency tracing battle for doing a</span> <span data-start="737.339" data-end="739.02">lot of the processing you know mapping</span> <span data-start="739.02" data-end="741.12">the file paths and then finally using</span> <span data-start="741.12" data-end="743.36">system jas behind the scenes to</span> <span data-start="743.36" data-end="745.02">asynchronously load things in the</span> <span data-start="745.02" data-end="747.12">browser you're not actually interacting</span> <span data-start="747.12" data-end="748.86">with these tools any more reps tracting</span> <span data-start="748.86" data-end="749.88">over them and building the next</span> <span data-start="749.88" data-end="751.38">generation of tools for frontal</span> <span data-start="751.38" data-end="754.589">development it's got a lot of stuff</span> <span data-start="754.589" data-end="756.78">built in batteries included it's</span> <span data-start="756.78" data-end="758.43">minified you got your source maps for</span> <span data-start="758.43" data-end="760.02">your development and you've got all this</span> <span data-start="760.02" data-end="762.18">latest syntax available for yourself to</span> <span data-start="762.18" data-end="764.49">use normally this takes a lot of time I</span> <span data-start="764.49" data-end="765.72">know I took a lot of time to learn all</span> <span data-start="765.72" data-end="767.43">these things and set it all up now it's</span> <span data-start="767.43" data-end="770.13">very easy like I said it's very it's</span> <span data-start="770.13" data-end="771.51">going to be very fast especially if you</span> <span data-start="771.51" data-end="773.19">like quad core or going forward or</span> <span data-start="773.19" data-end="774.45">you're running this on a build server</span> <span data-start="774.45" data-end="776.01">with like I mean it maybe have like 32</span> <span data-start="776.01" data-end="777.9">cores on your bills or your builds going</span> <span data-start="777.9" data-end="779.52">to be lightning fast it's got a watch</span> <span data-start="779.52" data-end="780.69">mode as well for incremental build</span> <span data-start="780.69" data-end="784.38">sticks milliseconds right happening in</span> <span data-start="784.38" data-end="787.15">parallel it's pretty sweet all right</span> <span data-start="787.15" data-end="789.23">like I said we're using service works</span> <span data-start="789.23" data-end="791.54">using service workers that means it's</span> <span data-start="791.54" data-end="793.34">got some little JavaScript running in</span> <span data-start="793.34" data-end="795.14">the browser right it's like having a CDN</span> <span data-start="795.14" data-end="797.81">on the clients machine the same it's</span> <span data-start="797.81" data-end="799.43">using the cache API which is kind of a</span> <span data-start="799.43" data-end="801.41">misnomer like it the more I started</span> <span data-start="801.41" data-end="802.61">using it i'm more i figured out that</span> <span data-start="802.61" data-end="805.34">this isn't really for caching it's kind</span> <span data-start="805.34" data-end="808.79">of just a key value storage for requests</span> <span data-start="808.79" data-end="810.41">and responses doesn't have any kind of</span> <span data-start="810.41" data-end="811.97">complicated and if you have to have to</span> <span data-start="811.97" data-end="814.61">implement all of the HTTP caching logic</span> <span data-start="814.61" data-end="816.74">from scratch which isn't something</span> <span data-start="816.74" data-end="819.17">everyone should be doing I feel so you</span> <span data-start="819.17" data-end="820.61">can rely on something like that that's</span> <span data-start="820.61" data-end="823.28">been that's already prepared to take</span> <span data-start="823.28" data-end="825.47">care of that without errors now</span> <span data-start="825.47" data-end="827.03">cache-control immutable is another</span> <span data-start="827.03" data-end="828.61">recent spec that came out this year and</span> <span data-start="828.61" data-end="831.17">it's going to tell the browser to never</span> <span data-start="831.17" data-end="833.57">invalidate an asset that's kind of cool</span> <span data-start="833.57" data-end="835.19">right if you have a asset that you</span> <span data-start="835.19" data-end="836.6">guaranteed to never change like your</span> <span data-start="836.6" data-end="838.76">file revving it you should your browser</span> <span data-start="838.76" data-end="840.32">should isn't even going to check if it's</span> <span data-start="840.32" data-end="842.99">you know out expired until that max age</span> <span data-start="842.99" data-end="845.93">has a past but if you set like a file</span> <span data-start="845.93" data-end="849.65">rift asset to expire in 10 years your</span> <span data-start="849.65" data-end="850.94">browser is never going to be even doing</span> <span data-start="850.94" data-end="853.31">round trip at all you can guarantee that</span> <span data-start="853.31" data-end="854.63">you can rely on that and your servers</span> <span data-start="854.63" data-end="856.31">wrkn is going to read it from cache put</span> <span data-start="856.31" data-end="857.63">it in a digest your server is never</span> <span data-start="857.63" data-end="859.49">going to push that file ever again so</span> <span data-start="859.49" data-end="862.4">you save huge bandwidth of course you</span> <span data-start="862.4" data-end="864.05">have to be careful with that so I'm only</span> <span data-start="864.05" data-end="866.69">applying as the reft files now those</span> <span data-start="866.69" data-end="869.18">emoji and the file names what's up with</span> <span data-start="869.18" data-end="871.22">that well this is my solution to cache</span> <span data-start="871.22" data-end="872.36">invalidation which is the hardest</span> <span data-start="872.36" data-end="875.51">problem in computer science and I think</span> </p>
<p><span data-start="875.51" data-end="876.98">I'm owed your the solution to most hard</span> <span data-start="876.98" data-end="880.76">problems i'm using x.x hash 64 which is</span> <span data-start="880.76" data-end="882.46">really really fast fingerprinting</span> <span data-start="882.46" data-end="884.99">algorithm and then encoding that in</span> <span data-start="884.99" data-end="886.97">emoji right because it's just bits and</span> <span data-start="886.97" data-end="889.82">why not you know hex is so lame so you</span> <span data-start="889.82" data-end="891.44">stick an emotion there we need to change</span> <span data-start="891.44" data-end="892.64">your file is going to come up with the</span> <span data-start="892.64" data-end="895.28">new emoji and to the browser it's all</span> <span data-start="895.28" data-end="896.84">transparent this works you know I'm</span> <span data-start="896.84" data-end="897.92">surprised there wasn't actually any</span> <span data-start="897.92" data-end="900.28">serious issues with this many tools</span> <span data-start="900.28" data-end="902.24">showed us to some people and they liked</span> <span data-start="902.24" data-end="906.35">it as well so that's my two projects and</span> </p>
<p><span data-start="906.35" data-end="908.24">I hope you enjoy them I enjoyed working</span> <span data-start="908.24" data-end="909.8">on them and I think this is the future</span> <span data-start="909.8" data-end="911.79">thank you</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
