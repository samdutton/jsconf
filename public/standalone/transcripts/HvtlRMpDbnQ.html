<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>HvtlRMpDbnQ</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/HvtlRMpDbnQ?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="0.14" data-end="1.14">Strike a pose\h gesture recognition in JavaScript with Machine Learning & Arduino</span> <span data-start="1.14" data-end="2.14">Charlie Gerard PARISS: I have been enjoying all of these</span> <span data-start="2.14" data-end="3.14">presentations from backstage and I'm like reading everything backwards.</span> <span data-start="3.14" data-end="4.14">But it's cool.</span> <span data-start="4.14" data-end="5.14">All right.</span> <span data-start="5.14" data-end="6.14">So, next we have strike a pose\h gesture recognition in JavaScript with Charlie Gerard.</span> <span data-start="6.14" data-end="7.14">So, can we give some encouragement and give some clapping and\h whoo!</span> <span data-start="7.14" data-end="8.14">Charlie!</span> <span data-start="8.14" data-end="9.14">[ Applause ] CHARLIE: Thank you.</span> </p>
<p><span data-start="9.14" data-end="10.14">Thanks so much for the introduction.</span> <span data-start="10.14" data-end="11.14">And thanks, everybody, for the warm welcome.</span> <span data-start="11.14" data-end="14.11">We'll see if you feel the same way at the end of the talk.</span> <span data-start="14.11" data-end="15.11">But that was nice.</span> <span data-start="15.11" data-end="16.619">So, yes, my name is Charlie.</span> <span data-start="16.619" data-end="18.32">I'm a developer at Atlassian.</span> <span data-start="18.32" data-end="20.599">I live in Sydney in Australia.</span> </p>
<p><span data-start="20.599" data-end="25.34">You might not know Atlassian, but maybe the product, Jira.</span> <span data-start="25.34" data-end="29.079">But what I'm going to talk about today has nothing to do with Jira.</span> <span data-start="29.079" data-end="34.89">And outside of my job as well, I'm a Google developer expert in web technologies and a</span> <span data-start="34.89" data-end="36.05">Mozilla TechSpeaker.</span> <span data-start="36.05" data-end="40.719">There's been a few other speakers part of these groups in the past few days.</span> <span data-start="40.719" data-end="43.8">If you have questions, feel free to ask us.</span> <span data-start="43.8" data-end="48.329">But the title of this talk was strike a pose.</span> <span data-start="48.329" data-end="50.559">And I don't know if there's any Madonna fans.</span> <span data-start="50.559" data-end="51.559">I forgot.</span> </p>
<p><span data-start="51.559" data-end="52.81">I should say that first.</span> <span data-start="52.81" data-end="57.379">So, I really like human computer interaction.</span> <span data-start="57.379" data-end="58.859">With Jira, nothing to do with that.</span> <span data-start="58.859" data-end="65.92">But at home, I like to explore ways to interact with technology and interface with devices</span> <span data-start="65.92" data-end="68">in ha different way.</span> <span data-start="68" data-end="71.68">Maybe not with your computer or your phone, or maybe using the phone a different way.</span> <span data-start="71.68" data-end="76.979">So, this is why I called this talk strike a pose because it's from the song Vogue.</span> <span data-start="76.979" data-end="81.49">And I don't know if you know it, but vogueing is a type of dance where you don't follow</span> <span data-start="81.49" data-end="82.68">certain steps.</span> <span data-start="82.68" data-end="88.88">You just express yourself in different gestures and it's who you are and mow with dance.</span> <span data-start="88.88" data-end="90.29">But we're not going to dance today.</span> </p>
<p><span data-start="90.29" data-end="91.619">Not what we're gonna do.</span> <span data-start="91.619" data-end="96.219">But we are going use our gestures to play a game of Street Fighter.</span> <span data-start="96.219" data-end="100.09">At the end, that's the goal.</span> <span data-start="100.09" data-end="101.09">Yes.</span> <span data-start="101.09" data-end="103.06">So, to do this, there's a few different ways.</span> <span data-start="103.06" data-end="106.78">But the way we're going to talk about today, you need this to get started.</span> <span data-start="106.78" data-end="108.979">So, we're going to use Arduino.</span> <span data-start="108.979" data-end="112.539">I'm really glad some of you did workshops yesterday to use hardware.</span> <span data-start="112.539" data-end="115.34">You already know a little bit what I'm going to talk about.</span> <span data-start="115.34" data-end="116.909">This is probably not the one you use.</span> <span data-start="116.909" data-end="121.609">This is a maker 1000 that connects via Wi Fi.</span> <span data-start="121.609" data-end="126.009">On top that have, we're going to be holding that piece of hardware and using machine learning</span> <span data-start="126.009" data-end="130.399">to find patterns in the data that we're tracking in our movements and we're going to do absolutely</span> <span data-start="130.399" data-end="131.9">everything in JavaScript.</span> <span data-start="131.9" data-end="133.54">So, for Arduino, yay!</span> <span data-start="133.54" data-end="135.26">For Arduino, Johnny Five.</span> </p>
<p><span data-start="135.26" data-end="138.5">And for TensorFlow, we're going to use TensorFlow JS.</span> <span data-start="138.5" data-end="143.72">So, step one, gathering data.</span> <span data-start="143.72" data-end="144.98">At first we have nothing.</span> <span data-start="144.98" data-end="145.98">We have an idea.</span> </p>
<p><span data-start="145.98" data-end="149.54">We want to be able to play Street Fighter with our body movements.</span> <span data-start="149.54" data-end="154.89">What I mean by that is when I want to punch I'm going to actual punch.</span> <span data-start="154.89" data-end="155.89">There's three movements.</span> <span data-start="155.89" data-end="161.52">I have punch, and\h let's just call them like that.</span> <span data-start="161.52" data-end="163.46">So, gathering data.</span> <span data-start="163.46" data-end="166.37">We're going to do that with the Arduino.</span> <span data-start="166.37" data-end="171.852">So, I used a Wi Fi board because if you use a basic board like the UNO, it has to be timed</span> <span data-start="171.852" data-end="174.63">to the computer and I want to be able to move around.</span> <span data-start="174.63" data-end="175.63">Play from anywhere.</span> <span data-start="175.63" data-end="178.09">If I wanted to, I could play from the back of the room as well.</span> </p>
<p><span data-start="178.09" data-end="183.959">But the Arduino is going to render the program, but there's no built in sensor to track motion.</span> <span data-start="183.959" data-end="191.09">We are going to add an NPU1650, an accelerometer and gyro scope.</span> <span data-start="191.09" data-end="195.49">This is good to track movements.</span> <span data-start="195.49" data-end="199.15">I'm going to become an NPU1650 right now.</span> <span data-start="199.15" data-end="200.799">How does an accelerometer work?</span> <span data-start="200.799" data-end="205.379">If you can track motions in three different axis, X, Y and Z.</span> <span data-start="205.379" data-end="213.51">And accelerometer, left to right, that would be the X axis and then the Y axis and then</span> <span data-start="213.51" data-end="214.51">the Z axis.</span> <span data-start="214.51" data-end="218.549">But if you use the accelerometer just by itself, you're not walking like this through life.</span> <span data-start="218.549" data-end="222.14">We use the gyro scope to get the changes of rotation.</span> <span data-start="222.14" data-end="227.9">We have to track three more axis, but with rotation.</span> <span data-start="227.9" data-end="230.99">X axis, rotation, and Y and Z.</span> <span data-start="230.99" data-end="236.909">And in the end, we're going to have six points of data to track over time as we are moving.</span> </p>
<p><span data-start="236.909" data-end="241.72">But there is one last thing that I did as well, which is, oh, sorry, a button.</span> <span data-start="241.72" data-end="247.06">And I did a button because I want to track the data only when I am doing a gesture.</span> <span data-start="247.06" data-end="251.92">You don't have to do that, but as a first prototype, it was easier to only get the data</span> <span data-start="251.92" data-end="257.58">from my gesture to train the algorithm to only\h to only find patterns in the data when</span> <span data-start="257.58" data-end="258.89">I'm holding the button.</span> <span data-start="258.89" data-end="261.32">When I'm gonna hold the button, do the gesture.</span> <span data-start="261.32" data-end="266.47">And when I release it, take into consideration that data coming from the sensor.</span> <span data-start="266.47" data-end="269.16">So, this is for the hardware.</span> <span data-start="269.16" data-end="273.97">But in terms of code we start by always requiring a few normal.</span> <span data-start="273.97" data-end="279.68">Johnny Five, the system, and the client to set up our board.</span> </p>
<p><span data-start="279.68" data-end="283.41">As it is a Wi Fi board, you have to connect to the IP address of the Arduino and a certain</span> <span data-start="283.41" data-end="286.72">board to communicate with your computer.</span> <span data-start="286.72" data-end="292.6">And then once the board is ready, once that is set up, we set the pin that you want, in</span> <span data-start="292.6" data-end="297.98">this case, A0, and then we create a file, like a stream, to be able to write data to</span> <span data-start="297.98" data-end="298.98">that file.</span> <span data-start="298.98" data-end="303.8">In this code sample, I had coded a name of the file, example punch zero.</span> <span data-start="303.8" data-end="307.47">Because you have to record data a lot of times.</span> <span data-start="307.47" data-end="310.72">So, punch zero, punch one, punch two.</span> <span data-start="310.72" data-end="312.84">And this is how I spend my personal time.</span> <span data-start="312.84" data-end="314.74">I do that at home.</span> <span data-start="314.74" data-end="320.77">After you open the stream to write to a file, you have to instantiate with a sensor the</span> <span data-start="320.77" data-end="324.39">NPU1650, give it the pins to which it's connected.</span> <span data-start="324.39" data-end="329.43">And as soon as you have change of data from the, as soon as you're moving, you can track</span> <span data-start="329.43" data-end="332.44">the file.</span> </p>
<p><span data-start="332.44" data-end="339.78">And when you're holding the button down and writing that data to the file.</span> <span data-start="339.78" data-end="344.96">Once we release the button, we end that stream, meaning that the rest of the data coming from</span> <span data-start="344.96" data-end="348.3">the sensor, we're not adding it to any files.</span> <span data-start="348.3" data-end="352.29">In the end, we expect stuff that look like this.</span> <span data-start="352.29" data-end="355.19">And I say expect because this is not exactly what I got.</span> <span data-start="355.19" data-end="356.6">But this is what I wanted.</span> <span data-start="356.6" data-end="359.31">So, this is real data, but not come from the Arduino.</span> <span data-start="359.31" data-end="362.16">And I will talk about that a little bit later.</span> <span data-start="362.16" data-end="363.95">This is actually not at all what I got.</span> </p>
<p><span data-start="363.95" data-end="368.12">But I really wanted that because I knew that it kind of work when the I built the really</span> <span data-start="368.12" data-end="370.21">first prototype of this.</span> <span data-start="370.21" data-end="371.64">What I got instead was something like this.</span> <span data-start="371.64" data-end="376.27">So, we still have six points of data from the accelerometer in the gyroscope.</span> <span data-start="376.27" data-end="379.33">But it's not personalized enough.</span> <span data-start="379.33" data-end="384.74">Don't worry about reading it, but looking at it later, you see that the points of data</span> <span data-start="384.74" data-end="385.85">look exactly the same.</span> <span data-start="385.85" data-end="392.67">And over time, there's not that much of a change coming from the sensor.</span> </p>
<p><span data-start="392.67" data-end="394.42">Maybe it's my sensor or code, I'm not sure.</span> <span data-start="394.42" data-end="399.97">I just know in the end you can train the algorithm, you get your model.</span> <span data-start="399.97" data-end="404.15">But the thing is the accuracy of this data is not good.</span> <span data-start="404.15" data-end="407.6">I have to copy that later.</span> </p>
<p><span data-start="407.6" data-end="412.78">And this is one thing if you get into machine learning, it's not only about how much data</span> <span data-start="412.78" data-end="415.17">you get, it's also about how good it is.</span> <span data-start="415.17" data-end="417.1">I was getting a lot of data from the Arduino.</span> <span data-start="417.1" data-end="421.82">But the quality of it was not good enough for the model to be accurate.</span> <span data-start="421.82" data-end="422.82">Okay.</span> <span data-start="422.82" data-end="427.53">So, now we recorded our data many times in other files.</span> <span data-start="427.53" data-end="431.84">But you can't really feed that to TensorFlow yet because at the moment it's just lines</span> <span data-start="431.84" data-end="432.84">in files.</span> <span data-start="432.84" data-end="433.91">So, it's not really useful.</span> <span data-start="433.91" data-end="438.4">So, we have to do a bit of data processing to transfer the data into a way that TensorFlow</span> <span data-start="438.4" data-end="439.77">can work with.</span> <span data-start="439.77" data-end="444.89">So, if we imagined that I have the nice file that I wanted.</span> <span data-start="444.89" data-end="447.93">And start with lines.</span> <span data-start="447.93" data-end="453">But the first step to transform it into something that we can use it.</span> <span data-start="453" data-end="457.14">And change it from features and label.</span> </p>
<p><span data-start="457.14" data-end="461.74">I think this is probably one of like the main terms in machine learning.</span> <span data-start="461.74" data-end="463.4">Features will be the characteristic of your gesture.</span> <span data-start="463.4" data-end="466.49">So, all the data that's in the file.</span> <span data-start="466.49" data-end="470.17">And the label will be\h so, you can't really work with the strings.</span> <span data-start="470.17" data-end="471.28">And it has to be numbers.</span> <span data-start="471.28" data-end="474.71">So, we're just converting the name of the gesture to the number.</span> <span data-start="474.71" data-end="480.38">If you have a gesture array with the punch and punch is index zero.</span> <span data-start="480.38" data-end="482.69">You set the label to zero.</span> <span data-start="482.69" data-end="485.19">But that's only for one file.</span> <span data-start="485.19" data-end="487.22">So, one sample.</span> <span data-start="487.22" data-end="488.84">What we want is to do that with all our files.</span> <span data-start="488.84" data-end="494.02">So, we're going to end up with a massive array of objects that represent our gestures in</span> <span data-start="494.02" data-end="496.08">features and label.</span> <span data-start="496.08" data-end="498.7">But that's not it neither.</span> </p>
<p><span data-start="498.7" data-end="502.91">Because that's the first step to kind of put the data in a way that we understand it a</span> <span data-start="502.91" data-end="503.91">bit better.</span> <span data-start="503.91" data-end="504.91">We can work with objects.</span> <span data-start="504.91" data-end="506.58">But TensorFlow doesn't work with objects.</span> <span data-start="506.58" data-end="510.99">TensorFlow works more with stuff that look like arrays, but it's more take tensors, but</span> <span data-start="510.99" data-end="513.36">let's just talk about arrays.</span> <span data-start="513.36" data-end="515.159">And at the moment, we have objects, that's not good.</span> <span data-start="515.159" data-end="518.19">We need to split between features and label.</span> <span data-start="518.19" data-end="520.41">So, we're going to have here.</span> <span data-start="520.41" data-end="522.03">We're going to end up with something like this.</span> <span data-start="522.03" data-end="527.46">I'm going to go line by line, that's like what?</span> <span data-start="527.46" data-end="535.07">The labels have zero, one or two, three gestures, punch, round, and upper cut.</span> <span data-start="535.07" data-end="541.93">And we will have a multidimensional array of features to map gestures to each other.</span> <span data-start="541.93" data-end="546.45">So, the first level of our multidimensional array for labels is going to be mapped to</span> <span data-start="546.45" data-end="551.03">our first level of features as well.</span> </p>
<p><span data-start="551.03" data-end="554.84">And if we go a bit deeper, it means that the first punch that I record is going to be mapped</span> <span data-start="554.84" data-end="559.07">to the data that I get from an in features array.</span> <span data-start="559.07" data-end="562.65">And you're going in, the second one mapped to the second one in the first level of the</span> <span data-start="562.65" data-end="563.65">array.</span> <span data-start="563.65" data-end="566.37">And you go through that one by one.</span> <span data-start="566.37" data-end="570.94">So, we're getting a bit\h I don't know if you noticed, I didn't show you any code to</span> <span data-start="570.94" data-end="574.14">transfer the data because it has nothing to do with TensorFlow yet.</span> <span data-start="574.14" data-end="579.42">At moment, it's if you know lots of array methods and pushing objects and stuff like</span> <span data-start="579.42" data-end="580.62">that.</span> <span data-start="580.62" data-end="582.32">You do that with normal JavaScript functions.</span> <span data-start="582.32" data-end="586.81">We're not using any TensorFlow methods.</span> <span data-start="586.81" data-end="591.91">But we are getting more towards something that TensorFlow can work with because it's</span> <span data-start="591.91" data-end="595.25">only multidimensional arrays and just numbers.</span> <span data-start="595.25" data-end="596.43">No strings, no numbers.</span> <span data-start="596.43" data-end="597.95">We're getting closer.</span> </p>
<p><span data-start="597.95" data-end="603.58">And now the thing\h now we need to move on to converting to tensors.</span> <span data-start="603.58" data-end="608.29">Think of tensors as a data type that TensorFlow can work with.</span> <span data-start="608.29" data-end="613.4">This is where I'm going to show a little bit more of code that is TensorFlow specific because</span> <span data-start="613.4" data-end="617.46">we have to use the built in methods to be able to transform our multidimensional arrays</span> <span data-start="617.46" data-end="621.86">into tensors.</span> <span data-start="621.86" data-end="628.26">We don't opt to look at the labels and features.</span> <span data-start="628.26" data-end="632.99">And I had an array of zeros and two, and one to map all the gestures.</span> <span data-start="632.99" data-end="639.55">But with this, the algorithm is not going to really try to really look at the data and</span> <span data-start="639.55" data-end="640.55">think of a gesture.</span> <span data-start="640.55" data-end="643.77">It's probably going to look at, well, treat previous ones that you gave me were punches,</span> <span data-start="643.77" data-end="645.8">I'm going to assume this is a punch.</span> <span data-start="645.8" data-end="652.7">But if you shuffle the data, you can force the algorithm to try to understand\h what</span> <span data-start="652.7" data-end="655.82">makes a punch and an upper cut and things like that.</span> <span data-start="655.82" data-end="663.77">So, once the data is shuffled, we start using\h well, in this case it's a tensor 2D from TensorFlow</span> <span data-start="663.77" data-end="668.43">where what is going on here is that we're using our shuffled features in the second</span> <span data-start="668.43" data-end="672.44">parameter of the function is going to be the shape of the tensor.</span> </p>
<p><span data-start="672.44" data-end="677.43">And that means that it's going to be expecting the data to be coming in a certain way.</span> <span data-start="677.43" data-end="680.79">And our first argument is the number of samples by gesture.</span> <span data-start="680.79" data-end="685.25">If a punch gesture 20 times, I'm going to use the number 20.</span> <span data-start="685.25" data-end="691.35">And the total number of data per file, the second one in the array is the number of,</span> <span data-start="691.35" data-end="694.42">let's say, data input in a file.</span> <span data-start="694.42" data-end="700.22">So, you know how I'm tracking six different values for my gestures, X, Y, Z for accelerometer</span> <span data-start="700.22" data-end="701.95">and gyroscope.</span> </p>
<p><span data-start="701.95" data-end="709.25">You have to multiply the two numbers and that will be the shape of your tensor.</span> <span data-start="709.25" data-end="714.17">Specifically the amount of data in one gesture that it's going to be looking for.</span> <span data-start="714.17" data-end="715.86">And then labels, tensor.</span> <span data-start="715.86" data-end="723.42">So, this is gonna be a tensor 2D because the label is an integer, zero, one or two.</span> <span data-start="723.42" data-end="727.92">And we move from a tensor 2D to a tensor 1D.</span> <span data-start="727.92" data-end="732.31">Really we have the data type that TensorFlow can work with.</span> <span data-start="732.31" data-end="734.59">We have tensors.</span> <span data-start="734.59" data-end="739.44">But what we need to do is the next step, splitting between the training and the test set.</span> <span data-start="739.44" data-end="743.46">What we want food is we know our data is already labeled.</span> <span data-start="743.46" data-end="747.64">We already recorded it in files and we named them with the right gesture.</span> <span data-start="747.64" data-end="751.26">We're going to use 80% of our dataset to give the algorithm, to learn patterns.</span> <span data-start="751.26" data-end="759.18">And we're going to keep 20% to validate the predictions are right.</span> <span data-start="759.18" data-end="766.57">We have the algorithm, so, if it says it's a punch, but you know from a data file it's</span> <span data-start="766.57" data-end="771.23">an upper cut, you can retrain until the accuracy gets a bit better.</span> <span data-start="771.23" data-end="775.72">To do this, we're just calculating what 20% of our sample is.</span> </p>
<p><span data-start="775.72" data-end="778.07">But then we're just slicing tensors.</span> <span data-start="778.07" data-end="783.75">So, I'm not going too much into that because I think that's not the part that matters the</span> <span data-start="783.75" data-end="784.75">most.</span> <span data-start="784.75" data-end="787.54">But it's just like, you don't dare how it slices, you can use the slice method.</span> <span data-start="787.54" data-end="792.5">But we have a training set and a test set of features and labels.</span> </p>
<p><span data-start="792.5" data-end="797.2">So, now that we have this, we really have our data kind of ready.</span> <span data-start="797.2" data-end="799.45">So, what we have to do next is we create the model.</span> <span data-start="799.45" data-end="801.56">At the moment we just prepared our data.</span> <span data-start="801.56" data-end="803.11">But we don't have the model yet.</span> <span data-start="803.11" data-end="807.98">So, to create the model, this is where it kind of becomes\h it's not really a science.</span> <span data-start="807.98" data-end="809.76">It's like a try things until it works.</span> <span data-start="809.76" data-end="811.29">That's what I do.</span> </p>
<p><span data-start="811.29" data-end="815.18">Where I create a sequential model and add layers.</span> <span data-start="815.18" data-end="818.17">Have two or four or six and change parameters.</span> <span data-start="818.17" data-end="820.63">I'm not quite there to understand what everything does.</span> <span data-start="820.63" data-end="821.63">When it works.</span> <span data-start="821.63" data-end="822.74">I don't touch it anymore.</span> <span data-start="822.74" data-end="826.07">Let's just pretend that it's fine.</span> </p>
<p><span data-start="826.07" data-end="830.54">And before fitting the model, before launching the training, you have to pass a few different</span> <span data-start="830.54" data-end="835.54">parameters of the optimizer that you want to pick and what you want to track and things</span> <span data-start="835.54" data-end="837.47">like that.</span> <span data-start="837.47" data-end="841.43">If you want to create your own, you could copy and paste, but you could also play around</span> <span data-start="841.43" data-end="845.67">with different features and see what makes your accuracy better.</span> <span data-start="845.67" data-end="852.45">So, once we have that, we have to fit training features and training labels inside our model</span> <span data-start="852.45" data-end="854.16">and we just pass it.</span> </p>
<p><span data-start="854.16" data-end="858.26">The number of steps for the training and the validation data is our test features that</span> <span data-start="858.26" data-end="861.16">we're going to validate against.</span> <span data-start="861.16" data-end="864.36">Once the training is done, we save our file.</span> <span data-start="864.36" data-end="867.45">So, the actual model is going to be saved as a file in your application.</span> <span data-start="867.45" data-end="869.49">So, you can just use it later.</span> <span data-start="869.49" data-end="872.29">So, now we created our model.</span> <span data-start="872.29" data-end="873.29">It's there.</span> <span data-start="873.29" data-end="874.29">With all our data.</span> <span data-start="874.29" data-end="875.29">But we want to use it, right?</span> <span data-start="875.29" data-end="877.589">So, this is going to be to predict.</span> <span data-start="877.589" data-end="881.42">To do this, we require TensorFlow.</span> <span data-start="881.42" data-end="882.57">We probably don't need to look at it.</span> <span data-start="882.57" data-end="888.16">But we require TensorFlow and then we have an array of classes or gestures.</span> <span data-start="888.16" data-end="890.55">We load our model to be able to use it.</span> <span data-start="890.55" data-end="895.279">And we have the same code as before recording the data, but this time using it to predict</span> <span data-start="895.279" data-end="899.94">where the data changes from the Arduino in the sensor.</span> </p>
<p><span data-start="899.94" data-end="905.56">And when the button is held, we are kind of keeping all of our data into a variable.</span> <span data-start="905.56" data-end="908.279">We're pushing it into an array.</span> <span data-start="908.279" data-end="912.339">Once we release the button, I want to use the new live data that the model has never</span> <span data-start="912.339" data-end="917.61">seen before to match it against one of the gestures that it's been trained against.</span> <span data-start="917.61" data-end="923.44">Once we release, we keep the data that we just recorded and\h but at the moment we also</span> <span data-start="923.44" data-end="927.1">need to transform that into a tensor because it's just an array and TensorFlow can't work</span> <span data-start="927.1" data-end="928.9">with just arrays.</span> <span data-start="928.9" data-end="933.029">So, we create a tensor 2D as well with our new sample data.</span> <span data-start="933.029" data-end="936.73">But this time the shape is going to be different because we're giving it only one input.</span> <span data-start="936.73" data-end="939.69">The first number is going to be one.</span> <span data-start="939.69" data-end="940.98">And 300, that's kind of arbitrary.</span> <span data-start="940.98" data-end="942.04">You can change it.</span> <span data-start="942.04" data-end="945.62">It's basically because I used 50 lines in each file.</span> <span data-start="945.62" data-end="948.2">6 times 50 is 300.</span> </p>
<p><span data-start="948.2" data-end="953.6">So, the model is expecting 300 points of data to work.</span> <span data-start="953.6" data-end="954.6">You can change that.</span> <span data-start="954.6" data-end="955.8">It's fine.</span> <span data-start="955.8" data-end="960.96">And once our live data has been transformed into a tensor, we can just call the predict</span> <span data-start="960.96" data-end="965.87">method on the model and it will give us back a label, so, a number.</span> </p>
<p><span data-start="965.87" data-end="967.26">And so, zero, one or two.</span> <span data-start="967.26" data-end="973.62">And then you can look at that in your gesture classes array to get the actual label of the</span> <span data-start="973.62" data-end="975.22">live prediction.</span> <span data-start="975.22" data-end="980.5">This is like\h what is really cool about it, is the way\h every time I do a punch, there</span> <span data-start="980.5" data-end="983.76">is no way I could do the exact same punch I did before.</span> <span data-start="983.76" data-end="988.36">Because if we have 300 or more points of data, there's no way that the value from my accelerometer</span> <span data-start="988.36" data-end="993.12">would be exactly the same even if you tried, like, I don't know, a hundred times.</span> <span data-start="993.12" data-end="998.03">So, it means that you are more free to do whatever gesture as long as it looks like</span> <span data-start="998.03" data-end="999.2">a punch to the algorithm.</span> <span data-start="999.2" data-end="1004.08">So, the way it learns the pattern from data, it would probably understand the values and</span> <span data-start="1004.08" data-end="1008.61">the stuff from the accelerometer and understand it and match it to one of the gestures that</span> <span data-start="1008.61" data-end="1009.61">you attract.</span> </p>
<p><span data-start="1009.61" data-end="1010.61">Okay.</span> <span data-start="1010.61" data-end="1012.62">I feel like that was heavy.</span> <span data-start="1012.62" data-end="1013.62">Okay.</span> <span data-start="1013.62" data-end="1020.649">So, now that I talked about how it is supposed to work, I'm gonna try to show hopefully that</span> <span data-start="1020.649" data-end="1021.649">it works.</span> <span data-start="1021.649" data-end="1022.649">I mean, I know it works.</span> <span data-start="1022.649" data-end="1024.01">But I don't know if it will work here.</span> <span data-start="1024.01" data-end="1025.65">[ Laughter ] Yes.</span> <span data-start="1025.65" data-end="1026.65">Okay.</span> <span data-start="1026.65" data-end="1031.5">So, you know how at the beginning of the talk I told you about the data that wasn't really</span> <span data-start="1031.5" data-end="1034.35">good because it was\h well, I don't know yet why.</span> <span data-start="1034.35" data-end="1036.4">But it wasn't really good.</span> <span data-start="1036.4" data-end="1038.319">So, this is the sketch.</span> <span data-start="1038.319" data-end="1042.439">This is how I put the sensor button in the Arduino together.</span> </p>
<p><span data-start="1042.439" data-end="1045.16">But the thing is I knew I wanted to do a demo.</span> <span data-start="1045.16" data-end="1049.35">So, I actually switched senors because I didn't want to come on stage knowing it wouldn't</span> <span data-start="1049.35" data-end="1050.97">work.</span> <span data-start="1050.97" data-end="1052.57">Maybe it will work because I switched.</span> <span data-start="1052.57" data-end="1059">It works the same way which is really cool because I was just able to not even change</span> <span data-start="1059" data-end="1060">the code that much.</span> <span data-start="1060" data-end="1062.16">Just change where the data is coming from.</span> <span data-start="1062.16" data-end="1068.68">I used a daydream controller that you usually use with the VR headset from Google.</span> <span data-start="1068.68" data-end="1072.06">And I use that one because it has a built in accelerometer and gyroscope.</span> <span data-start="1072.06" data-end="1077.26">And an Arduino.</span> </p>
<p><span data-start="1077.26" data-end="1081.49">And it gives me the precise data and makes it quite accurate.</span> <span data-start="1081.49" data-end="1083.06">It was like, awesome.</span> <span data-start="1083.06" data-end="1086.34">So, what is supposed to happen now is something like this.</span> <span data-start="1086.34" data-end="1087.34">I have a game.</span> <span data-start="1087.34" data-end="1091.02">I put a GIF because if it doesn't work, at least you can show it works.</span> <span data-start="1091.02" data-end="1092.29">I'm going for the punch.</span> <span data-start="1092.29" data-end="1095.92">Try the three gestures and it's supposed to be doing this.</span> <span data-start="1095.92" data-end="1097.02">Okay.</span> <span data-start="1097.02" data-end="1099.21">My god.</span> <span data-start="1099.21" data-end="1108.01">I'm going to try to demo it a little bit, last time it did not quite work as planned.</span> <span data-start="1108.01" data-end="1109.01">okay.</span> <span data-start="1109.01" data-end="1111.94">If anybody has Bluetooth on right now, feel free to disconnect it.</span> <span data-start="1111.94" data-end="1113.82">I've had issues in the past.</span> </p>
<p><span data-start="1113.82" data-end="1114.82">Okay.</span> <span data-start="1114.82" data-end="1121.28">Let me just have a sip and\h okay.</span> <span data-start="1121.28" data-end="1123.48">A predict file.</span> <span data-start="1123.48" data-end="1124.48">There's an error.</span> <span data-start="1124.48" data-end="1125.48">Don't worry.</span> <span data-start="1125.48" data-end="1126.929">It still works anyways so I didn't fix it.</span> <span data-start="1126.929" data-end="1128.57">[ Laughter ] Okay.</span> <span data-start="1128.57" data-end="1131.84">I need\h come on.</span> <span data-start="1131.84" data-end="1135.12">Don't let me down.</span> <span data-start="1135.12" data-end="1136.12">It's not on.</span> <span data-start="1136.12" data-end="1137.82">Oh, I knew\h don't\h okay.</span> </p>
<p><span data-start="1137.82" data-end="1140.19">I'm waiting for the message that tells me that this\h okay.</span> <span data-start="1140.19" data-end="1141.53">It's on, it's on, it's on.</span> <span data-start="1141.53" data-end="1142.65">I want to be quick.</span> <span data-start="1142.65" data-end="1143.77">I haven't done anything yet.</span> <span data-start="1143.77" data-end="1146.22">So, I'm going to go like this.</span> <span data-start="1146.22" data-end="1152.07">Okay, don't let me down.</span> <span data-start="1152.07" data-end="1155.559">You fucking let me down.</span> </p>
<p><span data-start="1155.559" data-end="1156.559">Okay.</span> <span data-start="1156.559" data-end="1157.559">No!</span> <span data-start="1157.559" data-end="1162.22">No, no, no, no.. never try Bluetooth ever.</span> <span data-start="1162.22" data-end="1163.22">Okay.</span> </p>
<p><span data-start="1163.22" data-end="1164.22">It's\h okay.</span> <span data-start="1164.22" data-end="1165.22">Okay.</span> <span data-start="1165.22" data-end="1167.13">You're on, you're on.</span> <span data-start="1167.13" data-end="1168.13">Refresh.</span> <span data-start="1168.13" data-end="1169.58">Oh, why not?</span> <span data-start="1169.58" data-end="1173.27">It's not even going to refresh?</span> <span data-start="1173.27" data-end="1174.27">I have other demos.</span> <span data-start="1174.27" data-end="1183.42">So, I have two like\h is there a\h okay, okay, we're in.</span> <span data-start="1183.42" data-end="1185.42">Come on.</span> <span data-start="1185.42" data-end="1189.57">Give me the notification on.</span> <span data-start="1189.57" data-end="1190.61">Okay.</span> <span data-start="1190.61" data-end="1202.89">I'll try one more time and then I have to move on to the next.</span> <span data-start="1202.89" data-end="1203.89">Okay.</span> <span data-start="1203.89" data-end="1205.64">So, we'll try that.</span> <span data-start="1205.64" data-end="1206.64">Yay!</span> <span data-start="1206.64" data-end="1207.64">[ Applause ] Whoo!</span> <span data-start="1207.64" data-end="1212.79">[ Applause ] I was supposed to have\h I was supposed to</span> <span data-start="1212.79" data-end="1213.89">have sound.</span> </p>
<p><span data-start="1213.89" data-end="1217.72">I don't know if you need to turn it on.</span> <span data-start="1217.72" data-end="1219.89">Or if it's my thing.</span> <span data-start="1219.89" data-end="1221.48">[Ack sound] Try it again?</span> <span data-start="1221.48" data-end="1222.48">That's cool.</span> <span data-start="1222.48" data-end="1223.57">I'm done with this one.</span> <span data-start="1223.57" data-end="1224.57">Okay.</span> <span data-start="1224.57" data-end="1229.27">So, but the thing is, then I started thinking, okay, I have a gesture recognition system</span> <span data-start="1229.27" data-end="1231.58">in JavaScript.</span> <span data-start="1231.58" data-end="1232.76">What else can I do with it?</span> <span data-start="1232.76" data-end="1235.2">So, this is where it's gonna get even more lame.</span> <span data-start="1235.2" data-end="1239.23">It's supposed to\h is there sound?</span> <span data-start="1239.23" data-end="1246.63">[harry Potter music] What you can do as well is wand movements.</span> <span data-start="1246.63" data-end="1251.05">So, if there is any Harry Potter fans\h I know there's a few because we talked about</span> <span data-start="1251.05" data-end="1253.76">it.</span> <span data-start="1253.76" data-end="1259.24">If you don't know Harry Potter, you're supposed to tell the spell, expelliarmus and stuff</span> <span data-start="1259.24" data-end="1261.01">like that.</span> </p>
<p><span data-start="1261.01" data-end="1265.23">As you grow, you don't have to say the spell, no movement.</span> <span data-start="1265.23" data-end="1267.7">And there's a third level, you can just think the spell.</span> <span data-start="1267.7" data-end="1269.81">We're not going to do that today.</span> <span data-start="1269.81" data-end="1273.66">I'm going the one where you move.</span> <span data-start="1273.66" data-end="1275.76">I just trained two gestures.</span> <span data-start="1275.76" data-end="1278.34">And it's supposed to do it on the screen.</span> </p>
<p><span data-start="1278.34" data-end="1279.34">I hope it's going to work.</span> <span data-start="1279.34" data-end="1281.61">It's going to be very embarrassing if it doesn't.</span> <span data-start="1281.61" data-end="1282.72">I trained lumos and expelliarmus.</span> <span data-start="1282.72" data-end="1287.63">I really like that demo.</span> <span data-start="1287.63" data-end="1292.57">So, you've got to work.</span> </p>
<p><span data-start="1292.57" data-end="1294.82">Oh, nope.</span> <span data-start="1294.82" data-end="1297.059">Hold on.</span> <span data-start="1297.059" data-end="1298.19">Wait.</span> <span data-start="1298.19" data-end="1304.929">Give me the second most\h okay.</span> <span data-start="1304.929" data-end="1310.28">I just need it to work once.</span> <span data-start="1310.28" data-end="1311.28">Just work once.</span> <span data-start="1311.28" data-end="1312.91">Oh, why are you crashed?</span> <span data-start="1312.91" data-end="1314.64">I don't know why this is crashing.</span> </p>
<p><span data-start="1314.64" data-end="1317">It's happening\h it's fine in my room.</span> <span data-start="1317" data-end="1320.52">And never fine on stage ever.</span> <span data-start="1320.52" data-end="1335.62">Come on, I want the Harry Potter one to work.</span> <span data-start="1335.62" data-end="1341.66">This is really weird.</span> <span data-start="1341.66" data-end="1343.17">Hello?</span> <span data-start="1343.17" data-end="1347.49">Well, I haven't even done anything.</span> <span data-start="1347.49" data-end="1348.49">Okay.</span> <span data-start="1348.49" data-end="1352.88">Maybe third time is the right time again?</span> <span data-start="1352.88" data-end="1354.13">Oh\h no!</span> <span data-start="1354.13" data-end="1356.13">You were listening.</span> <span data-start="1356.13" data-end="1357.13">Dude.</span> <span data-start="1357.13" data-end="1359.13">Come on.</span> <span data-start="1359.13" data-end="1361.17">I really like that one.</span> </p>
<p><span data-start="1361.17" data-end="1362.17">It didn't do anything.</span> <span data-start="1362.17" data-end="1363.17">What?</span> <span data-start="1363.17" data-end="1364.17">All right.</span> <span data-start="1364.17" data-end="1365.17">Oh, okay.</span> <span data-start="1365.17" data-end="1366.17">So, okay.</span> <span data-start="1366.17" data-end="1367.17">That's the thing is like the shape of I'm gonna talk when I try to do it again.</span> <span data-start="1367.17" data-end="1368.92">The error here is the thing, it's like the model is making the shape go a certain way.</span> <span data-start="1368.92" data-end="1370.85">And if there's in the enough data, it will crash.</span> <span data-start="1370.85" data-end="1372.92">I just haven't done that yet.</span> <span data-start="1372.92" data-end="1377.67">Come on, I need to do the expelliarmus.</span> <span data-start="1377.67" data-end="1385.45">Otherwise I'll just move on.</span> <span data-start="1385.45" data-end="1388.79">This is like not even\h that has nothing to do with Bluetooth.</span> <span data-start="1388.79" data-end="1395.42">Come on, come on, come on, come on.. no.</span> </p>
<p><span data-start="1395.42" data-end="1396.42">No.</span> <span data-start="1396.42" data-end="1397.42">Okay.</span> <span data-start="1397.42" data-end="1400.21">Well, I'm just gonna go back to my room and cry.</span> <span data-start="1400.21" data-end="1401.21">That's fine.</span> <span data-start="1401.21" data-end="1402.21">I need to move on.</span> <span data-start="1402.21" data-end="1403.21">That's cool.</span> <span data-start="1403.21" data-end="1404.83">Another time.</span> <span data-start="1404.83" data-end="1406.47">So, but what else?</span> <span data-start="1406.47" data-end="1412.39">So, what I was really\h as I got into kind of like that rabbit hole of trying with stuff,</span> <span data-start="1412.39" data-end="1414.65">I was thinking, well, okay.</span> <span data-start="1414.65" data-end="1417.299">I'm having fun, but I want more people to have fun.</span> </p>
<p><span data-start="1417.299" data-end="1419.25">Like that's boring to play by yourself.</span> <span data-start="1419.25" data-end="1423.14">So, I was like, okay, it works with an Arduino and it works with a daydream controller.</span> <span data-start="1423.14" data-end="1427.6">But, you know, what else has a built in accelerometer and gyroscope?</span> <span data-start="1427.6" data-end="1430.62">Your phone.</span> <span data-start="1430.62" data-end="1437.27">It has a built in sensor to track post, you know, direction and orientation as well.</span> <span data-start="1437.27" data-end="1441.52">And you can access that stuff in JavaScript with the generic sensor API.</span> <span data-start="1441.52" data-end="1447.84">What we can do is replace the code that gets the data from the piece of hardware.</span> <span data-start="1447.84" data-end="1450.12">In this case, obviously just pseudo code.</span> <span data-start="1450.12" data-end="1458.36">But you would create the gyroscope and with the event listener reading and you can do</span> <span data-start="1458.36" data-end="1464.98">whatever you want with web sockets or lining up hardware.</span> </p>
<p><span data-start="1464.98" data-end="1468.39">When I thought you could\h why say you can and not do it?</span> <span data-start="1468.39" data-end="1469.7">I'm going to try to do it?</span> <span data-start="1469.7" data-end="1473.1">Actually I could do the Harry Potter one with my phone.</span> <span data-start="1473.1" data-end="1476.549">Because it will work.</span> <span data-start="1476.549" data-end="1479.21">I'm going to do the game one with my phone.</span> <span data-start="1479.21" data-end="1481.13">This is just running locally.</span> <span data-start="1481.13" data-end="1487.41">I have\h I'm using ngrok to be able to communicate with my phone on the same port.</span> <span data-start="1487.41" data-end="1491.54">So, if I\h I'm gonna do the game one just to show that it's working.</span> <span data-start="1491.54" data-end="1493.26">It should be working.</span> <span data-start="1493.26" data-end="1494.78">That would be easier because it's not Bluetooth.</span> </p>
<p><span data-start="1494.78" data-end="1496.44">I have the game here.</span> <span data-start="1496.44" data-end="1499.45">And I have the page on my phone.</span> <span data-start="1499.45" data-end="1511.71">Connected\h oh, yeah, okay, that's fine, that's fine, that's fine.</span> <span data-start="1511.71" data-end="1515.19">oh, the Wi Fi on my phone.</span> <span data-start="1515.19" data-end="1516.19">No!</span> <span data-start="1516.19" data-end="1517.38">Are you for real?</span> <span data-start="1517.38" data-end="1520.46">Oh, I'm back, I'm back, I'm back.</span> <span data-start="1520.46" data-end="1521.46">Okay.</span> <span data-start="1521.46" data-end="1522.46">I'm on.</span> <span data-start="1522.46" data-end="1523.46">All right.</span> <span data-start="1523.46" data-end="1524.46">Okay.</span> <span data-start="1524.46" data-end="1528.58">So, what's gonna happen is I'm gonna do the thing, press on my screen.</span> <span data-start="1528.58" data-end="1534.67">And record data, and when I release my thumb on the screen, it should do the thing.</span> </p>
<p><span data-start="1534.67" data-end="1539.88">Well, that wasn't the one I tried.</span> <span data-start="1539.88" data-end="1540.88">But that's fine.</span> <span data-start="1540.88" data-end="1544.049">Let me try\h if I do that?</span> <span data-start="1544.049" data-end="1546.42">That wasn't the one I tried neither.</span> <span data-start="1546.42" data-end="1553.98">But it's doing something, so, yeah.</span> <span data-start="1553.98" data-end="1558.22">[ Applause ] It really didn't go as planned from beginning</span> <span data-start="1558.22" data-end="1559.22">to end.</span> <span data-start="1559.22" data-end="1564.21">I probably won't have the time to do the Harry Potter one.</span> <span data-start="1564.21" data-end="1566.97">I can try it later with you if you want.</span> <span data-start="1566.97" data-end="1567.97">So, yeah.</span> </p>
<p><span data-start="1567.97" data-end="1572.02">Just before I finish, just a little recap, if you want to know how to build that kind</span> <span data-start="1572.02" data-end="1573.02">of stuff.</span> <span data-start="1573.02" data-end="1574.23">You have to start by getting the data.</span> <span data-start="1574.23" data-end="1578.809">I use sensors, but if you have others, you can use whatever you have with data.</span> <span data-start="1578.809" data-end="1585.62">I used an accelerometer and gyroscope, but you can use a sensor.</span> <span data-start="1585.62" data-end="1593.91">You need to change the data to work with TensorFlow and split it between the training set and</span> <span data-start="1593.91" data-end="1595.65">the test set.</span> <span data-start="1595.65" data-end="1599.58">Train your algorithm, and finally you can run the predictions.</span> <span data-start="1599.58" data-end="1604.13">Just before I finish, I'm going to say something I've said it before, but I usually say useless</span> <span data-start="1604.13" data-end="1605.13">is not worthless.</span> <span data-start="1605.13" data-end="1610.1">You're not going back to work and say, fuck everything, let's just do recognition.</span> <span data-start="1610.1" data-end="1612.76">But I learned a allot.</span> </p>
<p><span data-start="1612.76" data-end="1619.14">I learned a lot about Bluetooth\h you shouldn't use it.</span> <span data-start="1619.14" data-end="1623.38">But doing that, and that's something that really gets my super excited about just building</span> <span data-start="1623.38" data-end="1627.41">stuff because I think there's so many different ways we could interact with technology in</span> <span data-start="1627.41" data-end="1628.76">ways that we want.</span> <span data-start="1628.76" data-end="1633.71">Because the thing is I train it with my gestures, but I could let anybody actually use the sensor,</span> <span data-start="1633.71" data-end="1638.7">but anything that look like a punch, it's your gesture.</span> <span data-start="1638.7" data-end="1644.36">It's going to be mapped to something it's been trained with.</span> </p>
<p><span data-start="1644.36" data-end="1646.12">Sorry for the bad demos.</span> <span data-start="1646.12" data-end="1647.12">That's all I had to do.</span> <span data-start="1647.12" data-end="1649.45">I'm going to share the slides and the resources probably tomorrow.</span> <span data-start="1649.45" data-end="1652.75">I need to clean up some stuff first.</span> <span data-start="1652.75" data-end="1653.75">But thank you very much for your time.</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
