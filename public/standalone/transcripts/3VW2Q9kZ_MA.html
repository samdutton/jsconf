<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>3VW2Q9kZ_MA</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/3VW2Q9kZ_MA?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="0.04" data-end="4.18">[Applause]</span> <span data-start="4.19" data-end="8.13">hey everybody I'm Taylor thanks so much</span> <span data-start="8.13" data-end="9.84">for the introduction Paul and today</span> <span data-start="9.84" data-end="12.3">we're going to talk about JavaScript's</span> <span data-start="12.3" data-end="14.219">performance in extreme environments</span> <span data-start="14.219" data-end="16.47">through the lens of our production web</span> <span data-start="16.47" data-end="20.369">app for refugee aid groups so start off</span> <span data-start="20.369" data-end="21.93">with some background on the aid movement</span> <span data-start="21.93" data-end="23.64">look at those extreme environments</span> <span data-start="23.64" data-end="26.279">setting performance goals is always a</span> <span data-start="26.279" data-end="28.05">great place to start when diving into</span> <span data-start="28.05" data-end="30.63">this stuff and outlining a strategy and</span> <span data-start="30.63" data-end="32.369">then look at the tools and techniques we</span> <span data-start="32.369" data-end="34.29">use to improve performance in our own</span> <span data-start="34.29" data-end="38.219">app this is my first-ever Tech Talk both</span> <span data-start="38.219" data-end="46.24">as an attendee and a speaker so I really</span> <span data-start="46.25" data-end="49.17">and I just want to emphasize like I'm</span> <span data-start="49.17" data-end="51.899">nothing special I'm just like an average</span> <span data-start="51.899" data-end="53.879">web dev I needed to do this to make our</span> <span data-start="53.879" data-end="56.28">stuff work in the field but to take away</span> <span data-start="56.28" data-end="58.559">from that is that you can do this too</span> <span data-start="58.559" data-end="60.149">you don't have to be an expert it's not</span> <span data-start="60.149" data-end="61.98">using some really advanced API or</span> <span data-start="61.98" data-end="64.32">anything so hopefully on Monday you can</span> <span data-start="64.32" data-end="66.27">go in take a look at some performance in</span> <span data-start="66.27" data-end="68.43">your own apps maybe do some improvements</span> <span data-start="68.43" data-end="73.28">who knows cool so the refugee movement</span> <span data-start="73.28" data-end="76.95">is one of the largest grassroots you</span> <span data-start="76.95" data-end="78.869">know volunteer-driven things in the</span> <span data-start="78.869" data-end="79.229">world</span> <span data-start="79.229" data-end="81.479">it has had tens of thousands of</span> <span data-start="81.479" data-end="83.79">volunteers working with hundreds of</span> <span data-start="83.79" data-end="86.13">grassroots aid groups welcomed millions</span> <span data-start="86.13" data-end="89.34">of newcomers to Europe it's kind of this</span> <span data-start="89.34" data-end="91.2">interesting network of distributed</span> <span data-start="91.2" data-end="93.329">autonomous groups they each do their own</span> <span data-start="93.329" data-end="95.4">part independently which means they can</span> <span data-start="95.4" data-end="98.189">respond really quickly to changing</span> <span data-start="98.189" data-end="101.729">conditions or new needs that governments</span> <span data-start="101.729" data-end="105.42">or larger multinational NGOs can't but</span> <span data-start="105.42" data-end="107.009">there's lots of communication overhead</span> <span data-start="107.009" data-end="109.5">and lots of in efficiencies around these</span> <span data-start="109.5" data-end="113.7">administrative processes so it's a</span> <span data-start="113.7" data-end="115.92">diverse movement it's led by women you</span> <span data-start="115.92" data-end="119.759">can see our board there on the left is</span> </p>
<p><span data-start="119.759" data-end="123.21">Stephanie who's a admin at movement on</span> <span data-start="123.21" data-end="124.92">the ground we'll be talking about some</span> <span data-start="124.92" data-end="126.39">of their work on the island of Lesbos</span> <span data-start="126.39" data-end="129.06">later the middle is our own director</span> <span data-start="129.06" data-end="131.61">Sarah say hi if you see her around the</span> <span data-start="131.61" data-end="132.72">conference</span> <span data-start="132.72" data-end="135.57">and on the right is Regina who has</span> <span data-start="135.57" data-end="138.72">started an aid group that takes donated</span> <span data-start="138.72" data-end="141.21">laptops and equipment loads educational</span> <span data-start="141.21" data-end="142.71">content on them and sends them to</span> <span data-start="142.71" data-end="145.05">informal schools in camps so I think</span> <span data-start="145.05" data-end="146.97">it's really cool to see women at the</span> <span data-start="146.97" data-end="150.36">forefront of this movement and this is</span> <span data-start="150.36" data-end="152.46">something that's not going to be solved</span> <span data-start="152.46" data-end="156.06">within our lifetimes there's 70 million</span> <span data-start="156.06" data-end="158.4">displaced people in the world today 20</span> <span data-start="158.4" data-end="160.41">million of them are refugees in another</span> <span data-start="160.41" data-end="164.28">country and due to climate change we're</span> <span data-start="164.28" data-end="167.07">looking at up to 1 billion displaced</span> <span data-start="167.07" data-end="170.52">people in the world by 2050 so this is</span> <span data-start="170.52" data-end="171.9">something that we need to pay attention</span> <span data-start="171.9" data-end="173.64">to now we need to build the</span> <span data-start="173.64" data-end="176.07">infrastructure for now and I'm really</span> <span data-start="176.07" data-end="178.2">grateful to indigenous people all over</span> <span data-start="178.2" data-end="181.47">the world and our youth like Greta who</span> <span data-start="181.47" data-end="184.17">are fighting you know to reduce the</span> <span data-start="184.17" data-end="188.67">impact of climate change so a little</span> <span data-start="188.67" data-end="190.83">overview of our tech leave three main</span> <span data-start="190.83" data-end="192.959">areas of our platform there's kind of</span> <span data-start="192.959" data-end="194.4">discovery and networking</span> <span data-start="194.4" data-end="197.19">there's the aid supply chain so tools</span> <span data-start="197.19" data-end="199.94">around getting things from A to B and</span> <span data-start="199.94" data-end="203.01">there's the knowledge sharing section to</span> <span data-start="203.01" data-end="205.08">help you know share knowledge things</span> <span data-start="205.08" data-end="207.989">like that so our goal is to increase</span> <span data-start="207.989" data-end="210.87">collaboration save time and help groups</span> <span data-start="210.87" data-end="213.57">make smarter better decisions really by</span> <span data-start="213.57" data-end="215.55">just surfacing more information in a</span> <span data-start="215.55" data-end="217.35">centralized place and then easy to</span> <span data-start="217.35" data-end="219.57">consume and structured way but the</span> <span data-start="219.57" data-end="221.57">important thing is that our tech</span> <span data-start="221.57" data-end="223.95">empowers groups which means if they</span> <span data-start="223.95" data-end="225.78">can't use it if it doesn't work where</span> <span data-start="225.78" data-end="228.47">they're at then what are we doing right</span> <span data-start="228.47" data-end="234.39">so yeah it were free as in freedom and</span> <span data-start="234.39" data-end="237.269">beer best of both worlds right we're</span> <span data-start="237.269" data-end="240.239">using the a GPL and we're nonprofit so</span> <span data-start="240.239" data-end="242.13">it's free for aid groups and this is</span> <span data-start="242.13" data-end="243.51">going to be important when we talk about</span> <span data-start="243.51" data-end="246.239">testing strategies and stuff I'm the</span> <span data-start="246.239" data-end="248.519">only full-time dev on our team we have a</span> <span data-start="248.519" data-end="251.58">great team of remote volunteers so we</span> <span data-start="251.58" data-end="253.26">need to approach kind of performance</span> <span data-start="253.26" data-end="256.019">testing through the lens of a scrappy</span> <span data-start="256.019" data-end="259.41">you know the volunteer-driven nonprofit</span> <span data-start="259.41" data-end="261.479">not through like a million dollar lab or</span> <span data-start="261.479" data-end="262.77">something that you can just have a bunch</span> <span data-start="262.77" data-end="266.24">of boxes like automate all of this away</span> <span data-start="266.24" data-end="268.61">cool just a couple of slides here about</span> <span data-start="268.61" data-end="271.1">our tech that's the profile this is the</span> <span data-start="271.1" data-end="273.62">aid marketplace the the inventory</span> <span data-start="273.62" data-end="275.09">manager or you can see what's available</span> <span data-start="275.09" data-end="278.45">and what people need and then we have</span> <span data-start="278.45" data-end="280.13">the shipment coordinator helps you keep</span> <span data-start="280.13" data-end="282.29">track of decisions that you make where</span> <span data-start="282.29" data-end="284.12">things are going and this is great cuz</span> <span data-start="284.12" data-end="286.01">it it shows you hey the town next door</span> <span data-start="286.01" data-end="287.66">is sending the shipment I can just throw</span> <span data-start="287.66" data-end="289.76">some stuff on there and they can include</span> <span data-start="289.76" data-end="291.44">it rather than sending another one</span> <span data-start="291.44" data-end="292.48">myself</span> <span data-start="292.48" data-end="296.96">cool so the impact in the real world we</span> <span data-start="296.96" data-end="298.82">coordinated a shipment of a hundred and</span> <span data-start="298.82" data-end="300.98">eighty thousand bars of soap from</span> </p>
<p><span data-start="300.98" data-end="304.37">Glasgow to caring City in Scotland it</span> <span data-start="304.37" data-end="307.1">went to central warehouses in Athens and</span> <span data-start="307.1" data-end="309.68">Thessaloniki and they distributed it to</span> <span data-start="309.68" data-end="312.83">dozens of aid groups all over Greece</span> <span data-start="312.83" data-end="314.84">including the islands and most</span> <span data-start="314.84" data-end="316.91">importantly the end result we get this</span> <span data-start="316.91" data-end="320.41">to the people who need it most so that</span> <span data-start="320.41" data-end="323.39">was kind of the intro section I'm glad</span> </p>
<p><span data-start="323.39" data-end="325.58">I'm doing well on time and now we're</span> <span data-start="325.58" data-end="327.62">gonna take a look at some of the extreme</span> <span data-start="327.62" data-end="331.06">environments that our users operate in</span> <span data-start="331.06" data-end="337.42">okay maybe not that extreme so this is</span> <span data-start="337.42" data-end="338.6">Moria</span> <span data-start="338.6" data-end="341.63">it's the largest refugee camp in Europe</span> <span data-start="341.63" data-end="344">it's on the remote and Greek island of</span> <span data-start="344" data-end="346.48">Lesbos right next to the Turkish border</span> <span data-start="346.48" data-end="349.36">it's a former prison designed to hold</span> <span data-start="349.36" data-end="352.97">2,000 inmates and that's the kind of</span> <span data-start="352.97" data-end="354.68">prison section right there</span> <span data-start="354.68" data-end="357.68">there are currently 10,000 newcomers</span> <span data-start="357.68" data-end="360.02">living in the Moria refugee camp and you</span> <span data-start="360.02" data-end="362.39">can see the massive overflow area and</span> <span data-start="362.39" data-end="364.04">kind of an informal camp in the four</span> <span data-start="364.04" data-end="366.53">grounds there that's called the olive</span> <span data-start="366.53" data-end="370.22">grove so this is the kind of border</span> <span data-start="370.22" data-end="372.73">outside Moria surrounded by barbed wire</span> <span data-start="372.73" data-end="376.31">and this is what you see every day as an</span> <span data-start="376.31" data-end="378.08">aid worker you're going into camp you're</span> <span data-start="378.08" data-end="379.7">doing all sorts of things to help people</span> <span data-start="379.7" data-end="383.06">out 10 to 12 hours a day it's like an</span> <span data-start="383.06" data-end="385.16">all-day thing you don't get a lot of</span> <span data-start="385.16" data-end="387.29">time to rest relax you don't get a lot</span> <span data-start="387.29" data-end="389.12">of time to go back to the office and</span> <span data-start="389.12" data-end="391.13">jump on the Wi-Fi or charge your phone</span> <span data-start="391.13" data-end="393.62">up as you can see there's not really any</span> <span data-start="393.62" data-end="395.84">power infrastructure there the cell</span> <span data-start="395.84" data-end="398.21">signal is spotty</span> <span data-start="398.21" data-end="400.61">and so we have to take all of this into</span> <span data-start="400.61" data-end="402.35">account when we're trying to figure out</span> <span data-start="402.35" data-end="404.9">how to make our app work for for the aid</span> <span data-start="404.9" data-end="407.539">workers so we don't operate here but</span> <span data-start="407.539" data-end="409.31">there's a little bit of interesting like</span> <span data-start="409.31" data-end="411.38">other extreme environments you have</span> <span data-start="411.38" data-end="413.57">search and rescue ships at sea who are</span> <span data-start="413.57" data-end="415.96">on the ocean for months at a time and</span> <span data-start="415.96" data-end="420.889">you have human rights like observers who</span> <span data-start="420.889" data-end="422.65">are on borders this is a photo of the</span> </p>
<p><span data-start="422.65" data-end="426.199">Hungarian Serbian border which has 500</span> <span data-start="426.199" data-end="429.35">kilometers of razor wire and so the</span> <span data-start="429.35" data-end="430.58">human rights observers are going to be</span> <span data-start="430.58" data-end="432.44">out in remote parts of the country</span> <span data-start="432.44" data-end="435.02">remote villages I'm kind of monitoring</span> <span data-start="435.02" data-end="436.669">for things like border pushback stuff</span> <span data-start="436.669" data-end="440">like that and last but not least my</span> <span data-start="440" data-end="443.06">favorite place which is warehouses so</span> <span data-start="443.06" data-end="445.72">this is really cool that warehouse was</span> <span data-start="445.72" data-end="450.349">actually the old 2003 Olympic basketball</span> </p>
<p><span data-start="450.349" data-end="453.349">Stadium in Greece like just a ton of fun</span> <span data-start="453.349" data-end="456.44">to walk around and explore and aid</span> <span data-start="456.44" data-end="458">groups really like they just popped up</span> <span data-start="458" data-end="459.47">overnight they asked the government hey</span> <span data-start="459.47" data-end="461.03">can we have some space and they have to</span> <span data-start="461.03" data-end="462.83">work with what they're given so it's not</span> <span data-start="462.83" data-end="465.08">something where they can design a</span> <span data-start="465.08" data-end="467.03">connected infrastructure set up the</span> <span data-start="467.03" data-end="468.59">Wi-Fi through the whole thing you know</span> <span data-start="468.59" data-end="470.449">it's like here's a shed in my backyard</span> <span data-start="470.449" data-end="472.88">here's a converted basketball Stadium</span> <span data-start="472.88" data-end="477.86">you know make it work so the storage</span> <span data-start="477.86" data-end="480.02">space there is in the ring in kind of</span> <span data-start="480.02" data-end="483.409">that concession area you know outside of</span> <span data-start="483.409" data-end="485.659">the main stadium and that's what it</span> <span data-start="485.659" data-end="488.21">looks like inside there so they have</span> <span data-start="488.21" data-end="491.419">self-service don't have Wi-Fi they do</span> <span data-start="491.419" data-end="494.21">have power but again people are dealing</span> <span data-start="494.21" data-end="496.19">with inventory and stuff all day every</span> <span data-start="496.19" data-end="497.27">day</span> <span data-start="497.27" data-end="499.909">so let's actually take a look at what we</span> <span data-start="499.909" data-end="501.11">mean when we're talking about</span> <span data-start="501.11" data-end="504.38">performance high speed situations this</span> <span data-start="504.38" data-end="506.84">is Amsterdam this is the office in San</span> </p>
<p><span data-start="506.84" data-end="509.389">Francisco low speed might be my own</span> <span data-start="509.389" data-end="512.209">office in Serbia you know gets the job</span> <span data-start="512.209" data-end="514.19">done sometimes the video calls are a bit</span> <span data-start="514.19" data-end="517.579">flaky but it's okay no speed there are</span> <span data-start="517.579" data-end="520.13">lots of situations we talked about some</span> <span data-start="520.13" data-end="521.99">of them like at sea on the borders and</span> <span data-start="521.99" data-end="523.789">then we have this fun one I like to call</span> <span data-start="523.789" data-end="527.089">maybe speed so this is really where</span> <span data-start="527.089" data-end="530.18">house is this is camps you might have</span> <span data-start="530.18" data-end="531.9">some cell signal you might have</span> <span data-start="531.9" data-end="535.59">and Wi-Fi there will be dead zones and</span> <span data-start="535.59" data-end="537.96">that produces a lot of problems it's not</span> <span data-start="537.96" data-end="541.02">just online offline online its</span> <span data-start="541.02" data-end="543.27">ping-ponging you back and forth so you</span> <span data-start="543.27" data-end="545.19">have random latency spikes race</span> <span data-start="545.19" data-end="549.48">conditions are a huge issue and the from</span> <span data-start="549.48" data-end="551.58">a UI standpoint you have to deal with</span> <span data-start="551.58" data-end="553.47">this back and forth between the</span> <span data-start="553.47" data-end="554.91">different states you don't want to just</span> <span data-start="554.91" data-end="556.74">be showing up the pop-up your online</span> <span data-start="556.74" data-end="559.53">your offline your online very rapid</span> <span data-start="559.53" data-end="563.1">succession so when we're talking about</span> <span data-start="563.1" data-end="564.5">speed we're really talking about latency</span> <span data-start="564.5" data-end="568.47">bandwidth and throughput that's an</span> <span data-start="568.47" data-end="570.45">example of a warehouse so that's the</span> <span data-start="570.45" data-end="572.61">office with the Wi-Fi there this is</span> <span data-start="572.61" data-end="575.31">about the size of the football field as</span> <span data-start="575.31" data-end="577.32">you can see that Wi-Fi is not going to</span> <span data-start="577.32" data-end="578.79">extend throughout the whole place it's</span> <span data-start="578.79" data-end="581.97">kind of like a giant Faraday cage and</span> <span data-start="581.97" data-end="586.38">then this is a fun one so to get Wi-Fi</span> <span data-start="586.38" data-end="588.78">in the olive grove which is that</span> <span data-start="588.78" data-end="591.72">overflow area outside of Moria this is</span> <span data-start="591.72" data-end="593.22">the town of MIT's aleady it's the</span> <span data-start="593.22" data-end="595.86">largest town in the islands they send</span> <span data-start="595.86" data-end="597.27">they have a satellite dish or something</span> <span data-start="597.27" data-end="600.48">that sends it to a water tower another</span> <span data-start="600.48" data-end="602.82">satellite dish there bounces it off to</span> <span data-start="602.82" data-end="605.25">the camp that's about 4 kilometers right</span> <span data-start="605.25" data-end="607.26">there just beaming that off a water</span> <span data-start="607.26" data-end="607.86">tower</span> <span data-start="607.86" data-end="611.19">it goes into a satellite dish on the the</span> <span data-start="611.19" data-end="612.72">the office there and then they have a</span> <span data-start="612.72" data-end="616.08">series of Wi-Fi repeaters around the</span> <span data-start="616.08" data-end="616.44">camp</span> <span data-start="616.44" data-end="619.14">so clearly dealing with super high</span> <span data-start="619.14" data-end="621.27">latency they're intermittent</span> <span data-start="621.27" data-end="622.71">connectivity</span> <span data-start="622.71" data-end="624.6">you know storm or something like can</span> <span data-start="624.6" data-end="627.2">just knock out that infrastructure</span> <span data-start="627.2" data-end="629.7">there's the office right there</span> <span data-start="629.7" data-end="631.59">and that's an example of a telephone</span> <span data-start="631.59" data-end="633.42">pole with one of the Wi-Fi routers or</span> <span data-start="633.42" data-end="637.35">the repeaters on it so something else we</span> <span data-start="637.35" data-end="641.76">need to consider is data and power so</span> <span data-start="641.76" data-end="643.89">you have like unmetered Wi-Fi you have</span> <span data-start="643.89" data-end="646.14">mobile data or you just don't have data</span> <span data-start="646.14" data-end="648.75">same thing with power you plugged into</span> <span data-start="648.75" data-end="651.3">the wall you're on the go or your</span> <span data-start="651.3" data-end="654.36">devices debt and these are all resources</span> <span data-start="654.36" data-end="657.36">that our users have in our context</span> <span data-start="657.36" data-end="659.19">they're very limited you're out and</span> <span data-start="659.19" data-end="661.14">about using your phone using our app all</span> <span data-start="661.14" data-end="663.21">day long we can't kill that battery</span> <span data-start="663.21" data-end="664.98">right you know you have a certain amount</span> <span data-start="664.98" data-end="665.57">of time</span> <span data-start="665.57" data-end="666.98">then your phone's dead and then you're</span> <span data-start="666.98" data-end="669.35">back to pit the old pen-and-paper way</span> <span data-start="669.35" data-end="672.11">same thing with data you know it's it's</span> <span data-start="672.11" data-end="673.55">nice when you have an unlimited plan</span> <span data-start="673.55" data-end="676.28">most aid workers that I know they might</span> <span data-start="676.28" data-end="679.25">buy one or two gigabytes at a time so</span> <span data-start="679.25" data-end="680.81">they're constantly having like running</span> <span data-start="680.81" data-end="683.03">out of data having to wait a day go back</span> <span data-start="683.03" data-end="684.65">to the cell phone store plug some more</span> <span data-start="684.65" data-end="686.81">data in and if your stuff just stops</span> <span data-start="686.81" data-end="687.38">working</span> <span data-start="687.38" data-end="689.3">when they run out of data again back to</span> <span data-start="689.3" data-end="691.79">the pen and paper way it's a bug it's my</span> <span data-start="691.79" data-end="693.77">problem you know it's it's their size</span> <span data-start="693.77" data-end="695.86">they're not gonna make it their problem</span> <span data-start="695.86" data-end="698.99">and then we have hardware so lots of old</span> <span data-start="698.99" data-end="701.72">donated equipment I'm gonna speed up a</span> <span data-start="701.72" data-end="703.93">little bit to make sure I stay on time</span> <span data-start="703.93" data-end="707.21">but this is an example with my friends</span> <span data-start="707.21" data-end="709.16">computer it just doesn't have a battery</span> <span data-start="709.16" data-end="711.32">right like she just leaves it plugged</span> <span data-start="711.32" data-end="713.18">into the wall if there's a gentle breeze</span> <span data-start="713.18" data-end="714.98">that knocks the cable out then she</span> <span data-start="714.98" data-end="717.53">immediately you know loses all her state</span> <span data-start="717.53" data-end="719.66">of what she's been working on it's my</span> <span data-start="719.66" data-end="722.33">friend's phone different friends he</span> <span data-start="722.33" data-end="724.34">can't use about half his screen so I</span> <span data-start="724.34" data-end="725.93">think that's maybe a different tech talk</span> <span data-start="725.93" data-end="727.58">like how to make your app work with a</span> <span data-start="727.58" data-end="730.07">busted phone but that's the type of</span> <span data-start="730.07" data-end="733">equipment that we're dealing with here</span> <span data-start="733" data-end="736.34">this is all more relevant than you might</span> <span data-start="736.34" data-end="736.76">think</span> <span data-start="736.76" data-end="739.76">right so a slow connection is a slow</span> <span data-start="739.76" data-end="741.94">connection where houses have dead zones</span> <span data-start="741.94" data-end="744.14">offices have dead zones there's some</span> <span data-start="744.14" data-end="746.54">poor guy in the basement you know trying</span> <span data-start="746.54" data-end="748.31">to just get the printer to work and yes</span> <span data-start="748.31" data-end="750.53">run up and down the stairs every time he</span> <span data-start="750.53" data-end="751.82">wants to print something they connect to</span> <span data-start="751.82" data-end="754.4">the Wi-Fi if you don't have a connection</span> <span data-start="754.4" data-end="756.14">you don't have a connection it doesn't</span> <span data-start="756.14" data-end="757.1">matter if you're in the middle of a</span> <span data-start="757.1" data-end="759.08">refugee camp or if you're on a six-hour</span> <span data-start="759.08" data-end="761.48">plane to come talk you know at ge'ez con</span> <span data-start="761.48" data-end="764.51">free to past a dead battery is a dead</span> <span data-start="764.51" data-end="766.79">battery regardless of how fancy your</span> <span data-start="766.79" data-end="770.54">phone is and old hardware exists in many</span> <span data-start="770.54" data-end="773.63">real-world businesses hospitals are a</span> <span data-start="773.63" data-end="776.05">great example where due to budget or</span> <span data-start="776.05" data-end="779.27">regulations they're running sometimes</span> <span data-start="779.27" data-end="784.76">internet explorer in 2019 right so let's</span> <span data-start="784.76" data-end="787.18">take a look at some performance goals</span> <span data-start="787.18" data-end="789.89">and you want to start here really</span> <span data-start="789.89" data-end="790.91">important when you have these</span> <span data-start="790.91" data-end="792.8">conversations with your managers you</span> <span data-start="792.8" data-end="795.08">know everyone the marketing department</span> <span data-start="795.08" data-end="797.72">the DevOps people they want their stuff</span> <span data-start="797.72" data-end="798.63">included</span> <span data-start="798.63" data-end="800.61">in that page-load and so you need to be</span> <span data-start="800.61" data-end="802.47">realistic and set those goals which will</span> <span data-start="802.47" data-end="804.48">then help you prioritize what's</span> <span data-start="804.48" data-end="806.61">necessary what can you cut what can you</span> <span data-start="806.61" data-end="811.05">delay so in our case we're looking at a</span> <span data-start="811.05" data-end="813.84">mid-range Android device on we're gonna</span> <span data-start="813.84" data-end="817.71">say a bad 3G connection 400 kilobytes a</span> <span data-start="817.71" data-end="821.4">second bandwidth and 400 milliseconds</span> <span data-start="821.4" data-end="824.1">latency we want to minimize data and</span> <span data-start="824.1" data-end="827.34">power usage and we're gonna focus for</span> <span data-start="827.34" data-end="830.55">speed on two key indicators there's time</span> <span data-start="830.55" data-end="833.82">to first paint and time to interactive</span> <span data-start="833.82" data-end="838.8">so we want on an initial load less than</span> <span data-start="838.8" data-end="841.37">two seconds to first paint and</span> <span data-start="841.37" data-end="843.66">subsequent loads less than one second</span> <span data-start="843.66" data-end="846.33">and for interactivity we want less than</span> <span data-start="846.33" data-end="849.03">five seconds on an initial load and less</span> <span data-start="849.03" data-end="852.12">than two seconds after that and remember</span> <span data-start="852.12" data-end="854.67">that latency here is the killer so</span> <span data-start="854.67" data-end="856.86">that's going to take up you know easily</span> <span data-start="856.86" data-end="860.22">twenty to forty percent just ping the</span> <span data-start="860.22" data-end="864.18">server for a roundtrip we have product</span> <span data-start="864.18" data-end="864.51">goals</span> <span data-start="864.51" data-end="866.52">hopefully we're building stuff to do</span> <span data-start="866.52" data-end="868.83">useful things whether that's relax and</span> <span data-start="868.83" data-end="871.05">have fun or you know make something that</span> <span data-start="871.05" data-end="873.9">people want to use in our case we try to</span> <span data-start="873.9" data-end="876.6">support modern browsers on desktop and</span> <span data-start="876.6" data-end="878.94">mobile we're not supporting Internet</span> </p>
<p><span data-start="878.94" data-end="883.67">Explorer and we need it to work offline</span> <span data-start="883.67" data-end="888.06">so it's ok we can cut some content on</span> <span data-start="888.06" data-end="890.43">functionality like our Maps page we need</span> <span data-start="890.43" data-end="892.14">to get tiles from a server if you're</span> <span data-start="892.14" data-end="894.15">offline we're just gonna say you know</span> <span data-start="894.15" data-end="895.59">don't use the maps wait until you</span> <span data-start="895.59" data-end="897.42">connect but there's lots of other stuff</span> <span data-start="897.42" data-end="900.09">that that doesn't need to work and I</span> <span data-start="900.09" data-end="905.73">think that ok so business goals no</span> <span data-start="905.73" data-end="907.77">ultimatums I think that performance is</span> <span data-start="907.77" data-end="909.27">something you should take an incremental</span> <span data-start="909.27" data-end="911.25">approach to you know make one</span> <span data-start="911.25" data-end="913.17">performance change at a time something</span> <span data-start="913.17" data-end="914.04">is better than nothing</span> <span data-start="914.04" data-end="916.74">build an offline support one step at a</span> <span data-start="916.74" data-end="919.02">time starting with the most used or most</span> <span data-start="919.02" data-end="922.14">impactful workflows in our case we need</span> <span data-start="922.14" data-end="924.27">reasonable testing overhead like I said</span> <span data-start="924.27" data-end="927.87">it's a volunteer team so we have to kind</span> <span data-start="927.87" data-end="929.37">of keep that in mind we're not gonna</span> <span data-start="929.37" data-end="932.17">have you know if you budget for extra</span> <span data-start="932.17" data-end="936.31">or lab and we need to balance you know</span> <span data-start="936.31" data-end="938.08">this sort of performance testing with</span> <span data-start="938.08" data-end="940.44">new feature development adding on there</span> <span data-start="940.44" data-end="943.51">and I think that one of the best things</span> <span data-start="943.51" data-end="945.73">you can do is if you're talking to your</span> <span data-start="945.73" data-end="948.16">users talk to them about performance</span> <span data-start="948.16" data-end="950.65">right it's you know you have your</span> <span data-start="950.65" data-end="952.45">product and application bugs and stuff</span> <span data-start="952.45" data-end="955.24">like that but tell them listen if it</span> <span data-start="955.24" data-end="957.31">takes too long to load and that makes</span> <span data-start="957.31" data-end="959.8">you frustrated that's a bug like talk to</span> <span data-start="959.8" data-end="961.36">me tell me about that I want to know</span> <span data-start="961.36" data-end="963.31">what device you're using what the the</span> <span data-start="963.31" data-end="965.92">connection was like go to speedtest.net</span> <span data-start="965.92" data-end="968.62">and send me a copy of the results so</span> <span data-start="968.62" data-end="970.69">that I can have realistic benchmarks you</span> <span data-start="970.69" data-end="972.04">know when we're doing our internal</span> <span data-start="972.04" data-end="974.68">testing I think that we have lots of</span> <span data-start="974.68" data-end="976.81">great conversations with users we should</span> <span data-start="976.81" data-end="980.59">definitely extend that to performance so</span> </p>
<p><span data-start="980.59" data-end="984.94">I'm gonna dive in here and look at our</span> <span data-start="984.94" data-end="988.03">strategy to make these improvements look</span> <span data-start="988.03" data-end="991.3">at the tools that we're using and look</span> <span data-start="991.3" data-end="993.01">at the techniques and results that we</span> <span data-start="993.01" data-end="999.13">had in our production application so our</span> <span data-start="999.13" data-end="1001.83">stack I can hear the groans already yes</span> <span data-start="1001.83" data-end="1005.34">we're using jQuery in production in 2019</span> <span data-start="1005.34" data-end="1008.16">I think 2009 called and they want their</span> <span data-start="1008.16" data-end="1013.92">developer back so it's pretty modern on</span> <span data-start="1013.92" data-end="1016.38">the back ends we have elixir and phonics</span> <span data-start="1016.38" data-end="1019.83">I'm sitting behind an engines proxy we</span> <span data-start="1019.83" data-end="1021.72">used web back of course to kind of</span> <span data-start="1021.72" data-end="1023.7">bundle up all of our front-end assets</span> <span data-start="1023.7" data-end="1026.459">the reason for jQuery is that I love the</span> <span data-start="1026.459" data-end="1027.99">data tables plug-in and when you're</span> <span data-start="1027.99" data-end="1030.38">prototyping none of this matters right</span> <span data-start="1030.38" data-end="1032.64">we're going to be cutting that out and</span> <span data-start="1032.64" data-end="1034.589">probably go with no framework on the</span> <span data-start="1034.589" data-end="1037.65">front ends but this is good in this case</span> <span data-start="1037.65" data-end="1039.66">raise your hand if you're building a</span> <span data-start="1039.66" data-end="1042.99">single page application view react it's</span> <span data-start="1042.99" data-end="1046.65">a lot of hands so we're not I'm gonna</span> <span data-start="1046.65" data-end="1048.209">have some stuff that touches on</span> <span data-start="1048.209" data-end="1050.34">performance considerations with single</span> <span data-start="1050.34" data-end="1052.59">page applications but just in terms of</span> <span data-start="1052.59" data-end="1054.96">the numbers I'm showing on screen jQuery</span> <span data-start="1054.96" data-end="1057.42">is kind of halfway between you and react</span> <span data-start="1057.42" data-end="1060.06">in terms of in terms of like library</span> <span data-start="1060.06" data-end="1064.54">size so some realistic numbers there</span> <span data-start="1064.54" data-end="1067.36">so let's look at how our usage what's</span> <span data-start="1067.36" data-end="1069.31">really going to drain that device</span> <span data-start="1069.31" data-end="1072.31">battery it's gonna be two things it's</span> <span data-start="1072.31" data-end="1075.01">gonna be the antenna and it's going to</span> <span data-start="1075.01" data-end="1078.07">be running that CPU or on the laptop the</span> </p>
<p><span data-start="1078.07" data-end="1081.73">GPU and stuff like that so how to</span> <span data-start="1081.73" data-end="1083.77">minimize antennas just minimizing</span> <span data-start="1083.77" data-end="1086.05">networking right batch requests if</span> <span data-start="1086.05" data-end="1087.55">you're sending telemetry or something</span> <span data-start="1087.55" data-end="1090.73">you know if you could if you could batch</span> <span data-start="1090.73" data-end="1092.71">those collect all the data every 50</span> <span data-start="1092.71" data-end="1094.42">milliseconds or whatever you want but</span> <span data-start="1094.42" data-end="1096.49">only send it up to the server once a</span> <span data-start="1096.49" data-end="1098.8">second or once every 10 seconds or on</span> <span data-start="1098.8" data-end="1103.42">the next load we don't want to use</span> <span data-start="1103.42" data-end="1105.31">polling because that's going to send a</span> <span data-start="1105.31" data-end="1107.08">heartbeat out so there's some great tech</span> <span data-start="1107.08" data-end="1109.09">out there like WebSockets which do a</span> <span data-start="1109.09" data-end="1112.47">much better job of keeping a TCP</span> <span data-start="1112.47" data-end="1116.37">connection open without that heartbeat</span> <span data-start="1116.37" data-end="1120.79">we want to limit animations as much as</span> <span data-start="1120.79" data-end="1122.89">possible every time that you have an</span> <span data-start="1122.89" data-end="1125.44">animation going it's going to be</span> <span data-start="1125.44" data-end="1127.63">repainting on the browser running that</span> </p>
<p><span data-start="1127.63" data-end="1130.33">CPU and I'll show you some performance</span> <span data-start="1130.33" data-end="1131.94">stats on that in just a minute</span> <span data-start="1131.94" data-end="1134.89">sinking timers is important as well if</span> <span data-start="1134.89" data-end="1136.33">you have like 10 different timers</span> <span data-start="1136.33" data-end="1138.31">going off that aren't synchronized</span> <span data-start="1138.31" data-end="1140.29">that's gonna wake the CPU up every time</span> <span data-start="1140.29" data-end="1143.32">if you have something that you know 50</span> <span data-start="1143.32" data-end="1145.51">millisecond interval and then every</span> <span data-start="1145.51" data-end="1147.43">third time it goes off you run some</span> <span data-start="1147.43" data-end="1149.23">other function and synchronize it that</span> <span data-start="1149.23" data-end="1152.05">way it's a much better strategy and for</span> <span data-start="1152.05" data-end="1154.39">common events like the scroll events or</span> <span data-start="1154.39" data-end="1156.7">you know whenever a user types on the</span> <span data-start="1156.7" data-end="1158.89">keyboard things that are gonna fire a</span> <span data-start="1158.89" data-end="1161.74">lot like that you want to use timeouts</span> <span data-start="1161.74" data-end="1163.69">and just kind of take samples of them</span> <span data-start="1163.69" data-end="1165.7">rather than responding to every single</span> <span data-start="1165.7" data-end="1169.21">one so we're using the chrome dev tools</span> <span data-start="1169.21" data-end="1171.34">this is the network panel this is</span> </p>
<p><span data-start="1171.34" data-end="1173.8">Google's homepage and every time you</span> <span data-start="1173.8" data-end="1176.35">type in a character it makes another</span> <span data-start="1176.35" data-end="1178.6">Network request so this is what I'm</span> <span data-start="1178.6" data-end="1180.22">talking about with those events with</span> <span data-start="1180.22" data-end="1182.08">that networking this is going to keep</span> <span data-start="1182.08" data-end="1184.99">the antenna on your phone on that whole</span> <span data-start="1184.99" data-end="1187.72">time it's okay I think when you're</span> <span data-start="1187.72" data-end="1189.94">looking at really optimizing performance</span> <span data-start="1189.94" data-end="1193.57">this is great on a desktop but it's fine</span> <span data-start="1193.57" data-end="1194.95">to just let the use our type in their</span> <span data-start="1194.95" data-end="1196.27">search query and hit the search button</span> <span data-start="1196.27" data-end="1197.2">and make it</span> <span data-start="1197.2" data-end="1199.84">single requests up or to do it once a</span> <span data-start="1199.84" data-end="1204.58">second or once every half second this is</span> </p>
<p><span data-start="1204.58" data-end="1206.98">I've loaded up some page with like a</span> <span data-start="1206.98" data-end="1210.07">spinning loading animation on there and</span> <span data-start="1210.07" data-end="1211.72">this is what it looks like using</span> <span data-start="1211.72" data-end="1214.12">Chrome's dev tools performance panel you</span> <span data-start="1214.12" data-end="1216.37">can see all of that activity all of that</span> <span data-start="1216.37" data-end="1220.12">repainting constantly which is going to</span> <span data-start="1220.12" data-end="1225.84">run that CPU and drain that battery so</span> <span data-start="1225.84" data-end="1229.51">another strategy is minimizing a data</span> <span data-start="1229.51" data-end="1232.84">usage this is just small bundles is</span> <span data-start="1232.84" data-end="1235">really the answer and aggressive caching</span> <span data-start="1235" data-end="1237.25">you want to compress your payloads you</span> <span data-start="1237.25" data-end="1241.99">need to cache everything you can load</span> <span data-start="1241.99" data-end="1244.029">content as needed which means if you</span> <span data-start="1244.029" data-end="1245.98">don't need it up front just grab it in</span> <span data-start="1245.98" data-end="1249.279">the background if it's not on that you</span> <span data-start="1249.279" data-end="1251.919">know above the fold then load it as the</span> <span data-start="1251.919" data-end="1253.75">user Scrolls down if they scroll down</span> <span data-start="1253.75" data-end="1255.279">there's oftentimes they're just gonna</span> <span data-start="1255.279" data-end="1256.84">click a link on the main menu and then</span> <span data-start="1256.84" data-end="1259.139">never need that second half of the page</span> <span data-start="1259.139" data-end="1263.289">and then I think for pre-caching with a</span> <span data-start="1263.289" data-end="1265.09">serviceworker or something like that you</span> <span data-start="1265.09" data-end="1267.46">want to get your app working offline ask</span> <span data-start="1267.46" data-end="1269.38">for consent just a simple button like</span> <span data-start="1269.38" data-end="1271">hey would you like to download the</span> <span data-start="1271" data-end="1273.7">offline experience I think it's</span> <span data-start="1273.7" data-end="1275.529">important when you're looking at people</span> <span data-start="1275.529" data-end="1279.07">with low data like they're on a limited</span> <span data-start="1279.07" data-end="1281.23">metered plan to just give them a heads</span> <span data-start="1281.23" data-end="1283.929">up it's the white thing to do and then</span> <span data-start="1283.929" data-end="1285.97">improving speed a lot of the same thing</span> <span data-start="1285.97" data-end="1288.7">you need to compress payloads cache a</span> <span data-start="1288.7" data-end="1291.549">guest of Lee server-side rendering is</span> <span data-start="1291.549" data-end="1293.529">super useful here that's really going to</span> <span data-start="1293.529" data-end="1295.659">reduce the amount of time it takes to</span> <span data-start="1295.659" data-end="1297.73">get to that first paint which means if</span> <span data-start="1297.73" data-end="1298.99">you're building a single page</span> <span data-start="1298.99" data-end="1301.389">application you do need to do a little</span> <span data-start="1301.389" data-end="1303.549">bit of extra work and actually send down</span> <span data-start="1303.549" data-end="1306.039">some HTML at least send down an</span> <span data-start="1306.039" data-end="1308.049">application shell send down the the</span> <span data-start="1308.049" data-end="1310.6">header and the footer and a sidebar and</span> <span data-start="1310.6" data-end="1312.58">you know maybe a little loading message</span> <span data-start="1312.58" data-end="1315.279">or something to just get something on</span> <span data-start="1315.279" data-end="1317.35">the screen and then once your JavaScript</span> <span data-start="1317.35" data-end="1319.539">loads and pulls in the rest of the</span> <span data-start="1319.539" data-end="1322.269">content and compiles the templates it'll</span> <span data-start="1322.269" data-end="1323.5">it'll fill out the rest of the</span> <span data-start="1323.5" data-end="1327.33">experience</span> <span data-start="1327.34" data-end="1330.98">so images are going to delay</span> <span data-start="1330.98" data-end="1333.38">interactivity it'll-it'll show useful</span> <span data-start="1333.38" data-end="1335.84">stuff on the the browser right away but</span> <span data-start="1335.84" data-end="1337.4">it's not going to run the JavaScript</span> <span data-start="1337.4" data-end="1339.89">until after the images are loading so we</span> <span data-start="1339.89" data-end="1341.57">try to delay that as much as possible</span> <span data-start="1341.57" data-end="1343.61">there's also in limited bandwidth</span> <span data-start="1343.61" data-end="1346.28">situations you can be pulling multiple</span> <span data-start="1346.28" data-end="1347.78">things from the network at the same time</span> <span data-start="1347.78" data-end="1350.059">but if your pipes are really small like</span> <span data-start="1350.059" data-end="1352.75">trying to send it to the refugee camp</span> <span data-start="1352.75" data-end="1355.82">then you don't want your JavaScript</span> <span data-start="1355.82" data-end="1358.1">download to be competing with a bunch of</span> <span data-start="1358.1" data-end="1362.51">user uploaded images and minimizing the</span> <span data-start="1362.51" data-end="1365.179">amount of stuff on the critical path is</span> <span data-start="1365.179" data-end="1366.679">definitely a good technique especially</span> <span data-start="1366.679" data-end="1369.41">for single page applications you don't</span> <span data-start="1369.41" data-end="1372.74">need all of your templates at once load</span> <span data-start="1372.74" data-end="1374.63">the current template load the</span> <span data-start="1374.63" data-end="1376.79">interactivity above the fold and then</span> <span data-start="1376.79" data-end="1378.74">asynchronously grab the rest of that</span> <span data-start="1378.74" data-end="1382.07">once the page is up and running so we're</span> <span data-start="1382.07" data-end="1385.4">gonna be taking a look now at our groups</span> <span data-start="1385.4" data-end="1388.04">list page this has static content</span> <span data-start="1388.04" data-end="1390.559">static sections of the site user</span> <span data-start="1390.559" data-end="1392.9">uploaded text and images and some</span> </p>
<p><span data-start="1392.9" data-end="1395.03">JavaScript functionality you can sort</span> <span data-start="1395.03" data-end="1396.86">the table by name you can do a search</span> <span data-start="1396.86" data-end="1401.15">and we're using really for tools like</span> <span data-start="1401.15" data-end="1404.75">keeping it simple for our team is chrome</span> <span data-start="1404.75" data-end="1407.059">dev tools Network and performance panels</span> <span data-start="1407.059" data-end="1410.419">there is some setup here so to simulate</span> <span data-start="1410.419" data-end="1413.78">a bad 3G connection we're slowing down</span> <span data-start="1413.78" data-end="1417.5">the CPU as much as dev tools will allow</span> <span data-start="1417.5" data-end="1421.25">and we're putting in a custom network</span> <span data-start="1421.25" data-end="1424.25">throttling profile so remember it's 400</span> <span data-start="1424.25" data-end="1427.309">milliseconds latency and a 400 kilobyte</span> <span data-start="1427.309" data-end="1431.929">a second connection and we're gonna take</span> <span data-start="1431.929" data-end="1433.88">a look at a baseline this was our app</span> <span data-start="1433.88" data-end="1437.51">two weeks ago we already do have some</span> <span data-start="1437.51" data-end="1439.37">goodies so because we're doing a</span> <span data-start="1439.37" data-end="1441.08">server-side rendering model with onyx</span> <span data-start="1441.08" data-end="1444.32">and elixir that's there what pack</span> <span data-start="1444.32" data-end="1446.299">already does some minimization for us</span> <span data-start="1446.299" data-end="1449.65">and Phonics has built-in cache busting</span> <span data-start="1449.65" data-end="1451.88">raise your hand if you know what cache</span> <span data-start="1451.88" data-end="1457.669">busting is okay 50/50 so basically what</span> <span data-start="1457.669" data-end="1459.759">you do you compile your ass</span> <span data-start="1459.759" data-end="1462.249">and generate a hash of the file and</span> <span data-start="1462.249" data-end="1464.259">you're actually gonna serve up a file</span> <span data-start="1464.259" data-end="1467.679">with like you know app — the hash j/s</span> <span data-start="1467.679" data-end="1471.549">what this means is that you can send</span> <span data-start="1471.549" data-end="1473.559">your your caching headers right just</span> <span data-start="1473.559" data-end="1475.659">tell the browser to hold on to that</span> <span data-start="1475.659" data-end="1478.48">forever they never need to load it again</span> <span data-start="1478.48" data-end="1480.009">from your server as long as they have a</span> <span data-start="1480.009" data-end="1482.169">local copy when you make a change in</span> <span data-start="1482.169" data-end="1484.09">your application it generates a new hash</span> <span data-start="1484.09" data-end="1485.86">and you actually just download a</span> <span data-start="1485.86" data-end="1488.529">different file which is I think a pretty</span> <span data-start="1488.529" data-end="1491.11">good way of dealing with caching and</span> <span data-start="1491.11" data-end="1493.419">just trying to hold on to that data as</span> <span data-start="1493.419" data-end="1499.929">long as it's needed so likes this is our</span> <span data-start="1499.929" data-end="1503.23">initial load time it took five seconds</span> <span data-start="1503.23" data-end="1505.809">on our simulated connection to to paint</span> <span data-start="1505.809" data-end="1508.84">the page it took 22 seconds to become</span> <span data-start="1508.84" data-end="1511.84">interactive and we downloaded basically</span> <span data-start="1511.84" data-end="1516.1">a megabyte of content this seems really</span> <span data-start="1516.1" data-end="1520.33">bad it is a bad 3G connection in 2017</span> <span data-start="1520.33" data-end="1522.7">this was the average load time for</span> <span data-start="1522.7" data-end="1525.19">mobile there's 22 seconds to to just</span> <span data-start="1525.19" data-end="1528.999">grab a page so I think we can do better</span> <span data-start="1528.999" data-end="1532.929">than that this is the performance pane</span> <span data-start="1532.929" data-end="1535.69">and dev tools you see really long load</span> <span data-start="1535.69" data-end="1539.139">times grabbing that javascript file to</span> <span data-start="1539.139" data-end="1541.359">get to interactivity even just grabbing</span> <span data-start="1541.359" data-end="1544.779">the images and the HTML took quite a</span> <span data-start="1544.779" data-end="1549.909">while so secondary loads are better we</span> <span data-start="1549.909" data-end="1551.739">can take advantage of browser caching</span> <span data-start="1551.739" data-end="1555.22">takes about a second to paint the page</span> <span data-start="1555.22" data-end="1558.399">and become interactive and because we're</span> <span data-start="1558.399" data-end="1560.559">using cache busting we're just grabbing</span> <span data-start="1560.559" data-end="1562.749">the updated content so it's just the</span> </p>
<p><span data-start="1562.749" data-end="1565.149">HTML file this might be something with a</span> <span data-start="1565.149" data-end="1567.909">single page application it's cached all</span> <span data-start="1567.909" data-end="1569.44">your JavaScript and you just have to</span> <span data-start="1569.44" data-end="1571.179">make a JSON request or something like</span> <span data-start="1571.179" data-end="1576.94">that so you can see there it's it's</span> <span data-start="1576.94" data-end="1577.72">loading</span> <span data-start="1577.72" data-end="1581.08">just about everything compassion for the</span> <span data-start="1581.08" data-end="1584.799">HTML page so we're gonna focus on some</span> <span data-start="1584.799" data-end="1588.369">speed improvements here we didn't I</span> <span data-start="1588.369" data-end="1590.559">thought that we had gzip going it turns</span> <span data-start="1590.559" data-end="1592.48">out I got a configuration file wrong and</span> <span data-start="1592.48" data-end="1592.8">we do</span> <span data-start="1592.8" data-end="1595.5">at all so I did some research and I</span> <span data-start="1595.5" data-end="1598.08">threw on broadly it's basically the new</span> <span data-start="1598.08" data-end="1601.86">gzip it has about a 25% smaller file</span> <span data-start="1601.86" data-end="1603.51">sizes when the compression is done</span> </p>
<p><span data-start="1603.51" data-end="1607.41">I added HTTP to two engines which</span> <span data-start="1607.41" data-end="1610.05">multiplex requests it can reuse TCP</span> <span data-start="1610.05" data-end="1611.55">connections which means you don't have</span> <span data-start="1611.55" data-end="1613.62">to deal with that latency for every</span> <span data-start="1613.62" data-end="1615.48">single pipe that you have open you just</span> <span data-start="1615.48" data-end="1617.37">open up a handful of them at the start</span> <span data-start="1617.37" data-end="1619.56">and then you can load up more stuff and</span> <span data-start="1619.56" data-end="1622.77">through those pipes I implemented a</span> <span data-start="1622.77" data-end="1625.59">fairly simple bundle splitting strategy</span> <span data-start="1625.59" data-end="1628.65">in web pack and so I think that there we</span> <span data-start="1628.65" data-end="1631.26">could do even more here but for now I</span> <span data-start="1631.26" data-end="1633.63">just wanted to separate our application</span> <span data-start="1633.63" data-end="1637.02">code and styles from our vendor code and</span> <span data-start="1637.02" data-end="1638.94">styles because the libraries and stuff</span> <span data-start="1638.94" data-end="1641.64">we use don't change nearly as often as</span> <span data-start="1641.64" data-end="1644.22">updates to our actual business logic and</span> <span data-start="1644.22" data-end="1646.8">in front-end code this will allow me to</span> <span data-start="1646.8" data-end="1650.19">cache that vendor file and just keep it</span> <span data-start="1650.19" data-end="1653.07">there for weeks at a time until we throw</span> <span data-start="1653.07" data-end="1654.6">in the new import while we're making</span> <span data-start="1654.6" data-end="1659.46">daily changes to the application yeah</span> <span data-start="1659.46" data-end="1661.55">some image resizing just cutting down</span> <span data-start="1661.55" data-end="1664.29">take a look like you're throwing on fun</span> <span data-start="1664.29" data-end="1666.32">awesome or something you don't need a</span> <span data-start="1666.32" data-end="1668.43">thousand icons you're probably just</span> <span data-start="1668.43" data-end="1671.69">using 50 in your app double check that</span> <span data-start="1671.69" data-end="1675.66">and lazy load user-generated images you</span> <span data-start="1675.66" data-end="1677.31">can grab them after you get</span> <span data-start="1677.31" data-end="1681.39">interactivity so we hit our goals with</span> <span data-start="1681.39" data-end="1683.4">these improvements alone we got it down</span> <span data-start="1683.4" data-end="1686.73">to just under two seconds to first paint</span> <span data-start="1686.73" data-end="1689.04">four and a half seconds to interactive</span> <span data-start="1689.04" data-end="1692.97">and really cut down on the amount of</span> <span data-start="1692.97" data-end="1694.56">data we're transferring and the the</span> <span data-start="1694.56" data-end="1696.81">overall size there so just with some</span> <span data-start="1696.81" data-end="1698.58">like simple improvements a couple of</span> <span data-start="1698.58" data-end="1700.8">server configurations lazy loading the</span> <span data-start="1700.8" data-end="1703.26">images and doing some bundle splitting</span> <span data-start="1703.26" data-end="1707.04">with web pack we see you know over sixty</span> <span data-start="1707.04" data-end="1708.75">percent performance improvement in the</span> <span data-start="1708.75" data-end="1712.47">metrics that matter you can see here</span> <span data-start="1712.47" data-end="1716.16">that that side that's those images that</span> <span data-start="1716.16" data-end="1718.68">were lazy loading so the paint happens</span> <span data-start="1718.68" data-end="1720.84">really quickly we're reusing a lot of</span> <span data-start="1720.84" data-end="1724.47">the you know same TCP connections with</span> </p>
<p><span data-start="1724.47" data-end="1726.49">HTTP to it gets to</span> <span data-start="1726.49" data-end="1728.47">activity and then we just grab the rest</span> <span data-start="1728.47" data-end="1732.429">of that user content subsequent loads</span> <span data-start="1732.429" data-end="1734.29">similar source of improvement we're down</span> <span data-start="1734.29" data-end="1737.19">to under a second on a bad connection</span> <span data-start="1737.19" data-end="1740.7">for first paint and interactivity and</span> <span data-start="1740.7" data-end="1744.49">we're only serving up 2.6 kilobytes just</span> <span data-start="1744.49" data-end="1748.179">the updated content on the page so I got</span> <span data-start="1748.179" data-end="1750.84">one minute and I'm just gonna touch on</span> <span data-start="1750.84" data-end="1754.24">serviceworkers really quickly here our</span> <span data-start="1754.24" data-end="1756.67">basic strategy we want to cache all the</span> <span data-start="1756.67" data-end="1761.02">static assets on install and serve them</span> <span data-start="1761.02" data-end="1763.09">with a cache first approach so this is</span> <span data-start="1763.09" data-end="1764.65">where cache busting comes in really</span> <span data-start="1764.65" data-end="1766.929">useful is that if you have that file</span> <span data-start="1766.929" data-end="1769.03">there just serve it up no need to go to</span> <span data-start="1769.03" data-end="1771.13">the network if you don't then fall back</span> <span data-start="1771.13" data-end="1773.17">to the network grab it cache it for next</span> <span data-start="1773.17" data-end="1776.44">time and then for the pages because</span> <span data-start="1776.44" data-end="1777.64">those might be updated with</span> <span data-start="1777.64" data-end="1780.52">user-generated content we want to do a</span> <span data-start="1780.52" data-end="1782.65">network first approach but keep them</span> <span data-start="1782.65" data-end="1784.12">cached so grab them from the network</span> <span data-start="1784.12" data-end="1786.96">grab the latest copy if you go offline</span> <span data-start="1786.96" data-end="1790.15">be able to serve that copy from your</span> <span data-start="1790.15" data-end="1791.74">cache so we're using service workers</span> <span data-start="1791.74" data-end="1797.02">we're using the cache API yeah and it</span> <span data-start="1797.02" data-end="1800.07">gets really fast so this is with online</span> <span data-start="1800.07" data-end="1803.59">we have half a second to interactivity</span> <span data-start="1803.59" data-end="1806.59">and most of that is a 400 millisecond</span> <span data-start="1806.59" data-end="1810.7">latency to to grab the updated HTML page</span> <span data-start="1810.7" data-end="1816.52">and that's what we see here so it's just</span> <span data-start="1816.52" data-end="1818.05">grabbing that stuff and then loading</span> <span data-start="1818.05" data-end="1820">everything from cache what's really</span> <span data-start="1820" data-end="1823.99">interesting is that offline is actually</span> <span data-start="1823.99" data-end="1825.94">the best performance because we don't</span> <span data-start="1825.94" data-end="1827.71">have that latency we don't have to hit</span> <span data-start="1827.71" data-end="1829.809">the network up it just loads the the</span> <span data-start="1829.809" data-end="1831.88">last version of everything we cached a</span> <span data-start="1831.88" data-end="1834.309">hundred milliseconds to get there in one</span> <span data-start="1834.309" data-end="1836.08">hundred and fifty know day to day</span> <span data-start="1836.08" data-end="1838.57">transferred so once we kind of wrap this</span> <span data-start="1838.57" data-end="1841.09">up you know make a couple more touch-ups</span> <span data-start="1841.09" data-end="1843.01">to our service workers I'm just gonna</span> <span data-start="1843.01" data-end="1844.96">tell aid workers in the field hit</span> <span data-start="1844.96" data-end="1846.58">airplane mode like download the latest</span> <span data-start="1846.58" data-end="1848.53">copy in the morning hit airplane mode do</span> <span data-start="1848.53" data-end="1850.66">your work all day on hit airplane mode</span> <span data-start="1850.66" data-end="1853.83">and and upload it at the end of the day</span> <span data-start="1853.83" data-end="1857.679">cool so thank you so much that's kind of</span> <span data-start="1857.679" data-end="1859.3">my talk I hoped it served as like a good</span> <span data-start="1859.3" data-end="1859.929">overview</span> <span data-start="1859.929" data-end="1862.33">of performance optimizations you can</span> <span data-start="1862.33" data-end="1864.279">make and JavaScript and a little bit</span> <span data-start="1864.279" data-end="1867.909">about the refugee aid movement you can</span> <span data-start="1867.909" data-end="1869.919">check out the offline functionality on</span> <span data-start="1869.919" data-end="1872.679">our app all the code is publicly</span> <span data-start="1872.679" data-end="1874.99">available on github and I'll be throwing</span> <span data-start="1874.99" data-end="1876.879">the slides up along with some links to</span> <span data-start="1876.879" data-end="1878.86">further research and tutorials on our</span> </p>
<p><span data-start="1878.86" data-end="1881.01">Twitter cool enjoy your lunch</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
