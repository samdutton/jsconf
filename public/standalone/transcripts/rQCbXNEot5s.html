<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>rQCbXNEot5s</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/rQCbXNEot5s?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="18.33" data-end="21.91">I'm Emily um I'm a core developer on</span> <span data-start="21.91" data-end="24.82">meteor as Rico said I'm really excited</span> <span data-start="24.82" data-end="25.449">to be here</span> <span data-start="25.449" data-end="27.699">um and today I'm going to be telling you</span> <span data-start="27.699" data-end="29.529">all about meteor and also showing you</span> <span data-start="29.529" data-end="32.529">about it so a few of you it sounds like</span> <span data-start="32.529" data-end="34">he had heard of meteor I've talked to</span> <span data-start="34" data-end="35.68">some people who have used it or even</span> <span data-start="35.68" data-end="37.6">using it for their for their companies</span> <span data-start="37.6" data-end="40">if you haven't heard of meteor let me</span> <span data-start="40" data-end="42.089">tell you a little bit about what it is</span> <span data-start="42.089" data-end="47.05">basically meteor is a a set of command</span> <span data-start="47.05" data-end="49.629">line tools like a build tool and a set</span> <span data-start="49.629" data-end="52.57">of packages and together these make up a</span> <span data-start="52.57" data-end="55.329">platform for basically developing really</span> <span data-start="55.329" data-end="57.16">really cool web apps so what's a cool</span> <span data-start="57.16" data-end="59.379">web app well what we mean is something</span> <span data-start="59.379" data-end="62.14">that is very interactive real-time very</span> <span data-start="62.14" data-end="64.69">fast and has a really rich snappy user</span> <span data-start="64.69" data-end="67.39">experience and our goal is to make it</span> <span data-start="67.39" data-end="69.55">really easy for developers to build</span> <span data-start="69.55" data-end="73.81">these apps very quickly so in this talk</span> </p>
<p><span data-start="73.81" data-end="75.55">I'm going to start by telling you a</span> <span data-start="75.55" data-end="77.14">little bit about what makes meteor</span> <span data-start="77.14" data-end="79.149">different and more generally what Web</span> <span data-start="79.149" data-end="80.8">Apps are looking like these days which</span> <span data-start="80.8" data-end="82.959">is different from traditional apps that</span> <span data-start="82.959" data-end="84.72">you might have built in rails or Django</span> <span data-start="84.72" data-end="86.95">and then I'm going to spend most of the</span> <span data-start="86.95" data-end="89.229">time doing a live coding demo so I'm</span> <span data-start="89.229" data-end="90.429">going to go through building a simple</span> <span data-start="90.429" data-end="93.7">app and hopefully if you have already</span> <span data-start="93.7" data-end="95.679">maybe seen that seen meteor played</span> <span data-start="95.679" data-end="97.63">around with it a little bit I'm</span> <span data-start="97.63" data-end="99.429">hopefully going to give you a little bit</span> <span data-start="99.429" data-end="101.2">of new new knowledge because I'm going</span> <span data-start="101.2" data-end="102.91">to try to as I go through each feature</span> <span data-start="102.91" data-end="105.28">explain what's going on under the hood a</span> <span data-start="105.28" data-end="107.259">lot of times people say meteors too much</span> <span data-start="107.259" data-end="109.629">magic I don't know what's going on and</span> </p>
<p><span data-start="109.629" data-end="110.92">I'm gonna try to explain what's going on</span> <span data-start="110.92" data-end="115.629">because I swear it's not magic so let me</span> <span data-start="115.629" data-end="118.06">start by telling you what a meteor app</span> <span data-start="118.06" data-end="119.739">looks like and I'm going to do that by</span> <span data-start="119.739" data-end="121.599">comparing to a traditional request</span> <span data-start="121.599" data-end="124.69">response style app so this request</span> <span data-start="124.69" data-end="127.86">response style is where the client says</span> <span data-start="127.86" data-end="130.39">hey server I want a list of sea</span> <span data-start="130.39" data-end="132.97">creatures and the server says these are</span> <span data-start="132.97" data-end="134.17">the sea creatures that I know about</span> <span data-start="134.17" data-end="136.69">right now and here's the HTML to display</span> <span data-start="136.69" data-end="138.819">them and that's all the browser knows</span> <span data-start="138.819" data-end="141.04">how to do is go make a request to get a</span> <span data-start="141.04" data-end="143.319">response and and display that response</span> <span data-start="143.319" data-end="146.72">on the page</span> <span data-start="146.73" data-end="149.7">in a meteor app we want to subscribe to</span> <span data-start="149.7" data-end="151.769">data we want to say I want to know about</span> <span data-start="151.769" data-end="153.36">all the sea creatures that the server</span> <span data-start="153.36" data-end="155.16">knows about and when the server finds</span> <span data-start="155.16" data-end="157.23">out about new sea creatures then I want</span> <span data-start="157.23" data-end="160.17">to know about those also and when the</span> <span data-start="160.17" data-end="161.73">client finds out about new data from the</span> <span data-start="161.73" data-end="163.8">server the client figures out how to put</span> <span data-start="163.8" data-end="165.18">it on the page instead of the server</span> <span data-start="165.18" data-end="166.92">saying here's all the HTML for the</span> <span data-start="166.92" data-end="170.55">entire list and of course it's not just</span> <span data-start="170.55" data-end="172.53">meteor apps that are doing this this is</span> <span data-start="172.53" data-end="174.12">this is a very common style of web</span> <span data-start="174.12" data-end="176.43">development today you might have used</span> <span data-start="176.43" data-end="177.9">something like servers and events or</span> </p>
<p><span data-start="177.9" data-end="179.79">WebSockets to constantly stream data</span> <span data-start="179.79" data-end="180.95">from the server to the client</span> <span data-start="180.95" data-end="183.299">client-side rendering is a very common</span> <span data-start="183.299" data-end="185.97">thing but what we try to do in meteor is</span> <span data-start="185.97" data-end="187.95">make it very easy and quick to develop</span> <span data-start="187.95" data-end="189.36">these kinds of apps and make it so that</span> <span data-start="189.36" data-end="190.92">you can bake these features in from the</span> <span data-start="190.92" data-end="194.819">very beginning so these are some of the</span> <span data-start="194.819" data-end="196.44">principles that that we have that</span> <span data-start="196.44" data-end="198.23">describe this kind of app and that that</span> <span data-start="198.23" data-end="201.78">inform how meteor works data on the wire</span> <span data-start="201.78" data-end="203.819">means we send data from the server to</span> <span data-start="203.819" data-end="205.59">the client we don't generally send these</span> <span data-start="205.59" data-end="208.709">huge blobs of HTML client-side rendering</span> <span data-start="208.709" data-end="210.69">I mentioned the client is the one who</span> <span data-start="210.69" data-end="212.609">knows how to how to render the templates</span> <span data-start="212.609" data-end="214.44">it's not that the server has a template</span> <span data-start="214.44" data-end="216">and the server renders that template</span> <span data-start="216" data-end="218.069">with some data instead the client has</span> <span data-start="218.069" data-end="219.54">the template and the client figured out</span> <span data-start="219.54" data-end="222.389">how to do the rendering and how to react</span> <span data-start="222.389" data-end="228.789">to data as it comes from the server</span> <span data-start="228.799" data-end="231.06">another difference is when you start</span> <span data-start="231.06" data-end="232.62">writing data so when you start making</span> <span data-start="232.62" data-end="234.78">changes to data on the server in a</span> <span data-start="234.78" data-end="236.639">traditional request response style app</span> <span data-start="236.639" data-end="239.19">you generally send an HTTP POST request</span> <span data-start="239.19" data-end="241.41">where you say this is the new creature I</span> <span data-start="241.41" data-end="243.69">want to add and the server goes off and</span> <span data-start="243.69" data-end="245.489">does some work maybe writes to the</span> <span data-start="245.489" data-end="247.53">database and then it comes back and it</span> <span data-start="247.53" data-end="250.049">says okay I added that and here's the</span> <span data-start="250.049" data-end="252.329">updated HTML with with your new creature</span> <span data-start="252.329" data-end="257.43">in it in a meteor app we have a little</span> <span data-start="257.43" data-end="260.459">bit of an advantage as I mentioned the</span> <span data-start="260.459" data-end="262.62">client the client subscribes to data</span> <span data-start="262.62" data-end="265.02">over time and that means that the client</span> <span data-start="265.02" data-end="267.63">has this in-memory local cache of the</span> <span data-start="267.63" data-end="270.45">data that it knows about so when the</span> <span data-start="270.45" data-end="272.01">client wants to go make a change to that</span> <span data-start="272.01" data-end="274.59">data instead of going to the server and</span> <span data-start="274.59" data-end="276.69">saying I want to make this change tell</span> <span data-start="276.69" data-end="278.63">me what the result is the</span> </p>
<p><span data-start="278.63" data-end="280.43">I can just do it locally the clan can</span> <span data-start="280.43" data-end="282.62">just update its local cache and then go</span> <span data-start="282.62" data-end="284.96">update the page do whatever it needs to</span> <span data-start="284.96" data-end="287.69">do to reflect that change while sending</span> <span data-start="287.69" data-end="289.64">the message to the server and when the</span> <span data-start="289.64" data-end="291.74">server comes back and says ok everything</span> <span data-start="291.74" data-end="293.87">went according to plan the client has</span> <span data-start="293.87" data-end="295.49">successfully predicted everything that</span> <span data-start="295.49" data-end="296.93">it was going to do and it doesn't need</span> <span data-start="296.93" data-end="299">to do anything else and meteor takes</span> <span data-start="299" data-end="300.71">care of all of this for you as you'll</span> <span data-start="300.71" data-end="304.46">see when I do my demo and so we call</span> <span data-start="304.46" data-end="305.93">this latency compensation</span> <span data-start="305.93" data-end="307.79">we're compensating for the latency of</span> <span data-start="307.79" data-end="310.1">going back and forth to the server by</span> <span data-start="310.1" data-end="311.33">just predicting what the server is going</span> <span data-start="311.33" data-end="313.91">to do and and acting accordingly and</span> <span data-start="313.91" data-end="315.59">only if something goes wrong on the</span> <span data-start="315.59" data-end="317.6">server like if the server comes back and</span> <span data-start="317.6" data-end="320.44">says you're not authorized to do that or</span> <span data-start="320.44" data-end="322.01">exception I don't know what you're</span> <span data-start="322.01" data-end="322.85">talking about</span> <span data-start="322.85" data-end="324.86">then meteor figures out how to undo the</span> <span data-start="324.86" data-end="326.48">changes that were applied locally and</span> <span data-start="326.48" data-end="328.22">match what actually happened on the</span> <span data-start="328.22" data-end="334.1">server one final point of comparison I</span> <span data-start="334.1" data-end="336.35">want to make before I get into my demo</span> <span data-start="336.35" data-end="339.02">is that we see a lot of developers</span> <span data-start="339.02" data-end="340.82">building these kinds of apps that behave</span> <span data-start="340.82" data-end="343.25">a lot like meteor apps but they often do</span> <span data-start="343.25" data-end="344.96">it by putting together tons of different</span> <span data-start="344.96" data-end="348.35">tools so you might use any one of a</span> <span data-start="348.35" data-end="349.61">number of front-end front-end JavaScript</span> <span data-start="349.61" data-end="352.22">libraries in addition to your CSS</span> <span data-start="352.22" data-end="352.97">framework</span> <span data-start="352.97" data-end="354.98">you might pick some different technology</span> <span data-start="354.98" data-end="356.21">on the server a different framework</span> <span data-start="356.21" data-end="359.24">different actual application server you</span> <span data-start="359.24" data-end="360.68">might want to use something like sock</span> <span data-start="360.68" data-end="364.49">js2 to use web sockets even in browsers</span> <span data-start="364.49" data-end="368.18">that don't support it in meteor our</span> <span data-start="368.18" data-end="370.16">philosophy is that it's much easier to</span> <span data-start="370.16" data-end="372.32">do it all we're a little bit more of an</span> <span data-start="372.32" data-end="374.66">opinionated framework we we want it we</span> <span data-start="374.66" data-end="376.76">wanted it to be as easy as possible for</span> <span data-start="376.76" data-end="378.65">you and so we try to make the hard</span> <span data-start="378.65" data-end="381.04">decisions for you and give you one stack</span> <span data-start="381.04" data-end="383.72">so by default you write your entire app</span> <span data-start="383.72" data-end="386">and JavaScript server code client code</span> <span data-start="386" data-end="387.65">and that means you can share a lot of</span> <span data-start="387.65" data-end="389.36">code from the client in the server and</span> <span data-start="389.36" data-end="391.94">you can use the same api's under the</span> <span data-start="391.94" data-end="395.09">client on in the server except where it</span> <span data-start="395.09" data-end="396.26">doesn't make sense and I'll give you</span> <span data-start="396.26" data-end="399.2">some examples of that but we also don't</span> <span data-start="399.2" data-end="401.87">want to tie you down so when when you</span> <span data-start="401.87" data-end="404.12">want to go hook up your meteor app to an</span> <span data-start="404.12" data-end="406.4">objective-c client we have a protocol</span> <span data-start="406.4" data-end="408.5">that we use to transfer data from the</span> <span data-start="408.5" data-end="409.84">client and the server</span> <span data-start="409.84" data-end="411.94">and you can implement a client in in</span> </p>
<p><span data-start="411.94" data-end="414.16">Python or objective-c or you can take</span> <span data-start="414.16" data-end="415.84">your meteor your meteor app and hook it</span> <span data-start="415.84" data-end="417.82">up to a Java server can we have</span> <span data-start="417.82" data-end="419.11">community members who are doing these</span> <span data-start="419.11" data-end="420.52">things and I think we'll only see more</span> <span data-start="420.52" data-end="425.919">of that as time goes on all right so now</span> <span data-start="425.919" data-end="428.8">it's time for my demo and so I'm going</span> <span data-start="428.8" data-end="430.06">to go through the process of building a</span> <span data-start="430.06" data-end="433.389">simple app I went to the hobbit house</span> <span data-start="433.389" data-end="435.43">last night instead of practicing so it's</span> <span data-start="435.43" data-end="443.39">your job to find typos and where is my</span> <span data-start="443.4" data-end="449.77">there we go okay okay so we're gonna</span> <span data-start="449.77" data-end="451.419">start with an app I have a little bit of</span> <span data-start="451.419" data-end="453.25">scaffolding already set up here but not</span> <span data-start="453.25" data-end="454.63">not too much um</span> <span data-start="454.63" data-end="457.66">we're inside a meteor app uh if we</span> <span data-start="457.66" data-end="459.25">weren't already here we would create an</span> <span data-start="459.25" data-end="462.7">app by by typing meteor create and the</span> <span data-start="462.7" data-end="464.88">name of our app can everyone see okay</span> <span data-start="464.88" data-end="469.3">okay and what's in here is an HTML file</span> <span data-start="469.3" data-end="470.56">where I have just a little bit of</span> <span data-start="470.56" data-end="474.4">starter code and and and in every meteor</span> <span data-start="474.4" data-end="476.14">app you have a meteor directory which</span> <span data-start="476.14" data-end="478">has things like the packages that you're</span> <span data-start="478" data-end="481.33">using and the release of meteor that</span> <span data-start="481.33" data-end="485.26">this app is pinned to so let's look at</span> <span data-start="485.26" data-end="491.68">this HTML so I have this file open it's</span> <span data-start="491.68" data-end="494.44">it's written in mostly HTML and it has</span> <span data-start="494.44" data-end="496.03">some handlebars syntax so we use a</span> <span data-start="496.03" data-end="498.389">template language similar to handlebars</span> <span data-start="498.389" data-end="500.68">which you might have heard of yesterday</span> <span data-start="500.68" data-end="503.5">described as like the son of Satan or</span> <span data-start="503.5" data-end="505.389">something but um</span> <span data-start="505.389" data-end="508.81">so it's okay um so so we have two</span> <span data-start="508.81" data-end="512.19">templates here we have a header which is</span> <span data-start="512.19" data-end="515.83">just a header not not too um oh and by</span> <span data-start="515.83" data-end="517.27">the way this is like not a politically</span> <span data-start="517.27" data-end="518.919">correct app people's feelings are gonna</span> <span data-start="518.919" data-end="521.83">get hurt once I deploy this but so so we</span> <span data-start="521.83" data-end="524.62">have we have this header and then we</span> <span data-start="524.62" data-end="527.2">have a list of talks so what we're going</span> <span data-start="527.2" data-end="529.51">to do is iterate over the talks and for</span> <span data-start="529.51" data-end="531.19">each talk we just print the title and</span> <span data-start="531.19" data-end="534.64">the speaker and the number of votes so</span> <span data-start="534.64" data-end="536.08">right now this is just a template we</span> <span data-start="536.08" data-end="537.67">don't have any JavaScript code yet we</span> <span data-start="537.67" data-end="539.44">don't have any data here we're not this</span> <span data-start="539.44" data-end="540.7">is not going to do anything so let's</span> <span data-start="540.7" data-end="545.36">write some JavaScript</span> <span data-start="545.37" data-end="549.55">this files not supposed to exist all</span> <span data-start="549.55" data-end="560.77">right good maybe a little big okay so</span> <span data-start="560.77" data-end="562.27">the first thing I'm going to do is</span> <span data-start="562.27" data-end="569.71">declare a collection so if you've used</span> </p>
<p><span data-start="569.71" data-end="571.93">MongoDB before this is the syntax we're</span> <span data-start="571.93" data-end="574.36">using and meteor right now only supports</span> <span data-start="574.36" data-end="576.28">MongoDB but there are plans to support</span> <span data-start="576.28" data-end="578.77">other databases including sequel</span> <span data-start="578.77" data-end="581.2">databases in the future so we're</span> <span data-start="581.2" data-end="582.82">declaring this collection and we're</span> <span data-start="582.82" data-end="584.62">actually writing code this line of code</span> <span data-start="584.62" data-end="586.21">is going to run on both the client and</span> <span data-start="586.21" data-end="588.79">the server so when this code runs on the</span> <span data-start="588.79" data-end="590.65">server it actually creates a Mongo</span> <span data-start="590.65" data-end="591.94">collection and when you read and write</span> <span data-start="591.94" data-end="593.47">to this collection that actually talks</span> <span data-start="593.47" data-end="596.71">to Mongo on the client we're declaring a</span> <span data-start="596.71" data-end="601.67">local in-memory cache of this collection</span> <span data-start="601.68" data-end="604.63">now let's write some code that just runs</span> <span data-start="604.63" data-end="607.12">on the server and later we'll write some</span> <span data-start="607.12" data-end="612.4">code that just runs on the client so on</span> <span data-start="612.4" data-end="613.96">the server we want to publish this data</span> <span data-start="613.96" data-end="623.9">just as I showed in our picture</span> <span data-start="623.91" data-end="626.1">so we're writing a published function</span> <span data-start="626.1" data-end="627.63">and what we're doing here is we're</span> <span data-start="627.63" data-end="629.22">taking the result we're taking a</span> <span data-start="629.22" data-end="631.08">database cursor which is sort of like an</span> <span data-start="631.08" data-end="633.27">abstraction representing a query but not</span> <span data-start="633.27" data-end="635.1">representing the actual results of the</span> <span data-start="635.1" data-end="637.65">query at any particular time and we're</span> <span data-start="637.65" data-end="639.6">basically returning this as our as the</span> <span data-start="639.6" data-end="642.24">result of our published function now on</span> <span data-start="642.24" data-end="643.8">the client we're going to subscribe to</span> <span data-start="643.8" data-end="647.49">this so what this means is that our</span> <span data-start="647.49" data-end="649.68">server is publishing everything in its</span> </p>
<p><span data-start="649.68" data-end="651.54">Sox collection and the client is</span> <span data-start="651.54" data-end="653.43">subscribing to that data and storing it</span> <span data-start="653.43" data-end="660.84">in its own Sox collection okay so we</span> <span data-start="660.84" data-end="662.01">have that we have some data being</span> <span data-start="662.01" data-end="663.81">published one more thing before our app</span> <span data-start="663.81" data-end="667.62">actually does something is that we want</span> <span data-start="667.62" data-end="669.6">to actually declare define that template</span> <span data-start="669.6" data-end="672.36">helper that we used in our template so</span> <span data-start="672.36" data-end="673.86">when we're when we're iterating over</span> <span data-start="673.86" data-end="675.96">that list of talks we need to actually</span> <span data-start="675.96" data-end="681.33">have the talks to iterate all right so I</span> <span data-start="681.33" data-end="683.31">have some dummy data in the database so</span> <span data-start="683.31" data-end="688.8">um so let's go run this app and the way</span> <span data-start="688.8" data-end="691.26">we do this is I was totally gonna do an</span> <span data-start="691.26" data-end="693.75">okay meteor run joke but I feel like</span> <span data-start="693.75" data-end="695.7">that was used up already</span> <span data-start="695.7" data-end="699.9">so okay so this is how you actually run</span> <span data-start="699.9" data-end="703.38">it um and then we can go so we're</span> <span data-start="703.38" data-end="704.79">running a local development server now</span> <span data-start="704.79" data-end="708.36">and now we can go look at our app um did</span> </p>
<p><span data-start="708.36" data-end="711.06">I get rid of my name let me see I might</span> <span data-start="711.06" data-end="713.07">have gotten rid of my sample data so</span> <span data-start="713.07" data-end="714.75">another thing we can do is open up a</span> <span data-start="714.75" data-end="718.44">Mongo shell um and this is a Mongo shell</span> <span data-start="718.44" data-end="720.81">to the database that our app is our app</span> <span data-start="720.81" data-end="723.66">is running okay so I don't have anything</span> <span data-start="723.66" data-end="725.28">in the database let's go put something</span> <span data-start="725.28" data-end="728.25">in I think I have some sample data</span> <span data-start="728.25" data-end="736.56">somewhere</span> <span data-start="736.57" data-end="739.45">okay so now we should have something in</span> <span data-start="739.45" data-end="744.56">our database and in a second okay so now</span> <span data-start="744.56" data-end="746.69">we have our so now we have our we have</span> <span data-start="746.69" data-end="748.85">our talks can everyone read it it looks</span> <span data-start="748.85" data-end="753.86">good okay yes okay so we have some stuff</span> <span data-start="753.86" data-end="757.07">in the database we've we've published</span> <span data-start="757.07" data-end="763.58">we've subscribed okay so what's going on</span> </p>
<p><span data-start="763.58" data-end="765.95">I haven't showed too much yet but before</span> <span data-start="765.95" data-end="767.78">I go further let me explain how this</span> <span data-start="767.78" data-end="771.05">pub/sub thing is working so it's</span> <span data-start="771.05" data-end="773.39">actually kind of embarrassing what we do</span> <span data-start="773.39" data-end="775.94">right now is when you win and when the</span> <span data-start="775.94" data-end="778.7">server publishes some data and then some</span> <span data-start="778.7" data-end="780.44">right happens like you go use a meteor</span> <span data-start="780.44" data-end="783.02">API to write to the database the server</span> <span data-start="783.02" data-end="785.6">actually goes and pulls Mongo for all</span> <span data-start="785.6" data-end="787.43">the queries that clients have subscribed</span> <span data-start="787.43" data-end="790.25">to and then it takes the it takes the</span> <span data-start="790.25" data-end="791.63">data that it's already sent to the</span> <span data-start="791.63" data-end="793.31">clients and dips that with the new</span> <span data-start="793.31" data-end="795.8">result of the query so it's</span> <span data-start="795.8" data-end="798.11">computationally expensive it's expensive</span> <span data-start="798.11" data-end="801.02">in memory but it's actually gotten this</span> <span data-start="801.02" data-end="802.16">quite far there are a few optimizations</span> <span data-start="802.16" data-end="804.62">that work really well like deduplicating</span> <span data-start="804.62" data-end="806.51">queries because a lot of times the same</span> <span data-start="806.51" data-end="809.03">clients subscribe to one query and not</span> <span data-start="809.03" data-end="811.37">get all their own queries but we</span> <span data-start="811.37" data-end="812.69">actually have something really cool and</span> <span data-start="812.69" data-end="814.61">exciting coming out fairly soon there's</span> <span data-start="814.61" data-end="816.95">actually a preview release if you really</span> <span data-start="816.95" data-end="818.72">want to try the hot off the press stuff</span> <span data-start="818.72" data-end="820.13">there's a preview release with something</span> <span data-start="820.13" data-end="822.32">called a blog tailing and this is a much</span> <span data-start="822.32" data-end="823.94">more scalable mechanism for doing</span> <span data-start="823.94" data-end="826.16">pub/sub where the meteor server is</span> <span data-start="826.16" data-end="828.26">actually going to act as a secondary in</span> <span data-start="828.26" data-end="831.02">a Mongo replica set so the meteor server</span> <span data-start="831.02" data-end="833.6">is going to tail the OP log which is the</span> </p>
<p><span data-start="833.6" data-end="835.91">Mongo log of all the operations that are</span> <span data-start="835.91" data-end="838.22">happening on the primary and it can tail</span> <span data-start="838.22" data-end="840.26">that to figure out which queries are</span> <span data-start="840.26" data-end="843.23">that clients need to be updated so it's</span> <span data-start="843.23" data-end="845">much less memory intensive and it's much</span> <span data-start="845" data-end="847.34">less computationally intensive we're</span> <span data-start="847.34" data-end="848.54">still you know gathering information</span> <span data-start="848.54" data-end="850.01">about how it's going to work in real</span> <span data-start="850.01" data-end="851.9">apps but so so far the benchmarks are</span> <span data-start="851.9" data-end="853.88">looking really good so that'll be a that</span> <span data-start="853.88" data-end="859.46">will be a release in the near future all</span> <span data-start="859.46" data-end="862.94">right let's make this app do something</span> </p>
<p><span data-start="862.94" data-end="866.25">I'm going to give it some upvote and</span> <span data-start="866.25" data-end="869.819">downvote buttons so first let's just do</span> <span data-start="869.819" data-end="875.009">the HTML so this we're we're rendering a</span> <span data-start="875.009" data-end="883.51">talk let's put in a button</span> <span data-start="883.52" data-end="890.56">and a downvote button</span> <span data-start="890.57" data-end="893.519">and so these should show up now on our</span> <span data-start="893.519" data-end="897.99">on our page okay one little thing I want</span> <span data-start="897.99" data-end="899.37">to point out is the hot code push I</span> <span data-start="899.37" data-end="900.24">don't know if you caught that but I</span> <span data-start="900.24" data-end="901.74">didn't refresh the page the meteor</span> <span data-start="901.74" data-end="903.6">server just hex one code has changed and</span> <span data-start="903.6" data-end="905.339">it autumn it tells clients to refresh</span> <span data-start="905.339" data-end="908.76">and get the new code um okay so we have</span> <span data-start="908.76" data-end="910.11">our buttons but of course they don't do</span> <span data-start="910.11" data-end="911.61">anything yet meteor is not that much</span> <span data-start="911.61" data-end="913.62">magic we didn't write any code to</span> <span data-start="913.62" data-end="915.36">actually do something yet so let's write</span> <span data-start="915.36" data-end="917.49">that code so we have we need events for</span> <span data-start="917.49" data-end="921.3">our upvote and downvote buttons so we'll</span> <span data-start="921.3" data-end="924.24">go into our JavaScript and define an</span> <span data-start="924.24" data-end="928.62">event like so so this is called an event</span> <span data-start="928.62" data-end="931.199">map and we say when you click on an</span> <span data-start="931.199" data-end="935.1">upvote button we're going to do we're</span> <span data-start="935.1" data-end="940.3">gonna call what's called a meteor method</span> <span data-start="940.31" data-end="942.75">so we're calling the up boat method and</span> <span data-start="942.75" data-end="944.43">we're passing it the ID of the talk</span> <span data-start="944.43" data-end="945.57">which is the talk we're currently</span> <span data-start="945.57" data-end="948.12">iterating over that's what goes into the</span> <span data-start="948.12" data-end="951.75">this keyword and we'll do the same thing</span> <span data-start="951.75" data-end="958.5">for down boat okay so i've defined these</span> <span data-start="958.5" data-end="960.72">these event handlers and now we need to</span> <span data-start="960.72" data-end="964.86">write these actual methods so i'll</span> <span data-start="964.86" data-end="970.05">define them here and this is just a</span> <span data-start="970.05" data-end="971.79">function that takes the ID of the talk</span> <span data-start="971.79" data-end="986.17">and upvotes it</span> <span data-start="986.18" data-end="989.49">okay sorry I went off the let me do that</span> <span data-start="989.49" data-end="992.49">so it's a little easier to see so that's</span> <span data-start="992.49" data-end="994.71">simple enough and we do the exact same</span> <span data-start="994.71" data-end="996.66">thing for down voting well not the exact</span> <span data-start="996.66" data-end="1003.579">same thing</span> <span data-start="1003.589" data-end="1006.029">so this is our method and we can call it</span> <span data-start="1006.029" data-end="1009.359">from the client you can also pass</span> <span data-start="1009.359" data-end="1011.549">objects or meteor does a lot of</span> <span data-start="1011.549" data-end="1013.559">serialization and deserialization for</span> <span data-start="1013.559" data-end="1015.959">you so you can you can pass any any</span> <span data-start="1015.959" data-end="1017.929">object that can be serialized</span> <span data-start="1017.929" data-end="1022.319">approximately with JSON okay so let's</span> <span data-start="1022.319" data-end="1023.729">see what happens I'm gonna do one more</span> <span data-start="1023.729" data-end="1025.559">thing before I run this which is I'm</span> <span data-start="1025.559" data-end="1028.769">gonna change my template to actually to</span> <span data-start="1028.769" data-end="1035.699">sort by votes okay so this means our</span> <span data-start="1035.699" data-end="1037.319">list should be sorted by votes all right</span> <span data-start="1037.319" data-end="1039.869">fingers crossed that I didn't make a</span> <span data-start="1039.869" data-end="1042.869">typo we should now be able to up vote</span> <span data-start="1042.869" data-end="1046.049">yeah okay so notice that I did not write</span> <span data-start="1046.049" data-end="1048.329">any code to actually go update the page</span> <span data-start="1048.329" data-end="1051.419">to change the number of votes and if we</span> <span data-start="1051.419" data-end="1054.21">upload this one it reorders I didn't</span> <span data-start="1054.21" data-end="1056.669">write any code to reorder the list this</span> <span data-start="1056.669" data-end="1058.259">is where the reactivity is all about</span> <span data-start="1058.259" data-end="1060.509">meteor is just reacting to the changes</span> <span data-start="1060.509" data-end="1062.399">in the data and automatically rerender</span> <span data-start="1062.399" data-end="1063.749">in the parts of the template that are</span> <span data-start="1063.749" data-end="1065.909">relevant and of course this is all</span> <span data-start="1065.909" data-end="1067.32">persistent so I just refreshed the page</span> <span data-start="1067.32" data-end="1068.879">this is actually writing in the database</span> <span data-start="1068.879" data-end="1073.95">on the server so let me show the code</span> <span data-start="1073.95" data-end="1076.919">again and this is usually the point</span> <span data-start="1076.919" data-end="1078.299">where people start saying this is too</span> <span data-start="1078.299" data-end="1079.769">much magic I don't understand what's</span> <span data-start="1079.769" data-end="1082.619">going on so I'm gonna tell you about a</span> <span data-start="1082.619" data-end="1084.45">package called depths and this is a</span> <span data-start="1084.45" data-end="1086.519">fairly small package in the meteor core</span> <span data-start="1086.519" data-end="1089.1">it's about 500 lines of code and it's</span> <span data-start="1089.1" data-end="1090.539">how all this is implemented it's a</span> <span data-start="1090.539" data-end="1093.749">simple dependency tracking system so</span> <span data-start="1093.749" data-end="1095.22">when we render this template the first</span> <span data-start="1095.22" data-end="1098.429">time we construct this this database</span> <span data-start="1098.429" data-end="1101.669">cursor when this cursor is constructed</span> <span data-start="1101.669" data-end="1104.279">it says to meteor to this depths package</span> <span data-start="1104.279" data-end="1106.919">it says hey meteor any current</span> <span data-start="1106.919" data-end="1108.72">computation that's running depends on me</span> <span data-start="1108.72" data-end="1110.759">it's running it called me it depends on</span> <span data-start="1110.759" data-end="1111.149">me</span> <span data-start="1111.149" data-end="1113.909">when I say that I changed you have to go</span> <span data-start="1113.909" data-end="1118.259">rerun that computation then sometime</span> <span data-start="1118.259" data-end="1120.389">later on the client gets some new data</span> <span data-start="1120.389" data-end="1122.58">from the server and the client says oh</span> <span data-start="1122.58" data-end="1124.259">that's that goes in this query that</span> <span data-start="1124.259" data-end="1127.23">affects this query at that point the</span> <span data-start="1127.23" data-end="1128.94">database cursor says hey meteor I</span> <span data-start="1128.94" data-end="1130.919">changed you have to go rerun all the</span> <span data-start="1130.919" data-end="1133.5">computations that depended on me in this</span> <span data-start="1133.5" data-end="1135.45">case that computation is this part of</span> <span data-start="1135.45" data-end="1137">the template rendering</span> <span data-start="1137" data-end="1139.559">so this is actually really simple easy</span> <span data-start="1139.559" data-end="1141.36">to understand idea even though it seems</span> <span data-start="1141.36" data-end="1142.919">kind of magical when you first see it</span> <span data-start="1142.919" data-end="1145.23">but you can go read the steps package</span> <span data-start="1145.23" data-end="1147.36">it's used to implement reactive</span> <span data-start="1147.36" data-end="1149.21">templates it's used to implement</span> <span data-start="1149.21" data-end="1151.47">reactive different reactive data</span> <span data-start="1151.47" data-end="1153.779">services like database queries and and</span> <span data-start="1153.779" data-end="1156.09">even just plain reactive variables on</span> <span data-start="1156.09" data-end="1158.61">the client so if you're interested it's</span> <span data-start="1158.61" data-end="1160.32">very accessible and I think you should</span> <span data-start="1160.32" data-end="1164.88">check it out okay so we can upvote and</span> <span data-start="1164.88" data-end="1168.48">downvote um another thing we can do is</span> <span data-start="1168.48" data-end="1170.07">actually do this from multiple tabs so</span> <span data-start="1170.07" data-end="1172.38">this is not just you know something</span> <span data-start="1172.38" data-end="1173.97">that's happening within this tab we can</span> <span data-start="1173.97" data-end="1175.62">go to a different tab that doesn't share</span> <span data-start="1175.62" data-end="1177.99">any state with this one and changes from</span> <span data-start="1177.99" data-end="1179.789">this one are automatically reflected in</span> <span data-start="1179.789" data-end="1183.6">the other one and reordering and etc and</span> <span data-start="1183.6" data-end="1185.34">we didn't write any code to do that</span> <span data-start="1185.34" data-end="1192.09">meteor does that all for us if you were</span> <span data-start="1192.09" data-end="1194.669">watching closely you might have seen</span> <span data-start="1194.669" data-end="1197.37">that I actually define these methods on</span> <span data-start="1197.37" data-end="1199.26">both the client and the server so I</span> <span data-start="1199.26" data-end="1201.63">didn't I could have put this code inside</span> <span data-start="1201.63" data-end="1204.779">our is server a block but I actually put</span> <span data-start="1204.779" data-end="1207.51">it in in the in the top level where it</span> <span data-start="1207.51" data-end="1209.48">runs on both the client and the server</span> <span data-start="1209.48" data-end="1211.559">but it's sort of weird because these are</span> <span data-start="1211.559" data-end="1213.45">the server methods they what is the</span> <span data-start="1213.45" data-end="1215.25">client doing running the logic that we</span> <span data-start="1215.25" data-end="1218.19">want to happen on the server so this is</span> <span data-start="1218.19" data-end="1219.87">the latency compensation I was talking</span> <span data-start="1219.87" data-end="1222.779">about with the same code we've defined</span> <span data-start="1222.779" data-end="1225.539">both the method on the server and we've</span> <span data-start="1225.539" data-end="1227.27">defined what's called the client stub</span> <span data-start="1227.27" data-end="1228.99">which is the way that the client</span> <span data-start="1228.99" data-end="1233.07">simulates the method locally so when the</span> <span data-start="1233.07" data-end="1234.59">client when you click the upload button</span> <span data-start="1234.59" data-end="1236.85">the the client immediately sends a</span> <span data-start="1236.85" data-end="1238.77">message to the server are saying I'm</span> <span data-start="1238.77" data-end="1241.35">calling the upvote method at the same</span> <span data-start="1241.35" data-end="1243.659">time the client goes and runs this code</span> <span data-start="1243.659" data-end="1245.789">where it actually updates as a local</span> <span data-start="1245.789" data-end="1248.309">in-memory collection and that causes the</span> <span data-start="1248.309" data-end="1251.25">page to rerender and all that so what</span> <span data-start="1251.25" data-end="1253.02">this means is that the client is</span> <span data-start="1253.02" data-end="1255.179">simulating the effects while the methods</span> <span data-start="1255.179" data-end="1257.34">actually being run on the server and</span> <span data-start="1257.34" data-end="1258.539">then when the result from the server</span> <span data-start="1258.539" data-end="1260.76">comes back the clients done and this is</span> <span data-start="1260.76" data-end="1262.71">why meteor app meteor apps feel so</span> <span data-start="1262.71" data-end="1264.75">snappy because we did all the work</span> <span data-start="1264.75" data-end="1266.399">already we predicted what was going to</span> <span data-start="1266.399" data-end="1268.23">happen and only if something went wrong</span> <span data-start="1268.23" data-end="1268.84">do we</span> <span data-start="1268.84" data-end="1272.74">to undo the changes that we made and and</span> <span data-start="1272.74" data-end="1274.539">meteor takes care of that part too so</span> <span data-start="1274.539" data-end="1276.52">you don't have to actually go undo the</span> <span data-start="1276.52" data-end="1278.65">changes from the method meteor saves the</span> <span data-start="1278.65" data-end="1280.6">original the original state before it</span> <span data-start="1280.6" data-end="1282.46">runs the client stub and restores it</span> <span data-start="1282.46" data-end="1290.86">afterwards all right so we have used a</span> <span data-start="1290.86" data-end="1292.27">meteor method that's a really</span> <span data-start="1292.27" data-end="1294.309">fundamental building block is this RPC</span> <span data-start="1294.309" data-end="1297.909">mechanism inside meteor um one thing you</span> <span data-start="1297.909" data-end="1300.01">might have heard about meteor is that</span> <span data-start="1300.01" data-end="1302.08">you can use the database API on both the</span> <span data-start="1302.08" data-end="1303.909">client and the server and that's totally</span> <span data-start="1303.909" data-end="1306.64">insecure so the first part of that</span> <span data-start="1306.64" data-end="1308.529">sentence is true the second part is</span> <span data-start="1308.529" data-end="1311.95">false so I'm going to add I'm gonna add</span> <span data-start="1311.95" data-end="1314.83">a new feature here which is um adding a</span> <span data-start="1314.83" data-end="1321.37">new talk into the into the list so let's</span> <span data-start="1321.37" data-end="1323.799">add a new template and this is just</span> <span data-start="1323.799" data-end="1328.33">going to have a form inside it and we're</span> <span data-start="1328.33" data-end="1330.279">just gonna use the database API directly</span> <span data-start="1330.279" data-end="1341.26">to insert this new talk</span> <span data-start="1341.27" data-end="1348.84">so it takes a title and a speaker</span> <span data-start="1348.85" data-end="1351.519">and boy those kids must be having a lot</span> <span data-start="1351.519" data-end="1357.519">of fun okay okay so we have a forum</span> <span data-start="1357.519" data-end="1359.679">pretty basic let's write an event</span> <span data-start="1359.679" data-end="1365.139">handler for it so down in our client</span> <span data-start="1365.139" data-end="1367.6">code we're gonna write an event for a</span> <span data-start="1367.6" data-end="1378.379">new new talk template</span> <span data-start="1378.389" data-end="1381.639">and what this is going to do is just</span> <span data-start="1381.639" data-end="1383.98">call insert just like you would from a</span> </p>
<p><span data-start="1383.98" data-end="1390.029">Mongo shell or from server-side code and</span> <span data-start="1390.029" data-end="1392.169">it's just gonna grab the values out of</span> <span data-start="1392.169" data-end="1397.3">the form</span> <span data-start="1397.31" data-end="1403.25">and we can also just pass a callback so</span> <span data-start="1403.25" data-end="1405.14">this is a callback that gets run after</span> <span data-start="1405.14" data-end="1406.73">the the server has actually acknowledged</span> <span data-start="1406.73" data-end="1408.65">the insert and what we'll do is that we</span> <span data-start="1408.65" data-end="1411.41">say if there's no error we'll just clear</span> <span data-start="1411.41" data-end="1415.82">the forum values so if we run this right</span> <span data-start="1415.82" data-end="1417.98">now it shouldn't work that's because</span> <span data-start="1417.98" data-end="1419.42">this collection is completely locked</span> <span data-start="1419.42" data-end="1421.76">down you can't do any rights to it from</span> <span data-start="1421.76" data-end="1426.09">the client except if you call a method</span> <span data-start="1426.1" data-end="1429.8">so let me just show you that we have our</span> <span data-start="1429.8" data-end="1434.96">form down here and it didn't work and in</span> <span data-start="1434.96" data-end="1437.66">fact if you go look in the console which</span> <span data-start="1437.66" data-end="1443.81">is ok if we do if we do this again maybe</span> <span data-start="1443.81" data-end="1449.93">it doesn't print the error ok I thought</span> <span data-start="1449.93" data-end="1451.49">it was gonna say access denied but the</span> <span data-start="1451.49" data-end="1453.35">point is that it doesn't it doesn't let</span> <span data-start="1453.35" data-end="1458.12">us insert anything that that that we</span> <span data-start="1458.12" data-end="1459.47">doesn't let us insert anything right now</span> <span data-start="1459.47" data-end="1462.14">and what we're gonna do is write a rule</span> <span data-start="1462.14" data-end="1463.31">that it allows us to insert the</span> <span data-start="1463.31" data-end="1464.9">particular things that clients should be</span> <span data-start="1464.9" data-end="1470.76">able to insert so in our server code</span> <span data-start="1470.77" data-end="1473.84">we're gonna write an allow rule and this</span> <span data-start="1473.84" data-end="1476.93">is a rule that takes the user ID of the</span> <span data-start="1476.93" data-end="1479.42">client the of the client who's doing the</span> <span data-start="1479.42" data-end="1481.94">insert and it takes the document that</span> <span data-start="1481.94" data-end="1483.98">the client wants to insert and if it</span> <span data-start="1483.98" data-end="1485.57">returns true the insert will be allowed</span> <span data-start="1485.57" data-end="1487.4">if it returns false the insert will be</span> <span data-start="1487.4" data-end="1490.79">denied so just for a toy example we'll</span> <span data-start="1490.79" data-end="1493.25">just say you can insert any talk you</span> <span data-start="1493.25" data-end="1496.88">want as long as it has a vote to zero so</span> <span data-start="1496.88" data-end="1501.4">now I believe that this should work so</span> <span data-start="1501.4" data-end="1505.75">if I put a new talk here</span> <span data-start="1505.75" data-end="1508.58">inserts here in here and it's allowed</span> <span data-start="1508.58" data-end="1511.51">only because we passed that insert check</span> <span data-start="1511.51" data-end="1514.94">and just to prove to you that that check</span> <span data-start="1514.94" data-end="1520.1">is working if we go change this to be a</span> <span data-start="1520.1" data-end="1524.21">bajillion then we should not be able to</span> <span data-start="1524.21" data-end="1529.49">add a new talk so that's how an allow</span> <span data-start="1529.49" data-end="1531.32">rule works you can also write deny rules</span> <span data-start="1531.32" data-end="1533.179">and you can write these rules for for</span> <span data-start="1533.179" data-end="1536.69">inserts updates any any operation so</span> <span data-start="1536.69" data-end="1539.45">when people say that meteor isn't secure</span> <span data-start="1539.45" data-end="1541.25">what they're talking about is a default</span> <span data-start="1541.25" data-end="1544.97">prototyping method a mode for</span> <span data-start="1544.97" data-end="1547.19">prototyping that we have where you can</span> <span data-start="1547.19" data-end="1549.559">write read and write any any collection</span> <span data-start="1549.559" data-end="1551.99">arbitrarily from the client but as soon</span> <span data-start="1551.99" data-end="1553.48">as you go out of that prototyping</span> <span data-start="1553.48" data-end="1555.559">prototyping mode you have to use a</span> <span data-start="1555.559" data-end="1557.51">method or write allowing deny rules to</span> <span data-start="1557.51" data-end="1559.58">specify what parts of the API of the</span> <span data-start="1559.58" data-end="1563.929">clients can use so we have a pretty cool</span> <span data-start="1563.929" data-end="1567.679">app now and in not very much code um one</span> <span data-start="1567.679" data-end="1570.5">last thing I want to show you is about</span> <span data-start="1570.5" data-end="1572.09">meteor we tried it we try to make it</span> <span data-start="1572.09" data-end="1573.89">really easy for developers to build the</span> <span data-start="1573.89" data-end="1575.6">kind of real time fast apps I was</span> <span data-start="1575.6" data-end="1578.03">talking about but part of that is also</span> <span data-start="1578.03" data-end="1579.77">just making it easy to do things that</span> <span data-start="1579.77" data-end="1581.6">everyone needs to do in every app and</span> <span data-start="1581.6" data-end="1583.07">that are very easy to get wrong like an</span> <span data-start="1583.07" data-end="1585.799">account system so we don't want everyone</span> <span data-start="1585.799" data-end="1586.789">to have to write their own account</span> <span data-start="1586.789" data-end="1590.03">system that's that's probably bad for a</span> <span data-start="1590.03" data-end="1591.59">security and it's just a lot of wasted</span> <span data-start="1591.59" data-end="1595.1">effort so we have a couple packages</span> <span data-start="1595.1" data-end="1597.02">actually quite a few packages that help</span> <span data-start="1597.02" data-end="1599.51">you implement an account system in very</span> <span data-start="1599.51" data-end="1601.669">little code so the first thing we're</span> <span data-start="1601.669" data-end="1604.4">going to do is add an accounts google</span> <span data-start="1604.4" data-end="1606.679">package to our app so we're adding this</span> <span data-start="1606.679" data-end="1608.539">package this is this is a core package</span> <span data-start="1608.539" data-end="1610.73">and it will allow users to sign in with</span> <span data-start="1610.73" data-end="1614.15">their Google account using OAuth we also</span> <span data-start="1614.15" data-end="1615.71">have packages like accounts github</span> <span data-start="1615.71" data-end="1617.809">accounts Facebook etc etc and there are</span> <span data-start="1617.809" data-end="1619.61">other community supported packages for</span> <span data-start="1619.61" data-end="1619.88">other</span> <span data-start="1619.88" data-end="1621.23">ooofff providers that we don't support</span> <span data-start="1621.23" data-end="1625.25">in in core so I added accounts Google</span> </p>
<p><span data-start="1625.25" data-end="1626.6">I'm going to add another package called</span> <span data-start="1626.6" data-end="1628.549">accounts UI and this Jib gives us an</span> <span data-start="1628.549" data-end="1630.919">out-of-the-box UI for for users to sign</span> <span data-start="1630.919" data-end="1634.2">up and login</span> <span data-start="1634.21" data-end="1637.029">okay so we've added those packages now</span> <span data-start="1637.029" data-end="1640.6">in my template to get this UI all I have</span> <span data-start="1640.6" data-end="1646.59">to do is this so this is a this is a UI</span> <span data-start="1646.59" data-end="1648.82">template helper that the accounts ui</span> <span data-start="1648.82" data-end="1651.73">package gives us so after we've done</span> <span data-start="1651.73" data-end="1656.2">that we see this configure button and</span> <span data-start="1656.2" data-end="1657.82">this is just something you do once when</span> <span data-start="1657.82" data-end="1660.34">you first deploy your app to get the to</span> <span data-start="1660.34" data-end="1662.529">get the OAuth the OAuth configuration</span> <span data-start="1662.529" data-end="1668.889">set up mmm okay so I have some I have</span> <span data-start="1668.889" data-end="1673.179">some credentials for this toy app you</span> <span data-start="1673.179" data-end="1674.98">just paste these into the configure</span> <span data-start="1674.98" data-end="1683.799">dialog and you get these from the Google</span> </p>
<p><span data-start="1683.799" data-end="1690.789">API console okay so we save our</span> <span data-start="1690.789" data-end="1692.799">configuration now we have this sign-in</span> <span data-start="1692.799" data-end="1698.2">button let me make it bigger again and</span> <span data-start="1698.2" data-end="1704.76">now we can sign in with Google</span> <span data-start="1704.77" data-end="1706.39">so now I've signed in with my Google</span> <span data-start="1706.39" data-end="1708.19">identity it knows who I am</span> <span data-start="1708.19" data-end="1710.92">I could similarly add github or Facebook</span> <span data-start="1710.92" data-end="1712.87">log in there's also an accounts password</span> <span data-start="1712.87" data-end="1714.46">package if you just want password-based</span> <span data-start="1714.46" data-end="1715.96">authentication you don't want to use</span> <span data-start="1715.96" data-end="1720.73">OAuth and one the last thing I'll show</span> <span data-start="1720.73" data-end="1721.96">you is that we can actually use this</span> <span data-start="1721.96" data-end="1724.48">user I dated you to do useful things so</span> <span data-start="1724.48" data-end="1728.55">if we go we into our methods we can say</span> <span data-start="1728.55" data-end="1731.26">if you're not logged in when you call</span> <span data-start="1731.26" data-end="1734.79">this method then you just get an error</span> <span data-start="1734.79" data-end="1738.61">so we can do that on our methods we can</span> <span data-start="1738.61" data-end="1741.309">do that in our Lauer rule also so here</span> <span data-start="1741.309" data-end="1744.13">we only want to return return true to</span> <span data-start="1744.13" data-end="1752.23">allow the insert if you're logged in so</span> <span data-start="1752.23" data-end="1754.24">now that I'm here and I guess one more</span> <span data-start="1754.24" data-end="1755.44">one more thing we can do is actually</span> <span data-start="1755.44" data-end="1757.69">hide the UI that you're not allowed to</span> <span data-start="1757.69" data-end="1762.52">use if you are not logged in so this is</span> <span data-start="1762.52" data-end="1764.29">another another template helper that the</span> <span data-start="1764.29" data-end="1766.69">accounts UI package gives you which is</span> <span data-start="1766.69" data-end="1770.47">that you can just you can just call</span> <span data-start="1770.47" data-end="1772.72">current user to see who's logged in and</span> <span data-start="1772.72" data-end="1774.46">we can hide the UI that we don't want</span> <span data-start="1774.46" data-end="1783.149">the the non logged in users to see</span> <span data-start="1783.159" data-end="1786.169">so now I see the UI here but over here</span> <span data-start="1786.169" data-end="1787.7">when I'm logged out I don't see the up</span> <span data-start="1787.7" data-end="1792.549">foot buttons and here I can upvote here</span> <span data-start="1792.549" data-end="1804.31">if I try to insert a new talk directly</span> </p>
<p><span data-start="1804.32" data-end="1808.74">I'll get an access denied</span> <span data-start="1808.75" data-end="1812">so you might be wondering what is going</span> <span data-start="1812" data-end="1814.25">on at the network level what is the</span> <span data-start="1814.25" data-end="1815.75">actual message is being passed between</span> <span data-start="1815.75" data-end="1817.91">the client and the server and you can</span> <span data-start="1817.91" data-end="1819.35">actually look at them so if this</span> <span data-start="1819.35" data-end="1821.24">protocol is called DDP there's a rough</span> <span data-start="1821.24" data-end="1823.46">draft specification in the meteor</span> <span data-start="1823.46" data-end="1826.85">repository and it runs over a soft Jas</span> <span data-start="1826.85" data-end="1829.28">and on this browser which supports</span> </p>
<p><span data-start="1829.28" data-end="1831.14">WebSockets it actually runs over</span> <span data-start="1831.14" data-end="1833.36">WebSockets and you can see these are the</span> <span data-start="1833.36" data-end="1836">messages in DDP so there's a connect</span> <span data-start="1836" data-end="1838.7">message there's a login method that gets</span> <span data-start="1838.7" data-end="1840.65">called so all this accounts UI stuff</span> <span data-start="1840.65" data-end="1842.36">it's all implemented as methods just</span> <span data-start="1842.36" data-end="1843.89">like the upvote and downvote methods</span> <span data-start="1843.89" data-end="1846.14">that I showed you these are the</span> <span data-start="1846.14" data-end="1848">subscription messages where the clients</span> <span data-start="1848" data-end="1851.69">subscribing to data um you can see when</span> <span data-start="1851.69" data-end="1854.87">a method gets called let me let me do</span> <span data-start="1854.87" data-end="1857.93">this to call a method so you can see now</span> <span data-start="1857.93" data-end="1859.91">a method gets called the upvote method</span> <span data-start="1859.91" data-end="1862.18">and a result comes back from the server</span> <span data-start="1862.18" data-end="1864.89">this updated message is a message to</span> <span data-start="1864.89" data-end="1866.72">tell the client when all the data</span> <span data-start="1866.72" data-end="1869.36">changes that the method ran are sent to</span> <span data-start="1869.36" data-end="1871.52">the client so at this point the meteor</span> <span data-start="1871.52" data-end="1873.53">client knows that now is the time when</span> <span data-start="1873.53" data-end="1875.24">it can start figuring out if the things</span> <span data-start="1875.24" data-end="1876.8">that it predicted to do during the</span> <span data-start="1876.8" data-end="1878.57">method stub are actually the things that</span> <span data-start="1878.57" data-end="1885.59">the server wanted it to do okay so I</span> <span data-start="1885.59" data-end="1887.12">think that's about what I wanted to show</span> <span data-start="1887.12" data-end="1891.23">you in the demo before I wrap up there's</span> <span data-start="1891.23" data-end="1892.82">just a couple things I wanted to say</span> <span data-start="1892.82" data-end="1894.41">about the future of meteor so I</span> <span data-start="1894.41" data-end="1896.09">mentioned some of them already I'm</span> <span data-start="1896.09" data-end="1898.31">really excited about about app log</span> <span data-start="1898.31" data-end="1900.23">tailing which is going to be going to be</span> <span data-start="1900.23" data-end="1902.21">a whole new level of scalability for</span> <span data-start="1902.21" data-end="1904.7">meteor apps the current the mechanism</span> <span data-start="1904.7" data-end="1906.41">that we have in there right now has has</span> <span data-start="1906.41" data-end="1908.36">worked it's gotten a lot it's running a</span> <span data-start="1908.36" data-end="1910.31">lot of production sites right now but um</span> <span data-start="1910.31" data-end="1912.98">you know it's it is what it sounds like</span> <span data-start="1912.98" data-end="1914.57">and we're really excited about a blog</span> <span data-start="1914.57" data-end="1916.91">tailing to to be a much more scalable</span> <span data-start="1916.91" data-end="1919.34">mechanism there's another project going</span> <span data-start="1919.34" data-end="1921.62">on which is called meteor UI and that's</span> <span data-start="1921.62" data-end="1923.72">a new rendering engine and front-end</span> <span data-start="1923.72" data-end="1926.66">framework for meteor and it's it's a lot</span> <span data-start="1926.66" data-end="1928.37">smarter about figuring out when to</span> <span data-start="1928.37" data-end="1930.2">re-render things and it's also much more</span> <span data-start="1930.2" data-end="1932.48">interoperable with other non meteor code</span> <span data-start="1932.48" data-end="1934.91">that might be running on your page both</span> <span data-start="1934.91" data-end="1936.8">of these projects have preview releases</span> <span data-start="1936.8" data-end="1938.39">out so if you're playing around with</span> <span data-start="1938.39" data-end="1941.41">meteor you can check out the meteor talk</span> <span data-start="1941.41" data-end="1943.12">we'll group and there are threads on</span> <span data-start="1943.12" data-end="1945.19">there for the preview releases you can</span> <span data-start="1945.19" data-end="1947.89">try those out I'm trying out a new media</span> <span data-start="1947.89" data-end="1949.51">release with your app is as easy as</span> <span data-start="1949.51" data-end="1953.05">doing this so if I want to rollback this</span> <span data-start="1953.05" data-end="1958.09">app 206 606 6 I can just do this and</span> <span data-start="1958.09" data-end="1960.37">then when I run this app it'll run with</span> <span data-start="1960.37" data-end="1963.82">meteor 6 6 instead of Oh 6 6 3 which is</span> <span data-start="1963.82" data-end="1968.29">what it was on before so those are 2</span> <span data-start="1968.29" data-end="1969.82">cool things to check out one thing which</span> <span data-start="1969.82" data-end="1971.56">is not publicly available yet but it's</span> <span data-start="1971.56" data-end="1972.76">the thing I've been spending most of my</span> <span data-start="1972.76" data-end="1975.64">time on is this distributed deployment</span> <span data-start="1975.64" data-end="1977.92">environment called galaxy and this is</span> <span data-start="1977.92" data-end="1980.17">going to be an application server that</span> <span data-start="1980.17" data-end="1981.94">handles auto scaling and monitoring</span> <span data-start="1981.94" data-end="1984.85">provisioning all sorts of good things</span> <span data-start="1984.85" data-end="1987.34">and it's been a lot of fun to work on</span> <span data-start="1987.34" data-end="1989.59">where we're aiming to have some release</span> <span data-start="1989.59" data-end="1991.48">of all these things out by early 2014</span> <span data-start="1991.48" data-end="1997.51">with the meteor 1.0 release so I hope</span> <span data-start="1997.51" data-end="1998.89">you learned something whether you've</span> <span data-start="1998.89" data-end="2001.02">seen meteor before or whether this is</span> <span data-start="2001.02" data-end="2002.82">the first time you've seen it I've been</span> <span data-start="2002.82" data-end="2004.38">having the time of my life working on it</span> <span data-start="2004.38" data-end="2005.73">so if you have any more questions about</span> <span data-start="2005.73" data-end="2007.08">what's going on under the hood or how</span> <span data-start="2007.08" data-end="2009.51">you can get started learning please feel</span> <span data-start="2009.51" data-end="2015.54">free to ask me thank you all right Thank</span> </p>
<p><span data-start="2015.54" data-end="2017.4">You Emily we actually have time for a</span> <span data-start="2017.4" data-end="2018.87">question or two anyone have any</span> <span data-start="2018.87" data-end="2023.13">questions raise your hands all right we</span> <span data-start="2023.13" data-end="2029.24">have one over here</span> <span data-start="2029.25" data-end="2032.23">what how does it work with you know</span> <span data-start="2032.23" data-end="2034.24">other server-side code I mean I want to</span> <span data-start="2034.24" data-end="2035.65">do like you know I want to send out</span> <span data-start="2035.65" data-end="2038.95">email so I want to connect to make a TCP</span> <span data-start="2038.95" data-end="2040.33">connection to another server how do how</span> <span data-start="2040.33" data-end="2042.7">do I do that so there are a couple well</span> <span data-start="2042.7" data-end="2046.96">the specific one one other trick so all</span> <span data-start="2046.96" data-end="2049.149">right I'll answers to that the</span> <span data-start="2049.149" data-end="2050.86">prerequisite for one of those answers is</span> <span data-start="2050.86" data-end="2052.51">that there's this really third use</span> <span data-start="2052.51" data-end="2053.919">called meteor deploy where you can</span> <span data-start="2053.919" data-end="2056.53">deploy an app to our free hosting</span> <span data-start="2056.53" data-end="2058.51">service that has absolutely no uptime</span> <span data-start="2058.51" data-end="2061.629">guarantees except like someone will get</span> <span data-start="2061.629" data-end="2063.28">paged if it goes down and it might be me</span> <span data-start="2063.28" data-end="2065.26">but we have no guarantees about it but</span> <span data-start="2065.26" data-end="2066.879">it's a great place to deploy your your</span> <span data-start="2066.879" data-end="2069.01">apps and when you deploy them here you</span> <span data-start="2069.01" data-end="2070.78">actually get automatically provisioned</span> <span data-start="2070.78" data-end="2076.51">with a an email sending is it mailgun is</span> <span data-start="2076.51" data-end="2077.889">that the thing is that a thing</span> <span data-start="2077.889" data-end="2081.94">mail then ok it's just matter Melvin</span> <span data-start="2081.94" data-end="2083.74">yeah anyway you automatically get an</span> <span data-start="2083.74" data-end="2085.6">email sending API which is built into</span> <span data-start="2085.6" data-end="2086.74">the meteor Cora and which is</span> <span data-start="2086.74" data-end="2088">automatically provisioned with a</span> <span data-start="2088" data-end="2090.07">third-party service when you deploy here</span> </p>
<p><span data-start="2090.07" data-end="2091.419">I don't think that's really the answer</span> <span data-start="2091.419" data-end="2094.24">your question though um there are a</span> <span data-start="2094.24" data-end="2096.49">variety of ways you can drop in you can</span> <span data-start="2096.49" data-end="2099.82">drop in any NPM module so in your um oh</span> <span data-start="2099.82" data-end="2101.89">so now you can all go play with this and</span> <span data-start="2101.89" data-end="2106.79">be brutal</span> <span data-start="2106.8" data-end="2111.55">okay that's live okay oh but we need an</span> <span data-start="2111.55" data-end="2112.99">API key okay you can't be brutal yet</span> <span data-start="2112.99" data-end="2116.67">anyway okay so in your server code um</span> <span data-start="2116.67" data-end="2120.31">you can do something like like what's</span> <span data-start="2120.31" data-end="2127.55">your favorite NPM module mr. coffee</span> <span data-start="2127.56" data-end="2130.21">um you can you can you can drop in any</span> <span data-start="2130.21" data-end="2132.49">npm module you want um</span> <span data-start="2132.49" data-end="2134.77">you can package any code that you want</span> <span data-start="2134.77" data-end="2136.39">as a meteor package there's not very</span> <span data-start="2136.39" data-end="2137.89">much to that you just need to make a</span> <span data-start="2137.89" data-end="2142.33">single manifest file there is also the</span> <span data-start="2142.33" data-end="2144.13">biggest problem that people have I think</span> <span data-start="2144.13" data-end="2147.1">is that meteor code all runs in fibers</span> <span data-start="2147.1" data-end="2150.43">and a lot of pure node code does not so</span> <span data-start="2150.43" data-end="2152.23">we provide some wrapper utilities too</span> <span data-start="2152.23" data-end="2154.09">for example if you call a third party a</span> <span data-start="2154.09" data-end="2156.91">third party um API and you pass it a</span> <span data-start="2156.91" data-end="2159.07">callback we give you a helper that wraps</span> <span data-start="2159.07" data-end="2161.08">your callback in a fiber for you so you</span> <span data-start="2161.08" data-end="2162.4">don't really have to think about fibers</span> <span data-start="2162.4" data-end="2165.73">all that much okay and people are</span> <span data-start="2165.73" data-end="2167.65">wondering if he could actually vote on</span> <span data-start="2167.65" data-end="2170.29">that list I hear just someone betting</span> <span data-start="2170.29" data-end="2175.84">ten bucks on Leia okay okay let me put</span> <span data-start="2175.84" data-end="2183.82">in people are gonna be very people's</span> <span data-start="2183.82" data-end="2185.43">feelings they're gonna get very hurt</span> <span data-start="2185.43" data-end="2194.07">it's not my fault</span> <span data-start="2194.08" data-end="2198.99">all right it's all yours</span> <span data-start="2198.99" data-end="2202.84">again that's talk judge dot meteor danke</span> <span data-start="2202.84" data-end="2206.02">oh it's not all yours okay I will I will</span> <span data-start="2206.02" data-end="2208.09">set it up and I have to change them</span> <span data-start="2208.09" data-end="2210.06">because I set it up for localhost oh I</span> <span data-start="2210.06" data-end="2212.47">like put in the chat or something</span> <span data-start="2212.47" data-end="2214.57">boy if anyone has any more questions</span> </p>
<p><span data-start="2214.57" data-end="2216.43">Emily's gonna be going around it's Iran</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
