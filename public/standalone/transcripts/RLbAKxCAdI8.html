<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>RLbAKxCAdI8</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/RLbAKxCAdI8?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="8.21" data-end="13.59">nobody casco and I just fronting web</span> <span data-start="13.59" data-end="17.13">developer from Belgium and about a year</span> <span data-start="17.13" data-end="19.58">ago by make this website called Jasper</span> <span data-start="19.58" data-end="22.82">much shorter time I heard used it before</span> <span data-start="22.82" data-end="30.09">Ken's death at home again who's Jasper</span> <span data-start="30.09" data-end="31.83">to create valid performance test cases</span> <span data-start="31.83" data-end="36.149">and focuses on other parts so just to</span> <span data-start="36.149" data-end="39.719">write rehydrate Jesper black market</span> <span data-start="39.719" data-end="43.43">which is my spaghetti code with PHP</span> <span data-start="43.43" data-end="55.68">server okay everybody the day that just</span> <span data-start="55.68" data-end="58.199">were first watched I also saw at the</span> </p>
<p><span data-start="58.199" data-end="62.01">National GS projects for stocks you need</span> <span data-start="62.01" data-end="64.189">a JavaScript benchmark a library and</span> <span data-start="64.189" data-end="67.11">originally I just took out with night</span> <span data-start="67.11" data-end="68.9">working on wearable but yes it was</span> <span data-start="68.9" data-end="72.21">priority word I threw out everything</span> <span data-start="72.21" data-end="74.49">else at identities and I add my own</span> <span data-start="74.49" data-end="76.799">stuff to it and that's what I mean</span> <span data-start="76.799" data-end="79.68">Matchbox yes so it was really just for</span> <span data-start="79.68" data-end="81.78">specific and it was not much of a chair</span> <span data-start="81.78" data-end="85.5">of the book was hashmark library the</span> <span data-start="85.5" data-end="87.479">other open source is hoping that if you</span> <span data-start="87.479" data-end="92.04">see a hand over time and luckily someone</span> <span data-start="92.04" data-end="94.259">stepped up performance later which is</span> <span data-start="94.259" data-end="97.259">calculated Elton and he made a much more</span> <span data-start="97.259" data-end="100.29">awesome alum bug fixes he had more</span> <span data-start="100.29" data-end="102.75">features and he made a generic lie</span> <span data-start="102.75" data-end="104.49">buried at work across different</span> <span data-start="104.49" data-end="109.45">environments and the best thing about</span> <span data-start="109.45" data-end="112.27">that crazy process for you can get</span> <span data-start="112.27" data-end="114.52">support from Brussels and also screw</span> <span data-start="114.52" data-end="126.13">this guy so we have the vision we have</span> <span data-start="126.13" data-end="127.899">benchmarked ES and then the final</span> <span data-start="127.899" data-end="130">ingredients for jasper is a browser</span> <span data-start="130" data-end="132.43">scope which is the project that we're</span> <span data-start="132.43" data-end="134.2">using to store the results based on your</span> <span data-start="134.2" data-end="136.269">browser so after you run a test we</span> <span data-start="136.269" data-end="139.18">gather those results and we store them</span> <span data-start="139.18" data-end="141.04">so I can show you a nice little table or</span> <span data-start="141.04" data-end="142.72">a chart which contains all the</span> <span data-start="142.72" data-end="144.88">information of the tests that have him</span> <span data-start="144.88" data-end="147.22">run by other users and the browser scope</span> <span data-start="147.22" data-end="149.769">guys actually had to Twitter API for us</span> <span data-start="149.769" data-end="151.9">so that we would be able to</span> <span data-start="151.9" data-end="154.45">automatically create new tests with them</span> <span data-start="154.45" data-end="156.16">for every new test case that's created</span> <span data-start="156.16" data-end="158.76">on GS perv so thank you browsers cope</span> <span data-start="158.76" data-end="161.92">now here's some quick statistics they're</span> <span data-start="161.92" data-end="163.78">not all that interesting but the main</span> <span data-start="163.78" data-end="166.12">thing to remember here is that ever</span> <span data-start="166.12" data-end="167.95">since jasper first launched there are</span> <span data-start="167.95" data-end="170.98">about well almost 57 new test cases</span> <span data-start="170.98" data-end="174.4">added every day and I mean I think</span> <span data-start="174.4" data-end="176.65">that's a lot of test cases and that's</span> <span data-start="176.65" data-end="178.66">all very good news but there is a</span> <span data-start="178.66" data-end="181.72">problem with that the problem is that</span> <span data-start="181.72" data-end="183.76">about sixty-eight percent of Allah</span> </p>
<p><span data-start="183.76" data-end="185.799">Jasper test cases is broken according to</span> <span data-start="185.799" data-end="188.56">Jean Jacques Rousseau and well it's true</span> <span data-start="188.56" data-end="190.66">mistakes are very easy to make and it</span> <span data-start="190.66" data-end="193.269">kind of sucks because Jasper allows you</span> <span data-start="193.269" data-end="195.579">to easily create test cases but you know</span> <span data-start="195.579" data-end="197.59">even the tiniest little mistake that you</span> <span data-start="197.59" data-end="199.92">make or the tiniest a typo in your code</span> <span data-start="199.92" data-end="202.54">will just render the test invalid and</span> <span data-start="202.54" data-end="205.48">results would be meaningless and was it</span> <span data-start="205.48" data-end="207.31">not william shakespeare who as written</span> <span data-start="207.31" data-end="209.23">it would be unwise to take all jesper if</span> <span data-start="209.23" data-end="212.18">results for granted</span> <span data-start="212.19" data-end="214.78">he was right this would be very nice if</span> <span data-start="214.78" data-end="217.33">we would be able to just browse Jasper</span> <span data-start="217.33" data-end="220.51">and you know look at the results and</span> <span data-start="220.51" data-end="221.74">make a decision based on that but</span> <span data-start="221.74" data-end="223.21">unfortunately it's not that simple</span> <span data-start="223.21" data-end="225.04">because there are too many mistakes that</span> <span data-start="225.04" data-end="227.8">are made and I've written about</span> <span data-start="227.8" data-end="230.17">benchmarking pitfalls before together</span> <span data-start="230.17" data-end="232.48">with John David Dalton again if you're</span> <span data-start="232.48" data-end="234.01">interested you can just read the article</span> <span data-start="234.01" data-end="235.63">build proof JavaScript benchmarks the</span> <span data-start="235.63" data-end="238.06">link is at the bottom but the main</span> <span data-start="238.06" data-end="240.79">topics there are that there are a lot of</span> <span data-start="240.79" data-end="242.23">inaccurate millisecond timers in</span> <span data-start="242.23" data-end="244.36">different operating systems and browsers</span> <span data-start="244.36" data-end="246.28">and of course if your bench marking code</span> <span data-start="246.28" data-end="247.989">in JavaScript you will need to work</span> <span data-start="247.989" data-end="249.82">around that to still get an accurate</span> <span data-start="249.82" data-end="252.91">result I probably don't need to tell you</span> <span data-start="252.91" data-end="255.07">that browsers have books so if those</span> <span data-start="255.07" data-end="256.419">books affect the way your benchmark</span> <span data-start="256.419" data-end="257.829">codes you will need to work around those</span> <span data-start="257.829" data-end="261.16">bugs as well and maybe one of the</span> <span data-start="261.16" data-end="262.81">biggest problems with benchmarking is</span> <span data-start="262.81" data-end="265.08">that you will need to have statistically</span> <span data-start="265.08" data-end="267.91">significant results if you don't do</span> <span data-start="267.91" data-end="270.12">statistical analysis on your results</span> <span data-start="270.12" data-end="272.77">they're not completely meaningless but</span> <span data-start="272.77" data-end="275.41">you know they're not as it should be and</span> <span data-start="275.41" data-end="279.19">this really sounds self-evident but if</span> <span data-start="279.19" data-end="280.99">you want to run a test and you later we</span> <span data-start="280.99" data-end="282.52">run the same tests on the same browser</span> <span data-start="282.52" data-end="284.02">in the same device with the same</span> <span data-start="284.02" data-end="286.06">settings the same everything you're</span> <span data-start="286.06" data-end="287.44">going to want to get the same results</span> <span data-start="287.44" data-end="290.83">right and it makes sense but even the</span> <span data-start="290.83" data-end="292.6">bigger browser benchmarks like sunspider</span> <span data-start="292.6" data-end="294.88">and Kraken they still don't get this</span> <span data-start="294.88" data-end="296.95">quite right so if you run the same tests</span> <span data-start="296.95" data-end="299.77">twice in same browser sometimes will</span> <span data-start="299.77" data-end="301.36">tell you that your browser is faster or</span> <span data-start="301.36" data-end="305.32">slower than itself so no results they're</span> <span data-start="305.32" data-end="307.18">not really as meaningful as they should</span> <span data-start="307.18" data-end="310.63">be another thing to consider is that</span> <span data-start="310.63" data-end="312.37">there are browser plugins and add-ons</span> <span data-start="312.37" data-end="314.68">that may influence the results for</span> <span data-start="314.68" data-end="316.99">example Firebug in Firefox is known to</span> <span data-start="316.99" data-end="319.15">disable the jets and Firefox so all</span> </p>
<p><span data-start="319.15" data-end="321.19">JavaScript that you'll overrun will run</span> <span data-start="321.19" data-end="324.46">much slower and on GS perfect right to</span> <span data-start="324.46" data-end="327.04">one you if Firebug is enabled to try to</span> <span data-start="327.04" data-end="329.41">detect it and show a warning but it's</span> <span data-start="329.41" data-end="332.22">still up to you to disable Firebug and</span> <span data-start="332.22" data-end="335.59">rerun the tests because for example it</span> <span data-start="335.59" data-end="338.62">wouldn't be fair sure to compare the</span> <span data-start="338.62" data-end="340.75">in chrome and you would compare the</span> <span data-start="340.75" data-end="342.4">number of operations per second that you</span> <span data-start="342.4" data-end="344.65">would get from Jasper with the number of</span> <span data-start="344.65" data-end="346.12">operations per second that you would get</span> <span data-start="346.12" data-end="348.28">in Firefox with Firebug enable that</span> <span data-start="348.28" data-end="349.75">wouldn't be a fair comparison at all of</span> <span data-start="349.75" data-end="351.25">course Firefox is going to be slower</span> <span data-start="351.25" data-end="355.449">that way another thing to consider is</span> <span data-start="355.449" data-end="357.16">that you should always test in all the</span> <span data-start="357.16" data-end="358.66">browsers that you're planning to support</span> <span data-start="358.66" data-end="360.31">there's no point in creating a test case</span> <span data-start="360.31" data-end="362.47">and just throwing a test and say Safari</span> <span data-start="362.47" data-end="364.15">if you're going to support all browsers</span> <span data-start="364.15" data-end="366.82">all the way back to ie6 everybody is</span> <span data-start="366.82" data-end="368.35">different every JavaScript engine is</span> <span data-start="368.35" data-end="370.09">different so it's very important to test</span> <span data-start="370.09" data-end="371.62">in every engine that you're planning to</span> <span data-start="371.62" data-end="375.85">support and well maybe the biggest</span> <span data-start="375.85" data-end="377.74">problem of all is that a lot of tests</span> <span data-start="377.74" data-end="380.05">are incorrect or make assumptions that</span> <span data-start="380.05" data-end="383.05">aren't quite right now when we look at</span> <span data-start="383.05" data-end="384.88">the six bullet points we can divide them</span> <span data-start="384.88" data-end="387.43">into groups and the first one or three</span> <span data-start="387.43" data-end="389.35">things that benchmark yes and this</span> </p>
<p><span data-start="389.35" data-end="392.199">Jasper takes care of for you so good</span> <span data-start="392.199" data-end="393.31">news is you don't have to worry about</span> <span data-start="393.31" data-end="396.16">these three things again the bad news is</span> <span data-start="396.16" data-end="397.84">that you will have to worry about these</span> <span data-start="397.84" data-end="400.09">three things these are things that</span> <span data-start="400.09" data-end="402.34">Jasper cannot enforce on you so you will</span> <span data-start="402.34" data-end="404.74">have to take care of it yourself in the</span> <span data-start="404.74" data-end="406.18">end it's you who has to write the test</span> <span data-start="406.18" data-end="409.03">and run them correctly so please do that</span> <span data-start="409.03" data-end="413.53">correctly now let's see what's the most</span> <span data-start="413.53" data-end="415.27">common problem with tests and their own</span> <span data-start="415.27" data-end="419.02">fair comparisons incorrect tests suck so</span> <span data-start="419.02" data-end="421.36">let's see what we can do about them here</span> <span data-start="421.36" data-end="423.58">are a couple of quick hit hints and</span> <span data-start="423.58" data-end="424.93">quick tips that you can use to make</span> <span data-start="424.93" data-end="428.62">better test cases in Jasper so the</span> <span data-start="428.62" data-end="430.3">function declarations that you will use</span> <span data-start="430.3" data-end="431.889">in your test they should go either in</span> <span data-start="431.889" data-end="433.3">the preparation code or in the setup</span> <span data-start="433.3" data-end="436.419">code so on Jasper if that looks kind of</span> <span data-start="436.419" data-end="438.37">like this you have this big text area</span> <span data-start="438.37" data-end="439.479">where you can enter all the JavaScript</span> <span data-start="439.479" data-end="442.78">that will be executed first time in the</span> <span data-start="442.78" data-end="445.21">global scope so if you have any</span> <span data-start="445.21" data-end="446.919">functions that you want to declare just</span> <span data-start="446.919" data-end="448.51">do it there don't do it in a test body</span> <span data-start="448.51" data-end="451.72">itself only the bare minimum should go</span> <span data-start="451.72" data-end="455.199">inside of each test body so ideally you</span> <span data-start="455.199" data-end="457.599">would get something like this see it's</span> <span data-start="457.599" data-end="461.289">really concise I'll see I've seen people</span> <span data-start="461.289" data-end="463.75">include the entire jQuery source in the</span> <span data-start="463.75" data-end="465.86">test body itself and</span> <span data-start="465.86" data-end="470.93">that's not how Jasper perks yeah well a</span> <span data-start="470.93" data-end="472.46">good example of the test case is this</span> <span data-start="472.46" data-end="476.18">one this is the preparation code that we</span> <span data-start="476.18" data-end="477.86">saw earlier this is how what it will</span> <span data-start="477.86" data-end="479.419">look like when the test case is finished</span> <span data-start="479.419" data-end="481.55">so you get a syntax highlighted view of</span> <span data-start="481.55" data-end="484.219">the code you got a nice little table</span> <span data-start="484.219" data-end="486.08">with all the different tests in them and</span> <span data-start="486.08" data-end="488.24">then there's a button that allows you to</span> <span data-start="488.24" data-end="490.219">run the tests and results will look</span> <span data-start="490.219" data-end="491.659">something like this depending on the</span> <span data-start="491.659" data-end="494.36">browser of course I won't just prefer</span> <span data-start="494.36" data-end="496.46">sure which one is fastest and which one</span> <span data-start="496.46" data-end="500.689">is slowest here's another common problem</span> <span data-start="500.689" data-end="503.24">i made this test case regarding</span> </p>
<p><span data-start="503.24" data-end="505.219">Fibonacci numbers so I found a couple of</span> <span data-start="505.219" data-end="509.389">functions that allow that we you pass an</span> <span data-start="509.389" data-end="511.52">argument which is an index and then it</span> <span data-start="511.52" data-end="513.019">returns you the Fibonacci number with</span> <span data-start="513.019" data-end="516.289">that index from the sequence and you</span> <span data-start="516.289" data-end="518.06">know I run some tests and turned out</span> <span data-start="518.06" data-end="519.409">that the first solution that I found</span> <span data-start="519.409" data-end="521.81">what's much much much faster as you can</span> <span data-start="521.81" data-end="523.37">see the second option is about</span> <span data-start="523.37" data-end="525.529">ninety-eight percent slower and that's</span> <span data-start="525.529" data-end="529.279">kind of a big difference so yeah first</span> <span data-start="529.279" data-end="530.93">reaction would be yeah okay let's use</span> <span data-start="530.93" data-end="533.93">first one it's much faster but long</span> <span data-start="533.93" data-end="535.61">story short you got to make sure the</span> <span data-start="535.61" data-end="536.93">methods you're comparing actually do</span> <span data-start="536.93" data-end="538.61">exactly the same thing if they don't</span> <span data-start="538.61" data-end="540.64">it's not really fair comparison and</span> <span data-start="540.64" data-end="542.93">depending on your use case that may or</span> <span data-start="542.93" data-end="545.6">may not be a problem so if there is a</span> <span data-start="545.6" data-end="546.769">difference in the different function</span> <span data-start="546.769" data-end="548.6">that you're testing please be polite and</span> <span data-start="548.6" data-end="550.22">mention it in the description of your</span> <span data-start="550.22" data-end="552.26">test case because other people will look</span> <span data-start="552.26" data-end="554.769">at it and it's best not to confuse them</span> <span data-start="554.769" data-end="558.35">so in this case I investigated a little</span> <span data-start="558.35" data-end="559.91">further and I noticed that the first</span> <span data-start="559.91" data-end="563.6">function only handles indexes up to 1474</span> <span data-start="563.6" data-end="566.089">while the second function allows a nexus</span> <span data-start="566.089" data-end="569.959">up to 1476 now that may not be much of a</span> <span data-start="569.959" data-end="571.31">difference but depending on your use</span> <span data-start="571.31" data-end="573.92">case it may be so it's important to be</span> <span data-start="573.92" data-end="576.23">aware of it and also a later found out</span> <span data-start="576.23" data-end="577.76">that the first function you know the</span> <span data-start="577.76" data-end="580.76">super fast one starts to earn inaccurate</span> <span data-start="580.76" data-end="584.14">results starting at the index 76 so</span> <span data-start="584.14" data-end="586.339">again depending on your use case that</span> <span data-start="586.339" data-end="587.66">may not be a problem if you're just</span> <span data-start="587.66" data-end="590.6">getting an approximation but maybe it is</span> <span data-start="590.6" data-end="591.8">and then you still have to use the</span> <span data-start="591.8" data-end="593.209">second function even though it's lower</span> <span data-start="593.209" data-end="597.529">so that's something to consider another</span> <span data-start="597.529" data-end="599.35">thing is you have to make sure that</span> <span data-start="599.35" data-end="603.37">really testing or to intended to test in</span> <span data-start="603.37" data-end="605.05">a good example of that well a bad</span> <span data-start="605.05" data-end="606.91">example of that is this test case the</span> <span data-start="606.91" data-end="609.91">title is jQuery ID versus native get</span> <span data-start="609.91" data-end="612.25">element by ID so you would expect the</span> <span data-start="612.25" data-end="615.04">best case where you would get an element</span> <span data-start="615.04" data-end="617.44">based on its ID using jQuery versus</span> <span data-start="617.44" data-end="620.59">using a documented get element by ID but</span> <span data-start="620.59" data-end="621.97">when I looked at the test it looked</span> <span data-start="621.97" data-end="628.93">something like this as you can see what</span> <span data-start="628.93" data-end="630.7">this is really testing is how long it</span> <span data-start="630.7" data-end="632.68">takes to bind an event handler either</span> <span data-start="632.68" data-end="635.89">using the dumb 0 window download or by</span> <span data-start="635.89" data-end="638.41">using jQuery and calling the load method</span> <span data-start="638.41" data-end="640.48">which by the way I don't think load</span> <span data-start="640.48" data-end="642.28">works the way the other things it does</span> <span data-start="642.28" data-end="644.23">because load is used for IX stuff in</span> <span data-start="644.23" data-end="649.15">jQuery so really whatever is inside of</span> <span data-start="649.15" data-end="651.01">the event handler here it doesn't really</span> <span data-start="651.01" data-end="653.16">matter because it won't ever get called</span> <span data-start="653.16" data-end="656.68">during the tests so even if you know</span> <span data-start="656.68" data-end="658.84">even if the second test would have a</span> <span data-start="658.84" data-end="661.72">super slow event handler it won't matter</span> <span data-start="661.72" data-end="663.64">in this case and you can tell because</span> <span data-start="663.64" data-end="666.04">good results are the same the last</span> <span data-start="666.04" data-end="667.33">result of course is a little slower</span> <span data-start="667.33" data-end="669.67">because you're making a call to jQuery</span> <span data-start="669.67" data-end="674.28">there but this test is kind of rubbish</span> <span data-start="674.28" data-end="676.51">another thing to consider is that when</span> <span data-start="676.51" data-end="679.12">you're using variables across tests you</span> <span data-start="679.12" data-end="680.8">need to make sure that you reset them</span> <span data-start="680.8" data-end="683.77">whenever it's necessary for example this</span> <span data-start="683.77" data-end="687.85">test case here they're trying to compare</span> <span data-start="687.85" data-end="691.15">if it's faster to do a plus equals B or</span> <span data-start="691.15" data-end="693.61">if it's faster to do a equals a plus B</span> <span data-start="693.61" data-end="694.96">which both do the same thing and</span> <span data-start="694.96" data-end="697.09">honestly I would expect both to be</span> <span data-start="697.09" data-end="699.85">equally fast and it's a very micro</span> <span data-start="699.85" data-end="703.24">optimization anyway the problem with</span> <span data-start="703.24" data-end="704.8">this setup is that in the preparation</span> <span data-start="704.8" data-end="708.52">code a is set to 2 and then the test</span> <span data-start="708.52" data-end="711.4">starts running so by the time test one</span> <span data-start="711.4" data-end="714.37">starts a equals 2 and it's a commented</span> <span data-start="714.37" data-end="717.22">all the time but by the time test one is</span> <span data-start="717.22" data-end="719.17">finished and has two starts running a</span> <span data-start="719.17" data-end="721.27">will be a much higher number it will</span> <span data-start="721.27" data-end="723.13">have a much higher value so that may or</span> <span data-start="723.13" data-end="725.47">may not make a difference in results and</span> <span data-start="725.47" data-end="728.529">in fact in Opera</span> <span data-start="728.529" data-end="730.66">discrete from opera and there it does</span> <span data-start="730.66" data-end="733.81">really make a big difference as you can</span> <span data-start="733.81" data-end="735.939">tell the second method seems to be</span> <span data-start="735.939" data-end="737.98">thirteen percent slower but it's not</span> <span data-start="737.98" data-end="739.839">actually slower just because the number</span> <span data-start="739.839" data-end="742.06">a has much higher starting value for the</span> <span data-start="742.06" data-end="743.68">second tests so it's not a fair</span> <span data-start="743.68" data-end="746.709">comparison the fun thing is that if we</span> <span data-start="746.709" data-end="749.35">rerun the same test afterwards so after</span> <span data-start="749.35" data-end="751.749">we get super high values for a we run</span> <span data-start="751.749" data-end="753.91">the test again we get a completely</span> <span data-start="753.91" data-end="755.68">different results so now we see that</span> <span data-start="755.68" data-end="757.87">both tests turn out to be equally fast</span> <span data-start="757.87" data-end="760.329">so whenever that happens on the Esper</span> <span data-start="760.329" data-end="761.649">there's something wrong with your test</span> <span data-start="761.649" data-end="763.3">case we're on the same test twice and</span> <span data-start="763.3" data-end="765.16">get different results something is wrong</span> <span data-start="765.16" data-end="769.72">that's a red flag another good idea is</span> <span data-start="769.72" data-end="771.999">to never introduce randomness in your</span> <span data-start="771.999" data-end="776.17">tests I saw this test case here and as</span> <span data-start="776.17" data-end="779.23">you can see inside the test body the</span> <span data-start="779.23" data-end="781.779">author used math dot random to generate</span> <span data-start="781.779" data-end="783.879">random numbers then round them down and</span> <span data-start="783.879" data-end="786.04">then do some other stuff with them the</span> <span data-start="786.04" data-end="788.199">problem with this is that there's always</span> <span data-start="788.199" data-end="790.329">the chance that you get numbers that are</span> <span data-start="790.329" data-end="792.55">slightly faster to ramp down in one of</span> <span data-start="792.55" data-end="795.37">the tests so you'll never know if</span> <span data-start="795.37" data-end="797.199">actually the function that you're</span> <span data-start="797.199" data-end="799.18">testing is faster or if it's something</span> <span data-start="799.18" data-end="801.699">else that's influencing the results so</span> <span data-start="801.699" data-end="803.05">if you want to test with different</span> <span data-start="803.05" data-end="804.61">numbers that's great but just add</span> <span data-start="804.61" data-end="806.589">multiple tests to the same test case and</span> <span data-start="806.589" data-end="810.97">don't use random numbers another pro tip</span> <span data-start="810.97" data-end="813.209">is never just asynchronous stuff</span> <span data-start="813.209" data-end="816.73">synchronously it sounds logical but a</span> <span data-start="816.73" data-end="819.399">lot of people make the mistake for</span> <span data-start="819.399" data-end="826.12">example at this test case</span> <span data-start="826.13" data-end="828.86">as you can see we're testing through</span> <span data-start="828.86" data-end="830.9">different functions in a set amount in</span> <span data-start="830.9" data-end="832.67">the same set them out and they turn out</span> <span data-start="832.67" data-end="834.44">to be both as fast even though the first</span> <span data-start="834.44" data-end="837.32">so the test one function it's supposed</span> <span data-start="837.32" data-end="839.78">to be fast while this test tube function</span> <span data-start="839.78" data-end="841.97">is supposed to be super slow and of</span> <span data-start="841.97" data-end="843.95">course they're equally fast for Jasper</span> <span data-start="843.95" data-end="845.78">because you're testing something is</span> <span data-start="845.78" data-end="849.02">synchronously that's testing something</span> <span data-start="849.02" data-end="850.37">synchronously that's supposed to be</span> <span data-start="850.37" data-end="853.34">asynchronous the set timeout it will</span> <span data-start="853.34" data-end="856.19">yeah it basically is no operation test</span> <span data-start="856.19" data-end="859.34">initially the functions will be called</span> <span data-start="859.34" data-end="860.96">eventually but they will be called</span> <span data-start="860.96" data-end="862.58">outside of the test loop so it won't be</span> <span data-start="862.58" data-end="865.82">times so in this case you get it seems</span> <span data-start="865.82" data-end="867.8">like their boat as fast but it's not</span> <span data-start="867.8" data-end="869.99">really the case if you want to do a</span> <span data-start="869.99" data-end="872.3">synchronous test here's a good example</span> <span data-start="872.3" data-end="879.71">of doing that right so jess perf has</span> <span data-start="879.71" data-end="881.6">this checkbox for every test that you</span> <span data-start="881.6" data-end="884.69">add this isn't a synchronous test well</span> <span data-start="884.69" data-end="886.82">if it is just hit the check box and then</span> <span data-start="886.82" data-end="889.16">all you need to do is you get a deferred</span> <span data-start="889.16" data-end="891.71">object for free and you just need to</span> <span data-start="891.71" data-end="893.93">call resolve on that object and then the</span> <span data-start="893.93" data-end="896.66">test will finish so for example in the</span> <span data-start="896.66" data-end="899.93">html5 spec the minimum set timeout value</span> <span data-start="899.93" data-end="903.02">allowed is four and that wasn't spective</span> <span data-start="903.02" data-end="904.88">or so I decided to figure out which</span> <span data-start="904.88" data-end="908.12">browsers already support this feature so</span> <span data-start="908.12" data-end="910.01">the idea is that if you would use the</span> <span data-start="910.01" data-end="913.04">zero as timeout it would still use for</span> <span data-start="913.04" data-end="916.94">instead so i created this test case see</span> <span data-start="916.94" data-end="918.32">the only thing that's different is</span> <span data-start="918.32" data-end="920.39">timeout value that's always increasing</span> <span data-start="920.39" data-end="922.97">by the way that last value is really</span> <span data-start="922.97" data-end="924.44">weird with some browsers have an issue</span> <span data-start="924.44" data-end="927.02">where if you use this value or a higher</span> <span data-start="927.02" data-end="929.6">value it will still use zero or four</span> <span data-start="929.6" data-end="932.69">instead it's really freaky so I added</span> <span data-start="932.69" data-end="934.76">that to the test this is a good example</span> <span data-start="934.76" data-end="940.47">of an a synchronous test</span> <span data-start="940.48" data-end="943.22">it also really helps if you learn the</span> <span data-start="943.22" data-end="944.87">difference between preparation code and</span> <span data-start="944.87" data-end="948.74">the setup and the teardown sections so</span> </p>
<p><span data-start="948.74" data-end="950.24">Jasper looks something like this right</span> <span data-start="950.24" data-end="952.16">these are the most basic fields where</span> <span data-start="952.16" data-end="954.379">you can enter your alter details and the</span> <span data-start="954.379" data-end="957.47">title of the test case but here's the</span> <span data-start="957.47" data-end="959.12">interesting part so you get a</span> <span data-start="959.12" data-end="961.759">preparation code for HTML I like to call</span> <span data-start="961.759" data-end="963.939">this the preparation h fields and</span> <span data-start="963.939" data-end="966.68">there's also feels for JavaScript and</span> <span data-start="966.68" data-end="968.899">all you need to know is that this code</span> <span data-start="968.899" data-end="970.42">will be inserted into an HTML document</span> <span data-start="970.42" data-end="972.8">so the JavaScript that you enter there</span> <span data-start="972.8" data-end="974.93">will be evaluated in the global scope so</span> <span data-start="974.93" data-end="976.97">if you were to create a new variable in</span> <span data-start="976.97" data-end="979.279">the preparation code for JavaScript it</span> <span data-start="979.279" data-end="983.06">would become a global variable the</span> <span data-start="983.06" data-end="984.8">difference with setup and the teardown</span> <span data-start="984.8" data-end="987.529">test is that they run same scope as the</span> <span data-start="987.529" data-end="990.529">actual tests so whatever code you enter</span> <span data-start="990.529" data-end="993.22">here it still won't be x same as the</span> <span data-start="993.22" data-end="995.48">same as the preparation coat it only</span> <span data-start="995.48" data-end="998.439">times but they do run in the same scope</span> <span data-start="998.439" data-end="1000.759">which allows you to do all kinds of</span> <span data-start="1000.759" data-end="1004.029">crazy and cool stuff for example there's</span> <span data-start="1004.029" data-end="1005.889">this test case that multi made a couple</span> <span data-start="1005.889" data-end="1010.449">of weeks ago and well the setups like</span> <span data-start="1010.449" data-end="1012.73">this he as you can see he clear eighths</span> <span data-start="1012.73" data-end="1016.42">some global variables here and for</span> <span data-start="1016.42" data-end="1018.85">example the I variable is using that in</span> <span data-start="1018.85" data-end="1020.889">the tests in a used them in every test</span> <span data-start="1020.889" data-end="1023.05">so that's not a problem because the same</span> <span data-start="1023.05" data-end="1025.72">scope lookup is done in every test but</span> <span data-start="1025.72" data-end="1027.52">then for example if you look at the boo</span> <span data-start="1027.52" data-end="1030.549">variable he's only using that one in the</span> <span data-start="1030.549" data-end="1034.449">first two tests so those first two tests</span> <span data-start="1034.449" data-end="1036.13">they have the performance penalty</span> <span data-start="1036.13" data-end="1038.11">penalty of a scope look up while the</span> <span data-start="1038.11" data-end="1040.99">other ones don't so it would be slightly</span> <span data-start="1040.99" data-end="1042.699">better and slightly more fair if you</span> <span data-start="1042.699" data-end="1044.559">would were to change the test and use</span> <span data-start="1044.559" data-end="1048.25">setup code instead so all let me change</span> <span data-start="1048.25" data-end="1050.409">this we move to variable declarations to</span> <span data-start="1050.409" data-end="1053.409">the setup code and this way the variable</span> <span data-start="1053.409" data-end="1055.5">those are created in the same scope as</span> <span data-start="1055.5" data-end="1058.929">the tests themselves so no scope lookups</span> <span data-start="1058.929" data-end="1060.64">and no performance penalty for the first</span> <span data-start="1060.64" data-end="1062.95">two tests and I think this is a slightly</span> <span data-start="1062.95" data-end="1065.59">more fair comparison again this may not</span> <span data-start="1065.59" data-end="1066.97">make much of a difference in every</span> <span data-start="1066.97" data-end="1068.86">browser with in some browsers it does</span> <span data-start="1068.86" data-end="1070.69">and in some situations it does so it's</span> <span data-start="1070.69" data-end="1071.6">better to</span> <span data-start="1071.6" data-end="1075.919">do it this way another example of using</span> <span data-start="1075.919" data-end="1078.65">these advanced features is the dumb</span> <span data-start="1078.65" data-end="1080.96">cleanup for example when you're testing</span> <span data-start="1080.96" data-end="1083.84">how long it takes to insert a new</span> <span data-start="1083.84" data-end="1086.299">element into the Dom you could do it</span> <span data-start="1086.299" data-end="1088.97">like this without using setup you could</span> <span data-start="1088.97" data-end="1091.25">just use a preparation code could create</span> <span data-start="1091.25" data-end="1093.5">a new container element so a reference</span> <span data-start="1093.5" data-end="1095.39">to development and a variable called al</span> <span data-start="1095.39" data-end="1098.299">and then we just use that variable in</span> <span data-start="1098.299" data-end="1100.94">every test the problem with this setup</span> <span data-start="1100.94" data-end="1102.89">is that test code is repeated</span> <span data-start="1102.89" data-end="1106.46">potentially millions of times so this</span> <span data-start="1106.46" data-end="1108.25">would add a lot of elements to the Dom</span> <span data-start="1108.25" data-end="1111.98">all right so the problem with this setup</span> <span data-start="1111.98" data-end="1113.63">is that the test code is repeated</span> <span data-start="1113.63" data-end="1115.25">potentially millions of times so this</span> <span data-start="1115.25" data-end="1116.659">would add a lot of elements to the DOM</span> <span data-start="1116.659" data-end="1119.75">and things might get slow the thing is</span> <span data-start="1119.75" data-end="1121.37">you're only trying to test how long it</span> <span data-start="1121.37" data-end="1123.289">takes to insert the new elements and not</span> <span data-start="1123.289" data-end="1126.26">and you know it may be faster if the dam</span> <span data-start="1126.26" data-end="1128.419">is already huge it may be slower if it</span> <span data-start="1128.419" data-end="1130.22">down is already huge if you're inserting</span> <span data-start="1130.22" data-end="1133.159">new elements then so ideally we would</span> <span data-start="1133.159" data-end="1134.78">reset the container element every would</span> <span data-start="1134.78" data-end="1137.659">clear it of all its children and we can</span> <span data-start="1137.659" data-end="1140.51">use the tip code for that so the setup</span> <span data-start="1140.51" data-end="1144.82">code will be run for each test batch so</span> <span data-start="1144.82" data-end="1147.169">right here we're just clear the inner</span> </p>
<p><span data-start="1147.169" data-end="1149.69">HTML which will effectively remove all</span> <span data-start="1149.69" data-end="1153.049">child elements however we can fill</span> <span data-start="1153.049" data-end="1154.49">optimize this test case a little bit</span> <span data-start="1154.49" data-end="1156.38">because we are only interested in how</span> <span data-start="1156.38" data-end="1158.33">long it takes to insert key element into</span> <span data-start="1158.33" data-end="1160.28">the DOM and right here we're still</span> <span data-start="1160.28" data-end="1162.049">creating the diff and the P element in</span> <span data-start="1162.049" data-end="1164.809">memory so that also gets timed and</span> <span data-start="1164.809" data-end="1166.13">that's also going to influence the</span> <span data-start="1166.13" data-end="1169.19">results so if you want we could simplify</span> <span data-start="1169.19" data-end="1173.12">this into something like this where we</span> <span data-start="1173.12" data-end="1175.82">basically we create the elements in set</span> <span data-start="1175.82" data-end="1177.98">up code as well and then the best</span> <span data-start="1177.98" data-end="1180.44">buddies themselves are as small as</span> <span data-start="1180.44" data-end="1182.87">possible and you're only really time how</span> <span data-start="1182.87" data-end="1184.58">long it takes to append the new elements</span> <span data-start="1184.58" data-end="1188.72">and as a bonus by doing it this way it</span> <span data-start="1188.72" data-end="1190.28">will always reuse the same elements</span> <span data-start="1190.28" data-end="1192.11">rather than creating new ones every time</span> <span data-start="1192.11" data-end="1194.659">so there's only ever going to be one</span> <span data-start="1194.659" data-end="1196.25">child element in the container element</span> <span data-start="1196.25" data-end="1200.07">this way so it's much better</span> <span data-start="1200.07" data-end="1203.26">another of pro tip is that benchmark</span> <span data-start="1203.26" data-end="1206.44">jess is used on Jasper and there are a</span> <span data-start="1206.44" data-end="1208.45">lot of advanced settings that you can</span> <span data-start="1208.45" data-end="1210.49">use that Jasper doesn't even have a user</span> <span data-start="1210.49" data-end="1212.8">interface for so if you can just go to</span> <span data-start="1212.8" data-end="1214.51">the documentation if you read through</span> <span data-start="1214.51" data-end="1216.19">the API there's a lot of cool stuff that</span> <span data-start="1216.19" data-end="1218.23">you can discover and tricks that you can</span> <span data-start="1218.23" data-end="1220.75">use on GS curve for example i created</span> <span data-start="1220.75" data-end="1223.54">this test case to test how long it takes</span> <span data-start="1223.54" data-end="1228.67">to remove a child element and so let's</span> <span data-start="1228.67" data-end="1230.2">see we want to test how slow it is to</span> <span data-start="1230.2" data-end="1232.27">remove an element from the dump I've</span> <span data-start="1232.27" data-end="1235.09">only added one test and all that's</span> <span data-start="1235.09" data-end="1236.89">happening there is an element gets</span> <span data-start="1236.89" data-end="1240.37">removed that's it the problem is we need</span> <span data-start="1240.37" data-end="1242.59">enough elements so we can remove them</span> <span data-start="1242.59" data-end="1244.09">because we don't know how many times it</span> <span data-start="1244.09" data-end="1245.98">tests will be repeated because J</span> <span data-start="1245.98" data-end="1247.45">benchmark Jess will automatically</span> <span data-start="1247.45" data-end="1249.61">calculate that for us now the thing is</span> <span data-start="1249.61" data-end="1253.09">we can actually get the test count by</span> <span data-start="1253.09" data-end="1256.66">using this in the setup function this</span> <span data-start="1256.66" data-end="1258.85">will refer to the current benchmark</span> <span data-start="1258.85" data-end="1260.74">instance and every benchmark instance</span> <span data-start="1260.74" data-end="1263.65">gets account property which refers to</span> <span data-start="1263.65" data-end="1265.21">the number of times the test will be</span> <span data-start="1265.21" data-end="1270.4">hydrated so this way we just if you just</span> <span data-start="1270.4" data-end="1273.25">look at a setup code here just adding as</span> <span data-start="1273.25" data-end="1275.53">many child elements that we need so</span> <span data-start="1275.53" data-end="1279.07">exactly the right amount so that's</span> <span data-start="1279.07" data-end="1282.52">thought it was pretty neat of course</span> <span data-start="1282.52" data-end="1284.5">there's some other stuff that may mess</span> <span data-start="1284.5" data-end="1286.27">with your results that we didn't cover</span> <span data-start="1286.27" data-end="1289.18">here unexpected browser features for</span> <span data-start="1289.18" data-end="1291.46">example opera suddenly decided to start</span> <span data-start="1291.46" data-end="1293.46">cashing the query selector all results</span> <span data-start="1293.46" data-end="1295.99">and of course if you're testing if</span> <span data-start="1295.99" data-end="1297.34">you're creating a benchmark for query</span> <span data-start="1297.34" data-end="1299.68">selector request select the row Oprah</span> <span data-start="1299.68" data-end="1302.68">has a huge advantage so ideally you</span> <span data-start="1302.68" data-end="1305.14">would have to work around it by using a</span> <span data-start="1305.14" data-end="1309.7">different selector every time another</span> <span data-start="1309.7" data-end="1312.1">the interesting is that code removal of</span> <span data-start="1312.1" data-end="1315.21">course that's a very hard to predict and</span> <span data-start="1315.21" data-end="1318.46">you know if there's if you're getting</span> <span data-start="1318.46" data-end="1321.07">weird results you know some that code</span> <span data-start="1321.07" data-end="1323.89">might be in there of course there is</span> <span data-start="1323.89" data-end="1327.13">much more but the idea is that if we all</span> <span data-start="1327.13" data-end="1328.75">help each other if we</span> <span data-start="1328.75" data-end="1330.34">test case that's incorrect in some way</span> <span data-start="1330.34" data-end="1332.98">just leave a comment or four kids and</span> <span data-start="1332.98" data-end="1335.53">improve it just so others can learn from</span> <span data-start="1335.53" data-end="1339.4">it as well that's it from are there any</span> <span data-start="1339.4" data-end="1349.69">questions</span> <span data-start="1349.7" data-end="1355.279">hmm well yeah well the question was am i</span> <span data-start="1355.279" data-end="1356.659">planning on adding new features through</span> </p>
<p><span data-start="1356.659" data-end="1359.11">GS curve the answer is that there's a</span> <span data-start="1359.11" data-end="1363.59">lot of things on my to-do list and one</span> <span data-start="1363.59" data-end="1370.429">of which is adding a search go to the</span> <span data-start="1370.429" data-end="1372.11">Browse page and you will get back all</span> <span data-start="1372.11" data-end="1376.19">this cases but I checked it last week</span> <span data-start="1376.19" data-end="1377.809">and it was about an HTML document of</span> <span data-start="1377.809" data-end="1380.6">about two and a half megabytes so it has</span> <span data-start="1380.6" data-end="1383.059">got my gosh there's a lot of test cases</span> <span data-start="1383.059" data-end="1384.59">on there so I really need to do</span> <span data-start="1384.59" data-end="1387.529">something about it and the quick fix was</span> <span data-start="1387.529" data-end="1389.899">to just limit the Browse page to 2050</span> <span data-start="1389.899" data-end="1392.389">latest tests so that's what happened now</span> <span data-start="1392.389" data-end="1394.13">but i'm planning to add a search</span> <span data-start="1394.13" data-end="1398.09">functionality to it soon I think there</span> <span data-start="1398.09" data-end="1400.25">are another couple of other things lined</span> <span data-start="1400.25" data-end="1402.83">up there but there's a github repo if</span> <span data-start="1402.83" data-end="1404.659">you check my user account matches</span> <span data-start="1404.659" data-end="1408.169">balance on github there's a repo for</span> </p>
<p><span data-start="1408.169" data-end="1410.299">Jasper com there's no code inside of it</span> <span data-start="1410.299" data-end="1413.09">yet I plan all open sourcing the PHP one</span> <span data-start="1413.09" data-end="1415.58">day but uh I'm a bit too ashamed of it</span> <span data-start="1415.58" data-end="1417.32">right now so need to clean it up a</span> <span data-start="1417.32" data-end="1420.11">little bit the repository has an issue</span> <span data-start="1420.11" data-end="1423.169">tracker and all my to-do items are being</span> <span data-start="1423.169" data-end="1424.429">tracked there so if you have any</span> <span data-start="1424.429" data-end="1426.44">suggestions you're free to just file a</span> <span data-start="1426.44" data-end="1430.09">new ticket and I'll see what I can do</span> <span data-start="1430.09" data-end="1441.47">any other questions</span> <span data-start="1441.48" data-end="1444.72">oh if you have questions you can always</span> <span data-start="1444.72" data-end="1448.35">fin either me or Jay Dalton or there is</span> <span data-start="1448.35" data-end="1450.15">also this twitter account of GS work</span> <span data-start="1450.15" data-end="1453.929">itself and its jsb RF because someone</span> <span data-start="1453.929" data-end="1456.21">will guy named joy / supply she has the</span> <span data-start="1456.21" data-end="1458.73">other account so if you have any</span> <span data-start="1458.73" data-end="1461.49">questions just other just mentioned JSP</span> </p>
<p><span data-start="1461.49" data-end="1464.61">RF in your tweets and we'll try to get</span> <span data-start="1464.61" data-end="1471.09">back to you as soon as possible any</span> <span data-start="1471.09" data-end="1475.62">other questions yeah okay thank you very</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
