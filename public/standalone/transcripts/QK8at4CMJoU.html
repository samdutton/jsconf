<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>QK8at4CMJoU</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/QK8at4CMJoU?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="37.89" data-end="40.99">hi I'm John David Dalton and today I'm</span> <span data-start="40.99" data-end="42.34">going to be talking about fearless</span> <span data-start="42.34" data-end="48.34">browser test automation so a little bit</span> <span data-start="48.34" data-end="52.63">of background I am a contributor to</span> <span data-start="52.63" data-end="57.13">lodash lodash is a before I begin how</span> <span data-start="57.13" data-end="61.36">many people use lodash alright are how</span> <span data-start="61.36" data-end="63.82">many people use underscore all right get</span> <span data-start="63.82" data-end="67.12">out get out it's ready yes no that's</span> <span data-start="67.12" data-end="69.4">okay you can stay I also help and</span> <span data-start="69.4" data-end="72.34">contribute to underscore too but today</span> </p>
<p><span data-start="72.34" data-end="73.81">I'm going to be talking about browser</span> <span data-start="73.81" data-end="76.36">test automation and what I did with</span> <span data-start="76.36" data-end="80.35">lodash to to tackle that when i created</span> <span data-start="80.35" data-end="82.06">lodash one of the things i wanted to do</span> <span data-start="82.06" data-end="84.1">today to separate myself from the</span> <span data-start="84.1" data-end="86.5">competition was to list the browser's I</span> <span data-start="86.5" data-end="89.38">test and that meant testing those</span> <span data-start="89.38" data-end="92.229">browsers and so when I first released</span> <span data-start="92.229" data-end="95.159">lodash I was very accommodating to</span> <span data-start="95.159" data-end="97.24">testing lots of browsers I said I</span> <span data-start="97.24" data-end="100.77">support chrome 5 and i support firefox</span> <span data-start="100.77" data-end="103.78">what is it now 29 or something like all</span> <span data-start="103.78" data-end="106.15">the ranges all the browsers and that</span> <span data-start="106.15" data-end="109">meant testing all of those things and so</span> <span data-start="109" data-end="112.45">that took about two days to do and we</span> <span data-start="112.45" data-end="116.049">had 38 or 34 releases in that year which</span> <span data-start="116.049" data-end="118.72">meant a lot of time spent testing and I</span> <span data-start="118.72" data-end="122.92">knew there had to be a better way but</span> <span data-start="122.92" data-end="127.81">before I start j/s comp is a conference</span> <span data-start="127.81" data-end="130.72">of firsts I started lodash after</span> <span data-start="130.72" data-end="135.4">j/s comp one year and I was inspired by</span> </p>
<p><span data-start="135.4" data-end="139.42">Jen's talk on George sort so I'd like to</span> <span data-start="139.42" data-end="141.16">announce that we will be getting short</span> <span data-start="141.16" data-end="144.55">by it's a it's a drop-in replacement for</span> <span data-start="144.55" data-end="146.86">George sort but it is faster and more</span> <span data-start="146.86" data-end="154.87">consistent yeah thank you all right you</span> <span data-start="154.87" data-end="156.97">can follow along and some of the the Q</span> </p>
<p><span data-start="156.97" data-end="161.29">A's of the my testing story at sauce</span> <span data-start="161.29" data-end="163.87">labs they did a blog post where I answer</span> <span data-start="163.87" data-end="166.39">a lot of the questions I'll be talking</span> <span data-start="166.39" data-end="168.91">about today so there's the short URL</span> <span data-start="168.91" data-end="173.98">there bit ly / sauce hyphen loaded with</span> <span data-start="173.98" data-end="176.35">no hyphen on the low dash all right</span> <span data-start="176.35" data-end="181.63">manual testing made me do this it was</span> <span data-start="181.63" data-end="185.95">horrible it's lots of browsers its</span> <span data-start="185.95" data-end="188.53">variations its versions its virtual</span> <span data-start="188.53" data-end="190.6">machines and it's time so I mentioned</span> <span data-start="190.6" data-end="193.3">that I test a lot of browsers and I'm</span> <span data-start="193.3" data-end="196.18">sure everyone's setup looks like this so</span> <span data-start="196.18" data-end="199.36">we all have our Chrome browsers right</span> <span data-start="199.36" data-end="203.709">okay we all have our I ease we all have</span> <span data-start="203.709" data-end="207.34">our firefox's our operas and our safaris</span> <span data-start="207.34" data-end="210.16">and I tested on all of those manually</span> <span data-start="210.16" data-end="212.709">opening up the browser going to the unit</span> <span data-start="212.709" data-end="215.26">tests running the unit tests doing a</span> <span data-start="215.26" data-end="217.45">drop-down menu to change out the file in</span> <span data-start="217.45" data-end="219.519">the build and doing that over and over</span> <span data-start="219.519" data-end="221.86">and over and over again and that just</span> <span data-start="221.86" data-end="226.39">sucked up my weekends so so I wanted to</span> <span data-start="226.39" data-end="229.299">automate this but the problem was it was</span> <span data-start="229.299" data-end="230.709">intimidating there wasn't a lot of</span> <span data-start="230.709" data-end="232.33">documentation around browser test</span> <span data-start="232.33" data-end="235.75">automation I noticed that it seemed to</span> <span data-start="235.75" data-end="240.19">be mysterious and very hard in fact I</span> <span data-start="240.19" data-end="242.16">could not do it I had to ask the</span> <span data-start="242.16" data-end="245.17">twittersphere for help and someone</span> <span data-start="245.17" data-end="248.44">actually jumped in and fixed bugs in</span> <span data-start="248.44" data-end="252.459">dependencies of NPM packages and to get</span> <span data-start="252.459" data-end="254.35">it to work for me and then once they did</span> <span data-start="254.35" data-end="256.359">that then I was able to kind of refine</span> <span data-start="256.359" data-end="258.459">it and clean it up and I took it on from</span> <span data-start="258.459" data-end="261.22">there and so I'm going to be covering</span> <span data-start="261.22" data-end="263.139">some of the roadblocks that Iran</span> <span data-start="263.139" data-end="267.669">into getting testing started so let me</span> <span data-start="267.669" data-end="275.349">go back all right if you noticed I had a</span> <span data-start="275.349" data-end="277.33">lot of virtual machines to that eats up</span> <span data-start="277.33" data-end="279.669">my hard drive this box is basically just</span> <span data-start="279.669" data-end="281.919">good for javascript there's almost no</span> <span data-start="281.919" data-end="285.449">hard drive space left it's all just VMs</span> <span data-start="285.449" data-end="289.36">all right so lodash tests on five</span> <span data-start="289.36" data-end="292.09">browsers that's five environments so</span> <span data-start="292.09" data-end="295.24">it's not just it's not just note or the</span> <span data-start="295.24" data-end="298.93">browser's it's Ringo Rhino norwall I'm</span> <span data-start="298.93" data-end="301.36">about to do Nagy horn which is like the</span> <span data-start="301.36" data-end="305.199">new rhino and I even test on things like</span> <span data-start="305.199" data-end="307.36">adobe illustrator but that's not</span> <span data-start="307.36" data-end="308.74">included in my automation I just</span> <span data-start="308.74" data-end="311.439">manually do that one there's also build</span> <span data-start="311.439" data-end="313.539">so it's not just the monolithic bill</span> <span data-start="313.539" data-end="315.279">because we've had a lot of talks on</span> <span data-start="315.279" data-end="318.159">modules right so lodash supports custom</span> <span data-start="318.159" data-end="319.779">builds we're one of the most customized</span> <span data-start="319.779" data-end="322.18">libraries out there so there's the AMD</span> <span data-start="322.18" data-end="324.339">build there's the common j/s build which</span> <span data-start="324.339" data-end="328.089">is different than the MPN build and all</span> <span data-start="328.089" data-end="330.43">of these are tested and they all run in</span> <span data-start="330.43" data-end="332.77">the same unit test so I have one unit</span> <span data-start="332.77" data-end="335.02">test file and every single one of these</span> <span data-start="335.02" data-end="337.27">bills can run against that unit test so</span> </p>
<p><span data-start="337.27" data-end="340.949">I know that each one's covered and</span> <span data-start="340.949" data-end="343.06">testing it in the browser it's the same</span> <span data-start="343.06" data-end="345.279">thing it's not just the monolithic build</span> <span data-start="345.279" data-end="347.05">it's the AMD built it's the underscore</span> <span data-start="347.05" data-end="349.659">build it's the backbone build its it's</span> <span data-start="349.659" data-end="352.029">the comic the compat build it's the</span> <span data-start="352.029" data-end="354.31">modern build it's the non minified</span> <span data-start="354.31" data-end="356.169">version it's the minified version of</span> <span data-start="356.169" data-end="358.3">each one of these things because bugs</span> <span data-start="358.3" data-end="360.539">creep in to lots of different areas</span> <span data-start="360.539" data-end="364.24">closure compiler Advanced Mode likes to</span> <span data-start="364.24" data-end="366.849">think it knows more than you do and will</span> <span data-start="366.849" data-end="368.71">say hey this code can never be reached</span> <span data-start="368.71" data-end="371.11">but engines are buggy and lots of places</span> <span data-start="371.11" data-end="373.569">where code can should never be reached</span> <span data-start="373.569" data-end="375.159">can get reached if you're doing a</span> <span data-start="375.159" data-end="377.439">feature test and so close your compiler</span> <span data-start="377.439" data-end="379.449">will like to strip out those feature</span> <span data-start="379.449" data-end="382.029">tests so I have to put them back in and</span> </p>
<p><span data-start="382.029" data-end="383.56">I have unit tests to make sure that the</span> <span data-start="383.56" data-end="388.839">minified versions work correctly this</span> <span data-start="388.839" data-end="391.089">says 30 versions i have since pulled</span> <span data-start="391.089" data-end="393.25">back because even automating it that's</span> <span data-start="393.25" data-end="395.259">still a crazy amount of browsers so i</span> <span data-start="395.259" data-end="396.51">follow the jquery</span> <span data-start="396.51" data-end="399.36">a method of this which is take the</span> <span data-start="399.36" data-end="402.09">current browser and go one back so I</span> <span data-start="402.09" data-end="403.98">test that except for things like IE</span> <span data-start="403.98" data-end="406.98">where I still support ie6 and Safari</span> <span data-start="406.98" data-end="409.17">where I support safari five and that's</span> <span data-start="409.17" data-end="411.63">mainly because things like phantom jas</span> <span data-start="411.63" data-end="415.05">still use ish five ish for for its</span> <span data-start="415.05" data-end="416.73">WebKit so I make sure that I support</span> <span data-start="416.73" data-end="420.03">that too okay so I said there's got to</span> <span data-start="420.03" data-end="421.71">be a better way and there is and it's</span> <span data-start="421.71" data-end="424.56">browser test automation there's a couple</span> <span data-start="424.56" data-end="426.12">of options out there there's there's</span> <span data-start="426.12" data-end="427.8">sauce labs which I'll be talking about</span> <span data-start="427.8" data-end="429.96">today and there's Tesla ng which is a</span> <span data-start="429.96" data-end="433.83">different way to do it just because I'm</span> <span data-start="433.83" data-end="435.45">talking about sauce labs doesn't mean</span> <span data-start="435.45" data-end="437.31">it's the one true way it's the way that</span> </p>
<p><span data-start="437.31" data-end="441.93">I I went if you if you use Tesla ng or</span> <span data-start="441.93" data-end="443.16">you use browser stack or you use</span> <span data-start="443.16" data-end="444.66">something else as long as you're doing</span> <span data-start="444.66" data-end="446.85">test automation you're in a better place</span> <span data-start="446.85" data-end="449.64">so I would encourage anyone to just to</span> <span data-start="449.64" data-end="452.52">to read up on these different options</span> <span data-start="452.52" data-end="453.69">and pick the one that's right for you I</span> <span data-start="453.69" data-end="456.69">like sauce labs let's see if I get into</span> <span data-start="456.69" data-end="459.78">that real quick I might because it has a</span> <span data-start="459.78" data-end="463.29">view of you can do lots of things with</span> <span data-start="463.29" data-end="465.81">your unit tests so for example here's an</span> <span data-start="465.81" data-end="469.35">exam I my page layout here for the sauce</span> <span data-start="469.35" data-end="474.87">labs you can go along our play along</span> <span data-start="474.87" data-end="477.48">with me here and follow along that is</span> <span data-start="477.48" data-end="480.63">and go to sauce lab / you / lodash to</span> <span data-start="480.63" data-end="482.55">see the recently run unit tests I ran</span> <span data-start="482.55" data-end="485.25">these tests about 30 minutes ago so it</span> <span data-start="485.25" data-end="487.29">was a really big chance because there</span> <span data-start="487.29" data-end="488.94">could have been mass fails there could</span> <span data-start="488.94" data-end="490.92">have been instability and the the test</span> <span data-start="490.92" data-end="493.29">automation but in a little bit i'll</span> <span data-start="493.29" data-end="495">explain why that wasn't the case and why</span> <span data-start="495" data-end="497.91">they're all green you'll notice that it</span> <span data-start="497.91" data-end="500.82">has the name of the test it has the OS</span> <span data-start="500.82" data-end="503.19">it has tags with it too so you can</span> <span data-start="503.19" data-end="505.11">associate with your unit test run</span> <span data-start="505.11" data-end="507.9">keywords so for example when I'm testing</span> <span data-start="507.9" data-end="509.97">the compat build and the minified build</span> <span data-start="509.97" data-end="512.7">its compat production and it's also the</span> <span data-start="512.7" data-end="515.4">underscore unit test suite so it says</span> <span data-start="515.4" data-end="517.8">underscore and so using that on the</span> <span data-start="517.8" data-end="520.26">search session name I can I can narrow</span> <span data-start="520.26" data-end="524.13">down tests by the tags and the tests I</span> <span data-start="524.13" data-end="526.62">can also you'll see here it has the</span> <span data-start="526.62" data-end="528.33">commit hash there too so I can look up</span> <span data-start="528.33" data-end="528.72">test</span> <span data-start="528.72" data-end="530.73">by commit hash and then of course it has</span> <span data-start="530.73" data-end="532.829">the the name of the test so it has</span> <span data-start="532.829" data-end="534.66">things like the underscore test the</span> <span data-start="534.66" data-end="536.49">backbone tests and the low dash test</span> <span data-start="536.49" data-end="538.199">because lodash tests against underscores</span> <span data-start="538.199" data-end="540.3">unit tests it also test against backbone</span> <span data-start="540.3" data-end="541.589">to to make sure that there's that</span> <span data-start="541.589" data-end="547.74">compatibility there all right so to get</span> <span data-start="547.74" data-end="552.899">started I used Travis CI qunit sauce</span> <span data-start="552.899" data-end="556.11">labs supports jasmine mocha and a few</span> <span data-start="556.11" data-end="561">others it also supports custom unit</span> <span data-start="561" data-end="562.92">testing libraries and I'll kinda I'll go</span> <span data-start="562.92" data-end="565.47">into that a little bit later too i use i</span> <span data-start="565.47" data-end="568.139">don't use grunt but it is optional how</span> <span data-start="568.139" data-end="570.509">many people are using current all right</span> <span data-start="570.509" data-end="571.829">so if you're using front there's a</span> <span data-start="571.829" data-end="573.72">really easy way to get browser test</span> <span data-start="573.72" data-end="575.73">automation set up and i'll talk about</span> <span data-start="575.73" data-end="577.439">that too and then you'll need a sauce</span> <span data-start="577.439" data-end="579.389">labs account and that's just real easy</span> <span data-start="579.389" data-end="581.04">you sign up you get your account you get</span> <span data-start="581.04" data-end="584.329">a AP I key and that's what you'll need</span> <span data-start="584.329" data-end="587.67">okay so i make travis CI do all the</span> <span data-start="587.67" data-end="590.16">things i don't do I don't use grunt in</span> <span data-start="590.16" data-end="592.41">my case because grunt traditionally has</span> <span data-start="592.41" data-end="594.75">used lodash too and I kind of wanted to</span> <span data-start="594.75" data-end="597.149">have this pure dependency stack where I</span> <span data-start="597.149" data-end="598.529">wasn't using anything else that was</span> <span data-start="598.529" data-end="602.22">using me to test myself so I i make</span> <span data-start="602.22" data-end="604.41">grunt Travis do it and that looks</span> <span data-start="604.41" data-end="608.1">something like this this massive yml</span> <span data-start="608.1" data-end="613.709">file go to my github repo for lodash and</span> <span data-start="613.709" data-end="617.1">it's lodash / Travis yml to see this</span> <span data-start="617.1" data-end="619.68">this pretty hefty yml file and what it's</span> <span data-start="619.68" data-end="622.41">doing is it's running each one of these</span> <span data-start="622.41" data-end="624.329">various versions of the build so it's</span> <span data-start="624.329" data-end="629.309">running phantom Jas norwall rhino it's</span> <span data-start="629.309" data-end="631.35">running the various builds as well too</span> <span data-start="631.35" data-end="633.12">and then somewhere in there towards the</span> <span data-start="633.12" data-end="636.089">bottom you'll see the sauce labs runs</span> <span data-start="636.089" data-end="641.059">too so I throw my command in there to</span> <span data-start="641.059" data-end="644.519">call a helper file which establishes the</span> <span data-start="644.519" data-end="648.449">tunnel sets up the tests runs the tests</span> <span data-start="648.449" data-end="650.689">and will actually reach fry the test two</span> <span data-start="650.689" data-end="653.129">all right so this is what it looks like</span> <span data-start="653.129" data-end="655.139">on Travis CI when it's actually running</span> <span data-start="655.139" data-end="657.569">the jobs you'll see it says the name of</span> <span data-start="657.569" data-end="658.72">the browser the version</span> <span data-start="658.72" data-end="660.459">and past and if there was an issue there</span> <span data-start="660.459" data-end="662.439">it would say failed at how many if there</span> <span data-start="662.439" data-end="664.689">was a connection issue it would say what</span> <span data-start="664.689" data-end="666.009">the connection is she was it may even</span> <span data-start="666.009" data-end="667.6">give you a link for more information</span> <span data-start="667.6" data-end="670.569">about that issue too but when I when</span> <span data-start="670.569" data-end="672.009">everything is good you'll see things</span> <span data-start="672.009" data-end="674.41">like this where just says past and</span> <span data-start="674.41" data-end="675.699">you'll see there too that I have the</span> <span data-start="675.699" data-end="677.23">fancy colors and that's because chalk</span> <span data-start="677.23" data-end="680.8">which I mentioned earlier here oops it's</span> <span data-start="680.8" data-end="683.829">not there it's over here somewhere I use</span> <span data-start="683.829" data-end="685.709">chalk to color that again optional</span> <span data-start="685.709" data-end="689.439">alright what I do now is I I take it up</span> <span data-start="689.439" data-end="691.75">a notch and I do code coverage too so</span> <span data-start="691.75" data-end="695.019">not only is it test automation it's code</span> <span data-start="695.019" data-end="698.279">coverage as well and i use istanbul to</span> <span data-start="698.279" data-end="702.189">do a passover lodash and then i feed</span> <span data-start="702.189" data-end="703.75">that to coveralls and what's nice about</span> <span data-start="703.75" data-end="706.24">coveralls coveralls is kind of a bit</span> <span data-start="706.24" data-end="709.75">beta ish but for me at least with the</span> <span data-start="709.75" data-end="711.699">modular build so the modular eyes build</span> <span data-start="711.699" data-end="713.379">is the screenshot that i'm showing here</span> <span data-start="713.379" data-end="716.439">it can show module per module or in this</span> <span data-start="716.439" data-end="718.24">case like method / method and show me</span> <span data-start="718.24" data-end="720.73">how much i have coverage for that method</span> <span data-start="720.73" data-end="722.98">and i just used that today to find dead</span> <span data-start="722.98" data-end="725.199">code in two of my methods which was a</span> <span data-start="725.199" data-end="727.569">sign and merge I had a little if</span> <span data-start="727.569" data-end="729.189">statement that was never being hit and</span> <span data-start="729.189" data-end="732.459">it wasn't a coverage gap it was a</span> <span data-start="732.459" data-end="734.17">usability gap like there's no way to</span> <span data-start="734.17" data-end="735.939">actually get to that chunk of code so i</span> <span data-start="735.939" data-end="738.129">was able to spot dead code and remove it</span> <span data-start="738.129" data-end="740.62">from my build and then of course that</span> <span data-start="740.62" data-end="743.41">increases the coverage percent as well</span> <span data-start="743.41" data-end="746.649">so this says ninety percent in this file</span> <span data-start="746.649" data-end="748.99">or that file overall it's Tildy a</span> <span data-start="748.99" data-end="750.79">hundred percent so if you go to the</span> <span data-start="750.79" data-end="752.5">actual interface it says a hundred</span> <span data-start="752.5" data-end="754.66">percent so I'm rocking about a hundred</span> <span data-start="754.66" data-end="759.49">percent test coverage there so to do</span> <span data-start="759.49" data-end="761.17">this the MPN depths this is the one</span> <span data-start="761.17" data-end="763.99">where chalk was there I use chalk I use</span> <span data-start="763.99" data-end="766.389">a static file server this case was</span> <span data-start="766.389" data-end="769.3">ecstatic I tried a few others and I'm</span> <span data-start="769.3" data-end="771.97">not a pro at like all things server</span> <span data-start="771.97" data-end="775.5">related so I found one that worked a</span> <span data-start="775.5" data-end="779.62">request and then sauce tunnel now just a</span> <span data-start="779.62" data-end="781.3">just a few weeks ago I would have had to</span> <span data-start="781.3" data-end="783.189">put like an astronaut a sauce tunnel</span> <span data-start="783.189" data-end="785.86">about connection problems and using a</span> <span data-start="785.86" data-end="787.24">very specific patch which was a</span> <span data-start="787.24" data-end="788.98">roadblock that I had to overcome but</span> <span data-start="788.98" data-end="790.72">they have since fixed that so now you</span> <span data-start="790.72" data-end="792.49">just use sauce tunnel</span> <span data-start="792.49" data-end="794.02">and everything works it's using soft</span> <span data-start="794.02" data-end="797.26">connect version 4 which is an updated</span> <span data-start="797.26" data-end="799.74">version should be faster more reliable</span> <span data-start="799.74" data-end="804.7">all the things so some of the cool</span> <span data-start="804.7" data-end="806.08">things you can do with browser test</span> <span data-start="806.08" data-end="808.12">automation and one of the reasons i use</span> <span data-start="808.12" data-end="810.04">sauce labs is because it gives you more</span> <span data-start="810.04" data-end="813.61">control I did not want to do I did not</span> <span data-start="813.61" data-end="815.5">want as much control as like webdriver</span> <span data-start="815.5" data-end="817.54">so that's like scripting all kinds of</span> <span data-start="817.54" data-end="819.55">things and I did not want that but I</span> <span data-start="819.55" data-end="821.68">wanted a little bit more control because</span> <span data-start="821.68" data-end="823.57">one of the things I test is ie compat</span> <span data-start="823.57" data-end="825.58">ones so you all know that there's</span> <span data-start="825.58" data-end="828.31">there's compat modes in IE and that</span> <span data-start="828.31" data-end="830.41">they're not exact emulations of their</span> <span data-start="830.41" data-end="832.81">mode so if you're running IE 11 as ie8</span> <span data-start="832.81" data-end="835.27">that's not really ie8 that's an emulator</span> <span data-start="835.27" data-end="838.33">form of ie8 it's a compat mode and</span> <span data-start="838.33" data-end="840.7">there's bugs in the compat mode that</span> <span data-start="840.7" data-end="842.86">don't show up in the normal version and</span> <span data-start="842.86" data-end="846.49">underscore and lodash patch issues with</span> <span data-start="846.49" data-end="848.89">that and it's in the library and so I</span> <span data-start="848.89" data-end="853.209">need to test that and with with salsa</span> <span data-start="853.209" data-end="855.13">labs I can I basically detect a query</span> <span data-start="855.13" data-end="857.529">string I set the header for the file</span> <span data-start="857.529" data-end="859.45">because you you can set compat modes</span> <span data-start="859.45" data-end="861.73">inside a meta tag or you can set compat</span> <span data-start="861.73" data-end="866.05">modes with the HD HTML header for the</span> <span data-start="866.05" data-end="868.329">header for the HTML file and so I do it</span> <span data-start="868.329" data-end="870.459">that way so I can have the exact same</span> <span data-start="870.459" data-end="872.05">unit test that's running all of my</span> <span data-start="872.05" data-end="873.64">browser tests also run the compat mode</span> <span data-start="873.64" data-end="876.76">tests too what's also nice is concurrent</span> <span data-start="876.76" data-end="879.73">tunnels so it's not just run one unit</span> <span data-start="879.73" data-end="882.85">test suite wait for it to complete start</span> <span data-start="882.85" data-end="884.8">another started another that would take</span> <span data-start="884.8" data-end="887.2">forever this allows concurrent test</span> <span data-start="887.2" data-end="890.649">tunnels so you can have tests running at</span> <span data-start="890.649" data-end="894.19">the same time there's limits for the</span> <span data-start="894.19" data-end="895.48">free account there's like a limit of</span> <span data-start="895.48" data-end="899.92">three I opted mine to 10 but 10 has been</span> <span data-start="899.92" data-end="901.39">more than I've ever needed and I do a</span> <span data-start="901.39" data-end="903.76">lot of variations here like I mentioned</span> <span data-start="903.76" data-end="905.529">earlier with all of the builds and the</span> <span data-start="905.529" data-end="908.44">minified and all of that automatic</span> <span data-start="908.44" data-end="910.3">retries so this is something I've been</span> <span data-start="910.3" data-end="912.97">working on it's it's not available in</span> <span data-start="912.97" data-end="918.339">the grunt plugin yet but it's what it</span> <span data-start="918.339" data-end="921.16">does is this this is running tests from</span> <span data-start="921.16" data-end="922.959">travis CI its opening a tunnel from</span> <span data-start="922.959" data-end="925.12">travis CI to sauce labs</span> <span data-start="925.12" data-end="927.279">and running unit tests and a lot of</span> <span data-start="927.279" data-end="929.74">weird stuff can happen on the net like</span> <span data-start="929.74" data-end="931.06">some connections could be dropped</span> <span data-start="931.06" data-end="932.35">something could be hanging somewhere</span> <span data-start="932.35" data-end="935.11">causing it to fail and it's not my fault</span> <span data-start="935.11" data-end="937.15">it's not that it's not my codes fault</span> <span data-start="937.15" data-end="939.13">it's not failing unit tests there's a</span> <span data-start="939.13" data-end="941.589">connection issue and normally that would</span> <span data-start="941.589" data-end="943.33">that would cause the the test run to</span> <span data-start="943.33" data-end="945.13">fail and that would cause my Travis job</span> <span data-start="945.13" data-end="946.9">to fail and each one of them i have</span> <span data-start="946.9" data-end="949.24">three Travis runs for the the monolithic</span> <span data-start="949.24" data-end="952.33">build and that's each one has like eight</span> <span data-start="952.33" data-end="955.36">sauce labs connections and so that means</span> <span data-start="955.36" data-end="957.339">if one of those eight fail my entire</span> </p>
<p><span data-start="957.339" data-end="959.62">Travis job fails and it says my unit</span> <span data-start="959.62" data-end="961.96">tests fail for that so it's very</span> <span data-start="961.96" data-end="963.46">important that I don't have false</span> <span data-start="963.46" data-end="965.14">positives keeping up because it could be</span> <span data-start="965.14" data-end="967.15">very chatty and making me always have to</span> <span data-start="967.15" data-end="968.94">double check my work which is annoying</span> <span data-start="968.94" data-end="972.04">so what I've added was retries in all</span> <span data-start="972.04" data-end="973.69">the place and all the things so it does</span> <span data-start="973.69" data-end="975.7">things like qunit how many people use</span> <span data-start="975.7" data-end="980.01">qunit whew not a lot I tell you what I</span> <span data-start="980.01" data-end="982.33">qunit because it was available at the</span> <span data-start="982.33" data-end="985.9">time and because underscore and backbone</span> <span data-start="985.9" data-end="987.49">use it and I want compatibility with</span> <span data-start="987.49" data-end="990.16">them so what I did was I made qunit work</span> <span data-start="990.16" data-end="991.9">in all the environments that it doesn't</span> <span data-start="991.9" data-end="993.58">naturally work it so I made it work a</span> <span data-start="993.58" data-end="996.63">note I made it work in Java ooh by</span> <span data-start="996.63" data-end="1000.36">shimming set timeout set interval and</span> <span data-start="1000.36" data-end="1001.35">clear timeout and all of those things</span> <span data-start="1001.35" data-end="1003.779">and get got it working there so I'm i</span> <span data-start="1003.779" data-end="1006.779">found this this this way to make it work</span> </p>
<p><span data-start="1006.779" data-end="1010.08">I use it it's called qunit extras which</span> <span data-start="1010.08" data-end="1011.52">is the note on the bottom there and</span> <span data-start="1011.52" data-end="1014.31">that's my shim for adding things like</span> <span data-start="1014.31" data-end="1016.26">retries to qunit so one of the things</span> <span data-start="1016.26" data-end="1018.81">that bit me with browser test automation</span> <span data-start="1018.81" data-end="1021.12">is asynchronous tests anything that</span> <span data-start="1021.12" data-end="1023.49">relies on set timeout and solo dash has</span> <span data-start="1023.49" data-end="1026.49">the bounce and throttle and I have unit</span> <span data-start="1026.49" data-end="1029.429">tests that rely on pauses there and when</span> <span data-start="1029.429" data-end="1031.53">you're testing in old browsers those</span> <span data-start="1031.53" data-end="1033.42">timeouts and those timers have really</span> <span data-start="1033.42" data-end="1034.86">poor resolution and there could be</span> <span data-start="1034.86" data-end="1036.99">things going on in the background that</span> <span data-start="1036.99" data-end="1039.27">caused them to drift and when they drift</span> <span data-start="1039.27" data-end="1041.939">you get false fails so what I've added</span> <span data-start="1041.939" data-end="1046.14">was qunit config async retries and so</span> <span data-start="1046.14" data-end="1047.79">you can specify how many times you want</span> <span data-start="1047.79" data-end="1050.429">an async test to retry before it gives</span> <span data-start="1050.429" data-end="1053.55">up and so in my case it's ten times so</span> <span data-start="1053.55" data-end="1055.74">if any one of those ten times</span> <span data-start="1055.74" data-end="1059.04">asses I get a pass from the test I don't</span> <span data-start="1059.04" data-end="1061.11">have a problem with false positives it's</span> <span data-start="1061.11" data-end="1063.12">always been false negatives if the test</span> <span data-start="1063.12" data-end="1064.95">is going to fail it's always going to</span> <span data-start="1064.95" data-end="1067.559">fail but the timer drift could cause</span> <span data-start="1067.559" data-end="1070.05">false fails every once in a while so I</span> <span data-start="1070.05" data-end="1072.63">need to try that the other thing I've</span> <span data-start="1072.63" data-end="1075.12">added was retries two jobs so before I</span> <span data-start="1075.12" data-end="1076.02">said hey there could be a connection</span> <span data-start="1076.02" data-end="1079.23">issue and that could cause a job to hang</span> <span data-start="1079.23" data-end="1082.5">so I detect that and if there's a</span> <span data-start="1082.5" data-end="1084.03">problem with the job that's not test</span> <span data-start="1084.03" data-end="1086.4">related I retry the job and so that</span> <span data-start="1086.4" data-end="1089.73">requires stopping the job deleting the</span> <span data-start="1089.73" data-end="1092.28">job creating a new job and continuing on</span> <span data-start="1092.28" data-end="1094.53">and if there's a lot of problems with</span> <span data-start="1094.53" data-end="1096.33">the jobs it could mean there's a problem</span> <span data-start="1096.33" data-end="1098.67">with the tunnel the tunnel connection</span> <span data-start="1098.67" data-end="1100.29">could be corrupt and if there's a</span> <span data-start="1100.29" data-end="1102.21">problem with the tunnel then I stopped</span> <span data-start="1102.21" data-end="1104.34">all the jobs remove all the jobs and</span> <span data-start="1104.34" data-end="1106.05">then restart the tunnel and continue</span> <span data-start="1106.05" data-end="1109.02">where I left off so when I've done that</span> </p>
<p><span data-start="1109.02" data-end="1113.07">I get a super stable browser test</span> <span data-start="1113.07" data-end="1115.05">automation I don't get false fails I've</span> <span data-start="1115.05" data-end="1116.429">been tweeting about this recently where</span> <span data-start="1116.429" data-end="1118.98">I had like a hundred runs with no false</span> <span data-start="1118.98" data-end="1120.66">fails and then I had two weeks with no</span> <span data-start="1120.66" data-end="1122.7">false fails and so I just keep refining</span> <span data-start="1122.7" data-end="1124.86">that and getting it more and more stable</span> <span data-start="1124.86" data-end="1126.36">and I've even added mobile testing which</span> <span data-start="1126.36" data-end="1128.1">I'll cover in a bit and even that</span> <span data-start="1128.1" data-end="1130.5">completely stable just I know if it</span> <span data-start="1130.5" data-end="1132.39">fails its unit test related and it's not</span> <span data-start="1132.39" data-end="1135.36">just the setup tailored platforms so</span> <span data-start="1135.36" data-end="1138">before I said hey you can do compat</span> <span data-start="1138" data-end="1140.429">testing right for IE but if i'm doing</span> <span data-start="1140.429" data-end="1142.02">compat mode testing that means i'm not</span> <span data-start="1142.02" data-end="1143.79">interested in firefox and chrome and</span> <span data-start="1143.79" data-end="1145.86">safari right because this is IE compat</span> <span data-start="1145.86" data-end="1148.44">modes so you can do things like say okay</span> <span data-start="1148.44" data-end="1152.19">i'm testing IE compat modes i know i</span> <span data-start="1152.19" data-end="1153.72">don't need those browsers or i'm testing</span> </p>
<p><span data-start="1153.72" data-end="1155.49">AMD modules right so then I know I don't</span> <span data-start="1155.49" data-end="1157.02">need some old version of opera that</span> <span data-start="1157.02" data-end="1158.7">doesn't work with that so you can tailor</span> <span data-start="1158.7" data-end="1160.83">based on what you're testing and so I</span> <span data-start="1160.83" data-end="1162.809">can I can detect that by the tags that I</span> <span data-start="1162.809" data-end="1164.58">assigned to things and only and make</span> <span data-start="1164.58" data-end="1167.04">sure that of my browser matrix I only</span> <span data-start="1167.04" data-end="1171.9">test the ones that it's relevant to next</span> <span data-start="1171.9" data-end="1175.2">so going into some of the cool here's an</span> <span data-start="1175.2" data-end="1179.01">example of the tiny bit of code that is</span> <span data-start="1179.01" data-end="1183.27">required to set the header for the IE</span> <span data-start="1183.27" data-end="1185.429">compat mode and you can see there if you</span> <span data-start="1185.429" data-end="1186.11">want to go to my</span> <span data-start="1186.11" data-end="1189.71">repo which is a low dash / lodash and</span> <span data-start="1189.71" data-end="1192.14">then go to test in sauce labs jes you'll</span> <span data-start="1192.14" data-end="1194.63">see this in there too and that actually</span> <span data-start="1194.63" data-end="1197.48">does the the sniff for the dot HTML and</span> <span data-start="1197.48" data-end="1199.82">then sets the header for compat mode and</span> <span data-start="1199.82" data-end="1202.37">that's all you do I'm not sure you can</span> <span data-start="1202.37" data-end="1203.6">do that with something like Tesla ng</span> <span data-start="1203.6" data-end="1205.549">which is why i like i like sauce labs</span> <span data-start="1205.549" data-end="1207.14">sauce labs also allows me to do things</span> <span data-start="1207.14" data-end="1210.049">like have a screencast of my failed test</span> <span data-start="1210.049" data-end="1212.21">so i can run it and see exactly what</span> <span data-start="1212.21" data-end="1213.86">error didn't win and what's helpful</span> <span data-start="1213.86" data-end="1216.17">there is to say for AG least for Q unit</span> <span data-start="1216.17" data-end="1218.84">is to say hide passing tests so it only</span> <span data-start="1218.84" data-end="1220.97">shows the ones that have failed you can</span> <span data-start="1220.97" data-end="1223.309">actually go a step further and intel</span> <span data-start="1223.309" data-end="1225.14">sauce labs which tests have failed and</span> <span data-start="1225.14" data-end="1226.46">they'll do a really pretty print out</span> <span data-start="1226.46" data-end="1228.2">that doesn't require a screencast or</span> <span data-start="1228.2" data-end="1231.28">anything i just haven't done that yet so</span> <span data-start="1231.28" data-end="1235.58">okay five minutes alright that's awesome</span> <span data-start="1235.58" data-end="1237.86">so here's here's the always think i'm</span> <span data-start="1237.86" data-end="1239.03">going to be short on time but this is</span> <span data-start="1239.03" data-end="1242.47">cool this is an example of filtering</span> <span data-start="1242.47" data-end="1244.64">platforms here so i just say hey if it's</span> <span data-start="1244.64" data-end="1246.29">a compact mode I filter it down to the</span> <span data-start="1246.29" data-end="1250.549">relevant user agents and browsers and</span> <span data-start="1250.549" data-end="1252.86">this is the secret sauce to doing</span> <span data-start="1252.86" data-end="1255.2">anything with sauce labs and that was</span> <span data-start="1255.2" data-end="1256.64">something that I had to kind of find out</span> <span data-start="1256.64" data-end="1258.98">on my own it's better documented now but</span> <span data-start="1258.98" data-end="1261.5">at the time it wasn't and that is if you</span> <span data-start="1261.5" data-end="1263.66">even have a custom unit testing</span> <span data-start="1263.66" data-end="1265.429">framework you just have to set global</span> <span data-start="1265.429" data-end="1267.76">test results which is a global variable</span> <span data-start="1267.76" data-end="1272.12">to your details object so and your</span> <span data-start="1272.12" data-end="1273.86">details object can have a pass in a</span> <span data-start="1273.86" data-end="1275.96">failed count and that's the minimum it</span> <span data-start="1275.96" data-end="1277.82">needs right but you can add like a error</span> <span data-start="1277.82" data-end="1280.1">message too if you want but that's all</span> <span data-start="1280.1" data-end="1282.02">you need no matter what unit testing</span> <span data-start="1282.02" data-end="1283.85">your framework you're using as soon as</span> <span data-start="1283.85" data-end="1285.169">you set that global object it will</span> <span data-start="1285.169" data-end="1288.59">detect it and then close out that</span> <span data-start="1288.59" data-end="1290.15">connection for that browser and say all</span> <span data-start="1290.15" data-end="1295.82">right and report back the results so the</span> <span data-start="1295.82" data-end="1297.65">other option instead of making travesty</span> <span data-start="1297.65" data-end="1300.08">i do and if you've seen the hefty travis</span> <span data-start="1300.08" data-end="1302">yml you're probably thinking well that's</span> <span data-start="1302" data-end="1305.63">not for me well i made up for me for you</span> <span data-start="1305.63" data-end="1307.64">you might like the grunt way to do it in</span> <span data-start="1307.64" data-end="1309.47">the grunt way to do it is fairly</span> <span data-start="1309.47" data-end="1313.4">straightforward there's a project by</span> <span data-start="1313.4" data-end="1317.78">parish rum a ms open Tek employee i</span> <span data-start="1317.78" data-end="1319.37">believe this might be on his own</span> </p>
<p><span data-start="1319.37" data-end="1321.68">I'm though and it's called grunt sauce</span> <span data-start="1321.68" data-end="1326.45">labs and this allows you to fairly</span> <span data-start="1326.45" data-end="1329.36">easily by configuring a config that</span> <span data-start="1329.36" data-end="1331.39">looks a lot like just a regular object</span> <span data-start="1331.39" data-end="1334.13">with you or your the unit testing</span> <span data-start="1334.13" data-end="1336.65">framework you want to use some pads some</span> <span data-start="1336.65" data-end="1338.45">browser names inversions you want to use</span> <span data-start="1338.45" data-end="1340.4">and that's it it handles a lot of the</span> <span data-start="1340.4" data-end="1342.74">stuff that i had to stumble along the</span> <span data-start="1342.74" data-end="1344.87">way for you in fact i was really</span> <span data-start="1344.87" data-end="1346.64">surprised when i started doing research</span> <span data-start="1346.64" data-end="1349.76">for this that the thing that I came up</span> <span data-start="1349.76" data-end="1352.07">with looks really close to the thing</span> <span data-start="1352.07" data-end="1353.6">that they have except there's uses</span> <span data-start="1353.6" data-end="1356.66">grunted mine uses traffic see I so I</span> <span data-start="1356.66" data-end="1359.66">would recommend using this this project</span> <span data-start="1359.66" data-end="1365.62">for that here's an example of just of</span> <span data-start="1365.62" data-end="1368.09">what it would look like the config you</span> <span data-start="1368.09" data-end="1369.86">can see you just specify your browser's</span> <span data-start="1369.86" data-end="1372.08">your platform your version and maybe</span> <span data-start="1372.08" data-end="1376.1">some pads in there and a port and and</span> <span data-start="1376.1" data-end="1377.84">that's really it this is taken from when</span> <span data-start="1377.84" data-end="1379.88">j/s which was recently open sourced they</span> <span data-start="1379.88" data-end="1383.51">use the grunt sauce labs as well and</span> <span data-start="1383.51" data-end="1386.21">they use cue units here and so that's</span> <span data-start="1386.21" data-end="1388.16">really all you have to do to set up your</span> <span data-start="1388.16" data-end="1392.09">stuff which makes it very nice so some</span> <span data-start="1392.09" data-end="1393.95">of the things that made me go hmm these</span> <span data-start="1393.95" data-end="1396.14">are more of the stumbling blocks you'll</span> <span data-start="1396.14" data-end="1397.88">see at the bottom I've crossed out some</span> </p>
<p><span data-start="1397.88" data-end="1400.4">I'll cover those in a bit so I'm not a</span> <span data-start="1400.4" data-end="1404.03">ruby dev I'm JavaScript all the way but</span> <span data-start="1404.03" data-end="1405.83">in order to get this to work for Travis</span> <span data-start="1405.83" data-end="1409.58">CI I had to do gem install Travis mess</span> <span data-start="1409.58" data-end="1413.39">with encrypted strings so here I those</span> <span data-start="1413.39" data-end="1415.46">questions like does secure inside your</span> <span data-start="1415.46" data-end="1417.59">Travis yml work with multiple variables</span> <span data-start="1417.59" data-end="1420.14">does it environment variables how does</span> <span data-start="1420.14" data-end="1422.69">all of that sort out so the the basic</span> <span data-start="1422.69" data-end="1425.39">ideas is you go Travis encrypt sauce</span> <span data-start="1425.39" data-end="1428.21">that capitalized sauce access key and</span> <span data-start="1428.21" data-end="1430.85">your access key from your account and</span> <span data-start="1430.85" data-end="1432.35">then it you can put that in your Travis</span> <span data-start="1432.35" data-end="1435.679">yml with dash secure and whatever that</span> <span data-start="1435.679" data-end="1438.32">encrypted string is and so what Travis</span> </p>
<p><span data-start="1438.32" data-end="1441.05">CI does on the back end is take that and</span> <span data-start="1441.05" data-end="1442.85">actually turn that into the legit</span> <span data-start="1442.85" data-end="1444.92">environment variable the global test</span> <span data-start="1444.92" data-end="1447.14">results I've already covered and Android</span> <span data-start="1447.14" data-end="1450.02">testing was a big pain and what the</span> <span data-start="1450.02" data-end="1452.669">problem there was is that I believe</span> <span data-start="1452.669" data-end="1455.279">has to deal with HTTP or I'm sorry HTML</span> <span data-start="1455.279" data-end="1460.049">headers and headers for JavaScript files</span> <span data-start="1460.049" data-end="1461.789">it seems to be very picky about that so</span> <span data-start="1461.789" data-end="1463.23">what I was getting in my mobile testing</span> <span data-start="1463.23" data-end="1465.539">were files that would load as valid</span> </p>
<p><span data-start="1465.539" data-end="1467.399">JavaScript but only partially load the</span> <span data-start="1467.399" data-end="1469.769">file and then throw syntax errors which</span> <span data-start="1469.769" data-end="1472.499">was really frustrating to to solve so</span> <span data-start="1472.499" data-end="1475.2">what I do is I add an on a window on</span> <span data-start="1475.2" data-end="1477.08">error handler that detects the error</span> <span data-start="1477.08" data-end="1479.1">tells the unit test that it's done</span> <span data-start="1479.1" data-end="1480.899">running and reports the error back and</span> <span data-start="1480.899" data-end="1482.879">then my retry logic goes hey there was</span> <span data-start="1482.879" data-end="1484.529">an error running this test why don't you</span> <span data-start="1484.529" data-end="1486.779">retry that test and then I retry it and</span> <span data-start="1486.779" data-end="1488.489">hopefully that issue is resolved it's</span> <span data-start="1488.489" data-end="1491.039">not a very consistent issue but that</span> <span data-start="1491.039" data-end="1492.299">mobile testing one that was really</span> <span data-start="1492.299" data-end="1494.19">tricky there's no longer an issue with</span> <span data-start="1494.19" data-end="1495.509">sauce tunnels so you don't have to worry</span> <span data-start="1495.509" data-end="1497.19">about that special version and there's</span> <span data-start="1497.19" data-end="1498.749">no longer an issue with an undocumented</span> <span data-start="1498.749" data-end="1502.499">tunnel idkey that was fun to find that's</span> <span data-start="1502.499" data-end="1503.879">been resolved to there they just</span> <span data-start="1503.879" data-end="1505.799">refreshed the documentation it made</span> <span data-start="1505.799" data-end="1508.649">everything super easy for more</span> <span data-start="1508.649" data-end="1510.119">information on their docs you can go to</span> <span data-start="1510.119" data-end="1513.21">docs / rest / additional config /</span> <span data-start="1513.21" data-end="1515.46">connect and get tons and tons of</span> <span data-start="1515.46" data-end="1516.929">information this thing is super</span> <span data-start="1516.929" data-end="1518.97">configurable the rest api is what i use</span> <span data-start="1518.97" data-end="1520.97">because i didn't want to deal with</span> <span data-start="1520.97" data-end="1524.609">webdriver so i just i take the URL i I</span> <span data-start="1524.609" data-end="1527.34">post a request with a JSON object and</span> <span data-start="1527.34" data-end="1530.19">then I just check it and I do everything</span> <span data-start="1530.19" data-end="1532.049">from there you can delete jobs you can</span> <span data-start="1532.049" data-end="1534.149">rename jobs the list kind of goes on and</span> <span data-start="1534.149" data-end="1535.619">on and on with how configurable these</span> <span data-start="1535.619" data-end="1537.629">things are so i would say check that out</span> <span data-start="1537.629" data-end="1541.019">and i think i'm done and there is no</span> <span data-start="1541.019" data-end="1582.159">questions so that's it</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
