<section>
<p><span data-start="8.94" data-end="11.769">there's a high-performance cash with up</span> <span data-start="11.769" data-end="15.429">so well abid laid right so I don't want</span> <span data-start="15.429" data-end="16.84">to take much of your lunch time and</span> <span data-start="16.84" data-end="20.2">networking time so hopefully it's a how</span> <span data-start="20.2" data-end="22.78">to you know improve performance on web</span> <span data-start="22.78" data-end="25.77">applications web sites from a JavaScript</span> <span data-start="25.77" data-end="29.08">perspective so hopefully you know most</span> <span data-start="29.08" data-end="32.38">of these things so let this be kind of a</span> <span data-start="32.38" data-end="35.08">inspirational talk so you know you're</span> <span data-start="35.08" data-end="39.61">just getting spire to make your</span> <span data-start="39.61" data-end="42.58">applications faster in your users</span> <span data-start="42.58" data-end="45.07">happier right so my name is toy and I</span> <span data-start="45.07" data-end="46.84">work recently joined the echo search</span> <span data-start="46.84" data-end="49.15">before that I was working in the</span> <span data-start="49.15" data-end="51.31">exceptional performance team like a</span> <span data-start="51.31" data-end="53.35">central group of a kind of in internal</span> <span data-start="53.35" data-end="55.17">consulting not working on a specific</span> <span data-start="55.17" data-end="58.21">site or property but that just working</span> <span data-start="58.21" data-end="59.38">with the different properties and help</span> <span data-start="59.38" data-end="62.98">them get faster so I worked on the y</span> <span data-start="62.98" data-end="65.95">slow extension you're probably familiar</span> <span data-start="65.95" data-end="68.92">with that I also designed the second</span> <span data-start="68.92" data-end="71.14">version of it which is a complete</span> <span data-start="71.14" data-end="74.979">rewrite and face Mora actually I want to</span> <span data-start="74.979" data-end="76.51">talk about this but the thing is it's</span> <span data-start="76.51" data-end="78.97">not out there yet so it's from what I</span> <span data-start="78.97" data-end="80.68">understand because I'm a longer in team</span> <span data-start="80.68" data-end="84.07">it will be out any day now so look out</span> <span data-start="84.07" data-end="87.64">for that also did this smash it to for</span> <span data-start="87.64" data-end="89.17">image optimization if you haven't seen</span> <span data-start="89.17" data-end="93.33">it so why do we care about performance</span> <span data-start="93.33" data-end="96.25">so there's some some numbers that we</span> <span data-start="96.25" data-end="101.04">wanted to we like to show around like</span> <span data-start="101.04" data-end="103.24">there was somebody from google saying</span> <span data-start="103.24" data-end="106.54">that when their search results page</span> <span data-start="106.54" data-end="109.93">became a half a second slower they saw</span> <span data-start="109.93" data-end="114.1">twenty percent drop in traffic for Yahoo</span> <span data-start="114.1" data-end="115.78">we did an experiment with a property</span> <span data-start="115.78" data-end="117.88">where we just artificially delayed the</span> <span data-start="117.88" data-end="121.42">page so it doesn't load as fast so the</span> <span data-start="121.42" data-end="125.32">first few hundred milliseconds were</span> <span data-start="125.32" data-end="127.57">cable and when you got to a 400</span> <span data-start="127.57" data-end="130.209">milliseconds we so five to nine percent</span> <span data-start="130.209" data-end="132.37">drop in the full page traffic what it</span> <span data-start="132.37" data-end="134.77">means is people clicking away</span> <span data-start="134.77" data-end="136.63">you're hitting back or going somewhere</span> <span data-start="136.63" data-end="138.37">else without before the pages actually</span> <span data-start="138.37" data-end="141.22">loaded and there is also some some other</span> <span data-start="141.22" data-end="143.83">number from amazon that are making your</span> <span data-start="143.83" data-end="147.07">arm making their site only 100</span> <span data-start="147.07" data-end="149.14">milliseconds floor they saw a one</span> <span data-start="149.14" data-end="153.13">percent drop in sales so this is a quite</span> <span data-start="153.13" data-end="159.97">illustrative but so if you want to you</span> <span data-start="159.97" data-end="161.44">know work with your business folks to</span> <span data-start="161.44" data-end="163.27">get some time allocated to work on</span> <span data-start="163.27" data-end="164.38">performance you can show them those</span> <span data-start="164.38" data-end="166.54">numbers but take those with a grain of</span> <span data-start="166.54" data-end="169">salt right because every application is</span> <span data-start="169" data-end="173.56">different and what well like for example</span> <span data-start="173.56" data-end="178.71">in the yahoo example the fact that you</span> <span data-start="178.71" data-end="182.02">will have some full page traffic might</span> <span data-start="182.02" data-end="186.07">not actually be in any you make any</span> <span data-start="186.07" data-end="187.51">difference for for specific peppers</span> <span data-start="187.51" data-end="189.64">allocations if you have ecommerce site</span> <span data-start="189.64" data-end="191.68">where all you need to show up is the</span> <span data-start="191.68" data-end="195.07">name of the product they end up by now</span> <span data-start="195.07" data-end="196.96">button right so you don't really care</span> <span data-start="196.96" data-end="200.2">about the full page traffic so but one</span> <span data-start="200.2" data-end="203.05">thing is true is that uh when you when</span> <span data-start="203.05" data-end="205.18">you make your page slower and you're</span> <span data-start="205.18" data-end="207.43">losing traffic you losing visitors and</span> <span data-start="207.43" data-end="209.47">he was degrading the user experience at</span> <span data-start="209.47" data-end="210.459">the end it's all about the user</span> <span data-start="210.459" data-end="212.41">experience and speaking with different</span> <span data-start="212.41" data-end="215.05">companies but notice that it's kind of a</span> <span data-start="215.05" data-end="217.209">self-regulating system right so when you</span> <span data-start="217.209" data-end="219.13">when you do something stupid in your</span> <span data-start="219.13" data-end="222.04">next update of your application and you</span> <span data-start="222.04" data-end="225.7">make it slower actually nothing in me no</span> <span data-start="225.7" data-end="228.31">one dies right so the servers are okay</span> <span data-start="228.31" data-end="230.68">it's just that you have less traffic so</span> <span data-start="230.68" data-end="233.56">if you if you make it slower then you</span> <span data-start="233.56" data-end="235.66">just lose visitors yeah you have like</span> <span data-start="235.66" data-end="237.88">sessions shorter sessions and people</span> <span data-start="237.88" data-end="240.87">just get irritated from the slow pages</span> <span data-start="240.87" data-end="245.34">so the or when you when you go into</span> <span data-start="245.34" data-end="247.72">optimization so that's the first kind of</span> <span data-start="247.72" data-end="249.55">mantra to remember that a premature</span> <span data-start="249.55" data-end="250.959">optimization is the root of all evil</span> <span data-start="250.959" data-end="254.13">right so and/or is good crockford put it</span> <span data-start="254.13" data-end="256.39">yeah make it right before to make it</span> <span data-start="256.39" data-end="259.48">fast so don't just brush into an Orion</span> <span data-start="259.48" data-end="260.75">engine</span> <span data-start="260.75" data-end="263.34">like spending weeks and introducing new</span> <span data-start="263.34" data-end="265.38">bugs and fixing those bugs and wake up</span> <span data-start="265.38" data-end="267.96">unit two weeks later find out that it's</span> <span data-start="267.96" data-end="269.85">probably working pretty much the same</span> <span data-start="269.85" data-end="274.639">way so just make sure that your profile</span> <span data-start="274.639" data-end="277.95">you measure your monitors so basically</span> <span data-start="277.95" data-end="280.02">pick your battles see where where it</span> <span data-start="280.02" data-end="284.79">make more sense to spend your time so it</span> <span data-start="284.79" data-end="286.86">often the performance optimizations are</span> <span data-start="286.86" data-end="288.99">trade-offs and this is what I was</span> <span data-start="288.99" data-end="291.54">reading rereading this three men in a</span> <span data-start="291.54" data-end="292.919">boat or what the guy has to say about</span> <span data-start="292.919" data-end="295.86">trade-off that everything has its</span> <span data-start="295.86" data-end="297.99">drawbacks as the men said when his</span> <span data-start="297.99" data-end="300.18">mother-in-law died and they came upon</span> <span data-start="300.18" data-end="302.91">him for the funeral expenses so you know</span> <span data-start="302.91" data-end="309.45">everything gets like two sides so he</span> <span data-start="309.45" data-end="313.59">keeps on one like a timeline comparison</span> <span data-start="313.59" data-end="317.31">without the life of the typical page 2</span> <span data-start="317.31" data-end="319.86">point 0 like with the human life right</span> <span data-start="319.86" data-end="322.97">you start with with a request or</span> <span data-start="322.97" data-end="326.58">conception in for human so then your</span> <span data-start="326.58" data-end="330.03">server sends the HTML which is kind of</span> <span data-start="330.03" data-end="332.64">like a human birth right so after that</span> <span data-start="332.64" data-end="335.16">after once the HTML like the backend</span> <span data-start="335.16" data-end="337.56">works it the queries all those web</span> <span data-start="337.56" data-end="340.74">services gets data from databases and</span> <span data-start="340.74" data-end="343.53">since the HTML so then it says the so</span> <span data-start="343.53" data-end="345.539">called the waterfall like in the HTML</span> <span data-start="345.539" data-end="347.37">you refer to some JavaScript CSS images</span> <span data-start="347.37" data-end="350.389">so all those need to be downloaded and</span> <span data-start="350.389" data-end="353.21">eventually the onload event happens and</span> <span data-start="353.21" data-end="356.91">in typical modern application that's not</span> <span data-start="356.91" data-end="359.82">the end of it because then you start</span> <span data-start="359.82" data-end="362.22">initializing JavaScript's do some</span> <span data-start="362.22" data-end="364.53">progressive enhancement replace some</span> <span data-start="364.53" data-end="368.49">some dill note dumb note and eventually</span> <span data-start="368.49" data-end="371.419">maybe you get some more xhr data and</span> <span data-start="371.419" data-end="373.83">eventually the page kind of settles and</span> <span data-start="373.83" data-end="378.57">the user is gauging with the page so the</span> <span data-start="378.57" data-end="380.88">thing about the unload is an event right</span> <span data-start="380.88" data-end="382.889">so you know when it happens but what</span> <span data-start="382.889" data-end="385.26">about the user unload whether the user</span> <span data-start="385.26" data-end="388.05">things when the pages is loaded is not</span> <span data-start="388.05" data-end="390.96">quite clear it depends on the page right</span> <span data-start="390.96" data-end="393.57">if it's an article the page is pretty</span> <span data-start="393.57" data-end="394.35">much done when</span> <span data-start="394.35" data-end="395.79">can start reading the article you don't</span> <span data-start="395.79" data-end="398.07">care about all the ads or badges widget</span> <span data-start="398.07" data-end="403.26">and so on or the person may wait until</span> <span data-start="403.26" data-end="405.5">everything like the status bar stops</span> <span data-start="405.5" data-end="408.9">changing the like everything looks set</span> <span data-start="408.9" data-end="412.29">out so the user onload really depends on</span> <span data-start="412.29" data-end="418.41">the depends on the application so first</span> <span data-start="418.41" data-end="420.78">let's talk about the optimization you</span> <span data-start="420.78" data-end="423">can do to the waterfall right once the</span> <span data-start="423" data-end="428.28">the HTML is sent so you can do a group</span> <span data-start="428.28" data-end="433.71">of task like we can group them in to</span> <span data-start="433.71" data-end="435.51">optimize your water for basically one</span> <span data-start="435.51" data-end="437.58">this waterfall to be shorter right so</span> <span data-start="437.58" data-end="438.96">that you get all the components in the</span> <span data-start="438.96" data-end="441.66">pages right in less time so the most</span> <span data-start="441.66" data-end="444.09">obvious thing is to just put less stuff</span> <span data-start="444.09" data-end="447.84">in this waterfall like have less less</span> <span data-start="447.84" data-end="451.95">elements on the page then whatever is</span> <span data-start="451.95" data-end="454.17">left make sure it's smaller right try to</span> <span data-start="454.17" data-end="457.56">to minimize the size of it then the next</span> <span data-start="457.56" data-end="459.21">step will be to make sure that there's</span> <span data-start="459.21" data-end="462.03">no blocking going on right if one one</span> <span data-start="462.03" data-end="463.77">component blocks the others make sure</span> <span data-start="463.77" data-end="465.81">that it's you know don't stay in the way</span> <span data-start="465.81" data-end="468.15">of the other components and another</span> <span data-start="468.15" data-end="470.88">optimization is to try to start this</span> <span data-start="470.88" data-end="473.6">waterfall process as early as possible</span> <span data-start="473.6" data-end="477.39">so about less stuff so the single most</span> <span data-start="477.39" data-end="479.31">important thing probably is the the</span> <span data-start="479.31" data-end="481.83">price of the HTTP request right so just</span> <span data-start="481.83" data-end="484.38">aim to have as less HTTP requests as</span> <span data-start="484.38" data-end="488.25">possible so that may mean strip features</span> <span data-start="488.25" data-end="490.8">but not necessarily you can just combine</span> <span data-start="490.8" data-end="493.47">the components that you already have so</span> <span data-start="493.47" data-end="497.46">for example if you have so this is</span> <span data-start="497.46" data-end="499.61">pretty typical right so you have your</span> <span data-start="499.61" data-end="502.8">your JavaScript code right here my apt</span> <span data-start="502.8" data-end="505.65">ogs then you use a third-party library</span> <span data-start="505.65" data-end="509.19">and this third-party library has some</span> <span data-start="509.19" data-end="511.14">plug is that you want to use so you end</span> <span data-start="511.14" data-end="513.9">up with a with a few script tags so</span> <span data-start="513.9" data-end="516.33">quite easily just concatenate all those</span> <span data-start="516.33" data-end="519.06">into a single javascript file and have</span> <span data-start="519.06" data-end="521.789">only one only one file referred in the</span> <span data-start="521.789" data-end="524.73">head so you just say through HTTP</span> <span data-start="524.73" data-end="526.71">requests all right just by combining all</span> <span data-start="526.71" data-end="527.67">those JavaScript</span> <span data-start="527.67" data-end="529.74">so then you just do the same thing for</span> </p>
<p><span data-start="529.74" data-end="536.85">CSS yeah so for the images you CSS</span> <span data-start="536.85" data-end="538.53">sprites for background images so</span> <span data-start="538.53" data-end="541.35">basically the rule is anything you can</span> <span data-start="541.35" data-end="543.66">go without like decoration images</span> <span data-start="543.66" data-end="545.76">background rounded corners and whatnot</span> <span data-start="545.76" data-end="548.43">put those in a in a sprite in a single</span> <span data-start="548.43" data-end="551.76">image and then use CSS positioning to</span> <span data-start="551.76" data-end="555.03">just show part of that image and you can</span> <span data-start="555.03" data-end="561.15">also use that data URI scheme so that in</span> <span data-start="561.15" data-end="563.49">using the data you are you can you can</span> <span data-start="563.49" data-end="568.41">do both in content images from the image</span> <span data-start="568.41" data-end="570.75">tag or CSS images with a background</span> <span data-start="570.75" data-end="574.77">image so so how does that work so</span> <span data-start="574.77" data-end="577.29">basically you have my PNG let's say some</span> <span data-start="577.29" data-end="579.69">file then so this is just an example</span> <span data-start="579.69" data-end="581.93">from the PHP command line you can just</span> <span data-start="581.93" data-end="585.06">get its content and encoded using base</span> <span data-start="585.06" data-end="587.64">64 encoded and you get you get this sort</span> <span data-start="587.64" data-end="592.23">of string yeah so then you take this</span> <span data-start="592.23" data-end="595.37">thing and and use this kind of complex</span> <span data-start="595.37" data-end="597.84">convoluted syntax and you say data</span> <span data-start="597.84" data-end="603.24">column content type simcom then base64</span> <span data-start="603.24" data-end="604.92">the encoding and then the content of it</span> <span data-start="604.92" data-end="607.89">so this way you in line the image inside</span> <span data-start="607.89" data-end="609.81">of the CSS so you don't have to make an</span> <span data-start="609.81" data-end="612.21">extra request to get that image the same</span> <span data-start="612.21" data-end="613.86">thing with the content images like you</span> <span data-start="613.86" data-end="617.79">can do it an image SRC attribute then</span> <span data-start="617.79" data-end="621.27">put in your the data for the rivet so</span> <span data-start="621.27" data-end="623.58">this is really nice and it even works in</span> </p>
<p><span data-start="623.58" data-end="626.07">IE but unfortunately nice starting from</span> <span data-start="626.07" data-end="630.15">eight so for the others there's actually</span> <span data-start="630.15" data-end="632.19">a workaround that I kind of recently</span> <span data-start="632.19" data-end="634.71">discovered on a Russian website and I'm</span> <span data-start="634.71" data-end="636.63">you know kind of translated for the non</span> <span data-start="636.63" data-end="639.69">Russian speaking community so you have</span> <span data-start="639.69" data-end="641.94">you can use this thing called mhtml my</span> <span data-start="641.94" data-end="645.78">HTML so this is like like a email with</span> <span data-start="645.78" data-end="647.55">attachments like in one email message</span> <span data-start="647.55" data-end="650.1">you can have plain text HTML one</span> <span data-start="650.1" data-end="651.99">attachment another attachment files it's</span> <span data-start="651.99" data-end="653.6">all so everything is in one single</span> <span data-start="653.6" data-end="656.94">document so the same thing for EM HTML</span> <span data-start="656.94" data-end="660.66">so you can basically put the put images</span> <span data-start="660.66" data-end="663.09">inside of the CSS or even inside of HTML</span> <span data-start="663.09" data-end="667.65">so what I really find what I really like</span> <span data-start="667.65" data-end="669.63">about is it that means that especially</span> <span data-start="669.63" data-end="671.22">for for mobile application right when</span> <span data-start="671.22" data-end="674.49">the HTTP requests you should try to</span> <span data-start="674.49" data-end="676.14">avoid them as much as possible if you in</span> <span data-start="676.14" data-end="677.43">line all the JavaScript in line all the</span> </p>
<p><span data-start="677.43" data-end="679.47">CSS and in light of the images then with</span> <span data-start="679.47" data-end="680.88">a single HTTP requests you can download</span> <span data-start="680.88" data-end="683.1">the whole application right then if</span> <span data-start="683.1" data-end="684.72">you're designing application for the</span> <span data-start="684.72" data-end="687.09">iPhone like a web web app for the iphone</span> <span data-start="687.09" data-end="688.73">you don't really need to care about ie</span> <span data-start="688.73" data-end="693.06">ie before it so another way to have less</span> <span data-start="693.06" data-end="695.64">stuff on the page is to use the cash all</span> <span data-start="695.64" data-end="698.85">right so it used to be that people often</span> <span data-start="698.85" data-end="701.16">thing up but why do I care about the</span> </p>
<p><span data-start="701.16" data-end="702.99">JavaScript in C says their cash anyway</span> <span data-start="702.99" data-end="706.41">but uh idea who did an experiment it</span> <span data-start="706.41" data-end="709.17">show that actually the caching is not so</span> <span data-start="709.17" data-end="711.96">universal and found out that basically</span> <span data-start="711.96" data-end="714.32">sixty percent of all the yahoo users</span> <span data-start="714.32" data-end="716.85">come with a wooden empty cache and</span> <span data-start="716.85" data-end="719.13">twenty percent of all the page views are</span> <span data-start="719.13" data-end="722.46">with an empty cache so the cash is not</span> <span data-start="722.46" data-end="725.82">important is not as universal as we want</span> <span data-start="725.82" data-end="728.1">it to be right so you can do something</span> <span data-start="728.1" data-end="730.44">to help and that is set those far future</span> <span data-start="730.44" data-end="733.47">expires headers alright so that means</span> <span data-start="733.47" data-end="735.93">say that okay this JavaScript will be</span> <span data-start="735.93" data-end="738.93">cached for the next ten years so there's</span> <span data-start="738.93" data-end="741.3">an example saying okay the moment it was</span> <span data-start="741.3" data-end="743.82">access plus ten years so you can do this</span> <span data-start="743.82" data-end="746.58">for JavaScript CSS and images drawback</span> <span data-start="746.58" data-end="748.29">of course is that you cannot change this</span> <span data-start="748.29" data-end="751.74">image once it's a it's cached forever so</span> <span data-start="751.74" data-end="754.38">all you have to do is change the name of</span> <span data-start="754.38" data-end="756.99">it so that introduces a bit of</span> <span data-start="756.99" data-end="758.58">complexity but again everything's a</span> <span data-start="758.58" data-end="762.09">trade-off right so what about in line</span> <span data-start="762.09" data-end="764.58">versus external right so on one hand we</span> <span data-start="764.58" data-end="767.55">say okay have less HTTP requests which</span> <span data-start="767.55" data-end="769.32">means in line as much as possible but</span> <span data-start="769.32" data-end="771.72">then on the other hand we you can cash</span> <span data-start="771.72" data-end="775.32">those files if their external files so</span> <span data-start="775.32" data-end="777.51">here's one solution to have both of them</span> <span data-start="777.51" data-end="780.6">so on the first visit you are you in</span> <span data-start="780.6" data-end="783.66">line let's say your JavaScript and then</span> <span data-start="783.66" data-end="786.27">once the page loads with some set a time</span> <span data-start="786.27" data-end="787.88">out in a second or so they</span> <span data-start="787.88" data-end="790.67">you lazy load the the actual javascript</span> <span data-start="790.67" data-end="793.61">file which is the same is that you want</span> <span data-start="793.61" data-end="796.34">to do just in line in your h0 and then</span> <span data-start="796.34" data-end="797.63">write a cookie and say okay i'm done</span> <span data-start="797.63" data-end="800.48">with with the lazy loading so the next</span> <span data-start="800.48" data-end="804.02">time for the consecutive visits you read</span> <span data-start="804.02" data-end="805.76">that your server side will read the</span> <span data-start="805.76" data-end="808.85">cookie and say ok so this this person</span> <span data-start="808.85" data-end="810.23">already has the external files so I'm</span> <span data-start="810.23" data-end="812.77">not going to do the interlining anymore</span> <span data-start="812.77" data-end="815.75">so that about wraps it up for the less</span> <span data-start="815.75" data-end="818.66">tough in the waterfall so once you have</span> <span data-start="818.66" data-end="821.93">you know eventually settle for some</span> <span data-start="821.93" data-end="824.51">stuff to have in the waterfall so your</span> <span data-start="824.51" data-end="826.43">next task is to make those as small as</span> <span data-start="826.43" data-end="830.75">possible and the single most important</span> <span data-start="830.75" data-end="832.4">thing is to gzip right always make sure</span> <span data-start="832.4" data-end="834.71">that you're sending gzip content so this</span> <span data-start="834.71" data-end="838.85">is a graph sin shared by bill scott of</span> <span data-start="838.85" data-end="841.07">netflix so they were not jus zipping</span> <span data-start="841.07" data-end="843.59">there static components and this drop</span> <span data-start="843.59" data-end="845.54">here is the the day they turn on g</span> <span data-start="845.54" data-end="847.64">zipping after you join so basically so</span> <span data-start="847.64" data-end="851.03">all last fifty percent less traffic you</span> <span data-start="851.03" data-end="853.52">know then it would a single improvement</span> <span data-start="853.52" data-end="858.32">so bum for 4g zipping just make sure</span> <span data-start="858.32" data-end="860.12">that all the text content like</span> <span data-start="860.12" data-end="861.53">everything that is not already binary</span> <span data-start="861.53" data-end="863.69">everything does not an image or PDF or</span> <span data-start="863.69" data-end="866.65">zipper so that means so that the HTML</span> </p>
<p><span data-start="866.65" data-end="869.75">Javascript CSS any textual content is</span> <span data-start="869.75" data-end="873.41">sent gzipped and it's a it's a really</span> <span data-start="873.41" data-end="875.09">simple change or all you need is a</span> <span data-start="875.09" data-end="878.8">supposed to mean task to enable gzip in</span> <span data-start="878.8" data-end="881.15">another thing for the javascript to do</span> <span data-start="881.15" data-end="883.55">to make things smaller is to minify</span> <span data-start="883.55" data-end="885.95">right so this is an example so what do</span> <span data-start="885.95" data-end="890.3">you have so this comes from yui so you</span> <span data-start="890.3" data-end="893.38">have all your comments properly indented</span> <span data-start="893.38" data-end="896.72">code and like descriptive variables and</span> <span data-start="896.72" data-end="899.93">so on then you write a mini fire before</span> <span data-start="899.93" data-end="901.46">you go life and then you end up with</span> <span data-start="901.46" data-end="902.57">something like this which is much</span> <span data-start="902.57" data-end="904.13">shorter doesn't have any comments or</span> <span data-start="904.13" data-end="909.17">anything so no new lines variables are</span> <span data-start="909.17" data-end="913.55">renamed to two shorter names so what we</span> <span data-start="913.55" data-end="917.9">use is the yui compressor it's it's</span> <span data-start="917.9" data-end="920.81">written in java using rhino so it knows</span> <span data-start="920.81" data-end="921.61">about</span> <span data-start="921.61" data-end="924.59">it knows about your code so it can pre</span> <span data-start="924.59" data-end="926.09">optimize something so let's see if you</span> <span data-start="926.09" data-end="928.46">if you have study your concatenate in</span> <span data-start="928.46" data-end="931.28">static strings it will pre concatenate</span> <span data-start="931.28" data-end="933.71">them during the minification so it also</span> <span data-start="933.71" data-end="936.92">minified CSS and has a tolerance for</span> <span data-start="936.92" data-end="938.66">those hacks that we've standardized on</span> <span data-start="938.66" data-end="941.33">using the star in the underscore hack in</span> </p>
<p><span data-start="941.33" data-end="944.87">CSS and it will also add semi-colons at</span> <span data-start="944.87" data-end="947.9">the end of if you forget for the CSS so</span> <span data-start="947.9" data-end="949.58">it has really more than dangers</span> <span data-start="949.58" data-end="951.74">minification but trying to improve on</span> <span data-start="951.74" data-end="954.14">like static plays much as it can in your</span> <span data-start="954.14" data-end="957.7">code so another often overlooked</span> <span data-start="957.7" data-end="960.38">optimization is to minify your inline</span> <span data-start="960.38" data-end="962.21">code as well not only external files but</span> <span data-start="962.21" data-end="964.55">if you have some inline scripts and</span> <span data-start="964.55" data-end="969.88">styles they should be minified too so</span> <span data-start="969.88" data-end="973.4">the comparison is so if like some say</span> <span data-start="973.4" data-end="975.32">some people say okay I'm Gigi being</span> <span data-start="975.32" data-end="977.09">already I'm sending the compressed</span> <span data-start="977.09" data-end="978.98">content why do I care about modification</span> <span data-start="978.98" data-end="984.86">this is Julian during the creator of Yui</span> <span data-start="984.86" data-end="988.16">compressor so he took the jQuery so it</span> <span data-start="988.16" data-end="989.93">was expiring back in august two thousand</span> <span data-start="989.93" data-end="994.4">seven so it became from 60k the gzip</span> <span data-start="994.4" data-end="998.06">version was 20 k and if you minify and</span> <span data-start="998.06" data-end="1001.87">and then gzip then you get only 10k so</span> <span data-start="1001.87" data-end="1005.95">just do both and yeah I have in mind</span> <span data-start="1005.95" data-end="1007.66">also that there are some clients that do</span> <span data-start="1007.66" data-end="1013.51">not support gzip right so for those it's</span> <span data-start="1013.51" data-end="1016.21">better to send a mini fide version so</span> <span data-start="1016.21" data-end="1019.06">talking about less smaller component so</span> <span data-start="1019.06" data-end="1020.8">this is the smallest component that you</span> <span data-start="1020.8" data-end="1023.32">can ever get is basically the component</span> <span data-start="1023.32" data-end="1025.63">without any any content without anybody</span> <span data-start="1025.63" data-end="1029.77">right so this is a 204 no content HTTP</span> <span data-start="1029.77" data-end="1031.87">response so basically so this is an</span> <span data-start="1031.87" data-end="1033.97">example some people use those for</span> <span data-start="1033.97" data-end="1035.709">beacons let's say if you want to log</span> <span data-start="1035.709" data-end="1037.63">something so you want to send a request</span> <span data-start="1037.63" data-end="1039.07">but you don't really care about the</span> <span data-start="1039.07" data-end="1041.56">response and instead of sending one by</span> <span data-start="1041.56" data-end="1044.23">one give something like that or a pic so</span> <span data-start="1044.23" data-end="1047.26">give then you can just say okay just</span> <span data-start="1047.26" data-end="1049.03">don't send anything and then you then</span> <span data-start="1049.03" data-end="1049.49">you</span> <span data-start="1049.49" data-end="1054.44">locking them so we talked about less</span> <span data-start="1054.44" data-end="1057.5">stuff so next thing is to get out of the</span> <span data-start="1057.5" data-end="1060.05">way so you have those waterfalls you</span> <span data-start="1060.05" data-end="1062.09">want them as free falling as possible</span> <span data-start="1062.09" data-end="1064.34">right to be as quick as as possible so</span> <span data-start="1064.34" data-end="1066.89">what can interrupt your and make your</span> <span data-start="1066.89" data-end="1070.4">waterfall slower is the dns lookups</span> <span data-start="1070.4" data-end="1072.26">because it's not a component by the</span> <span data-start="1072.26" data-end="1074">browser it still has to look up to the</span> <span data-start="1074" data-end="1076.429">dns for this component so don't have</span> <span data-start="1076.429" data-end="1080.33">more than 22 of 24 dns lookups on a</span> <span data-start="1080.33" data-end="1083.21">single page have less redirects because</span> <span data-start="1083.21" data-end="1084.83">it just wasted time you know you request</span> <span data-start="1084.83" data-end="1087.47">something then and the server says oh no</span> <span data-start="1087.47" data-end="1089.33">go somewhere else oh fetch it from there</span> <span data-start="1089.33" data-end="1091.67">and the other thing is about to avoid</span> <span data-start="1091.67" data-end="1094.58">blocking JavaScript so this is one page</span> <span data-start="1094.58" data-end="1098.57">that I just by chance here is violating</span> <span data-start="1098.57" data-end="1103.64">all of those so first yeah so first you</span> <span data-start="1103.64" data-end="1106.4">make a request and what it does is a</span> <span data-start="1106.4" data-end="1108.41">redirect they say okay now go go</span> <span data-start="1108.41" data-end="1110.42">somewhere else and get it from from some</span> <span data-start="1110.42" data-end="1113.09">other so this is a binocular here this</span> <span data-start="1113.09" data-end="1116.24">is a DNS lookup this is a screenshot</span> <span data-start="1116.24" data-end="1119.54">from ID and PG Taylor so then it says</span> <span data-start="1119.54" data-end="1121.52">redirect so this icon means okey go</span> <span data-start="1121.52" data-end="1124.46">somewhere else so it fetches another it</span> <span data-start="1124.46" data-end="1126.44">does another DNS lookup because it's a</span> <span data-start="1126.44" data-end="1130.49">redirect to another domain so then it it</span> <span data-start="1130.49" data-end="1133.28">gets some HTML and apparently this HTML</span> <span data-start="1133.28" data-end="1134.929">is doing a JavaScript redirect at this</span> <span data-start="1134.929" data-end="1136.94">point because it doesn't have that icon</span> <span data-start="1136.94" data-end="1139.01">right so it's redirecting to yet another</span> </p>
<p><span data-start="1139.01" data-end="1142.58">HTML and then so basically you can see</span> <span data-start="1142.58" data-end="1144.35">that may be one-third or at least</span> <span data-start="1144.35" data-end="1147.02">one-fourth of the time in this waterfall</span> <span data-start="1147.02" data-end="1148.7">we spent before we actually started</span> <span data-start="1148.7" data-end="1150.38">doing anything we're just redirecting</span> <span data-start="1150.38" data-end="1153.74">looking up stuff and then then there's</span> <span data-start="1153.74" data-end="1156.02">this JavaScript right so you can see</span> <span data-start="1156.02" data-end="1158.45">further down how several components are</span> <span data-start="1158.45" data-end="1160.82">downloaded in parallel but this</span> <span data-start="1160.82" data-end="1163.16">JavaScript here blocks the parallel</span> <span data-start="1163.16" data-end="1165.98">downloads and doesn't doesn't let the</span> <span data-start="1165.98" data-end="1168.05">others go until the javascript is</span> <span data-start="1168.05" data-end="1171.2">finished so you know we all here know</span> <span data-start="1171.2" data-end="1173.39">that javascript rocks but it also blocks</span> <span data-start="1173.39" data-end="1176.72">right so when when you have javascript</span> <span data-start="1176.72" data-end="1179.419">on the page the browser will wait for</span> <span data-start="1179.419" data-end="1181.19">for the javascript you will arrive</span> <span data-start="1181.19" data-end="1182.51">before it continues</span> <span data-start="1182.51" data-end="1184.01">it makes sense because the JavaScript</span> <span data-start="1184.01" data-end="1186.17">may change the dome in some way made you</span> <span data-start="1186.17" data-end="1188.63">a location nature redirected somewhere</span> <span data-start="1188.63" data-end="1190.43">else in which case the browser will</span> <span data-start="1190.43" data-end="1193.13">download components for no reason so</span> <span data-start="1193.13" data-end="1194.93">this is changing by the way in more</span> <span data-start="1194.93" data-end="1197.9">recent browsers but still a large</span> <span data-start="1197.9" data-end="1201.89">percent of them are the javascript is</span> <span data-start="1201.89" data-end="1204.92">blocking so what you can do is include</span> <span data-start="1204.92" data-end="1206.48">the JavaScript with the widow dome</span> <span data-start="1206.48" data-end="1208.01">include so basically you create that</span> <span data-start="1208.01" data-end="1210.7">script tag on the fly and you set it to</span> <span data-start="1210.7" data-end="1216.08">the SRC the source to the file name so</span> <span data-start="1216.08" data-end="1218.78">in this case the JavaScript no longer</span> <span data-start="1218.78" data-end="1221.03">blocks the down the download so the the</span> <span data-start="1221.03" data-end="1223.07">rest of the components can can be</span> <span data-start="1223.07" data-end="1224.12">downloaded in parallel with the</span> </p>
<p><span data-start="1224.12" data-end="1227.6">JavaScript so then the question is</span> <span data-start="1227.6" data-end="1230.63">because if you do it this way like the</span> <span data-start="1230.63" data-end="1233.72">normal way then your your page will know</span> <span data-start="1233.72" data-end="1235.76">that if you include the JavaScript in</span> <span data-start="1235.76" data-end="1237.56">the header page after that in your HTML</span> <span data-start="1237.56" data-end="1241.22">you may do some inline JavaScript which</span> <span data-start="1241.22" data-end="1244.67">is certain that the code is already</span> <span data-start="1244.67" data-end="1247.4">there your dependencies libraries are</span> <span data-start="1247.4" data-end="1249.56">all loaded but if you do it this way you</span> <span data-start="1249.56" data-end="1253.79">don't know so what about the inline</span> <span data-start="1253.79" data-end="1256.1">scripts so you can just set up a simple</span> <span data-start="1256.1" data-end="1257.99">collection or a registry of all the</span> <span data-start="1257.99" data-end="1262.09">inline scripts that you want to have so</span> <span data-start="1262.09" data-end="1265.01">the first thing is to have somewhere up</span> <span data-start="1265.01" data-end="1266.45">in the head you have something simple</span> <span data-start="1266.45" data-end="1268.94">just just an array that will contain all</span> <span data-start="1268.94" data-end="1271.64">your inline code so as you go in the</span> </p>
<p><span data-start="1271.64" data-end="1273.89">HTML instead of having inline script</span> <span data-start="1273.89" data-end="1276.83">which gets executed right away then you</span> <span data-start="1276.83" data-end="1279.53">can instead of that then you you you</span> <span data-start="1279.53" data-end="1283.22">push a function to this to this registry</span> <span data-start="1283.22" data-end="1285.32">or this collection of all the inline</span> <span data-start="1285.32" data-end="1287.51">code that you have and at the end of</span> <span data-start="1287.51" data-end="1289.1">your main JavaScript once it arrives</span> <span data-start="1289.1" data-end="1290.93">then it will just loop through</span> <span data-start="1290.93" data-end="1292.34">everything that you've added to this</span> <span data-start="1292.34" data-end="1294.38">collection ended just execute all those</span> <span data-start="1294.38" data-end="1298.76">inline functions so we saw that</span> <span data-start="1298.76" data-end="1301.49">JavaScript blocks but what about CSS oh</span> <span data-start="1301.49" data-end="1303.68">the thing is that it's it's mostly</span> <span data-start="1303.68" data-end="1306.08">harmless it most of the browser's are</span> <span data-start="1306.08" data-end="1309.2">fine but in Firefox to a CSS will block</span> <span data-start="1309.2" data-end="1312.29">the the download of the other components</span> <span data-start="1312.29" data-end="1315.049">and also interestingly enough when</span> <span data-start="1315.049" data-end="1317.239">when your script is followed directly by</span> <span data-start="1317.239" data-end="1320.239">if your style is that followed by a</span> <span data-start="1320.239" data-end="1322.669">script tag regardless if it's in line or</span> <span data-start="1322.669" data-end="1324.799">external script even if it's an empty</span> <span data-start="1324.799" data-end="1328.309">script tag then the CSS will block the</span> <span data-start="1328.309" data-end="1333.049">downloads so just don't do that okay</span> <span data-start="1333.049" data-end="1336.649">finish this so yeah yet another</span> <span data-start="1336.649" data-end="1338.72">improvement the last one we're going to</span> <span data-start="1338.72" data-end="1340.73">talk about in the waterfall is to try to</span> <span data-start="1340.73" data-end="1342.289">start that waterfall as early as</span> <span data-start="1342.289" data-end="1344.779">possible so this is the the first</span> <span data-start="1344.779" data-end="1347.509">different diagram here is the normal way</span> <span data-start="1347.509" data-end="1351.259">of I know you by your server responds</span> <span data-start="1351.259" data-end="1354.049">with an HTML page and then this page</span> <span data-start="1354.049" data-end="1356.659">refers to some components and then once</span> <span data-start="1356.659" data-end="1359.539">the HTML arrives then the browser will</span> <span data-start="1359.539" data-end="1361.879">go and fetch the other components but</span> <span data-start="1361.879" data-end="1363.83">you can do something to start this</span> <span data-start="1363.83" data-end="1366.639">process earlier so move your waterfall</span> <span data-start="1366.639" data-end="1370.909">earlier so this is done by by flushing</span> <span data-start="1370.909" data-end="1373.309">the content the HTML that you already</span> <span data-start="1373.309" data-end="1376.279">have while your back-end is still</span> <span data-start="1376.279" data-end="1378.859">pinning us or costing some more data and</span> <span data-start="1378.859" data-end="1382.039">working on the full response then you</span> <span data-start="1382.039" data-end="1384.44">can in the same time start downloading</span> <span data-start="1384.44" data-end="1387.049">your components so for example this is a</span> </p>
<p><span data-start="1387.049" data-end="1389.659">PHP example so it's just a function</span> <span data-start="1389.659" data-end="1392.359">called flush right so in in the head of</span> <span data-start="1392.359" data-end="1394.609">your document you can you can refer to</span> <span data-start="1394.609" data-end="1397.429">your JavaScript your CSS and then</span> <span data-start="1397.429" data-end="1400.039">because it doesn't have any doesn't have</span> <span data-start="1400.039" data-end="1402.98">any logic here all right nothing nothing</span> <span data-start="1402.98" data-end="1405.499">complex it's all just static files so</span> <span data-start="1405.499" data-end="1407.659">this can be done instantaneously and</span> <span data-start="1407.659" data-end="1409.759">then as the brows as the server is</span> <span data-start="1409.759" data-end="1412.07">working on on the full response then the</span> <span data-start="1412.07" data-end="1415.909">browser can start loading components</span> <span data-start="1415.909" data-end="1419.929">instead of just sitting idle okay so we</span> <span data-start="1419.929" data-end="1422.859">talked about on all the waterfall stuff</span> <span data-start="1422.859" data-end="1427.58">so what about life after onload so the</span> <span data-start="1427.58" data-end="1429.559">optimizing the waterfall is the most</span> <span data-start="1429.559" data-end="1431.509">important thing you can do but so</span> <span data-start="1431.509" data-end="1433.429">depends on the application then it may</span> <span data-start="1433.429" data-end="1437.72">be may be doing a lot more work once</span> <span data-start="1437.72" data-end="1439.58">everything is there like if you have</span> <span data-start="1439.58" data-end="1440.96">gmail or some</span> <span data-start="1440.96" data-end="1445.039">really fat client application it spends</span> <span data-start="1445.039" data-end="1447.289">most of the time after the onload so</span> <span data-start="1447.289" data-end="1450.26">just a few optimizations that you can do</span> <span data-start="1450.26" data-end="1454.399">a first thing is to so we talk about</span> <span data-start="1454.399" data-end="1457.429">lazy loading preloading optimizing ex</span> <span data-start="1457.429" data-end="1460.929">hrs and some javascript optimizations</span> <span data-start="1460.929" data-end="1463.87">the lazy load so basically that means</span> <span data-start="1463.87" data-end="1466.909">anything that is not absolutely required</span> <span data-start="1466.909" data-end="1469.97">for the first view just download it</span> <span data-start="1469.97" data-end="1473.179">right so just split your huge JavaScript</span> <span data-start="1473.179" data-end="1476.21">into the absolutely required part in the</span> <span data-start="1476.21" data-end="1478.309">more bells and whistles so if you have</span> <span data-start="1478.309" data-end="1481.039">on the page like a Twitter badge or</span> <span data-start="1481.039" data-end="1483.14">something else that is not really your</span> <span data-start="1483.14" data-end="1485.149">page is not really the content if you</span> <span data-start="1485.149" data-end="1486.83">have a blog people come to see the</span> <span data-start="1486.83" data-end="1489.95">article right so let me get the article</span> <span data-start="1489.95" data-end="1492.409">all the way and the ones the person is</span> <span data-start="1492.409" data-end="1493.88">engaged with the page then in the</span> <span data-start="1493.88" data-end="1495.95">background you start loading the rest of</span> <span data-start="1495.95" data-end="1498.289">theta goes to the staff and you can also</span> <span data-start="1498.289" data-end="1502.1">sometimes you don't actually need some</span> <span data-start="1502.1" data-end="1504.2">content or some functionality before a</span> <span data-start="1504.2" data-end="1505.94">user interaction so if you have some</span> <span data-start="1505.94" data-end="1509.059">tabs you don't have to actually have the</span> <span data-start="1509.059" data-end="1511.279">content of those tabs in the page</span> <span data-start="1511.279" data-end="1512.96">because there's a great chance that the</span> <span data-start="1512.96" data-end="1515.899">user will never click this tab so just</span> <span data-start="1515.899" data-end="1518.09">wait for user interaction before you</span> <span data-start="1518.09" data-end="1522.289">load the extra functionality so</span> <span data-start="1522.289" data-end="1525.02">pre-loading is actually not helping your</span> <span data-start="1525.02" data-end="1526.49">page it's helping the page that comes</span> <span data-start="1526.49" data-end="1530.539">after you all right so if you're let's</span> <span data-start="1530.539" data-end="1533.09">see if you're on a login page in and the</span> <span data-start="1533.09" data-end="1535.73">user starts to type their username so</span> <span data-start="1535.73" data-end="1537.47">there's a great chance that unless they</span> <span data-start="1537.47" data-end="1538.909">forget their password that they'll go</span> <span data-start="1538.909" data-end="1541.34">into the membership area right and in</span> <span data-start="1541.34" data-end="1543.44">this inside area will have some some</span> <span data-start="1543.44" data-end="1546.07">more functionality maybe more JavaScript</span> <span data-start="1546.07" data-end="1549.919">so as the user types or is you're</span> <span data-start="1549.919" data-end="1551.51">looking at your page and you can start</span> <span data-start="1551.51" data-end="1553.279">in the background with some time out</span> <span data-start="1553.279" data-end="1555.289">start pre-loading things that will be</span> <span data-start="1555.289" data-end="1557.659">required later so you can preload images</span> </p>
<p><span data-start="1557.659" data-end="1560">CSS JavaScript you can even Provo just</span> <span data-start="1560" data-end="1562.279">that just prefetch the DNA</span> <span data-start="1562.279" data-end="1564.32">right if you just you know that the next</span> <span data-start="1564.32" data-end="1567.229">page will will will need to look up an</span> <span data-start="1567.229" data-end="1571.669">extra hostname you send a send an image</span> <span data-start="1571.669" data-end="1575.389">request that returns tool for no content</span> <span data-start="1575.389" data-end="1577.519">in this way it is that the browser is</span> <span data-start="1577.519" data-end="1583.69">has the DNS cache so what about the ajax</span> <span data-start="1583.69" data-end="1587.629">xhr optimization so again like the</span> <span data-start="1587.629" data-end="1590.21">waterfall make them small and have less</span> <span data-start="1590.21" data-end="1592.129">of them right so making small that means</span> <span data-start="1592.129" data-end="1594.08">don't forget to gzip because most of the</span> <span data-start="1594.08" data-end="1597.289">time the you send a request to get some</span> <span data-start="1597.289" data-end="1601.369">JSON data or XML or even text data so</span> <span data-start="1601.369" data-end="1604.07">it's mostly just exel data so just make</span> <span data-start="1604.07" data-end="1605.749">sure it's it's gzipped as well and</span> <span data-start="1605.749" data-end="1607.879">you'll probably want to use Jason</span> <span data-start="1607.879" data-end="1610.669">because it's less or both in XML unlike</span> <span data-start="1610.669" data-end="1615.619">your body of the response smaller so you</span> <span data-start="1615.619" data-end="1618.289">can also use the expires header or you</span> <span data-start="1618.289" data-end="1621.919">know just instruct the browser that this</span> <span data-start="1621.919" data-end="1624.889">this response is valid for the next even</span> <span data-start="1624.889" data-end="1626.269">if it's five minutes for 10 minutes</span> <span data-start="1626.269" data-end="1628.519">right if you don't update the server</span> <span data-start="1628.519" data-end="1631.549">data that often and all you can live</span> <span data-start="1631.549" data-end="1634.309">with with some some latency then just</span> <span data-start="1634.309" data-end="1637.58">when you send there yeah the xhr</span> <span data-start="1637.58" data-end="1639.589">response you cannot expire skater and</span> <span data-start="1639.589" data-end="1643.279">say a kid don't send me don't pick me in</span> <span data-start="1643.279" data-end="1644.929">the next 10 minutes because I won't have</span> <span data-start="1644.929" data-end="1647.599">any more new data for you and the other</span> <span data-start="1647.599" data-end="1649.7">thing is using get over post you</span> <span data-start="1649.7" data-end="1652.099">probably have seen this discussion so</span> <span data-start="1652.099" data-end="1655.19">why is that it might fall into that kind</span> <span data-start="1655.19" data-end="1657.08">of a micro optimization but it depends</span> <span data-start="1657.08" data-end="1658.46">on the page right if you have a lot of</span> <span data-start="1658.46" data-end="1662.389">requests so a simple xhr request that</span> <span data-start="1662.389" data-end="1666.95">that posts something really small like</span> <span data-start="1666.95" data-end="1669.95">you just pass test equals one so if you</span> <span data-start="1669.95" data-end="1673.399">look at so this is microsoft net monitor</span> <span data-start="1673.399" data-end="1675.379">right so if you look at what's going on</span> <span data-start="1675.379" data-end="1678.169">here so you have a one tcp packet which</span> <span data-start="1678.169" data-end="1679.969">sends the request just like the headers</span> <span data-start="1679.969" data-end="1682.759">of the request and one tcp/ip</span> <span data-start="1682.759" data-end="1684.739">parqueadero tcp packet that sends the</span> <span data-start="1684.739" data-end="1687.08">the payload which means just this</span> <span data-start="1687.08" data-end="1689.419">testicles work right so these are two</span> <span data-start="1689.419" data-end="1692.85">two packets for for just one request</span> <span data-start="1692.85" data-end="1695.94">where if you were using yet then there</span> <span data-start="1695.94" data-end="1698.1">will be just one request so this is now</span> <span data-start="1698.1" data-end="1702.18">no longer true in Firefox 31 I believe</span> <span data-start="1702.18" data-end="1705.33">but IE and other Firefox version</span> <span data-start="1705.33" data-end="1707.34">searched you're doing it so when you</span> <span data-start="1707.34" data-end="1709.2">don't actually want to post anything if</span> <span data-start="1709.2" data-end="1711.09">you just want to retrieve data just use</span> <span data-start="1711.09" data-end="1716.52">get and the post so a little bit about</span> <span data-start="1716.52" data-end="1720.03">optimizing JavaScript code right so you</span> <span data-start="1720.03" data-end="1722.25">know just be careful with that just</span> <span data-start="1722.25" data-end="1724.82">don't rush into you know going through</span> <span data-start="1724.82" data-end="1728.37">the code and just micro optimizing it's</span> <span data-start="1728.37" data-end="1731.04">so easy to you know to just get into it</span> <span data-start="1731.04" data-end="1733.65">and spend a lot of time in don't</span> <span data-start="1733.65" data-end="1736.5">actually achieve much again depends on</span> <span data-start="1736.5" data-end="1738.75">the application but that's a most common</span> <span data-start="1738.75" data-end="1740.72">scenario action Microsoft when they were</span> <span data-start="1740.72" data-end="1744.68">developing the IE eight they looked at</span> <span data-start="1744.68" data-end="1746.52">unfortunately we don't have those tools</span> <span data-start="1746.52" data-end="1748.29">to do this ourselves but they look at</span> <span data-start="1748.29" data-end="1751.05">the top five hundred or so pages and</span> <span data-start="1751.05" data-end="1752.97">looking where the tiny spent on those</span> <span data-start="1752.97" data-end="1755.07">pages so it turns out that the time</span> <span data-start="1755.07" data-end="1756.69">spending jscript which is there a</span> </p>
<p><span data-start="1756.69" data-end="1759.09">JavaScript engine was something like</span> <span data-start="1759.09" data-end="1761.88">seven percent or something like that for</span> <span data-start="1761.88" data-end="1764.61">them for in a normal sign right and if</span> <span data-start="1764.61" data-end="1767.61">you have a very heavy like gmail yahoo</span> <span data-start="1767.61" data-end="1769.2">mail something like a very heavy Ajax</span> <span data-start="1769.2" data-end="1771.17">the application then it can go up to</span> <span data-start="1771.17" data-end="1773.94">give it was 14 something like that the</span> <span data-start="1773.94" data-end="1778.59">average so as the crockford puts it if</span> <span data-start="1778.59" data-end="1780.87">we just wake up one day and all the</span> <span data-start="1780.87" data-end="1782.61">JavaScript engines are indefinitely</span> <span data-start="1782.61" data-end="1784.89">faster for most of the sites they will</span> <span data-start="1784.89" data-end="1786.9">just work pretty much to say because you</span> <span data-start="1786.9" data-end="1789.93">know you cannot get out much improvement</span> <span data-start="1789.93" data-end="1791.82">because that's not where the time is</span> <span data-start="1791.82" data-end="1795.69">spent in the normal case but again your</span> <span data-start="1795.69" data-end="1798.42">application may be different so about</span> <span data-start="1798.42" data-end="1800.79">the local variables so you know that the</span> <span data-start="1800.79" data-end="1803.67">global variables are not recommended</span> <span data-start="1803.67" data-end="1807.69">right because you have maintenance</span> <span data-start="1807.69" data-end="1809.64">problems and bugs arise because people</span> <span data-start="1809.64" data-end="1812.19">are sharing the global space I given</span> <span data-start="1812.19" data-end="1815.19">some library may be using some Global's</span> <span data-start="1815.19" data-end="1818.37">that you override by mistake so just get</span> <span data-start="1818.37" data-end="1820.71">into the habit of using the bar inside</span> <span data-start="1820.71" data-end="1823.789">of the function and</span> <span data-start="1823.789" data-end="1825.919">and localize the global variables if you</span> <span data-start="1825.919" data-end="1829.279">have a lot of work in your function to</span> <span data-start="1829.279" data-end="1830.69">do with global variables then you can</span> <span data-start="1830.69" data-end="1833.269">create a local variable assign it the</span> <span data-start="1833.269" data-end="1835.46">global value and then work with the with</span> <span data-start="1835.46" data-end="1838.97">the local so so here's one example we</span> <span data-start="1838.97" data-end="1841.489">have 11 global a variable then we have</span> <span data-start="1841.489" data-end="1844.159">another function in which we define a</span> <span data-start="1844.159" data-end="1846.049">again and then another function in which</span> <span data-start="1846.049" data-end="1849.109">we defy a again so so if you execute</span> <span data-start="1849.109" data-end="1851.389">this piece of code it will alert 3 right</span> <span data-start="1851.389" data-end="1854.859">so if you come and tell that last a</span> <span data-start="1854.859" data-end="1858.499">right so then JavaScript will will look</span> <span data-start="1858.499" data-end="1861.32">up the scope chain and say ok inside of</span> <span data-start="1861.32" data-end="1863.929">the b function I don't have an a so let</span> <span data-start="1863.929" data-end="1867.379">me just look it up and it finds it up</span> <span data-start="1867.379" data-end="1868.849">there in the other function so this</span> <span data-start="1868.849" data-end="1871.46">order to and naturally the last thing</span> <span data-start="1871.46" data-end="1874.639">well when when you comment both those</span> <span data-start="1874.639" data-end="1875.96">local variables and just leave the</span> <span data-start="1875.96" data-end="1878.419">global variable it will be consulted so</span> <span data-start="1878.419" data-end="1880.58">the idea is to to have less of those</span> <span data-start="1880.58" data-end="1885.889">chain lookups as much as possible so if</span> <span data-start="1885.889" data-end="1887.809">you have you know if you want to refer</span> <span data-start="1887.809" data-end="1890.809">to a global variable many times inside</span> <span data-start="1890.809" data-end="1893.539">your function then you can assign it to</span> <span data-start="1893.539" data-end="1895.909">a local value in a works full function</span> <span data-start="1895.909" data-end="1898.399">it right because functions are just</span> <span data-start="1898.399" data-end="1900.799">objects in JavaScript so if you look at</span> <span data-start="1900.799" data-end="1902.899">that alert function right so the</span> </p>
<p><span data-start="1902.899" data-end="1904.82">JavaScript say ok where's this alert</span> <span data-start="1904.82" data-end="1907.369">defined it's not here it's not here so</span> <span data-start="1907.369" data-end="1909.32">it must be have to look up the global</span> <span data-start="1909.32" data-end="1914.149">namespace so not not having global</span> <span data-start="1914.149" data-end="1916.519">variables for getting less hearing more</span> <span data-start="1916.519" data-end="1918.999">locals it also helps the Yui compressor</span> <span data-start="1918.999" data-end="1922.369">because it won't rename global variables</span> <span data-start="1922.369" data-end="1925.22">because it's it's too risky right so the</span> <span data-start="1925.22" data-end="1927.08">wire compressor if you have a long</span> <span data-start="1927.08" data-end="1929.389">variable name it will it will minify to</span> <span data-start="1929.389" data-end="1932.749">a let's say but if you have like into</span> </p>
<p><span data-start="1932.749" data-end="1937.46">Yui has yahoo dot util don't get X Y so</span> <span data-start="1937.46" data-end="1940.549">the wire compressor will not change the</span> <span data-start="1940.549" data-end="1945.71">name because it's a global it's a global</span> <span data-start="1945.71" data-end="1949.099">probably accessible right so it's risky</span> <span data-start="1949.099" data-end="1950.929">to rename any of this because they'll be</span> <span data-start="1950.929" data-end="1955.849">breakage so yeah so it's just be careful</span> <span data-start="1955.849" data-end="1957.83">with that and don't fall into too much</span> <span data-start="1957.83" data-end="1960.559">micro optimization but where it's</span> <span data-start="1960.559" data-end="1963.2">important is when you have a lot of dumb</span> <span data-start="1963.2" data-end="1965.239">access right so basically that's where</span> <span data-start="1965.239" data-end="1968.529">most of the time in in the average</span> <span data-start="1968.529" data-end="1970.82">application is paint is modifying the</span> <span data-start="1970.82" data-end="1973.639">Dom right and Dom is the most expensive</span> <span data-start="1973.639" data-end="1976.989">part so if you just have a look like a</span> <span data-start="1976.989" data-end="1981.409">exaggerated loop of 100,000 iterations</span> <span data-start="1981.409" data-end="1984.679">and just hitting beer just getting the</span> <span data-start="1984.679" data-end="1988.309">the head element I put a pointer to to</span> <span data-start="1988.309" data-end="1989.96">all the head elements right get elements</span> <span data-start="1989.96" data-end="1994.249">by tag name so if you do this you can</span> <span data-start="1994.249" data-end="1997.309">better write it like that where you</span> <span data-start="1997.309" data-end="1999.489">create a local variable called get</span> <span data-start="1999.489" data-end="2003.82">pointed to to that global method and</span> <span data-start="2003.82" data-end="2006.849">then then loop through that using the</span> <span data-start="2006.849" data-end="2010.749">just a local local reference so this</span> <span data-start="2010.749" data-end="2014.2">thing is four times faster than then if</span> <span data-start="2014.2" data-end="2016.779">you don't use the local variable so</span> <span data-start="2016.779" data-end="2019.629">again so when you touch the dome again</span> <span data-start="2019.629" data-end="2021.94">just be careful and sometimes you touch</span> <span data-start="2021.94" data-end="2024.909">it there implicitly right in here i I'm</span> <span data-start="2024.909" data-end="2026.82">looking a hundred hunt a thousand times</span> <span data-start="2026.82" data-end="2031.599">adding to the documents body in a rich</span> <span data-start="2031.599" data-end="2033.789">tml so in this case for every iteration</span> </p>
<p><span data-start="2033.789" data-end="2035.919">I'm touching the dome twice wants to</span> <span data-start="2035.919" data-end="2038.47">read the volume and wants to update the</span> <span data-start="2038.47" data-end="2044.529">value so if you do it this way where you</span> <span data-start="2044.529" data-end="2047.08">just have us a local variable you</span> <span data-start="2047.08" data-end="2049.059">updated local variable in touch the dome</span> <span data-start="2049.059" data-end="2053.02">only twice right instead of two thousand</span> <span data-start="2053.02" data-end="2055.869">times so this is actually quite fast</span> <span data-start="2055.869" data-end="2058.149">it's a thousand times faster than then</span> <span data-start="2058.149" data-end="2062.2">if you access the inner HTML directly so</span> <span data-start="2062.2" data-end="2066.25">it's it's quite a quite a change so the</span> <span data-start="2066.25" data-end="2068.109">other thing is to clean up after</span> <span data-start="2068.109" data-end="2070.349">yourself right because when the when the</span> <span data-start="2070.349" data-end="2073.51">garbage collection runs that may cause a</span> <span data-start="2073.51" data-end="2075.22">noticeable slow down right so what you</span> <span data-start="2075.22" data-end="2077.2">can can do is when you're done with</span> <span data-start="2077.2" data-end="2079.629">objects or their properties and they're</span> <span data-start="2079.629" data-end="2081.369">big and you know that you don't want</span> <span data-start="2081.369" data-end="2085.059">good use them just hint and use the</span> <span data-start="2085.059" data-end="2088.659">delete operator to to to say that ok I</span> <span data-start="2088.659" data-end="2093.279">no longer do that and so the same thing</span> <span data-start="2093.279" data-end="2095.829">with with the Dom element right so when</span> <span data-start="2095.829" data-end="2098.92">you when you say ok remove this Dom</span> <span data-start="2098.92" data-end="2102.25">element the remove child method will</span> <span data-start="2102.25" data-end="2105.329">return a reference to the removed</span> <span data-start="2105.329" data-end="2108.579">element right but you in most cases you</span> <span data-start="2108.579" data-end="2111.01">don't need that so why have it just</span> <span data-start="2111.01" data-end="2113.77">lying around so the better way to remove</span> <span data-start="2113.77" data-end="2116.47">nodes is just to prepare it with with</span> <span data-start="2116.47" data-end="2119.29">the delete operator so as soon as this</span> <span data-start="2119.29" data-end="2121.45">child is removed you also delete the</span> <span data-start="2121.45" data-end="2125.599">reference to it you no longer need that</span> <span data-start="2125.609" data-end="2130.029">ok a little bit over time branching</span> <span data-start="2130.029" data-end="2132.64">during the initialization right so I</span> <span data-start="2132.64" data-end="2135.42">guess everybody at some point of the</span> <span data-start="2135.42" data-end="2137.859">development life with javascript is done</span> <span data-start="2137.859" data-end="2140.38">something like this so attaching events</span> <span data-start="2140.38" data-end="2142.42">right is the idea that listener</span> <span data-start="2142.42" data-end="2144.97">supported yes then use it oh it's not</span> <span data-start="2144.97" data-end="2147.579">then for IE then use a touch event and</span> <span data-start="2147.579" data-end="2150.67">so on so every time you you use this my</span> <span data-start="2150.67" data-end="2152.799">event function right every time there is</span> <span data-start="2152.799" data-end="2154.569">this check performed over and over again</span> <span data-start="2154.569" data-end="2157.15">so instead of doing this then you can do</span> <span data-start="2157.15" data-end="2159.46">it only once so when you define the</span> <span data-start="2159.46" data-end="2162.069">function you say ok if I'd event listen</span> <span data-start="2162.069" data-end="2165.01">every supported then you define your my</span> <span data-start="2165.01" data-end="2169.299">event function to use that so and this</span> <span data-start="2169.299" data-end="2170.98">is basically defining defining the</span> <span data-start="2170.98" data-end="2174.309">function depending on what supported and</span> <span data-start="2174.309" data-end="2176.38">whatnot so every time then you use my</span> <span data-start="2176.38" data-end="2178.839">event it will no longer check every time</span> <span data-start="2178.839" data-end="2182.529">is this support it or not so a slight</span> <span data-start="2182.529" data-end="2184.21">variation of that is the so called lazy</span> <span data-start="2184.21" data-end="2187.599">definition so inside of your my event</span> <span data-start="2187.599" data-end="2190.69">functioned the first time you call it it</span> <span data-start="2190.69" data-end="2194.14">will overwrite itself depending on what</span> <span data-start="2194.14" data-end="2199.18">supported and then return the then</span> <span data-start="2199.18" data-end="2201.4">execute right so if you don't use it</span> <span data-start="2201.4" data-end="2204.7">this check is never performed or but if</span> <span data-start="2204.7" data-end="2206.02">you use it the first time you use it</span> <span data-start="2206.02" data-end="2207.39">there's one check and then</span> <span data-start="2207.39" data-end="2212.849">from then on there is no memorization if</span> <span data-start="2212.849" data-end="2215.49">you have like expensive really</span> <span data-start="2215.49" data-end="2218.069">complicated calculations going on and</span> <span data-start="2218.069" data-end="2219.9">there's a chance that things will repeat</span> <span data-start="2219.9" data-end="2222.63">so you it makes sense to cash the</span> <span data-start="2222.63" data-end="2225.089">already calculated value and because you</span> <span data-start="2225.089" data-end="2226.95">have a script functions are just objects</span> <span data-start="2226.95" data-end="2229.23">right so you can you can add properties</span> <span data-start="2229.23" data-end="2232.74">to them so in this case I'm adding a</span> <span data-start="2232.74" data-end="2238.74">cash property so the first time so you</span> <span data-start="2238.74" data-end="2241.41">run the you run the function with some</span> <span data-start="2241.41" data-end="2243.359">parameter and it has some complicated</span> <span data-start="2243.359" data-end="2245.88">task to do so it checks first consult</span> <span data-start="2245.88" data-end="2247.74">the cash is it is this thing already</span> <span data-start="2247.74" data-end="2250.23">being calculated some point of time no</span> <span data-start="2250.23" data-end="2251.549">it is and then you start your</span> <span data-start="2251.549" data-end="2254.039">complicated task once you're done you</span> <span data-start="2254.039" data-end="2255.869">write the result it can be a single</span> <span data-start="2255.869" data-end="2257.13">value it can be an object can be</span> <span data-start="2257.13" data-end="2259.47">anything your right is to the cash so</span> <span data-start="2259.47" data-end="2260.97">the next time you call the same fraction</span> <span data-start="2260.97" data-end="2262.76">with the same parameter there's no</span> <span data-start="2262.76" data-end="2266.94">additional calculation the threads you</span> <span data-start="2266.94" data-end="2268.41">know javascript is a single threaded</span> <span data-start="2268.41" data-end="2270.48">language so when you do some really</span> <span data-start="2270.48" data-end="2273">intensive color computation then the</span> <span data-start="2273" data-end="2274.5">whole UI freezes it sounds really</span> <span data-start="2274.5" data-end="2276.779">friendly so modern browsers like five</span> <span data-start="2276.779" data-end="2279.779">thousand three-one in safari for they</span> <span data-start="2279.779" data-end="2282.119">support web workers like I think it</span> <span data-start="2282.119" data-end="2283.799">started with limit gears but now its</span> <span data-start="2283.799" data-end="2286.079">native for the browsers so you can have</span> <span data-start="2286.079" data-end="2291.799">a worker thread right and and then send</span> <span data-start="2291.799" data-end="2294.329">exchange messages so you let this</span> <span data-start="2294.329" data-end="2296.49">complicated task work in the background</span> <span data-start="2296.49" data-end="2298.74">and then get a notification one this is</span> <span data-start="2298.74" data-end="2302.22">done and for older browsers that do not</span> <span data-start="2302.22" data-end="2305.119">support that there was this set timeout</span> <span data-start="2305.119" data-end="2308.609">approach because what's a timeout you're</span> <span data-start="2308.609" data-end="2311.039">releasing that main thread right so you</span> <span data-start="2311.039" data-end="2313.74">do a chunk of work in your function then</span> <span data-start="2313.74" data-end="2317.759">you then you schedule with using say</span> <span data-start="2317.759" data-end="2320.069">time you schedule the nigga that you run</span> <span data-start="2320.069" data-end="2323.25">again in one just one millisecond which</span> <span data-start="2323.25" data-end="2326.7">is enough 40 for the you I'd not to be</span> <span data-start="2326.7" data-end="2329.039">locked in irresponsible so you just do</span> <span data-start="2329.039" data-end="2332.91">work by chunks so this would be covered</span> <span data-start="2332.91" data-end="2334.65">for life after unload lazy loading</span> <span data-start="2334.65" data-end="2337.65">preloading better xhr and some</span> </p>
<p><span data-start="2337.65" data-end="2339.359">JavaScript optimizations and the last</span> <span data-start="2339.359" data-end="2340.13">thing</span> <span data-start="2340.13" data-end="2342.23">minute I was going to talk more about</span> <span data-start="2342.23" data-end="2345.88">why I three but there was a beach track</span> <span data-start="2345.88" data-end="2347.96">discussion so I just going to say a few</span> <span data-start="2347.96" data-end="2350.48">words about the performance improvements</span> <span data-start="2350.48" data-end="2352.76">of Yui 3 so you know how search we are</span> <span data-start="2352.76" data-end="2355.07">excited about is because we are using</span> </p>
<p><span data-start="2355.07" data-end="2359.72">Yui to and actually one of the Ryan one</span> <span data-start="2359.72" data-end="2361.94">of developers went then just comment at</span> <span data-start="2361.94" data-end="2362.9">all the things that we don't need</span> <span data-start="2362.9" data-end="2365.33">because Yui to comes with ok this is the</span> <span data-start="2365.33" data-end="2368.45">functionality but we don't have to you</span> <span data-start="2368.45" data-end="2372.17">we don't use all of this so and Yui 3</span> <span data-start="2372.17" data-end="2375.17">first of all it's lighter so it's a it's</span> <span data-start="2375.17" data-end="2379.88">less unless k by kilobytes over the wire</span> <span data-start="2379.88" data-end="2383.24">but it also has more more modularized</span> <span data-start="2383.24" data-end="2385.31">and it has modules & sub modules so you</span> <span data-start="2385.31" data-end="2388.16">can more specifically define ok this is</span> <span data-start="2388.16" data-end="2390.11">just the things that I need I don't need</span> <span data-start="2390.11" data-end="2392.27">all of these edges so fine grained</span> <span data-start="2392.27" data-end="2394.97">control and there's a configuration</span> <span data-start="2394.97" data-end="2396.95">utility you can say okay I want this</span> <span data-start="2396.95" data-end="2400.91">isn't daddy to give you URL that you can</span> <span data-start="2400.91" data-end="2405.35">use so they took all so it's faster they</span> <span data-start="2405.35" data-end="2407.39">took the wire it into the opportunity to</span> <span data-start="2407.39" data-end="2410.84">to refactor and like then you can have</span> <span data-start="2410.84" data-end="2414.41">these these modules so they can either</span> <span data-start="2414.41" data-end="2417.2">be served with with what they call a</span> <span data-start="2417.2" data-end="2419.36">combo handler so this is if you host</span> <span data-start="2419.36" data-end="2421.79">your libraries that are the yahoo EP is</span> <span data-start="2421.79" data-end="2424.94">the main this como handler will merge oh</span> <span data-start="2424.94" data-end="2427.28">you're all the little modules that you</span> <span data-start="2427.28" data-end="2429.4">want will merge into a single file and</span> <span data-start="2429.4" data-end="2432.47">minify them I saw you don't have to</span> <span data-start="2432.47" data-end="2434.11">worry about unification and</span> <span data-start="2434.11" data-end="2438.02">concatenation is the one and the another</span> <span data-start="2438.02" data-end="2441.38">way to load Yui 3 functionalities this</span> <span data-start="2441.38" data-end="2443.75">soft self populating so you just include</span> <span data-start="2443.75" data-end="2446.63">the minimum the Yui loader and from</span> <span data-start="2446.63" data-end="2448.79">there when you can say okay I want the</span> <span data-start="2448.79" data-end="2452.6">animation module and it to actually go</span> <span data-start="2452.6" data-end="2455.81">ahead and fetch it for you so yeah</span> <span data-start="2455.81" data-end="2459.83">that's all I had to say sorry 10 minutes</span> <span data-start="2459.83" data-end="2462.38">late okay thank you very much let's get</span> </p>
</section>