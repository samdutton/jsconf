<section>
<p><span data-start="17.31" data-end="23.14">good morning I'm Doug I'm going to talk</span> <span data-start="23.14" data-end="26.23">about Tootie which in my opinion is a</span> <span data-start="26.23" data-end="29.68">fun way to browser test my name is Toby</span> <span data-start="29.68" data-end="33.1">ho and I want to thank my employer data</span> <span data-start="33.1" data-end="35.86">track for making it possible for me to</span> <span data-start="35.86" data-end="42.46">be here this is me i'm outside in the</span> <span data-start="42.46" data-end="45.239">parking lot taking a picture of myself</span> <span data-start="45.239" data-end="48.34">just after getting a haircut from super</span> <span data-start="48.34" data-end="52.81">walmart in preparation for coming here</span> <span data-start="52.81" data-end="54.19">to this conference to give this</span> <span data-start="54.19" data-end="58.21">presentation so now that you know my</span> <span data-start="58.21" data-end="64.03">qualifications let's begin i'm going to</span> <span data-start="64.03" data-end="66.52">show off a side project which i've been</span> <span data-start="66.52" data-end="69.22">working on since the end of last year it</span> <span data-start="69.22" data-end="72.82">is called Tootsie Tootsie is an Italian</span> <span data-start="72.82" data-end="75.759">word that means all together you may</span> <span data-start="75.759" data-end="78.28">have seen it in musical scores where it</span> <span data-start="78.28" data-end="82.66">is used as a signal to the band to play</span> <span data-start="82.66" data-end="89.34">all together Tootsie the project is a</span> </p>
<p><span data-start="89.34" data-end="92.2">JavaScript console that is capable of</span> <span data-start="92.2" data-end="94.869">executing JavaScript on multiple web</span> <span data-start="94.869" data-end="100.899">browsers simultaneously so the website</span> <span data-start="100.899" data-end="105.369">is to tjs calm in order to get started</span> <span data-start="105.369" data-end="108.1">first you create a room a room is just a</span> <span data-start="108.1" data-end="110.41">way in which I keep everybody separate</span> <span data-start="110.41" data-end="113.47">separate so that everybody is an</span> <span data-start="113.47" data-end="115.75">executing JavaScript on everybody else's</span> <span data-start="115.75" data-end="118.75">browsers so I'm going to go ahead and</span> <span data-start="118.75" data-end="122.11">create a room and at this point I'm</span> <span data-start="122.11" data-end="127.509">dropped into a JavaScript show where I</span> <span data-start="127.509" data-end="131.99">can execute any arbitrary JavaScript</span> <span data-start="132" data-end="135.22">this you're out here is associated with</span> <span data-start="135.22" data-end="138.73">the room that it is connected to so if</span> <span data-start="138.73" data-end="141.01">you want to connect another browser you</span> <span data-start="141.01" data-end="143.98">would just copy and paste the URL into</span> <span data-start="143.98" data-end="146.98">that one as well so I'm going to update</span> <span data-start="146.98" data-end="150.38">it to the room that I just created</span> <span data-start="150.38" data-end="155.09">so now that both Safari and chrome are</span> <span data-start="155.09" data-end="158.93">connected to this room any JavaScript</span> <span data-start="158.93" data-end="162.17">that you execute here will be executed</span> <span data-start="162.17" data-end="165.71">by both browsers and the results of both</span> <span data-start="165.71" data-end="171.23">will be displayed so I'm going to</span> <span data-start="171.23" data-end="174.38">connect a few more browsers now to start</span> <span data-start="174.38" data-end="182.26">start off</span> </p>
<p><span data-start="182.27" data-end="188.12">I have a Firefox 4 and I'm going to tack</span> <span data-start="188.12" data-end="193.85">on a cup of IE instances as well I want</span> <span data-start="193.85" data-end="201.25">IE 8 as well as I 7 so to emulate ie7 I</span> <span data-start="201.25" data-end="204.77">will go into developer tools and put it</span> <span data-start="204.77" data-end="211.4">into a e7 milk so now we can use the</span> <span data-start="211.4" data-end="214.16">browser's command to see the set of</span> <span data-start="214.16" data-end="216.56">browsers that are connected to this room</span> <span data-start="216.56" data-end="223.55">right now also i want to mention there's</span> <span data-start="223.55" data-end="225.38">just three comments that are available</span> <span data-start="225.38" data-end="228.02">in this console the help will print the</span> <span data-start="228.02" data-end="230.72">help message browsers as you just saw</span> <span data-start="230.72" data-end="234.29">and reset will reset the javascript</span> <span data-start="234.29" data-end="237.38">sandbox which basically means it</span> <span data-start="237.38" data-end="239.66">destroys the iframe that you're running</span> <span data-start="239.66" data-end="241.82">your code in and creates anyone so</span> <span data-start="241.82" data-end="244.4">everything is blown away you start a</span> <span data-start="244.4" data-end="252.98">fresh so let me let me just put all</span> <span data-start="252.98" data-end="255.35">these windows side by side here arrange</span> <span data-start="255.35" data-end="259.13">them okay and I'm going to use chrome as</span> <span data-start="259.13" data-end="266.44">the driver so in general any javascript</span> <span data-start="266.44" data-end="270.38">most for the most part you throw some</span> <span data-start="270.38" data-end="272.54">javascript at these browsers they will</span> <span data-start="272.54" data-end="277.58">give you the same at same answer but not</span> <span data-start="277.58" data-end="283.46">always so sometimes browsers just cannot</span> <span data-start="283.46" data-end="288.79">agree on what to do for some edge cases</span> <span data-start="288.79" data-end="296.6">for example let's say I were to create</span> <span data-start="296.6" data-end="299.84">an input element and set the value to a</span> <span data-start="299.84" data-end="303.11">multi-line strength if i get the value</span> <span data-start="303.11" data-end="307.19">back the browser's do not agree some</span> <span data-start="307.19" data-end="310.1">will just concatenate the lines others</span> <span data-start="310.1" data-end="312.86">will put a space in between and some</span> <span data-start="312.86" data-end="315.59">others some other older browsers</span> <span data-start="315.59" data-end="320.36">will preserve that new life so if you</span> <span data-start="320.36" data-end="326.48">ask them who they are they will give you</span> <span data-start="326.48" data-end="329.57">extremely long names differentiating</span> <span data-start="329.57" data-end="337.49">themselves from each other but then</span> <span data-start="337.49" data-end="341.36">again maybe just maybe they're not all</span> <span data-start="341.36" data-end="347.57">that different from each other so this</span> <span data-start="347.57" data-end="351.83">is just a brief demo of 2t the web-based</span> <span data-start="351.83" data-end="355.79">version but that is not all there's also</span> <span data-start="355.79" data-end="360.68">a command line version of 2t which you</span> <span data-start="360.68" data-end="369.35">can install using NPM install 2d so once</span> <span data-start="369.35" data-end="372.35">you do that you can start it by saying</span> <span data-start="372.35" data-end="376.12">2d and then giving it the room URL and</span> <span data-start="376.12" data-end="379.61">now there's to the right in your console</span> <span data-start="379.61" data-end="384.74">and here basically anything you can do</span> <span data-start="384.74" data-end="388.13">in the web version you can do here with</span> <span data-start="388.13" data-end="390.62">the exception that since this is not</span> <span data-start="390.62" data-end="393.26">actually a browser it's not responsible</span> <span data-start="393.26" data-end="395.69">for executing any JavaScript it just</span> <span data-start="395.69" data-end="400.93">sends them out so I forgot to mention</span> <span data-start="400.93" data-end="406.19">console if you if you do a console that</span> <span data-start="406.19" data-end="410.45">log then it will render it in blue</span> <span data-start="410.45" data-end="413.9">instead of green and the green the green</span> <span data-start="413.9" data-end="416.96">is the actual return value of this</span> <span data-start="416.96" data-end="419.54">statement that you just execute it and</span> <span data-start="419.54" data-end="421.85">then the blue is any council messages</span> <span data-start="421.85" data-end="425.96">that you print em so you can use exit to</span> <span data-start="425.96" data-end="429.89">accept that now also comes with that NPM</span> <span data-start="429.89" data-end="434.84">package is a JavaScript driver which you</span> <span data-start="434.84" data-end="437.06">can use to script all the browsers that</span> <span data-start="437.06" data-end="441.77">are connected to the room so i will show</span> <span data-start="441.77" data-end="444.23">you how to is this tool oh by the way</span> <span data-start="444.23" data-end="447.169">should i make it a little</span> <span data-start="447.169" data-end="451.129">maybe all right I'm going to show you</span> <span data-start="451.129" data-end="453.65">how to use it use the library so first</span> <span data-start="453.65" data-end="458.479">you require to t inside which there is a</span> <span data-start="458.479" data-end="466.879">2d constructor so you call the 2d</span> <span data-start="466.879" data-end="470.12">constructor again with the URL of the</span> <span data-start="470.12" data-end="475.34">room you want to connect to the first</span> <span data-start="475.34" data-end="477.999">thing you want to do is register our</span> <span data-start="477.999" data-end="482.93">binding to the message event this will</span> <span data-start="482.93" data-end="485.779">tell you of any messages that the</span> <span data-start="485.779" data-end="488.93">browser's are passing to you so I'm just</span> <span data-start="488.93" data-end="491.93">going to console lock this message for</span> <span data-start="491.93" data-end="496.909">now so once you do that you can start</span> <span data-start="496.909" data-end="500.509">using the eval method to send the</span> <span data-start="500.509" data-end="507.7">browser JavaScript</span> <span data-start="507.71" data-end="510.72">so I send the browser's some JavaScript</span> <span data-start="510.72" data-end="514.709">all of them executed and it sent me back</span> <span data-start="514.709" data-end="517.89">these replies some of them are the</span> <span data-start="517.89" data-end="520.979">console messages others are the replies</span> <span data-start="520.979" data-end="523.68">which give you the return value of the</span> <span data-start="523.68" data-end="531.39">statement you could also has in the</span> <span data-start="531.39" data-end="537.089">function here if you like and then that</span> <span data-start="537.089" data-end="539.19">would also just get executed in the</span> <span data-start="539.19" data-end="544.17">browser and but with the library there's</span> <span data-start="544.17" data-end="548.07">an added capability now you can load</span> <span data-start="548.07" data-end="553.56">some local you can load some local files</span> <span data-start="553.56" data-end="557.19">and have the files get executed in the</span> <span data-start="557.19" data-end="560.43">browsers as well which I'll show to you</span> <span data-start="560.43" data-end="570.639">right now</span> <span data-start="570.649" data-end="578.48">so so I have a test suite that's written</span> <span data-start="578.48" data-end="582.889">in jasmine or risk using jasmine which</span> <span data-start="582.889" data-end="587.089">jasmin have been using it for a while</span> <span data-start="587.089" data-end="589.509">and i highly recommend it it's very</span> <span data-start="589.509" data-end="595.639">full-featured and very solid so i have a</span> <span data-start="595.639" data-end="598.67">test suite and i want to run it how am I</span> <span data-start="598.67" data-end="601.579">gonna run it well I'll just write a</span> <span data-start="601.579" data-end="604.879">script using the 2d driver so this is</span> <span data-start="604.879" data-end="611.6">that script first we connect to reuse</span> <span data-start="611.6" data-end="613.629">the driver to connect to the 2t server</span> <span data-start="613.629" data-end="617.899">here I'll just update it with our URL</span> <span data-start="617.899" data-end="623.209">for the room I have a display function</span> <span data-start="623.209" data-end="626.54">that will print out any console log</span> <span data-start="626.54" data-end="628.1">messages that come back from the</span> <span data-start="628.1" data-end="630.17">browsers and right now I'm only</span> <span data-start="630.17" data-end="632.749">interested in the console log and any</span> <span data-start="632.749" data-end="636.999">errors that come out essentially the</span> <span data-start="636.999" data-end="639.589">result of the tests is going to be</span> <span data-start="639.589" data-end="642.079">locked to the council in this example</span> <span data-start="642.079" data-end="646.249">and so once i am connected first I want</span> <span data-start="646.249" data-end="648.529">to reset the sandbox to get a</span> <span data-start="648.529" data-end="651.819">predictable environment then I just load</span> <span data-start="651.819" data-end="655.759">the file the set of files that I need so</span> <span data-start="655.759" data-end="658.279">first there's Jasmine the testing</span> <span data-start="658.279" data-end="661.85">framework Jasmine console Jasmine</span> <span data-start="661.85" data-end="664.839">reporter is the reporter that i wrote to</span> <span data-start="664.839" data-end="668.319">print the test results into the console</span> <span data-start="668.319" data-end="672.079">instead of displaying it in HTML and</span> <span data-start="672.079" data-end="674.749">then there's the implementation file and</span> <span data-start="674.749" data-end="678.17">the test file and then at the end i'm</span> <span data-start="678.17" data-end="680.449">just going to use eval to kick off the</span> <span data-start="680.449" data-end="683.48">test suite at the end i'm just going to</span> <span data-start="683.48" data-end="686.48">exit out of this program but before that</span> </p>
<p><span data-start="686.48" data-end="689.809">I want to wait for the console message</span> <span data-start="689.809" data-end="692.149">to come in because that's what tells us</span> <span data-start="692.149" data-end="696.709">the test results so let's try running</span> <span data-start="696.709" data-end="697.68">that now</span> <span data-start="697.68" data-end="711.75">I saw it reset the sandboxes and tada so</span> <span data-start="711.75" data-end="716.01">offer so it ran the tests in our five</span> <span data-start="716.01" data-end="718.83">browsers but for completeness I'm going</span> <span data-start="718.83" data-end="721.649">to show you a felling test I'm just</span> <span data-start="721.649" data-end="727.89">going to mess up this code and run it so</span> <span data-start="727.89" data-end="730.11">that's that's what it might look like</span> <span data-start="730.11" data-end="736.74">with fouling tests now if you do TDD you</span> <span data-start="736.74" data-end="738.45">might notice that it's sometimes it's</span> <span data-start="738.45" data-end="740.49">tedious having to switch back and forth</span> <span data-start="740.49" data-end="743.43">between your editor and your console all</span> <span data-start="743.43" data-end="747.149">the time so but with no Jas is kind of</span> <span data-start="747.149" data-end="750.899">easy to write a script that or monitor</span> <span data-start="750.899" data-end="753.33">any changes in your source file and then</span> <span data-start="753.33" data-end="757.44">rerun the tests automatically so I have</span> <span data-start="757.44" data-end="768.51">a script that does that</span> <span data-start="768.52" data-end="770.83">so now this time i just have the</span> <span data-start="770.83" data-end="774.22">required scripts in an array and then i</span> <span data-start="774.22" data-end="777.31">just say for each script going to do a</span> <span data-start="777.31" data-end="779.98">watch file on it for modification and</span> <span data-start="779.98" data-end="783.61">then anytime it's modified any of them</span> </p>
<p><span data-start="783.61" data-end="787.11">I'll just rerun the tests pretty simple</span> <span data-start="787.11" data-end="793.9">and i'm just going to demo for you the</span> <span data-start="793.9" data-end="803.09">the workflow of doing TDD using this oh</span> <span data-start="803.1" data-end="807.52">I better update update the script to</span> <span data-start="807.52" data-end="819.07">come to the right one okay</span> <span data-start="819.08" data-end="823.45">ok the first first time around it just</span> <span data-start="823.45" data-end="826.61">it just ran on all five browsers that</span> <span data-start="826.61" data-end="828.89">there weren't any tests yet because</span> <span data-start="828.89" data-end="831.35">these are empty files so for this</span> <span data-start="831.35" data-end="833.96">exercise I'm just going to write a shim</span> <span data-start="833.96" data-end="839.79">for the array prototype dot map method</span> <span data-start="839.8" data-end="845.31">so i'm going to say describe array map</span> <span data-start="845.32" data-end="854.569">it should know</span> <span data-start="854.579" data-end="858.089">and i'm going to say expect if I map 1 2</span> <span data-start="858.089" data-end="865.019">3 2 i just multiply everything by 2 then</span> </p>
<p><span data-start="865.019" data-end="870.72">I should get a value equal to 2 4 6 here</span> <span data-start="870.72" data-end="873.119">I save it and it sees the changes and</span> <span data-start="873.119" data-end="876.569">automatically rerun the tests so it</span> <span data-start="876.569" data-end="880.529">passed in Safari Firefox and Chrome but</span> <span data-start="880.529" data-end="882.66">not in IE because I e doesn't support</span> <span data-start="882.66" data-end="886.399">that method so i guess i'll just have to</span> <span data-start="886.399" data-end="894.179">write the method myself so i'm going to</span> <span data-start="894.179" data-end="897.559">say if it doesn't exist and I'll just</span> <span data-start="897.559" data-end="907.41">use my own implementation</span> <span data-start="907.42" data-end="911.45">so I need a returning array and a cache</span> <span data-start="911.45" data-end="923.74">the length</span> <span data-start="923.75" data-end="937.13">at the end return and yep and so yay it</span> <span data-start="937.13" data-end="938.99">passed everything it passed it for all</span> <span data-start="938.99" data-end="947.2">the browsers that I'm interested in so</span> <span data-start="947.2" data-end="949.94">now that that's a gross simplification</span> <span data-start="949.94" data-end="953.75">of the map method obviously I could go</span> <span data-start="953.75" data-end="955.76">further and make it more correct but I'm</span> <span data-start="955.76" data-end="958.1">not going to so the point of this is</span> <span data-start="958.1" data-end="962.29">just to show you what how TDD might work</span> <span data-start="962.29" data-end="973.13">using the tootsie driver but the 2d</span> <span data-start="973.13" data-end="974.57">driver you can use it for other things</span> <span data-start="974.57" data-end="980.36">too not just testing and i'm going to</span> <span data-start="980.36" data-end="985.88">show you i'm gonna build a browser</span> <span data-start="985.88" data-end="988.79">feature comparison table using the 2d</span> <span data-start="988.79" data-end="1004.05">driver so i wrote a script</span> <span data-start="1004.06" data-end="1007.06">update it to the room that I just</span> <span data-start="1007.06" data-end="1011.5">created arrow script that will it'll</span> <span data-start="1011.5" data-end="1014.89">first load modernizer the feature</span> <span data-start="1014.89" data-end="1018.76">detection library and then it will</span> <span data-start="1018.76" data-end="1021.07">basically loop through the moderniser</span> <span data-start="1021.07" data-end="1024.94">object for each of the features that it</span> <span data-start="1024.94" data-end="1030.19">detects and it'll built a print awesome</span> <span data-start="1030.19" data-end="1035.74">table headers and it'll it'll and then</span> <span data-start="1035.74" data-end="1038.8">it'll out the row for that browser but</span> <span data-start="1038.8" data-end="1042.37">it will just put an X in the rows up in</span> <span data-start="1042.37" data-end="1045.1">the column it'll put an X in the column</span> <span data-start="1045.1" data-end="1048.16">where that corresponds to the feature</span> <span data-start="1048.16" data-end="1052.6">that that browser supports so I don't go</span> <span data-start="1052.6" data-end="1054.67">line by line through this script but</span> <span data-start="1054.67" data-end="1058.47">i'll just show you what it does here no</span> <span data-start="1058.47" data-end="1065.92">so if i say like run it oh that's not</span> <span data-start="1065.92" data-end="1073.36">very okay i'll put it into a file let it</span> <span data-start="1073.36" data-end="1076.82">come</span> <span data-start="1076.83" data-end="1085.86">okay hopefully it's working we missed I</span> <span data-start="1085.86" data-end="1088.47">seven somehow but you get the idea so</span> <span data-start="1088.47" data-end="1095.19">it's a textual table like this so table</span> <span data-start="1095.19" data-end="1097.649">in ascii essentially but also happened</span> <span data-start="1097.649" data-end="1099.51">to have some code lying around that will</span> <span data-start="1099.51" data-end="1104.059">convert that ASCII table into HTML so I</span> <span data-start="1104.059" data-end="1106.74">run the script that does the whole thing</span> <span data-start="1106.74" data-end="1116.46">now</span> <span data-start="1116.47" data-end="1120.68">ok</span> <span data-start="1120.69" data-end="1126.87">ouch we lost a couple of browsers let me</span> <span data-start="1126.87" data-end="1134.389">see if I can get them back</span> <span data-start="1134.399" data-end="1136.59">sure</span> </p>
<p><span data-start="1136.59" data-end="1142.81">Oh</span> <span data-start="1142.82" data-end="1147.38">okay yay so yeah just by running that</span> <span data-start="1147.38" data-end="1151.279">script now have generated this feature</span> <span data-start="1151.279" data-end="1156.32">comparison table nice okay so last thing</span> <span data-start="1156.32" data-end="1162.669">I want to show you is you can also do</span> <span data-start="1162.669" data-end="1174.47">npm install to t server so in case to</span> <span data-start="1174.47" data-end="1178.19">tjs com goes down maybe because I'm I</span> <span data-start="1178.19" data-end="1183.139">can't afford to have it stay up so once</span> <span data-start="1183.139" data-end="1186.47">you install this you just run to t</span> <span data-start="1186.47" data-end="1189.889">server and it will serve to tea on port</span> <span data-start="1189.889" data-end="1202.29">8080 so you can access it directly</span> <span data-start="1202.3" data-end="1208.12">access directly on port 8080 this is</span> <span data-start="1208.12" data-end="1211.33">running in standalone mode which there</span> <span data-start="1211.33" data-end="1213.82">is only one room there are no multiple</span> <span data-start="1213.82" data-end="1216.22">rooms because presumably you're just</span> <span data-start="1216.22" data-end="1219.19">running it on your own so but you can</span> <span data-start="1219.19" data-end="1222.19">use this top-level URL in any of the</span> <span data-start="1222.19" data-end="1231.4">places that I show in the demo so this</span> <span data-start="1231.4" data-end="1234.19">is still early days for this project if</span> <span data-start="1234.19" data-end="1237.04">you play with it and you come across any</span> <span data-start="1237.04" data-end="1239.83">issues please report it please report</span> <span data-start="1239.83" data-end="1244.12">them to get up that is it for me thank</span> </p>
</section>