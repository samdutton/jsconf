<section>
<p><span data-start="0.32" data-end="2.07">[Music]</span> <span data-start="2.07" data-end="3.84">[Applause]</span> <span data-start="3.84" data-end="5.66">[Music]</span> <span data-start="5.66" data-end="7.41">[Applause]</span> <span data-start="7.41" data-end="9.28">[Music]</span> <span data-start="9.28" data-end="11.02">[Applause]</span> <span data-start="11.02" data-end="12.78">[Music]</span> <span data-start="12.78" data-end="16.86">[Applause]</span> <span data-start="16.87" data-end="26.479">[Music]</span> <span data-start="26.489" data-end="29.59">well awesome I'm happy to be here thank</span> <span data-start="29.59" data-end="33.579">you for coming to my talk I did not plan</span> <span data-start="33.579" data-end="35.11">the talk before me so if you were here</span> <span data-start="35.11" data-end="36.91">before and it's all to talk about Cyprus</span> <span data-start="36.91" data-end="39.04">we're gonna be talking about testing and</span> <span data-start="39.04" data-end="41.2">we're gonna be talking about not end to</span> <span data-start="41.2" data-end="42.61">end but we are going to be talking and</span> <span data-start="42.61" data-end="44.5">we are going to be testing a to do NBC</span> <span data-start="44.5" data-end="47.079">app so in Cyprus will be mentioned in</span> <span data-start="47.079" data-end="48.76">this talk so that was kind of a perfect</span> <span data-start="48.76" data-end="51.79">setup so my talk is about testing big</span> <span data-start="51.79" data-end="55.329">and with big tests and hello everyone</span> </p>
<p><span data-start="55.329" data-end="57.94">I'm Robert De Luca you can find me at</span> <span data-start="57.94" data-end="59.98">Rob Dell 12 on the internet anywhere</span> <span data-start="59.98" data-end="63.52">basically github Twitter anything on the</span> <span data-start="63.52" data-end="66.159">internet I work for a consultancy called</span> <span data-start="66.159" data-end="68.229">the front side we build software that</span> <span data-start="68.229" data-end="69.79">you can secure your future on we do</span> <span data-start="69.79" data-end="72.34">basically UI and JavaScript consulting</span> <span data-start="72.34" data-end="74.38">and at the front side we care deeply</span> <span data-start="74.38" data-end="78.37">about testing and specifically is unit</span> <span data-start="78.37" data-end="81.88">tests or integration tests I ran across</span> <span data-start="81.88" data-end="84.39">this tweet that I know Kent C Dodds</span> <span data-start="84.39" data-end="86.77">really likes and I also really like it</span> <span data-start="86.77" data-end="89.68">write tests not too many</span> <span data-start="89.68" data-end="92.53">mostly integration and I agree with this</span> <span data-start="92.53" data-end="95.14">so much and so much so in some of our</span> <span data-start="95.14" data-end="96.76">applications we probably have about five</span> <span data-start="96.76" data-end="98.47">or six unit tests and the rest ring in</span> <span data-start="98.47" data-end="100.15">our integration tests and I'll show you</span> <span data-start="100.15" data-end="102.97">at the end of this talk about how how we</span> <span data-start="102.97" data-end="105.76">get there so to kind of get on the same</span> <span data-start="105.76" data-end="108.61">page I want to talk about UI tests what</span> <span data-start="108.61" data-end="111.04">are you eye tests so yeah let's make</span> <span data-start="111.04" data-end="112.53">sure we get on the same page about it</span> </p>
<p><span data-start="112.53" data-end="115.54">I'm talking about rendering the full</span> <span data-start="115.54" data-end="118">application in the browser not just a</span> <span data-start="118" data-end="120.15">single component the whole enchilada</span> <span data-start="120.15" data-end="124.03">and I want to rerender a fresh</span> <span data-start="124.03" data-end="126.1">application for each assertion I don't</span> <span data-start="126.1" data-end="127.84">want any leftover State from the</span> <span data-start="127.84" data-end="130.26">previous test run I want to make sure</span> <span data-start="130.26" data-end="132.489">that I can put the application</span> <span data-start="132.489" data-end="134.29">repeatedly into the same exact state</span> <span data-start="134.29" data-end="137.92">each time I want to test the application</span> <span data-start="137.92" data-end="139.93">like it's used a user isn't going to be</span> <span data-start="139.93" data-end="141.64">unit testing your app they're not going</span> <span data-start="141.64" data-end="142.69">to be looking up a function that's</span> <span data-start="142.69" data-end="143.26">passed</span> <span data-start="143.26" data-end="144.819">click Handler and calling that directly</span> <span data-start="144.819" data-end="146.56">they're gonna be clicking there to be</span> <span data-start="146.56" data-end="149.709">typing they're gonna be scrolling I want</span> <span data-start="149.709" data-end="152.349">to mock my network requests this is the</span> <span data-start="152.349" data-end="154.269">big difference between a dentists and UI</span> <span data-start="154.269" data-end="158.59">tests and an dentist can be slow and it</span> <span data-start="158.59" data-end="160.269">requires some work to set up and</span> <span data-start="160.269" data-end="161.68">sanitizer data to make sure that you</span> <span data-start="161.68" data-end="162.959">don't have any leftover data that's</span> <span data-start="162.959" data-end="166.48">control you and future tests which is</span> <span data-start="166.48" data-end="169.93">not fun so what are the benefits of UI</span> <span data-start="169.93" data-end="170.73">testing</span> <span data-start="170.73" data-end="173.65">well they test the integration of all</span> <span data-start="173.65" data-end="175">the components together I want to make</span> <span data-start="175" data-end="176.769">sure that my application works together</span> <span data-start="176.769" data-end="179.909">as a whole not individually in pieces</span> <span data-start="179.909" data-end="181.989">like I talked about earlier I want to</span> <span data-start="181.989" data-end="183.639">test like a user I want to be clicking I</span> <span data-start="183.639" data-end="185.019">want to be scrolling I want to be</span> <span data-start="185.019" data-end="186.76">dragging and dropping I want to be doing</span> <span data-start="186.76" data-end="188.409">all the things that I do while I</span> <span data-start="188.409" data-end="190">interact with my app and I want to test</span> <span data-start="190" data-end="193.06">that way and test test the loop between</span> <span data-start="193.06" data-end="196.09">the browser and application I want to</span> <span data-start="196.09" data-end="197.62">make sure when the browser sends an</span> <span data-start="197.62" data-end="200.079">event my application can handle that</span> <span data-start="200.079" data-end="202.569">properly we all know cross browser bugs</span> <span data-start="202.569" data-end="204.609">exists and sometimes an event that's</span> <span data-start="204.609" data-end="207.31">sent has different properties than other</span> <span data-start="207.31" data-end="209.139">browsers or something quirky will go on</span> <span data-start="209.139" data-end="211.389">even though there's a spec there's still</span> <span data-start="211.389" data-end="214.239">bugs I want to test on many different</span> <span data-start="214.239" data-end="216.94">browsers and platforms my my users</span> <span data-start="216.94" data-end="218.049">aren't going to be just using Chrome</span> <span data-start="218.049" data-end="219.37">they're not going to be just using</span> </p>
<p><span data-start="219.37" data-end="221.44">Firefox and they definitely are not</span> <span data-start="221.44" data-end="224.669">using jsm I want to test an IE edge</span> <span data-start="224.669" data-end="229.54">Firefox iOS Chrome or iOS Safari Android</span> <span data-start="229.54" data-end="232.599">Chrome I want to test on all of those so</span> <span data-start="232.599" data-end="235.629">that's great but what are the trade-offs</span> <span data-start="235.629" data-end="240.19">here UI tests can be hard to set up a</span> <span data-start="240.19" data-end="241.81">lot of times you can end up in</span> <span data-start="241.81" data-end="244.75">configuration hell and I think some of</span> <span data-start="244.75" data-end="246.48">us have probably been there before</span> <span data-start="246.48" data-end="248.829">they're typically hard to maintain I've</span> <span data-start="248.829" data-end="251.65">been on â€” I've worked the two companies</span> <span data-start="251.65" data-end="254.23">that have entire teams dedicated to</span> <span data-start="254.23" data-end="256.15">writing these Suites and maintaining</span> <span data-start="256.15" data-end="259.079">them they can be slow we've all seen</span> <span data-start="259.079" data-end="261.97">sleep 10 or you know when they somebody</span> <span data-start="261.97" data-end="263.56">commits something and it broke a test or</span> <span data-start="263.56" data-end="265.33">it broke a test and they just increment</span> <span data-start="265.33" data-end="269.919">the sleep I don't want that you can have</span> <span data-start="269.919" data-end="271.84">flaky tests false positives or false</span> <span data-start="271.84" data-end="274.86">negatives the elements are not existing</span> <span data-start="274.86" data-end="276.59">but</span> <span data-start="276.59" data-end="278.72">that that's something that we don't want</span> <span data-start="278.72" data-end="281.69">in our tests so what what frameworks can</span> <span data-start="281.69" data-end="284.33">do this UI testing all of these they can</span> <span data-start="284.33" data-end="286.16">do UI testing I'm gonna mention a lot of</span> <span data-start="286.16" data-end="287.69">these I can do and n testing but you can</span> <span data-start="287.69" data-end="289.88">mock the network as you wish</span> <span data-start="289.88" data-end="292.79">so with whatever method you want so the</span> <span data-start="292.79" data-end="293.96">first one everybody's probably heard of</span> <span data-start="293.96" data-end="296.87">is selenium or at least I worked with or</span> <span data-start="296.87" data-end="299.12">at least heard of the new kid on the</span> <span data-start="299.12" data-end="300.38">block which we just heard about which</span> <span data-start="300.38" data-end="303.8">was Cypress and then protractor which is</span> <span data-start="303.8" data-end="306.2">pretty popular with angular apps just</span> <span data-start="306.2" data-end="309.47">and puppeteer which is interesting set</span> <span data-start="309.47" data-end="311">up I've seen a couple articles pop up</span> <span data-start="311" data-end="315.02">about this but as a whole UI testing</span> <span data-start="315.02" data-end="317.9">hasn't changed very much so this is what</span> <span data-start="317.9" data-end="320.78">some tests with like in selenium you're</span> <span data-start="320.78" data-end="322.64">gonna get the browser you're gonna set</span> <span data-start="322.64" data-end="323.9">up the driver or you get a drive it</span> <span data-start="323.9" data-end="325.97">around with Cypress everything's</span> <span data-start="325.97" data-end="328.91">prefixed through the side command and so</span> </p>
<p><span data-start="328.91" data-end="332.6">I thought get side I contains those</span> <span data-start="332.6" data-end="335.45">things I got paws protractor is a little</span> <span data-start="335.45" data-end="337.79">bit more towards the modern scale like a</span> <span data-start="337.79" data-end="339.37">modern scale however you want to</span> <span data-start="339.37" data-end="342.2">classify that it has some page object II</span> <span data-start="342.2" data-end="344.36">like things like it number but you still</span> <span data-start="344.36" data-end="346.37">see in there like browser dot get title</span> <span data-start="346.37" data-end="349.4">browser go here and then just then</span> <span data-start="349.4" data-end="353.15">puppeteer which I I don't think you can</span> <span data-start="353.15" data-end="354.23">see it up there in the slides but</span> <span data-start="354.23" data-end="357.74">there's two sleeps in there that are 1.6</span> <span data-start="357.74" data-end="359.15">million milliseconds which is about a</span> <span data-start="359.15" data-end="362.87">half hour that's that's pretty high so</span> <span data-start="362.87" data-end="365.3">it's just a lot of directing the browser</span> <span data-start="365.3" data-end="367.64">to do things browser do this browser do</span> <span data-start="367.64" data-end="370.55">that wait for this element but the way</span> <span data-start="370.55" data-end="373.07">we've built UI has changed in a really</span> <span data-start="373.07" data-end="376.13">big way and the way we have tested</span> <span data-start="376.13" data-end="378.77">typically hasn't and we can thank</span> <span data-start="378.77" data-end="381.26">libraries like this backbone view and</span> </p>
<p><span data-start="381.26" data-end="384.86">Euler ember react and like a hundred</span> <span data-start="384.86" data-end="386.09">thousand other JavaScript libraries that</span> <span data-start="386.09" data-end="388.88">are out there I learned today that dojo</span> <span data-start="388.88" data-end="390.8">has made a big comeback so we could</span> <span data-start="390.8" data-end="393.89">throw that in there and the changes that</span> <span data-start="393.89" data-end="396.49">they've brought are faster rendering</span> <span data-start="396.49" data-end="398.54">components everywhere in a very</span> <span data-start="398.54" data-end="401.06">componentized world everything can be</span> <span data-start="401.06" data-end="402.56">broken down into digestible and</span> <span data-start="402.56" data-end="404.36">shareable and composable components</span> <span data-start="404.36" data-end="407.3">there's a lot more asynchrony we're</span> <span data-start="407.3" data-end="409.01">doing a lot more get requests and a lot</span> <span data-start="409.01" data-end="410.059">more</span> </p>
<p><span data-start="410.059" data-end="413.069">Ajax and generally just became more</span> <span data-start="413.069" data-end="416.669">interactive and basically the too long</span> <span data-start="416.669" data-end="417.899">didn't read it is their more</span> <span data-start="417.899" data-end="419.969">feature-rich we've been racing towards</span> <span data-start="419.969" data-end="422.189">becoming as feature-rich as native apps</span> <span data-start="422.189" data-end="425.399">and with that there's been massive</span> <span data-start="425.399" data-end="429.059">booming boom and tooling to become more</span> <span data-start="429.059" data-end="432.119">feature-rich and and handle all of the</span> <span data-start="432.119" data-end="433.529">problems that come along with being more</span> <span data-start="433.529" data-end="435.959">feature-rich in our ecosystem so tools</span> <span data-start="435.959" data-end="439.859">like babel web pack yes land parcel type</span> <span data-start="439.859" data-end="441.809">scripts all the things that we all</span> <span data-start="441.809" data-end="443.639">probably use or use one of these tools</span> <span data-start="443.639" data-end="446.999">daily has really changed the way that</span> <span data-start="446.999" data-end="449.549">we've developed java scripts in the past</span> <span data-start="449.549" data-end="453.359">10 years but UI testing tools haven't</span> <span data-start="453.359" data-end="455.669">necessarily moved or evolved with the</span> <span data-start="455.669" data-end="457.289">the front-end tooling world and that's</span> <span data-start="457.289" data-end="461.099">that's a pretty bold claim right so what</span> <span data-start="461.099" data-end="463.109">are we looking for what's missing then</span> <span data-start="463.109" data-end="465.899">well I want my test framework to be it</span> <span data-start="465.899" data-end="468.329">will be built with components in mind I</span> <span data-start="468.329" data-end="471.209">want composability in my tests that are</span> <span data-start="471.209" data-end="473.399">similar to composability and our</span> <span data-start="473.399" data-end="474.269">components</span> </p>
<p><span data-start="474.269" data-end="477.569">I want reliable Dom interactions I don't</span> <span data-start="477.569" data-end="479.009">want anything flaky of course I don't</span> <span data-start="479.009" data-end="481.379">want false positives or false negatives</span> <span data-start="481.379" data-end="484.019">I want chainable interactions when I'm</span> <span data-start="484.019" data-end="486.239">running a test that's filling in a form</span> <span data-start="486.239" data-end="487.799">I want to be able to fill in a couple</span> <span data-start="487.799" data-end="489.869">inputs chain one off one after another</span> <span data-start="489.869" data-end="494.039">and then click Submit and of course we</span> <span data-start="494.039" data-end="496.349">all want speed that's just a given I</span> <span data-start="496.349" data-end="498.389">feel like I probably didn't even need to</span> <span data-start="498.389" data-end="500.669">put that in my slides but we all want</span> <span data-start="500.669" data-end="503.639">speed and I want to take advantage of</span> <span data-start="503.639" data-end="504.959">our modern tooling things like</span> <span data-start="504.959" data-end="507.389">typescript anything like that and when</span> </p>
<p><span data-start="507.389" data-end="509.209">I'm thinking about this specifically</span> <span data-start="509.209" data-end="511.559">things like stripping data attributes</span> <span data-start="511.559" data-end="513.719">out of your your application for a</span> <span data-start="513.719" data-end="515.729">production build so when you're testing</span> <span data-start="515.729" data-end="517.349">you're not using brittle CSS selectors</span> <span data-start="517.349" data-end="519.36">that are also testing or that are also</span> <span data-start="519.36" data-end="521.159">providing style right like if I have a</span> <span data-start="521.159" data-end="523.439">button that is read with the class name</span> <span data-start="523.439" data-end="525.749">read and I wrote a test that selects</span> <span data-start="525.749" data-end="527.309">from that and I change the color and the</span> <span data-start="527.309" data-end="529.62">behavior didn't change my test shouldn't</span> <span data-start="529.62" data-end="532.47">fail I want maintainability and</span> <span data-start="532.47" data-end="535.92">scalability UI tests tend to become very</span> <span data-start="535.92" data-end="538.769">fragile a lot of the time there are</span> <span data-start="538.769" data-end="540.269">those dedicated teams that are writing</span> <span data-start="540.269" data-end="543.149">those tests and not developed by</span> <span data-start="543.149" data-end="544.499">the team that's actually developing the</span> <span data-start="544.499" data-end="546.809">code and that's not something that we</span> <span data-start="546.809" data-end="548.16">like to do with the front side we think</span> <span data-start="548.16" data-end="550.079">that the developers should be writing</span> <span data-start="550.079" data-end="552.12">the tests alongside of implementing the</span> <span data-start="552.12" data-end="553.22">features because they know the features</span> </p>
<p><span data-start="553.22" data-end="557.009">I want full control over the network I</span> <span data-start="557.009" data-end="558.72">want to be able to create data as I need</span> <span data-start="558.72" data-end="560.519">to put the application in the weirdest</span> <span data-start="560.519" data-end="562.319">States at that that the user finds</span> <span data-start="562.319" data-end="564.93">themselves in I want to be able to slow</span> <span data-start="564.93" data-end="567.6">timings down increase or make the</span> <span data-start="567.6" data-end="569.309">timings faster to test different loading</span> </p>
<p><span data-start="569.309" data-end="573.209">States I want it to be cross framework</span> <span data-start="573.209" data-end="575.759">we're consultants so we want something</span> <span data-start="575.759" data-end="577.439">that we can take on any client project</span> <span data-start="577.439" data-end="579.569">so that means it needs to work and react</span> <span data-start="579.569" data-end="581.999">or view or basically anywhere there's</span> <span data-start="581.999" data-end="585.389">Dom or JavaScript and we're consultants</span> <span data-start="585.389" data-end="587.069">and we want it to work across test</span> <span data-start="587.069" data-end="588.99">frameworks too because we're typically</span> <span data-start="588.99" data-end="590.459">not able to be there in a greenfield</span> <span data-start="590.459" data-end="592.11">project to make that decision or help</span> <span data-start="592.11" data-end="594.089">them make that decision there's a little</span> <span data-start="594.089" data-end="597.72">asterisk there on just because I am</span> <span data-start="597.72" data-end="599.129">talking about UI testing in the browser</span> <span data-start="599.129" data-end="600.779">and technically just can't run on the</span> <span data-start="600.779" data-end="604.559">browser but you you can tack it I wanted</span> <span data-start="604.559" data-end="605.399">to be cross browser</span> <span data-start="605.399" data-end="608.189">this is a hard requirement we must be</span> <span data-start="608.189" data-end="609.569">able to test in many different browsers</span> <span data-start="609.569" data-end="611.249">and in today's day and age a lot of our</span> <span data-start="611.249" data-end="612.839">users are using mobile so I want to be</span> <span data-start="612.839" data-end="615.12">able to I must be able to test and</span> <span data-start="615.12" data-end="617.79">mobile our users aren't going to be</span> <span data-start="617.79" data-end="621.269">using JSON like I said and none of these</span> <span data-start="621.269" data-end="623.16">frame current frameworks out there kind</span> <span data-start="623.16" data-end="625.679">of meet these criteria for us each one</span> <span data-start="625.679" data-end="627.87">check a few of the boxes Cypress is</span> <span data-start="627.87" data-end="630.509">absolutely the closest but as far as I</span> <span data-start="630.509" data-end="632.16">can tell her I know it only works in</span> </p>
<p><span data-start="632.16" data-end="634.98">Chrome and Firefox is hot on its heels</span> <span data-start="634.98" data-end="636.6">but it also doesn't really take</span> <span data-start="636.6" data-end="640.62">components into consideration so we set</span> <span data-start="640.62" data-end="642.149">out and built the thing that we wanted</span> <span data-start="642.149" data-end="646.529">and the name of that is big tests it's</span> <span data-start="646.529" data-end="647.97">called big tests because we're testing</span> </p>
<p><span data-start="647.97" data-end="651.6">Bigley right unit tests are small and UI</span> <span data-start="651.6" data-end="654.809">tests are big big tests can work</span> <span data-start="654.809" data-end="657.209">anywhere there's Dom or JavaScript we</span> <span data-start="657.209" data-end="659.459">use a server to run the tests so if your</span> <span data-start="659.459" data-end="661.74">browser can visit a URL it can run the</span> <span data-start="661.74" data-end="664.98">tests I wanted to be cross framework</span> <span data-start="664.98" data-end="667.529">it's so or it is cross framework so it</span> <span data-start="667.529" data-end="669.689">is written and plain JavaScript it can</span> <span data-start="669.689" data-end="672.12">be used and adapted in any any frame</span> <span data-start="672.12" data-end="674.579">to use and is cross test framework bring</span> <span data-start="674.579" data-end="676.79">your favorite test framework or a runner</span> <span data-start="676.79" data-end="679.8">and we tend to like mocha so that's</span> <span data-start="679.8" data-end="681.509">that's what we're gonna be using in the</span> <span data-start="681.509" data-end="684.629">future examples give you we give you</span> <span data-start="684.629" data-end="686.79">full control over the network so you can</span> <span data-start="686.79" data-end="688.35">create data as you wish you can slow</span> <span data-start="688.35" data-end="690.269">those timings down you can throw 500</span> <span data-start="690.269" data-end="692.399">errors to test that your client side you</span> <span data-start="692.399" data-end="694.379">error handling is working you can do</span> <span data-start="694.379" data-end="696.749">whatever you wish and it's built with</span> <span data-start="696.749" data-end="699.449">components in mind components are at the</span> <span data-start="699.449" data-end="701.67">center of big tests we ship these things</span> <span data-start="701.67" data-end="704.339">called interactors with our component</span> <span data-start="704.339" data-end="706.68">framework and the consuming app can</span> <span data-start="706.68" data-end="709.05">import those interactors and use them</span> <span data-start="709.05" data-end="711.689">directly because the the component</span> <span data-start="711.689" data-end="713.129">framework is already testing its</span> <span data-start="713.129" data-end="714.779">components rights so i don't need to</span> <span data-start="714.779" data-end="716.73">write tests specifically around</span> <span data-start="716.73" data-end="718.68">interacting with that component i can</span> <span data-start="718.68" data-end="720.829">just import it and use what they wrote</span> <span data-start="720.829" data-end="724.199">so someone once told me if you have a</span> <span data-start="724.199" data-end="726.47">complicated problem such as UI testing</span> <span data-start="726.47" data-end="728.939">give a simple example don't use a</span> <span data-start="728.939" data-end="730.79">complicated example with a complicated</span> <span data-start="730.79" data-end="734.309">testing so UI testing got me in my</span> <span data-start="734.309" data-end="735.029">feelings</span> <span data-start="735.029" data-end="738.329">everybody likes some Drake so I'm going</span> <span data-start="738.329" data-end="740.699">to use to do MVC as a simple example and</span> </p>
<p><span data-start="740.699" data-end="743.04">I'm gonna do it a little bit harder I'm</span> <span data-start="743.04" data-end="745.559">going to a big test to two MVC with an</span> <span data-start="745.559" data-end="751.019">API so this is a gift example of what</span> <span data-start="751.019" data-end="754.399">these tests might look like when running</span> <span data-start="754.399" data-end="756.779">so what are our goals here what do we</span> <span data-start="756.779" data-end="757.949">want to accomplish by the end of this</span> <span data-start="757.949" data-end="758.61">talk</span> <span data-start="758.61" data-end="762.779">well I want to set up big test in an</span> <span data-start="762.779" data-end="766.29">existing project I want to introduce and</span> <span data-start="766.29" data-end="768.329">build a component interactors together</span> </p>
<p><span data-start="768.329" data-end="770.519">I want to mock the network layer and</span> <span data-start="770.519" data-end="774.569">let's write some big tests so we have a</span> <span data-start="774.569" data-end="777.72">to do MVC starter app and what's the</span> <span data-start="777.72" data-end="781.11">structure there it's kind of just a</span> <span data-start="781.11" data-end="783.839">typical react up there we have a source</span> <span data-start="783.839" data-end="785.429">folder with components inside of it we</span> <span data-start="785.429" data-end="789.329">have a models folder for handling state</span> <span data-start="789.329" data-end="790.769">in this application and then we have an</span> <span data-start="790.769" data-end="792.54">index and some some styles and stuff so</span> <span data-start="792.54" data-end="794.49">it's just basically a typical react</span> <span data-start="794.49" data-end="796.74">project you might run across we use</span> <span data-start="796.74" data-end="798.72">parcel to build because parcel is</span> <span data-start="798.72" data-end="800.819">awesome you can use webpack or whatever</span> <span data-start="800.819" data-end="802.259">you want but in this example we're using</span> <span data-start="802.259" data-end="804.52">parcel if people</span> <span data-start="804.52" data-end="807.97">familiar with what to do MVC is this is</span> <span data-start="807.97" data-end="809.23">how the app works right you can create</span> <span data-start="809.23" data-end="811.21">some â€” dues you can filter them and you</span> <span data-start="811.21" data-end="814.78">can complete them so let's get big test</span> <span data-start="814.78" data-end="817.36">set up this has no test it's just a</span> <span data-start="817.36" data-end="819.28">fresh project so we need to install some</span> <span data-start="819.28" data-end="820.78">dependencies we're going to install the</span> <span data-start="820.78" data-end="823.15">big test CLI the big test interactors</span> <span data-start="823.15" data-end="825.7">are a wrapper around mocha which is not</span> <span data-start="825.7" data-end="828.46">necessarily needed but if you use mocha</span> <span data-start="828.46" data-end="831.07">and you want to write in that style go</span> <span data-start="831.07" data-end="832.33">ahead and use it and then we're going to</span> <span data-start="832.33" data-end="835">include the big test react helper we're</span> <span data-start="835" data-end="837.55">going to use MPX to run the init command</span> <span data-start="837.55" data-end="839.35">which is going to create all the files</span> <span data-start="839.35" data-end="841.75">that we need if you haven't used MPX</span> <span data-start="841.75" data-end="845.59">it's pretty rad should use it so when we</span> <span data-start="845.59" data-end="847.24">run big tests in it it's going to create</span> <span data-start="847.24" data-end="850.45">this folder structure in your project so</span> <span data-start="850.45" data-end="851.74">we have the big test folder and then we</span> <span data-start="851.74" data-end="853.12">have our helpers folder inside of that</span> <span data-start="853.12" data-end="855.22">which one helper and then we have our</span> <span data-start="855.22" data-end="856.6">interactors folder which is where all</span> <span data-start="856.6" data-end="857.98">interactions happen where our</span> <span data-start="857.98" data-end="861.16">application and all of our tests so</span> <span data-start="861.16" data-end="862.24">that's the test that are actually</span> <span data-start="862.24" data-end="863.92">running and it also creates an index</span> <span data-start="863.92" data-end="868.48">file and a big test options file so we</span> <span data-start="868.48" data-end="870.79">need to tell big test launcher how to</span> <span data-start="870.79" data-end="872.92">serve our application big test works by</span> <span data-start="872.92" data-end="874.15">bundling all your tests together</span> <span data-start="874.15" data-end="877.48">alongside your application so we need to</span> <span data-start="877.48" data-end="879.37">change your bundlers entry point to the</span> <span data-start="879.37" data-end="882.22">big test folder with parcel that's</span> <span data-start="882.22" data-end="884.86">pretty easy because it's parcel right so</span> <span data-start="884.86" data-end="886.93">we're going to create an index.html file</span> <span data-start="886.93" data-end="888.16">because that's what they recommend to</span> <span data-start="888.16" data-end="891.55">serve from an HTML and we're gonna point</span> <span data-start="891.55" data-end="895.36">the entry of that that of the parcel</span> <span data-start="895.36" data-end="896.8">want alert to our big test file that we</span> <span data-start="896.8" data-end="899.59">just created so if we look at our npm or</span> <span data-start="899.59" data-end="902.47">package JSON file and our scripts we've</span> <span data-start="902.47" data-end="904.24">created a new script that is start :</span> <span data-start="904.24" data-end="907.11">tests and points to the big test</span> <span data-start="907.11" data-end="909.31">index.html this is gonna bundle all our</span> <span data-start="909.31" data-end="913.36">things together if you're using webpack</span> <span data-start="913.36" data-end="916.21">you can or whatever you want you can do</span> <span data-start="916.21" data-end="918.85">it in this style the runner and CLI when</span> <span data-start="918.85" data-end="920.32">you run it automatically sets the node M</span> <span data-start="920.32" data-end="922.69">to test so you can just change when</span> <span data-start="922.69" data-end="925.6">you're in test mode to change the entry</span> <span data-start="925.6" data-end="927.61">from just the normal entry to the big</span> <span data-start="927.61" data-end="930.13">tests entry file so the next thing we</span> <span data-start="930.13" data-end="932.95">need to do is set up big test run which</span> <span data-start="932.95" data-end="935.35">actually runs the tests we're going to</span> <span data-start="935.35" data-end="936.37">go back into our scripts file we're</span> <span data-start="936.37" data-end="937.71">going to add a new test command here</span> <span data-start="937.71" data-end="940.74">five which just does big test run which</span> <span data-start="940.74" data-end="941.76">is good to call it directly from the</span> <span data-start="941.76" data-end="944.1">binary that's installed on our project</span> <span data-start="944.1" data-end="946.32">from the dependencies and then we're</span> <span data-start="946.32" data-end="947.43">gonna edit our big test</span> <span data-start="947.43" data-end="949.41">ops file we have to tell the launcher</span> <span data-start="949.41" data-end="952.77">how to do three things for us the first</span> <span data-start="952.77" data-end="955.02">thing is how to serve that app and we're</span> <span data-start="955.02" data-end="957.63">going to point it to the command that we</span> <span data-start="957.63" data-end="958.83">just created if you're using webpack</span> <span data-start="958.83" data-end="960.06">like you showed earlier you don't even</span> <span data-start="960.06" data-end="962.01">have to you can just pass yarn tests or</span> <span data-start="962.01" data-end="963.93">yarn start just like you would normally</span> <span data-start="963.93" data-end="965.7">start your application the next one</span> <span data-start="965.7" data-end="967.14">we're gonna do is we're gonna tell the</span> <span data-start="967.14" data-end="968.72">application where to actually serve to</span> <span data-start="968.72" data-end="971.97">and in our case it's going to be</span> <span data-start="971.97" data-end="973.44">localhost one-two-three-four because</span> <span data-start="973.44" data-end="975.09">that's a default port number for parcel</span> <span data-start="975.09" data-end="978.12">which i think is awesome and lastly</span> <span data-start="978.12" data-end="981.03">you're gonna tell big test what adaptor</span> <span data-start="981.03" data-end="982.47">and what framework test framework you're</span> <span data-start="982.47" data-end="984.33">using I'm like I said you can use any</span> <span data-start="984.33" data-end="985.89">one that you want so we're gonna pass</span> <span data-start="985.89" data-end="988.29">mocha here and currently we only have</span> <span data-start="988.29" data-end="991.02">support for mocha but as I talk right</span> <span data-start="991.02" data-end="993.06">now one of my co-workers is building</span> <span data-start="993.06" data-end="996.12">other adapters so let's take a look at</span> <span data-start="996.12" data-end="998.49">these test files they're just it's just</span> <span data-start="998.49" data-end="1001.28">a fresh sweet these are our mocha tests</span> <span data-start="1001.28" data-end="1004.46">and in this test on line 15 we are</span> <span data-start="1004.46" data-end="1005.93">asserting that the title of the</span> <span data-start="1005.93" data-end="1007.73">application equals to do and it has an</span> <span data-start="1007.73" data-end="1011.06">h1 and this is what an interact or looks</span> <span data-start="1011.06" data-end="1014.51">like we have a class that has a property</span> <span data-start="1014.51" data-end="1016.31">on it called title title text and we're</span> <span data-start="1016.31" data-end="1018.26">gonna grab the text from the h1 element</span> <span data-start="1018.26" data-end="1020.93">on the page now we're going to learn a</span> <span data-start="1020.93" data-end="1022.19">lot more about interactors in a little</span> <span data-start="1022.19" data-end="1024.65">bit so let's finish setting up last</span> <span data-start="1024.65" data-end="1027.44">thing we need to do is set up the setup</span> <span data-start="1027.44" data-end="1029.18">app helper this is this is the thing</span> <span data-start="1029.18" data-end="1031.339">that actually renders your application</span> <span data-start="1031.339" data-end="1034.01">into the browser and this is what that</span> <span data-start="1034.01" data-end="1036.62">that that file looks like we're going to</span> <span data-start="1036.62" data-end="1038.57">import our route app for a route</span> <span data-start="1038.57" data-end="1041.93">component and pass it to set up a for</span> <span data-start="1041.93" data-end="1043.43">testing the helper that we provide for</span> <span data-start="1043.43" data-end="1045.83">from big tests react this is typically</span> <span data-start="1045.83" data-end="1049.22">whatever you pass to react Dom but in</span> <span data-start="1049.22" data-end="1050.63">some cases and applications that we've</span> <span data-start="1050.63" data-end="1052.52">seen you might wrap it around with the</span> <span data-start="1052.52" data-end="1053.63">test harness component that provides</span> <span data-start="1053.63" data-end="1055.49">some other things and like fake loggers</span> <span data-start="1055.49" data-end="1058.03">and in redux or whatever you might want</span> <span data-start="1058.03" data-end="1060.2">big tests react also provides other</span> <span data-start="1060.2" data-end="1062.39">things like you can pass props to it</span> <span data-start="1062.39" data-end="1064.04">initial props or whatever you want and</span> <span data-start="1064.04" data-end="1066.65">you can also if you're using react</span> <span data-start="1066.65" data-end="1068.03">router it'll automatically hook in a</span> <span data-start="1068.03" data-end="1069.559">reactor outer for you so you can use the</span> <span data-start="1069.559" data-end="1072.409">at command to visit relics in your tests</span> <span data-start="1072.409" data-end="1077.72">so let's run some tests and we have a</span> <span data-start="1077.72" data-end="1079.21">single passing test</span> <span data-start="1079.21" data-end="1082.009">so let's there's a good place to take a</span> <span data-start="1082.009" data-end="1083.96">break and review where we're at we have</span> <span data-start="1083.96" data-end="1085.309">successfully set up big tests and</span> <span data-start="1085.309" data-end="1087.98">existing project the next thing we're</span> <span data-start="1087.98" data-end="1090.11">gonna do is build some component</span> <span data-start="1090.11" data-end="1092.179">interactors together so I think this is</span> <span data-start="1092.179" data-end="1095.12">a good spot to pause and and talk about</span> <span data-start="1095.12" data-end="1096.399">interactors and what they are</span> <span data-start="1096.399" data-end="1099.2">interactors allow you to think about how</span> <span data-start="1099.2" data-end="1101.389">to interact with your component and your</span> <span data-start="1101.389" data-end="1104.299">application as a whole click this drag</span> <span data-start="1104.299" data-end="1107.629">this scroll here focus this they will</span> <span data-start="1107.629" data-end="1109.039">wait for elements to exist before</span> <span data-start="1109.039" data-end="1110.45">interacting with them so you don't have</span> <span data-start="1110.45" data-end="1114.23">to worry about timing or or getting to</span> <span data-start="1114.23" data-end="1115.399">sync up with a run loop or anything</span> <span data-start="1115.399" data-end="1118.429">it'll just work for you I don't have</span> <span data-start="1118.429" data-end="1120.289">enough time to get into how it all</span> <span data-start="1120.289" data-end="1121.759">actually works in the architecture</span> <span data-start="1121.759" data-end="1123.619">underneath that's a whole talk in itself</span> <span data-start="1123.619" data-end="1125.899">but just know that it takes care of that</span> <span data-start="1125.899" data-end="1128.72">for you interactors our core two big</span> <span data-start="1128.72" data-end="1130.639">tests they're the heart and soul of a</span> <span data-start="1130.639" data-end="1132.769">big test and I think arguably probably</span> <span data-start="1132.769" data-end="1135.83">the coolest feature and even though</span> <span data-start="1135.83" data-end="1137.869">we're saying the big test is a testing</span> <span data-start="1137.869" data-end="1140.059">framework you could take interactors and</span> <span data-start="1140.059" data-end="1141.889">plug it into Cypress if you want or</span> <span data-start="1141.889" data-end="1143.6">whatever testing framework that you want</span> <span data-start="1143.6" data-end="1145.009">because these are just a collection of</span> <span data-start="1145.009" data-end="1149.24">modules so you don't have to wait for</span> <span data-start="1149.24" data-end="1152.149">the ability to interact and interactors</span> <span data-start="1152.149" data-end="1153.499">abstract that away for you so you don't</span> <span data-start="1153.499" data-end="1154.85">have to worry about that timing or</span> <span data-start="1154.85" data-end="1157.1">anything it'll do it interact or</span> <span data-start="1157.1" data-end="1159.409">properties are lazy so they don't</span> <span data-start="1159.409" data-end="1161.24">actually run until you try to access the</span> <span data-start="1161.24" data-end="1162.309">getter on it</span> <span data-start="1162.309" data-end="1164.929">they're composable and they are</span> <span data-start="1164.929" data-end="1169.549">chainable and I think very powerful so</span> <span data-start="1169.549" data-end="1171.23">if you want to go check out the API dots</span> <span data-start="1171.23" data-end="1173.809">and go to big tests JSI o slash guides</span> <span data-start="1173.809" data-end="1176.269">to interactors and we have three or four</span> <span data-start="1176.269" data-end="1178.369">guides there for you about creating</span> <span data-start="1178.369" data-end="1180.11">custom interactors composing them with</span> <span data-start="1180.11" data-end="1182.749">other interactors if you want to go and</span> <span data-start="1182.749" data-end="1184.759">learn at your own pace or take a look at</span> <span data-start="1184.759" data-end="1187.179">the all the API Doc's that we have so</span> <span data-start="1187.179" data-end="1190.61">let's start filling in our interactor we</span> <span data-start="1190.61" data-end="1194.48">to give like a simplest view of what we</span> <span data-start="1194.48" data-end="1196.549">were doing here is where we have set up</span> <span data-start="1196.549" data-end="1198.08">our application where we've rendered it</span> <span data-start="1198.08" data-end="1199.909">into the browser and now we're gonna</span> <span data-start="1199.909" data-end="1202.25">start driving the application around</span> <span data-start="1202.25" data-end="1206.3">with interactors so this begs a question</span> <span data-start="1206.3" data-end="1209.12">of how do we actually even interact with</span> <span data-start="1209.12" data-end="1212.09">our application and even for something</span> <span data-start="1212.09" data-end="1215.48">that's as simple as to do MVC there's a</span> <span data-start="1215.48" data-end="1216.86">lot that's going on here there's a lot</span> <span data-start="1216.86" data-end="1218.27">of different ways you can interact with</span> <span data-start="1218.27" data-end="1221.51">your application so let's stop and break</span> <span data-start="1221.51" data-end="1222.95">this down and just tackle adding it to</span> <span data-start="1222.95" data-end="1226.1">do first let's look back at the slim</span> <span data-start="1226.1" data-end="1227.99">diagram here just for adding it to do</span> <span data-start="1227.99" data-end="1231.62">you have input here where you type it in</span> <span data-start="1231.62" data-end="1233">the input and then you press ENTER to</span> <span data-start="1233" data-end="1236.63">submit you can also toggle a button on</span> <span data-start="1236.63" data-end="1240.98">the left to complete all to Do's so</span> <span data-start="1240.98" data-end="1243.59">we're at the top here we're already</span> <span data-start="1243.59" data-end="1246.11">asserting that we have our two dues or</span> <span data-start="1246.11" data-end="1248.24">two dues title there so that's done for</span> <span data-start="1248.24" data-end="1249.41">us now we just need to wire up our</span> <span data-start="1249.41" data-end="1252.34">interactor for actually submitting or</span> <span data-start="1252.34" data-end="1254.66">actually entering data into the input</span> <span data-start="1254.66" data-end="1258.17">and then submitting that that to do so</span> <span data-start="1258.17" data-end="1260.41">our actor is grown a little bit here I</span> <span data-start="1260.41" data-end="1263.6">want to call out line 12 we have a new</span> <span data-start="1263.6" data-end="1265.25">to do property which is equal to a</span> <span data-start="1265.25" data-end="1267.29">fillable method that we provide from</span> <span data-start="1267.29" data-end="1269.18">interactor and what fillable is going to</span> <span data-start="1269.18" data-end="1271.1">do is allow you to fill an input with</span> <span data-start="1271.1" data-end="1273.68">whatever data you want in your test and</span> <span data-start="1273.68" data-end="1276.17">then here on lines 15 to 17 we have a</span> <span data-start="1276.17" data-end="1278">submit to do property that we have equal</span> <span data-start="1278" data-end="1280.07">to a trigger Abul method that's provided</span> <span data-start="1280.07" data-end="1283.16">from interactor also which allows us to</span> <span data-start="1283.16" data-end="1284.81">trigger whatever event that we want in</span> <span data-start="1284.81" data-end="1286.64">this case we're going to trigger a</span> <span data-start="1286.64" data-end="1289.55">keydown event and send the key code 13</span> <span data-start="1289.55" data-end="1292.25">which is the enter key on the new to do</span> <span data-start="1292.25" data-end="1296.06">input field so that's that's great I</span> <span data-start="1296.06" data-end="1297.41">guess</span> <span data-start="1297.41" data-end="1300.14">so let's route this in reality and see</span> <span data-start="1300.14" data-end="1303.65">how we actually use this in a test so</span> <span data-start="1303.65" data-end="1305.78">same from earlier test suite that we</span> <span data-start="1305.78" data-end="1307.37">have right but we have a new describe</span> <span data-start="1307.37" data-end="1308.63">block and I want to kind of walk through</span> <span data-start="1308.63" data-end="1310.46">how interactors are playing a role here</span> <span data-start="1310.46" data-end="1312.83">first we're going to import the</span> <span data-start="1312.83" data-end="1315.26">interactor from the folder and at the</span> <span data-start="1315.26" data-end="1316.4">very top of the file we're going to</span> <span data-start="1316.4" data-end="1319.37">instantiate our enter actor and then</span> <span data-start="1319.37" data-end="1323.3">down here on lines 22 23 we're gonna</span> <span data-start="1323.3" data-end="1324.71">actually start interacting with our app</span> <span data-start="1324.71" data-end="1328.46">we named our to do to the or interact or</span> <span data-start="1328.46" data-end="1330.89">to do app so when we call that</span> <span data-start="1330.89" data-end="1332.57">interactor we're gonna do to do app dot</span> <span data-start="1332.57" data-end="1334.11">new to do and then</span> <span data-start="1334.11" data-end="1335.64">we passed two is actually going to be</span> <span data-start="1335.64" data-end="1336.87">the value of that's entered into the</span> <span data-start="1336.87" data-end="1338.97">input fields and then we just chain on a</span> <span data-start="1338.97" data-end="1342.03">submit to do interactor and bam we're</span> <span data-start="1342.03" data-end="1345.96">going to submit so we actually don't</span> <span data-start="1345.96" data-end="1347.34">have anything to assert against right</span> <span data-start="1347.34" data-end="1349.35">now all right if we look back at the</span> <span data-start="1349.35" data-end="1351.03">tests here you can see the assertion</span> <span data-start="1351.03" data-end="1352.92">down at the bottom is just a comment</span> <span data-start="1352.92" data-end="1356.64">that says oh so let's take a look back</span> <span data-start="1356.64" data-end="1362.13">at our diagram here and look at a to-do</span> <span data-start="1362.13" data-end="1364.95">item so we have our adding it to do</span> <span data-start="1364.95" data-end="1367.74">interactor kind of all fleshed out so in</span> <span data-start="1367.74" data-end="1370.85">order for us to assert we have an</span> <span data-start="1370.85" data-end="1373.44">infinite number of to-do items in this</span> <span data-start="1373.44" data-end="1376.52">list and when we built this application</span> <span data-start="1376.52" data-end="1379.02">we recognized that we could pull that</span> <span data-start="1379.02" data-end="1381.39">out onto a component right we could</span> <span data-start="1381.39" data-end="1383.64">build something and it's called to do I</span> <span data-start="1383.64" data-end="1387.27">don't so naturally with each component</span> <span data-start="1387.27" data-end="1389.4">there can be an interact or that maps</span> <span data-start="1389.4" data-end="1390.929">directly to and how you interact with</span> <span data-start="1390.929" data-end="1393.179">that component so we're going to try and</span> <span data-start="1393.179" data-end="1395.28">we're going to match that composability</span> <span data-start="1395.28" data-end="1397.049">that we get from the component with our</span> <span data-start="1397.049" data-end="1399.78">tests so let's create a new interactor</span> <span data-start="1399.78" data-end="1402.78">called to-do item and we're gonna create</span> <span data-start="1402.78" data-end="1404.669">one property for now on it called to do</span> <span data-start="1404.669" data-end="1406.65">text and that's just going to grab text</span> <span data-start="1406.65" data-end="1408.45">from the label element on the to-do item</span> <span data-start="1408.45" data-end="1412.2">and then we're to compose or to do item</span> <span data-start="1412.2" data-end="1414.419">interactor with our to-do MVC interactor</span> <span data-start="1414.419" data-end="1416.669">the same way that we compose the to-do</span> <span data-start="1416.669" data-end="1419.19">item component in the two MVC</span> <span data-start="1419.19" data-end="1421.83">application when we built it so we're</span> <span data-start="1421.83" data-end="1423.21">going to go back to the to-do MVC</span> <span data-start="1423.21" data-end="1425.52">interactor and add a new property on</span> <span data-start="1425.52" data-end="1427.679">line 16 called to-do list and it's going</span> <span data-start="1427.679" data-end="1429.2">to be set to a collection and</span> <span data-start="1429.2" data-end="1431.82">collections from interactor are just a</span> <span data-start="1431.82" data-end="1433.41">way for you to scope your nested</span> <span data-start="1433.41" data-end="1436.5">interactors to a specific selector so if</span> <span data-start="1436.5" data-end="1438.45">we go back here you remember how I'm</span> <span data-start="1438.45" data-end="1440.88">just pulling off text from a label which</span> <span data-start="1440.88" data-end="1443.07">is pretty vague right we can do that</span> <span data-start="1443.07" data-end="1446.34">because we have we have it scoped with a</span> <span data-start="1446.34" data-end="1448.169">collection and it's only going to look</span> <span data-start="1448.169" data-end="1451.98">for the label inside of to-do list Li so</span> <span data-start="1451.98" data-end="1453.21">we don't have to worry about it trying</span> <span data-start="1453.21" data-end="1455.52">to grab some label that's way out of the</span> <span data-start="1455.52" data-end="1458.58">scope of the component now we can assert</span> <span data-start="1458.58" data-end="1460.77">that the to do was created right so</span> <span data-start="1460.77" data-end="1462.66">let's fill in that test since our to-do</span> <span data-start="1462.66" data-end="1465.39">list is a collection when we select from</span> <span data-start="1465.39" data-end="1466.79">what we're going to do</span> <span data-start="1466.79" data-end="1469.37">to do app dot to-do list and pass the</span> <span data-start="1469.37" data-end="1471.05">index of the item in the list that we</span> <span data-start="1471.05" data-end="1472.7">want to select so we want to select the</span> <span data-start="1472.7" data-end="1473.69">first one so we're going to pass the</span> <span data-start="1473.69" data-end="1476.12">zero index and then from there we can</span> <span data-start="1476.12" data-end="1478.01">just call the properties of the interact</span> <span data-start="1478.01" data-end="1479.81">on it so we're going to do to-do list</span> <span data-start="1479.81" data-end="1482.57">item zero the part the first item and</span> <span data-start="1482.57" data-end="1484.07">then get the text off of it and we're to</span> <span data-start="1484.07" data-end="1486.92">assert that equals my to do so let's run</span> <span data-start="1486.92" data-end="1491.54">the tests BAM there the other thing</span> <span data-start="1491.54" data-end="1493.22">about big test is is super fast or that</span> <span data-start="1493.22" data-end="1496.04">that ran on about three milliseconds I</span> <span data-start="1496.04" data-end="1497.65">think it says up there it's pretty best</span> <span data-start="1497.65" data-end="1500.42">so let's fill in the rest of our to-do</span> <span data-start="1500.42" data-end="1502.28">item interactor and and think about all</span> <span data-start="1502.28" data-end="1504.11">the ways that we can interact with just</span> <span data-start="1504.11" data-end="1508.16">a to-do item we can click the check box</span> <span data-start="1508.16" data-end="1511.58">to toggle the item so on line 13 there</span> <span data-start="1511.58" data-end="1513.5">we're setting a property called toggle</span> <span data-start="1513.5" data-end="1515.27">to a clickable element so it's going to</span> <span data-start="1515.27" data-end="1518.09">click that item when we call it we can</span> <span data-start="1518.09" data-end="1519.59">delete the item doing the same thing by</span> <span data-start="1519.59" data-end="1522.02">clicking we can check properties on</span> <span data-start="1522.02" data-end="1524.62">different elements and attributes also</span> <span data-start="1524.62" data-end="1526.7">but for this instance we're going to</span> <span data-start="1526.7" data-end="1528.47">check if the to do is completed by</span> <span data-start="1528.47" data-end="1530.87">checking the checked property on the</span> <span data-start="1530.87" data-end="1533.75">checkbox we're going to double click in</span> <span data-start="1533.75" data-end="1535.67">to and we're going to trigger a double</span> <span data-start="1535.67" data-end="1537.8">click event by to enter into edit mode</span> <span data-start="1537.8" data-end="1539.54">and then we're going to fill in that</span> <span data-start="1539.54" data-end="1542.24">edit input to edit it and then we can</span> <span data-start="1542.24" data-end="1546.86">press ENTER to submit that edit so let's</span> <span data-start="1546.86" data-end="1548.72">take a second there's a lot being thrown</span> <span data-start="1548.72" data-end="1551.39">at you and it's just positive check our</span> <span data-start="1551.39" data-end="1554.21">progress we've set a big test in an</span> <span data-start="1554.21" data-end="1556.22">existing project and we've kind of</span> <span data-start="1556.22" data-end="1558.08">introduced interactors and built some</span> <span data-start="1558.08" data-end="1558.94">together</span> <span data-start="1558.94" data-end="1562.04">so let's write some more tests for this</span> <span data-start="1562.04" data-end="1564.8">application right let's write test for</span> <span data-start="1564.8" data-end="1566.98">editing completing and deleting it to do</span> <span data-start="1566.98" data-end="1569.39">but we have a problem here</span> <span data-start="1569.39" data-end="1571.31">all these tests are end to end right now</span> <span data-start="1571.31" data-end="1574.37">and leftover data is causing issues and</span> <span data-start="1574.37" data-end="1576.38">we're still technically in this instance</span> <span data-start="1576.38" data-end="1577.91">of the application these are going</span> <span data-start="1577.91" data-end="1580.13">straight to production so that's not</span> <span data-start="1580.13" data-end="1583.1">good if you look at the gif here each</span> <span data-start="1583.1" data-end="1584.93">time i refresh the page here it's going</span> <span data-start="1584.93" data-end="1586.52">to make a network request and actually</span> <span data-start="1586.52" data-end="1588.5">submit it to do so by the time I'm done</span> <span data-start="1588.5" data-end="1590.24">refreshing here we have 6 to do's there</span> <span data-start="1590.24" data-end="1592.22">which isn't good if you're trying to</span> <span data-start="1592.22" data-end="1595.04">test the state in between each tests so</span> <span data-start="1595.04" data-end="1596.84">we're to use a thing called big test</span> </p>
<p><span data-start="1596.84" data-end="1597.92">Mirage</span> <span data-start="1597.92" data-end="1600.59">and what Mirage does is it creates a</span> <span data-start="1600.59" data-end="1602.9">client-side server that mimics your API</span> <span data-start="1602.9" data-end="1607.58">it has a fully featured database ORM and</span> <span data-start="1607.58" data-end="1609.38">allows you to have full control over the</span> <span data-start="1609.38" data-end="1611.6">data in your tests do you need 200</span> <span data-start="1611.6" data-end="1613.79">records the test pagination go for it</span> <span data-start="1613.79" data-end="1616.28">do you need zero records the check to</span> <span data-start="1616.28" data-end="1618.38">test an empty State awesome what about</span> <span data-start="1618.38" data-end="1619.76">throwing a 500 error from when</span> <span data-start="1619.76" data-end="1622.22">submitting at a forum and making sure</span> <span data-start="1622.22" data-end="1624.14">that your client side validation is</span> <span data-start="1624.14" data-end="1626.8">worked there great go for it it'll work</span> <span data-start="1626.8" data-end="1629.33">so I want to give a shout out to Sam</span> </p>
<p><span data-start="1629.33" data-end="1631.7">Celica for building Mirage if your an</span> <span data-start="1631.7" data-end="1633.83">ember developer you might be familiar</span> <span data-start="1633.83" data-end="1634.55">with that name</span> <span data-start="1634.55" data-end="1637.04">he built ember CLI Mirage and we just</span> <span data-start="1637.04" data-end="1638.42">pulled it out into a base JavaScript</span> <span data-start="1638.42" data-end="1640.1">library so everybody that uses</span> <span data-start="1640.1" data-end="1642.77">JavaScript can benefit from this awesome</span> <span data-start="1642.77" data-end="1646.1">library so we're to use big tests in it</span> <span data-start="1646.1" data-end="1648.02">and we're going to pass a network flag</span> <span data-start="1648.02" data-end="1649.55">here now so it can do all the</span> <span data-start="1649.55" data-end="1651.56">bootstrapping that we need because we</span> <span data-start="1651.56" data-end="1652.76">don't want to do all this work manually</span> <span data-start="1652.76" data-end="1654.83">and then we're going to add the big test</span> </p>
<p><span data-start="1654.83" data-end="1656.92">Mirage dependency as a dev dependency</span> <span data-start="1656.92" data-end="1659.63">and what that does is it creates this</span> <span data-start="1659.63" data-end="1662.36">this structure with some with some more</span> <span data-start="1662.36" data-end="1665.39">full subfolders here so alongside of our</span> <span data-start="1665.39" data-end="1667.46">helpers interactors and test file we</span> <span data-start="1667.46" data-end="1669.47">also have a network folder now that has</span> <span data-start="1669.47" data-end="1670.88">a bunch of other folders inside of it</span> <span data-start="1670.88" data-end="1672.08">but just you don't have to worry about</span> <span data-start="1672.08" data-end="1675.62">that right now just know it exists when</span> <span data-start="1675.62" data-end="1678.05">we run the big test in it with Network</span> <span data-start="1678.05" data-end="1680.69">it does update the setup app helper with</span> <span data-start="1680.69" data-end="1682.76">a few changes so let's take a look at</span> <span data-start="1682.76" data-end="1684.38">that the first thing that changes is</span> <span data-start="1684.38" data-end="1686.3">we're importing a start Mirage command</span> <span data-start="1686.3" data-end="1689.63">from the network folder and then we have</span> <span data-start="1689.63" data-end="1692.03">two new methods on the setup app for</span> <span data-start="1692.03" data-end="1694.91">testing helper here one is setup and one</span> <span data-start="1694.91" data-end="1696.98">is teardown so setup is called before</span> <span data-start="1696.98" data-end="1698.42">the application is actually rendered and</span> <span data-start="1698.42" data-end="1700.55">we're going to start the Mirage server</span> <span data-start="1700.55" data-end="1702.59">the client-side server we're gonna turn</span> <span data-start="1702.59" data-end="1703.85">logging off because that can be annoying</span> <span data-start="1703.85" data-end="1706.04">to see your test output but you can turn</span> <span data-start="1706.04" data-end="1708.89">that back on if you are debugging and</span> <span data-start="1708.89" data-end="1710.78">then after the test run we're going to</span> <span data-start="1710.78" data-end="1712.22">clean up after ourselves and shut down</span> <span data-start="1712.22" data-end="1715.97">the test server so what happens now that</span> <span data-start="1715.97" data-end="1717.83">we've run the big test in the command</span> <span data-start="1717.83" data-end="1719.27">with network and</span> </p>
<p><span data-start="1719.27" data-end="1721.64">I set up this and what happens when we</span> <span data-start="1721.64" data-end="1725.9">run our tests they're gonna fail and</span> <span data-start="1725.9" data-end="1727.4">something funny is going on here we're</span> <span data-start="1727.4" data-end="1729.35">gonna see a ton of errors here in our</span> <span data-start="1729.35" data-end="1730.87">console what's what's up with that</span> <span data-start="1730.87" data-end="1734.15">so Mirage intercepts all of your network</span> <span data-start="1734.15" data-end="1736.07">requests it's not gonna let any of them</span> <span data-start="1736.07" data-end="1738.95">out unless you actually let it or want</span> <span data-start="1738.95" data-end="1740.51">it so you can do a pass-through and or</span> <span data-start="1740.51" data-end="1743.06">actually talk to the real network but by</span> <span data-start="1743.06" data-end="1744.17">the default state it's not gonna let</span> <span data-start="1744.17" data-end="1747.41">anything talk to the network so let's go</span> <span data-start="1747.41" data-end="1750.29">ahead and mock our get endpoint so when</span> <span data-start="1750.29" data-end="1751.67">the application actually loads it's</span> <span data-start="1751.67" data-end="1753.17">gonna fetch all the to Do's</span> <span data-start="1753.17" data-end="1755.96">so let's mock that if we go into our big</span> <span data-start="1755.96" data-end="1758.93">test Network config folder or file we're</span> <span data-start="1758.93" data-end="1761.3">going to I'm gonna explain a couple</span> <span data-start="1761.3" data-end="1763.97">things here first thing you notice here</span> <span data-start="1763.97" data-end="1765.53">on line two is we're setting a URL</span> <span data-start="1765.53" data-end="1767.39">prefix which is a fully qualified URL</span> <span data-start="1767.39" data-end="1769.58">and this is a URL of our API this is</span> <span data-start="1769.58" data-end="1771.11">where an actual network request is going</span> <span data-start="1771.11" data-end="1774.26">out to and then here on line four since</span> <span data-start="1774.26" data-end="1776.42">we pass the URL the fully qualified URLs</span> <span data-start="1776.42" data-end="1778.4">or prefix we don't have to actually use</span> <span data-start="1778.4" data-end="1779.99">that in each endpoint that we're mocking</span> <span data-start="1779.99" data-end="1781.85">and we can just say that we're getting</span> <span data-start="1781.85" data-end="1783.92">on the route from that and when that</span> <span data-start="1783.92" data-end="1785.51">function is invoked you get a two</span> <span data-start="1785.51" data-end="1787.07">arguments to your function which is the</span> <span data-start="1787.07" data-end="1788.9">schema and the request that was actually</span> <span data-start="1788.9" data-end="1792.71">sent along with that network request and</span> <span data-start="1792.71" data-end="1794.3">in our case we're just going to return</span> <span data-start="1794.3" data-end="1795.71">some fixture data it's going to be an</span> <span data-start="1795.71" data-end="1799.88">array of one item that says my to do so</span> <span data-start="1799.88" data-end="1802.82">if we run the test again we get a little</span> <span data-start="1802.82" data-end="1805.7">bit further but it's still some errors</span> <span data-start="1805.7" data-end="1809.6">so let's mock the post endpoint and do</span> <span data-start="1809.6" data-end="1811.64">the same thing so we're gonna do the</span> <span data-start="1811.64" data-end="1812.99">exact same thing we're gonna pass the</span> <span data-start="1812.99" data-end="1815.12">same exact data back through and these</span> <span data-start="1815.12" data-end="1818.03">tests well pass right in this exact</span> <span data-start="1818.03" data-end="1820.76">configuration they will always pass no</span> <span data-start="1820.76" data-end="1822.5">matter what you do</span> <span data-start="1822.5" data-end="1827">since we're posting and getting the same</span> <span data-start="1827" data-end="1829.67">exact data type or the data style it</span> <span data-start="1829.67" data-end="1832.31">would always pass and fixtures just</span> <span data-start="1832.31" data-end="1833.87">don't get us very far</span> <span data-start="1833.87" data-end="1835.58">the second you need to test a different</span> <span data-start="1835.58" data-end="1838.37">state of your application it's gonna get</span> <span data-start="1838.37" data-end="1840.53">very complicated we managed fixtures and</span> <span data-start="1840.53" data-end="1842.45">an application about three years ago and</span> <span data-start="1842.45" data-end="1845.12">it was a nightmare to say the least so</span> <span data-start="1845.12" data-end="1846.89">let's just do some dynamic factories</span> <span data-start="1846.89" data-end="1848.63">factories allow us to create specific</span> <span data-start="1848.63" data-end="1851.04">data as we need throughout</span> <span data-start="1851.04" data-end="1853.11">our tests and have full control over the</span> <span data-start="1853.11" data-end="1856.14">data so if we look back at our folder</span> <span data-start="1856.14" data-end="1857.7">structure here we have two folders that</span> <span data-start="1857.7" data-end="1860.16">we're going to care about here it's a we</span> <span data-start="1860.16" data-end="1862.07">need to create a model and any factory</span> <span data-start="1862.07" data-end="1865.11">in the very near future probably like in</span> <span data-start="1865.11" data-end="1868.02">a week or two from now the CLI will take</span> <span data-start="1868.02" data-end="1870.15">care of this for us but conference</span> <span data-start="1870.15" data-end="1872.25">driven development isn't good enough for</span> <span data-start="1872.25" data-end="1874.29">for me here so we have to mean then we</span> <span data-start="1874.29" data-end="1877.41">water this up so we're gonna go into our</span> <span data-start="1877.41" data-end="1878.94">models folder and our index file and</span> <span data-start="1878.94" data-end="1880.919">we're going to uncomment and export the</span> <span data-start="1880.919" data-end="1883.08">file that we're about to create and then</span> <span data-start="1883.08" data-end="1884.01">we're going to go into our models</span> <span data-start="1884.01" data-end="1886.74">directory and create it to do model and</span> <span data-start="1886.74" data-end="1888.15">this is a place where you can create</span> <span data-start="1888.15" data-end="1890.76">relationships to other models and other</span> <span data-start="1890.76" data-end="1892.71">other data that you might have that your</span> <span data-start="1892.71" data-end="1895.47">application has or epi might have but</span> <span data-start="1895.47" data-end="1896.49">we're not doing anything special so</span> <span data-start="1896.49" data-end="1897.72">we're just gonna extend the model and</span> <span data-start="1897.72" data-end="1899.76">send it through we're gonna do the same</span> <span data-start="1899.76" data-end="1902.07">thing with factories and index and then</span> <span data-start="1902.07" data-end="1905.16">in our to do J's Factory we're gonna do</span> <span data-start="1905.16" data-end="1907.35">we're gonna create a factory that</span> <span data-start="1907.35" data-end="1910.23">matches the shape of our api's data I</span> <span data-start="1910.23" data-end="1912.84">want to call out something here for the</span> <span data-start="1912.84" data-end="1915.15">title you notice that we're using faker</span> <span data-start="1915.15" data-end="1919.049">which we import from Vic tests Mirage to</span> <span data-start="1919.049" data-end="1920.549">create something random so each time we</span> <span data-start="1920.549" data-end="1922.53">create a factory it's gonna create a</span> <span data-start="1922.53" data-end="1924.57">random title and at any given point if</span> <span data-start="1924.57" data-end="1926.25">you want you can override these by</span> <span data-start="1926.25" data-end="1927.84">passing a second argument to the create</span> <span data-start="1927.84" data-end="1929.669">command and you can create whatever</span> <span data-start="1929.669" data-end="1931.32">title you want whatever I do you want</span> <span data-start="1931.32" data-end="1933.03">whatever could state that you want you</span> <span data-start="1933.03" data-end="1935.7">have full control over that the last</span> <span data-start="1935.7" data-end="1936.84">thing that we need to do is we need to</span> <span data-start="1936.84" data-end="1939.21">uncomment imports and our big test</span> <span data-start="1939.21" data-end="1942.299">networks start file so we're gonna go in</span> <span data-start="1942.299" data-end="1944.76">and alliance 514 and set 16 and</span> <span data-start="1944.76" data-end="1947.7">uncomment those and make sure that those</span> <span data-start="1947.7" data-end="1949.2">those imports are being passed to the</span> </p>
<p><span data-start="1949.2" data-end="1951">Mirage constructor like I said in a very</span> <span data-start="1951" data-end="1952.89">very future that will be taken care of</span> <span data-start="1952.89" data-end="1954.39">for you but if you do this right now you</span> <span data-start="1954.39" data-end="1957.57">have to do it manually so now we can</span> <span data-start="1957.57" data-end="1959.88">manage dynamic data creation we don't</span> <span data-start="1959.88" data-end="1962.04">have to return fixtures from our API</span> <span data-start="1962.04" data-end="1965.76">mocks anymore right so with this updated</span> <span data-start="1965.76" data-end="1969.059">we are in our get we are destructuring</span> <span data-start="1969.059" data-end="1971.22">the to dues collection from the schema</span> <span data-start="1971.22" data-end="1974.429">that's passed to us and then since I get</span> <span data-start="1974.429" data-end="1975.96">we're just going to return to dues at</span> <span data-start="1975.96" data-end="1977.34">all I'll just return all of the to dues</span> <span data-start="1977.34" data-end="1979.83">that are in the database which is the</span> <span data-start="1979.83" data-end="1982.48">fake database right and then for our</span> <span data-start="1982.48" data-end="1985.179">host we're going to do the same thing in</span> <span data-start="1985.179" data-end="1986.29">destructuring out of the database</span> <span data-start="1986.29" data-end="1988.45">collection but we're also going to use</span> <span data-start="1988.45" data-end="1992.62">the request body from the request which</span> <span data-start="1992.62" data-end="1994.24">is what's sent along with your post</span> <span data-start="1994.24" data-end="1995.95">request and we're going to parse that</span> <span data-start="1995.95" data-end="1998.65">and then create a new to do based off of</span> <span data-start="1998.65" data-end="2000.179">that so it's all dynamic data for you</span> <span data-start="2000.179" data-end="2002.07">and then in the middle there we do some</span> <span data-start="2002.07" data-end="2003.57">updating of the record to make sure that</span> <span data-start="2003.57" data-end="2006">has the right property on it that our</span> </p>
<p><span data-start="2006" data-end="2008.7">API expects since we're using a MongoDB</span> <span data-start="2008.7" data-end="2012.86">here so Mirage has a concept of</span> <span data-start="2012.86" data-end="2015.51">scenarios where you can well create</span> <span data-start="2015.51" data-end="2017.25">scenarios from the data that you need</span> <span data-start="2017.25" data-end="2020.49">these can be really useful i we have an</span> <span data-start="2020.49" data-end="2022.08">application that uses all of this and</span> <span data-start="2022.08" data-end="2023.669">it's really nice when you're developing</span> <span data-start="2023.669" data-end="2026.34">new features I keep on giving the</span> <span data-start="2026.34" data-end="2028.44">client-side error handling example</span> <span data-start="2028.44" data-end="2029.46">because that's something that I actually</span> <span data-start="2029.46" data-end="2030.929">had to do I to make sure that I added</span> <span data-start="2030.929" data-end="2033.45">all of those improperly responded to the</span> </p>
<p><span data-start="2033.45" data-end="2036.6">API 500 errors so instead of actually</span> <span data-start="2036.6" data-end="2038.28">going through and trying to make the API</span> <span data-start="2038.28" data-end="2040.47">break I just created a Mirage scenario</span> <span data-start="2040.47" data-end="2042.63">and went to town on making sure that all</span> <span data-start="2042.63" data-end="2044.73">worked so we're going to create a</span> <span data-start="2044.73" data-end="2047.22">default scenario which is created by the</span> <span data-start="2047.22" data-end="2050.46">the CLI for you you can leave this blank</span> <span data-start="2050.46" data-end="2053.129">this will create this data for each test</span> <span data-start="2053.129" data-end="2054.929">run so be very sure this is what you</span> <span data-start="2054.929" data-end="2058.139">want to do if not you can create data</span> <span data-start="2058.139" data-end="2060.06">for your tests you need as you need when</span> <span data-start="2060.06" data-end="2062.609">you go to write those tests so in this</span> <span data-start="2062.609" data-end="2064.26">scenario we're just going to create four</span> <span data-start="2064.26" data-end="2065.97">to do's and it's just going to create</span> <span data-start="2065.97" data-end="2069.09">what's back and gave it so let's run the</span> <span data-start="2069.09" data-end="2071.52">test this year well that's that's a</span> <span data-start="2071.52" data-end="2074.57">weird error what's going on there oh</span> <span data-start="2074.57" data-end="2075.72">okay</span> <span data-start="2075.72" data-end="2078.48">so our response here from Mirage it has</span> <span data-start="2078.48" data-end="2082.139">a root object on it right as a to do key</span> <span data-start="2082.139" data-end="2084.21">and then inside of it an array of to</span> </p>
<p><span data-start="2084.21" data-end="2085.98">Do's and we're not expecting that we're</span> <span data-start="2085.98" data-end="2088.32">just expecting an array of objects so</span> <span data-start="2088.32" data-end="2090.659">let's we need to serialize our data to</span> <span data-start="2090.659" data-end="2092.429">match the shape that our API has that's</span> <span data-start="2092.429" data-end="2094.169">create a serialize err Mirage you can do</span> <span data-start="2094.169" data-end="2097.619">this for us so Mirage comes with three</span> <span data-start="2097.619" data-end="2099.21">serializers out-of-the-box for you you</span> <span data-start="2099.21" data-end="2101.31">can use a rest an active model or a JSON</span> </p>
<p><span data-start="2101.31" data-end="2104.07">API to rÃ©aliser you can also write your</span> <span data-start="2104.07" data-end="2105.27">own so you realize err if you really</span> <span data-start="2105.27" data-end="2108">want what we're just gonna use the basic</span> <span data-start="2108" data-end="2109.68">rest adapter here and</span> <span data-start="2109.68" data-end="2111.609">the same story here you have to make</span> <span data-start="2111.609" data-end="2113.2">sure the update your index file and I</span> <span data-start="2113.2" data-end="2115.42">make sure you import that to the Mirage</span> <span data-start="2115.42" data-end="2118.53">constructor so if we run the tests here</span> <span data-start="2118.53" data-end="2121.15">they're gonna pass and we have some fake</span> <span data-start="2121.15" data-end="2122.32">data in there so you can see that we</span> <span data-start="2122.32" data-end="2124.09">have a bunch of faker created records</span> <span data-start="2124.09" data-end="2127.359">there so congratulations we have</span> <span data-start="2127.359" data-end="2129.07">successfully mocked the network layer of</span> <span data-start="2129.07" data-end="2131.38">this really simple app that was a lot to</span> <span data-start="2131.38" data-end="2134.35">cover there I know but it's fully setup</span> <span data-start="2134.35" data-end="2135.85">with dynamic data that we can create</span> <span data-start="2135.85" data-end="2138.16">control whatever test scenario we please</span> <span data-start="2138.16" data-end="2141.1">like if we wanted to create 9002 dues we</span> <span data-start="2141.1" data-end="2143.29">can do that I don't recommend it though</span> <span data-start="2143.29" data-end="2146.68">it sounds like like a lot of anxiety so</span> <span data-start="2146.68" data-end="2148.66">now we can fill in the rest of our tests</span> <span data-start="2148.66" data-end="2150.82">things like editing toggling deleting</span> <span data-start="2150.82" data-end="2153.4">whatever you want to do with â€” dues so</span> <span data-start="2153.4" data-end="2155.65">nested interactors are pretty awesome</span> <span data-start="2155.65" data-end="2157.69">right so you can see they're on lines 4</span> <span data-start="2157.69" data-end="2161.56">to 7 we're doing some some nesting calls</span> <span data-start="2161.56" data-end="2163.57">to our to-do item interactor that we</span> <span data-start="2163.57" data-end="2166.93">created but writing to-do lists zero for</span> <span data-start="2166.93" data-end="2167.98">each interaction that we're gonna</span> <span data-start="2167.98" data-end="2169.78">perform is a little bit verbose and a</span> <span data-start="2169.78" data-end="2173.02">little bit annoying so let's let's not</span> <span data-start="2173.02" data-end="2175.3">do that and interactor provides us a way</span> <span data-start="2175.3" data-end="2177.1">to not have to do that we can just pass</span> <span data-start="2177.1" data-end="2180.01">and only after the chained interactor or</span> <span data-start="2180.01" data-end="2182.32">the Nessen interactor and now all the</span> <span data-start="2182.32" data-end="2183.43">interactions that we have under there</span> <span data-start="2183.43" data-end="2185.56">which is a double click filling the</span> <span data-start="2185.56" data-end="2187.48">input and then press enter will all</span> <span data-start="2187.48" data-end="2189.94">happen on the nested a nested interactor</span> <span data-start="2189.94" data-end="2197.5">there so let's skip the slide so this is</span> <span data-start="2197.5" data-end="2199.57">what our mocking endpoint looks like for</span> <span data-start="2199.57" data-end="2202.66">the edit which is a patch and deleting</span> <span data-start="2202.66" data-end="2205.6">which is a delete we're going to find</span> <span data-start="2205.6" data-end="2211.119">the parameter in our database collection</span> <span data-start="2211.119" data-end="2212.65">and then just pass it along and update</span> <span data-start="2212.65" data-end="2214.03">it with the attributes that are given in</span> <span data-start="2214.03" data-end="2216.79">the request and then similar story for</span> <span data-start="2216.79" data-end="2218.2">the delete we're gonna look up the</span> <span data-start="2218.2" data-end="2219.97">request ID and then actually just</span> <span data-start="2219.97" data-end="2221.71">destroy and then return the collection</span> <span data-start="2221.71" data-end="2225.34">that has the destroyed look so let's go</span> <span data-start="2225.34" data-end="2229.3">run our tests we have about 13 tests</span> <span data-start="2229.3" data-end="2230.89">here I didn't write a full-on test suite</span> <span data-start="2230.89" data-end="2232.7">but I could have</span> <span data-start="2232.7" data-end="2236.01">and I think those run pretty fast and so</span> <span data-start="2236.01" data-end="2238.29">you don't think I'm lying to you here is</span> <span data-start="2238.29" data-end="2242.13">big test running an iOS Safari Firefox</span> <span data-start="2242.13" data-end="2246.06">and Chrome also here so these are all</span> <span data-start="2246.06" data-end="2247.89">running our tests anywhere there's a</span> <span data-start="2247.89" data-end="2249.21">browser you could actually run this on a</span> <span data-start="2249.21" data-end="2252.59">physical device so like if you had my</span> <span data-start="2252.59" data-end="2255.27">network IP address and I started the</span> <span data-start="2255.27" data-end="2257.07">server you all could start running tests</span> <span data-start="2257.07" data-end="2260.37">just by visiting that URL so you can</span> <span data-start="2260.37" data-end="2261.84">find the full suite I can't fit it all</span> <span data-start="2261.84" data-end="2265.8">into a slide here at my github Rockdale</span> <span data-start="2265.8" data-end="2268.5">12 and big desk to do MVC so you can</span> <span data-start="2268.5" data-end="2273.06">check that out so we did it we set up</span> <span data-start="2273.06" data-end="2275.1">two MVC running big tests running in</span> <span data-start="2275.1" data-end="2278.4">cross browser and we learned how to what</span> <span data-start="2278.4" data-end="2280.17">interactor is we mocked our entire</span> <span data-start="2280.17" data-end="2281.31">network layers so we don't have to</span> <span data-start="2281.31" data-end="2284.4">actually talk to a real network and we</span> <span data-start="2284.4" data-end="2287.45">wrote some big tests so coming back to</span> <span data-start="2287.45" data-end="2289.44">complicated problems needs simple</span> <span data-start="2289.44" data-end="2292.04">examples I want to show a couple more</span> <span data-start="2292.04" data-end="2294.27">examples of what big test looks like in</span> <span data-start="2294.27" data-end="2296.31">interactors in a real production app</span> <span data-start="2296.31" data-end="2298.23">that we've been developing for one of</span> <span data-start="2298.23" data-end="2300.66">our clients so the first one would be</span> <span data-start="2300.66" data-end="2304.44">here where we're actually creating data</span> <span data-start="2304.44" data-end="2306.48">that we specifically need for this test</span> <span data-start="2306.48" data-end="2309">so we're testing that this thing called</span> <span data-start="2309" data-end="2310.26">a resource I'm not going to get into the</span> <span data-start="2310.26" data-end="2311.4">data model of this application because</span> <span data-start="2311.4" data-end="2313.11">it's really complicated but we're gonna</span> <span data-start="2313.11" data-end="2314.85">create a resource and create that it's</span> <span data-start="2314.85" data-end="2315.93">hidden and we're going to make some</span> <span data-start="2315.93" data-end="2318">assertions that in the UI that it</span> <span data-start="2318" data-end="2320.43">actually hides this thing from us and</span> <span data-start="2320.43" data-end="2322.29">then when we create that data we're</span> <span data-start="2322.29" data-end="2324.66">going to visit the URL of that data</span> <span data-start="2324.66" data-end="2328.08">that's created so on line 5 we set the</span> <span data-start="2328.08" data-end="2331.8">resource variable equal to the data that</span> <span data-start="2331.8" data-end="2334.44">we created and then when we visit that</span> <span data-start="2334.44" data-end="2336.75">route on line 11 we're actually picking</span> <span data-start="2336.75" data-end="2338.55">the ID off that that record that we</span> <span data-start="2338.55" data-end="2340.44">created and visiting it so it's the it's</span> <span data-start="2340.44" data-end="2343.82">a full control over the data there I</span> <span data-start="2343.82" data-end="2346.47">wanted to show you what filling in a</span> <span data-start="2346.47" data-end="2349.11">form looks like with an interactive so</span> <span data-start="2349.11" data-end="2352.53">we can change things as long as we want</span> <span data-start="2352.53" data-end="2354.48">here and the thing I kinda want to point</span> <span data-start="2354.48" data-end="2356.91">out here is this is interacting with a</span> <span data-start="2356.91" data-end="2358.92">date picker component which is actually</span> <span data-start="2358.92" data-end="2360.51">taken from our component library that's</span> <span data-start="2360.51" data-end="2362.099">shared between many like</span> <span data-start="2362.099" data-end="2363.839">ten or fifteen other UI applications</span> <span data-start="2363.839" data-end="2365.849">when we just import that interactor and</span> <span data-start="2365.849" data-end="2367.499">then just using our test suite we didn't</span> <span data-start="2367.499" data-end="2369.059">have to write interactions for how to</span> <span data-start="2369.059" data-end="2371.009">fill in and in a date picker for</span> <span data-start="2371.009" data-end="2372.269">selecting dates or anything like that</span> <span data-start="2372.269" data-end="2373.499">because that was already written for us</span> <span data-start="2373.499" data-end="2376.319">when we built the the component in our</span> <span data-start="2376.319" data-end="2379.17">component library so we fill in what</span> <span data-start="2379.17" data-end="2380.46">we're doing here is we're testing that</span> <span data-start="2380.46" data-end="2384.359">the application when we fill in a bunch</span> <span data-start="2384.359" data-end="2385.71">of bad data it'll give us client-side</span> <span data-start="2385.71" data-end="2388.229">errors so this is what the tests looked</span> <span data-start="2388.229" data-end="2390.269">like when they run as soon as I</span> <span data-start="2390.269" data-end="2392.72">interacted like interaction pops in and</span> <span data-start="2392.72" data-end="2395.46">we assert that those errors exist on the</span> <span data-start="2395.46" data-end="2398.7">page and the last one I wanted to give</span> <span data-start="2398.7" data-end="2400.799">as a more complicated example as</span> <span data-start="2400.799" data-end="2402.329">accessibility because I love</span> <span data-start="2402.329" data-end="2404.549">accessibility it's very near and dear to</span> <span data-start="2404.549" data-end="2407.22">my heart and this application we're</span> <span data-start="2407.22" data-end="2409.049">we're testing that our focus management</span> <span data-start="2409.049" data-end="2411.119">for the single page app actually still</span> <span data-start="2411.119" data-end="2415.769">works so when we travel our routes we're</span> <span data-start="2415.769" data-end="2417.119">making sure that it's focusing the</span> <span data-start="2417.119" data-end="2419.4">proper thing from each route transition</span> <span data-start="2419.4" data-end="2422.489">and making sure that it when we go from</span> <span data-start="2422.489" data-end="2423.96">one route on the transition back it's</span> <span data-start="2423.96" data-end="2425.339">selecting the the right item and an</span> <span data-start="2425.339" data-end="2428.969">infinite scrolling list so that's this</span> <span data-start="2428.969" data-end="2432.69">is what these tests look like so it's</span> <span data-start="2432.69" data-end="2433.979">running through all those navigating</span> <span data-start="2433.979" data-end="2435.299">routes going back and forth and making</span> <span data-start="2435.299" data-end="2436.829">sure that the focus is actually still</span> <span data-start="2436.829" data-end="2437.19">there</span> <span data-start="2437.19" data-end="2440.789">so I singled those tests out for you if</span> <span data-start="2440.789" data-end="2442.71">you want to see this application it's a</span> <span data-start="2442.71" data-end="2445.2">hundred percent open source so this is</span> <span data-start="2445.2" data-end="2447.15">where it lives its folio org folio</span> <span data-start="2447.15" data-end="2448.65">stands for the future of libraries is</span> <span data-start="2448.65" data-end="2451.44">open and we're building the holdings</span> <span data-start="2451.44" data-end="2453.719">application this app uses big tests</span> <span data-start="2453.719" data-end="2454.799">that's actually where big test was</span> <span data-start="2454.799" data-end="2457.559">developed it has over a thousand UI</span> <span data-start="2457.559" data-end="2459.93">tests and they all run about six minutes</span> <span data-start="2459.93" data-end="2462.93">on CI which are slower machines and your</span> <span data-start="2462.93" data-end="2464.039">local machine</span> <span data-start="2464.039" data-end="2466.559">we have 96% test coverage there we have</span> <span data-start="2466.559" data-end="2468.21">all kinds of tests there ranging from</span> <span data-start="2468.21" data-end="2469.68">all kinds of complexity so if you want</span> <span data-start="2469.68" data-end="2471.359">to dip your toes in and see what that</span> <span data-start="2471.359" data-end="2474.059">actually looks like go ahead and take a</span> <span data-start="2474.059" data-end="2476.759">look there are they're about like five</span> <span data-start="2476.759" data-end="2480.029">unit tests there and that's for testing</span> <span data-start="2480.029" data-end="2483.69">the Redux relationship merging so the</span> <span data-start="2483.69" data-end="2485.609">one question I get a lot is what about</span> <span data-start="2485.609" data-end="2488.13">graphic UL well with graph QL it's</span> <span data-start="2488.13" data-end="2489.869">actually even easier to use with big</span> <span data-start="2489.869" data-end="2492.089">tests and mock your data layer they have</span> <span data-start="2492.089" data-end="2493.89">helpers out there for creating a mock</span> <span data-start="2493.89" data-end="2494.82">server and</span> </p>
<p><span data-start="2494.82" data-end="2496.56">QL has a schema you just pass your</span> <span data-start="2496.56" data-end="2498.75">schema from your your epi and it can</span> <span data-start="2498.75" data-end="2499.98">come off all that data for you so you</span> <span data-start="2499.98" data-end="2502.98">just skip more lunch basically so</span> <span data-start="2502.98" data-end="2505.23">interactors are awesome and it seems</span> <span data-start="2505.23" data-end="2506.46">like they're a great pairing for testing</span> <span data-start="2506.46" data-end="2509.1">just components and you absolutely can</span> <span data-start="2509.1" data-end="2511.02">do that and we do do that like I</span> <span data-start="2511.02" data-end="2512.76">mentioned earlier so instead of</span> <span data-start="2512.76" data-end="2516.06">importing the setup app for testing</span> <span data-start="2516.06" data-end="2518">we're going to import the amount</span> <span data-start="2518" data-end="2520.26">component and a helper and we're just</span> <span data-start="2520.26" data-end="2523.79">going to mount a component here and I</span> <span data-start="2523.79" data-end="2525.87">wanted to point this one out so it's</span> <span data-start="2525.87" data-end="2528.36">from the same component here we're we're</span> <span data-start="2528.36" data-end="2530.88">passing a prop here called warning and</span> <span data-start="2530.88" data-end="2532.56">then on line 13 we're asserting that</span> <span data-start="2532.56" data-end="2535.02">that Prop exists with a feedback text</span> <span data-start="2535.02" data-end="2537.48">item on our interactor and if you look</span> <span data-start="2537.48" data-end="2540.39">at feedback text here on line 22 it's</span> <span data-start="2540.39" data-end="2542.01">actually using a CSS module so</span> <span data-start="2542.01" data-end="2544.44">interactors work with CSS modules -</span> <span data-start="2544.44" data-end="2546.48">those were built with in mind with them</span> <span data-start="2546.48" data-end="2548.43">in mind so you can just import those CSS</span> <span data-start="2548.43" data-end="2551.01">modules and use them as selectors so you</span> <span data-start="2551.01" data-end="2552.84">can get started by visiting big tests GS</span> <span data-start="2552.84" data-end="2556.68">do the CLI isn't quite ready yet but</span> <span data-start="2556.68" data-end="2559.32">give it like a week and we'll be there I</span> <span data-start="2559.32" data-end="2562.29">promise and big test is still in its</span> <span data-start="2562.29" data-end="2563.61">early days and we would love to have you</span> <span data-start="2563.61" data-end="2565.11">as a contributor if you're interested</span> </p>
<p><span data-start="2565.11" data-end="2568.11">I'm always open to pair and and help</span> <span data-start="2568.11" data-end="2571.11">people get there getting into it and get</span> <span data-start="2571.11" data-end="2573.39">their feet wet I love I love working</span> <span data-start="2573.39" data-end="2575.64">with anybody in the community so we</span> <span data-start="2575.64" data-end="2576.9">still have a lot of work to do this is</span> <span data-start="2576.9" data-end="2579.24">what our fully fleshed out emoji map</span> <span data-start="2579.24" data-end="2582.15">looks like so with zero config in mind</span> <span data-start="2582.15" data-end="2583.92">we want to build CLI that will handle</span> <span data-start="2583.92" data-end="2585.96">all the most mundane tasks for you you</span> <span data-start="2585.96" data-end="2587.76">don't so you can focus on writing tests</span> <span data-start="2587.76" data-end="2590.07">boilerplate snow fun we want to have</span> <span data-start="2590.07" data-end="2592.71">computers take care of that for you CLI</span> <span data-start="2592.71" data-end="2595.37">will also help and take care of</span> <span data-start="2595.37" data-end="2597.18">launching for you so you don't have to</span> <span data-start="2597.18" data-end="2598.56">use karma or test them but if you would</span> <span data-start="2598.56" data-end="2600.6">like you can still use those launchers</span> <span data-start="2600.6" data-end="2604.08">for your project also if you want the</span> <span data-start="2604.08" data-end="2605.25">last two items on this list are</span> <span data-start="2605.25" data-end="2607.77">longer-term goals we want to replace</span> <span data-start="2607.77" data-end="2609.3">mirage with something more modern that</span> <span data-start="2609.3" data-end="2611.4">uses serviceworkers and intercept</span> <span data-start="2611.4" data-end="2613.47">network requests so you have full access</span> <span data-start="2613.47" data-end="2617.55">to your network pane but for now mirage</span> <span data-start="2617.55" data-end="2620.31">does an amazing job for us and we don't</span> <span data-start="2620.31" data-end="2621.54">need to replace that so that's a</span> <span data-start="2621.54" data-end="2623.19">longer-term goal we have a lot of cool</span> <span data-start="2623.19" data-end="2624.66">ideas for what we can do with service</span> <span data-start="2624.66" data-end="2626.28">workers but</span> <span data-start="2626.28" data-end="2628.08">that's in the future and the last one</span> <span data-start="2628.08" data-end="2630.18">which is even further out maybe like mid</span> <span data-start="2630.18" data-end="2633.66">or early 2019 would be writing our own</span> <span data-start="2633.66" data-end="2635.88">runner so while you can still use it</span> <span data-start="2635.88" data-end="2637.86">with mocha or jasmine or jest or</span> <span data-start="2637.86" data-end="2639.39">whatever you want we want to write our</span> <span data-start="2639.39" data-end="2641.49">own runner that we can smartly split</span> <span data-start="2641.49" data-end="2642.9">your tests and paralyze them to make it</span> <span data-start="2642.9" data-end="2645.57">even faster like like I said we have</span> <span data-start="2645.57" data-end="2647.94">like 1,200 1,100 tests and that sweet</span> <span data-start="2647.94" data-end="2649.35">and they run in about six minutes we</span> <span data-start="2649.35" data-end="2650.58">think we can probably cut that down to</span> <span data-start="2650.58" data-end="2653.64">about two and we're looking at adding</span> <span data-start="2653.64" data-end="2656.4">other features like recording or honest</span> <span data-start="2656.4" data-end="2660.36">fail or screenshotting on fail but those</span> <span data-start="2660.36" data-end="2661.8">are further down the road I would like</span> <span data-start="2661.8" data-end="2663.78">to give a big thanks to will Lisbon he</span> <span data-start="2663.78" data-end="2667.35">basically wrote big tests himself I have</span> <span data-start="2667.35" data-end="2669.51">helped a little bit but this is all</span> <span data-start="2669.51" data-end="2671.61">mostly his work so I'd like to give big</span> <span data-start="2671.61" data-end="2673.44">thanks to him and I'd like you to give a</span> <span data-start="2673.44" data-end="2675.15">big thanks to front side for sponsoring</span> <span data-start="2675.15" data-end="2676.44">all the work on this for us to be able</span> <span data-start="2676.44" data-end="2678.69">to do it so thanks</span> </p>
</section>