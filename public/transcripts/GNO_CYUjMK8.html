<section>
<p><span data-start="0.6" data-end="18.6">[Music]</span> <span data-start="18.61" data-end="21.17">so the title of this talk is making</span> <span data-start="21.17" data-end="24.02">WebGL dance and that's because linear</span> <span data-start="24.02" data-end="26.48">algebra isn't as sexy on a schedule but</span> <span data-start="26.48" data-end="28.4">the talk isn't so much about WebGL</span> <span data-start="28.4" data-end="30.079">directly as it is about graphics</span> <span data-start="30.079" data-end="31.939">hardware and how it works because this</span> <span data-start="31.939" data-end="34.34">could be making OpenGL dance or direct3d</span> <span data-start="34.34" data-end="37.39">all these principles kind of apply and</span> <span data-start="37.39" data-end="43.629">so my remote is not working just sick</span> <span data-start="43.629" data-end="46.309">here we go so I'd like to talk about</span> <span data-start="46.309" data-end="48.589">three things how to draw where to draw</span> <span data-start="48.589" data-end="50.539">and what to draw which is sort of the</span> <span data-start="50.539" data-end="52.43">the mental model of how you should think</span> <span data-start="52.43" data-end="54.2">about what a graphics card does and</span> <span data-start="54.2" data-end="56.449">where it comes from as opposed to doing</span> <span data-start="56.449" data-end="60.11">sort of yet another WebGL 101 how to</span> <span data-start="60.11" data-end="62.539">draw a cube and make it move because</span> <span data-start="62.539" data-end="64.46">well that teaches you you know how to</span> <span data-start="64.46" data-end="67.369">use WebGL and how to use the API it kind</span> <span data-start="67.369" data-end="69.289">of ends up being a dead end because</span> <span data-start="69.289" data-end="70.55">you're not quite sure what's going on</span> <span data-start="70.55" data-end="73.31">and once you get into more advanced</span> <span data-start="73.31" data-end="76.369">stuff if there's a bug or an issue you</span> <span data-start="76.369" data-end="79.1">don't know what to do so the good news</span> <span data-start="79.1" data-end="80.81">is however everything I'm going to be</span> <span data-start="80.81" data-end="82.49">talking about is really stuff that you</span> <span data-start="82.49" data-end="83.96">should understand but not necessarily</span> <span data-start="83.96" data-end="85.61">know how to implement yourself because</span> <span data-start="85.61" data-end="87.439">the graphics hardware does it for you</span> <span data-start="87.439" data-end="89.27">it's convenient so even though there's</span> <span data-start="89.27" data-end="91.52">gonna be a lot of techniques and all</span> <span data-start="91.52" data-end="93.92">that you don't be worried about it</span> <span data-start="93.92" data-end="95.99">because you just you know type the</span> <span data-start="95.99" data-end="98.119">command or set the thing to true to get</span> <span data-start="98.119" data-end="100.1">that effect going the bad news is</span> <span data-start="100.1" data-end="102.74">there's going to be four dimensions and</span> </p>
<p><span data-start="102.74" data-end="104.81">I'm not going to apologize about that</span> <span data-start="104.81" data-end="108.68">because it's cool and the thing is you</span> <span data-start="108.68" data-end="110.21">know this is mathematics but we</span> <span data-start="110.21" data-end="111.29">shouldn't be afraid of it we should</span> <span data-start="111.29" data-end="113.24">embrace it what this means in this case</span> <span data-start="113.24" data-end="114.53">is this just a fourth number where</span> <span data-start="114.53" data-end="115.97">before there used to be only three and</span> <span data-start="115.97" data-end="118.88">it has some interesting consequences so</span> <span data-start="118.88" data-end="121.579">let's get started in the beginning there</span> <span data-start="121.579" data-end="125.299">was pixels and pixels were fun but no</span> <span data-start="125.299" data-end="126.53">that's not true there was a vector</span> <span data-start="126.53" data-end="128.479">graphics first but we'll forget about</span> <span data-start="128.479" data-end="133.13">that pixels there was something called</span> <span data-start="133.13" data-end="135.11">brezin hemlines and that was fun because</span> <span data-start="135.11" data-end="136.67">using a simple for loop you could just</span> <span data-start="136.67" data-end="140.57">color in pixels and draw lines and once</span> <span data-start="140.57" data-end="141.98">we figured out how to do that we could</span> <span data-start="141.98" data-end="143.87">even draw solid shapes using something</span> <span data-start="143.87" data-end="145.85">like scanline rendering to draw a</span> <span data-start="145.85" data-end="147.459">triangle like this</span> <span data-start="147.459" data-end="149.12">unfortunately if you try to for example</span> <span data-start="149.12" data-end="151.18">make a spinning triangle with the</span> <span data-start="151.18" data-end="153.79">technique it doesn't so much rotate as</span> <span data-start="153.79" data-end="156.579">tick why does it tick why does it look</span> <span data-start="156.579" data-end="159.31">bad well it's because we're snapping to</span> <span data-start="159.31" data-end="162.64">pixels everything we've done is we've</span> <span data-start="162.64" data-end="164.379">defined our graphics operations in terms</span> <span data-start="164.379" data-end="166.329">of the pixel grid which means we can</span> <span data-start="166.329" data-end="168.93">only move the corners in this fashion</span> <span data-start="168.93" data-end="171.879">how do we solve this well if you know a</span> <span data-start="171.879" data-end="173.349">little bit about graphics you may be</span> <span data-start="173.349" data-end="176.5">thinking of the word anti-aliasing no</span> <span data-start="176.5" data-end="178.239">that's something else because look at</span> <span data-start="178.239" data-end="179.95">this beautifully anti-aliased triangle</span> <span data-start="179.95" data-end="183.459">that's still jerking around in an ugly</span> <span data-start="183.459" data-end="185.709">fashion what we actually want is</span> <span data-start="185.709" data-end="187.299">something called sub pixel accuracy</span> <span data-start="187.299" data-end="189.579">which looks like this where even though</span> <span data-start="189.579" data-end="191.17">you know it's alias there's only black</span> <span data-start="191.17" data-end="192.909">and white and there's jaggies it's</span> <span data-start="192.909" data-end="194.889">moving smoothly and I can put the</span> <span data-start="194.889" data-end="198.819">corners of the shape anywhere I want how</span> <span data-start="198.819" data-end="200.62">exactly does this work because it's not</span> <span data-start="200.62" data-end="203.019">obvious anymore where exactly the the</span> <span data-start="203.019" data-end="205.109">edges on the pixel grid start or end</span> <span data-start="205.109" data-end="207.37">when the the pixel in the corner</span> <span data-start="207.37" data-end="208.629">actually should be black when it's</span> <span data-start="208.629" data-end="210.73">partially covered etc and the key is</span> <span data-start="210.73" data-end="212.47">something called sampling or using</span> <span data-start="212.47" data-end="214.75">samples where whether a pixel is black</span> <span data-start="214.75" data-end="216.609">or white is actually just defined by one</span> <span data-start="216.609" data-end="218.199">thing which is the point right in the</span> <span data-start="218.199" data-end="220.449">middle so at that point is inside the</span> <span data-start="220.449" data-end="223.03">triangle we color the pixel black</span> <span data-start="223.03" data-end="226.03">otherwise we color it white and this</span> <span data-start="226.03" data-end="227.59">might not seem like an important concept</span> <span data-start="227.59" data-end="229.69">but it really is because it defines</span> <span data-start="229.69" data-end="231.489">everything that follows and that's kind</span> <span data-start="231.489" data-end="232.629">of why I'm talking about it first</span> <span data-start="232.629" data-end="234.069">because what this means is there's</span> <span data-start="234.069" data-end="236.65">really two worlds on the left hand you</span> <span data-start="236.65" data-end="239.919">have the world of vectors where you know</span> <span data-start="239.919" data-end="241.599">everything is mathematical and beautiful</span> <span data-start="241.599" data-end="244.5">your shapes are mathematically defined</span> <span data-start="244.5" data-end="248.47">and then you use sampling to transfer it</span> <span data-start="248.47" data-end="250.54">over to the world on the right which is</span> <span data-start="250.54" data-end="254.29">the raster world the world of pixels and</span> <span data-start="254.29" data-end="255.76">you really have to think of this sort of</span> <span data-start="255.76" data-end="258.459">as a final step and the reason is</span> <span data-start="258.459" data-end="259.9">because when you actually look at this</span> <span data-start="259.9" data-end="262.06">diagram on the left hand side those</span> <span data-start="262.06" data-end="263.8">samples are in the middle of every pixel</span> <span data-start="263.8" data-end="265.99">and that means the edges of the pixel</span> <span data-start="265.99" data-end="268.12">grid don't actually exist in vector</span> <span data-start="268.12" data-end="270.57">world there's sort of an artifact of the</span> <span data-start="270.57" data-end="274.27">rasterization if you will and in fact we</span> <span data-start="274.27" data-end="275.5">describe this as a nearest neighbor</span> <span data-start="275.5" data-end="278.32">filter where you know the when we try to</span> <span data-start="278.32" data-end="279.94">turn this grid of samples back into</span> <span data-start="279.94" data-end="282.31">something continuous we just assign the</span> <span data-start="282.31" data-end="283.47">color of the nearest</span> <span data-start="283.47" data-end="285.57">people to that area and the fact that</span> <span data-start="285.57" data-end="287.31">the pixels come out square is kind of</span> <span data-start="287.31" data-end="291.89">just an artifact of that is not good of</span> <span data-start="291.89" data-end="296.46">the where the samples are placed and and</span> <span data-start="296.46" data-end="298.59">so this is ugly and pixelated a better</span> <span data-start="298.59" data-end="300.21">ways for example to use a bilinear</span> <span data-start="300.21" data-end="303.33">filter where you you add gradients</span> <span data-start="303.33" data-end="306.12">between pixels to sort of even it out</span> <span data-start="306.12" data-end="308.55">and what's important about this diagram</span> <span data-start="308.55" data-end="310.26">is that the color information is not</span> <span data-start="310.26" data-end="312.18">again on the only edges of the pixel</span> <span data-start="312.18" data-end="314.76">grid it's in the middle and so the edges</span> <span data-start="314.76" data-end="317.37">of the pixel are kind of a distraction</span> <span data-start="317.37" data-end="321.54">data they don't factor in here so what</span> <span data-start="321.54" data-end="322.89">actually is anti-aliasing and an</span> <span data-start="322.89" data-end="323.64">aliasing</span> <span data-start="323.64" data-end="327.33">for well it's this in this case I'm</span> <span data-start="327.33" data-end="330.3">taking a texture of white and of gray</span> <span data-start="330.3" data-end="332.91">and black and looking at in perspective</span> <span data-start="332.91" data-end="335.34">and it's being sampled and you can see</span> <span data-start="335.34" data-end="337.68">in the distance there's all this noise</span> <span data-start="337.68" data-end="341.25">and blurring is going on and the reason</span> <span data-start="341.25" data-end="342.69">that happens is because when you sample</span> <span data-start="342.69" data-end="344.61">you can only pick one or the other</span> <span data-start="344.61" data-end="346.8">either gray or black what it actually</span> <span data-start="346.8" data-end="348.11">should look like is something like this</span> <span data-start="348.11" data-end="350.669">where the further you go into the</span> <span data-start="350.669" data-end="352.77">distance the the more blurred out and</span> <span data-start="352.77" data-end="356.07">gray it gets because you know the</span> <span data-start="356.07" data-end="357.66">projection of a single pixel on the</span> <span data-start="357.66" data-end="361.41">screen now covers a wide area far far</span> <span data-start="361.41" data-end="365.34">far in the distance look at a liasing a</span> <span data-start="365.34" data-end="367.56">bit closer has to do with something</span> <span data-start="367.56" data-end="368.94">called a sampling theorem and the</span> </p>
<p><span data-start="368.94" data-end="370.89">Nyquist frequency where if you take this</span> <span data-start="370.89" data-end="373.89">pattern of bars and you can press it you</span> <span data-start="373.89" data-end="375.479">get to this point where it goes white</span> <span data-start="375.479" data-end="376.7">black white black white black</span> <span data-start="376.7" data-end="379.2">alternating and you try to compress it</span> <span data-start="379.2" data-end="381.51">further it starts to get messed up in</span> <span data-start="381.51" data-end="383.97">fact it folds in on itself and does</span> <span data-start="383.97" data-end="386.55">something weird running that backwards</span> <span data-start="386.55" data-end="389.1">you can see you approach the Nyquist</span> <span data-start="389.1" data-end="391.26">frequency white black white white black</span> <span data-start="391.26" data-end="393.69">and then it expands smoothly again so</span> <span data-start="393.69" data-end="395.46">what that means is you can't compress</span> <span data-start="395.46" data-end="398.1">any more variation onto the pixel grid</span> <span data-start="398.1" data-end="401.16">then that particular frequency because</span> <span data-start="401.16" data-end="404.22">there's no room for it and so the fact</span> <span data-start="404.22" data-end="405.9">that you get jaggies when you're trying</span> <span data-start="405.9" data-end="409.71">to draw shapes is really an artifact of</span> <span data-start="409.71" data-end="412.2">aliasing and instead of thinking again</span> <span data-start="412.2" data-end="413.849">of the pixel edges you need to look at</span> <span data-start="413.849" data-end="416.22">the slopes here because because of the</span> <span data-start="416.22" data-end="417.15">pixel grid there</span> <span data-start="417.15" data-end="419.16">maximum slope between white and black</span> <span data-start="419.16" data-end="421.65">that we can we can represent with this</span> <span data-start="421.65" data-end="423.69">information and that's really where the</span> <span data-start="423.69" data-end="426.15">problem lies it has very little to do</span> <span data-start="426.15" data-end="426.36">with</span> <span data-start="426.36" data-end="428.64">jaggies which is what most people think</span> <span data-start="428.64" data-end="431.1">of when they talk about anti-aliasing so</span> <span data-start="431.1" data-end="433.53">what is anti-aliasing isn't blurring all</span> <span data-start="433.53" data-end="436.65">the things sort of it's blurring it in a</span> <span data-start="436.65" data-end="438.57">specific way what you're actually doing</span> <span data-start="438.57" data-end="440.4">is you're determining how much of your</span> <span data-start="440.4" data-end="443.28">shape covers every pixel and then</span> <span data-start="443.28" data-end="445.29">shading the the pixel proportionately</span> <span data-start="445.29" data-end="447.96">and so you can do that mathematically</span> <span data-start="447.96" data-end="449.46">using the rules of geometry to get an</span> <span data-start="449.46" data-end="451.86">exact result but that's kind of annoying</span> <span data-start="451.86" data-end="453.45">especially when you have you know not</span> <span data-start="453.45" data-end="455.1">one triangle but let's say a million</span> <span data-start="455.1" data-end="457.23">which is not all that uncommon these</span> <span data-start="457.23" data-end="459.63">days so we use something else called</span> <span data-start="459.63" data-end="461.67">super sampling where you put lots of</span> <span data-start="461.67" data-end="464.34">samples inside the pixels and then you</span> <span data-start="464.34" data-end="466.56">get you know in this case 16 shades gray</span> <span data-start="466.56" data-end="468.87">possible per pixel and that sort of</span> <span data-start="468.87" data-end="470.61">looks okay unfortunately now you're</span> <span data-start="470.61" data-end="472.14">doing 16 times more work so they</span> <span data-start="472.14" data-end="474.06">invented something called multi sampling</span> <span data-start="474.06" data-end="476.94">where you only apply the the dense</span> <span data-start="476.94" data-end="478.71">sampling on the pixels that need it and</span> <span data-start="478.71" data-end="482.28">it looks like this now you you'll notice</span> <span data-start="482.28" data-end="483.54">in the middle of the shape you know</span> <span data-start="483.54" data-end="485.37">we're doing traditional sampling which</span> <span data-start="485.37" data-end="487.26">means there's no anti-aliasing there</span> <span data-start="487.26" data-end="488.61">which means it'll is going to look ugly</span> <span data-start="488.61" data-end="491.4">and then distorted like before so for</span> <span data-start="491.4" data-end="494.19">that we use other things like the</span> <span data-start="494.19" data-end="495.78">anisotropic filtering that I showed</span> <span data-start="495.78" data-end="498.69">before and the what you end up</span> <span data-start="498.69" data-end="500.58">approximating and sampling is something</span> <span data-start="500.58" data-end="505.08">more like this where this looks more</span> <span data-start="505.08" data-end="508.44">like a spinning triangle and then the</span> <span data-start="508.44" data-end="510.36">jagged one before which just skipped</span> <span data-start="510.36" data-end="513.6">around now if you try to think of this</span> <span data-start="513.6" data-end="515.76">in the the pure vector world without</span> <span data-start="515.76" data-end="518.13">sampling this is going to look something</span> <span data-start="518.13" data-end="520.53">like this which is a triangle that's</span> <span data-start="520.53" data-end="523.26">rotating smoothly surrounded by one</span> <span data-start="523.26" data-end="525.96">pixel white gradient and you can see</span> <span data-start="525.96" data-end="527.1">that because of the sampling this is</span> <span data-start="527.1" data-end="528.84">where the sort of shades of grey</span> </p>
<p><span data-start="528.84" data-end="531.39">Stairsteps comes from as these gradient</span> <span data-start="531.39" data-end="533.43">transitions underneath the the sampling</span> <span data-start="533.43" data-end="536.1">grid and whenever you have any sort of</span> <span data-start="536.1" data-end="537.81">filtering technique whether it's a</span> <span data-start="537.81" data-end="539.79">Gaussian blur or mipmapping or an</span> <span data-start="539.79" data-end="541.68">anisotropic filter you're basically just</span> <span data-start="541.68" data-end="543.18">blurring your information before</span> <span data-start="543.18" data-end="545.34">sampling it to make sure that the slope</span> <span data-start="545.34" data-end="548.1">of your color information does not</span> <span data-start="548.1" data-end="550.46">exceed the limit that you</span> <span data-start="550.46" data-end="556.16">represent now just for completeness I</span> <span data-start="556.16" data-end="558.55">mentioned this WebKit font smoothing</span> <span data-start="558.55" data-end="560.87">which is you know a lot of people have</span> <span data-start="560.87" data-end="563.84">issues with this and turn it off because</span> </p>
<p><span data-start="563.84" data-end="565.49">Apple kind of did something stupid and</span> <span data-start="565.49" data-end="567.38">uses different filter that makes a font</span> <span data-start="567.38" data-end="569.72">look darker but it's just you know it's</span> <span data-start="569.72" data-end="571.61">sampling on a sub pixel grid doing red</span> <span data-start="571.61" data-end="575.27">green blue separately and the thing is</span> <span data-start="575.27" data-end="578.12">pixels are really dying or are dead but</span> <span data-start="578.12" data-end="579.98">they've been reborn because pixels are</span> <span data-start="579.98" data-end="582.86">dead as a design unit because everything</span> <span data-start="582.86" data-end="585.11">is scalable now and even though I'm</span> <span data-start="585.11" data-end="586.55">supposed to be supposed to be talking</span> <span data-start="586.55" data-end="587.18">about WebGL</span> <span data-start="587.18" data-end="589.34">all of this also really applies to CSS</span> <span data-start="589.34" data-end="592.55">now because your iPhone your your</span> <span data-start="592.55" data-end="596.48">zoomable browser is a GL scene and is</span> <span data-start="596.48" data-end="599.24">defined in vector world not in raster</span> <span data-start="599.24" data-end="604.76">world and not just pixels but any sort</span> <span data-start="604.76" data-end="606.59">of information in geometry for example</span> <span data-start="606.59" data-end="608.54">this height map which I'm generating</span> <span data-start="608.54" data-end="610.19">procedurally and that's that's a</span> <span data-start="610.19" data-end="614.98">different talk is defined on a grid and</span> <span data-start="614.98" data-end="617.18">you know you have to think of this as</span> <span data-start="617.18" data-end="618.89">sampled information that you're</span> <span data-start="618.89" data-end="621.23">processing now you can see here I'm</span> <span data-start="621.23" data-end="623.03">tuning the knobs on this generator to</span> <span data-start="623.03" data-end="625.55">make it oscillate in an interesting way</span> <span data-start="625.55" data-end="627.38">and you can see that I've added water</span> <span data-start="627.38" data-end="630.56">and you may be wondering how does it</span> <span data-start="630.56" data-end="632.66">know which part should be blue which</span> <span data-start="632.66" data-end="634.43">parts should be green is it for example</span> <span data-start="634.43" data-end="636.83">taking the surface that I've defined and</span> <span data-start="636.83" data-end="639.62">and cutting out the parts that are</span> <span data-start="639.62" data-end="641.96">underwater is it doing something else</span> <span data-start="641.96" data-end="643.91">well it's actually quite simple and it</span> <span data-start="643.91" data-end="646.61">turns out that samples are both the</span> <span data-start="646.61" data-end="648.26">curse and that's and the blessing the</span> <span data-start="648.26" data-end="650.27">problem and the solution because we use</span> <span data-start="650.27" data-end="652.7">something like that your sample isn't</span> <span data-start="652.7" data-end="655.28">just color it can have additional</span> <span data-start="655.28" data-end="657.41">information associated with it for</span> <span data-start="657.41" data-end="659.36">example depth we use something called a</span> </p>
<p><span data-start="659.36" data-end="662.45">Zed buffer where for every pixel in your</span> <span data-start="662.45" data-end="664.58">image you just record the depth as a</span> <span data-start="664.58" data-end="666.35">number in this case represented as a</span> <span data-start="666.35" data-end="669.08">shade of gray and whenever you draw</span> <span data-start="669.08" data-end="671.66">anything you update your depth map along</span> <span data-start="671.66" data-end="674.06">with it so that you know is the thing</span> <span data-start="674.06" data-end="676.73">that I'm drawing closer or further away</span> <span data-start="676.73" data-end="678.8">than what's already there and so you can</span> <span data-start="678.8" data-end="681.44">do per pixel cutting out of shapes that</span> <span data-start="681.44" data-end="683.82">intersect without actually knowing</span> <span data-start="683.82" data-end="685.74">anything about the geometry involved</span> <span data-start="685.74" data-end="688.68">it's it's a sort of very dumb but very</span> <span data-start="688.68" data-end="690.27">effective way of doing it and that turns</span> <span data-start="690.27" data-end="692.19">out to be what GPUs are great out</span> <span data-start="692.19" data-end="693.6">because this is massively parallel</span> <span data-start="693.6" data-end="694.2">izybelle</span> <span data-start="694.2" data-end="696.84">and aside from depth for example you</span> <span data-start="696.84" data-end="699.6">might also record orientation in the</span> <span data-start="699.6" data-end="701.46">form of normal which is a vector I'll go</span> <span data-start="701.46" data-end="703.32">into that more later for example for</span> <span data-start="703.32" data-end="705.24">something called deferred lighting where</span> <span data-start="705.24" data-end="707.34">you you generate an image like this and</span> <span data-start="707.34" data-end="710.1">then you paint the light in afterwards</span> <span data-start="710.1" data-end="712.83">using only this information so you stop</span> <span data-start="712.83" data-end="715.62">knowing what is outside the frame of the</span> <span data-start="715.62" data-end="717.63">picture you don't even know what it</span> <span data-start="717.63" data-end="718.95">represents all you know is that you have</span> <span data-start="718.95" data-end="720.81">a grid of samples with depth and normal</span> <span data-start="720.81" data-end="723.48">and color that you then used to do</span> <span data-start="723.48" data-end="727.98">lighting with so next step is the part</span> <span data-start="727.98" data-end="731.1">where you learn linear algebra and that</span> <span data-start="731.1" data-end="734.13">might you know send heart rates spiking</span> <span data-start="734.13" data-end="739.05">a little bit but don't worry because</span> <span data-start="739.05" data-end="740.66">we're going to do fun stuff with images</span> <span data-start="740.66" data-end="743.31">let's start with something called the</span> <span data-start="743.31" data-end="744.9">affine transforms which you would know</span> <span data-start="744.9" data-end="747.09">as the transform tool from Photoshop or</span> <span data-start="747.09" data-end="750.77">illustrator and those transforms include</span> <span data-start="750.77" data-end="754.47">rotation scaling and skewing and they</span> <span data-start="754.47" data-end="756.39">have something in common what they have</span> <span data-start="756.39" data-end="757.68">in common is that they all preserve</span> <span data-start="757.68" data-end="759.9">parallel lines no matter how you combine</span> <span data-start="759.9" data-end="762">them and that's a very useful property</span> <span data-start="762" data-end="763.41">because it means you can describe the</span> <span data-start="763.41" data-end="765.6">entire transform just by saying what it</span> <span data-start="765.6" data-end="769.23">does to the grid so you have you can</span> <span data-start="769.23" data-end="770.55">describe the grid using something called</span> <span data-start="770.55" data-end="773.37">a vector basis which is just your X unit</span> <span data-start="773.37" data-end="776.28">and Y unit represented as an arrow in</span> <span data-start="776.28" data-end="778.83">this case and because vectors are arrows</span> <span data-start="778.83" data-end="781.62">we can sort of do math with them and</span> <span data-start="781.62" data-end="783.51">that's that's essentially linear algebra</span> <span data-start="783.51" data-end="786.24">but let's forget about the numbers for a</span> <span data-start="786.24" data-end="789.35">second and just do it on paper and</span> <span data-start="789.35" data-end="792.78">suppose for example that I define a new</span> <span data-start="792.78" data-end="796.14">vector basis and I give you two</span> <span data-start="796.14" data-end="798.06">arbitrary arrows and I say tell me what</span> <span data-start="798.06" data-end="799.86">the smiley face looks like after it's</span> <span data-start="799.86" data-end="801.75">been transformed or let's start with</span> <span data-start="801.75" data-end="804.3">just that one point in purple see what</span> <span data-start="804.3" data-end="806.57">it looks like or where it should be and</span> <span data-start="806.57" data-end="809.43">that's easy because you decompose it</span> <span data-start="809.43" data-end="812.07">into its X and Y coordinates and then</span> <span data-start="812.07" data-end="813.93">you reassemble it on the other side</span> <span data-start="813.93" data-end="816.529">using the new grid and</span> <span data-start="816.529" data-end="818.389">because vectors are arrows you can also</span> <span data-start="818.389" data-end="819.949">scale them not just add them together</span> <span data-start="819.949" data-end="822.289">and that means that using this procedure</span> <span data-start="822.289" data-end="823.819">of disassembling and reassembling you</span> <span data-start="823.819" data-end="826.159">can find out where any point is after</span> <span data-start="826.159" data-end="829.489">it's been transformed just by using your</span> <span data-start="829.489" data-end="834.079">vector basis and if you get this then</span> <span data-start="834.079" data-end="836.539">congratulations you get matrices because</span> <span data-start="836.539" data-end="838.249">these mysterious grids of numbers that</span> <span data-start="838.249" data-end="839.869">they threw at you in school and that</span> <span data-start="839.869" data-end="841.489">they never really wanted to explain are</span> <span data-start="841.489" data-end="843.829">really simple they're the coordinates of</span> <span data-start="843.829" data-end="846.139">the blue and the green dot that just</span> <span data-start="846.139" data-end="848.059">describe where the grid has moved to</span> <span data-start="848.059" data-end="851.299">when you're done transforming and so the</span> <span data-start="851.299" data-end="852.769">column on the left is just the x</span> <span data-start="852.769" data-end="854.299">coordinate y coordinate of the blue</span> <span data-start="854.299" data-end="857.329">points the right the green numbers are</span> <span data-start="857.329" data-end="860.199">the X&Y coordinate of the Green Point</span> <span data-start="860.199" data-end="862.399">the reason you put them in a matrix is</span> <span data-start="862.399" data-end="864.049">because that allows you to do the</span> <span data-start="864.049" data-end="866.329">computations effectively in this case</span> <span data-start="866.329" data-end="867.739">something called the matrix vector</span> <span data-start="867.739" data-end="869.479">multiplication which is just</span> <span data-start="869.479" data-end="872.149">transforming a point to conform to a new</span> <span data-start="872.149" data-end="874.459">grid and it looks like this when you</span> <span data-start="874.459" data-end="878.539">write it out and so again you do this</span> <span data-start="878.539" data-end="880.219">procedure of disassembling this case</span> <span data-start="880.219" data-end="882.229">literally cleaving your matrix into two</span> <span data-start="882.229" data-end="884.389">and multiplying it by the two</span> <span data-start="884.389" data-end="885.499">coordinates of the point that you're</span> <span data-start="885.499" data-end="887.929">interested in in this case transforming</span> <span data-start="887.929" data-end="890.47">the red point into the purple point</span> <span data-start="890.47" data-end="896.229">transforming a circle into an oval and</span> <span data-start="896.229" data-end="898.999">then if we want to for example apply</span> <span data-start="898.999" data-end="900.439">another transformation let's say a</span> <span data-start="900.439" data-end="903.199">rotation we find that our vector basis</span> <span data-start="903.199" data-end="905.299">has just moved to a new location which</span> <span data-start="905.299" data-end="908.209">means there's just a new matrix and this</span> <span data-start="908.209" data-end="910.189">is where where matrix math gets really</span> <span data-start="910.189" data-end="912.289">interesting because if you do the naive</span> <span data-start="912.289" data-end="914.299">solution to this problem you apply two</span> <span data-start="914.299" data-end="918.619">transforms as in the bottom and you know</span> <span data-start="918.619" data-end="920.539">for every transformation that you pile</span> <span data-start="920.539" data-end="921.739">on you have to do another matrix</span> <span data-start="921.739" data-end="923.899">multiplication but because of the</span> <span data-start="923.899" data-end="926.029">properties you can condense them all</span> <span data-start="926.029" data-end="929.509">together and end up just optimizing in a</span> <span data-start="929.509" data-end="931.999">way into a single transform and that's</span> <span data-start="931.999" data-end="933.649">sort of the secret as the Y computer</span> <span data-start="933.649" data-end="936.079">graphics can be fast because you can</span> <span data-start="936.079" data-end="937.999">condense the relationship and the</span> <span data-start="937.999" data-end="940.359">placement of objects into just a single</span> <span data-start="940.359" data-end="942.769">mathematical object of a constant size</span> <span data-start="942.769" data-end="947.329">namely a matrix and this works in 2d but</span> <span data-start="947.329" data-end="950.36">it also works in 3d so a 3d image</span> <span data-start="950.36" data-end="953.319">is just a set of three vectors this case</span> <span data-start="953.319" data-end="956.119">red green blue that define an</span> <span data-start="956.119" data-end="959.779">orientation in space and in the matrix</span> <span data-start="959.779" data-end="961.189">you end up with three columns of three</span> <span data-start="961.189" data-end="964.339">coordinates and again you do a matrix</span> <span data-start="964.339" data-end="967.1">multiplication to transform in this case</span> <span data-start="967.1" data-end="969.47">the flat smiley face into a one that's</span> <span data-start="969.47" data-end="974.389">positioned in 3d and it also works in</span> <span data-start="974.389" data-end="977.179">four dimensions and that can be a little</span> <span data-start="977.179" data-end="978.129">weird</span> <span data-start="978.129" data-end="981.41">now why on earth would you do this</span> <span data-start="981.41" data-end="983.989">what's the point is what is the fourth</span> <span data-start="983.989" data-end="987.079">dimension well the key is actually in</span> <span data-start="987.079" data-end="989.66">the image which is four dimensions</span> <span data-start="989.66" data-end="992.179">projected back into 3d where suddenly</span> <span data-start="992.179" data-end="994.04">parallel lines are no longer parallel</span> <span data-start="994.04" data-end="996.049">which is interesting because that's what</span> <span data-start="996.049" data-end="997.79">perspective does and when you're</span> <span data-start="997.79" data-end="999.379">rendering in 3d often you want</span> <span data-start="999.379" data-end="1000.699">perspective you want it to look natural</span> <span data-start="1000.699" data-end="1004.449">and that is why we use four dimensions</span> <span data-start="1004.449" data-end="1006.639">and I can't really show you four</span> <span data-start="1006.639" data-end="1008.949">dimensional math because picturing that</span> <span data-start="1008.949" data-end="1011.679">is kind of kooky but I'll show you how</span> <span data-start="1011.679" data-end="1013.509">it works for two-dimensional images</span> <span data-start="1013.509" data-end="1016.54">where you apply the third dimension to</span> <span data-start="1016.54" data-end="1019.959">do the same kind of trick so the reason</span> <span data-start="1019.959" data-end="1021.699">we use four dimensional matrix is to do</span> <span data-start="1021.699" data-end="1024.309">3d math is the same reason we use three</span> <span data-start="1024.309" data-end="1026.679">dimensional matrices to do 2d math and</span> <span data-start="1026.679" data-end="1028.779">it works like this you have ordinary</span> <span data-start="1028.779" data-end="1032.439">2-dimensional space a grid and that you</span> <span data-start="1032.439" data-end="1034.329">end up sort of doing a bat-signal thing</span> <span data-start="1034.329" data-end="1036.88">where you project it at word like this</span> <span data-start="1036.88" data-end="1041.019">and you apply so this is this is space</span> <span data-start="1041.019" data-end="1043.24">this is 3d and yet we call it</span> <span data-start="1043.24" data-end="1045.159">two-dimensional space why well because</span> <span data-start="1045.159" data-end="1047.38">the image that we're projecting is</span> <span data-start="1047.38" data-end="1048.82">two-dimensional and just like you know a</span> <span data-start="1048.82" data-end="1051.61">bat-signal projected onto a cloud the</span> <span data-start="1051.61" data-end="1053.71">delight along any particular Ray is</span> <span data-start="1053.71" data-end="1055.779">constant which means you only have two</span> <span data-start="1055.779" data-end="1058.899">degrees of freedom instead of three why</span> <span data-start="1058.899" data-end="1060.909">do we do this bill because what happens</span> <span data-start="1060.909" data-end="1063.519">when you start changing the vector basis</span> <span data-start="1063.519" data-end="1066.399">and in doing so we've gained a couple</span> <span data-start="1066.399" data-end="1067.87">new things for one we've gained a whole</span> <span data-start="1067.87" data-end="1070.899">new Zed vector the red one which which</span> <span data-start="1070.899" data-end="1072.49">didn't exist before we just made that up</span> <span data-start="1072.49" data-end="1074.889">and that's the interesting one because</span> <span data-start="1074.889" data-end="1077.23">if you move that one you aim the</span> <span data-start="1077.23" data-end="1080.77">bat-signal just like that and that means</span> <span data-start="1080.77" data-end="1082.63">that all of a sudden instead of just</span> <span data-start="1082.63" data-end="1083.87">being able to change</span> <span data-start="1083.87" data-end="1086.72">shapes in place we can move them around</span> <span data-start="1086.72" data-end="1089.27">as well which is something that affine</span> <span data-start="1089.27" data-end="1092.33">transforms couldn't do on their own so</span> <span data-start="1092.33" data-end="1093.95">you get translation and scaling effects</span> <span data-start="1093.95" data-end="1095.96">where if you pull out the the red vector</span> <span data-start="1095.96" data-end="1098.45">or push it in sort of changing its</span> <span data-start="1098.45" data-end="1100.73">length you end up tightening the beam or</span> <span data-start="1100.73" data-end="1105.59">expanding the beam and we have something</span> <span data-start="1105.59" data-end="1107.299">else which is that our x and y vectors</span> <span data-start="1107.299" data-end="1110.419">now also have a Z coordinate which until</span> <span data-start="1110.419" data-end="1112.64">now has just been zero and they control</span> <span data-start="1112.64" data-end="1115.039">the alignment of the the image because</span> <span data-start="1115.039" data-end="1118.07">if I change those for example tilting</span> <span data-start="1118.07" data-end="1120.02">them all the way back you see that you</span> <span data-start="1120.02" data-end="1122.059">tilt the image so that part of it is now</span> <span data-start="1122.059" data-end="1124.73">closer to the projection point part of</span> <span data-start="1124.73" data-end="1126.679">it is further away which ends up being</span> <span data-start="1126.679" data-end="1128.929">what perspective does so if you project</span> <span data-start="1128.929" data-end="1131.809">this back down to two dimensions now</span> <span data-start="1131.809" data-end="1133.789">your parallel lines are no longer</span> <span data-start="1133.789" data-end="1137.09">parallel and you you've done perspective</span> <span data-start="1137.09" data-end="1139.88">transforms and then that has an</span> <span data-start="1139.88" data-end="1142.789">interesting implication because it means</span> <span data-start="1142.789" data-end="1145.13">that if I'm drawing something like this</span> <span data-start="1145.13" data-end="1148.429">a cube in 3d space I can position and</span> <span data-start="1148.429" data-end="1151.37">move and orient it using a single four</span> <span data-start="1151.37" data-end="1154.61">four dimensional matrix and it has a</span> <span data-start="1154.61" data-end="1156.26">structure where in the upper left</span> <span data-start="1156.26" data-end="1158.09">portion there's a three by three normal</span> <span data-start="1158.09" data-end="1159.62">matrix that can turn that controls</span> <span data-start="1159.62" data-end="1162.59">rotation scaling skewing there's one for</span> <span data-start="1162.59" data-end="1164.779">translation which is you know shining</span> <span data-start="1164.779" data-end="1167.179">the the beam differently in four</span> <span data-start="1167.179" data-end="1170.09">dimensional space and then there's a Z</span> <span data-start="1170.09" data-end="1172.58">sorry in this case the W coordinates the</span> <span data-start="1172.58" data-end="1176.659">fourth coordinate d HL which controls</span> <span data-start="1176.659" data-end="1178.669">perspective and creates you know</span> <span data-start="1178.669" data-end="1180.95">narrowing lines effects and vanishing</span> <span data-start="1180.95" data-end="1185.33">points and that sort of thing and like I</span> <span data-start="1185.33" data-end="1188.27">said matrices can be condensed you know</span> <span data-start="1188.27" data-end="1190.58">applying five matrices in a row you can</span> <span data-start="1190.58" data-end="1192.62">express that as just one single combined</span> <span data-start="1192.62" data-end="1195.169">matrix which is very handy and that</span> <span data-start="1195.169" data-end="1196.549">means that the mathematical relationship</span> <span data-start="1196.549" data-end="1199.01">between that little black cube on the</span> <span data-start="1199.01" data-end="1202.909">screen and you know as its defined in 3d</span> <span data-start="1202.909" data-end="1205.669">space and the actual location on the</span> <span data-start="1205.669" data-end="1208.309">screen as its projected is defined by a</span> <span data-start="1208.309" data-end="1210.23">single matrix and and I can show you how</span> <span data-start="1210.23" data-end="1213.169">that works we start in object space</span> <span data-start="1213.169" data-end="1216.2">which is what you're looking at the cube</span> <span data-start="1216.2" data-end="1217.08">on its own</span> <span data-start="1217.08" data-end="1220.32">defined with its the the origin sort of</span> <span data-start="1220.32" data-end="1221.999">at its center of mass or if it's a</span> <span data-start="1221.999" data-end="1223.799">character usually you put it under their</span> <span data-start="1223.799" data-end="1225.869">feet it's just somewhere in the middle</span> <span data-start="1225.869" data-end="1228.119">so you have a point of reference you</span> <span data-start="1228.119" data-end="1230.58">transform object space into world space</span> <span data-start="1230.58" data-end="1234.149">by placing objects in with the matrix</span> <span data-start="1234.149" data-end="1236.249">matrix you can scale them rotate them</span> <span data-start="1236.249" data-end="1238.95">move them around etc and world space is</span> <span data-start="1238.95" data-end="1240.179">where everything else lives so in this</span> <span data-start="1240.179" data-end="1242.279">case I added a camera and I added a</span> <span data-start="1242.279" data-end="1244.169">ground plane so it has something to sit</span> <span data-start="1244.169" data-end="1247.23">on and world spaces again defined</span> <span data-start="1247.23" data-end="1250.769">relative to some reference point which</span> <span data-start="1250.769" data-end="1252.869">is the the frame that you're doing all</span> <span data-start="1252.869" data-end="1255.559">your your placement and simulation in</span> <span data-start="1255.559" data-end="1257.249">then we have another matrix</span> <span data-start="1257.249" data-end="1258.69">transformation that takes you to view</span> <span data-start="1258.69" data-end="1261.539">space which is a coordinate systems</span> <span data-start="1261.539" data-end="1264.33">centered on your camera in this case Zed</span> <span data-start="1264.33" data-end="1266.7">points forward but that's a convention</span> <span data-start="1266.7" data-end="1268.32">and you have to be careful which way</span> <span data-start="1268.32" data-end="1269.94">your axes points when you're doing these</span> <span data-start="1269.94" data-end="1273.769">things and finally from view space we go</span> <span data-start="1273.769" data-end="1277.44">into screen space which is simply pixels</span> <span data-start="1277.44" data-end="1283.529">and pixel units and so because we're</span> <span data-start="1283.529" data-end="1286.019">doing matrix transformations this entire</span> <span data-start="1286.019" data-end="1289.499">chain is ends up being implemented or</span> <span data-start="1289.499" data-end="1291.029">represented as a single transformation</span> <span data-start="1291.029" data-end="1294.6">and you can go backwards as well but</span> <span data-start="1294.6" data-end="1299.789">that's a little bit trickier finally I</span> <span data-start="1299.789" data-end="1302.249">just want to talk about shaders which is</span> <span data-start="1302.249" data-end="1303.6">how these things are actually</span> <span data-start="1303.6" data-end="1308.46">implemented on a graphics card say for</span> <span data-start="1308.46" data-end="1310.619">example you have a 3d model which in</span> <span data-start="1310.619" data-end="1313.769">this case is defined as vertices points</span> <span data-start="1313.769" data-end="1316.529">in space and triangles that span those</span> <span data-start="1316.529" data-end="1318.749">points so in terms of data structure</span> <span data-start="1318.749" data-end="1320.46">you're looking at a list of vectors</span> <span data-start="1320.46" data-end="1322.59">which define points and then a set of</span> <span data-start="1322.59" data-end="1324.57">indices saying you know triangle 1 goes</span> <span data-start="1324.57" data-end="1327.239">from 1 2 to 3 triangle 2 goes from 2 to</span> <span data-start="1327.239" data-end="1330.179">3 to 4 etc and that makes up this whole</span> <span data-start="1330.179" data-end="1333.509">object in object space and then we have</span> <span data-start="1333.509" data-end="1335.399">a program called a vertex shader that</span> <span data-start="1335.399" data-end="1337.98">just takes one vertex as an input and</span> <span data-start="1337.98" data-end="1341.94">outputs another vertex as output and you</span> <span data-start="1341.94" data-end="1343.619">can see that it's those are four</span> <span data-start="1343.619" data-end="1345.149">dimensional vectors that are coming out</span> <span data-start="1345.149" data-end="1346.859">and that that's because we're dealing</span> <span data-start="1346.859" data-end="1349.74">with the four dimensional sorry 3d</span> <span data-start="1349.74" data-end="1350.73">projective space</span> <span data-start="1350.73" data-end="1354.809">which has four coordinates and so this</span> <span data-start="1354.809" data-end="1356.37">transforms something called clip space</span> <span data-start="1356.37" data-end="1358.02">which I mentioned for completeness you</span> <span data-start="1358.02" data-end="1359.46">can just think of this as screen space</span> <span data-start="1359.46" data-end="1360.96">there's there's a sort of a difference</span> <span data-start="1360.96" data-end="1363.929">but it's not very interesting and then</span> <span data-start="1363.929" data-end="1365.13">the second part is we take these</span> <span data-start="1365.13" data-end="1367.53">coordinates into clip space which is you</span> <span data-start="1367.53" data-end="1368.73">know where is the thing on the screen</span> <span data-start="1368.73" data-end="1371.13">and then we turn it into samples and</span> <span data-start="1371.13" data-end="1373.65">then every one of those samples we apply</span> <span data-start="1373.65" data-end="1375.48">another program to which is the fragment</span> <span data-start="1375.48" data-end="1378.12">shader and that determines the color of</span> <span data-start="1378.12" data-end="1380.4">every pixel so on the left you see that</span> <span data-start="1380.4" data-end="1383.01">the light is changing the position of</span> <span data-start="1383.01" data-end="1387.57">the vertices isn't changing so only the</span> <span data-start="1387.57" data-end="1389.16">parameters of the fragment shader are</span> <span data-start="1389.16" data-end="1390.809">being tuned here not the vertex shader</span> <span data-start="1390.809" data-end="1393.179">the vertex shader is just constant at</span> <span data-start="1393.179" data-end="1397.02">this point so what does this look like</span> <span data-start="1397.02" data-end="1399.12">this is defining a language called GLSL</span> </p>
<p><span data-start="1399.12" data-end="1403.32">GL shading language and it's a very</span> <span data-start="1403.32" data-end="1405.15">simple program you can see that the main</span> <span data-start="1405.15" data-end="1406.919">function consists of one line in this</span> <span data-start="1406.919" data-end="1410.1">case which simply applies three separate</span> <span data-start="1410.1" data-end="1413.309">matrices to the position after taking</span> <span data-start="1413.309" data-end="1414.96">the the position and making it four</span> <span data-start="1414.96" data-end="1418.02">dimensional and there's this complicated</span> <span data-start="1418.02" data-end="1419.85">terminology here but it's really not</span> <span data-start="1419.85" data-end="1420.36">that hard</span> <span data-start="1420.36" data-end="1422.73">for example uniforms are just global</span> <span data-start="1422.73" data-end="1424.29">variables for example if you're trying</span> <span data-start="1424.29" data-end="1426.559">to draw an object and the object is red</span> <span data-start="1426.559" data-end="1429.39">that the fact that it's red is constant</span> <span data-start="1429.39" data-end="1431.75">everywhere so that's a uniform property</span> <span data-start="1431.75" data-end="1435.33">that you you set and then per vertex we</span> <span data-start="1435.33" data-end="1436.799">have something called attributes which</span> <span data-start="1436.799" data-end="1438.66">is the specific position of every point</span> <span data-start="1438.66" data-end="1443.37">and the at the end we set GL position</span> <span data-start="1443.37" data-end="1446.91">which is a standard variable — that</span> <span data-start="1446.91" data-end="1448.02">determines where on the screen you're</span> <span data-start="1448.02" data-end="1450.66">rendering and so this is this is like</span> <span data-start="1450.66" data-end="1453.809">your vanilla g GL pipeline but the point</span> <span data-start="1453.809" data-end="1456.33">is that this is just one possible way of</span> <span data-start="1456.33" data-end="1457.74">doing it you can do tons of things in</span> <span data-start="1457.74" data-end="1460.46">vertex shaders and and that's why</span> <span data-start="1460.46" data-end="1462.54">shaders have been sort of the main</span> <span data-start="1462.54" data-end="1464.85">driving force behind what's been going</span> <span data-start="1464.85" data-end="1469.02">on in games and in just offline 3d</span> <span data-start="1469.02" data-end="1472.65">rendering as well transforming shapes on</span> <span data-start="1472.65" data-end="1474.21">the fly on a sort of point by point</span> <span data-start="1474.21" data-end="1476.34">basis is a very powerful approach</span> <span data-start="1476.34" data-end="1478.29">because you can do it in parallel very</span> <span data-start="1478.29" data-end="1481.2">efficiently and then a fragment shader</span> <span data-start="1481.2" data-end="1483.45">looks like this for example again we</span> <span data-start="1483.45" data-end="1484.39">have uniforms</span> <span data-start="1484.39" data-end="1486.7">like say color and a direction of light</span> <span data-start="1486.7" data-end="1488.86">in this case and then we have something</span> <span data-start="1488.86" data-end="1490.66">called varying and then this is this can</span> <span data-start="1490.66" data-end="1492.55">be a little bit tricky to grasp but</span> <span data-start="1492.55" data-end="1495.43">basically our information at this point</span> <span data-start="1495.43" data-end="1497.2">is only defined on the corners of the</span> <span data-start="1497.2" data-end="1499.06">mesh so when you're trying to fill the</span> <span data-start="1499.06" data-end="1501.85">pixels in the middle you need to have a</span> <span data-start="1501.85" data-end="1504.01">way to transform that information and</span> <span data-start="1504.01" data-end="1506.29">you can just you know assume that it's</span> <span data-start="1506.29" data-end="1508.09">constant across the entire triangle</span> <span data-start="1508.09" data-end="1510.67">which makes it uniform or you could have</span> <span data-start="1510.67" data-end="1512.8">a property that's varying that varies</span> <span data-start="1512.8" data-end="1514.6">and the way that works is you just</span> <span data-start="1514.6" data-end="1516.37">define it at the corners and the</span> <span data-start="1516.37" data-end="1518.71">graphics hardware interpolates it for</span> <span data-start="1518.71" data-end="1520.48">you fills out the part in the middle and</span> <span data-start="1520.48" data-end="1523.36">then what this fragment shader does is</span> <span data-start="1523.36" data-end="1526">determines how how much the surface</span> <span data-start="1526" data-end="1527.29">should be lit by doing something called</span> <span data-start="1527.29" data-end="1529.24">a vector dot product which you can look</span> <span data-start="1529.24" data-end="1530.83">up and see what that does</span> <span data-start="1530.83" data-end="1532.72">and then multiplies that intensity by</span> <span data-start="1532.72" data-end="1536.14">the color of the surface and so this is</span> <span data-start="1536.14" data-end="1538.51">again the simplest possible fragment</span> <span data-start="1538.51" data-end="1540.4">shader in fact what's going on on the</span> <span data-start="1540.4" data-end="1541.54">left is actually a little bit more</span> <span data-start="1541.54" data-end="1542.8">complicated because it has something</span> <span data-start="1542.8" data-end="1544.72">called specular light which is sort of</span> <span data-start="1544.72" data-end="1546.55">that the glossiness that I didn't even</span> <span data-start="1546.55" data-end="1548.23">bother to implement in the code on the</span> <span data-start="1548.23" data-end="1552.34">right and so here's an example of for</span> <span data-start="1552.34" data-end="1554.47">example a vertex shader that does some</span> <span data-start="1554.47" data-end="1556.98">real work this is skeletal animation and</span> <span data-start="1556.98" data-end="1558.97">the way you have to think about this is</span> <span data-start="1558.97" data-end="1560.68">the model of in this case this</span> <span data-start="1560.68" data-end="1563.23">cyberdemon from doom 3 is just defined</span> <span data-start="1563.23" data-end="1564.91">statically and usually they even put it</span> <span data-start="1564.91" data-end="1566.8">in a sort of Vitruvian Man pose so it's</span> <span data-start="1566.8" data-end="1569.59">nice and neutral and then they feed in</span> <span data-start="1569.59" data-end="1571.75">the orientation of all the bones in the</span> <span data-start="1571.75" data-end="1574.41">skeleton every point is linked to a</span> <span data-start="1574.41" data-end="1577.81">point on the skeleton and by tuning the</span> <span data-start="1577.81" data-end="1580.36">knobs by changing the matrices you can</span> <span data-start="1580.36" data-end="1582.07">animate this character and this is all</span> <span data-start="1582.07" data-end="1584.2">done on the GPU on the graphics hardware</span> <span data-start="1584.2" data-end="1589.69">not on the CPU side an example of a</span> <span data-start="1589.69" data-end="1592">fragment shader that is very common is</span> <span data-start="1592" data-end="1595.39">normal mapping and so you see that all</span> <span data-start="1595.39" data-end="1597.67">of a sudden it seems like this model has</span> <span data-start="1597.67" data-end="1599.98">become way more detailed and that's an</span> <span data-start="1599.98" data-end="1601.96">illusion because the geometry hasn't</span> <span data-start="1601.96" data-end="1604.18">changed all I'm doing is I'm applying</span> <span data-start="1604.18" data-end="1606.63">something called a normal map which</span> <span data-start="1606.63" data-end="1609.97">tells the describes the orientation of</span> <span data-start="1609.97" data-end="1612.31">the surface and so I'm cheating because</span> <span data-start="1612.31" data-end="1614.37">it looks like it has tiny bumps and</span> <span data-start="1614.37" data-end="1616.69">little crevices and all that but it's</span> <span data-start="1616.69" data-end="1618.25">it's painted on</span> <span data-start="1618.25" data-end="1620.29">in a way that changes the shading so</span> <span data-start="1620.29" data-end="1621.67">it's not just a texture it's it's</span> <span data-start="1621.67" data-end="1623.71">information that is being splattered</span> <span data-start="1623.71" data-end="1626.92">onto a model interpolated and and used</span> <span data-start="1626.92" data-end="1629.08">to do the lighting on a per pixel basis</span> <span data-start="1629.08" data-end="1633.04">and because this is such an easy trick</span> <span data-start="1633.04" data-end="1634.69">we don't care about depths as much as we</span> <span data-start="1634.69" data-end="1637.81">do about light and shadow this is a very</span> <span data-start="1637.81" data-end="1639.19">effective way of creating the appearance</span> <span data-start="1639.19" data-end="1641.53">of hundreds of thousands of triangles</span> <span data-start="1641.53" data-end="1642.67">when really there's only a couple</span> <span data-start="1642.67" data-end="1646.42">thousand and you combine that for</span> <span data-start="1646.42" data-end="1649.36">example with a color map texture and</span> <span data-start="1649.36" data-end="1651.61">then there's something else called a</span> <span data-start="1651.61" data-end="1653.35">specular map which determines which part</span> <span data-start="1653.35" data-end="1655.06">of this creature are glossy in which</span> <span data-start="1655.06" data-end="1657.61">parts are metal or soft shaded and you</span> <span data-start="1657.61" data-end="1659.47">end up with something like this which I</span> <span data-start="1659.47" data-end="1670.389">think looks pretty damn cool</span> <span data-start="1670.399" data-end="1672.809">we're not done yet I'll just show you</span> <span data-start="1672.809" data-end="1674.61">one more trick that you can do with</span> <span data-start="1674.61" data-end="1676.769">fragment shaders so here I've put a</span> <span data-start="1676.769" data-end="1678.72">floor of bricks underneath the monster</span> <span data-start="1678.72" data-end="1680.82">and the bricks are being normal mapped</span> <span data-start="1680.82" data-end="1683.129">so that means that as I move the lights</span> <span data-start="1683.129" data-end="1685.649">above it you can see that the lights</span> <span data-start="1685.649" data-end="1687.21">that have catches the edges of the brick</span> <span data-start="1687.21" data-end="1688.769">and then it looks like they have depth</span> <span data-start="1688.769" data-end="1691.59">but that's an illusion because if I put</span> <span data-start="1691.59" data-end="1693.57">the camera at a glancing angle you can</span> <span data-start="1693.57" data-end="1695.1">start to see that it's fake that there's</span> <span data-start="1695.1" data-end="1697.529">no actual depth here it's just sort of a</span> <span data-start="1697.529" data-end="1699.389">texture that happens to have convincing</span> <span data-start="1699.389" data-end="1703.08">shading but we can fix that we apply</span> <span data-start="1703.08" data-end="1705.499">something called parallax mapping and</span> <span data-start="1705.499" data-end="1707.759">suddenly it looks like these bricks</span> <span data-start="1707.759" data-end="1710.759">actually have depth and yet what I'm</span> <span data-start="1710.759" data-end="1712.679">telling the GPU to do is still just draw</span> <span data-start="1712.679" data-end="1715.889">a flat square how does that work why it</span> <span data-start="1715.889" data-end="1718.35">does this all of a sudden look like it</span> <span data-start="1718.35" data-end="1720.57">is correct and here's the secret I'm</span> <span data-start="1720.57" data-end="1724.11">going to lock the uniform that tells the</span> <span data-start="1724.11" data-end="1726.6">shader where the camera is so the shader</span> <span data-start="1726.6" data-end="1728.159">is going to think that the camera is</span> <span data-start="1728.159" data-end="1730.409">staying right here when when it's not</span> <span data-start="1730.409" data-end="1731.85">and I'm going to rotate to the other</span> <span data-start="1731.85" data-end="1734.309">side and now all of a sudden this</span> <span data-start="1734.309" data-end="1736.95">illusion is completely destroyed and you</span> <span data-start="1736.95" data-end="1739.409">can see if you look closely there's a</span> <span data-start="1739.409" data-end="1741.389">sort of distortion going on with the</span> <span data-start="1741.389" data-end="1744.629">texture where it is streakiness and and</span> <span data-start="1744.629" data-end="1747.69">and weirdness and so the point of this</span> <span data-start="1747.69" data-end="1751.32">effect is it distorts the texture of the</span> <span data-start="1751.32" data-end="1753.48">bricks in such a way that from your</span> <span data-start="1753.48" data-end="1756.72">point of view it looks correct in 3d but</span> <span data-start="1756.72" data-end="1758.909">it's really cheap it's it's completely</span> <span data-start="1758.909" data-end="1761.399">fake and so you can see that the the</span> <span data-start="1761.399" data-end="1763.289">silhouette at the top left for example</span> <span data-start="1763.289" data-end="1765.57">stays a straight line as far as the the</span> <span data-start="1765.57" data-end="1768.119">depth is concerned this is a completely</span> <span data-start="1768.119" data-end="1771.299">flat surface but it's such an effective</span> <span data-start="1771.299" data-end="1773.97">technique and here for example I'm going</span> <span data-start="1773.97" data-end="1776.309">to update the the uniform that controls</span> <span data-start="1776.309" data-end="1778.11">that tells it where the camera is and</span> <span data-start="1778.11" data-end="1781.019">all of a sudden the illusion is restored</span> <span data-start="1781.019" data-end="1786.809">and you get breaks that look real that's</span> <span data-start="1786.809" data-end="1787.98">pretty much it I just want to leave you</span> <span data-start="1787.98" data-end="1789.45">with a couple of things to look at in</span> <span data-start="1789.45" data-end="1791.999">case you like this and that's something</span> <span data-start="1791.999" data-end="1794.279">you might want to do arrow twist comm</span> <span data-start="1794.279" data-end="1797.159">which is Paul Lewis who has it's not</span> <span data-start="1797.159" data-end="1799.289">only a beautiful site but the articles</span> <span data-start="1799.289" data-end="1801.299">are really well-written and simple and</span> <span data-start="1801.299" data-end="1802.2">straight to the point</span> <span data-start="1802.2" data-end="1803.02">so check</span> <span data-start="1803.02" data-end="1805.75">it's mostly 3GS which is also what I use</span> </p>
<p><span data-start="1805.75" data-end="1808.899">I like using 3GS because it just takes</span> <span data-start="1808.899" data-end="1812.14">care of the boilerplate there is Inigo</span> <span data-start="1812.14" data-end="1813.88">classes site which is sort of like a</span> <span data-start="1813.88" data-end="1815.919">treasure trove of demo scene techniques</span> <span data-start="1815.919" data-end="1818.35">and and other interesting mathematical</span> <span data-start="1818.35" data-end="1823.779">things mr. doob is the author of 3GS has</span> <span data-start="1823.779" data-end="1826.45">a site full of demos and interesting</span> <span data-start="1826.45" data-end="1828.7">things that you can look at and ultra</span> <span data-start="1828.7" data-end="1831.88">Cape qualia is another person it was</span> <span data-start="1831.88" data-end="1834.07">their implementation and part of the</span> <span data-start="1834.07" data-end="1836.32">cyberdemon model that i used for this</span> <span data-start="1836.32" data-end="1838.02">presentation thank you very much</span> </p>
</section>