<section>
<p><span data-start="23.68" data-end="29.52">All right, so, hi everyone, I'm really glad to be here at JSConfEU, I'm really sort of</span> <span data-start="29.52" data-end="35.58">an alien here, it's not my usual crowd, I don't code JavaScript for a living, so I might</span> <span data-start="35.58" data-end="40.48">bring in a bit of a different perspective of things, especially less about code and</span> <span data-start="40.48" data-end="47.89">more about the understand lying concept. So .. also if you've been at Stephanie's talk,</span> <span data-start="47.89" data-end="53.8">you'll see some of the same concepts explained a bit of a different way. So hopefully it'll</span> <span data-start="53.8" data-end="58.829">be interesting. This is me with some hair, that I don't have anymore and this is how</span> <span data-start="58.829" data-end="67.35">you pronounce my name, Txus, if you read phonetics (Laughing) so I work at ::Codegram an agency</span> <span data-start="67.35" data-end="74.71">in Barcelona and we put on quite a cool conference as well in Barcelona called full stack FEST,</span> <span data-start="74.71" data-end="82.39">check it out next year, if you want, it's pretty nice. So we're here to talk about abstraction</span> <span data-start="82.39" data-end="89.52">and abstraction, we have sort of a love/hate relationship with it. We love it because it's</span> <span data-start="89.52" data-end="93.81">what our programs are made of, we hate it because when there's too much of it, when</span> <span data-start="93.81" data-end="98.6">we think there's too much of it we're just frustrated, we fail to see sort of the essence</span> <span data-start="98.6" data-end="105.92">of the problem. But, I would argue that actually it just about the level of abstraction we're</span> <span data-start="105.92" data-end="112.14">comfortable with, and like everything it can be trained and you can learn about being comfortable</span> <span data-start="112.14" data-end="120.59">with higher levels of abstraction, so, we'll see a bit more about abstraction with an example.</span> </p>
<p><span data-start="120.59" data-end="127.29">What do you see in these two pictures? In a way they depict different things, but in</span> <span data-start="127.29" data-end="132.87">other ways they are the same thing, right? A computer would have a hard time maybe finding</span> <span data-start="132.87" data-end="139.97">out that they are the same thing. But, we already know look at these pictures and says,</span> <span data-start="139.97" data-end="145.65">yes, of course, I know what it is, it's a dog. You've never met these two particular</span> <span data-start="145.65" data-end="151.989">dogs here, these two, but, you already know a lot about them, you know what they eat,</span> <span data-start="151.989" data-end="158.18">more or less or they like to go for walks and they don't like cats, maybe they do, but</span> <span data-start="158.18" data-end="165.97">in general, probably they don't. So, it's pretty useful, you see two dogs and you've</span> <span data-start="165.97" data-end="170.22">never seen before and you already know a lot about them, just because you identify them</span> <span data-start="170.22" data-end="174.52">as a dog,this concept you have in your mind with a lot of semantic knowledge attached</span> <span data-start="174.52" data-end="179.87">to it. You're forgetting their differences just to sort of understand the essence of</span> <span data-start="179.87" data-end="188.69">them. Now, I'd like to share a story that I didn't write, but I really like this Argentinian</span> <span data-start="188.69" data-end="196.169">writer Forge Luis Borges, you should read it. He has a story called Funes the Memorius,</span> <span data-start="196.169" data-end="205.18">are in this story, basically there's Funes a young man who once fell off a horse and</span> <span data-start="205.18" data-end="210.9">just hit his head with the rock or something and then from that moment his memory became</span> <span data-start="210.9" data-end="217.15">perfect. He could no longer forget anything. So every instant of everything he would just</span> <span data-start="217.15" data-end="224.19">remember forever. That means every smell, everything he saw or heard or anything. And</span> <span data-start="224.19" data-end="231.47">that brought him to experience the world in a very different way. So for example he started</span> <span data-start="231.47" data-end="238.639">undertaking in this by star experiments. For example he started devising his own numerical</span> <span data-start="238.639" data-end="245.56">system, Borges a character in this story asked Funes, so, what is this thing you're working</span> <span data-start="245.56" data-end="253.68">on? This numerical system. Funes said, well, I'm assigning a name to every number, so the</span> <span data-start="253.68" data-end="261.06">number 4 is dog and number 7 is staircase and so on and he just wrote them down in his</span> <span data-start="261.06" data-end="267.37">notebook. And Borgls was confused, why would you do that isn't that the opposite of a numerical</span> <span data-start="267.37" data-end="272.139">system? You cannot reason about this if do you have thousands and thousands and millions</span> <span data-start="272.139" data-end="276.9">of numbers with different names you cannot do arithmetic or anything useful with them.</span> </p>
<p><span data-start="276.9" data-end="284.4">But Funes was not interest in the that he brought up a point that John lock philosopher</span> <span data-start="284.4" data-end="294.33">he envisioned an imposable idiom a language\h‑‑ every instance of every branch has it's own</span> <span data-start="294.33" data-end="299.09">name\h‑‑ everything has it's own name there, was no such thing as Aleve, it was</span> <span data-start="299.09" data-end="305.24">this leaf and that leaf and that. They all had different names, of course Locke dismissed</span> <span data-start="305.24" data-end="311.83">that as sort of useless, he thought you cannot reason about anything or talk about and communicate</span> <span data-start="311.83" data-end="318.68">to another human being if everything has it's own name, so you cannot talk about things,</span> <span data-start="318.68" data-end="330.65">but Funes Reacted to that than Borges expected. He said that system is to general. Every instance</span> <span data-start="330.65" data-end="337.09">of these objects should deserve it's own name, it's essentially different, it changes over</span> <span data-start="337.09" data-end="345">time, so to him a dog seen from the side, at 3:00\hp.m. had a different name from the</span> <span data-start="345" data-end="351.99">same dog seen from a different angle one minute later. They were just different things, arguably</span> <span data-start="351.99" data-end="359.61">they are, it's not a solved problem in philosophy, identity. So we tend to think that we know</span> <span data-start="359.61" data-end="365.879">identity, we look at a thing and two seconds later we treat it as the same thing. We look</span> <span data-start="365.879" data-end="370.86">at a person, we meat them, ten years later we know it's the same person, but is it? I</span> <span data-start="370.86" data-end="376.42">don't know. It's not a solved problem. But it's sort of a useful abstraction that we</span> <span data-start="376.42" data-end="385.34">have. And Funes couldn't abstract over that. as smart as Funes seemed to be with his incredible</span> <span data-start="385.34" data-end="393.639">memory, Borges made the point he thought Fun res wasn't really capable of thinking, thinking</span> <span data-start="393.639" data-end="401.349">is to forget differences, to generalize, to abstract Borges argues. So we'll see that</span> <span data-start="401.349" data-end="407.789">abstraction is something way deeper than just forgetting differences and losing detail,</span> <span data-start="407.789" data-end="414.46">it gives us something in return. So, yeah, arguably dogs actually losing detail with</span> <span data-start="414.46" data-end="419.439">dogs is sort of a shame because different dogs might behave differently, might have</span> <span data-start="419.439" data-end="423.15">different properties that he're interested in, 234 the world of programming we have much</span> <span data-start="423.15" data-end="429.9">simpler domains, some of those have really interesting properties that and abstractions</span> <span data-start="429.9" data-end="434.28">that it's really interesting to discover them. We'll start with one of the simplest things</span> <span data-start="434.28" data-end="440.919">we can think of. It's addition, so we'll start by adding two numbers, we all know how to</span> <span data-start="440.919" data-end="450.15">add two numbers, and we also know how to add two strings by Cactonating them. Then to us,</span> <span data-start="450.15" data-end="456.129">it's actually the same as just Cactonatinb to lists, it's not a problem, we understand</span> <span data-start="456.129" data-end="464.419">that, you can do this with lists, strings and numbers, in numbers it means addition.</span> </p>
<p><span data-start="464.419" data-end="468.919">Then we could say that these things, you can add them together and you get a thing of the</span> <span data-start="468.919" data-end="476.56">same kind. It's a different thing, but it's a thing of the same kind. We also have an</span> <span data-start="476.56" data-end="481.669">interesting property in addition, it's associative, no matter where you put the parenthesis, you</span> <span data-start="481.669" data-end="490.4">always get the same result. In numbers, it's true, in strings it's also true. And in lists</span> <span data-start="490.4" data-end="496.319">it's also true. So we're starting to see a thing that is common to these three seemingly</span> <span data-start="496.319" data-end="506.629">completely different things. Associativity, now it gets interesting. There's this number,</span> <span data-start="506.629" data-end="511.371">it's called zero and it's really interesting, it hasn't been around for very long, but it</span> <span data-start="511.371" data-end="515.97">has an interesting property, if you add it to another number you get the original number</span> <span data-start="515.97" data-end="522.99">back, so it doesn't do anything. That might seem boring, but, we have the same four strings</span> <span data-start="522.99" data-end="528.5">and the same four lists, so what's interesting about this number? Well, this Element where</span> <span data-start="528.5" data-end="535.85">we call the neutral Element or the sort of zero, if you add it to another thing, you</span> <span data-start="535.85" data-end="543.23">get the other thing back. By knowing that something adds associatively and has a neutral</span> </p>
<p><span data-start="543.23" data-end="550.591">Element, be it a list, a string or a number, we can, for example, fold or reduce over list</span> <span data-start="550.591" data-end="556.43">of those things. Starting by the operation, addition, then the neutral Element, in this</span> <span data-start="556.43" data-end="561.67">case zero and a list of numbers, we can do the same with strings, folding over lists</span> <span data-start="561.67" data-end="569.31">of strings starting from the empty string, we can do the same with lists. This is sort</span> <span data-start="569.31" data-end="576.501">of pseudo code, but it would be reduce in the JavaScript, and a plus operation. So we</span> <span data-start="576.501" data-end="582.029">see that if these things have these properties we just described you can fold over list of</span> <span data-start="582.029" data-end="586.971">them. The important thing that we only assume these two properties of those things, so we</span> <span data-start="586.971" data-end="593.101">don't know that they are numbers or lists or strings, it doesn't matter. Well, that's</span> <span data-start="593.101" data-end="600.35">too easy, well, like, yeah. (Laughing) so, I had to put an animated give because I didn't</span> <span data-start="600.35" data-end="606.779">have any in my presentation and everyone had, so I put this one, I hope achose well. So,</span> <span data-start="606.779" data-end="612.62">this is too easy, number strings, lists this all just sounds very primitive, probably it's</span> <span data-start="612.62" data-end="620.49">a coincidence that they behave the same way. But, I don't think so, I'll show you something</span> <span data-start="620.49" data-end="624.86">a bit different, really radically different than number strings and lists that behaves</span> <span data-start="624.86" data-end="630.29">the same way. What happens when we compose two functions? We can understand that as adding</span> <span data-start="630.29" data-end="635.29">two functions together, because we get a function at the end that is somehow the addition of</span> <span data-start="635.29" data-end="641.07">both. So if we compose two functions with a plus, let's just imagine that's the composition</span> <span data-start="641.07" data-end="650.37">operator, you get the same as applying G to X and then F to the result of that. Now, functions</span> <span data-start="650.37" data-end="658.79">add associatively as well, or compose associatively, so yeah, that works out the same way. And</span> <span data-start="658.79" data-end="662.941">interestingfully we need a new elmented for functions, that's a bit different. What's</span> <span data-start="662.941" data-end="669.57">a zero for functions? A function that does nothing. Well, that would be the identity</span> <span data-start="669.57" data-end="676.44">function that just returned it's argument. That really does nothing. So, if you compose</span> </p>
<p><span data-start="676.44" data-end="680.329">F with the I deputy function you get F back, it's the same the\h‑‑ identity function</span> <span data-start="680.329" data-end="686.48">you get F back. Same thing holds for functions as well. So theoretically we could fold over</span> <span data-start="686.48" data-end="694.589">list of functions starting with the identity function and it works. The point here is that</span> <span data-start="694.589" data-end="700.32">it's not only about functions or lists or strings, it's just about these two properties</span> <span data-start="700.32" data-end="705.35">that we know of them. So there are many other things that in your code bases you can see</span> <span data-start="705.35" data-end="709.98">and you can identify as things that add associatively and have a neutral Element. You just need</span> <span data-start="709.98" data-end="715.82">to get a little creative. Just squint your eyes a little bit and say, I think this behaves</span> <span data-start="715.82" data-end="721.899">like that even if it's completely different. These two properties associative addition</span> <span data-start="721.899" data-end="727.8">neutral Elements sort of a mouthful to say all the time. So someone gave them an name,</span> <span data-start="727.8" data-end="732.35">it's a scary name, but not square scary once you understand what they are. Just like these</span> <span data-start="732.35" data-end="749.31">two things people call monoknowed, things that have these two properties, Monoid) we</span> <span data-start="749.31" data-end="756.3">have arrays lists and sets today, or maybe just arrays like most of the time. Let's abstract</span> <span data-start="756.3" data-end="760.57">over that and just talk about collections of things, the collection of T collection</span> <span data-start="760.57" data-end="772.11">of integer. Collection is a thank represents zero or more things, we can map over them</span> <span data-start="772.11" data-end="779.64">with a function, right. So that is a way to transform the Elements in a collection. The</span> <span data-start="779.64" data-end="783.66">interesting thing is that if the collection is empty, nothing happens. You get an empty</span> <span data-start="783.66" data-end="790.73">collection back, that might seem normal and just boring Evan, but it's interesting, we'll</span> <span data-start="790.73" data-end="803.38">see why in a minute so as you expects if you map interempty list you get an empty list</span> <span data-start="803.38" data-end="809.12">that's easy enough. Then we have a different kind of collections that represents zero or</span> <span data-start="809.12" data-end="819.17">one Element. And those we call optionals or options or maybes, depends on language. Now,</span> <span data-start="819.17" data-end="822.839">we can also map over those because they are sort of the same sort of container, so we</span> <span data-start="822.839" data-end="826.72">can transform the Element if it's there, and don't do anything if it's not there, it's</span> <span data-start="826.72" data-end="834.13">like an empty list, right. So we can map increment over someone and get sum two or just over</span> <span data-start="834.13" data-end="839.92">none you get none back. So it's sort of like a list of one Element. But then there's something</span> <span data-start="839.92" data-end="849.98">a bit different that behaves exactly the same, and it's futures. Futures are just things</span> <span data-start="849.98" data-end="855.42">that represent an Evanual value, so eventually "X" or an error. So it's something in the</span> <span data-start="855.42" data-end="863.31">future that will either return a value or yield a error. But we can also map over those</span> <span data-start="863.31" data-end="868.07">because if we think of them as just these sort of containers we can transform the value</span> <span data-start="868.07" data-end="878.089">when ever it exists and just don't do anything if there's an error or do something else.</span> </p>
<p><span data-start="878.089" data-end="884.86">Now this is cannot with a coincidence\h‑‑ this cannot be a coincidence. They're wildly</span> <span data-start="884.86" data-end="888.829">different, especially a future from the rest of the things they behave the same with the</span> <span data-start="888.829" data-end="894.389">function map, there must be a function map that capture it is essence of this operation,</span> <span data-start="894.389" data-end="901.23">mapping over a thing to understand that we'll start calling these sort of different things</span> <span data-start="901.23" data-end="909.17">like futures, collections and optionals we'll start calling them boxes or pots in like in</span> <span data-start="909.17" data-end="916.42">Stephanie's talk. So let's talk about boxes, doesn't matter what it is, just a box. So,</span> <span data-start="916.42" data-end="924.3">just knowing that a box be it a future, optional or collection, if we map over it with a function</span> <span data-start="924.3" data-end="929.72">in a place the F function to whatever's inside the box in a way the box sees fit. Each box</span> <span data-start="929.72" data-end="938.55">has it's own semantics, returns it all in the same kind of box. Now, I cannot stress</span> <span data-start="938.55" data-end="944.959">enough in a place a function in the way it sees fit. We do not get to see, no, I apply</span> <span data-start="944.959" data-end="949.08">the function two times for the first Element, three times for the Element that we'll be</span> <span data-start="949.08" data-end="955.089">eventually whatever. The box knows what to do. It applies functional how ever many times</span> <span data-start="955.089" data-end="962.129">it wants and exactly when it wants, if at all. So it has a lot of power. It's not just</span> <span data-start="962.129" data-end="972.67">a dumb container of things. Encapsulation, if you've done OO this is sort of a holy cow</span> <span data-start="972.67" data-end="982.759">ofOO, it is for a good reason. In these boxes have also sort of the same properties, you</span> <span data-start="982.759" data-end="986.899">shouldn't reach into them and try to get the values out of them. If you have an empty list</span> <span data-start="986.899" data-end="992.279">and you try to get the first Element, what do you get, nil, null,  an error</span> <span data-start="992.279" data-end="997.681">your computer freezes, you don't want to go there. The same way with optionals if you</span> <span data-start="997.681" data-end="1001.529">have a non, a thing that has nothing in it, if you try to extract the value what to you</span> <span data-start="1001.529" data-end="1008.96">get F you try to wait for a future, basically means blocking a thread till the future realizes</span> <span data-start="1008.96" data-end="1013.04">it's value, which is not ideal, you should never block the thread, I shouldn't have to</span> <span data-start="1013.04" data-end="1021.41">say this here. So .. let the box decide. That's the whole point of boxes, so it doesn't</span> <span data-start="1021.41" data-end="1026.46">matter what the box is, it will do the right thing. That's a powerful thing because the</span> <span data-start="1026.46" data-end="1031.88">only thing we need to learn is just the function map. And with that we can do all sorts of</span> <span data-start="1031.88" data-end="1040.25">things with futures, optionals and lists and many more things. Now, this has a name, these</span> <span data-start="1040.25" data-end="1048.35">boxes are called Functors, in sort of a, I don't know academic‑speak. So if you ever</span> <span data-start="1048.35" data-end="1053.82">see this word, it's just boxes, nothing else, boxes that you can map over with a function.</span> </p>
<p><span data-start="1053.82" data-end="1059.37">So no problem there. Now, this is quite a lot of power, the map function, but it's not</span> <span data-start="1059.37" data-end="1069.54">the only function that we can use, there are other things. Especially there's a case where</span> <span data-start="1069.54" data-end="1078.07">a function yields another box so you end up with nested and nested and nested boxes. If</span> <span data-start="1078.07" data-end="1084.72">you have box of T and a function from T to box of U if you have more of those functions</span> <span data-start="1084.72" data-end="1090.56">you end up with just nested boxes and that's just not, you cannot just map over that. I</span> <span data-start="1090.56" data-end="1095.48">mean that's not always a problem, but it usually is. So more concretely we have a collection</span> <span data-start="1095.48" data-end="1101.48">of strings, and a function from string to collection of strings. Let's say we have this</span> <span data-start="1101.48" data-end="1109.17">string and we want to split it by comma. And then split it by dot, each of those Elements,</span> <span data-start="1109.17" data-end="1113.16">we end up with a nested list. The problem with a nested list is that if you want to</span> <span data-start="1113.16" data-end="1118.66">keep processing it, you need to know at which depth you're operating where are the strings</span> <span data-start="1118.66" data-end="1124">like at the first step or second. This is not a good thing because this basically doesn't</span> <span data-start="1124" data-end="1128.59">compose, if you pass it to another piece of code, the code now knows which depth it needs</span> <span data-start="1128.59" data-end="1138.28">to operate at. Which is not good. So we want to do this, there's this handy function, Flatmap.</span> </p>
<p><span data-start="1138.28" data-end="1145.17">That basically like map, but it Coconates the results at the end, it flattens the collection,</span> <span data-start="1145.17" data-end="1151.25">so we get instead of map, we use Flatmap and we get on with our life, everything is platenned</span> <span data-start="1151.25" data-end="1158.03">and you can keep processing each Element. If you have optionals, an option address and</span> <span data-start="1158.03" data-end="1166.05">function address and option street number, because everything from address is uncertain,</span> <span data-start="1166.05" data-end="1170.26">you end up with a nested sum or like a nested option, and that's not good, you might even</span> <span data-start="1170.26" data-end="1179.71">end up with a nested\h‑‑ or with just a non, nonasset or non, nonsomething so you</span> <span data-start="1179.71" data-end="1184.74">don't even know determinationically what's going to happen like what depth are you going</span> <span data-start="1184.74" data-end="1191.15">to have to operate. That's a No‑Go. If you do the same with optionals because they behave</span> <span data-start="1191.15" data-end="1197.45">like listest basically you can also Flatmap over them and Coconate\h‑‑ which means</span> <span data-start="1197.45" data-end="1209.4">just flatten the whole thing. Which would be a non, or sum if it's actually a sum. And</span> <span data-start="1209.4" data-end="1218.11">finery the same thing can be done for futures. If we had a code that calls an API and gets</span> <span data-start="1218.11" data-end="1223.38">a future of Repository from GitHub and then a function that takes a Repository and knows</span> <span data-start="1223.38" data-end="1229.41">how to pitch it's followers from the API as\h‑‑ knows how to fetch it's followers from the</span> </p>
<p><span data-start="1229.41" data-end="1234.29">API as well. If you keep going back and forth we wean with the API you end up with nested</span> <span data-start="1234.29" data-end="1243.88">futures, it's a mess, what you want is Flatmap, it's exactly the same. We see that it flattens</span> <span data-start="1243.88" data-end="1251.43">the future just as if it was a list. Now, Flatmap for boxes means that it applies F</span> <span data-start="1251.43" data-end="1255.86">to whatever's inside the box in the way the boxes fit just like map and then flattens</span> <span data-start="1255.86" data-end="1264.15">the results presumably a nested box into a single flat box with it's own semantics, futures,</span> <span data-start="1264.15" data-end="1269.9">wait until one future returns and do the next thing or just optionals basically take\h‑‑</span> <span data-start="1269.9" data-end="1277.11">give you a sum if everything went well and none if something went wrong. That's each</span> <span data-start="1277.11" data-end="1284.93">box has it's own semantics. So when ever you find yourself with a thing, a box, and then</span> <span data-start="1284.93" data-end="1290.3">function from T to box of U or function from V to box of U to V and so on, it's sort of</span> <span data-start="1290.3" data-end="1298.1">deep functions what you want is Monads, is exactly the Flatmap function, that's all it</span> <span data-start="1298.1" data-end="1307">is, it's all called bind in some other languages, but it's called Flatmap in Scalla and other</span> <span data-start="1307" data-end="1312.44">sort of\h‑‑ there's so many names for the same thing, whatever. Flatmap is good,</span> <span data-start="1312.44" data-end="1322.45">it makes you think of map and then flatten. So .. now, as a recap we saw that just by</span> <span data-start="1322.45" data-end="1328.67">knowing these two things associative addition and neutral Element, of anything, we can fold</span> <span data-start="1328.67" data-end="1336.49">a real list of those anythings. We don't need to know anything else about it. Then we know</span> <span data-start="1336.49" data-end="1340.76">that if we have a box, doesn't matter what kind of box it is, and I assure you this'</span> <span data-start="1340.76" data-end="1345.31">hundreds of hundreds of different kinds of boxes you can use map, with your function</span> <span data-start="1345.31" data-end="1353.27">and it will work, the way you intuitively expect. And with Flatmap, it works when you</span> <span data-start="1353.27" data-end="1361.18">have functions that create nested boxes and you want a normal box back. So, now that you've</span> <span data-start="1361.18" data-end="1370.62">seen all these abstractions, you only need to go to your own code bases like, just make,</span> <span data-start="1370.62" data-end="1375.8">like this, a little bit, and see in your own code, oh, this looks like a box that you map</span> <span data-start="1375.8" data-end="1384.16">over. Or this looks like a thing that produces a nested something. And even though you didn't</span> <span data-start="1384.16" data-end="1388.9">have names maybe some of you did, but many of you didn't have names for that before.</span> </p>
<p><span data-start="1388.9" data-end="1394.43">Now you know what they're called and you will recognize them in your own code. And then</span> <span data-start="1394.43" data-end="1401.46">you will know there's map and Flatmap to your rescue, basically. So, I dare you to go to</span> <span data-start="1401.46" data-end="1407.13">your code bases and look for these patterns, and also, to Monads we were talking about</span> <span data-start="1407.13" data-end="1414.09">for example you could think of validation errors as things that add associatively and</span> <span data-start="1414.09" data-end="1418.87">have a neutral Element, which would be the lack of errors. And then you could just fold</span> <span data-start="1418.87" data-end="1424.11">over the list of validation errors and have just a bigger validation or just a success.</span> <span data-start="1424.11" data-end="1430.94">So things like that. Be creative with identifying spotting things in your own code. Finally,</span> </p>
<p><span data-start="1430.94" data-end="1437.03">I'd like to thank Jessica Kerr for encouraging me to do this talk and guiding me through</span> <span data-start="1437.03" data-end="1444.76">the sort of the topics. And I actually, I don't think we have time for questions\h‑‑</span> </p>
</section>