<section>
<p><span data-start="15.34" data-end="17.38">so today I'm going to be talking only</span> <span data-start="17.38" data-end="20.05">about iced coffee script tame j/s though</span> <span data-start="20.05" data-end="22.27">the same thing really it's just a</span> <span data-start="22.27" data-end="27.04">different flavor of these ideas ok so I</span> <span data-start="27.04" data-end="29.5">have three major goals today first is I</span> <span data-start="29.5" data-end="31.69">want to convince everyone that that</span> <span data-start="31.69" data-end="33.129">there is a problem to be solved because</span> <span data-start="33.129" data-end="35.32">there's a little bit of debate on that</span> <span data-start="35.32" data-end="37.33">point and then once we've agreed that</span> <span data-start="37.33" data-end="38.83">there's a problem I want to talk about</span> <span data-start="38.83" data-end="41.559">the types of solutions or the specs of</span> <span data-start="41.559" data-end="43.93">the solution and also show you a little</span> <span data-start="43.93" data-end="45.879">bit about iced coffee script and how it</span> <span data-start="45.879" data-end="50.8">meets the spec of the respect to solve</span> <span data-start="50.8" data-end="54.04">the problem ok so I'm going to jump a</span> <span data-start="54.04" data-end="55.66">little bit between like browser code in</span> <span data-start="55.66" data-end="59.35">nodejs code but it's everything works in</span> <span data-start="59.35" data-end="62.29">both cases so is everyone someone</span> <span data-start="62.29" data-end="63.7">familiar with coffee script can you guys</span> <span data-start="63.7" data-end="65.71">read this ok I'm trying not to get too</span> <span data-start="65.71" data-end="67.63">deep into like the really need agree</span> <span data-start="67.63" data-end="69.31">features this is just a function</span> <span data-start="69.31" data-end="71.289">definition an iced coffee script and</span> <span data-start="71.289" data-end="73.42">it's doing this it's trying to take a</span> <span data-start="73.42" data-end="75.28">term if you're choosing and to do a</span> <span data-start="75.28" data-end="78.88">query in de quitter sorry to query</span> </p>
<p><span data-start="78.88" data-end="81.58">Twitter's JSON API to get there were</span> <span data-start="81.58" data-end="84.069">like some search like Jay us coffee you</span> <span data-start="84.069" data-end="86.74">or whatever and then it's going to use</span> <span data-start="86.74" data-end="90.16">the jQuery JSON p library and when it</span> <span data-start="90.16" data-end="91.81">has a result it's going to just call a</span> <span data-start="91.81" data-end="93.399">call back with you the results or maybe</span> <span data-start="93.399" data-end="95.619">know if it failed so you might be</span> <span data-start="95.619" data-end="98.2">looking at this and say well I know this</span> <span data-start="98.2" data-end="101.289">is a regular type of coffee script or</span> </p>
<p><span data-start="101.289" data-end="102.58">JavaScript flow where the codes starting</span> <span data-start="102.58" data-end="103.959">on the upper left and going to the lower</span> <span data-start="103.959" data-end="105.97">right it's not that big a deal right</span> <span data-start="105.97" data-end="108.25">this is you know this is your code</span> <span data-start="108.25" data-end="110.11">pyramid and it's I don't know it's</span> <span data-start="110.11" data-end="112.03">everything's flipped in this in terms of</span> <span data-start="112.03" data-end="115.509">the black and white so that's supposed</span> <span data-start="115.509" data-end="117.16">to be the Pyramid in Egypt with the</span> <span data-start="117.16" data-end="118.81">Sphinx in front of it so that's like the</span> <span data-start="118.81" data-end="121.239">code of debt the pyramid of death so</span> <span data-start="121.239" data-end="122.77">this problem is manageable you can deal</span> <span data-start="122.77" data-end="125.59">with it the question though is what</span> <span data-start="125.59" data-end="127.17">happens when you start building real</span> <span data-start="127.17" data-end="130.03">more interesting programs with that type</span> <span data-start="130.03" data-end="132.489">of call in the middle of it and so</span> <span data-start="132.489" data-end="134.349">here's an example of something I wrote</span> <span data-start="134.349" data-end="136.42">to show a table of items so you can</span> <span data-start="136.42" data-end="138.459">imagine I have an array of 20 items</span> <span data-start="138.459" data-end="140.8">let's say and I wrote a little loop and</span> <span data-start="140.8" data-end="143.2">that this is fine this code works okay</span> <span data-start="143.2" data-end="146.079">for each item in the list it's going to</span> <span data-start="146.079" data-end="147.489">go through and write the item out to</span> <span data-start="147.489" data-end="148.78">your browser and if</span> <span data-start="148.78" data-end="150.4">the if there's enough room on the line</span> <span data-start="150.4" data-end="152.68">like if it's like a small word then</span> <span data-start="152.68" data-end="154">there's room to show an ad so we could</span> <span data-start="154" data-end="155.8">show an ad there and then go to the next</span> <span data-start="155.8" data-end="158.709">row so this works fine but let's say we</span> <span data-start="158.709" data-end="160.74">decide to make a change to our code</span> <span data-start="160.74" data-end="162.88">instead of just showing the ad we want</span> <span data-start="162.88" data-end="165.73">to make the application more better for</span> <span data-start="165.73" data-end="167.08">our users and we want to actually show</span> <span data-start="167.08" data-end="169.48">the result of a Twitter search where</span> <span data-start="169.48" data-end="172.27">that ad used to be displayed so now if</span> <span data-start="172.27" data-end="174.01">you recall in the first slide I showed</span> <span data-start="174.01" data-end="178.09">you a search function and the second</span> <span data-start="178.09" data-end="179.92">parameter of that search function was</span> <span data-start="179.92" data-end="181.69">the callback that search was supposed to</span> <span data-start="181.69" data-end="184.12">call when it's done with its computation</span> <span data-start="184.12" data-end="186.55">right and so I just wanted to swap that</span> <span data-start="186.55" data-end="188.98">in from my showing the ad but I've no</span> <span data-start="188.98" data-end="190.57">idea what to put in place of the</span> <span data-start="190.57" data-end="192.85">question marks and really what I put</span> <span data-start="192.85" data-end="195.28">there is this horrible realization that</span> </p>
<p><span data-start="195.28" data-end="198.55">I have to rewrite my code so I'm not</span> <span data-start="198.55" data-end="200.05">going to rewrite this function but if</span> <span data-start="200.05" data-end="201.94">you were to rewrite it and do it the</span> <span data-start="201.94" data-end="203.709">right way you would totally change your</span> <span data-start="203.709" data-end="205.39">while loop into something that look</span> <span data-start="205.39" data-end="207.25">nothing like a lot of it whatsoever so</span> <span data-start="207.25" data-end="209.53">we'd have a crazy callback pyramid of</span> <span data-start="209.53" data-end="211.51">death and at the bottom of it you'd call</span> <span data-start="211.51" data-end="213.82">your callback so just imagine I went</span> <span data-start="213.82" data-end="216.01">ahead and did that but now we go one</span> <span data-start="216.01" data-end="218.049">layer up right and so what's happening</span> <span data-start="218.049" data-end="220.09">to this the code that actually call this</span> <span data-start="220.09" data-end="222.31">show table function well just imagine</span> <span data-start="222.31" data-end="224.38">it's a function that writes a whole page</span> <span data-start="224.38" data-end="226.51">so the first thing it will do is it will</span> <span data-start="226.51" data-end="229.54">show a header and maybe has a left bar</span> <span data-start="229.54" data-end="231.25">and on the left bar it'll show this</span> <span data-start="231.25" data-end="233.079">awesome table it'll show a main page and</span> <span data-start="233.079" data-end="234.88">maybe it has a right bar and on the</span> <span data-start="234.88" data-end="236.23">right part I'll show this awesome table</span> <span data-start="236.23" data-end="238.959">and then we'll show a footer okay well</span> <span data-start="238.959" data-end="240.34">that was show table the first time I</span> <span data-start="240.34" data-end="242.739">wrote it what happens if we change it so</span> <span data-start="242.739" data-end="245.26">again show table has now been changed so</span> <span data-start="245.26" data-end="247.299">after it's done its computation it's</span> <span data-start="247.299" data-end="248.89">going to call its call back back so I</span> <span data-start="248.89" data-end="250.45">actually rewrote this and just to show</span> <span data-start="250.45" data-end="252.07">you what this very simple five line</span> <span data-start="252.07" data-end="254.4">program looks like it changed into this</span> <span data-start="254.4" data-end="258.22">and I don't think there are any bugs in</span> <span data-start="258.22" data-end="260.2">there but i don't really know and i</span> <span data-start="260.2" data-end="261.76">could have easily left out one of the</span> <span data-start="261.76" data-end="263.77">branches so i'm sure everyone's familiar</span> <span data-start="263.77" data-end="265.63">with this type of thing right and then</span> <span data-start="265.63" data-end="269.289">it's all well sorry that's three turtles</span> <span data-start="269.289" data-end="271.81">on top of each other so it's Turtles all</span> <span data-start="271.81" data-end="274.63">the way down so you keep doing this all</span> <span data-start="274.63" data-end="276.94">the way up your stack and you have to</span> <span data-start="276.94" data-end="278.11">rewrite your whole program just because</span> <span data-start="278.11" data-end="279.43">you want to change one inner function</span> <span data-start="279.43" data-end="281.95">and if this sort of thing is interesting</span> <span data-start="281.95" data-end="282.58">to you there</span> <span data-start="282.58" data-end="284.169">our other great activities you can</span> <span data-start="284.169" data-end="286.449">consider like hand factoring large</span> <span data-start="286.449" data-end="288.699">numbers hanoverian large matrices in</span> <span data-start="288.699" data-end="291.58">hand assembling x86 code so there is a</span> <span data-start="291.58" data-end="294.55">problem here and that in a very simple</span> </p>
<p><span data-start="294.55" data-end="296.68">JavaScript case that shows up all the</span> <span data-start="296.68" data-end="298.629">time on the browser or nodejs we're</span> <span data-start="298.629" data-end="299.949">asking humans to do the job that</span> <span data-start="299.949" data-end="302.289">compilers ought to be doing so I think</span> <span data-start="302.289" data-end="305.129">we all can agree that that's not a great</span> <span data-start="305.129" data-end="310.24">state of affairs okay so I want to talk</span> <span data-start="310.24" data-end="312.49">about how to solve this problem so the</span> <span data-start="312.49" data-end="313.719">first thing we need to do is what I just</span> <span data-start="313.719" data-end="315.4">described we need to find a way to do an</span> <span data-start="315.4" data-end="317.979">automatic continuously continuation</span> <span data-start="317.979" data-end="321.639">passing style conversion and that's what</span> </p>
<p><span data-start="321.639" data-end="324.129">I just was describing the problem as and</span> <span data-start="324.129" data-end="326.77">you and we'll talk about what that means</span> <span data-start="326.77" data-end="327.969">but there's really three other</span> <span data-start="327.969" data-end="330.94">requirements do that we need since we're</span> <span data-start="330.94" data-end="332.229">going to be changing the language or</span> <span data-start="332.229" data-end="334.18">adding a features to the language we</span> <span data-start="334.18" data-end="336.099">want to employ an economy of mechanism</span> <span data-start="336.099" data-end="338.08">I'll go over that in the next couple</span> <span data-start="338.08" data-end="339.639">slides we want to be backwards</span> <span data-start="339.639" data-end="341.169">compatible obviously so we could use it</span> <span data-start="341.169" data-end="342.699">in as many places as possible and</span> <span data-start="342.699" data-end="344.169">finally we don't want to sacrifice the</span> <span data-start="344.169" data-end="347.59">power that Jas is giving us so I'll go</span> <span data-start="347.59" data-end="349.99">over all three of these in more detail</span> <span data-start="349.99" data-end="352.21">so what do I mean by economy of</span> <span data-start="352.21" data-end="354.069">mechanism so if you look at javascript</span> <span data-start="354.069" data-end="355.75">or you if you look at iced coffee script</span> <span data-start="355.75" data-end="357.669">you already have these great tools you</span> <span data-start="357.669" data-end="360.19">have like if else and for while and you</span> <span data-start="360.19" data-end="361.36">don't want to get rid of those you don't</span> <span data-start="361.36" data-end="363.099">want to like replace those with this new</span> <span data-start="363.099" data-end="364.96">library that's trying to do what these</span> <span data-start="364.96" data-end="367.12">things already do for you so you want to</span> <span data-start="367.12" data-end="368.56">keep those great mechanisms and if</span> <span data-start="368.56" data-end="370.599">possible add a few new keywords as</span> <span data-start="370.599" data-end="373.36">possible so in this case I say only a</span> <span data-start="373.36" data-end="376">two at most you don't want to make the</span> <span data-start="376" data-end="377.319">language fat with all those features</span> <span data-start="377.319" data-end="381.219">that sometimes you don't even need like</span> <span data-start="381.219" data-end="382.839">compatibility with all ap is and</span> <span data-start="382.839" data-end="386.199">libraries you can javascript has</span> <span data-start="386.199" data-end="387.52">obviously been around for a while in</span> <span data-start="387.52" data-end="389.5">lots of different contexts and there's</span> <span data-start="389.5" data-end="391.599">very little agreement among people who</span> <span data-start="391.599" data-end="393.55">write libraries or JavaScript engines as</span> <span data-start="393.55" data-end="396.669">to you know what a callback is supposed</span> <span data-start="396.669" data-end="397.87">to look like this is supposed to be the</span> <span data-start="397.87" data-end="400.719">first or the second parameter and what</span> <span data-start="400.719" data-end="402.129">are the parameters to that callback and</span> <span data-start="402.129" data-end="404.289">so here are three examples that all seem</span> <span data-start="404.289" data-end="405.849">to be at odds with each other just a set</span> <span data-start="405.849" data-end="408.099">timeout function that everyone uses and</span> <span data-start="408.099" data-end="410.469">there's the jQuery get json call and if</span> <span data-start="410.469" data-end="412.209">you look at that the callback is the</span> <span data-start="412.209" data-end="414.159">third parameter but the data comes first</span> <span data-start="414.159" data-end="416.11">and then the status and then finally the</span> <span data-start="416.11" data-end="416.5">third</span> <span data-start="416.5" data-end="419.41">example is the request package the node</span> <span data-start="419.41" data-end="422.62">package written and that's the most</span> <span data-start="422.62" data-end="425.98">popular node package and NPM and you</span> <span data-start="425.98" data-end="427.84">could see there the error comes first</span> <span data-start="427.84" data-end="429.52">and then the response and the callback</span> <span data-start="429.52" data-end="432.01">so obviously whatever we do to to</span> <span data-start="432.01" data-end="435.16">address this some CPS conversion we</span> <span data-start="435.16" data-end="436.87">can't take for granted that callbacks</span> <span data-start="436.87" data-end="438.88">happened in in a particular place and</span> <span data-start="438.88" data-end="441.07">that the error is a particular place</span> <span data-start="441.07" data-end="444.43">within the callback and also i mean we</span> <span data-start="444.43" data-end="445.45">want some solution work with all</span> <span data-start="445.45" data-end="452.5">runtimes so v8 spider monkey and we also</span> <span data-start="452.5" data-end="454.419">wanted to work on the browser and so the</span> <span data-start="454.419" data-end="455.8">only way to do that is with source of</span> <span data-start="455.8" data-end="461.169">source translation and I mean coffee</span> <span data-start="461.169" data-end="462.72">script is such a natural case for a</span> <span data-start="462.72" data-end="465.04">sorry I language for this because</span> <span data-start="465.04" data-end="466.9">already doing translation as it is the</span> <span data-start="466.9" data-end="467.89">question is can we just add a couple</span> <span data-start="467.89" data-end="470.11">more translations to to get the features</span> <span data-start="470.11" data-end="473.08">we want and the last point is a little</span> <span data-start="473.08" data-end="476.05">bit it's subtle but you could do a lot</span> <span data-start="476.05" data-end="477.19">of really cool things now with</span> <span data-start="477.19" data-end="478.75">hand-rolled javascript right you could</span> <span data-start="478.75" data-end="481.18">very easily fire multiple parallel calls</span> <span data-start="481.18" data-end="483.34">and get answers back whenever you want</span> <span data-start="483.34" data-end="485.56">to you can do things like you could have</span> <span data-start="485.56" data-end="488.02">both on the browser and a note you could</span> <span data-start="488.02" data-end="489.16">do things like even more complicated</span> <span data-start="489.16" data-end="491.62">like pipeline flows what I call and so</span> <span data-start="491.62" data-end="493.36">that means let's see have a list of 100</span> <span data-start="493.36" data-end="494.979">requests to make and you only want by</span> <span data-start="494.979" data-end="496.96">with them to be outstanding at once you</span> <span data-start="496.96" data-end="499.15">could do that in with JavaScript and</span> <span data-start="499.15" data-end="502.09">it's a little bit it's a little bit</span> <span data-start="502.09" data-end="503.35">complicated but it's definitely possible</span> <span data-start="503.35" data-end="504.94">and finally you can do interesting</span> <span data-start="504.94" data-end="507.19">things like short circuiting slow</span> <span data-start="507.19" data-end="509.41">operations and you can have functions</span> <span data-start="509.41" data-end="511.63">that do background work like a call or</span> <span data-start="511.63" data-end="513.099">call back first and then they do some</span> <span data-start="513.099" data-end="514.57">other stuff so these are all great</span> <span data-start="514.57" data-end="516.099">features of JavaScript that we do not</span> <span data-start="516.099" data-end="518.26">want to delete we want to eat we want to</span> <span data-start="518.26" data-end="520.18">preserve them and a javascript in</span> </p>
<p><span data-start="520.18" data-end="522.64">CoffeeScript so we want to preserve</span> <span data-start="522.64" data-end="526.72">these in our new language okay so just</span> <span data-start="526.72" data-end="530.11">to give you a preview of what i'm going</span> <span data-start="530.11" data-end="532.2">to show you about iced coffee script</span> <span data-start="532.2" data-end="535.42">here's my example where remember we flip</span> <span data-start="535.42" data-end="537.1">the whole function I'm sorry we flip the</span> <span data-start="537.1" data-end="539.92">whole function upside down we didn't</span> <span data-start="539.92" data-end="542.14">know what to put there to preserve the</span> <span data-start="542.14" data-end="544.51">the structure of the code we had and</span> <span data-start="544.51" data-end="547.959">with iced coffee script really we can</span> <span data-start="547.959" data-end="549.44">preserve everything</span> <span data-start="549.44" data-end="551.75">and just make a small change and keep</span> <span data-start="551.75" data-end="554.03">going on our merry way so I'm going to</span> <span data-start="554.03" data-end="557.39">tell you exactly how this works okay so</span> <span data-start="557.39" data-end="559.7">I starts with regular coffee script and</span> <span data-start="559.7" data-end="563.15">just adds two new keywords the first is</span> <span data-start="563.15" data-end="565.96">defer it's a lot like a regular function</span> <span data-start="565.96" data-end="568.34">but it has some special features so it</span> <span data-start="568.34" data-end="570.62">has to be a keyword and the second is</span> <span data-start="570.62" data-end="572.63">this the weight keyword which alters</span> <span data-start="572.63" data-end="574.37">control of your program so it's a lot</span> <span data-start="574.37" data-end="576.11">like four or if where it's actually</span> <span data-start="576.11" data-end="577.91">going to change the way your program</span> <span data-start="577.91" data-end="584.02">runs okay so first I'll talk about defer</span> <span data-start="584.02" data-end="586.61">alderfer really does is it makes a</span> <span data-start="586.61" data-end="588.68">callback for you so you call defer</span> <span data-start="588.68" data-end="591.23">return so you'll call back and as usual</span> <span data-start="591.23" data-end="592.79">once you have that callback you can do</span> <span data-start="592.79" data-end="594.62">it ever you want with it so in this case</span> <span data-start="594.62" data-end="597.59">you can pass it to a collie function the</span> </p>
<p><span data-start="597.59" data-end="599.18">Kali will do whatever it has to do and</span> <span data-start="599.18" data-end="600.8">when it's done it'll call its call back</span> <span data-start="600.8" data-end="603.2">it'll tell the caller that you can now</span> <span data-start="603.2" data-end="606.59">proceed so defer is a function that</span> <span data-start="606.59" data-end="610.46">returns a callback and defer works very</span> <span data-start="610.46" data-end="612.23">well with this other keyword called oh</span> <span data-start="612.23" data-end="615.56">wait and here's what a wait does it's a</span> <span data-start="615.56" data-end="618.65">block of code so on a given example here</span> <span data-start="618.65" data-end="622.55">and control enter z wait block and it</span> <span data-start="622.55" data-end="625.46">executes every last line of code as</span> <span data-start="625.46" data-end="627.41">normal but it waits at the very end of</span> <span data-start="627.41" data-end="630.02">the block before proceeding and what's</span> <span data-start="630.02" data-end="632.12">it going to wait for well in this case</span> <span data-start="632.12" data-end="635.63">our weight block has an unknown number</span> <span data-start="635.63" data-end="638.18">of defers depending on whatever code is</span> <span data-start="638.18" data-end="640.4">it we know whatever the value of x is</span> <span data-start="640.4" data-end="642.35">and whenever the value of y is but let's</span> <span data-start="642.35" data-end="644.87">say you enter that if statement and you</span> <span data-start="644.87" data-end="646.58">go through the while loop three times so</span> <span data-start="646.58" data-end="649.28">you'll have made for defers so control</span> <span data-start="649.28" data-end="651.35">will block at the end of the await</span> <span data-start="651.35" data-end="653.089">function sorry at the end of the weight</span> <span data-start="653.089" data-end="657.47">block until all four of those callbacks</span> <span data-start="657.47" data-end="659.6">generated by defer have triggered so</span> <span data-start="659.6" data-end="661.61">it's a way to stop your program until</span> <span data-start="661.61" data-end="663.74">you you have an answer two things you</span> <span data-start="663.74" data-end="666.05">need to proceed so once all that's done</span> <span data-start="666.05" data-end="669.17">then you can go to bam and go on with</span> <span data-start="669.17" data-end="672.29">your program so here's the most basic</span> <span data-start="672.29" data-end="674.66">ice example I can come up with it's</span> <span data-start="674.66" data-end="675.71">something that when you just wait a</span> <span data-start="675.71" data-end="677.81">second and then print so I'm using the</span> <span data-start="677.81" data-end="680.18">standard set timeout function and set</span> <span data-start="680.18" data-end="681.47">timeout us you know it takes a call back</span> <span data-start="681.47" data-end="682.76">as its first parameter and that</span> <span data-start="682.76" data-end="684.56">the callback that it calls after a</span> <span data-start="684.56" data-end="686.99">second of waiting so in this case this</span> <span data-start="686.99" data-end="688.25">isn't a weight block that's just been</span> <span data-start="688.25" data-end="690.11">moved to one line but it's a weight</span> <span data-start="690.11" data-end="691.49">block that is one statement which is</span> <span data-start="691.49" data-end="693.29">called set timeout when set timeout</span> <span data-start="693.29" data-end="695.23">fires it's called back after a second</span> <span data-start="695.23" data-end="697.49">control can proceed past the end of the</span> <span data-start="697.49" data-end="699.29">away block into the console dot log</span> <span data-start="699.29" data-end="701.24">hello so this waits a second and then</span> <span data-start="701.24" data-end="704.42">prints hello and just to show you a</span> <span data-start="704.42" data-end="705.89">little bit more complicated example how</span> <span data-start="705.89" data-end="708.19">colleagues and callers interact I</span> <span data-start="708.19" data-end="710.63">prepared this other one which is really</span> <span data-start="710.63" data-end="711.8">just going to print one two three four</span> <span data-start="711.8" data-end="713.33">five but it's with two different</span> <span data-start="713.33" data-end="715.94">functions now F and G so let's say you</span> <span data-start="715.94" data-end="718.01">start without the first thing that will</span> <span data-start="718.01" data-end="719.84">happen in f is you do a console dot log</span> <span data-start="719.84" data-end="723.62">to print the number one okay now we go</span> <span data-start="723.62" data-end="725.72">into the weight block and F and what</span> <span data-start="725.72" data-end="727.49">that's going to do first is call this</span> <span data-start="727.49" data-end="730.79">other function G with a callback</span> <span data-start="730.79" data-end="734.12">generated by defer so within G now we're</span> <span data-start="734.12" data-end="736.04">in G the first thing we do is print a</span> <span data-start="736.04" data-end="738.62">two and then we're going to as in the</span> <span data-start="738.62" data-end="740.78">first example that I showed you we're</span> <span data-start="740.78" data-end="743.03">going to wait ten milliseconds for a</span> <span data-start="743.03" data-end="746.54">timeout so at this point control cannot</span> <span data-start="746.54" data-end="748.94">proceed any further in G so it jumps</span> <span data-start="748.94" data-end="751.52">actually back out to F because app can</span> <span data-start="751.52" data-end="753.29">still keep doing other things it hasn't</span> <span data-start="753.29" data-end="755">it hasn't reached the end of its await</span> <span data-start="755" data-end="756.68">block yet so it's going to then print</span> <span data-start="756.68" data-end="758.81">three and then control will jump to some</span> <span data-start="758.81" data-end="761.42">other part of the program after that</span> <span data-start="761.42" data-end="764.09">ten-second 10 millisecond timeout</span> <span data-start="764.09" data-end="767.9">expires we can now proceed in function G</span> <span data-start="767.9" data-end="770.45">because all it defers within its weight</span> <span data-start="770.45" data-end="773.6">block I finished and then G can call its</span> <span data-start="773.6" data-end="775.58">call back now what happens when G calls</span> <span data-start="775.58" data-end="778.22">us call back well that allows F to</span> <span data-start="778.22" data-end="779.9">proceed past it's a weight block because</span> <span data-start="779.9" data-end="781.91">they only had one two fern its weight</span> <span data-start="781.91" data-end="783.89">and now that's triggered and so now we</span> <span data-start="783.89" data-end="788.72">can finish up and just to briefly</span> <span data-start="788.72" data-end="791.48">describe to you how this can fit any API</span> <span data-start="791.48" data-end="793.76">you can dream of I haven't shown this to</span> <span data-start="793.76" data-end="795.05">you yet but defer actually takes</span> <span data-start="795.05" data-end="797.6">arguments and the arguments of defer the</span> <span data-start="797.6" data-end="799.4">arguments to be filled in by the call</span> <span data-start="799.4" data-end="801.14">back when is actually called so that's</span> <span data-start="801.14" data-end="802.67">why defers an Ashley a real function</span> <span data-start="802.67" data-end="804.2">it's actually implementing something a</span> <span data-start="804.2" data-end="805.73">little bit like pass by reference and</span> </p>
<p><span data-start="805.73" data-end="809.06">C++ so after control leaves this a</span> <span data-start="809.06" data-end="811.19">weight block the request library will</span> <span data-start="811.19" data-end="812.84">have filled in the air and the body and</span> <span data-start="812.84" data-end="815.42">they'll be available as those two those</span> <span data-start="815.42" data-end="816.38">two functions</span> <span data-start="816.38" data-end="818.81">so in this way you can use ice coffee</span> <span data-start="818.81" data-end="825.83">script in any API okay so I've told you</span> <span data-start="825.83" data-end="827.81">about automatic cps conversion in nice</span> <span data-start="827.81" data-end="828.98">coffee script I told you about the</span> <span data-start="828.98" data-end="830.48">economy of mechanism hopefully it goes</span> <span data-start="830.48" data-end="832.64">only to new keywords I tell you about</span> <span data-start="832.64" data-end="833.75">how to make it compatible with all</span> <span data-start="833.75" data-end="836.24">existing libraries and api's and the</span> <span data-start="836.24" data-end="837.23">only thing I'd left to show you is how</span> <span data-start="837.23" data-end="839.24">this makes for really cool programs that</span> <span data-start="839.24" data-end="843.74">have interesting control flow okay so</span> <span data-start="843.74" data-end="846.14">let's talk about the one we we looked at</span> <span data-start="846.14" data-end="848.3">in the first series of examples which is</span> <span data-start="848.3" data-end="850.61">just a set of cereal calls when one</span> <span data-start="850.61" data-end="853.67">finishes the next can can start and this</span> <span data-start="853.67" data-end="855.11">is what it looks like a nice coffee</span> <span data-start="855.11" data-end="857.9">script so let's say we have a series of</span> <span data-start="857.9" data-end="859.4">20 terms we need to search for we're</span> <span data-start="859.4" data-end="862.1">from Twitter what this loop will do is</span> <span data-start="862.1" data-end="863.48">it'll search it'll loop through each of</span> <span data-start="863.48" data-end="866.48">those 20 terms one at a time and on each</span> <span data-start="866.48" data-end="868.7">one calling this search function that</span> <span data-start="868.7" data-end="871.61">makes a Twitter call and then it</span> <span data-start="871.61" data-end="873.71">populates the result into that slot in</span> <span data-start="873.71" data-end="876.89">the result array so this is just for</span> <span data-start="876.89" data-end="878.93">each item wait wait for that thing to</span> <span data-start="878.93" data-end="882.53">finish then do the next I'd done the</span> <span data-start="882.53" data-end="883.7">really cool thing is how do we change</span> <span data-start="883.7" data-end="885.86">this into a set of 20 parallel calls</span> <span data-start="885.86" data-end="888.2">well it's a minimal change we just</span> <span data-start="888.2" data-end="890.39">switch the order of the weight and the</span> <span data-start="890.39" data-end="893.06">for loops and snow so now if you look at</span> <span data-start="893.06" data-end="894.86">this within the awake block we're gonna</span> <span data-start="894.86" data-end="896.15">be doing a whole bunch of things we're</span> <span data-start="896.15" data-end="898.4">going to fire off 20 different requests</span> <span data-start="898.4" data-end="900.14">at once and once all of them have</span> <span data-start="900.14" data-end="901.88">completed then we're ready to continue</span> <span data-start="901.88" data-end="903.32">so this is how you would implement</span> <span data-start="903.32" data-end="905.93">parallel control flow with with ice</span> <span data-start="905.93" data-end="909.26">coffee script and this gets slightly</span> <span data-start="909.26" data-end="912.56">more complicated but it's a little bit</span> <span data-start="912.56" data-end="916.4">more code but it's the same ideas I play</span> </p>
<p><span data-start="916.4" data-end="918.02">I wrote this little Klaus called a</span> <span data-start="918.02" data-end="919.79">pipeline or library and that's using</span> <span data-start="919.79" data-end="921.77">just regular iced coffee script that</span> <span data-start="921.77" data-end="923.69">I've described you so far it's not on</span> <span data-start="923.69" data-end="925.64">the slide but it's it's in github if you</span> <span data-start="925.64" data-end="927.29">want to check it out and what does this</span> <span data-start="927.29" data-end="930.25">pipeline or do well it tries to enforce</span> <span data-start="930.25" data-end="932.72">network flows with only a certain number</span> <span data-start="932.72" data-end="934.88">of requests outstanding so in this case</span> <span data-start="934.88" data-end="936.83">they're only five requests outstanding</span> <span data-start="936.83" data-end="938.66">even though we might have a thousand</span> <span data-start="938.66" data-end="941.21">different terms where we're going to to</span> <span data-start="941.21" data-end="944.02">query and so here's the way it works</span> <span data-start="944.02" data-end="946.67">with a pipeliner you wait before you</span> <span data-start="946.67" data-end="949.82">launch your call so if you go into this</span> <span data-start="949.82" data-end="951.83">the first thing that will happen in the</span> <span data-start="951.83" data-end="954.32">loop is that you'll ask the pipe liner</span> <span data-start="954.32" data-end="955.94">is there room in my window to fire a</span> <span data-start="955.94" data-end="958.58">call if yes you'll go right past out of</span> <span data-start="958.58" data-end="961.19">a Plock if not you'll be queued up until</span> <span data-start="961.19" data-end="963.29">the next guy comes back so in this case</span> <span data-start="963.29" data-end="965.21">when that fifth outstanding query comes</span> <span data-start="965.21" data-end="967.34">back I now have room in the pipeline or</span> <span data-start="967.34" data-end="969.74">so I can keep going it'll it'll</span> <span data-start="969.74" data-end="971.93">basically say I can go pass a weight</span> <span data-start="971.93" data-end="975.59">block in the in the loop and now when I</span> <span data-start="975.59" data-end="978.65">need to generate a call back I actually</span> <span data-start="978.65" data-end="980.15">need to ask the pipe liner for their</span> <span data-start="980.15" data-end="982.16">call back because as I told you there's</span> <span data-start="982.16" data-end="983.69">a little bit of accounting going on here</span> <span data-start="983.69" data-end="985.9">and this pipeliner class needs to know</span> <span data-start="985.9" data-end="988.07">when is it that I can launch the next</span> <span data-start="988.07" data-end="990.59">guy so the pipeline actually has a defer</span> <span data-start="990.59" data-end="991.76">function which I've implemented with</span> <span data-start="991.76" data-end="994.07">this regular iced coffee script and it's</span> <span data-start="994.07" data-end="996.02">doing both the accounting and also</span> <span data-start="996.02" data-end="997.88">populating the results as we saw in the</span> <span data-start="997.88" data-end="999.89">previous slides at the end of this loop</span> <span data-start="999.89" data-end="1001.3">i have to flush to make sure that all</span> <span data-start="1001.3" data-end="1003.31">five outstanding guys are back and then</span> <span data-start="1003.31" data-end="1006.13">i'm done so this is a pretty complicated</span> <span data-start="1006.13" data-end="1009.54">control flow that's just very succinctly</span> <span data-start="1009.54" data-end="1014.53">captured with this library and I told</span> <span data-start="1014.53" data-end="1015.73">you something about doing background</span> <span data-start="1015.73" data-end="1018.94">work so when you're in this asynchronous</span> <span data-start="1018.94" data-end="1021.22">idiom your past a call back your</span> <span data-start="1021.22" data-end="1023.89">functions past a call back and you you</span> <span data-start="1023.89" data-end="1025.36">call a call back to tell your call</span> <span data-start="1025.36" data-end="1026.8">you're done with your work but it</span> <span data-start="1026.8" data-end="1028.3">doesn't mean you get to stop executing</span> <span data-start="1028.3" data-end="1030.31">and in particular let's say I want to</span> <span data-start="1030.31" data-end="1031.42">take this search function I've been</span> <span data-start="1031.42" data-end="1033.43">talking about tell whoever is doing the</span> <span data-start="1033.43" data-end="1035.26">search that okay I got your results go</span> <span data-start="1035.26" data-end="1036.91">print the page but then I could do other</span> <span data-start="1036.91" data-end="1039.459">things like save to disk or I don't know</span> <span data-start="1039.459" data-end="1041.02">dude do something else in the background</span> <span data-start="1041.02" data-end="1042.31">and this is also possible with iced</span> <span data-start="1042.31" data-end="1044.98">coffee script in this case after I've</span> <span data-start="1044.98" data-end="1046.81">done a search like call back my callback</span> <span data-start="1046.81" data-end="1048.16">with the result here with your result</span> <span data-start="1048.16" data-end="1050.53">then I can save the file to disk and</span> <span data-start="1050.53" data-end="1052.36">then report an error or something so</span> <span data-start="1052.36" data-end="1053.8">just because you call your callback</span> <span data-start="1053.8" data-end="1055">doesn't mean you're done you could do a</span> <span data-start="1055" data-end="1056.77">lot of interesting things and this is a</span> <span data-start="1056.77" data-end="1058.39">very powerful feature of a language it</span> <span data-start="1058.39" data-end="1060.64">just allows you to basically in threads</span> <span data-start="1060.64" data-end="1063.1">you'd have to do something call fork but</span> <span data-start="1063.1" data-end="1065.47">in ice coffee script it's just a natural</span> <span data-start="1065.47" data-end="1067.15">extension of the way things are laid out</span> <span data-start="1067.15" data-end="1071.14">and this last example is a little bit of</span> <span data-start="1071.14" data-end="1076.06">a of a trip it's it's allowing you to</span> <span data-start="1076.06" data-end="1077.83">take any function you could think of in</span> <span data-start="1077.83" data-end="1079.96">this case our search and apply to it a</span> <span data-start="1079.96" data-end="1082.51">timeout so if Twitter is slow i don't</span> <span data-start="1082.51" data-end="1083.74">know why that would happen</span> <span data-start="1083.74" data-end="1085.809">you could say either give me a result of</span> <span data-start="1085.809" data-end="1089.14">the search or wait or if second expires</span> <span data-start="1089.14" data-end="1090.85">and I haven't gotten it then keep going</span> <span data-start="1090.85" data-end="1092.83">and this time out function is something</span> </p>
<p><span data-start="1092.83" data-end="1094.6">I wrote with iced coffee script too it's</span> <span data-start="1094.6" data-end="1096.309">pretty interesting it sets up two</span> <span data-start="1096.309" data-end="1098.23">different racing computations it sets up</span> <span data-start="1098.23" data-end="1099.91">a timer that's going to go off the</span> <span data-start="1099.91" data-end="1101.59">amount of time you asked for and assess</span> <span data-start="1101.59" data-end="1103.87">the Twitter search and whichever one of</span> <span data-start="1103.87" data-end="1105.91">those comes back first will then allow</span> <span data-start="1105.91" data-end="1107.83">you to exit this await block and keep</span> <span data-start="1107.83" data-end="1109.69">going so what that really implements us</span> <span data-start="1109.69" data-end="1111.7">a timeout either I wait a second or I</span> <span data-start="1111.7" data-end="1114.4">get a result but not both so again this</span> <span data-start="1114.4" data-end="1115.87">is a little bit of magic that's hidden</span> <span data-start="1115.87" data-end="1117.64">in a library that I wrote but the</span> <span data-start="1117.64" data-end="1119.41">library was all with iced coffee script</span> <span data-start="1119.41" data-end="1121.48">so again as part of this composable</span> <span data-start="1121.48" data-end="1124.45">language with just this very bitten with</span> <span data-start="1124.45" data-end="1126.01">this natural set of features that allow</span> <span data-start="1126.01" data-end="1129.91">you to do very interesting things so how</span> <span data-start="1129.91" data-end="1132.04">is this all pulled together as i</span> <span data-start="1132.04" data-end="1134.38">promised i didn't want to change the</span> <span data-start="1134.38" data-end="1135.82">interpreter i didn't want to do things</span> <span data-start="1135.82" data-end="1137.98">like require fibers because that's not</span> <span data-start="1137.98" data-end="1140.55">portable across all different</span> <span data-start="1140.55" data-end="1142.75">implementations it's really what I want</span> <span data-start="1142.75" data-end="1145.059">to do is take a coffee script and in do</span> <span data-start="1145.059" data-end="1146.71">more or less a source of source</span> <span data-start="1146.71" data-end="1150.13">translation so the way this works is you</span> <span data-start="1150.13" data-end="1151.9">parse CoffeeScript as usual you got the</span> <span data-start="1151.9" data-end="1153.7">abstract syntax tree and then you do a</span> <span data-start="1153.7" data-end="1156.309">rotation on that syntax tree to actually</span> <span data-start="1156.309" data-end="1158.08">implement the continuation passing style</span> <span data-start="1158.08" data-end="1162.059">translation and then alter output code</span> <span data-start="1162.059" data-end="1164.89">and then output code mainly as normal</span> <span data-start="1164.89" data-end="1167.14">but with some differences for for the</span> <span data-start="1167.14" data-end="1168.55">things that you rotate it and so I'll</span> <span data-start="1168.55" data-end="1170.679">explain to you what a rotation means so</span> <span data-start="1170.679" data-end="1174.13">here's a very basic example function f 2</span> <span data-start="1174.13" data-end="1177.25">i'm waiting on sorry function f 1 is</span> <span data-start="1177.25" data-end="1179.86">called i'm awaiting on f 2 and then</span> <span data-start="1179.86" data-end="1182.92">after that's done I can call f3 so</span> <span data-start="1182.92" data-end="1185.05">here's the regular syntax tree for that</span> <span data-start="1185.05" data-end="1187.39">as would happen with a vanilla coffee</span> <span data-start="1187.39" data-end="1189.22">script compiler there's just a block</span> <span data-start="1189.22" data-end="1192.37">that contains f1 a sub-block that's that</span> <span data-start="1192.37" data-end="1195.13">has a weight and with sub sub block of</span> <span data-start="1195.13" data-end="1198.1">f2 and then f3 but in a rotation you</span> <span data-start="1198.1" data-end="1200.02">have to change what's the child of one</span> <span data-start="1200.02" data-end="1202">because this effort you can only be</span> <span data-start="1202" data-end="1204.309">called out of weights at the weight</span> <span data-start="1204.309" data-end="1206.83">nodes discretion so what that means is</span> <span data-start="1206.83" data-end="1209.32">we're going to take take that second</span> <span data-start="1209.32" data-end="1211.39">sorry that third arm of the tree and</span> <span data-start="1211.39" data-end="1213.34">basically make it to be a child of the</span> <span data-start="1213.34" data-end="1217.33">weight block and this is more or less</span> <span data-start="1217.33" data-end="1221.74">pation so as you can imagine this has to</span> <span data-start="1221.74" data-end="1224.49">be done recursively up the tree so</span> <span data-start="1224.49" data-end="1226.57">everything that within an away block</span> <span data-start="1226.57" data-end="1228.88">needs that type of rotation parents of</span> <span data-start="1228.88" data-end="1231.01">those nodes needs rotations and also</span> <span data-start="1231.01" data-end="1232.33">inside a loops things get a little bit</span> <span data-start="1232.33" data-end="1234.22">interesting if you have break or</span> <span data-start="1234.22" data-end="1236.62">continue inside of a loop that also has</span> <span data-start="1236.62" data-end="1238.87">a weight blocks and you have to do</span> <span data-start="1238.87" data-end="1241.96">rotations inside those loops but a key</span> <span data-start="1241.96" data-end="1243.61">thing that I've discovered is you want</span> <span data-start="1243.61" data-end="1244.99">to use this sparingly you don't want to</span> <span data-start="1244.99" data-end="1246.67">do this for every possible node in your</span> <span data-start="1246.67" data-end="1249.19">object abstract syntax tree because</span> <span data-start="1249.19" data-end="1251.01">things will really explode on you so</span> <span data-start="1251.01" data-end="1253.63">with a little bit of care you can decide</span> <span data-start="1253.63" data-end="1255.76">only which nodes need to be rotated and</span> <span data-start="1255.76" data-end="1257.56">just apply those rotations to those</span> <span data-start="1257.56" data-end="1259.99">nodes and this helps keep the code as</span> <span data-start="1259.99" data-end="1263.98">clean as possible so finally I want to</span> <span data-start="1263.98" data-end="1265.6">tell you a little bit about how this was</span> <span data-start="1265.6" data-end="1269.2">implemented I didn't rip up all of</span> <span data-start="1269.2" data-end="1270.52">coffee script coffee scripts about like</span> <span data-start="1270.52" data-end="1273.37">a 5,000 line program and it turned out I</span> <span data-start="1273.37" data-end="1277.38">added about you know let's say about</span> <span data-start="1277.38" data-end="1280.33">1500 lines of code in particular the</span> <span data-start="1280.33" data-end="1281.56">grammar and the lexer file in</span> </p>
<p><span data-start="1281.56" data-end="1283.57">CoffeeScript barely changed at all so</span> <span data-start="1283.57" data-end="1285.67">these were very simple changes to the</span> <span data-start="1285.67" data-end="1287.5">grammar mechs are kind of all the all</span> <span data-start="1287.5" data-end="1289.93">the goods are really within this nodes</span> <span data-start="1289.93" data-end="1293.11">coffee file in which on the output code</span> <span data-start="1293.11" data-end="1299.74">it is emitted and finally so I think</span> <span data-start="1299.74" data-end="1301.18">I've covered all interesting parts of</span> <span data-start="1301.18" data-end="1304.6">iced and I've tried to tell you why Isis</span> <span data-start="1304.6" data-end="1306.25">meeting the spec for how to make</span> <span data-start="1306.25" data-end="1309.94">interesting asynchronous and simple</span> <span data-start="1309.94" data-end="1312.66">programs with javascript in CoffeeScript</span> <span data-start="1312.66" data-end="1314.71">one last thing I want to say is that</span> <span data-start="1314.71" data-end="1316.18">this isn't just a toy project we've</span> <span data-start="1316.18" data-end="1318.4">actually built a real site with it it's</span> <span data-start="1318.4" data-end="1320.32">in the wild and this little asterisk</span> <span data-start="1320.32" data-end="1322.18">next to it because the site is in is in</span> <span data-start="1322.18" data-end="1324.22">private beta right now but it's this</span> <span data-start="1324.22" data-end="1326.14">site called comma Soros which we're</span> <span data-start="1326.14" data-end="1328.93">trying to develop a matching system</span> <span data-start="1328.93" data-end="1332.17">based on people's interests and it's</span> <span data-start="1332.17" data-end="1334.03">about 30 thousand lines of iced coffee</span> <span data-start="1334.03" data-end="1336.34">script with about 10,000 lines of go</span> <span data-start="1336.34" data-end="1338.47">code but just to give you a sense of how</span> <span data-start="1338.47" data-end="1340.21">that breaks down with our new keywords</span> <span data-start="1340.21" data-end="1342.31">it turns out about two percent of those</span> <span data-start="1342.31" data-end="1345.61">lines use these weight blocks and about</span> <span data-start="1345.61" data-end="1347.83">nine percent of those weight blocks are</span> <span data-start="1347.83" data-end="1350.83">using more exotic and currency than just</span> <span data-start="1350.83" data-end="1353.08">line a than B then C so we're actually</span> <span data-start="1353.08" data-end="1354.34">getting a lot of use out of the power</span> <span data-start="1354.34" data-end="1356.47">within the library and even this</span> <span data-start="1356.47" data-end="1360.01">pipeliner Klaus shows up 20 times ok so</span> <span data-start="1360.01" data-end="1362.2">there are my turtles again they're flip-</span> <span data-start="1362.2" data-end="1364.419">but the next time you have one of those</span> <span data-start="1364.419" data-end="1366.19">oh god no moments where you have to</span> <span data-start="1366.19" data-end="1368.649">rotate your whole program just remember</span> <span data-start="1368.649" data-end="1371.169">use CoffeeScript use ice coffee script</span> <span data-start="1371.169" data-end="1374.08">it'll save you all the hassle and really</span> <span data-start="1374.08" data-end="1376.09">what I want to do is try to get a</span> <span data-start="1376.09" data-end="1377.679">grassroots movement into to get this</span> <span data-start="1377.679" data-end="1380.049">code mainlined into coffee script so far</span> <span data-start="1380.049" data-end="1382.12">it's in there's not really enough</span> <span data-start="1382.12" data-end="1383.98">support but I encourage you guys to</span> <span data-start="1383.98" data-end="1386.08">download it and enchanting these uh</span> <span data-start="1386.08" data-end="1388.51">these new language features if they</span> <span data-start="1388.51" data-end="1390.279">actually solve your problems and with</span> <span data-start="1390.279" data-end="1391.57">that hopefully there's a couple minutes</span> <span data-start="1391.57" data-end="1393.399">for questions and thank you for</span> <span data-start="1393.399" data-end="1402.76">listening yes so how do you realize the</span> <span data-start="1402.76" data-end="1404.71">await block waiting it does actually</span> <span data-start="1404.71" data-end="1406.36">yield back to the browser and get called</span> <span data-start="1406.36" data-end="1408.399">back or are you blocking somehow a</span> </p>
<p><span data-start="1408.399" data-end="1411.76">JavaScript cell no I could maybe try to</span> <span data-start="1411.76" data-end="1413.44">show you the rotation really quickly I</span> <span data-start="1413.44" data-end="1417.1">don't know if I can pull it up and we</span> <span data-start="1417.1" data-end="1422.59">can you see that no no anyway um the</span> <span data-start="1422.59" data-end="1426.61">answer is you take the code that's</span> <span data-start="1426.61" data-end="1428.38">supposed to come after the way block and</span> <span data-start="1428.38" data-end="1430.36">you packages up as a function and now</span> <span data-start="1430.36" data-end="1432.039">that function can be called whenever</span> <span data-start="1432.039" data-end="1433.929">you're ready to do it so there's a</span> <span data-start="1433.929" data-end="1436.71">little bit of code in a weight that says</span> <span data-start="1436.71" data-end="1441.34">the roughly the answer is let me just</span> <span data-start="1441.34" data-end="1443.59">that back ok you have the rest of the</span> <span data-start="1443.59" data-end="1445.12">program as a function and you basically</span> <span data-start="1445.12" data-end="1447.549">pass that as a call back to set timeout</span> <span data-start="1447.549" data-end="1449.71">in this case and it just fires for us so</span> <span data-start="1449.71" data-end="1454.87">no changes to the browser what's your</span> <span data-start="1454.87" data-end="1456.58">experience with debugging this stuff</span> <span data-start="1456.58" data-end="1460.36">what does it do ah ok um rationalize</span> <span data-start="1460.36" data-end="1462.7">what's happening so this is a great</span> <span data-start="1462.7" data-end="1465.82">example as to why in some cases were</span> <span data-start="1465.82" data-end="1470.169">better off and basically we can annotate</span> <span data-start="1470.169" data-end="1473.2">this code so you people already have</span> <span data-start="1473.2" data-end="1474.399">this problem anyway with hand-rolled</span> <span data-start="1474.399" data-end="1476.98">callbacks because you know you'll get a</span> <span data-start="1476.98" data-end="1480.19">return from from Twitter and the whole</span> <span data-start="1480.19" data-end="1481.659">top of the stock will be lopped off and</span> <span data-start="1481.659" data-end="1483.61">you'll just be left with a couple frames</span> <span data-start="1483.61" data-end="1484.82">above the Twitter so trick</span> <span data-start="1484.82" data-end="1487.61">and so actually because we've made this</span> <span data-start="1487.61" data-end="1489.47">a lot more structured you can now</span> <span data-start="1489.47" data-end="1491.269">annotate the code and kind of recreate</span> <span data-start="1491.269" data-end="1493.07">the chain of callbacks it got you to</span> <span data-start="1493.07" data-end="1495.35">where you were and we're able to say you</span> <span data-start="1495.35" data-end="1497.71">know this actually happened at you know</span> <span data-start="1497.71" data-end="1499.97">this is this is on the github page I'm</span> <span data-start="1499.97" data-end="1501.139">not gonna be able to explain it but I'll</span> <span data-start="1501.139" data-end="1503">tell you the real set of calls to</span> <span data-start="1503" data-end="1505.279">actually went up there and we could also</span> <span data-start="1505.279" data-end="1506.84">do something like use real line number</span> <span data-start="1506.84" data-end="1509.08">translation as opposed to coffeescript</span> <span data-start="1509.08" data-end="1511.309">you know the CoffeeScript to JavaScript</span> <span data-start="1511.309" data-end="1513.409">translation so anyway I think the answer</span> <span data-start="1513.409" data-end="1515.45">is it's better at debugging because it's</span> <span data-start="1515.45" data-end="1517.85">a more structured way of putting your</span> <span data-start="1517.85" data-end="1526.21">programs together yes back there um so</span> <span data-start="1526.21" data-end="1528.74">what like what was your process at</span> <span data-start="1528.74" data-end="1531.049">arriving it at this solution to the to</span> <span data-start="1531.049" data-end="1532.759">look to the problem you talked about at</span> <span data-start="1532.759" data-end="1534.139">the beginning like I liked was this</span> <span data-start="1534.139" data-end="1536.36">organic like how how did you get there</span> <span data-start="1536.36" data-end="1538.399">we got there we had done this the same</span> <span data-start="1538.399" data-end="1540.44">thing in C++ in about two thousand seven</span> <span data-start="1540.44" data-end="1543.289">um we started with the same problem</span> <span data-start="1543.289" data-end="1545.179">though we had a whole website build with</span> </p>
<p><span data-start="1545.179" data-end="1548.12">C++ and roll call backs and that turned</span> <span data-start="1548.12" data-end="1549.47">out to be I mean people were really</span> <span data-start="1549.47" data-end="1550.73">quitting her company because he just</span> <span data-start="1550.73" data-end="1552.799">could not deal with it so we decided we</span> <span data-start="1552.799" data-end="1553.879">had to come up with a better solution</span> <span data-start="1553.879" data-end="1556.49">and the solution we came up with was one</span> <span data-start="1556.49" data-end="1558.71">that had all those four requirements</span> <span data-start="1558.71" data-end="1560.48">that i spoke about and it had to be</span> <span data-start="1560.48" data-end="1561.83">backwards compatible because we couldn't</span> <span data-start="1561.83" data-end="1563.299">rewrite the whole thing from scratch so</span> <span data-start="1563.299" data-end="1565.159">these primitives kind of fell out of</span> <span data-start="1565.159" data-end="1567.289">that and it turned out there exactly the</span> <span data-start="1567.289" data-end="1569.45">same thing that works in my opinion</span> <span data-start="1569.45" data-end="1570.86">really well for coffee script and an</span> <span data-start="1570.86" data-end="1573.019">iced coffee script so I guess experience</span> <span data-start="1573.019" data-end="1575.269">is really how we came up with okay I</span> <span data-start="1575.269" data-end="1577.25">think that's it for now so if you have</span> <span data-start="1577.25" data-end="1578.779">any more questions max's will be</span> <span data-start="1578.779" data-end="1580.639">available all right um thank you ever so</span> <span data-start="1580.639" data-end="1586.22">thanks very much max</span> </p>
</section>