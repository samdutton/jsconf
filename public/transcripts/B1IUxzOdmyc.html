<section>
<p><span data-start="0" data-end="17.63">[Music]</span> <span data-start="17.64" data-end="19.439">so hey guys I hope you are having a</span> <span data-start="19.439" data-end="21.75">great time in Singapore I love Singapore</span> <span data-start="21.75" data-end="23.789">personally are there any people from</span> <span data-start="23.789" data-end="25.89">Israel by the way can you raise their</span> <span data-start="25.89" data-end="31.05">hand okay I guess not so first of all</span> <span data-start="31.05" data-end="32.88">let me introduce myself my name is a tan</span> <span data-start="32.88" data-end="35.01">I come from Israel at the moment I live</span> <span data-start="35.01" data-end="35.79">in Taipei</span> <span data-start="35.79" data-end="38.07">I'm a full-stack JavaScript engineer I</span> <span data-start="38.07" data-end="40.2">do that full-time and I also do that for</span> <span data-start="40.2" data-end="42.54">fun this is why I give a talk right now</span> <span data-start="42.54" data-end="45.36">and when it comes to programming I</span> <span data-start="45.36" data-end="47.94">really like to dive deeply into stuff</span> <span data-start="47.94" data-end="51.03">which are trivial so trivial that it's</span> <span data-start="51.03" data-end="53.219">part of our daily routine and we just</span> <span data-start="53.219" data-end="59.55">overlook it and because it's something</span> <span data-start="59.55" data-end="61.77">so trivial then I'm gonna dive deeply</span> <span data-start="61.77" data-end="63.48">into it and naturally it's gonna be a</span> <span data-start="63.48" data-end="65.7">lot of a level talk so it's not gonna</span> <span data-start="65.7" data-end="68.61">turn you necessarily into better react</span> <span data-start="68.61" data-end="71.52">or angular developers but at the end of</span> <span data-start="71.52" data-end="73.229">the day you'll be able to solve problems</span> <span data-start="73.229" data-end="75.24">that a lot of programmers don't know how</span> <span data-start="75.24" data-end="77.549">to solve and just a new world of</span> <span data-start="77.549" data-end="79.759">possibilities will open up to you and</span> <span data-start="79.759" data-end="83.79">the subject of the day is äôt compilers</span> <span data-start="83.79" data-end="87.93">ahead of time so I assume that you're</span> <span data-start="87.93" data-end="89.85">pretty much familiar with the concept</span> <span data-start="89.85" data-end="90.659">okay</span> <span data-start="90.659" data-end="94.759">example compilers compilers for C or C++</span> <span data-start="94.759" data-end="97.409">where you basically take a code string</span> <span data-start="97.409" data-end="100.189">and you get it from one format into</span> <span data-start="100.189" data-end="102.6">native machine code or in the case of</span> </p>
<p><span data-start="102.6" data-end="105.96">JavaScript where you take yes next and</span> <span data-start="105.96" data-end="110.34">you compile it two years five now why is</span> <span data-start="110.34" data-end="112.86">it such a trivial topic to prove my</span> <span data-start="112.86" data-end="115.5">point I have few questions if it's true</span> <span data-start="115.5" data-end="119.189">for you please raise your hand who here</span> <span data-start="119.189" data-end="121.92">uses Babel to compile JavaScript</span> <span data-start="121.92" data-end="125.04">applications please raise your hand okay</span> <span data-start="125.04" data-end="128.52">a lot of people who here uses typescript</span> <span data-start="128.52" data-end="131.58">raise your hand okay again a lot of</span> <span data-start="131.58" data-end="133.44">people now listen carefully this is</span> <span data-start="133.44" data-end="133.83">likely</span> <span data-start="133.83" data-end="137.13">different who here uses es5 to write</span> <span data-start="137.13" data-end="138.69">Java see applications please raise your</span> <span data-start="138.69" data-end="140.51">hand</span> <span data-start="140.51" data-end="144.77">get out you know No</span> <span data-start="144.77" data-end="148.56">okay so we see that there's a common</span> <span data-start="148.56" data-end="151.29">pattern here right we all use Babel and</span> <span data-start="151.29" data-end="152.46">typescript and all these sort of</span> <span data-start="152.46" data-end="154.95">compilers but no one ever stopped and</span> <span data-start="154.95" data-end="158.39">wonder how does it actually work and</span> <span data-start="158.39" data-end="160.35">there's a lot of advantages to that</span> <span data-start="160.35" data-end="161.94">because once you know how it actually</span> <span data-start="161.94" data-end="164.61">works then you would know how to run</span> <span data-start="164.61" data-end="166.62">some processing before you actually go</span> <span data-start="166.62" data-end="168.6">to the interpreter rather than race</span> <span data-start="168.6" data-end="173.25">wasting some runtime processing power so</span> </p>
<p><span data-start="173.25" data-end="176.54">I'm gonna go through very trivial stuff</span> <span data-start="176.54" data-end="181.29">and later on I'm gonna dive deeply into</span> <span data-start="181.29" data-end="186.87">that so just bear with me yeah so why</span> <span data-start="186.87" data-end="188.37">exactly do we use ahead of time</span> <span data-start="188.37" data-end="190.29">compilers what are the advantages first</span> <span data-start="190.29" data-end="193.1">of all you can use it to optimize code</span> <span data-start="193.1" data-end="195.9">so let's say that we have parts of code</span> <span data-start="195.9" data-end="198.57">that we don't actually use such as tree</span> <span data-start="198.57" data-end="201.06">shaking where we import modules and we</span> <span data-start="201.06" data-end="203.37">end up not using these modules therefore</span> <span data-start="203.37" data-end="205.44">we can reduce that part of goat and</span> <span data-start="205.44" data-end="209.82">reduce bundle size or for example if we</span> <span data-start="209.82" data-end="212.16">have variable assignments of variables</span> <span data-start="212.16" data-end="214.2">that we don't actually use then we can</span> <span data-start="214.2" data-end="215.82">just delete that when we compile the</span> <span data-start="215.82" data-end="217.38">code and therefore save some memory</span> <span data-start="217.38" data-end="221.19">locations and one night what night why</span> <span data-start="221.19" data-end="223.2">not take it a step further using linters</span> <span data-start="223.2" data-end="225.6">so basically what the linter does it</span> <span data-start="225.6" data-end="227.94">says hey man listen there's something</span> <span data-start="227.94" data-end="230.07">wrong here okay you import that module</span> <span data-start="230.07" data-end="232.26">and you don't use it or maybe there's a</span> <span data-start="232.26" data-end="236.06">standard of code that we wanted to just</span> <span data-start="236.06" data-end="238.92">live up to our own expectations so let's</span> <span data-start="238.92" data-end="241.35">say we want to use conditions in a</span> <span data-start="241.35" data-end="243.51">specific way maybe closures in specific</span> <span data-start="243.51" data-end="246.209">places maybe we want to use to force use</span> <span data-start="246.209" data-end="249.3">constant variables so before we actually</span> <span data-start="249.3" data-end="251.75">run the optimization itself we can</span> <span data-start="251.75" data-end="254.64">basically make the code look a lot</span> <span data-start="254.64" data-end="257.88">better before we push it into our get</span> <span data-start="257.88" data-end="262.02">host also it enables backward</span> <span data-start="262.02" data-end="263.06">compatibility</span> <span data-start="263.06" data-end="266.51">now we all</span> <span data-start="266.51" data-end="269.82">use the latest features of JavaScript</span> <span data-start="269.82" data-end="273.15">and if I'll just open chrome dev tools</span> <span data-start="273.15" data-end="276.6">right now and I'll try to use syntax</span> <span data-start="276.6" data-end="278.49">such as arrow functions async/await</span> <span data-start="278.49" data-end="282.36">and so on it will work but we all know</span> <span data-start="282.36" data-end="284.85">that unfortunately there are internet</span> <span data-start="284.85" data-end="287.37">explorer 11 out there okay users that</span> <span data-start="287.37" data-end="290.46">use this old browser and we need to</span> <span data-start="290.46" data-end="292.86">enable backward compatibility because we</span> <span data-start="292.86" data-end="294.63">don't know what type of browser what</span> <span data-start="294.63" data-end="296.01">version of the browser the user is gonna</span> <span data-start="296.01" data-end="298.53">run therefore we need to ensure that we</span> <span data-start="298.53" data-end="299.82">use the least amount of features</span> <span data-start="299.82" data-end="303.74">possible when it comes to Eggman script</span> <span data-start="303.74" data-end="308.7">also when someone suggests a new feature</span> <span data-start="308.7" data-end="311.43">for the set of specifications for Eggman</span> <span data-start="311.43" data-end="313.65">script it takes time before it actually</span> <span data-start="313.65" data-end="316.91">gets accepted into the language because</span> <span data-start="316.91" data-end="319.16">the Committee needs to look at it</span> <span data-start="319.16" data-end="322.289">afterwards the community needs to also</span> <span data-start="322.289" data-end="324.03">see how it fits within the echo system</span> <span data-start="324.03" data-end="328.11">it needs to go through stages 0 1 2 3</span> <span data-start="328.11" data-end="332.4">and then all the browser's need they</span> <span data-start="332.4" data-end="334.65">need to implement that natively within</span> </p>
<p><span data-start="334.65" data-end="336.69">C++ and they all need to be aligned with</span> <span data-start="336.69" data-end="339.38">one another this process takes time</span> <span data-start="339.38" data-end="342.389">using an external compiler this is</span> <span data-start="342.389" data-end="345.21">relatively easy to just plug in another</span> <span data-start="345.21" data-end="347.46">feature and then basically there's a</span> <span data-start="347.46" data-end="349.38">layer on top which is common for all</span> <span data-start="349.38" data-end="352.68">browsers so it's very easy especially in</span> <span data-start="352.68" data-end="354.45">the case of Babel where the compiler is</span> <span data-start="354.45" data-end="356.52">written in a high-level languages such</span> <span data-start="356.52" data-end="358.77">as JavaScript and we also have the</span> <span data-start="358.77" data-end="360.75">opportunity to test the new feature and</span> <span data-start="360.75" data-end="364.8">see if it actually fits one final reason</span> <span data-start="364.8" data-end="369.21">is that we can use costume syntax also</span> <span data-start="369.21" data-end="372.15">known as language extensions such as</span> <span data-start="372.15" data-end="375.78">typescript where we basically have type</span> <span data-start="375.78" data-end="378.51">safety okay and we can see if the code</span> <span data-start="378.51" data-end="381.66">actually behaves the way we want or we</span> <span data-start="381.66" data-end="382.77">can use JSX</span> <span data-start="382.77" data-end="385.2">which is used vastly to write react</span> <span data-start="385.2" data-end="388.13">applications in a better way so</span> <span data-start="388.13" data-end="390.33">obviously there are advantages to the</span> <span data-start="390.33" data-end="398.43">compilers wait okay so there aren't</span> <span data-start="398.43" data-end="400.319">gonna be many slides the</span> <span data-start="400.319" data-end="401.789">there's gonna be this slide and another</span> <span data-start="401.789" data-end="403.08">one and that's it it's mostly gonna be</span> <span data-start="403.08" data-end="405.569">demonstration I hope I can get it right</span> <span data-start="405.569" data-end="407.789">because I'm not used to this setup like</span> <span data-start="407.789" data-end="409.83">they said this is like I mean I'm used</span> <span data-start="409.83" data-end="412.139">to Linux and this is like another world</span> <span data-start="412.139" data-end="416.94">for me anyways what are the stages of</span> <span data-start="416.94" data-end="420">the compilation everything that I'm</span> <span data-start="420" data-end="423.599">gonna mention it's um it is true for all</span> </p>
<p><span data-start="423.599" data-end="426">IOT compilers I believe although I want</span> <span data-start="426" data-end="428.789">to be more specific to Babel because</span> <span data-start="428.789" data-end="431.55">it's very popular within the ecosystem</span> <span data-start="431.55" data-end="434.28">it's also very easy to write plugins</span> <span data-start="434.28" data-end="437.789">into Babel but yeah everything is true</span> <span data-start="437.789" data-end="441.09">for all a ot compilers out there so</span> <span data-start="441.09" data-end="444.75">first stage first of all we take as an</span> <span data-start="444.75" data-end="447.59">input a code string and then we parse it</span> <span data-start="447.59" data-end="450.03">parsing what it means is that we put it</span> <span data-start="450.03" data-end="453.18">into a JSON ok this JSON is basically a</span> <span data-start="453.18" data-end="455.61">tree and the tree is made out of nodes</span> <span data-start="455.61" data-end="458.219">each and every node with that in that</span> <span data-start="458.219" data-end="461.58">tree represent a different feature</span> <span data-start="461.58" data-end="463.969">within the syntax this tree is called</span> <span data-start="463.969" data-end="466.919">ast abstract syntax tree because it</span> <span data-start="466.919" data-end="471.63">represents the syntax now comes the</span> <span data-start="471.63" data-end="475.199">second stage once we have the AST we</span> <span data-start="475.199" data-end="478.229">take it as an input and we generate code</span> <span data-start="478.229" data-end="482.099">out of it in a different format ok it's</span> <span data-start="482.099" data-end="483.96">very easy to do so we basically take a</span> <span data-start="483.96" data-end="486.36">specific node and then we generate the</span> <span data-start="486.36" data-end="488.58">magic code string to that specific node</span> <span data-start="488.58" data-end="490.83">in the case of Babel it's it's slightly</span> <span data-start="490.83" data-end="493.68">different but because Babel is it's not</span> <span data-start="493.68" data-end="495.659">exactly a compiler but it works exactly</span> <span data-start="495.659" data-end="496.919">the same way it's more like a</span> <span data-start="496.919" data-end="499.86">transformer so even though you take an</span> <span data-start="499.86" data-end="502.229">ast the generated code should be exactly</span> <span data-start="502.229" data-end="505.199">the same now I put a lot of information</span> <span data-start="505.199" data-end="508.56">out there and stuff like that the best</span> <span data-start="508.56" data-end="510.33">way to explain something is by</span> <span data-start="510.33" data-end="512.13">demonstrating so this is exactly what</span> </p>
<p><span data-start="512.13" data-end="516.55">I'm gonna do now so Lance</span> <span data-start="516.56" data-end="520.56">ok so let's focus on the ASD first how</span> <span data-start="520.56" data-end="523.349">does it the ASD looks like exactly so</span> <span data-start="523.349" data-end="524.61">there's a website out there it's called</span> <span data-start="524.61" data-end="530.63">a is the Explorer this one</span> <span data-start="530.63" data-end="536.87">and let's okay</span> <span data-start="536.87" data-end="541.5">and we have two windows in here okay in</span> <span data-start="541.5" data-end="544.11">the left window what we have is the text</span> <span data-start="544.11" data-end="546.9">editor where we can type code in the</span> <span data-start="546.9" data-end="549.72">right we have an object the Java sweet</span> <span data-start="549.72" data-end="552.48">object as I said the ast that represents</span> <span data-start="552.48" data-end="557.34">the code so what happens if I type just</span> <span data-start="557.34" data-end="559.59">a very generic code nothing special</span> <span data-start="559.59" data-end="566.28">about it so we see on the right that the</span> <span data-start="566.28" data-end="569.34">view got updated okay and on the right</span> <span data-start="569.34" data-end="571.92">this actually this is the ASD that</span> <span data-start="571.92" data-end="575.22">represents the code now what's nice</span> <span data-start="575.22" data-end="577.71">about this tool is not is that not only</span> <span data-start="577.71" data-end="581.43">it shows us the ast but it's very easy</span> <span data-start="581.43" data-end="583.92">to highlight the code and match it with</span> <span data-start="583.92" data-end="587.46">a correlated node so let's highlight</span> <span data-start="587.46" data-end="592.47">something on the left ok wait it doesn't</span> <span data-start="592.47" data-end="596.52">use the right parser okay I also explain</span> <span data-start="596.52" data-end="600.54">what it is so once I highlight something</span> <span data-start="600.54" data-end="603.54">on the left it will also be highlighted</span> <span data-start="603.54" data-end="606.9">on the right and vice versa if I hover</span> <span data-start="606.9" data-end="609.66">over a specific node type it will be</span> <span data-start="609.66" data-end="613.32">highlighted on the left so it's very</span> <span data-start="613.32" data-end="615.81">easy to see what represents the code and</span> <span data-start="615.81" data-end="617.94">if we'll take a specific node as an</span> <span data-start="617.94" data-end="620.88">example let's highlight number one over</span> <span data-start="620.88" data-end="623.88">there and we'll look at the node we'll</span> <span data-start="623.88" data-end="627.12">see that the type name actually matches</span> <span data-start="627.12" data-end="629.31">the description okay this is called a</span> <span data-start="629.31" data-end="631.53">numeric literal because literally this</span> <span data-start="631.53" data-end="637.08">is a number with the value 1 so this is</span> <span data-start="637.08" data-end="639.66">basically an ast and you see their nodes</span> <span data-start="639.66" data-end="641.37">which are nested with with one another</span> <span data-start="641.37" data-end="645.84">and it all starts from the root so this</span> <span data-start="645.84" data-end="649.65">principle is true for all syntax and</span> <span data-start="649.65" data-end="654.12">languages and a tree doesn't need to</span> <span data-start="654.12" data-end="655.86">look a certain way they can there can be</span> <span data-start="655.86" data-end="658.92">many parsers so baby launch seven is</span> <span data-start="658.92" data-end="662.52">what Babel used to use under the hood</span> <span data-start="662.52" data-end="664.08">now they read</span> <span data-start="664.08" data-end="666.18">they made it part of maples mono repo</span> <span data-start="666.18" data-end="668.04">and it they call it just Babel parser</span> <span data-start="668.04" data-end="670.5">but there are other parsers such as a</span> <span data-start="670.5" data-end="671.69">corn esprima</span> <span data-start="671.69" data-end="676.23">which played a very important role in in</span> <span data-start="676.23" data-end="678.74">when it comes to parsers in JavaScript</span> <span data-start="678.74" data-end="682.56">flow and typescript in utterly</span> </p>
<p><span data-start="682.56" data-end="684.51">JavaScript there can be many languages</span> <span data-start="684.51" data-end="687.06">there can be CSS graph QL HTML</span> <span data-start="687.06" data-end="689.61">handlebars services these principles</span> <span data-start="689.61" data-end="694.519">apply to all syntax and languages okay</span> <span data-start="694.519" data-end="700.8">now how exactly does it look within a</span> <span data-start="700.8" data-end="702.81">node.js application how exactly do I</span> <span data-start="702.81" data-end="706.82">take code and parse it into an AST so</span> <span data-start="706.82" data-end="708.99">because I'm here right now I can just</span> <span data-start="708.99" data-end="710.82">say anything and you would believe me</span> <span data-start="710.82" data-end="713.07">but I don't want that okay everything</span> <span data-start="713.07" data-end="715.079">that I say I want to back it up with</span> <span data-start="715.079" data-end="719.31">proofs so for that we will go to Babel</span> <span data-start="719.31" data-end="731.85">documentation website okay okay and in</span> <span data-start="731.85" data-end="734.37">the search bar there's a library called</span> </p>
<p><span data-start="734.37" data-end="738.99">Babel parser I hope you can see that</span> <span data-start="738.99" data-end="742.77">yeah and the API is fairly simple we</span> <span data-start="742.77" data-end="746.16">just import the parse function and we</span> <span data-start="746.16" data-end="748.56">provide it with a code string and the</span> <span data-start="748.56" data-end="751.11">output should be an ast now it accepts</span> <span data-start="751.11" data-end="753.6">all different kind of options but there</span> <span data-start="753.6" data-end="756.029">there is I don't want to go through it</span> <span data-start="756.029" data-end="757.47">because I want to keep things simple but</span> <span data-start="757.47" data-end="760.56">however there is a specific option that</span> <span data-start="760.56" data-end="761.76">would like to focus on this is the</span> <span data-start="761.76" data-end="768.74">plugins option by default it will parse</span> <span data-start="768.74" data-end="773.209">only a limited set of features of nodes</span> <span data-start="773.209" data-end="777.12">but there are different nodes which are</span> <span data-start="777.12" data-end="780.06">not officially part of ACMA script nodes</span> <span data-start="780.06" data-end="784.17">which are in stage 0 1 2 or 3 so they</span> <span data-start="784.17" data-end="786.3">won't be parsed by default and for that</span> <span data-start="786.3" data-end="789.62">we need to say to the 3d parser</span> <span data-start="789.62" data-end="792.26">explicitly that it needs to parse them</span> <span data-start="792.26" data-end="794.1">so features that you're probably</span> <span data-start="794.1" data-end="796.68">familiar with such as a single radar big</span> <span data-start="796.68" data-end="798.18">in that we just stopped</span> <span data-start="798.18" data-end="800.13">class property is quite private class</span> <span data-start="800.13" data-end="801.899">properties and things that are quite</span> <span data-start="801.899" data-end="805.44">frankly not even familiar with and we</span> <span data-start="805.44" data-end="808.98">can also tell the parser to support no</span> <span data-start="808.98" data-end="811.44">types of language extensions okay so</span> <span data-start="811.44" data-end="813.42">like I mentioned earlier there are some</span> <span data-start="813.42" data-end="814.74">features which are not part of any</span> <span data-start="814.74" data-end="818.66">specification such as flow JSX</span> <span data-start="818.66" data-end="821.97">so under the hood this is how it happens</span> </p>
<p><span data-start="821.97" data-end="823.8">Babel officially supports it and also</span> <span data-start="823.8" data-end="826.649">typescript that's interesting this is</span> <span data-start="826.649" data-end="829.29">not what typescript uses typescript has</span> <span data-start="829.29" data-end="831.509">a dedicated parser and compiler</span> <span data-start="831.509" data-end="834.36">although babel also supports parsing</span> <span data-start="834.36" data-end="836.31">types with limited features of of it</span> <span data-start="836.31" data-end="841.11">it's still nice to have so now let's see</span> <span data-start="841.11" data-end="849.34">a demonstration in a node.js application</span> <span data-start="849.35" data-end="852.74">yeah so this is a very simple program</span> <span data-start="852.74" data-end="855.42">what I have here I import the parse</span> <span data-start="855.42" data-end="860.16">function and then I provide it with a</span> <span data-start="860.16" data-end="864.209">code string and then I parse it and the</span> <span data-start="864.209" data-end="866.459">output is an AST and what I do I print</span> <span data-start="866.459" data-end="868.439">to the console a string if I'd version</span> <span data-start="868.439" data-end="871.17">of the ast and the expected output</span> <span data-start="871.17" data-end="873.54">should simply be an ast now I'll run the</span> <span data-start="873.54" data-end="877.319">program right again this is an</span> <span data-start="877.319" data-end="884.36">environment I'm not really used to okay</span> <span data-start="884.36" data-end="888.18">so the output is is an ast this is just</span> <span data-start="888.18" data-end="891.18">a JSON JSON that is described describes</span> <span data-start="891.18" data-end="892.649">the code I'm not going to go through it</span> <span data-start="892.649" data-end="894.6">because this is very boring but I think</span> <span data-start="894.6" data-end="897.449">we got the principle once we saw because</span> <span data-start="897.449" data-end="900.75">of what we saw in is DX for now the</span> <span data-start="900.75" data-end="904.86">second stage once we have an ast we put</span> <span data-start="904.86" data-end="907.86">it back into code this stage is called</span> <span data-start="907.86" data-end="911.49">generating so I'll go to babbles</span> <span data-start="911.49" data-end="914.279">documentation website again and we will</span> <span data-start="914.279" data-end="921.269">look at the library called generator so</span> <span data-start="921.269" data-end="924">again very simple API we simply accept</span> <span data-start="924" data-end="927.3">an ast as the first argument the output</span> <span data-start="927.3" data-end="930.809">should be code and again I would like to</span> <span data-start="930.809" data-end="931.74">demonstrate that</span> <span data-start="931.74" data-end="941.84">quickly</span> <span data-start="941.85" data-end="947.04">okay good so in addition to what I did</span> <span data-start="947.04" data-end="950.67">earlier now I have the generate function</span> <span data-start="950.67" data-end="954.63">and once I import it I provided with the</span> <span data-start="954.63" data-end="956.88">generated ast and I print it to the</span> <span data-start="956.88" data-end="960.06">console and the output should be exactly</span> <span data-start="960.06" data-end="965.86">the same and let's run the program again</span> <span data-start="965.87" data-end="969.12">you see this is it's not exactly the</span> <span data-start="969.12" data-end="972">same it's slightly different because</span> <span data-start="972" data-end="973.26">there are semicolons white are</span> <span data-start="973.26" data-end="974.97">semicolons because the ast doesn't</span> <span data-start="974.97" data-end="975.99">contain information about these</span> <span data-start="975.99" data-end="979.05">semicolons it simply puts the code back</span> <span data-start="979.05" data-end="987.75">in the way it can and now I want to go</span> <span data-start="987.75" data-end="991.68">back to the slides by the way you see</span> <span data-start="991.68" data-end="993.48">that the output is exactly similar to</span> <span data-start="993.48" data-end="995.28">the input now when we look at the</span> <span data-start="995.28" data-end="998.04">traditional compiler the input and the</span> <span data-start="998.04" data-end="1000.41">output should be different okay when it</span> <span data-start="1000.41" data-end="1002.33">when you look at C++ for example because</span> <span data-start="1002.33" data-end="1003.95">the output is in native machine code but</span> </p>
<p><span data-start="1003.95" data-end="1007.16">Babel is not exactly a compiler it's</span> <span data-start="1007.16" data-end="1009.89">like a transformer or a transpiler and</span> <span data-start="1009.89" data-end="1014.99">it works in a slightly different way but</span> <span data-start="1014.99" data-end="1016.85">soon I'll talk about it and we'll see</span> <span data-start="1016.85" data-end="1022.46">how from yes next it goes to es5 so back</span> <span data-start="1022.46" data-end="1025.52">to the slides i would like to add</span> <span data-start="1025.52" data-end="1030.68">another optional stage it comes between</span> <span data-start="1030.68" data-end="1032.53">stage 1 and stage 2</span> <span data-start="1032.53" data-end="1036.05">okay so stage 2 becomes stage 3 and why</span> <span data-start="1036.05" data-end="1038.18">this is like I do it like that this is</span> <span data-start="1038.18" data-end="1041.98">an optional stage because most compilers</span> <span data-start="1041.98" data-end="1044.42">sorry a compiler doesn't necessarily</span> <span data-start="1044.42" data-end="1046.67">need to have that stage in order to work</span> <span data-start="1046.67" data-end="1050">properly but this is a very powerful</span> <span data-start="1050" data-end="1053.69">stage because using that stage we can</span> <span data-start="1053.69" data-end="1057.05">actually apply pre-processing to the</span> <span data-start="1057.05" data-end="1059.75">code and run optimizations before we</span> <span data-start="1059.75" data-end="1062.38">actually address the interpreter and</span> <span data-start="1062.38" data-end="1064.94">this is by far the most complex stage</span> <span data-start="1064.94" data-end="1066.98">because this is API specific there's a</span> <span data-start="1066.98" data-end="1069.26">lot a lot of things to know about the</span> </p>
<p><span data-start="1069.26" data-end="1074.09">API and we'll soon see why so going back</span> <span data-start="1074.09" data-end="1076.8">to the code</span> <span data-start="1076.81" data-end="1078.83">now let's say that I would like to</span> <span data-start="1078.83" data-end="1081.86">transform the code with traditional</span> <span data-start="1081.86" data-end="1084.47">methods using only regular expression</span> <span data-start="1084.47" data-end="1088.4">this would be very complicated because a</span> <span data-start="1088.4" data-end="1092.69">code can have scopes and maybe there's a</span> <span data-start="1092.69" data-end="1094.55">a piece of code which is wrapped with</span> <span data-start="1094.55" data-end="1096.62">brackets or something like that which</span> <span data-start="1096.62" data-end="1099.92">makes the the transformation irrelevant</span> <span data-start="1099.92" data-end="1103.58">this is why we have the ASD the ASD</span> <span data-start="1103.58" data-end="1106.46">makes it easy on us to transform the</span> <span data-start="1106.46" data-end="1110.56">code so let's say that I would like</span> <span data-start="1110.56" data-end="1115.37">through transformation to change Const C</span> <span data-start="1115.37" data-end="1121.3">into Const B so how do I do that</span> <span data-start="1121.3" data-end="1125.48">what do I need to do is to address the</span> <span data-start="1125.48" data-end="1128.72">right node with the right property and</span> <span data-start="1128.72" data-end="1132.05">then change its value and once we put it</span> <span data-start="1132.05" data-end="1135.29">back into a code stream because the code</span> <span data-start="1135.29" data-end="1136.79">string the new code string is derived</span> <span data-start="1136.79" data-end="1139.91">from the ast then we should have a</span> <span data-start="1139.91" data-end="1145.49">transformed code so we copy that and we</span> <span data-start="1145.49" data-end="1147.53">go to ast export this is how I actually</span> <span data-start="1147.53" data-end="1149.51">work when I write Babel plugins oh I</span> <span data-start="1149.51" data-end="1156.83">want to transform code and I paste it ok</span> <span data-start="1156.83" data-end="1159.95">and then we see that it got updated on</span> <span data-start="1159.95" data-end="1164.63">the right now what I do I highlight the</span> <span data-start="1164.63" data-end="1167.56">code that I would like to transform and</span> <span data-start="1167.56" data-end="1170.36">then the corresponding node is being</span> <span data-start="1170.36" data-end="1174.83">highlighted on the right now what I do I</span> <span data-start="1174.83" data-end="1176.84">need to look for the path that</span> <span data-start="1176.84" data-end="1178.43">represents the node so I start from the</span> <span data-start="1178.43" data-end="1182">root and I try I write down the path so</span> <span data-start="1182" data-end="1184.96">it goes to program body position 0</span> <span data-start="1184.96" data-end="1189.29">declarations position 0 ID name let's</span> <span data-start="1189.29" data-end="1191.39">say that I wrote everything down in the</span> <span data-start="1191.39" data-end="1199.51">text editor and I have it right here</span> <span data-start="1199.52" data-end="1205.85">yes yeah so I changed the ASD I changed</span> <span data-start="1205.85" data-end="1207.89">the value C to B and therefore once I</span> <span data-start="1207.89" data-end="1210.2">put it back into code the expected</span> <span data-start="1210.2" data-end="1217.57">output should be the following you see</span> <span data-start="1217.57" data-end="1222.41">so I changed the code now there's a</span> <span data-start="1222.41" data-end="1225.11">problem with that approach because what</span> </p>
<p><span data-start="1225.11" data-end="1228.23">I did right now is to specific I want to</span> <span data-start="1228.23" data-end="1230.12">have like some sort of a generic pattern</span> <span data-start="1230.12" data-end="1233.15">that I can apply and it will be true for</span> <span data-start="1233.15" data-end="1235.66">any code string that I get as an input</span> <span data-start="1235.66" data-end="1237.98">something like regular expression okay</span> <span data-start="1237.98" data-end="1242.27">because a code can wear many shapes and</span> <span data-start="1242.27" data-end="1242.84">forms</span> <span data-start="1242.84" data-end="1246.44">this is way too specific so there's a</span> <span data-start="1246.44" data-end="1249.23">problem with that approach many</span> <span data-start="1249.23" data-end="1251.9">compilers they implement a mechanism and</span> <span data-start="1251.9" data-end="1254.35">they provided provide us with an API</span> <span data-start="1254.35" data-end="1259.52">which lets us transform the code in a</span> <span data-start="1259.52" data-end="1266.53">more generic way okay so using that API</span> <span data-start="1266.53" data-end="1269.96">what we do we basically walk through the</span> <span data-start="1269.96" data-end="1272.36">ast through each and every node in the</span> <span data-start="1272.36" data-end="1274.25">ast you can call it walk or run or</span> <span data-start="1274.25" data-end="1276.11">traverse essentially these verbs they</span> <span data-start="1276.11" data-end="1278.96">all represent the same thing and then we</span> <span data-start="1278.96" data-end="1281.72">apply transformation callbacks for each</span> <span data-start="1281.72" data-end="1284.24">and every node individually so if we</span> <span data-start="1284.24" data-end="1286.43">look at the ASD and we'll try to</span> <span data-start="1286.43" data-end="1288.98">demonstrate it what it does it goes — it</span> <span data-start="1288.98" data-end="1291.83">starts with the root it goes through the</span> <span data-start="1291.83" data-end="1294.98">the the root node it goes deeper to</span> <span data-start="1294.98" data-end="1297.77">program variable declaration and then</span> <span data-start="1297.77" data-end="1299.9">once it sees a transformation callback</span> <span data-start="1299.9" data-end="1301.61">then it goes to the callback applies the</span> <span data-start="1301.61" data-end="1303.53">logic and then it keeps walking through</span> <span data-start="1303.53" data-end="1307.49">the tree if we look at babel labels</span> <span data-start="1307.49" data-end="1310.64">documentation website there's a library</span> <span data-start="1310.64" data-end="1317.379">called babel Traverse</span> <span data-start="1317.389" data-end="1320.169">and Traverse does exactly what I said</span> <span data-start="1320.169" data-end="1323.779">it's the first argument it accepts an</span> </p>
<p><span data-start="1323.779" data-end="1327.559">ASD as the second argument it accepts an</span> <span data-start="1327.559" data-end="1330.139">object which is called a visitor because</span> <span data-start="1330.139" data-end="1333.589">this object visits the ASD as we walk</span> <span data-start="1333.589" data-end="1336.95">through it and this object contains</span> <span data-start="1336.95" data-end="1340.309">callbacks the names of the callbacks</span> <span data-start="1340.309" data-end="1344.239">represents the nodes that is it is going</span> <span data-start="1344.239" data-end="1347.779">to transform and as the first argument</span> <span data-start="1347.779" data-end="1350.299">it accepts an object that contains the</span> <span data-start="1350.299" data-end="1353.899">node and then we can actually do all our</span> <span data-start="1353.899" data-end="1356.299">changes on the node that we would like</span> <span data-start="1356.299" data-end="1357.679">to transform and we can also apply</span> <span data-start="1357.679" data-end="1361.159">conditions and logic to it it also</span> <span data-start="1361.159" data-end="1363.259">accepts more arguments I don't want to</span> <span data-start="1363.259" data-end="1364.639">get into that because I want to keep</span> <span data-start="1364.639" data-end="1367.039">things very simple once you understand</span> <span data-start="1367.039" data-end="1369.979">the core it's very easy to get deeper</span> <span data-start="1369.979" data-end="1372.32">and and investigate more about the</span> <span data-start="1372.32" data-end="1376.459">subject so let me show you another</span> <span data-start="1376.459" data-end="1388.43">demonstration of that</span> <span data-start="1388.44" data-end="1392.59">so in addition to what I had earlier now</span> </p>
<p><span data-start="1392.59" data-end="1395.29">I use the Traverse function to traverse</span> <span data-start="1395.29" data-end="1399.07">to the ast and I apply transformation</span> <span data-start="1399.07" data-end="1404.14">callbacks so if I have that input what I</span> <span data-start="1404.14" data-end="1411.82">would like to have whoop the expected</span> <span data-start="1411.82" data-end="1414.25">output should be something like that so</span> <span data-start="1414.25" data-end="1417.28">let's say that I change all the variable</span> <span data-start="1417.28" data-end="1420.18">assignments from whatever this is to be</span> <span data-start="1420.18" data-end="1424.78">everything should be B and the values</span> <span data-start="1424.78" data-end="1431.23">should all change to two an FN should</span> <span data-start="1431.23" data-end="1434.23">change to F and two so this is the</span> <span data-start="1434.23" data-end="1439.41">expected output so how do I do that I</span> <span data-start="1439.41" data-end="1443.71">use the right callback names with the</span> <span data-start="1443.71" data-end="1447.1">right visitor and then I change the</span> <span data-start="1447.1" data-end="1449.88">corresponding nodes again how do I know</span> <span data-start="1449.88" data-end="1452.5">how does the API looks like and what</span> <span data-start="1452.5" data-end="1453.58">notes to address</span> </p>
<p><span data-start="1453.58" data-end="1459.51">I go to ASD Explorer and then I</span> <span data-start="1459.51" data-end="1463.66">highlight the code the the parts of the</span> <span data-start="1463.66" data-end="1464.98">code that I would actually like to</span> <span data-start="1464.98" data-end="1466.87">transform and then I look at the node I</span> <span data-start="1466.87" data-end="1470.05">see what is the name of the node and I</span> <span data-start="1470.05" data-end="1471.73">see how the signature of the nodes of</span> <span data-start="1471.73" data-end="1474.25">the node looks like and this is how I</span> <span data-start="1474.25" data-end="1480.91">know how the API looks like now if I</span> <span data-start="1480.91" data-end="1484.26">will run the code the output should be</span> <span data-start="1484.26" data-end="1494.74">what I just wrote over there</span> <span data-start="1494.75" data-end="1499.05">you see and just to prove it to you that</span> <span data-start="1499.05" data-end="1501.03">this is a general pattern and it's not</span> <span data-start="1501.03" data-end="1503.61">just specific to that code I can add</span> <span data-start="1503.61" data-end="1506.21">another variable assignment over here</span> <span data-start="1506.21" data-end="1510.21">and this should change to be equals to</span> <span data-start="1510.21" data-end="1525.6">as well right this is nice now this is</span> <span data-start="1525.6" data-end="1530.55">how we transform code so the visitor</span> <span data-start="1530.55" data-end="1534.45">over here this is what a Babel plugin is</span> <span data-start="1534.45" data-end="1536.85">all about a plug-in is just a visitor</span> <span data-start="1536.85" data-end="1539.4">okay Babel wanted to make it easy on us</span> <span data-start="1539.4" data-end="1542.76">and they wanted to give us a way to</span> <span data-start="1542.76" data-end="1546.48">implement custom features using plugins</span> <span data-start="1546.48" data-end="1548.97">and so in order to do that what we need</span> <span data-start="1548.97" data-end="1551.36">to do is simply to write a visitor and</span> <span data-start="1551.36" data-end="1554.01">what we do we specify it in the Babel</span> <span data-start="1554.01" data-end="1556.26">r/c then it looks for the the right name</span> <span data-start="1556.26" data-end="1558.09">in the non modules and then it applies</span> <span data-start="1558.09" data-end="1560.91">the visitor once it walks to the ast</span> <span data-start="1560.91" data-end="1564.24">before it actually compiles it now let's</span> <span data-start="1564.24" data-end="1571.14">see an example plug-in so what I have</span> <span data-start="1571.14" data-end="1574.26">here is a program which the input is</span> <span data-start="1574.26" data-end="1576.15">exactly the same as we had earlier and</span> <span data-start="1576.15" data-end="1578.04">the plug-in is exactly what we had</span> <span data-start="1578.04" data-end="1580.05">earlier again a plug-in is a visitor it</span> <span data-start="1580.05" data-end="1582.18">accepts more options that will make it</span> <span data-start="1582.18" data-end="1585.72">easy on us to transform the code but</span> <span data-start="1585.72" data-end="1587.54">again I want to keep things very simple</span> <span data-start="1587.54" data-end="1590.76">because the visitor is the same and the</span> <span data-start="1590.76" data-end="1593.13">input is the same therefore the output</span> <span data-start="1593.13" data-end="1595.89">should be exactly the same as well so</span> </p>
<p><span data-start="1595.89" data-end="1603.67">I'm going to run the program again and</span> <span data-start="1603.68" data-end="1611.07">the output is exactly the same now how</span> <span data-start="1611.07" data-end="1616.85">exactly from that do we reach yes five</span> <span data-start="1616.85" data-end="1619.23">okay because so far it just it looks</span> <span data-start="1619.23" data-end="1626.61">like it remains to be is next so</span> <span data-start="1626.61" data-end="1631.2">yes five is simply a set of plugins that</span> <span data-start="1631.2" data-end="1635.19">transforms the code in a way that it</span> <span data-start="1635.19" data-end="1639.419">will from east next it will turn into es</span> <span data-start="1639.419" data-end="1642.72">five a set of plugins is also called a</span> <span data-start="1642.72" data-end="1645.659">preset this is what a preset is a preset</span> <span data-start="1645.659" data-end="1651.09">is simply a set of plugins so in order</span> <span data-start="1651.09" data-end="1655.44">to transform to es 5 what we do we load</span> <span data-start="1655.44" data-end="1659.279">a set of plugins using the Babel E&V</span> <span data-start="1659.279" data-end="1664.32">preset the env env preset what it does</span> <span data-start="1664.32" data-end="1666.779">it applies plugins based on the</span> <span data-start="1666.779" data-end="1668.429">environment that we would like to</span> <span data-start="1668.429" data-end="1670.76">transform to okay how does it know that</span> <span data-start="1670.76" data-end="1676.309">based on what's written on package.json</span> <span data-start="1676.309" data-end="1679.97">now I'm gonna apply this plug-in and</span> <span data-start="1679.97" data-end="1682.11">you'll see that we'll be transformed to</span> <span data-start="1682.11" data-end="1688.289">years five and let's make the input a</span> <span data-start="1688.289" data-end="1700.32">little bit more yes next</span> <span data-start="1700.33" data-end="1711.049">and we'll run the demo again and the</span> <span data-start="1711.049" data-end="1714.859">output is the s5 as you can see does so</span> <span data-start="1714.859" data-end="1717.229">this is how Babel works okay this is how</span> <span data-start="1717.229" data-end="1720.47">it works now what's the point of it okay</span> <span data-start="1720.47" data-end="1723.83">why is it such a powerful tool because</span> <span data-start="1723.83" data-end="1725.179">using that knowledge you can write</span> <span data-start="1725.179" data-end="1727.97">plugins yourself and enhance the user</span> <span data-start="1727.97" data-end="1731.57">experience as a programmer so I'll give</span> <span data-start="1731.57" data-end="1734.019">you example plugins that I wrote myself</span> <span data-start="1734.019" data-end="1736.549">you don't necessarily have to agree with</span> <span data-start="1736.549" data-end="1738.409">what they do maybe you don't like their</span> <span data-start="1738.409" data-end="1740.45">functionality but again just understand</span> <span data-start="1740.45" data-end="1742.249">the power behind that sort of</span> <span data-start="1742.249" data-end="1746.58">information</span> <span data-start="1746.59" data-end="1750.32">okay so first plug-in is a plug-in for</span> <span data-start="1750.32" data-end="1753.019">if you're familiar with the new react</span> <span data-start="1753.019" data-end="1757.389">hooks API in what I do I transform data</span> <span data-start="1757.389" data-end="1760.22">okay and the problem is that once I</span> <span data-start="1760.22" data-end="1761.989">enter the rendering phase each and every</span> <span data-start="1761.989" data-end="1765.639">time I would need to apply that logic or</span> <span data-start="1765.639" data-end="1769.7">here if I have anonymous call back each</span> <span data-start="1769.7" data-end="1772.009">time and enter the rendering phase I</span> <span data-start="1772.009" data-end="1773.539">would need to initialize that callback</span> <span data-start="1773.539" data-end="1776.419">so what I need to do is to cache the</span> <span data-start="1776.419" data-end="1779.599">result using your use call back or use</span> <span data-start="1779.599" data-end="1783.169">me-mow so with that plug-in you can</span> <span data-start="1783.169" data-end="1787.099">automatically apply use mimo with the</span> <span data-start="1787.099" data-end="1789.08">right arguments you just type it</span> <span data-start="1789.08" data-end="1792.109">normally as you would and then it</span> <span data-start="1792.109" data-end="1793.909">optimizes the code for you ahead of time</span> <span data-start="1793.909" data-end="1797.389">or it also does things like creating</span> <span data-start="1797.389" data-end="1801.349">anonymous components where it caches the</span> <span data-start="1801.349" data-end="1804.049">callback results and you don't need to</span> <span data-start="1804.049" data-end="1806.899">put used callback and therefore save</span> <span data-start="1806.899" data-end="1811.489">some errors second and final plug-in</span> <span data-start="1811.489" data-end="1812.749">that I wrote something for style</span> <span data-start="1812.749" data-end="1814.94">components rather than creating a</span> <span data-start="1814.94" data-end="1817.34">dedicated component per each component</span> <span data-start="1817.34" data-end="1819.47">that you would like to encapsulate its</span> <span data-start="1819.47" data-end="1824.09">style you can use the single stylesheet</span> <span data-start="1824.09" data-end="1827.149">component and use underscore to</span> <span data-start="1827.149" data-end="1830.32">encapsulate private class names</span> <span data-start="1830.32" data-end="1832">and what the plugin will do it will</span> <span data-start="1832" data-end="1834.639">prefix it automatically therefore</span> <span data-start="1834.639" data-end="1843.519">encapsulate the styles so that was</span> <span data-start="1843.519" data-end="1844.48">basically it</span> </p>
<p><span data-start="1844.48" data-end="1847.33">I hope you liked it there isn't much</span> <span data-start="1847.33" data-end="1849.029">information about it online</span> <span data-start="1849.029" data-end="1852.34">documentation is very very poor but I</span> <span data-start="1852.34" data-end="1854.769">did write few articles about it and I'm</span> <span data-start="1854.769" data-end="1856.71">also gonna upload a video about it and</span> <span data-start="1856.71" data-end="1860.799">also be sure to use se explore and babel</span> <span data-start="1860.799" data-end="1863.289">dogs if you have any further questions</span> <span data-start="1863.289" data-end="1866.2">feel free to address me later on in the</span> </p>
</section>