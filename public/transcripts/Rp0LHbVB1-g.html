<section>
<p><span data-start="10.79" data-end="14.519">good afternoon and welcome to making a</span> <span data-start="14.519" data-end="18.18">jack sexy if you get tired of listening</span> <span data-start="18.18" data-end="19.77">to me and just feel like being geeky you</span> <span data-start="19.77" data-end="21.66">can just go right to the source and just</span> <span data-start="21.66" data-end="24.12">skip ahead to the good parts adds up on</span> <span data-start="24.12" data-end="26.82">github if you'd like to read some</span> <span data-start="26.82" data-end="28.53">hastily scribe documentation you can</span> <span data-start="28.53" data-end="32.15">also check out my website sexy J s calm</span> <span data-start="32.15" data-end="34.8">but I have to warn you that it's it's</span> <span data-start="34.8" data-end="36.9">actually been deemed too risque for the</span> <span data-start="36.9" data-end="41.94">workplace by this guy who was very</span> <span data-start="41.94" data-end="46.02">direct in his opinion and it's</span> <span data-start="46.02" data-end="47.4">unfortunate because I think there's one</span> <span data-start="47.4" data-end="51.21">less user you know that I've reached but</span> <span data-start="51.21" data-end="54.329">if you think it's not safe for work but</span> <span data-start="54.329" data-end="56.79">you'd still like to try it I've created</span> <span data-start="56.79" data-end="59.43">another version for you I just passed</span> <span data-start="59.43" data-end="62.25">that along and you can have a netscape</span> <span data-start="62.25" data-end="66.78">navigator for experience but at least</span> <span data-start="66.78" data-end="71.94">it's compatible and compliant okay let</span> <span data-start="71.94" data-end="78.11">me just look through my notes here okay</span> <span data-start="78.11" data-end="81.24">yeah ah alright so some of you might</span> <span data-start="81.24" data-end="83.79">remember me from Jas humph oh wait this</span> <span data-start="83.79" data-end="87.42">is all I didn't realize I have to all</span> <span data-start="87.42" data-end="88.53">right well you can't see it but that's</span> <span data-start="88.53" data-end="92.1">my name down there um there you go i</span> <span data-start="92.1" data-end="93.92">wonder what else you've missed so far</span> <span data-start="93.92" data-end="99.24">yes i well yes that was me um so I had a</span> <span data-start="99.24" data-end="101.07">great time listening didn't speak</span> <span data-start="101.07" data-end="103.77">because I slept through it no I'm a UI</span> <span data-start="103.77" data-end="105.72">engineer for Major League Baseball a</span> <span data-start="105.72" data-end="108.06">long time JavaScript er long-form</span> <span data-start="108.06" data-end="111.27">improviser and all-around nice guy i'm</span> <span data-start="111.27" data-end="113.4">known as firth here and all around the</span> <span data-start="113.4" data-end="117.72">internets I've come to you today about</span> <span data-start="117.72" data-end="121.2">your data your never-ending lust your</span> <span data-start="121.2" data-end="123.659">insatiable taste for data and</span> <span data-start="123.659" data-end="126.659">asynchronous data and some sequential a</span> <span data-start="126.659" data-end="128.879">jack patterns that you can use for</span> <span data-start="128.879" data-end="131.069">loading and combining your data as well</span> <span data-start="131.069" data-end="132.84">as a little library rope called sexy</span> <span data-start="132.84" data-end="135.05">which makes it pretty</span> <span data-start="135.05" data-end="138.03">by a show of hands how many people here</span> <span data-start="138.03" data-end="139.71">have ever worked on an application that</span> <span data-start="139.71" data-end="144.99">uses Ajax and how many of you have built</span> <span data-start="144.99" data-end="147.56">a page that made more than one request</span> <span data-start="147.56" data-end="152.49">and how many of you have wanted the two</span> <span data-start="152.49" data-end="155.94">data data points to you know to you know</span> <span data-start="155.94" data-end="160.14">interact meaningfully okay anyone else</span> <span data-start="160.14" data-end="164.46">can leave this is about being able to</span> <span data-start="164.46" data-end="166.62">combine data from different points well</span> <span data-start="166.62" data-end="167.79">that's where the story starts and it</span> <span data-start="167.79" data-end="169.56">turns out that there's a little more to</span> <span data-start="169.56" data-end="174.87">sexy but we will wander down the garden</span> <span data-start="174.87" data-end="178.29">path in a moment you know so as we start</span> <span data-start="178.29" data-end="180.75">integrating more and more data sources</span> <span data-start="180.75" data-end="183">we want our code to you know be</span> <span data-start="183" data-end="186.39">maintainable logical for me I Major</span> </p>
<p><span data-start="186.39" data-end="188.01">League Baseball I just finished working</span> <span data-start="188.01" data-end="189.63">on the new scoreboard page which</span> <span data-start="189.63" data-end="191.91">requires about five different data loads</span> <span data-start="191.91" data-end="194.43">from different services so before</span> <span data-start="194.43" data-end="197.13">rendering every single thing I wanted to</span> <span data-start="197.13" data-end="199.74">unite the data beforehand but I didn't</span> <span data-start="199.74" data-end="203.31">want to wait you know for a chain series</span> <span data-start="203.31" data-end="205.23">of events I needed this to happen fast</span> <span data-start="205.23" data-end="208.37">and this is where the idea came from</span> <span data-start="208.37" data-end="211.74">sequential Ajax allows you to make</span> <span data-start="211.74" data-end="213.57">parallel requests and handle the</span> <span data-start="213.57" data-end="217.53">callbacks in sequence and sexy makes</span> <span data-start="217.53" data-end="222.87">sequential Ajax sexy so sequoias button</span> <span data-start="222.87" data-end="226.44">fell sequential Ajax just refers to any</span> </p>
<p><span data-start="226.44" data-end="228.93">Ajax pattern designed to handle multiple</span> <span data-start="228.93" data-end="231.54">requests while maintaining a proper</span> <span data-start="231.54" data-end="235.02">callback execution order the goals of</span> <span data-start="235.02" data-end="236.49">cilantro Ajax are basically to</span> <span data-start="236.49" data-end="237.66">facilitate the combination of</span> <span data-start="237.66" data-end="240.57">manipulation make it easy for you to put</span> <span data-start="240.57" data-end="242.64">these pieces a day together to find some</span> <span data-start="242.64" data-end="244.29">performance enhancement by using</span> <span data-start="244.29" data-end="247.92">parallel asynchronous requests to speed</span> <span data-start="247.92" data-end="250.56">the execution of the callbacks as data</span> <span data-start="250.56" data-end="252.69">comes back if all previous dependencies</span> <span data-start="252.69" data-end="255.03">are there go ahead and fire if they</span> <span data-start="255.03" data-end="257.37">haven't wait and when they get there</span> <span data-start="257.37" data-end="259.56">fire and I think it should be fun</span> <span data-start="259.56" data-end="261.72">because I think programming is a lot of</span> <span data-start="261.72" data-end="264.63">fun and I love JavaScript and I hate</span> <span data-start="264.63" data-end="266.37">when my code gets uncomfortable where I</span> <span data-start="266.37" data-end="267.43">feel like I'm really cool</span> <span data-start="267.43" data-end="271.05">doing something in so sexy has helped</span> <span data-start="271.05" data-end="273.639">helped make my job a lot easier and more</span> <span data-start="273.639" data-end="276.789">fun plus I get to respond to people on</span> </p>
<p><span data-start="276.789" data-end="279.55">Twitter as you saw before so it's</span> <span data-start="279.55" data-end="281.56">basically three types of sequential ajax</span> <span data-start="281.56" data-end="283.509">at least that I've you know discerned</span> <span data-start="283.509" data-end="286.18">there's cereal requests cereal response</span> <span data-start="286.18" data-end="288.669">which waits to send a request once it</span> <span data-start="288.669" data-end="290.44">receives the response from the previous</span> <span data-start="290.44" data-end="292.84">call there's parallel requests random</span> <span data-start="292.84" data-end="294.91">response where you send out the calls</span> <span data-start="294.91" data-end="296.889">all at the same time and then use some</span> <span data-start="296.889" data-end="298.12">sort of counter or other tracking</span> <span data-start="298.12" data-end="299.68">variables to determine when all your</span> <span data-start="299.68" data-end="301.96">date has arrived and then merge it in</span> <span data-start="301.96" data-end="304.72">some common call back and then parallel</span> <span data-start="304.72" data-end="306.94">requests your response which is what</span> <span data-start="306.94" data-end="309.729">sexy is which lets you fire everything</span> <span data-start="309.729" data-end="313.15">at once and then handle it in order no</span> <span data-start="313.15" data-end="316.389">matter what order they come back so in a</span> <span data-start="316.389" data-end="320.5">perfect world let's say we want to fire</span> <span data-start="320.5" data-end="323.62">off three requests the server goes out</span> <span data-start="323.62" data-end="325.72">does its thing those would be nice if</span> <span data-start="325.72" data-end="328.27">they spun to indicate movement but I</span> <span data-start="328.27" data-end="329.949">think you get the picture that this data</span> <span data-start="329.949" data-end="332.169">is going out and coming back it's really</span> <span data-start="332.169" data-end="335.11">nice when it comes back in order and it</span> <span data-start="335.11" data-end="337.9">can share data with itself but in a</span> <span data-start="337.9" data-end="342.699">world where time waits for no man or his</span> <span data-start="342.699" data-end="347.979">day job we fire at our three requests</span> <span data-start="347.979" data-end="351.25">again something happened at response a</span> <span data-start="351.25" data-end="353.979">it slowed down B gets there first well</span> <span data-start="353.979" data-end="355.99">those callbacks wait until they're</span> <span data-start="355.99" data-end="357.46">triggered by the event of the success of</span> <span data-start="357.46" data-end="362.77">a so let's look at some sequential ajax</span> <span data-start="362.77" data-end="365.32">anti-patterns maybe if you see something</span> <span data-start="365.32" data-end="366.699">familiar here you'll want to stick</span> <span data-start="366.699" data-end="370.479">around till the end here we are using</span> <span data-start="370.479" data-end="373.33">jquery if anyone's unfamiliar with</span> <span data-start="373.33" data-end="376.24">jquery i don't know look it up real</span> <span data-start="376.24" data-end="379.09">quick but yeah yeah actually yeah feel</span> <span data-start="379.09" data-end="382.78">free to just ask questions right now but</span> <span data-start="382.78" data-end="384.19">basically each one of these lines up</span> <span data-start="384.19" data-end="386.86">here is adjacent requests so you can see</span> <span data-start="386.86" data-end="388.12">in the top line we're requesting an</span> <span data-start="388.12" data-end="390.28">article in the second where requests in</span> <span data-start="390.28" data-end="391.63">the comments now this is sitting inside</span> <span data-start="391.63" data-end="393.009">of the callback so it has to wait for</span> <span data-start="393.009" data-end="394.99">the article to return before we can go</span> <span data-start="394.99" data-end="397.659">ahead and request the comments we then</span> <span data-start="397.659" data-end="399.76">bind the comments to the article and go</span> <span data-start="399.76" data-end="400.54">ahead and render it</span> <span data-start="400.54" data-end="404.08">the page the problem with this is while</span> <span data-start="404.08" data-end="406.63">it's relatively readable it's slower we</span> <span data-start="406.63" data-end="409.09">have to wait request response request</span> <span data-start="409.09" data-end="411.94">response and nested calls don't</span> <span data-start="411.94" data-end="414.46">necessarily scale at least not visually</span> </p>
<p><span data-start="414.46" data-end="416.17">I mean you end up with code that looks</span> <span data-start="416.17" data-end="424.9">like Charlie Brown on his back okay is</span> <span data-start="424.9" data-end="428.56">this exact so the second anti-pattern is</span> <span data-start="428.56" data-end="431.53">parallel request random response this</span> <span data-start="431.53" data-end="435.04">pattern is quicker these calls though</span> <span data-start="435.04" data-end="436.24">maybe not immediately obvious are</span> <span data-start="436.24" data-end="439.63">getting fired at the same time then</span> <span data-start="439.63" data-end="441.64">they're using a counter they're storing</span> <span data-start="441.64" data-end="442.99">their data when they return and using a</span> <span data-start="442.99" data-end="445.24">counter and when that counter I gets to</span> <span data-start="445.24" data-end="446.95">to it knows that it's finished with the</span> <span data-start="446.95" data-end="448.78">number of requests and it can handle its</span> <span data-start="448.78" data-end="451.57">send its command callback now a problem</span> <span data-start="451.57" data-end="454.18">with scaling this up is that you have</span> <span data-start="454.18" data-end="455.47">tix you know you have to keep storage</span> <span data-start="455.47" data-end="457.6">variables you have to keep you know any</span> <span data-start="457.6" data-end="458.59">time you had a call you gotta remember</span> <span data-start="458.59" data-end="461.89">go up change your variable and it just</span> <span data-start="461.89" data-end="463.21">sort of ends up being a little bit</span> <span data-start="463.21" data-end="466.39">crusty and long you know I like code</span> <span data-start="466.39" data-end="468.52">that's as small as possible does what i</span> <span data-start="468.52" data-end="473.17">want and is you know easy to update and</span> <span data-start="473.17" data-end="475.99">maintain so if either one of these</span> <span data-start="475.99" data-end="481.09">patterns look familiar meet sexy sexy is</span> <span data-start="481.09" data-end="483.58">a jaya well it started as a jquery</span> <span data-start="483.58" data-end="486.28">plugin it's a parallel request serial</span> <span data-start="486.28" data-end="488.8">response library so we're making the</span> <span data-start="488.8" data-end="490.68">request in parallel for speed and</span> <span data-start="490.68" data-end="493.63">wrapping and eventing your specified</span> <span data-start="493.63" data-end="495.79">callbacks so that we can put them back</span> <span data-start="495.79" data-end="499.93">in order and sexy ensures callbacks in</span> <span data-start="499.93" data-end="504.04">order every time well as of my version</span> <span data-start="504.04" data-end="507.4">my arbitrary version 0.0 point that</span> <span data-start="507.4" data-end="510.46">means zero point 8.0 sexies now stand</span> <span data-start="510.46" data-end="515.05">alone sort of thanks to open source and</span> </p>
<p><span data-start="515.05" data-end="518.89">John I've extracted the jquery ajax code</span> <span data-start="518.89" data-end="522.04">and put it in as an adapter so it's if</span> <span data-start="522.04" data-end="524.62">you look into the code you'll see that</span> <span data-start="524.62" data-end="525.91">it's in its own closure and it gets</span> <span data-start="525.91" data-end="527.65">passed in as a variable to sexies</span> <span data-start="527.65" data-end="530.14">closure as an adapter the point of doing</span> <span data-start="530.14" data-end="532.06">this was to make my own code easier to</span> <span data-start="532.06" data-end="532.97">maintain every</span> </p>
<p><span data-start="532.97" data-end="535.279">I'm there's a change to jQuery i can</span> <span data-start="535.279" data-end="536.899">update that any time I have a changed my</span> <span data-start="536.899" data-end="538.85">code I can update that and if anyone</span> <span data-start="538.85" data-end="540.47">wants to port this to another library</span> <span data-start="540.47" data-end="544.399">it's easy to write an adapter for it so</span> <span data-start="544.399" data-end="548.3">sexy is classy calling new sexy creates</span> <span data-start="548.3" data-end="550.819">a sexy instance to which you can go</span> <span data-start="550.819" data-end="554.99">ahead and start chaining your calls but</span> <span data-start="554.99" data-end="556.839">with a name like sexy which by the way</span> <span data-start="556.839" data-end="559.04">wasn't out of any sense of ego it</span> <span data-start="559.04" data-end="560.75">actually was it just another version of</span> <span data-start="560.75" data-end="565.22">short and sequential Ajax but after a</span> <span data-start="565.22" data-end="566.899">while I did think that this library had</span> <span data-start="566.899" data-end="569.66">to be sexy to keep up with its name so i</span> <span data-start="569.66" data-end="573.439">decided that new was old and that sexy</span> <span data-start="573.439" data-end="576.86">is the new sexy so sexy with currents</span> <span data-start="576.86" data-end="578.87">also creates its own instance you no</span> <span data-start="578.87" data-end="581.889">longer need the new call of the new</span> <span data-start="581.889" data-end="584.99">keyword to start your chain and this is</span> <span data-start="584.99" data-end="587.029">an instance this is an object here it's</span> <span data-start="587.029" data-end="589.25">not actually working off as some sexy</span> <span data-start="589.25" data-end="592.459">singleton and for anyone who wants under</span> <span data-start="592.459" data-end="595.639">the hood all we're doing inside of the</span> <span data-start="595.639" data-end="597.92">constructor we're checking when when the</span> <span data-start="597.92" data-end="599.059">function is called we're checking the</span> <span data-start="599.059" data-end="601.79">instance of this if this is sexy then it</span> <span data-start="601.79" data-end="603.86">was used with a new keyword if it wasn't</span> <span data-start="603.86" data-end="605.72">it was called without a new keyword we</span> <span data-start="605.72" data-end="608.12">just take the arguments and fight you</span> <span data-start="608.12" data-end="610.639">know we instantiate and just sort of</span> <span data-start="610.639" data-end="613.279">wrap it back around so the code will</span> <span data-start="613.279" data-end="615.49">stop here and then come back through</span> <span data-start="615.49" data-end="618.709">saving us a few characters and really it</span> <span data-start="618.709" data-end="621.019">was just for fun but I didn't think that</span> <span data-start="621.019" data-end="624.879">was sexy enough where am I going here Oh</span> <span data-start="624.879" data-end="627.86">up is the new down and down is in a well</span> <span data-start="627.86" data-end="630.829">there we go so this will also create a</span> <span data-start="630.829" data-end="633.5">sexy instance I decided that most of the</span> <span data-start="633.5" data-end="634.759">time I didn't need to put anything in</span> <span data-start="634.759" data-end="636.5">those parentheses so they just made my</span> <span data-start="636.5" data-end="639.379">code look big and so I decided to do</span> <span data-start="639.379" data-end="642.41">away with them this creates an instance</span> <span data-start="642.41" data-end="645.17">as well and we do this just by iterating</span> <span data-start="645.17" data-end="647.829">the prototypal methods and creating</span> <span data-start="647.829" data-end="650.47">static functions on the constructor</span> <span data-start="650.47" data-end="653.12">which will apply the desired prototype</span> <span data-start="653.12" data-end="654.949">method in the scope of a new instance</span> <span data-start="654.949" data-end="657.319">since it's a chainable api it's always</span> <span data-start="657.319" data-end="659.75">returning an instance so after you make</span> <span data-start="659.75" data-end="661.79">that first call what you have back is</span> <span data-start="661.79" data-end="665.519">your new object</span> <span data-start="665.529" data-end="668.36">alright so let's take a look at sexies</span> </p>
<p><span data-start="668.36" data-end="672.68">API sexy was designed to be expressive</span> <span data-start="672.68" data-end="675.29">and chainable so that the code looks</span> <span data-start="675.29" data-end="679.04">like what the code does there's a method</span> <span data-start="679.04" data-end="682.13">for each supported data type these types</span> <span data-start="682.13" data-end="686">reflect jQuery the jQuery roots with the</span> <span data-start="686" data-end="689.36">exception of the style method which I</span> <span data-start="689.36" data-end="692.63">added later for the sake of some sort of</span> <span data-start="692.63" data-end="694.76">completeness because I found that I was</span> <span data-start="694.76" data-end="697.19">using sexy to bootstrap apps by loading</span> <span data-start="697.19" data-end="700.85">in scripts and then data and i was using</span> <span data-start="700.85" data-end="703.31">text to load a templating engine or a</span> <span data-start="703.31" data-end="704.45">template that would get parsed by a</span> <span data-start="704.45" data-end="705.709">template engine i figured all right why</span> <span data-start="705.709" data-end="710.209">don't I just put my CSS in there it</span> <span data-start="710.209" data-end="712.519">takes two to three callbacks as you see</span> <span data-start="712.519" data-end="715.37">takes mean arguments there's a URL and a</span> <span data-start="715.37" data-end="717.23">call back with an optional defer in the</span> <span data-start="717.23" data-end="719.93">middle defer will force that call to</span> <span data-start="719.93" data-end="722.36">perform the way our first example did as</span> <span data-start="722.36" data-end="726.529">a serial request serial response this is</span> <span data-start="726.529" data-end="728.93">going to allow you to handle things like</span> <span data-start="728.93" data-end="730.61">server authentication if you need to set</span> <span data-start="730.61" data-end="732.2">a cookie before you start hitting an API</span> <span data-start="732.2" data-end="736.1">or if you need an API key or another</span> <span data-start="736.1" data-end="737.6">benefit if you want to change the</span> <span data-start="737.6" data-end="739.339">configuration of the next call if</span> <span data-start="739.339" data-end="741.589">there's something that's going to be</span> <span data-start="741.589" data-end="743.81">dependent on your previous call you call</span> <span data-start="743.81" data-end="746.69">you tell defer and then in the callback</span> </p>
<p><span data-start="746.69" data-end="748.64">I'll show you how we can manipulate that</span> <span data-start="748.64" data-end="752.029">next call it also takes a jquery</span> <span data-start="752.029" data-end="756.829">settings object because of the jquery</span> <span data-start="756.829" data-end="759.26">routes so you can refer to jake where's</span> <span data-start="759.26" data-end="761.69">documentation for that there's an</span> <span data-start="761.69" data-end="763.97">additional defer property so that you</span> <span data-start="763.97" data-end="767.06">can use the long form and still stop</span> <span data-start="767.06" data-end="769.79">your call the callbacks are just</span> <span data-start="769.79" data-end="772.82">slightly different from jQuery AJAX call</span> <span data-start="772.82" data-end="775.339">backs which return data and status</span> <span data-start="775.339" data-end="778.07">instead what we get our data which is</span> <span data-start="778.07" data-end="780.23">the response data of the current request</span> <span data-start="780.23" data-end="783.019">we get previous which is the return</span> <span data-start="783.019" data-end="785.57">value of the previous call back we get</span> <span data-start="785.57" data-end="787.64">next which is the Ajax settings of the</span> <span data-start="787.64" data-end="789.98">next request and then we get the status</span> <span data-start="789.98" data-end="791.959">which hopefully in your case is always</span> <span data-start="791.959" data-end="796.13">success so let's look at what a sexy</span> <span data-start="796.13" data-end="797.5">sequential Ajax pattern look</span> <span data-start="797.5" data-end="800.47">like here we can see that we're changing</span> <span data-start="800.47" data-end="803.98">to calls these calls like the like the</span> <span data-start="803.98" data-end="805.42">other example are being fired in</span> <span data-start="805.42" data-end="807.55">parallel right away and then the</span> <span data-start="807.55" data-end="811.18">callbacks are executed in the specified</span> <span data-start="811.18" data-end="814.87">order this example is using the verbose</span> <span data-start="814.87" data-end="817">syntax using full on configuration</span> <span data-start="817" data-end="819.1">objects these would be what you would</span> <span data-start="819.1" data-end="820.87">use if you want to post or if you need</span> <span data-start="820.87" data-end="827.02">to add errors or before send where we</span> <span data-start="827.02" data-end="831.22">add here oh this radio shows you how the</span> <span data-start="831.22" data-end="834.19">the value is being passed so when the</span> <span data-start="834.19" data-end="835.93">data comes back in the first one we have</span> <span data-start="835.93" data-end="837.46">the article we're just going to take</span> <span data-start="837.46" data-end="838.93">that data and we're going to return it</span> <span data-start="838.93" data-end="841.66">the wrapped callback knows that when it</span> <span data-start="841.66" data-end="843.52">fires this one to pass it in as a second</span> <span data-start="843.52" data-end="845.98">argument now we can just add comments to</span> <span data-start="845.98" data-end="849.03">the article and go ahead and render it</span> <span data-start="849.03" data-end="851.5">but big configuration objects aren't</span> <span data-start="851.5" data-end="855.37">sexy so we use the brief syntax you see</span> <span data-start="855.37" data-end="857.02">that we're still passing the article and</span> <span data-start="857.02" data-end="861.67">getting things done but if I'm willing</span> <span data-start="861.67" data-end="863.5">to get rid of two parentheses I think</span> </p>
<p><span data-start="863.5" data-end="865.18">I'm also willing to get rid of a</span> <span data-start="865.18" data-end="867.04">function that is probably going to be</span> <span data-start="867.04" data-end="869.32">used ninety percent of the time to pass</span> <span data-start="869.32" data-end="870.85">you know most of the time you're going</span> <span data-start="870.85" data-end="872.17">to use this it'll just be to marry two</span> <span data-start="872.17" data-end="875.89">things and so why not just throw in an</span> <span data-start="875.89" data-end="880.66">implicit call back so that the data just</span> <span data-start="880.66" data-end="883.93">appears we don't need to write out that</span> <span data-start="883.93" data-end="886.69">additional function there's another type</span> <span data-start="886.69" data-end="889.57">of implicit callback which is a pass</span> <span data-start="889.57" data-end="891.88">through call back so if you throw either</span> <span data-start="891.88" data-end="895.81">a jas or a CSS call in between odds are</span> <span data-start="895.81" data-end="897.13">we have no interest in manipulating</span> <span data-start="897.13" data-end="898.72">those data we're just going to put them</span> <span data-start="898.72" data-end="900.73">in the page and execute them so we pass</span> <span data-start="900.73" data-end="902.53">through whatever the last return value</span> <span data-start="902.53" data-end="904.78">was before it you could throw as many</span> </p>
<p><span data-start="904.78" data-end="906.64">Java scripts or style sheets right in</span> <span data-start="906.64" data-end="909.64">the middle there and that second</span> <span data-start="909.64" data-end="912.19">argument would still be article I don't</span> <span data-start="912.19" data-end="913.78">really recommend that because it's not</span> <span data-start="913.78" data-end="916.3">really readable I think it's better to</span> <span data-start="916.3" data-end="918.1">put your two things together but if you</span> <span data-start="918.1" data-end="922.21">had to it's available to you here's an</span> <span data-start="922.21" data-end="926.11">example using defer this this example</span> <span data-start="926.11" data-end="927.79">actually was inspired by something maroc</span> <span data-start="927.79" data-end="929.53">doing with hokey oh he's using sexy as a</span> <span data-start="929.53" data-end="930.61">test runner</span> <span data-start="930.61" data-end="932.26">so he wanted to be able to authenticate</span> <span data-start="932.26" data-end="935.86">request modify and post back so in the</span> <span data-start="935.86" data-end="939.339">first call we are authenticating you</span> <span data-start="939.339" data-end="942.1">could use this either with a cookie</span> <span data-start="942.1" data-end="944.98">based session or if you needed an API</span> <span data-start="944.98" data-end="946.63">key back because if you had an API key</span> <span data-start="946.63" data-end="948.7">you could just send that through into</span> <span data-start="948.7" data-end="950.2">previous and your next call would be</span> <span data-start="950.2" data-end="952.92">able to make an authenticated request</span> <span data-start="952.92" data-end="955.329">the second call you can see we deferred</span> <span data-start="955.329" data-end="957.49">we waited we called true we went we got</span> <span data-start="957.49" data-end="960.01">the article we modified the article and</span> <span data-start="960.01" data-end="963.7">then what we did by deferring the third</span> <span data-start="963.7" data-end="965.589">call which is going to post the article</span> <span data-start="965.589" data-end="967.779">back here in the second we can set the</span> <span data-start="967.779" data-end="970.48">article to the data of that call and now</span> <span data-start="970.48" data-end="972.43">this third call is now armed and</span> <span data-start="972.43" data-end="973.779">dangerous and ready to update your</span> <span data-start="973.779" data-end="978.399">article and for for sake of completion</span> <span data-start="978.399" data-end="983.23">we log out when we're done because of</span> <span data-start="983.23" data-end="987.94">the parallel loading sequential response</span> <span data-start="987.94" data-end="991.75">and the way that both jquery and sexy</span> <span data-start="991.75" data-end="995.459">use use text loading of scripts and then</span> </p>
<p><span data-start="995.459" data-end="999.64">Dom injection we're actually able to go</span> <span data-start="999.64" data-end="1001.709">ahead and queue up script dependencies</span> <span data-start="1001.709" data-end="1005.19">so anything you see here will load after</span> <span data-start="1005.19" data-end="1008.04">the thing before it so jQuery UI doesn't</span> <span data-start="1008.04" data-end="1009.66">have to worry that jQuery won't be there</span> <span data-start="1009.66" data-end="1010.89">and the template doesn't have to worry</span> <span data-start="1010.89" data-end="1013.41">and as you can see all my pseudo MLB</span> <span data-start="1013.41" data-end="1015.449">libraries they'll load just fine as soon</span> <span data-start="1015.449" data-end="1020.16">as they're written so let's let's see</span> <span data-start="1020.16" data-end="1022.41">what a sexy makeover looks like we can</span> <span data-start="1022.41" data-end="1025.589">remember our original parallel response</span> <span data-start="1025.589" data-end="1029.1">parallel request random response that</span> <span data-start="1029.1" data-end="1033.059">now is reduced to this making the code</span> <span data-start="1033.059" data-end="1038.85">tidy and readable and I don't know sexy</span> </p>
<p><span data-start="1038.85" data-end="1043.62">I like it sexy also has a few additional</span> <span data-start="1043.62" data-end="1050.13">methods it has a setup method that</span> <span data-start="1050.13" data-end="1052.02">allows you to configure subsequent</span> <span data-start="1052.02" data-end="1053.669">request of a sexy instance this behaves</span> <span data-start="1053.669" data-end="1056.46">just like Ajax set up in jQuery only</span> <span data-start="1056.46" data-end="1058.83">when you do it it's not global it's only</span> <span data-start="1058.83" data-end="1061.53">two subsequent requests in your current</span> <span data-start="1061.53" data-end="1064.11">sexy chain at at any point you can go</span> <span data-start="1064.11" data-end="1064.52">ahead and</span> <span data-start="1064.52" data-end="1066.53">set them with an empty or faulty value</span> <span data-start="1066.53" data-end="1070.16">to set up something like this for our</span> <span data-start="1070.16" data-end="1071.72">article we may want to show a loading</span> <span data-start="1071.72" data-end="1074.03">indicator and then hide it when it's</span> <span data-start="1074.03" data-end="1075.44">complete but we may not care so much</span> <span data-start="1075.44" data-end="1077.12">when we display the comments so we can</span> <span data-start="1077.12" data-end="1080.96">just zero that out you can also pass</span> <span data-start="1080.96" data-end="1082.37">that right through to the constructor</span> <span data-start="1082.37" data-end="1086.15">because anywhere i can drop keystrokes i</span> <span data-start="1086.15" data-end="1090.68">do saving yourself some time sexy also</span> <span data-start="1090.68" data-end="1092.15">provides a sort of client-side</span> </p>
<p><span data-start="1092.15" data-end="1094.19">JavaScript packaging tool called sexy</span> <span data-start="1094.19" data-end="1099.32">bundle bundle makes multiple requests</span> <span data-start="1099.32" data-end="1101.45">and a single Dom insertion and then</span> <span data-start="1101.45" data-end="1104.51">executes an optional call back because</span> <span data-start="1104.51" data-end="1107.27">of the way sexy is designed the script</span> <span data-start="1107.27" data-end="1108.89">sequence and therefore your dependencies</span> <span data-start="1108.89" data-end="1113">are preserved so that long chain of</span> <span data-start="1113" data-end="1115.46">script loads can be reduced to this I</span> <span data-start="1115.46" data-end="1117.08">guess we didn't really save much but I</span> <span data-start="1117.08" data-end="1118.52">mean I'm nickel-and-diming over</span> <span data-start="1118.52" data-end="1124.07">parenthesis so I do what I can hear now</span> </p>
<p><span data-start="1124.07" data-end="1126.23">I'd like to introduce you to what has</span> <span data-start="1126.23" data-end="1130.82">become so far my kamasutra of sexy this</span> <span data-start="1130.82" data-end="1133.16">example just came up the other day at</span> <span data-start="1133.16" data-end="1135.59">Major League Baseball where we had to</span> <span data-start="1135.59" data-end="1138.95">implement in a hurry a new scoreboard</span> <span data-start="1138.95" data-end="1142.1">for minor leagues only the only problem</span> <span data-start="1142.1" data-end="1144.05">was that the data about the games that</span> <span data-start="1144.05" data-end="1145.52">were being played was stored in a</span> <span data-start="1145.52" data-end="1147.05">separate place from the data about the</span> <span data-start="1147.05" data-end="1150.41">games each game required a different</span> <span data-start="1150.41" data-end="1154.7">data file so came up with this idea and</span> <span data-start="1154.7" data-end="1156.52">here's an example of bootstrapping a nap</span> <span data-start="1156.52" data-end="1160.67">and then really playing with sexy so</span> <span data-start="1160.67" data-end="1162.56">this time what's different is up at the</span> <span data-start="1162.56" data-end="1165.86">top we are storing our sexy instance as</span> <span data-start="1165.86" data-end="1167.87">s which we'll come back later</span> <span data-start="1167.87" data-end="1171.26">foreshadowing we're going to load in</span> <span data-start="1171.26" data-end="1173.99">jQuery we load in a templating agent a</span> <span data-start="1173.99" data-end="1177.65">templating document will also load in a</span> <span data-start="1177.65" data-end="1181.04">style sheet and we will load in the</span> <span data-start="1181.04" data-end="1182.81">template now all right this is a basic</span> <span data-start="1182.81" data-end="1184.7">simple friends this isn't our scoreboard</span> <span data-start="1184.7" data-end="1188.02">because that had a little more code this</span> </p>
<p><span data-start="1188.02" data-end="1190.28">Jason that it would bring back is sort</span> <span data-start="1190.28" data-end="1191.63">of like a manifest it might bring back</span> <span data-start="1191.63" data-end="1193.43">an array of friends with just their</span> <span data-start="1193.43" data-end="1195.95">their user names and ID's so from there</span> <span data-start="1195.95" data-end="1197.21">we have to go and get the rest of the</span> <span data-start="1197.21" data-end="1197.9">information</span> <span data-start="1197.9" data-end="1199.73">so what we do is we iterate those</span> <span data-start="1199.73" data-end="1201.92">friends and for each friend we make a</span> <span data-start="1201.92" data-end="1204.08">request so what we're doing is we're</span> <span data-start="1204.08" data-end="1205.88">actually adding these new calls to that</span> <span data-start="1205.88" data-end="1209.33">original chain so these are all going to</span> <span data-start="1209.33" data-end="1211.19">fire as fast as this loop can iterate</span> <span data-start="1211.19" data-end="1213.95">all the requests go out when it comes</span> <span data-start="1213.95" data-end="1215.51">back we're going to push the incoming</span> <span data-start="1215.51" data-end="1219.44">friend onto a stack and then wait a</span> <span data-start="1219.44" data-end="1223.13">minute there's no stack well one of the</span> <span data-start="1223.13" data-end="1225.74">nice things was that we added this to</span> <span data-start="1225.74" data-end="1228.05">this chain so I did was create the stack</span> <span data-start="1228.05" data-end="1230.63">down here and we pass that empty array</span> <span data-start="1230.63" data-end="1233">up there so the first time it comes in</span> <span data-start="1233" data-end="1235.7">we have our array we push our friend we</span> <span data-start="1235.7" data-end="1238.85">loop through this while while we are</span> <span data-start="1238.85" data-end="1242.54">less than the final friend and every</span> <span data-start="1242.54" data-end="1244.55">time we augment that array and push it</span> <span data-start="1244.55" data-end="1246.65">back up onto the stack so our friends</span> <span data-start="1246.65" data-end="1248.54">array just grows as our responses come</span> <span data-start="1248.54" data-end="1250.61">back in and when we're done we shove it</span> <span data-start="1250.61" data-end="1254.28">into a template and put it on the page</span> <span data-start="1254.29" data-end="1257.63">so there are some known issues but</span> <span data-start="1257.63" data-end="1259.66">they're not come they're not unique to</span> <span data-start="1259.66" data-end="1262.43">sexy you know right now as far as I know</span> <span data-start="1262.43" data-end="1265.58">there's not too many or if any Kyle may</span> <span data-start="1265.58" data-end="1267.67">be able to correct me in some of these</span> <span data-start="1267.67" data-end="1269.69">with some of the stuff he's doing in lab</span> <span data-start="1269.69" data-end="1272.57">j yes detection of errors for remote</span> <span data-start="1272.57" data-end="1275.81">requests using JSONP script or style</span> <span data-start="1275.81" data-end="1277.78">which is loading a remote stylesheet</span> <span data-start="1277.78" data-end="1280.01">probably the more severe problem that</span> </p>
<p><span data-start="1280.01" data-end="1282.49">I've introduced is that loading a style</span> <span data-start="1282.49" data-end="1285.86">from a remote URL will fire the success</span> <span data-start="1285.86" data-end="1287.51">callback even if the request was an</span> <span data-start="1287.51" data-end="1290.93">error but the good news is most of the</span> <span data-start="1290.93" data-end="1291.95">time you don't need to do something</span> <span data-start="1291.95" data-end="1294.02">right after your stylesheet so just kind</span> <span data-start="1294.02" data-end="1297.35">of avoid that for now I prom you know</span> <span data-start="1297.35" data-end="1299.03">might say I should wait until the</span> <span data-start="1299.03" data-end="1302.21">library is complete but I say you know</span> <span data-start="1302.21" data-end="1303.41">if I put it out there and everyone can</span> <span data-start="1303.41" data-end="1308.95">see the bug maybe someone has the fix so</span> <span data-start="1308.95" data-end="1311.36">now we've just witnessed parallel</span> <span data-start="1311.36" data-end="1314.15">request serial response the pros it's</span> <span data-start="1314.15" data-end="1316.28">faster cleaner prettier I think it's</span> <span data-start="1316.28" data-end="1319.94">easier to maintain the API is chainable</span> <span data-start="1319.94" data-end="1322.64">and expressive you can look at the code</span> <span data-start="1322.64" data-end="1324.4">know what it's doing when it's doing it</span> <span data-start="1324.4" data-end="1327.35">and the only drawback is that depending</span> <span data-start="1327.35" data-end="1328.28">whether or not you're using it as a</span> <span data-start="1328.28" data-end="1329.63">plug-in or a standalone it's going to</span> <span data-start="1329.63" data-end="1330.21">add about</span> <span data-start="1330.21" data-end="1332.82">and a half or four and a half K of code</span> <span data-start="1332.82" data-end="1334.98">to your core library if you're using the</span> <span data-start="1334.98" data-end="1336.66">standalone odds are you're using it to</span> <span data-start="1336.66" data-end="1340.17">bootstrap so it could potentially be the</span> <span data-start="1340.17" data-end="1344.27">only script on your page when you load</span> <span data-start="1344.27" data-end="1349.73">all right if anyone has any questions</span> <span data-start="1349.73" data-end="1353.25">you have a question song do you have any</span> <span data-start="1353.25" data-end="1357.3">kind of a case like a request is taking</span> <span data-start="1357.3" data-end="1360.15">too long or something like that to do</span> <span data-start="1360.15" data-end="1362.43">something built into jQuery ok so it's</span> <span data-start="1362.43" data-end="1365.7">using hope for like JSON key which</span> <span data-start="1365.7" data-end="1369.63">doesn't have a timeout and whose fault</span> <span data-start="1369.63" data-end="1374.58">is that oh yeah i'm yeah i know i'm just</span> <span data-start="1374.58" data-end="1376.17">standing on the on the on the shoulders</span> <span data-start="1376.17" data-end="1378.93">of jquery yeah i haven't added any in</span> <span data-start="1378.93" data-end="1382.74">fact the most meaningful of code that</span> <span data-start="1382.74" data-end="1384.66">i've added probably if it needed to be</span> <span data-start="1384.66" data-end="1386.16">if i wanted to i could have just taken</span> <span data-start="1386.16" data-end="1387.48">out what i've done instead of having a</span> <span data-start="1387.48" data-end="1389.58">separate library and in like maybe six</span> <span data-start="1389.58" data-end="1391.29">to ten lines added it directly to Jake</span> <span data-start="1391.29" data-end="1394.38">worry there's really not much going on</span> <span data-start="1394.38" data-end="1397.17">i'm wrapping functions um you know</span> <span data-start="1397.17" data-end="1398.88">creating events but the sexy librarian</span> <span data-start="1398.88" data-end="1402.33">doesn't do much it just helps I do it</span> <span data-start="1402.33" data-end="1404.25">one follow-up question sure do you have</span> <span data-start="1404.25" data-end="1409.11">any shorthand or anything so if if a</span> <span data-start="1409.11" data-end="1412.5">particular request fails for some reason</span> <span data-start="1412.5" data-end="1415.44">to me do that request that exact same</span> <span data-start="1415.44" data-end="1417.33">requester do you have to actually in</span> <span data-start="1417.33" data-end="1420.63">your error call back like take dupe s</span> <span data-start="1420.63" data-end="1423.18">dot and add that one back onto it right</span> <span data-start="1423.18" data-end="1425.7">so this is still an earlier version so</span> <span data-start="1425.7" data-end="1427.56">my arbitrary 0.8 should probably do more</span> <span data-start="1427.56" data-end="1430.02">like 0.5 or four or three or two or one</span> </p>
<p><span data-start="1430.02" data-end="1434.01">I've done various things and pulled them</span> <span data-start="1434.01" data-end="1435.27">out and put them back and pulled them</span> <span data-start="1435.27" data-end="1438.12">out now that I do have a couple people</span> <span data-start="1438.12" data-end="1439.83">using it I probably have to be a little</span> <span data-start="1439.83" data-end="1442.62">more stable but yes there was at one</span> <span data-start="1442.62" data-end="1445.38">point cascading error handling that</span> <span data-start="1445.38" data-end="1447.32">would notify everything down the chain</span> <span data-start="1447.32" data-end="1449.22">there wasn't something that would</span> <span data-start="1449.22" data-end="1452.4">actually send backup to the same request</span> <span data-start="1452.4" data-end="1454.71">but in one incarnation I had the ability</span> <span data-start="1454.71" data-end="1457.53">to inject back into the chain so</span> <span data-start="1457.53" data-end="1458.94">essentially what we would need to do is</span> <span data-start="1458.94" data-end="1461.58">inject into the chain and then set the</span> <span data-start="1461.58" data-end="1462.75">pointer back</span> <span data-start="1462.75" data-end="1467.07">so I could add let's say another another</span> <span data-start="1467.07" data-end="1469.98">argument to the callback being this that</span> <span data-start="1469.98" data-end="1471.72">would give you access to everything in</span> <span data-start="1471.72" data-end="1474.09">the sexy chain and then add some</span> <span data-start="1474.09" data-end="1476.19">functions you know previous next to jump</span> <span data-start="1476.19" data-end="1478.95">around not currently there but if people</span> <span data-start="1478.95" data-end="1481.35">use this and like it I am more than</span> <span data-start="1481.35" data-end="1484.83">happy to add whatever people like Kyle</span> <span data-start="1484.83" data-end="1489">yes so give your list of a bunch of</span> <span data-start="1489" data-end="1490.44">scripts and obviously a bunch of those</span> <span data-start="1490.44" data-end="1492.57">with local scripts you're using XA</span> <span data-start="1492.57" data-end="1494.55">charged to lopat string mm-hmm you're</span> <span data-start="1494.55" data-end="1496.68">running all in parallel executables</span> <span data-start="1496.68" data-end="1499.23">really what if one of those in the</span> <span data-start="1499.23" data-end="1504.2">middle is a remote script okay so sexy</span> <span data-start="1504.2" data-end="1507.54">it has to you know in order to ensure</span> <span data-start="1507.54" data-end="1511.17">that everything else is there it has to</span> <span data-start="1511.17" data-end="1513.69">wait because in order to put a remote</span> <span data-start="1513.69" data-end="1517.8">script on I'm using just adding a script</span> <span data-start="1517.8" data-end="1520.65">node and giving it a source so it's</span> <span data-start="1520.65" data-end="1522.2">actually injecting right then and there</span> <span data-start="1522.2" data-end="1525.21">what sexy does is if there is a defer</span> <span data-start="1525.21" data-end="1526.92">anywhere in the chain but everything</span> <span data-start="1526.92" data-end="1528.39">else is free form you know like</span> <span data-start="1528.39" data-end="1529.71">everything else is ready to go parallel</span> <span data-start="1529.71" data-end="1532.74">the second that one that was deferred</span> <span data-start="1532.74" data-end="1535.05">comes back those will all immediately</span> <span data-start="1535.05" data-end="1538.35">fire again so as its as its iterating</span> <span data-start="1538.35" data-end="1539.97">through or as you're adding things to</span> <span data-start="1539.97" data-end="1542.55">the chain it will either if it's the</span> <span data-start="1542.55" data-end="1544.71">first thing immediately send otherwise</span> <span data-start="1544.71" data-end="1546.99">if there it has been something that's</span> <span data-start="1546.99" data-end="1548.91">deferred it will essentially subscribe</span> <span data-start="1548.91" data-end="1553.41">to the to the send of the last deferred</span> <span data-start="1553.41" data-end="1556.62">item so they'll bill all bill all fire</span> <span data-start="1556.62" data-end="1559.86">off in a hurry right after that remote</span> <span data-start="1559.86" data-end="1561.66">script loads so just by point of</span> <span data-start="1561.66" data-end="1564">comparison that's where livejasmin</span> <span data-start="1564" data-end="1566.19">kippur live Jace is still going to load</span> <span data-start="1566.19" data-end="1568.54">everything girl</span> <span data-start="1568.54" data-end="1573.26">but that's trade-offs that yours yeah</span> <span data-start="1573.26" data-end="1575.51">well I think there's definitely I mean</span> <span data-start="1575.51" data-end="1576.77">we've talked about this on and off over</span> <span data-start="1576.77" data-end="1579.86">the past year there's plenty I think</span> <span data-start="1579.86" data-end="1582.14">that I could you know leverage from</span> <span data-start="1582.14" data-end="1586.88">digging into your code and yeah so I</span> <span data-start="1586.88" data-end="1588.8">look forward to you know after this now</span> <span data-start="1588.8" data-end="1590.36">that the stress is done i can go relax</span> <span data-start="1590.36" data-end="1592.43">and i can actually pick your brain with</span> <span data-start="1592.43" data-end="1596.09">a clear conscience anyone else have any</span> <span data-start="1596.09" data-end="1600.71">questions all right well thank you very</span> </p>
</section>