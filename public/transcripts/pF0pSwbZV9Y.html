<section>
<p><span data-start="5.1" data-end="6.66">Okay, hi, everyone.</span> <span data-start="6.86" data-end="9.18">I'm going to dive straight in.</span> <span data-start="9.18" data-end="12.339">Custom properties are now supported in all modern browsers, and this is great.</span> <span data-start="12.339" data-end="16.189">It means we are starting to see examples of people using them in production.</span> <span data-start="16.189" data-end="19.18">But they're different from variables in preprocessors.</span> <span data-start="19.18" data-end="22.599">And I've already seen a lot of examples where people are using them in a similar way without</span> <span data-start="22.599" data-end="26.81">necessarily considering what specific advantages they have to offer.</span> <span data-start="26.81" data-end="30.91">That might include one European web development conference as well.</span> <span data-start="30.91" data-end="31.91">But that's okay.</span> <span data-start="31.91" data-end="37.03">I think custom properties have a huge potential to change how we write and structure CSS,</span> <span data-start="37.03" data-end="40.68">and to a lesser extent as well, how we use JavaScript to interact with UI components.</span> <span data-start="40.68" data-end="46.04">I will not focus as much on the syntax and how they work.</span> </p>
<p><span data-start="46.04" data-end="50.26">What separates the best players of any game is strategy.</span> <span data-start="50.26" data-end="54.43">I'm going to focus more on the strategies today.</span> <span data-start="54.43" data-end="62.57">Can I get help?</span> <span data-start="62.57" data-end="67.23">I need a cursor.</span> <span data-start="67.23" data-end="70.57">So, custom properties are a little bit like variables in preprocessors.</span> <span data-start="70.57" data-end="75.63">But they have some very important differences, and one of the first and most obvious differences</span> <span data-start="75.63" data-end="76.63">is the syntax.</span> </p>
<p><span data-start="76.63" data-end="83.86">So, in Sass, we might have used a dollar sign to denote a variable, and, in Less, we use</span> <span data-start="83.86" data-end="85.42">an @ symbol.</span> <span data-start="85.42" data-end="95.1">Custom properties use a dash-dash.</span> <span data-start="95.1" data-end="102.11">We use a different type of syntax for assigning a value than we do for retrieving the value.</span> <span data-start="102.11" data-end="108.59">When retrieving the value, we use the va function here, for anyone who has used things like</span> <span data-start="108.59" data-end="117.88">calc or the functional parts of CSS that are making their way into the modern language.</span> <span data-start="117.88" data-end="121.64">The next most obvious difference is in the same.</span> <span data-start="121.64" data-end="125.83">They are called custom properties because they really are CSS properties.</span> <span data-start="125.83" data-end="131.78">In preprocessors, you can define the variable almost anywhere.</span> <span data-start="131.78" data-end="137.35">This means outside declaration blocks, inside media rules, you can even use them as part</span> <span data-start="137.35" data-end="144.05">of a selector, and all of those examples would be invalid with custom properties.</span> </p>
<p><span data-start="144.05" data-end="148.15">Custom properties have the same rules about where they can be used as normal CSS properties.</span> <span data-start="148.15" data-end="152.599">In fact, it is far better to think of them as dynamic properties than it is to think</span> <span data-start="152.599" data-end="154.46">of them as variables.</span> <span data-start="154.46" data-end="159.2">This means that they can only be used inside declaration blocks.</span> <span data-start="159.2" data-end="162.63">In other words, between these curly braces here.</span> </p>
<p><span data-start="162.63" data-end="166.93">This means they are tied to a specific selector, and that can be the root selector — you might</span> <span data-start="166.93" data-end="173.13">have seen this in a lot of examples — but it can be any other valid CSS selector which</span> <span data-start="173.13" data-end="175.459">can include inside a media query.</span> <span data-start="175.459" data-end="181.27">So, similarly, you can retrieve the value of a custom property anywhere you would normally</span> <span data-start="181.27" data-end="185.52">use a value in CSS.</span> </p>
<p><span data-start="185.52" data-end="190.91">So this means that they can be part of a single value, or a shorthand statement, or they can</span> <span data-start="190.91" data-end="195.47">even be used inside calc next to other key words and other values.</span> <span data-start="195.47" data-end="201.02">However, they can't be used inside media rules, and they can't be used inside selectors, so</span> <span data-start="201.02" data-end="207.819">that means like Nth child are out which is unfortunate.</span> </p>
<p><span data-start="207.819" data-end="212.15">That ends my crash course on custom properties.</span> <span data-start="212.15" data-end="216.349">There's probably a lot more that you want to know about the syntax and how they work,</span> <span data-start="216.349" data-end="221.82">like how do we use fallback values and assign custom properties to others, and the answer</span> <span data-start="221.82" data-end="226.85">to that one is yes, but this should be enough of an understanding so that we can get to</span> <span data-start="226.85" data-end="230.11">know some of the other strategies we have in this talk.</span> <span data-start="230.11" data-end="234.37">Cosmetic differences aside, one of the most significant differences between variables</span> <span data-start="234.37" data-end="238.64">and preprocessors and custom properties is how they are scoped.</span> </p>
<p><span data-start="238.64" data-end="243.04">We can refer to variables as statically or dynamically scoped.</span> <span data-start="243.04" data-end="245.5">And preprocessors are static.</span> <span data-start="245.5" data-end="252.379">So where CSS is concerned, static means that — static means we can update the value of</span> <span data-start="252.379" data-end="256.789">a variable at different points in the compilation process, but we can't change the value of</span> <span data-start="256.789" data-end="258.259">the variables that came before it.</span> <span data-start="258.259" data-end="262.78">You can see, even though I'm using the same variable name and targeting the same selector,</span> <span data-start="262.78" data-end="268.69">the output or generated CSS on this side is going to be whatever the value was at that</span> <span data-start="268.69" data-end="270.419">time it was read.</span> <span data-start="270.419" data-end="277.139">This means that we could potentially read an entire document css file without knowing</span> <span data-start="277.139" data-end="284.839">what the — and that's not something that we can do with custom properties.</span> </p>
<p><span data-start="284.839" data-end="287.139">Custom properties work differently.</span> <span data-start="287.139" data-end="292.18">Where custom properties are concerned, dynamically scoped means they're subject to inheritance</span> <span data-start="292.18" data-end="293.86">in the cascade.</span> <span data-start="293.86" data-end="298.11">It means this property is tied to a selector, and, if the value changes, it affects all</span> <span data-start="298.11" data-end="302.039">matching DOM elements, like any other CSS selector would.</span> <span data-start="302.039" data-end="306.569">This is great because it means that we can update the value of a custom property using</span> <span data-start="306.569" data-end="312.039">a media query, a hover state, or a JavaScript, and we don't have to change which custom property</span> <span data-start="312.039" data-end="315.879">we're using, just need to update its value with CSS.</span> <span data-start="315.879" data-end="319.909">I want to show you a little bit of an example of this which is why I was struggling to see</span> <span data-start="319.909" data-end="321.02">the cursor here before.</span> </p>
<p><span data-start="321.02" data-end="326.259">So, if I apply this example to my slides, you can see that the heading colour is picked</span> <span data-start="326.259" data-end="331.729">up this light salmon which will affect all of my slides, including the previous one there.</span> <span data-start="331.729" data-end="337.099">However, I can scope this to just slide 15 as well.</span> <span data-start="337.099" data-end="346.63">And you will see that none of the previous slides are going to be affected any more.</span> <span data-start="346.63" data-end="352.789">In addition to being static or dynamic, variables can be global or local.</span> <span data-start="352.789" data-end="355.189">If you write JavaScript, you will know what I mean here.</span> <span data-start="355.189" data-end="359.279">Variables can be assigned to everything inside an application, or their scope can be limited</span> <span data-start="359.279" data-end="362.539">to specific functions or blocks of code.</span> <span data-start="362.539" data-end="364.789">Custom properties are kind of similar.</span> </p>
<p><span data-start="364.789" data-end="369.949">So, custom properties are by fault locally scoped to the selectors that we've applied</span> <span data-start="369.949" data-end="373.43">them to, so they're like local variables.</span> <span data-start="373.43" data-end="379.09">However, because custom properties are also inherited, this means in many situations,</span> <span data-start="379.09" data-end="383.229">they can behave a lot like global variables as well, especially if we're using them on</span> <span data-start="383.229" data-end="387.93">the root selector but they're kind of global.</span> <span data-start="387.93" data-end="392.629">When it comes to CSS, we have some things that are global, and we want them applied</span> <span data-start="392.629" data-end="398.599">consistently across our application — things like topography, spacing, colours — these</span> <span data-start="398.599" data-end="403.059">are all examples of you might want to apply globally and consistently across your application.</span> </p>
<p><span data-start="403.059" data-end="411.369">This is a section from the Lonely Planet Style Guide.</span> <span data-start="411.369" data-end="414.099">It contains things like the colour palettes and the topography.</span> <span data-start="414.099" data-end="416.46">They have local things too.</span> <span data-start="416.46" data-end="419.089">So, for example, a button component.</span> </p>
<p><span data-start="419.089" data-end="422.439">That's in a section called "UI components", and, when we use those terms would be , we're</span> <span data-start="422.439" data-end="424.539">often talking about local things.</span> <span data-start="424.539" data-end="431.029">There will be variables for these things too, colour variations, the sizes we have for buttons.</span> <span data-start="431.029" data-end="433.779">All of these would be local variables.</span> <span data-start="433.779" data-end="437.849">This is something we are familiar with in CSS as well.</span> <span data-start="437.849" data-end="442.029">We've created things like design systems, style guides, naming conventions, JavaScript</span> <span data-start="442.029" data-end="447.24">libraries, all to help with dealing with this problem of global sign elements, and isolating</span> <span data-start="447.24" data-end="448.929">them from local component concerns.</span> <span data-start="448.929" data-end="454.19">I think that custom properties now provide some new opportunities for dealing with this</span> <span data-start="454.19" data-end="456.479">old problem.</span> <span data-start="456.479" data-end="462.439">So, as it turns out, most global things in CSS are also static.</span> <span data-start="462.439" data-end="466.749">Your brand colours, your topography, don't — typography don't change of from one component</span> <span data-start="466.749" data-end="468.149">to another.</span> <span data-start="468.149" data-end="472.83">Of course, these can change, but where it does, it tends to be a global rebrand and</span> <span data-start="472.83" data-end="478.569">not something that happens very often on any mature product.</span> </p>
<p><span data-start="478.569" data-end="483.69">And this is why I think it makes sense to continue using a preprocessor for static variables.</span> <span data-start="483.69" data-end="489.699">So, aside from helping keep dynamic and static concerns separate in the code, it visually</span> <span data-start="489.699" data-end="494.3">denotes static variables and this means that you instantly know when something is going</span> <span data-start="494.3" data-end="500.349">to change globally, or when something sort of more dynamic and local, and therefore we're</span> <span data-start="500.349" data-end="503.409">probably using a custom property.</span> <span data-start="503.409" data-end="507.729">This will make CSS a whole lot easier to read and therefore easier to maintain.</span> <span data-start="507.729" data-end="512.58">There are a few small exceptions to this rule, and one of them is client-side theming.</span> <span data-start="512.58" data-end="517.28">For the most part, I would call in a 90-per cent rule, and one of the most important strategies</span> <span data-start="517.28" data-end="519.52">for working with custom properties effectively.</span> <span data-start="519.52" data-end="526.18">If you're taking notes, I can this is one that you should possibly write down.</span> <span data-start="526.18" data-end="532.01">You might think that, given my strong stance there on global variables being static, the</span> <span data-start="532.01" data-end="536.8">buy reflection, perhaps all local things should be dynamic.</span> </p>
<p><span data-start="536.8" data-end="541.72">And whilst it's true that local variables do tend to be dynamic, this is nowhere near</span> <span data-start="541.72" data-end="546.7">as strong as the tendency for global things to be static, and, in many situations, it</span> <span data-start="546.7" data-end="552.25">makes a lot of sense still to have local variables that are static or use preprocessors.</span> <span data-start="552.25" data-end="555.91">That's especially the case for more complex UI components.</span> <span data-start="555.91" data-end="560.76">But of course, complex UI components don't make great slides, so I've come up with a</span> <span data-start="560.76" data-end="562.05">fairly simple example here.</span> <span data-start="562.05" data-end="567.5">Again, I'm using the example of different size variations for a button component.</span> <span data-start="567.5" data-end="572.75">I use variables like this mostly as a developer convenience, and you can see I've got things</span> <span data-start="572.75" data-end="576.56">like button small, medium, and large.</span> <span data-start="576.56" data-end="581.64">And I prefixed those variables with the component name so that I know that these are local variables</span> <span data-start="581.64" data-end="587.22">but you could use a different prefix, like C for component, or L for local, with , or</span> <span data-start="587.22" data-end="590.79">even prefix global variables if you wanted to.</span> <span data-start="590.79" data-end="594.91">Whatever you choose to do, I think it makes sense to differentiate between local static</span> <span data-start="594.91" data-end="599.33">variables, or preprocessor variables, and global static variables.</span> </p>
<p><span data-start="599.33" data-end="605.02">Now, if we take this simple example, and I decide that I want all of the buttons to use</span> <span data-start="605.02" data-end="610.47">the small size on mobile devices or small screens, we suddenly have a more dynamic sort</span> <span data-start="610.47" data-end="616.2">of situation here, and this is something that means that custom properties possibly make</span> <span data-start="616.2" data-end="619.33">a lot more sense.</span> <span data-start="619.33" data-end="624.02">So luckily, we can assign preprocessor variables to custom properties.</span> <span data-start="624.02" data-end="630.81">Now, you might be wondering what this hash and curly braces around the variable are.</span> <span data-start="630.81" data-end="641.05">This is because $.button.small is a recent value, and we need to interpolate these variables,</span> <span data-start="641.05" data-end="647.211">and tells Sass that you want to output the variable and not $.button.small in the style</span> <span data-start="647.211" data-end="648.211">sheet.</span> <span data-start="648.211" data-end="656.34">This is needed where variables are valid CSS or variable names are valid CSS.</span> <span data-start="656.34" data-end="662.99">Okay, so here you can see I've started off with a button class and created a button property</span> <span data-start="662.99" data-end="664.68">with the size of button small.</span> <span data-start="664.68" data-end="669.04">That would be on all of those buttons there.</span> <span data-start="669.04" data-end="673.421">Using a media query above 600 pixels, I'm changing the value of that custom property</span> <span data-start="673.421" data-end="680.12">to button large or medium, and I don't need to change the small one because it stays the</span> <span data-start="680.12" data-end="681.12">same.</span> </p>
<p><span data-start="681.12" data-end="685.04">What this results this is static variables becoming locally dynamic, so you can still</span> <span data-start="685.04" data-end="686.42">use a mix of two.</span> <span data-start="686.42" data-end="690.05">If you're refactoring, this is a pattern you might want to consider.</span> <span data-start="690.05" data-end="694.47">Then finally here, you can see that I'm retrieving the value of that custom property just in</span> <span data-start="694.47" data-end="697.87">one place, and, once again, it is only on the button class which would be on all of</span> <span data-start="697.87" data-end="698.87">those buttons.</span> <span data-start="698.87" data-end="703.16">Yet it's going to have a different value, depending on the conditions above.</span> <span data-start="703.16" data-end="707.96">Okay, so just a little deviation here.</span> <span data-start="707.96" data-end="711.61">Hands up anyone who has written an overly complexion Sass abstraction only to get their</span> <span data-start="711.61" data-end="712.61">hands burnt?</span> <span data-start="712.61" data-end="713.74">A few people.</span> <span data-start="713.74" data-end="719.26">A few people who have gone back to using Sass for variables?</span> <span data-start="719.26" data-end="725.53">That describes my experience initially, and I read a really interesting block post on</span> <span data-start="725.53" data-end="731.05">this topic recently, on the free code camp, saying don't do it at run time but do it at</span> <span data-start="731.05" data-end="736.22">design time, by Bill Sawyer, and he gave this example here.</span> </p>
<p><span data-start="736.22" data-end="737.22">This is really clever.</span> <span data-start="737.22" data-end="742.2">What it does is creates an array of letters of the alphabet by looping over different</span> <span data-start="742.2" data-end="744.43">character codes and pushing them into the array.</span> <span data-start="744.43" data-end="749.42">Obviously, it is like a really nice concise bit of code, smaller, go going to be faster</span> <span data-start="749.42" data-end="753.85">than writing out all of those values by hand but I agree with the author.</span> </p>
<p><span data-start="753.85" data-end="756.24">The alphabet is not likely to change.</span> <span data-start="756.24" data-end="758">And I want to see what is in that array.</span> <span data-start="758" data-end="763.79">So code like this, whilst clever, isn't necessarily helpful in a production setting.</span> <span data-start="763.79" data-end="770.08">The dynamic nature of custom properties allows us to create clever and complicated abstractions.</span> <span data-start="770.08" data-end="773.08">This example here generates a modular scale.</span> <span data-start="773.08" data-end="778.21">A modular scale is like a series of numbers that relate to each other with a given ratio,</span> <span data-start="778.21" data-end="782.42">and they're often used for things lying heading and font sizes, and spacing, in web design.</span> <span data-start="782.42" data-end="787">And I could talk a whole lot about modular scales and how we might use them.</span> </p>
<p><span data-start="787" data-end="797">In this talk, the modular scale is generated at run time using custom properties, and the</span> <span data-start="797" data-end="798.82">ratio there.</span> <span data-start="798.82" data-end="805.351">The value of each of these is calculated using that ratio and the value of the custom property</span> <span data-start="805.351" data-end="807.46">that came before it.</span> <span data-start="807.46" data-end="813.06">What this means is we can change the ratio, and all of those custom properties are going</span> <span data-start="813.06" data-end="819.89">to be recalculated live in the browser at run time.</span> <span data-start="819.89" data-end="825.51">Custom properties shouldn't be and won't be immune to this experimentation and innovation.</span> <span data-start="825.51" data-end="829.32">We did it with preprocessors as well.</span> <span data-start="829.32" data-end="834.33">In the long run, I think that readable, maintainable code, is going to win over clever abstraction</span> <span data-start="834.33" data-end="836.529">s like this, at least in production.</span> <span data-start="836.529" data-end="842.84">In production, I might like to see something a little bit more like this.</span> </p>
<p><span data-start="842.84" data-end="847.74">Here I can easily read what the value of each of those custom properties is going to be.</span> <span data-start="847.74" data-end="849.029">This is good.</span> <span data-start="849.029" data-end="852.02">Because we recode many more times than we write it.</span> <span data-start="852.02" data-end="855.86">Once I figured out what I think these values should be, it's not likely that these are</span> <span data-start="855.86" data-end="859.31">going to change of in my application.</span> <span data-start="859.31" data-end="863.86">That's why I think it makes sense to generate code like this at design time.</span> <span data-start="863.86" data-end="866.94">Of course, this example here can still be improved.</span> <span data-start="866.94" data-end="871.51">It violates the rule earlier that sort of all global variables should be static, and</span> <span data-start="871.51" data-end="873.59">I consider these fairly global.</span> <span data-start="873.59" data-end="878.05">I would much prefer to make these pro processor variables and then convert them to locally</span> <span data-start="878.05" data-end="883.21">dynamic custom properties as required, using the technique that I showed you before with</span> <span data-start="883.21" data-end="885.07">the buttons.</span> <span data-start="885.07" data-end="889.25">I think that is also important to avoid situations where we name custom properties like this</span> <span data-start="889.25" data-end="894.82">- font size 1, 2, et cetera, because this can result in a situation where we go from</span> <span data-start="894.82" data-end="898.8">using one custom property to a different custom property.</span> </p>
<p><span data-start="898.8" data-end="901.52">That brings me to my next strategy.</span> <span data-start="901.52" data-end="904.21">That is change the value, not the variable.</span> <span data-start="904.21" data-end="907.58">Once again, this is one of the most important strategies for working with custom properties</span> <span data-start="907.58" data-end="911.43">effectively: if you're taking notes, perhaps underline that one.</span> <span data-start="911.43" data-end="916.94">So, unfortunately, I see a lot of examples like this with custom properties.</span> <span data-start="916.94" data-end="921.53">Here we have two custom properties, one called font size small, one called font size large,</span> <span data-start="921.53" data-end="926.41">and then using a media query, I'm switching from using the small to the large one.</span> </p>
<p><span data-start="926.41" data-end="931.81">This is exactly how we would have done things with preprocessors, but with custom properties,</span> <span data-start="931.81" data-end="933.97">this doesn't make a great deal of sense.</span> <span data-start="933.97" data-end="939.21">So, with custom properties, a far better way to do this would be to define a single custom</span> <span data-start="939.21" data-end="944.89">property, and we zero that to the component, and in this case, it is the example component.</span> <span data-start="944.89" data-end="948.98">As a general rule, we should never change which custom property we're using for any</span> <span data-start="948.98" data-end="950.09">single purpose.</span> <span data-start="950.09" data-end="956.11">So, with the media query, I'm updating the value of the same custom property here.</span> <span data-start="956.11" data-end="960.19">Then once again, in a single place, I'm retrieving the value of that custom property.</span> <span data-start="960.19" data-end="965.13">And you will notice that the media query here is only used to change the value of the custom</span> <span data-start="965.13" data-end="968">property, not to retrieve that value.</span> <span data-start="968" data-end="971.36">And there's very good reasons why I've done this, and you will see this pattern again</span> <span data-start="971.36" data-end="975.779">throughout my talk, and it brings me to my next set of strategies which is for responsive</span> <span data-start="975.779" data-end="977.54">design.</span> <span data-start="977.54" data-end="983.16">So, one of the problems with responsive design when it relies heavily on media queries is</span> <span data-start="983.16" data-end="988.17">that, no matter how we organise our CSS, all of the styles relating to particular components</span> <span data-start="988.17" data-end="992.92">become fragmented across the style sheet, and it can be difficult to know which CSS</span> <span data-start="992.92" data-end="995.83">properties are going to change.</span> </p>
<p><span data-start="995.83" data-end="1000.37">So custom properties can help us organise some of this logic related to responsive design</span> <span data-start="1000.37" data-end="1004.07">and make working with media queries a whole lot easier.</span> <span data-start="1004.07" data-end="1009.94">So, my first strategy for responsive design is if it changes, it's a variable.</span> <span data-start="1009.94" data-end="1015.529">What I mean by this is if you're using a media query or a hover state to update the value</span> <span data-start="1015.529" data-end="1020.93">of a CSS property, perhaps you should replace this in a custom property and move it along</span> <span data-start="1020.93" data-end="1025.689">with a selector and the media query whatever else changes its value up to the top of the</span> <span data-start="1025.689" data-end="1028.25">document.</span> <span data-start="1028.25" data-end="1033.679">If done correctly, this means that media queries will only be used to update the value of custom</span> <span data-start="1033.679" data-end="1037.61">properties.</span> <span data-start="1037.61" data-end="1042.749">As a result of that, we will have a clear separation of logic from its implementation.</span> </p>
<p><span data-start="1042.749" data-end="1046.25">This means that all the logic will be at the top of the do you mean, and wherever we see</span> <span data-start="1046.25" data-end="1050.86">a vast statement, we immediately know that this is something that changes in our CSS,</span> <span data-start="1050.86" data-end="1055.149">and with traditional methods of writing CSS, there's no way of knowing this.</span> <span data-start="1055.149" data-end="1061.45">It creates a link between logic and its implementation, and I find that incredibly useful.</span> </p>
<p><span data-start="1061.45" data-end="1066.009">So the idea of declaring variables at the top of a document is not a new idea, it's</span> <span data-start="1066.009" data-end="1069.669">something we've done in many programming languages, and it's something we do with preprocessors</span> <span data-start="1069.669" data-end="1075.019">instinctively, and it's something we can do with regular CSS as well.</span> <span data-start="1075.019" data-end="1080.869">So, writing CSS in this way creates a clear distinction between the CSS at the top of</span> <span data-start="1080.869" data-end="1083.779">the document and the CSS below.</span> <span data-start="1083.779" data-end="1086.841">And I need a way to differentiate between these sections when I talk about them, so</span> <span data-start="1086.841" data-end="1089.759">I've come up with this metaphor of logic fold.</span> <span data-start="1089.759" data-end="1095.23">Above the fold contains all the custom properties, and the selectors that might change those</span> <span data-start="1095.23" data-end="1100.539">values, and, below the fold, it's highly declarative and straightforward and easy to read, and,</span> <span data-start="1100.539" data-end="1105.499">in fact, it feels like the kind of CSS we used to write some years ago before media</span> <span data-start="1105.499" data-end="1109.679">queries and other complexities of the modern language.</span> <span data-start="1109.679" data-end="1112.289">So this is what it might look like above the fold.</span> <span data-start="1112.289" data-end="1116.929">As you can see here, this section only contains custom properties, and more than that, it</span> <span data-start="1116.929" data-end="1120.889">only contains examples where we're assigning values to custom properties, not retrieving</span> <span data-start="1120.889" data-end="1121.99">them.</span> </p>
<p><span data-start="1121.99" data-end="1126.27">You might have figured out this is for a basic six-column Flexbox grid system and I have</span> <span data-start="1126.27" data-end="1132.48">a Flexbox there called row display, and using media query, updating the value from block</span> <span data-start="1132.48" data-end="1138.499">to flex, so all of those custom properties will come into effect.</span> <span data-start="1138.499" data-end="1143.86">So, below the fold, I can see which CSS properties are going to be changed.</span> <span data-start="1143.86" data-end="1148.23">I know that the row classes using the row display one, and for the display report, which</span> <span data-start="1148.23" data-end="1155.47">isn't surprising, and I can see that the value used for the flex basis and what is interesting</span> <span data-start="1155.47" data-end="1159.85">is the value of that custom property will be different depending on which of the classes</span> <span data-start="1159.85" data-end="1162.09">is applied in the HTML.</span> <span data-start="1162.09" data-end="1165.07">And it can make CSS like that a lot less verbose.</span> <span data-start="1165.07" data-end="1169.83">We only need the one place where we are defining the styles, and I can look back above the</span> <span data-start="1169.83" data-end="1174.409">fold, and I can see what those values are going to be in the different situations that</span> <span data-start="1174.409" data-end="1177.419">might exist within the browser.</span> <span data-start="1177.419" data-end="1184.09">So, writing CSS in this way is easy to maintain because all of the logic is in one place,</span> <span data-start="1184.09" data-end="1186.519">and all the declarative code is somewhere else.</span> <span data-start="1186.519" data-end="1188.85">It's easy to read because we know what is changing.</span> <span data-start="1188.85" data-end="1193.029">Anything without reading and interpreting the whole style sheet, as many of us have</span> <span data-start="1193.029" data-end="1199.179">become good at doing, and what it will result is all the styles and design concerns being</span> <span data-start="1199.179" data-end="1204.049">in one place for each individual component, and separating the logic from the implementation</span> <span data-start="1204.049" data-end="1210.01">like this is again another important strategy for working effectively with custom properties.</span> </p>
<p><span data-start="1210.01" data-end="1215.08">Of course, all rules are meant to be broken, and that brings me to my next set of strategies</span> <span data-start="1215.08" data-end="1217.19">for theming.</span> <span data-start="1217.19" data-end="1222.169">So, throughout this talk, there are a lot of places where I've already argued against</span> <span data-start="1222.169" data-end="1227.83">using custom properties for sort of global, dynamic variables, and hopefully, I've implied</span> <span data-start="1227.83" data-end="1233.679">that assigning custom properties to the root selector is in many cases considered harmful,</span> <span data-start="1233.679" data-end="1237.149">but like I said, every rule has an exception, and for the custom properties, it is theming,</span> <span data-start="1237.149" data-end="1244.429">and I think that limited use of global dynamic variables for theming makes it a lot of sense.</span> <span data-start="1244.429" data-end="1249.41">So theming generally refers to updating the UI in some way, could be something like the</span> <span data-start="1249.41" data-end="1253.259">Twitter profile page here, changing the colours, the background image of a profile picture,</span> <span data-start="1253.259" data-end="1254.259">et cetera.</span> <span data-start="1254.259" data-end="1258.26">Or it could also be something more localised, so, for example, changing the colour of a</span> <span data-start="1258.26" data-end="1264.389">note in Google Keep application, or you might have used a similar note-keeping application</span> <span data-start="1264.389" data-end="1266.249">like that.</span> </p>
<p><span data-start="1266.249" data-end="1270.369">Theming usually involves compiling a separate style sheet for user preferences and this</span> <span data-start="1270.369" data-end="1271.369">can be difficult.</span> <span data-start="1271.369" data-end="1275.97">It is not very performant because it means we might be re-rendering the page in many</span> <span data-start="1275.97" data-end="1276.97">situations.</span> <span data-start="1276.97" data-end="1280.909">So, with custom properties, we don't compile the separate style sheets, all we need to</span> <span data-start="1280.909" data-end="1285.279">do is put the user variables or the user custom property up on the root selector, and these</span> <span data-start="1285.279" data-end="1289.059">can be inherited by the default style sheet.</span> <span data-start="1289.059" data-end="1301.929">So, Ida and Dag will show you practical examples later on.</span> </p>
<p><span data-start="1301.929" data-end="1306.159">I think that we should be very deliberate and considerate about the use of custom properties</span> <span data-start="1306.159" data-end="1311.059">when it comes to theming, because these global dynamic variables can be a lot harder to maintain,</span> <span data-start="1311.059" data-end="1316.669">but lately, custom properties are case-sensitive, and since most of our custom properties are</span> <span data-start="1316.669" data-end="1321.94">going to be local, if we're using dynamic global custom properties, it can make sense</span> <span data-start="1321.94" data-end="1323.48">to capitalise them.</span> <span data-start="1323.48" data-end="1329.009">So, capitalisation of variables often signifies global constants, and for us, this is going</span> <span data-start="1329.009" data-end="1334.009">to signify that the value of the custom property might be set somewhere else in the application,</span> <span data-start="1334.009" data-end="1338.08">and we probably should not change it locally.</span> <span data-start="1338.08" data-end="1344.559">I think that it can be useful to avoid directly overriding these global theme values, and</span> <span data-start="1344.559" data-end="1346.299">that's why I've used an example like this.</span> <span data-start="1346.299" data-end="1352.23">Here I'm setting the value of theme colour to the value of user theme colour, if it exists,</span> <span data-start="1352.23" data-end="1357.33">and then this value here is a fallback value for when the user theme colour doesn't exist.</span> <span data-start="1357.33" data-end="1361.69">So, if we're using theme colour throughout our application, it's going to fall back nicely</span> <span data-start="1361.69" data-end="1365.179">whenever the user has not set that preference.</span> <span data-start="1365.179" data-end="1367.549">So I want to show you a quick example of this.</span> </p>
<p><span data-start="1367.549" data-end="1375.049">Here, I've set the value of the background to theme colour, and if I apply this to my</span> <span data-start="1375.049" data-end="1377.889">slides, the background colour is going to change.</span> <span data-start="1377.889" data-end="1384.32">Now, I want you to have a think about what will happen when using a theme colour available</span> <span data-start="1384.32" data-end="1388.7">in the body here.</span> <span data-start="1388.7" data-end="1394.63">The answer might surprise you, that we are still falling back to this default value here,</span> <span data-start="1394.63" data-end="1398.679">and the reason for that value is the value of the user theme colour has been set on the</span> <span data-start="1398.679" data-end="1403.499">root element, and that's where we are this value is free from.</span> <span data-start="1403.499" data-end="1416.419">So, obviously, when I move through the [ ..]. That can be a useful pattern if you want to avoid</span> <span data-start="1416.419" data-end="1422.73">people from overriding these global values in different places in your application.</span> <span data-start="1422.73" data-end="1429.049">Also, something a bit more complicated, it can be helpful sometimes to expose those variables</span> <span data-start="1429.049" data-end="1431.029">with a star selector.</span> </p>
<p><span data-start="1431.029" data-end="1438.12">This makes the theme colour custom property on every element, and then that means that</span> <span data-start="1438.12" data-end="1442.879">it is recalculated for the body element and we're able to pick you want value of that</span> <span data-start="1442.879" data-end="1444.159">user theme colour.</span> <span data-start="1444.159" data-end="1449.32">I'm going to delete that and put my slides back to the normal colour.</span> <span data-start="1449.32" data-end="1455.509">Okay, so, if you want to set the value of custom properties with JavaScript, there's</span> <span data-start="1455.509" data-end="1459.869">a fairly simple API, and it looks a little bit like this.</span> <span data-start="1459.869" data-end="1465.881">I'm setting the theme colour to tomato, doing it on the document element there which is</span> <span data-start="1465.881" data-end="1469.44">the equivalent of the root element.</span> <span data-start="1469.44" data-end="1474.19">One of the really cool things about this is, if you have a technical design team, you can</span> <span data-start="1474.19" data-end="1478.73">assign these variables up on the root element there, and then they can decide how they should</span> <span data-start="1478.73" data-end="1482.929">be used throughout the style sheet, and this allows you to make large changes to how theming</span> <span data-start="1482.929" data-end="1488.289">works in your application without having to touch any backend code and without necessarily</span> <span data-start="1488.289" data-end="1493.45">having to touch any JavaScript, so that can be really useful as well before if you're</span> <span data-start="1493.45" data-end="1494.649">- as well.</span> </p>
<p><span data-start="1494.649" data-end="1500.47">If you're using a static site generator, or something like React or vue, you can write</span> <span data-start="1500.47" data-end="1504.98">these custom properties out to style attributes as well, and these are going to have greater</span> <span data-start="1504.98" data-end="1508.399">specificity than any defaults in the style sheets, so these values are likely to be picked</span> <span data-start="1508.399" data-end="1510.45">up if used correctly.</span> <span data-start="1510.45" data-end="1517.379">It's like a component-level thing except the props are passed through the style attributes,</span> <span data-start="1517.379" data-end="1524.419">and I've seen it used for things like getting multi-coloured icons with SVG, and a whole</span> <span data-start="1524.419" data-end="1528.45">lot of tricks you can do with this pattern, and I'm a big fan of that.</span> <span data-start="1528.45" data-end="1535.149">So the final strategy I have for you is to started using custom properties today.</span> <span data-start="1535.149" data-end="1539.98">Even if you're supporting IE10 and 11, you can start using some of these techniques.</span> <span data-start="1539.98" data-end="1545.52">So much of what I've been talking about today is how we write and structure CSS, and this</span> <span data-start="1545.52" data-end="1550.649">means that we can use tools like post-CSS to write this out to a static representation</span> <span data-start="1550.649" data-end="1553.25">of the same code.</span> </p>
<p><span data-start="1553.25" data-end="1558.51">I use a tool called post-CSS variables, and I know it is a little bit confusing but not</span> <span data-start="1558.51" data-end="1563.59">post-CSS variables and not post-CSS custom properties, the reason for that is am so of</span> <span data-start="1563.59" data-end="1568.539">those libraries can't determine what the custom properties will be inside media queries and</span> <span data-start="1568.539" data-end="1574.019">other things, they treat them custom properties a lot like static variables, or a lot like</span> <span data-start="1574.019" data-end="1579.429">preprocessor variables, but that first one will do a better job of that.</span> <span data-start="1579.429" data-end="1583.64">Obviously, this technique won't be able to do some of the dynamic things, like some of</span> <span data-start="1583.64" data-end="1586.679">the theming examples that I've talked about, but that might be okay.</span> <span data-start="1586.679" data-end="1591.309">It might be perfectly acceptable for older browsers to fall back to a default theme,</span> <span data-start="1591.309" data-end="1596.21">and you apply theming and customisation and a progressive enhancement.</span> </p>
<p><span data-start="1596.21" data-end="1600.961">If you want to know more about the specific techniques I use for generating this, come</span> <span data-start="1600.961" data-end="1607.11">and talk to me afterwards because I don't have time to go into the build process.</span> <span data-start="1607.11" data-end="1610.44">I know what you're thinking here.</span> <span data-start="1610.44" data-end="1613.2">Mike, this is great, but I haven't been listening.</span> <span data-start="1613.2" data-end="1616.039">Could you give me the whole talk again in one sentence?</span> </p>
<p><span data-start="1616.039" data-end="1617.999">Yes, I can!</span> <span data-start="1617.999" data-end="1622.57">It comes down to understanding the difference between dynamic and static variables in CSS,</span> <span data-start="1622.57" data-end="1625.32">and, a few simple rules.</span> <span data-start="1625.32" data-end="1629.029">Global variables are usually static, separate logic from design.</span> <span data-start="1629.029" data-end="1635.789">If a CSS changes, it might be a custom property, and change the value, not which custom property</span> <span data-start="1635.789" data-end="1636.789">is used.</span> <span data-start="1636.789" data-end="1639.59">If you follow these conventions, you might find that working with custom properties is</span> <span data-start="1639.59" data-end="1644.799">a whole lot easier than you think, and it might even change how you approach CSS in</span> <span data-start="1644.799" data-end="1650.89">general, and, yes, that was one sentence and I can't use a full stop.</span> <span data-start="1650.89" data-end="1652.83">If you have any questions, please come and see me.</span> </p>
<p><span data-start="1652.83" data-end="1655.119">There are other examples that I would love to show people.</span> <span data-start="1655.119" data-end="1656.26">Thanks very much for your time!</span> </p>
</section>