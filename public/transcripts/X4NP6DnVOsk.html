<section>
<p><span data-start="37.719" data-end="42.71">everybody thanks for having me my</span> <span data-start="42.71" data-end="45.23">mission today is to walk you two through</span> <span data-start="45.23" data-end="50.51">a bit of code to implement a vendre in</span> <span data-start="50.51" data-end="53.96">JavaScript and as just said it's kind of</span> <span data-start="53.96" data-end="55.309">the best thing that I bounced already</span> <span data-start="55.309" data-end="58.309">does so why would we be doing this let's</span> <span data-start="58.309" data-end="62.499">say for now we just we just want to so a</span> <span data-start="62.499" data-end="65.689">bit more detail what do we want to do</span> <span data-start="65.689" data-end="70.939">today um so we want to misuse a few new</span> <span data-start="70.939" data-end="72.86">browser features that came up with html5</span> <span data-start="72.86" data-end="75.47">and stuff I want to use a bit JavaScript</span> <span data-start="75.47" data-end="79.7">to manipulate SVG HTML CSS DOM and the</span> <span data-start="79.7" data-end="84.74">CSS object model in any order so I hope</span> <span data-start="84.74" data-end="86.17">you guys have some fun on the way i</span> <span data-start="86.17" data-end="89.93">seriously had a lot of fun doing this so</span> <span data-start="89.93" data-end="94.399">um a bit more detail so what we want to</span> <span data-start="94.399" data-end="96.229">do is we want to trigger the HTML</span> <span data-start="96.229" data-end="97.759">rendering capabilities of the browser</span> <span data-start="97.759" data-end="100.759">from javascript so that basically what</span> <span data-start="100.759" data-end="102.68">the browser is doing at its best is it</span> <span data-start="102.68" data-end="105.289">just takes HTML and shows us to us in a</span> <span data-start="105.289" data-end="107.869">nice way what I want to do is get a</span> <span data-start="107.869" data-end="110.63">screenshot from a random webpage oh it's</span> <span data-start="110.63" data-end="113.75">not so random but and actually render</span> </p>
<p><span data-start="113.75" data-end="116.18">HTML in the canvas or in other words</span> <span data-start="116.18" data-end="118.909">basically implementing a prolly fill</span> <span data-start="118.909" data-end="121.82">which is kind of filling a gap that has</span> <span data-start="121.82" data-end="123.799">not been defined by a standards body</span> <span data-start="123.799" data-end="126.02">it's not there but I still think this</span> <span data-start="126.02" data-end="128.78">gap is needs filling and this is how it</span> <span data-start="128.78" data-end="130.25">looks like it's basically just canvas</span> <span data-start="130.25" data-end="133.849">get context droid tml that's what I want</span> <span data-start="133.849" data-end="135.86">to do it looks pretty easy does it</span> <span data-start="135.86" data-end="140.51">so let's see so those very quick</span> <span data-start="140.51" data-end="144.29">solution of Firefox gratefully offers an</span> <span data-start="144.29" data-end="147.08">API to that basically all you do is get</span> <span data-start="147.08" data-end="149.66">a canvas get the context and you draw a</span> <span data-start="149.66" data-end="153.14">window to that canvas or that's</span> <span data-start="153.14" data-end="156.1">basically what I want to do right</span> <span data-start="156.1" data-end="159.47">there's about two that it only works as</span> <span data-start="159.47" data-end="161.75">a plug-in in Firefox so if you are</span> <span data-start="161.75" data-end="163.459">plug-in you allow to you make use of</span> <span data-start="163.459" data-end="167.12">that from the web page you do not you do</span> <span data-start="167.12" data-end="170.57">not you do not go through that so you</span> <span data-start="170.57" data-end="174.08">have to you have to be a plug-in this of</span> <span data-start="174.08" data-end="177.08">course is due to security concerns so if</span> <span data-start="177.08" data-end="179.239">the browser would allow you to render a</span> <span data-start="179.239" data-end="182.6">random web page you could just go just</span> <span data-start="182.6" data-end="185.959">like painter the open gmail tab of your</span> <span data-start="185.959" data-end="188.239">user rendered to the canvas and then</span> <span data-start="188.239" data-end="189.89">read back from it and that would allow</span> <span data-start="189.89" data-end="193.28">us to get content that we're not allowed</span> <span data-start="193.28" data-end="195.37">to see so of course that is forbidden</span> <span data-start="195.37" data-end="200.15">and yeah that's not that's not bringing</span> <span data-start="200.15" data-end="204.44">us further so let's see so maybe SVG can</span> <span data-start="204.44" data-end="208.13">help us here the if you guys know canvas</span> <span data-start="208.13" data-end="209.93">the canvas does allow me to draw an</span> <span data-start="209.93" data-end="213.11">image well SVG is an image right so</span> <span data-start="213.11" data-end="215.12">let's see whether we can move forward to</span> <span data-start="215.12" data-end="218.93">that so maybe I don't know how public</span> <span data-start="218.93" data-end="220.7">that knowledge is but SVG does allow you</span> <span data-start="220.7" data-end="225.68">to embed foreign objects SVG is XML it</span> <span data-start="225.68" data-end="227.57">does allow anything it does allow other</span> <span data-start="227.57" data-end="229.82">contexts that all can also be XML and</span> <span data-start="229.82" data-end="233.78">for example it could be HTML or actually</span> <span data-start="233.78" data-end="236.45">a XHTML so the example that you can see</span> <span data-start="236.45" data-end="239.75">here i hope the font is big enough it's</span> <span data-start="239.75" data-end="242.06">basically just a strong element inside</span> </p>
<p><span data-start="242.06" data-end="244.04">HTML inside a foreign object in an SVG</span> <span data-start="244.04" data-end="247.28">and that is a valid image can we build</span> <span data-start="247.28" data-end="251.75">on that let's see um well first of all</span> <span data-start="251.75" data-end="255.19">what is X HTML so SVG as an XML standard</span> <span data-start="255.19" data-end="257.87">can only m-matt foreign objects that are</span> <span data-start="257.87" data-end="261.56">valid XML wall html5 goes to great</span> <span data-start="261.56" data-end="263.36">lengths of allowing you to do whatever</span> <span data-start="263.36" data-end="265.57">you want and still make it look pretty</span> <span data-start="265.57" data-end="268.61">that doesn't work well with SVG so</span> <span data-start="268.61" data-end="269.83">here's a bit of code</span> <span data-start="269.83" data-end="272.29">basically creates a document puts in</span> <span data-start="272.29" data-end="274.72">some HTML then Oh provides some XML</span> <span data-start="274.72" data-end="277.24">namespace ting and then figures the the</span> </p>
<p><span data-start="277.24" data-end="279.28">Firefox external serializer to civilize</span> <span data-start="279.28" data-end="281.53">that back to back to us and that is then</span> <span data-start="281.53" data-end="284.2">valid XML this does not work in chrome</span> <span data-start="284.2" data-end="286.15">and safari because basically what those</span> <span data-start="286.15" data-end="287.83">guys are saying is the external</span> <span data-start="287.83" data-end="290.74">serializer by stand by the standard only</span> <span data-start="290.74" data-end="294.13">needs to serialize xml so anyway that's</span> <span data-start="294.13" data-end="295.9">a shim I wrote for that which is</span> <span data-start="295.9" data-end="297.43">basically a hundred fifty lines of code</span> <span data-start="297.43" data-end="299.17">it's not that difficult but we need to</span> <span data-start="299.17" data-end="300.28">fall back to a pure JavaScript</span> <span data-start="300.28" data-end="304.3">implementation for that browser so a</span> <span data-start="304.3" data-end="308.08">second step needed um if I want to show</span> <span data-start="308.08" data-end="310.15">the SVG as an image i need to inline</span> <span data-start="310.15" data-end="312.25">this so the new the future way of doing</span> <span data-start="312.25" data-end="314.26">that you guys possibly have seen come</span> <span data-start="314.26" data-end="316.42">come across the blog interface so</span> <span data-start="316.42" data-end="318.55">basically you create a blob put that SVG</span> <span data-start="318.55" data-end="320.38">inside you find the time and you create</span> <span data-start="320.38" data-end="322.93">an object URL from that that's a future</span> <span data-start="322.93" data-end="325.06">last time I checked Safari is not up to</span> <span data-start="325.06" data-end="327.49">this so we kind of fall back to the</span> <span data-start="327.49" data-end="330.46">existing wave that works pretty well you</span> <span data-start="330.46" data-end="332.2">guys certainly know Delta your eyes so</span> <span data-start="332.2" data-end="333.91">we just type the whole SVG into a data</span> </p>
<p><span data-start="333.91" data-end="339.2">URI into an image and you're done so</span> <span data-start="339.21" data-end="341.68">yeah we can bring this together and</span> <span data-start="341.68" data-end="343.54">that's fairly simple I talked a lot but</span> <span data-start="343.54" data-end="345.4">basically that's the solution you create</span> <span data-start="345.4" data-end="347.29">a new image stuff the day URL into that</span> <span data-start="347.29" data-end="349.74">image and you draw this to the canvas</span> <span data-start="349.74" data-end="355">well congratulations basically um we're</span> <span data-start="355" data-end="358.66">done we embedded HTML as an HTML string</span> <span data-start="358.66" data-end="361.21">into a foreign object into an SVG which</span> <span data-start="361.21" data-end="362.62">we then converted into a data URI to</span> <span data-start="362.62" data-end="364.78">yield an image that we then drew into</span> <span data-start="364.78" data-end="367.24">the canvas using raw image well that</span> <span data-start="367.24" data-end="373.84">sounds all good now again but so SVG is</span> <span data-start="373.84" data-end="375.61">not allowed to reference external</span> <span data-start="375.61" data-end="379.03">resources and now it's it starts being</span> <span data-start="379.03" data-end="384.4">much more fun so if you if you draw an</span> </p>
<p><span data-start="384.4" data-end="387.64">SVG to the canvas all your resources</span> <span data-start="387.64" data-end="389.95">need need to be in line or need to be</span> <span data-start="389.95" data-end="391.72">present in that document you're not</span> <span data-start="391.72" data-end="394.63">allowed to link to external stuff well</span> <span data-start="394.63" data-end="396.28">that's a problem because HTML does allow</span> <span data-start="396.28" data-end="398.46">me to include images</span> <span data-start="398.46" data-end="401.49">buttons that are typed image style</span> <span data-start="401.49" data-end="406.71">sheets background images and import font</span> <span data-start="406.71" data-end="408.75">face that's a lot and that's that's all</span> <span data-start="408.75" data-end="411.96">referencing external resources that SVG</span> <span data-start="411.96" data-end="415.83">is not allowed to access so next step</span> <span data-start="415.83" data-end="417.479">what could we do to solve that and you</span> <span data-start="417.479" data-end="419.69">see it's it's all like very logical</span> <span data-start="419.69" data-end="421.77">steps to that it's getting its getting</span> <span data-start="421.77" data-end="424.08">worse by the minute kind of though I can</span> <span data-start="424.08" data-end="428.009">easily include images or buttons up in a</span> </p>
<p><span data-start="428.009" data-end="431.21">Type image so sorry inputs of top image</span> <span data-start="431.21" data-end="435.12">so basically all I need to do is create</span> <span data-start="435.12" data-end="437.37">get the HTML string create a document</span> <span data-start="437.37" data-end="439.8">from that so give a get a Dom structure</span> <span data-start="439.8" data-end="442.05">that I can basically just get myself all</span> <span data-start="442.05" data-end="444.449">the images iterate over those images and</span> <span data-start="444.449" data-end="446.16">just load and embed that image source</span> <span data-start="446.16" data-end="450.599">that's theory how does it look like so</span> <span data-start="450.599" data-end="454.65">um well that's an image that's an</span> <span data-start="454.65" data-end="457.56">external path external image.png what I</span> <span data-start="457.56" data-end="459.81">want to do is just replace that content</span> <span data-start="459.81" data-end="461.97">of the image as a base64 string into</span> <span data-start="461.97" data-end="464.88">that image how do I do this oh I can</span> <span data-start="464.88" data-end="466.56">load that image via Ajax right so</span> <span data-start="466.56" data-end="469.199">basically all I do is I create an xhr</span> <span data-start="469.199" data-end="472.56">request sorry xhr and wait for the image</span> <span data-start="472.56" data-end="474.33">to load and when the content is there I</span> </p>
<p><span data-start="474.33" data-end="480.12">I then serialize it to base64 yeah I</span> <span data-start="480.12" data-end="481.199">think the guys are just really upset my</span> <span data-start="481.199" data-end="485.78">time clock is not set correctly so or</span> <span data-start="485.78" data-end="488.099">basically loading loading the image file</span> <span data-start="488.099" data-end="490.409">HX and just piping this utilized base64</span> <span data-start="490.409" data-end="493.099">encoded content back to the image that</span> <span data-start="493.099" data-end="495.53">sounds bit easier than it actually is</span> <span data-start="495.53" data-end="499.86">Ajax does not allow sorry it just is not</span> <span data-start="499.86" data-end="503.25">allow you to load binary context Ajax</span> <span data-start="503.25" data-end="505.83">was defined to load XML which is text so</span> <span data-start="505.83" data-end="508.74">that is solved there's a new interface</span> <span data-start="508.74" data-end="510.36">you guys possibly know about XML HTTP</span> <span data-start="510.36" data-end="513.75">because to this knows about binary blobs</span> <span data-start="513.75" data-end="515.579">for last time I checked Safari again is</span> <span data-start="515.579" data-end="518.19">not up up to that so that's the easy</span> <span data-start="518.19" data-end="519.709">workaround it's one of the top-rated</span> <span data-start="519.709" data-end="522">answers on Stack Overflow what'd you</span> <span data-start="522" data-end="524.579">just do is when you get back the binary</span> <span data-start="524.579" data-end="527.76">content is kind of an awful state what'd</span> <span data-start="527.76" data-end="529.709">you just do is you iterate over each and</span> <span data-start="529.709" data-end="531.4">every bite</span> <span data-start="531.4" data-end="535.63">you and it with a white mask too but</span> <span data-start="535.63" data-end="538.69">basically cut of everything but outside</span> <span data-start="538.69" data-end="543.1">the the white field so that's a very</span> <span data-start="543.1" data-end="547.12">ugly hack it is very very slow if you</span> <span data-start="547.12" data-end="549.01">load like if you can make it by its a</span> <span data-start="549.01" data-end="552.16">big image yeah anyway but that's that's</span> <span data-start="552.16" data-end="553.3">the solution the best solution that</span> <span data-start="553.3" data-end="557.86">works right now so so basically I just</span> <span data-start="557.86" data-end="560.35">showed you how to email in line an image</span> <span data-start="560.35" data-end="563.89">using Ajax and then one doing the binary</span> <span data-start="563.89" data-end="565.6">conversion and I can now feed that back</span> <span data-start="565.6" data-end="567.18">into the HTML page using data your eyes</span> <span data-start="567.18" data-end="570.22">next step background images right you</span> <span data-start="570.22" data-end="571.81">remember the list i showed you a few</span> <span data-start="571.81" data-end="573.58">minutes ago basically all those</span> <span data-start="573.58" data-end="575.17">different kind of things background</span> <span data-start="575.17" data-end="576.94">image was number two how do we in line</span> <span data-start="576.94" data-end="579.13">background images background images all</span> <span data-start="579.13" data-end="581.5">images the problem is they are hidden in</span> </p>
<p><span data-start="581.5" data-end="584.44">CSS well that's pretty simple now I just</span> <span data-start="584.44" data-end="586.3">need a CSS parser to go through all my</span> <span data-start="586.3" data-end="587.86">CSS found all the background images in</span> <span data-start="587.86" data-end="589.75">line those resources just as I did</span> <span data-start="589.75" data-end="593.23">before well that's pretty simple so hey</span> <span data-start="593.23" data-end="595.69">we just want our own CSS parser for that</span> <span data-start="595.69" data-end="599.47">which then again is fairly simple so the</span> <span data-start="599.47" data-end="602.17">browser is a CS has a big CSS parser</span> <span data-start="602.17" data-end="605.14">right I mean basically a boy talking</span> <span data-start="605.14" data-end="606.52">about here's everything what the vowels</span> <span data-start="606.52" data-end="608.32">already does you just need to kind of</span> <span data-start="608.32" data-end="610.36">find a way to trigger that so here's the</span> <span data-start="610.36" data-end="612.04">power CSS method basically what it does</span> <span data-start="612.04" data-end="616.06">is it creates a style element puts the</span> </p>
<p><span data-start="616.06" data-end="617.8">CSS that you want to pass into that</span> <span data-start="617.8" data-end="620.38">style element and now he's a small ugly</span> <span data-start="620.38" data-end="623.1">hack you need to create a document</span> <span data-start="623.1" data-end="624.88">you're not interested in that document</span> <span data-start="624.88" data-end="626.98">but you need to apply that style element</span> <span data-start="626.98" data-end="629.65">that you created into some kind of Dom</span> <span data-start="629.65" data-end="631.63">structure otherwise the browser does not</span> <span data-start="631.63" data-end="634.12">execute the parsing algorithm so what</span> <span data-start="634.12" data-end="635.65">you do create a solemn and put the text</span> <span data-start="635.65" data-end="637.09">inside the style element put the style</span> <span data-start="637.09" data-end="638.83">element into the document and then</span> <span data-start="638.83" data-end="643.09">finally can access the past CSS rules so</span> <span data-start="643.09" data-end="645.37">that's the shortest CSS implementation</span> <span data-start="645.37" data-end="648.04">there is it's yan so you get from stack</span> <span data-start="648.04" data-end="651.54">overflow I think I answered that and</span> <span data-start="651.54" data-end="653.59">that's how you do CSS pausing in the</span> <span data-start="653.59" data-end="656.95">browser now we can put this together</span> <span data-start="656.95" data-end="659.98">again we pass CSS with the background</span> <span data-start="659.98" data-end="662.47">images we find we iterate over all the</span> <span data-start="662.47" data-end="664.39">rules if the property value background</span> <span data-start="664.39" data-end="664.87">image is</span> <span data-start="664.87" data-end="666.85">we in line that background images and</span> <span data-start="666.85" data-end="668.89">install that back into the CSS we've</span> <span data-start="668.89" data-end="670.51">done that with in with the image before</span> <span data-start="670.51" data-end="672.07">so this is just basically the same thing</span> <span data-start="672.07" data-end="674.02">with the added complexity of positing</span> </p>
<p><span data-start="674.02" data-end="679.27">CSS next next on the list um there are</span> <span data-start="679.27" data-end="682.69">linked elements are there with the style</span> <span data-start="682.69" data-end="684.4">sheets so what we need to do is now in</span> <span data-start="684.4" data-end="686.14">line those elements we're not allowed to</span> <span data-start="686.14" data-end="689.83">put that into an SVG the link elements</span> <span data-start="689.83" data-end="691.42">are not referenced in that SVG so we</span> <span data-start="691.42" data-end="694.87">need to inline this well sorry what what</span> <span data-start="694.87" data-end="697.54">we need to do is we need to load the</span> <span data-start="697.54" data-end="701.68">content again via Ajax that's fine then</span> <span data-start="701.68" data-end="704.43">we just put the content into a style</span> <span data-start="704.43" data-end="708.79">element and then we basically done well</span> <span data-start="708.79" data-end="711.97">not really so if you guys know CSS I</span> <span data-start="711.97" data-end="716.38">know it's jazz club but so there is the</span> <span data-start="716.38" data-end="719.83">thing that resources linked in CSS are</span> <span data-start="719.83" data-end="722.92">relative to the style sheet so if i take</span> <span data-start="722.92" data-end="725.2">starchy content take it out of the style</span> <span data-start="725.2" data-end="727.15">sheet and put it into the HTML document</span> <span data-start="727.15" data-end="730.779">the urls are all wrong so what i need to</span> <span data-start="730.779" data-end="732.49">do before pasting it into a style</span> <span data-start="732.49" data-end="734.2">element i need to go through all the</span> <span data-start="734.2" data-end="738.13">urls which is background images which is</span> <span data-start="738.13" data-end="741.04">fun phase rules and app-style imports I</span> <span data-start="741.04" data-end="744.37">need to fix this up all those URLs well</span> <span data-start="744.37" data-end="746.02">that's simple again you just need to</span> <span data-start="746.02" data-end="747.959">take care of that so here's the example</span> <span data-start="747.959" data-end="751.81">if I have a sprite.png that sits below</span> <span data-start="751.81" data-end="755.23">the parent folder and then images and</span> <span data-start="755.23" data-end="758.529">this is referenced in assets by default</span> </p>
<p><span data-start="758.529" data-end="760.529">CSS I need to kind of adapt that path</span> <span data-start="760.529" data-end="763.51">because now assets is basically the</span> <span data-start="763.51" data-end="765.73">offset to that so I just use the URL</span> <span data-start="765.73" data-end="767.5">pazza from from the node.js</span> <span data-start="767.5" data-end="769.089">implementation which is pure JavaScript</span> <span data-start="769.089" data-end="771.7">which is which is a very easy to include</span> <span data-start="771.7" data-end="774.49">them thanks for browsing file so it</span> <span data-start="774.49" data-end="776.14">would be nice for the browser to allow</span> <span data-start="776.14" data-end="777.94">you to do a URL pausing beside you have</span> <span data-start="777.94" data-end="779.26">to fall back to a pure JavaScript</span> <span data-start="779.26" data-end="783.33">implementation again well there you go</span> <span data-start="783.33" data-end="787.209">basically we rendered HTML through an</span> </p>
<p><span data-start="787.209" data-end="790.3">SVG is foreign object we in line all the</span> <span data-start="790.3" data-end="794.11">external resources by first loading</span> <span data-start="794.11" data-end="796.36">content through ajax in case of binary</span> <span data-start="796.36" data-end="798.17">content did an extra hack</span> <span data-start="798.17" data-end="800.93">we admitted images and fonts through</span> <span data-start="800.93" data-end="804.8">data your eyes for style sheets we just</span> <span data-start="804.8" data-end="807.649">pasted the whole text we passed CSS</span> <span data-start="807.649" data-end="809.69">finding resources that we needed to</span> <span data-start="809.69" data-end="811.25">adapt again is kind of a recursive</span> <span data-start="811.25" data-end="815.18">search and we adapted relative paths so</span> <span data-start="815.18" data-end="816.44">basically that's the whole algorithm</span> <span data-start="816.44" data-end="820.1">behind getting don't forget what the</span> <span data-start="820.1" data-end="822.62">initial target was forgetting HTML</span> <span data-start="822.62" data-end="827.23">inside an SVG rendered to the canvas so</span> <span data-start="827.23" data-end="830.959">yeah let's talking more demo time what</span> <span data-start="830.959" data-end="832.13">you're saying seeing here and I don't</span> <span data-start="832.13" data-end="833.57">you might not believe me so i'm going to</span> <span data-start="833.57" data-end="837.889">show you this is the title page of my</span> <span data-start="837.889" data-end="842.06">talk rendered into a canvas well it's a</span> <span data-start="842.06" data-end="843.23">bit hard to believe right could it could</span> <span data-start="843.23" data-end="844.97">have just been a screenshot I've taken</span> <span data-start="844.97" data-end="854.189">so let's switch over to I can just yep</span> <span data-start="854.199" data-end="861.41">so just say hey there and we load that</span> <span data-start="861.41" data-end="863.93">and even better to show you that this is</span> <span data-start="863.93" data-end="865.55">actually a canvas i can start shooting</span> <span data-start="865.55" data-end="867.38">my HTML and do something awesome with</span> <span data-start="867.38" data-end="874.92">that</span> <span data-start="874.93" data-end="877.88">so yeah maybe that I'll set at least one</span> <span data-start="877.88" data-end="880.459">question why why why why would you do</span> <span data-start="880.459" data-end="884.42">that that interestingly yeah I don't</span> <span data-start="884.42" data-end="885.35">know I don't know if you want to have</span> <span data-start="885.35" data-end="886.79">that on your website but it's a it's a</span> <span data-start="886.79" data-end="891.26">funny funny thing to do okay it before</span> <span data-start="891.26" data-end="892.85">you like all storm out and say I want to</span> <span data-start="892.85" data-end="894.05">do that on my next project or something</span> <span data-start="894.05" data-end="895.959">which you possibly don't but anyway</span> <span data-start="895.959" data-end="897.95">there are a few issues that you need to</span> <span data-start="897.95" data-end="902.57">know about so first of all as I said</span> <span data-start="902.57" data-end="905.089">before the browser does not allow you to</span> <span data-start="905.089" data-end="907.76">do certain kinds of things for a good</span> <span data-start="907.76" data-end="911.57">reason and here we this hack basically</span> <span data-start="911.57" data-end="914.63">does not open up a total new attack</span> <span data-start="914.63" data-end="917.3">vector all the resources that we in line</span> <span data-start="917.3" data-end="919.25">everything that we're doing is all in</span> <span data-start="919.25" data-end="921.29">the confines of the existing solution</span> <span data-start="921.29" data-end="923.149">but that means all the content that we</span> <span data-start="923.149" data-end="925.73">in line through ajax is bound to the</span> <span data-start="925.73" data-end="927.95">same origin policy so if you want to</span> <span data-start="927.95" data-end="929.779">let's say just take a screenshot of</span> <span data-start="929.779" data-end="932.54">google com well i can't do that from my</span> <span data-start="932.54" data-end="933.98">web page here because i can't access</span> <span data-start="933.98" data-end="936.62">google com through ajax unless of course</span> <span data-start="936.62" data-end="939.68">the server that you want to request with</span> <span data-start="939.68" data-end="942.769">they offer calls headers or something so</span> <span data-start="942.769" data-end="943.88">this is not a solution to take</span> <span data-start="943.88" data-end="945.38">screenshot of any pages no you're not</span> <span data-start="945.38" data-end="946.699">allowed to do that otherwise you could</span> <span data-start="946.699" data-end="948.5">be reading out somebody else's gmail</span> <span data-start="948.5" data-end="953.12">account then there's a I consider that a</span> <span data-start="953.12" data-end="956.329">bug I've talked to a few chrome guys I</span> <span data-start="956.329" data-end="958.67">chrome developers rereading from the</span> <span data-start="958.67" data-end="960.98">canvas so far is not allowed in Safari</span> <span data-start="960.98" data-end="966.73">and chrome so um firefox shines um and</span> <span data-start="966.73" data-end="969.019">the problem here is basically that</span> </p>
<p><span data-start="969.019" data-end="972.32">Safari and chrome have a no no I'm kind</span> <span data-start="972.32" data-end="973.91">of guessing I believe they have a kind</span> <span data-start="973.91" data-end="976.089">of simplistic approach to their sandbox</span> <span data-start="976.089" data-end="979.67">because they didn't then see somebody</span> <span data-start="979.67" data-end="981.74">coming along and wanted to do that kind</span> <span data-start="981.74" data-end="983.81">of thing they just say whatever there is</span> <span data-start="983.81" data-end="985.82">if there is a foreign object inside an</span> <span data-start="985.82" data-end="987.529">SVG you we're just going to paint the</span> <span data-start="987.529" data-end="989">canvas and if you want to read back from</span> <span data-start="989" data-end="990.079">the camels we're going to throw our</span> <span data-start="990.079" data-end="992.449">security exception so in that case if</span> <span data-start="992.449" data-end="994.1">you want to do something like that and</span> <span data-start="994.1" data-end="995.529">you want to read back from the canvas</span> <span data-start="995.529" data-end="998.149">then no sorry you're getting these three</span> <span data-start="998.149" data-end="999.8">security exception if you want to do</span> <span data-start="999.8" data-end="1002.73">that firefox so far as the only solution</span> <span data-start="1002.73" data-end="1006.69">next issue is the IE guys</span> <span data-start="1006.69" data-end="1011.49">a sorry the idea are you guys are now</span> <span data-start="1011.49" data-end="1012.9">starting to implement for an object are</span> <span data-start="1012.9" data-end="1015.12">ye so far doesn't support it luckily it</span> <span data-start="1015.12" data-end="1017.85">did change from in consideration to in</span> <span data-start="1017.85" data-end="1019.68">development so hey I'm waiting for the</span> <span data-start="1019.68" data-end="1021.93">next IE version to come out and</span> <span data-start="1021.93" data-end="1025.43">hopefully we can do the same thing there</span> <span data-start="1025.43" data-end="1029.51">one more thing form inputs don't render</span> <span data-start="1029.51" data-end="1032.66">the the best implement the best</span> <span data-start="1032.66" data-end="1035.52">explanation that i have is well form</span> <span data-start="1035.52" data-end="1039.06">inputs um I kind of a kind of fall back</span> <span data-start="1039.06" data-end="1041.91">to what your host system gives you right</span> <span data-start="1041.91" data-end="1045.209">so and possibly the SVA SVG rendering</span> <span data-start="1045.209" data-end="1047.22">capability does not have access to that</span> <span data-start="1047.22" data-end="1049.35">so form improves kind of look funny a</span> <span data-start="1049.35" data-end="1052.08">lasting performance I did concern so it</span> <span data-start="1052.08" data-end="1053.52">does take a lot of time doing all that</span> </p>
<p><span data-start="1053.52" data-end="1056.91">Ajax were appalling then getting the CSS</span> <span data-start="1056.91" data-end="1059.19">parsing the CSS Elenna everything it can</span> <span data-start="1059.19" data-end="1062.25">take up to a few seconds I did consider</span> <span data-start="1062.25" data-end="1064.71">using a web worker for that but sadly I</span> <span data-start="1064.71" data-end="1068.67">do make a use of a lot of dumb api's I</span> <span data-start="1068.67" data-end="1071.4">don't need the actual page this is going</span> <span data-start="1071.4" data-end="1073.26">to but I need something and you saw the</span> <span data-start="1073.26" data-end="1076.11">example further CSS parser this used a</span> <span data-start="1076.11" data-end="1078.78">newly created document so i do need</span> <span data-start="1078.78" data-end="1080.25">access to that and sadly that is not</span> <span data-start="1080.25" data-end="1083.7">doable in web workers here's an</span> <span data-start="1083.7" data-end="1085.83">incomplete list of workarounds that was</span> <span data-start="1085.83" data-end="1089.64">needed to get all that stuff going i'm</span> <span data-start="1089.64" data-end="1091.17">not going to go through that a full list</span> <span data-start="1091.17" data-end="1092.67">this is but bit of a reference and kind</span> <span data-start="1092.67" data-end="1094.89">of to show you that whatever code you</span> <span data-start="1094.89" data-end="1097.29">guys are writing doing your day job it's</span> <span data-start="1097.29" data-end="1099.18">not going to be as worse as what you're</span> <span data-start="1099.18" data-end="1102.45">seeing here so i think i hope people</span> <span data-start="1102.45" data-end="1104.43">hope companies in the future will still</span> <span data-start="1104.43" data-end="1106.83">employ me without you know knowing that</span> <span data-start="1106.83" data-end="1108.45">i'm one of the worst hackers in the</span> <span data-start="1108.45" data-end="1111.54">world there are a few outstanding</span> <span data-start="1111.54" data-end="1114.21">browser issues here so some of that</span> <span data-start="1114.21" data-end="1116.46">things you need to work around if you</span> <span data-start="1116.46" data-end="1118.59">want to do stuff like that and some of</span> <span data-start="1118.59" data-end="1120.81">them just basically keep me from going</span> <span data-start="1120.81" data-end="1123.6">further and it's interestingly but</span> <span data-start="1123.6" data-end="1125.28">number one is Roberto cut cut</span> <span data-start="1125.28" data-end="1128.49">o'callaghan from Mozilla who just got me</span> <span data-start="1128.49" data-end="1130.47">on to that idea so he's I think from New</span> </p>
<p><span data-start="1130.47" data-end="1132.48">Zealand and he started talking about</span> <span data-start="1132.48" data-end="1136.86">rendering HTML to the canvas in 2006 so</span> <span data-start="1136.86" data-end="1138.9">he kind of inspired me to go down that</span> <span data-start="1138.9" data-end="1142.47">road and do that all that they</span> <span data-start="1142.48" data-end="1145.01">well what what is this all about it's</span> <span data-start="1145.01" data-end="1147.47">not not just fun I didn't sit down for</span> <span data-start="1147.47" data-end="1150.02">more than a year to to get that kind of</span> <span data-start="1150.02" data-end="1154.22">solve so this first went into a project</span> <span data-start="1154.22" data-end="1157.96">on github like a few different ones um</span> <span data-start="1157.96" data-end="1159.92">because basically I needed to implement</span> <span data-start="1159.92" data-end="1163.31">a full resource a inlining process there</span> <span data-start="1163.31" data-end="1164.72">are lot of node solutions to that but</span> <span data-start="1164.72" data-end="1166.55">sadly none works in the browser because</span> <span data-start="1166.55" data-end="1168.23">nobody is I think is stupid enough to do</span> <span data-start="1168.23" data-end="1172.07">that in the browser and 24 8 people on</span> <span data-start="1172.07" data-end="1174.59">github things it's a neat idea I just</span> <span data-start="1174.59" data-end="1176.3">don't know why I don't know what they</span> <span data-start="1176.3" data-end="1178.31">are using it for I've talked to a few</span> <span data-start="1178.31" data-end="1180.5">people at this conference and few people</span> <span data-start="1180.5" data-end="1182.15">some people actually seem to be using</span> </p>
<p><span data-start="1182.15" data-end="1184.64">HTML to canvas which is a similar</span> <span data-start="1184.64" data-end="1188.03">solution for finding out issues with our</span> <span data-start="1188.03" data-end="1189.89">webpage so if user complaints that</span> <span data-start="1189.89" data-end="1191.33">something's wrong they like to take a</span> <span data-start="1191.33" data-end="1193.22">screenshot of that page phone back home</span> <span data-start="1193.22" data-end="1194.42">and then they know for debugging</span> <span data-start="1194.42" data-end="1197.33">purposes what went wrong my personal use</span> <span data-start="1197.33" data-end="1199.73">case and a few of you see me talking on</span> <span data-start="1199.73" data-end="1202.37">Tuesday of CSS calm I want to prove that</span> <span data-start="1202.37" data-end="1205.73">you can test CSS and the UI taking</span> <span data-start="1205.73" data-end="1207.74">screenshots and that is why I basically</span> <span data-start="1207.74" data-end="1212.24">went down that path so thanks guys for</span> <span data-start="1212.24" data-end="1213.89">listening and maybe you do something</span> </p>
</section>