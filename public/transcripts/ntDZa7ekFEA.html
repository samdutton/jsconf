<section>
<p><span data-start="9.32" data-end="13.04">so how many of y'all were at Jess comp</span> <span data-start="13.04" data-end="16.17">okay so most of you may or may not have</span> <span data-start="16.17" data-end="17.58">taken the opportunity to see the closing</span> <span data-start="17.58" data-end="19.529">talk in which we announced tracer which</span> <span data-start="19.529" data-end="21.09">is a JavaScript of JavaScript compiler</span> <span data-start="21.09" data-end="24.09">written in JavaScript there are many</span> <span data-start="24.09" data-end="27">like it this one is different no it's</span> <span data-start="27" data-end="29.01">different because it's not just only</span> <span data-start="29.01" data-end="30.06">because it's written in JavaScript but</span> <span data-start="30.06" data-end="31.89">because the source language that it</span> <span data-start="31.89" data-end="36.3">consumes is some variant of what we hope</span> <span data-start="36.3" data-end="38.219">will be a set of features that are in</span> <span data-start="38.219" data-end="41.52">the next version of Java Script so it's</span> </p>
<p><span data-start="41.52" data-end="44.489">JavaScript of the future more or less to</span> <span data-start="44.489" data-end="47.46">JavaScript of today strictly speaking</span> <span data-start="47.46" data-end="50.399">es5 so browsers that running is 5 or</span> <span data-start="50.399" data-end="51.989">environments of running s5 like node can</span> <span data-start="51.989" data-end="54.84">take advantage of this and so we all the</span> <span data-start="54.84" data-end="59.489">demos we did for JS conf demo tracer in</span> <span data-start="59.489" data-end="62.25">the browser but tracer absolutely works</span> <span data-start="62.25" data-end="64.5">on the on node in fact we have a batch</span> <span data-start="64.5" data-end="67.979">mode that relies on node uses v8 to go</span> <span data-start="67.979" data-end="70.049">and automatically generate code for you</span> <span data-start="70.049" data-end="72.9">so you can run it to batch content that</span> <span data-start="72.9" data-end="74.39">you'd like to serve to the client</span> <span data-start="74.39" data-end="77.369">written in the future version or you can</span> <span data-start="77.369" data-end="80.64">run it online inside of node to make it</span> <span data-start="80.64" data-end="83.4">make it go so but today's talk is sort</span> <span data-start="83.4" data-end="89.009">of not just about what it is and what it</span> <span data-start="89.009" data-end="91.86">does for you but rather we want to sort</span> <span data-start="91.86" data-end="93.479">of peel back the layers a little bit and</span> <span data-start="93.479" data-end="96.56">show you kind of how it works because</span> <span data-start="96.56" data-end="99.27">fundamentally tracer is not about like</span> <span data-start="99.27" data-end="100.71">hey look everybody here's a great tool</span> <span data-start="100.71" data-end="103.02">for you to use it's a it's a tool that's</span> <span data-start="103.02" data-end="105.509">got an expiration date on and that</span> <span data-start="105.509" data-end="107.1">expiration date is when the language</span> <span data-start="107.1" data-end="109.14">gets much more awesome you won't need it</span> <span data-start="109.14" data-end="111.119">right because you're working a note on</span> <span data-start="111.119" data-end="113.31">the server your environments moving a</span> <span data-start="113.31" data-end="114.329">lot faster than the client-side</span> <span data-start="114.329" data-end="115.92">environment is you get to choose your</span> <span data-start="115.92" data-end="117.6">version of VA right you get to choose</span> <span data-start="117.6" data-end="119.939">your version of the language and as soon</span> <span data-start="119.939" data-end="121.649">as v8 get stuff or as soon as you decide</span> <span data-start="121.649" data-end="124.04">to change your deployment environment</span> <span data-start="124.04" data-end="126.119">you get all of the advantages of</span> <span data-start="126.119" data-end="127.619">everything you've just dumped into your</span> <span data-start="127.619" data-end="129.69">world which you don't get on the client</span> <span data-start="129.69" data-end="131.37">and the client side you're at the mercy</span> <span data-start="131.37" data-end="133.45">of whatever your your</span> <span data-start="133.45" data-end="135.73">users happen to have deployed and</span> <span data-start="135.73" data-end="137.02">they're going to move relatively slowly</span> <span data-start="137.02" data-end="138.61">compared to your server site environment</span> <span data-start="138.61" data-end="140.709">which is why I think there's this large</span> <span data-start="140.709" data-end="143.44">and growing population of alternative</span> <span data-start="143.44" data-end="144.76">languages for server-side development</span> <span data-start="144.76" data-end="147.9">including JavaScript thank goodness so</span> <span data-start="147.9" data-end="150.37">because they're the economics and the</span> <span data-start="150.37" data-end="151.9">and the constraints of the of the client</span> <span data-start="151.9" data-end="153.489">side are different than the server side</span> <span data-start="153.489" data-end="156.22">we can use that to help move faster on</span> <span data-start="156.22" data-end="157.75">the server and so this is the community</span> <span data-start="157.75" data-end="158.769">that's going to be able to try out this</span> <span data-start="158.769" data-end="161.86">new stuff faster use it first stretch</span> <span data-start="161.86" data-end="163.84">its legs and provide this sort of</span> <span data-start="163.84" data-end="165.22">detailed feedback we absolutely need to</span> <span data-start="165.22" data-end="166.15">make sure that the next original</span> <span data-start="166.15" data-end="168.31">language has all of the right stuff in</span> <span data-start="168.31" data-end="170.319">it and none of the stuff that we think</span> <span data-start="170.319" data-end="174.299">is buggy so harmony is pretty awesome so</span> <span data-start="174.299" data-end="176.98">the stuff that's already on the slated</span> <span data-start="176.98" data-end="179.5">for the proposals list for harmony gives</span> <span data-start="179.5" data-end="183.73">us modules it gives us proxies proxies</span> <span data-start="183.73" data-end="185.56">are amazing if you've used node proxy</span> <span data-start="185.56" data-end="188.92">you've seen it firsthand or proxies</span> <span data-start="188.92" data-end="192.79">under spider monkey harmony gives us a</span> <span data-start="192.79" data-end="195.12">bunch of syntactic fixes it gives us</span> <span data-start="195.12" data-end="199.78">semantic fixes for things like</span> <span data-start="199.78" data-end="201.459">asynchronous module loading or</span> <span data-start="201.459" data-end="202.54">apparently synchronous module loading</span> <span data-start="202.54" data-end="203.769">with asynchronous behavior the sorts of</span> <span data-start="203.769" data-end="206.59">stuff that you wind up doing all the</span> <span data-start="206.59" data-end="209.56">time in either no directly or in</span> <span data-start="209.56" data-end="210.97">patterns that you sort of carry around</span> <span data-start="210.97" data-end="212.44">with you in code that you're working on</span> <span data-start="212.44" data-end="215.65">so for example the node has its own</span> <span data-start="215.65" data-end="217.959">require system which is synchronous</span> <span data-start="217.959" data-end="220.42">right which is sort of mirrors the</span> <span data-start="220.42" data-end="221.95">apparently synchronous behavior of</span> <span data-start="221.95" data-end="223.69">what's happening under the covers in</span> <span data-start="223.69" data-end="226.63">harmony modules and so we sort of see</span> <span data-start="226.63" data-end="228.389">this this pressure being taken off of</span> <span data-start="228.389" data-end="230.859">patterns and off of libraries by the</span> <span data-start="230.859" data-end="232.75">language when we move to harmony</span> <span data-start="232.75" data-end="235">features and so that I just want to give</span> <span data-start="235" data-end="237.25">you a really simple example and sort of</span> <span data-start="237.25" data-end="238.9">we're going to walk through what happens</span> <span data-start="238.9" data-end="241">inside of a compiler from point A to</span> <span data-start="241" data-end="243.579">point B when we go from a source</span> <span data-start="243.579" data-end="246.13">language to the destination target</span> <span data-start="246.13" data-end="247.75">because what we really want out of these</span> <span data-start="247.75" data-end="250.75">compilers is for them to hopefully be</span> <span data-start="250.75" data-end="252.43">backwards compatible semantically like</span> <span data-start="252.43" data-end="253.72">we want the next evolution of the</span> <span data-start="253.72" data-end="255.459">language to be built on primitives that</span> <span data-start="255.459" data-end="258.07">we know and love right for instance when</span> <span data-start="258.07" data-end="259.479">we go and talk about classes we don't</span> <span data-start="259.479" data-end="261.489">necessarily want class-based 00 fused</span> <span data-start="261.489" data-end="263.26">into the language in a way that's that's</span> <span data-start="263.26" data-end="265.75">sort of upsetting to the prototypal 00</span> <span data-start="265.75" data-end="267.62">and object</span> <span data-start="267.62" data-end="269.849">composition styles of inheritance that</span> <span data-start="269.849" data-end="272.13">we know and love today some people do</span> <span data-start="272.13" data-end="273.24">want that but they tend not to be</span> </p>
<p><span data-start="273.24" data-end="274.59">JavaScript programmers already they tend</span> <span data-start="274.59" data-end="275.49">to be coming from a different place</span> <span data-start="275.49" data-end="277.889">those of us who love JavaScript I think</span> <span data-start="277.889" data-end="279.21">are much more in tune with the idea of</span> <span data-start="279.21" data-end="280.8">keeping prototypal inheritance and</span> <span data-start="280.8" data-end="282.449">giving it significantly better syntax so</span> <span data-start="282.449" data-end="283.86">that idea of sort of taking the</span> <span data-start="283.86" data-end="286.68">semantics we have giving it a better way</span> <span data-start="286.68" data-end="288.36">to say what you mean is exactly what we</span> <span data-start="288.36" data-end="290.759">want to get to I think broadly speaking</span> <span data-start="290.759" data-end="292.71">and I know that the the committee is</span> <span data-start="292.71" data-end="294.03">working hard to make to make that happen</span> <span data-start="294.03" data-end="296.069">in a bunch of places so let's walk</span> <span data-start="296.069" data-end="298.53">through how one of those features that</span> <span data-start="298.53" data-end="299.97">does exactly this that's got a great</span> <span data-start="299.97" data-end="303.539">expression in today's semantics can be</span> <span data-start="303.539" data-end="306.69">implemented through a compiler so this</span> <span data-start="306.69" data-end="309.75">is a pretty common example of a variable</span> <span data-start="309.75" data-end="311.55">arguments function variable arity our</span> <span data-start="311.55" data-end="314.069">function where you'd have to go to note</span> <span data-start="314.069" data-end="315.449">that in some other piece of metadata</span> <span data-start="315.449" data-end="318.81">like a jjs thought comment someplace to</span> <span data-start="318.81" data-end="319.8">note that this thing is going to take</span> <span data-start="319.8" data-end="322.08">more than one argument which is the</span> <span data-start="322.08" data-end="324.81">actual function dot length result here</span> <span data-start="324.81" data-end="326.669">and it's going to provide a default</span> <span data-start="326.669" data-end="328.229">value for format which you also have to</span> <span data-start="328.229" data-end="329.88">go document someplace else it's not</span> <span data-start="329.88" data-end="332.15">actually readable in your code and</span> <span data-start="332.15" data-end="333.81">you're gonna have to deal with this</span> <span data-start="333.81" data-end="335.69">parameter thing because you know</span> <span data-start="335.69" data-end="338.34">arguments isn't actually an array as</span> <span data-start="338.34" data-end="340.53">things are messy okay so harmony gives</span> <span data-start="340.53" data-end="342.18">us a much better answer harmony lets us</span> <span data-start="342.18" data-end="344.699">say I'm going to provide a default</span> <span data-start="344.699" data-end="346.53">parameter value so if I don't provide</span> <span data-start="346.53" data-end="348.3">one it's going to be defaulted to that</span> <span data-start="348.3" data-end="350.19">empty string and everything else that</span> <span data-start="350.19" data-end="351.93">you pass in beyond the initial is going</span> <span data-start="351.93" data-end="354">to be bucketed into a local variable</span> <span data-start="354" data-end="355.8">called params right that's pretty</span> <span data-start="355.8" data-end="358.11">awesome that means that no longer going</span> <span data-start="358.11" data-end="359.61">to be have to shuttling the arguments</span> <span data-start="359.61" data-end="361.62">object around to try and go pull stuff</span> <span data-start="361.62" data-end="362.969">out and try not to mutate it because</span> <span data-start="362.969" data-end="365.13">it's live instead you're going to have</span> <span data-start="365.13" data-end="367.44">an object that does what you want and</span> <span data-start="367.44" data-end="370.05">and gives you this really nice toast in</span> <span data-start="370.05" data-end="373.289">text which has a mirror on the spread</span> <span data-start="373.289" data-end="375.06">operator so that when you go to use it</span> <span data-start="375.06" data-end="377.009">in other places you no longer have to</span> <span data-start="377.009" data-end="378.569">use call and apply this is really nice</span> <span data-start="378.569" data-end="382.889">stuff okay so how do we get there well</span> <span data-start="382.889" data-end="385.139">let's let's take this code you know so</span> <span data-start="385.139" data-end="386.28">this is what we this is what we start</span> <span data-start="386.28" data-end="387.69">with and this is what we'd like to be</span> <span data-start="387.69" data-end="389.849">writing so let's take this code and sort</span> <span data-start="389.849" data-end="393.539">of run it through tracer so we've got</span> <span data-start="393.539" data-end="397.68">the tracer Ruppel over here and what</span> <span data-start="397.68" data-end="399.599">we've got right now is when we type this</span> <span data-start="399.599" data-end="400.74">in we've got</span> </p>
<p><span data-start="400.74" data-end="402.569">Pilar no right you can't see everything</span> <span data-start="402.569" data-end="406.8">let's let's fix that okay so wait when</span> <span data-start="406.8" data-end="409.83">you uh when you run this through the</span> <span data-start="409.83" data-end="412.02">tracer repple what you get out of the</span> <span data-start="412.02" data-end="415.44">other side is the sort of the exact same</span> <span data-start="415.44" data-end="417.419">thing except the function has been</span> <span data-start="417.419" data-end="419.52">rewritten for you right so the rest this</span> <span data-start="419.52" data-end="420.99">talk is about how the heck does that</span> <span data-start="420.99" data-end="423.389">happen right because a lot of us sort of</span> <span data-start="423.389" data-end="424.979">three compilers like there's some big</span> <span data-start="424.979" data-end="426.63">black box there a scary thing there are</span> <span data-start="426.63" data-end="428.639">things that compiler people do and we're</span> <span data-start="428.639" data-end="429.81">not compiler people we write</span> <span data-start="429.81" data-end="431.94">applications but compilers don't have to</span> <span data-start="431.94" data-end="433.199">be scary they don't have to be somebody</span> <span data-start="433.199" data-end="435.479">else's somebody else's bag there are</span> <span data-start="435.479" data-end="442.039">things that we can address so um yeah</span> <span data-start="442.039" data-end="444.479">again we can see exactly what's going on</span> <span data-start="444.479" data-end="450.72">there and I'm gonna yeah yeah so so I'm</span> <span data-start="450.72" data-end="452.49">going to hand it over to Peter to sort</span> <span data-start="452.49" data-end="455.819">of walk us through the rest of the</span> <span data-start="455.819" data-end="457.979">compiler life cycle but if you take</span> <span data-start="457.979" data-end="459.33">anything away from today's talk I hope</span> <span data-start="459.33" data-end="461.659">that you you start to believe that</span> </p>
<p><span data-start="461.659" data-end="464.22">JavaScript programmers can participate</span> <span data-start="464.22" data-end="465.9">in the process of evolving the language</span> <span data-start="465.9" data-end="467.639">not just by telling us what you want or</span> <span data-start="467.639" data-end="469.169">telling us what you need by helping us</span> <span data-start="469.169" data-end="470.969">prototype this stuff and we'll show you</span> <span data-start="470.969" data-end="480.199">how howdy hey I'm Peter helm thanks Alex</span> <span data-start="480.199" data-end="484.469">so I'm a compiled a guy so I'm just</span> <span data-start="484.469" data-end="485.34">going to try and walk you guys through</span> <span data-start="485.34" data-end="487.65">sort of the basics of the anatomy of a</span> <span data-start="487.65" data-end="490.979">compiler and basically you know a</span> <span data-start="490.979" data-end="492.509">high-level a compiler is just going to</span> <span data-start="492.509" data-end="495.15">take a source program that you've</span> <span data-start="495.15" data-end="497.28">written and convert it into something</span> <span data-start="497.28" data-end="500.039">else and you know some compilers you</span> <span data-start="500.039" data-end="502.86">will convert it down to machine code and</span> <span data-start="502.86" data-end="505.199">this compiler is going to turn take</span> <span data-start="505.199" data-end="507.539">source code that too with this risk</span> <span data-start="507.539" data-end="509.009">which is JavaScript plus new features</span> <span data-start="509.009" data-end="512.25">and turn into JavaScript sort of of</span> <span data-start="512.25" data-end="515.729">today and you know compilers is a pretty</span> <span data-start="515.729" data-end="522.419">well studied domain and so you know</span> <span data-start="522.419" data-end="523.56">there's some common patterns that you</span> <span data-start="523.56" data-end="524.76">use to sort of get yourself through a</span> <span data-start="524.76" data-end="527.55">compiler so the first the first stage of</span> <span data-start="527.55" data-end="530.04">a compiler is called lexing also known</span> <span data-start="530.04" data-end="531.99">as scanning or tokenizing and basically</span> <span data-start="531.99" data-end="533.54">what you do is you take the</span> <span data-start="533.54" data-end="534.56">our source code is an array of</span> <span data-start="534.56" data-end="537.41">characters and you turn it into an array</span> <span data-start="537.41" data-end="540.05">of tokens once you've got an array of</span> <span data-start="540.05" data-end="544.07">tokens you do the syntactic analysis so</span> <span data-start="544.07" data-end="545.509">you parse the tokens and turn it into a</span> <span data-start="545.509" data-end="547.16">tree I'll get a little bit more detail</span> <span data-start="547.16" data-end="550.1">of what this looks like once you've got</span> <span data-start="550.1" data-end="553.22">a tree that represents your program then</span> <span data-start="553.22" data-end="555.92">you can transform that tree from a tree</span> <span data-start="555.92" data-end="560.06">containing so each statement each node</span> <span data-start="560.06" data-end="561.019">in the tree is going to represent a</span> <span data-start="561.019" data-end="562.759">statement in your program and so a</span> <span data-start="562.759" data-end="566">transformer will take will take a nodes</span> <span data-start="566" data-end="568.759">that are not represented in the in the</span> <span data-start="568.759" data-end="571.94">output language and transform them into</span> <span data-start="571.94" data-end="573.86">nodes that are represented in the applet</span> <span data-start="573.86" data-end="576.5">language and then lastly once you've got</span> <span data-start="576.5" data-end="579.41">a transform tree then you just write</span> <span data-start="579.41" data-end="581.12">that tree out and cover it back into</span> <span data-start="581.12" data-end="584.209">characters again and I'll just walk you</span> <span data-start="584.209" data-end="589.91">through that pretty quickly here so the</span> <span data-start="589.91" data-end="592.67">first thing is lexing and as I mentioned</span> <span data-start="592.67" data-end="594.5">lexing is the process of basically just</span> <span data-start="594.5" data-end="596.3">taking characters and turning them into</span> <span data-start="596.3" data-end="599.839">tokens and here's the code snippet from</span> <span data-start="599.839" data-end="602.149">tracer that shows you basically the</span> <span data-start="602.149" data-end="605.17">basics of flexing or scanning and token</span> <span data-start="605.17" data-end="608.089">you know we start by skipping two</span> <span data-start="608.089" data-end="611.089">comments we remember the index of the</span> <span data-start="611.089" data-end="614.029">beginning of the token if we're at the</span> <span data-start="614.029" data-end="616.88">end of the file we just create a token</span> <span data-start="616.88" data-end="619.16">which is the end of the file otherwise</span> <span data-start="619.16" data-end="621.38">you've got the next character we look at</span> <span data-start="621.38" data-end="623.75">it if it's an open curly we create a</span> <span data-start="623.75" data-end="627.079">token which is an open curly and we note</span> <span data-start="627.079" data-end="629.93">the beginning of the token and so the</span> </p>
<p><span data-start="629.93" data-end="632">Craig token does pretty much what you'd</span> <span data-start="632" data-end="634.459">expect it creates a new object which is</span> <span data-start="634.459" data-end="638">a token its dash is the token type in it</span> <span data-start="638" data-end="641.029">and it stashes the location and if</span> <span data-start="641.029" data-end="642.62">you've got more information like the</span> <span data-start="642.62" data-end="645.26">token is like a string or a number it's</span> <span data-start="645.26" data-end="646.37">going to store the string or number</span> <span data-start="646.37" data-end="647.99">value into the end of the token object</span> <span data-start="647.99" data-end="650.93">but really at the end of the day this is</span> <span data-start="650.93" data-end="652.88">the sort of the core of what a tokenizer</span> <span data-start="652.88" data-end="655.16">does obviously there's a bunch of stuff</span> <span data-start="655.16" data-end="657.74">to scaffolding to kind of get you to set</span> <span data-start="657.74" data-end="659.839">this up but then the day it's it's</span> <span data-start="659.839" data-end="662.209">really tokenization is you know pretty</span> <span data-start="662.209" data-end="665.62">straightforward</span> <span data-start="665.63" data-end="669.149">so once you've got your tokens then the</span> <span data-start="669.149" data-end="670.649">question is how do you build a tree that</span> <span data-start="670.649" data-end="672.509">represents your program so you want to</span> <span data-start="672.509" data-end="673.889">have like one node say which is a</span> <span data-start="673.889" data-end="675.63">function and the children of the</span> <span data-start="675.63" data-end="678.389">function are going to be you know the</span> <span data-start="678.389" data-end="680.25">arguments of the function the name of</span> <span data-start="680.25" data-end="681.839">the function you know the body the</span> <span data-start="681.839" data-end="685.019">function well first thing you do is you</span> <span data-start="685.019" data-end="687.75">get your token stream and you ask</span> <span data-start="687.75" data-end="689.1">yourself hey what's the next token and</span> <span data-start="689.1" data-end="691.86">my soakin stream if it's savar then you</span> <span data-start="691.86" data-end="693.42">parse the variable statement if its</span> <span data-start="693.42" data-end="695.509">function your parts function declaration</span> <span data-start="695.509" data-end="697.86">and of course obviously there's a whole</span> <span data-start="697.86" data-end="699.54">bunch of other options in here but at</span> <span data-start="699.54" data-end="701.13">the end of the day this is the sort of</span> <span data-start="701.13" data-end="705.509">the basics of it a lot of folks you know</span> <span data-start="705.509" data-end="706.949">come out of college and in college they</span> <span data-start="706.949" data-end="708.12">tell you hey you got to use a parser</span> <span data-start="708.12" data-end="711.74">generator for this it turns out that</span> <span data-start="711.74" data-end="713.67">most of the guys I know that have been</span> <span data-start="713.67" data-end="714.779">doing compilers for a long long time</span> <span data-start="714.779" data-end="718.319">actually don't use parser generators and</span> <span data-start="718.319" data-end="720.779">there's a bunch of reasons for that the</span> <span data-start="720.779" data-end="722.49">first reason basically it comes down to</span> <span data-start="722.49" data-end="725.639">the fact that you know writing it hand</span> <span data-start="725.639" data-end="727.589">coded yourself is actually really not</span> <span data-start="727.589" data-end="729.839">that hard once you understand the</span> <span data-start="729.839" data-end="734.79">patterns and you know it kind of also</span> <span data-start="734.79" data-end="736.139">uses one of the arguments that that I</span> <span data-start="736.139" data-end="738.42">think folks are using for for no j/s</span> <span data-start="738.42" data-end="740.639">which is there's value add and having</span> <span data-start="740.639" data-end="741.99">just one language in your system you</span> <span data-start="741.99" data-end="743.069">know if you use a parser generator</span> <span data-start="743.069" data-end="745.019">you've got you express your grammar in a</span> <span data-start="745.019" data-end="746.88">language which is not your programming</span> <span data-start="746.88" data-end="749.37">language and there's a lot of value in</span> <span data-start="749.37" data-end="751.579">having just one language in your system</span> <span data-start="751.579" data-end="753.93">you know you make makes it much easier</span> <span data-start="753.93" data-end="757.8">to debug and anyway there's a bunch of</span> <span data-start="757.8" data-end="759.389">other reasons that I won't get into you</span> <span data-start="759.389" data-end="761.279">in terms of why I think parser</span> <span data-start="761.279" data-end="762.449">generators or perhaps is not the best</span> <span data-start="762.449" data-end="767.79">tool so again what happens when you want</span> <span data-start="767.79" data-end="769.47">to say parts of function well again it's</span> <span data-start="769.47" data-end="770.79">a similar kind of thing there's not a</span> <span data-start="770.79" data-end="773.189">lot of magic to it you stash away the</span> <span data-start="773.189" data-end="774.329">location of the start of the parse tree</span> <span data-start="774.329" data-end="777.51">so you can give good error messages you</span> <span data-start="777.51" data-end="780.029">eat a function token you check to see if</span> <span data-start="780.029" data-end="781.38">there's an identifier which is the name</span> <span data-start="781.38" data-end="783.389">of the function you know you eat a</span> <span data-start="783.389" data-end="785.97">friend eat your formal parameters a</span> <span data-start="785.97" data-end="789.18">close friend your function body and then</span> <span data-start="789.18" data-end="790.68">you create up a new object which is</span> <span data-start="790.68" data-end="794.13">basically just got all these values as</span> <span data-start="794.13" data-end="796.8">members and off you go so again there's</span> <span data-start="796.8" data-end="799.16">not a whole lot of magic</span> <span data-start="799.16" data-end="803.18">and just give you one more quick example</span> <span data-start="803.18" data-end="807.09">an if statement again you know looks</span> <span data-start="807.09" data-end="808.68">very very similar and this is code that</span> </p>
<p><span data-start="808.68" data-end="810.74">I just cut and paste from the compiler</span> <span data-start="810.74" data-end="813.75">you know you walk through you know you</span> <span data-start="813.75" data-end="816.93">just eat the tokens the token text types</span> <span data-start="816.93" data-end="819.3">that you're expecting you know the only</span> <span data-start="819.3" data-end="820.59">tricky bit here is that you know where</span> <span data-start="820.59" data-end="822.39">again we're peaking for the token to see</span> <span data-start="822.39" data-end="826.83">if there's an else clause or not and and</span> <span data-start="826.83" data-end="829.71">then we build a new node which</span> <span data-start="829.71" data-end="833.37">represents the the if statement so again</span> <span data-start="833.37" data-end="835.8">not a whole lot of magic here and once</span> <span data-start="835.8" data-end="838.01">you know you recognize the patterns here</span> <span data-start="838.01" data-end="840.38">you know it's actually pretty reasonable</span> <span data-start="840.38" data-end="843.24">and it's actually not not too bad</span> <span data-start="843.24" data-end="844.98">compared to say a B and F grammar and</span> <span data-start="844.98" data-end="846.6">again the nice thing about this is you</span> <span data-start="846.6" data-end="847.89">don't have to learn a new language to</span> <span data-start="847.89" data-end="849.39">express your length to express the</span> <span data-start="849.39" data-end="855.26">grammar of your language so transformers</span> <span data-start="855.26" data-end="857.7">transformers are where the real work is</span> <span data-start="857.7" data-end="860.13">done this is where you're taking a tree</span> <span data-start="860.13" data-end="863.31">the parse tree which represents your</span> <span data-start="863.31" data-end="866.22">program and transforming it into a</span> <span data-start="866.22" data-end="868.11">subset of the language which does not</span> <span data-start="868.11" data-end="871.52">include the the features that are not in</span> <span data-start="871.52" data-end="876.96">sort of JavaScript now and this is this</span> <span data-start="876.96" data-end="878.34">is one where I'm going to I'm going to</span> <span data-start="878.34" data-end="883.17">just switch to VI here quickly hello so</span> <span data-start="883.17" data-end="887.12">this is the this is the transformer for</span> <span data-start="887.12" data-end="890.73">rest parameters and basically what it is</span> <span data-start="890.73" data-end="894.41">is once you walk your tree and</span> <span data-start="894.41" data-end="897.96">everywhere that you find a function with</span> <span data-start="897.96" data-end="901.5">a rest parameter in it you basically</span> <span data-start="901.5" data-end="903.9">call this function and you do this</span> <span data-start="903.9" data-end="906.51">transform that's described here in the</span> <span data-start="906.51" data-end="909.06">comment a function with a rest parameter</span> <span data-start="909.06" data-end="911.52">here and it gets turned into a function</span> <span data-start="911.52" data-end="914.43">that looks like this and you can just</span> <span data-start="914.43" data-end="915.87">kind of walk it backwards you know we're</span> <span data-start="915.87" data-end="917.82">creating a function declaration it's got</span> <span data-start="917.82" data-end="919.79">the same name as the input function</span> <span data-start="919.79" data-end="922.08">we've transformed the parameters without</span> <span data-start="922.08" data-end="923.49">rest and you can sort of see that</span> <span data-start="923.49" data-end="927.27">happening sort of up here and of course</span> <span data-start="927.27" data-end="930.46">we transform the body</span> <span data-start="930.46" data-end="934.01">by adding a block to are adding the</span> <span data-start="934.01" data-end="936.05">extra variable statement which has the</span> <span data-start="936.05" data-end="941.18">call to array dot prototype flyff and</span> <span data-start="941.18" data-end="942.92">again it's it's a little bit you know</span> <span data-start="942.92" data-end="944.66">reading code that's building up trees is</span> <span data-start="944.66" data-end="947.24">kind of gnarly but again this is you</span> <span data-start="947.24" data-end="948.95">know there's not a lot of magic here and</span> <span data-start="948.95" data-end="952.22">once you understand the patterns you</span> <span data-start="952.22" data-end="953.21">know it's something that you can</span> <span data-start="953.21" data-end="964.83">actually you can actually read all right</span> <span data-start="964.84" data-end="968.66">and then lastly output so once you've</span> <span data-start="968.66" data-end="970.31">transformed your trees you've got a tree</span> <span data-start="970.31" data-end="971.9">that's represents sort of the output</span> <span data-start="971.9" data-end="974.06">that you want you just turn that output</span> <span data-start="974.06" data-end="978.14">into text and you know we've got some</span> <span data-start="978.14" data-end="980.87">simple primitives here you know where</span> <span data-start="980.87" data-end="982.52">you just say right so for a function</span> <span data-start="982.52" data-end="984.32">declaration you know you write the</span> <span data-start="984.32" data-end="985.76">keyword function which is just going to</span> <span data-start="985.76" data-end="988.49">write you know the text function you</span> <span data-start="988.49" data-end="989.99">know if it's got a name then we write</span> <span data-start="989.99" data-end="993.25">the name you know we read an open paren</span> <span data-start="993.25" data-end="995.99">we visit the formal parameter list close</span> <span data-start="995.99" data-end="998.48">paren function body again it's a pretty</span> <span data-start="998.48" data-end="1001.21">straightforward system once you once you</span> <span data-start="1001.21" data-end="1004.21">once you look at it now of course the</span> <span data-start="1004.21" data-end="1006.67">trick to all this is a sort of knowing</span> <span data-start="1006.67" data-end="1008.41">the patterns and setting up the patterns</span> <span data-start="1008.41" data-end="1010.06">so that you can actually compose this</span> <span data-start="1010.06" data-end="1014.23">well but you know and once you've got</span> <span data-start="1014.23" data-end="1017.53">that then the actual me to the of it is</span> <span data-start="1017.53" data-end="1023.6">actually fairly straightforward now we</span> <span data-start="1023.61" data-end="1028.03">all right so I want to walk you through</span> <span data-start="1028.03" data-end="1029.5">a little more sophisticated</span> <span data-start="1029.5" data-end="1032.14">transformation which is the async</span> <span data-start="1032.14" data-end="1035.02">function or it's a called deferred</span> <span data-start="1035.02" data-end="1036.97">functions rather which is which is a</span> <span data-start="1036.97" data-end="1038.29">language feature that we're looking at</span> <span data-start="1038.29" data-end="1042.4">to try and help with async asynchronous</span> <span data-start="1042.4" data-end="1045.91">callback style programming and that went</span> <span data-start="1045.91" data-end="1047.23">through this a little bit and they in</span> <span data-start="1047.23" data-end="1050.44">the in the talk at at j s conf and i</span> <span data-start="1050.44" data-end="1051.37">want to kind of go into a little bit</span> <span data-start="1051.37" data-end="1052.78">more details or how the transformation</span> <span data-start="1052.78" data-end="1056.23">works and and and so why this is is I</span> <span data-start="1056.23" data-end="1060.91">think at least is helpful to you and</span> <span data-start="1060.92" data-end="1064.59">so here's a piece of callback code we've</span> <span data-start="1064.59" data-end="1066.96">got an animate function it takes an</span> <span data-start="1066.96" data-end="1070.56">element an HTML element this is a</span> <span data-start="1070.56" data-end="1072.93">browser scenario obviously and it takes</span> <span data-start="1072.93" data-end="1074.67">a call back to say hey once this</span> <span data-start="1074.67" data-end="1077.24">animation is finished call this callback</span> <span data-start="1077.24" data-end="1080.16">and what's actually happening here is</span> <span data-start="1080.16" data-end="1083.61">we're just setting the style of the left</span> <span data-start="1083.61" data-end="1088.56">margin of the element and in a loop and</span> <span data-start="1088.56" data-end="1090.96">then each time through the loop we wait</span> <span data-start="1090.96" data-end="1094.38">for 5 milliseconds until we get to the</span> <span data-start="1094.38" data-end="1097.62">left margin of 350 and then once once</span> <span data-start="1097.62" data-end="1098.67">we're done we want to invoke the</span> <span data-start="1098.67" data-end="1103.83">callback and so you know if I for folks</span> <span data-start="1103.83" data-end="1104.64">that are familiar with callback</span> <span data-start="1104.64" data-end="1106.38">programming this is perhaps relatively</span> <span data-start="1106.38" data-end="1109.49">straightforward to to read but it's a</span> <span data-start="1109.49" data-end="1112.26">anyways it's pretty reassuring are</span> <span data-start="1112.26" data-end="1114.42">pretty it does twist up the code quite a</span> <span data-start="1114.42" data-end="1118.17">bit and then so we want to in our</span> <span data-start="1118.17" data-end="1119.61">example we're going to animate the this</span> <span data-start="1119.61" data-end="1121.59">element and then we're going to when</span> <span data-start="1121.59" data-end="1122.43">we're done we're just going to have an</span> <span data-start="1122.43" data-end="1126.89">alert that says hey okay we're not so I</span> <span data-start="1126.89" data-end="1133.31">known the there's in the in the the</span> <span data-start="1133.31" data-end="1138.63">browser libraries there's this deferred</span> <span data-start="1138.63" data-end="1139.95">pattern also known as the promise</span> <span data-start="1139.95" data-end="1143.25">pattern and the promise pattern allows</span> <span data-start="1143.25" data-end="1148.74">you to compose of functions that async</span> </p>
<p><span data-start="1148.74" data-end="1149.96">Chris functions a little bit better</span> <span data-start="1149.96" data-end="1153.06">because by moving the call back out of</span> <span data-start="1153.06" data-end="1157.08">the argument list and returning an</span> <span data-start="1157.08" data-end="1159">object upon which you can add a call</span> <span data-start="1159" data-end="1163.74">back so this is again code is just all</span> <span data-start="1163.74" data-end="1166.98">equi script now so there's no X there's</span> <span data-start="1166.98" data-end="1169.77">no new features here but here we've got</span> <span data-start="1169.77" data-end="1171.54">a defer time out which returns a</span> <span data-start="1171.54" data-end="1173.25">deferred object creates a deferred</span> <span data-start="1173.25" data-end="1176.49">object calls window set time I set</span> <span data-start="1176.49" data-end="1178.05">timeout when the time it happens it's</span> <span data-start="1178.05" data-end="1179.7">going to going to signal the deferred</span> <span data-start="1179.7" data-end="1181.44">object and say hey you're done now so</span> <span data-start="1181.44" data-end="1184.95">call all people and then it's just going</span> <span data-start="1184.95" data-end="1189.99">to return that that object and the</span> <span data-start="1189.99" data-end="1194.45">animate is every time it wants to</span> <span data-start="1194.46" data-end="1199.27">every time it wants to actually wait for</span> <span data-start="1199.27" data-end="1200.47">five milliseconds it's going to</span> <span data-start="1200.47" data-end="1202.54">basically call 24 timeout with five</span> <span data-start="1202.54" data-end="1204.4">milliseconds and then it's going to say</span> <span data-start="1204.4" data-end="1209.05">when you're done add my continuation add</span> <span data-start="1209.05" data-end="1215.86">my callback to the return value and at</span> <span data-start="1215.86" data-end="1217.93">the same time this animate function is</span> <span data-start="1217.93" data-end="1220.51">going to is also going to return a</span> <span data-start="1220.51" data-end="1222.91">deferred and when it's done it's going</span> <span data-start="1222.91" data-end="1224.14">to just say hey I'm going to sick of my</span> <span data-start="1224.14" data-end="1226.48">deferred that I'm done and so the caller</span> <span data-start="1226.48" data-end="1229.45">of animate now doesn't pass in whoops</span> <span data-start="1229.45" data-end="1232.48">sorry doesn't pass in the callback it</span> <span data-start="1232.48" data-end="1236.56">just adds its continuation on to the</span> <span data-start="1236.56" data-end="1238.8">return value of of the animate function</span> <span data-start="1238.8" data-end="1243.94">so so this is kind of nice because you</span> <span data-start="1243.94" data-end="1246.52">can just say you know animate you know</span> <span data-start="1246.52" data-end="1248.05">it reads kind of nice right says I want</span> <span data-start="1248.05" data-end="1249.79">to animate something and then I want to</span> <span data-start="1249.79" data-end="1251.65">do an alert all right so it reads a</span> <span data-start="1251.65" data-end="1254.5">little bit more composedly unfortunately</span> <span data-start="1254.5" data-end="1256.78">when you start getting into for just</span> <span data-start="1256.78" data-end="1259.27">straight linear composition I want to do</span> <span data-start="1259.27" data-end="1260.41">this then I want to do this thing I want</span> <span data-start="1260.41" data-end="1262.48">to do this the then composition works</span> <span data-start="1262.48" data-end="1266.47">quite well but here what we're actually</span> <span data-start="1266.47" data-end="1268.75">have is essentially something very much</span> <span data-start="1268.75" data-end="1270.31">like a for loop but it's actually</span> <span data-start="1270.31" data-end="1273.16">unrolled so tanned to turn it into a</span> <span data-start="1273.16" data-end="1276.43">call back and there's I'm a compiler guy</span> <span data-start="1276.43" data-end="1278.95">and so I speak I speak compiler and</span> <span data-start="1278.95" data-end="1280.78">there's a transformation there's a</span> <span data-start="1280.78" data-end="1282.22">description of this transformation it's</span> <span data-start="1282.22" data-end="1283.96">called continuation passing style and</span> <span data-start="1283.96" data-end="1285.69">it's actually a very well understood</span> <span data-start="1285.69" data-end="1287.85">transformation in the compiler community</span> <span data-start="1287.85" data-end="1292.81">and it turns out that a lot of a lot of</span> <span data-start="1292.81" data-end="1294.36">times when you do this transformation</span> <span data-start="1294.36" data-end="1296.73">when you're doing these transformations</span> <span data-start="1296.73" data-end="1299.98">in compilers you actually use this</span> <span data-start="1299.98" data-end="1301.9">continuation passing style technique and</span> <span data-start="1301.9" data-end="1303.49">have it actually automated by the</span> <span data-start="1303.49" data-end="1307.09">compiler you know in the in the opening</span> <span data-start="1307.09" data-end="1309.01">talk you know it's mentioned you know</span> <span data-start="1309.01" data-end="1310.21">what is some of the biggest problems</span> <span data-start="1310.21" data-end="1311.29">with node well one of the biggest</span> <span data-start="1311.29" data-end="1312.64">problems with node is that you have to</span> <span data-start="1312.64" data-end="1315.93">turn your code inside out using</span> <span data-start="1315.93" data-end="1318.19">continuation passing style right using</span> <span data-start="1318.19" data-end="1320.59">callbacks and that's something that is a</span> <span data-start="1320.59" data-end="1322.63">real barrier to entry for folks in in</span> <span data-start="1322.63" data-end="1323.87">node</span> <span data-start="1323.87" data-end="1326.84">and so the question is well you know if</span> <span data-start="1326.84" data-end="1329.78">compilers can do this CPS for you what</span> <span data-start="1329.78" data-end="1331.51">can we do to make this easier for you</span> <span data-start="1331.51" data-end="1335.6">you know more readable and so what I'm</span> <span data-start="1335.6" data-end="1338.54">going to show you and so this is where</span> <span data-start="1338.54" data-end="1341.51">now this is the same every everything</span> <span data-start="1341.51" data-end="1343.7">you see here is the same function so the</span> <span data-start="1343.7" data-end="1345.62">defer timeout is exactly the same code</span> <span data-start="1345.62" data-end="1348.74">the way that animate is is chained on is</span> <span data-start="1348.74" data-end="1350.63">exactly the same but now you'll notice</span> <span data-start="1350.63" data-end="1353.15">that the animate function is using sort</span> <span data-start="1353.15" data-end="1356.179">of this proposed feature here which is</span> <span data-start="1356.179" data-end="1358.67">called a weight and what is happening</span> <span data-start="1358.67" data-end="1361.67">here is is when you any function that</span> <span data-start="1361.67" data-end="1364.46">contains in a weight or when you see a</span> <span data-start="1364.46" data-end="1367.37">weight of an expression it says evaluate</span> <span data-start="1367.37" data-end="1370.16">that expression and then attach the</span> <span data-start="1370.16" data-end="1371.78">continuation of the function i'm</span> <span data-start="1371.78" data-end="1376.04">currently in to the end of that deferred</span> <span data-start="1376.04" data-end="1378.65">object and then what i'm going to do is</span> </p>
<p><span data-start="1378.65" data-end="1380.51">I'm going to return a new deferred</span> <span data-start="1380.51" data-end="1384.2">object to my collar so semantically this</span> <span data-start="1384.2" data-end="1386">is doing exactly what was happening in</span> <span data-start="1386" data-end="1389.51">this previous slide all right but</span> <span data-start="1389.51" data-end="1391.91">instead of having to turn this into</span> <span data-start="1391.91" data-end="1396.17">continuation passing style with a call</span> <span data-start="1396.17" data-end="1399.44">back we can just write it like a regular</span> <span data-start="1399.44" data-end="1403.67">for loop and the hope is is that with</span> <span data-start="1403.67" data-end="1406.82">with this kind of language feature will</span> <span data-start="1406.82" data-end="1408.98">actually sort of takes a lot of the</span> <span data-start="1408.98" data-end="1412.34">difficulty and of sort of coming to the</span> <span data-start="1412.34" data-end="1416.45">callback style world out of out of out</span> <span data-start="1416.45" data-end="1423.05">of node out of note um all right how</span> <span data-start="1423.05" data-end="1428.26">much your transforms so i'll show you</span> <span data-start="1428.26" data-end="1431.179">what this is going to end up looking</span> <span data-start="1431.179" data-end="1436.26">like</span> <span data-start="1436.27" data-end="1445.46">just pop it into the ripple loop I'm</span> <span data-start="1445.46" data-end="1447.92">going to do is I'm just going to get rid</span> <span data-start="1447.92" data-end="1452.08">of this so that it shortens up okay so</span> <span data-start="1452.08" data-end="1456.97">this is actually showing the the</span> <span data-start="1456.97" data-end="1459.86">generated code that the compiler is</span> <span data-start="1459.86" data-end="1464.53">going to generate for you for this so</span> <span data-start="1464.53" data-end="1466.76">here's our defer time out which we just</span> <span data-start="1466.76" data-end="1468.89">kind of comment it out and here's the</span> <span data-start="1468.89" data-end="1473.81">animate function and what happens is the</span> <span data-start="1473.81" data-end="1476.54">compiler turns your function into a</span> <span data-start="1476.54" data-end="1481.55">state machine and basically every line</span> <span data-start="1481.55" data-end="1487.07">every statement in the input basically</span> <span data-start="1487.07" data-end="1489.11">gets turned into a single state in our</span> <span data-start="1489.11" data-end="1493.28">state machine and then the compiler sort</span> <span data-start="1493.28" data-end="1497.04">of knits the state machines together by</span> <span data-start="1497.05" data-end="1502.82">and and and and hooks it all up so so</span> <span data-start="1502.82" data-end="1505.22">for example you know our first our first</span> <span data-start="1505.22" data-end="1507.14">state here is left equals 0 then we've</span> <span data-start="1507.14" data-end="1509.93">got left less than 350 and then we've</span> <span data-start="1509.93" data-end="1512.06">got you know element style and then</span> <span data-start="1512.06" data-end="1513.41">we've got their weight so let's walk it</span> <span data-start="1513.41" data-end="1515.33">through and you can see here's our left</span> <span data-start="1515.33" data-end="1517.67">equals 0 then go to state six and then</span> <span data-start="1517.67" data-end="1520.55">state 6 says do the comparison based on</span> <span data-start="1520.55" data-end="1521.9">the comparison we decide to go which</span> <span data-start="1521.9" data-end="1524.93">which state we're going to go to next so</span> <span data-start="1524.93" data-end="1526.25">again there's no magic here and this is</span> <span data-start="1526.25" data-end="1528.95">obviously not as pretty as the the CPS</span> <span data-start="1528.95" data-end="1530.12">transform code that you would write</span> <span data-start="1530.12" data-end="1532.43">yourself but the nice part about this is</span> <span data-start="1532.43" data-end="1533.63">that you know you didn't have to write</span> <span data-start="1533.63" data-end="1535.58">this at all you know the compiler wrote</span> <span data-start="1535.58" data-end="1540.23">it wrote it for you anyway so that and</span> <span data-start="1540.23" data-end="1542.39">then I'll just take you through the</span> <span data-start="1542.39" data-end="1544.97">actual meat of this you know here we're</span> <span data-start="1544.97" data-end="1546.65">actually saying hey call the four-time</span> <span data-start="1546.65" data-end="1549.26">out and we're going to get a weight task</span> <span data-start="1549.26" data-end="1552.02">back get a variable back we're going to</span> <span data-start="1552.02" data-end="1556.07">attach a callback and an error back to</span> <span data-start="1556.07" data-end="1558.95">on to that object and then we're going</span> <span data-start="1558.95" data-end="1562.7">to return back to our caller and when if</span> <span data-start="1562.7" data-end="1564.53">you if the callback is called we're</span> <span data-start="1564.53" data-end="1565.91">going to go to say one if the air back</span> <span data-start="1565.91" data-end="1567.02">is called we're going to go to stay too</span> <span data-start="1567.02" data-end="1568.97">nice part about this is it actually</span> <span data-start="1568.97" data-end="1570.11">chains all your exceptions as well</span> <span data-start="1570.11" data-end="1579.35">question oh um are you asking about this</span> <span data-start="1579.35" data-end="1581.45">code here yeah so there's so there's</span> <span data-start="1581.45" data-end="1583.49">dead code in here and the reason why is</span> <span data-start="1583.49" data-end="1586.37">just that um the way that this code is</span> <span data-start="1586.37" data-end="1589.1">written is we we focused on trying to</span> <span data-start="1589.1" data-end="1591.86">make the transform simple as possible</span> <span data-start="1591.86" data-end="1594.38">and understandable as possible like the</span> <span data-start="1594.38" data-end="1596.12">transforming code i should say the code</span> <span data-start="1596.12" data-end="1597.86">that's generating this as opposed to</span> <span data-start="1597.86" data-end="1599.36">trying to generate completely optimal</span> <span data-start="1599.36" data-end="1605.09">output actual transfer marco ok so i can</span> <span data-start="1605.09" data-end="1609.679">i can show you the transforming code let</span> <span data-start="1609.679" data-end="1621.82">me do that good lord where is it hang on</span> <span data-start="1621.82" data-end="1628.81">sorry</span> <span data-start="1628.82" data-end="1630.84">so I think the important part to</span> <span data-start="1630.84" data-end="1632.1">remember here is what when you're</span> <span data-start="1632.1" data-end="1633.33">looking what's happening here in the</span> <span data-start="1633.33" data-end="1634.95">transformation it's sort of like this</span> <span data-start="1634.95" data-end="1636.45">library of hacks that you put together</span> <span data-start="1636.45" data-end="1637.71">to sort of achieve something in</span> </p>
<p><span data-start="1637.71" data-end="1639.21">JavaScript right where the job or</span> <span data-start="1639.21" data-end="1641.07">JavaScript has the semantics available</span> <span data-start="1641.07" data-end="1642.299">for you and you just have to put</span> <span data-start="1642.299" data-end="1643.769">together this large pile of code to sort</span> <span data-start="1643.769" data-end="1645.36">of make it happen in JavaScript and when</span> <span data-start="1645.36" data-end="1648.539">you're doing that that's the exact same</span> <span data-start="1648.539" data-end="1650.46">library of hacks that you sort of embed</span> <span data-start="1650.46" data-end="1652.649">into this transformation form of your</span> <span data-start="1652.649" data-end="1654.289">compiler you write it a different way</span> <span data-start="1654.289" data-end="1656.58">but if there's something that you want</span> <span data-start="1656.58" data-end="1658.559">to achieve through syntax in JavaScript</span> <span data-start="1658.559" data-end="1660.96">once you sort of walk through this set</span> <span data-start="1660.96" data-end="1663.69">of steps in the compiler chain the end</span> <span data-start="1663.69" data-end="1665.34">state for each one of those hacks that</span> <span data-start="1665.34" data-end="1667.26">you're giving syntax to is this</span> <span data-start="1667.26" data-end="1668.909">transformation it's exactly the same</span> <span data-start="1668.909" data-end="1670.08">code that you were going to have to</span> <span data-start="1670.08" data-end="1672.12">generate yourself or write out the long</span> <span data-start="1672.12" data-end="1674.25">hand yourself and the front of the</span> <span data-start="1674.25" data-end="1676.169">compiler tool chain is just there to get</span> <span data-start="1676.169" data-end="1677.46">you into a state where you can transform</span> <span data-start="1677.46" data-end="1679.62">this tree to generate that same thing</span> <span data-start="1679.62" data-end="1680.97">that you were going to write by hand so</span> <span data-start="1680.97" data-end="1682.11">if you think about it in terms of like</span> </p>
<p><span data-start="1682.11" data-end="1684.69">I'm doing this a lot I write it all the</span> <span data-start="1684.69" data-end="1686.22">time I want to stop writing it all the</span> <span data-start="1686.22" data-end="1688.86">time and then walk back from there it's</span> <span data-start="1688.86" data-end="1690.48">really easy in many ways to start</span> <span data-start="1690.48" data-end="1691.559">especially if it's all JavaScript</span> <span data-start="1691.559" data-end="1692.85">especial but it's all one language it's</span> <span data-start="1692.85" data-end="1694.23">really easy to start hacking on this and</span> <span data-start="1694.23" data-end="1696.179">say it'd be great if javascript did this</span> <span data-start="1696.179" data-end="1697.62">instead and makes it really</span> <span data-start="1697.62" data-end="1698.82">straightforward to start working on it</span> <span data-start="1698.82" data-end="1700.71">this is the worst case scenario so if</span> <span data-start="1700.71" data-end="1702.659">this it doesn't scare the heck out of</span> <span data-start="1702.659" data-end="1708.59">you you two can work on a compiler yeah</span> <span data-start="1708.59" data-end="1711.24">yeah so this is this is and this is the</span> <span data-start="1711.24" data-end="1713.1">this is actually like by far the</span> <span data-start="1713.1" data-end="1716.669">gnarliest of the transforms so anyhow so</span> <span data-start="1716.669" data-end="1718.679">this is you know and the trick is is</span> <span data-start="1718.679" data-end="1722.01">just to sort of break it down into into</span> <span data-start="1722.01" data-end="1727.649">cases and enroll it in yes our waiter</span> <span data-start="1727.649" data-end="1730.889">time okay and that's basically it if</span> <span data-start="1730.889" data-end="1732.72">you're interested in looking at the</span> </p>
<p><span data-start="1732.72" data-end="1735.09">Christian compiler here's the links um</span> </p>
</section>