<section>
<p><span data-start="8.37" data-end="13.75"Audience member: Hello, everyone, welcome to my awesome talk.</span> <span data-start="13.75" data-end="16.61">My name is Ashley Williams.</span> <span data-start="16.61" data-end="26.72">You may know me as AB.Dubs from the internet, I'm sorry!</span> <span data-start="26.72" data-end="28.009">What is this talk about?</span> <span data-start="28.009" data-end="30.029">This talk is about a couple of things.</span> <span data-start="30.029" data-end="32.18">The first thing is it about is performance.</span> <span data-start="32.18" data-end="37.9">More importantly, performance that makes things more accessible, and, unlike a lot of the</span> <span data-start="37.9" data-end="43.239">talks that we've seen at this conference, this talk is also about infrastructure.</span> <span data-start="43.239" data-end="46.579">Can I get a shout out from any of the ops people in the room?</span> <span data-start="46.579" data-end="47.579">Come on!</span> <span data-start="47.579" data-end="49.57">Who is on pager duty right now!</span> <span data-start="49.57" data-end="51.7">Someone, I'm so sorry.</span> </p>
<p><span data-start="51.7" data-end="55.249">That sucks!</span> <span data-start="55.249" data-end="61.05">I want this talk to be a little bit about how the internet works, and potentially, how</span> <span data-start="61.05" data-end="63.66">the internet could work.</span> <span data-start="63.66" data-end="68.6">And so this talk is called "JavaScript's journey to the edge" and so there's a little bit of</span> <span data-start="68.6" data-end="69.77">journeying.</span> </p>
<p><span data-start="69.77" data-end="74.09">Perhaps you're more familiar with these journeys if you're from the United States, but I just</span> <span data-start="74.09" data-end="81.55">wanted to say a small thing, as this is JSConf about how important this conference has been</span> <span data-start="81.55" data-end="82.55">to me.</span> <span data-start="82.55" data-end="91.28">I spoke at the last Reject JS in 2015, and I was the second-to-last reject only to Marika</span> <span data-start="91.28" data-end="94.43">who was the last reject.</span> <span data-start="94.43" data-end="96.42">It was one of the most amazing conferences.</span> <span data-start="96.42" data-end="102.74">The next day I went to JSConf EU and saw someone wearing a shirt with my face on it which was</span> <span data-start="102.74" data-end="105.49">a fascinating surprise.</span> <span data-start="105.49" data-end="110.37">This was from a musical number they had done using quotes from a previous talks of mine,</span> <span data-start="110.37" data-end="116.81">and they did that again in 2017, or 2016, with the classic "people got mad" which was</span> <span data-start="116.81" data-end="121.72">an auto tune of my voice talking about how people get mad if you put all of your code</span> <span data-start="121.72" data-end="123.05">in one file!</span> <span data-start="123.05" data-end="127">They do get mad!</span> <span data-start="127" data-end="131.51">But then I spoke at JSConf EU in 2017 and I wore an Antifa shirt.</span> </p>
<p><span data-start="131.51" data-end="136.46">It was a super fun talk.</span> <span data-start="136.46" data-end="139.209">Man, I have so many friends at this conference.</span> <span data-start="139.209" data-end="145.06">The last time I was here was last year where I did an impromptu Rust and WebAssembly workshop</span> <span data-start="145.06" data-end="154.15">for 100 people from the Mozilla booth, and it's cool.</span> <span data-start="154.15" data-end="156.959">This conference is super awesome, so can we give it a round of applause?</span> </p>
<p><span data-start="156.959" data-end="164.049">I love this place.</span> <span data-start="164.049" data-end="168.989">But this talk is obviously not about my journey, this talk is about JavaScript's journey, so</span> <span data-start="168.989" data-end="173.799">I'm about to show you some very scientific timelines that I made using Wikipedia and</span> <span data-start="173.799" data-end="176.389">Keynote.</span> <span data-start="176.389" data-end="183.12">JavaScript has had a fascinating history, and people talk about history, about this</span> <span data-start="183.12" data-end="188.47">one being the tenth one, and Node being announced in 2009.</span> <span data-start="188.47" data-end="197.11">We've seen a lot of development from JavaScript, and we've seen it develop really, really quickly,</span> <span data-start="197.11" data-end="200.989">and I think it's kind of developed in one particular way, so here we see the first website</span> <span data-start="200.989" data-end="206.069">in 1991, and then we end with Wasm up in 2017.</span> </p>
<p><span data-start="206.069" data-end="209.15">Wasm was only born in 2017?</span> <span data-start="209.15" data-end="210.15">Amazing.</span> <span data-start="210.15" data-end="216.629">But, we saw the appearance of a fair number of things, including a lot of browser engines,</span> <span data-start="216.629" data-end="217.959">and a lot of frameworks.</span> <span data-start="217.959" data-end="222.92">And I think one of the most pivotal things in this timeline that people don't usually</span> <span data-start="222.92" data-end="229.68">see is the emergence much Google Maps in 2004 really motivated people to see what you could</span> <span data-start="229.68" data-end="235.73">do inside of a website, and made it so that we started developing all of these things</span> <span data-start="235.73" data-end="239.65">that you could do browser computations so much faster.</span> <span data-start="239.65" data-end="242.669">So if we put these graphs together and take a look at this, what is happening is that</span> <span data-start="242.669" data-end="248.279">the speed of computation in the browser is just exponentially growing, and that is so</span> <span data-start="248.279" data-end="253.17">awesome, and I'm a big WebAssembly fan, I'm super here for this.</span> <span data-start="253.17" data-end="259.12">However, because the browser has become such a computationally awesome agent, we've run</span> <span data-start="259.12" data-end="261.63">into some costs.</span> </p>
<p><span data-start="261.63" data-end="264.44">How much does doing this cost?</span> <span data-start="264.44" data-end="268.36">And fundamentally, this comes back to the idea of accessibility, and it's spelled wrong</span> <span data-start="268.36" data-end="271.889">here, but it really comes down to the fact that what we are talking about is the ability</span> <span data-start="271.889" data-end="276.17">for people even to access content.</span> <span data-start="276.17" data-end="284.53">Mani in his talk the Cost of JavaScript in 2018 said the web is bloated by user experience.</span> <span data-start="284.53" data-end="286.84">And he's genuinely completely right.</span> <span data-start="286.84" data-end="290.4">So how many people here have ever checked out HTTP Archive?</span> <span data-start="290.4" data-end="293.75">If you haven't, it's amazing, and you could loan at these numbers.</span> <span data-start="293.75" data-end="295.6">This is just one of the graphs.</span> </p>
<p><span data-start="295.6" data-end="302.58">What this graph is showing is the median size of desktop and mobile applications with the</span> <span data-start="302.58" data-end="308.861">JavaScript bytes that are being downloaded to the device, and we have seen a 353 per</span> <span data-start="308.861" data-end="316.68">cent increase for desktop, and it's worse for mobile â€” 577 per cent growth in how much</span> <span data-start="316.68" data-end="318.18">here sending to the browser.</span> <span data-start="318.18" data-end="323.99">It's cool because the browser can take that stuff and use it really fast.</span> <span data-start="323.99" data-end="328.569">Moving those bytes over the wire takes a lot of time.</span> </p>
<p><span data-start="328.569" data-end="333.33">So, on average, remember, this is on average, there are people who are on the really bad</span> <span data-start="333.33" data-end="339.25">end of this, mobile loading time for an average website takes nine seconds.</span> <span data-start="339.25" data-end="342.21">All right?</span> <span data-start="342.21" data-end="344.5">That's unacceptable.</span> <span data-start="344.5" data-end="349.18">So this is going to be part of the problem we are going to solve in my talk today.</span> <span data-start="349.18" data-end="355.569">So, my intro did not entirely say this but I'm a systems engineer for a big orange cloud,</span> <span data-start="355.569" data-end="360.75">not to be confused with a big orange website which I'm not a fan of, or SoundCloud which</span> <span data-start="360.75" data-end="362.81">has a surprisingly spectacular logo.</span> <span data-start="362.81" data-end="368.319">I work for Cloudflare, I know it doesn't look super big here.</span> <span data-start="368.319" data-end="371.47">What does it do?</span> <span data-start="371.47" data-end="374.07">Cloudflare is an infrastructure company.</span> </p>
<p><span data-start="374.07" data-end="378.34">Cloudflare is not super good at actually defining what it does, but the thing you definitely</span> <span data-start="378.34" data-end="383.49">don't call it is a DNS company, because also, I mean, no-one likes DNS.</span> <span data-start="383.49" data-end="384.67">I can't figure that out.</span> <span data-start="384.67" data-end="387.939">I work at a DNS now.</span> <span data-start="387.939" data-end="393.319">But we call ourselves an infrastructure company, and sometimes, I describe Cloudflare as a</span> <span data-start="393.319" data-end="400.52">hardware company, and that is because our primary asset is this, and this is a map of</span> <span data-start="400.52" data-end="406.46">180 data centres and growing all over the world.</span> <span data-start="406.46" data-end="413.22">And so, this set of data centres contains something which is called "the Edge", and</span> <span data-start="413.22" data-end="414.31">this is a terrible name.</span> <span data-start="414.31" data-end="416.819">It doesn't make any sense to most people.</span> <span data-start="416.819" data-end="418.3">Someone said there's a wrestler called the Edge.</span> <span data-start="418.3" data-end="419.669">I don't know who that is, whatever.</span> <span data-start="419.669" data-end="426.28">To talk to you about what the Edge is, we will talk about the classic dichotomies in</span> <span data-start="426.28" data-end="429.15">web programming: client and server.</span> </p>
<p><span data-start="429.15" data-end="432.05">To do so, let's talk about pizza.</span> <span data-start="432.05" data-end="433.27">Who likes pizza?</span> <span data-start="433.27" data-end="435.49">All right, there we go!</span> <span data-start="435.49" data-end="438.52">I'm originally from New York, so pizza is cool, right?</span> <span data-start="438.52" data-end="442.569">We are going to talk about pizza delivery, and I want you to view that in the eyes of</span> <span data-start="442.569" data-end="447.16">pizza accessibility, because it would be terrible to deny people pizza, right?</span> </p>
<p><span data-start="447.16" data-end="449.199">Especially, warm, fresh pizza.</span> <span data-start="449.199" data-end="453.789">So obviously, you guys smoosh them together for pizza accessibility, all one word.</span> <span data-start="453.789" data-end="459.61">Here is animation mere HP your JavaScript programmer will be represented by this lovely</span> <span data-start="459.61" data-end="461.86">chef.</span> <span data-start="461.86" data-end="466.449">The JavaScript's generated output is a pizza.</span> <span data-start="466.449" data-end="472.259">Your end using is a super hero because this is how we should think about our users, and</span> <span data-start="472.259" data-end="475.74">we are going to have this interesting thing that is a basket, and so there you can think</span> <span data-start="475.74" data-end="479.77">of that as a data centre, a point of presence, or a cache node.</span> <span data-start="479.77" data-end="482.52">Let's take a look at what client-side rendering looks like.</span> <span data-start="482.52" data-end="487.86">With client-side rendering, what we do is we have our chef in New York, and we have</span> <span data-start="487.86" data-end="490.59">our person who wants to eat pizza in Australia.</span> <span data-start="490.59" data-end="496.699">When we render on the client, we send the chef to Australia.</span> <span data-start="496.699" data-end="497.9">That's a lot, right?</span> <span data-start="497.9" data-end="501.8">And then, what the chef has to do is then the chef has to cook.</span> <span data-start="501.8" data-end="505.57">And then, at that point, you have delivered your pizza in Australia.</span> </p>
<p><span data-start="505.57" data-end="508.62">But that's a little concerning, right?</span> <span data-start="508.62" data-end="514.159">Like, maybe the person in Australia doesn't have like a whole room with an oven for a</span> <span data-start="514.159" data-end="516.28"><to move in and start cooking.</span> <span data-start="516.28" data-end="520.26">Like maybe they have a flip phone that literally can't do that.</span> </p>
<p><span data-start="520.26" data-end="523.3">This is a little bit after complicated situation.</span> <span data-start="523.3" data-end="525.69">So, of course be what do we do?</span> <span data-start="525.69" data-end="526.69">Let's throw a cache on it.</span> <span data-start="526.69" data-end="528.85">That should make it better, right?</span> <span data-start="528.85" data-end="535.82">Instead, with our cache, we send our chef to a basket, you know, and the Pacific Ocean,</span> <span data-start="535.82" data-end="537.38">South Pacific.</span> <span data-start="537.38" data-end="544.38">We send the whole chef and then we still have to send the whole chef to Australia where</span> <span data-start="544.38" data-end="546.38">they cook and they make their pizza.</span> <span data-start="546.38" data-end="550.35">Again, we still have this situation, even with the cache, where the chef is travelling</span> <span data-start="550.35" data-end="554.82">for maybe a closer location, but these still have to go into that person's house and make</span> <span data-start="554.82" data-end="555.82">that pizza.</span> </p>
<p><span data-start="555.82" data-end="557.94">That's pretty invasive be think.</span> <span data-start="557.94" data-end="559.36">All right?</span> <span data-start="559.36" data-end="563">So we can keep sending those chefs, but, yes.</span> <span data-start="563" data-end="564.82">Again, we have another option, right?</span> </p>
<p><span data-start="564.82" data-end="569.63">We have server-side rendering, and of course as everyone said, ten years ago at JSConf</span> <span data-start="569.63" data-end="577.97">you, Ryan Dahl announced node.js and it was cool because it promised to unify web development</span> <span data-start="577.97" data-end="579.53">on the client side and the server.</span> <span data-start="579.53" data-end="581.76">It's like why do it in two languages?</span> <span data-start="581.76" data-end="583.71">Let's do it in one.</span> <span data-start="583.71" data-end="587.85">That made the server accessible to JavaScript developers.</span> </p>
<p><span data-start="587.85" data-end="592.87">Maybe not for the first time, but for the first time for fin who didn't want to learn</span> <span data-start="592.87" data-end="594.13">a new language.</span> <span data-start="594.13" data-end="598.03">So let's take a look at what server-side rendering looks like.</span> <span data-start="598.03" data-end="601.8">We got our chef in New York and our super hero in Australia.</span> <span data-start="601.8" data-end="603.12">They're going to cook in New York.</span> <span data-start="603.12" data-end="605.68">No more moving into the house to make pizza.</span> <span data-start="605.68" data-end="607.12">They're going to send that right on over.</span> <span data-start="607.12" data-end="610.66">Not bad, but that's a pretty long trip for some pizza, right?</span> <span data-start="610.66" data-end="612.26">I'm not sure that's going to hold up.</span> <span data-start="612.26" data-end="614.97">Fresh pizza's very important, right?</span> <span data-start="614.97" data-end="618.139">So maybe that's not the freshest of pizzas.</span> <span data-start="618.139" data-end="619.56">Let's throw a cache on it, right?</span> <span data-start="619.56" data-end="621.38">Cool, we will throw a cache on it.</span> </p>
<p><span data-start="621.38" data-end="622.449">So cool.</span> <span data-start="622.449" data-end="627.5">The chef can still make their pizza in New York, and now they can just send it on over</span> <span data-start="627.5" data-end="633.2">to that cache and the pizza can hang out there, and then our Australia person can happily</span> <span data-start="633.2" data-end="636.61">eat all the pizza they would like.</span> </p>
<p><span data-start="636.61" data-end="639.08">But that pizza maybe, it's a little old.</span> <span data-start="639.08" data-end="640.08">I don't know.</span> <span data-start="640.08" data-end="641.81">What if they wanted an extra topping on something?</span> <span data-start="641.81" data-end="645.19">They would have to go all the way back, and that's really not efficient.</span> <span data-start="645.19" data-end="650.22">So, when we talk about the client and server, and we've heard other people talk about this</span> <span data-start="650.22" data-end="655.42">at this conference already, is that we are seeing frameworks realise they have to negotiate</span> <span data-start="655.42" data-end="657.3">this boundary better.</span> </p>
<p><span data-start="657.3" data-end="662.31">But that's really only just starting, and we are still genuinely talking about these</span> <span data-start="662.31" data-end="668.209">trade-offs between the client and the server, and they're tricky trade-offs.</span> <span data-start="668.209" data-end="672.67">Now, it wouldn't be an Ashley Williams talk if, when I said "trade doc" I didn't immediately</span> <span data-start="672.67" data-end="676.149">start talking about dialectics.</span> <span data-start="676.149" data-end="683.88">Who here knows what a dialectics is?</span> <span data-start="683.88" data-end="684.88">Dia what?</span> <span data-start="684.88" data-end="686.56">It is super foreign.</span> <span data-start="686.56" data-end="692.78">There's an idea of formal logic where you say A equals A. This is a thing, and then</span> <span data-start="692.78" data-end="695.24">that thing is always equal to this thing.</span> <span data-start="695.24" data-end="696.5">We use this a lot in science.</span> <span data-start="696.5" data-end="703.41">We say when we reach a contradiction, maybe where A doesn't equal A, we are wrong, right?</span> <span data-start="703.41" data-end="709.32">A does not equal A. However, I think that this is completely backwards.</span> <span data-start="709.32" data-end="717.3">In fact, the dialectical method, in contrast of formal logic, challenges to contradictions.</span> </p>
<p><span data-start="717.3" data-end="723.949">Fundamentally, the idea of dialectics is that the motor of history is these oppositions,</span> <span data-start="723.949" data-end="729.37">and that resolving those oppositions and pushing them forward as the synthesis of the oppositions</span> <span data-start="729.37" data-end="734.69">is what makes things happen, and I get so excited about this because I am a giant philosophy</span> <span data-start="734.69" data-end="740.19">nerd, so this is the philosophy nerd version of the diagram but this one will go over a</span> <span data-start="740.19" data-end="741.72">little bit better.</span> <span data-start="741.72" data-end="743.2">Just wait for it.</span> <span data-start="743.2" data-end="747.529">This will explain everything.</span> <span data-start="747.529" data-end="749.12">There we go!</span> </p>
<p><span data-start="749.12" data-end="751.82">Dialectics, right?</span> <span data-start="751.82" data-end="756.55">I want to see here we've been kind of assuming this trade-off between client and server for</span> <span data-start="756.55" data-end="761.57">a very long time, and then maybe dichotomy is the problem.</span> <span data-start="761.57" data-end="767.19">All right, so, we've got this problem, stuff is slow, we've got the client, we've got the</span> <span data-start="767.19" data-end="769.6">server, they seem to be in opposition, we have no way to resolve them.</span> </p>
<p><span data-start="769.6" data-end="771.47">What is to be done?</span> <span data-start="771.47" data-end="775.759">As I told you, I work to of a big orange cloud, and this big orange cloud has a ton of baskets</span> <span data-start="775.759" data-end="777.24">all over the earth.</span> <span data-start="777.24" data-end="782.3">One day, they were like what should we do with all these bassets?</span> <span data-start="782.3" data-end="786.11">We've been storing static assets in them but maybe we could do something cooler.</span> <span data-start="786.11" data-end="787.22">This is a direct quote.</span> <span data-start="787.22" data-end="791.029">Just kidding, it's not a direct quote at all!</span> <span data-start="791.029" data-end="798.04">What this became was like we have the client and the server, let's kind of take those oppositions,</span> <span data-start="798.04" data-end="802.12">synthesise them, and create the Edge.</span> <span data-start="802.12" data-end="803.88">So let's take a look at what that looks like.</span> <span data-start="803.88" data-end="805.829">We are back to pizza, all.</span> <span data-start="805.829" data-end="807.68">I hope you're into it.</span> <span data-start="807.68" data-end="811.18">So with Edge-side rendering, we have the basket and the chef.</span> <span data-start="811.18" data-end="814.49">The chef lives in the basket.</span> </p>
<p><span data-start="814.49" data-end="819.28">In our previous examples, no-one could cook in the basket.</span> <span data-start="819.28" data-end="822.81">But with Edge-side rendering, you can cook in the basket!</span> <span data-start="822.81" data-end="826.81">And so, now the chef doesn't have to move into your house and make pizza, they can hang</span> <span data-start="826.81" data-end="832.31">out in the basket that's near your house, make you pizza, and then deliver it to you.</span> <span data-start="832.31" data-end="833.459">That's pretty sweet.</span> <span data-start="833.459" data-end="838.68">But, this kind of looks a lot like server-side rendering, a little bit, right?</span> <span data-start="838.68" data-end="840.3">Like, it's just one.</span> <span data-start="840.3" data-end="845.569">But the real trick is, remember, we don't just have one basket, we have a lot of baskets.</span> <span data-start="845.569" data-end="851.93">So, at any point in time, these chefs can be making pizza and sending them to people</span> <span data-start="851.93" data-end="857.019">all over the world so everybody can have pizza that is nice and fresh without someone messing</span> <span data-start="857.019" data-end="859.399">up their kitchen.</span> </p>
<p><span data-start="859.399" data-end="862.73">That's what the Edge is.</span> <span data-start="862.73" data-end="865.2">You might be asking this is a talk about performance.</span> <span data-start="865.2" data-end="867.16">How fast are you?</span> <span data-start="867.16" data-end="868.16">Right?</span> <span data-start="868.16" data-end="872.01">So benchmarks are done and I'm going to show you some.</span> <span data-start="872.01" data-end="873.279">Your mileage may vary.</span> <span data-start="873.279" data-end="876.71">These were done yesterday in who knows what will happen tomorrow?</span> <span data-start="876.71" data-end="880.12">These are good representative benchmarks of what we have.</span> <span data-start="880.12" data-end="889.36">There is something called serverlessbenchmark.com, but these are competitive numbers.</span> <span data-start="889.36" data-end="892.21">I don't want to do a product talk where I compete against other products.</span> <span data-start="892.21" data-end="897.79">I want to skip over that one and do what I call big numbers are big, small numbers are</span> <span data-start="897.79" data-end="900.86">small, all numbers on small.</span> <span data-start="900.86" data-end="908.139">These are numbers for response times, in Cape Town, and, so worker are respond in about</span> <span data-start="908.139" data-end="914.589">143 milliseconds, and a GitHub pages is going to respond in 591.</span> <span data-start="914.589" data-end="925.73">In Doha, worker will respond in 44 milliseconds, in GitHub pages, 497 milliseconds.</span> </p>
<p><span data-start="925.73" data-end="927.36">What about Australia?</span> <span data-start="927.36" data-end="931.69">A worker, 208 milliseconds, GitHub pages 624.</span> <span data-start="931.69" data-end="935.12">Those are some big numbers.</span> <span data-start="935.12" data-end="938.11">Remember, these are people accessing the internet.</span> <span data-start="938.11" data-end="941.72">Maybe you'll call me a millennial, but if I don't have access to the internet, I actually</span> <span data-start="941.72" data-end="942.72">get nervous.</span> <span data-start="942.72" data-end="944.28">Emotional health.</span> <span data-start="944.28" data-end="946.48">Also, it's all of this information.</span> <span data-start="946.48" data-end="951.68">All of the ability to prosper currently on earth is largely driven by the internet, and</span> <span data-start="951.68" data-end="952.829">so this axis matters.</span> <span data-start="952.829" data-end="957.76">Could you imagine having to wait that much more time just to get, I don't know, you probably</span> <span data-start="957.76" data-end="958.76">read Reddit.</span> <span data-start="958.76" data-end="964.85">You would have to wait so long, it'll be terrible.</span> </p>
<p><span data-start="964.85" data-end="969.67">Reykjavik Iceland, 170 milliseconds.</span> <span data-start="969.67" data-end="973.329">Now you're probably asking me how do you do that?</span> <span data-start="973.329" data-end="976.639">That is very interesting, or hopefully you think it's interesting.</span> <span data-start="976.639" data-end="978.5">Let's talk a little bit about it.</span> <span data-start="978.5" data-end="983.019">We have all of these baskets, and it turns out that trying to cook pizza on these baskets</span> <span data-start="983.019" data-end="987.58">actually has a lot of fascinating constraints, and so the first thing we can think about</span> <span data-start="987.58" data-end="988.58">is scaleability.</span> <span data-start="988.58" data-end="993.899">So, for Cloudflare, scaleability, traffic, or requests, they're super easy, never gets</span> <span data-start="993.899" data-end="994.899">huge.</span> </p>
<p><span data-start="994.899" data-end="997.72">I think it can take over 30 terabytes of traffic over it.</span> <span data-start="997.72" data-end="1000.29">It's a lot, and it's continuing to grow.</span> <span data-start="1000.29" data-end="1006.759">However, for this model to work, this idea of tenants, or how many apps we can put in</span> <span data-start="1006.759" data-end="1009.51">the basket is super hard.</span> </p>
<p><span data-start="1009.51" data-end="1015.339">Every app needs to be in some location, and some places are very small.</span> <span data-start="1015.339" data-end="1021.29">We are looking at a need for 100 times efficiency than what you usually see on a server-side</span> <span data-start="1021.29" data-end="1022.82">offering.</span> <span data-start="1022.82" data-end="1024.79">We came one a set of constraints.</span> <span data-start="1024.79" data-end="1029.95">The first was for the code footprint, the base amount of what the app needs to be, a</span> <span data-start="1029.95" data-end="1037.76">VM requires ten gigabytes, a container around 100 and then what we needed was less than</span> <span data-start="1037.76" data-end="1039.49">one.</span> <span data-start="1039.49" data-end="1040.49">Less than one.</span> <span data-start="1040.49" data-end="1041.49">That's a pretty big deal.</span> <span data-start="1041.49" data-end="1042.49">All right?</span> <span data-start="1042.49" data-end="1047.05">And then from memory usage, a VM is going to require at least one gig a container, again,</span> <span data-start="1047.05" data-end="1051.919">around the same that had for the footprint but we needed to do under five.</span> <span data-start="1051.919" data-end="1052.919">All right?</span> <span data-start="1052.919" data-end="1056.95">And this is fundamentally because the Edge is not a large place, or like here, the kids</span> <span data-start="1056.95" data-end="1060.65">call it, the Edge is not thick at all.</span> </p>
<p><span data-start="1060.65" data-end="1062.42">It's very small.</span> <span data-start="1062.42" data-end="1068.15">We have to get everyone's apps on here because we want everyone to be super fast, all right?</span> <span data-start="1068.15" data-end="1073.15">Additionally, because of the needs that we have, context-switching is very interesting</span> <span data-start="1073.15" data-end="1074.15">thing.</span> <span data-start="1074.15" data-end="1076.82">For a VM, very low context-switching is needed.</span> <span data-start="1076.82" data-end="1079.49">Maybe for a container, a little bit more.</span> <span data-start="1079.49" data-end="1090.52">We need context switching because the apps only run local to it.</span> <span data-start="1090.52" data-end="1093.87">We don't need to be running that app all the time.</span> </p>
<p><span data-start="1093.87" data-end="1098.48">We need to be able to switch back and forth between apps incredibly quickly, like to the</span> <span data-start="1098.48" data-end="1103.81">point where switching processes would be too much overhead.</span> <span data-start="1103.81" data-end="1108.76">That's a pretty big constraint, all right?</span> <span data-start="1108.76" data-end="1110.71">Start-up time is a fascinating constraint.</span> <span data-start="1110.71" data-end="1116.49">A VM is going to take around ten seconds, a container 500 milliseconds.</span> <span data-start="1116.49" data-end="1124.76">We need it to be less than someone will notice â€” around one 50th of the blink of an eye.</span> <span data-start="1124.76" data-end="1126.35">Why do we need that?</span> <span data-start="1126.35" data-end="1130.58">If people start using too many resources on our Edge, we need to be able to kick them</span> <span data-start="1130.58" data-end="1132.11">out quick.</span> </p>
<p><span data-start="1132.11" data-end="1137.44">But, if they get another request in, we need to be able to start them back up quickly again</span> <span data-start="1137.44" data-end="1140.32">in a way that the user never would notice, all right?</span> <span data-start="1140.32" data-end="1143.64">These are some pretty serious constraints, right?</span> <span data-start="1143.64" data-end="1148.33">But, there's other things that also have these same constraints.</span> <span data-start="1148.33" data-end="1154.289">For example, certain APIs, particularly APIs that speak to our APIs may need to run client</span> <span data-start="1154.289" data-end="1158.72">code directly on the server, because it needs to be more efficient.</span> </p>
<p><span data-start="1158.72" data-end="1160.51">Similar with big-data processing.</span> <span data-start="1160.51" data-end="1165.919">With big data, you can't bring the data to the app, you bring the app to the data.</span> <span data-start="1165.919" data-end="1168.46">It's similar constraints to what we have.</span> <span data-start="1168.46" data-end="1174.559">Also, web browsers also have the exact same constraints.</span> <span data-start="1174.559" data-end="1178.929">They need to be constantly running all of that code from all of those websites that</span> <span data-start="1178.929" data-end="1182.88">you go to that all of you are writing.</span> <span data-start="1182.88" data-end="1187">This is where I say web browsers are freaking awesome.</span> </p>
<p><span data-start="1187" data-end="1194.23">We have actually already solved this that is namespacing server-side need with a client-side</span> <span data-start="1194.23" data-end="1195.27">technology.</span> <span data-start="1195.27" data-end="1200.34">Like server technology is actually too slow, and building out server-side technology, have</span> <span data-start="1200.34" data-end="1207.44">we overlooked the fact that we have this beautiful technology that is our client for the web?</span> <span data-start="1207.44" data-end="1211.73">Browsers are optimised for exactly the types of things that we need in a type of serverless</span> <span data-start="1211.73" data-end="1214.26">properly.</span> <span data-start="1214.26" data-end="1217.86">They've got fast start-ups, someone is literally there waiting for it.</span> <span data-start="1217.86" data-end="1219.24">They're going to be moving quick.</span> <span data-start="1219.24" data-end="1223.51">Remember, we talked about computation in the browser and how optimising rates has been</span> <span data-start="1223.51" data-end="1224.51">getting, all right?</span> </p>
<p><span data-start="1224.51" data-end="1230.51">I don't know about you, but I usually have around 100 tabs open at once, and that's a</span> <span data-start="1230.51" data-end="1231.809">lot of processes.</span> <span data-start="1231.809" data-end="1237.539">You also have to remember that a single page is not always a single website.</span> <span data-start="1237.539" data-end="1238.95">There are plenty of iFrames.</span> <span data-start="1238.95" data-end="1245.53">That like button is its own context and the browser is orchestrating all of that.</span> <span data-start="1245.53" data-end="1251.52">Additionally, and I know people will fight me on this, browsers are optimised for secure</span> <span data-start="1251.52" data-end="1252.52">isolation.</span> </p>
<p><span data-start="1252.52" data-end="1257.76">When you go to a website, if it was able to leak all that stuff out to your other websites,</span> <span data-start="1257.76" data-end="1260.85">we would be in a big, big problem.</span> <span data-start="1260.85" data-end="1268.679">So, the architect of this run time said web browsers has been the most hostile security</span> <span data-start="1268.679" data-end="1271.75">environment for quite some time.</span> <span data-start="1271.75" data-end="1274.36">And I'm inclined to agree with him on this.</span> <span data-start="1274.36" data-end="1276.09">I think this makes sense.</span> <span data-start="1276.09" data-end="1284.1">So, with deciding what we were going to do for a serverless run time, we picked V8.</span> <span data-start="1284.1" data-end="1286.67">Come on!</span> <span data-start="1286.67" data-end="1301.46">We chose to run the serverless run time on V8 using this class of V8 isolate.</span> <span data-start="1301.46" data-end="1307.47">You could traditionally think of this more like a VM but the word "VM" has kind of changed</span> <span data-start="1307.47" data-end="1311.179">so this is more of a JVM which is not the same.</span> <span data-start="1311.179" data-end="1318.94">You can understand it as a light weight context sandbox, so why is this better an VMs or containers?</span> <span data-start="1318.94" data-end="1322.309">It is basically because you get to share more.</span> </p>
<p><span data-start="1322.309" data-end="1325.1">It's like a little bit more communist, right?</span> <span data-start="1325.1" data-end="1330.32">VMs, you get the hardware virtualised, and then you've not to bring everything else on</span> <span data-start="1330.32" data-end="1331.32">your own.</span> <span data-start="1331.32" data-end="1335.94">Containers, all right, you get the operating system, but again, bringing everything else</span> <span data-start="1335.94" data-end="1336.97">on your own.</span> </p>
<p><span data-start="1336.97" data-end="1343.37">With isolates, you get web platform APIs, the JS run time, and operating system, hardware,</span> <span data-start="1343.37" data-end="1347.85">and you just show up with your application and maybe a couple of weird libraries you</span> <span data-start="1347.85" data-end="1354.23">wrote, and that's freaking awesome, and, because we can share so much, we can very efficiently</span> <span data-start="1354.23" data-end="1355.44">use resources.</span> <span data-start="1355.44" data-end="1359.789">And so just to take a kind of look at what this is, in a virtual machine you can see</span> <span data-start="1359.789" data-end="1364.6">that the process overhead is one-to-one with the user code, whereas with the isolate model,</span> <span data-start="1364.6" data-end="1367.49">you can see that it is definitely many to one.</span> </p>
<p><span data-start="1367.49" data-end="1371.11">This is how we are getting those benchmarks that we are talking about.</span> <span data-start="1371.11" data-end="1377.159">So, in addition to using V8, we have built a coding environment for you that uses the</span> <span data-start="1377.159" data-end="1381.159">Fetch API and the service worker API.</span> <span data-start="1381.159" data-end="1384.65">You can build it out in a UI that looks a little bit like this.</span> </p>
<p><span data-start="1384.65" data-end="1389.159">You literally just have to have something for fetch events, and then you write a function</span> <span data-start="1389.159" data-end="1390.82">that can handle requests.</span> <span data-start="1390.82" data-end="1395.19">You can do plenty of other things but this is the bare minimum worker in what is looks</span> <span data-start="1395.19" data-end="1396.779">like.</span> <span data-start="1396.779" data-end="1400.24">Because we're using V8, we get .. for free.</span> <span data-start="1400.24" data-end="1407.4">If JavaScript is not your jam, feel free to use a target for WebAssembly and we can use</span> <span data-start="1407.4" data-end="1408.98">that.</span> <span data-start="1408.98" data-end="1415.36">You might be thinking this looks like a lot like an operating system, and, man, I would</span> <span data-start="1415.36" data-end="1419.6">like to talk about how that is true but I have literally no time left.</span> <span data-start="1419.6" data-end="1423.8">I would recommend that you check this out if you want to learn about how we've tried</span> <span data-start="1423.8" data-end="1427.96">to tame the um killer, that's really fun.</span> <span data-start="1427.96" data-end="1432.179">Before I finish up, I do want to say, is this a good idea?</span> <span data-start="1432.179" data-end="1436.3">Right, like, oh, cool, you can do it, but like should you?</span> </p>
<p><span data-start="1436.3" data-end="1443.039">So a lot people will be like, yes, there is a spectre haunting this architecture.</span> <span data-start="1443.039" data-end="1444.23">Right?</span> <span data-start="1444.23" data-end="1447.799">Wrong talk, sorry!</span> <span data-start="1447.799" data-end="1448.799">This one!</span> <span data-start="1448.799" data-end="1449.799">Spectre!</span> <span data-start="1449.799" data-end="1451.86">It's a fascinating memory bug.</span> </p>
<p><span data-start="1451.86" data-end="1454.679">I don't have time to go into explaining it.</span> <span data-start="1454.679" data-end="1459.89">What I will tell you is that we've made some mitigations to attempt to avoid it.</span> <span data-start="1459.89" data-end="1464.29">Spectre is a bug that goes all the way down to the depths of the stack, and many of us</span> <span data-start="1464.29" data-end="1467.649">are just trying to cope as you pop up it.</span> <span data-start="1467.649" data-end="1472.22">This is it what we've been doing so far. primarily, we are letting you avoiding the</span> <span data-start="1472.22" data-end="1473.89">any sort of timer.</span> <span data-start="1473.89" data-end="1480.62">If you use date.now in a worker, it will tell you the same time every time.</span> <span data-start="1480.62" data-end="1484.39">We don't allow local concurrency because that's a timer in disguise.</span> <span data-start="1484.39" data-end="1490.059">But one of the things that we are also able to do is we have the freedom to reschedule.</span> <span data-start="1490.059" data-end="1493.15">We can take the look at someone who is kind of looking a little weird, a worker that is</span> <span data-start="1493.15" data-end="1499.289">behaving funny, and we can say, "Hey, let's kick you out, keep an eye on you, stick you</span> <span data-start="1499.289" data-end="1500.419">in your own little box."</span> </p>
<p><span data-start="1500.419" data-end="1505.929">Hopefully, I have encouraged you to think that is it a somewhat cool technology, and</span> <span data-start="1505.929" data-end="1510.11">that it's fast, and maybe you want to use it because you want to get fresh pizza to</span> <span data-start="1510.11" data-end="1511.72">everybody in the world.</span> <span data-start="1511.72" data-end="1516.21">But, let's talk about how you can actually use it, because, accessible isn't just about</span> <span data-start="1516.21" data-end="1520.559">receiving content, it's about building content that other people can receive.</span> <span data-start="1520.559" data-end="1526.45">I joined Cloudflare two months ago and it was like oh, shoot, we've got to make this</span> <span data-start="1526.45" data-end="1528.49">developer experience way better.</span> <span data-start="1528.49" data-end="1531.82">People do not like curl commands and API keys in them.</span> <span data-start="1531.82" data-end="1534.44">That's not cool, all right?</span> <span data-start="1534.44" data-end="1539.059">So, you may have seen me on a couch yesterday, but I've been working on this tool called</span> <span data-start="1539.059" data-end="1540.059">Wrangler.</span> <span data-start="1540.059" data-end="1544.08">It was originally released for building Rust WebAssembly workers in Cloudflare but now</span> <span data-start="1544.08" data-end="1548.179">a fully fledged CLI for loading any type of worker you like.</span> </p>
<p><span data-start="1548.179" data-end="1553.15">I found this picture of a crab with a cowboy hat on it.</span> <span data-start="1553.15" data-end="1556.9">You can npm install it, and it will just work for you.</span> <span data-start="1556.9" data-end="1559.25">It looks a little bit like this.</span> <span data-start="1559.25" data-end="1561.35">I couldn't speed this gif up.</span> <span data-start="1561.35" data-end="1562.35">Boom.</span> <span data-start="1562.35" data-end="1564.61">So, if you like emojis, there are a lot of them.</span> <span data-start="1564.61" data-end="1568.52">If your terminal doesn't support them, we have fallback.</span> <span data-start="1568.52" data-end="1572.11">We've set up a template gallery because maybe you don't note what you want to build with</span> <span data-start="1572.11" data-end="1576.179">something like this, so you can just generate one of these templates and get going with</span> <span data-start="1576.179" data-end="1577.179">it.</span> <span data-start="1577.179" data-end="1581.059">Each one will create a functional work I don't remember er for you, and so that is pretty</span> <span data-start="1581.059" data-end="1582.059">awesome.</span> </p>
<p><span data-start="1582.059" data-end="1587.529">So you can run this, command, and just publish, and it will be successfully published at this</span> <span data-start="1587.529" data-end="1589.26">fascinating URL.</span> <span data-start="1589.26" data-end="1594.52">How many people here signed up for workers.dev subdomain?</span> <span data-start="1594.52" data-end="1595.52">We've got three.</span> <span data-start="1595.52" data-end="1599.95">Here's the thing: remember that fucking DNS tweet?</span> <span data-start="1599.95" data-end="1601.529">I hate setting up DNS.</span> <span data-start="1601.529" data-end="1602.529">Maybe you too.</span> <span data-start="1602.529" data-end="1607.77">To get started playing with this kind of thing, you do not need to set up any sort of DNS.</span> <span data-start="1607.77" data-end="1613.33">We will give you a free subdomain on workers.dev you can get it by running the wranglers subdomain</span> <span data-start="1613.33" data-end="1619.39">command, snag that for you, and you can put the apps and workers you would like on it.</span> </p>
<p><span data-start="1619.39" data-end="1622.05">Finally, we've got cool new docs.</span> <span data-start="1622.05" data-end="1624.13">They are also written as a worker.</span> <span data-start="1624.13" data-end="1627.35">So, that is good.</span> <span data-start="1627.35" data-end="1630.351">And the big announcement here is you probably like why do I care about this?</span> <span data-start="1630.351" data-end="1639.669">This is a company, corporate product announcement, but today we are making it free.</span> <span data-start="1639.669" data-end="1643.73">[Cheering and applause].</span> </p>
<p><span data-start="1643.73" data-end="1649.18">I'm really excited because Cloudflare workers are actually the first free Edge serverless</span> <span data-start="1649.18" data-end="1650.18">platform.</span> <span data-start="1650.18" data-end="1655.02">You cannot put something on the Edge, be it our Edge or someone else's Edge without paying</span> <span data-start="1655.02" data-end="1656.49">money.</span> <span data-start="1656.49" data-end="1661.712">I'm excited to get people playing in this awesome spot because I think it will change</span> <span data-start="1661.712" data-end="1669.38">how we think about applications, particularly as a more distributed thing across the world,</span> <span data-start="1669.38" data-end="1671.46">and not having to think about server and client.</span> <span data-start="1671.46" data-end="1675.38">So we have a free tier, this is some stuff about it.</span> <span data-start="1675.38" data-end="1680.19">Again, go forth and build, but I have one final message for you, because I'm not done,</span> <span data-start="1680.19" data-end="1686.63">and I am almost certainly over time, but, it's an Ashley talk, so we are going to go</span> <span data-start="1686.63" data-end="1687.63">over.</span> <span data-start="1687.63" data-end="1691.37">I want us to do some thinking, like, it's cool, this Edge thing.</span> </p>
<p><span data-start="1691.37" data-end="1696.71">It's free, and I want you to go and use it and build awesome accessibility apps, but,</span> <span data-start="1696.71" data-end="1700.72">the real point of this talk is that I want people to think more radically, and, with</span> <span data-start="1700.72" data-end="1707.25">more people who don't look like us about how the internet works, and how it could work.</span> <span data-start="1707.25" data-end="1708.25">Right?</span> <span data-start="1708.25" data-end="1713.539">When we encounter trade-offs like the client and the server, I think a lot of people think</span> <span data-start="1713.539" data-end="1714.539">that's how it is.</span> <span data-start="1714.539" data-end="1715.85">That's what we've to do, right?</span> <span data-start="1715.85" data-end="1718.539">We have the client server, we can't change that.</span> <span data-start="1718.539" data-end="1722.84">What I want to encourage you to find oppositions like that and challenge them because those</span> <span data-start="1722.84" data-end="1729.88">oppositions are opportunities for making strides in accessibility for the web, like what we</span> <span data-start="1729.88" data-end="1731.48">are doing today.</span> <span data-start="1731.48" data-end="1735.45">And so, again, we've talked about journeys, we've talked about performance, we've talked</span> <span data-start="1735.45" data-end="1741.201">about accessibility, the web is the primary place that new developers go to learn, so</span> <span data-start="1741.201" data-end="1743.64">let's make sure we can get there fast.</span> <span data-start="1743.64" data-end="1748.23">The future with the .just community which is representative of the whole world literally</span> <span data-start="1748.23" data-end="1750.13">cannot come soon enough.</span> </p>
<p><span data-start="1750.13" data-end="1751.13">Thanks!</span> </p>
</section>