<section>
<p><span data-start="10.19" data-end="13.89">I'm Kyle Simpson and I go by getify you</span> <span data-start="13.89" data-end="16.5">probably know me better by that way so</span> <span data-start="16.5" data-end="17.46">this title</span> <span data-start="17.46" data-end="21.029">JSU I not only was it because I like the</span> <span data-start="21.029" data-end="22.8">matrix but also this has kind of a</span> <span data-start="22.8" data-end="24.84">hidden meeting what we're going to talk</span> <span data-start="24.84" data-end="26.43">about today this JavaScript UI</span> <span data-start="26.43" data-end="29.399">architecture stuff it is it exists in</span> <span data-start="29.399" data-end="31.619">every single web application but it's</span> <span data-start="31.619" data-end="33.239">kind of hidden most people don't think</span> <span data-start="33.239" data-end="34.62">about it we don't give it a name we</span> <span data-start="34.62" data-end="37.53">don't talk about it but it is oftentimes</span> <span data-start="37.53" data-end="40.2">the biggest pain point in in application</span> <span data-start="40.2" data-end="43.98">so that's kind of the backstory</span> <span data-start="43.98" data-end="45.24">come on now you were just working a</span> <span data-start="45.24" data-end="49.83">second ago still working all right well</span> </p>
<p><span data-start="49.83" data-end="50.91">I guess I'm not gonna be able to use it</span> <span data-start="50.91" data-end="54.84">all right so dude where's my you re</span> <span data-start="54.84" data-end="56.61">architecture that's the title of today's</span> <span data-start="56.61" data-end="59.13">talk so what the heck is UI architecture</span> <span data-start="59.13" data-end="61.38">I mean all the stuff that it takes to</span> <span data-start="61.38" data-end="64.019">process package deliver get together</span> <span data-start="64.019" data-end="66.119">your presentation layer and get it up to</span> <span data-start="66.119" data-end="69.509">the browser from the server this</span> <span data-start="69.509" data-end="72.479">involves things like templating URL</span> <span data-start="72.479" data-end="75.569">routing data validation data formatting</span> <span data-start="75.569" data-end="79.109">Ajax even stuff like caching I didn't</span> <span data-start="79.109" data-end="80.88">put that on the slide all those things</span> <span data-start="80.88" data-end="85.38">are part of what I call the middle end</span> <span data-start="85.38" data-end="87.659">so this is in between the front end and</span> <span data-start="87.659" data-end="92.42">the back end so let's take a look at</span> <span data-start="92.42" data-end="95.609">existing web application architecture</span> <span data-start="95.609" data-end="96.929">diagram I just kind of whip this</span> <span data-start="96.929" data-end="98.999">together this is by no means definitive</span> <span data-start="98.999" data-end="100.679">but this is kind of representative of</span> <span data-start="100.679" data-end="101.999">how a lot of web application</span> <span data-start="101.999" data-end="104.069">architectures work so some things to</span> <span data-start="104.069" data-end="107.1">point out here real quick we've got the</span> <span data-start="107.1" data-end="108.99">client browser over here with the</span> <span data-start="108.99" data-end="111.09">javascript in the application and it's</span> <span data-start="111.09" data-end="113.579">very very separate and very very siloed</span> <span data-start="113.579" data-end="115.2">from the rest of what's going on in the</span> <span data-start="115.2" data-end="118.049">web application the typical pattern here</span> <span data-start="118.049" data-end="121.109">is that this JSF Legation re implements</span> <span data-start="121.109" data-end="123.63">to some degree and sometimes to a great</span> <span data-start="123.63" data-end="125.639">degree the stuff that's going on down</span> <span data-start="125.639" data-end="128.64">here so we've got two different views of</span> <span data-start="128.64" data-end="130.229">what our application are it's what's</span> <span data-start="130.229" data-end="131.4">happening in the browser and what's</span> <span data-start="131.4" data-end="133.56">happening on the server this is kind of</span> <span data-start="133.56" data-end="136.59">a way to visualize the typical MVC stack</span> <span data-start="136.59" data-end="138.78">we've got a web server layer sitting on</span> <span data-start="138.78" data-end="139.26">top</span> <span data-start="139.26" data-end="142.56">as I is this is Apache Ingenix even if</span> <span data-start="142.56" data-end="145.11">you're really clever this is no js' and</span> <span data-start="145.11" data-end="146.7">then we've got some control or an</span> <span data-start="146.7" data-end="148.409">application logic stuff if you're using</span> <span data-start="148.409" data-end="150.629">net Java whatever platform you can</span> <span data-start="150.629" data-end="152.7">insert this is entirely agnostic of</span> <span data-start="152.7" data-end="154.799">which technology you're choosing</span> <span data-start="154.799" data-end="156.51">but this layer is the one that sits</span> <span data-start="156.51" data-end="158.7">there it intercepts the request from the</span> <span data-start="158.7" data-end="160.17">web server and it controls everything</span> <span data-start="160.17" data-end="162.42">that's going to happen then down here at</span> <span data-start="162.42" data-end="163.709">the bottom we have the view the</span> <span data-start="163.709" data-end="165.42">templating engine the things that put</span> <span data-start="165.42" data-end="166.709">together what we're going to see the</span> <span data-start="166.709" data-end="168.629">presentation layer and sitting in</span> <span data-start="168.629" data-end="170.129">between them the model and it</span> <span data-start="170.129" data-end="174.48">communicates with our database so what</span> <span data-start="174.48" data-end="176.25">is my motivation for mucking with this</span> <span data-start="176.25" data-end="178.29">because this pattern has been around for</span> <span data-start="178.29" data-end="178.889">a long time</span> <span data-start="178.889" data-end="181.319">number one performance I'm a huge</span> <span data-start="181.319" data-end="183.06">performance geek a lot of my projects</span> <span data-start="183.06" data-end="185.609">are about that lab j/s and other things</span> <span data-start="185.609" data-end="188.28">like that so my biggest concern is that</span> </p>
<p><span data-start="188.28" data-end="190.109">I go to companies companies that I work</span> <span data-start="190.109" data-end="191.549">out or companies that have asked me to</span> <span data-start="191.549" data-end="193.62">consult on these topics and I try to</span> <span data-start="193.62" data-end="196.2">convince them that what they need to do</span> <span data-start="196.2" data-end="199.319">is just do something crazy like optimize</span> <span data-start="199.319" data-end="201.599">the mark-up that their application sends</span> <span data-start="201.599" data-end="203.19">out to the browser not too complicated</span> <span data-start="203.19" data-end="205.859">right and what's the universal response</span> <span data-start="205.859" data-end="209.16">I get back oh I can't change that markup</span> <span data-start="209.16" data-end="211.41">there's some compiled widget way down</span> <span data-start="211.41" data-end="213.449">deep inside of my architecture that does</span> <span data-start="213.449" data-end="215.579">that for me and I would never dream of</span> <span data-start="215.579" data-end="217.769">changing the way that grid control works</span> <span data-start="217.769" data-end="220.23">it surely is in control of that markup</span> <span data-start="220.23" data-end="221.579">this sucks</span> <span data-start="221.579" data-end="223.98">this really really sucks even simple</span> <span data-start="223.98" data-end="225.569">things like hey can you put a different</span> <span data-start="225.569" data-end="227.37">doctype on your page so that you can</span> <span data-start="227.37" data-end="229.709">have some standards to your web</span> <span data-start="229.709" data-end="231.84">application no I can't control that</span> <span data-start="231.84" data-end="234.359">stuff so performance sucks when you have</span> <span data-start="234.359" data-end="235.949">no control over what's happening</span> <span data-start="235.949" data-end="238.049">we need more control so that's the first</span> <span data-start="238.049" data-end="241.079">motivation the second one MVC now I'm</span> <span data-start="241.079" data-end="242.699">gonna pick on MVC a little bit but as</span> <span data-start="242.699" data-end="243.93">you'll see at the end I'm not really</span> <span data-start="243.93" data-end="245.699">telling you that MVC is wrong I'm just</span> <span data-start="245.699" data-end="247.23">trying to kind of evolve some of these</span> <span data-start="247.23" data-end="249.329">concepts a little bit so this is an</span> <span data-start="249.329" data-end="251.25">example I'm going to pick on PHP but</span> <span data-start="251.25" data-end="252.93">this kind of code happens in every</span> <span data-start="252.93" data-end="256.409">platform so some things to look at here</span> <span data-start="256.409" data-end="258.269">we're obviously we're inside of a view</span> <span data-start="258.269" data-end="260.909">we're in an HTML page or a PHP page in</span> <span data-start="260.909" data-end="263.55">this case we're in a view and what we've</span> <span data-start="263.55" data-end="265.62">got is we want to conditionally show</span> <span data-start="265.62" data-end="267.84">some link to some page we only want to</span> <span data-start="267.84" data-end="270.69">show that when some condition is true of</span> <span data-start="270.69" data-end="273.15">our back-end logic in this case we got</span> <span data-start="273.15" data-end="274.11">really clever we've got an</span> <span data-start="274.11" data-end="275.82">object-oriented model we've got a user</span> <span data-start="275.82" data-end="278.64">and that model has a function on it</span> <span data-start="278.64" data-end="280.56">called is logged in that's kind of</span> <span data-start="280.56" data-end="282.45">opaque we're not exactly sure what is</span> <span data-start="282.45" data-end="283.83">logged in means but it's probably</span> <span data-start="283.83" data-end="286.08">checking for a login session maybe some</span> <span data-start="286.08" data-end="288.21">credentials and then over here we've got</span> <span data-start="288.21" data-end="290.64">the permissions based side of things</span> <span data-start="290.64" data-end="292.17">that not only are they logged in but</span> <span data-start="292.17" data-end="294.27">there's a particular permission or set</span> <span data-start="294.27" data-end="295.53">of permissions that we have a</span> <span data-start="295.53" data-end="298.02">arbitrarily decided means that they can</span> <span data-start="298.02" data-end="300.06">publish and if both of those conditions</span> <span data-start="300.06" data-end="301.98">are true then we want to show this link</span> <span data-start="301.98" data-end="304.77">now this is perfectly valid logic the</span> <span data-start="304.77" data-end="307.35">problem is this is terrible to put in</span> <span data-start="307.35" data-end="309.51">your templates because as soon as you</span> <span data-start="309.51" data-end="311.49">write this code three weeks later</span> <span data-start="311.49" data-end="313.35">somebody's in your biz dev side of your</span> <span data-start="313.35" data-end="314.73">company is going to come along and tell</span> <span data-start="314.73" data-end="317.4">you well actually can publish is not</span> <span data-start="317.4" data-end="319.11">really the whole world we need one more</span> <span data-start="319.11" data-end="321.33">condition on top of can publish we need</span> <span data-start="321.33" data-end="323.61">this or we need that or or you're gonna</span> <span data-start="323.61" data-end="324.81">have back in developers that are going</span> <span data-start="324.81" data-end="326.37">to go through and refactor your model</span> <span data-start="326.37" data-end="327.84">and these function names are gonna</span> <span data-start="327.84" data-end="329.88">change or the meaning of what they do is</span> <span data-start="329.88" data-end="331.2">going to get overloaded and all of a</span> <span data-start="331.2" data-end="333.21">sudden your templates and your back-end</span> <span data-start="333.21" data-end="336.21">application architecture are terribly</span> <span data-start="336.21" data-end="339.15">intertwined this is exactly what MVC</span> <span data-start="339.15" data-end="341.69">tells us to get away from to have loose</span> <span data-start="341.69" data-end="344.4">you know mixture between our views and</span> <span data-start="344.4" data-end="345.9">our in our models and things like that</span> <span data-start="345.9" data-end="348.6">but unfortunately this just happens all</span> <span data-start="348.6" data-end="352.32">the time so my third motivation is dry</span> <span data-start="352.32" data-end="355.59">do not repeat yourself I am such a lazy</span> <span data-start="355.59" data-end="357.3">developer and I'm just gonna go right</span> <span data-start="357.3" data-end="358.86">out there and say it I do not like to</span> <span data-start="358.86" data-end="361.32">write code more than once I really I</span> <span data-start="361.32" data-end="363.81">want that utopia where I can write code</span> <span data-start="363.81" data-end="365.25">once and it's gonna freak and run</span> <span data-start="365.25" data-end="367.32">anywhere I want it to run and I don't</span> <span data-start="367.32" data-end="368.37">have to worry about it</span> <span data-start="368.37" data-end="372.6">and the last thing is we all wear a lot</span> <span data-start="372.6" data-end="373.44">of different hats</span> <span data-start="373.44" data-end="375.63">some people are get to get the privilege</span> <span data-start="375.63" data-end="377.91">of specializing in the front end or</span> <span data-start="377.91" data-end="380.1">specializing in the back end many times</span> <span data-start="380.1" data-end="381.96">people are having to wear multiple hats</span> <span data-start="381.96" data-end="383.58">they're having to do some front end back</span> <span data-start="383.58" data-end="385.83">some front end development some back in</span> <span data-start="385.83" data-end="388.11">development and the problem is that when</span> <span data-start="388.11" data-end="390.72">you are doing back in development you're</span> <span data-start="390.72" data-end="392.31">thinking like a back-end developer</span> <span data-start="392.31" data-end="394.62">that's a good thing but it's a terrible</span> <span data-start="394.62" data-end="396.81">thing for the front-end because system</span> <span data-start="396.81" data-end="399.03">architecture is entirely different so</span> <span data-start="399.03" data-end="401.58">very much orthogonal and opposite in</span> <span data-start="401.58" data-end="403.5">ways to front-end development and the</span> <span data-start="403.5" data-end="404.82">concerns of the front end and the</span> <span data-start="404.82" data-end="407.31">reverse is also true so when you have to</span> <span data-start="407.31" data-end="408.75">these hats you have to keep context</span> <span data-start="408.75" data-end="410.49">switching and thinking of entirely</span> <span data-start="410.49" data-end="411.93">different worlds and this is what leads</span> <span data-start="411.93" data-end="414.57">to the crap of I've got a widget that</span> <span data-start="414.57" data-end="416.37">you know builds out my markup and</span> <span data-start="416.37" data-end="418.38">because I'm a back-end developer I don't</span> <span data-start="418.38" data-end="419.91">want to worry about the box model and</span> </p>
<p><span data-start="419.91" data-end="422.16">CSS and markup standards and all of that</span> <span data-start="422.16" data-end="424.38">crap so I'm going to bury that deep down</span> <span data-start="424.38" data-end="426.15">inside of my java code so I never have</span> <span data-start="426.15" data-end="427.95">to worry about it again but then I have</span> <span data-start="427.95" data-end="430.29">lost complete control so my motivation</span> <span data-start="430.29" data-end="432.3">here is that we need to allow when you</span> <span data-start="432.3" data-end="433.65">are a front-end developer when you're</span> <span data-start="433.65" data-end="435.66">wearing that hat you need to be able to</span> <span data-start="435.66" data-end="437.64">stay inside of that core skillset and</span> <span data-start="437.64" data-end="440.31">get your job done fast and get it done</span> <span data-start="440.31" data-end="442.41">efficiently and get it done right when</span> <span data-start="442.41" data-end="443.85">you're back and developer the same is</span> <span data-start="443.85" data-end="447.63">true so we need a different view on this</span> <span data-start="447.63" data-end="449.52">and I am proposing what I call a new</span> <span data-start="449.52" data-end="452.49">pattern it's not exactly a replacement</span> <span data-start="452.49" data-end="453.75">of MVC but we're going to talk about</span> <span data-start="453.75" data-end="456.93">some differences I call it c b c stands</span> <span data-start="456.93" data-end="459.48">for client's views controllers or client</span> <span data-start="459.48" data-end="463.71">view controller so this is a slightly</span> <span data-start="463.71" data-end="466.56">different view of the world we're going</span> <span data-start="466.56" data-end="468.9">to talk about cbc UI architecture here</span> <span data-start="468.9" data-end="470.94">for a moment so this is a UI focused</span> <span data-start="470.94" data-end="473.55">architecture and it separates out the</span> <span data-start="473.55" data-end="476.25">tears it creates an explicit middle-end</span> </p>
<p><span data-start="476.25" data-end="479.01">UI architecture layer that you may or</span> <span data-start="479.01" data-end="481.14">may not be very familiar with seeing so</span> <span data-start="481.14" data-end="482.19">the first thing that i want you to</span> <span data-start="482.19" data-end="484.23">recognize here is that down here at the</span> <span data-start="484.23" data-end="486.06">bottom everything that was in that prior</span> <span data-start="486.06" data-end="488.01">diagram that was all over here and all</span> <span data-start="488.01" data-end="491.22">intermixed becomes this black box this</span> <span data-start="491.22" data-end="493.11">is our application and now our</span> <span data-start="493.11" data-end="495.54">application doesn't know anything at all</span> <span data-start="495.54" data-end="496.83">about how things are going to be</span> <span data-start="496.83" data-end="499.92">presented it is 100% an API based</span> <span data-start="499.92" data-end="502.41">application all it is is a state machine</span> <span data-start="502.41" data-end="505.41">all it is is concerned with dealing with</span> <span data-start="505.41" data-end="507.99">state with managing your login sessions</span> <span data-start="507.99" data-end="509.52">with connecting to the database and</span> <span data-start="509.52" data-end="511.26">doing whatever magic that system</span> <span data-start="511.26" data-end="515.51">backends do we stick a simple JSON</span> <span data-start="515.51" data-end="517.98">serializing API on top of that and the</span> <span data-start="517.98" data-end="519.12">whole rest of the world becomes</span> <span data-start="519.12" data-end="521.94">beautiful for the UI engineer JSON is an</span> <span data-start="521.94" data-end="524.64">awesome representation of data it's the</span> <span data-start="524.64" data-end="527.04">only representation of data that's truly</span> <span data-start="527.04" data-end="528.93">native recognizable in all of our other</span> <span data-start="528.93" data-end="532.44">tiers and every application is able to</span> <span data-start="532.44" data-end="535.23">serialize down to JSON then what we have</span> <span data-start="535.23" data-end="536.7">over here the most important thing is</span> <span data-start="536.7" data-end="538.95">that what now is in control of what's</span> <span data-start="538.95" data-end="539.699">going on on</span> <span data-start="539.699" data-end="541.769">server is that what I call the UI</span> <span data-start="541.769" data-end="544.169">controllers and I am implementing these</span> <span data-start="544.169" data-end="545.79">in JavaScript this is why I'm talking</span> <span data-start="545.79" data-end="547.439">about it at a JavaScript conference so</span> <span data-start="547.439" data-end="548.85">what I'm going to do is I'm going to</span> <span data-start="548.85" data-end="550.739">write everything that the middle end is</span> <span data-start="550.739" data-end="553.859">in JavaScript all of this and then the</span> <span data-start="553.859" data-end="555.6">cool part is this thing over here this</span> <span data-start="555.6" data-end="557.699">templating engine and even some of these</span> <span data-start="557.699" data-end="560.16">things they can work over here in the</span> <span data-start="560.16" data-end="562.169">browser the exact same code I don't have</span> <span data-start="562.169" data-end="564.359">to write different code things like data</span> <span data-start="564.359" data-end="566.639">validation I can write that once and run</span> <span data-start="566.639" data-end="569.549">it in both places instead of having to</span> <span data-start="569.549" data-end="571.41">have you know some something that auto</span> <span data-start="571.41" data-end="573.449">generates JavaScript for me so I just</span> <span data-start="573.449" data-end="578.879">want to switch back to this one for just</span> <span data-start="578.879" data-end="581.939">a moment and then back so that you see</span> <span data-start="581.939" data-end="585.169">the differences we're making a UI</span> <span data-start="585.169" data-end="587.939">focused architecture here I'm not</span> <span data-start="587.939" data-end="589.319">telling you what you need to do with</span> <span data-start="589.319" data-end="591.239">this black box other than stop having</span> <span data-start="591.239" data-end="593.209">this thing do crappy presentation</span> <span data-start="593.209" data-end="596.639">whatever platform you're working on I</span> <span data-start="596.639" data-end="598.139">really don't care it could be Perl I</span> <span data-start="598.139" data-end="599.699">feel bad for you but it could be</span> <span data-start="599.699" data-end="601.319">whatever you want it to be all I'm</span> <span data-start="601.319" data-end="602.85">telling you is that your presentation</span> <span data-start="602.85" data-end="604.649">layer and your middle end probably sucks</span> <span data-start="604.649" data-end="605.879">right now and maybe you should rethink</span> <span data-start="605.879" data-end="609.209">it so let's talk about what CVC means</span> <span data-start="609.209" data-end="610.949">clients everything is a client of</span> <span data-start="610.949" data-end="612.019">everything else</span> <span data-start="612.019" data-end="614.399">they're decoupled they're modular and</span> <span data-start="614.399" data-end="616.589">they're scalable that means at any point</span> <span data-start="616.589" data-end="618.749">in the flow everything is able to talk</span> <span data-start="618.749" data-end="622.529">to everything else and it uses JSON the</span> <span data-start="622.529" data-end="624.839">views their templating they're portable</span> <span data-start="624.839" data-end="626.669">they're dry they're platform agnostic</span> <span data-start="626.669" data-end="629.22">and they use the core web technology</span> <span data-start="629.22" data-end="631.139">that UI engineers are most familiar with</span> <span data-start="631.139" data-end="634.829">the JavaScript HTML and CSS the</span> <span data-start="634.829" data-end="637.109">controllers are all these little tiny</span> <span data-start="637.109" data-end="638.85">things that make all this stuff work</span> <span data-start="638.85" data-end="641.129">this is the thing that takes a request</span> <span data-start="641.129" data-end="643.169">and translates it into an execution of</span> <span data-start="643.169" data-end="645.66">the View engine and grabs the JSON data</span> <span data-start="645.66" data-end="647.489">from the application and pumps it in and</span> <span data-start="647.489" data-end="649.529">packages all the stuff up it caches</span> <span data-start="649.529" data-end="651.509">things those are what the UI controllers</span> <span data-start="651.509" data-end="653.369">are doing they're small independent and</span> <span data-start="653.369" data-end="655.939">powerful they're also in JavaScript so</span> <span data-start="655.939" data-end="658.709">what I'm not suggesting is that we need</span> <span data-start="658.709" data-end="661.47">another framework so this is actually</span> <span data-start="661.47" data-end="665.16">the anti framework presentation none of</span> <span data-start="665.16" data-end="666.48">what I am doing is going to</span> <span data-start="666.48" data-end="669.269">automatically build you some UI we just</span> <span data-start="669.269" data-end="671.159">heard a talk on the ext j/s and they do</span> <span data-start="671.159" data-end="673.019">a phenomenal job of packaging all that</span> <span data-start="673.019" data-end="673.5">stuff</span> <span data-start="673.5" data-end="674.67">and making it so that you don't really</span> <span data-start="674.67" data-end="676.53">have to think about it much I actually</span> <span data-start="676.53" data-end="678.24">want to do the reverse I want you to</span> <span data-start="678.24" data-end="680.13">have to think about it so you can build</span> <span data-start="680.13" data-end="683.31">on top of this pattern whatever kind of</span> <span data-start="683.31" data-end="685.05">presentation layer is cool with you you</span> <span data-start="685.05" data-end="687.69">can use jQuery ext dojo whatever you</span> <span data-start="687.69" data-end="690.6">want to do but make sure that you use a</span> <span data-start="690.6" data-end="692.22">templating system that can run in both</span> <span data-start="692.22" data-end="695.19">places I'm not telling you to ditch your</span> <span data-start="695.19" data-end="696.96">whole architecture as I said you can go</span> <span data-start="696.96" data-end="699.72">and you can go back to your company</span> <span data-start="699.72" data-end="701.19">you know Monday morning and you can tell</span> <span data-start="701.19" data-end="703.02">them hey I just want to change the views</span> </p>
<p><span data-start="703.02" data-end="704.31">I don't have to change the entire</span> <span data-start="704.31" data-end="706.35">platform architecture and I'm also not</span> <span data-start="706.35" data-end="709.35">saying that MBC is inherently wrong or</span> <span data-start="709.35" data-end="711.33">that it's weak or something like that</span> <span data-start="711.33" data-end="713.25">I'm just simply saying that in our world</span> <span data-start="713.25" data-end="716.43">of web 2.0 and with the role separations</span> <span data-start="716.43" data-end="718.65">and specialties that we all are falling</span> <span data-start="718.65" data-end="720.66">into and our jobs it's time that we</span> <span data-start="720.66" data-end="722.13">rethink this a little bit and I'm</span> <span data-start="722.13" data-end="726.37">suggesting an extension to that pattern</span> <span data-start="726.38" data-end="729">CBC is an alternate pattern for thinking</span> <span data-start="729" data-end="731.7">about UI architecture and it is okay to</span> <span data-start="731.7" data-end="735.03">rethink you do not have to accept the</span> <span data-start="735.03" data-end="736.8">status quo because you've always been a</span> <span data-start="736.8" data-end="738.36">dotnet shop and you've never been given</span> <span data-start="738.36" data-end="739.89">the option of doing anything other than</span> <span data-start="739.89" data-end="742.17">that it's okay to go back and rethink</span> <span data-start="742.17" data-end="744.63">things so how are we going to do this</span> <span data-start="744.63" data-end="746.37">well we're gonna use Java Script which</span> <span data-start="746.37" data-end="749.16">is awesome and it's going to be on the</span> <span data-start="749.16" data-end="750.51">server primarily there's going to be</span> <span data-start="750.51" data-end="752.24">some in the in the browser as well</span> <span data-start="752.24" data-end="754.56">sometimes JavaScript on the server can</span> <span data-start="754.56" data-end="756.18">feel a little bit out of the wall out of</span> <span data-start="756.18" data-end="758.34">a fish out of water kind of a thing in</span> <span data-start="758.34" data-end="760.65">today's day and age we're really pushing</span> <span data-start="760.65" data-end="762.21">things and you're seeing some awesome</span> <span data-start="762.21" data-end="764.37">stuff from nodejs and narwhal and rhino</span> <span data-start="764.37" data-end="767.22">and all these awesome things and we're</span> <span data-start="767.22" data-end="768.96">trying to get them to kind of all work</span> <span data-start="768.96" data-end="771.06">together commonjs is doing a great job</span> <span data-start="771.06" data-end="774.21">of giving us some standards for how all</span> <span data-start="774.21" data-end="776.94">of these things work the problem is that</span> <span data-start="776.94" data-end="778.86">we haven't progressed very far yet so</span> <span data-start="778.86" data-end="781.2">you've got something awesome like nodejs</span> <span data-start="781.2" data-end="783.33">and they've gone and done like 18 or 20</span> <span data-start="783.33" data-end="785.13">different api's for all these awesome</span> <span data-start="785.13" data-end="787.26">things and only two or three of them are</span> <span data-start="787.26" data-end="788.7">things that everybody's kind of agreed</span> <span data-start="788.7" data-end="791.55">on in the common Jas world so that's why</span> <span data-start="791.55" data-end="793.14">you're seeing so much API that's</span> <span data-start="793.14" data-end="795.18">changing with node and it's and it's</span> <span data-start="795.18" data-end="797.13">also a problem narwhals a little bit</span> <span data-start="797.13" data-end="798.78">more mature but it's also a problem</span> <span data-start="798.78" data-end="800.97">there so and the world of server-side</span> <span data-start="800.97" data-end="802.68">javascript is still kind of a wild wild</span> <span data-start="802.68" data-end="805.47">west and we've got some issues to work</span> <span data-start="805.47" data-end="807.779">through there but I believe hole</span> <span data-start="807.779" data-end="810.06">hardly in JavaScript on the server and I</span> <span data-start="810.06" data-end="811.709">think it's the answer to a lot of our</span> <span data-start="811.709" data-end="814.139">problems so I'm prepared to be on that</span> <span data-start="814.139" data-end="815.37">forefront and we're gonna we're gonna</span> <span data-start="815.37" data-end="816.99">stub our toe a few times it's going to</span> <span data-start="816.99" data-end="818.879">suck but we're gonna eventually come to</span> <span data-start="818.879" data-end="822.18">something that is freakin amazing so I'm</span> <span data-start="822.18" data-end="824.04">gonna propose I've written some code</span> <span data-start="824.04" data-end="826.98">that I call bike Ching Jas this is a</span> <span data-start="826.98" data-end="828.93">much more simplified view of what</span> <span data-start="828.93" data-end="830.939">server-side JavaScript would be it is</span> <span data-start="830.939" data-end="832.769">not at all intended to replace or</span> <span data-start="832.769" data-end="834.089">compete with nodejs</span> <span data-start="834.089" data-end="836.009">but I needed something simple and a</span> <span data-start="836.009" data-end="838.079">little bit more kind of tangible to work</span> <span data-start="838.079" data-end="839.55">with when I'm demoing and kind of</span> <span data-start="839.55" data-end="841.889">developing some of these ideas so this</span> <span data-start="841.889" data-end="844.769">just wraps around v8 it's a single</span> <span data-start="844.769" data-end="847.199">engine file it's a single compilable it</span> <span data-start="847.199" data-end="849.379">creates a very simple straightforward</span> <span data-start="849.379" data-end="851.699">server-side javascript environment and</span> <span data-start="851.699" data-end="854.189">it uses the module approach that the</span> <span data-start="854.189" data-end="856.649">others are familiar with using I talked</span> <span data-start="856.649" data-end="858.99">extensively with Chris Cole and some of</span> <span data-start="858.99" data-end="860.519">the others from the common Jas world I</span> <span data-start="860.519" data-end="862.079">wanted to make sure that what I</span> <span data-start="862.079" data-end="864.809">implemented was as close as possible to</span> <span data-start="864.809" data-end="867.149">what the common Jas world is wanting to</span> <span data-start="867.149" data-end="869.22">agree on and because all I needed were</span> <span data-start="869.22" data-end="872.009">things like file i/o system i/o and a</span> <span data-start="872.009" data-end="874.379">few process execution things those are</span> <span data-start="874.379" data-end="875.459">the things that everybody's kind of</span> <span data-start="875.459" data-end="877.5">agreed on so that's the good news the</span> <span data-start="877.5" data-end="878.579">bad news is you're not going to be able</span> <span data-start="878.579" data-end="880.62">to use bike change has to do commet</span> <span data-start="880.62" data-end="882.029">servers and all kinds of freaking</span> <span data-start="882.029" data-end="884.009">amazing stuff but I actually don't think</span> <span data-start="884.009" data-end="886.5">that that's necessary for most of the</span> <span data-start="886.5" data-end="887.009">web's</span> </p>
<p><span data-start="887.009" data-end="889.949">UI architecture so bike chain Jas is</span> <span data-start="889.949" data-end="892.1">really just kind of a temporary stopgap</span> <span data-start="892.1" data-end="894.149">hopefully it'll evolve kind of in</span> <span data-start="894.149" data-end="895.589">parallel with some of the others and</span> <span data-start="895.589" data-end="898.29">it's a good synchronous simple</span> <span data-start="898.29" data-end="900.449">environment to get started and then you</span> <span data-start="900.449" data-end="902.16">can graduate to running this code and</span> <span data-start="902.16" data-end="903.779">something more sophisticated like node</span> <span data-start="903.779" data-end="907.68">or normal CVC plus javascript is the</span> <span data-start="907.68" data-end="910.559">power of the UI architecture put in the</span> <span data-start="910.559" data-end="911.879">hands of the people that need it most</span> <span data-start="911.879" data-end="914.25">the front-end engineers instead of</span> <span data-start="914.25" data-end="915.899">relying on your system architect who has</span> <span data-start="915.899" data-end="917.879">no clue what it actually means to</span> <span data-start="917.879" data-end="920.61">optimize markup and CSS and Ajax</span> <span data-start="920.61" data-end="922.709">communication you put it in the hands of</span> <span data-start="922.709" data-end="924.209">those who work with that every single</span> <span data-start="924.209" data-end="926.579">day and you give them the control to</span> <span data-start="926.579" data-end="928.069">make things better</span> <span data-start="928.069" data-end="930.929">my templating engine I call handlebar J</span> <span data-start="930.929" data-end="933.769">s this is actually patterned</span> <span data-start="933.769" data-end="936.709">significantly inspired by mustache J s</span> <span data-start="936.709" data-end="939.059">so I'm going to give full credit to them</span> <span data-start="939.059" data-end="941.89">they really were some pioneers in this</span> <span data-start="941.89" data-end="945.91">this is a primarily HTML text-based</span> <span data-start="945.91" data-end="948.25">templating approach uses a very simple</span> <span data-start="948.25" data-end="950.8">wrapper around that a very simple small</span> </p>
<p><span data-start="950.8" data-end="954.7">DSL for templating my basic idea was I</span> <span data-start="954.7" data-end="956.74">need the bare minimum that it takes to</span> <span data-start="956.74" data-end="958.329">get templating done I don't need to</span> <span data-start="958.329" data-end="961.12">bring a huge machine gun to a knife</span> <span data-start="961.12" data-end="963.19">fight so I'm not going to give the full</span> <span data-start="963.19" data-end="964.899">power of JavaScript to the templating</span> <span data-start="964.899" data-end="966.13">engine that's going to what's going to</span> <span data-start="966.13" data-end="968.11">let lead to that spaghetti code we dealt</span> <span data-start="968.11" data-end="970.75">with before so handlebar J s is very</span> <span data-start="970.75" data-end="974.23">stripped-down and simple and it uses</span> <span data-start="974.23" data-end="976.42">only JSON data for the input so we're</span> <span data-start="976.42" data-end="978.54">not dealing with inexorable</span> <span data-start="978.54" data-end="980.74">communication between our model and the</span> <span data-start="980.74" data-end="982.12">way our model works in the way the</span> <span data-start="982.12" data-end="983.709">front-end works if you've ever dealt</span> <span data-start="983.709" data-end="985.269">with this I deal with this all the time</span> <span data-start="985.269" data-end="987.399">you know for whatever reason the backend</span> <span data-start="987.399" data-end="989.079">architecture they want to do things as a</span> <span data-start="989.079" data-end="991.149">keyed hash and when I get it in the</span> <span data-start="991.149" data-end="992.769">front end and I want to iterate over it</span> <span data-start="992.769" data-end="994.75">it needs to be an array because I need</span> <span data-start="994.75" data-end="995.769">it to be ordered for whatever</span> <span data-start="995.769" data-end="998.649">presentational reason this sucks that we</span> <span data-start="998.649" data-end="1000.36">have to have those two be the same thing</span> <span data-start="1000.36" data-end="1001.86">and the problem is that we're trying to</span> <span data-start="1001.86" data-end="1003.6">replicate the model that the backend</span> <span data-start="1003.6" data-end="1005.64">guys use in the front-end and that's not</span> <span data-start="1005.64" data-end="1007.62">how things work in the front-end so if</span> <span data-start="1007.62" data-end="1009.69">we serialize things down to JSON it</span> <span data-start="1009.69" data-end="1011.19">makes things a lot simpler we can agree</span> <span data-start="1011.19" data-end="1014.04">upon that serialization and then it's</span> <span data-start="1014.04" data-end="1015.63">kind of like creating an interface for</span> <span data-start="1015.63" data-end="1017.699">your data that interface doesn't have to</span> <span data-start="1017.699" data-end="1019.05">change no matter what the backend guys</span> <span data-start="1019.05" data-end="1021.42">do and if you need a little bit of a</span> <span data-start="1021.42" data-end="1023.01">tweak to that in your front-end you're</span> <span data-start="1023.01" data-end="1024.27">in control of tweaking that</span> <span data-start="1024.27" data-end="1027.72">serialization so the details this is</span> <span data-start="1027.72" data-end="1030.9">100% JavaScript runs both in browser the</span> <span data-start="1030.9" data-end="1033.48">server it only accepts JSON data not</span> <span data-start="1033.48" data-end="1037.319">models and behavior the application</span> <span data-start="1037.319" data-end="1039.63">state this is an arbitrary string value</span> <span data-start="1039.63" data-end="1041.309">that represents the state of your</span> <span data-start="1041.309" data-end="1043.319">application that's the state that that</span> <span data-start="1043.319" data-end="1045.51">black box is currently in that's going</span> <span data-start="1045.51" data-end="1047.25">to what's going to select which template</span> <span data-start="1047.25" data-end="1050.97">to use and finally for performance</span> <span data-start="1050.97" data-end="1052.62">reasons one step that I've already built</span> <span data-start="1052.62" data-end="1054.39">into handlebar j/s even though it's kind</span> <span data-start="1054.39" data-end="1056.28">of young and immature one step that I've</span> <span data-start="1056.28" data-end="1059.549">built into it is that it compiles your</span> <span data-start="1059.549" data-end="1061.23">text template so and it does all of this</span> <span data-start="1061.23" data-end="1063.51">you know complicated and expensive</span> <span data-start="1063.51" data-end="1066.36">regular expression parsing on text a lot</span> <span data-start="1066.36" data-end="1067.44">of these template engines are</span> <span data-start="1067.44" data-end="1069.66">just-in-time compilers and they do that</span> <span data-start="1069.66" data-end="1070.98">over and over and over again and</span> <span data-start="1070.98" data-end="1072.66">handlebar jeaious can run in</span> <span data-start="1072.66" data-end="1074.59">just-in-time but it also will</span> <span data-start="1074.59" data-end="1076.48">cache the results of that into</span> <span data-start="1076.48" data-end="1078.159">executable JavaScript so you can run</span> <span data-start="1078.159" data-end="1080.26">that as a build process so you can still</span> <span data-start="1080.26" data-end="1082.6">maintain your templates in HTML all the</span> <span data-start="1082.6" data-end="1084.22">way it ought to be but you get the</span> <span data-start="1084.22" data-end="1085.779">performance benefit of being able to run</span> <span data-start="1085.779" data-end="1088.87">optimized JavaScript so let's take a</span> <span data-start="1088.87" data-end="1090.85">look at a demo if you want to go and</span> <span data-start="1090.85" data-end="1098.299">check out J s content get a fine calm</span> <span data-start="1098.309" data-end="1102.039">that is this page I will tell you that</span> <span data-start="1102.039" data-end="1103.51">at the bottom of this there are two</span> <span data-start="1103.51" data-end="1105.309">links there you can't see the second one</span> <span data-start="1105.309" data-end="1106.75">there's a demo comments thread that's</span> <span data-start="1106.75" data-end="1107.679">what we're gonna look at in just a</span> <span data-start="1107.679" data-end="1109.24">moment then right below that there's a</span> <span data-start="1109.24" data-end="1111.399">slides link this is substantially the</span> <span data-start="1111.399" data-end="1113.83">same presentation that I gave last month</span> <span data-start="1113.83" data-end="1116.02">itself by Southwest Interactive and so</span> <span data-start="1116.02" data-end="1118.36">my slide set from that is up still on</span> </p>
<p><span data-start="1118.36" data-end="1120.19">SlideShare so you're gonna see most of</span> <span data-start="1120.19" data-end="1121.809">the same slides here if you want to</span> <span data-start="1121.809" data-end="1124.24">check out my slides let's go over and</span> <span data-start="1124.24" data-end="1126.25">take a look at this demo this is a very</span> <span data-start="1126.25" data-end="1127.75">simple demo and I encourage all of you</span> <span data-start="1127.75" data-end="1129.61">to be participating in this demo it'll</span> <span data-start="1129.61" data-end="1131.59">be cooler if more of you are logging in</span> <span data-start="1131.59" data-end="1134.47">and doing things so basically the setup</span> <span data-start="1134.47" data-end="1136.27">of this demo is I've got this image and</span> </p>
<p><span data-start="1136.27" data-end="1138.279">I've got 10 different randomly selected</span> <span data-start="1138.279" data-end="1142.27">images that come from Flickr and I can</span> <span data-start="1142.27" data-end="1144.279">just change those that will what I'm</span> <span data-start="1144.279" data-end="1146.08">doing actually is I'm using handlebar</span> <span data-start="1146.08" data-end="1147.73">jeaious handlebar jeaious was used to</span> <span data-start="1147.73" data-end="1149.23">build this page on the server when I</span> <span data-start="1149.23" data-end="1151.33">first requested it and then when I click</span> <span data-start="1151.33" data-end="1153.429">this change image I'm doing an ajax</span> <span data-start="1153.429" data-end="1155.38">request and i'm saying giving some json</span> <span data-start="1155.38" data-end="1157.24">back that tells me what's the new image</span> <span data-start="1157.24" data-end="1158.83">that's been randomly selected from the</span> <span data-start="1158.83" data-end="1161.38">server the details its source and alts</span> <span data-start="1161.38" data-end="1162.909">and all of that stuff and then i'm</span> <span data-start="1162.909" data-end="1164.35">rebuilding that markup using the</span> <span data-start="1164.35" data-end="1167.5">template on the front end so it's very</span> <span data-start="1167.5" data-end="1168.82">simple but you can see that it's going</span> <span data-start="1168.82" data-end="1170.71">quick so whichever image you happen to</span> <span data-start="1170.71" data-end="1172.75">have picked when you type in your name</span> <span data-start="1172.75" data-end="1179.98">and you type in some URL and you click</span> <span data-start="1179.98" data-end="1182.559">login it's gonna create a login session</span> <span data-start="1182.559" data-end="1185.2">for you and you can type in a comment so</span> <span data-start="1185.2" data-end="1189.49">i'm gonna say hey nice bench and submit</span> <span data-start="1189.49" data-end="1191.89">that comment all that that it's</span> <span data-start="1191.89" data-end="1193.57">happening here is using that handlebar</span> <span data-start="1193.57" data-end="1194.71">jeaious I'm going to show you some code</span> <span data-start="1194.71" data-end="1196.809">here in just a moment but everything</span> <span data-start="1196.809" data-end="1198.549">that just happened there that were Ajax</span> <span data-start="1198.549" data-end="1199.809">requests that were going back and forth</span> <span data-start="1199.809" data-end="1202.299">but they were only sending JSON back and</span> <span data-start="1202.299" data-end="1204.49">forth the mark-up was actually being</span> <span data-start="1204.49" data-end="1206.74">built on the fly using the same template</span> <span data-start="1206.74" data-end="1208.48">again j'en in the browser</span> <span data-start="1208.48" data-end="1211.059">is what I use on the server so if I were</span> <span data-start="1211.059" data-end="1212.77">to refresh this page the exact same</span> <span data-start="1212.77" data-end="1214.809">process of querying the application for</span> <span data-start="1214.809" data-end="1216.7">that data would happen and the</span> <span data-start="1216.7" data-end="1218.35">server-side templating engine would be</span> <span data-start="1218.35" data-end="1221.049">responsible for building this page so if</span> <span data-start="1221.049" data-end="1222.37">several of you have already added</span> <span data-start="1222.37" data-end="1224.11">comments which I'm guessing probably you</span> <span data-start="1224.11" data-end="1229.809">have if I use if i refresh this page so</span> <span data-start="1229.809" data-end="1231.13">now I know that several of you have</span> <span data-start="1231.13" data-end="1232.84">already made comments that request</span> <span data-start="1232.84" data-end="1234.429">happened on the server so I can do</span> <span data-start="1234.429" data-end="1236.86">templating in both places using exactly</span> <span data-start="1236.86" data-end="1239.29">the same templates I can also do data</span> <span data-start="1239.29" data-end="1240.88">validation in both places because I know</span> <span data-start="1240.88" data-end="1242.77">for a fact that I have a rule that if I</span> <span data-start="1242.77" data-end="1246.299">type in a really short comment like this</span> <span data-start="1246.299" data-end="1248.559">it's going to do some data validation</span> <span data-start="1248.559" data-end="1250.12">now what's cool about this is that data</span> <span data-start="1250.12" data-end="1251.77">validation code which I'll show in just</span> <span data-start="1251.77" data-end="1253.299">a moment if I have time that deadly</span> <span data-start="1253.299" data-end="1254.679">validation code very simple it just</span> <span data-start="1254.679" data-end="1256.809">looked at the minimum length of my text</span> <span data-start="1256.809" data-end="1259">field that ran in the browser gave me an</span> <span data-start="1259" data-end="1261.85">immediate request but that same code can</span> <span data-start="1261.85" data-end="1263.47">also run on the server because we know</span> <span data-start="1263.47" data-end="1264.97">we can't trust the javascript in the</span> <span data-start="1264.97" data-end="1266.559">browser so I did not have to write that</span> <span data-start="1266.559" data-end="1268.9">rule twice I only wrote it once so it</span> <span data-start="1268.9" data-end="1271.929">needs to be at least 5 characters so</span> <span data-start="1271.929" data-end="1273.97">then when I resubmit everything's going</span> <span data-start="1273.97" data-end="1277.15">to work fine all right so let's take a</span> <span data-start="1277.15" data-end="1279.429">look at some code first of all using</span> <span data-start="1279.429" data-end="1282.1">handlebar j/s this is intended to be</span> <span data-start="1282.1" data-end="1283.929">very simple a lot of this stuff is</span> <span data-start="1283.929" data-end="1286.179">wrapped up inside of the code so here</span> <span data-start="1286.179" data-end="1288.549">you can see that all I'm doing is I'm</span> <span data-start="1288.549" data-end="1290.59">calling handlebar and I'm calling a</span> <span data-start="1290.59" data-end="1292.33">function called process state I'm giving</span> <span data-start="1292.33" data-end="1293.86">it that arbitrary string value which</span> <span data-start="1293.86" data-end="1295.54">represents the state of the application</span> <span data-start="1295.54" data-end="1297.25">in this case I know there's a login</span> <span data-start="1297.25" data-end="1298.6">error so I know what that state is and</span> </p>
<p><span data-start="1298.6" data-end="1300.82">I'm passing it a JSON data structure and</span> <span data-start="1300.82" data-end="1303.01">then I'm using this fancy thing called</span> <span data-start="1303.01" data-end="1305.71">promises server-side defers things like</span> <span data-start="1305.71" data-end="1307.6">that so it's not really particularly</span> <span data-start="1307.6" data-end="1308.98">important exactly how this happens but</span> <span data-start="1308.98" data-end="1310.51">basically this can be an asynchronous</span> <span data-start="1310.51" data-end="1312.61">operation or synchronous depending on</span> <span data-start="1312.61" data-end="1314.08">the environment and what's happening and</span> <span data-start="1314.08" data-end="1316.6">so all I really want to know is either</span> <span data-start="1316.6" data-end="1319.27">immediately or later if necessary I want</span> <span data-start="1319.27" data-end="1321.309">to do something after this completes so</span> <span data-start="1321.309" data-end="1323.47">after I've processed that state then I'm</span> <span data-start="1323.47" data-end="1326.08">going to get passed to me the value the</span> <span data-start="1326.08" data-end="1328.15">results of that templating process and</span> <span data-start="1328.15" data-end="1329.41">so I'm just going to use some very</span> <span data-start="1329.41" data-end="1331.21">simple jQuery to replace the existing</span> <span data-start="1331.21" data-end="1334.27">form with what the results of my</span> <span data-start="1334.27" data-end="1335.89">templating engine were it doesn't get</span> <span data-start="1335.89" data-end="1337.63">any more complicated than that I use</span> <span data-start="1337.63" data-end="1339.85">that template engine as an engine to</span> <span data-start="1339.85" data-end="1341.799">grab me the markup and combine it with</span> <span data-start="1341.799" data-end="1342.44">that data</span> <span data-start="1342.44" data-end="1345.11">and it used the optimized precompiled</span> <span data-start="1345.11" data-end="1348.55">javascript version of the template</span> <span data-start="1348.55" data-end="1350.96">alright so handlebar j/s just to show a</span> <span data-start="1350.96" data-end="1352.82">couple of things this is just there's</span> <span data-start="1352.82" data-end="1354.47">actually several JavaScript files but of</span> <span data-start="1354.47" data-end="1355.81">course you can combine them all together</span> <span data-start="1355.81" data-end="1358.46">it's really nothing more than a bunch of</span> <span data-start="1358.46" data-end="1361.61">fancy you know regular expressions and</span> <span data-start="1361.61" data-end="1362.81">processing and things but I'm</span> <span data-start="1362.81" data-end="1364.64">essentially generating my JavaScript</span> <span data-start="1364.64" data-end="1366.35">right here that's what I'm doing is I'm</span> <span data-start="1366.35" data-end="1368.48">just building up strings of JavaScript</span> <span data-start="1368.48" data-end="1371.53">that represent the optimized output of</span> <span data-start="1371.53" data-end="1375.38">your text templates let's take a look at</span> <span data-start="1375.38" data-end="1376.64">what some of those templates might look</span> <span data-start="1376.64" data-end="1378.62">like so if you're interested in my</span> <span data-start="1378.62" data-end="1381.35">particular approach to templating so</span> <span data-start="1381.35" data-end="1384.98">this is a master template file you can</span> <span data-start="1384.98" data-end="1386.42">see here at the top that I declare a</span> <span data-start="1386.42" data-end="1388.58">template section that's what this dollar</span> <span data-start="1388.58" data-end="1390.95">sign colon is and I give it a name I use</span> <span data-start="1390.95" data-end="1393.47">kind of the CSS approach here so IDs</span> <span data-start="1393.47" data-end="1395.33">have the pound and then I have my</span> <span data-start="1395.33" data-end="1396.89">doctype here and of course I know that</span> <span data-start="1396.89" data-end="1400.04">ie bug have got no whitespace before my</span> <span data-start="1400.04" data-end="1402.14">dog died but then I just sum</span> <span data-start="1402.14" data-end="1404.24">substantially doing HTML and then here</span> </p>
<p><span data-start="1404.24" data-end="1406.34">I'm gonna drop in a sub template a style</span> <span data-start="1406.34" data-end="1407.96">sub template that's what the @ symbol</span> <span data-start="1407.96" data-end="1411.53">does down later you see in the body I've</span> <span data-start="1411.53" data-end="1414.05">got dropping in the content and footer</span> <span data-start="1414.05" data-end="1416.69">sub templates so this is my master</span> <span data-start="1416.69" data-end="1418.28">template for every page on this side of</span> <span data-start="1418.28" data-end="1420.32">course there's only one right now but my</span> <span data-start="1420.32" data-end="1424.07">individual template template done index</span> <span data-start="1424.07" data-end="1425.93">dot HTML by the way filenames doesn't</span> <span data-start="1425.93" data-end="1427.22">matter you can have whatever you wanted</span> <span data-start="1427.22" data-end="1429.23">to be but here I'm basically saying well</span> <span data-start="1429.23" data-end="1432.17">I'm going to extend sort of simple</span> <span data-start="1432.17" data-end="1434.09">object-oriented extension if you will</span> <span data-start="1434.09" data-end="1435.83">I'm extending that master template and</span> </p>
<p><span data-start="1435.83" data-end="1440.36">I'm going to basically here declare some</span> <span data-start="1440.36" data-end="1442.85">some values that are going to happen at</span> <span data-start="1442.85" data-end="1444.62">runtime when this sub template is called</span> <span data-start="1444.62" data-end="1446.72">but all these do are going to select</span> <span data-start="1446.72" data-end="1448.76">other sub templates so there's no</span> <span data-start="1448.76" data-end="1450.92">mathematics going on or data formatting</span> <span data-start="1450.92" data-end="1452.87">or any other logic that you don't want</span> <span data-start="1452.87" data-end="1454.46">to have here the only logic that happens</span> <span data-start="1454.46" data-end="1456.62">is presentational logic deciding which</span> <span data-start="1456.62" data-end="1459.23">templates need to happen so for instance</span> <span data-start="1459.23" data-end="1460.49">when I'm logged in I'm going to show a</span> <span data-start="1460.49" data-end="1462.08">different set of or when there's</span> <span data-start="1462.08" data-end="1463.25">comments I'm going to show a different</span> <span data-start="1463.25" data-end="1465.88">template than when there's not comments</span> </p>
<p><span data-start="1465.88" data-end="1469.16">I wanted to show you real quick I'm kind</span> <span data-start="1469.16" data-end="1470.48">of running short a little short in time</span> <span data-start="1470.48" data-end="1471.56">but I want to show you real quick a</span> <span data-start="1471.56" data-end="1473.6">couple of other pieces of code so this</span> <span data-start="1473.6" data-end="1475.13">is that validation code that I was</span> <span data-start="1475.13" data-end="1476.09">talking about this</span> <span data-start="1476.09" data-end="1477.799">is very very simple I just wrote some</span> <span data-start="1477.799" data-end="1480.62">some functions that that I can run in</span> <span data-start="1480.62" data-end="1482.029">both places you can do whatever</span> <span data-start="1482.029" data-end="1483.98">validation you want as long as it's not</span> <span data-start="1483.98" data-end="1487.13">you know tied to there being a Dom as</span> <span data-start="1487.13" data-end="1489.679">long as it deals with JSON data valleys</span> <span data-start="1489.679" data-end="1491.12">and then you can run it in both places</span> <span data-start="1491.12" data-end="1493.49">here I just have a different one for the</span> <span data-start="1493.49" data-end="1495.77">full name property and the URL property</span> <span data-start="1495.77" data-end="1497.75">and I can apply rules that will in this</span> <span data-start="1497.75" data-end="1500.63">code to run in both places same is true</span> <span data-start="1500.63" data-end="1502.34">of formatting I didn't really Express</span> <span data-start="1502.34" data-end="1504.049">that much but when I'm for when I'm</span> <span data-start="1504.049" data-end="1506.51">getting data back from a from an ajax</span> <span data-start="1506.51" data-end="1508.19">request i need to format that on-the-fly</span> <span data-start="1508.19" data-end="1510.559">need to make sure that HTML characters</span> <span data-start="1510.559" data-end="1512.12">are properly escaped and things like</span> <span data-start="1512.12" data-end="1513.919">that so that's another thing that you</span> <span data-start="1513.919" data-end="1516.95">the URL or the UI architecture does</span> <span data-start="1516.95" data-end="1519.26">usually for you and that you have full</span> <span data-start="1519.26" data-end="1520.88">control over this now you can pass it</span> <span data-start="1520.88" data-end="1523.01">into a formatting function and replace</span> <span data-start="1523.01" data-end="1524.48">your characters and all of those things</span> <span data-start="1524.48" data-end="1526.22">and you can do that either in the</span> <span data-start="1526.22" data-end="1529.49">browser on the server last thing full</span> <span data-start="1529.49" data-end="1531.86">disclosure the back end of this</span> <span data-start="1531.86" data-end="1533.57">application the black box of this</span> <span data-start="1533.57" data-end="1536.419">application is a PHP file when I gave</span> <span data-start="1536.419" data-end="1538.07">this demo at South by Southwest that</span> <span data-start="1538.07" data-end="1539.659">actually crashed and then I went back</span> <span data-start="1539.659" data-end="1541.429">and I was like man that sucks why did it</span> <span data-start="1541.429" data-end="1543.62">crash halfway through my demo some of it</span> <span data-start="1543.62" data-end="1545.39">worked and then it didn't and as I</span> <span data-start="1545.39" data-end="1547.159">discovered it was the PHP that crashed</span> <span data-start="1547.159" data-end="1549.169">so all the JavaScript was awesome and it</span> <span data-start="1549.169" data-end="1551.029">worked and it was the PHP that sucked so</span> <span data-start="1551.029" data-end="1553.25">full disclosure there's some PHP going</span> <span data-start="1553.25" data-end="1556.46">on but this is only doing the crappy</span> <span data-start="1556.46" data-end="1558.5">stuff of you know managing my sessions</span> <span data-start="1558.5" data-end="1560.059">and all that other crap but the last</span> <span data-start="1560.059" data-end="1561.98">line is the important one it just</span> <span data-start="1561.98" data-end="1564.2">encodes it to JSON and spits it out and</span> <span data-start="1564.2" data-end="1565.64">the rest of the world is beautiful junk</span> <span data-start="1565.64" data-end="1568.37">for javascript last thing on full</span> <span data-start="1568.37" data-end="1570.649">disclosure is to say that at the moment</span> </p>
<p><span data-start="1570.649" data-end="1573.62">I'm still experimenting with the jump</span> <span data-start="1573.62" data-end="1576.47">between a web request and an execution</span> <span data-start="1576.47" data-end="1579.23">context for JavaScript this is called</span> <span data-start="1579.23" data-end="1582.44">the the gateway interface it goes by jsg</span> </p>
<p><span data-start="1582.44" data-end="1584.929">I in the JavaScript world there are J</span> <span data-start="1584.929" data-end="1588.02">SGI things like v8 cgi that can do this</span> <span data-start="1588.02" data-end="1589.159">automatically for you</span> <span data-start="1589.159" data-end="1590.99">i'm trying to evaluate the best way to</span> <span data-start="1590.99" data-end="1592.7">do this it's basically how do you</span> <span data-start="1592.7" data-end="1595.1">translate a set of HTTP headers into an</span> <span data-start="1595.1" data-end="1598.19">execution context for javascript so at</span> <span data-start="1598.19" data-end="1600.77">the moment I have some really terrible</span> <span data-start="1600.77" data-end="1603.62">ugly PHP that's doing it but that's the</span> <span data-start="1603.62" data-end="1605.36">only part that's actually happening in</span> <span data-start="1605.36" data-end="1608.27">the stack that's PHP and very soon this</span> <span data-start="1608.27" data-end="1609.41">crap is going to go</span> <span data-start="1609.41" data-end="1611.78">and basically all this is doing again</span> <span data-start="1611.78" data-end="1614.86">for full disclosure is I'm simply</span> <span data-start="1614.86" data-end="1617.51">executing my JavaScript here I'm calling</span> <span data-start="1617.51" data-end="1619.37">my engine and passing it a JavaScript</span> <span data-start="1619.37" data-end="1620.96">file so that's really all the PHP is</span> <span data-start="1620.96" data-end="1622.94">doing but I took advantage of the fact</span> <span data-start="1622.94" data-end="1624.68">that PHP is pretty good about giving me</span> <span data-start="1624.68" data-end="1626.54">those headers and session management all</span> <span data-start="1626.54" data-end="1630.05">those things so we've got like one or</span> <span data-start="1630.05" data-end="1632.69">two minutes left and I think that's</span> <span data-start="1632.69" data-end="1635.03">substantially what I wanted to show for</span> <span data-start="1635.03" data-end="1638.96">the presentation are there any last</span> <span data-start="1638.96" data-end="1662.42">questions so I'm a huge fan of</span> <span data-start="1662.42" data-end="1664.13">server-side JavaScript and there's a lot</span> <span data-start="1664.13" data-end="1665.75">of different ways to take it it's gonna</span> <span data-start="1665.75" data-end="1667.61">make sense for some companies to go with</span> <span data-start="1667.61" data-end="1669.59">that architecture some of them it's not</span> <span data-start="1669.59" data-end="1671.06">for instance if you're in the dotnet</span> <span data-start="1671.06" data-end="1673.01">world you really want the smallest</span> <span data-start="1673.01" data-end="1674.96">footprint of change to that architecture</span> <span data-start="1674.96" data-end="1676.64">as possible because it's really hard to</span> <span data-start="1676.64" data-end="1679.34">adapt things in that world so for them</span> <span data-start="1679.34" data-end="1680.9">it wouldn't make sense to go with a</span> <span data-start="1680.9" data-end="1682.79">really complex you know CouchDB and</span> <span data-start="1682.79" data-end="1684.26">nodejs kind of thing because they're</span> <span data-start="1684.26" data-end="1686.03">gonna have to rethink their entire world</span> <span data-start="1686.03" data-end="1688.04">but if you can just tell them run some</span> <span data-start="1688.04" data-end="1689.6">synchronous JavaScript in this small</span> <span data-start="1689.6" data-end="1691.88">little sandbox give that control to your</span> <span data-start="1691.88" data-end="1693.2">front-end developers and let the</span> <span data-start="1693.2" data-end="1694.82">back-end developers only worry about</span> <span data-start="1694.82" data-end="1696.89">data and session management things I</span> <span data-start="1696.89" data-end="1698.48">think can prove a little bit I think</span> <span data-start="1698.48" data-end="1700.88">there's certainly a use case for some</span> <span data-start="1700.88" data-end="1702.17">more forward thinking or more</span> <span data-start="1702.17" data-end="1703.7">experimental companies that want to go</span> <span data-start="1703.7" data-end="1705.68">full fledge totally JavaScript on the</span> <span data-start="1705.68" data-end="1707.84">server and all of this code should work</span> <span data-start="1707.84" data-end="1709.88">exactly perfectly in that type of</span> <span data-start="1709.88" data-end="1713.68">environment good question</span> <span data-start="1713.68" data-end="1717.65">anybody else awesome go forth and</span> <span data-start="1717.65" data-end="1719.36">rethink in your eye architecture there</span> <span data-start="1719.36" data-end="1721.04">is a middle end it's time to give it a</span> <span data-start="1721.04" data-end="1724.46">name so thanks a lot</span> </p>
</section>