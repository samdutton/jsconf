<section>
<p><span data-start="1.1" data-end="20.51">[Music]</span> <span data-start="20.52" data-end="21.76">Thanks</span> <span data-start="21.76" data-end="25.41">how is everybody are you still tired</span> <span data-start="25.41" data-end="28.45">thanks John</span> <span data-start="28.45" data-end="30.49">so I'm gonna do how to talk to Hardware</span> <span data-start="30.49" data-end="33.249">JavaScript firmware in 30 minutes which</span> <span data-start="33.249" data-end="36.309">is a tall order so please forgive me if</span> <span data-start="36.309" data-end="38.71">I speed through some concept or if I</span> <span data-start="38.71" data-end="41.98">abbreviate like I won't go over all of</span> <span data-start="41.98" data-end="43.839">how you do firmware in JavaScript in 30</span> <span data-start="43.839" data-end="47.05">minutes this is actually kind of a hard</span> <span data-start="47.05" data-end="48.609">concept for a lot of people including</span> <span data-start="48.609" data-end="50.98">experienced engineers so if there's</span> <span data-start="50.98" data-end="53.05">anything in here that just completely</span> <span data-start="53.05" data-end="56.53">flies by that I say really fast or that</span> <span data-start="56.53" data-end="57.37">you haven't been introduced to you</span> <span data-start="57.37" data-end="59.139">before I won't probably have time for</span> </p>
<p><span data-start="59.139" data-end="61.899">Q&A here but please approach me</span> <span data-start="61.899" data-end="63.309">afterwards if there's something you want</span> <span data-start="63.309" data-end="65.11">to learn more about I would be delighted</span> <span data-start="65.11" data-end="68.68">to fill in the gaps on what I didn't</span> <span data-start="68.68" data-end="72.03">have time for in here so I'm kelcie as</span> <span data-start="72.03" data-end="75.369">CJ mentioned I am one of the creators of</span> <span data-start="75.369" data-end="79.03">this thing called the tehsil which you</span> <span data-start="79.03" data-end="81.729">can basically think of as a node API for</span> <span data-start="81.729" data-end="86.56">the physical world and today we're going</span> <span data-start="86.56" data-end="88.81">to solve a problem and the problem that</span> <span data-start="88.81" data-end="90.64">we're gonna solve is I want my project</span> <span data-start="90.64" data-end="92.189">to be able to tell me whether it is</span> <span data-start="92.189" data-end="94.509">oriented right-side up or if I flip it</span> <span data-start="94.509" data-end="96.399">over and it's right side down and I lost</span> <span data-start="96.399" data-end="100.03">all my probes don't worry about that</span> <span data-start="100.03" data-end="104.59">so today's talk is not about tehsil it</span> <span data-start="104.59" data-end="105.909">includes a tehsil for the sake of</span> <span data-start="105.909" data-end="107.38">convenience because I want to write my</span> <span data-start="107.38" data-end="110.92">firmware in JavaScript but this is what</span> <span data-start="110.92" data-end="112.63">it looks like to solve my problem with</span> <span data-start="112.63" data-end="116.259">tehsil I've got two node requires I say</span> <span data-start="116.259" data-end="119.02">that I'm going to use this Tussle thing</span> </p>
<p><span data-start="119.02" data-end="120.609">I'm going to plug in this accelerometer</span> <span data-start="120.609" data-end="123.039">module in 4a and when it gives me data</span> <span data-start="123.039" data-end="126.039">I'm going to print it out and because</span> <span data-start="126.039" data-end="128.02">acceleration as you all know is a</span> <span data-start="128.02" data-end="130">constant down or because gravity is a</span> <span data-start="130" data-end="132.55">constant downward acceleration I'll get</span> <span data-start="132.55" data-end="134.44">a different z-axis</span> <span data-start="134.44" data-end="136.93">sign negative versus positive if I'm</span> <span data-start="136.93" data-end="141.01">like this versus like that we were like</span> <span data-start="141.01" data-end="143.92">one minute into my talk so that's why</span> </p>
<p><span data-start="143.92" data-end="147.209">I'm not telling you about tussle today</span> <span data-start="147.209" data-end="149.92">because it's much more interesting if we</span> <span data-start="149.92" data-end="152.739">take a look further in and don't use the</span> <span data-start="152.739" data-end="155.23">api's that we've already written so what</span> <span data-start="155.23" data-end="157.209">I'm gonna do is show you the basics of</span> <span data-start="157.209" data-end="160.93">how we go from a piece of hardware like</span> <span data-start="160.93" data-end="163.93">this with this little black chip on it</span> <span data-start="163.93" data-end="167.29">the Mme 84 accelerometer how we look at</span> <span data-start="167.29" data-end="169.39">the datasheet and interpret the signals</span> <span data-start="169.39" data-end="171.64">and talk to it in order to get useful</span> <span data-start="171.64" data-end="175.09">information so if you look at the full</span> <span data-start="175.09" data-end="177.489">stack which is not in this case a mean</span> <span data-start="177.489" data-end="182.38">stack we're gonna talk today basically</span> <span data-start="182.38" data-end="185.62">from signals on a wire to zeros and ones</span> <span data-start="185.62" data-end="190.09">binary and Hexen ting information in</span> </p>
<p><span data-start="190.09" data-end="193.93">English and if any of you are able to</span> <span data-start="193.93" data-end="195.37">come to the workshop tomorrow I think it</span> <span data-start="195.37" data-end="198.67">might be full but essentially pay</span> <span data-start="198.67" data-end="200.29">attention because we're gonna make you</span> <span data-start="200.29" data-end="205.39">do this tomorrow so jumping right in how</span> <span data-start="205.39" data-end="207.579">talking to hardware works there are many</span> <span data-start="207.579" data-end="209.26">ways that a signal can play on a wire</span> <span data-start="209.26" data-end="210.7">you've got your analog you've got your</span> <span data-start="210.7" data-end="212.89">pulse width modulation today we're only</span> <span data-start="212.89" data-end="214.63">going to talk about digital signals and</span> <span data-start="214.63" data-end="217.329">the reason for that is a microcontroller</span> <span data-start="217.329" data-end="219.82">will typically use just a digital signal</span> <span data-start="219.82" data-end="222.13">it's very simple it's either on or it's</span> <span data-start="222.13" data-end="226.209">off right and this is the</span> <span data-start="226.209" data-end="229.93">microcontroller trip on here and that's</span> <span data-start="229.93" data-end="233.92">what it speaks is ones and zeros so we</span> <span data-start="233.92" data-end="236.709">need to figure out how to use ones and</span> <span data-start="236.709" data-end="238.359">zeros to convey more information than</span> <span data-start="238.359" data-end="242.579">just on and off because we only have</span> <span data-start="242.579" data-end="245.68">that very simple information we have to</span> <span data-start="245.68" data-end="248.41">add the third dimension of time right</span> <span data-start="248.41" data-end="250.959">and take you all are probably familiar</span> <span data-start="250.959" data-end="253.81">with Morse code what we use as</span> <span data-start="253.81" data-end="256.18">communication protocols so a toggle ones</span> <span data-start="256.18" data-end="258.25">and zeroes with specific timing on</span> <span data-start="258.25" data-end="260.859">specific wires in encoding so that</span> <span data-start="260.859" data-end="263.89">create messages that are more complex so</span> <span data-start="263.89" data-end="265.57">for example over here in this diagram</span> <span data-start="265.57" data-end="267.37">this is using a</span> <span data-start="267.37" data-end="268.99">wrote a call called spy which we aren't</span> <span data-start="268.99" data-end="271.78">going to use for this accelerometer but</span> <span data-start="271.78" data-end="275.56">it's got four different wires clock one</span> <span data-start="275.56" data-end="277.84">that talks from the master device to the</span> <span data-start="277.84" data-end="279.28">slave device I apologize for the</span> <span data-start="279.28" data-end="281.199">terminology it's like ingrained in here</span> <span data-start="281.199" data-end="282.88">but it means that this device has</span> <span data-start="282.88" data-end="284.8">complete control and this device has no</span> <span data-start="284.8" data-end="290.53">control and so we've got one where the</span> <span data-start="290.53" data-end="292.15">master device talks to the slave and one</span> <span data-start="292.15" data-end="293.74">where the slave device responds to the</span> <span data-start="293.74" data-end="296.68">master and this other line which I won't</span> <span data-start="296.68" data-end="299.59">go into right now different protocols</span> <span data-start="299.59" data-end="300.97">use different numbers of wires and</span> <span data-start="300.97" data-end="304.24">different specific and coatings so let's</span> <span data-start="304.24" data-end="305.77">try one so this is a different one this</span> <span data-start="305.77" data-end="308.039">is called UART also known as serial and</span> <span data-start="308.039" data-end="311.53">what we're gonna do is we're gonna send</span> <span data-start="311.53" data-end="316.84">the words hello world over the wire here</span> <span data-start="316.84" data-end="320.68">hold on I lost all my probes when I</span> <span data-start="320.68" data-end="322.03">picked this up so you get to watch me</span> <span data-start="322.03" data-end="333.46">painfully attach this</span> <span data-start="333.47" data-end="339.53">alright so cereal is a protocol that</span> <span data-start="339.53" data-end="342.02">uses two wires and the third wire is</span> <span data-start="342.02" data-end="348.03">just ground which you need in everything</span> <span data-start="348.04" data-end="350.21">so by the way the device that I'm</span> <span data-start="350.21" data-end="351.71">hooking in is called a logic analyzer</span> <span data-start="351.71" data-end="353.45">and this is a really nice one it's by</span> <span data-start="353.45" data-end="357.68">this company called sale ei and what a</span> <span data-start="357.68" data-end="360.65">logic analyzer does is it lets you have</span> <span data-start="360.65" data-end="363.08">a look specifically at what the signals</span> <span data-start="363.08" data-end="366.47">are saying on the pins so you actually</span> <span data-start="366.47" data-end="370.67">get to watch and record the message is</span> <span data-start="370.67" data-end="372.23">that it's sending and it even does stuff</span> <span data-start="372.23" data-end="373.79">like interpret it and I'll show you in a</span> <span data-start="373.79" data-end="374.54">second</span> </p>
<p><span data-start="374.54" data-end="381.27">I think that's come on</span> <span data-start="381.28" data-end="384.71">sorry Hardware on stages like this at</span> <span data-start="384.71" data-end="391.63">the best of times there we go alright so</span> <span data-start="391.63" data-end="395.36">what I'm going to do essentially what</span> <span data-start="395.36" data-end="399.68">we're taking is a a message and we're</span> <span data-start="399.68" data-end="401.99">sending it from the tehsil and</span> <span data-start="401.99" data-end="403.79">communicating it outward and in this</span> <span data-start="403.79" data-end="405.44">case I don't even have a microchip</span> <span data-start="405.44" data-end="407.419">attached to it so it's not communicating</span> <span data-start="407.419" data-end="409.25">with anything except for this logic</span> <span data-start="409.25" data-end="411.44">analyzer here and the important bit is</span> <span data-start="411.44" data-end="413.18">what I'm showing here is this is the</span> </p>
<p><span data-start="413.18" data-end="415.33">JavaScript code I'm going to send and</span> <span data-start="415.33" data-end="419.57">this stuff over here is settings in the</span> <span data-start="419.57" data-end="422.8">logic analyzer which is over here</span> <span data-start="422.8" data-end="425">which tell it how to interpret it and</span> <span data-start="425" data-end="426.56">the important part is that they match</span> <span data-start="426.56" data-end="430.97">right so here we've got data bits 8 baud</span> <span data-start="430.97" data-end="433.04">rate this is the speed at which it's</span> <span data-start="433.04" data-end="436.07">sent and you can see that we've got the</span> <span data-start="436.07" data-end="440.15">same baud rate at 8 bits etc if we had</span> <span data-start="440.15" data-end="441.5">more time I'd tell you what those mean</span> <span data-start="441.5" data-end="442.94">but it honestly doesn't matter very much</span> <span data-start="442.94" data-end="446.84">in this context so what I'm going to do</span> <span data-start="446.84" data-end="454.46">is run this code and at the same time</span> </p>
<p><span data-start="454.46" data-end="457.1">I'm going to capture it and so this is</span> <span data-start="457.1" data-end="458.39">going to wait for something to happen</span> <span data-start="458.39" data-end="462.56">over on the tehsil and I've set it so</span> <span data-start="462.56" data-end="464.51">that when channel 3 which is this orange</span> <span data-start="464.51" data-end="466.969">wire goes high it'll</span> <span data-start="466.969" data-end="470.659">collecting samples so it's found my</span> <span data-start="470.659" data-end="472.519">tussle and it's writing and it's running</span> <span data-start="472.519" data-end="486.639">and oh oh something's not connected oops</span> <span data-start="486.639" data-end="488.659">that's what you get uploaded in</span> <span data-start="488.659" data-end="503.909">backwards</span> </p>
<p><span data-start="503.919" data-end="510.429">I'll try that again</span> <span data-start="510.439" data-end="517.819">right connected writing running waiting</span> <span data-start="517.819" data-end="522.159">for trigger and it took samples perfect</span> <span data-start="522.159" data-end="525.05">so I can pause it early and so what you</span> <span data-start="525.05" data-end="529.819">can see here is we've got this async</span> <span data-start="529.819" data-end="534.079">serial wine something happened to start</span> <span data-start="534.079" data-end="535.399">it so that was the initialization of the</span> <span data-start="535.399" data-end="537.47">code when I required tehsil and if we</span> <span data-start="537.47" data-end="540.11">zoom way in we can see that some up and</span> <span data-start="540.11" data-end="541.55">down motion happened and that's the ones</span> <span data-start="541.55" data-end="543.769">and zeros and if you zoom even further</span> <span data-start="543.769" data-end="546.019">in you probably can't read this very</span> <span data-start="546.019" data-end="548.149">well because this program doesn't let</span> <span data-start="548.149" data-end="550.67">you change font sizes but it says hello</span> <span data-start="550.67" data-end="554.6">world and I will take a screenshot and</span> <span data-start="554.6" data-end="565.25">let you see and bigger yeah so that's</span> <span data-start="565.25" data-end="569.75">pretty cool right now I've seen how you</span> <span data-start="569.75" data-end="573.31">can take ones and zeros and really</span> <span data-start="573.31" data-end="575.899">obscure looking bits like this and over</span> <span data-start="575.899" data-end="579.41">a wire talk to something getting back to</span> <span data-start="579.41" data-end="581.689">our problem solving so we want to</span> <span data-start="581.689" data-end="583.16">determine whether this is upside down or</span> <span data-start="583.16" data-end="587.72">right side up right so I mentioned this</span> <span data-start="587.72" data-end="589.88">earlier very briefly but the easiest</span> <span data-start="589.88" data-end="592.04">thing to do to determine right side up</span> <span data-start="592.04" data-end="595.67">and upside down is to find gravity one</span> <span data-start="595.67" data-end="596.93">of the fun bits about working with</span> <span data-start="596.93" data-end="598.49">hardware is that you get to choose your</span> <span data-start="598.49" data-end="599.93">different sensors right so you could do</span> <span data-start="599.93" data-end="600.86">this in a bunch of different ways you</span> <span data-start="600.86" data-end="603.62">could have some kind of electronic level</span> <span data-start="603.62" data-end="605.959">or you could have some like magnetic</span> <span data-start="605.959" data-end="607.279">switch that teaches it what's</span> <span data-start="607.279" data-end="609.079">upside-down up right side up you could</span> <span data-start="609.079" data-end="611.06">have a light sensor that gets covered if</span> <span data-start="611.06" data-end="613.67">it gets flipped over but what I've</span> <span data-start="613.67" data-end="616.459">decided is the most reliable and what</span> <span data-start="616.459" data-end="618.38">your smartphone manufacturers have also</span> <span data-start="618.38" data-end="620.809">decided this the right answer is an</span> <span data-start="620.809" data-end="622.639">accelerometer because you can very</span> <span data-start="622.639" data-end="624.889">consistently get the direction of</span> <span data-start="624.889" data-end="627.92">gravity right so in your smartphone it's</span> <span data-start="627.92" data-end="630.079">the thing that lets your phone know</span> <span data-start="630.079" data-end="632.029">whether it's portrait or landscape it's</span> <span data-start="632.029" data-end="634.819">just an accelerometer finding gravity so</span> <span data-start="634.819" data-end="637.639">we're gonna do that use an accelerometer</span> <span data-start="637.639" data-end="640.25">and because I want to use JavaScript and</span> <span data-start="640.25" data-end="641.87">because maybe in the future I want my</span> <span data-start="641.87" data-end="643.17">project to have internet connect</span> </p>
<p><span data-start="643.17" data-end="648.66">I'm gonna write on a tehsil — so how do</span> <span data-start="648.66" data-end="650.339">I actually do that so I've taken this</span> <span data-start="650.339" data-end="652.32">thing here so this is my accelerometer</span> <span data-start="652.32" data-end="655.17">module which is tehsils but what I'm</span> <span data-start="655.17" data-end="657">actually gonna try and talk to is this</span> <span data-start="657" data-end="659.16">little black chip and if you look really</span> <span data-start="659.16" data-end="661.26">close on it in tiny tiny font which you</span> <span data-start="661.26" data-end="664.62">definitely can't read it says Mme 84</span> <span data-start="664.62" data-end="667.86">which is it's part number and this whole</span> <span data-start="667.86" data-end="669.57">red board is what's called a breakout</span> <span data-start="669.57" data-end="671.519">board and it just makes it easier for it</span> <span data-start="671.519" data-end="673.17">to get plugged in and it's got a couple</span> <span data-start="673.17" data-end="675">of resistors and capacitors that it can</span> <span data-start="675" data-end="677.85">handle charge so it can have the right</span> <span data-start="677.85" data-end="680.19">address which will talk to you a bit so</span> <span data-start="680.19" data-end="681.269">what we're looking at is that little</span> <span data-start="681.269" data-end="685.32">back black bit and as you can see here</span> <span data-start="685.32" data-end="687.839">it looks like this and it has this</span> <span data-start="687.839" data-end="690.089">datasheet it's pretty cool hardware bits</span> <span data-start="690.089" data-end="692.57">come with manuals in the general case</span> <span data-start="692.57" data-end="695.459">what's sort of unfortunate and also nice</span> <span data-start="695.459" data-end="698.82">is that it's a 54 page document that you</span> <span data-start="698.82" data-end="700.32">have to look through and the thing is</span> <span data-start="700.32" data-end="701.43">you actually have to read the whole</span> <span data-start="701.43" data-end="704.16">thing if you're gonna do this stuff it's</span> <span data-start="704.16" data-end="705.93">a really good idea to actually read the</span> <span data-start="705.93" data-end="710.82">entire data sheet I won't make you</span> <span data-start="710.82" data-end="713.91">read the entire thing but I'll show it</span> <span data-start="713.91" data-end="716.459">to you here and we're gonna reference it</span> <span data-start="716.459" data-end="717.66">during this talk there's a bunch of</span> <span data-start="717.66" data-end="720.709">different stuff in here it talks about</span> <span data-start="720.709" data-end="722.55">you know here's what each of the</span> <span data-start="722.55" data-end="725.16">different pins do it's got a table of</span> <span data-start="725.16" data-end="727.74">contents it tells you exactly how it's</span> <span data-start="727.74" data-end="728.67">gonna work</span> <span data-start="728.67" data-end="730.649">talking about earth gravity which we've</span> <span data-start="730.649" data-end="733.98">talked about ourselves basically</span> <span data-start="733.98" data-end="735.57">everything you could possibly want to</span> <span data-start="735.57" data-end="737.01">know about this part is supposed to be</span> <span data-start="737.01" data-end="742.709">in this document so the first thing you</span> <span data-start="742.709" data-end="744.899">want to figure out is how does this talk</span> <span data-start="744.899" data-end="747.14">to this and this is looking for our</span> <span data-start="747.14" data-end="749.22">communication protocol so we already saw</span> <span data-start="749.22" data-end="751.709">cereal we saw spy</span> <span data-start="751.709" data-end="754.29">this one has i2c and how do I know that</span> <span data-start="754.29" data-end="755.88">because it says so in the table of</span> <span data-start="755.88" data-end="760.26">contents so I know that I need I to see</span> <span data-start="760.26" data-end="762.48">then I need to talk from the JavaScript</span> <span data-start="762.48" data-end="766.829">side so I go to Tesla dot io / Docs and</span> <span data-start="766.829" data-end="768.42">it redirects over here a look in</span> </p>
<p><span data-start="768.42" data-end="773.43">Hardware API and find I to see right so</span> <span data-start="773.43" data-end="775.649">we need to be able to specify from both</span> <span data-start="775.649" data-end="777.54">directions</span> <span data-start="777.54" data-end="780.33">so that as remember when we had the the</span> <span data-start="780.33" data-end="783.72">baud rate remember when we had the baud</span> <span data-start="783.72" data-end="785.58">rate of one one five two hundred and</span> <span data-start="785.58" data-end="787.44">eight data bits and all that sort of</span> <span data-start="787.44" data-end="787.89">stuff</span> <span data-start="787.89" data-end="790.94">we need the same sort of stuff for ITC</span> <span data-start="790.94" data-end="792.899">but a little different because it's a</span> <span data-start="792.899" data-end="795.54">different protocol so in the case of I D</span> </p>
<p><span data-start="795.54" data-end="797.7">I to see each hardware thing will have a</span> <span data-start="797.7" data-end="801.54">built in address and in this case the</span> <span data-start="801.54" data-end="808.02">address is in this case the address for</span> <span data-start="808.02" data-end="809.55">the accelerometer which you can find the</span> <span data-start="809.55" data-end="810.959">datasheet but I won't dig through it for</span> <span data-start="810.959" data-end="815.31">the sake of your time is 0 x1 D so we're</span> <span data-start="815.31" data-end="817.92">then going to initialize I to C is a new</span> <span data-start="817.92" data-end="823.44">I to seaport on port a and we're gonna</span> <span data-start="823.44" data-end="825.63">do the very first thing that you</span> <span data-start="825.63" data-end="830.64">typically will do is that there should</span> <span data-start="830.64" data-end="835.98">be a Who am I so this is a this is a</span> <span data-start="835.98" data-end="837.42">thing that lets you say well I've hooked</span> <span data-start="837.42" data-end="838.86">it up correctly and my software</span> <span data-start="838.86" data-end="841.11">communication is set to the appropriate</span> <span data-start="841.11" data-end="843.959">levels right so I've just plugged in the</span> <span data-start="843.959" data-end="847.44">accelerometer on port a and I'm going to</span> <span data-start="847.44" data-end="849.45">need to move this over to read on this</span> <span data-start="849.45" data-end="855.75">the i2c lines which are SCL and SDA one</span> <span data-start="855.75" data-end="857.04">of them is clock and the other one is</span> <span data-start="857.04" data-end="871.83">data</span> <span data-start="871.84" data-end="873.79">make a really confused face if you're</span> <span data-start="873.79" data-end="877.029">lost okay you all see them either fine</span> <span data-start="877.029" data-end="887.58">or asleep</span> <span data-start="887.59" data-end="890.95">okay cool so I'm gonna do the hello</span> <span data-start="890.95" data-end="892.51">world for this particular part which is</span> <span data-start="892.51" data-end="895.06">not writing the words hello world onto</span> <span data-start="895.06" data-end="898.09">it but actually looking for this thing</span> <span data-start="898.09" data-end="899.02">called Who am I</span> <span data-start="899.02" data-end="901.06">which you can find in the datasheet one</span> <span data-start="901.06" data-end="902.529">of the most useful bits of the datasheet</span> <span data-start="902.529" data-end="905.56">is this thing called register</span> <span data-start="905.56" data-end="910.24">descriptions and it tells me if I want</span> <span data-start="910.24" data-end="911.83">to get different kinds of data like</span> <span data-start="911.83" data-end="916.06">status or out X or out Z or Who am I it</span> <span data-start="916.06" data-end="918.58">says that the address of the register</span> <span data-start="918.58" data-end="920.95">that has that information is here at 0</span> <span data-start="920.95" data-end="924.04">at X 0 D and it should return</span> <span data-start="924.04" data-end="925.9">information and in this case it'll</span> <span data-start="925.9" data-end="928.96">always just return 0 X 2 a that's just</span> <span data-start="928.96" data-end="933.94">what this particular device says so I'm</span> <span data-start="933.94" data-end="946.809">going to ask it to tell me</span> </p>
<p><span data-start="946.819" data-end="949.069">I'm going to ask it to tell me what is</span> <span data-start="949.069" data-end="951.499">at that zero X zero D and we expect the</span> <span data-start="951.499" data-end="957.769">answer to be zero X to a so it's</span> <span data-start="957.769" data-end="960.319">connected it's running it's looking for</span> <span data-start="960.319" data-end="964.939">a trigger and it's sampling cool so</span> <span data-start="964.939" data-end="966.199">let's go find it</span> <span data-start="966.199" data-end="970.609">ah here we are some things happened this</span> <span data-start="970.609" data-end="975.379">one says zero X to a cool and it says to</span> <span data-start="975.379" data-end="977.269">weigh over here as well because I told</span> <span data-start="977.269" data-end="980.509">it to excellent so we know that our</span> <span data-start="980.509" data-end="986.6">seller ometer hooked up correctly let's</span> <span data-start="986.6" data-end="990.199">get this back so we know our</span> <span data-start="990.199" data-end="991.819">accelerometer is hooked up correctly and</span> <span data-start="991.819" data-end="993.139">we're able to talk to it so that was the</span> <span data-start="993.139" data-end="994.999">first time that the tehsil here has</span> <span data-start="994.999" data-end="998.419">talked to this little Mme 84 device on</span> <span data-start="998.419" data-end="1000.519">here and this talked back to it so</span> <span data-start="1000.519" data-end="1004.299">communications working so back to the</span> <span data-start="1004.299" data-end="1007.089">problem we know that we only need the</span> <span data-start="1007.089" data-end="1009.609">z-axis and this is this little image of</span> <span data-start="1009.609" data-end="1011.049">on the side here is from the datasheet</span> <span data-start="1011.049" data-end="1012.639">and it says that if it's upside down</span> <span data-start="1012.639" data-end="1015.129">you'll get a negative Z and if it's</span> <span data-start="1015.129" data-end="1018.549">right side up you'll get a positive Z so</span> <span data-start="1018.549" data-end="1020.319">how do we learn whether the Z is</span> <span data-start="1020.319" data-end="1022.059">negative or positive well we're gonna</span> <span data-start="1022.059" data-end="1023.499">look these are copied and pasted from</span> <span data-start="1023.499" data-end="1026.919">the datasheet so this is the out z</span> <span data-start="1026.919" data-end="1028.72">there's two of them that say out see and</span> <span data-start="1028.72" data-end="1031.629">there's MSB and LSB and that stands for</span> <span data-start="1031.629" data-end="1033.25">most significant and lis significant</span> <span data-start="1033.25" data-end="1037.98">bits maybe those of you with classical</span> <span data-start="1037.98" data-end="1040.329">computer science education already know</span> <span data-start="1040.329" data-end="1044.829">these things but most significant bits</span> <span data-start="1044.829" data-end="1047.11">are gonna be the like if you had a</span> <span data-start="1047.11" data-end="1049.779">hundred or if you had 123 the most</span> <span data-start="1049.779" data-end="1051.429">significant part of that would be the</span> <span data-start="1051.429" data-end="1054.129">100 and the least significant would be</span> <span data-start="1054.129" data-end="1058.96">the 3 right so since we only care about</span> <span data-start="1058.96" data-end="1060.879">the negative versus positive we'll</span> <span data-start="1060.879" data-end="1062.379">expect this to be in the most</span> <span data-start="1062.379" data-end="1065.019">significant digit and specifically</span> <span data-start="1065.019" data-end="1066.159">there's this thing called two's</span> <span data-start="1066.159" data-end="1067.629">complement which according to the</span> <span data-start="1067.629" data-end="1070.779">datasheet is what this device with this</span> </p>
<p><span data-start="1070.779" data-end="1074.94">Mme 84 accelerometer device uses and</span> <span data-start="1074.94" data-end="1077.169">two's complement which I'm going to</span> <span data-start="1077.169" data-end="1080.34">grossly simplify right here</span> <span data-start="1080.34" data-end="1083.549">is a way to say negative versus positive</span> <span data-start="1083.549" data-end="1085.77">by using the most significant bit as a</span> <span data-start="1085.77" data-end="1087.33">placeholder for a negative or positive</span> <span data-start="1087.33" data-end="1089.37">service a negative or positive sign</span> <span data-start="1089.37" data-end="1092.549">right so if it's a 1 there is a minus</span> <span data-start="1092.549" data-end="1094.529">sign present and if it's a 0 there's no</span> <span data-start="1094.529" data-end="1097.14">minus sign present there's more to two's</span> <span data-start="1097.14" data-end="1098.58">complement but that's the important bit</span> <span data-start="1098.58" data-end="1102.9">for this demo so in this case the most</span> <span data-start="1102.9" data-end="1106.95">significant bit is bit 7 and if bit 7</span> <span data-start="1106.95" data-end="1110.73">gives us back a 0 then it is positive</span> <span data-start="1110.73" data-end="1113.159">and if it's 7 is 1 then we have a</span> <span data-start="1113.159" data-end="1116.73">negative number ok so let's start with</span> <span data-start="1116.73" data-end="1123.57">we need to read out Z MSB so if we look</span> <span data-start="1123.57" data-end="1126.57">back at the registers here this one it</span> <span data-start="1126.57" data-end="1128.88">says out z the most significant bits are</span> <span data-start="1128.88" data-end="1132.87">located at 0 X 0 5 so so far so good</span> <span data-start="1132.87" data-end="1134.97">we'll go we've got the same stuff up</span> <span data-start="1134.97" data-end="1136.59">here now we're looking at different</span> <span data-start="1136.59" data-end="1138.6">register to read we only need the one</span> <span data-start="1138.6" data-end="1141.48">register and within an interval of one</span> <span data-start="1141.48" data-end="1143.429">second we're going to ask it for that</span> <span data-start="1143.429" data-end="1150.419">register ok and usually I'd like to do a</span> <span data-start="1150.419" data-end="1153.149">demo here that shows you the importance</span> <span data-start="1153.149" data-end="1157.59">of reading the datasheet if I ran this</span> <span data-start="1157.59" data-end="1160.38">as it is I would get this repeating</span> <span data-start="1160.38" data-end="1162.51">value over here of 94 no matter how I</span> <span data-start="1162.51" data-end="1163.83">move this around whether it flip it</span> <span data-start="1163.83" data-end="1165.51">upside down or not</span> <span data-start="1165.51" data-end="1167.399">and that is because I didn't read the</span> <span data-start="1167.399" data-end="1170.279">part where it says oh the system is in a</span> <span data-start="1170.279" data-end="1171.96">low power mode when you turn it on so</span> <span data-start="1171.96" data-end="1173.279">you actually have to tell it to start</span> <span data-start="1173.279" data-end="1174.63">reading data for it to start reading</span> <span data-start="1174.63" data-end="1177.09">data read the datasheet that's the moral</span> <span data-start="1177.09" data-end="1180.51">we'll skip to it and all you have to do</span> <span data-start="1180.51" data-end="1182.22">there is you get this diagram that says</span> <span data-start="1182.22" data-end="1184.08">go to the control register and set the</span> <span data-start="1184.08" data-end="1188.429">active bit to one of course and so you</span> <span data-start="1188.429" data-end="1190.71">go google around in the or a search</span> <span data-start="1190.71" data-end="1191.97">around in the datasheet and you find</span> <span data-start="1191.97" data-end="1193.38">this thing called the control register</span> <span data-start="1193.38" data-end="1197.94">and set the active bit to one so let's</span> <span data-start="1197.94" data-end="1200.64">go ahead and do that so we've got the</span> <span data-start="1200.64" data-end="1202.35">same stuff we had before right that</span> <span data-start="1202.35" data-end="1204.419">active interval address route to read</span> <span data-start="1204.419" data-end="1206.52">but before that we're gonna do this set</span> <span data-start="1206.52" data-end="1209.399">active where we send the buffer that</span> <span data-start="1209.399" data-end="1214.15">says of these 8 bits set the last one</span> <span data-start="1214.15" data-end="1218.74">to be one great zealot good you look</span> <span data-start="1218.74" data-end="1231.02">good great</span> <span data-start="1231.03" data-end="1234.07">so what we're expecting right now and</span> </p>
<p><span data-start="1234.07" data-end="1235.27">I'll take these off we don't need them</span> <span data-start="1235.27" data-end="1235.75">anymore</span> <span data-start="1235.75" data-end="1237.97">what we're expecting right now is that</span> <span data-start="1237.97" data-end="1241.78">if I take this device and I have it one</span> <span data-start="1241.78" data-end="1244.96">way and then I move it another way we're</span> <span data-start="1244.96" data-end="1246.67">gonna get different data coming out oh</span> <span data-start="1246.67" data-end="1250.21">and if we go back to the console here</span> <span data-start="1250.21" data-end="1252.31">you can see that in fact data looks</span> <span data-start="1252.31" data-end="1254.17">different if I've got upside or if I've</span> <span data-start="1254.17" data-end="1255.43">got it right side up it looks pretty</span> <span data-start="1255.43" data-end="1257.17">similar over here I flip it over</span> <span data-start="1257.17" data-end="1259.45">something different is happening so</span> <span data-start="1259.45" data-end="1264.01">that's good what is that what is that</span> <span data-start="1264.01" data-end="1267.01">number so the system's awake we're</span> <span data-start="1267.01" data-end="1273.07">getting data what we haven't done is</span> <span data-start="1273.07" data-end="1276.39">interpreted the 8 bits that we get back</span> <span data-start="1276.39" data-end="1278.74">for just this first bit what we're</span> <span data-start="1278.74" data-end="1280.63">seeing right now is the number created</span> <span data-start="1280.63" data-end="1282.94">if you interpret the for the top eight</span> <span data-start="1282.94" data-end="1287.11">most significant bits as a number which</span> <span data-start="1287.11" data-end="1290.08">turns into a hex value which is the same</span> <span data-start="1290.08" data-end="1292.9">as it yeah don't worry about it what we</span> <span data-start="1292.9" data-end="1294.58">need to do is isolate whether or not</span> <span data-start="1294.58" data-end="1299.41">this first bit is a 0 or a 1 and we're</span> <span data-start="1299.41" data-end="1301.48">gonna do some sort of weird trick here</span> <span data-start="1301.48" data-end="1304.84">where we need to find out if the number</span> <span data-start="1304.84" data-end="1310.66">that we get back is bigger than 0 1 1 1</span> <span data-start="1310.66" data-end="1312.55">1 1 11 because anything bigger than that</span> <span data-start="1312.55" data-end="1314.83">is gonna have to have a 1 in the most</span> <span data-start="1314.83" data-end="1318.76">significant digit you asked me about</span> <span data-start="1318.76" data-end="1320.53">this later if it's confusing to you this</span> <span data-start="1320.53" data-end="1325.03">was like a weird mental trick for me but</span> <span data-start="1325.03" data-end="1327.52">basically that's isolating whether this</span> <span data-start="1327.52" data-end="1333.01">is a 0 or a 1 and so we'll be able to</span> <span data-start="1333.01" data-end="1335.23">print out if it is a 1 here then we know</span> <span data-start="1335.23" data-end="1336.88">it's negative and if it's a 0 here we</span> <span data-start="1336.88" data-end="1350.63">know it's positive so t2 run oh 7</span> </p>
<p><span data-start="1350.64" data-end="1354.43">I'd like to encourage you again if I I</span> <span data-start="1354.43" data-end="1356.26">think I might actually have time to take</span> <span data-start="1356.26" data-end="1358.11">questions at the end here which is great</span> <span data-start="1358.11" data-end="1360.79">so please if I have confused you here</span> <span data-start="1360.79" data-end="1362.29">please raise your hand and let me know</span> <span data-start="1362.29" data-end="1365.11">so we're getting a result and this says</span> <span data-start="1365.11" data-end="1377.23">positive right-side up and yeah cool so</span> <span data-start="1377.23" data-end="1381.16">it works and I'm hoping that last bit</span> <span data-start="1381.16" data-end="1388.77">wasn't terribly mystifying but we've got</span> <span data-start="1388.77" data-end="1391.72">basically the problem solved here if we</span> <span data-start="1391.72" data-end="1393.16">want to tell whether it's right side up</span> <span data-start="1393.16" data-end="1396.43">or upside down without using a built in</span> <span data-start="1396.43" data-end="1399.85">API so that's just the very start of it</span> <span data-start="1399.85" data-end="1402.76">right so what I've done with this this</span> <span data-start="1402.76" data-end="1407.68">is the Excel Mme 84 module on node it's</span> <span data-start="1407.68" data-end="1409.45">got more functions than this you can</span> <span data-start="1409.45" data-end="1411.97">tell it how fast you want to do it you</span> <span data-start="1411.97" data-end="1413.38">can take all these different register</span> <span data-start="1413.38" data-end="1415.03">descriptions and break them out into the</span> </p>
<p><span data-start="1415.03" data-end="1416.83">JavaScript software they're all like</span> <span data-start="1416.83" data-end="1419.23">part of the node API there's just</span> <span data-start="1419.23" data-end="1420.88">endless stuff that you can do once</span> <span data-start="1420.88" data-end="1422.62">you've gotten your basic information out</span> <span data-start="1422.62" data-end="1427.03">of it but that's all I'm gonna do up</span> <span data-start="1427.03" data-end="1429.7">here on stage and I hope if you want to</span> <span data-start="1429.7" data-end="1432.61">come to the workshop tomorrow I hope you</span> <span data-start="1432.61" data-end="1433.78">can come up with some interesting</span> <span data-start="1433.78" data-end="1436.09">interpretations we've got sensors that</span> <span data-start="1436.09" data-end="1437.5">aren't on pretty breakout boards like</span> <span data-start="1437.5" data-end="1440.86">this so you can learn how to do alcohol</span> <span data-start="1440.86" data-end="1443.26">sensing and load force and all those</span> <span data-start="1443.26" data-end="1445.03">type of stuff that we actually don't</span> <span data-start="1445.03" data-end="1446.8">have any node modules for us you'll be</span> <span data-start="1446.8" data-end="1453.73">inventing it that's all my demo if you'd</span> <span data-start="1453.73" data-end="1455.23">like to look at these slides I actually</span> <span data-start="1455.23" data-end="1458.74">have a few other demos that I didn't</span> <span data-start="1458.74" data-end="1462.31">show today I showed these ones and if</span> <span data-start="1462.31" data-end="1464.23">you want to look at a slower step</span> <span data-start="1464.23" data-end="1465.7">through these other ones are available</span> <span data-start="1465.7" data-end="1468.1">to you and you can find my slides if you</span> <span data-start="1468.1" data-end="1471.45">go to github free whole Singapore demos</span> <span data-start="1471.45" data-end="1474.49">oh and I have a book that's recently out</span> <span data-start="1474.49" data-end="1476.2">if you'd like to get into it it's not</span> <span data-start="1476.2" data-end="1477.639">just tehsil it's all sorts</span> <span data-start="1477.639" data-end="1481.029">different boards does anybody have</span> <span data-start="1481.029" data-end="1485.619">questions there's no way I explained it</span> <span data-start="1485.619" data-end="1490.059">that well yeah</span> <span data-start="1490.059" data-end="1498.879">oh do we have a microphone over here so</span> <span data-start="1498.879" data-end="1501.219">maybe for the last part when you're</span> <span data-start="1501.219" data-end="1503.799">compared is off-site that is up or done</span> <span data-start="1503.799" data-end="1508.269">you can just shift the bits seven-digit</span> <span data-start="1508.269" data-end="1509.95">just check the most significant</span> <span data-start="1509.95" data-end="1513.249">significant bit it's a mental area is</span> <span data-start="1513.249" data-end="1515.619">easier to understand that than comparing</span> <span data-start="1515.619" data-end="1517.989">with where the binary number</span> <span data-start="1517.989" data-end="1520.539">you understand why me yeah you're right</span> <span data-start="1520.539" data-end="1522.099">so it depends on what kind of mental</span> <span data-start="1522.099" data-end="1525.039">aerobics are easier for you he was</span> <span data-start="1525.039" data-end="1527.649">suggesting that instead of comparing</span> <span data-start="1527.649" data-end="1530.709">this 0 1 1 1 1 1 number I could just</span> <span data-start="1530.709" data-end="1532.539">shift the bits down in order to just get</span> <span data-start="1532.539" data-end="1534.369">rid of these extra numbers that I don't</span> <span data-start="1534.369" data-end="1538.389">care about yeah for me this was easier</span> <span data-start="1538.389" data-end="1540.729">for you it might be it might be easier</span> <span data-start="1540.729" data-end="1543.19">to do it a different way and that's kind</span> <span data-start="1543.19" data-end="1545.969">of what's fun is if you start with</span> <span data-start="1545.969" data-end="1548.859">looking up sensors online you have just</span> <span data-start="1548.859" data-end="1551.44">a ton of freedom to to mess around and</span> <span data-start="1551.44" data-end="1553.179">decide what implementation you would</span> <span data-start="1553.179" data-end="1557.829">like a little bit more time if you have</span> <span data-start="1557.829" data-end="1564.969">another pressing question you left</span> <span data-start="1564.969" data-end="1567.489">everybody speechless well alright then</span> </p>
<p><span data-start="1567.489" data-end="1569.409">I'll expect all of you to make me a</span> <span data-start="1569.409" data-end="1570.579">firmware thing tomorrow</span> <span data-start="1570.579" data-end="1572.859">go and meet Kelsey afterwards right and</span> <span data-start="1572.859" data-end="1574.479">maybe take a look at the hard way</span> <span data-start="1574.479" data-end="1579.19">yourself — all right give a round of</span> <span data-start="1579.19" data-end="1580.75">applause to Cassie</span> <span data-start="1580.75" data-end="1582.19">[Music]</span> </p>
</section>