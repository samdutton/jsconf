<section>
<p><span data-start="0.02" data-end="3.51">everyone super stoked to be here I am</span> <span data-start="3.51" data-end="5.22">very happy to be back in the Pacific</span> <span data-start="5.22" data-end="8.7">Northwest I'm from Vancouver and I've</span> <span data-start="8.7" data-end="9.96">been in San Francisco and it's been</span> <span data-start="9.96" data-end="13.17">pretty smoky lately so we're going to</span> <span data-start="13.17" data-end="15.75">basically write a bunch of code day it</span> <span data-start="15.75" data-end="17.81">whoops I might just do that in node</span> <span data-start="17.81" data-end="19.71">anybody know what happens when you do</span> <span data-start="19.71" data-end="23.519">this it's pretty funny well let's say I</span> <span data-start="23.519" data-end="26.849">just want to see it's like it's a</span> <span data-start="26.849" data-end="30.359">terrible type of whoops I wanted to see</span> <span data-start="30.359" data-end="35.16">if my screens readable it seems to be so</span> </p>
<p><span data-start="35.16" data-end="38.82">Java scripts not so great at math we're</span> <span data-start="38.82" data-end="39.93">not gonna talk about that say we're</span> <span data-start="39.93" data-end="42.09">gonna talk about functions is anyone in</span> <span data-start="42.09" data-end="45.21">here deploying AWS lambda into</span> <span data-start="45.21" data-end="48.42">production today okay</span> <span data-start="48.42" data-end="53.66">quite a few right on so I'm down with</span> <span data-start="53.66" data-end="55.71">making this little interactive so you</span> <span data-start="55.71" data-end="58.17">can yell at me what's the number one</span> <span data-start="58.17" data-end="63.059">problem right now is serverless cold</span> <span data-start="63.059" data-end="68.34">start cold starts one anything else any</span> <span data-start="68.34" data-end="71.58">code okay all right those are those are</span> <span data-start="71.58" data-end="73.32">pretty good I we're gonna touch on both</span> <span data-start="73.32" data-end="75.99">those I I would postulate the actual</span> <span data-start="75.99" data-end="77.4">problem with services nobody cares</span> <span data-start="77.4" data-end="82.08">nobody cares so you can deploy a static</span> <span data-start="82.08" data-end="84.659">website today to just about you know the</span> <span data-start="84.659" data-end="86.67">entire Internet in a few seconds it'll</span> <span data-start="86.67" data-end="88.68">be available to just about anybody in</span> <span data-start="88.68" data-end="90.81">about 10 milliseconds you just github</span> <span data-start="90.81" data-end="92.4">pages you could use an epiphyte could</span> <span data-start="92.4" data-end="98.579">use surge and then the backend you know</span> <span data-start="98.579" data-end="102.24">nobody cares we we do these things and</span> <span data-start="102.24" data-end="104.85">and you know there's just there's</span> <span data-start="104.85" data-end="106.649">there's no real motivation for this and</span> </p>
<p><span data-start="106.649" data-end="108.21">I think a lot of people are getting into</span> <span data-start="108.21" data-end="110.25">the service world but they're wondering</span> <span data-start="110.25" data-end="114.09">why they're supposed to care and so my</span> <span data-start="114.09" data-end="116.369">job today is gonna be to try and</span> <span data-start="116.369" data-end="117.979">demonstrate to you why you might care</span> <span data-start="117.979" data-end="121.74">and I'm gonna do this in probably the</span> <span data-start="121.74" data-end="124.02">most in advisable way possible in a live</span> <span data-start="124.02" data-end="128.19">code everything so this might go really</span> <span data-start="128.19" data-end="131.489">wrong let's just hope the demo gremlins</span> <span data-start="131.489" data-end="132.11">are on mice</span> <span data-start="132.11" data-end="138.29">so guess kaj yes I can't see that and</span> <span data-start="138.29" data-end="140.38">not think commonjs</span> </p>
<p><span data-start="140.38" data-end="143">I'm gonna touch what's called a dark</span> <span data-start="143" data-end="145.82">file so this is how I'm building</span> <span data-start="145.82" data-end="149">serverless apps and the idea of an arc</span> <span data-start="149" data-end="150.65">file is that it's a manifest format a</span> <span data-start="150.65" data-end="151.94">lot of these service frameworks are</span> <span data-start="151.94" data-end="156.22">using Y amel and I'm not down with that</span> <span data-start="156.22" data-end="160.13">so we're just gonna do something else so</span> <span data-start="160.13" data-end="161.47">I'm using this project architect</span> <span data-start="161.47" data-end="163.55">architect which is this rock</span> </p>
<p><span data-start="163.55" data-end="165.44">I've been polishing for about two years</span> <span data-start="165.44" data-end="168.06">now</span> <span data-start="168.07" data-end="171.35">we're reaching into the Internet to grab</span> <span data-start="171.35" data-end="174.74">it from NPM and I know one of you right</span> <span data-start="174.74" data-end="177.62">now thinks I should be using yarn I know</span> <span data-start="177.62" data-end="181.55">it's okay if we over soon</span> <span data-start="181.55" data-end="185.959">I almost installed this great not bad</span> <span data-start="185.959" data-end="187.97">tuner eleven packages I love to reuse of</span> <span data-start="187.97" data-end="190.94">that so we've got this you know empty</span> <span data-start="190.94" data-end="193.12">node project without too much going on</span> <span data-start="193.12" data-end="196.17">oops</span> <span data-start="196.18" data-end="199.79">there's my arc file and there's nothing</span> <span data-start="199.79" data-end="201.019">in here because I've been dying yet so</span> <span data-start="201.019" data-end="203.9">the syntax arc is pretty simple you</span> <span data-start="203.9" data-end="205.73">define an app which would be a namespace</span> <span data-start="205.73" data-end="209.36">so I'm just gonna do CJ s and then you</span> <span data-start="209.36" data-end="211.55">can define routes and these are gonna</span> <span data-start="211.55" data-end="214.79">turn into individual lambda functions so</span> <span data-start="214.79" data-end="217.01">let's do that we'll just do one route</span> <span data-start="217.01" data-end="219.41">for now and I'm just gonna create this</span> <span data-start="219.41" data-end="224.78">locally so node six I believe shipped</span> <span data-start="224.78" data-end="227.78">this tool called NP x and NP x is pretty</span> <span data-start="227.78" data-end="229.13">wonderful because it lets you run</span> <span data-start="229.13" data-end="231.08">binaries local to your projects so</span> <span data-start="231.08" data-end="232.64">instead of installing like a global</span> <span data-start="232.64" data-end="233.959">binary and having it all over your</span> <span data-start="233.959" data-end="236.15">system and not being able to deal with</span> <span data-start="236.15" data-end="240.11">it you you you can just use MPX and run</span> <span data-start="240.11" data-end="244.31">these these local binaries whoa so I'm</span> <span data-start="244.31" data-end="247.1">just gonna not open my node modules it's</span> <span data-start="247.1" data-end="250.48">a bad idea so when I ran that generate</span> <span data-start="250.48" data-end="253.269">that create local command on this file</span> <span data-start="253.269" data-end="256.01">it kind of mirrors the file system where</span> </p>
<p><span data-start="256.01" data-end="258.41">I've get this HTTP thing and I've got</span> <span data-start="258.41" data-end="260.69">this function right here I'm sorry this</span> <span data-start="260.69" data-end="261.57">is</span> <span data-start="261.57" data-end="266.2">so let's just think this a bit smaller</span> <span data-start="266.21" data-end="271.73">okay so this function just says hello</span> <span data-start="271.73" data-end="277.56">Cascadia and I'm gonna start a local</span> <span data-start="277.56" data-end="281.51">sandbox and we'll take a look at that</span> <span data-start="281.51" data-end="283.26">great okay</span> <span data-start="283.26" data-end="285.36">so we're running one function locally no</span> <span data-start="285.36" data-end="288.18">big deal let's add another function just</span> <span data-start="288.18" data-end="290.36">to make this a little more interesting</span> <span data-start="290.36" data-end="297.63">so we'll go into the arc file and we'll</span> <span data-start="297.63" data-end="300.35">just do a get food</span> <span data-start="300.35" data-end="307.8">px great local my terminal is not super</span> <span data-start="307.8" data-end="310.08">stoked on this resolution so it looks a</span> <span data-start="310.08" data-end="313.77">bit funky that's okay</span> <span data-start="313.77" data-end="318.81">and we'll run the sandbox again great</span> <span data-start="318.81" data-end="322.93">oops</span> <span data-start="322.94" data-end="325.77">foo see hello world it's kind of what</span> <span data-start="325.77" data-end="328.11">you would expect okay so working locally</span> <span data-start="328.11" data-end="333.54">is a thing but really we want to work in</span> <span data-start="333.54" data-end="336.57">the cloud so npx create local tells</span> <span data-start="336.57" data-end="340.2">architect to build that thing to your</span> <span data-start="340.2" data-end="341.97">local machine with an in-memory database</span> <span data-start="341.97" data-end="344.49">so you don't have to have an internet</span> <span data-start="344.49" data-end="347.16">connection or an Amazon account to to</span> <span data-start="347.16" data-end="350.76">prototype npx create by itself will</span> <span data-start="350.76" data-end="355.169">generate two API gateway instances two</span> </p>
<p><span data-start="355.169" data-end="358.919">DynamoDB tables in this case for lambda</span> <span data-start="358.919" data-end="361.65">functions and it will deploy the whole</span> <span data-start="361.65" data-end="363.09">thing and then wire it up with an IM</span> <span data-start="363.09" data-end="366">role the reason we do two of everything</span> <span data-start="366" data-end="367.26">is because we want to have staging and</span> <span data-start="367.26" data-end="368.55">production environments out of the box</span> <span data-start="368.55" data-end="371.789">so this isn't something that you can</span> <span data-start="371.789" data-end="375.93">really opt out of if we're building</span> <span data-start="375.93" data-end="378.18">software today we want these isolated</span> <span data-start="378.18" data-end="380.669">spots where we can stage our deployments</span> <span data-start="380.669" data-end="383.88">through a development process a lot of</span> <span data-start="383.88" data-end="385.59">other systems that are out there kind of</span> <span data-start="385.59" data-end="389.099">make you do this yourself you inevitably</span> <span data-start="389.099" data-end="390.69">don't quite do a great job of it</span> <span data-start="390.69" data-end="393.03">it means systems are not quite the same</span> <span data-start="393.03" data-end="394.68">you end up having it</span> <span data-start="394.68" data-end="396.12">list when you're deploying to anything</span> <span data-start="396.12" data-end="397.38">because you might have to do something</span> <span data-start="397.38" data-end="399.539">manually and your environments not being</span> <span data-start="399.539" data-end="401.13">the same means that you have tough time</span> <span data-start="401.13" data-end="402.6">reproducing bugs if you have a hard time</span> <span data-start="402.6" data-end="404.25">reproducing bugs and you definitely have</span> <span data-start="404.25" data-end="407.639">a hard time resolving them so this part</span> <span data-start="407.639" data-end="410.389">takes like a minute</span> <span data-start="410.389" data-end="413.58">but there we go we're live and this is a</span> <span data-start="413.58" data-end="417.419">lambda function deployed at this pretty</span> </p>
<p><span data-start="417.419" data-end="422.97">URL ooh and if we look fou should be</span> <span data-start="422.97" data-end="425.46">live with that hello world so not too</span> <span data-start="425.46" data-end="427.58">bad that took about two minutes</span> <span data-start="427.58" data-end="430.65">let's get iterating on this because</span> <span data-start="430.65" data-end="433.05">we're running out of time so maybe I</span> <span data-start="433.05" data-end="436.41">want to you know play with the session</span> <span data-start="436.41" data-end="440.31">let's say so we're gonna add a route</span> <span data-start="440.31" data-end="444.02">called post count and I'm gonna go into</span> <span data-start="444.02" data-end="449.52">my index module I'm gonna add a form</span> <span data-start="449.52" data-end="456.04">I'll leave this here</span> <span data-start="456.05" data-end="459.44">I'm just gonna be that guy and totally</span> <span data-start="459.44" data-end="463.789">make a messy thing here so we'll post a</span> <span data-start="463.789" data-end="466.819">count yeah</span> <span data-start="466.819" data-end="470.27">totally that guy it's okay</span> <span data-start="470.27" data-end="474.44">it's a demo a lot of button type equals</span> <span data-start="474.44" data-end="481.37">submit and we're gonna add a method to</span> <span data-start="481.37" data-end="487.52">that great so that will post to a route</span> <span data-start="487.52" data-end="491.33">called count and we added count here but</span> <span data-start="491.33" data-end="495.4">we have a generator yet so I could</span> <span data-start="495.4" data-end="497.81">generate this live right now into the</span> <span data-start="497.81" data-end="500.12">actual lambda functions server thing</span> <span data-start="500.12" data-end="501.56">that we've deployed the API gateway</span> <span data-start="501.56" data-end="503.75">thing but we'll just do this locally for</span> <span data-start="503.75" data-end="505.43">now so the create functions in dem if it</span> <span data-start="505.43" data-end="507.199">is a fancy way of saying it can be run</span> <span data-start="507.199" data-end="508.909">and rerun over and over again it's not</span> <span data-start="508.909" data-end="510.289">gonna clobber anything it only creates</span> <span data-start="510.289" data-end="513.229">stuff if it doesn't already exist so</span> <span data-start="513.229" data-end="515.719">that's pretty quick we got that actually</span> <span data-start="515.719" data-end="519.079">let's take a look boot up our sandbox</span> <span data-start="519.079" data-end="521.209">again you notice that sandbox starts</span> <span data-start="521.209" data-end="525.589">super fast that's what you want no</span> <span data-start="525.589" data-end="528.26">waiting for builds great we have a</span> <span data-start="528.26" data-end="531.74">button if we click it we go to this</span> <span data-start="531.74" data-end="534.079">place called count Jesus not so</span> <span data-start="534.079" data-end="537.8">interesting so let's go take a look at</span> <span data-start="537.8" data-end="541.85">that count function you'll notice these</span> <span data-start="541.85" data-end="544.37">functions so far don't have any</span> <span data-start="544.37" data-end="549.7">dependencies they're just functions</span> <span data-start="549.7" data-end="554.24">which is kind of nice so what we want to</span> <span data-start="554.24" data-end="558.17">do here is actually redirect so that's a</span> <span data-start="558.17" data-end="561.649">status code of 302 and for a location</span> <span data-start="561.649" data-end="566.779">we'll just go home oh god I love the new</span> <span data-start="566.779" data-end="574.269">keyboard these Macs</span> <span data-start="574.279" data-end="578.399">we'll pop back over here oh my god this</span> <span data-start="578.399" data-end="583.62">keyboard okay</span> <span data-start="583.62" data-end="586.29">and that probably redirected but I</span> <span data-start="586.29" data-end="590.779">didn't see it because I'm old</span> <span data-start="590.779" data-end="595.529">let's see it'll pop up the network yay</span> <span data-start="595.529" data-end="597.81">so we're getting a 302 redirect and then</span> <span data-start="597.81" data-end="599.76">we're coming back home that itself is</span> <span data-start="599.76" data-end="601.98">not so exciting let's let's start</span> <span data-start="601.98" data-end="604.08">playing with State so one of the</span> <span data-start="604.08" data-end="605.48">problems of lambda functions is that</span> <span data-start="605.48" data-end="607.89">they're totally stateless by nature it's</span> <span data-start="607.89" data-end="609.209">not really so much a problem as it's a</span> <span data-start="609.209" data-end="611.76">feature but at some point when you're</span> <span data-start="611.76" data-end="612.87">building an application you're gonna</span> <span data-start="612.87" data-end="614.43">need a session state so we're gonna want</span> <span data-start="614.43" data-end="617.399">to get one of those we bundle a couple</span> <span data-start="617.399" data-end="620.779">of helper functions for this purpose</span> <span data-start="620.779" data-end="624.54">their architect functions payload is</span> <span data-start="624.54" data-end="627.27">small for this by the way so if I wanted</span> <span data-start="627.27" data-end="630.589">to get some state here I could do like</span> <span data-start="630.589" data-end="637.25">it's a weight arc that HTTP session read</span> <span data-start="637.25" data-end="640.08">we can log it here just to take a look</span> <span data-start="640.08" data-end="645.779">at it and I'm gonna say session duck</span> <span data-start="645.779" data-end="654.029">count equals count or zero plus 1 and</span> <span data-start="654.029" data-end="657.959">then we redirect back home and then back</span> <span data-start="657.959" data-end="665.22">on that home Handler and get index oh my</span> <span data-start="665.22" data-end="668.209">god it's keyboard</span> <span data-start="668.209" data-end="670.879">how many times a day do I have to say</span> <span data-start="670.879" data-end="676.73">that before I buy the surface book it's</span> <span data-start="676.73" data-end="682.16">getting closer every day okay I'm</span> <span data-start="682.16" data-end="684.92">digging this new Microsoft so same</span> <span data-start="684.92" data-end="688.399">pattern gonna pop open post count just</span> <span data-start="688.399" data-end="691.129">steal that line a code I know this is</span> <span data-start="691.129" data-end="695.48">pretty messy so close you so this is</span> <span data-start="695.48" data-end="697.699">gonna read that session and it's gonna</span> <span data-start="697.699" data-end="699.019">look for well actually you know what</span> <span data-start="699.019" data-end="702.769">let's just be super weirdos and let's</span> <span data-start="702.769" data-end="707.569">just dump the whole thing out and this</span> <span data-start="707.569" data-end="708.98">is like one of my favorite debugging</span> <span data-start="708.98" data-end="712.309">techniques let's just dump the whole</span> <span data-start="712.309" data-end="715.759">request now we'll dump the session let's</span> <span data-start="715.759" data-end="726.519">do both we can do both okay</span> </p>
<p><span data-start="726.529" data-end="729.499">I got a typo in here somewhere no</span> <span data-start="729.499" data-end="731.779">actually I just have bad syntax</span> <span data-start="731.779" data-end="734.389">highlighting good</span> <span data-start="734.389" data-end="736.85">okay so when we redirect it's gonna come</span> <span data-start="736.85" data-end="737.809">back and it's just going to dump a</span> <span data-start="737.809" data-end="739.999">session it's not gonna do anything else</span> <span data-start="739.999" data-end="744.799">whoops so let's sandbox this so we can</span> <span data-start="744.799" data-end="747.29">see the login a little cleaner great</span> <span data-start="747.29" data-end="752.05">oops</span> <span data-start="752.06" data-end="758.85">and session doesn't have anyone yet oh I</span> <span data-start="758.85" data-end="762">did something wrong you can see my</span> <span data-start="762" data-end="763.86">session state is not persisting cuz my</span> </p>
<p><span data-start="763.86" data-end="766.649">ID is changing sweet you gotta love it</span> <span data-start="766.649" data-end="768.42">when the demo gods come and get you</span> <span data-start="768.42" data-end="771.8">this totally worked like an hour ago</span> <span data-start="771.8" data-end="775.38">okay we're gonna do some live debugging</span> <span data-start="775.38" data-end="779.85">here I know what it is some this is like</span> <span data-start="779.85" data-end="782.1">when I lose my keys the only way I can</span> <span data-start="782.1" data-end="784.74">find them is if I tell my wife I lost my</span> <span data-start="784.74" data-end="788.1">keys and then I'm like oh yeah I know</span> <span data-start="788.1" data-end="793.529">where it is so I assigned this session</span> <span data-start="793.529" data-end="797.459">here but I didn't save it alright so I</span> <span data-start="797.459" data-end="800.36">what I want to do here is get a cookie</span> <span data-start="800.36" data-end="804.36">and I'm gonna say wait are HTTP that</span> <span data-start="804.36" data-end="808.17">session got right session and then I'm</span> <span data-start="808.17" data-end="810.209">gonna write that cookie onto the request</span> <span data-start="810.209" data-end="813.81">that was the missing piece helps to</span> <span data-start="813.81" data-end="815.97">persist things if you want to see things</span> <span data-start="815.97" data-end="822.9">persisted okay</span> <span data-start="822.91" data-end="826.15">and there we go you can see down there</span> <span data-start="826.15" data-end="831.82">our count is incremented Hey so that's</span> <span data-start="831.82" data-end="833.32">local though that's not very exciting</span> <span data-start="833.32" data-end="835.75">like let's let's deploy this thing so I</span> <span data-start="835.75" data-end="837.64">didn't create all these routes yet so</span> <span data-start="837.64" data-end="839.38">we're gonna run this again without the</span> <span data-start="839.38" data-end="841.12">local flag and it's gonna deploy it to</span> </p>
<p><span data-start="841.12" data-end="844.36">Amazon and we can we can check it out</span> <span data-start="844.36" data-end="849.71">there to see see how we feel about that</span> <span data-start="849.72" data-end="852.13">you'd think Amazon would be fast at</span> <span data-start="852.13" data-end="859.6">Amazon kidding yeah Amazon's actually</span> <span data-start="859.6" data-end="861.91">shockingly fast all the time what what</span> <span data-start="861.91" data-end="863.35">it's doing right now is it's walking</span> <span data-start="863.35" data-end="864.85">through that arc file and it's making</span> <span data-start="864.85" data-end="866.83">sure everything's in sync and it's</span> <span data-start="866.83" data-end="868.27">creating assets if they don't already</span> <span data-start="868.27" data-end="871">exist and so you know it takes a moment</span> <span data-start="871" data-end="872.23">because of looking at every single</span> <span data-start="872.23" data-end="874.03">resource in that arc phone and</span> <span data-start="874.03" data-end="877.42">generating those things twice once we're</span> <span data-start="877.42" data-end="879.22">staging once for production once you've</span> <span data-start="879.22" data-end="881.62">done that the deployments are actually</span> <span data-start="881.62" data-end="885.19">shockingly fast they these functions</span> <span data-start="885.19" data-end="887.44">because they're tiny little bits they</span> <span data-start="887.44" data-end="889.57">can be deployed in parallel which means</span> <span data-start="889.57" data-end="891.01">that if you have a whole bunch of</span> <span data-start="891.01" data-end="892.57">functions you're basically only rate</span> <span data-start="892.57" data-end="895.2">limited by whatever you're paying Amazon</span> <span data-start="895.2" data-end="901.81">so in theory it's infinite but you're</span> <span data-start="901.81" data-end="903.91">actually bound by how much room you have</span> <span data-start="903.91" data-end="908.92">on your credit card okay so that</span> <span data-start="908.92" data-end="914">deployed I Michael</span> <span data-start="914" data-end="918.81">oh that didn't deploy that generated so</span> <span data-start="918.81" data-end="920.61">we already generated that home rep but</span> <span data-start="920.61" data-end="921.81">we actually didn't deploy our local</span> <span data-start="921.81" data-end="927.3">changes yet so we'll run that and this</span> <span data-start="927.3" data-end="928.769">is a resolution thing usually that</span> <span data-start="928.769" data-end="931.26">progress bar looks actually that looked</span> <span data-start="931.26" data-end="935.1">kind of cool I'm here for it so if we</span> <span data-start="935.1" data-end="937.23">reload that exact same thing that we had</span> <span data-start="937.23" data-end="939.92">working locally is now running remotely</span> <span data-start="939.92" data-end="942.51">you can see what we get this whole big</span> <span data-start="942.51" data-end="946.05">whole request object and oh no it blew</span> <span data-start="946.05" data-end="948.209">up and I actually expected that to</span> <span data-start="948.209" data-end="952.22">happen so Amazon for whatever reason</span> <span data-start="952.22" data-end="955.529">when you deploy API gateway it appends</span> <span data-start="955.529" data-end="959.01">these these sort of funky URLs which is</span> <span data-start="959.01" data-end="961.26">annoying is you know you want to work at</span> <span data-start="961.26" data-end="963.72">the apex of your domain so the way to</span> <span data-start="963.72" data-end="967.2">fix that is to set up DNS another way to</span> <span data-start="967.2" data-end="969.779">fix that is to hack the URL so I'm just</span> <span data-start="969.779" data-end="981.51">going to do that real quick so you don't</span> <span data-start="981.51" data-end="984.42">need this function once you set up DNS</span> <span data-start="984.42" data-end="985.95">and setting up DNS honestly it just</span> <span data-start="985.95" data-end="990.75">takes like not long so I deployed three</span> <span data-start="990.75" data-end="992.49">functions there in four seconds which</span> <span data-start="992.49" data-end="994.41">was pretty okay you can you can</span> <span data-start="994.41" data-end="996">surgically deploy one function if you</span> <span data-start="996" data-end="998.82">want to and that was the post function I</span> <span data-start="998.82" data-end="1002.5">think so we'll just deploy that one</span> <span data-start="1002.5" data-end="1003.77">great</span> <span data-start="1003.77" data-end="1005.93">we've overwritten that function so we</span> <span data-start="1005.93" data-end="1013.51">should oh I know I</span> </p>
<p><span data-start="1013.51" data-end="1017.8">I have to fix that form as well it's the</span> <span data-start="1017.8" data-end="1020.35">fun of live coding you get to you get to</span> <span data-start="1020.35" data-end="1022.03">be along for the ride and watching me</span> <span data-start="1022.03" data-end="1027.03">flail this that's how you know it's real</span> <span data-start="1027.03" data-end="1032.339">all the mistakes okay so this URL is</span> <span data-start="1032.339" data-end="1039.94">ostensibly the problem is this reading</span> <span data-start="1039.94" data-end="1044.16">okay for you back there okay cool</span> <span data-start="1044.16" data-end="1047.32">your JavaScript devs where we're used to</span> <span data-start="1047.32" data-end="1057.22">a little bit messy syntax I love it well</span> <span data-start="1057.22" data-end="1059.86">just deploy the whole thing because who</span> <span data-start="1059.86" data-end="1062.49">cares it's like two seconds difference</span> <span data-start="1062.49" data-end="1065.46">great let's test that</span> <span data-start="1065.46" data-end="1071.33">well not -</span> <span data-start="1071.34" data-end="1075.72">okay state yay</span> <span data-start="1075.72" data-end="1084.21">and oh count of one Kenneth to sweet</span> <span data-start="1084.21" data-end="1088.86">nut that's cool let's deploy that to</span> <span data-start="1088.86" data-end="1095.13">production and this will just take that</span> <span data-start="1095.13" data-end="1097.41">same code and basically just pump it</span> <span data-start="1097.41" data-end="1099.36">straight into a fresh set of lambdas in</span> <span data-start="1099.36" data-end="1102.33">a fresh API gateway and these things are</span> <span data-start="1102.33" data-end="1103.8">entirely isolated from each other</span> <span data-start="1103.8" data-end="1105.09">they're not touching each other in any</span> <span data-start="1105.09" data-end="1107.19">way you'll notice that cold start was</span> <span data-start="1107.19" data-end="1110.07">non-existent so something that people</span> <span data-start="1110.07" data-end="1111.54">brought up earlier one of the problems</span> <span data-start="1111.54" data-end="1113.16">of these things the cold start cold</span> <span data-start="1113.16" data-end="1114.39">starts not a problem if you have lots of</span> <span data-start="1114.39" data-end="1115.92">small functions the key is to be under</span> <span data-start="1115.92" data-end="1118.44">five megabytes is this pretty common</span> <span data-start="1118.44" data-end="1119.61">knowledge now because I've been saying</span> <span data-start="1119.61" data-end="1128.79">it for four years okay so well we got a</span> <span data-start="1128.79" data-end="1130.02">few minutes I'm gonna cruise through</span> <span data-start="1130.02" data-end="1132.54">these last few slides I think you can</span> <span data-start="1132.54" data-end="1135.75">now maybe see that there are reasons to</span> <span data-start="1135.75" data-end="1138.72">possibly care about service the the</span> <span data-start="1138.72" data-end="1140.64">function is the key here and there's a</span> <span data-start="1140.64" data-end="1142.35">lot of things calling themselves service</span> <span data-start="1142.35" data-end="1145.86">today and that's fine they can do that</span> <span data-start="1145.86" data-end="1148.5">but if you really want to like see the</span> <span data-start="1148.5" data-end="1149.61">benefits of this type of architecture</span> <span data-start="1149.61" data-end="1151.65">lots of small functions is definitely</span> <span data-start="1151.65" data-end="1154.41">the way to go and one of the things sort</span> <span data-start="1154.41" data-end="1155.88">of big anti-patterns a lot of people</span> <span data-start="1155.88" data-end="1157.86">have been doing is it'll take a function</span> <span data-start="1157.86" data-end="1160.29">and they'll put an express webserver in</span> <span data-start="1160.29" data-end="1162.62">it and I'll deploy that one function and</span> <span data-start="1162.62" data-end="1164.79">it's a really bad idea</span> <span data-start="1164.79" data-end="1167.46">and I know because that's the first</span> <span data-start="1167.46" data-end="1170.31">thing I did with our startup and it</span> <span data-start="1170.31" data-end="1172.74">worked for quite a while but the moment</span> <span data-start="1172.74" data-end="1175.44">that you deploy an express webserver in</span> <span data-start="1175.44" data-end="1177.87">one function the very first moment is</span> <span data-start="1177.87" data-end="1180.15">the very fastest that thing will ever be</span> <span data-start="1180.15" data-end="1181.5">because you're just gonna keep adding</span> <span data-start="1181.5" data-end="1182.73">code to that thing it's gonna get bigger</span> <span data-start="1182.73" data-end="1184.8">and bigger and slower and slower so the</span> <span data-start="1184.8" data-end="1186.93">key here is to break it up in lots of</span> <span data-start="1186.93" data-end="1190.05">small functions which I think you get so</span> <span data-start="1190.05" data-end="1192.48">it's cool LEM does have a lot of nice</span> <span data-start="1192.48" data-end="1195.39">characteristics people call this only</span> <span data-start="1195.39" data-end="1197.04">pay for what you use a hundred percent</span> <span data-start="1197.04" data-end="1200.22">utilization I don't know why we call it</span> <span data-start="1200.22" data-end="1202.56">that just call it the only paper we use</span> <span data-start="1202.56" data-end="1205.28">and and by the way what do you pay</span> <span data-start="1205.28" data-end="1209.26">well 1 million executions is free and</span> <span data-start="1209.26" data-end="1211.73">then it's like a penny for every million</span> <span data-start="1211.73" data-end="1215.36">executions after that and so it's not</span> <span data-start="1215.36" data-end="1220.37">free but it's very affordable lambdas</span> <span data-start="1220.37" data-end="1222.71">have a way better security model they're</span> <span data-start="1222.71" data-end="1224.54">locked down by nature they only execute</span> <span data-start="1224.54" data-end="1225.98">for a hundred millisecond increments</span> <span data-start="1225.98" data-end="1227.51">when they go away there's no ports to</span> <span data-start="1227.51" data-end="1230.42">scan you control the dependency packages</span> <span data-start="1230.42" data-end="1231.53">that they go and then they go away</span> <span data-start="1231.53" data-end="1235.01">they're stateless so each function can</span> <span data-start="1235.01" data-end="1237.02">also be independently configured so with</span> <span data-start="1237.02" data-end="1238.43">a monolith if you're setting it up</span> <span data-start="1238.43" data-end="1241.34">properly with i.m rules you're gonna try</span> <span data-start="1241.34" data-end="1243.17">and have lease privilege which if it's a</span> <span data-start="1243.17" data-end="1245.6">model at least privilege will be you can</span> <span data-start="1245.6" data-end="1247.91">do everything with a lambda function you</span> <span data-start="1247.91" data-end="1249.77">can lock that thing down very discreetly</span> <span data-start="1249.77" data-end="1251.87">so get request can only read that kind</span> <span data-start="1251.87" data-end="1255.5">of thing the big thing is that we're</span> <span data-start="1255.5" data-end="1257.69">only focusing on business value so a lot</span> <span data-start="1257.69" data-end="1259.43">of time gets spent on infrastructure</span> </p>
<p><span data-start="1259.43" data-end="1261.08">I don't know that this crowd cares about</span> <span data-start="1261.08" data-end="1262.37">that as much but I know the big</span> <span data-start="1262.37" data-end="1266.03">enterprises do so to me fast our</span> <span data-start="1266.03" data-end="1267.86">functions are lambdas or whatever we</span> <span data-start="1267.86" data-end="1268.55">want to call them these are</span> <span data-start="1268.55" data-end="1269.18">best-in-class</span> <span data-start="1269.18" data-end="1270.62">they've got fixed costs have got better</span> <span data-start="1270.62" data-end="1271.97">security and you just get faster</span> <span data-start="1271.97" data-end="1273.53">iterations as you can you could see</span> <span data-start="1273.53" data-end="1277.79">these things are so fast to deploy so we</span> <span data-start="1277.79" data-end="1281.99">have a roughly 150 lambda web app and</span> <span data-start="1281.99" data-end="1285.16">our deployment time is about 40 seconds</span> <span data-start="1285.16" data-end="1287.21">which is pretty amazing</span> <span data-start="1287.21" data-end="1289.25">so you can deploy these things in a few</span> <span data-start="1289.25" data-end="1290.78">seconds but you can also deploy them all</span> <span data-start="1290.78" data-end="1292.64">in parallel you can deploy them</span> <span data-start="1292.64" data-end="1294.59">surgically and this means that you get</span> <span data-start="1294.59" data-end="1296.33">more iterations and if you get more</span> <span data-start="1296.33" data-end="1297.59">iterations and you probably have a</span> <span data-start="1297.59" data-end="1299.95">better chance of fixing that bug or</span> <span data-start="1299.95" data-end="1303.98">finding product market fit or you know</span> <span data-start="1303.98" data-end="1306.77">building that next feature and speed is</span> <span data-start="1306.77" data-end="1308.48">kind of the key so you're your author</span> <span data-start="1308.48" data-end="1310.64">time is faster your run time is faster</span> <span data-start="1310.64" data-end="1314.03">you're your bug resolution is better it</span> <span data-start="1314.03" data-end="1315.85">seems like it's pretty worth exploring I</span> <span data-start="1315.85" data-end="1317.78">also want to put out there that we</span> <span data-start="1317.78" data-end="1318.95">should be a little more excellent to</span> <span data-start="1318.95" data-end="1320.51">each other there's a lot of people</span> <span data-start="1320.51" data-end="1321.71">saying that they have the right way to</span> <span data-start="1321.71" data-end="1324.26">do this and I don't know that that is</span> <span data-start="1324.26" data-end="1327.62">true but what I do know is the back end</span> <span data-start="1327.62" data-end="1328.33">is now yours</span> <span data-start="1328.33" data-end="1330.74">you can build all that stuff and you</span> <span data-start="1330.74" data-end="1332.21">really don't need these servers or</span> <span data-start="1332.21" data-end="1334.79">communities or any of it which is a</span> <span data-start="1334.79" data-end="1336.32">pretty big deal so if you want to get</span> <span data-start="1336.32" data-end="1337.37">involved in this</span> <span data-start="1337.37" data-end="1338.9">we'd like pull requests that is</span> <span data-start="1338.9" data-end="1341.18">definitely contributing but bug reports</span> <span data-start="1341.18" data-end="1343.79">are actually like please please report</span> <span data-start="1343.79" data-end="1345.47">bugs I had someone that met just a week</span> <span data-start="1345.47" data-end="1347.48">ago and they were like oh I had a bug</span> <span data-start="1347.48" data-end="1349.4">but I didn't want to say anything I was</span> <span data-start="1349.4" data-end="1352.64">like no it's like the worst like please</span> <span data-start="1352.64" data-end="1355.13">tell me feature requests are also</span> <span data-start="1355.13" data-end="1356.84">appreciated I don't have all the same</span> <span data-start="1356.84" data-end="1358.91">use cases as you so please let me know</span> <span data-start="1358.91" data-end="1361.81">and share what you're learning and</span> <span data-start="1361.81" data-end="1364.06">thanks very much</span> </p>
</section>