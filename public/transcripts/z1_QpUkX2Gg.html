<section>
<p><span data-start="17.2" data-end="20.02">hello everyone my name is Mario Gonzalez</span> <span data-start="20.02" data-end="22.119">I'm a senior applications developer at</span> <span data-start="22.119" data-end="24.46">Ogilvy & Mather in New York and I'm</span> <span data-start="24.46" data-end="25.9">gonna be talking about real time</span> <span data-start="25.9" data-end="31.02">multiplayer games with nodejs for the</span> <span data-start="31.02" data-end="34.09">Ogilvie's 2011 holiday card we decided</span> <span data-start="34.09" data-end="37.989">to make an html5 game and having heard a</span> <span data-start="37.989" data-end="40.41">lot about nodejs and socket IO slightly</span> <span data-start="40.41" data-end="42.4">we decided that we should create a</span> <span data-start="42.4" data-end="45.519">multiplayer game the game is currently</span> <span data-start="45.519" data-end="48.129">located at hall of the Holliday 2010</span> <span data-start="48.129" data-end="50.979">dal-gu be calm and I'm going to briefly</span> <span data-start="50.979" data-end="52.93">just try to play it and see how it looks</span> <span data-start="52.93" data-end="62.559">and let's see how that goes so so this</span> <span data-start="62.559" data-end="64.449">is the game I'm gonna just jump in</span> <span data-start="64.449" data-end="67.63">select a character that guy's fine and</span> <span data-start="67.63" data-end="69.52">then I'm gonna open up a new tab and do</span> <span data-start="69.52" data-end="72.729">the same thing give me one second in</span> <span data-start="72.729" data-end="78.01">here oh there you go somebody else is</span> <span data-start="78.01" data-end="84.34">playing right now so so this is an</span> <span data-start="84.34" data-end="87.1">example of a game that we created the</span> <span data-start="87.1" data-end="89.02">game runs on canvas and then the</span> <span data-start="89.02" data-end="92.109">multiplayer engine is created using</span> <span data-start="92.109" data-end="95.469">node.js and WebSockets on the browser</span> <span data-start="95.469" data-end="97.81">side so I'm going to talk a little bit</span> <span data-start="97.81" data-end="99.189">about how we went about creating this</span> <span data-start="99.189" data-end="101.32">game some problems that we faced and a</span> <span data-start="101.32" data-end="103.329">framework that we created recently which</span> <span data-start="103.329" data-end="105.64">abstracted the difficult networking</span> <span data-start="105.64" data-end="107.77">stuff out of this game and we've</span> <span data-start="107.77" data-end="109.24">released it onto github earlier this</span> <span data-start="109.24" data-end="118.529">week and goodbye</span> <span data-start="118.539" data-end="121.219">so the benefits of writing your game</span> <span data-start="121.219" data-end="123.38">with JavaScript and nodejs one of them</span> <span data-start="123.38" data-end="124.85">is that javascript is actually a really</span> <span data-start="124.85" data-end="126.799">great language for writing games has all</span> <span data-start="126.799" data-end="128.39">of the tools that you need in order to</span> <span data-start="128.39" data-end="131.629">write a game concisely and you can play</span> <span data-start="131.629" data-end="132.92">around with a lot of different things</span> <span data-start="132.92" data-end="134.299">because you're not held back by</span> <span data-start="134.299" data-end="136.61">allocating of allocation of memory and</span> <span data-start="136.61" data-end="137.87">you don't have to worry about the stack</span> <span data-start="137.87" data-end="140.9">versus the heap nodejs and v8 are</span> <span data-start="140.9" data-end="143">extremely fast in our game the node</span> <span data-start="143" data-end="145.879">process was using only one thread and it</span> <span data-start="145.879" data-end="149.17">runs out about three to four CPU usage</span> <span data-start="149.17" data-end="151.61">while running eight simultaneous games</span> <span data-start="151.61" data-end="153.65">each with their own collision collision</span> <span data-start="153.65" data-end="156.98">engine instance because decline in the</span> <span data-start="156.98" data-end="158.69">server are both running in JavaScript</span> <span data-start="158.69" data-end="161.629">you get a great interoperability between</span> <span data-start="161.629" data-end="163.099">the client and the server there's no</span> <span data-start="163.099" data-end="165.04">translation layer that you need to apply</span> <span data-start="165.04" data-end="168.29">because the the world state existed in</span> <span data-start="168.29" data-end="169.989">some sort of data on the server side and</span> <span data-start="169.989" data-end="171.95">existing and different data on the</span> <span data-start="171.95" data-end="174.079">supplied side and you need to translate</span> <span data-start="174.079" data-end="175.25">that when they communicate with each</span> <span data-start="175.25" data-end="178.67">other and an example this is for example</span> <span data-start="178.67" data-end="180.5">if you have a vector math utility class</span> <span data-start="180.5" data-end="182.569">you can just outright use that class in</span> <span data-start="182.569" data-end="186.319">both sides of the game this is an</span> <span data-start="186.319" data-end="187.97">example of the interoperability between</span> <span data-start="187.97" data-end="190.28">the client and the server this is this</span> <span data-start="190.28" data-end="192.65">represents the net channel message class</span> <span data-start="192.65" data-end="194.389">which actually is just a value object</span> <span data-start="194.389" data-end="196.76">that contains some data but we didn't</span> <span data-start="196.76" data-end="199.099">have to write anything to turn that into</span> <span data-start="199.099" data-end="200.51">something the server understands and</span> <span data-start="200.51" data-end="202.099">then turn it back to the what the client</span> <span data-start="202.099" data-end="204.889">understands it's all JavaScript so</span> <span data-start="204.889" data-end="207.049">that's pretty cool that's right a game</span> <span data-start="207.049" data-end="209.389">we had a couple of problems that arose</span> <span data-start="209.389" data-end="210.739">but the one that I'm gonna be talking</span> <span data-start="210.739" data-end="213.5">about today is the problem that we face</span> <span data-start="213.5" data-end="215.209">that's faced by all real-time</span> <span data-start="215.209" data-end="216.889">multiplayer games and that is dealing</span> <span data-start="216.889" data-end="220.609">with latency the initial naive approach</span> <span data-start="220.609" data-end="224.389">is to package up the clients information</span> <span data-start="224.389" data-end="226.7">and then send that to the server and</span> <span data-start="226.7" data-end="229.669">then the server will send that same</span> <span data-start="229.669" data-end="231.56">message off to all of the other clients</span> <span data-start="231.56" data-end="233.66">and that works fine in a system where</span> <span data-start="233.66" data-end="235.13">you have trusted clients such as a</span> <span data-start="235.13" data-end="237.53">military simulation but in a real game</span> <span data-start="237.53" data-end="238.97">on the Internet</span> <span data-start="238.97" data-end="240.95">that approach starts to break down and</span> <span data-start="240.95" data-end="244.7">the reason why is that the main problem</span> <span data-start="244.7" data-end="246.53">with this approach is that we can no we</span> <span data-start="246.53" data-end="248.239">cannot trust users to provide us with</span> <span data-start="248.239" data-end="248.99">correct and from</span> <span data-start="248.99" data-end="251.33">about their players current state if you</span> <span data-start="251.33" data-end="252.83">ask a nefarious user and he enters a</span> <span data-start="252.83" data-end="255.05">game where his projectile is he'll tell</span> <span data-start="255.05" data-end="256.459">you it's everywhere and what his health</span> <span data-start="256.459" data-end="259.13">is is always number dot max value so</span> <span data-start="259.13" data-end="260.93">simple workaround is to store the state</span> <span data-start="260.93" data-end="262.19">on the server and play the game</span> <span data-start="262.19" data-end="265.19">simultaneously on a server as well as</span> <span data-start="265.19" data-end="267.44">playing it locally the problem with that</span> <span data-start="267.44" data-end="270.8">is that the players local position as</span> <span data-start="270.8" data-end="273.8">shown on the left side circle and then</span> <span data-start="273.8" data-end="275.3">the players blue position is where the</span> <span data-start="275.3" data-end="277.28">player is actually located and as you</span> <span data-start="277.28" data-end="279.05">can see your projectile on your screen</span> <span data-start="279.05" data-end="281.33">will appear to have hit this player but</span> <span data-start="281.33" data-end="282.41">it will go right through them because</span> </p>
<p><span data-start="282.41" data-end="284.45">I'm a server that players no longer at</span> <span data-start="284.45" data-end="288.2">that position this is actually obviously</span> <span data-start="288.2" data-end="290.15">a very large problem because it happens</span> <span data-start="290.15" data-end="292.31">in Reverse you might be moving and then</span> <span data-start="292.31" data-end="293.9">a projectile will kill you and you</span> <span data-start="293.9" data-end="296.33">clearly dodged it but it's because what</span> <span data-start="296.33" data-end="298.82">you see on your local version of the</span> <span data-start="298.82" data-end="301.04">game does not match what is going on on</span> <span data-start="301.04" data-end="303.65">a server right now another problem with</span> <span data-start="303.65" data-end="305.96">this approach is sometimes referred to</span> <span data-start="305.96" data-end="309.23">as the bouncing ball problem and that is</span> <span data-start="309.23" data-end="312.77">that if as we receive new position and</span> <span data-start="312.77" data-end="314.72">new information regarding the velocity</span> <span data-start="314.72" data-end="317.06">of the entity from the server we draw</span> <span data-start="317.06" data-end="319.58">that entity with this information and it</span> <span data-start="319.58" data-end="321.29">causes abrupt shifts in motion along the</span> <span data-start="321.29" data-end="324.38">project the projectiles path in this</span> <span data-start="324.38" data-end="326.32">chart the dotted lines represent</span> <span data-start="326.32" data-end="329.36">discrete information received from the</span> <span data-start="329.36" data-end="331.4">server at regular intervals and if we</span> <span data-start="331.4" data-end="333.56">draw the players path using the</span> <span data-start="333.56" data-end="335.54">instantaneous velocity at that given</span> <span data-start="335.54" data-end="338.39">point the path takes very abrupt sharp</span> <span data-start="338.39" data-end="341.03">edges and it's incorrect and incorrect</span> <span data-start="341.03" data-end="342.41">until it receives new more up-to-date</span> <span data-start="342.41" data-end="344.57">information at which point that red line</span> <span data-start="344.57" data-end="346.88">will now move along that path at that</span> <span data-start="346.88" data-end="348.62">velocity and will continue to be</span> <span data-start="348.62" data-end="351.05">incorrect and incorrect and then switch</span> <span data-start="351.05" data-end="352.64">again when it receives new information</span> <span data-start="352.64" data-end="355.16">and you get a very zigzag style motion</span> <span data-start="355.16" data-end="357.29">that appears on a screen the blue line</span> <span data-start="357.29" data-end="362.969">represents the player's actual movement</span> <span data-start="362.979" data-end="367.669">see of course this time is measured in</span> <span data-start="367.669" data-end="370.27">milliseconds so a common solution is to</span> <span data-start="370.27" data-end="372.71">decrease the sampling rate on the server</span> <span data-start="372.71" data-end="375.38">side so that players send receive more</span> <span data-start="375.38" data-end="377.06">information about their world state and</span> <span data-start="377.06" data-end="379.49">that same chart will happen again but it</span> <span data-start="379.49" data-end="381.59">happens that such small incremental</span> <span data-start="381.59" data-end="383.449">spaces that it's hard to visually notice</span> <span data-start="383.449" data-end="386.87">the problem this is only an even more</span> <span data-start="386.87" data-end="388.82">naive solution because most of the time</span> <span data-start="388.82" data-end="390.199">you cannot have that kind of message</span> <span data-start="390.199" data-end="392.69">throughput to all clients at all times</span> <span data-start="392.69" data-end="396.71">unless they're all on OC threes so we</span> <span data-start="396.71" data-end="398.75">took a different approach this is</span> <span data-start="398.75" data-end="400.22">actually quite common approach in</span> <span data-start="400.22" data-end="403.19">multiplayer games like on consoles or</span> <span data-start="403.19" data-end="404.81">the source engine comes to mind</span> <span data-start="404.81" data-end="409.66">originally it came from quake world and</span> <span data-start="409.66" data-end="413.09">so I decided to look around and see how</span> <span data-start="413.09" data-end="414.02">other people have been doing this</span> <span data-start="414.02" data-end="416.84">because creating multiplayer games real</span> <span data-start="416.84" data-end="418.31">time multiplayer games has been being</span> <span data-start="418.31" data-end="420.08">done for a while and I found some</span> <span data-start="420.08" data-end="421.61">interesting information</span> <span data-start="421.61" data-end="423.259">the quake world source code is open</span> <span data-start="423.259" data-end="425.33">source along with several the other</span> <span data-start="425.33" data-end="427.669">quake games and valve also has some</span> <span data-start="427.669" data-end="429.919">white papers regarding networking in</span> <span data-start="429.919" data-end="435.289">real time games and in this approach the</span> <span data-start="435.289" data-end="437.93">single authoritative server is prospered</span> <span data-start="437.93" data-end="440.21">this represents one tick on the client</span> <span data-start="440.21" data-end="442.039">side and server side in this approach</span> <span data-start="442.039" data-end="444.139">this prop the server will process inputs</span> <span data-start="444.139" data-end="446.389">move the objects update the game</span> <span data-start="446.389" data-end="449.27">simulation create a single snapshot and</span> <span data-start="449.27" data-end="451.52">then let its server than a channel do</span> <span data-start="451.52" data-end="452.99">what it needs to do I'll explain what</span> <span data-start="452.99" data-end="455.18">that means later on the client-side it's</span> <span data-start="455.18" data-end="456.74">actually only responsible for two things</span> <span data-start="456.74" data-end="459.02">one of them is to sample the user</span> <span data-start="459.02" data-end="461.449">intervals at a discreet rate and then</span> <span data-start="461.449" data-end="465.32">render the world the benefit of this</span> <span data-start="465.32" data-end="467.12">approach is that you can have a really</span> <span data-start="467.12" data-end="468.77">really really interesting game and</span> <span data-start="468.77" data-end="471.71">because all of that logic and all in the</span> <span data-start="471.71" data-end="473.33">entire simulation happens on the server</span> <span data-start="473.33" data-end="476.87">you can really go apeshit with if with</span> <span data-start="476.87" data-end="478.729">what your game can do you can have</span> <span data-start="478.729" data-end="480.38">physics on top of other things and</span> <span data-start="480.38" data-end="482.3">various things and every single browser</span> <span data-start="482.3" data-end="484.19">that's playing the game sees the same</span> <span data-start="484.19" data-end="485.75">thing regardless of whether their</span> <span data-start="485.75" data-end="488.09">browser can keep up a two-dimensional</span> <span data-start="488.09" data-end="489.62">rigid body physics simulation and</span> <span data-start="489.62" data-end="491.63">display a canvas element with 100</span> <span data-start="491.63" data-end="493.13">objects it doesn't matter because</span> <span data-start="493.13" data-end="495.08">they're only in charge of displaying the</span> <span data-start="495.08" data-end="496.22">object</span> <span data-start="496.22" data-end="498.41">and everyone's simulation also MAGIX it</span> <span data-start="498.41" data-end="501.32">kind of lines up our nervous system is</span> <span data-start="501.32" data-end="503.12">designed to work around latency we're</span> <span data-start="503.12" data-end="505.07">very good at that so if we can apply a</span> <span data-start="505.07" data-end="508.19">smooth content constant latin c to an</span> <span data-start="508.19" data-end="510.71">object's path human beings can adjust to</span> <span data-start="510.71" data-end="512.33">that very well</span> <span data-start="512.33" data-end="514.34">so the key piece of the puzzle where I</span> <span data-start="514.34" data-end="515.87">sort of started to have the Eureka</span> <span data-start="515.87" data-end="517.669">moment of this as I was going through</span> <span data-start="517.669" data-end="519.65">the valve source papers is that we</span> <span data-start="519.65" data-end="522.14">actually simply render all the clients</span> <span data-start="522.14" data-end="525.8">and milliseconds in the past so I'm just</span> <span data-start="525.8" data-end="527.75">gonna call that number 75 but it's just</span> <span data-start="527.75" data-end="530.99">an arbitrary number and and that's what</span> <span data-start="530.99" data-end="533.66">this is the current time</span> <span data-start="533.66" data-end="536.51">on the current time on the client side</span> <span data-start="536.51" data-end="539.36">is shown over here so we can say that</span> <span data-start="539.36" data-end="541.04">the current time is about ten point four</span> <span data-start="541.04" data-end="544.7">six seconds now we render the world at</span> <span data-start="544.7" data-end="547.64">ten point three two seconds those</span> <span data-start="547.64" data-end="550.91">triangles represent world snapshots that</span> <span data-start="550.91" data-end="552.62">we've received from a server so the</span> <span data-start="552.62" data-end="554.99">first thing that we do is we find the</span> <span data-start="554.99" data-end="556.91">value for the rendering time which is</span> <span data-start="556.91" data-end="560.3">the current time minus some number then</span> <span data-start="560.3" data-end="562.64">after that we loop through the existing</span> <span data-start="562.64" data-end="564.53">world snapshot updates that we have from</span> <span data-start="564.53" data-end="567.02">the server and we find two that we fall</span> <span data-start="567.02" data-end="569.09">in between and now that we have found</span> <span data-start="569.09" data-end="572.63">those two world snapshots using a simple</span> <span data-start="572.63" data-end="574.73">linear interpolation function we can</span> <span data-start="574.73" data-end="576.95">precisely place our object at its</span> <span data-start="576.95" data-end="579.47">position along that path another benefit</span> <span data-start="579.47" data-end="581.57">to this approach is that if one of those</span> <span data-start="581.57" data-end="584.66">packets were dropped for example if we</span> <span data-start="584.66" data-end="587.36">did not have packet 3 for two we could</span> <span data-start="587.36" data-end="589.25">still interpolate between packets three</span> <span data-start="589.25" data-end="590.72">for one and three for three</span> <span data-start="590.72" data-end="592.91">and the user will end up in their</span> <span data-start="592.91" data-end="595.79">correct location so it's actually a</span> <span data-start="595.79" data-end="597.77">pretty good protector against packet</span> <span data-start="597.77" data-end="599.3">loss and it actually assumes that</span> <span data-start="599.3" data-end="602.06">packets will be lost and the system can</span> <span data-start="602.06" data-end="608.3">bounce back from that so we decided that</span> <span data-start="608.3" data-end="610.19">this was a pretty interesting idea and</span> <span data-start="610.19" data-end="611.87">some of these concepts would help</span> </p>
<p><span data-start="611.87" data-end="614.63">JavaScript game developers so we</span> <span data-start="614.63" data-end="617">abstracted these concepts from our game</span> <span data-start="617" data-end="618.86">and we created a framework for them and</span> <span data-start="618.86" data-end="621.53">I'm gonna show you a demo now all right</span> <span data-start="621.53" data-end="632.56">so see</span> </p>
<p><span data-start="632.57" data-end="639.42">I'm gonna start the server and then open</span> <span data-start="639.42" data-end="650.04">up my browser and see</span> <span data-start="650.05" data-end="653.26">all right there we go</span> <span data-start="653.26" data-end="658.45">so this besides being pretty is actually</span> <span data-start="658.45" data-end="662.08">running is a hold on I cannot see my</span> <span data-start="662.08" data-end="668.41">screen this will have to do okay so this</span> <span data-start="668.41" data-end="670.899">actual simulation is running on the</span> <span data-start="670.899" data-end="672.76">server where's my little character</span> <span data-start="672.76" data-end="674.92">that's me as I'm moving around mice</span> <span data-start="674.92" data-end="676.839">keyboard those entities are being</span> <span data-start="676.839" data-end="679.029">controlled on the server so I'm gonna</span> <span data-start="679.029" data-end="680.8">try I'm having a little bit of computer</span> <span data-start="680.8" data-end="682.57">problems here but I'm gonna try to open</span> <span data-start="682.57" data-end="687.459">up this in a different tab so here we</span> <span data-start="687.459" data-end="692.92">have synchronized multiplayer activity</span> <span data-start="692.92" data-end="694.63">going on and see if I can make this guy</span> <span data-start="694.63" data-end="697.39">show up there and in the other large</span> <span data-start="697.39" data-end="698.89">circle is somewhere else on the screen I</span> <span data-start="698.89" data-end="702.459">can't really find them so the way that</span> <span data-start="702.459" data-end="704.829">the engine works is that everything that</span> <span data-start="704.829" data-end="706.329">you're seeing is actually happening on</span> <span data-start="706.329" data-end="708.37">the server and the server simply sends</span> <span data-start="708.37" data-end="712.029">world snapshots to all of the clients so</span> <span data-start="712.029" data-end="714.1">everyone is guaranteed to be in sync at</span> <span data-start="714.1" data-end="716.44">the same time it doesn't it does add a</span> <span data-start="716.44" data-end="718.57">little bit of latency towards your</span> <span data-start="718.57" data-end="720.79">movement by default because you're</span> <span data-start="720.79" data-end="722.86">always rendering and milliseconds back</span> <span data-start="722.86" data-end="724.93">in time but human beings are very good</span> <span data-start="724.93" data-end="726.25">at adapting to that it's better to</span> <span data-start="726.25" data-end="728.17">render a little bit behind in time and</span> <span data-start="728.17" data-end="730.029">adjust to that lag than it is to</span> <span data-start="730.029" data-end="732.54">constantly have abrupt changes in motion</span> <span data-start="732.54" data-end="736.66">and then the other benefit is because it</span> <span data-start="736.66" data-end="738.16">is running on the server and this is a</span> <span data-start="738.16" data-end="740.589">little bit of a cooler demo we can show</span> <span data-start="740.589" data-end="744.69">if I can find a house where's my mouse</span> <span data-start="744.69" data-end="753.17">okay</span> <span data-start="753.18" data-end="755.47">because it is running on the server I'm</span> <span data-start="755.47" data-end="757.81">going to fire up the other demo that I</span> <span data-start="757.81" data-end="761.92">have which is actually a box 2d</span> <span data-start="761.92" data-end="763.839">implementation that was ported to</span> </p>
<p><span data-start="763.839" data-end="765.37">JavaScript and it's actually really well</span> <span data-start="765.37" data-end="775.36">done and I'm gonna try to time these</span> <span data-start="775.36" data-end="776.74">because it looks really really cool in</span> <span data-start="776.74" data-end="778.15">the beginning so let's see if I can pull</span> <span data-start="778.15" data-end="788.84">that off</span> <span data-start="788.85" data-end="796.5">I didn't pull that off I can't sorry and</span> <span data-start="796.5" data-end="799.23">I can't find my mouse there you go</span> <span data-start="799.23" data-end="802.079">all right let's try it one more time I'm</span> <span data-start="802.079" data-end="807.329">just gonna drag this like this there you</span> <span data-start="807.329" data-end="810.569">go so this is an example of a box 2d</span> <span data-start="810.569" data-end="812.13">simulation that is being run on the</span> <span data-start="812.13" data-end="815.009">server and the clients are being told</span> <span data-start="815.009" data-end="817.199">where these objects are and they are</span> <span data-start="817.199" data-end="818.699">interpolating between any of the two</span> <span data-start="818.699" data-end="820.649">positions and this helps you get really</span> <span data-start="820.649" data-end="823.41">fluid motion the cool thing about that</span> <span data-start="823.41" data-end="826.23">is that I'm gonna join or try to join</span> <span data-start="826.23" data-end="829.38">with a different browser so here's an</span> <span data-start="829.38" data-end="834.269">instance of Firefox and I'm going to</span> <span data-start="834.269" data-end="835.949">join the same I'm gonna join this game</span> <span data-start="835.949" data-end="839.399">and now we have synchronized physics</span> <span data-start="839.399" data-end="841.56">across two different browser instances</span> <span data-start="841.56" data-end="844.23">that are playing the same game and it's</span> <span data-start="844.23" data-end="846.3">actually running at a pretty good</span> <span data-start="846.3" data-end="849.899">framerate in Firefox and pretty much the</span> <span data-start="849.899" data-end="852">same frame rate in Chrome and the</span> <span data-start="852" data-end="855.24">simulation is running on my computer and</span> <span data-start="855.24" data-end="855.81">nodejs</span> <span data-start="855.81" data-end="858.06">but I'm gonna also try to see if I can</span> <span data-start="858.06" data-end="861.24">get Safari to do this three browsers</span> <span data-start="861.24" data-end="862.529">might be a little bit too much for my</span> <span data-start="862.529" data-end="870.899">computer but we can give it a try there</span> <span data-start="870.899" data-end="873.54">you go so now we have all three main</span> <span data-start="873.54" data-end="876.089">modern browsers running the same physics</span> <span data-start="876.089" data-end="880.529">simulation there we go</span> <span data-start="880.529" data-end="883.11">cool thing is so here's some interaction</span> <span data-start="883.11" data-end="885.93">between I'm sending my information to</span> <span data-start="885.93" data-end="887.31">the server and then it's playing the</span> <span data-start="887.31" data-end="888.81">game I think my computer is kind of</span> <span data-start="888.81" data-end="893.61">gonna mess it up a little bit and then</span> <span data-start="893.61" data-end="896.16">that's just a demo of the box for the</span> <span data-start="896.16" data-end="897.99">implementation that is built in the</span> <span data-start="897.99" data-end="908.71">library</span> </p>
<p><span data-start="908.72" data-end="911.43">No</span> <span data-start="911.43" data-end="913.32">and then the last thing I'm sure I don't</span> <span data-start="913.32" data-end="915.24">know if I'm over on time but I wanted to</span> <span data-start="915.24" data-end="918.57">show that the small amount of code that</span> <span data-start="918.57" data-end="920.79">it takes to get something like that up</span> <span data-start="920.79" data-end="927.78">and running so for this for this demo I</span> <span data-start="927.78" data-end="930.96">have a I can never seem to find my mouse</span> <span data-start="930.96" data-end="936.84">on here so ignoring the framework I'm</span> <span data-start="936.84" data-end="940.2">going to show just these few files that</span> </p>
<p><span data-start="940.2" data-end="944.22">I have and basically the demo app is</span> <span data-start="944.22" data-end="947.85">just a namespace then I have some file</span> <span data-start="947.85" data-end="949.41">that has a couple of constants in there</span> <span data-start="949.41" data-end="951.96">for me so the main two points of entry</span> <span data-start="951.96" data-end="954.51">for using this library are the demo</span> <span data-start="954.51" data-end="956.79">client game which is what is the browser</span> <span data-start="956.79" data-end="959.76">will be this will display and a demo</span> <span data-start="959.76" data-end="961.35">server game this is where all your cool</span> <span data-start="961.35" data-end="963.84">stuff goes so the demo client game</span> <span data-start="963.84" data-end="965.85">doesn't really have too much to it it</span> <span data-start="965.85" data-end="968.28">has a set up view function real time</span> <span data-start="968.28" data-end="970.05">multiplayer nodejs is agnostic to</span> <span data-start="970.05" data-end="971.76">whatever view you would like to use so</span> <span data-start="971.76" data-end="974.49">it could be canvas or something else it</span> <span data-start="974.49" data-end="976.26">has a simple tick function which gets</span> <span data-start="976.26" data-end="978.63">called and it has this function which</span> <span data-start="978.63" data-end="981.66">once the engine detects a new entity it</span> <span data-start="981.66" data-end="983.79">will tell you hey create an entity from</span> <span data-start="983.79" data-end="985.8">this description that description has</span> <span data-start="985.8" data-end="987.69">some properties that are passed to it</span> <span data-start="987.69" data-end="990.21">from the server and then you can have</span> <span data-start="990.21" data-end="991.86">some callbacks for when connection</span> <span data-start="991.86" data-end="994.2">happens when it disconnects you don't</span> <span data-start="994.2" data-end="995.49">actually have to do anything with these</span> <span data-start="995.49" data-end="998.64">at this point and then the server game</span> <span data-start="998.64" data-end="1000.95">all that's going on here is I create a</span> <span data-start="1000.95" data-end="1002.39">new instance of the collision manager</span> <span data-start="1002.39" data-end="1004.66">this is just actually a very simple</span> <span data-start="1004.66" data-end="1007.01">radius based collision manager that I</span> <span data-start="1007.01" data-end="1009.23">created that does provide group masking</span> <span data-start="1009.23" data-end="1011.78">so that for example my projectiles don't</span> <span data-start="1011.78" data-end="1013.04">hit anyone elses on my team's</span> <span data-start="1013.04" data-end="1015.74">projectiles so it initializes that</span> <span data-start="1015.74" data-end="1018.17">creates a few entities and then calls</span> <span data-start="1018.17" data-end="1020.18">tick and then these are the callbacks</span> <span data-start="1020.18" data-end="1022.79">for the network so that's about it and</span> <span data-start="1022.79" data-end="1024.8">that that that amount of code will get</span> <span data-start="1024.8" data-end="1026.72">you running with the first demo the</span> <span data-start="1026.72" data-end="1029.51">box2d demo has a little bit more things</span> <span data-start="1029.51" data-end="1031.1">in it but they're all related to box 2d</span> <span data-start="1031.1" data-end="1035.24">and this framework is live on github as</span> <span data-start="1035.24" data-end="1036.89">of a few days ago</span> </p>
</section>