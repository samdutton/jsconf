<section>
<p><span data-start="3.07" data-end="5.81">[Applause]</span> <span data-start="5.81" data-end="8.01">well yeah thank you very much for this</span> <span data-start="8.01" data-end="9.9">kind introduction</span> <span data-start="9.9" data-end="12.809">so exactly this talk is called pre</span> <span data-start="12.809" data-end="15.059">connect prefetch preload and pre wats</span> <span data-start="15.059" data-end="17.22">an introduction to the resource ins and</span> <span data-start="17.22" data-end="19.439">I would like to talk about why web</span> <span data-start="19.439" data-end="21.689">performance matters at all in the first</span> <span data-start="21.689" data-end="23.46">place so why are we are we even thinking</span> <span data-start="23.46" data-end="26.16">about improving website speeds then I</span> <span data-start="26.16" data-end="29.099">would like to explore explore why some</span> <span data-start="29.099" data-end="32.84">websites load slowly and then go into</span> <span data-start="32.84" data-end="35.43">resource hints and how you can use them</span> <span data-start="35.43" data-end="38.25">to make your website load much faster</span> <span data-start="38.25" data-end="41.76">than they might do currently so why</span> <span data-start="41.76" data-end="43.829">should we care about web performance at</span> <span data-start="43.829" data-end="47.969">all the simple answer is because it has</span> <span data-start="47.969" data-end="50.28">shown to have a significant significant</span> <span data-start="50.28" data-end="53.19">effect on on business results so large</span> <span data-start="53.19" data-end="55.289">companies ran a lot of studies that</span> <span data-start="55.289" data-end="58.98">showed exactly this so I want to show</span> <span data-start="58.98" data-end="61.8">two of them Amazon allegedly once run a</span> <span data-start="61.8" data-end="63.539">study where they deliberately slowed the</span> <span data-start="63.539" data-end="65.97">websites down by only 100 milliseconds</span> <span data-start="65.97" data-end="69.18">and they already saw a drop in sales by</span> <span data-start="69.18" data-end="72.06">1% which is obviously kind of</span> <span data-start="72.06" data-end="73.95">significant when you are operating on a</span> <span data-start="73.95" data-end="77.61">scale as Amazon does and the second one</span> <span data-start="77.61" data-end="79.68">is from another large us-based company</span> <span data-start="79.68" data-end="81.99">there's called Google and they found out</span> <span data-start="81.99" data-end="85.799">that 53% of users will abandon a website</span> <span data-start="85.799" data-end="88.86">if it takes longer than 3 seconds to</span> <span data-start="88.86" data-end="91.02">load I'm apparently a bit more patient</span> <span data-start="91.02" data-end="92.49">because I often wait a bit longer but</span> <span data-start="92.49" data-end="96.329">this is what they have found out but I</span> <span data-start="96.329" data-end="99.15">think it's even more about something</span> <span data-start="99.15" data-end="101.04">more important than business it's also</span> <span data-start="101.04" data-end="103.799">about empathy because especially with</span> <span data-start="103.799" data-end="106.29">those that have to endure who or network</span> <span data-start="106.29" data-end="108.54">conditions then then we have and I think</span> <span data-start="108.54" data-end="112.68">we ought not to take anybody's time as</span> <span data-start="112.68" data-end="114.329">granted and we should not be wasting it</span> <span data-start="114.329" data-end="116.34">if we can do can do better and I think</span> <span data-start="116.34" data-end="119.04">we as web developers are the ones that</span> <span data-start="119.04" data-end="121.7">are in the position and maybe even</span> <span data-start="121.7" data-end="127.16">responsible to deliver fast websites I</span> <span data-start="127.16" data-end="130.739">would like to now to go to why websites</span> <span data-start="130.739" data-end="133.77">load slowly and in order to do that we</span> <span data-start="133.77" data-end="133.92">need</span> <span data-start="133.92" data-end="136.349">- no at first or talk about what</span> <span data-start="136.349" data-end="138.66">actually is a website so usually a</span> <span data-start="138.66" data-end="141.27">website is a small text documents that</span> <span data-start="141.27" data-end="143.61">contains references to other small</span> <span data-start="143.61" data-end="145.739">documents such as scripts or images or</span> </p>
<p><span data-start="145.739" data-end="147.569">CSS files that also need to be</span> <span data-start="147.569" data-end="149.73">downloaded in order for the website to</span> <span data-start="149.73" data-end="151.56">be useful at all and this is kind of</span> <span data-start="151.56" data-end="153.63">different — for example if you download</span> <span data-start="153.63" data-end="156.69">one large binary file for example if you</span> <span data-start="156.69" data-end="162.45">download download a video and in order</span> <span data-start="162.45" data-end="165.3">to to download a website you actually</span> <span data-start="165.3" data-end="167.97">have to send data right and if you think</span> <span data-start="167.97" data-end="171.6">about it that data don't get it it</span> <span data-start="171.6" data-end="173.34">doesn't get beams and has to travel and</span> <span data-start="173.34" data-end="175.56">I would like to give an example where</span> <span data-start="175.56" data-end="178.709">I'm in Germany and I will request a</span> <span data-start="178.709" data-end="182.1">website in New York so and if I do this</span> <span data-start="182.1" data-end="186.239">then there's the distance is roughly six</span> <span data-start="186.239" data-end="188.19">thousand 100 kilometres from Hamburg to</span> </p>
<p><span data-start="188.19" data-end="192.09">New York and then also 6130 kilometres</span> <span data-start="192.09" data-end="193.769">back because I also need to get to get</span> <span data-start="193.769" data-end="196.709">an answer right so and how fast can data</span> <span data-start="196.709" data-end="199.29">travel so there's this thing that is</span> <span data-start="199.29" data-end="201.12">called the speed of light and until now</span> <span data-start="201.12" data-end="203.34">we weren't we weren't able to do</span> <span data-start="203.34" data-end="205.709">anything that is faster than that so and</span> <span data-start="205.709" data-end="208.62">this is around about 300 million meters</span> <span data-start="208.62" data-end="212.19">per second but in reality data and fiber</span> <span data-start="212.19" data-end="215.25">cable travels travels in more like 200</span> <span data-start="215.25" data-end="218.549">million a million meters per second this</span> <span data-start="218.549" data-end="221.76">means for one data package to go to New</span> </p>
<p><span data-start="221.76" data-end="224.22">York and coming back to Hamburg it</span> <span data-start="224.22" data-end="228.84">already takes 62 milliseconds and this</span> <span data-start="228.84" data-end="231.69">is for only one single data package and</span> <span data-start="231.69" data-end="235.17">I would not like to to have a look on</span> <span data-start="235.17" data-end="237.299">what happens on the network when we are</span> <span data-start="237.299" data-end="239.45">requesting a website or when we are</span> <span data-start="239.45" data-end="241.769">connecting to a server so what do we</span> <span data-start="241.769" data-end="243.51">have to do and how many round trips this</span> <span data-start="243.51" data-end="246.66">this causes so the first thing we have</span> <span data-start="246.66" data-end="249.38">to do is we have to kind of find out</span> <span data-start="249.38" data-end="251.97">where we can or how we can connect to</span> <span data-start="251.97" data-end="253.799">the server and in order to do so we need</span> <span data-start="253.799" data-end="256.139">to ask domain name server for its IP</span> <span data-start="256.139" data-end="257.579">address so in this case I will just</span> <span data-start="257.579" data-end="260.34">answer again ask the DNS server hey DNS</span> <span data-start="260.34" data-end="262.44">server I would like to go to some domain</span> <span data-start="262.44" data-end="264.9">in this case it's def has two E and then</span> <span data-start="264.9" data-end="266.7">the DNS server will resolve that for me</span> <span data-start="266.7" data-end="267.75">and give me the I</span> </p>
<p><span data-start="267.75" data-end="270.18">Piedras back and this already has taken</span> <span data-start="270.18" data-end="275.34">60 62 milliseconds and then because HTTP</span> <span data-start="275.34" data-end="278.91">uses TCP as its transportation layer we</span> <span data-start="278.91" data-end="282.18">also have to open a TCP connection so</span> <span data-start="282.18" data-end="283.83">and in order to do that we send a</span> <span data-start="283.83" data-end="286.05">package and then we get as soon</span> <span data-start="286.05" data-end="287.61">synchronization and acknowledgement</span> <span data-start="287.61" data-end="290.64">package back which also adds another two</span> <span data-start="290.64" data-end="293.7">round-trips to open the connection where</span> <span data-start="293.7" data-end="297.63">we are now already at 120 124</span> <span data-start="297.63" data-end="301.16">milliseconds but now we are in the year</span> <span data-start="301.16" data-end="304.08">2018 and most websites are delivered</span> <span data-start="304.08" data-end="307.02">securely which means we also have to do</span> <span data-start="307.02" data-end="311.37">a TLS or SSL handshake which in itself</span> <span data-start="311.37" data-end="314.16">adds another two round-trips because we</span> <span data-start="314.16" data-end="316.53">have to kind of exchange information</span> <span data-start="316.53" data-end="318.45">about which cipher suits are supported</span> <span data-start="318.45" data-end="320.52">and then we need to exchange the keys</span> <span data-start="320.52" data-end="322.89">and also the certificate and then in the</span> <span data-start="322.89" data-end="325.35">end we can send the encrypted messages</span> <span data-start="325.35" data-end="327.54">and like I said this already this also</span> <span data-start="327.54" data-end="329.79">adds another two round-trips and now we</span> <span data-start="329.79" data-end="332.19">already eight 248 in milliseconds and</span> <span data-start="332.19" data-end="334.5">the best case conditions right so we</span> <span data-start="334.5" data-end="336.24">didn't even account for the DNS server</span> <span data-start="336.24" data-end="338.43">having to calculate the response or any</span> <span data-start="338.43" data-end="340.44">routers that take up some time and this</span> <span data-start="340.44" data-end="343.11">is a quarter of a second already and we</span> <span data-start="343.11" data-end="346.2">also neglected one major thing that most</span> <span data-start="346.2" data-end="348.99">or a lot of current network traffic goes</span> <span data-start="348.99" data-end="352.29">over mobile networks which by their</span> <span data-start="352.29" data-end="355.5">sheer nature are always add in a fixed</span> <span data-start="355.5" data-end="358.979">amount of latency to to each data that</span> <span data-start="358.979" data-end="360.87">is to each package that is going to be</span> <span data-start="360.87" data-end="363.18">sent so for example for a te this as</span> <span data-start="363.18" data-end="364.71">well as small it's only 70 milliseconds</span> <span data-start="364.71" data-end="367.979">but if you are on on 3G which is pretty</span> <span data-start="367.979" data-end="369.87">common and in most countries this is</span> <span data-start="369.87" data-end="372.66">already on already between 150</span> <span data-start="372.66" data-end="375.419">milliseconds or 400 milliseconds and on</span> <span data-start="375.419" data-end="377.88">2g you are basically lost because it's</span> <span data-start="377.88" data-end="380.91">almost one second for each request and</span> <span data-start="380.91" data-end="384.18">if you if you do the math then you can</span> <span data-start="384.18" data-end="387.54">add up for normal 3G connection to like</span> <span data-start="387.54" data-end="389.4">to open a connection to to a web server</span> <span data-start="389.4" data-end="392.61">it's already 1,000 milliseconds so one</span> <span data-start="392.61" data-end="394.77">second before any data is sent at all</span> <span data-start="394.77" data-end="397.5">and when I research this I was kind of</span> <span data-start="397.5" data-end="399.27">impression that cannot be cannot be true</span> <span data-start="399.27" data-end="401.729">because just seems way to match</span> <span data-start="401.729" data-end="404.879">but then I wanna run a test on a service</span> <span data-start="404.879" data-end="407.009">that is called webpagetest.org so if you</span> <span data-start="407.009" data-end="408.839">don't know it yet then please look it up</span> <span data-start="408.839" data-end="411.539">it's super awesome if you want to just</span> <span data-start="411.539" data-end="413.939">see how your website is performing it</span> <span data-start="413.939" data-end="415.68">has a lot of more features than only</span> <span data-start="415.68" data-end="416.879">this waterfall chart but this is the</span> <span data-start="416.879" data-end="419.189">waterfall chart in this case I requested</span> <span data-start="419.189" data-end="419.969">usa.gov</span> <span data-start="419.969" data-end="422.58">from a server in Frankfurt I think under</span> <span data-start="422.58" data-end="426.3">3G conditions and I covered the download</span> <span data-start="426.3" data-end="428.699">part so with this icon so what you could</span> <span data-start="428.699" data-end="431.61">see there is only what it takes to</span> <span data-start="431.61" data-end="433.62">connect to the website so it's DNS TCP</span> <span data-start="433.62" data-end="437.52">and TLS and it's already 1.4 or 1.3</span> <span data-start="437.52" data-end="440.249">seconds so it's actually it's actually</span> <span data-start="440.249" data-end="443.52">true so now that we opened the</span> <span data-start="443.52" data-end="445.83">connection we can happily start sending</span> <span data-start="445.83" data-end="448.289">data in full-speed right well of course</span> <span data-start="448.289" data-end="454.02">not doesn't work because TCP has a bunch</span> <span data-start="454.02" data-end="457.11">of algorithms in place that protect the</span> <span data-start="457.11" data-end="460.229">network from collapsing because you</span> <span data-start="460.229" data-end="461.849">cannot just send data if your recipient</span> <span data-start="461.849" data-end="463.74">does not be it's not able to handle the</span> <span data-start="463.74" data-end="465.719">data and then you would just congest the</span> <span data-start="465.719" data-end="467.939">entire network and it will break down so</span> <span data-start="467.939" data-end="473.219">and one-one-one algorithm is called tcp</span> <span data-start="473.219" data-end="475.709">slow-start and it works in the way that</span> <span data-start="475.709" data-end="478.62">when you start sending data it only does</span> <span data-start="478.62" data-end="480.06">it slowly so you have to send one</span> <span data-start="480.06" data-end="481.56">package and then you have to wait to get</span> <span data-start="481.56" data-end="483.36">one back before you can send even more</span> <span data-start="483.36" data-end="486.209">data and this slowly increases until you</span> <span data-start="486.209" data-end="488.52">at some point reach maximum maximum</span> <span data-start="488.52" data-end="491.879">speed and usually this amount of data is</span> <span data-start="491.879" data-end="494.039">14 kilobytes so if you happen to manage</span> <span data-start="494.039" data-end="496.469">to get your entire website into those 14</span> <span data-start="496.469" data-end="497.789">kilobytes then you have only one</span> <span data-start="497.789" data-end="499.62">additional one trip which would be</span> <span data-start="499.62" data-end="501.779">awesome but I don't know if anybody is</span> <span data-start="501.779" data-end="505.319">capable of doing that nowadays so yeah</span> <span data-start="505.319" data-end="508.319">and the thing is that when you're using</span> </p>
<p><span data-start="508.319" data-end="512.069">HTTP one and not HTTP two then you have</span> <span data-start="512.069" data-end="514.5">this tcp slow-start punishment so to</span> <span data-start="514.5" data-end="516.149">speak for each connection that you are</span> <span data-start="516.149" data-end="518.099">having so if you are downloading images</span> <span data-start="518.099" data-end="520.709">five images from the same host then</span> <span data-start="520.709" data-end="522.719">you're opening five connections and you</span> <span data-start="522.719" data-end="525.54">have to endure' tcp slow-start for each</span> <span data-start="525.54" data-end="528.449">of those connections and this leads to</span> <span data-start="528.449" data-end="531.269">to the following conclusion that usually</span> <span data-start="531.269" data-end="535.57">latency and not bandwidth causes slow</span> <span data-start="535.57" data-end="537.76">because in this example it didn't matter</span> <span data-start="537.76" data-end="541.6">much if I have 100 M it's 100 connection</span> <span data-start="541.6" data-end="544.6">or 50 m 8 or 10 or 1 gigabit because we</span> <span data-start="544.6" data-end="549.34">didn't send large data yet and engineers</span> <span data-start="549.34" data-end="551.59">over the years came up with a lot of</span> <span data-start="551.59" data-end="554.74">techniques to mitigate those issues and</span> <span data-start="554.74" data-end="557.17">to decrease latency so first of all</span> <span data-start="557.17" data-end="560.05">there is now HTTP to multiplexing which</span> <span data-start="560.05" data-end="563.38">allows you to reuse open TCP connections</span> <span data-start="563.38" data-end="565.6">so when you are downloading 5 images</span> <span data-start="565.6" data-end="567.34">from the same house then only one</span> <span data-start="567.34" data-end="569.14">connection will be used so you can</span> <span data-start="569.14" data-end="571.39">probably download the third fourth and</span> <span data-start="571.39" data-end="574.06">fifth image on our full speed and you</span> <span data-start="574.06" data-end="576.34">don't and you are not subject to TCP</span> <span data-start="576.34" data-end="579.22">slows at five times but only once then</span> <span data-start="579.22" data-end="581.37">there is content delivery networks which</span> <span data-start="581.37" data-end="583.9">basically try to move their servers</span> <span data-start="583.9" data-end="585.58">closer to the users location and</span> <span data-start="585.58" data-end="588.73">literally decreasing the distance data</span> <span data-start="588.73" data-end="591.88">has to travel and therefore reducing</span> <span data-start="591.88" data-end="595.6">latency and the third one is caching and</span> <span data-start="595.6" data-end="598.12">with caching you can kind of remove</span> <span data-start="598.12" data-end="599.89">bring the related sea down to almost</span> <span data-start="599.89" data-end="602.74">zero because once the file is in the</span> <span data-start="602.74" data-end="604.42">cache it will be just delivered from</span> <span data-start="604.42" data-end="607.36">either the disk or the memory the issue</span> <span data-start="607.36" data-end="609.7">was with with that is that it only works</span> <span data-start="609.7" data-end="611.65">for the second request because in order</span> <span data-start="611.65" data-end="613.12">to be able to serve it from the cache</span> <span data-start="613.12" data-end="615.46">you somehow need to to put it there and</span> <span data-start="615.46" data-end="618.46">that usually happens only when you when</span> <span data-start="618.46" data-end="620.17">you see it when you download it so and</span> <span data-start="620.17" data-end="623.26">this is where resource hints come into</span> <span data-start="623.26" data-end="627.45">play so resource ins a kind of a way of</span> <span data-start="627.45" data-end="630.34">predictive caching it gives you the</span> <span data-start="630.34" data-end="632.71">ability to point the browser to</span> <span data-start="632.71" data-end="635.47">resources such as scripts CSS files</span> <span data-start="635.47" data-end="637.84">documents images whatever you can think</span> <span data-start="637.84" data-end="640.57">about before the browser can even know</span> <span data-start="640.57" data-end="642.07">that it's going to need them either for</span> <span data-start="642.07" data-end="645.16">this same request or for a request that</span> <span data-start="645.16" data-end="647.4">might be the next one or even two</span> <span data-start="647.4" data-end="651.01">requests away and the best or one cool</span> <span data-start="651.01" data-end="652.63">thing about it that implementation is</span> <span data-start="652.63" data-end="655.51">also water is simple because usually you</span> <span data-start="655.51" data-end="657.79">can just inject a link tag into your</span> <span data-start="657.79" data-end="661.6">head and get going and I would now like</span> <span data-start="661.6" data-end="664.95">to go through all of them basically and</span> <span data-start="664.95" data-end="667.96">show what they can do for you and how</span> <span data-start="667.96" data-end="669.37">you can use the</span> <span data-start="669.37" data-end="672.37">some example so you can use them and I</span> <span data-start="672.37" data-end="674.5">would like to start with preconnect</span> <span data-start="674.5" data-end="677.02">because preconnect does all the things</span> <span data-start="677.02" data-end="679.87">that I just mentioned it resolves the</span> </p>
<p><span data-start="679.87" data-end="682.45">DNS it performs the TCP handshake and</span> <span data-start="682.45" data-end="685.96">also does the TLS setup and I would like</span> <span data-start="685.96" data-end="688.029">to give one concrete example for that</span> <span data-start="688.029" data-end="691.36">and this is web fun so who has weapons</span> <span data-start="691.36" data-end="694.44">on their website or worked on a website</span> <span data-start="694.44" data-end="698.47">that's most so I also created a website</span> <span data-start="698.47" data-end="703.57">I have this catch-up and I have an issue</span> <span data-start="703.57" data-end="705.1">I have an issue so I need this platform</span> <span data-start="705.1" data-end="707.02">because the website needs to be cute so</span> <span data-start="707.02" data-end="710.35">I can give most the kid the kid is a new</span> <span data-start="710.35" data-end="712.63">home but I also needed to be loading</span> <span data-start="712.63" data-end="714.61">fast because otherwise my conversion</span> <span data-start="714.61" data-end="718.33">will drop and I don't want that so this</span> <span data-start="718.33" data-end="720.279">is how my my hat looks like currently</span> <span data-start="720.279" data-end="722.95">and I have half the stylesheet</span> <span data-start="722.95" data-end="726.16">my personal style sheet but I also have</span> <span data-start="726.16" data-end="728.4">the Google web font style sheet and</span> <span data-start="728.4" data-end="730.51">maybe most of you already know but I'm</span> <span data-start="730.51" data-end="731.89">going to mention any way Google is</span> <span data-start="731.89" data-end="734.77">offering a rather popular web service</span> <span data-start="734.77" data-end="736.12">where you can download reference from</span> <span data-start="736.12" data-end="738.87">which is called Google web fonts and</span> <span data-start="738.87" data-end="742.99">here's the the web font style sheet so</span> <span data-start="742.99" data-end="745.42">my style sheet is rather simple it only</span> <span data-start="745.42" data-end="747.58">contains the font family in the flow</span> <span data-start="747.58" data-end="749.11">which is the web form that I'm going to</span> <span data-start="749.11" data-end="750.79">download and of course also the color</span> </p>
<p><span data-start="750.79" data-end="755.97">Fox here because CIA and branding and</span> <span data-start="755.97" data-end="758.86">this is the Google web font style sheet</span> <span data-start="758.86" data-end="760.81">and it's and it's important to know that</span> <span data-start="760.81" data-end="762.82">this is not the web font file itself</span> <span data-start="762.82" data-end="765.43">it's only the style sheet that</span> <span data-start="765.43" data-end="769.42">references that references the actual</span> <span data-start="769.42" data-end="770.92">web font and you can see here it's for</span> <span data-start="770.92" data-end="772.9">the name in the flow and then there's</span> <span data-start="772.9" data-end="775.99">the URL that points to to the web font</span> <span data-start="775.99" data-end="778.54">file I will come to that in a second</span> <span data-start="778.54" data-end="781.27">when I now open my web site this is how</span> <span data-start="781.27" data-end="784.24">the waterfall chart looks like and can</span> <span data-start="784.24" data-end="788.74">you even see that okay awesome and so at</span> <span data-start="788.74" data-end="790.12">first my website is downloaded so we I</span> <span data-start="790.12" data-end="792.76">added some annotations so first DNS and</span> <span data-start="792.76" data-end="794.529">then TCP TLS and then you see the actual</span> <span data-start="794.529" data-end="797.23">requests happening and once my web site</span> <span data-start="797.23" data-end="799.66">is downloaded the browser sees that I</span> <span data-start="799.66" data-end="801.91">have embedded my my stylesheet and also</span> <span data-start="801.91" data-end="802.71">the Google web fonts</span> <span data-start="802.71" data-end="804.899">and then it will download both both of</span> <span data-start="804.899" data-end="808.29">them in parallel and as you can see here</span> <span data-start="808.29" data-end="810.66">like at the bottom only after both have</span> <span data-start="810.66" data-end="812.19">been downloaded it will download the bed</span> <span data-start="812.19" data-end="815.52">front itself and why is that the case</span> <span data-start="815.52" data-end="818.61">so browsers usually tend to download as</span> <span data-start="818.61" data-end="821.61">little data as possible to not waste any</span> <span data-start="821.61" data-end="823.22">bandwidth so they are only downloading</span> <span data-start="823.22" data-end="825.81">for example background images or web</span> <span data-start="825.81" data-end="827.55">fonts when they are actually used on the</span> <span data-start="827.55" data-end="829.77">page and in order to know if they are</span> <span data-start="829.77" data-end="831.27">used in the page they have to download</span> <span data-start="831.27" data-end="833.04">all the style sheets and then also and</span> <span data-start="833.04" data-end="834.959">also the HTML and then apply the style</span> <span data-start="834.959" data-end="836.67">sheets and check the selectors and see</span> <span data-start="836.67" data-end="838.74">if those selectors match and then</span> <span data-start="838.74" data-end="840.69">download the images and reference or or</span> <span data-start="840.69" data-end="842.79">not and this is why they have to</span> <span data-start="842.79" data-end="844.86">download both of them only then will</span> <span data-start="844.86" data-end="847.68">download the actual headphones and as</span> <span data-start="847.68" data-end="849.54">you can all my might be able to see it</span> <span data-start="849.54" data-end="852.87">takes roughly 4.2 seconds to download</span> <span data-start="852.87" data-end="856.11">the entire page under 3G conditions so</span> <span data-start="856.11" data-end="858.24">there's one important thing about the</span> </p>
<p><span data-start="858.24" data-end="862.11">Google web font API that is that the</span> <span data-start="862.11" data-end="865.89">path is not stable so if you would if</span> <span data-start="865.89" data-end="868.56">you were just to preload the entire font</span> <span data-start="868.56" data-end="870.18">then it wouldn't work because it might</span> <span data-start="870.18" data-end="872.49">change to more or in a week you cannot</span> <span data-start="872.49" data-end="874.5">know but what is relatively low but has</span> <span data-start="874.5" data-end="875.94">been relatively stable throughout the</span> <span data-start="875.94" data-end="877.89">years is that it is going to be served</span> <span data-start="877.89" data-end="880.74">from a host that is called fond stodgy</span> <span data-start="880.74" data-end="883.5">steady calm so that hasn't changed in</span> <span data-start="883.5" data-end="884.52">years or I don't know if it hasn't</span> <span data-start="884.52" data-end="887.459">changed at all ever so what you can do</span> <span data-start="887.459" data-end="891.36">is you can add a link tag to your head</span> <span data-start="891.36" data-end="894.029">with the rel set to pre connect so and</span> <span data-start="894.029" data-end="896.43">the atrial set to where the funds are</span> <span data-start="896.43" data-end="898.2">going to be downloaded from and this</span> <span data-start="898.2" data-end="900.779">will advise the browser to Otel force</span> <span data-start="900.779" data-end="903.18">the browser basically to already connect</span> <span data-start="903.18" data-end="906.05">against this host so doing DNS TCP</span> <span data-start="906.05" data-end="909.18">handshake and he'll essentially and then</span> <span data-start="909.18" data-end="910.68">there's also across originator boots</span> <span data-start="910.68" data-end="913.32">which we ignore for now and I will come</span> <span data-start="913.32" data-end="916.02">to this in a second as well because it's</span> <span data-start="916.02" data-end="918.45">kinda interesting but if we if we add</span> <span data-start="918.45" data-end="920.82">this to our hat then the resulting</span> <span data-start="920.82" data-end="923.79">waterfall suddenly looks like this so</span> <span data-start="923.79" data-end="925.589">again my website is downloaded and then</span> <span data-start="925.589" data-end="928.23">it starts it downloads the both style</span> <span data-start="928.23" data-end="930.99">sheets parallel as before but now it</span> <span data-start="930.99" data-end="931.529">already</span> <span data-start="931.529" data-end="934.32">connects to to the host of the of the</span> <span data-start="934.32" data-end="936.12">web font it doesn't download it yet so</span> <span data-start="936.12" data-end="936.46">you might</span> <span data-start="936.46" data-end="938.35">notice the gap because it still needs to</span> <span data-start="938.35" data-end="940.75">evaluate both CSS files in order to know</span> <span data-start="940.75" data-end="943.03">if it's actually going to be needed but</span> <span data-start="943.03" data-end="945.52">we already told the browser that we want</span> <span data-start="945.52" data-end="947.53">to connect against this house which it</span> <span data-start="947.53" data-end="949.57">does right away so that when the</span> <span data-start="949.57" data-end="951.76">wavefront file needs to be downloaded it</span> <span data-start="951.76" data-end="953.32">will be much much faster because you</span> <span data-start="953.32" data-end="956.02">don't have to open the connection</span> <span data-start="956.02" data-end="958.06">because it's already been opened and now</span> <span data-start="958.06" data-end="961.18">it's only three seconds or 3.1 seconds</span> <span data-start="961.18" data-end="964">so we got rid of more than a second of</span> </p>
<p><span data-start="964" data-end="966.13">Patriot time by only adding this link</span> <span data-start="966.13" data-end="969.99">tag to the head I think is kinda mazing</span> <span data-start="969.99" data-end="972.16">quickly going back to this cross origin</span> <span data-start="972.16" data-end="975.4">attribute so for I guess for DRM reasons</span> <span data-start="975.4" data-end="977.47">funds Bev funds are subject to to the</span> <span data-start="977.47" data-end="979.21">same origin policy so that you cannot</span> <span data-start="979.21" data-end="982.18">just include reference from from anybody</span> <span data-start="982.18" data-end="985">and the front face specification</span> <span data-start="985" data-end="987.22">requires that funds are loaded in an</span> <span data-start="987.22" data-end="990.31">enemy's cause mode and for some reason I</span> <span data-start="990.31" data-end="991.63">don't know maybe some of you can answer</span> <span data-start="991.63" data-end="994.93">this is browsers appear to maintain a</span> <span data-start="994.93" data-end="997.3">separate pool of TCP connections for</span> <span data-start="997.3" data-end="1001.02">those kind of requests which means if</span> <span data-start="1001.02" data-end="1002.85">you do not set cross origin then you</span> <span data-start="1002.85" data-end="1004.8">will have two TCP connections because it</span> <span data-start="1004.8" data-end="1009.39">cannot reuse the first one so let's have</span> <span data-start="1009.39" data-end="1012.39">a look at the browser support so the</span> <span data-start="1012.39" data-end="1014.37">browser support is actually pretty good</span> <span data-start="1014.37" data-end="1018.42">it's only it's supported for is for 70%</span> <span data-start="1018.42" data-end="1020.91">of users apparently already so I think</span> <span data-start="1020.91" data-end="1027.51">it's safe to — already just use it the</span> <span data-start="1027.51" data-end="1029.82">second one is the second resource hint</span> <span data-start="1029.82" data-end="1032.76">is called DNS prefetch and it's it is</span> <span data-start="1032.76" data-end="1034.95">kind of similar to how preconnect works</span> <span data-start="1034.95" data-end="1037.38">but it only does the DNS resolving and</span> <span data-start="1037.38" data-end="1039.56">does not open the TCP connection and</span> <span data-start="1039.56" data-end="1043.74">this is mostly useful for resources that</span> <span data-start="1043.74" data-end="1047.28">you will not need now but now wish where</span> <span data-start="1047.28" data-end="1048.75">you don't don't know if it's going to</span> <span data-start="1048.75" data-end="1051.12">happen in a second or maybe in five</span> <span data-start="1051.12" data-end="1053.06">seconds or maybe even in a minute and</span> <span data-start="1053.06" data-end="1055.5">one example I would like to give is</span> </p>
<p><span data-start="1055.5" data-end="1060.48">Amazon so Amazon has this autocomplete</span> <span data-start="1060.48" data-end="1061.86">feature which you might have already</span> <span data-start="1061.86" data-end="1066.15">seen and this was really quick but and</span> <span data-start="1066.15" data-end="1068.4">the thing is the autocomplete service</span> <span data-start="1068.4" data-end="1070.26">itself does not</span> <span data-start="1070.26" data-end="1072.21">live on amazon.com it actually lives on</span> <span data-start="1072.21" data-end="1074.91">completion amazon.com which is a</span> <span data-start="1074.91" data-end="1077.82">different host then amazon.com so if you</span> <span data-start="1077.82" data-end="1079.68">where to start typing your browser would</span> <span data-start="1079.68" data-end="1082.56">need to resolve this host before it can</span> <span data-start="1082.56" data-end="1084.87">actually make the request and what they</span> <span data-start="1084.87" data-end="1087.48">are doing is in their head they add this</span> <span data-start="1087.48" data-end="1089.82">rate link tag with the relation said to</span> </p>
<p><span data-start="1089.82" data-end="1092.52">DNS prefetch and the href said to</span> <span data-start="1092.52" data-end="1094.98">completion amazon.com so as soon as you</span> <span data-start="1094.98" data-end="1097.53">open their main page that's this is</span> <span data-start="1097.53" data-end="1099.27">already going to be resolved and when</span> <span data-start="1099.27" data-end="1100.68">you start typing it will will just</span> <span data-start="1100.68" data-end="1104.34">appear in work which is cool and also</span> <span data-start="1104.34" data-end="1106.74">simple and it has even better browser</span> <span data-start="1106.74" data-end="1109.92">support then then pre Connect which is</span> <span data-start="1109.92" data-end="1112.65">kind of interesting so what you can do</span> <span data-start="1112.65" data-end="1115.38">is if you actually want preconnect but</span> <span data-start="1115.38" data-end="1117">also want to give browsers that do not</span> <span data-start="1117" data-end="1119.79">support reconnect but to support DNS</span> <span data-start="1119.79" data-end="1122.04">prefetch at least something the DNS</span> <span data-start="1122.04" data-end="1124.83">prefetch you can basically just specify</span> <span data-start="1124.83" data-end="1126.96">both in one link tag and then if the</span> <span data-start="1126.96" data-end="1129.18">browser supports pre connect it will</span> <span data-start="1129.18" data-end="1131.88">simply use pre connect and if it does</span> <span data-start="1131.88" data-end="1134.67">not but our support DNS prefetch then it</span> <span data-start="1134.67" data-end="1142.08">will resort to DNS prefetch the next one</span> <span data-start="1142.08" data-end="1146.37">is prefetch and prefetch allows you to</span> <span data-start="1146.37" data-end="1149.46">to actually download resources but that</span> <span data-start="1149.46" data-end="1151.32">you that you don't need right now but</span> <span data-start="1151.32" data-end="1155.72">that you are going to need later and</span> <span data-start="1155.72" data-end="1158.55">like for future for future navigations</span> <span data-start="1158.55" data-end="1161.16">so and cache would supply so if you if</span> <span data-start="1161.16" data-end="1163.32">you download if you prefetch a file and</span> <span data-start="1163.32" data-end="1165.03">it has a cache lifetime of one hour then</span> <span data-start="1165.03" data-end="1167.13">if you come back later then it will</span> <span data-start="1167.13" data-end="1170.31">still be served from the cache the the</span> <span data-start="1170.31" data-end="1172.47">thing to know is that prefetch files</span> <span data-start="1172.47" data-end="1174.54">will not get it will not be executed so</span> <span data-start="1174.54" data-end="1176.07">it's totally safe to prefetch for</span> <span data-start="1176.07" data-end="1177.54">example scripts limiters they would just</span> <span data-start="1177.54" data-end="1179.76">be downloaded and with a low priority</span> <span data-start="1179.76" data-end="1182.04">and nothing will be done with it until</span> <span data-start="1182.04" data-end="1184.05">you two need it and it would like to</span> <span data-start="1184.05" data-end="1186.09">give to two examples for that as well</span> <span data-start="1186.09" data-end="1189.9">so going back to my cat store maybe so</span> <span data-start="1189.9" data-end="1192.69">usually an online store flow is is</span> <span data-start="1192.69" data-end="1194.31">pretty clear so I have a product page</span> <span data-start="1194.31" data-end="1196.83">and then I put products into my cart and</span> <span data-start="1196.83" data-end="1199.08">then I go to the cart page and then from</span> <span data-start="1199.08" data-end="1200.79">the cart page I go to the checkout which</span> <span data-start="1200.79" data-end="1203.34">sometimes is a separate check out a</span> <span data-start="1203.34" data-end="1203.91">separate</span> <span data-start="1203.91" data-end="1205.89">application and then I will do I will</span> <span data-start="1205.89" data-end="1208.44">give you my money there basically so</span> <span data-start="1208.44" data-end="1209.88">what you can do when I'm on the cart</span> <span data-start="1209.88" data-end="1212.67">page you can be pretty certain that I'm</span> <span data-start="1212.67" data-end="1214.29">going to go to the checkout as well</span> <span data-start="1214.29" data-end="1215.79">because if I'm already in the card why</span> <span data-start="1215.79" data-end="1216.36">wouldn't I</span> <span data-start="1216.36" data-end="1219">so you can at this point already</span> <span data-start="1219" data-end="1222.39">prefetch the the files that your app is</span> <span data-start="1222.39" data-end="1224.61">going to need for for the checkout</span> <span data-start="1224.61" data-end="1226.59">experience and then just prefetch them</span> <span data-start="1226.59" data-end="1228.39">and as soon as I hit this go to or</span> <span data-start="1228.39" data-end="1230.13">proceed to checkout button the stuff</span> <span data-start="1230.13" data-end="1232.32">will already be there and leading to</span> <span data-start="1232.32" data-end="1237.5">better experience the second example is</span> <span data-start="1237.5" data-end="1240.06">similar but maybe a bit different so if</span> <span data-start="1240.06" data-end="1241.74">you have a login page lock in a login</span> <span data-start="1241.74" data-end="1244.17">form then it's also you can also be</span> <span data-start="1244.17" data-end="1246.3">pretty certain that my intent is is to</span> <span data-start="1246.3" data-end="1247.98">log in and use the locked-in experience</span> <span data-start="1247.98" data-end="1251.31">so why not just real Oh a prefetch the</span> <span data-start="1251.31" data-end="1254.04">the assets images in scripts that you</span> <span data-start="1254.04" data-end="1255.6">need for the locked experience at this</span> <span data-start="1255.6" data-end="1258.12">point already because it doesn't hurt if</span> <span data-start="1258.12" data-end="1259.77">you are pretty sure that that I will</span> <span data-start="1259.77" data-end="1262.11">need them then you can use the bandwidth</span> <span data-start="1262.11" data-end="1264.57">and just give me a better better</span> <span data-start="1264.57" data-end="1268.5">experience and the browser support also</span> <span data-start="1268.5" data-end="1271.17">is pretty good it got all of this got a</span> <span data-start="1271.17" data-end="1272.97">lot better in recent months because in</span> <span data-start="1272.97" data-end="1274.86">this case not but also safari naira</span> <span data-start="1274.86" data-end="1276.93">safari started supporting we saw since</span> <span data-start="1276.93" data-end="1279.48">apart from this one apparently so this</span> <span data-start="1279.48" data-end="1280.47">is pretty good and this is even</span> <span data-start="1280.47" data-end="1283.47">supported in IE in edge so pretty safe</span> <span data-start="1283.47" data-end="1287.61">to use the last one I would like to talk</span> <span data-start="1287.61" data-end="1290.79">about is also the newest one and maybe</span> <span data-start="1290.79" data-end="1294.06">even the most interesting one it is</span> <span data-start="1294.06" data-end="1297.06">called preload and you can use preload</span> <span data-start="1297.06" data-end="1301.38">to download resources that you need for</span> <span data-start="1301.38" data-end="1302.82">the current navigation for the current</span> <span data-start="1302.82" data-end="1304.8">page view but that the browser cannot</span> <span data-start="1304.8" data-end="1307.47">know about yet but you do know so now I</span> <span data-start="1307.47" data-end="1310.17">would like to go back to my my to a bad</span> <span data-start="1310.17" data-end="1314.73">font example and just briefly go go back</span> <span data-start="1314.73" data-end="1317.49">to the initial initial waterfall chart</span> <span data-start="1317.49" data-end="1320.31">like the first one like just to recap</span> <span data-start="1320.31" data-end="1322.83">that we had to download both CSS files</span> <span data-start="1322.83" data-end="1324.18">and only afterwards the webform was</span> <span data-start="1324.18" data-end="1326.25">downloaded and I know I only said that</span> <span data-start="1326.25" data-end="1328.38">when we are using Google Wave phones we</span> <span data-start="1328.38" data-end="1331.23">cannot know the path but let's just</span> <span data-start="1331.23" data-end="1332.97">pretend for this example that we can</span> <span data-start="1332.97" data-end="1335.22">know the path and if you actually wanted</span> <span data-start="1335.22" data-end="1336.75">to use this technique you could also</span> <span data-start="1336.75" data-end="1337.59">consider</span> <span data-start="1337.59" data-end="1339.96">hosting the web font yourself and be in</span> <span data-start="1339.96" data-end="1343.38">control of the UL and then no no wait</span> <span data-start="1343.38" data-end="1347.76">for sure and all right we got one too</span> <span data-start="1347.76" data-end="1351.18">fast and sorry so and so what you can do</span> <span data-start="1351.18" data-end="1353.94">is add at this link tech we've preload</span> <span data-start="1353.94" data-end="1355.41">and then set it to the edge proof that</span> <span data-start="1355.41" data-end="1358.05">we know pretend that we know and what</span> <span data-start="1358.05" data-end="1360.27">happens then is if you look at the</span> <span data-start="1360.27" data-end="1361.98">resulting waterfall chart that the web</span> <span data-start="1361.98" data-end="1364.59">phone itself will be downloaded and</span> <span data-start="1364.59" data-end="1366.45">parallel with all the other stuff and</span> <span data-start="1366.45" data-end="1370.7">will be will be ready much much earlier</span> <span data-start="1370.7" data-end="1372.84">which was kind of cool you can use it</span> <span data-start="1372.84" data-end="1374.46">for for all kinds of stuff and we will</span> <span data-start="1374.46" data-end="1376.29">come to to that right now because if you</span> <span data-start="1376.29" data-end="1378.48">might have noticed there was this s</span> <span data-start="1378.48" data-end="1382.2">attribute in here and the S attribute is</span> <span data-start="1382.2" data-end="1385.59">the B crest type and you can have plenty</span> <span data-start="1385.59" data-end="1387.63">of them you can use scripts for example</span> <span data-start="1387.63" data-end="1389.7">if you have third-party scripts that you</span> <span data-start="1389.7" data-end="1391.65">are loading by an inline script loader</span> <span data-start="1391.65" data-end="1395.24">or you can have images that maybe are</span> <span data-start="1395.24" data-end="1397.41">referenced as background images in your</span> </p>
<p><span data-start="1397.41" data-end="1400.26">CSS files and you can even preload fetch</span> <span data-start="1400.26" data-end="1402.9">requests which bring which gives us</span> <span data-start="1402.9" data-end="1406.05">interesting interesting new stuff which</span> <span data-start="1406.05" data-end="1407.61">I don't want to get into detail right</span> <span data-start="1407.61" data-end="1410.73">now but why do we even have to set</span> <span data-start="1410.73" data-end="1413.25">request type why do we need it so it's</span> <span data-start="1413.25" data-end="1415.29">needed so that the browser can</span> <span data-start="1415.29" data-end="1419.37">prioritize the request because style</span> <span data-start="1419.37" data-end="1421.17">sheets might might be downloaded with a</span> <span data-start="1421.17" data-end="1423.42">higher priority than images but it is</span> <span data-start="1423.42" data-end="1426.21">also used to set the appropriate except</span> <span data-start="1426.21" data-end="1429.36">header so that the browser sense doesn't</span> <span data-start="1429.36" data-end="1431.22">request an image when you actually want</span> <span data-start="1431.22" data-end="1432.75">one a script from you or from your web</span> <span data-start="1432.75" data-end="1434.88">server so that you can deliver the right</span> <span data-start="1434.88" data-end="1437.88">thing but it's also used to enforce the</span> <span data-start="1437.88" data-end="1439.59">content security policy and if you were</span> <span data-start="1439.59" data-end="1441.06">in the first talk this morning you might</span> <span data-start="1441.06" data-end="1442.44">already know what it is about but</span> <span data-start="1442.44" data-end="1445.26">content security basically allows you in</span> <span data-start="1445.26" data-end="1447.51">this case to specify from which host you</span> <span data-start="1447.51" data-end="1450.66">want to allow to download resources from</span> <span data-start="1450.66" data-end="1452.28">for example you could say I only want to</span> <span data-start="1452.28" data-end="1454.5">allow images to be downloaded from image</span> <span data-start="1454.5" data-end="1455.46">server com</span> <span data-start="1455.46" data-end="1457.65">whereas scripts should be downloaded</span> <span data-start="1457.65" data-end="1460.44">from script server calm and in order to</span> <span data-start="1460.44" data-end="1462.33">enforce that Google will air Google the</span> <span data-start="1462.33" data-end="1466.17">browser needs to know with what kind of</span> <span data-start="1466.17" data-end="1470.58">file type it is dealing with and if you</span> <span data-start="1470.58" data-end="1471.3">fail</span> <span data-start="1471.3" data-end="1473.79">to set a resource type or set incorrect</span> <span data-start="1473.79" data-end="1475.05">one then you will have basically have</span> <span data-start="1475.05" data-end="1477.63">double fetches and preload will not give</span> <span data-start="1477.63" data-end="1480.04">you anything</span> <span data-start="1480.05" data-end="1483.78">one other thing is there's responsive</span> <span data-start="1483.78" data-end="1486.06">design so if you which is basically</span> <span data-start="1486.06" data-end="1487.77">trying to make your your web app work</span> <span data-start="1487.77" data-end="1490.17">across screen sizes right and oftentimes</span> <span data-start="1490.17" data-end="1494.43">you need to download resources depending</span> <span data-start="1494.43" data-end="1496.05">on the screen size for example the</span> <span data-start="1496.05" data-end="1497.97">background image for for mobile app for</span> <span data-start="1497.97" data-end="1499.65">mobile version might be a completely</span> <span data-start="1499.65" data-end="1501.15">different one than the one for the</span> <span data-start="1501.15" data-end="1503.7">desktop experience and usually people</span> <span data-start="1503.7" data-end="1506.07">use media queries for that so you</span> <span data-start="1506.07" data-end="1509.16">specify a max width and then if the max</span> <span data-start="1509.16" data-end="1512.19">width of your device is in the is in</span> <span data-start="1512.19" data-end="1514.05">this realm then it will download this</span> <span data-start="1514.05" data-end="1516.3">and otherwise the other luckily browser</span> <span data-start="1516.3" data-end="1518.13">vendors have this also in mind when they</span> <span data-start="1518.13" data-end="1522.63">invented preload so you can use the</span> <span data-start="1522.63" data-end="1525.06">media actually boot and in preload in</span> <span data-start="1525.06" data-end="1526.77">the link tag as well and then said max</span> <span data-start="1526.77" data-end="1528.72">for example the max width and then the</span> <span data-start="1528.72" data-end="1530.85">browser will only download a preload</span> <span data-start="1530.85" data-end="1532.83">those where the media query actually</span> <span data-start="1532.83" data-end="1537.51">matches and here is the one the one</span> <span data-start="1537.51" data-end="1540.27">resource in where support got</span> <span data-start="1540.27" data-end="1542.7">significantly better in the last three</span> <span data-start="1542.7" data-end="1544.05">months even I think so it's now</span> <span data-start="1544.05" data-end="1546.98">supported in all major browsers but IE</span> <span data-start="1546.98" data-end="1549.54">and it's even already in at 17</span> <span data-start="1549.54" data-end="1552.24">apparently so I think it's now ready</span> <span data-start="1552.24" data-end="1554.91">ready to be used and I would definitely</span> <span data-start="1554.91" data-end="1559.83">look into that so and with that I'm</span> <span data-start="1559.83" data-end="1562.5">almost almost finished but I would like</span> <span data-start="1562.5" data-end="1565.29">to finish in this talk with two book</span> <span data-start="1565.29" data-end="1567.12">recommendations so if you're interested</span> <span data-start="1567.12" data-end="1570.3">in in this topic I can highly advise the</span> <span data-start="1570.3" data-end="1572.67">book high performance browser networking</span> <span data-start="1572.67" data-end="1575.16">by egoic this one is even available for</span> <span data-start="1575.16" data-end="1577.47">free as a progressive web app on the</span> <span data-start="1577.47" data-end="1581.07">internet so if we do google it and and</span> <span data-start="1581.07" data-end="1583.32">read it maybe on your way home and then</span> <span data-start="1583.32" data-end="1585.48">there's also an in fact basically the</span> <span data-start="1585.48" data-end="1587.73">first five to ten minutes in this talk</span> <span data-start="1587.73" data-end="1590.34">we're out of this book and then there's</span> <span data-start="1590.34" data-end="1592.62">also HTTP the definite guide which are</span> <span data-start="1592.62" data-end="1594.78">also enjoyed reading couple of years ago</span> <span data-start="1594.78" data-end="1598.59">so and with that I'd like to thank you</span> <span data-start="1598.59" data-end="1602.29">for listening and see you around</span> <span data-start="1602.29" data-end="1604.23">thank you</span> </p>
</section>