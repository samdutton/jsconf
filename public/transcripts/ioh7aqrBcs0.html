<section>
<p><span data-start="0.62" data-end="15.65">[Music]</span> <span data-start="15.65" data-end="19.17">yeah I'm Zen pathani I'm Jane on Twitter</span> <span data-start="19.17" data-end="22.609">and github and almost everything else</span> <span data-start="22.609" data-end="24.63">today I'm going to talk about state</span> <span data-start="24.63" data-end="26.46">machines meat we are cooks who knows</span> <span data-start="26.46" data-end="32.04">sits machines here alright so yeah I</span> <span data-start="32.04" data-end="34.68">know that you're a bit all this because</span> <span data-start="34.68" data-end="36.27">state machines are all the odd things</span> <span data-start="36.27" data-end="40.16">right it has been around for decades and</span> <span data-start="40.16" data-end="42.989">now we are bringing this old stuff into</span> <span data-start="42.989" data-end="46.05">react cooks which is just probably a few</span> <span data-start="46.05" data-end="48.3">months ago released on stable version of</span> <span data-start="48.3" data-end="54.239">react so yeah I have somebody I have two</span> <span data-start="54.239" data-end="56.219">kids and I'm living in Singapore working</span> <span data-start="56.219" data-end="58.14">as a ninja fan working at ninja friend</span> <span data-start="58.14" data-end="63">as a front-end stuff previously I was a</span> <span data-start="63" data-end="64.92">back-end developer but I just moved to</span> <span data-start="64.92" data-end="70.35">from n for one and a half years and I'll</span> <span data-start="70.35" data-end="73.369">react and it's hooks will Oh sucks here</span> <span data-start="73.369" data-end="80.88">great okay what this talk is here I'm</span> <span data-start="80.88" data-end="83.31">going to give you a very brief</span> <span data-start="83.31" data-end="85.95">introduction to state machines so for</span> <span data-start="85.95" data-end="88.979">you who just born yesterday who will</span> <span data-start="88.979" data-end="91.14">just who never heard of state machines</span> <span data-start="91.14" data-end="94.079">probably you need to get some basic</span> <span data-start="94.079" data-end="96.689">concepts of it and then I'm going to</span> <span data-start="96.689" data-end="101.579">walk you through to my personal journey</span> <span data-start="101.579" data-end="105.509">when I was working on a feature in in</span> </p>
<p><span data-start="105.509" data-end="109.56">Japan but that journey is too long too</span> <span data-start="109.56" data-end="112.32">crammed up in 30 minutes right that's</span> <span data-start="112.32" data-end="119.34">why I cram I cut it down and I simplify</span> <span data-start="119.34" data-end="121.17">those things so what you're seeing here</span> <span data-start="121.17" data-end="123.21">is not the real thing that I'm good but</span> <span data-start="123.21" data-end="126.299">it's just a simulation of of my journey</span> <span data-start="126.299" data-end="131.73">at the time so and since it's a code</span> <span data-start="131.73" data-end="133.17">journey so there will be a lot of code</span> <span data-start="133.17" data-end="133.74">so</span> <span data-start="133.74" data-end="136.5">luckily this is my this is the first</span> <span data-start="136.5" data-end="138.29">talk in the morning so I hope you're</span> <span data-start="138.29" data-end="142.41">fresh enough to digest more good this</span> <span data-start="142.41" data-end="145.91">morning and what this talk is not is</span> <span data-start="145.91" data-end="148.2">this is not an introduction to react</span> <span data-start="148.2" data-end="150.84">cooks so I'm not gonna introduce you to</span> <span data-start="150.84" data-end="156.27">any concept of records and it's not also</span> <span data-start="156.27" data-end="160.35">dig deep down to state machines concept</span> <span data-start="160.35" data-end="164.28">because it has a lot of concepts we if</span> <span data-start="164.28" data-end="166.11">you talk about it thoroughly it will</span> <span data-start="166.11" data-end="171.45">take a few days for review so what is</span> <span data-start="171.45" data-end="173.93">state machines</span> <span data-start="173.93" data-end="176.94">well when I'm mentioning state machines</span> </p>
<p><span data-start="176.94" data-end="179.31">I am referring to this finite state</span> <span data-start="179.31" data-end="184.32">machines which is on Wikipedia yeah it's</span> <span data-start="184.32" data-end="186.99">like this definition and we have some</span> <span data-start="186.99" data-end="203.32">states and</span> <span data-start="203.33" data-end="205.82">and why are we bringing this old stuff</span> <span data-start="205.82" data-end="208.01">into foreign stuff because you soul is</span> <span data-start="208.01" data-end="209.54">that machines are only used in critical</span> <span data-start="209.54" data-end="212.51">systems in oil and gas company in NASA</span> <span data-start="212.51" data-end="214.79">for building the rover to send to Mars</span> <span data-start="214.79" data-end="219.92">because they can afford to have error or</span> <span data-start="219.92" data-end="222.02">a new bug in production like us we can</span> <span data-start="222.02" data-end="224.15">afford it right we can afford a bug in</span> <span data-start="224.15" data-end="227.39">production and we can immediately push</span> <span data-start="227.39" data-end="229.91">some code and deploy it but that's not</span> <span data-start="229.91" data-end="232.34">the case for them they cannot just push</span> <span data-start="232.34" data-end="234.38">a code to Mars right because it take</span> <span data-start="234.38" data-end="238.67">months to get there so but why why</span> <span data-start="238.67" data-end="241.25">bringing this this complicated stuff in</span> <span data-start="241.25" data-end="246.59">the front end there are a lot of there</span> <span data-start="246.59" data-end="250.22">are a lot of explanations which is</span> <span data-start="250.22" data-end="253.46">explained by the creator of X state in</span> <span data-start="253.46" data-end="256.73">this talk so you can just go through the</span> <span data-start="256.73" data-end="258.65">accommodation and take a look at why</span> <span data-start="258.65" data-end="265.4">that's this important but the one of the</span> <span data-start="265.4" data-end="268.66">idea that I am getting sold out is</span> <span data-start="268.66" data-end="271.37">because it provides a common language</span> <span data-start="271.37" data-end="273.95">for designers and developers so let me</span> <span data-start="273.95" data-end="277.11">explain Italy</span> <span data-start="277.12" data-end="280.31">anybody ever get this kind of flow from</span> <span data-start="280.31" data-end="286.45">designers or yep one two three okay so</span> <span data-start="286.45" data-end="288.8">are we the only ones doing the complex</span> <span data-start="288.8" data-end="296.87">stuff so I got I have a pitch in in our</span> <span data-start="296.87" data-end="299.72">product in in Japan which is basically a</span> <span data-start="299.72" data-end="303.65">calendar so this calendar you know an</span> <span data-start="303.65" data-end="306.05">interaction in a calendar is a lot right</span> <span data-start="306.05" data-end="308.45">there could be creating new staff or</span> <span data-start="308.45" data-end="310.49">feeding the staff or filling the list of</span> <span data-start="310.49" data-end="314.24">items in calendar and since we are a</span> <span data-start="314.24" data-end="317.72">start-up we do it lean so instead of</span> <span data-start="317.72" data-end="321.89">having all requirements given up at the</span> <span data-start="321.89" data-end="324.44">first place we we just get the</span> <span data-start="324.44" data-end="327.5">requirements gradually one by one so</span> <span data-start="327.5" data-end="329.51">initially I got only probably one of</span> <span data-start="329.51" data-end="332.99">this diagram but then I'm the next</span> <span data-start="332.99" data-end="334.64">period I get another one on the next one</span> </p>
<p><span data-start="334.64" data-end="335.93">I get another one then this diagram</span> <span data-start="335.93" data-end="337.07">getting more and more</span> <span data-start="337.07" data-end="340.37">complex and it's it's getting harder for</span> <span data-start="340.37" data-end="343.91">me to understand my code and really my</span> <span data-start="343.91" data-end="348.29">code to this diagram but luckily I'm</span> <span data-start="348.29" data-end="354.23">getting pitch this idea so somebody so</span> <span data-start="354.23" data-end="358.79">when I watched the top it he said that</span> <span data-start="358.79" data-end="360.14">that machine provided common language</span> <span data-start="360.14" data-end="361.49">for designers and developers and I</span> <span data-start="361.49" data-end="363.32">thought it is it quite make sense</span> <span data-start="363.32" data-end="367.55">because we're having this by using state</span> <span data-start="367.55" data-end="370.01">machines we can actually code in a way</span> <span data-start="370.01" data-end="374.56">that the diagram is presented to us and</span> </p>
<p><span data-start="374.56" data-end="377.17">I will show you later that we can do</span> <span data-start="377.17" data-end="386.05">vice-versa so my problem at the time was</span> <span data-start="386.05" data-end="389.15">the complex UI flows that I get it</span> <span data-start="389.15" data-end="393.86">requires multiple states by States here</span> <span data-start="393.86" data-end="397.94">I mean states in react so I can it can</span> <span data-start="397.94" data-end="399.77">be in hooks and it can be in in class</span> <span data-start="399.77" data-end="401.99">components but it's basically the react</span> <span data-start="401.99" data-end="405.35">States and multiple states are generally</span> <span data-start="405.35" data-end="408.38">two implicit which means probably some</span> <span data-start="408.38" data-end="412.82">let's say we have three states we have a</span> <span data-start="412.82" data-end="414.53">combination of three states on that</span> <span data-start="414.53" data-end="416.6">company right and then we are four</span> <span data-start="416.6" data-end="418.19">states we have combination for this and</span> <span data-start="418.19" data-end="422.09">imagine if the UI is too complex we can</span> <span data-start="422.09" data-end="424.64">get the state explore it and it's</span> <span data-start="424.64" data-end="426.44">getting harder to manage the states</span> <span data-start="426.44" data-end="430.73">inside the company yep so those implicit</span> </p>
<p><span data-start="430.73" data-end="434.51">States for me it's harder to reason</span> <span data-start="434.51" data-end="435.76">about</span> <span data-start="435.76" data-end="439.37">that's why bugs keep showing up on</span> <span data-start="439.37" data-end="441.86">production due to this invisible state</span> <span data-start="441.86" data-end="443.69">so I thought that I covered all the</span> <span data-start="443.69" data-end="445.91">states but apparently there are some</span> <span data-start="445.91" data-end="448.25">other combination of states that is not</span> <span data-start="448.25" data-end="449.81">covered yet and it's appearing</span> <span data-start="449.81" data-end="455.21">production so yeah let's try using state</span> <span data-start="455.21" data-end="459.86">machines to solve this problem so my</span> <span data-start="459.86" data-end="464.78">hypothesis is by using state machines we</span> <span data-start="464.78" data-end="468.34">can make our States visible which means</span> <span data-start="468.34" data-end="470.78">if we have my own physical States</span> <span data-start="470.78" data-end="473.66">means no hidden bugs anymore right so</span> <span data-start="473.66" data-end="476.17">let's hope it turns out that way</span> <span data-start="476.17" data-end="479.63">enough talk so I told you that there</span> <span data-start="479.63" data-end="481.1">will be a lot of good a lot of good</span> <span data-start="481.1" data-end="486.86">we're starting to jump into the code I</span> <span data-start="486.86" data-end="488.389">will give you a brief solution</span> <span data-start="488.389" data-end="494.32">interaction through the x-step API so</span> <span data-start="494.32" data-end="497.139">this is a simple toggle machine example</span> <span data-start="497.139" data-end="500.45">so I'm just importing a machine function</span> <span data-start="500.45" data-end="503.54">from X depth and I pass down a</span> <span data-start="503.54" data-end="507.13">configuration object to the machine</span> <span data-start="507.13" data-end="509.81">this configuration object configuration</span> <span data-start="509.81" data-end="512.51">object should contain at least the first</span> <span data-start="512.51" data-end="515.18">is the initial State so which state that</span> <span data-start="515.18" data-end="521.36">it initially on when it started and then</span> <span data-start="521.36" data-end="523.37">all the available States so in this case</span> </p>
<p><span data-start="523.37" data-end="525.52">I have inactive State and then I have</span> <span data-start="525.52" data-end="528.89">active state as well and within those</span> <span data-start="528.89" data-end="531.98">states we can define state transitions</span> <span data-start="531.98" data-end="535.04">so which is a way to to move between</span> <span data-start="535.04" data-end="539.26">between states so in this case on toggle</span> <span data-start="539.26" data-end="542.87">events we move to active state and on</span> <span data-start="542.87" data-end="545.12">and from the active State on toggle</span> <span data-start="545.12" data-end="547.7">offense to the same event we move to</span> <span data-start="547.7" data-end="553.01">inactive State so this is the bare</span> <span data-start="553.01" data-end="556.22">minimum of a state machine so we can try</span> <span data-start="556.22" data-end="559.79">to copy this line and we can visualize</span> <span data-start="559.79" data-end="567.02">it from the code yep here it is so now</span> <span data-start="567.02" data-end="571.88">we cut our code visualize like this so</span> <span data-start="571.88" data-end="574.01">it looks like the diagram that I shown</span> <span data-start="574.01" data-end="576.5">you before the diagram that I that we</span> <span data-start="576.5" data-end="579.589">cut from the designers it seems a bit</span> <span data-start="579.589" data-end="581.9">overkill right I mean talker stuff what</span> <span data-start="581.9" data-end="584.18">can be more complex than this what why</span> <span data-start="584.18" data-end="586.82">do we need this ceremony just for</span> <span data-start="586.82" data-end="590.05">toggling stuff but we will get to it</span> <span data-start="590.05" data-end="595.379">soon so let's start the journey</span> <span data-start="595.389" data-end="598.519">here I'm gonna walk you through my</span> <span data-start="598.519" data-end="603.259">journey and I'm gonna split them step by</span> <span data-start="603.259" data-end="606.769">step so it step consists of first the</span> <span data-start="606.769" data-end="609.47">conventional implementation of it using</span> <span data-start="609.47" data-end="613.1">hoops and then next we will get into</span> <span data-start="613.1" data-end="615.17">this state machine definition and then</span> <span data-start="615.17" data-end="617">next we will integrate that state</span> <span data-start="617" data-end="623.199">machine into our app so for the first</span> <span data-start="623.199" data-end="627.139">let's say imagine this is we are doing</span> <span data-start="627.139" data-end="628.399">it in Sprint's and this is ours for</span> <span data-start="628.399" data-end="630.8">spring so the first feature is simple</span> <span data-start="630.8" data-end="633.19">this just toggle the model feasibility</span> <span data-start="633.19" data-end="638.18">which I have button and I click and the</span> <span data-start="638.18" data-end="640.759">militia up and I close and it closes</span> <span data-start="640.759" data-end="644.699">it's impressive</span> <span data-start="644.709" data-end="649.699">this is our bear component which uses a</span> <span data-start="649.699" data-end="653.149">button and a model and I feels nothing</span> <span data-start="653.149" data-end="657.56">here yet so for tracking the</span> <span data-start="657.56" data-end="659.75">traceability step usually we use you</span> <span data-start="659.75" data-end="665.959">step and then we just initiate the state</span> <span data-start="665.959" data-end="670.04">with force and on button click we set it</span> <span data-start="670.04" data-end="672.62">to true on closed model click we set it</span> <span data-start="672.62" data-end="678.04">to false so this is our implementation</span> <span data-start="678.04" data-end="681.709">it seems simple right why do we need set</span> <span data-start="681.709" data-end="686.54">machines but let's try doing this simple</span> <span data-start="686.54" data-end="689.75">thing using Sigma shins so I just add</span> <span data-start="689.75" data-end="693.8">not the I just had an ID here so this is</span> <span data-start="693.8" data-end="698.66">a machine for this case so we have an</span> <span data-start="698.66" data-end="701.87">infeasible state as an easy L and then</span> <span data-start="701.87" data-end="706.97">we put an open event so that it can go</span> <span data-start="706.97" data-end="709.04">to visible state and this visible step</span> <span data-start="709.04" data-end="712.88">has a closed event to invisible state so</span> <span data-start="712.88" data-end="714.319">this is our simple machine which looks</span> <span data-start="714.319" data-end="717.649">like our total machine before and when</span> <span data-start="717.649" data-end="721.04">we select it it has similar thing the</span> <span data-start="721.04" data-end="722.5">difference the only difference is that</span> <span data-start="722.5" data-end="725.269">we have different events that occur so</span> <span data-start="725.269" data-end="727.74">by having different events there</span> <span data-start="727.74" data-end="731.19">no way for this state to let's say we're</span> <span data-start="731.19" data-end="733.14">in physical state and we send clothes</span> <span data-start="733.14" data-end="735.87">even it will do nothing because there's</span> <span data-start="735.87" data-end="738.75">no clothes even on this state so that's</span> <span data-start="738.75" data-end="742.5">what makes it contain we cannot go to</span> <span data-start="742.5" data-end="744.99">any other state which is not defined</span> <span data-start="744.99" data-end="751.71">here so let's integrate that solution</span> <span data-start="751.71" data-end="754.59">into our app this is the same barebone</span> <span data-start="754.59" data-end="760.77">app but I just imported not stuff use</span> <span data-start="760.77" data-end="763.95">machine here is react cooked react</span> <span data-start="763.95" data-end="766.92">custom hooks which is written in X state</span> <span data-start="766.92" data-end="769.8">and you can look at the expression on</span> <span data-start="769.8" data-end="771.42">the recommendation I wouldn't walk you</span> <span data-start="771.42" data-end="775.23">through and this custom hooks accept</span> <span data-start="775.23" data-end="778.59">first the machine itself the machine</span> <span data-start="778.59" data-end="780.51">definition that we just did and then it</span> <span data-start="780.51" data-end="782.7">accept some options which is one of them</span> <span data-start="782.7" data-end="785.76">is the dev tools which means that we can</span> <span data-start="785.76" data-end="789.9">debug our our app or our tension in</span> <span data-start="789.9" data-end="796.5">redux dev tools and next we accept we</span> <span data-start="796.5" data-end="798.45">get the concept and send even send a</span> <span data-start="798.45" data-end="801.54">function to send even so for opening the</span> <span data-start="801.54" data-end="804.63">model this simply sent an open even and</span> <span data-start="804.63" data-end="806.82">for closing the Mirage is simply send</span> <span data-start="806.82" data-end="816.77">close event and here to determine that</span> <span data-start="816.77" data-end="819.11">whether the model is shown or not</span> <span data-start="819.11" data-end="821.76">instead of placing physical state before</span> <span data-start="821.76" data-end="824.91">we pass down the current state and the</span> <span data-start="824.91" data-end="827.19">value of the current state and if the</span> <span data-start="827.19" data-end="829.26">state is feasible then we display the</span> <span data-start="829.26" data-end="835.68">model this is it and we still have the</span> <span data-start="835.68" data-end="838.29">same working what our company but the</span> <span data-start="838.29" data-end="840.96">only the difference is we can track it</span> <span data-start="840.96" data-end="844.47">down in redux so we have an open even</span> <span data-start="844.47" data-end="846.84">here changing state visible invisible to</span> <span data-start="846.84" data-end="849.09">visible and we have closed even here</span> <span data-start="849.09" data-end="853.87">changing state from visible to invisible</span> <span data-start="853.88" data-end="856.97">okay that seems simple but now let's go</span> <span data-start="856.97" data-end="859.91">to the spring this spear into a garment</span> <span data-start="859.91" data-end="862.759">to which is we have to differentiate</span> <span data-start="862.759" data-end="865.73">between view and edit screens like then</span> <span data-start="865.73" data-end="868.91">our model was just no contain right but</span> <span data-start="868.91" data-end="872">now it has a content and it has added</span> <span data-start="872" data-end="875.779">button when I when we so it is feeling</span> <span data-start="875.779" data-end="878.569">the thing here and then when you click</span> <span data-start="878.569" data-end="880.639">the edit it is editing that thing and it</span> <span data-start="880.639" data-end="883.339">can submit so that's the second</span> <span data-start="883.339" data-end="886.79">requirement this is our old code in</span> <span data-start="886.79" data-end="892.519">conventional hooks we have to add</span> <span data-start="892.519" data-end="894.589">another state because we were checking</span> <span data-start="894.589" data-end="897.47">another thing right here so we just add</span> <span data-start="897.47" data-end="903.829">a editing step and then the ref the</span> <span data-start="903.829" data-end="905.42">state value that we are passing down to</span> <span data-start="905.42" data-end="909.5">the model so we are passing down this</span> <span data-start="909.5" data-end="912.74">view and edit state value based on those</span> <span data-start="912.74" data-end="917.589">two states before so the feasible and</span> <span data-start="917.589" data-end="919.939">editing if it is feasible then it's not</span> <span data-start="919.939" data-end="923.42">editing then this view and yeah</span> <span data-start="923.42" data-end="930.019">something like this and that's for this</span> <span data-start="930.019" data-end="931.16">for getting the state and now for</span> <span data-start="931.16" data-end="933.68">changing the state we should propagate</span> <span data-start="933.68" data-end="937.67">to the events of clicking or some or a</span> <span data-start="937.67" data-end="939.85">grow of clicking these buttons to</span> <span data-start="939.85" data-end="941.72">setting the States</span> <span data-start="941.72" data-end="945.019">so right here we we set editing to false</span> <span data-start="945.019" data-end="946.399">when we want to crystal when we are</span> <span data-start="946.399" data-end="947.63">crossing the model so it gets to the</span> <span data-start="947.63" data-end="950.06">initial set and then on edit button we</span> <span data-start="950.06" data-end="953.36">just set it to true so that's our</span> <span data-start="953.36" data-end="956.209">implementation it's still mini 2 plus so</span> <span data-start="956.209" data-end="959.149">far so why don't we but why we better is</span> <span data-start="959.149" data-end="964.91">writing state machines but we do some</span> <span data-start="964.91" data-end="970.069">unusual stuff sometimes right now let's</span> <span data-start="970.069" data-end="973.1">write state machine and right here I'm</span> <span data-start="973.1" data-end="974.569">going to introduce you to a new concept</span> <span data-start="974.569" data-end="981.62">part here a hierarchical state so here</span> <span data-start="981.62" data-end="985.55">we have a new state but it's not in it's</span> <span data-start="985.55" data-end="987.75">not sibling of the existing state but</span> <span data-start="987.75" data-end="990.3">has to be children of an existing state</span> <span data-start="990.3" data-end="992.28">because this state is actually inside</span> <span data-start="992.28" data-end="994.47">the visible because this state is only</span> <span data-start="994.47" data-end="997.4">exists when the model is visible right</span> <span data-start="997.4" data-end="1001.43">and we can just add those states inside</span> <span data-start="1001.43" data-end="1003.35">it so this is called hierarchical</span> <span data-start="1003.35" data-end="1006.59">straight state and inside the visible</span> <span data-start="1006.59" data-end="1009.65">said we have a few state which is an</span> <span data-start="1009.65" data-end="1012.08">initial state and then we can go to the</span> </p>
<p><span data-start="1012.08" data-end="1014.87">Edit State but then from edit state we</span> <span data-start="1014.87" data-end="1017.27">need to go to the parent State right so</span> <span data-start="1017.27" data-end="1021.89">there is no the the default when it</span> <span data-start="1021.89" data-end="1023.66">accepts the state it can only access</span> <span data-start="1023.66" data-end="1026.66">this its siblings it so how do we we</span> <span data-start="1026.66" data-end="1029.959">access the parent step luckily actually</span> <span data-start="1029.959" data-end="1032.99">provide a way to do it by defining an ID</span> <span data-start="1032.99" data-end="1036.38">on appearances or or any any data or</span> <span data-start="1036.38" data-end="1040.16">anywhere on the machine and then we can</span> <span data-start="1040.16" data-end="1041.959">just refer to that ID but by just by</span> <span data-start="1041.959" data-end="1045.92">putting a hash in front of it so this is</span> <span data-start="1045.92" data-end="1048.77">our state machine definition then it</span> <span data-start="1048.77" data-end="1052.43">looks like this when we visualize it so</span> <span data-start="1052.43" data-end="1055.7">on invisible this invisible and physical</span> <span data-start="1055.7" data-end="1056.84">thing is the same thing that we have</span> <span data-start="1056.84" data-end="1059.84">previously but then we have two new</span> <span data-start="1059.84" data-end="1064.01">states inside the visible state so when</span> <span data-start="1064.01" data-end="1067.04">we are on view we can edit it and if you</span> <span data-start="1067.04" data-end="1069.86">can submit it and when we are inside in</span> <span data-start="1069.86" data-end="1072.5">any of this we can still close the model</span> <span data-start="1072.5" data-end="1076.61">that's how it works right so let's</span> <span data-start="1076.61" data-end="1079.37">implement this in our state machine this</span> <span data-start="1079.37" data-end="1083">our previous one we need to change the</span> <span data-start="1083" data-end="1084.44">value that we are passing to the model</span> <span data-start="1084.44" data-end="1090.31">because now our feasible set is not</span> <span data-start="1090.31" data-end="1093.47">string it's not always a string because</span> <span data-start="1093.47" data-end="1096.17">unfeasible we have to inner states so it</span> <span data-start="1096.17" data-end="1099.07">will be an object so we are passing on</span> <span data-start="1099.07" data-end="1106.16">that object so if if that if the state</span> <span data-start="1106.16" data-end="1108.29">is an object and contains visible and</span> <span data-start="1108.29" data-end="1110.99">visible contains in state then we press</span> <span data-start="1110.99" data-end="1113.09">that inner state otherwise it will be</span> <span data-start="1113.09" data-end="1115.82">so that that's why this is</span> <span data-start="1115.82" data-end="1118.79">still valid for our model tomorrow will</span> <span data-start="1118.79" data-end="1121.16">show when we have</span> <span data-start="1121.16" data-end="1124.27">inner state in the feasible state and</span> <span data-start="1124.27" data-end="1126.83">then for editing some defense it's</span> <span data-start="1126.83" data-end="1129.68">simply sending those events out using</span> <span data-start="1129.68" data-end="1132.74">the send function that's it</span> <span data-start="1132.74" data-end="1138.32">and when we try doing this it works and</span> <span data-start="1138.32" data-end="1142.67">we can also see the redux yeah so now</span> <span data-start="1142.67" data-end="1150.08">when we are opening the state yeah now</span> <span data-start="1150.08" data-end="1152.33">now we have this visible edit so when we</span> <span data-start="1152.33" data-end="1155.96">were close the value is the field is</span> <span data-start="1155.96" data-end="1158.33">invisible and when you open it the fella</span> <span data-start="1158.33" data-end="1161.72">is now visible good view and now it's</span> <span data-start="1161.72" data-end="1164.06">physical edit so it's how X that</span> <span data-start="1164.06" data-end="1167.92">represents the state okay</span> <span data-start="1167.92" data-end="1170.84">so far we are getting with more</span> <span data-start="1170.84" data-end="1176.36">complicated here now so on the Sprint 3</span> <span data-start="1176.36" data-end="1180.62">we had a new feature to show the create</span> <span data-start="1180.62" data-end="1182.03">screen when opening Moodle with empty</span> <span data-start="1182.03" data-end="1184.7">data remember that my case was a</span> <span data-start="1184.7" data-end="1186.98">calendar when we click a date there</span> <span data-start="1186.98" data-end="1189.44">could be something in it which is this</span> <span data-start="1189.44" data-end="1192.89">is our it is this case but there could</span> <span data-start="1192.89" data-end="1195.8">be nothing on it which we don't have</span> <span data-start="1195.8" data-end="1198.83">anything to show right so that's why we</span> <span data-start="1198.83" data-end="1202.22">have to go to immediate little editing</span> <span data-start="1202.22" data-end="1203.78">mode which is called create because</span> <span data-start="1203.78" data-end="1207.08">we're creating something so we have two</span> <span data-start="1207.08" data-end="1210.86">cases now and to accommodate it to</span> <span data-start="1210.86" data-end="1213.53">accommodate that in our conventional</span> <span data-start="1213.53" data-end="1217.04">implementation we add another state</span> <span data-start="1217.04" data-end="1220.91">called data the data object or the thing</span> <span data-start="1220.91" data-end="1222.68">in the country and we initialize it with</span> <span data-start="1222.68" data-end="1227.84">an empty array so now it's getting more</span> <span data-start="1227.84" data-end="1230.84">complicated well we have to incorporate</span> <span data-start="1230.84" data-end="1233.24">these three states feasible editing and</span> <span data-start="1233.24" data-end="1236.78">data to and derive a state value from</span> <span data-start="1236.78" data-end="1238.4">that then we have to write these</span> <span data-start="1238.4" data-end="1242.39">conditional stars this seems a bit still</span> <span data-start="1242.39" data-end="1245.33">more manageable but we are still far</span> <span data-start="1245.33" data-end="1252.26">away forwards so this update buttons to</span> <span data-start="1252.26" data-end="1254.6">have two things now now we</span> <span data-start="1254.6" data-end="1256.34">of an empty which is the old stuff and</span> <span data-start="1256.34" data-end="1259.22">then we can open access which is we are</span> <span data-start="1259.22" data-end="1262.07">setting we are opening the water and we</span> <span data-start="1262.07" data-end="1263.72">are setting the data to have some</span> <span data-start="1263.72" data-end="1265.16">content here it's just an empty string</span> <span data-start="1265.16" data-end="1271.669">to simplify and don't forget to clean up</span> <span data-start="1271.669" data-end="1273.71">the data when we are crossing the motor</span> <span data-start="1273.71" data-end="1276.47">or submitting so there's our</span> <span data-start="1276.47" data-end="1280.429">implementation okay now it's getting</span> <span data-start="1280.429" data-end="1284.69">more complex because now all of those</span> <span data-start="1284.69" data-end="1286.01">additional logic are scattered</span> <span data-start="1286.01" data-end="1286.669">everywhere</span> <span data-start="1286.669" data-end="1288.95">and it's harder to understand because</span> <span data-start="1288.95" data-end="1292.76">it's too implicit which that is this</span> <span data-start="1292.76" data-end="1297.71">list oh and which tests actually so</span> <span data-start="1297.71" data-end="1299.87">let's try implementing this with set</span> <span data-start="1299.87" data-end="1304.309">machines and here here is where it got</span> <span data-start="1304.309" data-end="1313.28">more useful now so in this case we are</span> <span data-start="1313.28" data-end="1315.47">triggering the same event which is</span> <span data-start="1315.47" data-end="1318.4">opening the model so we need to</span> <span data-start="1318.4" data-end="1322.309">transition the step from invisible to</span> <span data-start="1322.309" data-end="1328.07">visible and here is how we define the</span> <span data-start="1328.07" data-end="1330.049">transition but there is another way of</span> <span data-start="1330.049" data-end="1333.97">defining this transition which is</span> <span data-start="1333.97" data-end="1336.47">defining it is an object so that we can</span> <span data-start="1336.47" data-end="1340.039">add some more things here so this</span> <span data-start="1340.039" data-end="1341.51">actually the same thing with the</span> <span data-start="1341.51" data-end="1345.14">previous one and this another way to</span> <span data-start="1345.14" data-end="1349.49">define it as an array so that we can</span> <span data-start="1349.49" data-end="1353.6">target different things so that we so</span> <span data-start="1353.6" data-end="1355.309">now we can target different states from</span> <span data-start="1355.309" data-end="1359.27">the same state within using the same</span> <span data-start="1359.27" data-end="1363.74">event how do we differ between this</span> <span data-start="1363.74" data-end="1364.549">target and the target</span> <span data-start="1364.549" data-end="1369.35">we differ it using condition so this</span> <span data-start="1369.35" data-end="1371.24">condition inside machine is called car</span> <span data-start="1371.24" data-end="1373.34">which means like imagine a state is a</span> <span data-start="1373.34" data-end="1375.679">place and we have guards in front of the</span> <span data-start="1375.679" data-end="1379.28">in one of the state in front of the</span> <span data-start="1379.28" data-end="1380.659">place like like our grass which is</span> <span data-start="1380.659" data-end="1382.549">scanning or attack so even though if</span> <span data-start="1382.549" data-end="1384.409">somebody is trying to come into this</span> <span data-start="1384.409" data-end="1387.29">stage without having the proper tag they</span> <span data-start="1387.29" data-end="1388.22">wouldn't be allowed</span> <span data-start="1388.22" data-end="1390.83">- coming right so this like this is why</span> <span data-start="1390.83" data-end="1397.58">it called it's called God so here we are</span> <span data-start="1397.58" data-end="1401.179">guarding that if the data is zero if the</span> <span data-start="1401.179" data-end="1403.07">data length zero and then we go to this</span> <span data-start="1403.07" data-end="1406.4">state otherwise we go to the previous</span> <span data-start="1406.4" data-end="1410.83">one so just created add a create set and</span> <span data-start="1410.83" data-end="1415.7">that's it so this is our news visualized</span> <span data-start="1415.7" data-end="1419.809">a machine we have a new condition here</span> <span data-start="1419.809" data-end="1422.179">so it's the same event but different</span> <span data-start="1422.179" data-end="1423.98">condition with this condition we go</span> <span data-start="1423.98" data-end="1427.1">directly to create and the rest are the</span> <span data-start="1427.1" data-end="1430.13">same so when we implement this into the</span> <span data-start="1430.13" data-end="1434.21">scene let's rename the current button</span> <span data-start="1434.21" data-end="1436.909">and then so now it's open empty and</span> <span data-start="1436.909" data-end="1440.299">press down an object instead of just</span> <span data-start="1440.299" data-end="1442.159">passing out a string now we press it and</span> <span data-start="1442.159" data-end="1445.309">pass an object with the type of that</span> <span data-start="1445.309" data-end="1448.309">string and a payload in it so we pass</span> <span data-start="1448.309" data-end="1452.39">down an empty period and we also need to</span> <span data-start="1452.39" data-end="1456.71">have another another button which sends</span> <span data-start="1456.71" data-end="1458.78">the same event but with different data</span> <span data-start="1458.78" data-end="1463.01">here that's it that's our implementation</span> <span data-start="1463.01" data-end="1466.07">in our component so it still works the</span> <span data-start="1466.07" data-end="1480.559">same okay now we get to the final spring</span> <span data-start="1480.559" data-end="1483.95">in the stop we have to show this screen</span> <span data-start="1483.95" data-end="1485.45">when we are opening a model with</span> <span data-start="1485.45" data-end="1488.24">multiple data so imagine that there is a</span> <span data-start="1488.24" data-end="1490.309">date where we have multiple things there</span> <span data-start="1490.309" data-end="1493.46">so we don't know yet which one to feel</span> <span data-start="1493.46" data-end="1495.62">right which one to feel like this so if</span> <span data-start="1495.62" data-end="1497.09">you have multiple data which one to show</span> <span data-start="1497.09" data-end="1499.1">we don't know that's why we are</span> <span data-start="1499.1" data-end="1501.049">displaying a list of them and the user</span> <span data-start="1501.049" data-end="1503.09">can click on one of the lists and we can</span> <span data-start="1503.09" data-end="1505.13">show the view and it does the same thing</span> <span data-start="1505.13" data-end="1510.44">like before so now this is our old</span> <span data-start="1510.44" data-end="1513.2">component add another step which is</span> <span data-start="1513.2" data-end="1516.029">called index which</span> <span data-start="1516.029" data-end="1518.22">represents the index that we are seeing</span> <span data-start="1518.22" data-end="1525.179">and I enjoy it with with -1 so it's so</span> <span data-start="1525.179" data-end="1527.519">if we if you use now when we compare it</span> <span data-start="1527.519" data-end="1529.98">to other numbers it bit strange in</span> </p>
<p><span data-start="1529.98" data-end="1531.84">JavaScript so just let's use this</span> <span data-start="1531.84" data-end="1536.61">sentinel value then incorporated index</span> <span data-start="1536.61" data-end="1539.509">into our new state which is lys and</span> <span data-start="1539.509" data-end="1541.44">don't forget to add another condition</span> <span data-start="1541.44" data-end="1545.25">because now this condition is change</span> <span data-start="1545.25" data-end="1547.94">because of this</span> <span data-start="1547.94" data-end="1551.929">add new buttons with different data here</span> <span data-start="1551.929" data-end="1554.94">don't forget to reset that index to the</span> <span data-start="1554.94" data-end="1559.11">-1 when you cross the model so now it's</span> <span data-start="1559.11" data-end="1561.99">getting more and more complicated well</span> <span data-start="1561.99" data-end="1563.94">this is not mind-blowing yet because</span> <span data-start="1563.94" data-end="1566.309">it's still step 4 imagine that in</span> <span data-start="1566.309" data-end="1570.149">production I have like step 10 or step</span> <span data-start="1570.149" data-end="1579.84">20 so yes it blowed my mind so with in</span> <span data-start="1579.84" data-end="1581.97">solutions we can do it the other way we</span> <span data-start="1581.97" data-end="1583.379">can do it the same way that we did</span> <span data-start="1583.379" data-end="1587.49">before so it just add another guard and</span> <span data-start="1587.49" data-end="1591.87">another state to go but then now it's</span> <span data-start="1591.87" data-end="1594.179">getting harder to retry because then</span> <span data-start="1594.179" data-end="1595.919">what's the point of using insta machine</span> <span data-start="1595.919" data-end="1600.12">if we still get it hard to read we can</span> <span data-start="1600.12" data-end="1603.57">alias this state sorry we can elect this</span> <span data-start="1603.57" data-end="1606.75">guard into a simple string so it's more</span> <span data-start="1606.75" data-end="1609.24">readable so now we have if empty then</span> <span data-start="1609.24" data-end="1611.399">this if single then this if and else</span> <span data-start="1611.399" data-end="1615.84">this and we do find those cards into</span> <span data-start="1615.84" data-end="1617.73">this object in step so this is the</span> <span data-start="1617.73" data-end="1618.929">second object that we pass through the</span> <span data-start="1618.929" data-end="1623.149">machine and it's just naming the</span> <span data-start="1623.149" data-end="1629.039">condition as as a string and then define</span> <span data-start="1629.039" data-end="1631.08">another list 8 with any actions</span> <span data-start="1631.08" data-end="1635.639">interacting with it so that's here is</span> <span data-start="1635.639" data-end="1639.87">our new state we have a new open even</span> <span data-start="1639.87" data-end="1642.21">state with different condition but now</span> <span data-start="1642.21" data-end="1644.19">it's with a proper name so if it's empty</span> <span data-start="1644.19" data-end="1646.019">then it's going here if it's single</span> </p>
<p><span data-start="1646.019" data-end="1647.85">Danny screen here if it's nothing then</span> <span data-start="1647.85" data-end="1649.06">is going to the</span> <span data-start="1649.06" data-end="1656.77">stayed which is initialized to this yeah</span> <span data-start="1656.77" data-end="1661.89">now just add another button will open</span> <span data-start="1661.89" data-end="1665.23">even same of an event but with different</span> <span data-start="1665.23" data-end="1670.27">data now we have multiple data and and</span> <span data-start="1670.27" data-end="1672.34">inside the model we have an interaction</span> <span data-start="1672.34" data-end="1674.86">to view the details and go back to the</span> <span data-start="1674.86" data-end="1676.96">ListView so we just passed down the back</span> <span data-start="1676.96" data-end="1681.39">and few events and that's it our</span> <span data-start="1681.39" data-end="1684.45">implementation is now more readable and</span> <span data-start="1684.45" data-end="1686.71">it's easier to read yes</span> <span data-start="1686.71" data-end="1691.6">and now we can inspect this yeah it's</span> <span data-start="1691.6" data-end="1699.28">working all right so let's compare our</span> <span data-start="1699.28" data-end="1701.29">previous implementation the old way to</span> <span data-start="1701.29" data-end="1704.71">the state machine implementation so with</span> <span data-start="1704.71" data-end="1706.66">our solutions we usually use you state</span> <span data-start="1706.66" data-end="1709.3">right but in with this machine we don't</span> <span data-start="1709.3" data-end="1711.13">use it anymore we just use use machine</span> <span data-start="1711.13" data-end="1716.74">and replace those multiple states before</span> <span data-start="1716.74" data-end="1719.23">with just a single call out of the use</span> <span data-start="1719.23" data-end="1723.04">machine and we have to stew things here</span> <span data-start="1723.04" data-end="1725.2">now this is the state and is the event</span> <span data-start="1725.2" data-end="1728.8">and now instead of having those implicit</span> <span data-start="1728.8" data-end="1731.2">starts at state cost which we don't</span> <span data-start="1731.2" data-end="1733.33">really have any idea what does this — oh</span> <span data-start="1733.33" data-end="1735.07">this is doing the same thing actually</span> <span data-start="1735.07" data-end="1737.47">but it's harder to understand we need to</span> <span data-start="1737.47" data-end="1739.18">read this code probably two or three</span> <span data-start="1739.18" data-end="1742">more times to actually understand what's</span> <span data-start="1742" data-end="1744.19">happening on this code but by using the</span> <span data-start="1744.19" data-end="1746.89">machines we can just know what have</span> <span data-start="1746.89" data-end="1748.42">what's happening on this button what's</span> <span data-start="1748.42" data-end="1750.73">happening on this action just by looking</span> <span data-start="1750.73" data-end="1758.65">at once and now our app is more simple</span> <span data-start="1758.65" data-end="1763.96">and easier to understand but we're</span> <span data-start="1763.96" data-end="1765.46">actually just moving away the complexity</span> <span data-start="1765.46" data-end="1767.29">from death to the state machine right</span> <span data-start="1767.29" data-end="1771.66">but the situation is still complex right</span> <span data-start="1771.66" data-end="1774.43">yes it's still complex but the the</span> <span data-start="1774.43" data-end="1776.08">difference between the solution the</span> <span data-start="1776.08" data-end="1777.52">community of the state machine it and</span> <span data-start="1777.52" data-end="1779.14">the competitor of the very first</span> <span data-start="1779.14" data-end="1781.33">implementation is this the machine can</span> <span data-start="1781.33" data-end="1782.71">be visualized easily</span> <span data-start="1782.71" data-end="1786.73">so we're using the same visualizer we</span> <span data-start="1786.73" data-end="1789.97">can visualize all the state in a way</span> <span data-start="1789.97" data-end="1793.06">that that corresponds to the flow that</span> <span data-start="1793.06" data-end="1796.39">we have let me get from the designers so</span> <span data-start="1796.39" data-end="1798.88">this visualization for me it reduces the</span> <span data-start="1798.88" data-end="1802.54">cognitive overload so based on my</span> <span data-start="1802.54" data-end="1804.64">experience the appendage assist now</span> <span data-start="1804.64" data-end="1808.24">since I'll still are feeble it's easier</span> <span data-start="1808.24" data-end="1810.94">to test so we can just test from</span> <span data-start="1810.94" data-end="1812.68">whenever from whichever state to go to</span> <span data-start="1812.68" data-end="1815.35">whichever state and in fact I did all</span> <span data-start="1815.35" data-end="1818.29">the tests so I'm confident enough with</span> <span data-start="1818.29" data-end="1820.51">my machine I am confident that my</span> <span data-start="1820.51" data-end="1824.53">machine will break but a setback free si</span> <span data-start="1824.53" data-end="1828.52">hypothesize apparently not so it's not</span> <span data-start="1828.52" data-end="1832.84">completely bug free so the the bug comes</span> <span data-start="1832.84" data-end="1835.93">not from the state but it came from the</span> <span data-start="1835.93" data-end="1837.58">discrepancies between the state and the</span> <span data-start="1837.58" data-end="1841.45">rendered fuse so I had the correct state</span> <span data-start="1841.45" data-end="1844.51">but you know inside that model and we're</span> <span data-start="1844.51" data-end="1847.06">just so far we're just passing down the</span> <span data-start="1847.06" data-end="1848.5">state of the model right but what's</span> <span data-start="1848.5" data-end="1850.45">happening inside the model is some it's</span> <span data-start="1850.45" data-end="1852.52">kind of it can go wrong over there so</span> <span data-start="1852.52" data-end="1854.92">the box is coming from that model view</span> <span data-start="1854.92" data-end="1858.19">so instead of just testing the state we</span> <span data-start="1858.19" data-end="1859.81">should also have tested the rendered</span> <span data-start="1859.81" data-end="1861.64">view as well in this case we should have</span> <span data-start="1861.64" data-end="1866.5">tested Model View so that's why I'm</span> <span data-start="1866.5" data-end="1870.25">suggesting us to consider integration</span> <span data-start="1870.25" data-end="1874.03">tests so my lesson slot in this journey</span> <span data-start="1874.03" data-end="1877.84">is when we are using state machines it</span> <span data-start="1877.84" data-end="1881.35">must be designed thoroughly because it's</span> <span data-start="1881.35" data-end="1884.47">a complex stuff it so the state machines</span> <span data-start="1884.47" data-end="1887.05">will just work but it works as we design</span> <span data-start="1887.05" data-end="1891.43">so if we design it badly then it will go</span> <span data-start="1891.43" data-end="1894.07">spit and yes it's easy to pass the state</span> <span data-start="1894.07" data-end="1895.63">because just just testing the string</span> <span data-start="1895.63" data-end="1898.24">testing the object right but don't</span> <span data-start="1898.24" data-end="1901.89">forget to test the rendered fuse and</span> <span data-start="1901.89" data-end="1905.29">another thing that I learned is there's</span> <span data-start="1905.29" data-end="1907.9">no super about it we cannot use still</span> <span data-start="1907.9" data-end="1910.42">machines everywhere just like we cannot</span> <span data-start="1910.42" data-end="1912.85">use redux everywhere and we cannot use</span> <span data-start="1912.85" data-end="1916.14">get derived state from props</span> <span data-start="1916.14" data-end="1921.72">anyway yeah so just be mindful that we</span> <span data-start="1921.72" data-end="1928.22">might not need state machines as well so</span> <span data-start="1928.22" data-end="1930.57">my takeaway from this experience is</span> <span data-start="1930.57" data-end="1933.45">please use state machines sparingly so</span> <span data-start="1933.45" data-end="1935.94">use it when you need it and when you use</span> <span data-start="1935.94" data-end="1938.34">it it's all isolate the state management</span> <span data-start="1938.34" data-end="1940.26">into custom hooks so it's easier to</span> <span data-start="1940.26" data-end="1944.46">understand and do pass and always test</span> <span data-start="1944.46" data-end="1946.62">your code thoroughly which means testing</span> <span data-start="1946.62" data-end="1951.69">all the codes including the few so in</span> <span data-start="1951.69" data-end="1953.4">this talk I very scratch the surface of</span> <span data-start="1953.4" data-end="1955.2">state machines concepts there are a lot</span> <span data-start="1955.2" data-end="1958.89">of things more instead machines you can</span> <span data-start="1958.89" data-end="1961.309">just read out read up to the</span> <span data-start="1961.309" data-end="1964.59">documentation a lot of things even in</span> <span data-start="1964.59" data-end="1966.63">fact I didn't I also didn't learn all</span> <span data-start="1966.63" data-end="1968.79">the stuff there yet so I just explained</span> <span data-start="1968.79" data-end="1972.87">what I implemented so I asked suggesting</span> <span data-start="1972.87" data-end="1976.2">you to learn to testing trophy by</span> <span data-start="1976.2" data-end="1978.87">considered I actually took his course</span> <span data-start="1978.87" data-end="1982.41">and it seems much more useful to prevent</span> <span data-start="1982.41" data-end="1987.24">some bugs happening in our code now so</span> <span data-start="1987.24" data-end="1989.76">we can get enough confidence within our</span> <span data-start="1989.76" data-end="1994.49">code so I think that's all thank you for</span> <span data-start="1994.49" data-end="1997.11">your attention and I want to give a</span> <span data-start="1997.11" data-end="1999.33">special thanks to David courtship which</span> <span data-start="1999.33" data-end="2003.11">is the creator of X state and Rodrigo</span> </p>
<p><span data-start="2003.11" data-end="2006.02">Pombo for his amazing cool surfer that I</span> <span data-start="2006.02" data-end="2008.69">used here even though it is still in</span> <span data-start="2008.69" data-end="2010.52">alpha version but it's pretty good right</span> <span data-start="2010.52" data-end="2014.12">I think nothing wrong happens so you can</span> <span data-start="2014.12" data-end="2016.91">access this site in this ring and this</span> </p>
</section>