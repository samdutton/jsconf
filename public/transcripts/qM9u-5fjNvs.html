<section>
<p><span data-start="31.789" data-end="34.64">yes so as Brendan said I work on Jess</span> <span data-start="34.64" data-end="38.66">next so today I want to talk about</span> <span data-start="38.66" data-end="40.91">modules that we work on a lot of stuff</span> <span data-start="40.91" data-end="42.86">for Jaya snacks and I'm happy to talk</span> <span data-start="42.86" data-end="45.199">with people about any of it but uh but</span> <span data-start="45.199" data-end="46.67">for today I want to I want to talk about</span> <span data-start="46.67" data-end="47.75">modules because I think it's really</span> <span data-start="47.75" data-end="50.87">important so so modules are all about</span> <span data-start="50.87" data-end="54.53">great libraries and languages is really</span> <span data-start="54.53" data-end="56.449">nothing without its libraries it's the</span> <span data-start="56.449" data-end="60.769">lifeblood of a language and a javascript</span> <span data-start="60.769" data-end="63.019">is doing well for libraries we've got</span> <span data-start="63.019" data-end="66.02">we've got an impressive field and it's</span> <span data-start="66.02" data-end="68.6">growing all the time it's exciting to</span> <span data-start="68.6" data-end="74.08">see I think it's only getting better but</span> <span data-start="74.08" data-end="76.7">if we're really honest with ourselves we</span> <span data-start="76.7" data-end="78.02">have to admit that we're kind of getting</span> <span data-start="78.02" data-end="83.479">pummeled by our older siblings so this</span> <span data-start="83.479" data-end="86.96">guy over here as of this morning they're</span> <span data-start="86.96" data-end="92.99">up to 20 2529 packages on Sipan this guy</span> <span data-start="92.99" data-end="97.6">over here closing in on 14,500 packages</span> <span data-start="97.6" data-end="101.3">for python and of course he wasn't in</span> <span data-start="101.3" data-end="103.7">the original picture but this guy is</span> <span data-start="103.7" data-end="106.1">actually the the big heavyweight here as</span> <span data-start="106.1" data-end="108.79">of this morning Ruby gems are up to 20</span> <span data-start="108.79" data-end="113.39">3501 those are those are impressive</span> <span data-start="113.39" data-end="114.89">numbers but I don't see any reason why</span> <span data-start="114.89" data-end="116.54">we shouldn't be able to to reach those</span> <span data-start="116.54" data-end="118.4">numbers ourselves with JavaScript I mean</span> <span data-start="118.4" data-end="120.47">we got the whole web behind us so it's</span> <span data-start="120.47" data-end="121.75">not like we're talking about a small</span> <span data-start="121.75" data-end="125.39">playing field so I want to argue that</span> <span data-start="125.39" data-end="127.13">the language is actually not quite</span> <span data-start="127.13" data-end="130.729">giving us the tools that we need to to</span> <span data-start="130.729" data-end="133.519">support it now on the server side we're</span> <span data-start="133.519" data-end="136.31">catching up so we're sort of we're still</span> <span data-start="136.31" data-end="139.25">the little brother but but NPM is</span> <span data-start="139.25" data-end="140.72">catching up fast i think we're closing</span> <span data-start="140.72" data-end="143.81">in on about 2,000 packages for npm so</span> <span data-start="143.81" data-end="147.65">that's that's getting better but</span> <span data-start="147.65" data-end="149.959">especially when you're talking about</span> <span data-start="149.959" data-end="154.67">writing a library for the browser or</span> <span data-start="154.67" data-end="156.08">even worse if you're trying to write a</span> <span data-start="156.08" data-end="159.2">library that works in in any environment</span> <span data-start="159.2" data-end="160.999">that's the significant its host</span> <span data-start="160.999" data-end="162.889">environment the language isn't really</span> <span data-start="162.889" data-end="165.38">helping you right now so JavaScript kind</span> <span data-start="165.38" data-end="167.33">hands you this this little ball of clay</span> <span data-start="167.33" data-end="170.51">and it's a very malleable ball of clay</span> <span data-start="170.51" data-end="172.88">we've actually figured out how to do a</span> <span data-start="172.88" data-end="174.23">lot with this ball of clay but every</span> <span data-start="174.23" data-end="175.64">time you start your new application or</span> <span data-start="175.64" data-end="177.17">your new library you've got that same</span> <span data-start="177.17" data-end="180.08">little lump of clay and and it's kind of</span> <span data-start="180.08" data-end="185.93">all up to you so so let's see what you</span> <span data-start="185.93" data-end="187.52">know what what you have to do if you</span> <span data-start="187.52" data-end="189.5">want to write your own module so the</span> <span data-start="189.5" data-end="191.2">first approach that that we've kind of</span> <span data-start="191.2" data-end="195.44">all learned is the module pattern and</span> <span data-start="195.44" data-end="199.82">this this lets this makes life nice for</span> <span data-start="199.82" data-end="201.98">the client it means the client can</span> <span data-start="201.98" data-end="203.24">really do something as simple as a</span> <span data-start="203.24" data-end="205.97">script source equals and just add your</span> <span data-start="205.97" data-end="207.71">library to their program and everything</span> <span data-start="207.71" data-end="209.77">works fine for them for the most part</span> <span data-start="209.77" data-end="211.85">but for you as the library writer</span> <span data-start="211.85" data-end="213.35">there's a whole lot of bookkeeping you</span> <span data-start="213.35" data-end="216.26">have to do this is kind of like the bare</span> <span data-start="216.26" data-end="218.54">minimum of what you need to write a</span> <span data-start="218.54" data-end="225.13">library for the browser so to start with</span> <span data-start="225.13" data-end="227.24">my highlighting isn't going to show up</span> <span data-start="227.24" data-end="229.4">very well that's all right so to start</span> <span data-start="229.4" data-end="230.9">with you you wrap everything in the</span> <span data-start="230.9" data-end="234.82">immediately invoked function expression</span> <span data-start="234.82" data-end="237.83">down here we pass in the global object</span> <span data-start="237.83" data-end="239.87">this won't even work if you're trying to</span> <span data-start="239.87" data-end="242.15">create something that's that's multi</span> <span data-start="242.15" data-end="244.25">environment so you have to play even</span> <span data-start="244.25" data-end="246.95">more trickery to get at the window I</span> <span data-start="246.95" data-end="248.87">were to get at the global object if it's</span> <span data-start="248.87" data-end="253.54">not called window may be up here you uh</span> <span data-start="253.54" data-end="257.6">so yeah down here you actually put all</span> <span data-start="257.6" data-end="259.7">your exports in an object up here at the</span> <span data-start="259.7" data-end="262.22">top you might save a local copy of your</span> <span data-start="262.22" data-end="263.87">library in case you need to refer to it</span> <span data-start="263.87" data-end="265.97">during the body and then the most</span> <span data-start="265.97" data-end="267.35">miserable part is this uninstallation</span> <span data-start="267.35" data-end="269.12">process that you need to do to be a good</span> <span data-start="269.12" data-end="272.9">citizen so just in case the global name</span> <span data-start="272.9" data-end="274.67">that you chose is the same global name</span> <span data-start="274.67" data-end="277.55">that somebody else chose or maybe you</span> <span data-start="277.55" data-end="279.83">just have a user that doesn't want to</span> <span data-start="279.83" data-end="281.57">trash the global namespace and they'd</span> <span data-start="281.57" data-end="283.01">like to be able to get at your library</span> <span data-start="283.01" data-end="285.35">without it trashing the namespace you</span> <span data-start="285.35" data-end="289.25">have to sort of create this little do</span> <span data-start="289.25" data-end="292.28">this little dance to restore the global</span> <span data-start="292.28" data-end="293.419">object to whatever state it was in</span> <span data-start="293.419" data-end="297.1">before your library got installed and</span> <span data-start="297.1" data-end="299.24">right here in the middle</span> <span data-start="299.24" data-end="300.68">these three lines that's sort of like</span> <span data-start="300.68" data-end="302.15">the core of the library that's the</span> <span data-start="302.15" data-end="303.919">actual contents here the rest of this is</span> <span data-start="303.919" data-end="307.009">just boilerplate this is a huge amount</span> <span data-start="307.009" data-end="308.12">of overhead that you have to pay every</span> <span data-start="308.12" data-end="310.46">time you want to create a library that's</span> <span data-start="310.46" data-end="313.009">just too expensive and just the fact</span> <span data-start="313.009" data-end="315.8">that it's a pattern language geeks like</span> <span data-start="315.8" data-end="317.33">me when we when we whenever we hear</span> <span data-start="317.33" data-end="319.97">people say design pattern it sort of</span> <span data-start="319.97" data-end="322.819">sends off a red alarm in our head I like</span> <span data-start="322.819" data-end="325.34">this quote from Paul Graham he says I</span> <span data-start="325.34" data-end="326.539">wonder if these patterns are not</span> <span data-start="326.539" data-end="328.37">sometimes evidence of the human compiler</span> <span data-start="328.37" data-end="330.47">at work I don't want to be a compiler I</span> <span data-start="330.47" data-end="331.789">don't think anyone should be a compiler</span> </p>
<p><span data-start="331.789" data-end="332.84">I think your compiler should be a</span> <span data-start="332.84" data-end="336.8">compiler so if you don't want to go</span> <span data-start="336.8" data-end="338.389">through all of that pain another choice</span> <span data-start="338.389" data-end="340.909">another option that you have is to take</span> <span data-start="340.909" data-end="343.58">some existing framework and just write</span> <span data-start="343.58" data-end="345.259">your your library as a plug-in for that</span> <span data-start="345.259" data-end="349.639">framework so if you are willing to make</span> <span data-start="349.639" data-end="352.55">the assumption that your users will use</span> <span data-start="352.55" data-end="355.4">jQuery for example or that they'll have</span> <span data-start="355.4" data-end="357.199">to use jQuery to use your library you</span> <span data-start="357.199" data-end="359.72">can just extend jQuery through their</span> <span data-start="359.72" data-end="363.199">their plug-in mechanism that's lower</span> <span data-start="363.199" data-end="365.21">overhead on your part for creating a</span> <span data-start="365.21" data-end="368.24">library but it's a crappy deal that that</span> <span data-start="368.24" data-end="369.74">you just had to make which was basically</span> <span data-start="369.74" data-end="371.389">i'm willing to restrict myself to only</span> <span data-start="371.389" data-end="372.8">those users who are using this</span> <span data-start="372.8" data-end="375.52">particular framework so that's no fun</span> <span data-start="375.52" data-end="378.889">now on the on the server side common j/s</span> <span data-start="378.889" data-end="380.69">has really drastically improved the</span> <span data-start="380.69" data-end="384.11">state of things so common Jas is is very</span> <span data-start="384.11" data-end="386.3">much a big deal when you when you write</span> <span data-start="386.3" data-end="387.949">your note j/s app it's really as simple</span> <span data-start="387.949" data-end="391.43">as sticking it in a separate file making</span> <span data-start="391.43" data-end="393.74">sure it's in the right directory and you</span> <span data-start="393.74" data-end="397.28">can just say require and common GS is is</span> <span data-start="397.28" data-end="399.53">starting to pick up steam in the browser</span> <span data-start="399.53" data-end="403.49">but this is what it looks like when you</span> <span data-start="403.49" data-end="408.11">want to use a common j/s library in the</span> <span data-start="408.11" data-end="409.88">browser environment and the reason for</span> <span data-start="409.88" data-end="411.199">this of course is because of the</span> <span data-start="411.199" data-end="415.25">non-blocking i/o and javascript so we</span> <span data-start="415.25" data-end="417.8">all know the the pain of the nested call</span> <span data-start="417.8" data-end="423.05">back issue in javascript and james burke</span> <span data-start="423.05" data-end="425.06">has done a good job and required j/s of</span> <span data-start="425.06" data-end="427.13">making it a little less painful because</span> <span data-start="427.13" data-end="429.82">you can sort of you can give an array of</span> <span data-start="429.82" data-end="433.19">modules that you want to to require so</span> <span data-start="433.19" data-end="435.23">there's only one nested call back but</span> <span data-start="435.23" data-end="437.93">this idea that you have to slap this</span> <span data-start="437.93" data-end="439.82">boilerplate boilerplate around your</span> <span data-start="439.82" data-end="441.71">program and nest your program into the</span> <span data-start="441.71" data-end="445.34">middle there is is really just too high</span> <span data-start="445.34" data-end="446.81">of an overhead especially because now</span> <span data-start="446.81" data-end="448.1">we're talking about overhead on the part</span> <span data-start="448.1" data-end="450.29">of the clients so now you're saying if</span> <span data-start="450.29" data-end="452.63">you want to use my library you every</span> <span data-start="452.63" data-end="454.43">single one of you users of my library</span> <span data-start="454.43" data-end="458.15">you're going to have to pay this cost to</span> <span data-start="458.15" data-end="461.51">buy into it so I think we we need to be</span> <span data-start="461.51" data-end="464.42">able to do better than that and on top</span> <span data-start="464.42" data-end="465.77">of that there are just certain things</span> <span data-start="465.77" data-end="467.33">about the semantics of JavaScript that</span> <span data-start="467.33" data-end="469.7">are that are not ideal that common J's</span> <span data-start="469.7" data-end="471.02">can't really do anything about because</span> <span data-start="471.02" data-end="473.03">common Jas didn't didn't have the luxury</span> <span data-start="473.03" data-end="475.61">of changing the language so when you</span> <span data-start="475.61" data-end="476.99">create your separate module and you put</span> <span data-start="476.99" data-end="478.4">it in a separate file there's still</span> <span data-start="478.4" data-end="480.05">nothing common j/s can do to stop you</span> <span data-start="480.05" data-end="482.45">from making a mistake and assigning to a</span> <span data-start="482.45" data-end="485.72">global variable so if i accidentally</span> <span data-start="485.72" data-end="488.27">assign to I in inside of my common J's</span> <span data-start="488.27" data-end="491.24">library I'm going to create a global</span> <span data-start="491.24" data-end="493.61">variable and have all the the trouble</span> <span data-start="493.61" data-end="498.47">that global variables cause so this is</span> <span data-start="498.47" data-end="500.99">sort of all prelude to why I think</span> <span data-start="500.99" data-end="503.05">modules for Jas next are important and</span> <span data-start="503.05" data-end="507.14">why on TC 39 the the ACMA script</span> <span data-start="507.14" data-end="510.44">committee we've been working on this so</span> <span data-start="510.44" data-end="514.16">in our design creating a module is</span> <span data-start="514.16" data-end="517.7">really as simple as this you just use</span> <span data-start="517.7" data-end="519.8">the new module keyword you give it a</span> <span data-start="519.8" data-end="522.2">name you put a couple of braces and then</span> <span data-start="522.2" data-end="523.61">you put whatever you want inside the</span> <span data-start="523.61" data-end="526.28">body and by default when you put a</span> <span data-start="526.28" data-end="527.63">variable declaration that variable</span> <span data-start="527.63" data-end="529.76">declaration is local to the module it's</span> <span data-start="529.76" data-end="531.89">not exported so if you want to export</span> <span data-start="531.89" data-end="533.18">something with the rest of the world you</span> <span data-start="533.18" data-end="536.24">say export so this immediately gets you</span> <span data-start="536.24" data-end="538.79">away from the iffy the immediately</span> <span data-start="538.79" data-end="541.91">invoked function expression but it's</span> <span data-start="541.91" data-end="543.2">still creating that that one global</span> <span data-start="543.2" data-end="546.17">variable and I think the common JSO</span> <span data-start="546.17" data-end="547.76">approach is a good one where you might</span> <span data-start="547.76" data-end="549.92">also like to just put the contents of</span> <span data-start="549.92" data-end="551.99">your module in another file and now you</span> <span data-start="551.99" data-end="553.73">don't even have to name the module now</span> <span data-start="553.73" data-end="555.8">you can let your client just import it</span> <span data-start="555.8" data-end="558.17">however they were require your module</span> <span data-start="558.17" data-end="560.03">however they want to so this is sort of</span> <span data-start="560.03" data-end="561.71">the equivalent of the previous slide</span> <span data-start="561.71" data-end="564.4">it's just being done in a separate file</span> <span data-start="564.4" data-end="566.99">so the client now just gets to say</span> <span data-start="566.99" data-end="569.029">something like this I should say that</span> <span data-start="569.029" data-end="570.74">like none of the none of the syntax is</span> <span data-start="570.74" data-end="575.39">absolutely set in stone and people like</span> <span data-start="575.39" data-end="577.25">to argue about the syntax and and you</span> <span data-start="577.25" data-end="579.05">know we may continue discussing the</span> <span data-start="579.05" data-end="581.18">syntax but this hopefully gives you a</span> <span data-start="581.18" data-end="583.66">flavor of what it is we're trying to do</span> <span data-start="583.66" data-end="586.19">so again we have this new module keyword</span> <span data-start="586.19" data-end="588.77">and the client can say i'm going to call</span> <span data-start="588.77" data-end="590.69">their lip my lib and i'm going to</span> <span data-start="590.69" data-end="592.97">require it from the separate file so</span> <span data-start="592.97" data-end="595.94">notice now you get to do external module</span> <span data-start="595.94" data-end="598.07">loading from within javascript no more</span> <span data-start="598.07" data-end="602.33">script tag necessary this also means</span> <span data-start="602.33" data-end="604.01">that it's one solution for the language</span> <span data-start="604.01" data-end="606.38">that works whether it's a nodejs or in</span> <span data-start="606.38" data-end="611">the browser in a mobile app whatever the</span> <span data-start="611" data-end="613.279">next school thing is that you can put as</span> <span data-start="613.279" data-end="614.87">many of these module declarations in a</span> <span data-start="614.87" data-end="616.85">row as you want without having to do any</span> <span data-start="616.85" data-end="620.209">of those nested callbacks so we're doing</span> <span data-start="620.209" data-end="622.85">io here so what's the trick how did I do</span> <span data-start="622.85" data-end="625.97">this without avoiding blocking the whole</span> <span data-start="625.97" data-end="628.22">browser the answer is that there's</span> <span data-start="628.22" data-end="631.04">really two stages involved in running a</span> </p>
<p><span data-start="631.04" data-end="632.75">JavaScript program and this is true in</span> <span data-start="632.75" data-end="635.48">all modern JavaScript engines even</span> <span data-start="635.48" data-end="637.1">though it's you know we think of it as</span> <span data-start="637.1" data-end="638.839">an interpreted language every JavaScript</span> <span data-start="638.839" data-end="639.89">engine actually has a really</span> <span data-start="639.89" data-end="642.5">sophisticated compiler in it so when</span> <span data-start="642.5" data-end="644.57">javascript code comes into the engine</span> <span data-start="644.57" data-end="646.209">the engine actually compiles it first</span> <span data-start="646.209" data-end="648.11">turns it into some sort of intermediate</span> <span data-start="648.11" data-end="650.06">representation or maybe into assembly</span> <span data-start="650.06" data-end="652.25">and then every time you call that code</span> <span data-start="652.25" data-end="653.75">it's actually going to run the compiled</span> <span data-start="653.75" data-end="657.74">code so we want to exploit that fact</span> <span data-start="657.74" data-end="660.95">that there's compilation involved so we</span> <span data-start="660.95" data-end="664.82">actually shove the i/o portion into the</span> <span data-start="664.82" data-end="667.399">compilation phase so all of these</span> <span data-start="667.399" data-end="669.47">requires are happening before any of the</span> <span data-start="669.47" data-end="671.77">code starts running and that's the trick</span> <span data-start="671.77" data-end="674.99">when you shove that into for example the</span> <span data-start="674.99" data-end="677">browser the browser can do the i/o in a</span> <span data-start="677" data-end="678.62">separate thread it doesn't have to block</span> <span data-start="678.62" data-end="682.22">the main UI thread so we have this</span> <span data-start="682.22" data-end="684.8">compilation phase that does all of the</span> <span data-start="684.8" data-end="686.87">loading in whatever order it wants on</span> <span data-start="686.87" data-end="688.43">whatever threads background threads at</span> <span data-start="688.43" data-end="690.589">once and then we have the separate</span> <span data-start="690.589" data-end="693.05">execution phase and that's where we once</span> <span data-start="693.05" data-end="695.3">again will enforce the sequential order</span> <span data-start="695.3" data-end="698.329">of execution like 0 is in JavaScript so</span> <span data-start="698.329" data-end="700.85">by introducing news</span> <span data-start="700.85" data-end="703.009">tax into the language and and extending</span> <span data-start="703.009" data-end="705.5">the existing compilers we actually will</span> <span data-start="705.5" data-end="707.87">allow you to write your requires just</span> <span data-start="707.87" data-end="709.91">the way you want to write them without</span> <span data-start="709.91" data-end="715.19">blocking the UI thread some more</span> <span data-start="715.19" data-end="717.29">features of the module system we can</span> <span data-start="717.29" data-end="718.73">nest module so here's a module</span> <span data-start="718.73" data-end="720.589">declaration inside of another file that</span> <span data-start="720.589" data-end="724.459">itself is defining a module and you can</span> <span data-start="724.459" data-end="726.079">refer to modules by name just like any</span> <span data-start="726.079" data-end="727.94">other binding in the language so so here</span> <span data-start="727.94" data-end="729.17">we're just sort of treating this module</span> <span data-start="729.17" data-end="732.68">like an object and its export map is</span> <span data-start="732.68" data-end="734.72">like a property of that object so we can</span> <span data-start="734.72" data-end="739.519">just refer to it as utila but we can</span> <span data-start="739.519" data-end="741.199">also get compile time checking again</span> <span data-start="741.199" data-end="743.66">we're extending the compiler here so we</span> <span data-start="743.66" data-end="745.67">know what these modules are at compile</span> <span data-start="745.67" data-end="748.18">time the compiler can actually tell us</span> <span data-start="748.18" data-end="750.649">exactly what the exports of that module</span> <span data-start="750.649" data-end="753.649">are so here we're saying import utilizzo</span> <span data-start="753.649" data-end="755.81">variable binding but if we misspelled</span> <span data-start="755.81" data-end="759.41">map the compiler will tell us right away</span> <span data-start="759.41" data-end="761.69">before it starts running the program you</span> <span data-start="761.69" data-end="764.209">got a you got a variable name wrong so</span> <span data-start="764.209" data-end="765.8">one of the most annoying bugs I find</span> <span data-start="765.8" data-end="767.47">when I'm writing JavaScript code is</span> <span data-start="767.47" data-end="770.029">whenever I fat finger a variable name I</span> <span data-start="770.029" data-end="771.86">don't find out till somewhere in testing</span> <span data-start="771.86" data-end="773.54">or if I forgot to test that particular</span> <span data-start="773.54" data-end="776.089">path I don't find out till the codes</span> <span data-start="776.089" data-end="779.389">already out there and running in in</span> <span data-start="779.389" data-end="781.899">harmony and jace next we're actually</span> <span data-start="781.899" data-end="785.389">designing it so that all unbound</span> <span data-start="785.389" data-end="787.22">variables will give you an early error</span> <span data-start="787.22" data-end="789.319">or compile time error and that includes</span> <span data-start="789.319" data-end="794.66">a bogus imports the other thing we can</span> <span data-start="794.66" data-end="796.939">do again exploiting this compile time</span> <span data-start="796.939" data-end="798.68">information we can say import util dot</span> <span data-start="798.68" data-end="801.199">star which you know some people think</span> <span data-start="801.199" data-end="802.759">that's bad style but for scripting</span> <span data-start="802.759" data-end="805.04">that's often just really useful if</span> <span data-start="805.04" data-end="806.63">you've got some module that has 200</span> <span data-start="806.63" data-end="808.97">exports and you want to use 120 of them</span> <span data-start="808.97" data-end="810.709">and you don't want to name them all by</span> <span data-start="810.709" data-end="813.41">name you can just say import that module</span> <span data-start="813.41" data-end="816.709">dot star and this doesn't have all the</span> <span data-start="816.709" data-end="821.54">problems that with has so with is you</span> <span data-start="821.54" data-end="823.069">know the problems of width come from the</span> <span data-start="823.069" data-end="824.75">fact that it's doing dynamic variable</span> <span data-start="824.75" data-end="826.069">binding what we're doing here is</span> <span data-start="826.069" data-end="827.99">completely compile-time variable binding</span> <span data-start="827.99" data-end="830">so the compiler knows what all of those</span> <span data-start="830" data-end="833.86">variables are</span> <span data-start="833.87" data-end="836.3">another thing that we are inheriting</span> <span data-start="836.3" data-end="840.7">from common Jas here is the notion that</span> <span data-start="840.7" data-end="842.81">models that you require our Singleton's</span> <span data-start="842.81" data-end="845.87">so if you require the same the same</span> <span data-start="845.87" data-end="848.21">module multiple times in the same</span> <span data-start="848.21" data-end="850.19">program you'll get one single instance</span> <span data-start="850.19" data-end="853.7">of that module which is just it's just</span> <span data-start="853.7" data-end="859.16">what you want so those were all sort of</span> <span data-start="859.16" data-end="863.3">static patterns but of course for you</span> <span data-start="863.3" data-end="868.4">know real serious JavaScript apps you</span> <span data-start="868.4" data-end="870.65">often need to be able to do dynamic or</span> <span data-start="870.65" data-end="873.23">lazy or conditional loading of modules</span> <span data-start="873.23" data-end="876.77">so the static modules that I was showing</span> <span data-start="876.77" data-end="879.2">you were sort of the simple easy way to</span> <span data-start="879.2" data-end="881.36">do the common cases but if you want to</span> <span data-start="881.36" data-end="884.27">do dynamic loading we also have an API</span> <span data-start="884.27" data-end="886.88">included in the design that lets you do</span> <span data-start="886.88" data-end="889.1">make dynamic decisions about requiring</span> <span data-start="889.1" data-end="890.57">and that's where you actually do have to</span> <span data-start="890.57" data-end="892.76">use the callbacks so for example if you</span> <span data-start="892.76" data-end="894.29">have some easter egg on your site and</span> <span data-start="894.29" data-end="896.36">you don't expect it to be clicked very</span> <span data-start="896.36" data-end="897.77">often and you don't want everyone to pay</span> <span data-start="897.77" data-end="899.87">the cost of loading the easter egg</span> <span data-start="899.87" data-end="903.02">module you can do you know on click for</span> <span data-start="903.02" data-end="906.23">the the easter egg element you'll then</span> <span data-start="906.23" data-end="908.51">make the dynamic decision to call this</span> <span data-start="908.51" data-end="910.67">require method on a module loader object</span> <span data-start="910.67" data-end="912.62">which I'll talk about in a minute give</span> <span data-start="912.62" data-end="914.93">it the URL and the callback that takes</span> <span data-start="914.93" data-end="917.42">the dynamically loaded module okay so</span> <span data-start="917.42" data-end="919.94">the design accommodates both static uses</span> <span data-start="919.94" data-end="923.41">of modules and dynamic uses of modules</span> <span data-start="923.41" data-end="928.27">okay that's sort of the basic highlights</span> <span data-start="928.27" data-end="931.85">this might get a little Trippier now I</span> <span data-start="931.85" data-end="937.07">hope that's okay I hope it's fun there's</span> <span data-start="937.07" data-end="938.57">there's something kind of lurking</span> <span data-start="938.57" data-end="941.39">underneath here that gets at the heart</span> <span data-start="941.39" data-end="943.61">of one of the really mind twisting</span> <span data-start="943.61" data-end="947.92">aspects of javascript javascript</span> <span data-start="947.92" data-end="950.72">actually gives you this crazy ability to</span> <span data-start="950.72" data-end="954.709">eval inside of your eval I'll spare you</span> <span data-start="954.709" data-end="962.6">the the yo dog jokes but so we can do</span> <span data-start="962.6" data-end="964.459">things like eval of eval of eval of eval</span> <span data-start="964.459" data-end="966.5">in JavaScript and this this might seem</span> <span data-start="966.5" data-end="967.79">like a crazy parlor trick</span> <span data-start="967.79" data-end="972.68">um and in fact you know there's there's</span> <span data-start="972.68" data-end="974.06">lots of people who have learned that</span> <span data-start="974.06" data-end="976.67">that we should never touch eval eval is</span> <span data-start="976.67" data-end="978.35">evil all of those things we've all heard</span> <span data-start="978.35" data-end="981.53">it and I'm so inspired by Andrew DuPont</span> <span data-start="981.53" data-end="983.51">who who's telling us all relax</span> <span data-start="983.51" data-end="985.61">everything is ok you just got to know</span> <span data-start="985.61" data-end="989.18">what you're doing so I personally don't</span> <span data-start="989.18" data-end="991.37">want to see eval go away I think eval is</span> <span data-start="991.37" data-end="993.8">an incredibly powerful tool that's not</span> <span data-start="993.8" data-end="996.41">always the right tool so you know we all</span> <span data-start="996.41" data-end="998.68">know we've all seen these examples of</span> <span data-start="998.68" data-end="1001.09">ridiculous programs that use eval where</span> <span data-start="1001.09" data-end="1004">they had no business doing so you know</span> <span data-start="1004" data-end="1005.17">when you can use bracket notation</span> <span data-start="1005.17" data-end="1007.48">there's absolutely no reason to be using</span> <span data-start="1007.48" data-end="1011.56">eval but that said there's plenty of</span> <span data-start="1011.56" data-end="1013.36">examples where I can't think of anything</span> <span data-start="1013.36" data-end="1015.19">other than eval that will do the trick</span> <span data-start="1015.19" data-end="1018.72">so if i want to write a little</span> <span data-start="1018.72" data-end="1021.07">command-line interface for javascript a</span> <span data-start="1021.07" data-end="1022.81">little JavaScript shell how am I going</span> <span data-start="1022.81" data-end="1024.58">to do that without evil am I going to</span> <span data-start="1024.58" data-end="1027.13">write my own JavaScript interpreter just</span> <span data-start="1027.13" data-end="1029.53">to implement that that seems absurd</span> <span data-start="1029.53" data-end="1031.39">that's exactly what eval was built for</span> <span data-start="1031.39" data-end="1033.43">and this I mean this site you know is</span> <span data-start="1033.43" data-end="1037.21">maybe not the most you know full scale</span> <span data-start="1037.21" data-end="1040.21">web app in the world but there are real</span> <span data-start="1040.21" data-end="1041.86">web apps that need to evaluate</span> </p>
<p><span data-start="1041.86" data-end="1044.44">JavaScript code for real serious</span> <span data-start="1044.44" data-end="1047.2">purposes we've seen some some awesome</span> <span data-start="1047.2" data-end="1054.04">demos yesterday of the ACE editor of</span> <span data-start="1054.04" data-end="1057.1">course there's code mirror and when you</span> <span data-start="1057.1" data-end="1058.81">have an IDE that somebody's editing</span> <span data-start="1058.81" data-end="1060.16">their JavaScript code and they want to</span> <span data-start="1060.16" data-end="1062.02">run that JavaScript code well that's</span> <span data-start="1062.02" data-end="1063.91">that's evil right the the cloud-based</span> <span data-start="1063.91" data-end="1065.71">editors are written in JavaScript</span> <span data-start="1065.71" data-end="1067.93">they're taking JavaScript code and</span> <span data-start="1067.93" data-end="1069.85">running that JavaScript code so that's</span> <span data-start="1069.85" data-end="1072.25">an eval inside of an eval there's sort</span> <span data-start="1072.25" data-end="1074.38">of a hidden inception inside of every</span> <span data-start="1074.38" data-end="1078.1">one of these web apps but there is kind</span> <span data-start="1078.1" data-end="1080.53">of a nuisance of that eval which is the</span> <span data-start="1080.53" data-end="1082.57">fact that every one of them is sort of</span> <span data-start="1082.57" data-end="1084.69">sharing this one single global namespace</span> <span data-start="1084.69" data-end="1088.6">so if I'm writing my own cloud-based ide</span> <span data-start="1088.6" data-end="1090.49">and I'm taking some arbitrary strangers</span> </p>
<p><span data-start="1090.49" data-end="1092.35">JavaScript code and I'm running it I'd</span> <span data-start="1092.35" data-end="1094.21">really rather run it inside of some sort</span> <span data-start="1094.21" data-end="1096.04">of a sandbox so that i can make sure</span> <span data-start="1096.04" data-end="1097.51">that their codes not accidentally going</span> <span data-start="1097.51" data-end="1099.13">to trip up on the javascript code that</span> <span data-start="1099.13" data-end="1101.23">implemented the ide itself</span> <span data-start="1101.23" data-end="1103.63">and if they're going to do things like</span> <span data-start="1103.63" data-end="1106.72">hack the the prototypes of the standard</span> <span data-start="1106.72" data-end="1108.85">built-ins I don't want that to mess up</span> <span data-start="1108.85" data-end="1112.299">the operation of the IDE itself so I'd</span> <span data-start="1112.299" data-end="1115.27">really like to be able to kind of create</span> <span data-start="1115.27" data-end="1117.13">these nested evals and somewhat of a</span> <span data-start="1117.13" data-end="1119.95">more protected setting so I showed you</span> <span data-start="1119.95" data-end="1122.22">that module loader dot require before</span> <span data-start="1122.22" data-end="1127.33">module loaders are actually the the way</span> <span data-start="1127.33" data-end="1129.549">that we can do nested evaluation in a</span> <span data-start="1129.549" data-end="1131.23">more protected sandbox a module loader</span> <span data-start="1131.23" data-end="1134.74">is itself a sandbox so it's module</span> <span data-start="1134.74" data-end="1138.82">loaders all the way down and we can take</span> <span data-start="1138.82" data-end="1140.62">an existing loader say parent loader and</span> <span data-start="1140.62" data-end="1143.89">create a new one and we get a lot of</span> <span data-start="1143.89" data-end="1145.51">bells and whistles where we can control</span> <span data-start="1145.51" data-end="1148.929">exactly what that sandbox does and</span> <span data-start="1148.929" data-end="1150.46">doesn't allow what it shares with its</span> <span data-start="1150.46" data-end="1152.2">parent and what it doesn't and we can</span> <span data-start="1152.2" data-end="1154.03">and we can eval inside of that loader or</span> <span data-start="1154.03" data-end="1155.98">we can require external modules with</span> <span data-start="1155.98" data-end="1158.02">that loader so some of the things that</span> <span data-start="1158.02" data-end="1161.08">these sandboxes let you do you can</span> <span data-start="1161.08" data-end="1163.24">control the instance caching that that</span> <span data-start="1163.24" data-end="1167.41">makes the singleton behavior work you</span> <span data-start="1167.41" data-end="1168.97">can create custom loading behavior so</span> <span data-start="1168.97" data-end="1170.86">you could decide that you want to</span> <span data-start="1170.86" data-end="1175.419">redirect load requests to some CDN or to</span> <span data-start="1175.419" data-end="1177.07">some local storage where you've been</span> <span data-start="1177.07" data-end="1179.44">cashing it you can you can put whatever</span> <span data-start="1179.44" data-end="1181.78">custom behavior you want there you can</span> <span data-start="1181.78" data-end="1183.309">create a separate global object so that</span> <span data-start="1183.309" data-end="1185.83">it's completely isolated from the parent</span> <span data-start="1185.83" data-end="1188.26">loader you can create fresh built-ins so</span> <span data-start="1188.26" data-end="1190.51">that prototype hacking doesn't interfere</span> <span data-start="1190.51" data-end="1192.7">with each other and you can even do</span> <span data-start="1192.7" data-end="1194.95">compiler hooks so you can actually add</span> <span data-start="1194.95" data-end="1198.61">your own compile time checking like a</span> <span data-start="1198.61" data-end="1200.35">lint tool or you could even add your own</span> <span data-start="1200.35" data-end="1202.299">arbitrary compilation where you can say</span> <span data-start="1202.299" data-end="1203.53">hey I want a module loader that</span> <span data-start="1203.53" data-end="1205">understands CoffeeScript instead of</span> </p>
<p><span data-start="1205" data-end="1209.95">JavaScript so uh where we are right now</span> <span data-start="1209.95" data-end="1214.09">we've prototyped this in a meta circular</span> <span data-start="1214.09" data-end="1215.35">evaluator for java script called</span> <span data-start="1215.35" data-end="1218.53">narcissus I've built the the core module</span> <span data-start="1218.53" data-end="1219.91">system and parts of the the module</span> <span data-start="1219.91" data-end="1222.85">letters as well and for the sake of demo</span> <span data-start="1222.85" data-end="1226.72">we also have an add-on for a Firefox</span> <span data-start="1226.72" data-end="1229.809">called Zaphod that takes narcissus and</span> <span data-start="1229.809" data-end="1232.6">drops it in as a replacement for spider</span> <span data-start="1232.6" data-end="1234.58">monkey</span> <span data-start="1234.58" data-end="1239.529">so I'd like to do a demo just showing</span> <span data-start="1239.529" data-end="1241.899">you a little bit of some of the kinds of</span> <span data-start="1241.899" data-end="1245.13">cool things you can do alright so here</span> </p>
<p><span data-start="1245.13" data-end="1247.39">I've heard people saying they don't like</span> <span data-start="1247.39" data-end="1251.19">live coding I hope this isn't unpleasant</span> <span data-start="1251.19" data-end="1258.669">okay so here we've got a little tiny web</span> <span data-start="1258.669" data-end="1271.059">page let's call this one harmony okay so</span> <span data-start="1271.059" data-end="1275.429">here's a little div called harmony and</span> <span data-start="1275.429" data-end="1277.929">just to show you that we're working with</span> <span data-start="1277.929" data-end="1281.559">narcissus type equals script narcissist</span> <span data-start="1281.559" data-end="1283.36">this is what Zaphod does is it lets you</span> <span data-start="1283.36" data-end="1292.159">use this sorry application narcissus</span> <span data-start="1292.169" data-end="1308.36">right so of our element equals document</span> <span data-start="1308.37" data-end="1311.16">okay so that code was actually not</span> <span data-start="1311.16" data-end="1312.03">running through spider monkey but</span> <span data-start="1312.03" data-end="1314.28">running through narcissus so so this is</span> <span data-start="1314.28" data-end="1315.87">actually the extended that the language</span> <span data-start="1315.87" data-end="1321.03">extended with the module system so one</span> <span data-start="1321.03" data-end="1326.22">thing that I've done is well here let me</span> <span data-start="1326.22" data-end="1328.53">show you know it's still like this</span> <span data-start="1328.53" data-end="1333.86">script type equals application or cissus</span> <span data-start="1333.86" data-end="1337.41">source equals coffee so I've implemented</span> <span data-start="1337.41" data-end="1340.59">a little module loader for coffee script</span> <span data-start="1340.59" data-end="1343.38">and it's not the full coffeescript it's</span> <span data-start="1343.38" data-end="1353.429">just enough to demo so I could do just</span> <span data-start="1353.429" data-end="1355.52">to show you that it really is there</span> <span data-start="1355.52" data-end="1362.16">alert coffeescript okay so there's a</span> <span data-start="1362.16" data-end="1364.8">module loader called coffee script that</span> </p>
<p><span data-start="1364.8" data-end="1368.88">I brought into scope so I don't know if</span> <span data-start="1368.88" data-end="1371.61">this exactly will be something we could</span> <span data-start="1371.61" data-end="1373.14">do for HTML but I would really love it</span> <span data-start="1373.14" data-end="1376.08">if we could if we could just take an</span> <span data-start="1376.08" data-end="1378.03">existing module loader that's already</span> <span data-start="1378.03" data-end="1380.16">been defined and say that's the loader I</span> <span data-start="1380.16" data-end="1382.83">want to use for this script tag so then</span> </p>
<p><span data-start="1382.83" data-end="1386.84">I could do element equals document Oh</span> <span data-start="1386.84" data-end="1411.26">should create that element</span> <span data-start="1411.27" data-end="1413.16">okay so there's some coffee script code</span> <span data-start="1413.16" data-end="1417.72">just embedded in my web page and there</span> <span data-start="1417.72" data-end="1422.55">it is okay and just to show you that I'm</span> <span data-start="1422.55" data-end="1439.31">really weird I've got 14 scheme as well</span> <span data-start="1439.32" data-end="1442.95">okay so here's some scheme code to find</span> <span data-start="1442.95" data-end="1459.549">element</span> <span data-start="1459.559" data-end="1467.67">oh yeah</span> <span data-start="1467.68" data-end="1472.16">Thanks pair programming document dot get</span> <span data-start="1472.16" data-end="1477.05">element by ID scheme set bang element</span> <span data-start="1477.05" data-end="1481.88">that entry channel oh man the dot should</span> <span data-start="1481.88" data-end="1485.3">work let's look at my backup file and</span> <span data-start="1485.3" data-end="1487.82">see what I did wrong scheme dash loader</span> <span data-start="1487.82" data-end="1491.78">is it's always good to have a cheat</span> <span data-start="1491.78" data-end="1500.88">sheet there we go alright</span> <span data-start="1500.89" data-end="1503.15">okay so as I say I don't know if the</span> </p>
<p><span data-start="1503.15" data-end="1506.06">HTML extensions here are going to fly I</span> <span data-start="1506.06" data-end="1509.69">have not yet pitched that to anybody but</span> <span data-start="1509.69" data-end="1512.06">that's kind of my goal here is that I'd</span> <span data-start="1512.06" data-end="1514.07">like to be able to let you write your</span> <span data-start="1514.07" data-end="1516.71">own language extensions and then plug</span> <span data-start="1516.71" data-end="1519.11">them directly declaratively into the</span> <span data-start="1519.11" data-end="1521.27">into your HTML so that you can put</span> <span data-start="1521.27" data-end="1522.92">whatever languages you want or whatever</span> <span data-start="1522.92" data-end="1526.28">extensions to javascript you want this</span> <span data-start="1526.28" data-end="1527.36">of course is going to have a performance</span> <span data-start="1527.36" data-end="1530.27">cost so it may not always be viable in</span> <span data-start="1530.27" data-end="1533.09">production but what it does mean is that</span> <span data-start="1533.09" data-end="1536.03">when you're when you're in development</span> <span data-start="1536.03" data-end="1537.92">you don't have to run your own</span> <span data-start="1537.92" data-end="1539.6">preprocessor on the code before you</span> <span data-start="1539.6" data-end="1542.15">before you can actually keep reloading</span> <span data-start="1542.15" data-end="1544.73">it means that you can do that the more</span> <span data-start="1544.73" data-end="1547.16">dynamic shift reload style that that</span> <span data-start="1547.16" data-end="1549.62">will know and love for the development</span> <span data-start="1549.62" data-end="1559.07">process okay so that was the demo all</span> <span data-start="1559.07" data-end="1560.93">right so I actually don't have too much</span> <span data-start="1560.93" data-end="1563.48">more might run a little under but I want</span> <span data-start="1563.48" data-end="1565.19">to address head on something that you</span> <span data-start="1565.19" data-end="1567.11">know I always hear a fair amount of</span> <span data-start="1567.11" data-end="1570.92">angst about you know I I'm not trying to</span> <span data-start="1570.92" data-end="1573.44">taunt you with things that that you</span> <span data-start="1573.44" data-end="1575.96">can't have tomorrow but at the same time</span> </p>
<p><span data-start="1575.96" data-end="1577.64">I can't promise you that these things</span> <span data-start="1577.64" data-end="1584.63">are going to happen overnight so the the</span> <span data-start="1584.63" data-end="1586.61">life cycle of the standards process is</span> <span data-start="1586.61" data-end="1589.91">long and and it means that that these</span> <span data-start="1589.91" data-end="1595.13">things take some time but but here's my</span> <span data-start="1595.13" data-end="1597.65">plan this is this is my answer to that</span> <span data-start="1597.65" data-end="1600.77">question I've got to work hard and the</span> <span data-start="1600.77" data-end="1602.63">rest of tc39 s gotta work hard and we</span> <span data-start="1602.63" data-end="1605.95">are working hard on specking prototyping</span> <span data-start="1605.95" data-end="1609.38">building in real browsers and then</span> <span data-start="1609.38" data-end="1612.74">deploying so we've moved at Mozilla to a</span> <span data-start="1612.74" data-end="1615.2">faster release cycle that's more in line</span> <span data-start="1615.2" data-end="1617.27">with the the speed of the chrome</span> <span data-start="1617.27" data-end="1620.39">lifecycle and so we're not waiting for</span> <span data-start="1620.39" data-end="1622.07">the full standard to come out to start</span> <span data-start="1622.07" data-end="1624.95">deploying these features so we're hoping</span> <span data-start="1624.95" data-end="1627.62">to try to ship modules somewhere around</span> </p>
<p><span data-start="1627.62" data-end="1629.66">Firefox seven or so that is not a</span> <span data-start="1629.66" data-end="1632.82">promise but</span> <span data-start="1632.82" data-end="1636.179">firefox 7 is actually scheduled to be</span> <span data-start="1636.179" data-end="1639.659">later this year so it's our hope to get</span> <span data-start="1639.659" data-end="1641.34">this in the hands of developers as soon</span> <span data-start="1641.34" data-end="1643.409">as as humanly possible now that'll be</span> <span data-start="1643.409" data-end="1645.269">sort of the initial release out of you</span> <span data-start="1645.269" data-end="1646.98">know maybe be unstable as the standards</span> <span data-start="1646.98" data-end="1648.84">process continues we'll have to keep</span> <span data-start="1648.84" data-end="1650.88">refining you may not be able to build</span> <span data-start="1650.88" data-end="1652.5">production code that depends on it</span> <span data-start="1652.5" data-end="1654.059">immediately but it does mean that you'll</span> <span data-start="1654.059" data-end="1657.12">be able to try it out soon but there's</span> <span data-start="1657.12" data-end="1659.85">also you know just just because it's</span> <span data-start="1659.85" data-end="1663.509">it's released in 2011 or 2012 in modern</span> <span data-start="1663.509" data-end="1665.58">web browsers doesn't mean that every web</span> <span data-start="1665.58" data-end="1667.889">app will be able to depend on it because</span> <span data-start="1667.889" data-end="1669.6">you're going to have to wait for non</span> <span data-start="1669.6" data-end="1672.419">modern web browsers to catch up but</span> <span data-start="1672.419" data-end="1674.22">there is a polyfill answer even for</span> <span data-start="1674.22" data-end="1675.36">language extensions and this is</span> <span data-start="1675.36" data-end="1677.25">something that Brendan mentioned just</span> <span data-start="1677.25" data-end="1679.74">briefly yesterday but but i really want</span> <span data-start="1679.74" data-end="1684.269">to hammer on it just sort of like I was</span> <span data-start="1684.269" data-end="1686.009">showing with with module odors that we</span> <span data-start="1686.009" data-end="1688.83">could you know you could use it for</span> <span data-start="1688.83" data-end="1693.45">development as a quick reloading process</span> <span data-start="1693.45" data-end="1695.1">a quick debugging process but you could</span> <span data-start="1695.1" data-end="1698.07">still do an offline compiler we can do</span> <span data-start="1698.07" data-end="1699.48">offline compilers just like coffee</span> <span data-start="1699.48" data-end="1704.19">script for Jace next and we can even do</span> <span data-start="1704.19" data-end="1706.769">tricks like we did with Zaphod to let</span> <span data-start="1706.769" data-end="1708.84">you do that in a really convenient way</span> <span data-start="1708.84" data-end="1710.34">in development but then you could run</span> <span data-start="1710.34" data-end="1712.799">the preprocessor offline for for</span> <span data-start="1712.799" data-end="1718.11">deployment so my hope is that shims will</span> <span data-start="1718.11" data-end="1719.909">help that that people will be able to</span> <span data-start="1719.909" data-end="1721.32">start using the new features knowing</span> <span data-start="1721.32" data-end="1723.389">that ultimately the web browsers will</span> <span data-start="1723.389" data-end="1724.799">actually have built-in support for it</span> <span data-start="1724.799" data-end="1727.35">but until they do they can precompile I</span> <span data-start="1727.35" data-end="1729.419">think that's going to help but the last</span> <span data-start="1729.419" data-end="1732.45">point I hope advocacy is not a dirty</span> <span data-start="1732.45" data-end="1735.84">word but the developer community has a</span> <span data-start="1735.84" data-end="1739.019">really strong voice and what what</span> <span data-start="1739.019" data-end="1741.69">developers clamor for browser vendors</span> <span data-start="1741.69" data-end="1746.46">have to build so if you demand it that</span> <span data-start="1746.46" data-end="1749.389">will help bring the better future faster</span> <span data-start="1749.389" data-end="1752.159">so that's a taste of the module system</span> </p>
<p><span data-start="1752.159" data-end="1755.399">I'm happy to to dive deeper with people</span> <span data-start="1755.399" data-end="1757.379">offline and I'm happy to take any</span> <span data-start="1757.379" data-end="1760.11">questions about Jace next at all thanks</span> <span data-start="1760.11" data-end="1762.62">very much what's going on with proxies</span> <span data-start="1762.62" data-end="1766.88">proxies are in so proxies are</span> <span data-start="1766.88" data-end="1771.92">a fairly stable design at this point</span> <span data-start="1771.92" data-end="1775.28">they're they're widely lights on the</span> <span data-start="1775.28" data-end="1777.98">committee they're very very powerful and</span> <span data-start="1777.98" data-end="1779.54">we can do a lot of cool things with them</span> <span data-start="1779.54" data-end="1782.99">and Firefox 4 is shipping with them as I</span> <span data-start="1782.99" data-end="1784.91">said there may be some some API changes</span> <span data-start="1784.91" data-end="1787.27">so it's not completely stable yet but</span> <span data-start="1787.27" data-end="1790.55">but you can you can use them today and</span> <span data-start="1790.55" data-end="1792.17">it's my understanding that there are</span> <span data-start="1792.17" data-end="1793.76">chrome developers who are interested in</span> <span data-start="1793.76" data-end="1796.07">building it soon v8 developers who are</span> <span data-start="1796.07" data-end="1797.06">interested in building it soon but I</span> <span data-start="1797.06" data-end="1799.76">don't want to speak for them but yeah</span> <span data-start="1799.76" data-end="1801.7">they are they are harmonious they are</span> <span data-start="1801.7" data-end="1806.06">agreed upon by the whole committee so</span> <span data-start="1806.06" data-end="1807.83">the question is is an import that star</span> <span data-start="1807.83" data-end="1810.2">dangerous because names you didn't</span> <span data-start="1810.2" data-end="1813.92">expect can get injected so import that</span> <span data-start="1813.92" data-end="1816.29">star is not something that's happening</span> <span data-start="1816.29" data-end="1817.64">at runtime it's happening at compile</span> <span data-start="1817.64" data-end="1820.73">time so it's not like running code can</span> <span data-start="1820.73" data-end="1823.22">suddenly inject new things into into the</span> <span data-start="1823.22" data-end="1826.57">namespace but there is you know there is</span> <span data-start="1826.57" data-end="1828.59">somewhat of a hazard that you might get</span> <span data-start="1828.59" data-end="1830.06">it you might get in scope a name that</span> <span data-start="1830.06" data-end="1833.06">you didn't expect however part of the</span> <span data-start="1833.06" data-end="1835.58">design and modules is that if you have a</span> <span data-start="1835.58" data-end="1837.26">name collision where you imported the</span> <span data-start="1837.26" data-end="1839.42">same name from multiple places it's</span> <span data-start="1839.42" data-end="1841.94">going to give you an early error instead</span> <span data-start="1841.94" data-end="1845.42">of just sort of silently picking one so</span> <span data-start="1845.42" data-end="1846.59">somebody's not going to be able to</span> <span data-start="1846.59" data-end="1850.55">secretly override the name via import</span> <span data-start="1850.55" data-end="1853.76">star that said I fully expect that there</span> <span data-start="1853.76" data-end="1855.38">will be people building lint tools that</span> <span data-start="1855.38" data-end="1857.78">say you shouldn't use import star just</span> <span data-start="1857.78" data-end="1859.7">like they say you shouldn't use minus</span> <span data-start="1859.7" data-end="1861.44">minus and I think we're all grown-ups</span> <span data-start="1861.44" data-end="1863.33">and we can we can make those decisions</span> <span data-start="1863.33" data-end="1865.64">for ourselves I think imports star</span> <span data-start="1865.64" data-end="1868.61">import that star is just too useful for</span> <span data-start="1868.61" data-end="1872.21">scripting for rapid development and for</span> <span data-start="1872.21" data-end="1873.34">cases where you know what you're doing</span> <span data-start="1873.34" data-end="1876.2">but I certainly can understand that a</span> <span data-start="1876.2" data-end="1878.75">development shop might decide that you</span> <span data-start="1878.75" data-end="1880.52">know their coding practices say don't</span> <span data-start="1880.52" data-end="1884.48">use it I know what the question is</span> <span data-start="1884.48" data-end="1886.13">though is what's what's the deal with</span> <span data-start="1886.13" data-end="1888.17">require being a keyword requires a</span> <span data-start="1888.17" data-end="1890.15">contextual keyword here not a keyword so</span> <span data-start="1890.15" data-end="1891.35">the module for my should have said this</span> <span data-start="1891.35" data-end="1893.09">the module forum is a special form and</span> <span data-start="1893.09" data-end="1894.86">what's on the right-hand side of the</span> <span data-start="1894.86" data-end="1897.11">equals is not a arbitrary JavaScript</span> <span data-start="1897.11" data-end="1899.93">expression it's a module expression and</span> <span data-start="1899.93" data-end="1900.23">so</span> <span data-start="1900.23" data-end="1902.72">it's a limited sub grammar and require</span> <span data-start="1902.72" data-end="1905.049">is only special in that context so</span> <span data-start="1905.049" data-end="1907.19">there's no backwards compatibility</span> <span data-start="1907.19" data-end="1910.16">issues with the syntax of require there</span> <span data-start="1910.16" data-end="1911.57">are potentially some compatibility</span> <span data-start="1911.57" data-end="1915.38">issues with this syntax of module first</span> <span data-start="1915.38" data-end="1917.15">of all I should point out that this is</span> <span data-start="1917.15" data-end="1921.32">an opt-in new language so so j/s next is</span> <span data-start="1921.32" data-end="1922.429">going to be something that's not going</span> <span data-start="1922.429" data-end="1924.02">to just get turned on by default in the</span> <span data-start="1924.02" data-end="1925.28">browser it's going to be something that</span> <span data-start="1925.28" data-end="1927.58">you have to choose via a new script type</span> <span data-start="1927.58" data-end="1930.799">so we are allowing some level of</span> <span data-start="1930.799" data-end="1933.2">backwards and compatibility to try to</span> <span data-start="1933.2" data-end="1935.75">fix things that that you know that we</span> <span data-start="1935.75" data-end="1937.13">really want to fix that people really</span> <span data-start="1937.13" data-end="1940.28">want fixed but we'd also like to keep</span> <span data-start="1940.28" data-end="1942.2">the migration costs low so we don't want</span> <span data-start="1942.2" data-end="1945.04">too many you know really unnecessary</span> <span data-start="1945.04" data-end="1948.53">gratuitous incompatibilities so we'll</span> <span data-start="1948.53" data-end="1950.27">look at possible ways of finessing the</span> <span data-start="1950.27" data-end="1951.77">module keyword to make it a little bit</span> <span data-start="1951.77" data-end="1953.69">less incompatible but the require</span> <span data-start="1953.69" data-end="1956.63">keyword there's there's no problem I did</span> <span data-start="1956.63" data-end="1959.27">can you talk about how the require</span> <span data-start="1959.27" data-end="1962.51">system plays with with packaging systems</span> <span data-start="1962.51" data-end="1963.62">that people are using today where you</span> <span data-start="1963.62" data-end="1968.52">may have many modules in a single file</span> <span data-start="1968.53" data-end="1971.21">it's a good question I think I think to</span> <span data-start="1971.21" data-end="1972.98">some degree what we're trying to do is</span> <span data-start="1972.98" data-end="1976.46">not solve the packaging system problem</span> <span data-start="1976.46" data-end="1979.94">and let people continue to create their</span> <span data-start="1979.94" data-end="1984.98">own packaging systems as far as oh did</span> <span data-start="1984.98" data-end="1987.29">you mean like like like bundles like</span> <span data-start="1987.29" data-end="1988.91">that or maybe in a jar file or a zip</span> <span data-start="1988.91" data-end="1996.41">file or something like that so as if</span> <span data-start="1996.41" data-end="1998.419">it's in source form you can have many</span> <span data-start="1998.419" data-end="2001.299">modules either required by one rapper</span> <span data-start="2001.299" data-end="2003.64">module or even just nested inside of it</span> <span data-start="2003.64" data-end="2006.37">but if it's in some other form like zip</span> <span data-start="2006.37" data-end="2009.61">or jar or something like that I don't</span> <span data-start="2009.61" data-end="2011.89">have any plans for anything built in but</span> <span data-start="2011.89" data-end="2013.96">module letters do let you write your own</span> <span data-start="2013.96" data-end="2016.39">custom loading semantics so that was one</span> <span data-start="2016.39" data-end="2018.94">of those like circling the sandbox there</span> <span data-start="2018.94" data-end="2021.58">were all these different knobs that you</span> <span data-start="2021.58" data-end="2024.58">could customize one of them is the</span> <span data-start="2024.58" data-end="2026.38">loading semantics you can write your own</span> <span data-start="2026.38" data-end="2029.26">code that maybe uses some of the new</span> <span data-start="2029.26" data-end="2031.99">binary data and IO facilities to read</span> <span data-start="2031.99" data-end="2033.49">whatever source format you</span> <span data-start="2033.49" data-end="2036.4">recognized so that's why I say we're</span> <span data-start="2036.4" data-end="2039.1">sort of leaving that to continue to be</span> <span data-start="2039.1" data-end="2041.679">explored by the community rather than</span> <span data-start="2041.679" data-end="2044.08">trying to solve it here and now but it</span> <span data-start="2044.08" data-end="2046.12">is a very very extensible system so</span> <span data-start="2046.12" data-end="2048.03">hopefully people should be able to write</span> <span data-start="2048.03" data-end="2052.899">their own loaders for that some of that</span> <span data-start="2052.899" data-end="2055.72">is already possible with jar your eyes</span> <span data-start="2055.72" data-end="2058.81">using the bank syntax okay loan member</span> <span data-start="2058.81" data-end="2061.78">so you could try to factor it out of any</span> <span data-start="2061.78" data-end="2063.85">languages module system and into the URI</span> <span data-start="2063.85" data-end="2069.55">and the browser's URI handling but yeah</span> <span data-start="2069.55" data-end="2070.75">there's still some pieces we need to</span> <span data-start="2070.75" data-end="2073.06">work out of the the exact behavior of</span> <span data-start="2073.06" data-end="2074.98">the of the standard web module loader</span> <span data-start="2074.98" data-end="2077.11">and maybe some of that stuff we can</span> <span data-start="2077.11" data-end="2078.669">actually just have work out of the box</span> <span data-start="2078.669" data-end="2085.889">and we definitely welcome feedback hi</span> <span data-start="2085.889" data-end="2088.3">just wondering if you could expand a</span> <span data-start="2088.3" data-end="2091.45">little bit more on you know commonjs and</span> </p>
<p><span data-start="2091.45" data-end="2093.19">AMD in a month the migration strategy</span> <span data-start="2093.19" data-end="2095.679">because the module loader a.p I looked a</span> <span data-start="2095.679" data-end="2099.67">lot like the AMD one and and also we</span> <span data-start="2099.67" data-end="2104.02">have plugins on AMD to allow people to</span> <span data-start="2104.02" data-end="2106.39">do that either server side or client</span> <span data-start="2106.39" data-end="2108.46">side you know cross-compilation as well</span> <span data-start="2108.46" data-end="2111.4">there's CoffeeScript plugins as well so</span> <span data-start="2111.4" data-end="2114.67">20 have had any other comments about the</span> <span data-start="2114.67" data-end="2116.47">migration strategy itself you guys</span> <span data-start="2116.47" data-end="2118.33">thought about that yeah I mean I think I</span> <span data-start="2118.33" data-end="2120.88">can only speak broadly because I have a</span> <span data-start="2120.88" data-end="2124.3">lot more to learn and we have a lot more</span> <span data-start="2124.3" data-end="2130.63">conversations left to be had but I do</span> <span data-start="2130.63" data-end="2132.609">see a place for tools for migration</span> <span data-start="2132.609" data-end="2135.13">tools in this I think so much of the</span> <span data-start="2135.13" data-end="2138.609">semantics of what we're doing and the</span> <span data-start="2138.609" data-end="2141.04">semantics of modules of comm jas modules</span> <span data-start="2141.04" data-end="2143.68">and Andy are very compatible with each</span> <span data-start="2143.68" data-end="2146.47">other that hopefully people should be</span> <span data-start="2146.47" data-end="2148.09">able to continue writing with the tools</span> <span data-start="2148.09" data-end="2150.369">that they have today and we should be</span> <span data-start="2150.369" data-end="2151.6">able to build migration tools to help</span> <span data-start="2151.6" data-end="2157">them move to that tomorrow oh and I</span> <span data-start="2157" data-end="2158.23">think Wes garland has actually even</span> <span data-start="2158.23" data-end="2160.08">started working on some of those tools</span> <span data-start="2160.08" data-end="2162.85">but as I say there's more there's more</span> <span data-start="2162.85" data-end="2165.609">conversations left to have</span> </p>
<p><span data-start="2165.609" data-end="2168.269">I don't know where we are on time but</span> <span data-start="2168.269" data-end="2170.47">yeah I think we're just at out of time</span> <span data-start="2170.47" data-end="2172.63">so yeah I'm happy to talk more offline</span> <span data-start="2172.63" data-end="2179.89">thank you thank you very much happy</span> </p>
</section>