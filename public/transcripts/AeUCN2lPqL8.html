<section>
<p><span data-start="10.9" data-end="16.46">okay um so the errand is flaky so we'll</span> <span data-start="16.46" data-end="19.67">see if I can get through this talk um so</span> <span data-start="19.67" data-end="22.01">as Jake so eloquently mentioned I am</span> <span data-start="22.01" data-end="24.32">Sofia and I'm here to talk to you about</span> <span data-start="24.32" data-end="30.47">memory management and JavaScript if</span> <span data-start="30.47" data-end="33.02">you're sitting in the back or you can't</span> <span data-start="33.02" data-end="34.79">see the screen or for whatever reason</span> <span data-start="34.79" data-end="37.79">you can follow along with the talk at</span> <span data-start="37.79" data-end="43.399">JMP /j s — ma'am — live and you'll just</span> <span data-start="43.399" data-end="45.17">automatically see everything but also</span> <span data-start="45.17" data-end="55.46">the internet is down so you can't it's</span> <span data-start="55.46" data-end="64.229">not moving I'm sorry guys this is no fun</span> <span data-start="64.239" data-end="70.32">it's reconnecting</span> <span data-start="70.33" data-end="77.219">is so awkward oh my god</span> </p>
<p><span data-start="77.229" data-end="81.29">I'm not worried I could do this thing</span> <span data-start="81.29" data-end="84.95">just without slides but that wouldn't be</span> <span data-start="84.95" data-end="99.23">fun Oh</span> <span data-start="99.24" data-end="100.86">I actually can't do this thing about</span> <span data-start="100.86" data-end="108.39">slides yes do we have Ethernet I could</span> <span data-start="108.39" data-end="114.5">tell jokes in the meantime knock-knock</span> <span data-start="114.5" data-end="120.58">King Tut King Chucky fried chicken</span> <span data-start="120.59" data-end="124.28">what does it web developers ghosts a</span> <span data-start="124.28" data-end="131.43">Twitter bootstrap I was going to come on</span> <span data-start="131.43" data-end="134.51">stage and help but you've got this rao's</span> <span data-start="134.51" data-end="137.76">the faster he works the quicker this</span> <span data-start="137.76" data-end="141.54">torture will be over let's see if I can</span> <span data-start="141.54" data-end="145.16">remember another one oh god I can't even</span> <span data-start="145.16" data-end="147.69">have any good memory bank banter what's</span> <span data-start="147.69" data-end="149.25">your what's your favorite memory address</span> <span data-start="149.25" data-end="158.489">oh my god so you see if you have you've</span> <span data-start="158.489" data-end="160.319">been able to use the chrome dev tools in</span> <span data-start="160.319" data-end="162.15">terms of memory cleanup wow you are the</span> <span data-start="162.15" data-end="164.01">only person in the world who can use</span> <span data-start="164.01" data-end="166.22">that that's amazing believe it or not um</span> <span data-start="166.22" data-end="168.989">once this is set up you guys are</span> <span data-start="168.989" data-end="170.459">actually going to be getting the</span> <span data-start="170.459" data-end="172.92">opportunity to interact with the chrome</span> <span data-start="172.92" data-end="175.2">dev tools a bit more I created a</span> <span data-start="175.2" data-end="177.269">tutorial an interactive tutorial for</span> <span data-start="177.269" data-end="178.829">everyone at the conference to follow</span> <span data-start="178.829" data-end="180.75">along with to learn how to use dev tools</span> </p>
<p><span data-start="180.75" data-end="183.51">I always find that it's one of the</span> <span data-start="183.51" data-end="184.739">reasons that I kind of stay away from</span> <span data-start="184.739" data-end="187.079">like the kind of single page app push</span> <span data-start="187.079" data-end="188.579">State stuff because I think no matter</span> <span data-start="188.579" data-end="191.16">how bad I handle memory I know I'm one</span> <span data-start="191.16" data-end="192.78">navigation away from it all being</span> <span data-start="192.78" data-end="196.92">cleared and starting again awesome okay</span> <span data-start="196.92" data-end="201.51">right I'll go away bye bye</span> <span data-start="201.52" data-end="206.68">okay awesome uh so I'm Safi as I already</span> <span data-start="206.68" data-end="209.38">mentioned my two passions in life are</span> <span data-start="209.38" data-end="211.48">data science for social good and open</span> <span data-start="211.48" data-end="213.67">source software and if you're interested</span> <span data-start="213.67" data-end="215.56">in learning more about that or the open</span> <span data-start="215.56" data-end="217.33">source work that I'm doing I'm captain</span> </p>
<p><span data-start="217.33" data-end="220.72">Sofia on Twitter and github and NPM um</span> <span data-start="220.72" data-end="225.04">and like MySpace and Friendster and all</span> <span data-start="225.04" data-end="227.2">the stuff and Sophia don't rocks is my</span> <span data-start="227.2" data-end="231.01">website so what are we going to be</span> <span data-start="231.01" data-end="232.81">talking about today I just want to give</span> <span data-start="232.81" data-end="234.28">you a quick outline of what you guys are</span> <span data-start="234.28" data-end="238.18">getting yourselves into so first I'm</span> <span data-start="238.18" data-end="239.8">going to talk a little bit about why we</span> <span data-start="239.8" data-end="242.05">should care about memory as software</span> <span data-start="242.05" data-end="243.73">engineers whether you're working in the</span> <span data-start="243.73" data-end="245.53">client-side with JavaScript or the</span> <span data-start="245.53" data-end="246.7">server-side I'm going to give you</span> <span data-start="246.7" data-end="251.19">reasons to think about memory first and</span> <span data-start="251.19" data-end="253.27">then we're going to talk about what it</span> <span data-start="253.27" data-end="255.25">means to manage memory and for those of</span> <span data-start="255.25" data-end="256.6">you who might have computer science</span> <span data-start="256.6" data-end="258.79">degrees this is going to be a throwback</span> <span data-start="258.79" data-end="262.18">to your systems or compilers courses so</span> </p>
<p><span data-start="262.18" data-end="263.86">I'm sorry if I'm bringing up very</span> <span data-start="263.86" data-end="265.96">horrifying flashbacks right now please</span> <span data-start="265.96" data-end="269.68">bear with me and then we're going to</span> <span data-start="269.68" data-end="271.57">talk it all in particular about how</span> <span data-start="271.57" data-end="275.5">JavaScript manages memory and then we'll</span> <span data-start="275.5" data-end="277.45">finish it off with how we can write</span> <span data-start="277.45" data-end="279.58">memory performant applications but what</span> <span data-start="279.58" data-end="281.08">are some tools and techniques that you</span> <span data-start="281.08" data-end="285.1">folks can use and once all that is done</span> <span data-start="285.1" data-end="287.44">you will be wizards and witches of</span> <span data-start="287.44" data-end="291.64">JavaScript after battling the Dark Lord</span> <span data-start="291.64" data-end="296.65">of memory leaks um so first why do we</span> <span data-start="296.65" data-end="298.54">care about memory why is memory</span> <span data-start="298.54" data-end="300.31">important to us as programmers and these</span> <span data-start="300.31" data-end="302.86">are three very bias reasons that I have</span> <span data-start="302.86" data-end="306.58">for caring about memory the first is</span> <span data-start="306.58" data-end="308.41">that it forces us to be more inventive</span> <span data-start="308.41" data-end="310.96">programmers I always think it's great to</span> <span data-start="310.96" data-end="313.27">add restrictions to the way that we</span> <span data-start="313.27" data-end="315.16">develop our software because it forces</span> <span data-start="315.16" data-end="317.41">us to reason critically of our our</span> <span data-start="317.41" data-end="320.74">applications to analyze and debug things</span> <span data-start="320.74" data-end="322.39">and use tools like the chrome dev tools</span> <span data-start="322.39" data-end="325.75">and to build better there's no way to</span> <span data-start="325.75" data-end="327.37">get somebody more creative and inventive</span> <span data-start="327.37" data-end="330.69">than by locking them in a dark room or</span> <span data-start="330.69" data-end="332.8">by placing them in the middle of the</span> </p>
<p><span data-start="332.8" data-end="333.96">Sahara in 100</span> <span data-start="333.96" data-end="335.91">degree weather with no Wi-Fi and having</span> <span data-start="335.91" data-end="341.84">them code ask me about that later</span> <span data-start="341.85" data-end="344.789">memory is scarce and although the amount</span> <span data-start="344.789" data-end="346.53">of memory that's available on machines</span> <span data-start="346.53" data-end="348.9">has been increasing over the past couple</span> <span data-start="348.9" data-end="352.289">of decades so have people's expectations</span> <span data-start="352.289" data-end="354.96">of what their machines can do your users</span> <span data-start="354.96" data-end="357.27">expect your applications to be able to</span> <span data-start="357.27" data-end="359.06">handle their multitasking workflows</span> <span data-start="359.06" data-end="363.18">users expect and deserve really rich</span> <span data-start="363.18" data-end="365.19">interactive web experience and those</span> <span data-start="365.19" data-end="366.419">things tend to be really memory</span> <span data-start="366.419" data-end="371.34">intensive and then finally it helps us</span> <span data-start="371.34" data-end="373.62">exercise our empathy muscles I view</span> <span data-start="373.62" data-end="376.31">empathy as a muscle that you can train</span> <span data-start="376.31" data-end="378.69">in thinking about the different</span> <span data-start="378.69" data-end="380.58">conditions that your program is going to</span> <span data-start="380.58" data-end="382.259">be used in or your application is going</span> <span data-start="382.259" data-end="385.08">to be used in in the context of memories</span> <span data-start="385.08" data-end="386.61">a really great way for you to discover</span> <span data-start="386.61" data-end="388.259">new user stories and start to think</span> <span data-start="388.259" data-end="392.469">about how your applications being used</span> <span data-start="392.479" data-end="396.81">so now that we have a couple of reasons</span> <span data-start="396.81" data-end="398.909">to care about memory management let's go</span> <span data-start="398.909" data-end="401.28">a brief overview of what memory</span> <span data-start="401.28" data-end="405.8">management is so if you programmed in C</span> <span data-start="405.8" data-end="408.449">you are familiar with a paradigm known</span> <span data-start="408.449" data-end="411.9">as manual memory management what that</span> <span data-start="411.9" data-end="414.24">means is that you as the programmer had</span> <span data-start="414.24" data-end="416.31">to allocate memory on the machine using</span> <span data-start="416.31" data-end="418.62">malloc then you were done with it you're</span> <span data-start="418.62" data-end="420.86">responsible for freeing it using free</span> <span data-start="420.86" data-end="423.57">now there's a fundamental issue with</span> <span data-start="423.57" data-end="426.03">that and it's that this is a huge</span> <span data-start="426.03" data-end="428.58">cognitive load on you as the engineer</span> <span data-start="428.58" data-end="430.919">you can imagine in addition to having</span> <span data-start="430.919" data-end="434.099">top-down missing semicolons and arguing</span> <span data-start="434.099" data-end="435.9">over where you place your curly braces</span> <span data-start="435.9" data-end="437.88">and thinking about algorithm design and</span> <span data-start="437.88" data-end="439.83">software architecture you have this</span> <span data-start="439.83" data-end="442.44">additional cognitive load of managing</span> <span data-start="442.44" data-end="443.639">the memory of your application and</span> <span data-start="443.639" data-end="446.039">actively thinking about it so you can</span> <span data-start="446.039" data-end="449.639">imagine software written this way has</span> <span data-start="449.639" data-end="451.8">lots of memory leaks has lots of other</span> <span data-start="451.8" data-end="455.18">memory related bugs no fun for anybody</span> <span data-start="455.18" data-end="459.18">and that's where the concept of</span> <span data-start="459.18" data-end="461.58">automated memory management comes in</span> <span data-start="461.58" data-end="463.289">it's known as the garbage collector this</span> <span data-start="463.289" data-end="466.639">is Oscar the Grouch from Sesame Street</span> <span data-start="466.639" data-end="469.789">um and the garbage collector is really</span> <span data-start="469.789" data-end="472.039">in charge of finding out where garbage</span> <span data-start="472.039" data-end="474.68">memory is and then clearing it away and</span> <span data-start="474.68" data-end="476.439">we'll get into that a little bit later</span> <span data-start="476.439" data-end="481.55">an automated memory management has its</span> <span data-start="481.55" data-end="484.639">pros and consequences the first big Pro</span> <span data-start="484.639" data-end="487.31">really for us as engineers is we don't</span> <span data-start="487.31" data-end="489.139">have that cognitive load of having to</span> <span data-start="489.139" data-end="492.919">manage memory on our own the consequence</span> <span data-start="492.919" data-end="494.81">is that the garbage collector is an</span> <span data-start="494.81" data-end="497.599">application it's another program that</span> <span data-start="497.599" data-end="500">runs in order to clear your memory so it</span> <span data-start="500" data-end="501.879">does have a performance endurance and</span> <span data-start="501.879" data-end="503.75">depending on how good your memory</span> <span data-start="503.75" data-end="505.669">allocator is and what technique it's</span> <span data-start="505.669" data-end="507.59">using that hindrance might not be as bad</span> <span data-start="507.59" data-end="514.219">that is still a consequence also so now</span> <span data-start="514.219" data-end="515.93">we talked about memory management and</span> <span data-start="515.93" data-end="517.459">we're going to cover it in JavaScript</span> <span data-start="517.459" data-end="519.5">really quickly is everyone with me so</span> <span data-start="519.5" data-end="526.01">far oh yeah get hyped so for the rest of</span> <span data-start="526.01" data-end="527.51">this talk I'm really going to be</span> <span data-start="527.51" data-end="530.709">focusing on the v8 JavaScript engine um</span> <span data-start="530.709" data-end="533.42">we're all pretty familiar with it if you</span> <span data-start="533.42" data-end="535.899">use Chrome that's the thing that's</span> <span data-start="535.899" data-end="537.56">interpreting and executing your code</span> <span data-start="537.56" data-end="540.38">you're using node or MongoDB on the</span> <span data-start="540.38" data-end="543.37">server side it's responsible there so um</span> <span data-start="543.37" data-end="546.079">sorry for all the other JavaScript</span> <span data-start="546.079" data-end="547.82">engines who won't be getting any love</span> <span data-start="547.82" data-end="553.339">from me today but v8 swear it's up so</span> <span data-start="553.339" data-end="554.63">let's start off by going through the</span> <span data-start="554.63" data-end="556.699">basic data types in Java Script I'm</span> <span data-start="556.699" data-end="558.47">going to start off really easy and then</span> <span data-start="558.47" data-end="561.079">like ramp it up super fast so if you're</span> <span data-start="561.079" data-end="563.3">boole's right you're trues your falses</span> <span data-start="563.3" data-end="566.06">your numbers your one two threes any of</span> <span data-start="566.06" data-end="568.22">your strings your hello worlds and your</span> <span data-start="568.22" data-end="573.709">man cats and all that and all of these</span> <span data-start="573.709" data-end="575.839">are the sort of elements in the</span> </p>
<p><span data-start="575.839" data-end="577.519">JavaScript universe and they can be</span> <span data-start="577.519" data-end="579.89">combined to form different compounds and</span> <span data-start="579.89" data-end="582.38">molecules in your application these are</span> <span data-start="582.38" data-end="585.41">really the basics and where that becomes</span> <span data-start="585.41" data-end="588.41">relevant is how memory is allocated</span> <span data-start="588.41" data-end="591.44">memory is allocated in a heap structure</span> <span data-start="591.44" data-end="594.35">so it looks something like this so the</span> <span data-start="594.35" data-end="596.769">read node you see there is the root node</span> <span data-start="596.769" data-end="599.62">this is something like the window object</span> <span data-start="599.62" data-end="603.14">the root node has edges pointing to</span> <span data-start="603.14" data-end="605">other nodes in this case the blue nodes</span> <span data-start="605" data-end="607.49">and the green nodes the green nodes in</span> <span data-start="607.49" data-end="609.319">this particular case are your boolean's</span> <span data-start="609.319" data-end="611.99">your numbers and your strengths those</span> <span data-start="611.99" data-end="614.66">fundamental elements the blues are</span> <span data-start="614.66" data-end="616.97">references to those things so this is</span> <span data-start="616.97" data-end="618.649">what memory looks like it's definitely a</span> <span data-start="618.649" data-end="621.649">giant heap which is why Jake made that</span> <span data-start="621.649" data-end="627.05">joke earlier and v8 does something where</span> <span data-start="627.05" data-end="629.36">allocates memory into six different</span> <span data-start="629.36" data-end="632.69">spaces or chunks and there's sort of a</span> <span data-start="632.69" data-end="634.519">method to the madness of why it does</span> <span data-start="634.519" data-end="635.75">this and we're going to find out why</span> <span data-start="635.75" data-end="638.93">later I hope I'm keeping you on the edge</span> <span data-start="638.93" data-end="640.399">of your seats with all this like we'll</span> <span data-start="640.399" data-end="641.81">find out later try to keep you guys</span> <span data-start="641.81" data-end="646.089">excited so let's talk a little bit</span> <span data-start="646.089" data-end="648.29">different kinds of spaces so the first</span> <span data-start="648.29" data-end="651.199">space is the new space this is where</span> <span data-start="651.199" data-end="653.899">memory gets allocated when an object is</span> <span data-start="653.899" data-end="655.85">immediately created objects in the new</span> <span data-start="655.85" data-end="659.47">space tend to be smaller they're newer</span> <span data-start="659.47" data-end="663.23">new space your next space is the old</span> <span data-start="663.23" data-end="665.81">pointer space so if an object is in the</span> <span data-start="665.81" data-end="668.029">new space and it's a reference to an</span> <span data-start="668.029" data-end="670.43">object it's not a scalar itself and it's</span> <span data-start="670.43" data-end="672.29">resided in the new space for a while</span> <span data-start="672.29" data-end="675.019">it's been actively used it graduates the</span> <span data-start="675.019" data-end="678.05">old pointer space and if it's not a</span> <span data-start="678.05" data-end="681.019">reference the scalar graduates to the</span> <span data-start="681.019" data-end="686.329">old data space and then you have the</span> <span data-start="686.329" data-end="688.22">large object space this is where you</span> <span data-start="688.22" data-end="691.04">store giant look-up tables and things</span> <span data-start="691.04" data-end="693.019">that don't you don't want to fall under</span> <span data-start="693.019" data-end="694.76">the memory restrictions or the size</span> <span data-start="694.76" data-end="698.779">restrictions of the new old end of the</span> <span data-start="698.779" data-end="702.8">new and old space and then you have the</span> <span data-start="702.8" data-end="705.649">code space the code space is special</span> <span data-start="705.649" data-end="706.699">because it contains</span> <span data-start="706.699" data-end="709.699">executable memory memory on your machine</span> <span data-start="709.699" data-end="712.04">by default is not executable because you</span> <span data-start="712.04" data-end="713.6">don't want to go around just running</span> <span data-start="713.6" data-end="715.459">whatever data is on your memory that</span> <span data-start="715.459" data-end="720.68">would not be good and so items in the</span> <span data-start="720.68" data-end="722.12">code space are generally get</span> <span data-start="722.12" data-end="725.6">instructions just-in-time compiled and</span> <span data-start="725.6" data-end="727.88">then the last space is the map space and</span> <span data-start="727.88" data-end="731.209">this contains maps property cells and</span> <span data-start="731.209" data-end="731.66">cell</span> <span data-start="731.66" data-end="733.87">these are used by the JavaScript engine</span> <span data-start="733.87" data-end="736.61">and really for the rest of this talk</span> <span data-start="736.61" data-end="738.68">we're going to focus on two spaces the</span> <span data-start="738.68" data-end="741.41">new space in the old space so you can</span> <span data-start="741.41" data-end="743.06">kind of forget about the rest and you</span> <span data-start="743.06" data-end="744.53">can treat it as like fun stuff you</span> <span data-start="744.53" data-end="749.06">learned so this point we've allocated</span> <span data-start="749.06" data-end="753.42">objects in memory they're in our heap</span> <span data-start="753.43" data-end="757.22">how do we know what to clean and how to</span> <span data-start="757.22" data-end="761.66">clean it and really the answer and the</span> <span data-start="761.66" data-end="765.83">basis for this is reach ability memory</span> <span data-start="765.83" data-end="767.6">is considered garbage when it's no</span> <span data-start="767.6" data-end="769.55">longer reachable or accessible in your</span> <span data-start="769.55" data-end="773.99">code this usually tends to be data that</span> <span data-start="773.99" data-end="776.96">is not reserved for local variables or</span> <span data-start="776.96" data-end="779.15">function parameters or global variables</span> <span data-start="779.15" data-end="783.26">if you look back into the heap the way</span> <span data-start="783.26" data-end="785.15">that we can determine what is considered</span> <span data-start="785.15" data-end="787.58">garbage is by traversing through our</span> <span data-start="787.58" data-end="789.5">heap so you can start off at the root</span> <span data-start="789.5" data-end="792.14">node anything that you can access by</span> <span data-start="792.14" data-end="794.44">traveling through nodes in the heap is</span> <span data-start="794.44" data-end="796.75">considered accessible and reachable</span> <span data-start="796.75" data-end="798.92">things that you can access are not</span> <span data-start="798.92" data-end="802.7">reachable in their garbage so these two</span> <span data-start="802.7" data-end="810.61">your out garbage but how exactly does</span> </p>
<p><span data-start="810.61" data-end="812.87">JavaScript collect garbage or the v8</span> <span data-start="812.87" data-end="815.99">engine collect garbage we know how the</span> <span data-start="815.99" data-end="817.46">allocates memory we know what it</span> <span data-start="817.46" data-end="819.43">considers garbage how does it collect it</span> <span data-start="819.43" data-end="824.54">and the v8 engine employs something</span> <span data-start="824.54" data-end="826.79">called stop the world technique for</span> <span data-start="826.79" data-end="828.35">garbage collection and so what happens</span> <span data-start="828.35" data-end="833.14">is programs halted like complete stop</span> <span data-start="833.14" data-end="838.85">and then there's a pause and that pause</span> <span data-start="838.85" data-end="840.8">there's a moment where the garbage</span> <span data-start="840.8" data-end="843.71">collector runs and it's a brief short</span> <span data-start="843.71" data-end="845.87">cycle and that's really to offset that</span> <span data-start="845.87" data-end="847.31">performance hindrance so you're just</span> <span data-start="847.31" data-end="849.37">running quick garbage collection cycles</span> <span data-start="849.37" data-end="853.67">in pauses in between your program this</span> <span data-start="853.67" data-end="855.61">next step is going to be a perfect</span> <span data-start="855.61" data-end="859.93">representation of what this means</span> <span data-start="859.94" data-end="863.21">yes we've all seen this um so if you</span> <span data-start="863.21" data-end="865.19">remember earlier we talked about the new</span> <span data-start="865.19" data-end="869.9">space and the old space and so when you</span> <span data-start="869.9" data-end="872.27">start to go through these garbage</span> <span data-start="872.27" data-end="874.82">collection cycles the v8 engine has</span> <span data-start="874.82" data-end="876.98">different approaches to how it collects</span> <span data-start="876.98" data-end="879.17">garbage in the new space and how it</span> <span data-start="879.17" data-end="882.47">collects garbage in the old space so</span> <span data-start="882.47" data-end="884.54">we'll start off by talking about how it</span> <span data-start="884.54" data-end="891.62">collects garbage in the new space and</span> <span data-start="891.62" data-end="894.92">and before I go there this sort of idea</span> <span data-start="894.92" data-end="897.53">of having a different garbage collection</span> <span data-start="897.53" data-end="902.06">approach to old memory or and to old</span> <span data-start="902.06" data-end="903.77">data versus new data is known as a</span> <span data-start="903.77" data-end="907.34">generational garbage collector just</span> <span data-start="907.34" data-end="908.75">think you're kind of like approaching</span> <span data-start="908.75" data-end="910.43">the age of your memory in-app</span> <span data-start="910.43" data-end="912.14">generations and you're treating each one</span> <span data-start="912.14" data-end="920.21">differently and so let's talk about how</span> <span data-start="920.21" data-end="923.39">garbage is collected in the new space</span> <span data-start="923.39" data-end="925.73">and it's a process known as scavenging</span> <span data-start="925.73" data-end="929.66">and so generally memory and the new</span> <span data-start="929.66" data-end="931.64">space is collected more quickly than</span> <span data-start="931.64" data-end="933.41">memory in the old space just because</span> <span data-start="933.41" data-end="934.43">it's newer</span> <span data-start="934.43" data-end="937.46">um and what tends to happen is when your</span> <span data-start="937.46" data-end="940.67">new space is filled the v8 engines going</span> <span data-start="940.67" data-end="942.38">to go ahead and start a scavenging</span> <span data-start="942.38" data-end="944.93">garbage collection cycle in the new</span> <span data-start="944.93" data-end="947.12">space and what happens in this Gavan</span> <span data-start="947.12" data-end="949.67">process is your garbage collector is</span> <span data-start="949.67" data-end="951.58">going to go through your entire heap</span> <span data-start="951.58" data-end="953.87">it's going to traverse it starting from</span> <span data-start="953.87" data-end="956.42">the route it's going to make copies of</span> <span data-start="956.42" data-end="959.57">everything that it traverses and it's</span> <span data-start="959.57" data-end="961.67">going to clear out what was previously</span> <span data-start="961.67" data-end="965.15">in the new space and so the copies it</span> <span data-start="965.15" data-end="967.4">has made is everything that it could</span> <span data-start="967.4" data-end="969.61">reach in a traversal of the heap and</span> <span data-start="969.61" data-end="971.51">everything that I couldn't reach and</span> <span data-start="971.51" data-end="973.34">couldn't copy is considered garbage</span> <span data-start="973.34" data-end="977">memory so that's okay now for those of</span> <span data-start="977" data-end="978.32">you are paying attention to how this</span> <span data-start="978.32" data-end="980">technique works you might realize the</span> <span data-start="980" data-end="982.13">fundamental problem with it which is</span> <span data-start="982.13" data-end="984.94">that it has a very high space complexity</span> <span data-start="984.94" data-end="988.34">you need to have double the amount of</span> <span data-start="988.34" data-end="990.14">memory that is the size of your new</span> <span data-start="990.14" data-end="992.05">space for that copying over</span> <span data-start="992.05" data-end="994.749">and this might be a kind of</span> <span data-start="994.749" data-end="996.61">consequential thing but is if you recall</span> <span data-start="996.61" data-end="1000.42">the data in the new space is younger</span> <span data-start="1000.42" data-end="1002.639">smaller data so the sort of fact that</span> <span data-start="1002.639" data-end="1004.29">you need double the size of the new</span> <span data-start="1004.29" data-end="1008.67">space is not that big a deal so if we go</span> <span data-start="1008.67" data-end="1014.489">back to our lovely memory heap we're</span> <span data-start="1014.489" data-end="1017.699">going to start off at the red root node</span> <span data-start="1017.699" data-end="1020.249">and then traverse over to the blue and</span> <span data-start="1020.249" data-end="1022.319">then go over to the two blues and then</span> <span data-start="1022.319" data-end="1024.72">go over to the greens and our garbage</span> <span data-start="1024.72" data-end="1027.029">nodes are never traversed and they're</span> <span data-start="1027.029" data-end="1028.62">never each and they're never copied over</span> <span data-start="1028.62" data-end="1031.799">and they're just like obliterated into</span> <span data-start="1031.799" data-end="1037.86">nothingness and then for the old data</span> <span data-start="1037.86" data-end="1039.87">space um there's a different technique</span> <span data-start="1039.87" data-end="1041.939">that's gets used and it's the mark and</span> <span data-start="1041.939" data-end="1046.409">sweep technique and the mark and sweep</span> <span data-start="1046.409" data-end="1048.899">technique works by traversing the nodes</span> <span data-start="1048.899" data-end="1051.96">in the heap marking the ones that are</span> <span data-start="1051.96" data-end="1054.27">active and then removing unmarked</span> <span data-start="1054.27" data-end="1056.669">objects on a regular basis and I know</span> <span data-start="1056.669" data-end="1059.61">that was a super cryptic description and</span> </p>
<p><span data-start="1059.61" data-end="1062.7">I could like for you guys right now with</span> <span data-start="1062.7" data-end="1064.26">an entire discussion on mark-and-sweep</span> <span data-start="1064.26" data-end="1067.98">um but I want you to stay my friends I</span> <span data-start="1067.98" data-end="1070.77">really hope you do ah so I won't torture</span> <span data-start="1070.77" data-end="1073.639">you that way but in all seriousness</span> <span data-start="1073.639" data-end="1076.279">mark-and-sweep has a very rich history</span> <span data-start="1076.279" data-end="1080.52">in computing and it merits its own 30</span> <span data-start="1080.52" data-end="1082.409">minute maybe 45 minute talk if the</span> <span data-start="1082.409" data-end="1084.659">organizers will let me but if you guys</span> <span data-start="1084.659" data-end="1087.63">just want to grab me during lunch maybe</span> <span data-start="1087.63" data-end="1088.799">do it tomorrow because I'm still</span> <span data-start="1088.799" data-end="1092.19">jet-lagged but yes I'm happy to talk</span> <span data-start="1092.19" data-end="1097.889">about it so at this point you're almost</span> <span data-start="1097.889" data-end="1101.46">almost masters of memory management or</span> <span data-start="1101.46" data-end="1103.409">JavaScript you have an understanding of</span> <span data-start="1103.409" data-end="1105.84">why we care about it what memory</span> <span data-start="1105.84" data-end="1107.75">management is in a general perspective</span> <span data-start="1107.75" data-end="1110.639">how it works in JavaScript how the v8</span> <span data-start="1110.639" data-end="1113.61">garbage collector works now you want to</span> <span data-start="1113.61" data-end="1116.37">start to apply these and only the best</span> <span data-start="1116.37" data-end="1119.1">way to approach this is to start by</span> <span data-start="1119.1" data-end="1123.81">asking yourself two simple questions</span> <span data-start="1123.82" data-end="1126.65">which is how much memory is my</span> <span data-start="1126.65" data-end="1128.63">application using and you're never going</span> <span data-start="1128.63" data-end="1131.27">to get a solid quantified answer for</span> <span data-start="1131.27" data-end="1135.26">this because that's not how it works but</span> <span data-start="1135.26" data-end="1137.87">you can start to develop ranges you can</span> <span data-start="1137.87" data-end="1139.88">start develop metrics with how much</span> <span data-start="1139.88" data-end="1141.2">memory you're comfortable with having</span> <span data-start="1141.2" data-end="1143.9">your application use and when you</span> <span data-start="1143.9" data-end="1145.7">develop these metrics it's important to</span> <span data-start="1145.7" data-end="1148.549">consider that your application runs in</span> <span data-start="1148.549" data-end="1151.58">the context of other applications so</span> <span data-start="1151.58" data-end="1154.4">like all eight gigabytes of memory or</span> <span data-start="1154.4" data-end="1156.32">all four gigabytes of memory on a</span> <span data-start="1156.32" data-end="1158.659">machine like belong to you entirely</span> <span data-start="1158.659" data-end="1161.63">which is sad you're sharing these lots</span> <span data-start="1161.63" data-end="1163.13">of other applications if you've seen</span> <span data-start="1163.13" data-end="1166.49">people use like 48 tabs in their Chrome</span> <span data-start="1166.49" data-end="1167.75">browser and you're like why do you</span> <span data-start="1167.75" data-end="1171.77">torture your browser like that you have</span> <span data-start="1171.77" data-end="1173.539">to like share memory with all of the</span> <span data-start="1173.539" data-end="1178.07">other taps that they have open and the</span> <span data-start="1178.07" data-end="1179.539">second question that you want to ask is</span> <span data-start="1179.539" data-end="1181.72">how often does the garbage collector</span> <span data-start="1181.72" data-end="1184.73">cycle in my application how often does</span> <span data-start="1184.73" data-end="1186.74">it run and you can actually find this</span> <span data-start="1186.74" data-end="1188.539">out all I don't have pictures of it in</span> <span data-start="1188.539" data-end="1191.57">my talk but if you use the chrome dev</span> <span data-start="1191.57" data-end="1195.74">tools timeline tab thing that shows all</span> <span data-start="1195.74" data-end="1197">the stuff that's happening in your</span> <span data-start="1197" data-end="1201.049">application Jake will explain later you</span> <span data-start="1201.049" data-end="1203.24">can actually find when garbage</span> <span data-start="1203.24" data-end="1205.51">collection cycles are running in your</span> <span data-start="1205.51" data-end="1207.23">application you can determine how</span> <span data-start="1207.23" data-end="1208.88">frequently they're occurring that might</span> <span data-start="1208.88" data-end="1211.52">be symptomatic of how fast stuff is</span> <span data-start="1211.52" data-end="1213.26">allocating in the new space so if you're</span> <span data-start="1213.26" data-end="1216.02">like aggressively allocating new memory</span> <span data-start="1216.02" data-end="1217.549">and a loop or something like that you</span> <span data-start="1217.549" data-end="1220.7">might want optimize that there's like</span> <span data-start="1220.7" data-end="1223.97">stuff you can do that brings us to the</span> <span data-start="1223.97" data-end="1226.659">right tools for really messy job</span> <span data-start="1226.659" data-end="1229.25">debugging memory is no fun like I'm</span> <span data-start="1229.25" data-end="1231.53">surprised most of you are still engaged</span> <span data-start="1231.53" data-end="1236.299">in this talk way to go good job but good</span> <span data-start="1236.299" data-end="1241.07">tools can make it much easier and so the</span> <span data-start="1241.07" data-end="1245.059">first awesome tool once again in chrome</span> <span data-start="1245.059" data-end="1245.9">dev tools</span> <span data-start="1245.9" data-end="1248.51">there's tons of awesome tools and chrome</span> <span data-start="1248.51" data-end="1250.34">dev tools mostly because the folks at</span> </p>
<p><span data-start="1250.34" data-end="1252.559">Google are building lots of very memory</span> <span data-start="1252.559" data-end="1253.1">intense</span> <span data-start="1253.1" data-end="1255.919">applications things like Gmail things</span> <span data-start="1255.919" data-end="1257.87">like Google Drive and so you know if the</span> <span data-start="1257.87" data-end="1259.91">like Google Drive team or the Gmail team</span> <span data-start="1259.91" data-end="1263.03">is like and we need tools to like debug</span> <span data-start="1263.03" data-end="1265.429">figure out memory in our applications</span> <span data-start="1265.429" data-end="1267.95">they'll like go go bug the chrome team</span> <span data-start="1267.95" data-end="1269.179">and the chrome team will be all like</span> <span data-start="1269.179" data-end="1272.03">alright we're at your service and so the</span> <span data-start="1272.03" data-end="1274.09">result is that there's a rich toolset</span> <span data-start="1274.09" data-end="1278.48">for inspecting heap allocation and for</span> <span data-start="1278.48" data-end="1280.88">examining and profiling our applications</span> <span data-start="1280.88" data-end="1283.19">and dev tools yeah that's great for us</span> <span data-start="1283.19" data-end="1287.15">as programmers and so this is a snapshot</span> <span data-start="1287.15" data-end="1290.57">that I took of the chrome dev tools heap</span> <span data-start="1290.57" data-end="1292.64">allocation profiler running on the</span> </p>
<p><span data-start="1292.64" data-end="1295.549">Facebook web application and there's</span> <span data-start="1295.549" data-end="1297.799">sort of two curious things that I want</span> <span data-start="1297.799" data-end="1300.65">to point everyone to which are the</span> <span data-start="1300.65" data-end="1303.08">retained size and the shallow size of an</span> <span data-start="1303.08" data-end="1304.789">object and you'll see these mentioned a</span> <span data-start="1304.789" data-end="1307.64">lot when you start to like independently</span> <span data-start="1307.64" data-end="1309.44">research memory management because I got</span> <span data-start="1309.44" data-end="1312.95">you so excited about it the shallow size</span> <span data-start="1312.95" data-end="1315.559">of an object is the amount of memory</span> <span data-start="1315.559" data-end="1318.74">that it holds in and of itself and the</span> <span data-start="1318.74" data-end="1322.28">retained size is its size and all of its</span> <span data-start="1322.28" data-end="1323.87">dependents if it's pointing to anything</span> <span data-start="1323.87" data-end="1325.49">in the heap structure it's all of those</span> <span data-start="1325.49" data-end="1328.64">and the chrome dev tools allows you to</span> <span data-start="1328.64" data-end="1334.19">see that oh my god there's there had to</span> <span data-start="1334.19" data-end="1337.46">be an NPM command and this after load is</span> <span data-start="1337.46" data-end="1339.38">talk yay</span> <span data-start="1339.38" data-end="1341.9">another great thing about having tools</span> <span data-start="1341.9" data-end="1343.97">like NPM available to us is that people</span> <span data-start="1343.97" data-end="1346.19">can build utilities to help other</span> <span data-start="1346.19" data-end="1348.11">programmers do their stuff and things</span> <span data-start="1348.11" data-end="1350.929">better and so we're all happy people as</span> <span data-start="1350.929" data-end="1353.299">a particular utility that I want to</span> <span data-start="1353.299" data-end="1358.19">showcase here is called heap dump um</span> <span data-start="1358.19" data-end="1361.19">heap dump is a JavaScript library that</span> <span data-start="1361.19" data-end="1363.26">you can install for node and it allows</span> <span data-start="1363.26" data-end="1366.23">you to take a snapshot of your heap at a</span> <span data-start="1366.23" data-end="1368.57">particular instance and it's a super</span> <span data-start="1368.57" data-end="1370.46">easy to use library it's got a very</span> <span data-start="1370.46" data-end="1372.32">simple API there's only like one</span> <span data-start="1372.32" data-end="1374.48">function that exports which is write</span> <span data-start="1374.48" data-end="1377.84">snapshot what you can do is you can take</span> <span data-start="1377.84" data-end="1379.52">a snapshot of your application at a</span> <span data-start="1379.52" data-end="1382.4">particular instant and you'll get a file</span> <span data-start="1382.4" data-end="1383.99">with a dot heap snapshot</span> <span data-start="1383.99" data-end="1385.52">extension and then you can actually load</span> <span data-start="1385.52" data-end="1388.64">it into the chrome dev tools profiler</span> <span data-start="1388.64" data-end="1390.53">and start to analyze it inside that</span> <span data-start="1390.53" data-end="1392.15">really awesome interface that the team</span> <span data-start="1392.15" data-end="1394.37">at chrome built instead of reading the</span> <span data-start="1394.37" data-end="1397.76">like raw Heath snapshot file don't don't</span> <span data-start="1397.76" data-end="1398.96">do that that's not smart</span> <span data-start="1398.96" data-end="1405.35">spare yourself the trouble awesome so</span> </p>
<p><span data-start="1405.35" data-end="1407.92">I'm going to try and stay on time um</span> <span data-start="1407.92" data-end="1410.54">here with four minutes left</span> <span data-start="1410.54" data-end="1412.61">I mentioned that I put together a</span> <span data-start="1412.61" data-end="1417.41">resource for everyone here today ah that</span> <span data-start="1417.41" data-end="1421.66">I will show off now um</span> <span data-start="1421.66" data-end="1426.41">awesome okay hopefully everyone can see</span> <span data-start="1426.41" data-end="1429.04">this awesome so this is just a</span> <span data-start="1429.04" data-end="1432.53">interactive experience that I set up and</span> <span data-start="1432.53" data-end="1434.27">it starts off with the very basic</span> <span data-start="1434.27" data-end="1438.29">console logging things um and you start</span> <span data-start="1438.29" data-end="1440.95">to get familiar with the heap dump tool</span> <span data-start="1440.95" data-end="1443.33">in writing snapshots and there are some</span> <span data-start="1443.33" data-end="1445.16">questions for you to think about this is</span> <span data-start="1445.16" data-end="1446.96">basically a homework assignment so I'm</span> <span data-start="1446.96" data-end="1448.82">like I'm like your college ciass</span> <span data-start="1448.82" data-end="1451.309">professor that you hated but hopefully</span> <span data-start="1451.309" data-end="1457.03">funnier um so I'm going to go ahead and</span> <span data-start="1457.03" data-end="1461.66">publish this really quickly so if it</span> <span data-start="1461.66" data-end="1467.45">works awesome I'm going to live tweet it</span> <span data-start="1467.45" data-end="1473.66">out awesome so this way you guys will be</span> <span data-start="1473.66" data-end="1478.01">able to see I can't live code in my</span> <span data-start="1478.01" data-end="1479.6">presentation so the least I could do is</span> <span data-start="1479.6" data-end="1487.4">like live tweet that'll help right</span> <span data-start="1487.41" data-end="1504.57">also</span> <span data-start="1504.58" data-end="1507.099">there's probably a typo in that as is</span> <span data-start="1507.099" data-end="1509.679">there a typo and all my tweets thank you</span> <span data-start="1509.679" data-end="1513.609">for the applause I know that was all of</span> <span data-start="1513.609" data-end="1515.349">computation led up to that</span> <span data-start="1515.349" data-end="1518.32">um awesome so feel free to check out</span> <span data-start="1518.32" data-end="1520.209">that tool there is a link to that github</span> <span data-start="1520.209" data-end="1522.129">repository for it so if you have trouble</span> <span data-start="1522.129" data-end="1524.799">with it or like you're confused my my</span> <span data-start="1524.799" data-end="1526.269">directions or you think there should be</span> <span data-start="1526.269" data-end="1527.739">more jokes in there just open up an</span> <span data-start="1527.739" data-end="1531.369">issue and I'll address it if you want to</span> <span data-start="1531.369" data-end="1533.169">get the slides for this talk they're</span> <span data-start="1533.169" data-end="1536.95">available at sofia Rox um there's a talk</span> <span data-start="1536.95" data-end="1539.259">section on my website and if you scroll</span> <span data-start="1539.259" data-end="1542.789">down you'll see all the good stuff and</span> <span data-start="1542.789" data-end="1546.19">finally thanks for being a wonderful</span> <span data-start="1546.19" data-end="1548.529">audience thanks to the organizers for</span> <span data-start="1548.529" data-end="1550.539">putting this together and for like</span> <span data-start="1550.539" data-end="1553.149">bringing us all here I'll try and get a</span> <span data-start="1553.149" data-end="1554.709">lot of sleep tonight so I can like</span> <span data-start="1554.709" data-end="1556.539">actually communicate and interact with</span> <span data-start="1556.539" data-end="1557.95">you people without being jet-lagged</span> <span data-start="1557.95" data-end="1561.219">insane but thanks I hope my talk was</span> <span data-start="1561.219" data-end="1563.019">like super informative and you took</span> <span data-start="1563.019" data-end="1565.209">something away from it or you just like</span> <span data-start="1565.209" data-end="1567.039">liked my jokes that's fine too I'll stop</span> <span data-start="1567.039" data-end="1568.509">talking now and Jake can come up and</span> </p>
</section>