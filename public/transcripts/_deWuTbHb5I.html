<section>
<p><span data-start="0.76" data-end="11.44">[Music]</span> <span data-start="11.45" data-end="16.08">cool thanks guys you can hear me okay</span> <span data-start="16.08" data-end="19.38">all right yeah so good morning I'm</span> <span data-start="19.38" data-end="22.74">really excited to be speaking at Jay s</span> <span data-start="22.74" data-end="26.01">conf I've never really spoken at a</span> <span data-start="26.01" data-end="28.46">conference before or at least one with</span> <span data-start="28.46" data-end="36.239">thanks so yeah and it's really exciting</span> <span data-start="36.239" data-end="39.39">because in 2015</span> <span data-start="39.39" data-end="42.239">Patricia Garcia gave a talk here in</span> <span data-start="42.239" data-end="43.41">Berlin at Jay s conf</span> <span data-start="43.41" data-end="46.59">on an offline first data and I wasn't</span> <span data-start="46.59" data-end="48.45">there for it but I saw it a year or two</span> <span data-start="48.45" data-end="52.17">later on YouTube and kind of figured out</span> <span data-start="52.17" data-end="54.6">where her LinkedIn profile was there was</span> <span data-start="54.6" data-end="57.21">no job so I found her github profile and</span> </p>
<p><span data-start="57.21" data-end="61.17">I found a link to a repo at Justin's</span> <span data-start="61.17" data-end="64.739">organization which is field intelligence</span> <span data-start="64.739" data-end="68.46">where I work now so I emailed Justin in</span> <span data-start="68.46" data-end="70.26">two weeks later I was on a plane to</span> <span data-start="70.26" data-end="72.63">Nigeria and now Patricia and I are</span> <span data-start="72.63" data-end="76.009">colleagues and I'm speaking here about</span> <span data-start="76.009" data-end="80.97">offline first stuff so the work we do is</span> <span data-start="80.97" data-end="83.79">in trying to deliver health care</span> <span data-start="83.79" data-end="86.67">commodities where it's a bit tougher to</span> <span data-start="86.67" data-end="90.619">deliver them expanding access with</span> <span data-start="90.619" data-end="92.939">partnering with federal governments and</span> <span data-start="92.939" data-end="97.71">with down to small pharmacy traders and</span> <span data-start="97.71" data-end="100.95">doing that with software supply chain</span> <span data-start="100.95" data-end="104.67">software so we were headquartered in</span> </p>
<p><span data-start="104.67" data-end="108.06">Abuja where we work it's in the middle</span> <span data-start="108.06" data-end="111.899">of the that just below the red part in</span> <span data-start="111.899" data-end="116.299">Nigeria and this map is population and</span> <span data-start="116.299" data-end="118.77">kind of one of the reasons why Nigeria</span> <span data-start="118.77" data-end="120.84">is because it's huge and it's growing</span> <span data-start="120.84" data-end="123.719">like crazy it has a massive market and</span> <span data-start="123.719" data-end="126.719">it's like about one-sixth of the</span> <span data-start="126.719" data-end="130.8">continent like 200 million people we're</span> <span data-start="130.8" data-end="133.8">a small team of software developers</span> <span data-start="133.8" data-end="135.45">for Asians people we have an office</span> <span data-start="135.45" data-end="137.64">there a small one here in Berlin and</span> <span data-start="137.64" data-end="140.91">then a couple operations offices in</span> <span data-start="140.91" data-end="145.38">Lagos and in Nairobi so three years ago</span> <span data-start="145.38" data-end="147.36">four years ago when the company started</span> <span data-start="147.36" data-end="149.25">you kind of asked the question okay what</span> <span data-start="149.25" data-end="152.97">tech stack are we gonna use for pharmacy</span> <span data-start="152.97" data-end="156.57">supply chain management you can buy one</span> <span data-start="156.57" data-end="158.52">you can use one that's already built</span> <span data-start="158.52" data-end="161.34">there's a lot of them you can customize</span> <span data-start="161.34" data-end="165.42">on top of a development platform like an</span> </p>
<p><span data-start="165.42" data-end="168.57">Oracle or in s AP a lot of warehouses</span> <span data-start="168.57" data-end="171.9">and places and G RIA do this</span> <span data-start="171.9" data-end="173.73">or you do what a lot of large companies</span> <span data-start="173.73" data-end="175.32">do a lot of large tech companies in</span> <span data-start="175.32" data-end="178.62">Fortune 500 companies where they just</span> <span data-start="178.62" data-end="180.81">build their own and if you're gonna do</span> <span data-start="180.81" data-end="184.92">that and it's 2015 2016 you're probably</span> <span data-start="184.92" data-end="187.5">gonna choose like a very boring but</span> <span data-start="187.5" data-end="189.68">sensible stack maybe something like</span> <span data-start="189.68" data-end="193.5">c-sharp net or Django with Python or</span> <span data-start="193.5" data-end="196.59">Ruby on Rails something with a Postgres</span> <span data-start="196.59" data-end="198.81">or some sort of sequel relational</span> <span data-start="198.81" data-end="201.9">backend which works really nice with</span> <span data-start="201.9" data-end="205.11">enterprise resource planning you get a</span> <span data-start="205.11" data-end="207.63">lot of stuff out of the box a lot of</span> <span data-start="207.63" data-end="210.75">tools that can really help you but for</span> <span data-start="210.75" data-end="214.17">us our requirements were a lot different</span> <span data-start="214.17" data-end="218.58">than that and the contrast that I kind</span> <span data-start="218.58" data-end="220.41">of like to invent people will talk about</span> <span data-start="220.41" data-end="222">these cities in different ways but I</span> <span data-start="222" data-end="224.85">like to think of Abuja and Lagos as the</span> <span data-start="224.85" data-end="227.85">two places we need to operate and Lagos</span> <span data-start="227.85" data-end="229.68">for people who have been there is a mega</span> <span data-start="229.68" data-end="231.989">city it's like a country it's it's 20</span> <span data-start="231.989" data-end="235.8">million people it has tons of growth</span> <span data-start="235.8" data-end="238.92">tons of money tons of opportunities and</span> <span data-start="238.92" data-end="242.04">then it also has networks that sometimes</span> <span data-start="242.04" data-end="243.66">work and sometimes don't work you're a</span> <span data-start="243.66" data-end="246.3">small pharmacy you connect to the</span> <span data-start="246.3" data-end="249.33">internet on a cell tower there's tons of</span> <span data-start="249.33" data-end="250.98">cell towers you see them everywhere but</span> <span data-start="250.98" data-end="253.019">then there's a traffic jam right outside</span> <span data-start="253.019" data-end="256.019">of your business and suddenly 10,000</span> <span data-start="256.019" data-end="257.82">people are trying to use the same cell</span> <span data-start="257.82" data-end="260.82">tower and you don't have network but you</span> <span data-start="260.82" data-end="264.12">need to keep working and then Abuja is a</span> <span data-start="264.12" data-end="265.87">planned administrator</span> <span data-start="265.87" data-end="269.08">city of just like a million people and I</span> <span data-start="269.08" data-end="270.91">always have internet there people don't</span> <span data-start="270.91" data-end="273.76">carry cash they pay with bank cards our</span> <span data-start="273.76" data-end="276.52">partners at the federal government have</span> <span data-start="276.52" data-end="279.669">this giant command center room that has</span> <span data-start="279.669" data-end="282.4">network it has HD TVs it has a rotating</span> <span data-start="282.4" data-end="284.53">web camera that follows you as you talk</span> <span data-start="284.53" data-end="286.3">and they need to see what's going on in</span> <span data-start="286.3" data-end="288.8">the whole country</span> <span data-start="288.81" data-end="291.79">so we want to make something that's</span> <span data-start="291.79" data-end="294.25">better than just a traditional boring</span> <span data-start="294.25" data-end="296.26">web application we need something that</span> <span data-start="296.26" data-end="299.949">can work in both of these places and so</span> <span data-start="299.949" data-end="301">that means doing something that's</span> <span data-start="301" data-end="304.41">offline capable and offline is not</span> <span data-start="304.41" data-end="307.81">binary it's not a it's an offline</span> <span data-start="307.81" data-end="309.76">capable app or it's or it's an online</span> <span data-start="309.76" data-end="312.61">app you have well it looks crazy on the</span> <span data-start="312.61" data-end="314.59">screen you have like a lot of different</span> <span data-start="314.59" data-end="317.26">options the first one is what we call</span> <span data-start="317.26" data-end="319.51">small offline these are names we made up</span> <span data-start="319.51" data-end="322.33">for these categories and it's kind of</span> <span data-start="322.33" data-end="324.28">like a marketing gimmick that a lot of</span> <span data-start="324.28" data-end="327.16">web-based apps use where they say we're</span> <span data-start="327.16" data-end="329.68">offline capable and people who aren't</span> <span data-start="329.68" data-end="331.15">software developers don't know what that</span> <span data-start="331.15" data-end="332.95">means but like we know what this means</span> <span data-start="332.95" data-end="334.539">it's like kind of like you're working on</span> <span data-start="334.539" data-end="336.28">an issue ticket and github and you lose</span> <span data-start="336.28" data-end="338.32">the network connectivity you can like</span> <span data-start="338.32" data-end="341.56">keep typing you know the data will stay</span> <span data-start="341.56" data-end="341.919">there</span> <span data-start="341.919" data-end="344.11">maybe it's thrown into local storage but</span> <span data-start="344.11" data-end="345.669">you don't want to like refresh you don't</span> <span data-start="345.669" data-end="347.32">want to click around so we couldn't use</span> <span data-start="347.32" data-end="349.83">this model it's not going to work for us</span> <span data-start="349.83" data-end="352.3">medium offline which is our word for</span> <span data-start="352.3" data-end="355.24">like just using a native app like a</span> <span data-start="355.24" data-end="358.539">iPhone app an Android app or writing for</span> <span data-start="358.539" data-end="362.169">a plot like Windows or Mac OS is a lot</span> <span data-start="362.169" data-end="364.44">more attractive and I've done work on</span> <span data-start="364.44" data-end="367">apps like that before for pharmacy</span> <span data-start="367" data-end="367.72">supply chain</span> <span data-start="367.72" data-end="370.15">our company has as well and it's not</span> <span data-start="370.15" data-end="371.59">something that we're necessarily going</span> <span data-start="371.59" data-end="373.75">to rule out in the future but it is</span> <span data-start="373.75" data-end="377.11">still very manual there's question marks</span> <span data-start="377.11" data-end="379.389">for how offline it is because it totally</span> <span data-start="379.389" data-end="381.37">depends on you as the developer what</span> <span data-start="381.37" data-end="382.599">kind of database are you working with</span> <span data-start="382.599" data-end="384.82">what rules are you setting up and how</span> <span data-start="384.82" data-end="386.71">are you syncing with remote so like the</span> <span data-start="386.71" data-end="389.05">example is like you pay to have offline</span> <span data-start="389.05" data-end="391.96">features in consumer apps like like</span> </p>
<p><span data-start="391.96" data-end="394.69">Spotify and like duolingo that give you</span> <span data-start="394.69" data-end="397.93">offline features that duolingo seems to</span> <span data-start="397.93" data-end="399.52">work really well but like Spotify</span> <span data-start="399.52" data-end="400.96">seems like every time I get on a plane</span> <span data-start="400.96" data-end="404.08">it forgets what I said to download</span> <span data-start="404.08" data-end="408.94">offline big offline is really important</span> <span data-start="408.94" data-end="410.71">to think about because this is how</span> <span data-start="410.71" data-end="413.979">hospital IT systems work most of them</span> <span data-start="413.979" data-end="416.44">historically this is changing but what</span> <span data-start="416.44" data-end="417.97">you've had over the past couple decades</span> <span data-start="417.97" data-end="423.069">is excuse me like a very large on-site</span> <span data-start="423.069" data-end="425.05">deployment of servers even a server</span> <span data-start="425.05" data-end="426.58">warehouse</span> <span data-start="426.58" data-end="428.74">you have IT staff you have a local area</span> <span data-start="428.74" data-end="432.28">network and it's because clinicians need</span> <span data-start="432.28" data-end="434.05">their software to work offline it's not</span> <span data-start="434.05" data-end="436.87">like offline is new to tech companies in</span> <span data-start="436.87" data-end="441.43">this industry but as I said like that's</span> <span data-start="441.43" data-end="442.87">not going to work for us we can't put a</span> <span data-start="442.87" data-end="446.38">server in like right now we're working</span> <span data-start="446.38" data-end="449.919">with about 30,000 pharmacies and there's</span> <span data-start="449.919" data-end="454.09">hundreds of thousands to plan for so we</span> <span data-start="454.09" data-end="457.06">went with the web with offline first in</span> <span data-start="457.06" data-end="459.49">the web that gets us kind of the things</span> <span data-start="459.49" data-end="461.86">we want low IT support you can do the</span> <span data-start="461.86" data-end="464.08">whole thing offline but it's still the</span> <span data-start="464.08" data-end="467.56">internet it's still sinking and there's</span> <span data-start="467.56" data-end="470.32">a lot of talks on which distributed</span> <span data-start="470.32" data-end="473.919">database to use like the basic setup for</span> <span data-start="473.919" data-end="477.28">an offline app web app is you put a</span> <span data-start="477.28" data-end="479.59">service worker in you tell it to cache</span> <span data-start="479.59" data-end="482.469">the static application and then you work</span> <span data-start="482.469" data-end="484.509">with local storage in the browser which</span> <span data-start="484.509" data-end="486.039">has become a lot more attractive over</span> <span data-start="486.039" data-end="488.259">the last several years you get to use a</span> <span data-start="488.259" data-end="491.02">lot of the users available disk space a</span> <span data-start="491.02" data-end="493.63">percentage of it but how do you work</span> <span data-start="493.63" data-end="497.08">with the in browser database and what do</span> <span data-start="497.08" data-end="500.65">you replicate with and couchdb and pouch</span> </p>
<p><span data-start="500.65" data-end="503.009">TV which some people at this conference</span> <span data-start="503.009" data-end="506.919">helps build are kind of like the tools</span> <span data-start="506.919" data-end="508.75">that most people end up using we're</span> <span data-start="508.75" data-end="512.38">really happy with the area that they</span> <span data-start="512.38" data-end="514.779">cover for us if you know of some cool</span> <span data-start="514.779" data-end="519.39">tool that somebody has or like this</span> <span data-start="519.39" data-end="522.25">question that I often get is like oh why</span> <span data-start="522.25" data-end="524.56">don't you just write your own super cool</span> <span data-start="524.56" data-end="528.43">like replicating thing that that uses</span> <span data-start="528.43" data-end="531.37">blockchain and Kafka and is</span> <span data-start="531.37" data-end="534.16">Torsten and the thing is that like with</span> <span data-start="534.16" data-end="536.32">these two our problem is never in the</span> <span data-start="536.32" data-end="539.26">actual replication protocol whenever we</span> <span data-start="539.26" data-end="540.37">don't have engineer's sitting around</span> <span data-start="540.37" data-end="542.41">wasting time trying to figure out what</span> <span data-start="542.41" data-end="544.18">steps went wrong if there's a little bit</span> <span data-start="544.18" data-end="546.82">of network the document sink so these</span> <span data-start="546.82" data-end="549.839">two have been really useful for that</span> <span data-start="549.839" data-end="552.55">like somebody gave a talk a while ago</span> <span data-start="552.55" data-end="554.02">where they said friends don't let</span> <span data-start="554.02" data-end="555.96">friends build their own replication</span> <span data-start="555.96" data-end="561.1">protocols Gregor said this and yeah all</span> <span data-start="561.1" data-end="565.87">of our problems are elsewhere we have</span> <span data-start="565.87" data-end="569.85">our stack we're sticking with it and</span> <span data-start="569.85" data-end="572.22">like what could go wrong with this</span> <span data-start="572.22" data-end="577.32">somewhat non-traditional application and</span> <span data-start="577.32" data-end="579.67">for those of you who've maybe done work</span> <span data-start="579.67" data-end="584.47">in like global public health you know</span> <span data-start="584.47" data-end="586.57">that it's not actually this very well</span> <span data-start="586.57" data-end="589.089">clearly administered highly educated</span> <span data-start="589.089" data-end="591.31">system of people with clear incentives</span> <span data-start="591.31" data-end="595.57">like it's constantly in a state of</span> <span data-start="595.57" data-end="600.01">emergency the whatever the current</span> <span data-start="600.01" data-end="602.08">situation is or or however the current</span> <span data-start="602.08" data-end="604.36">administration's are working there's</span> <span data-start="604.36" data-end="606.31">just this constant need to build things</span> <span data-start="606.31" data-end="609.43">quickly and make things happen and very</span> <span data-start="609.43" data-end="612.01">sort of unclear incentives it's not like</span> <span data-start="612.01" data-end="613.9">a market economy that's just working off</span> <span data-start="613.9" data-end="619.3">of a bottom line taller so we started</span> <span data-start="619.3" data-end="621.37">hitting like a lot of problems right</span> <span data-start="621.37" data-end="622.66">away even though all of us had had</span> <span data-start="622.66" data-end="624.459">experience in building these kinds of</span> <span data-start="624.459" data-end="627.16">applications we were building them at a</span> <span data-start="627.16" data-end="630.55">very much bigger scale than what we've</span> <span data-start="630.55" data-end="632.65">done before and the first problem you</span> <span data-start="632.65" data-end="637.69">hit right away is what do you sync you</span> <span data-start="637.69" data-end="639.76">have to segment the data somehow you</span> <span data-start="639.76" data-end="641.74">can't I mean we did we started by just</span> <span data-start="641.74" data-end="643.779">giving all of the data to every client</span> <span data-start="643.779" data-end="645.61">we say like you get the whole database</span> <span data-start="645.61" data-end="647.98">but then over time you need to start</span> <span data-start="647.98" data-end="650.74">segmenting on something because if it's</span> <span data-start="650.74" data-end="651.79">all gonna get stored in the users</span> <span data-start="651.79" data-end="653.68">browser it doesn't matter how much space</span> <span data-start="653.68" data-end="656.02">they have the data is growing linearly</span> <span data-start="656.02" data-end="658.45">over time we're getting hundreds of</span> <span data-start="658.45" data-end="660.97">thousands of documents of reports and</span> <span data-start="660.97" data-end="662.95">shipments so you can't just tell the</span> <span data-start="662.95" data-end="663.939">user take</span> <span data-start="663.939" data-end="668.799">everything and the way you segment data</span> <span data-start="668.799" data-end="672.159">using these databases using CouchDB is</span> <span data-start="672.159" data-end="675.819">you set up a partition per a user you</span> <span data-start="675.819" data-end="677.709">say this user is going to get these</span> <span data-start="677.709" data-end="679.539">documents and the way you get it from</span> <span data-start="679.539" data-end="681.399">the main database is you just sync them</span> <span data-start="681.399" data-end="684.849">so your rules for setting this up are</span> <span data-start="684.849" data-end="689.049">just entirely custom code your it's</span> <span data-start="689.049" data-end="691.119">entirely up to you so you have to take</span> <span data-start="691.119" data-end="693.519">into consideration all right what are</span> <span data-start="693.519" data-end="696.579">our rules we need to you know somebody</span> <span data-start="696.579" data-end="698.559">in Delta state should not be seeing the</span> <span data-start="698.559" data-end="700.599">same data as somebody in Lego state</span> <span data-start="700.599" data-end="705.069">ok cool geography next time time-based</span> <span data-start="705.069" data-end="707.259">data becomes a really big issue because</span> <span data-start="707.259" data-end="711.159">you need to sync some of it but not all</span> <span data-start="711.159" data-end="714.009">of it but then this comes into like the</span> <span data-start="714.009" data-end="717.909">domain model of what is okay to cut off</span> <span data-start="717.909" data-end="722.199">because like to calculate how much stuff</span> <span data-start="722.199" data-end="724.929">you have at a store or how much money</span> <span data-start="724.929" data-end="726.669">you have in your bank account it's</span> <span data-start="726.669" data-end="728.349">usually like what was the opening</span> <span data-start="728.349" data-end="730.749">transaction and then let's add all of</span> <span data-start="730.749" data-end="734.049">the debits and credits over time until I</span> <span data-start="734.049" data-end="737.529">get the current balance but if I only</span> <span data-start="737.529" data-end="740.349">sync your last ten transactions that's</span> <span data-start="740.349" data-end="742.389">not gonna give you the right data to get</span> <span data-start="742.389" data-end="745.809">the right and number so you look at what</span> <span data-start="745.809" data-end="748.419">to sync as a developer and you have all</span> <span data-start="748.419" data-end="750.069">of these different choices the other</span> <span data-start="750.069" data-end="751.479">thing that I'm not going to spend a lot</span> <span data-start="751.479" data-end="752.889">of time on is that with supply chain</span> <span data-start="752.889" data-end="755.559">management you have really crazy access</span> <span data-start="755.559" data-end="758.919">rules you have tons of dynamic lists of</span> <span data-start="758.919" data-end="761.019">who's allowed to see which certain</span> <span data-start="761.019" data-end="762.879">sponsored commodities at which certain</span> <span data-start="762.879" data-end="767.379">locations two years ago at this month so</span> <span data-start="767.379" data-end="770.799">there's not like a ton of yeah really</span> <span data-start="770.799" data-end="776.889">clear ways to model your your data next</span> <span data-start="776.889" data-end="779.079">is network storage and this is kind of</span> <span data-start="779.079" data-end="782.769">exciting normally in an application you</span> <span data-start="782.769" data-end="786.429">have a database that you're working with</span> <span data-start="786.429" data-end="790.059">and so your code to access the the data</span> <span data-start="790.059" data-end="793.149">is just in one place and you try and</span> <span data-start="793.149" data-end="795.009">keep it extracted maybe someday you're</span> <span data-start="795.009" data-end="796.089">going to reap lat form and you're going</span> <span data-start="796.089" data-end="797.1">to choose a different database</span> <span data-start="797.1" data-end="798.57">but typically you're working from one</span> <span data-start="798.57" data-end="801.6">type of data store if we had gone the</span> <span data-start="801.6" data-end="804.2">traditional like web framework</span> <span data-start="804.2" data-end="810.42">application and with online offline you</span> <span data-start="810.42" data-end="814.14">have data that can be coming from the</span> <span data-start="814.14" data-end="817.26">index TV browser database through pouch</span> <span data-start="817.26" data-end="819.36">you have data that could just be like in</span> <span data-start="819.36" data-end="820.23">an in-memory</span> <span data-start="820.23" data-end="824.61">excuse me cache you have requests from</span> <span data-start="824.61" data-end="826.23">the browser to get remote data that you</span> <span data-start="826.23" data-end="828.86">don't have locally and then you have</span> <span data-start="828.86" data-end="831.33">back-end service functions that are also</span> <span data-start="831.33" data-end="833.82">talking to the same database that need</span> <span data-start="833.82" data-end="836.24">to do similar business logic so</span> <span data-start="836.24" data-end="839.97">developers don't really have a framework</span> <span data-start="839.97" data-end="842.55">for where we're busy we need to throw</span> <span data-start="842.55" data-end="844.98">our code somewhere if this was rails I'd</span> <span data-start="844.98" data-end="846.39">have an endpoint I'd have a new table</span> <span data-start="846.39" data-end="848.43">and set up a new entity and I put the</span> <span data-start="848.43" data-end="850.38">code under it and even if it's messy</span> <span data-start="850.38" data-end="852.54">everybody in the organization is used to</span> <span data-start="852.54" data-end="854.85">that pattern but for us it was just like</span> <span data-start="854.85" data-end="857.28">just put it wherever you want like let's</span> <span data-start="857.28" data-end="858.9">put it in the lambda let's put it in</span> <span data-start="858.9" data-end="862.29">this back-end script let's put it you</span> <span data-start="862.29" data-end="864.51">know in the front end and then over time</span> <span data-start="864.51" data-end="866.31">you don't have like an isolated place</span> <span data-start="866.31" data-end="867.75">because you're working with different</span> <span data-start="867.75" data-end="872.58">network storage adapters the biggest one</span> <span data-start="872.58" data-end="874.59">of the bigger problems that isn't just</span> <span data-start="874.59" data-end="877.89">us on the front end doing web-based</span> <span data-start="877.89" data-end="881.06">applications is is modeling JSON</span> <span data-start="881.06" data-end="885">modeling sort of without a relational</span> <span data-start="885" data-end="889.05">database and there isn't as far as we</span> <span data-start="889.05" data-end="890.85">know so far like there isn't one clear</span> <span data-start="890.85" data-end="893.73">way to do this that always wins there's</span> <span data-start="893.73" data-end="895.74">a lot of different strategies to deal</span> <span data-start="895.74" data-end="898.86">with the problems so normalization like</span> <span data-start="898.86" data-end="903.03">you want this table and this table and</span> <span data-start="903.03" data-end="905.16">this table to be neatly separated and</span> <span data-start="905.16" data-end="907.02">you have foreign keys between between</span> <span data-start="907.02" data-end="908.79">them like this is a database that's</span> <span data-start="908.79" data-end="910.62">awesome that's what you want and so you</span> <span data-start="910.62" data-end="912.15">you're a developer and you're like I'm</span> <span data-start="912.15" data-end="913.74">going to do this in JSON so I'm going to</span> <span data-start="913.74" data-end="915.15">create a document and a document and a</span> <span data-start="915.15" data-end="917.43">document and a document and then to get</span> <span data-start="917.43" data-end="920.43">this document and to join on them you're</span> <span data-start="920.43" data-end="922.59">making HTTP requests over a network</span> <span data-start="922.59" data-end="924.33">because you don't know what the relation</span> <span data-start="924.33" data-end="927.69">is yet so so then you say oh okay that's</span> <span data-start="927.69" data-end="929.55">too much I'm gonna put everything in the</span> </p>
<p><span data-start="929.55" data-end="930.75">JSON document</span> <span data-start="930.75" data-end="932.25">and then a user says hey we need to</span> <span data-start="932.25" data-end="934.08">change the name of this item you say</span> <span data-start="934.08" data-end="935.7">okay let me just do a bulk update on</span> <span data-start="935.7" data-end="937.53">half a gig of data and hope that there</span> <span data-start="937.53" data-end="939.93">aren't any conflicts so and it's not</span> <span data-start="939.93" data-end="941.82">always clear what the right strategy is</span> <span data-start="941.82" data-end="943.05">for this sometimes it helps to</span> <span data-start="943.05" data-end="944.4">denormalize sometimes it helps to</span> <span data-start="944.4" data-end="948.93">normalize and document conflicts</span> <span data-start="948.93" data-end="951.06">Patricia Garcia's talk had some really</span> <span data-start="951.06" data-end="953.67">cool in-depth details about strategies</span> <span data-start="953.67" data-end="956.88">for using multiple documents to have two</span> <span data-start="956.88" data-end="958.71">users working on the same entity at the</span> <span data-start="958.71" data-end="963.9">same time without causing conflicts yeah</span> <span data-start="963.9" data-end="968.06">and then the other one is like around</span> <span data-start="968.06" data-end="970.98">what you sync to who so like kind of</span> <span data-start="970.98" data-end="973.22">access stuff you might have a list of</span> <span data-start="973.22" data-end="975.3">pharmacy commodities that you need to</span> <span data-start="975.3" data-end="978.9">send to a supplier but it turns out</span> <span data-start="978.9" data-end="981.15">there's two suppliers one for cold chain</span> <span data-start="981.15" data-end="982.8">commodities one for non cold chain</span> <span data-start="982.8" data-end="984.3">commodities so you need to split the</span> <span data-start="984.3" data-end="986.73">document so it's it's like a business</span> <span data-start="986.73" data-end="988.23">rule that impacts how you're modeling</span> <span data-start="988.23" data-end="991.89">the JSON and when a user says hey I need</span> <span data-start="991.89" data-end="994.89">to make a new type of database table you</span> <span data-start="994.89" data-end="997.29">know couch people what do I do you say</span> <span data-start="997.29" data-end="999.3">like it really depends on what you're</span> <span data-start="999.3" data-end="1002.66">doing so it makes having a single</span> <span data-start="1002.66" data-end="1006.62">framework for everything difficult so</span> <span data-start="1006.62" data-end="1010.25">deciding how to segment data and what to</span> <span data-start="1010.25" data-end="1012.74">sync to users we created this thing we</span> <span data-start="1012.74" data-end="1015.44">call an ID dispenser and it's just a</span> <span data-start="1015.44" data-end="1018.11">remote endpoint that when a user starts</span> <span data-start="1018.11" data-end="1021.29">may initialize the application we have</span> <span data-start="1021.29" data-end="1023.66">the browser make a call to a lambda and</span> <span data-start="1023.66" data-end="1026.72">the lambda takes the user who it is</span> <span data-start="1026.72" data-end="1028.85">what their location is what programs</span> <span data-start="1028.85" data-end="1030.589">they have access to and it goes and it</span> <span data-start="1030.589" data-end="1032.18">talks to CouchDB in it says hey what</span> <span data-start="1032.18" data-end="1034.85">what documents does this user need couch</span> <span data-start="1034.85" data-end="1037.13">says ok based on your business logic its</span> </p>
<p><span data-start="1037.13" data-end="1039.8">X Y & Z lambda says thanks sends it to</span> <span data-start="1039.8" data-end="1041.689">the browser and then the user has a</span> <span data-start="1041.689" data-end="1044.78">subset of the data that they get to use</span> <span data-start="1044.78" data-end="1048.53">and as an aside like this is so far been</span> <span data-start="1048.53" data-end="1051.44">working for us but if you're going to</span> <span data-start="1051.44" data-end="1054.65">use like infinitely scalable serverless</span> <span data-start="1054.65" data-end="1060.71">functions on behalf of clients remember</span> <span data-start="1060.71" data-end="1062.679">that other resources of yours are not</span> <span data-start="1062.679" data-end="1064.67">infinitely scalable</span> <span data-start="1064.67" data-end="1070.69">you might DDoS your own database so yeah</span> <span data-start="1070.69" data-end="1073.49">this is really exciting like what we</span> <span data-start="1073.49" data-end="1075.74">started to do in our API is with this</span> <span data-start="1075.74" data-end="1078.62">problem of sometimes your network</span> <span data-start="1078.62" data-end="1080.03">storage adapter is a local database</span> <span data-start="1080.03" data-end="1081.71">sometimes it's a remote database</span> <span data-start="1081.71" data-end="1084.29">sometimes you're a node is having api's</span> <span data-start="1084.29" data-end="1086.84">that have all of that to find in them</span> <span data-start="1086.84" data-end="1090.02">per entity it's one API that we use in</span> <span data-start="1090.02" data-end="1092.03">all of our different places in lambdas</span> <span data-start="1092.03" data-end="1093.47">in the back end and on the front end in</span> <span data-start="1093.47" data-end="1098.27">scripts and your API can know what kind</span> <span data-start="1098.27" data-end="1101.36">of network storage adapter you're using</span> <span data-start="1101.36" data-end="1106.97">so you have situations where you ask hey</span> <span data-start="1106.97" data-end="1109.49">give me all of the reports and the API</span> <span data-start="1109.49" data-end="1111.83">goes okay cool I'm looking in the</span> <span data-start="1111.83" data-end="1114.83">database I have found three months worth</span> <span data-start="1114.83" data-end="1117.8">of reports and that's what I know about</span> <span data-start="1117.8" data-end="1120.74">that's offline and the user then says</span> <span data-start="1120.74" data-end="1122.81">but I want to page back further than</span> <span data-start="1122.81" data-end="1125.24">that this isn't fair that I should only</span> <span data-start="1125.24" data-end="1127.82">see what's offline and the API at that</span> <span data-start="1127.82" data-end="1129.65">point says I'm gonna switch network</span> <span data-start="1129.65" data-end="1131.72">storage adapters and I'm gonna go fetch</span> <span data-start="1131.72" data-end="1138.86">the remote Docs and give that to you and</span> <span data-start="1138.86" data-end="1141.5">then a lot of this ties back into like</span> <span data-start="1141.5" data-end="1144.86">how do you design this kind of</span> <span data-start="1144.86" data-end="1149.32">application for the user you have to</span> <span data-start="1149.32" data-end="1153.02">tell the user what's going on if they</span> <span data-start="1153.02" data-end="1156.74">look for a report on their facility some</span> <span data-start="1156.74" data-end="1158.54">facility of its remote maybe they don't</span> <span data-start="1158.54" data-end="1160.46">submit reports that often and they want</span> <span data-start="1160.46" data-end="1161.96">to know has this report then submitted</span> <span data-start="1161.96" data-end="1164.78">and they're working offline the ID</span> <span data-start="1164.78" data-end="1166.91">dispenser told them you should know</span> <span data-start="1166.91" data-end="1168.62">about this range of documents you should</span> <span data-start="1168.62" data-end="1170.9">have these offline so if you go and</span> <span data-start="1170.9" data-end="1172.67">check and the documents not there</span> <span data-start="1172.67" data-end="1175.19">display to the user this thing doesn't</span> <span data-start="1175.19" data-end="1177.05">exist I don't care about what's on the</span> <span data-start="1177.05" data-end="1179.45">remote I know that this document was</span> <span data-start="1179.45" data-end="1181.01">just never submitted in the first place</span> <span data-start="1181.01" data-end="1184.13">or that it's there then if you're going</span> <span data-start="1184.13" data-end="1186.74">too far back to a segment of the data</span> <span data-start="1186.74" data-end="1189.14">that we can't sync something that's much</span> <span data-start="1189.14" data-end="1193.1">older we tell the user and we display in</span> <span data-start="1193.1" data-end="1195.41">the UI like this has got to be an online</span> <span data-start="1195.41" data-end="1197.24">resource this is something that you're</span> <span data-start="1197.24" data-end="1198.53">not going to have offline</span> <span data-start="1198.53" data-end="1199.88">so if you have network you make the</span> <span data-start="1199.88" data-end="1202.76">remote call comes back says yep we don't</span> <span data-start="1202.76" data-end="1204.56">know about that report or yep here's the</span> <span data-start="1204.56" data-end="1206.69">report display it but if you're offline</span> <span data-start="1206.69" data-end="1210.14">you have to display to the user hey like</span> <span data-start="1210.14" data-end="1212.93">we don't know like we were offline we</span> <span data-start="1212.93" data-end="1215.48">don't know if this report exists or if</span> <span data-start="1215.48" data-end="1221.78">it doesn't exist so yeah the last thing</span> <span data-start="1221.78" data-end="1226.04">is some pictures where this is like a</span> <span data-start="1226.04" data-end="1230.26">remote clinic that has a pharmacy and</span> <span data-start="1230.26" data-end="1232.82">you can see there's like a little bit of</span> <span data-start="1232.82" data-end="1235.58">a VSAT which is for satellite internet</span> <span data-start="1235.58" data-end="1240.89">and this clinic had pretty good internet</span> <span data-start="1240.89" data-end="1244.73">at the time it was like 2014 and they</span> <span data-start="1244.73" data-end="1248.27">had like 512 kilobits a second down and</span> <span data-start="1248.27" data-end="1250.28">that was fine like they could have an</span> <span data-start="1250.28" data-end="1252.05">application on site on a laptop and</span> <span data-start="1252.05" data-end="1254.78">dispense point of care to patients so as</span> <span data-start="1254.78" data-end="1257.3">patients would come up still for the</span> <span data-start="1257.3" data-end="1259.04">supply chain not for the clinicians</span> <span data-start="1259.04" data-end="1261.56">necessarily but you would track the</span> <span data-start="1261.56" data-end="1265.44">movement of pharmaceuticals</span> <span data-start="1265.45" data-end="1268.55">electronically and so when you're</span> <span data-start="1268.55" data-end="1269.93">designing for this place you think well</span> <span data-start="1269.93" data-end="1271.85">hey we can just use a network we'll just</span> <span data-start="1271.85" data-end="1275.3">really make sure that that VSAT always</span> <span data-start="1275.3" data-end="1277.34">works well we'll talk to the IT team</span> <span data-start="1277.34" data-end="1280.01">will be really serious about it but</span> <span data-start="1280.01" data-end="1283.13">that's not the case this VSAT would very</span> <span data-start="1283.13" data-end="1285.89">frequently get slightly misaligned and</span> <span data-start="1285.89" data-end="1288.71">the clinic would lose internet and</span> <span data-start="1288.71" data-end="1292.82">what's really kind of the point of using</span> <span data-start="1292.82" data-end="1294.41">this somewhat difficult and</span> <span data-start="1294.41" data-end="1297.65">non-traditional application is that for</span> <span data-start="1297.65" data-end="1301.22">that pharmacy like it didn't matter the</span> <span data-start="1301.22" data-end="1303.23">application worked fine it continued to</span> <span data-start="1303.23" data-end="1305.21">work they could create patients they</span> <span data-start="1305.21" data-end="1307.19">could create dispenses they could look</span> <span data-start="1307.19" data-end="1309.2">up their stock they could transfer stock</span> <span data-start="1309.2" data-end="1313.91">internally and then oh I should show the</span> <span data-start="1313.91" data-end="1316.37">pharmacy the pharmacy is like that one</span> <span data-start="1316.37" data-end="1318.32">in the back they're all red and looked</span> <span data-start="1318.32" data-end="1321.89">the same but the the cool part was that</span> <span data-start="1321.89" data-end="1323.96">when a shipment would come once a month</span> <span data-start="1323.96" data-end="1330.11">from the central warehouse what would</span> <span data-start="1330.11" data-end="1331.7">you do you would have to manually enter</span> <span data-start="1331.7" data-end="1332.299">that</span> <span data-start="1332.299" data-end="1335.149">like you're using an offline system and</span> <span data-start="1335.149" data-end="1337.909">then also worse is that you have</span> <span data-start="1337.909" data-end="1339.799">hundreds and hundreds of transactions</span> <span data-start="1339.799" data-end="1343.19">daily about really important commodities</span> <span data-start="1343.19" data-end="1346.879">that the central team needs to plan and</span> <span data-start="1346.879" data-end="1349.209">think about that's why they asked us</span> <span data-start="1349.209" data-end="1352.19">programmers to build something so if</span> <span data-start="1352.19" data-end="1354.32">you're not gonna send that data back</span> <span data-start="1354.32" data-end="1356.779">home then it's like why are you you know</span> <span data-start="1356.779" data-end="1358.099">why are you tracking it in the first</span> <span data-start="1358.099" data-end="1360.049">place unless it's something later some</span> <span data-start="1360.049" data-end="1361.609">analysis or something which is what a</span> <span data-start="1361.609" data-end="1364.879">lot of systems end up being used for so</span> <span data-start="1364.879" data-end="1366.079">the team would do is they would walk to</span> <span data-start="1366.079" data-end="1368.119">this River and I like this photo because</span> <span data-start="1368.119" data-end="1371.69">it looks really nice but this River was</span> <span data-start="1371.69" data-end="1373.579">like really directly behind the pharmacy</span> <span data-start="1373.579" data-end="1376.509">it's like just less than a kilometer and</span> <span data-start="1376.509" data-end="1379.989">there's a cell tower over there now that</span> <span data-start="1379.989" data-end="1382.639">when you're at the river and you have a</span> <span data-start="1382.639" data-end="1385.279">cellphone and you're tethering to your</span> <span data-start="1385.279" data-end="1388.639">laptop you have fine connectivity and</span> <span data-start="1388.639" data-end="1390.499">they didn't really do this every day</span> <span data-start="1390.499" data-end="1392.269">they didn't need to but they could just</span> <span data-start="1392.269" data-end="1393.649">go over there whenever a shipment would</span> <span data-start="1393.649" data-end="1395.359">come they would learn from the remote</span> <span data-start="1395.359" data-end="1396.229">about the shipment</span> <span data-start="1396.229" data-end="1397.729">it would update their inventory levels</span> <span data-start="1397.729" data-end="1399.799">and then they would sink to the central</span> <span data-start="1399.799" data-end="1401.959">server and the central team these are</span> <span data-start="1401.959" data-end="1403.339">all the commodities we dispensed over</span> <span data-start="1403.339" data-end="1404.779">the last couple of weeks and the central</span> <span data-start="1404.779" data-end="1406.879">team could see oh hey cool they need</span> <span data-start="1406.879" data-end="1409.399">more of this they're good on that and we</span> <span data-start="1409.399" data-end="1411.709">can know what to do next</span> <span data-start="1411.709" data-end="1414.709">even though they're VSAT is misaligned</span> <span data-start="1414.709" data-end="1420.349">and the IT team is busy so yeah that's</span> <span data-start="1420.349" data-end="1423.679">kind of like the it's really exciting</span> <span data-start="1423.679" data-end="1425.839">work like we have to know a lot about</span> </p>
<p><span data-start="1425.839" data-end="1430.19">JavaScript and we have to do new things</span> <span data-start="1430.19" data-end="1432.739">and try and talk our own team and our</span> <span data-start="1432.739" data-end="1435.859">own self into trying to use patterns and</span> <span data-start="1435.859" data-end="1438.079">put code in the right place so it can</span> <span data-start="1438.079" data-end="1441.279">feel really frustrating and at times we</span> <span data-start="1441.279" data-end="1444.259">many times we will kind of look at each</span> <span data-start="1444.259" data-end="1445.94">other and be like what are we even doing</span> <span data-start="1445.94" data-end="1448.219">like what why don't we just make a rails</span> <span data-start="1448.219" data-end="1451.429">app or a django app like this is so hard</span> <span data-start="1451.429" data-end="1453.979">but like ultimately it means an</span> <span data-start="1453.979" data-end="1456.829">application that is more like robust</span> <span data-start="1456.829" data-end="1459.589">like it can get us more data and it can</span> <span data-start="1459.589" data-end="1461.929">work in the places we want to work in so</span> <span data-start="1461.929" data-end="1464.269">even though like a year or two ago it</span> <span data-start="1464.269" data-end="1466.04">was looking pretty scary</span> <span data-start="1466.04" data-end="1469.36">there's been a lot of learnings from us</span> <span data-start="1469.36" data-end="1474.58">about stuff we've done wrong that have</span> <span data-start="1474.58" data-end="1477.59">made it possible to kind of safely start</span> <span data-start="1477.59" data-end="1480.29">delivering this type of application at a</span> <span data-start="1480.29" data-end="1483.89">pretty large scale so I'm out of time</span> <span data-start="1483.89" data-end="1486.35">but thanks very much guys for your time</span> <span data-start="1486.35" data-end="1488.7">and it's happy to talk to you today</span> <span data-start="1488.7" data-end="1490.2">[Applause]</span> </p>
</section>