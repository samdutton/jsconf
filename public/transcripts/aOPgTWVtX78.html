<section>
<p><span data-start="9.14" data-end="12.34">Lets have huge round of applause for Ola</span> <span data-start="17.62" data-end="18.34">Oh, boy.</span> <span data-start="20.02" data-end="20.92">Thank you so much.</span> <span data-start="20.92" data-end="22.08">You are amazing.</span> <span data-start="27.46" data-end="28.06">Come on, okay.</span> <span data-start="28.32" data-end="32.599">Welcome to like the very last talk of the side track of 2018.</span> <span data-start="32.599" data-end="37.76">Who has enjoyed the conference so far?</span> <span data-start="37.76" data-end="39.17">Right?</span> <span data-start="39.17" data-end="41.78">Who lost their voice?</span> <span data-start="41.78" data-end="42.809">Nice.</span> <span data-start="42.809" data-end="47.1">And if you need medicine.</span> <span data-start="47.1" data-end="49.239">So, my name is Ola.</span> <span data-start="49.239" data-end="50.829">I'm an engineer at Mozilla.</span> <span data-start="50.829" data-end="51.86">You might have heard.</span> </p>
<p><span data-start="51.86" data-end="58.449">I do mostly performance, compatibility, specs, CSS, JavaScript, just the cool stuff.</span> <span data-start="58.449" data-end="62.1">Today we are going understand how TCP works.</span> <span data-start="62.1" data-end="63.1">Surprise.</span> <span data-start="63.1" data-end="66.909">It's delivered in the packages that everyone is talking about, how it is.</span> <span data-start="66.909" data-end="72.479">And maybe we learn what happens to the ones that are lost.</span> <span data-start="72.479" data-end="73.479">Okay.</span> <span data-start="73.479" data-end="74.56">Let's jump right back in.</span> <span data-start="74.56" data-end="78.77">Let's take a look at Internet protocol family.</span> <span data-start="78.77" data-end="82.42">You might recognize one or two of them.</span> <span data-start="82.42" data-end="86.71">And it has just a very few memories like it's fine.</span> <span data-start="86.71" data-end="90.52">So, those you see here are probably the most common.</span> <span data-start="90.52" data-end="101.43">Do you recognize any like HTP, STP, SMTP, and when you're as old as I am they're cool.</span> <span data-start="101.43" data-end="108.689">And there are also different models that group them together to make the roles kind of more</span> <span data-start="108.689" data-end="109.95">understandable.</span> </p>
<p><span data-start="109.95" data-end="114.36">This works on the model which groups the protocols in seven layers.</span> <span data-start="114.36" data-end="118.96">It groups the protocols in different layers for the interactive network layer, application</span> <span data-start="118.96" data-end="122.35">layer, totally makes sense, right?</span> <span data-start="122.35" data-end="125.869">And the most important one, the eighth layer.</span> <span data-start="125.869" data-end="130.29">Everyone forgets, but it's the hardest?</span> <span data-start="130.29" data-end="132.78">People.</span> <span data-start="132.78" data-end="134.79">There's also the DOD layer model.</span> </p>
<p><span data-start="134.79" data-end="138.59">It stands for Department of Defense because they developed them.</span> <span data-start="138.59" data-end="144.97">Four layers, but it's kind of the most common in our daily architecture.</span> <span data-start="144.97" data-end="148.47">The groups of protocols are in a little bit different way.</span> <span data-start="148.47" data-end="150.95">You can see the relations in the graphics.</span> <span data-start="150.95" data-end="154.47">And the relationship model is there.</span> <span data-start="154.47" data-end="157.63">The DOD layer model is also called the TCP/IP model.</span> <span data-start="157.63" data-end="162.83">They are both the foundational protocols.</span> <span data-start="162.83" data-end="165.94">So what do they even do?</span> <span data-start="165.94" data-end="167.74">I don't know.</span> <span data-start="167.74" data-end="169.28">So, what are those?</span> <span data-start="169.28" data-end="173.37">IP is short for Internet protocol.</span> <span data-start="173.37" data-end="178.23">It's here to give the sender and receiver kind of numbers so the packages know where</span> <span data-start="178.23" data-end="181.93">they're coming from and where to go.</span> <span data-start="181.93" data-end="182.93">Like this one.</span> <span data-start="182.93" data-end="188.49">We could also go with names like bar, school, park.</span> <span data-start="188.49" data-end="191.11">But computers are not that good with words.</span> </p>
<p><span data-start="191.11" data-end="194.07">So, we stick with numbers.</span> <span data-start="194.07" data-end="198.52">Another thing it does is actually to check for like the closest router to forward the</span> <span data-start="198.52" data-end="199.52">data to.</span> <span data-start="199.52" data-end="202.41">You have a package, you're like, you!</span> <span data-start="202.41" data-end="203.41">Catch.</span> <span data-start="203.41" data-end="204.44">And we'll be fine.</span> </p>
<p><span data-start="204.44" data-end="209.34">TCP is short for transmission control protocol.</span> <span data-start="209.34" data-end="214.03">As the physical network, surprise, it's kind of not reliable.</span> <span data-start="214.03" data-end="216.61">This protocol is taking care of the transmissions of the data.</span> <span data-start="216.61" data-end="220.17">So, it creates a reliable network for you.</span> <span data-start="220.17" data-end="224.4">Makes sure everything gets from one point to another.</span> <span data-start="224.4" data-end="229.62">Especially with something so wibbly and wobbly like the physical network, it's good to have.</span> <span data-start="229.62" data-end="234.15">At least the sharks stopped chewing on the under sea fiber cables.</span> <span data-start="234.15" data-end="236.59">That's a good thing.</span> <span data-start="236.59" data-end="239.76">What does TCP do?</span> <span data-start="239.76" data-end="243.78">Make sure your data arrives in a specific order.</span> <span data-start="243.78" data-end="248.14">Make sure your data has like minimal errors so it's actually correct.</span> </p>
<p><span data-start="248.14" data-end="252.65">Make the data, scale it.</span> <span data-start="252.65" data-end="256.44">Make sure lost packages are resent.</span> <span data-start="256.44" data-end="258.37">And protects the network from being overloaded.</span> <span data-start="258.37" data-end="260.68">We'll get to that later.</span> <span data-start="260.68" data-end="261.72">What it does not do?</span> <span data-start="261.72" data-end="266.56">It just doesn't care who is sending and receiving, kind of.</span> <span data-start="266.56" data-end="270.77">It's just this cute little bear which is like, yay!</span> <span data-start="270.77" data-end="271.77">Package.</span> <span data-start="271.77" data-end="277.46">[ Laughter ] So, do you understand the roles?</span> </p>
<p><span data-start="277.46" data-end="279.53">Yes?</span> <span data-start="279.53" data-end="280.53">It's late.</span> <span data-start="280.53" data-end="281.53">Wake up.</span> <span data-start="281.53" data-end="282.53">Yes!</span> <span data-start="282.53" data-end="283.53">Woohoo!</span> <span data-start="283.53" data-end="284.53">I like that.</span> <span data-start="284.53" data-end="285.53">That's really good.</span> <span data-start="285.53" data-end="286.94">So, we get to the next point.</span> <span data-start="286.94" data-end="287.94">Packages.</span> </p>
<p><span data-start="287.94" data-end="291.05">I'm going to tell a story, make things easier.</span> <span data-start="291.05" data-end="294.15">So, imagine, your friend is sick.</span> <span data-start="294.15" data-end="296.31">Mm shit happens.</span> <span data-start="296.31" data-end="298.23">This is a good friend.</span> <span data-start="298.23" data-end="301.46">So, you want to borrow their book because you like to read.</span> <span data-start="301.46" data-end="302.5">This is a book.</span> <span data-start="302.5" data-end="309.09">And you can't go there, and your roommate will just basically grab this book and bring</span> <span data-start="309.09" data-end="310.09">it there.</span> </p>
<p><span data-start="310.09" data-end="311.76">So, this is what they do.</span> <span data-start="311.76" data-end="314.9">The roommate takes the book, bikes over.</span> <span data-start="314.9" data-end="316.54">Your friend is super happy.</span> <span data-start="316.54" data-end="317.61">They come back.</span> <span data-start="317.61" data-end="318.61">Congratulations!</span> <span data-start="318.61" data-end="320.63">You just delivered a package.</span> <span data-start="320.63" data-end="322.28">Okay, okay.</span> <span data-start="322.28" data-end="324.47">But your friend is like really sick.</span> <span data-start="324.47" data-end="328.12">Like uhchg you don't to want go there.</span> <span data-start="328.12" data-end="330.67">So, your room rate is really cool.</span> <span data-start="330.67" data-end="336.46">And you decide just to put together like a small package to make them feel better.</span> </p>
<p><span data-start="336.46" data-end="340.08">You grab some tea and candy and cookies.</span> <span data-start="340.08" data-end="342.94">So, sort it into three boxes.</span> <span data-start="342.94" data-end="351.86">Those you bought at Ikea ten years ago in the back of your cupboards, right?</span> <span data-start="351.86" data-end="358.46">And your friend is really sick and might forget they got three and which one is that's fine.</span> <span data-start="358.46" data-end="361.32">Your roommate grabs them, bikes over.</span> <span data-start="361.32" data-end="365.45">Your friend is like, that's so nice of you, thank you.</span> <span data-start="365.45" data-end="367.19">Puts in a small note for you.</span> <span data-start="367.19" data-end="368.49">Comes back.</span> <span data-start="368.49" data-end="370.71">Sounds reasonable?</span> <span data-start="370.71" data-end="371.82">Right?</span> <span data-start="371.82" data-end="374.639">You just understood how a round trip works.</span> <span data-start="374.639" data-end="375.94">Good job.</span> <span data-start="375.94" data-end="383.34">So, those packages are nothing else than boxes that contain like candy, tea, cookies.</span> <span data-start="383.34" data-end="386.26">But, well, data.</span> <span data-start="386.26" data-end="387.26">Whatever.</span> <span data-start="387.26" data-end="390.41">Their focus is just basically to group the bytes.</span> </p>
<p><span data-start="390.41" data-end="394.73">And every box is a number so you know the order and especially if all of them arrived.</span> <span data-start="394.73" data-end="395.74">That's cool.</span> <span data-start="395.74" data-end="396.74">Okay.</span> <span data-start="396.74" data-end="397.74">We got that now.</span> <span data-start="397.74" data-end="403.29">So, now the most important and biggest part we need to try to understand how actually</span> <span data-start="403.29" data-end="405.56">the transfer works.</span> <span data-start="405.56" data-end="410.539">And explaining this with data is kind of boring, right?</span> <span data-start="410.539" data-end="411.84"Audience member: Yeah.</span> <span data-start="411.84" data-end="415.74">[ Laughter ] So boring.</span> </p>
</section>

<section>
<p><span data-start="415.74" data-end="418.81"><span class="speaker">Ola</span>: Who likes pancakes?</span> <span data-start="418.81" data-end="421.37">Raise your hand!</span> <span data-start="421.37" data-end="422.92">Pancakes everyone loves pancakes.</span> <span data-start="422.92" data-end="428.68">They can't be split up in small units, you can slap stuff on it, whatever you want.</span> <span data-start="428.68" data-end="429.82">It's amazing.</span> <span data-start="429.82" data-end="433.62">They can stay in the boxes and fresh.</span> <span data-start="433.62" data-end="436.26">So, let's stick with pancakes.</span> <span data-start="436.26" data-end="441.93">Every transfer starts with a so called three way handshake.</span> <span data-start="441.93" data-end="449.04">The three way handshake is here to make sure both sides are like the correct ones and that</span> <span data-start="449.04" data-end="452.32">the file transfer actually happens.</span> </p>
<p><span data-start="452.32" data-end="455.56">This is how a three way handshake looks like.</span> <span data-start="455.56" data-end="456.86">Might remember from school.</span> <span data-start="456.86" data-end="463.76">We have a sender, receiver, things happen, people get scared.</span> <span data-start="463.76" data-end="466.229">It's correct, but I don't like that much.</span> <span data-start="466.229" data-end="468.97">So, I was in a playground the other day.</span> <span data-start="468.97" data-end="471.21">I was reading this really good book.</span> <span data-start="471.21" data-end="473.43">I do read a lot.</span> <span data-start="473.43" data-end="477.96">And my 6 year old was like, what are you reading?</span> <span data-start="477.96" data-end="478.96">TCP.</span> <span data-start="478.96" data-end="479.96">Triple handshake.</span> <span data-start="479.96" data-end="480.96">Explain it to me.</span> </p>
<p><span data-start="480.96" data-end="482.06">I did.</span> <span data-start="482.06" data-end="484.56">She's like, mom, this is easy.</span> <span data-start="484.56" data-end="487.84">I'm going to build a port now.</span> <span data-start="487.84" data-end="490.19">I want to make you feel the same way.</span> <span data-start="490.19" data-end="491.19">We'll get there.</span> <span data-start="491.19" data-end="493.669">So, let's translate this in human.</span> <span data-start="493.669" data-end="498.58">So, let's meet our sender and receiver.</span> <span data-start="498.58" data-end="499.86">This is Stephan.</span> <span data-start="499.86" data-end="507.11">He's an engineer who loves biking and cooking for others.</span> <span data-start="507.11" data-end="508.22">This is Dominik.</span> <span data-start="508.22" data-end="515.079">Also an engineer who likes to travel and because we travels so much, home cooked meals.</span> <span data-start="515.079" data-end="521.669">Both of them have other things in common like speaking at conferences, wearing onesies.</span> <span data-start="521.669" data-end="525.61">And especially, surprise!</span> <span data-start="525.61" data-end="527.41">Right?</span> <span data-start="527.41" data-end="529.209">Okay.</span> </p>
<p><span data-start="529.209" data-end="535.05">So, imagine, Stephan [ Laughter ]</span> <span data-start="535.05" data-end="538.6">Stephan has made some pancakes.</span> <span data-start="538.6" data-end="540.29">Dominik wants some.</span> <span data-start="540.29" data-end="546.99">But they both really want to be sure that the transfer works because Henri is not anyone</span> <span data-start="546.99" data-end="548.839">they want to speak to.</span> </p>
<p><span data-start="548.839" data-end="550.76">That's the neighbor.</span> <span data-start="550.76" data-end="557.339">And the pancakes arrive at the correct destination through a handshake.</span> <span data-start="557.339" data-end="562.809">Stephan picks a random number, 23 it is.</span> <span data-start="562.809" data-end="565.339">Writes it on a piece of paper.</span> <span data-start="565.339" data-end="567.779">This is called a sync.</span> <span data-start="567.779" data-end="570.649">A request to synchronize.</span> <span data-start="570.649" data-end="574.18">Dominik takes a look at the note.</span> <span data-start="574.18" data-end="578.04">Performs the ack, which stands for acknowledgment.</span> <span data-start="578.04" data-end="583.019">He adds the number 1.</span> <span data-start="583.019" data-end="587.54">To let Stephan know that he received the note, he thinks about number 2, but pancakes.</span> <span data-start="587.54" data-end="588.54">And it's hard.</span> <span data-start="588.54" data-end="589.54">He gets there.</span> <span data-start="589.54" data-end="592.089">He takes seven.</span> </p>
<p><span data-start="592.089" data-end="598.36">He sends that out, note goes back to Stephan and he performs the ack.</span> <span data-start="598.36" data-end="601.54">That's one to Dominik's number.</span> <span data-start="601.54" data-end="604.529">And we're good to send those pancakes.</span> <span data-start="604.529" data-end="605.529">Nom, nom.</span> <span data-start="605.529" data-end="611.199">And these notes, they're not just love notes, they're the TCP headers.</span> <span data-start="611.199" data-end="615.949">They contain all the information that the TCP package needs.</span> <span data-start="615.949" data-end="619.959">This is how they look in real life.</span> <span data-start="619.959" data-end="622.209">Naw.</span> <span data-start="622.209" data-end="624.459">Yeah.</span> <span data-start="624.459" data-end="626.319">Let's see this.</span> <span data-start="626.319" data-end="627.319">Cool.</span> <span data-start="627.319" data-end="635.47">Let's take a look at the TCP headers the moment Dominik sends it back to Stephan, right?</span> <span data-start="635.47" data-end="641.23">The same support is Dominik, destination support, Stephan.</span> <span data-start="641.23" data-end="644.709">Dominik's random number was 7.</span> <span data-start="644.709" data-end="647.56">The sequence number is also 7.</span> </p>
<p><span data-start="647.56" data-end="654.829">When data was transferred the length of the data in bit would have been added to that</span> <span data-start="654.829" data-end="656.47">number, to the sequence number.</span> <span data-start="656.47" data-end="657.47">But we didn't.</span> <span data-start="657.47" data-end="660.04">We did just a handshake, so, it saves the 7.</span> <span data-start="660.04" data-end="667.059">7 and 23, we got an ack, plus 21, acknowledge number.</span> <span data-start="667.059" data-end="674.42">And the next dataset which pins down exactly where the TCP header ends and the package</span> <span data-start="674.42" data-end="675.42">starts.</span> <span data-start="675.42" data-end="685.95">Reserve means 3 bits for new and just the sum of it next to it already like sim, ack.</span> <span data-start="685.95" data-end="691.54">It contains the size of the data the sender or receiver can handle.</span> <span data-start="691.54" data-end="695.059">So, the size of a pancake batch.</span> <span data-start="695.059" data-end="700.519">Depending on the direction, it's either the one from the receiver or the sender.</span> <span data-start="700.519" data-end="701.519">Right?</span> </p>
<p><span data-start="701.519" data-end="704.019">So, we get back to that later.</span> <span data-start="704.019" data-end="710.06">Check for a minimum possible security effort.</span> <span data-start="710.06" data-end="711.06">Urgent pointers.</span> <span data-start="711.06" data-end="714.17">Possibility to say, hey, that package is more important than the others.</span> <span data-start="714.17" data-end="715.899">Fast forward.</span> <span data-start="715.899" data-end="717.119">Hint?</span> <span data-start="717.119" data-end="718.339">Don't.</span> <span data-start="718.339" data-end="721.129">Options like, details, urgent and other things.</span> <span data-start="721.129" data-end="722.239">Options are good.</span> <span data-start="722.239" data-end="723.879">We like to have options.</span> <span data-start="723.879" data-end="727.839">So, it's a great performance improvement.</span> </p>
<p><span data-start="727.839" data-end="732.66">We assume 23 32 bits.</span> <span data-start="732.66" data-end="735.879">And if the header doesn't fill up.</span> <span data-start="735.879" data-end="742.29">The cool thing is we don't have to calculate bit by bit by bit, just by steps.</span> <span data-start="742.29" data-end="745.309">And that helps.</span> <span data-start="745.309" data-end="747.269">Data with pancakes, right?</span> <span data-start="747.269" data-end="752.759">That's the blue ones you see here we talked about already.</span> <span data-start="752.759" data-end="755.129">The yellow ones we'll take a closer look at.</span> <span data-start="755.129" data-end="758.29">So, pancakes and size of the batch.</span> <span data-start="758.29" data-end="761.199">And the green ones are a little bit more advanced.</span> <span data-start="761.199" data-end="765.17">Very interesting, but we're not going to do this today.</span> <span data-start="765.17" data-end="771.35">So, you might have noticed Stephan and Dominik.</span> <span data-start="771.35" data-end="773.699">Say hello!</span> <span data-start="773.699" data-end="776.059">[ Applause ] Right?</span> <span data-start="776.059" data-end="777.23">Hi.</span> </p>
<p><span data-start="777.23" data-end="784.74">So, as I mentioned, Dominik is hungry.</span> <span data-start="784.74" data-end="789.61">[ Laughter ] How would you feel about if we actually fed</span> <span data-start="789.61" data-end="792.059">him pancakes?</span> <span data-start="792.059" data-end="794.5">Like here and now?</span> <span data-start="794.5" data-end="796.3">I mean, I'm a parent.</span> <span data-start="796.3" data-end="800.689">I always have a fresh batch of pancakes in my bag.</span> <span data-start="800.689" data-end="801.689">But okay.</span> <span data-start="801.689" data-end="808.66">Before this, we really want to make sure he does not overeat and get sick.</span> <span data-start="808.66" data-end="814.74">This is why we need to check how many pancakes he can actually eat without getting sick.</span> <span data-start="814.74" data-end="818.86">And TCP, this mechanism is called flow control.</span> <span data-start="818.86" data-end="824.92">It's here to prevent the sender from overwhelming the receiver with pancakes.</span> </p>
<p><span data-start="824.92" data-end="829.709">Possible reasons are Dominik is busy right now with getting some cutlery, right?</span> <span data-start="829.709" data-end="831.639">Or [ Laughter ]</span> <span data-start="831.639" data-end="835.5">He got some cutlery.</span> <span data-start="835.5" data-end="837.43">That's amazing.</span> <span data-start="837.43" data-end="847.6">It's a heavy load because I'm scared he's receiving some berries and maple syrup and</span> <span data-start="847.6" data-end="849.679">maybe some bacon from someone.</span> </p>
<p><span data-start="849.679" data-end="850.899">I don't know.</span> <span data-start="850.899" data-end="854.139">And another transfer.</span> <span data-start="854.139" data-end="865.809">Or he's just got a very fixed amount of buffer that translates in human as a plate can hold</span> <span data-start="865.809" data-end="868.649">just that many pancakes, right?</span> <span data-start="868.649" data-end="872.699">So, here you can see a very simplified version.</span> <span data-start="872.699" data-end="874.05">Usually it looks like this.</span> <span data-start="874.05" data-end="875.829">We don't have enough space.</span> <span data-start="875.829" data-end="877.279">Let's stick with this.</span> <span data-start="877.279" data-end="878.279">Cool.</span> <span data-start="878.279" data-end="883.279">Dominik receives pancakes but doesn't send anything right now except a love letter, right?</span> <span data-start="883.279" data-end="884.279">Cool.</span> <span data-start="884.279" data-end="889.16">And that note will store the value for how many pancakes he can put on Dominik's plate</span> <span data-start="889.16" data-end="890.629">per package.</span> </p>
<p><span data-start="890.629" data-end="894.689">Make sure he doesn't overeat.</span> <span data-start="894.689" data-end="895.749">Cool.</span> <span data-start="895.749" data-end="898.79">But he still gets as much food as possible.</span> <span data-start="898.79" data-end="906.079">For every ack that all the pancakes have arrived, this number is on the note.</span> <span data-start="906.079" data-end="914.709">This note is receive window size, which is like the available buffer space, plate.</span> <span data-start="914.709" data-end="920.23">Dominik knows every round trip how many pancakes he can receive and how much space he's got</span> <span data-start="920.23" data-end="921.23">left.</span> <span data-start="921.23" data-end="924.869">Same goes for Stephan, if we would receive, I don't know, some bacon maybe.</span> <span data-start="924.869" data-end="927.489">But I'm sorry, buddy.</span> </p>
<p><span data-start="927.489" data-end="931.13">I don't think you will.</span> <span data-start="931.13" data-end="934.49">Today the maximum possible value is 1 gigabyte.</span> <span data-start="934.49" data-end="936.499">It used to be 64 kilobytes.</span> <span data-start="936.499" data-end="938.889">A little bit small.</span> <span data-start="938.889" data-end="944.48">And it's because of the network round trip time.</span> <span data-start="944.48" data-end="945.879">And this is hard to remember.</span> <span data-start="945.879" data-end="950.889">Just imagine, like, 1 gigabyte is one plate.</span> <span data-start="950.889" data-end="953.369">Okay.</span> <span data-start="953.369" data-end="955.85">Wait.</span> <span data-start="955.85" data-end="957.589">What about the sender in the network?</span> <span data-start="957.589" data-end="959.149">That's important, right?</span> <span data-start="959.149" data-end="960.619">Come on.</span> <span data-start="960.619" data-end="962.089">Two minutes.</span> </p>
<p><span data-start="962.089" data-end="963.449">We don't want to overwhelm them.</span> <span data-start="963.449" data-end="965.889">So, this is why we have congestion window size.</span> <span data-start="965.889" data-end="967.319">CWN short.</span> <span data-start="967.319" data-end="970.429">They are not send, just known.</span> <span data-start="970.429" data-end="974.459">They're just known by the person that sends them out.</span> <span data-start="974.459" data-end="978.179">This defines how many segments can be sent out per package.</span> <span data-start="978.179" data-end="980.009">We'll get back to that later.</span> <span data-start="980.009" data-end="986.269">So, this is kind of a batch of pancakes.</span> <span data-start="986.269" data-end="990.959">They're measured in so called TCP protocol data units defined by the connection they're</span> <span data-start="990.959" data-end="991.959">actually using.</span> <span data-start="991.959" data-end="999.089">So, a batch of pancakes is smaller when you use more of them, and bigger, when you use</span> <span data-start="999.089" data-end="1002.22">a fiber cable connection.</span> <span data-start="1002.22" data-end="1008.029">The window size can never be bigger than the receiver window size.</span> </p>
<p><span data-start="1008.029" data-end="1011.85">Because a plate can have just so many pancakes.</span> <span data-start="1011.85" data-end="1017.949">So, round trip, the congestion window size keeps increasing up to the maximum receiver</span> <span data-start="1017.949" data-end="1023.019">window size until the network reaches its limit or you don't have anything left to send.</span> <span data-start="1023.019" data-end="1026.449">Does it make sense?</span> <span data-start="1026.449" data-end="1027.519">Awesome.</span> <span data-start="1027.519" data-end="1028.61">It's good that you're awake.</span> <span data-start="1028.61" data-end="1031.889">Because now we can transfer a transfer.</span> <span data-start="1031.889" data-end="1034.069">And look.</span> <span data-start="1034.069" data-end="1036.559">Everyone who sits in between them, welcome.</span> <span data-start="1036.559" data-end="1039.64">You're the data pipeline.</span> <span data-start="1039.64" data-end="1043.059">So, how it works.</span> <span data-start="1043.059" data-end="1044.419">You start the package.</span> <span data-start="1044.419" data-end="1045.61">You do your stuff.</span> <span data-start="1045.61" data-end="1047.23">As fast as possible.</span> <span data-start="1047.23" data-end="1048.88">It's all about performance, right?</span> <span data-start="1048.88" data-end="1051.039">We need a small round trip time.</span> </p>
<p><span data-start="1051.039" data-end="1052.039">Okay.</span> <span data-start="1052.039" data-end="1053.88">First pancakes.</span> <span data-start="1053.88" data-end="1055.09">Let's go, let's go.</span> <span data-start="1055.09" data-end="1057.35">Keep them in the package.</span> <span data-start="1057.35" data-end="1058.35">That's fine.</span> <span data-start="1058.35" data-end="1059.35">Come on, we don't have much time.</span> <span data-start="1059.35" data-end="1060.35">Too close.</span> <span data-start="1060.35" data-end="1061.35">Go, go, go!</span> <span data-start="1061.35" data-end="1062.35">Faster!</span> </p>
<p><span data-start="1063.35" data-end="1064.35">Dominik got them!</span> <span data-start="1064.35" data-end="1067.34">Come on, come on!</span> <span data-start="1067.34" data-end="1068.96">Ack!</span> <span data-start="1068.96" data-end="1083.97">Got the ack, come back.</span> <span data-start="1083.97" data-end="1085.29">Don't even close it.</span> <span data-start="1085.29" data-end="1087.76">It's all about the performance.</span> <span data-start="1087.76" data-end="1092.6">Now come on, come on!</span> <span data-start="1092.6" data-end="1093.6">Ahhhh!</span> <span data-start="1093.6" data-end="1097.59">This takes forever.</span> </p>
<p><span data-start="1097.59" data-end="1099.779">And the next batch and the next batch, faster, faster, faster.</span> <span data-start="1099.779" data-end="1102.7">Now, by the way, we are four segments.</span> <span data-start="1102.7" data-end="1106.11">We increased because he is eating.</span> <span data-start="1106.11" data-end="1108.98">So, what's the receiver window size right now?</span> <span data-start="1108.98" data-end="1109.98">Ack.</span> <span data-start="1109.98" data-end="1110.98">Okay.</span> <span data-start="1110.98" data-end="1113.24">Cool, cool, cool.</span> <span data-start="1113.24" data-end="1114.24">We got that down.</span> <span data-start="1114.24" data-end="1116.779">That's really good.</span> <span data-start="1116.779" data-end="1117.98">Faster!</span> <span data-start="1119.179" data-end="1120.38">Look.</span> <span data-start="1120.38" data-end="1124.69">That is faster than you.</span> </p>
<p><span data-start="1124.69" data-end="1125.75">Look!</span> <span data-start="1125.75" data-end="1126.75">And come on.</span> <span data-start="1126.75" data-end="1127.75">The last round trip.</span> <span data-start="1127.75" data-end="1128.75">The last one.</span> <span data-start="1129.75" data-end="1131.67">The last one.</span> <span data-start="1131.67" data-end="1133.98">Wait.</span> <span data-start="1133.98" data-end="1143.21">Did someone steal pancakes?</span> <span data-start="1143.21" data-end="1146.169">[ Laughter ] Thank you so much.</span> <span data-start="1146.169" data-end="1147.169">They're mine now.</span> <span data-start="1147.169" data-end="1149.19">We can talk this over, by the way.</span> <span data-start="1149.19" data-end="1158.98">It's like a big applause for everyone.</span> <span data-start="1158.98" data-end="1163.059">Thank you so much.</span> <span data-start="1163.059" data-end="1164.059">Good job.</span> <span data-start="1164.059" data-end="1165.059">That was so nice.</span> <span data-start="1165.059" data-end="1166.059">So, you might have realized two things.</span> </p>
<p><span data-start="1166.059" data-end="1168.84">Except hopefully are you okay now?</span> <span data-start="1168.84" data-end="1169.84">Pancake?</span> <span data-start="1169.84" data-end="1170.84">Yeah, cool.</span> <span data-start="1170.84" data-end="1171.84">Ack.</span> <span data-start="1171.84" data-end="1175.02">So, there were two things you might have recognized.</span> <span data-start="1175.02" data-end="1179.46">One was, we actually kind of increased the segments, rights?</span> <span data-start="1179.46" data-end="1182.43">Round trip, you totally saw that.</span> <span data-start="1182.43" data-end="1184.82">The other was package loss.</span> <span data-start="1184.82" data-end="1186.24">Okay.</span> <span data-start="1186.24" data-end="1190">Second and first one.</span> <span data-start="1190" data-end="1193.5">This is random, the increase of pancakes.</span> <span data-start="1193.5" data-end="1194.5">Was it random?</span> <span data-start="1194.5" data-end="1195.5">Surprise.</span> </p>
<p><span data-start="1195.5" data-end="1200.04">No, this mechanism is optimized for TCP.</span> <span data-start="1200.04" data-end="1205.4">What it does is estimate available capacity between like the sender and receiver.</span> <span data-start="1205.4" data-end="1206.419">How?</span> <span data-start="1206.419" data-end="1209.83">Available capacity by exchanging data.</span> <span data-start="1209.83" data-end="1214.639">So, do you mean I was talking about segments, right?</span> <span data-start="1214.639" data-end="1215.95">Batch of pancakes?</span> <span data-start="1215.95" data-end="1224.65">Do you see they arrived and get the congestion size to not overwhelm the network or the sender.</span> <span data-start="1224.65" data-end="1227.73">They never start with the full bandwidth.</span> <span data-start="1227.73" data-end="1235.73">They are show and small and figure out how big the network is and how much it can handle.</span> <span data-start="1235.73" data-end="1239.22">First of all you start this.</span> </p>
<p><span data-start="1239.22" data-end="1247.03">So, you have time and status of pancakes.</span> <span data-start="1247.03" data-end="1248.289">Congestion control.</span> <span data-start="1248.289" data-end="1249.399">Window.</span> <span data-start="1249.399" data-end="1251.5">Congestion window size.</span> <span data-start="1251.5" data-end="1252.5">Default today.</span> <span data-start="1252.5" data-end="1253.5">And the default is 10.</span> <span data-start="1253.5" data-end="1254.889">It used to be 4.</span> <span data-start="1254.889" data-end="1255.889">We did 2.</span> <span data-start="1255.889" data-end="1257.29">It was just easy.</span> <span data-start="1257.29" data-end="1258.95">Let's go with that.</span> <span data-start="1258.95" data-end="1261.94">So, here the value, you can see here, is 2.</span> </p>
<p><span data-start="1261.94" data-end="1262.94">Right?</span> <span data-start="1262.94" data-end="1267.559">So, when we received everything, you get an ack.</span> <span data-start="1267.559" data-end="1270.94">And we measure it round trip time.</span> <span data-start="1270.94" data-end="1273.76">The other is incremental.</span> <span data-start="1273.76" data-end="1278.539">It doubles up and then we can look forward and do the same.</span> <span data-start="1278.539" data-end="1280.99">When everything arrives, it's an ack.</span> <span data-start="1280.99" data-end="1286.17">Round trip time measured and then 8 and 16.</span> <span data-start="1286.17" data-end="1287.17">This is how it looked like.</span> <span data-start="1287.17" data-end="1290.09">I just explained to you.</span> <span data-start="1290.09" data-end="1297.2">Let's assume that this is the last pancakes, right?</span> </p>
<p><span data-start="1297.2" data-end="1298.2">At 16.</span> <span data-start="1298.2" data-end="1299.2">Okay.</span> <span data-start="1299.2" data-end="1303.35">TCP has the packages, it's awesome, loves you, takes care of you.</span> <span data-start="1303.35" data-end="1304.35">Right?</span> <span data-start="1304.35" data-end="1309.559">But it will probably fail again because it can't have that many segments.</span> <span data-start="1309.559" data-end="1313.39">So package loss, surprise, is not a bad thing.</span> <span data-start="1313.39" data-end="1315.86">It's a bit in mechanism.</span> <span data-start="1315.86" data-end="1322.44">The task is that we are overwhelmed for the network to avoid losing like more packages</span> <span data-start="1322.44" data-end="1323.44">in the network.</span> </p>
<p><span data-start="1323.44" data-end="1326.1">We have something called congestion avoidance.</span> <span data-start="1326.1" data-end="1336.49">Feedback Mel mechanism, package loss, showed us all along the way that something a congested</span> <span data-start="1336.49" data-end="1337.87">link or router.</span> <span data-start="1337.87" data-end="1342.139">That's why we need to at just the CWN, right?</span> <span data-start="1342.139" data-end="1348.83">So, what we do is we check out which was the last value that worked.</span> <span data-start="1348.83" data-end="1356.6">Resets our CWN ending back to than and we will go from that.</span> <span data-start="1356.6" data-end="1358.509">Run into package at some point again.</span> <span data-start="1358.509" data-end="1360.83">Do the algorithm again, then.</span> <span data-start="1360.83" data-end="1361.99">We'll just adjust.</span> <span data-start="1361.99" data-end="1366.649">So, latest value that worked was 8, right?</span> <span data-start="1366.649" data-end="1370.2">We take that and don't double it up.</span> <span data-start="1370.2" data-end="1373.74">We just take half of it and put it on.</span> <span data-start="1373.74" data-end="1379.72">Before, and then 12 plus 6 and goes on until we lose packages again.</span> <span data-start="1379.72" data-end="1383.74">The algorithm is like the really tricky part here.</span> <span data-start="1383.74" data-end="1390.029">When it's too aggressive, it's cutting down the increase and your, well, connection.</span> </p>
<p><span data-start="1390.029" data-end="1391.769">Pretty bad.</span> <span data-start="1391.769" data-end="1394.28">If you don't adjust quickly enough, right?</span> <span data-start="1394.28" data-end="1397.65">Then it will introduce more package loss.</span> <span data-start="1397.65" data-end="1407.179">So a PRR is really cool because those algorithms are repeatedly and constantly worked on.</span> <span data-start="1407.179" data-end="1413.029">And this is one of the good algorithms that might cut off like 3 10% of your round trip</span> <span data-start="1413.029" data-end="1414.029">time.</span> <span data-start="1414.029" data-end="1415.09">And it's really nice.</span> </p>
<p><span data-start="1415.09" data-end="1417.07">So, all of that sounds amazing.</span> <span data-start="1417.07" data-end="1418.82">Do you love TCP?</span> <span data-start="1418.82" data-end="1423.59">[Cheers] There are limitations.</span> <span data-start="1423.59" data-end="1429.57">So, I lost my thoughts.</span> <span data-start="1429.57" data-end="1436.35">Every time we hit the limit and wait for the ack, that's like one round trip time of delay.</span> <span data-start="1436.35" data-end="1437.35">Right?</span> <span data-start="1437.35" data-end="1442.639">Either the sender or the receiver are forced to stop and wait for the ack.</span> </p>
<p><span data-start="1442.639" data-end="1450.19">And that, if it's like a very long time, it can cause like massive gaps in the data flow.</span> <span data-start="1450.19" data-end="1453.169">So, that is called bandwidth delay product.</span> <span data-start="1453.169" data-end="1461.99">This is like the bottleneck, and the connection is unreliable, the times can vary.</span> <span data-start="1461.99" data-end="1467.44">The good idea here is to optimize your window size value so that the round trip time will</span> <span data-start="1467.44" data-end="1469.86">be enough to get the ack back.</span> <span data-start="1469.86" data-end="1474.44">And the bigger the loss without the package loss, the better.</span> <span data-start="1474.44" data-end="1480.429">And you can use window scaling because it helps you with that.</span> <span data-start="1480.429" data-end="1485.2">Since TCP is an abstraction off of a reliable network over an unreliable connection.</span> <span data-start="1485.2" data-end="1489.1">And it has like really cool features, we talked about.</span> <span data-start="1489.1" data-end="1495.69">Like, basic page error checking were order delivery, retransmission of lost packages,</span> <span data-start="1495.69" data-end="1499.23">package control and avoidance.</span> <span data-start="1499.23" data-end="1503.89">And they are built for the best efficiency possible.</span> </p>
<p><span data-start="1503.89" data-end="1512.08">But they limit what you can do when something is specially made for something else.</span> <span data-start="1512.08" data-end="1517.44">Head of line blocking is the last imitation I would like to point out.</span> <span data-start="1517.44" data-end="1524.69">As we have like a reliable and auto delivery built in, we kind of rely on all segments</span> <span data-start="1524.69" data-end="1525.69">to arrive.</span> <span data-start="1525.69" data-end="1533.96">So, when the three segments are sent out and the first or one of those is lost, it will</span> <span data-start="1533.96" data-end="1535.07">drop all packages.</span> <span data-start="1535.07" data-end="1536.47">So, the first one was lost.</span> <span data-start="1536.47" data-end="1540.559">This was waiting for the first one and everything afterwards, no, no, no.</span> <span data-start="1540.559" data-end="1541.559">First one.</span> <span data-start="1541.559" data-end="1544.11">I don't care about the others.</span> <span data-start="1544.11" data-end="1548.799">So, Stephan will basically resend the packages.</span> <span data-start="1548.799" data-end="1552.07">Until the first one arrives, then the second, then the third.</span> <span data-start="1552.07" data-end="1554.13">And we get an ack.</span> </p>
<p><span data-start="1554.13" data-end="1558.2">This might cause like a connection to die at some point because we will be overwhelmed</span> <span data-start="1558.2" data-end="1559.2">with resending.</span> <span data-start="1559.2" data-end="1560.769">And there's no way around this.</span> <span data-start="1560.769" data-end="1565.799">And consider something else if you don't need a reliable and ordered network.</span> <span data-start="1565.799" data-end="1571.15">And please don't build stuff because you think, it's great, I need a very few features.</span> <span data-start="1571.15" data-end="1573.96">You will realize after like six months, whoops!</span> <span data-start="1573.96" data-end="1577.309">I've rebuilt TCP.</span> <span data-start="1577.309" data-end="1579.71">Okay.</span> <span data-start="1579.71" data-end="1582.34">I had an amazing ending for you.</span> </p>
<p><span data-start="1582.34" data-end="1587.149">But I had the package called actually lost.</span> </p>
</section>