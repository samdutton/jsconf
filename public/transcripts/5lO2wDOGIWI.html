<section>
<p><span data-start="11.11" data-end="13.75">okay everybody hear me okay great uh</span> <span data-start="13.75" data-end="14.44">yeah</span> <span data-start="14.44" data-end="17.05">very first thing you can get all the</span> <span data-start="17.05" data-end="18.7">slides for this right now on Seth Samuel</span> <span data-start="18.7" data-end="21.22">github IO if you want to follow along if</span> <span data-start="21.22" data-end="22.99">you can't see if you have accessibility</span> <span data-start="22.99" data-end="25.99">issues the there's a couple demos that</span> <span data-start="25.99" data-end="28.119">won't work quite right on mobile but if</span> <span data-start="28.119" data-end="29.41">you runs that any other problems please</span> <span data-start="29.41" data-end="30.73">let me know after so I can improve it</span> <span data-start="30.73" data-end="32.71">moving forward all right</span> <span data-start="32.71" data-end="35.44">my name is Seth Samuel new york portland</span> <span data-start="35.44" data-end="37">various other places portland back to</span> <span data-start="37" data-end="38.559">new york i can never move again without</span> <span data-start="38.559" data-end="40.629">ruining the symmetry of my life and just</span> <span data-start="40.629" data-end="42.67">driving myself crazy i am here to talk</span> <span data-start="42.67" data-end="44.17">about arbitrary computation on the GPU</span> <span data-start="44.17" data-end="46.03">with WebGL which is a really convoluted</span> <span data-start="46.03" data-end="47.559">way of saying we're gonna take WebGL</span> <span data-start="47.559" data-end="49.93">which does cool graphics stuff and we're</span> <span data-start="49.93" data-end="52.75">gonna make it do weird stuff for fun and</span> <span data-start="52.75" data-end="55.269">not so much profit but fun and it is</span> <span data-start="55.269" data-end="57.01">heart WebGL because I was testing</span> </p>
<p><span data-start="57.01" data-end="59.89">Unicode and emoji and all of that and I</span> <span data-start="59.89" data-end="61.299">finally got it working and I do heart</span> <span data-start="61.299" data-end="62.44">WebGL so it stayed that way</span> <span data-start="62.44" data-end="64.479">I'm south of Samuel on Twitter and said</span> <span data-start="64.479" data-end="67.06">Samuel on github one last piece of</span> <span data-start="67.06" data-end="68.92">boilerplate this is a talk that goes</span> <span data-start="68.92" data-end="70.93">pretty far into the weeds if you don't</span> <span data-start="70.93" data-end="72.43">know the idiom it means I'm gonna talk</span> <span data-start="72.43" data-end="74.619">about a lot of things really fast and</span> <span data-start="74.619" data-end="76.27">most of them are pretty far outside the</span> <span data-start="76.27" data-end="78.79">normal developer life if I lose you I'm</span> <span data-start="78.79" data-end="80.95">sorry it's totally my fault please come</span> <span data-start="80.95" data-end="82.75">up afterwards ask me questions on</span> <span data-start="82.75" data-end="85">Twitter and real life hopefully everyone</span> <span data-start="85" data-end="86.2">can still get something out of this talk</span> <span data-start="86.2" data-end="88.69">even though it is pretty weedy all right</span> <span data-start="88.69" data-end="91.72">what's WebGL WebGL is a JavaScript API</span> <span data-start="91.72" data-end="94.3">that lets us as web developers talk to</span> <span data-start="94.3" data-end="96.13">the graphics card using an API that's</span> <span data-start="96.13" data-end="98.44">very much like OpenGL what that means is</span> <span data-start="98.44" data-end="101.8">we can run graphics in about the closest</span> <span data-start="101.8" data-end="103.99">way to the metal that you'll ever get as</span> <span data-start="103.99" data-end="105.73">a web developer web assembly maybe down</span> <span data-start="105.73" data-end="107.409">the line will get you just as close but</span> <span data-start="107.409" data-end="110.71">right now WebGL is the best way to run</span> <span data-start="110.71" data-end="114.159">things really fast so what this looks</span> <span data-start="114.159" data-end="116.14">like is there's a nice little browser</span> <span data-start="116.14" data-end="118.54">sandbox we write JavaScript the</span> </p>
<p><span data-start="118.54" data-end="121.479">JavaScript gets piped to WebGL WebGL</span> <span data-start="121.479" data-end="123.34">talks off to the operating system and</span> <span data-start="123.34" data-end="125.229">the graphics card and then the graphics</span> <span data-start="125.229" data-end="127.78">card draws your graphics back onto an</span> <span data-start="127.78" data-end="129.549">HTML canvas which you can then talk to</span> <span data-start="129.549" data-end="132.37">you like any other HTML canvas one thing</span> <span data-start="132.37" data-end="134.049">to note all these arrows here are</span> <span data-start="134.049" data-end="136.629">one-way except for the canvas arrow</span> <span data-start="136.629" data-end="138.33">which we'll get to why that's important</span> <span data-start="138.33" data-end="141.88">so the basic structure of OpenGL is</span> <span data-start="141.88" data-end="144.1">something called shaders it's one of</span> <span data-start="144.1" data-end="145.03">many question</span> </p>
<p><span data-start="145.03" data-end="147.069">Cley Church Isis made inside of WebGL</span> <span data-start="147.069" data-end="148.48">but we're just gonna go with it we</span> <span data-start="148.48" data-end="150.61">inherited it from OpenGL who probably</span> <span data-start="150.61" data-end="152.83">made the decision while drunk it's</span> <span data-start="152.83" data-end="155.05">basically a functional pipeline you put</span> <span data-start="155.05" data-end="157.24">in data that data goes through a vertex</span> <span data-start="157.24" data-end="159.22">shader the vertex shader takes your data</span> <span data-start="159.22" data-end="161.95">and maps it to 3d points in space so</span> <span data-start="161.95" data-end="163.15">typically your data is going to look</span> <span data-start="163.15" data-end="165.489">something like a series of coordinates</span> <span data-start="165.489" data-end="167.53">that look a lot like 3d coordinates but</span> <span data-start="167.53" data-end="169.39">it doesn't have to it can be anything</span> <span data-start="169.39" data-end="171.4">you want to pipe in the vertex shader</span> <span data-start="171.4" data-end="172.9">hands that information off to the</span> <span data-start="172.9" data-end="174.85">fragment shader the fragment shader is</span> <span data-start="174.85" data-end="176.68">the only one here that sort of makes</span> <span data-start="176.68" data-end="177.79">sense with the word shader because it</span> <span data-start="177.79" data-end="180.55">shades color onto a fragment of your</span> <span data-start="180.55" data-end="185.4">graphics and then graphics happens so</span> <span data-start="185.4" data-end="189.34">here's a very simple snippet of what's</span> <span data-start="189.34" data-end="192.22">called GLSL the JIT the OpenGL shader</span> <span data-start="192.22" data-end="193.84">language which we use in WebGL as well</span> <span data-start="193.84" data-end="196.87">and because this is a weird descendant</span> <span data-start="196.87" data-end="198.85">of C JavaScript is a weird descendant of</span> </p>
<p><span data-start="198.85" data-end="200.68">C as well but this one's a weirder</span> <span data-start="200.68" data-end="203.53">descendant of C the way you actually say</span> <span data-start="203.53" data-end="207.43">what color your your pixel is going to</span> <span data-start="207.43" data-end="209.56">be is you set a global variable called</span> <span data-start="209.56" data-end="211.9">GL frag color equal to a vet for which</span> <span data-start="211.9" data-end="213.72">is just a fancy way of saying in RGB a</span> <span data-start="213.72" data-end="216.7">tuple so we're going to get past this V</span> <span data-start="216.7" data-end="219.07">cord thing which is the vertex shader</span> <span data-start="219.07" data-end="221.89">telling us where we are in space and</span> <span data-start="221.89" data-end="224.65">we're going to set the red to be s which</span> <span data-start="224.65" data-end="226.989">is the same as X and T which is the same</span> <span data-start="226.989" data-end="229.66">as Y because again nomenclature and</span> <span data-start="229.66" data-end="231.37">we're just gonna leave blue out and make</span> <span data-start="231.37" data-end="234.25">it fully not transparent so this is</span> <span data-start="234.25" data-end="235.9">actually WebGL this is all the demos in</span> <span data-start="235.9" data-end="237.04">here alive if you want to go see the</span> <span data-start="237.04" data-end="239.14">source go check out github and now we've</span> <span data-start="239.14" data-end="240.82">got our gradient so you can see in the</span> <span data-start="240.82" data-end="242.859">upper left where we're at zero zero it's</span> <span data-start="242.859" data-end="244.81">all black on the lower right red plus</span> <span data-start="244.81" data-end="245.049">green</span> <span data-start="245.049" data-end="246.43">equals yellow as we all learned in</span> <span data-start="246.43" data-end="248.799">kindergarten and in the top right red</span> <span data-start="248.799" data-end="250.959">bottom left green and what's really cool</span> <span data-start="250.959" data-end="253.239">here is all of this is happening at once</span> <span data-start="253.239" data-end="255.82">so it's not like WebGL is stepping</span> <span data-start="255.82" data-end="257.919">through every single piece of this</span> <span data-start="257.919" data-end="260.2">gradient and calculating it order the</span> <span data-start="260.2" data-end="261.489">graphics card is actually actually</span> <span data-start="261.489" data-end="263.8">calculating all of these colors at the</span> <span data-start="263.8" data-end="268.15">same time so we can use this to do some</span> <span data-start="268.15" data-end="269.86">really cool things so the edge finder</span> <span data-start="269.86" data-end="271.479">for those who don't know an edge finder</span> <span data-start="271.479" data-end="273.07">is exactly what it sounds like if you</span> <span data-start="273.07" data-end="274.75">have some image and you want to find</span> <span data-start="274.75" data-end="277.12">edges inside of it that is sort of what</span> <span data-start="277.12" data-end="278.62">we would think of as the outline</span> <span data-start="278.62" data-end="281.8">of objects what you can do is basically</span> <span data-start="281.8" data-end="283.9">you pass in a texture that's what we</span> <span data-start="283.9" data-end="287.53">call images and then you use a sampler</span> <span data-start="287.53" data-end="289.09">to get a pixel from it and so we're</span> <span data-start="289.09" data-end="290.11">gonna do the same thing where we're</span> <span data-start="290.11" data-end="291.76">gonna look at a pixel we're gonna look a</span> <span data-start="291.76" data-end="293.71">little bit to the left with that minus</span> <span data-start="293.71" data-end="296.5">0.005 and then we're gonna have some</span> <span data-start="296.5" data-end="298.51">threshold that tells us whether or not</span> <span data-start="298.51" data-end="299.59">this is an edge and if it's an edge</span> <span data-start="299.59" data-end="301.24">we're going to paint bright pink if</span> <span data-start="301.24" data-end="303.07">we're if it's not we're just gonna paint</span> <span data-start="303.07" data-end="305.41">black so here is a small child</span> <span data-start="305.41" data-end="306.97">attempting to eat an entire block of</span> <span data-start="306.97" data-end="309.61">cheese this is not my small child but if</span> </p>
<p><span data-start="309.61" data-end="311.169">I did have a small child she would also</span> <span data-start="311.169" data-end="312.729">probably try to eat an entire block of</span> <span data-start="312.729" data-end="316.18">cheese cuz cheese is delicious and here</span> <span data-start="316.18" data-end="317.62">we have her in edge format so you can</span> <span data-start="317.62" data-end="320.35">see I have this nice little slider here</span> <span data-start="320.35" data-end="322.21">that threshold that we saw earlier</span> <span data-start="322.21" data-end="324.43">I can decrease the threshold which means</span> <span data-start="324.43" data-end="326.32">basically everything looks like an edge</span> <span data-start="326.32" data-end="328.81">or I can make it really high which means</span> <span data-start="328.81" data-end="331.06">nothing looks like an edge and I can</span> <span data-start="331.06" data-end="332.68">sort of go through here and this is all</span> <span data-start="332.68" data-end="335.56">happening at liquid smooth 60 frames per</span> <span data-start="335.56" data-end="337.6">second and depending on the size of your</span> <span data-start="337.6" data-end="339.58">image that's not the case if you're</span> <span data-start="339.58" data-end="340.93">doing this in JavaScript you can do this</span> <span data-start="340.93" data-end="343.15">in JavaScript to some extent but you're</span> <span data-start="343.15" data-end="344.349">probably not going to be able to do</span> <span data-start="344.349" data-end="346.09">large images and be able to do all this</span> <span data-start="346.09" data-end="347.74">for exactly the same reason as before</span> <span data-start="347.74" data-end="349.539">which is that every single one of these</span> <span data-start="349.539" data-end="351.55">pixels is being considered at the same</span> <span data-start="351.55" data-end="357.46">time and last it's not a WebGL talk</span> <span data-start="357.46" data-end="359.38">without a particles demo particles are</span> <span data-start="359.38" data-end="361.479">cool here we're using GL position</span> <span data-start="361.479" data-end="363.34">instead of GL frag color which is the</span> <span data-start="363.34" data-end="365.44">equivalent version for the vertex shader</span> <span data-start="365.44" data-end="368.05">which basically says take some data and</span> <span data-start="368.05" data-end="370.06">swirl it around you see a sign you see a</span> <span data-start="370.06" data-end="371.26">cosign you know you're talking about</span> <span data-start="371.26" data-end="375.28">something swirly hey so we got one pixel</span> <span data-start="375.28" data-end="377.5">is that even visible no not really</span> <span data-start="377.5" data-end="379.18">okay well that's some more I can see it</span> <span data-start="379.18" data-end="383.349">on my screen there we go some of them</span> <span data-start="383.349" data-end="384.91">are showing up now we're up to sixth and</span> <span data-start="384.91" data-end="386.68">this is gonna take forever and I have to</span> <span data-start="386.68" data-end="388.96">finish on time they said there we go 200</span> <span data-start="388.96" data-end="395.71">more more more more there we go there's</span> <span data-start="395.71" data-end="397.9">a hundred thousand this is about word so</span> </p>
<p><span data-start="397.9" data-end="399.099">I'm still going at about 60 frames per</span> <span data-start="399.099" data-end="401.5">second here on my little MacBook Air</span> <span data-start="401.5" data-end="403.539">that is slowly trying to rise from the</span> <span data-start="403.539" data-end="406.57">podium on my power book at work I was</span> <span data-start="406.57" data-end="407.53">trying this out I could get over a</span> <span data-start="407.53" data-end="409.96">million pixels going before it started</span> <span data-start="409.96" data-end="412.39">to even budge yeah that's</span> <span data-start="412.39" data-end="415.66">pretty pretty bad but still better than</span> <span data-start="415.66" data-end="416.83">if you tried to do a million pixels in</span> <span data-start="416.83" data-end="419.38">JavaScript so why is it so powerful you</span> <span data-start="419.38" data-end="420.25">probably guess because I've said it like</span> <span data-start="420.25" data-end="423.22">five times because WebGL lets us pass</span> <span data-start="423.22" data-end="425.53">data off to the graphics card it can do</span> <span data-start="425.53" data-end="428.17">all of this math at once so you have two</span> <span data-start="428.17" data-end="429.37">main engine inside your computer you</span> <span data-start="429.37" data-end="432.13">have a CPU which is your something</span> <span data-start="432.13" data-end="434.26">processing unit I'm gonna say central</span> <span data-start="434.26" data-end="435.79">but I think I'm wrong someone tweeted me</span> <span data-start="435.79" data-end="437.32">that I'm completely wrong about that I</span> <span data-start="437.32" data-end="441.64">am oh yes I'd like being right which is</span> <span data-start="441.64" data-end="444.58">a general purpose tool it can do lots of</span> <span data-start="444.58" data-end="445.87">things and it can do them pretty well</span> <span data-start="445.87" data-end="448.75">but not as well as a specialized tool</span> <span data-start="448.75" data-end="450.91">your GPU your graphics processing unit</span> <span data-start="450.91" data-end="453.31">is a specialized tool what it does is</span> <span data-start="453.31" data-end="455.8">takes lots of small operation and does</span> <span data-start="455.8" data-end="457.96">them in parallel this tweet was</span> <span data-start="457.96" data-end="460">remarkably fortuitously time it came out</span> <span data-start="460" data-end="461.2">just like a week before when I was</span> <span data-start="461.2" data-end="463.69">getting the slides ready suppose you</span> <span data-start="463.69" data-end="464.89">wanted to do thousands of</span> <span data-start="464.89" data-end="466.51">kindergarteners math homework at the</span> <span data-start="466.51" data-end="468.91">same time on the GPU and that's exactly</span> <span data-start="468.91" data-end="470.59">what we want to do is lots of little</span> <span data-start="470.59" data-end="473.7">simple math operations but all at once</span> <span data-start="473.7" data-end="477.7">so someone noticed wait a second we</span> <span data-start="477.7" data-end="479.11">could do something beyond graphics here</span> <span data-start="479.11" data-end="481">it happens that graphics can generally</span> <span data-start="481" data-end="482.74">be represented as lots of parallel small</span> <span data-start="482.74" data-end="484.12">math operations but there's other things</span> <span data-start="484.12" data-end="486.7">that are lots of small math operations</span> <span data-start="486.7" data-end="488.2">all at once there's lots of things we do</span> <span data-start="488.2" data-end="491.05">in in research in math in you know all</span> <span data-start="491.05" data-end="493.27">sorts of regions where that's useful so</span> <span data-start="493.27" data-end="495.82">this sort of construct of the data</span> <span data-start="495.82" data-end="497.65">pipelines that's meant to draw graphics</span> <span data-start="497.65" data-end="500.47">is not ideal if you just want to get</span> <span data-start="500.47" data-end="502.48">down to the actual math and so they came</span> <span data-start="502.48" data-end="504.43">up with OpenCL as a complement to OpenGL</span> <span data-start="504.43" data-end="509.26">and so if OpenGL lets the WebGL lets us</span> <span data-start="509.26" data-end="511.45">do OpenGL on the web what lets us do</span> </p>
<p><span data-start="511.45" data-end="514.57">OpenCL on the web it's web CL and it's</span> <span data-start="514.57" data-end="516.58">coming soon it's never it's never coming</span> <span data-start="516.58" data-end="519.19">we're it's been coming soon for a very</span> <span data-start="519.19" data-end="520.63">long time and it doesn't seem like it's</span> <span data-start="520.63" data-end="522.16">ever gonna get here because the the</span> <span data-start="522.16" data-end="523.96">specs and the standards for the other</span> <span data-start="523.96" data-end="525.64">side of things have evolved past where</span> <span data-start="525.64" data-end="528.19">it is there's compute shaders which is</span> <span data-start="528.19" data-end="529.96">an even more ridiculous stretching of</span> <span data-start="529.96" data-end="531.85">the shaders nomenclature it's also</span> <span data-start="531.85" data-end="534.01">coming soon for a while there it was</span> <span data-start="534.01" data-end="535.12">kind of looking like it might actually</span> <span data-start="535.12" data-end="537.49">come soon and now it's looking like it's</span> <span data-start="537.49" data-end="538.6">probably gonna be replaced by something</span> <span data-start="538.6" data-end="540.73">else also but we might get to continue</span> <span data-start="540.73" data-end="544.12">traders so we're developers we like</span> <span data-start="544.12" data-end="545.71">building things if they don't give us</span> <span data-start="545.71" data-end="546.37">the tools we</span> <span data-start="546.37" data-end="548.38">them ourselves so how could we do this</span> <span data-start="548.38" data-end="550.51">well we can get data in right let's</span> <span data-start="550.51" data-end="552.52">really good at that already we can do</span> <span data-start="552.52" data-end="555.04">the math but we have to get it out so is</span> <span data-start="555.04" data-end="558.43">there a way there is a way and it's</span> <span data-start="558.43" data-end="561.1">pixels in fact it's the only way but</span> <span data-start="561.1" data-end="562.81">thankfully that two-way arrow with the</span> <span data-start="562.81" data-end="565.21">canvas means that we can pull data out</span> <span data-start="565.21" data-end="568.66">of it in a basically serialized pixel</span> <span data-start="568.66" data-end="570.04">format which is just numbers and that's</span> <span data-start="570.04" data-end="572.529">all we need for math there are a few</span> <span data-start="572.529" data-end="574.96">implementation challenges there's lots</span> <span data-start="574.96" data-end="576.76">of little niggly things as far as</span> <span data-start="576.76" data-end="578.86">getting all this to work smoothly but</span> <span data-start="578.86" data-end="581.47">there is one that is not work around a</span> <span data-start="581.47" data-end="583.81">bowl and that's serialization it takes</span> <span data-start="583.81" data-end="586.9">time and effort to get data into the</span> </p>
<p><span data-start="586.9" data-end="589.33">WebGL framework and it takes even more</span> <span data-start="589.33" data-end="591.04">to get it out of the canvas in fact it's</span> <span data-start="591.04" data-end="593.11">incredibly slow to pull pixels from a</span> <span data-start="593.11" data-end="594.94">canvas nan anyway you'd probably notice</span> <span data-start="594.94" data-end="596.5">in normal web operations but if you're</span> <span data-start="596.5" data-end="598.36">trying to lots and lots of pixels in and</span> <span data-start="598.36" data-end="602.23">pixels out it adds up really fast and so</span> <span data-start="602.23" data-end="603.88">we come to an example that actually</span> <span data-start="603.88" data-end="604.6">works</span> <span data-start="604.6" data-end="607.69">matrix multiplication for those who</span> <span data-start="607.69" data-end="610.15">don't know or who have not taken when</span> <span data-start="610.15" data-end="611.77">your algebra since many years ago like</span> <span data-start="611.77" data-end="613.24">me and had to go pull out the definition</span> <span data-start="613.24" data-end="615.36">of matrix multiplication for this demo</span> <span data-start="615.36" data-end="618.79">this is matrix multiplication so it's</span> <span data-start="618.79" data-end="620.62">just a fancy way of saying a matrix is</span> <span data-start="620.62" data-end="622.6">just a table of data multiplication is</span> <span data-start="622.6" data-end="624.37">exactly like it is with normal numbers</span> <span data-start="624.37" data-end="626.05">but we're gonna define it on two</span> <span data-start="626.05" data-end="628.66">different tables of numbers these column</span> <span data-start="628.66" data-end="630.67">and row highlights are not done with</span> <span data-start="630.67" data-end="632.86">that horrible CSS hack but I am gonna go</span> <span data-start="632.86" data-end="634.24">back and edit them so that they are in</span> <span data-start="634.24" data-end="636.339">the future cuz that was cool and weird</span> <span data-start="636.339" data-end="638.95">so yeah good you can see so that</span> <span data-start="638.95" data-end="641.17">highlight the top left cell is going to</span> <span data-start="641.17" data-end="643.12">be the sum of the product of the first</span> <span data-start="643.12" data-end="645.73">row of the left and the first column on</span> <span data-start="645.73" data-end="648.49">the right so if this example will be one</span> <span data-start="648.49" data-end="651.16">times nine plus two times four</span> <span data-start="651.16" data-end="652.66">the only way I've ever had this</span> <span data-start="652.66" data-end="653.95">explained to me that makes sense is you</span> <span data-start="653.95" data-end="655.42">take the left one you rotate it and then</span> <span data-start="655.42" data-end="657.1">you slide it through if you are not a</span> <span data-start="657.1" data-end="659.2">spatial learner that is absolutely no</span> <span data-start="659.2" data-end="661.6">use to do and I'm sorry there are a lot</span> <span data-start="661.6" data-end="664.06">of resources on the web to try and</span> <span data-start="664.06" data-end="665.14">explain it in different ways and</span> <span data-start="665.14" data-end="666.85">hopefully one of them will make sense</span> <span data-start="666.85" data-end="669.37">for you there so you can see that bottom</span> <span data-start="669.37" data-end="671.08">left notice the bottom row and so on and</span> <span data-start="671.08" data-end="672.76">so on basically we're just doing a lot</span> <span data-start="672.76" data-end="676.63">of kindergartners math all right</span> <span data-start="676.63" data-end="678.67">and you can see that we're basically in</span> <span data-start="678.67" data-end="681.85">a pass in the two input matrices as</span> <span data-start="681.85" data-end="684.61">images because of reasons and we're</span> <span data-start="684.61" data-end="686.38">going to iterate through for each</span> <span data-start="686.38" data-end="688.57">product cell we're gonna iterate through</span> <span data-start="688.57" data-end="690.25">the row of 1 and the column of the other</span> <span data-start="690.25" data-end="692.44">do a bunch of math and output it as a</span> <span data-start="692.44" data-end="694.81">color it turns out a color is nothing</span> <span data-start="694.81" data-end="696.52">more than four bytes and you can fit two</span> <span data-start="696.52" data-end="700.23">decent number of numbers into four bytes</span> <span data-start="700.23" data-end="704.62">all right so it's demo time all right so</span> <span data-start="704.62" data-end="707.62">here's our 2x2 again so this should be 1</span> <span data-start="707.62" data-end="714.92">times 5 plus 5 times 5 which is 30 yeah</span> <span data-start="714.93" data-end="718.54">yeah it's 30 good I succeeded in</span> <span data-start="718.54" data-end="720.46">kindergartners math homework so you can</span> <span data-start="720.46" data-end="722.62">see that that's but one times zero plus</span> <span data-start="722.62" data-end="724.12">five times eight that's 40 it's so on</span> <span data-start="724.12" data-end="725.65">its own all right so that's 2 by 2 and</span> <span data-start="725.65" data-end="729.7">now let's do it on the GPU and it's the</span> <span data-start="729.7" data-end="731.74">same which is good it's really bad when</span> <span data-start="731.74" data-end="732.67">you're trying to make a new</span> <span data-start="732.67" data-end="734.05">implementation and it doesn't agree with</span> <span data-start="734.05" data-end="735.88">the one that you know is right so it's</span> <span data-start="735.88" data-end="738.07">correct but it's really slow right we</span> <span data-start="738.07" data-end="740.44">got point 4 milliseconds on the Left 28</span> <span data-start="740.44" data-end="742.69">on the right that's a lot more that's</span> <span data-start="742.69" data-end="745.66">like 60 times slower which is really bad</span> <span data-start="745.66" data-end="750.14">so let's try this with the 3 by 3</span> <span data-start="750.15" data-end="752.59">all right that's still really fast on</span> <span data-start="752.59" data-end="756.1">the CPU not so fast on the GPU and all</span> <span data-start="756.1" data-end="758.35">right let's let's try bigger let's go up</span> <span data-start="758.35" data-end="762.82">to 64 I'm showing a 3 by 3 slice here</span> <span data-start="762.82" data-end="764.47">because I don't want to show 64 by 64</span> <span data-start="764.47" data-end="766.81">columns and rows on the slide 4 times</span> <span data-start="766.81" data-end="768.85">cuz no one could read anything just</span> <span data-start="768.85" data-end="769.81">gonna have to trust me that's they're</span> <span data-start="769.81" data-end="776.02">all here at 4 to 6 all right what sort</span> <span data-start="776.02" data-end="777.82">of actually we're faster now in the GPU</span> <span data-start="777.82" data-end="779.59">by a little bit there's a lot of noise</span> <span data-start="779.59" data-end="781.48">down at this side so I'm never sure if</span> <span data-start="781.48" data-end="782.68">this one's gonna come out this way uh</span> <span data-start="782.68" data-end="785.11">all right let's just go all the way so</span> <span data-start="785.11" data-end="787.72">this is a 1024 by 2024 matrix we were</span> <span data-start="787.72" data-end="789.28">gonna be multiplying so that's a million</span> <span data-start="789.28" data-end="791.71">elements in each matrix that's a lot of</span> <span data-start="791.71" data-end="796.99">math alright and now we sit around for</span> <span data-start="796.99" data-end="798.46">about three minutes but I will keep</span> <span data-start="798.46" data-end="799.78">talking to you because otherwise would</span> <span data-start="799.78" data-end="802.3">be really boring so this is where I just</span> <span data-start="802.3" data-end="804.13">talked about random things today let's</span> <span data-start="804.13" data-end="805.54">talk about so a little spinner in the</span> <span data-start="805.54" data-end="808.12">middle is just a little div it's got you</span> <span data-start="808.12" data-end="808.66">know</span> <span data-start="808.66" data-end="810.28">width and height its position absolutely</span> <span data-start="810.28" data-end="812.14">and there's a CSS transform as you</span> <span data-start="812.14" data-end="813.67">probably heard today if you didn't</span> <span data-start="813.67" data-end="815.89">already know is CSS transference happen</span> <span data-start="815.89" data-end="818.35">on the GPU which is great right now I'm</span> <span data-start="818.35" data-end="819.88">not gonna open dev tools because I don't</span> <span data-start="819.88" data-end="821.68">want to risk hosing this and having to</span> <span data-start="821.68" data-end="822.78">do this all over again</span> <span data-start="822.78" data-end="825.54">we're just hammering the CPU the</span> </p>
<p><span data-start="825.54" data-end="827.74">JavaScript implementation of this</span> <span data-start="827.74" data-end="829.84">multiplication is just iterating through</span> <span data-start="829.84" data-end="832.81">math and math and math and math and the</span> <span data-start="832.81" data-end="834.16">whole thing here is basically</span> <span data-start="834.16" data-end="836.65">unresponsive but that spinner is still</span> <span data-start="836.65" data-end="839.47">spinning and you'd think oh that's cool</span> <span data-start="839.47" data-end="840.76">it's because it's Hardware accelerate</span> <span data-start="840.76" data-end="842.29">it's on the GPU and it's really great</span> <span data-start="842.29" data-end="845.77">and that's true except to actually get</span> <span data-start="845.77" data-end="847.96">this spinner going you have to do work</span> <span data-start="847.96" data-end="851.2">on the CPU so if I started tried to</span> <span data-start="851.2" data-end="853.81">start calculating the CPU version of the</span> <span data-start="853.81" data-end="856.03">matrix multiplication and start that</span> <span data-start="856.03" data-end="858.16">spinning at exactly the same time it</span> <span data-start="858.16" data-end="860.95">wouldn't work because the CPU will get</span> <span data-start="860.95" data-end="862.69">locked up before the browser has a</span> <span data-start="862.69" data-end="864.61">chance to add the class to the spinner</span> <span data-start="864.61" data-end="867.4">which enables it renders it and ships it</span> <span data-start="867.4" data-end="870.22">off to the GPU to spin so that was a fun</span> <span data-start="870.22" data-end="872.17">little lesson here another interesting</span> <span data-start="872.17" data-end="873.67">lesson is that whatever is doing that</span> <span data-start="873.67" data-end="875.83">spinning whatever timer that's doing all</span> <span data-start="875.83" data-end="877.72">of that is not on the main thread</span> <span data-start="877.72" data-end="879.37">because it's still spinning right now so</span> <span data-start="879.37" data-end="881.11">even though the rendering is being done</span> <span data-start="881.11" data-end="883.63">on the GPU something has to tell the GPU</span> <span data-start="883.63" data-end="885.58">ok now it's time to tick that there's no</span> <span data-start="885.58" data-end="889.12">time built into most GPU framework so</span> <span data-start="889.12" data-end="891.31">something is firing off saying keep</span> <span data-start="891.31" data-end="892.69">spinning that and it's not doing it on</span> <span data-start="892.69" data-end="894.58">the main thread and that's cool if</span> <span data-start="894.58" data-end="897.52">you're really big nerd like me uh let's</span> <span data-start="897.52" data-end="899.38">see I forgot to start my timer I'm just</span> <span data-start="899.38" data-end="900.43">gonna have to keep talking about</span> <span data-start="900.43" data-end="903.31">anything what else do we have to talk</span> <span data-start="903.31" data-end="912.79">about here I hope it hasn't actually</span> <span data-start="912.79" data-end="914.8">popped up the little warning usually it</span> <span data-start="914.8" data-end="916.72">does my computer's to be feeling very</span> <span data-start="916.72" data-end="918.16">kind to me today or it's not doing any</span> <span data-start="918.16" data-end="919.45">work at all and I'm just gonna sit here</span> <span data-start="919.45" data-end="921.55">making things up until I run out of time</span> <span data-start="921.55" data-end="922.96">and they like take the cane to pull me</span> <span data-start="922.96" data-end="924.76">off the stage usually it pops up the</span> <span data-start="924.76" data-end="927.31">little you're the thread on tab whatever</span> <span data-start="927.31" data-end="928.51">this tab is called has become</span> <span data-start="928.51" data-end="930.34">unresponsive do you want to interrupt it</span> <span data-start="930.34" data-end="933.79">and it turns out if you don't click that</span> <span data-start="933.79" data-end="934.96">thing it's still doing work on the</span> <span data-start="934.96" data-end="937.18">background so that little pop-up thing</span> <span data-start="937.18" data-end="938.68">is really just a courtesy chance to get</span> <span data-start="938.68" data-end="940.42">you to kill it it doesn't it isn't no</span> <span data-start="940.42" data-end="942.31">way stopping the completely</span> <span data-start="942.31" data-end="943.84">out of control JavaScript execution</span> <span data-start="943.84" data-end="946.18">which is going on right now which is</span> <span data-start="946.18" data-end="950.11">kind of cool and still really hope this</span> <span data-start="950.11" data-end="951.42">works</span> </p>
<p><span data-start="951.42" data-end="961">I'll just keep waiting it's probably</span> <span data-start="961" data-end="969.88">working see last time I did this I</span> <span data-start="969.88" data-end="972.52">talked too long and actually to stop</span> <span data-start="972.52" data-end="974.32">talking about random things well when</span> <span data-start="974.32" data-end="975.73">that the answer came up this time of</span> <span data-start="975.73" data-end="977.529">course I completely ran out of things to</span> <span data-start="977.529" data-end="979.57">talk about way too early you have to you</span> <span data-start="979.57" data-end="982.69">know prepare material next time let's do</span> <span data-start="982.69" data-end="987.7">that oh yeah what about the what is the</span> <span data-start="987.7" data-end="992.17">local sports team here in Iceland other</span> <span data-start="992.17" data-end="993.64">fun things that learned about while</span> <span data-start="993.64" data-end="994.99">working on this project oh here's</span> <span data-start="994.99" data-end="996.91">another fun thing the way this is</span> <span data-start="996.91" data-end="997.89">working</span> <span data-start="997.89" data-end="1000.51">it's just hung for a second the way this</span> <span data-start="1000.51" data-end="1003.779">is working is basically GPU shader code</span> <span data-start="1003.779" data-end="1006.66">gets all compiled and shipped off to the</span> </p>
<p><span data-start="1006.66" data-end="1011.37">WebGL oh yeah all right whoo okay 200</span> <span data-start="1011.37" data-end="1013.5">and we're into the range of benchmarking</span> <span data-start="1013.5" data-end="1015.36">here where milliseconds it's kind of a</span> <span data-start="1015.36" data-end="1018.27">goofy thing to be measuring this in but</span> <span data-start="1018.27" data-end="1020.88">that is 200 let's it's three and a half</span> <span data-start="1020.88" data-end="1022.77">minutes that's a really really long time</span> <span data-start="1022.77" data-end="1024.839">as a benchmark that's that's the sort of</span> <span data-start="1024.839" data-end="1025.89">thing where it's like why are you in</span> <span data-start="1025.89" data-end="1027.449">benchmarking this this is silly all</span> <span data-start="1027.449" data-end="1030">right let's do the GPU I guess I guess</span> <span data-start="1030" data-end="1032.48">you get another story ready just in case</span> <span data-start="1032.48" data-end="1037.11">nope we're fine so that's faster that's</span> <span data-start="1037.11" data-end="1039.449">about well that the GPU is a little slow</span> <span data-start="1039.449" data-end="1040.65">today which makes its math earlier</span> <span data-start="1040.65" data-end="1043.05">easier so that's about 200 something</span> <span data-start="1043.05" data-end="1045.679">times faster that's that's better</span> <span data-start="1045.679" data-end="1051.06">that's that's way better all right cool</span> <span data-start="1051.06" data-end="1054.3">so why well all right this is big no</span> <span data-start="1054.3" data-end="1055.62">notation and I promise that's the last</span> <span data-start="1055.62" data-end="1057.71">really Matthew thing in the talk</span> <span data-start="1057.71" data-end="1060.72">basically to calculate an N by n matrix</span> <span data-start="1060.72" data-end="1063.72">that's a million times a million and</span> <span data-start="1063.72" data-end="1066.929">then for every one of those output cells</span> <span data-start="1066.929" data-end="1068.4">you have to go through a row in a column</span> <span data-start="1068.4" data-end="1070.59">so that's n cubed if n is the width of</span> <span data-start="1070.59" data-end="1073.56">the matrix because we can do every</span> <span data-start="1073.56" data-end="1076.14">single output cell at once on the GPU</span> <span data-start="1076.14" data-end="1079.08">we can be finished in n the earlier edge</span> <span data-start="1079.08" data-end="1081.75">finder is N squared if you do it because</span> <span data-start="1081.75" data-end="1083.37">you have to step through every pixel and</span> <span data-start="1083.37" data-end="1085.89">it's constant time on the GPU which is</span> <span data-start="1085.89" data-end="1087.72">constant time it's awesome</span> <span data-start="1087.72" data-end="1089.97">alright so for those who don't have like</span> <span data-start="1089.97" data-end="1091.29">a visceral understanding what those</span> <span data-start="1091.29" data-end="1093.39">those numbers mean and you got the</span> <span data-start="1093.39" data-end="1095.4">bottom line and squared is the purple</span> <span data-start="1095.4" data-end="1098.549">one a constant is a constant and n cubed</span> <span data-start="1098.549" data-end="1099.96">is the biggest so this is N equals zero</span> <span data-start="1099.96" data-end="1101.46">to five so this is like those first two</span> <span data-start="1101.46" data-end="1104.07">examples we did here there and already n</span> <span data-start="1104.07" data-end="1108.51">cubed is just running away from zero to</span> <span data-start="1108.51" data-end="1111.419">ten around a hundred we can't even see N</span> <span data-start="1111.419" data-end="1113.309">anymore and N squared is looking pretty</span> <span data-start="1113.309" data-end="1117.21">n ish and yeah 1024 which we just did</span> <span data-start="1117.21" data-end="1119.46">you can't even see so the lower lines</span> <span data-start="1119.46" data-end="1121.5">there because n cube just gets so big so</span> <span data-start="1121.5" data-end="1123.21">fast so that's why we get so much gain</span> <span data-start="1123.21" data-end="1124.79">from doing all these things in parallel</span> <span data-start="1124.79" data-end="1126.87">all right this is awesome we've got a</span> <span data-start="1126.87" data-end="1129.33">working proof of concept we've shown 200</span> </p>
<p><span data-start="1129.33" data-end="1132.179">X speed gains this is amazing let's go</span> <span data-start="1132.179" data-end="1134.37">do really cool stuff with this alright</span> <span data-start="1134.37" data-end="1136.08">we can do hash collision are you a white</span> <span data-start="1136.08" data-end="1137.19">hat hacker you can make sure your</span> <span data-start="1137.19" data-end="1138.78">passwords are secure you a black hat</span> <span data-start="1138.78" data-end="1140.16">hacker you can crack people's hat</span> <span data-start="1140.16" data-end="1142.98">passwords we can do Bitcoin mine</span> <span data-start="1142.98" data-end="1145.35">basically all Bitcoin mining happens on</span> <span data-start="1145.35" data-end="1147.51">the GPU in fact the original thought</span> <span data-start="1147.51" data-end="1149.22">process that went into this talk was</span> <span data-start="1149.22" data-end="1150.51">gonna be cool to have a distributed</span> <span data-start="1150.51" data-end="1152.13">website where people could pay their way</span> <span data-start="1152.13" data-end="1153.929">not through micro transactions or</span> <span data-start="1153.929" data-end="1155.64">anything like that but just by crunching</span> <span data-start="1155.64" data-end="1158.01">bitcoins for the site owner it's a nice</span> <span data-start="1158.01" data-end="1159.84">little background payment system and</span> <span data-start="1159.84" data-end="1161.64">they wouldn't have to install anything</span> <span data-start="1161.64" data-end="1163.38">just drop a script and would run but you</span> <span data-start="1163.38" data-end="1164.64">want to be able to do it on the GPU</span> <span data-start="1164.64" data-end="1166.89">because that's how you do a Bitcoin</span> <span data-start="1166.89" data-end="1169.44">mining media encoding a lot of media</span> <span data-start="1169.44" data-end="1171.51">encoding you can do really fast if you</span> <span data-start="1171.51" data-end="1173.19">can paralyze it break it up into chunks</span> <span data-start="1173.19" data-end="1176.58">and then you encode it machine learning</span> <span data-start="1176.58" data-end="1178.29">is basically again just a lot of</span> <span data-start="1178.29" data-end="1180.75">kindergarteners doing math which you</span> <span data-start="1180.75" data-end="1183.69">know in all senses of the words signal</span> <span data-start="1183.69" data-end="1184.89">analysis and process this is a little</span> <span data-start="1184.89" data-end="1186.39">cheating because audio is really just</span> <span data-start="1186.39" data-end="1187.74">the same as video it's all just media</span> <span data-start="1187.74" data-end="1189.27">but it's kind of different cuz it's</span> <span data-start="1189.27" data-end="1192.03">sound alright protein folding you might</span> <span data-start="1192.03" data-end="1193.41">notice some of these are sounding really</span> <span data-start="1193.41" data-end="1194.88">familiar they sound a lot like things</span> <span data-start="1194.88" data-end="1196.14">you can download screen savers for</span> <span data-start="1196.14" data-end="1198.299">because these are highly chunk able</span> <span data-start="1198.299" data-end="1200.52">parallelizable tasks that benefit a lot</span> <span data-start="1200.52" data-end="1201.75">from running on the graphics card</span> <span data-start="1201.75" data-end="1204.63">alright actual application this this is</span> <span data-start="1204.63" data-end="1206.55">the big payoff nope can't do hash</span> <span data-start="1206.55" data-end="1208.8">collision can't do Bitcoin mining can't</span> <span data-start="1208.8" data-end="1209.789">do media encoding</span> <span data-start="1209.789" data-end="1211.32">you might be able to machine-learning</span> <span data-start="1211.32" data-end="1213.09">signal analysis and protein folding I'm</span> <span data-start="1213.09" data-end="1215.039">intrigued by possibly getting these to</span> <span data-start="1215.039" data-end="1216.809">work but the first three big obvious</span> <span data-start="1216.809" data-end="1220.44">things you could do here no all right</span> <span data-start="1220.44" data-end="1223.229">why this is not my cat if I had I do</span> <span data-start="1223.229" data-end="1225.09">have a cat she would get into this</span> <span data-start="1225.09" data-end="1226.799">trouble if I had blinds which I don't so</span> <span data-start="1226.799" data-end="1228.299">the only thing saving this room being my</span> <span data-start="1228.299" data-end="1229.739">cat is I don't actually have blinds like</span> <span data-start="1229.739" data-end="1230.07">that</span> <span data-start="1230.07" data-end="1231.96">all right this is the big one there are</span> <span data-start="1231.96" data-end="1234.539">no bit operations in the current version</span> <span data-start="1234.539" data-end="1236.279">of the shader language server it's</span> <span data-start="1236.279" data-end="1238.859">supplied by WebGL you need bit</span> <span data-start="1238.859" data-end="1240.869">operations for basically anything you</span> <span data-start="1240.869" data-end="1243.149">want to do with a fancy algorithm very</span> <span data-start="1243.149" data-end="1245.759">very smart people have spent the last 40</span> <span data-start="1245.759" data-end="1248.039">or 50 years coming up with really good</span> <span data-start="1248.039" data-end="1250.109">ways to do things with bits because all</span> <span data-start="1250.109" data-end="1252.059">our computers run on bits so if you</span> <span data-start="1252.059" data-end="1253.649">design your algorithm using bit</span> <span data-start="1253.649" data-end="1255.119">operations you can usually optimize them</span> <span data-start="1255.119" data-end="1257.279">really well and we don't have any of</span> <span data-start="1257.279" data-end="1258.57">those that's why we can't do hashes we</span> <span data-start="1258.57" data-end="1259.59">can't do Bitcoin mining which is</span> <span data-start="1259.59" data-end="1261.69">basically just hashes can't do any of</span> <span data-start="1261.69" data-end="1264.479">the other fun stuff boo unresponsive</span> <span data-start="1264.479" data-end="1267.239">window so if you paid really close</span> <span data-start="1267.239" data-end="1268.519">attention you might have seen the</span> <span data-start="1268.519" data-end="1271.08">spinner actually freezes a little bit</span> <span data-start="1271.08" data-end="1274.229">during the WebGL version and the reason</span> <span data-start="1274.229" data-end="1275.789">is because if you're hammering your</span> <span data-start="1275.789" data-end="1277.679">graphics card having it do nothing but</span> <span data-start="1277.679" data-end="1279.599">kindergartener math then it can't do</span> <span data-start="1279.599" data-end="1281.549">anything else like draw your window as</span> <span data-start="1281.549" data-end="1283.529">it changes it's it's the the normal</span> <span data-start="1283.529" data-end="1284.94">problem we have as JavaScript developers</span> <span data-start="1284.94" data-end="1286.889">is Oh get it onto the GPU so that it's</span> <span data-start="1286.889" data-end="1288.929">not hogging up the main thread here we</span> <span data-start="1288.929" data-end="1290.789">put too much stuff on the GPU and you've</span> <span data-start="1290.789" data-end="1293.909">lost everything again and oh it's level</span> <span data-start="1293.909" data-end="1295.619">time as this is a fun little landmine it</span> <span data-start="1295.619" data-end="1297.539">turns out different operating systems</span> <span data-start="1297.539" data-end="1299.489">have different thresholds at which they</span> <span data-start="1299.489" data-end="1301.769">will say no your shaders been running</span> <span data-start="1301.769" data-end="1304.95">too long it's time for you to just stop</span> <span data-start="1304.95" data-end="1307.109">and there's no error there's no</span> <span data-start="1307.109" data-end="1309.509">guaranteed return state sometimes it'll</span> <span data-start="1309.509" data-end="1311.07">give you something sometimes it'll just</span> <span data-start="1311.07" data-end="1313.139">return a blank pixel and you just hit</span> <span data-start="1313.139" data-end="1316.2">these completely without any warning and</span> <span data-start="1316.2" data-end="1317.309">it's terrible when you're trying to</span> <span data-start="1317.309" data-end="1318.859">figure out why your code doesn't work</span> <span data-start="1318.859" data-end="1320.639">all right what do we need to make it</span> <span data-start="1320.639" data-end="1322.71">work this is a big one it's super easy</span> <span data-start="1322.71" data-end="1325.349">we're probably not going to get it but I</span> <span data-start="1325.349" data-end="1327.479">can still hope in newer versions of the</span> <span data-start="1327.479" data-end="1329.58">shader language in OpenGL have bit</span> <span data-start="1329.58" data-end="1330.809">operations a bunch of other cool stuff</span> <span data-start="1330.809" data-end="1333.149">and if they just implemented them in</span> </p>
<p><span data-start="1333.149" data-end="1335.129">WebGL we'd have all of that but there's</span> <span data-start="1335.129" data-end="1336.539">a new graphic standard coming out</span> <span data-start="1336.539" data-end="1338.07">there's a few new graphic standard</span> <span data-start="1338.07" data-end="1339.929">coming out one is Vulcan there's also</span> <span data-start="1339.929" data-end="1342.149">apples metal and there's always been</span> </p>
<p><span data-start="1342.149" data-end="1343.44">Microsoft's direct3d</span> <span data-start="1343.44" data-end="1345.33">and it seems more likely that we'll get</span> <span data-start="1345.33" data-end="1347.19">a web version of one of those than a</span> <span data-start="1347.19" data-end="1350.9">increase in web GL but I can always hope</span> <span data-start="1350.9" data-end="1353.79">canvas WebGL in the web worker Mozilla I</span> <span data-start="1353.79" data-end="1355.47">believe has this implemented last time I</span> <span data-start="1355.47" data-end="1356.85">checked they were announcing it and I</span> <span data-start="1356.85" data-end="1358.71">believe it works now so this is great</span> <span data-start="1358.71" data-end="1360.51">this means that you can take all of this</span> <span data-start="1360.51" data-end="1362.82">work and the serialization and all of</span> <span data-start="1362.82" data-end="1364.14">that which does hog up the main thread</span> <span data-start="1364.14" data-end="1365.64">you can push it off in a web worker and</span> <span data-start="1365.64" data-end="1368.46">it will get all of that off for you all</span> <span data-start="1368.46" data-end="1371.04">right let me sum up WebGL is awesome</span> <span data-start="1371.04" data-end="1373.92">graphics are fun we can do really crazy</span> <span data-start="1373.92" data-end="1376.56">things if we want to try and push it</span> <span data-start="1376.56" data-end="1378.51">really far and with a little bit of help</span> <span data-start="1378.51" data-end="1379.65">we could actually make this into</span> <span data-start="1379.65" data-end="1383.74">practical applications that's it thanks</span> </p>
</section>