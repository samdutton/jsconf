<section>
<p><span data-start="0.64" data-end="1.64">Native Web Apps: React, JavaScript and WebAssembly to rewrite native apps</span> <span data-start="1.64" data-end="2.64">Florian Rival PARISS: Okay. How was everyone's lunch?</span> <span data-start="2.64" data-end="6.339">[ Applause ] Good. I had a really successful lunch. I finally</span> <span data-start="6.339" data-end="7.52">beat all the kids to the desserts. I didn't get any on Monday. So, feeling good. Can we</span> <span data-start="7.52" data-end="10.69">give a round of applause for our next speaker speaking on native web apps, Florian Rival.</span> <span data-start="10.69" data-end="11.69">[ Applause ] FLORIAN: Hi, everyone. My name is Florian,</span> <span data-start="11.69" data-end="12.77">I'm working as a software engineer at Google. And today I want to talk about something that</span> <span data-start="12.77" data-end="18.34">I really like. It's applications. And when I say applications, it's any kind of application,</span> <span data-start="18.34" data-end="23.17">but in particular the ones that allow people to create things or to do things that they</span> <span data-start="23.17" data-end="28.73">were not able to do before. So there is something that I really like. It's video games. That's</span> <span data-start="28.73" data-end="34.149">why I created GDevelop. It's an open source and cross platform game engine that anyone</span> <span data-start="34.149" data-end="41.69">can use to create any kind of games. Why anyone? It's a visual editor for games where you can</span> <span data-start="41.69" data-end="49.51">create. And there are some kinds of visual programming. I will show an example. And anyone</span> <span data-start="49.51" data-end="55.579">can use it, even those who don't know thousand create games. And then you can get an HTML</span> <span data-start="55.579" data-end="63.629">game that you can put on the web. So, here is what the software used to look like. I</span> <span data-start="63.629" data-end="72.01">say used to because it's a software that was created, in C + +, it's a desktop C + + application.</span> </p>
<p><span data-start="72.01" data-end="77.979">You can see on the right, there's a list of objects in the game. And in the intermediary</span> <span data-start="77.979" data-end="87.16">of the game. Is, here it's a platform. And what we want to do as an example is to have</span> <span data-start="87.16" data-end="93.63">when the player is stepping button, we want the button on the platform on the right to</span> <span data-start="93.63" data-end="100.45">go up in the air. I will show how to do it using visual programming. And so, here we</span> <span data-start="100.45" data-end="105.11">go. I go to the events tab and I'm adding a new event. An event is a condition, an action,</span> <span data-start="105.11" data-end="113.4">kind of like an if then. I'm adding a new condition to check if the player is collision</span> <span data-start="113.4" data-end="120.32">with the tree. And if that's the case, I can add two actions. The first action would be</span> <span data-start="120.32" data-end="126.01">to change the animation of the button so it's going to the state where it's pressed. It's</span> <span data-start="126.01" data-end="132.43">animation number one. And I'm adding another action, which is an action to move the platform</span> <span data-start="132.43" data-end="140.65">up in the air. So, I'm adding to the platform a false on the Y axis. And now, if I press</span> <span data-start="140.65" data-end="145.4">play, the game is compiled to demonstrate and running in the browser. And we can verify</span> <span data-start="145.4" data-end="150.48">that the button is working. It's kind of simple for people that don't know how to program</span> <span data-start="150.48" data-end="158.8">and it's only based on logic. Syntax. So, a few games have been done with it. So, a</span> <span data-start="158.8" data-end="168.94">few were working quite well. And the game with the cat, but at some point I had some</span> <span data-start="168.94" data-end="175.2">issues. And the editor was getting quite old. I had lots of cross platform issues. In particular</span> <span data-start="175.2" data-end="178.991">on macOS and Linux. It wasn't working that well. And iterating on the software of the</span> <span data-start="178.991" data-end="187.28">quite slow, C++. And it was limited to old UI components, and the UX would need some</span> <span data-start="187.28" data-end="194.72">enhancements. And the entry barrier for new contributors was quite high. C++, again. So,</span> <span data-start="194.72" data-end="201.41">it was time for me to react. And I was wondering, would web technologies help? I have been doing</span> <span data-start="201.41" data-end="207.17">a lot of React before at work. And I was like, okay. That's perfect for making complex UI.</span> </p>
<p><span data-start="207.17" data-end="216.299">I was iterating. Can we have hundreds of elements, dynamic panels, 2D and 3D visualizations,</span> <span data-start="216.299" data-end="223.59">and all of the things that make a real application, you know? Can we make an ambitious application</span> <span data-start="223.59" data-end="229.14">using React? And the same goes for JavaScript. It's perfect for most applications. Or is</span> <span data-start="229.14" data-end="236.17">it really? Can we reuse an existing native codebase? Should we? Or if we have advanced</span> <span data-start="236.17" data-end="242.34">situations or computations, what do we do? Or if we need consistent performance? Still,</span> <span data-start="242.34" data-end="248.79">let's look at the quick post of GDevelop. There is the core of the software, composed</span> <span data-start="248.79" data-end="255.489">of the C++ classes and defining what a game is, what is an object, and how an event is</span> <span data-start="255.489" data-end="261.58">composed of conditions and actions. And then all the tools that are transpiring to the</span> <span data-start="261.58" data-end="267.23">events to JavaScript that you get a running game. And on the top of this there was an</span> <span data-start="267.23" data-end="275.841">interface in C++ using WX widgets. And there was the interaction with the device. So, my</span> <span data-start="275.841" data-end="282.49">first idea is, okay, let's replace the interface with React. Because I have an idea that it</span> <span data-start="282.49" data-end="287.89">could be better. And in a fortified system, I could write adapters for Node.js or even</span> <span data-start="287.89" data-end="297.66">in the browser simulator file system. We could run this on the JS or a browser or on electrons</span> <span data-start="297.66" data-end="304.11">so that we have a browser in the JS and you can package the application. And for the central</span> <span data-start="304.11" data-end="315.35">part, we could use WebAssembly to expose the code to the rest of the JavaScript application.</span> </p>
<p><span data-start="315.35" data-end="323.3">So, a few notes about WebAssembly. It's a kind of a language that is running in your</span> <span data-start="323.3" data-end="331.5">browsers. And it's a bit like assembly, meaning that it's not one that you write to, but what</span> <span data-start="331.5" data-end="337.13">you're compiling to. And at the end, it's simply like a language. Browsers are able</span> <span data-start="337.13" data-end="345.96">to generate really fast execution of any program that is retaining WebAssembly. And it is running</span> <span data-start="345.96" data-end="354.6">on actually most recent browsers including on iOS and Android. So, how do we write WebAssembly?</span> </p>
<p><span data-start="354.6" data-end="360.241">Well, there was\h the first solution was to use Emscripten. Which is what I did. It's</span> <span data-start="360.241" data-end="369.49">a project with a C++ WebAssembly compiler. It's a C++, running through a compiler, and</span> <span data-start="369.49" data-end="375.04">translating it to WebAssembly. And there are solutions for any language you can compile</span> <span data-start="375.04" data-end="383.26">to WebAssembly. Or even things like AssemblyScript which allows you to create WebAssembly using</span> <span data-start="383.26" data-end="389.14">a syntax that is really\h that looks like TypeScript. So, it's really interesting. In</span> <span data-start="389.14" data-end="394.7">my case, I have been using Emscripten. And I will show you the way it works. So, using</span> <span data-start="394.7" data-end="403.99">Emscripten, you can download it and sort it. It's pretty easy. And then getting EMCC, the</span> <span data-start="403.99" data-end="412.59">C++ to WebAssembly compiler. And you can run it on a C or C++ file. And in my case, as</span> <span data-start="412.59" data-end="421.32">I have a large codebase, I can replace the build to chain that was using the compiler,</span> <span data-start="421.32" data-end="427.25">and instead of at the end having a binary, I have a WebAssembly. And so, we have the</span> <span data-start="427.25" data-end="433.81">WebAssembly, which is the C++ codebase compiled to WebAssembly. And we have to expose the</span> <span data-start="433.81" data-end="440.4">existing classes in C++ so that we could view them in JavaScript. So, let's take an example.</span> </p>
<p><span data-start="440.4" data-end="446.75">For example, we have a class that is an objects container. So, it's\h think of it as the list</span> <span data-start="446.75" data-end="451.8">of objects that you've seen. So, we could have objects and get some objects inside.</span> <span data-start="451.8" data-end="456.47">And then we can have a layout. It's a bit like a level, again. Which is iterating from</span> <span data-start="456.47" data-end="463.25">an objects container so it can have a list of objects. And there are additional, name,</span> <span data-start="463.25" data-end="470.88">to change the name. So, also, we have this. We ought to write bindings. Bindings in my</span> <span data-start="470.88" data-end="477.98">case I have been using WebIDL. There are a few ways to write it. But in my case, use\hWebIDL,</span> <span data-start="477.98" data-end="487.53">we use something that is the interface of your C++ class. You have to write it for all</span> <span data-start="487.53" data-end="497.16">the classes in your codebase. And this will generate new code that will be doing the bridge</span> <span data-start="497.16" data-end="505.21">between JavaScript and the WebAssembly module. So, the way it works once you have compiles</span> <span data-start="505.21" data-end="510.14">the WebAssembly module plus the bindings is that you have a module that you can instant</span> <span data-start="510.14" data-end="517.57">ship into the JavaScript engine. So, on the browser or in the JS. And when it's an instant</span> <span data-start="517.57" data-end="523.86">change, here it's called GD. You have this module and you can start creating new classes,</span> <span data-start="523.86" data-end="532.24">new instances of your classes just like usual JavaScript. And you can call them and it's</span> <span data-start="532.24" data-end="537.5">working more or less automatically out of the box because the primitive types of your</span> <span data-start="537.5" data-end="542.72">functions are automatically converted. So, depends on the language that you're using.</span> </p>
<p><span data-start="542.72" data-end="552.991">C++ or another language. But in my case, C++ and JavaScript are translated to C++. Same</span> <span data-start="552.991" data-end="559.59">for numbers and for strings. It's also more or less automatic. So it's quite convenient.</span> <span data-start="559.59" data-end="566.43">If you are passing objects to the parameters, then they are converted to a pointer or a</span> <span data-start="566.43" data-end="577.76">reference in C++. And you can debug using the input and output stream that's converted</span> <span data-start="577.76" data-end="584.44">to console.log in JavaScript. With this, we have something that is running in the browser.</span> <span data-start="584.44" data-end="590.43">Here is the Chrome debugger. And you can see on the top, they also output\h it's outputted</span> <span data-start="590.43" data-end="597.251">by the C++ codebase. It's working. And then I can create a new object. So, yeah, it's</span> <span data-start="597.251" data-end="603.53">working. And it's quite nice to have, you know, with V C++ codebase you have been writing</span> <span data-start="603.53" data-end="610.14">since a few years. There are a few things to know. First is the memory management requires</span> <span data-start="610.14" data-end="614.77">care. Because when you're creating a new object, it's quite interesting because it's not garbage</span> <span data-start="614.77" data-end="622.34">collected. We mean that. If I'm looking at what this layout object is, it's a pointer</span> <span data-start="622.34" data-end="627.91">to some place in the WebAssembly memory. So, you can think of the WebAssembly memory as</span> <span data-start="627.91" data-end="633.41">a huge array that is containing bytes. When you're creating a new object, it's already</span> <span data-start="633.41" data-end="639.14">creating some bytes in this memory. Meaning that if you just drop the reference to the</span> <span data-start="639.14" data-end="644.65">object in the JavaScript world, the WebAssembly object will still be living in memory. So,</span> <span data-start="644.65" data-end="652.62">you have to explicitly call GD, to destroy, to remove this content from memory. So, in</span> <span data-start="652.62" data-end="660.82">the case of using React or any component based framework, if you're creating a framework</span> <span data-start="660.82" data-end="665.51">when the component is mounted, you have to remember to delete it or you can use an effect</span> <span data-start="665.51" data-end="673.35">hook if you're using React. So, know that the output files are quite large. For GDevelop,</span> <span data-start="673.35" data-end="681.4">it's at least 3 megabytes when compared to the WebAssembly module. And honestly, I don't</span> <span data-start="681.4" data-end="687.86">really care because I'm making a kind of desktop application, a rich application. So, knowing</span> <span data-start="687.86" data-end="694.46">that I will package one thing and make it a few hundred megabytes. 300 megabytes, more</span> <span data-start="694.46" data-end="702.98">or less. And something else to know, having a complete test set is really, really useful</span> <span data-start="702.98" data-end="707.45">because without the kind of heroes that you will be getting when something is going wrong</span> <span data-start="707.45" data-end="715.84">in the WebAssembly module. And for example, you have the wrong type of parameter. Or if</span> <span data-start="715.84" data-end="722.59">you forgot parameter, then instead of getting a number of boolean or a pointer in the C++</span> <span data-start="722.59" data-end="728.35">world, we get  which is translated, I guess, zeros. Everything will be broken.</span> </p>
<p><span data-start="728.35" data-end="736.08">And same thing if you're using a deleted object. Trying to iterate on something that was removed</span> <span data-start="736.08" data-end="741.91">from memory, and it will crush, basic lip. This being said, we have something that is</span> <span data-start="741.91" data-end="749.35">working in the browser. So, my next change was, oh, I can create an interface on top</span> <span data-start="749.35" data-end="755.57">of it is that as good or even better as the one that I use to do in the native world using</span> <span data-start="755.57" data-end="765.08">C++ before. So, let's see how to do it. Again in my case I was using React. And my change</span> <span data-start="765.08" data-end="773.89">was to make all of these examples. For example, context menus, trace objects, lots of forms</span> <span data-start="773.89" data-end="781.73">and buttons and properties. All of this in\h in the browser. So, we go through a few buttons.</span> <span data-start="781.73" data-end="789.77">An example that I have been using in the hope that it will\h the first advice I have is</span> <span data-start="789.77" data-end="795.19">to find a component library, material UI, React Toolbox or Blueprint. These are examples</span> <span data-start="795.19" data-end="803.41">of React's component libraries. And the things I was looking at was the extensive list of</span> <span data-start="803.41" data-end="809.93">high quality components because I don't want to spend time redoing the basic widgets. I</span> <span data-start="809.93" data-end="817.83">want to build an application, not to make a design system. And good theming support</span> <span data-start="817.83" data-end="825.5">and accessibility. And some good documentation. Because the world interface will be standing</span> <span data-start="825.5" data-end="833.14">on this component library. It better be good. I went with Material UI. It was the library</span> <span data-start="833.14" data-end="843.44">with the most extensive support. And it was allowing me to design quickly. And once I</span> <span data-start="843.44" data-end="849.37">had it, the first thing I had to get was to display a large list of objects. When they</span> <span data-start="849.37" data-end="854.98">say large list, in the case of drag and drop, a large list of objects that are living in</span> <span data-start="854.98" data-end="862.37">the game and can be a few hundred objects. So, this originally here was to use categorization.</span> </p>
<p><span data-start="862.37" data-end="872.08">So, for example, using react virtualized and react sortable hoc, and you can create a list.</span> <span data-start="872.08" data-end="879.12">That means that instead of having in the DOM\h in the browser to have a button for 300 DOM</span> <span data-start="879.12" data-end="886.88">elements for every object, then you will only have the object that are on the screen in</span> <span data-start="886.88" data-end="892.58">the DOM. So, 10 or maybe 20 objects. The way it works is that instead of having a list</span> <span data-start="892.58" data-end="900.089">of objects that is just mapping over an array, you're converting your list to be using the</span> <span data-start="900.089" data-end="906.28">list component that is referred to by the list and using this property. And you can</span> <span data-start="906.28" data-end="910.88">say this is the function that you will call to identify every line that is to display</span> <span data-start="910.88" data-end="921.71">on the screen. And then using React sortable hoc, you can add on top of the list. And you</span> <span data-start="921.71" data-end="927.09">are using sortable elements and you get a list that is virtualized and you can reorder</span> <span data-start="927.09" data-end="940.78">and drag and drop. That was the first way to get things that\h not\h but working well</span> <span data-start="940.78" data-end="947.88">even with large lists and big games. And the next thing is that I wanted to have patterns.</span> <span data-start="947.88" data-end="954.1">And it was as on the screen. As I'm doing a game, people want to customize their workspace.</span> <span data-start="954.1" data-end="959.26">And so, for this I have been using a tiling window library which is called a react mosaic.</span> </p>
<p><span data-start="959.26" data-end="966.35">There are a few different libraries like this. But this is the one I've used and it's\h I</span> <span data-start="966.35" data-end="976.96">mean, it's working out of the box. So, check it out. Then I've been trying to remake the</span> <span data-start="976.96" data-end="984.19">events. It's more or less large trees. A large trees arrays with events. An event is composed</span> <span data-start="984.19" data-end="990.93">of conditions and actions. But it can also have sub events like blocks of code in a traditional</span> <span data-start="990.93" data-end="996.83">programming language. So, here, again, the solution was to use a virtualization. Previously</span> <span data-start="996.83" data-end="1005.05">I have been using React sortable tree which is a library to make a tree of nodes which</span> <span data-start="1005.05" data-end="1011.32">you can reorder. And the interesting thing about this library is it's using React virtualized</span> <span data-start="1011.32" data-end="1020.11">under the hood. So, quickly, every node that you see on the screen here is actually a line</span> <span data-start="1020.11" data-end="1028.91">in the list. And the lines that are in between the node is just a fake scaffolding that is</span> <span data-start="1028.91" data-end="1035.48">making like\h that is making the tree look like a tree and another a list. So, it's a</span> <span data-start="1035.48" data-end="1041.6">customized version of what I have been using. And then at some point I wanted to remake\h</span> <span data-start="1041.6" data-end="1048.62">it was the first thing that I did. And at this moment, I wanted to display the screen</span> <span data-start="1048.62" data-end="1055.75">so it can be composed of individual tiles and objects to be displayed. And at this moment</span> <span data-start="1055.75" data-end="1064.1">you can forget the DOM and go to be using WebGL. Not using WebGL directly, but a library</span> <span data-start="1064.1" data-end="1071.06">called Pixi.JS. Which is the 2D library that I have been using for the game engine. I can</span> <span data-start="1071.06" data-end="1078.03">as well use it for the game. And it's super-fast and easy to use and based more or less on</span> <span data-start="1078.03" data-end="1085.291">the Flash API. And they also have options like Three.js or Phaser if you want something</span> <span data-start="1085.291" data-end="1092.6">that looks more like a game engine. Sometimes you can still rely on the DOM, for example.</span> </p>
<p><span data-start="1092.6" data-end="1098.01">Say you have an editor that is displaying an object, here a spaceship, and you want</span> <span data-start="1098.01" data-end="1109.74">to know what is the box for the spaceship? What I have been doing is using SVG elements</span> <span data-start="1109.74" data-end="1119.78">to display this protocol. And using things like onPointerMove in the DOM, you can drag</span> <span data-start="1119.78" data-end="1129.86">and drop. So, you get something\h a pretty good editor that is very easy to architecture</span> <span data-start="1129.86" data-end="1138.31">and to act on because it's all done using React. And it's enough for what you want to</span> <span data-start="1138.31" data-end="1144.14">do. Sometimes things are not fast enough. So, the first performance that you can have</span> <span data-start="1144.14" data-end="1151.1">is that rendering the picture is too slow. At this point, you can profile the rendering.</span> </p>
<p><span data-start="1151.1" data-end="1158.59">Here in the case of React, you can use the React profiler. And in this case, I had an</span> <span data-start="1158.59" data-end="1164.12">interesting problem. When I was opening or closing a tab, I had to do\h the whole thing</span> <span data-start="1164.12" data-end="1171.14">was taking like 1 second to be done. And when using the profiler, you can see that every\h</span> <span data-start="1171.14" data-end="1176.16">it's displaying every component that is re rendered when you're doing interactions. And</span> <span data-start="1176.16" data-end="1183.471">on the graph, the code, is re rendered when you're doing interactions. And you can see</span> <span data-start="1183.471" data-end="1190.24">from right to left I had a whole set of components that was deploying the project manager. The</span> <span data-start="1190.24" data-end="1196.15">project manager, it's a bit like a file explorer. And this thing was being re rendered. It was</span> <span data-start="1196.15" data-end="1206.33">switching from one user when it was written. So, this was to add some updates or organization</span> <span data-start="1206.33" data-end="1211.929">so that it's not re rendered every time you're doing an interaction. So, basically avoid</span> <span data-start="1211.929" data-end="1218.53">re rendering if you don't need to. Something to note is that make sure that you measure</span> <span data-start="1218.53" data-end="1223.02">performance in production. Because in the case of React, the development build is way</span> <span data-start="1223.02" data-end="1228.75">slower than the production build. And something that's\h I got an issue where I was drag and</span> <span data-start="1228.75" data-end="1234.59">dropping things and it was taking like 1 second again to update. But it was a few minutes.</span> </p>
<p><span data-start="1234.59" data-end="1241.16">So, I built it in production. And you can have an issue with the calls to WebAssembly.</span> <span data-start="1241.16" data-end="1248.13">If you have a lot of calls being made, you're paying the calls to go through the bridge</span> <span data-start="1248.13" data-end="1253.99">between JavaScript and WebAssembly every time you are calling a function. This is a case,</span> <span data-start="1253.99" data-end="1259.03">I think, Firefox, at least has been optimizing this use case. But if, for example, you have</span> <span data-start="1259.03" data-end="1265.78">a list of lots of objects and every time you're mapping on the list, you're calling a function,</span> <span data-start="1265.78" data-end="1271.85">at the end, it can add up. It won't be noticeable in most situations. But something to remember</span> <span data-start="1271.85" data-end="1277.77">that sometimes it might be useful to store in the JavaScript, to cache in the JavaScript</span> <span data-start="1277.77" data-end="1284.15">world the results of some computation if you want to avoid paying the cost to go through</span> <span data-start="1284.15" data-end="1291.08">the bridge to do WebAssembly. Sometimes you're reaching a point where your codebase is growing</span> <span data-start="1291.08" data-end="1298.929">a lot. So, a few tips on this. In my case it was because I did the project, I got more</span> <span data-start="1298.929" data-end="1302.96">and more contributors. The first thing I will tell you is to stick to your components. So,</span> <span data-start="1302.96" data-end="1310.22">the idea is that if you have a button that is showing to open the software, you might</span> <span data-start="1310.22" data-end="1315.799">think that's a\h let's change the design of the button so it's smaller on screen. You</span> <span data-start="1315.799" data-end="1323.36">can add a font size that is different. What I would recommend is to make a help button.</span> </p>
<p><span data-start="1323.36" data-end="1329.549">Basically to create components for as much things as possible. In other words, make a</span> <span data-start="1329.549" data-end="1335.79">design system and try to stick to it. Because once you've been doing this thing, it will</span> <span data-start="1335.79" data-end="1343.73">be much faster to build new screens and consistent screens. Something I don't know is I'm not</span> <span data-start="1343.73" data-end="1350.69">doing any unit tests. Sorry. Actually, I do, but only there is a bit of logic in my components.</span> <span data-start="1350.69" data-end="1360.59">And I think it's the case in most\h it's really where what you are doing that you need tests</span> <span data-start="1360.59" data-end="1369.32">for react components. Instead, I'm creating visual stories. So, using Storybook or React</span> <span data-start="1369.32" data-end="1375.09">Styleguidist, you can create stories that are displaying your components outside of</span> <span data-start="1375.09" data-end="1381.86">your application. I found this button to be faster and way more powerful to first develop</span> <span data-start="1381.86" data-end="1387.53">components outside of the application. So, much faster because rather than having to</span> <span data-start="1387.53" data-end="1394.26">load the application and then to navigate to a screen to see that your changes are right</span> <span data-start="1394.26" data-end="1400.88">or not, you just have to run Storybook and go to the proper story. It's much faster for</span> <span data-start="1400.88" data-end="1408.5">development and also for testing. It's not automatic. But in the future, I'm changing</span> <span data-start="1408.5" data-end="1415.29">or updating the UI. Or I'm making changes on the component, I can quickly open Storybook</span> <span data-start="1415.29" data-end="1419.1">and see my component in a different state and make sure that everything is correct.</span> </p>
<p><span data-start="1419.1" data-end="1427.35">It's in particular useful for cases like, for example, to have the handling, the component</span> <span data-start="1427.35" data-end="1433.43">showing something that you have never seen when you're developing because everything</span> <span data-start="1433.43" data-end="1438.87">is going all right. But at least using Storybook, you can make sure that your components all</span> <span data-start="1438.87" data-end="1447.03">have a neutral state that is working. The next advice would be to use types. Flow or</span> <span data-start="1447.03" data-end="1454">TypeScript. I have been using flow because I was more used to it. And the useful things</span> <span data-start="1454" data-end="1459.64">with types that they will tell you when you forgot to pass or remove a product or refactoring</span> <span data-start="1459.64" data-end="1465.22">something. And help auto completion, avoid silly mistakes and help document objects.</span> <span data-start="1465.22" data-end="1470.61">But not useful when you write code, but when you're back on a module that you or someone</span> <span data-start="1470.61" data-end="1477.64">has wrote a few months ago. In other words, types are really shining when you or someone</span> <span data-start="1477.64" data-end="1483.44">else is coming back and refactoring some parts of the application. And after a few months,</span> <span data-start="1483.44" data-end="1491.53">you are a stranger to your own codebase. So, this being done, we now have the core of the</span> <span data-start="1491.53" data-end="1498.22">software and an interface that is being made on top of it. And let's see how to package</span> <span data-start="1498.22" data-end="1504.09">this. So, we have a few packaging options. We could make a PWA because WebAssembly is</span> <span data-start="1504.09" data-end="1511.169">running in the browser. So, it's not an issue. I have been using Electron to have access</span> <span data-start="1511.169" data-end="1517.32">to the design system. And also people like to download the application, to own it, in</span> <span data-start="1517.32" data-end="1525.59">a way. And having access to the system, you can avoid making something that is only working</span> <span data-start="1525.59" data-end="1532.94">on online. And you can use the software offline. And in some cases you can even embed the JavaScript</span> <span data-start="1532.94" data-end="1538.24">application inside the native application using Chromium embedded framework. If you</span> <span data-start="1538.24" data-end="1546.03">have an application, and you have the manpower to do it. And my advice would be to build</span> <span data-start="1546.03" data-end="1551.89">over the native API as much as you can. So, for example, I did two versions of the context</span> <span data-start="1551.89" data-end="1558.54">menu. One that is using on the left the map UI context menu, running in a browser. And</span> <span data-start="1558.54" data-end="1565.91">on the right, you can seeing the menu using APIs. So, you have the context menu. And I</span> <span data-start="1565.91" data-end="1573.57">won't go through the code. But instead of renders some material, I can use the UI to</span> <span data-start="1573.57" data-end="1581.57">create this context. And this is helpful for people\h not helpful, but that makes the application</span> <span data-start="1581.57" data-end="1590.97">look like a native application. It does not look web ish. And, yeah. We can know now what's</span> <span data-start="1590.97" data-end="1596.74">the result of all of this? Let's take a look. So, this is a new application. And the demo</span> </p>
<p><span data-start="1596.74" data-end="1603.57">I'm doing here is the same as before. I will be creating a button object with one when</span> <span data-start="1603.57" data-end="1609.049">it's pressed and one animation when it's not pressed. And I will be adding it to the screen</span> <span data-start="1609.049" data-end="1615.71">after the button. And doing the same thing as before with the event. When the player</span> <span data-start="1615.71" data-end="1622.32">is stepping on the button that the platform is there. So, that's the same more or less</span> <span data-start="1622.32" data-end="1626.92">interface as before. But all using React WebAssembly and JavaScript. And here I'm choosing the</span> <span data-start="1626.92" data-end="1633.37">player and the button. And there is a condition between these two objects. Then I'm adding</span> <span data-start="1633.37" data-end="1640.94">two actions. The first one is to add a false so that the platform is going up in the air.</span> <span data-start="1640.94" data-end="1646.2">And then another direction so that the button is going to the state where it's pressed.</span> <span data-start="1646.2" data-end="1653.45">So, changing the animation. That's how you do it. And when that will be pressing play,</span> <span data-start="1653.45" data-end="1659.99">same as before, the WebAssembly module is going to JavaScript by putting files in and</span> <span data-start="1659.99" data-end="1667.08">you get a working game in the browser. Yeah. That's working. In my definition, as a developer,</span> <span data-start="1667.08" data-end="1673.429">it's working. But what do our users say? I will be honest. The first feedbacks were really</span> <span data-start="1673.429" data-end="1682.3">bad because\h not because it wasn't the application or built using React or it was using web technologies,</span> <span data-start="1682.3" data-end="1688.71">it was just because the new version was lacking a lot of features from the previous one. Even</span> <span data-start="1688.71" data-end="1694.84">if I did reuse the existing codebase, I had to remake the whole interface around it. So,</span> <span data-start="1694.84" data-end="1700.53">of course I had started a few things and adding new things. So, it was lacking features. But</span> <span data-start="1700.53" data-end="1706.94">after a few year D a few years. After one year, okay, there is a real difference. And</span> <span data-start="1706.94" data-end="1711.01">it's easier to use and actually I can be more productive using the new version rather than</span> <span data-start="1711.01" data-end="1718.23">the old one. And it works. It works so well it's better than the native application. Why</span> <span data-start="1718.23" data-end="1725.74">better? I can do ultrafast iteration on it, I can test super easily. I have a near perfect</span> <span data-start="1725.74" data-end="1732.6">cross platform and I have a faster startup time. It's faster. Autoupdates, more contributors.</span> </p>
<p><span data-start="1732.6" data-end="1740.19">We can try it online and we can even run it on phones. I mean, running it on a phone.</span> <span data-start="1740.19" data-end="1745.059">It's not made for a phone so you cannot really use it properly\h I mean, you can use it properly.</span> <span data-start="1745.059" data-end="1752.51">But it will need some enhancement to do it. But my point is that it's working almost everywhere.</span> <span data-start="1752.51" data-end="1762.46">So, this was to show that actually we can do things using React, WebAssembly, JavaScript</span> <span data-start="1762.46" data-end="1768.57">and all of this new frontend framework can do things that are not only as good as what</span> <span data-start="1768.57" data-end="1772.69">we used to do in the native world, but we can be more ambitious. Thank you.</span> </p>
</section>