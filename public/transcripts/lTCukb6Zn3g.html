<section>
<p><span data-start="12.58" data-end="15.47">everyone my name is David course she'd</span> <span data-start="15.47" data-end="18.529">and believe it or not animation is an</span> <span data-start="18.529" data-end="20.869">extremely important part of the user</span> <span data-start="20.869" data-end="23.36">experience in fact there's a lot of you</span> <span data-start="23.36" data-end="25.22">here right now this is probably the most</span> <span data-start="25.22" data-end="27.26">amount of people I've talked to but many</span> <span data-start="27.26" data-end="28.88">of you are here right now because you</span> <span data-start="28.88" data-end="31.16">realize that animation is a growing</span> <span data-start="31.16" data-end="34.1">trend in both the web and mobile app</span> <span data-start="34.1" data-end="35.96">development and this is for good reason</span> <span data-start="35.96" data-end="39.41">- animation increases delight reduces</span> <span data-start="39.41" data-end="41.659">cognitive load and it could be an</span> <span data-start="41.659" data-end="44.48">important factor in your brand when it</span> <span data-start="44.48" data-end="46.879">comes to your style guide so a lot of</span> <span data-start="46.879" data-end="49.519">developers realize this but so do a lot</span> <span data-start="49.519" data-end="51.739">of users if you open an app in your</span> <span data-start="51.739" data-end="55.519">iPhone or Android device you will expect</span> <span data-start="55.519" data-end="58.04">animations to happen whenever you</span> <span data-start="58.04" data-end="62.93">interact with the app so um my name is</span> </p>
<p><span data-start="62.93" data-end="66.77">David as I said and I live in Florida</span> <span data-start="66.77" data-end="71.38">which is right about there</span> <span data-start="71.39" data-end="74.81">and this is actually pretty exciting</span> <span data-start="74.81" data-end="76.82">because I met Jay has come to you</span> <span data-start="76.82" data-end="80.96">partially talking about CSS which all of</span> <span data-start="80.96" data-end="83.24">you are familiar with this is pretty</span> <span data-start="83.24" data-end="84.68">much where I sat on the airplane I got</span> <span data-start="84.68" data-end="89.329">like an hour of sleep so so like most</span> <span data-start="89.329" data-end="92.21">front-end developers which I'm guessing</span> <span data-start="92.21" data-end="94.46">all of you are either doing a JavaScript</span> <span data-start="94.46" data-end="98.09">on the front-end or back-end there's two</span> <span data-start="98.09" data-end="100.789">very important technologies that we have</span> <span data-start="100.789" data-end="103.34">to work with and that's JavaScript and</span> </p>
<p><span data-start="103.34" data-end="106.729">CSS and as front-end developers we know</span> <span data-start="106.729" data-end="108.469">that the landscape is constantly</span> <span data-start="108.469" data-end="110.24">changing as well</span> <span data-start="110.24" data-end="113.359">so we'd love to experiment or at least</span> <span data-start="113.359" data-end="117.2">most of us love to experiment and a</span> <span data-start="117.2" data-end="119.63">couple years ago I asked myself the</span> <span data-start="119.63" data-end="124.34">question what if what if I were to maybe</span> <span data-start="124.34" data-end="127.46">not use JavaScript and see what CSS</span> <span data-start="127.46" data-end="131.72">could do so this is how I approached</span> <span data-start="131.72" data-end="136.7">user interfaces I would look at examples</span> <span data-start="136.7" data-end="139.67">on dribble some cool animations and then</span> <span data-start="139.67" data-end="142.04">I would try to recreate it as best as I</span> <span data-start="142.04" data-end="142.819">could</span> <span data-start="142.819" data-end="147.59">using only CSS and so I looked for more</span> <span data-start="147.59" data-end="150.17">and more complex examples including ones</span> <span data-start="150.17" data-end="152.09">with stateful transitions such as this</span> <span data-start="152.09" data-end="154.909">one and with lots of checkbox hacks</span> <span data-start="154.909" data-end="159.56">hacks and like target whatever I was</span> <span data-start="159.56" data-end="162.5">able to you know recreate it pretty well</span> <span data-start="162.5" data-end="165.889">and by the way don't do this these were</span> <span data-start="165.889" data-end="167.68">all really fun experiments but</span> <span data-start="167.68" data-end="170.9">javascript is good for a lot of things</span> <span data-start="170.9" data-end="172.73">and you should probably use JavaScript</span> <span data-start="172.73" data-end="175.219">if you want to do interactive animations</span> <span data-start="175.219" data-end="178.43">like this I got a bit crazy so you know</span> <span data-start="178.43" data-end="182.299">some animations online and I decide to</span> <span data-start="182.299" data-end="186.379">recreate them completely in CSS so this</span> <span data-start="186.379" data-end="189.919">is one of the animations I made and one</span> <span data-start="189.919" data-end="193.31">important thing here is that we have the</span> <span data-start="193.31" data-end="195.889">dev tools on the right if I created this</span> <span data-start="195.889" data-end="198.889">with just JavaScript we would not get</span> <span data-start="198.889" data-end="200.87">this we would not be able to play around</span> <span data-start="200.87" data-end="203.299">and interact with all of the elements</span> <span data-start="203.299" data-end="209.329">you know in CSS so why do we get this</span> <span data-start="209.329" data-end="212.259">with CSS animations and not yet with</span> </p>
<p><span data-start="212.259" data-end="216.319">JavaScript animations well it turns out</span> <span data-start="216.319" data-end="218.689">that even though CSS could do a lot of</span> <span data-start="218.689" data-end="221.81">things it involves a lot of hacks so I</span> <span data-start="221.81" data-end="224.209">realize that CSS is not the most</span> <span data-start="224.209" data-end="226.909">powerful language and that's why a lot</span> <span data-start="226.909" data-end="231.169">of people start flocking to using CSS in</span> <span data-start="231.169" data-end="233.78">JavaScript using javascript to apply</span> <span data-start="233.78" data-end="236.479">Styles because hey javascript is a much</span> <span data-start="236.479" data-end="239.06">more powerful language but here's the</span> <span data-start="239.06" data-end="241.609">thing the fact that CSS is not powerful</span> <span data-start="241.609" data-end="245.09">is actually a good thing there's this</span> <span data-start="245.09" data-end="246.859">principle called the principle of least</span> <span data-start="246.859" data-end="250.009">power and it states that you should use</span> <span data-start="250.009" data-end="252.109">the least powerful language for</span> <span data-start="252.109" data-end="255.349">expressing information constraints or</span> <span data-start="255.349" data-end="259.43">programs on the world wide web and the</span> <span data-start="259.43" data-end="261.859">principle basically states that powerful</span> <span data-start="261.859" data-end="265.07">languages such as JavaScript inhibit</span> <span data-start="265.07" data-end="268.49">information reuse and what I mean by</span> <span data-start="268.49" data-end="271.49">that is that even though JavaScript</span> <span data-start="271.49" data-end="275.86">could do a lot of things the</span> <span data-start="275.86" data-end="278.41">the fact of the matter is that CSS</span> <span data-start="278.41" data-end="283">provides like a limited dynamic library</span> <span data-start="283" data-end="288.28">that that you could use to express style</span> <span data-start="288.28" data-end="290.89">succinctly and JavaScript even though it</span> <span data-start="290.89" data-end="292.9">could do everything you're gonna you</span> <span data-start="292.9" data-end="295.27">know have a mess in your code if you try</span> <span data-start="295.27" data-end="297.37">to define styles in there or try to find</span> <span data-start="297.37" data-end="299.89">many things at once so it sort of</span> <span data-start="299.89" data-end="304.75">inhibits reuse if you do that so today</span> <span data-start="304.75" data-end="306.04">we're going to be talking about two</span> <span data-start="306.04" data-end="308.56">things CSS variables and rxjs</span> <span data-start="308.56" data-end="311.05">observables how many of you are familiar</span> <span data-start="311.05" data-end="315.03">with CSS variables all right how about</span> <span data-start="315.03" data-end="319.18">observables all right few less people if</span> <span data-start="319.18" data-end="321.4">you don't know anything about any of</span> <span data-start="321.4" data-end="323.56">these two that's okay we're going to go</span> <span data-start="323.56" data-end="324.43">over them</span> <span data-start="324.43" data-end="327.4">from scratch and sort of just do a quick</span> <span data-start="327.4" data-end="329.56">deep dive into both of them and then</span> <span data-start="329.56" data-end="331.27">we're going to understand how they could</span> <span data-start="331.27" data-end="334.12">actually work together now I know the</span> <span data-start="334.12" data-end="335.86">title of my talk is called reactive</span> <span data-start="335.86" data-end="338.92">animations with CSS variables but I'm</span> <span data-start="338.92" data-end="341.35">not going to be talking about react in</span> <span data-start="341.35" data-end="345.43">this talk unfortunately however the good</span> <span data-start="345.43" data-end="347.41">news is that the techniques that you</span> <span data-start="347.41" data-end="349.42">learn here you could apply to any</span> <span data-start="349.42" data-end="352.84">framework react angular ember or any of</span> <span data-start="352.84" data-end="357.13">those other dead ones I'm kidding now</span> <span data-start="357.13" data-end="363.31">react is good angular is great and CSS</span> <span data-start="363.31" data-end="365.92">and JavaScript sort of seem at two</span> <span data-start="365.92" data-end="368.08">different ends of the spectrum we have</span> <span data-start="368.08" data-end="370.57">custom properties being very much a CSS</span> <span data-start="370.57" data-end="373.12">thing and observables being very much a</span> </p>
<p><span data-start="373.12" data-end="375.1">JavaScript thing so today you're gonna</span> <span data-start="375.1" data-end="377.71">get sort of a taste of both and we're</span> <span data-start="377.71" data-end="380.89">going to for whatever reason try to mix</span> <span data-start="380.89" data-end="384.07">them together so through all this you</span> <span data-start="384.07" data-end="388.15">might be asking yourself why why do we</span> <span data-start="388.15" data-end="390.94">want to do this why do we want to mix</span> <span data-start="390.94" data-end="394.39">you know CSS and JavaScript together in</span> <span data-start="394.39" data-end="397.65">this way and the reason is because</span> <span data-start="397.65" data-end="400.09">frankly you can make a lot of really</span> <span data-start="400.09" data-end="406.78">cool animations using that we have right</span> <span data-start="406.78" data-end="409.18">now a system</span> <span data-start="409.18" data-end="411.639">doing things in JavaScript where it's</span> <span data-start="411.639" data-end="414.25">imperative and by imperative it means</span> <span data-start="414.25" data-end="417.25">we're telling JavaScript exactly what's</span> <span data-start="417.25" data-end="419.68">to do how to apply each style to the</span> <span data-start="419.68" data-end="422.38">element and because of that we can't</span> <span data-start="422.38" data-end="425.139">either a quickly and we can't quickly</span> <span data-start="425.139" data-end="427.8">create user interfaces that are rich in</span> <span data-start="427.8" data-end="430.539">interaction and animation such as the</span> <span data-start="430.539" data-end="433.6">ones you see here and I'm a little</span> <span data-start="433.6" data-end="435.3">jealous of mobile developers because</span> </p>
<p><span data-start="435.3" data-end="438.039">Android and iOS developers they</span> <span data-start="438.039" data-end="440.8">basically get the tools to do this for</span> <span data-start="440.8" data-end="443.53">free and us and the web were sort of</span> <span data-start="443.53" data-end="448.27">left in the dark so let's first dive</span> <span data-start="448.27" data-end="450.789">into how animations are currently done</span> <span data-start="450.789" data-end="453.97">we have CSS animations which look like</span> <span data-start="453.97" data-end="455.83">this most of you are familiar with this</span> <span data-start="455.83" data-end="458.47">there's two types transitions and</span> <span data-start="458.47" data-end="461.71">animations transitions are good from</span> <span data-start="461.71" data-end="463.919">when you're going from point A to B and</span> <span data-start="463.919" data-end="467.11">maybe going back from point B to point A</span> <span data-start="467.11" data-end="469.9">and animations are good when you want to</span> <span data-start="469.9" data-end="472.93">define explicit steps or keyframes in</span> <span data-start="472.93" data-end="474.849">your animations so that it does a</span> <span data-start="474.849" data-end="478.27">certain behavior that you want the</span> <span data-start="478.27" data-end="481.12">beauty about this is that CSS animations</span> <span data-start="481.12" data-end="483.789">are declarative they're reusable they're</span> <span data-start="483.789" data-end="486.039">also really legible I mean you could</span> <span data-start="486.039" data-end="488.68">read this and know exactly what's going</span> <span data-start="488.68" data-end="490.99">on also these are built into the browser</span> <span data-start="490.99" data-end="493.65">so you don't need any external library</span> <span data-start="493.65" data-end="496.24">to pull in in order to get these</span> <span data-start="496.24" data-end="498.82">animations supports also pretty good it</span> <span data-start="498.82" data-end="501.699">goes back to IE 9 I believe for</span> <span data-start="501.699" data-end="504.28">animations and hopefully no one uses ie</span> <span data-start="504.28" data-end="508.419">8 anyway CSS animations can also be</span> <span data-start="508.419" data-end="511.33">offloaded to the global processing unit</span> <span data-start="511.33" data-end="514.779">the GPU which means they are not going</span> <span data-start="514.779" data-end="517.169">to be choked up by the main thread</span> <span data-start="517.169" data-end="518.979">especially if you're using a framework</span> <span data-start="518.979" data-end="521.169">like react or angular we're using the</span> <span data-start="521.169" data-end="524.169">main thread for a lot of things so it's</span> <span data-start="524.169" data-end="526.3">best to you know keep things such as</span> <span data-start="526.3" data-end="530.22">styling an animation off that thread</span> <span data-start="530.22" data-end="534.67">also we could use selectors media</span> <span data-start="534.67" data-end="537.01">queries and other things like that to</span> <span data-start="537.01" data-end="540.22">define our animations so we could keep</span> <span data-start="540.22" data-end="543.1">that separate from from the Dom</span> <span data-start="543.1" data-end="544.9">so that when elements appear and</span> <span data-start="544.9" data-end="547.33">disappear we don't have to keep track of</span> <span data-start="547.33" data-end="550.42">those in CSS but also this has issues</span> <span data-start="550.42" data-end="552.88">one of the big issue is that CSS</span> <span data-start="552.88" data-end="555.1">animations are not dynamic</span> <span data-start="555.1" data-end="557.77">we can't change these on the fly we</span> <span data-start="557.77" data-end="561.22">can't for example set this translate Y</span> <span data-start="561.22" data-end="564.07">value to anything other than 50% or</span> <span data-start="564.07" data-end="566.26">anything other than the static value and</span> <span data-start="566.26" data-end="568.57">they're pretty difficult to compose so</span> <span data-start="568.57" data-end="570.7">if you want one animation to go after</span> <span data-start="570.7" data-end="573.67">the other that's not the easiest thing</span> <span data-start="573.67" data-end="576.88">trust me I've done it I've tried it's</span> <span data-start="576.88" data-end="579.61">it's a pain in the ass it keeps me up at</span> <span data-start="579.61" data-end="584.02">night so we also have JavaScript</span> <span data-start="584.02" data-end="586.54">animations and this is the web</span> <span data-start="586.54" data-end="590.65">animations API which is a pretty recent</span> <span data-start="590.65" data-end="592.9">spec and it's actually really awesome</span> <span data-start="592.9" data-end="595.21">because it is supported in mainstream</span> <span data-start="595.21" data-end="598.15">browsers today and it looks almost</span> <span data-start="598.15" data-end="601.6">exactly like the CSS animations example</span> <span data-start="601.6" data-end="604.06">and that's because it pretty much is it</span> <span data-start="604.06" data-end="607.12">uses the same underlying constructs in</span> <span data-start="607.12" data-end="609.88">order to make the animations so this is</span> <span data-start="609.88" data-end="612.67">the exact same animation we saw and this</span> <span data-start="612.67" data-end="615.79">is offloaded from the main thread to the</span> </p>
<p><span data-start="615.79" data-end="618.31">GPU so this is going to be really fast</span> <span data-start="618.31" data-end="622.09">really performant and the beauty is that</span> <span data-start="622.09" data-end="623.68">because it's in JavaScript</span> <span data-start="623.68" data-end="627.16">it's dynamic we could add this to any</span> <span data-start="627.16" data-end="631.06">element we could tell it to start till</span> <span data-start="631.06" data-end="635.95">to stop whenever we want but the web</span> <span data-start="635.95" data-end="638.2">animations API is not really supported</span> <span data-start="638.2" data-end="640.36">in Internet Explorer but that's okay</span> <span data-start="640.36" data-end="645.22">because nothing is there's also dynamic</span> <span data-start="645.22" data-end="647.86">JavaScript animations too and this is</span> <span data-start="647.86" data-end="649.66">sort of the problem that we're going to</span> <span data-start="649.66" data-end="652.21">be tackling today this is how we do them</span> <span data-start="652.21" data-end="655.75">today we use requestanimationframe which</span> <span data-start="655.75" data-end="659.08">basically asks the browser which</span> <span data-start="659.08" data-end="662.74">animation frame should I do this on so</span> <span data-start="662.74" data-end="664.84">that I'm not choking the main thread and</span> </p>
<p><span data-start="664.84" data-end="667">I'm making sure that my program my</span> <span data-start="667" data-end="669.85">animations run at 60 frames per second</span> <span data-start="669.85" data-end="673.24">and so we run this in the loop sometimes</span> <span data-start="673.24" data-end="676.51">or we run this on events</span> <span data-start="676.51" data-end="680.2">such as this one so over here we're</span> <span data-start="680.2" data-end="682.21">moving the mouse and whenever we move</span> <span data-start="682.21" data-end="686.05">the mouse we get a weekend events back</span> <span data-start="686.05" data-end="688.54">and from that event we could grab the</span> </p>
<p><span data-start="688.54" data-end="692.26">X&Y position from the mouse and we're</span> <span data-start="692.26" data-end="694.27">directly applying it to the style of the</span> <span data-start="694.27" data-end="697.57">box this is inline Styles this is bad</span> <span data-start="697.57" data-end="700.96">for many reasons first of all inline</span> <span data-start="700.96" data-end="702.88">styles are going to override any other</span> <span data-start="702.88" data-end="705.46">styles you have it's hard to configure</span> <span data-start="705.46" data-end="708.04">them you can't put it in the media query</span> <span data-start="708.04" data-end="710.29">well actually you could you could listen</span> <span data-start="710.29" data-end="712.84">for the browser resize event and change</span> <span data-start="712.84" data-end="717.46">the animation based on that you're also</span> <span data-start="717.46" data-end="720.58">updating the Dom a lot and upping the</span> </p>
<p><span data-start="720.58" data-end="723.16">Dom is expensive for those of you who've</span> <span data-start="723.16" data-end="726.07">heard Lynn's talk it's an expensive</span> <span data-start="726.07" data-end="728.38">procedure and that's why react and other</span> <span data-start="728.38" data-end="730.69">frameworks try to minimize updating the</span> <span data-start="730.69" data-end="733.57">Dom as much as possible by doing this</span> <span data-start="733.57" data-end="736.12">you're saying forget that I'm gonna</span> <span data-start="736.12" data-end="737.74">update it all the time and there's</span> <span data-start="737.74" data-end="741.24">nothing you could do about it also</span> <span data-start="741.24" data-end="745.27">because this Dom elements the box has to</span> <span data-start="745.27" data-end="747.28">exist at the time that you're adding the</span> <span data-start="747.28" data-end="750.43">animation this could also be problematic</span> <span data-start="750.43" data-end="752.59">if you're using frameworks such as</span> <span data-start="752.59" data-end="756.37">angular react where Dom elements appear</span> <span data-start="756.37" data-end="758.83">and disappear they're mounted and</span> <span data-start="758.83" data-end="761.14">they're unmounted pretty much all the</span> <span data-start="761.14" data-end="763.81">time so the problem with this is that</span> <span data-start="763.81" data-end="766.45">you have to keep track of it and you</span> <span data-start="766.45" data-end="768.82">have to make sure that when it's added</span> <span data-start="768.82" data-end="770.68">back you're adding this event listener</span> <span data-start="770.68" data-end="774.91">back on and also if you want to add more</span> <span data-start="774.91" data-end="776.8">animations based on the same event</span> <span data-start="776.8" data-end="779.02">listener you either have to hard code it</span> <span data-start="779.02" data-end="781.72">inside this function right here or you</span> <span data-start="781.72" data-end="783.88">have to add another event listener which</span> <span data-start="783.88" data-end="785.8">could lead to memory leaks because</span> <span data-start="785.8" data-end="787.63">that's a lot of event listeners to keep</span> <span data-start="787.63" data-end="792.49">track of all right so let's talk real</span> <span data-start="792.49" data-end="796">quick about CSS variables in case you</span> <span data-start="796" data-end="798.19">know you might not know this is how a</span> </p>
<p><span data-start="798.19" data-end="801.37">CSS variable is defined its prepended</span> <span data-start="801.37" data-end="804.49">with two dashes I don't know why it</span> <span data-start="804.49" data-end="808.71">stands out though and in order to use it</span> <span data-start="808.71" data-end="809.92">you</span> <span data-start="809.92" data-end="812.17">put it inside a selector such as root</span> <span data-start="812.17" data-end="814.779">and this is the most common way that</span> <span data-start="814.779" data-end="816.609">you're gonna see CSS variables being</span> <span data-start="816.609" data-end="818.949">defined because this is going to cascade</span> <span data-start="818.949" data-end="823.119">down and be applied to pretty much every</span> <span data-start="823.119" data-end="829.059">selector that asks for the color and for</span> <span data-start="829.059" data-end="831.73">this you would just put it inside a</span> <span data-start="831.73" data-end="834.189">selector and that color is going to be</span> <span data-start="834.189" data-end="838.66">applied to any element with you know</span> <span data-start="838.66" data-end="841.029">with that class name and of course this</span> <span data-start="841.029" data-end="844.509">follows cascading and it also follows</span> <span data-start="844.509" data-end="847.119">specificity too so you could do some</span> <span data-start="847.119" data-end="849.1">pretty cool things like putting this in</span> <span data-start="849.1" data-end="851.379">a media query or putting it as a</span> <span data-start="851.379" data-end="853.119">different color in a more specific</span> <span data-start="853.119" data-end="855.669">selector so you have a high amounts of</span> <span data-start="855.669" data-end="859.66">configurability with this now here's a</span> <span data-start="859.66" data-end="861.999">really cool part about CSS variables and</span> <span data-start="861.999" data-end="864.419">that's that you could define them in</span> </p>
<p><span data-start="864.419" data-end="867.279">JavaScript so we have three methods to</span> <span data-start="867.279" data-end="870.369">do this we have set property which is</span> <span data-start="870.369" data-end="874.299">going to set the custom property and</span> <span data-start="874.299" data-end="876.519">it's going to put it right on the HTML</span> <span data-start="876.519" data-end="879.16">root element you could also get the</span> <span data-start="879.16" data-end="882.73">property value like like so so you just</span> <span data-start="882.73" data-end="885.22">pass in the variable name and it's gonna</span> <span data-start="885.22" data-end="889.269">return that value to you as a string and</span> <span data-start="889.269" data-end="892.059">there's also removed property you know</span> <span data-start="892.059" data-end="896.079">if you ever need it it's waiting for my</span> <span data-start="896.079" data-end="901.629">slides to update alright here we go so</span> <span data-start="901.629" data-end="905.709">here's an example of this I didn't make</span> <span data-start="905.709" data-end="908.949">this West boss made it a really cool</span> <span data-start="908.949" data-end="912.699">example where I'm attaching what I just</span> <span data-start="912.699" data-end="914.11">showed you</span> <span data-start="914.11" data-end="916.799">updating the values with JavaScript and</span> </p>
<p><span data-start="916.799" data-end="919.629">I'm attaching those to event listeners</span> <span data-start="919.629" data-end="926.559">here so as you could see we could</span> <span data-start="926.559" data-end="930.009">dynamically change all of these</span> <span data-start="930.009" data-end="933.1">different variables and this is just</span> <span data-start="933.1" data-end="935.98">using CSS if you can't see I'm changing</span> <span data-start="935.98" data-end="940.989">that to blue and so our JavaScript is</span> <span data-start="940.989" data-end="943.83">very small by small I mean</span> <span data-start="943.83" data-end="945.6">you could barely read it because it's so</span> <span data-start="945.6" data-end="950.58">tiny up there but just trust me these</span> <span data-start="950.58" data-end="952.92">variables are being applied using just</span> <span data-start="952.92" data-end="963.3">CSS here's another example if my slides</span> <span data-start="963.3" data-end="967.45">decide to let me go to the next example</span> <span data-start="967.46" data-end="970.32">what they probably won't so that's okay</span> <span data-start="970.32" data-end="972.36">ah here we go</span> </p>
<p><span data-start="972.36" data-end="980.88">I love conference Wi-Fi all right we'll</span> <span data-start="980.88" data-end="982.74">skip that let's look at browser support</span> <span data-start="982.74" data-end="986.09">so browser support for CSS variables</span> <span data-start="986.09" data-end="988.32">believe it or not is actually very good</span> <span data-start="988.32" data-end="991.5">and this is very recent in fact my iOS</span> </p>
<p><span data-start="991.5" data-end="993.45">Safari right now is still at nine points</span> <span data-start="993.45" data-end="999.18">two and nine point three I guess just</span> <span data-start="999.18" data-end="1003.38">came out so the only problem here though</span> <span data-start="1003.38" data-end="1006.14">is that neither Internet Explorer or</span> <span data-start="1006.14" data-end="1009.38">edge support you know custom properties</span> <span data-start="1009.38" data-end="1012.68">but not a big surprise not a big problem</span> <span data-start="1012.68" data-end="1016.13">either because we could use we could use</span> <span data-start="1016.13" data-end="1018.56">plugins such as there's a couple post</span> <span data-start="1018.56" data-end="1021.86">CSS plugins for variables that will</span> <span data-start="1021.86" data-end="1026.33">default to the original value and ignore</span> <span data-start="1026.33" data-end="1029.36">any other their custom variable</span> <span data-start="1029.36" data-end="1032.51">declarations in your CSS so this is</span> <span data-start="1032.51" data-end="1034.1">where progressive enhancement comes in</span> <span data-start="1034.1" data-end="1037.43">really really handy preprocessor</span> <span data-start="1037.43" data-end="1040.55">supports to is actually really good so</span> <span data-start="1040.55" data-end="1042.97">it doesn't matter what you're using to</span> <span data-start="1042.97" data-end="1047.199">to apply your CSS whether it's sass less</span> <span data-start="1047.199" data-end="1051.05">stylist post CSS or inline Styles does</span> <span data-start="1051.05" data-end="1053.84">not matter you could use CSS variables</span> <span data-start="1053.84" data-end="1057.77">in any of those all right let's talk</span> <span data-start="1057.77" data-end="1059.59">real quick now about rxjs</span> <span data-start="1059.59" data-end="1062">observables which about half of you</span> <span data-start="1062" data-end="1063.83">already know about and half of you maybe</span> <span data-start="1063.83" data-end="1066.35">don't so this is going to be a real</span> <span data-start="1066.35" data-end="1072.05">quick crash course arrays are finite</span> <span data-start="1072.05" data-end="1074.93">collection of values so for example this</span> <span data-start="1074.93" data-end="1077.39">array has six balls</span> <span data-start="1077.39" data-end="1080.95">in the stream is sort of like an array</span> <span data-start="1080.95" data-end="1084.59">except these values come in over time</span> <span data-start="1084.59" data-end="1087.38">and they come at different times and</span> <span data-start="1087.38" data-end="1090.77">streams can also have a beginning and an</span> <span data-start="1090.77" data-end="1094.61">end so if you're a musician think of an</span> <span data-start="1094.61" data-end="1099.77">array as a chord that you play or you</span> <span data-start="1099.77" data-end="1102.11">know to compare that to a stream think</span> <span data-start="1102.11" data-end="1104.09">of a stream as an arpeggio where you</span> <span data-start="1104.09" data-end="1106.58">play one note at a time instead of all</span> <span data-start="1106.58" data-end="1109.55">notes at the same time so a good way to</span> <span data-start="1109.55" data-end="1111.89">think about this is that an observable</span> <span data-start="1111.89" data-end="1115.75">stream is an array that's asynchronous</span> <span data-start="1115.75" data-end="1118.94">the items could come in at any time it's</span> <span data-start="1118.94" data-end="1121.28">immutable which means whenever you do</span> <span data-start="1121.28" data-end="1123.83">something like an operator to an</span> <span data-start="1123.83" data-end="1125.75">observable it's gonna give you a new</span> <span data-start="1125.75" data-end="1127.429">observable instead of that same</span> <span data-start="1127.429" data-end="1130.46">observable and it's subscribable so</span> <span data-start="1130.46" data-end="1133.61">whenever an item is pushed onto the</span> <span data-start="1133.61" data-end="1136.55">observable whatever is subscribing to it</span> <span data-start="1136.55" data-end="1139.04">will know about it when it happens</span> <span data-start="1139.04" data-end="1145.88">finally that's live loaded so over here</span> <span data-start="1145.88" data-end="1147.89">we're applying CSS variables the same</span> <span data-start="1147.89" data-end="1150.65">way I'm gonna backtrack a bit and we're</span> <span data-start="1150.65" data-end="1153.44">adding a transition to it so what's</span> <span data-start="1153.44" data-end="1155.69">going to happen is that by changing the</span> <span data-start="1155.69" data-end="1160.94">values you see that using CSS we could</span> <span data-start="1160.94" data-end="1167.09">smoothly transition each value all right</span> <span data-start="1167.09" data-end="1170.39">back to our scheduled programming Thanks</span> <span data-start="1170.39" data-end="1178.61">slides calm write browser support</span> </p>
<p><span data-start="1178.61" data-end="1181.52">Internet Explorer sucks inline Styles</span> <span data-start="1181.52" data-end="1185">suck all right moving on so creating an</span> <span data-start="1185" data-end="1188.27">observable there's a way that manually</span> <span data-start="1188.27" data-end="1189.559">create an observable but we're going to</span> <span data-start="1189.559" data-end="1191.42">breeze through that and we're going to</span> <span data-start="1191.42" data-end="1193.61">just figure out the most common ways of</span> <span data-start="1193.61" data-end="1197.66">creating an observable so rxjs has a way</span> <span data-start="1197.66" data-end="1200.059">to take normal arrays or normal I</span> <span data-start="1200.059" data-end="1202.22">durable such as set and by calling</span> <span data-start="1202.22" data-end="1203.809">thought from you could create an</span> <span data-start="1203.809" data-end="1206.03">observable from that you could also</span> <span data-start="1206.03" data-end="1207.95">create an observable from a promise</span> <span data-start="1207.95" data-end="1210.8">which is basically going to be a</span> </p>
<p><span data-start="1210.8" data-end="1213.32">REME of only one value which is the</span> <span data-start="1213.32" data-end="1215.81">return value of the promise or whenever</span> <span data-start="1215.81" data-end="1218.09">you call dot n on a promise that's the</span> <span data-start="1218.09" data-end="1221.8">value that you get back we could also</span> <span data-start="1221.8" data-end="1224.84">call observables from events which is</span> <span data-start="1224.84" data-end="1227.12">what we're going to be using in the</span> <span data-start="1227.12" data-end="1229.46">coming slides so we give it the Dom node</span> <span data-start="1229.46" data-end="1231.41">and we give it the event name such as</span> <span data-start="1231.41" data-end="1234.44">mousemove we could also call it from an</span> <span data-start="1234.44" data-end="1237.17">events pattern so what an event pattern</span> <span data-start="1237.17" data-end="1240.62">is is just a callback so there's a lot</span> <span data-start="1240.62" data-end="1241.55">of libraries</span> <span data-start="1241.55" data-end="1245.45">that's use callbacks for their event</span> <span data-start="1245.45" data-end="1248.93">patterns such as hammer Jes and this is</span> <span data-start="1248.93" data-end="1250.7">one that I use in a lot of my examples</span> <span data-start="1250.7" data-end="1253.76">when showing observables with CSS</span> <span data-start="1253.76" data-end="1256.31">variables because hammer J has abstracts</span> <span data-start="1256.31" data-end="1258.98">all of these concepts and it's really</span> <span data-start="1258.98" data-end="1262.49">easy to use so we could emulate rotating</span> <span data-start="1262.49" data-end="1264.23">pinching pressing panning tapping</span> <span data-start="1264.23" data-end="1266.21">swiping all the things that you're used</span> <span data-start="1266.21" data-end="1269.57">to on mobile devices on regular websites</span> <span data-start="1269.57" data-end="1272">so all you do is you passing the Dom</span> <span data-start="1272" data-end="1274.64">elements to hammer and then we're going</span> <span data-start="1274.64" data-end="1277.91">to have a event pattern which takes in</span> <span data-start="1277.91" data-end="1280.82">the handler and passes that on to</span> <span data-start="1280.82" data-end="1284">whatever hammer dot J s is doing so over</span> <span data-start="1284" data-end="1285.68">here all we're doing is listening for</span> <span data-start="1285.68" data-end="1289.36">pan now subscribing to an observable is</span> <span data-start="1289.36" data-end="1293.66">pretty easy — all you do is you call dot</span> <span data-start="1293.66" data-end="1296.33">subscribe on that observable and you</span> <span data-start="1296.33" data-end="1298.64">passes in the function where every</span> <span data-start="1298.64" data-end="1302.3">single value whenever you get a value</span> <span data-start="1302.3" data-end="1304.12">you do something with it</span> <span data-start="1304.12" data-end="1306.38">optionally you could pass in an error</span> <span data-start="1306.38" data-end="1308.95">handler and a completion handler so</span> <span data-start="1308.95" data-end="1312.8">pretty much the only thing you need to</span> <span data-start="1312.8" data-end="1314.27">remember from this unless you want to</span> <span data-start="1314.27" data-end="1317.33">dive into more details is that you could</span> <span data-start="1317.33" data-end="1319.82">pass a handler to subscribe that does</span> <span data-start="1319.82" data-end="1322.57">something every time an event is called</span> <span data-start="1322.57" data-end="1326.44">there's also a bunch of operators — and</span> <span data-start="1326.44" data-end="1329.02">the best thing to think about is that</span> </p>
<p><span data-start="1329.02" data-end="1333.62">Aris rxjs is low — for observables so we</span> <span data-start="1333.62" data-end="1336.17">have the same methods that we could use</span> <span data-start="1336.17" data-end="1341.36">on the race such as filter where we if</span> <span data-start="1341.36" data-end="1343.89">you imagine this as an array all</span> <span data-start="1343.89" data-end="1346.26">is taking the green balls there's also</span> <span data-start="1346.26" data-end="1348.96">map which works just as you would expect</span> <span data-start="1348.96" data-end="1352.08">there's debounce which doesn't really</span> <span data-start="1352.08" data-end="1354.24">happen two arrays because arrays are not</span> <span data-start="1354.24" data-end="1358.41">time-based and there's scan where it's</span> <span data-start="1358.41" data-end="1361.83">sort of like array reduce and we also</span> <span data-start="1361.83" data-end="1365.22">have things such as flat map where if</span> <span data-start="1365.22" data-end="1367.17">you think of an array of arrays and you</span> <span data-start="1367.17" data-end="1369.87">want that to squish into one array flat</span> <span data-start="1369.87" data-end="1376.22">map is basically the same thing okay so</span> <span data-start="1376.22" data-end="1381.3">here is an example of using an</span> <span data-start="1381.3" data-end="1384.24">observable to update the Dom all we're</span> <span data-start="1384.24" data-end="1385.44">doing here is we're listening for the</span> <span data-start="1385.44" data-end="1389.85">mass events and we're seeing you know</span> <span data-start="1389.85" data-end="1393.27">the values change over here so think</span> <span data-start="1393.27" data-end="1396.81">about this we're using an event to</span> <span data-start="1396.81" data-end="1400.1">create an observable to update the Dom</span> <span data-start="1400.1" data-end="1406.95">whenever the mouse moves so hopefully if</span> <span data-start="1406.95" data-end="1417.529">the slides change they will</span> <span data-start="1417.539" data-end="1419.929">are you thinking what I'm thinking I</span> <span data-start="1419.929" data-end="1423.09">mean hopefully you are we talked about</span> <span data-start="1423.09" data-end="1427.279">rxjs we talked about CSS variables and</span> <span data-start="1427.279" data-end="1430.229">we sort of had a hint of how we could</span> <span data-start="1430.229" data-end="1432.899">mix the two so what if we modeled</span> <span data-start="1432.899" data-end="1437.009">observable events as CSS variables what</span> </p>
<p><span data-start="1437.009" data-end="1439.409">I mean by this is a question that you</span> <span data-start="1439.409" data-end="1442.049">might have all asked before is what if</span> <span data-start="1442.049" data-end="1445.919">we could write JavaScript in CSS so this</span> <span data-start="1445.919" data-end="1448.169">is where functional reactive animations</span> <span data-start="1448.169" data-end="1451.379">come into play and we're gonna be doing</span> <span data-start="1451.379" data-end="1453.929">this with CSS variables and rxjs</span> <span data-start="1453.929" data-end="1456.479">observables and trust me there are</span> <span data-start="1456.479" data-end="1459.57">awesome this is not a new idea dates</span> <span data-start="1459.57" data-end="1463.71">back to 1997 in an academic paper called</span> <span data-start="1463.71" data-end="1466.229">functional reactive animations which is</span> <span data-start="1466.229" data-end="1468.72">one involving discrete changes due to</span> <span data-start="1468.72" data-end="1471.929">events such as user behaviors or even</span> <span data-start="1471.929" data-end="1474.45">other behaviors or behaviors that are</span> <span data-start="1474.45" data-end="1477.539">based on other behaviors as well an</span> <span data-start="1477.539" data-end="1479.609">important quote here is by allowing</span> <span data-start="1479.609" data-end="1482.399">programmers to express the what we can</span> <span data-start="1482.399" data-end="1484.649">hope to automate the hell react is</span> <span data-start="1484.649" data-end="1487.679">really good at doing this but we're not</span> <span data-start="1487.679" data-end="1489.33">the best at doing this with animations</span> <span data-start="1489.33" data-end="1492.45">right now because right now the way we</span> <span data-start="1492.45" data-end="1494.279">do this is we directly tell JavaScript</span> <span data-start="1494.279" data-end="1497.099">how to style each element so here's a</span> <span data-start="1497.099" data-end="1500.009">little preview of what we're going to be</span> <span data-start="1500.009" data-end="1502.889">doing so taking the last Mouse example</span> <span data-start="1502.889" data-end="1504.45">where whenever I move my mouse the</span> <span data-start="1504.45" data-end="1507.659">values are updated we can see that the</span> <span data-start="1507.659" data-end="1510.269">little Huskies head moves around and</span> <span data-start="1510.269" data-end="1512.429">follows the mouse now there's a lot of</span> <span data-start="1512.429" data-end="1513.539">moving parts here so you might think</span> <span data-start="1513.539" data-end="1516.09">there's a lot of JavaScript but in fact</span> <span data-start="1516.09" data-end="1519.299">that's all that's all we have everything</span> <span data-start="1519.299" data-end="1521.549">is being applied to the CSS which is a</span> <span data-start="1521.549" data-end="1523.47">crap-ton so we're not going to go</span> <span data-start="1523.47" data-end="1527.94">through that and as I'm waiting for the</span> <span data-start="1527.94" data-end="1531.149">slide to change actually no I'll do it</span> <span data-start="1531.149" data-end="1535.559">right here that's the wrong slide all</span> <span data-start="1535.559" data-end="1537.599">right so here's how we're going to do</span> <span data-start="1537.599" data-end="1539.159">that we're going to need to use</span> <span data-start="1539.159" data-end="1541.889">something called a subject now a subject</span> <span data-start="1541.889" data-end="1545.369">in rxjs is just something that's both an</span> <span data-start="1545.369" data-end="1548.009">observable and an observer so this</span> <span data-start="1548.009" data-end="1550.279">subject is going to observe</span> <span data-start="1550.279" data-end="1552.169">things such as whenever the mass moves</span> <span data-start="1552.169" data-end="1554.719">whenever we scroll tap swipe maybe</span> <span data-start="1554.719" data-end="1558.169">timers that we have it's going to send</span> <span data-start="1558.169" data-end="1559.94">them off as a side effect to CSS</span> <span data-start="1559.94" data-end="1562.58">variables using the techniques we</span> <span data-start="1562.58" data-end="1565.039">learned about how to apply CSS variables</span> <span data-start="1565.039" data-end="1568.45">with JavaScript and it's going to also</span> <span data-start="1568.45" data-end="1571.309">dispatch to all of our observers</span> <span data-start="1571.309" data-end="1573.71">whenever the values change of course</span> <span data-start="1573.71" data-end="1576.109">that's optional I made a really really</span> <span data-start="1576.109" data-end="1578.33">tiny library for this called our X CSS</span> <span data-start="1578.33" data-end="1580.82">and it's on NPM if you want to try it</span> <span data-start="1580.82" data-end="1583.57">and all it does is we take in</span> <span data-start="1583.57" data-end="1586.279">observables such as whenever we move the</span> <span data-start="1586.279" data-end="1590.479">mouse which of course is just from the</span> <span data-start="1590.479" data-end="1593.45">mousemove event and we stick that into</span> <span data-start="1593.45" data-end="1597.499">the RX CSS function so if you're</span> <span data-start="1597.499" data-end="1599.21">familiar with redux think of this as</span> <span data-start="1599.21" data-end="1601.969">combining reducers if you're not</span> <span data-start="1601.969" data-end="1603.619">familiar with redux you have no idea</span> <span data-start="1603.619" data-end="1605.45">what I'm talking about but basically you</span> <span data-start="1605.45" data-end="1607.7">could just stick that inside the arc CSS</span> <span data-start="1607.7" data-end="1609.859">function and then you could use these</span> <span data-start="1609.859" data-end="1613.07">values directly inside your CSS so</span> <span data-start="1613.07" data-end="1615.499">hopefully you could see how this is you</span> <span data-start="1615.499" data-end="1618.769">know very very useful where we could</span> <span data-start="1618.769" data-end="1621.769">define dynamic animations inside of our</span> </p>
<p><span data-start="1621.769" data-end="1624.889">CSS and of course it only comes down to</span> <span data-start="1624.889" data-end="1627.769">one point five six kilobytes if you're</span> <span data-start="1627.769" data-end="1630.44">already using rxjs which in some of your</span> <span data-start="1630.44" data-end="1632.869">applications you are so let's look at a</span> <span data-start="1632.869" data-end="1636.409">real quick example of how we could apply</span> <span data-start="1636.409" data-end="1638.359">this this is something that I found on</span> <span data-start="1638.359" data-end="1640.789">dribble which you know is Iceland so</span> <span data-start="1640.789" data-end="1642.139">it's fitting and it's a really cool</span> <span data-start="1642.139" data-end="1645.139">animation where whenever you scroll did</span> <span data-start="1645.139" data-end="1646.669">you see how the background image store</span> <span data-start="1646.669" data-end="1650.749">faded out and disappeared and it also</span> <span data-start="1650.749" data-end="1653.269">scaled in a little bit and also when</span> <span data-start="1653.269" data-end="1656.45">they click the horse when they drag it</span> <span data-start="1656.45" data-end="1660.139">it moves up and the text disappears so</span> <span data-start="1660.139" data-end="1662.269">think in your mind's how am I gonna do</span> <span data-start="1662.269" data-end="1664.46">this with just JavaScript probably</span> <span data-start="1664.46" data-end="1666.889">involves a lot of code a lot of event</span> <span data-start="1666.889" data-end="1669.889">listeners but turns out that we could do</span> <span data-start="1669.889" data-end="1675.169">it with using arc CSS or defining those</span> <span data-start="1675.169" data-end="1678.379">variables in JavaScript and sending them</span> <span data-start="1678.379" data-end="1682.609">to CSS variables so this is what it</span> <span data-start="1682.609" data-end="1683.57">looks like</span> <span data-start="1683.57" data-end="1685.34">and this is Harper where we are right</span> <span data-start="1685.34" data-end="1688.19">now and so as you can see a lot of</span> <span data-start="1688.19" data-end="1690.89">things are happening but not a lot of</span> </p>
<p><span data-start="1690.89" data-end="1693.17">JavaScript is happening over here all</span> <span data-start="1693.17" data-end="1696.8">I'm doing is sending to observables you</span> <span data-start="1696.8" data-end="1700.64">could see that we're doing the photo pan</span> <span data-start="1700.64" data-end="1702.71">which is whenever we move our finger on</span> <span data-start="1702.71" data-end="1707.03">the photo and we're also adding a scroll</span> <span data-start="1707.03" data-end="1709.16">event so that the background image</span> <span data-start="1709.16" data-end="1712.46">changes whenever we scroll and it's</span> <span data-start="1712.46" data-end="1714.8">gonna be dynamic and it's going to also</span> <span data-start="1714.8" data-end="1717.74">be performant I tested this ran in a</span> <span data-start="1717.74" data-end="1724.49">smooth 60 frames per second so yeah it</span> <span data-start="1724.49" data-end="1729.17">seems it's so why use CSS variables well</span> <span data-start="1729.17" data-end="1733.1">there's a there's a few reasons first of</span> <span data-start="1733.1" data-end="1734.72">all you don't get excessive Dom</span> <span data-start="1734.72" data-end="1737.9">manipulation you might be familiar with</span> <span data-start="1737.9" data-end="1740.63">if you're applying transitions to all of</span> <span data-start="1740.63" data-end="1743.96">your to all of your elements on your Dom</span> <span data-start="1743.96" data-end="1745.76">that there's gonna be a bunch of purple</span> <span data-start="1745.76" data-end="1748.25">over here thankfully with CSS variables</span> <span data-start="1748.25" data-end="1750.47">the only thing that's really being</span> <span data-start="1750.47" data-end="1752.84">manipulated is that top root element</span> <span data-start="1752.84" data-end="1754.97">over there that's what's changing and</span> <span data-start="1754.97" data-end="1756.89">there's also a bunch of really good</span> <span data-start="1756.89" data-end="1759.14">reasons such as you could debug it</span> <span data-start="1759.14" data-end="1761.66">you could change CSS variables right in</span> <span data-start="1761.66" data-end="1764.27">the debugger it doesn't care whether the</span> <span data-start="1764.27" data-end="1766.25">notes there or not and you could think</span> <span data-start="1766.25" data-end="1768.2">of a bunch of other cool uses — such as</span> <span data-start="1768.2" data-end="1770.87">theming based on selectors progressive</span> <span data-start="1770.87" data-end="1773.9">enhancement using calc and CSS variables</span> <span data-start="1773.9" data-end="1777.29">work in SVG as well so your options are</span> <span data-start="1777.29" data-end="1781.04">you know really limitless so what's next</span> <span data-start="1781.04" data-end="1784.82">with CSS variables we could now do many</span> <span data-start="1784.82" data-end="1788.36">things that that mobile app developers</span> <span data-start="1788.36" data-end="1790.88">already can do such as constraint</span> <span data-start="1790.88" data-end="1792.74">layouts which is laying things out based</span> <span data-start="1792.74" data-end="1795.14">on where other things are or saying hey</span> <span data-start="1795.14" data-end="1797.75">we need this at least 20 pixels from the</span> <span data-start="1797.75" data-end="1800.66">right and other things such as physics</span> <span data-start="1800.66" data-end="1804.98">modeling choreography making animations</span> <span data-start="1804.98" data-end="1808.81">happen together in sequence and</span> <span data-start="1808.81" data-end="1811.85">observables also play nice with canvas</span> <span data-start="1811.85" data-end="1814.37">and WebGL so what this means is that</span> <span data-start="1814.37" data-end="1817.35">when you do animations in CSS</span> <span data-start="1817.35" data-end="1818.63">you could have those same values</span> <span data-start="1818.63" data-end="1822.78">dispatched to both canvas WebGL anything</span> <span data-start="1822.78" data-end="1825.21">else that could subscribe to observables</span> <span data-start="1825.21" data-end="1827.669">which by the way there's a lot of things</span> <span data-start="1827.669" data-end="1830.85">it's just JavaScript so this all</span> <span data-start="1830.85" data-end="1834.12">happened based on me asking what if I'm</span> <span data-start="1834.12" data-end="1836.49">not telling you to do this I'm telling</span> <span data-start="1836.49" data-end="1838.71">you that this is just you know something</span> <span data-start="1838.71" data-end="1841.32">that you could think about in something</span> <span data-start="1841.32" data-end="1842.76">that you could experiment with because</span> <span data-start="1842.76" data-end="1845.61">we all like experimenting and that's you</span> <span data-start="1845.61" data-end="1847.32">know one of the great reasons that you</span> <span data-start="1847.32" data-end="1850.14">know we do what we do so thank you James</span> <span data-start="1850.14" data-end="1852.57">pump Iceland it's all the time I have</span> <span data-start="1852.57" data-end="1856.08">and I'm David Cay piano on everywhere if</span> </p>
</section>