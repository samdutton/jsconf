<section>
<p><span data-start="9.41" data-end="11.73">we're terrible at secrets at Mozilla so</span> <span data-start="11.73" data-end="13.049">I think it's known what we're talking</span> <span data-start="13.049" data-end="14.309">about it like it's been in github for a</span> <span data-start="14.309" data-end="18.81">while and there are links here and we</span> <span data-start="18.81" data-end="21.779">have an IRC channel mailing list so I'm</span> <span data-start="21.779" data-end="23.91">talking about spider node v8 monkey and</span> <span data-start="23.91" data-end="29.4">you what the POW is polish Anna sees</span> <span data-start="29.4" data-end="32.82">here I'll be helping with a QA he and</span> <span data-start="32.82" data-end="35.94">rob Arnold and Chong Wilshire decided to</span> <span data-start="35.94" data-end="40.41">do this crazy I'd thing of how you can</span> <span data-start="40.41" data-end="43.53">read that put the v8 API around spider</span> <span data-start="43.53" data-end="46.8">monkey and put it in node soviet monkey</span> <span data-start="46.8" data-end="50.57">is the v8 api for spider monkey and</span> <span data-start="50.57" data-end="54.48">spider node is a clone of node that uses</span> <span data-start="54.48" data-end="60.27">v8 monkey instead of v8 and it works but</span> <span data-start="60.27" data-end="63.03">why would you want to do this well we we</span> <span data-start="63.03" data-end="67.02">love v8 it's awesome it's really good</span> <span data-start="67.02" data-end="69.869">work and it keeps getting better and we</span> <span data-start="69.869" data-end="71.67">also like the other open source engine</span> <span data-start="71.67" data-end="74.97">of note webkinz javascriptcore the</span> <span data-start="74.97" data-end="76.229">clothes or sentence we don't know about</span> <span data-start="76.229" data-end="78.93">them spider monkey is very own it's</span> <span data-start="78.93" data-end="80.909">something that i wrote as a second</span> <span data-start="80.909" data-end="84.21">engine at Netscape when I was supposed</span> <span data-start="84.21" data-end="85.439">to be helping out with standardized yes</span> <span data-start="85.439" data-end="86.82">one actually took time to do this and</span> <span data-start="86.82" data-end="89.009">got in trouble with my bosses but the</span> <span data-start="89.009" data-end="90.39">first engine i did was such a rush that</span> <span data-start="90.39" data-end="92.67">it needed rewritten so spider monkeys</span> <span data-start="92.67" data-end="95.25">very old and as one of the Heather said</span> <span data-start="95.25" data-end="96.75">my after life is so boring because we've</span> <span data-start="96.75" data-end="98.369">really been through a lot and we've</span> <span data-start="98.369" data-end="100.35">written it incrementally it's even now</span> <span data-start="100.35" data-end="103.14">getting a new GC a new intermediate</span> <span data-start="103.14" data-end="105.509">representation SS a super optimizing</span> <span data-start="105.509" data-end="108.21">profiling just in time infrastructure</span> <span data-start="108.21" data-end="110.7">called ion monkey and type inference</span> <span data-start="110.7" data-end="112.53">which is going to be awesome um Brian</span> </p>
<p><span data-start="112.53" data-end="114.03">Hackett's doing that one already it</span> <span data-start="114.03" data-end="119.82">might ship soon we we love v8 C++ API</span> <span data-start="119.82" data-end="122.159">spider monkey so will it will see so the</span> <span data-start="122.159" data-end="124.259">API is sea spider mark is used in the</span> <span data-start="124.259" data-end="125.85">Bloomberg terminal there's 16 million</span> <span data-start="125.85" data-end="128.34">lines of JavaScript there it's not going</span> <span data-start="128.34" data-end="130.679">away it has its own API but the VA API</span> <span data-start="130.679" data-end="133.54">is nice and clean c++ with</span> <span data-start="133.54" data-end="135.659">just the good parts all you need for</span> <span data-start="135.659" data-end="139.12">safety like templates and stories class</span> <span data-start="139.12" data-end="140.95">auto constructors and destructors stuff</span> <span data-start="140.95" data-end="143.65">like that garbage collection all the way</span> <span data-start="143.65" data-end="146.469">tube to nuts the jobs of language is</span> <span data-start="146.469" data-end="148.12">evolving how many people were at j s</span> <span data-start="148.12" data-end="151.239">conf okay you're going to see some</span> <span data-start="151.239" data-end="153.4">slides but i'll go fast for those of you</span> <span data-start="153.4" data-end="155.829">who weren't the slides that i'll show</span> <span data-start="155.829" data-end="158.29">thats will be of interest harmony is</span> <span data-start="158.29" data-end="160.659">coming to es next and it's it's means</span> <span data-start="160.659" data-end="162.609">that there's going to be supporting v8</span> <span data-start="162.609" data-end="166.03">at some point and we're not doing v8</span> <span data-start="166.03" data-end="167.739">monkey to try to sell you something we</span> <span data-start="167.739" data-end="169.9">are doing it to get the vapi up and do</span> <span data-start="169.9" data-end="171.22">some experiments and if you want to use</span> <span data-start="171.22" data-end="174.069">it great we we welcome people we're not</span> <span data-start="174.069" data-end="175.45">trying to fork the no community we're</span> <span data-start="175.45" data-end="178">not trying to compete with v8 I mean</span> <span data-start="178" data-end="179.109">they have an awesome garbage collector</span> <span data-start="179.109" data-end="182.349">we're not ready to do that yet so you</span> <span data-start="182.349" data-end="184.09">notice a great test bet it's outside the</span> <span data-start="184.09" data-end="185.859">browser you can you can rev it quickly</span> <span data-start="185.859" data-end="187.269">you can use new features without</span> <span data-start="187.269" data-end="189.639">worrying about ie6 this is why we're</span> <span data-start="189.639" data-end="192.159">doing this here's the es next stuff that</span> </p>
<p><span data-start="192.159" data-end="193.389">I showed at James Caan gonna go really</span> <span data-start="193.389" data-end="197.579">fast you've seen all this it's awesome</span> <span data-start="197.579" data-end="199.989">some of it is supported with this tracer</span> <span data-start="199.989" data-end="202.299">compiler that google announced and there</span> <span data-start="202.299" data-end="203.65">are other such things out there</span> <span data-start="203.65" data-end="206.53">transpiler 'he's having it supported in</span> <span data-start="206.53" data-end="207.639">your engine is even better because it's</span> <span data-start="207.639" data-end="209.29">fast and you have to run a compiler or</span> <span data-start="209.29" data-end="213.01">transpiler some of the stuff here makes</span> <span data-start="213.01" data-end="214.479">arguments go away like the rest and</span> <span data-start="214.479" data-end="217.03">spread proxies and weak maps are great</span> <span data-start="217.03" data-end="219.51">for doing runtimes and bridges and</span> <span data-start="219.51" data-end="224.849">mirrors and Dom's node lists modules are</span> <span data-start="224.849" data-end="228.639">very much aligned I would say with</span> <span data-start="228.639" data-end="230.169">common jas but built into the language</span> <span data-start="230.169" data-end="232.09">so that the compiler knows what to</span> <span data-start="232.09" data-end="236.019">prefetch iterators and generators syntax</span> <span data-start="236.019" data-end="239.939">being discussed still pretty pythonic</span> <span data-start="239.939" data-end="242.079">comprehensions got to have them also</span> <span data-start="242.079" data-end="245.169">generate expressions and then binary</span> <span data-start="245.169" data-end="246.489">data this might be of interest because</span> <span data-start="246.489" data-end="248.049">we're trying to embrace and extend the</span> </p>
<p><span data-start="248.049" data-end="250.449">WebGL typed arrays which are similar</span> <span data-start="250.449" data-end="253.03">quite close to the node buffer built in</span> <span data-start="253.03" data-end="255.159">and we think that this will be a really</span> <span data-start="255.159" data-end="256.299">bright future because you can finally</span> <span data-start="256.299" data-end="259.09">have sort of see like structs written in</span> <span data-start="259.09" data-end="259.87">a</span> <span data-start="259.87" data-end="262.849">almost declarative way generative types</span> <span data-start="262.849" data-end="264.47">that you can then use to look at binary</span> <span data-start="264.47" data-end="266.78">data you can have array of structs</span> <span data-start="266.78" data-end="269.629">trucks containing array members you can</span> <span data-start="269.629" data-end="271.97">nest them either way all the way down so</span> <span data-start="271.97" data-end="274.789">that's that's pretty awesome it's doing</span> <span data-start="274.789" data-end="277.639">great with WebGL you need a way to get</span> <span data-start="277.639" data-end="279.8">string encoded strings in and out of</span> <span data-start="279.8" data-end="282.05">this binary world and we're going to</span> <span data-start="282.05" data-end="283.22">make sure that's part of the new</span> <span data-start="283.22" data-end="285.11">standard for binary data this is comin</span> <span data-start="285.11" data-end="287.33">nes next here's something that's not I</span> <span data-start="287.33" data-end="288.65">show this is jazz comp I just want to</span> <span data-start="288.65" data-end="290.87">share my thoughts I would like to get</span> <span data-start="290.87" data-end="292.58">better function syntax in I know Alex</span> </p>
<p><span data-start="292.58" data-end="294.979">Russell mothers would too it's hard to</span> <span data-start="294.979" data-end="296.419">decide what that better syntax is and</span> <span data-start="296.419" data-end="297.74">exactly how it works it's hard for</span> <span data-start="297.74" data-end="299.09">committee degree on this it's hard for a</span> <span data-start="299.09" data-end="301.27">bunch of users to agree on it I'm</span> <span data-start="301.27" data-end="303.62">getting old i'm getting tired i think if</span> <span data-start="303.62" data-end="305.12">coffeescript has awesome syntax let's</span> <span data-start="305.12" data-end="306.71">just do that as much as we can now it's</span> <span data-start="306.71" data-end="307.759">a different language you have to be</span> <span data-start="307.759" data-end="309.44">careful with grammar but I think we can</span> <span data-start="309.44" data-end="311.36">do it and this is what I propose and I'm</span> <span data-start="311.36" data-end="313.099">going to propose us at the tc39 meeting</span> <span data-start="313.099" data-end="317.15">in three weeks including fat arrows so</span> <span data-start="317.15" data-end="319.37">you know what this you get and binding</span> <span data-start="319.37" data-end="322.729">forms that get hoisted to the block and</span> <span data-start="322.729" data-end="324.53">then you know maybe we'll get classes</span> <span data-start="324.53" data-end="327.469">that are prototypal in maybe not doing</span> <span data-start="327.469" data-end="328.789">your own prototypal inheritance is error</span> <span data-start="328.789" data-end="331.49">prone and tedious why not I don't know</span> <span data-start="331.49" data-end="332.96">there's it's hard to agree people want</span> <span data-start="332.96" data-end="334.789">classes to mean something else that's</span> <span data-start="334.789" data-end="336.56">part of the problem for entry syntax</span> <span data-start="336.56" data-end="337.819">another thing I'm championing we want to</span> <span data-start="337.819" data-end="341.84">lighten the C bracket load it's a</span> <span data-start="341.84" data-end="343.55">relaxation of the rules except for four</span> <span data-start="343.55" data-end="345.44">in where it reforms it bunch of</span> <span data-start="345.44" data-end="346.61">operators you'll recognize some of these</span> <span data-start="346.61" data-end="349.37">from coffee or C sharp default operator</span> </p>
<p><span data-start="349.37" data-end="351.77">Crockfords championed assignment form of</span> <span data-start="351.77" data-end="355.46">that integer div Maud Dib mod and coffee</span> <span data-start="355.46" data-end="357.44">like a gal operators to see if something</span> <span data-start="357.44" data-end="360.05">is exactly the same as something else is</span> <span data-start="360.05" data-end="361.969">distinguishable for something else so</span> <span data-start="361.969" data-end="365.99">you know negative zero isn't zero so</span> <span data-start="365.99" data-end="369.319">here's here's a demo of V a monkey and</span> <span data-start="369.319" data-end="372.62">spider no this shows a library Dave</span> </p>
<p><span data-start="372.62" data-end="374.3">Herman real called task j s which is</span> <span data-start="374.3" data-end="376.009">based on generators which are in yes</span> <span data-start="376.009" data-end="378.71">next in harmony this allows you to avoid</span> <span data-start="378.71" data-end="382.159">function nests and the setup is kind of</span> <span data-start="382.159" data-end="384.74">some boilerplate and then a little</span> <span data-start="384.74" data-end="386.719">constructor pattern node read file and</span> <span data-start="386.719" data-end="388.88">you have to look closely at these</span> <span data-start="388.88" data-end="390.71">keyword names the reserved word name</span> <span data-start="390.71" data-end="392.539">methods throw in return that's legal in</span> <span data-start="392.539" data-end="393.71">es5 it supported our</span> <span data-start="393.71" data-end="395.21">ready in Firefox and other browsers</span> <span data-start="395.21" data-end="398.12">working v8 what is this white object</span> <span data-start="398.12" data-end="400.16">well it's it's the this that was</span> <span data-start="400.16" data-end="401.51">constructed by new but it has a</span> <span data-start="401.51" data-end="403.1">prototype where we inherit those methods</span> <span data-start="403.1" data-end="404.27">from and that prototype is set on the</span> <span data-start="404.27" data-end="406.1">first line here and that is new task</span> <span data-start="406.1" data-end="407.48">wait and that's part of Dave Herman's</span> <span data-start="407.48" data-end="410.27">task library and a white object is kind</span> <span data-start="410.27" data-end="413">of a synchronizing device that you use</span> <span data-start="413" data-end="415.43">with yield in generator functions and</span> <span data-start="415.43" data-end="417.83">their you use TAF spawn you pass a</span> <span data-start="417.83" data-end="420.23">function it yields read file and on the</span> <span data-start="420.23" data-end="421.88">very next line no need for a call back</span> <span data-start="421.88" data-end="424.52">you can use that data you can get the</span> <span data-start="424.52" data-end="425.69">results out of it and put it on the</span> <span data-start="425.69" data-end="427.91">console you have to remember to yield if</span> <span data-start="427.91" data-end="431.18">you don't doesn't work but the price of</span> <span data-start="431.18" data-end="433.67">that yield is low compared to the price</span> <span data-start="433.67" data-end="434.93">of all those function s you would have</span> <span data-start="434.93" data-end="436.94">to write otherwise and so let me see if</span> </p>
<p><span data-start="436.94" data-end="443.33">I can demo this so here is Jen chieh s</span> <span data-start="443.33" data-end="446.48">and if I just feed it to note it's going</span> <span data-start="446.48" data-end="448.88">to spew itself back as you can see it</span> <span data-start="448.88" data-end="454.73">reads gender jas works and back to the</span> <span data-start="454.73" data-end="458.33">presentation another demo this is</span> <span data-start="458.33" data-end="461.66">another great demo that Rob Arnold just</span> <span data-start="461.66" data-end="463.73">threw together this is even shorter so</span> <span data-start="463.73" data-end="466.22">this shows how you can use this test</span> <span data-start="466.22" data-end="469.97">library and yield to write a loop that</span> <span data-start="469.97" data-end="472.28">you can run as a server and there it is</span> </p>
<p><span data-start="472.28" data-end="478.11">I'm going to demo it have to start it</span> <span data-start="478.12" data-end="481.64">it's going to be a hello world demo it's</span> <span data-start="481.64" data-end="485.5">running at that port go back there it is</span> <span data-start="485.5" data-end="488.51">reload reload reload reload reload</span> <span data-start="488.51" data-end="495.68">reload reload and no function nests the</span> <span data-start="495.68" data-end="498.41">yield seems to give back results which</span> <span data-start="498.41" data-end="502.43">you can use right away the magic here is</span> <span data-start="502.43" data-end="505.88">all in the task GS library far from</span> <span data-start="505.88" data-end="507.5">writing writing yield so I think this is</span> <span data-start="507.5" data-end="509.18">a win people complain about function</span> <span data-start="509.18" data-end="510.92">nests javascript function allah</span> <span data-start="510.92" data-end="512.6">functions are awesome but sometimes you</span> <span data-start="512.6" data-end="513.74">don't want to keep indenting and</span> <span data-start="513.74" data-end="517.73">wrapping and bracing so we're going to</span> <span data-start="517.73" data-end="519.44">have another demo i think and some QA I</span> <span data-start="519.44" data-end="520.64">wanted to thank the guys who actually</span> <span data-start="520.64" data-end="523.73">did the work Rob Arnold forever in</span> </p>
<p><span data-start="523.73" data-end="526.1">Mozilla just lost a CMU email at</span> <span data-start="526.1" data-end="527.42">Facebook</span> <span data-start="527.42" data-end="529.43">he works at Facebook Sean wilshire and</span> <span data-start="529.43" data-end="531.35">polish annecy work at Mozilla Johnny's</span> <span data-start="531.35" data-end="532.399">fort helped us with the build stuff</span> <span data-start="532.399" data-end="534.35">andreas calls my partner in crime and a</span> <span data-start="534.35" data-end="536.45">lot of stuff and he's helped too we have</span> <span data-start="536.45" data-end="538.19">an IRC channel pound spider know we have</span> <span data-start="538.19" data-end="539.93">spider note at mozilla org mail and</span> <span data-start="539.93" data-end="542.66">subscribe protocol and more demos and</span> <span data-start="542.66" data-end="544.73">questions there should be a node chat</span> <span data-start="544.73" data-end="547.01">instance running on SSID spider node</span> <span data-start="547.01" data-end="549.17">there's the IP address you guys should</span> <span data-start="549.17" data-end="552.17">try to melt it I think it's on Paul's</span> <span data-start="552.17" data-end="555.26">left no time he doesn't work restart</span> <span data-start="555.26" data-end="563">restart so uh so anyway we're happy to</span> <span data-start="563" data-end="564.74">entertain questions that's pretty much</span> <span data-start="564.74" data-end="566.149">the pitch we'd love to have people come</span> <span data-start="566.149" data-end="572.66">help us oh oh you know you want that so</span> <span data-start="572.66" data-end="575">right now we haven't d configured e4x so</span> <span data-start="575" data-end="577.61">it's there oh my god spider monkey has a</span> <span data-start="577.61" data-end="578.99">bunch of extensions right it has the</span> <span data-start="578.99" data-end="580.99">stuff that's going into harmony it has</span> <span data-start="580.99" data-end="584.209">efore x equity 357 is iso standard for</span> <span data-start="584.209" data-end="587.149">doing xml in javascript and partly</span> <span data-start="587.149" data-end="588.019">that's kind of cool because you can</span> <span data-start="588.019" data-end="589.61">write xml literals and it's nine big it</span> <span data-start="589.61" data-end="591.649">wasn't partly it's this crazy land sort</span> <span data-start="591.649" data-end="595.31">of Java like thing so yeah it's there we</span> <span data-start="595.31" data-end="596.779">can turn it off we don't advise you use</span> <span data-start="596.779" data-end="598.07">it again this is totally experimental</span> <span data-start="598.07" data-end="600.62">you opt-in we're not trying to do</span> <span data-start="600.62" data-end="602.69">anything crazy like Mickey for X a</span> <span data-start="602.69" data-end="608.79">standard and node</span> <span data-start="608.8" data-end="615.55">and</span> <span data-start="615.56" data-end="617.75">so that's a good question we don't know</span> <span data-start="617.75" data-end="619.1">yet because we haven't got it up enough</span> <span data-start="619.1" data-end="621.35">and we're still in you know debugging it</span> </p>
<p><span data-start="621.35" data-end="625.7">I hope the chat demo will work the</span> <span data-start="625.7" data-end="629.15">question is where will spider node v8</span> <span data-start="629.15" data-end="632.3">monkey beat v8 in node and I don't know</span> <span data-start="632.3" data-end="634.22">and we're not really trying to beat v8 I</span> <span data-start="634.22" data-end="636.8">think competition is good we can if you</span> <span data-start="636.8" data-end="638.24">look at certain benchmarks today like</span> <span data-start="638.24" data-end="640.31">certain Kraken benchmarks I think even</span> <span data-start="640.31" data-end="641.72">with crankshaft if you look at our</span> <span data-start="641.72" data-end="646.04">latest you know type inference jager</span> <span data-start="646.04" data-end="647.93">monkey whatever it is I on monkey stuff</span> <span data-start="647.93" data-end="651.2">were competitive with v8 and we have a</span> <span data-start="651.2" data-end="654.35">non generational GC which sucks for when</span> <span data-start="654.35" data-end="656.24">you're allocating a lot of objects live</span> <span data-start="656.24" data-end="658.07">a short time so we're moving at</span> <span data-start="658.07" data-end="660.47">generational but ironically for certain</span> <span data-start="660.47" data-end="662.54">other workloads r GC actually is better</span> <span data-start="662.54" data-end="664.94">than than v8's it all depends on the</span> <span data-start="664.94" data-end="666.5">workload that's the great story about</span> <span data-start="666.5" data-end="668.15">javascript is there's so many workloads</span> <span data-start="668.15" data-end="670.91">and the browser vendors have been tuning</span> <span data-start="670.91" data-end="672.68">for SunSpider for way too long and you</span> <span data-start="672.68" data-end="675.05">know tuning for the v8 benchmark isn't a</span> <span data-start="675.05" data-end="676.25">whole lot better we don't even say you</span> <span data-start="676.25" data-end="677.96">should tune for Kraken which is mozillas</span> <span data-start="677.96" data-end="680.45">collection of advanced sort of numerical</span> <span data-start="680.45" data-end="682.79">or combinatorially intensive graphics</span> <span data-start="682.79" data-end="684.32">kernels we're just trying to get</span> <span data-start="684.32" data-end="685.94">different workloads and see how we do</span> <span data-start="685.94" data-end="687.95">and there's tons more on the web there's</span> </p>
<p><span data-start="687.95" data-end="692.15">Emscripten which is Alonso Kai's lvm C++</span> <span data-start="692.15" data-end="694.01">to JavaScript compiler there's just a</span> <span data-start="694.01" data-end="695.21">lot of stuff out there to measure and</span> <span data-start="695.21" data-end="697.19">optimize for you think we should all be</span> <span data-start="697.19" data-end="698.66">able to optimize for like a</span> <span data-start="698.66" data-end="700.46">representative gmail workload I don't</span> <span data-start="700.46" data-end="702.17">know of that benchmark I don't know how</span> <span data-start="702.17" data-end="704.96">that's done so be it's awesome and we're</span> <span data-start="704.96" data-end="706.91">we're interested in being as fast or</span> <span data-start="706.91" data-end="709.339">faster the other thing we have already</span> <span data-start="709.339" data-end="711.92">the viet hasn't got yet are these equi</span> <span data-start="711.92" data-end="713.36">extensions these extensions that are</span> <span data-start="713.36" data-end="715.04">proposed for harmony some of them are</span> <span data-start="715.04" data-end="717.5">not harmonious e4x is a sort of a dead</span> <span data-start="717.5" data-end="719.48">limb in the evolution of the ACMA</span> <span data-start="719.48" data-end="721.79">JavaScript standards but others like</span> <span data-start="721.79" data-end="724.07">generators are already there in spider</span> <span data-start="724.07" data-end="725.42">monkey now therefore they're in v8</span> <span data-start="725.42" data-end="727.28">monkey and i just showed them that works</span> <span data-start="727.28" data-end="730.76">no trans pilot required no compiler no</span> <span data-start="730.76" data-end="732.38">continuation passing style conversion</span> <span data-start="732.38" data-end="735.62">required that's a reason to use to use</span> <span data-start="735.62" data-end="737.39">v8 monkey now if you want to try it but</span> <span data-start="737.39" data-end="738.32">again we're not selling you anything</span> <span data-start="738.32" data-end="740.15">we're just doing some experiments to try</span> <span data-start="740.15" data-end="743.33">to improve our API see how life is a</span> <span data-start="743.33" data-end="745.49">node and see if this stuff we're</span> <span data-start="745.49" data-end="746.66">proposing for harmony actually makes</span> <span data-start="746.66" data-end="747.45">sense and how</span> <span data-start="747.45" data-end="749.4">reduce function nests and improve</span> <span data-start="749.4" data-end="757.05">usability they will never be threading</span> <span data-start="757.05" data-end="765.19">in JavaScript with shared readable state</span> <span data-start="765.2" data-end="768.12">yeah so the question is debugging we</span> <span data-start="768.12" data-end="769.35">have a bunch of Awesome debugging work</span> <span data-start="769.35" data-end="770.49">that's coming along you can see some of</span> <span data-start="770.49" data-end="772.68">it in Firefox is nightly builds Jim</span> </p>
<p><span data-start="772.68" data-end="774.33">Blandy who's based in Portland is doing</span> <span data-start="774.33" data-end="776.73">this awesome new debug interface which</span> <span data-start="776.73" data-end="779.04">is in the JavaScript language a debug</span> <span data-start="779.04" data-end="780.57">object you can use you can write your</span> <span data-start="780.57" data-end="783.06">debuggers in javascript in HTML and</span> <span data-start="783.06" data-end="784.68">we're doing that dave camp also based</span> <span data-start="784.68" data-end="786.03">here is working on the UI for that it's</span> <span data-start="786.03" data-end="788.94">a remote debugger should work in node we</span> <span data-start="788.94" data-end="790.23">have all sorts of features in mind</span> <span data-start="790.23" data-end="792.06">memory profiling is hot we're working on</span> <span data-start="792.06" data-end="794.16">that too it's a hard problem some extent</span> <span data-start="794.16" data-end="795.45">chrome has an advantage that they can</span> <span data-start="795.45" data-end="797.58">have up to 20 or so rendering processes</span> <span data-start="797.58" data-end="798.99">they can exit them if they start leaking</span> <span data-start="798.99" data-end="802.17">and WebKit is not you know immune to</span> <span data-start="802.17" data-end="805.62">leaks but until we get our process story</span> <span data-start="805.62" data-end="806.97">done which is going to take a few more</span> <span data-start="806.97" data-end="809.4">of our fast release cycles we really do</span> <span data-start="809.4" data-end="810.87">need to dig into memory profiling and</span> <span data-start="810.87" data-end="812.1">we're doing it we're trying to say where</span> <span data-start="812.1" data-end="813.15">all your memories going and who's to</span> <span data-start="813.15" data-end="815.37">blame we're trying to identify add-ons</span> <span data-start="815.37" data-end="817.65">and web pages even though we don't have</span> <span data-start="817.65" data-end="819.99">process isolation we don't just want to</span> <span data-start="819.99" data-end="823.71">blame we want to fix so yeah debugging</span> <span data-start="823.71" data-end="825.3">tools are a big investment for us right</span> <span data-start="825.3" data-end="827.16">now and it should translate directly to</span> <span data-start="827.16" data-end="830.37">note how important do you think is a</span> <span data-start="830.37" data-end="832.5">binary object passing for workers</span> <span data-start="832.5" data-end="834.12">especially on the server because</span> <span data-start="834.12" data-end="836.04">javascript is non-threaded so you have</span> <span data-start="836.04" data-end="838.08">to have these other solutions like Jason</span> <span data-start="838.08" data-end="840.48">stringify but it feels really really</span> <span data-start="840.48" data-end="843">sort of bad when you do that especially</span> <span data-start="843" data-end="844.71">when the data gets larger and the</span> <span data-start="844.71" data-end="846.36">server's who are going to deal with that</span> <span data-start="846.36" data-end="848.96">so what are your thoughts in relation to</span> <span data-start="848.96" data-end="853.29">spider note well so this is kind of two</span> <span data-start="853.29" data-end="854.76">questions one is what node wants to do</span> <span data-start="854.76" data-end="856.62">for clusters of processes that are</span> <span data-start="856.62" data-end="858.27">single threaded node servers that</span> <span data-start="858.27" data-end="862.17">communicate share nothing no mutable</span> <span data-start="862.17" data-end="865.56">state got a serialized somehow the other</span> <span data-start="865.56" data-end="867.12">thing is structured clone is coming</span> <span data-start="867.12" data-end="869.22">along in the browsers and it currently</span> <span data-start="869.22" data-end="870.42">works through serialization and</span> <span data-start="870.42" data-end="872.61">deserialization as well but with the new</span> <span data-start="872.61" data-end="876.99">es5 ability to freeze objects and other</span> <span data-start="876.99" data-end="879.87">ways of deeply freezing object graphs in</span> <span data-start="879.87" data-end="881.4">theory if you have</span> <span data-start="881.4" data-end="883.65">kind of shared address space for</span> <span data-start="883.65" data-end="885.99">multiple isolated threads you can still</span> <span data-start="885.99" data-end="887.79">pass efficiently these frozen objects</span> <span data-start="887.79" data-end="888.63">back and forth you don't need to</span> <span data-start="888.63" data-end="890.07">serialize them just pass the pointer</span> <span data-start="890.07" data-end="892.62">it's safe there's no way that they can</span> <span data-start="892.62" data-end="896.82">form a path to mutable state that's</span> <span data-start="896.82" data-end="899.61">coming in in on the client side i would</span> <span data-start="899.61" data-end="901.02">say in firefox at least something we're</span> <span data-start="901.02" data-end="902.4">looking at but i have to say the</span> <span data-start="902.4" data-end="904.77">serialization overhead is not the</span> <span data-start="904.77" data-end="906.3">bottleneck it's not on the critical path</span> <span data-start="906.3" data-end="908.25">at least not in our experience with</span> <span data-start="908.25" data-end="911.13">workers so when you when you created the</span> <span data-start="911.13" data-end="913.32">v8 api on tied on top of spider monkey</span> <span data-start="913.32" data-end="915.48">were there any you know in the</span> <span data-start="915.48" data-end="917.46">translation to the other ABI is anything</span> <span data-start="917.46" data-end="919.55">lost if you don't have to make any</span> <span data-start="919.55" data-end="922.05">learning design considerations those are</span> <span data-start="922.05" data-end="924.96">closer Mormons or otherwise translating</span> <span data-start="924.96" data-end="926.79">like wrapping job of the spider monkey</span> </p>
<p><span data-start="926.79" data-end="930.9">API into the v8 APA did you guys get</span> <span data-start="930.9" data-end="932.64">that you repeat the beginning of that</span> <span data-start="932.64" data-end="934.44">like what did you up did you have to</span> <span data-start="934.44" data-end="936.21">compromise on anything because of your</span> <span data-start="936.21" data-end="940.68">trying to shoehorn into vatapi it api</span> <span data-start="940.68" data-end="945.81">mismatch any impedance mismatches yes</span> <span data-start="945.81" data-end="954.72">but alright so one of the API impedance</span> <span data-start="954.72" data-end="956.52">mismatches we have is a v8 has an API</span> <span data-start="956.52" data-end="958.47">called set index properties to external</span> <span data-start="958.47" data-end="959.78">array that you can call on any object</span> <span data-start="959.78" data-end="963.81">that's kind of a strange API it's closer</span> <span data-start="963.81" data-end="966.24">oh sorry even closer okay soviet has</span> <span data-start="966.24" data-end="968.73">this api on object called set index</span> <span data-start="968.73" data-end="970.02">properties to external array which</span> <span data-start="970.02" data-end="971.67">sounds kind of strange and scary that</span> <span data-start="971.67" data-end="973.02">you can take any object and instantly</span> <span data-start="973.02" data-end="975.69">change all its properties and we can't</span> <span data-start="975.69" data-end="977.67">implement that in jsapi there's just no</span> <span data-start="977.67" data-end="979.98">mechanism to do that so we actually had</span> <span data-start="979.98" data-end="982.56">to rewrite all the call sites so this we</span> <span data-start="982.56" data-end="985.05">had to rewrite node buffer entirely in</span> <span data-start="985.05" data-end="986.4">order to make it work with typed arrays</span> <span data-start="986.4" data-end="988.89">because we couldn't manage this one</span> <span data-start="988.89" data-end="990.63">aspect of the API that's only a drill</span> <span data-start="990.63" data-end="992.49">down on so we have WebGL typed arrays</span> <span data-start="992.49" data-end="995.19">built in the spider monkey buffer is</span> <span data-start="995.19" data-end="997.23">close but not quite and so we had to</span> <span data-start="997.23" data-end="999.27">kind of change things a little bit but</span> <span data-start="999.27" data-end="1001.25">we'd like to talk we don't know what the</span> <span data-start="1001.25" data-end="1002.48">right answer is it could be our fault</span> <span data-start="1002.48" data-end="1004.37">but maybe there's a better buffer in the</span> <span data-start="1004.37" data-end="1006.2">future so we're looking to collaborate</span> <span data-start="1006.2" data-end="1009.74">with Ryan and everybody on that okay my</span> <span data-start="1009.74" data-end="1012.39">question is what's the memory footprint</span> <span data-start="1012.39" data-end="1015.75">an empty spider notes over when it</span> <span data-start="1015.75" data-end="1017.4">starts oh we oh we leak in memory stone</span> <span data-start="1017.4" data-end="1018.96">yeah we're still leaking memory we</span> <span data-start="1018.96" data-end="1020.25">hadn't started looking at this until</span> <span data-start="1020.25" data-end="1022.59">like last night um and we finally got</span> <span data-start="1022.59" data-end="1024.12">the logging who set up so we can track</span> <span data-start="1024.12" data-end="1027.24">this stuff so we serve some leaks but</span> <span data-start="1027.24" data-end="1029.1">we're just hurting like that now so it's</span> <span data-start="1029.1" data-end="1030.78">not great but it's getting better every</span> <span data-start="1030.78" data-end="1032.97">day how much he member you do you</span> <span data-start="1032.97" data-end="1035.94">allocate when you thought up in so so no</span> <span data-start="1035.94" data-end="1037.35">chat when it starts is running it with</span> <span data-start="1037.35" data-end="1040.079">about 11 or 12 Meg's so I don't know</span> <span data-start="1040.079" data-end="1042.329">what that runs on v8 offhand but similar</span> <span data-start="1042.329" data-end="1045.06">amazing yeah we believe in releasing</span> <span data-start="1045.06" data-end="1049.04">early and often so we're not we're not</span> <span data-start="1049.04" data-end="1051.57">bragging about any benchmarks remember</span> <span data-start="1051.57" data-end="1053.46">we profile results but we're going to</span> <span data-start="1053.46" data-end="1055.32">keep you posted can you do anything with</span> <span data-start="1055.32" data-end="1058.53">the serializing large strings out to a</span> <span data-start="1058.53" data-end="1060.87">socket so an issue in v8 is the strings</span> <span data-start="1060.87" data-end="1062.16">are starting it's really clever and</span> <span data-start="1062.16" data-end="1064.71">memory representation and you want to</span> <span data-start="1064.71" data-end="1066.84">convert them into to put them out to a</span> <span data-start="1066.84" data-end="1068.07">system call or write them out to a</span> <span data-start="1068.07" data-end="1070.47">socket but you don't have a contiguous</span> <span data-start="1070.47" data-end="1072.63">like flattened buffer labeled system</span> <span data-start="1072.63" data-end="1074.37">call tanks so this is kind of</span> <span data-start="1074.37" data-end="1077.01">problematic in the v8 world because of</span> <span data-start="1077.01" data-end="1079.26">the the clever garbage collection so is</span> <span data-start="1079.26" data-end="1081.929">there is the spider monkey API</span> <span data-start="1081.929" data-end="1084.419">offer an easier way to get those out</span> <span data-start="1084.419" data-end="1085.44">because that could actually be a pretty</span> <span data-start="1085.44" data-end="1088.529">big win the question was about strings</span> <span data-start="1088.529" data-end="1091.049">and do we have a better way to get flat</span> <span data-start="1091.049" data-end="1093.48">strings out the system calls without too</span> <span data-start="1093.48" data-end="1095.669">much overhead again I'm not going to</span> <span data-start="1095.669" data-end="1097.59">brag I think we do all the engines have</span> <span data-start="1097.59" data-end="1099.419">tuned their maximum stirring life to</span> <span data-start="1099.419" data-end="1103.97">about the same to the 28 I think limit</span> <span data-start="1103.97" data-end="1110.49">which is you know a lot 256 megs but all</span> <span data-start="1110.49" data-end="1111.99">of them because of SunSpider are doing</span> <span data-start="1111.99" data-end="1114.45">these stupid you know you have nation</span> <span data-start="1114.45" data-end="1116.7">trees or dependent string tricks to make</span> <span data-start="1116.7" data-end="1118.649">a stupid loop that goes plus equal on a</span> <span data-start="1118.649" data-end="1120.809">string and grows it by powers of two</span> <span data-start="1120.809" data-end="1123.539">really fast that doesn't really happen a</span> <span data-start="1123.539" data-end="1126.149">lot in real code but when you get these</span> <span data-start="1126.149" data-end="1129.779">big dependent string trees or ropes as</span> <span data-start="1129.779" data-end="1131.94">we call them and I think v8 and all the</span> <span data-start="1131.94" data-end="1134.249">others have similar things then it can</span> <span data-start="1134.249" data-end="1136.23">be expensive to go flatten that out and</span> <span data-start="1136.23" data-end="1137.94">depending on your garbage collector</span> <span data-start="1137.94" data-end="1139.799">there can be stricter limits on how big</span> </p>
<p><span data-start="1139.799" data-end="1141.539">I don't know what the issue you're</span> <span data-start="1141.539" data-end="1143.19">talking about is with v8 so I can't</span> <span data-start="1143.19" data-end="1145.59">really compare but we we make flat</span> <span data-start="1145.59" data-end="1147.48">strings pretty eagerly and we can make</span> <span data-start="1147.48" data-end="1150.659">him up to 22 to 28 David I didn't quite</span> <span data-start="1150.659" data-end="1152.399">catch when you were jumping through all</span> <span data-start="1152.399" data-end="1154.47">the yield stuff is there some more</span> <span data-start="1154.47" data-end="1156.119">information about that can you'll be</span> <span data-start="1156.119" data-end="1158.82">used from anywhere or only from inside</span> <span data-start="1158.82" data-end="1161.039">of iterated type functions or it's</span> <span data-start="1161.039" data-end="1162.659">exactly like Python except for the</span> <span data-start="1162.659" data-end="1164.999">syntax it's and there's no generator</span> <span data-start="1164.999" data-end="1168.149">exit object you yield from a function</span> <span data-start="1168.149" data-end="1169.95">and there may be some extra syntax ahead</span> <span data-start="1169.95" data-end="1170.85">of the function that makes it a</span> <span data-start="1170.85" data-end="1172.98">generator which is a factory for</span> <span data-start="1172.98" data-end="1175.11">iterators that can be done next it or</span> <span data-start="1175.11" data-end="1178.169">not sent values so there's a separate</span> <span data-start="1178.169" data-end="1180.119">proposal from Peter helm of Google to do</span> <span data-start="1180.119" data-end="1182.669">in a weight that works at any level I</span> <span data-start="1182.669" data-end="1184.139">think it's certainly a top level that's</span> <span data-start="1184.139" data-end="1185.58">a different animal kind of complementary</span> <span data-start="1185.58" data-end="1188.749">okay great thanks same underlying</span> <span data-start="1188.749" data-end="1191.159">infrastructure needed for both I guess I</span> <span data-start="1191.159" data-end="1192.33">have one question which it gets you and</span> </p>
<p><span data-start="1192.33" data-end="1195.119">Bill to hear you mentioned that</span> <span data-start="1195.119" data-end="1196.499">SunSpider and other things aren't really</span> <span data-start="1196.499" data-end="1198.96">good for server workloads are you</span> <span data-start="1198.96" data-end="1201.94">working on something that is</span> <span data-start="1201.94" data-end="1204.49">you tell us you guys are doing the node</span> <span data-start="1204.49" data-end="1207.129">you know server app development we need</span> <span data-start="1207.129" data-end="1209.519">to build better benchmark suites and</span> <span data-start="1209.519" data-end="1212.289">measure all the time it's really</span> <span data-start="1212.289" data-end="1213.7">important that's why we're investing in</span> <span data-start="1213.7" data-end="1215.049">debugging tools not just memory</span> <span data-start="1215.049" data-end="1217.75">profilers but you know cycle profilers</span> <span data-start="1217.75" data-end="1220.47">for both javascript and your native code</span> <span data-start="1220.47" data-end="1223.269">you know I think shark or whatever</span> <span data-start="1223.269" data-end="1225.19">instruments is the new hotness from</span> </p>
<p><span data-start="1225.19" data-end="1226.539">Apple but we need to get into the</span> <span data-start="1226.539" data-end="1228.789">JavaScript more and we need to see where</span> <span data-start="1228.789" data-end="1231.58">the costs are so we optimize our silly</span> <span data-start="1231.58" data-end="1232.929">JavaScript engines for the real</span> <span data-start="1232.929" data-end="1234.429">workloads not for these synthetic</span> <span data-start="1234.429" data-end="1238.21">benchmarks from 1998 so help us out</span> <span data-start="1238.21" data-end="1241">start a new benchmark collection what</span> <span data-start="1241" data-end="1244.95">what the build process look like for</span> <span data-start="1244.95" data-end="1249.22">spider node is it is it as simple one of</span> <span data-start="1249.22" data-end="1250.57">the nice things about notice is just</span> <span data-start="1250.57" data-end="1253.48">basically make make install on on unix</span> <span data-start="1253.48" data-end="1256.6">platforms is that um direction you're</span> <span data-start="1256.6" data-end="1260.11">heading with spider node spider no it's</span> <span data-start="1260.11" data-end="1262.299">just a clone we're working in if we can</span> <span data-start="1262.299" data-end="1264.429">collaboratively get whatever changes we</span> <span data-start="1264.429" data-end="1266.5">need up into node will do it if we can</span> <span data-start="1266.5" data-end="1268.779">push the change burden down onto v8</span> <span data-start="1268.779" data-end="1270.46">monkey will do that first we don't want</span> <span data-start="1270.46" data-end="1274.539">to change note if we don't have to we</span> <span data-start="1274.539" data-end="1277.33">don't we're not making of work I mean</span> <span data-start="1277.33" data-end="1279.19">github is about forking right the fork</span> <span data-start="1279.19" data-end="1280.629">button it's all good don't worry it's</span> <span data-start="1280.629" data-end="1282.25">not like Jamie forking emacs on stall</span> <span data-start="1282.25" data-end="1285.669">minutes it's not a big war but but we</span> <span data-start="1285.669" data-end="1289.23">really do aspire to be an alternative</span> <span data-start="1289.23" data-end="1293.23">under the VN API in though i guess the</span> <span data-start="1293.23" data-end="1295.059">intent of my question was is spider</span> <span data-start="1295.059" data-end="1298.72">monkey becoming easier to build as far</span> <span data-start="1298.72" data-end="1301.539">as i know i've had trouble just getting</span> <span data-start="1301.539" data-end="1304.72">it to even build outside of the firefox</span> <span data-start="1304.72" data-end="1309.299">on OS 10 and stuff is that is that</span> <span data-start="1309.299" data-end="1312.82">improving a spider monkey improves I see</span> </p>
<p><span data-start="1312.82" data-end="1314.169">I didn't hear a question right and I</span> <span data-start="1314.169" data-end="1315.759">still haven't quite heard but you guys</span> <span data-start="1315.759" data-end="1317.649">handle this use like are you asking</span> <span data-start="1317.649" data-end="1319.33">about the other week uh make make</span> <span data-start="1319.33" data-end="1321.97">install in spider note well yeah like</span> <span data-start="1321.97" data-end="1324.61">how bout is it's actually compile it on</span> <span data-start="1324.61" data-end="1327.97">my own machine so our fork right now is</span> <span data-start="1327.97" data-end="1330.779">just configure and make and that's it</span> <span data-start="1330.779" data-end="1335.2">but we have made small changes like the</span> <span data-start="1335.2" data-end="1335.71">default</span> <span data-start="1335.71" data-end="1337.809">we built in flags for choosing your</span> <span data-start="1337.809" data-end="1340.69">JavaScript engine v8 or spider monkey</span> <span data-start="1340.69" data-end="1344.13">and we've changed the default for now</span> <span data-start="1344.13" data-end="1346.899">because it makes it easier for us okay</span> <span data-start="1346.899" data-end="1349.149">not not a whole bunch of configure flags</span> <span data-start="1349.149" data-end="1351.97">every time we're building but it's it's</span> <span data-start="1351.97" data-end="1358">easy I guess hey I guess maybe this</span> <span data-start="1358" data-end="1360.159">might be sort of what was being asked</span> <span data-start="1360.159" data-end="1361.69">and got getting out with these questions</span> <span data-start="1361.69" data-end="1364.72">is like is it configuring and building a</span> <span data-start="1364.72" data-end="1366.85">spider monkey in tree as well and like</span> <span data-start="1366.85" data-end="1369.64">static linking like like v8 at all or is</span> <span data-start="1369.64" data-end="1372.34">it like I have to have installed</span> <span data-start="1372.34" data-end="1376.72">developer spider motive in yeah it's</span> <span data-start="1376.72" data-end="1378.34">it's you know autocom two and three</span> <span data-start="1378.34" data-end="1383.679">configure make cool oh well well on Mac</span> </p>
<p><span data-start="1383.679" data-end="1389.83">I do thank you very much that's the end</span> </p>
</section>