<section>
<p><span data-start="15.22" data-end="17.95">thanks everybody for coming so I'm Felix</span> <span data-start="17.95" data-end="19.63">guys and over you find me on Twitter on</span> <span data-start="19.63" data-end="23.68">github as Felix GE I have a startup here</span> <span data-start="23.68" data-end="25.33">in Berlin where called transloaded we do</span> <span data-start="25.33" data-end="28.33">file uploads and video encoding we were</span> <span data-start="28.33" data-end="30.04">one of the first users of nodejs</span> <span data-start="30.04" data-end="32.14">which also meant we were one of the</span> <span data-start="32.14" data-end="34.06">first contributors of nodejs because it</span> <span data-start="34.06" data-end="35.71">was not really doing everything we</span> <span data-start="35.71" data-end="37.45">wanted but I'm not talking about this</span> </p>
<p><span data-start="37.45" data-end="39.96">I'm talking about faster than C and</span> <span data-start="39.96" data-end="42.64">before I get into it I want to apologize</span> <span data-start="42.64" data-end="44.95">sorry about the title bait we all have a</span> <span data-start="44.95" data-end="46.45">reasonable discussion about performance</span> </p>
<p><span data-start="46.45" data-end="48.22">I'm not gonna make some claims that I</span> <span data-start="48.22" data-end="49.78">cannot back up but I think we're gonna</span> <span data-start="49.78" data-end="51.67">talk about high performance JavaScript</span> <span data-start="51.67" data-end="53.53">for sure and I think the results in some</span> <span data-start="53.53" data-end="55.3">of the stuff I was doing look very cool</span> <span data-start="55.3" data-end="58.54">even so C is probably still your tool of</span> <span data-start="58.54" data-end="61.3">choice for some problem domains so I</span> <span data-start="61.3" data-end="63.43">want to make it like a battle the battle</span> <span data-start="63.43" data-end="66.88">is JavaScript versus C or good versus</span> <span data-start="66.88" data-end="67.33">evil</span> <span data-start="67.33" data-end="69.58">wait it's a good part about this evil at</span> <span data-start="69.58" data-end="73.479">least we may even need the bad parts to</span> <span data-start="73.479" data-end="74.439">win this one</span> <span data-start="74.439" data-end="79.24">and so just little backstory here my</span> <span data-start="79.24" data-end="81.25">story starts in my suffering really</span> <span data-start="81.25" data-end="84.19">starts in early 2010 because in early</span> <span data-start="84.19" data-end="87.58">2010 we had no MySQL module for no chess</span> <span data-start="87.58" data-end="89.32">it did not exist many people in the</span> <span data-start="89.32" data-end="91.12">community wanted such a thing but it</span> <span data-start="91.12" data-end="94.3">just wasn't around however what we did</span> <span data-start="94.3" data-end="97.42">have was no SQL library go figure</span> <span data-start="97.42" data-end="101.05">no SQL was first in node and that was a</span> </p>
<p><span data-start="101.05" data-end="102.99">Noah scroll people doing SQL it's crazy</span> <span data-start="102.99" data-end="106.9">but so then in early 2010 this guy came</span> <span data-start="106.9" data-end="110.83">along my Siri Tryphon github and he</span> <span data-start="110.83" data-end="113.14">actually posted a message to the mailing</span> <span data-start="113.14" data-end="114.909">list a note mailing list and fix the</span> <span data-start="114.909" data-end="116.59">problem with promises which are long</span> <span data-start="116.59" data-end="118.96">gone and then he was like by the way I</span> <span data-start="118.96" data-end="121.229">started this node my sequel module and</span> <span data-start="121.229" data-end="124.33">link to it and everybody was like wow</span> <span data-start="124.33" data-end="126.22">somebody's finally doing it so I checked</span> <span data-start="126.22" data-end="129.129">out the code and I I was really curious</span> <span data-start="129.129" data-end="130.84">on how he did to look my sequel binding</span> <span data-start="130.84" data-end="133.03">because back then it wasn't quite clear</span> <span data-start="133.03" data-end="135.28">how we would do these blocking library</span> <span data-start="135.28" data-end="137.68">integrations into no chess that's not a</span> <span data-start="137.68" data-end="139.72">solve problem but Bexon I was curious on</span> <span data-start="139.72" data-end="142.42">how it would be done and when I looked</span> <span data-start="142.42" data-end="144.13">into it I found something weird he</span> <span data-start="144.13" data-end="145.72">actually didn't buy into binding to live</span> <span data-start="145.72" data-end="148.45">my sequel he wrote a pure JavaScript my</span> </p>
<p><span data-start="148.45" data-end="148.78">C</span> <span data-start="148.78" data-end="151.66">client and so I was like wow how did he</span> <span data-start="151.66" data-end="154.54">do that and so well if he thinks this is</span> <span data-start="154.54" data-end="156.76">impressive check this one out this was</span> <span data-start="156.76" data-end="159.49">before buffers became usable so he had</span> <span data-start="159.49" data-end="161.89">no buffer support a note he basically</span> <span data-start="161.89" data-end="164.62">did his parser using javascript strings</span> <span data-start="164.62" data-end="168.49">I was like what's the this guy was</span> <span data-start="168.49" data-end="170.68">crazy apparently what he did he is also</span> <span data-start="170.68" data-end="172.45">based on prior art credit where it's due</span> <span data-start="172.45" data-end="175.69">he tooks a ruby a Ruby implementations</span> <span data-start="175.69" data-end="177.13">that had done the same thing for Ruby</span> <span data-start="177.13" data-end="179.32">and my sequel module and he pulled at</span> <span data-start="179.32" data-end="183.94">that to know chess and so unfortunately</span> <span data-start="183.94" data-end="185.59">never finished it so he get is kind of</span> <span data-start="185.59" data-end="187.33">working but then gonna stop working on</span> <span data-start="187.33" data-end="189.07">it and it went away but while we're</span> <span data-start="189.07" data-end="190.66">talking about buffers and all times a</span> <span data-start="190.66" data-end="192.63">node here's a little piece of trivia</span> <span data-start="192.63" data-end="194.53">buffers and know it used to be called</span> <span data-start="194.53" data-end="196.739">blobs raise your hand if you knew that</span> <span data-start="196.739" data-end="199.39">holy crap you guys are good because it</span> <span data-start="199.39" data-end="201.52">was not a long time that buffers where I</span> <span data-start="201.52" data-end="203.11">called blob sonoda it was three minutes</span> <span data-start="203.11" data-end="206.83">and fifteen seconds which is really a</span> <span data-start="206.83" data-end="209.02">shame because blobs to me would have</span> <span data-start="209.02" data-end="210.85">been a much better name because I'm</span> <span data-start="210.85" data-end="212.86">sometimes talking about buffering data</span> <span data-start="212.86" data-end="215.23">but I may mean like concatenating</span> <span data-start="215.23" data-end="217.15">strings or pushing stuff into an array I</span> <span data-start="217.15" data-end="219.01">don't always mean like a buffer of</span> <span data-start="219.01" data-end="221.019">binary data so it's a shame</span> <span data-start="221.019" data-end="225.13">rest in peace blobs oh well anyway back</span> <span data-start="225.13" data-end="228.13">to my sequel so what what mastery drives</span> <span data-start="228.13" data-end="230.29">library really did for me it showed me</span> <span data-start="230.29" data-end="231.82">that my sequel can be done without lip</span> <span data-start="231.82" data-end="233.47">my sequel I had not considered this</span> <span data-start="233.47" data-end="235.209">before Ryan actually had not considered</span> <span data-start="235.209" data-end="236.799">it before he was really worried that my</span> <span data-start="236.799" data-end="238.69">sequel with the deal-breaker for note</span> <span data-start="238.69" data-end="241.329">and so I really wanted to use my sequel</span> <span data-start="241.329" data-end="243.1">this margin was not continued anymore it</span> <span data-start="243.1" data-end="244.959">was based on strings we now had buffers</span> <span data-start="244.959" data-end="246.64">so it was like okay maybe I can do this</span> <span data-start="246.64" data-end="248.86">so I started this module and I wasted</span> <span data-start="248.86" data-end="250.36">too much time on it instead of building</span> <span data-start="250.36" data-end="251.829">my startup product I built this module</span> <span data-start="251.829" data-end="254.079">for like three months but then it</span> <span data-start="254.079" data-end="255.61">started working and people started using</span> <span data-start="255.61" data-end="258.7">it so that was nice right but no good</span> <span data-start="258.7" data-end="261.85">deed goes unpunished and I actually</span> <span data-start="261.85" data-end="264.04">traced this back who came up with this I</span> <span data-start="264.04" data-end="265.66">think Sir Isaac Newton make two proof</span> <span data-start="265.66" data-end="268.12">for it and he called it the third law of</span> <span data-start="268.12" data-end="271.57">motion and it kinda goes like this when</span> <span data-start="271.57" data-end="274.27">the first body excerpts a force f1 on a</span> <span data-start="274.27" data-end="275.89">second buddy the second body</span> <span data-start="275.89" data-end="277.96">simultaneously exerts the force f2</span> <span data-start="277.96" data-end="280.479">equals minus f1 on the first buddy this</span> <span data-start="280.479" data-end="282.62">means that F 1 and F 2 are equal magnet</span> <span data-start="282.62" data-end="285.71">and opposite in direction so I'm not as</span> <span data-start="285.71" data-end="287.36">clever as Isaac Newton says for sure but</span> </p>
<p><span data-start="287.36" data-end="289.699">I can imagine if he was living today</span> <span data-start="289.699" data-end="292.19">maybe some of the stuff he would do I'm</span> <span data-start="292.19" data-end="293.87">sure I'm sure he would be on github I</span> <span data-start="293.87" data-end="299.479">guess we can all agree on that and and</span> <span data-start="299.479" data-end="301.55">so I don't know maybe he would study</span> <span data-start="301.55" data-end="303.26">like the community effect and get help</span> <span data-start="303.26" data-end="304.31">maybe that would be his saying I don't</span> <span data-start="304.31" data-end="306.47">know but let's imagine he came up with</span> <span data-start="306.47" data-end="307.729">some like the third law of</span> <span data-start="307.729" data-end="310.43">github and it could go like this when a</span> <span data-start="310.43" data-end="312.59">first person pushes a library l1 into</span> <span data-start="312.59" data-end="315.38">remote repository a second person</span> <span data-start="315.38" data-end="316.91">simultaneously starts working on a</span> <span data-start="316.91" data-end="318.919">second library l2 which will be equally</span> <span data-start="318.919" data-end="321.83">awesome but in a different way so that's</span> <span data-start="321.83" data-end="326.75">why we love github right so that's what</span> <span data-start="326.75" data-end="329.539">happened but it can also hurt sometimes</span> </p>
<p><span data-start="329.539" data-end="330.62">I'll show you why</span> <span data-start="330.62" data-end="332.24">so this guy came along son Ethan on</span> <span data-start="332.24" data-end="334.34">github and he wrote a library called</span> <span data-start="334.34" data-end="336.199">node my sequel live my sequel client</span> <span data-start="336.199" data-end="337.52">which was pretty much what you would</span> <span data-start="337.52" data-end="339.38">expect it to be it's a binding to look</span> <span data-start="339.38" data-end="341.6">my sequel what he also did he did some</span> <span data-start="341.6" data-end="343.34">benchmarks and I did some benchmarks of</span> <span data-start="343.34" data-end="346.58">my own and here's a recent one and this</span> <span data-start="346.58" data-end="348.11">is what happened so on the left side is</span> <span data-start="348.11" data-end="350.09">my library and on the right side is his</span> <span data-start="350.09" data-end="352.76">library that's what you would expect</span> <span data-start="352.76" data-end="355.22">right this is JavaScript or sassy of</span> <span data-start="355.22" data-end="357.41">course let my sequel is in Britain and</span> <span data-start="357.41" data-end="359.57">see my library's JavaScript and see you</span> <span data-start="359.57" data-end="361.639">so much faster than JavaScript right so</span> <span data-start="361.639" data-end="363.7">that's what I thought for a long time</span> <span data-start="363.7" data-end="366.68">but I felt I felt wrong because I mean</span> <span data-start="366.68" data-end="368.15">haven't we getting some marketing</span> <span data-start="368.15" data-end="369.62">message v8 is supposed to be really</span> <span data-start="369.62" data-end="371.18">really fast turning our code into</span> <span data-start="371.18" data-end="373.16">assembly and then they make crankshaft</span> <span data-start="373.16" data-end="374.51">and hold us now it's gonna be even</span> <span data-start="374.51" data-end="375.77">better and it's gonna analyze what our</span> <span data-start="375.77" data-end="377.539">programs are gonna do and I mean no</span> <span data-start="377.539" data-end="379.16">chess I think it's gonna solve world</span> <span data-start="379.16" data-end="382.97">hunger and everything so was i living a</span> <span data-start="382.97" data-end="386.08">lie and I've been lied to</span> <span data-start="386.08" data-end="389.3">kind of I mean the stuff you read on the</span> <span data-start="389.3" data-end="393.02">note home page is like crazy because the</span> </p>
<p><span data-start="393.02" data-end="396.31">ADA node are our tools their tools and</span> <span data-start="396.31" data-end="399.349">performance performance is not at all if</span> <span data-start="399.349" data-end="401.15">anybody's healthy performance as a tool</span> <span data-start="401.15" data-end="403.4">that you can just download and install I</span> <span data-start="403.4" data-end="406.039">don't know it's that crazy no what</span> <span data-start="406.039" data-end="407.69">actually turns out to be I think what it</span> <span data-start="407.69" data-end="409.46">is is performance is hard work and data</span> <span data-start="409.46" data-end="411.289">analysis so if you expect this talk</span> <span data-start="411.289" data-end="413.06">being me like telling you here's one</span> <span data-start="413.06" data-end="415.34">little trick to do to do in your</span> </p>
<p><span data-start="415.34" data-end="416.39">JavaScript and now</span> <span data-start="416.39" data-end="417.89">everything's gonna be faster I have to</span> <span data-start="417.89" data-end="419.84">disappoint but I will present some stuff</span> <span data-start="419.84" data-end="421.49">that's useful I promise</span> <span data-start="421.49" data-end="424.82">so anyway I set out and I tried this new</span> <span data-start="424.82" data-end="426.65">approach that I'm gonna show you and I</span> <span data-start="426.65" data-end="428.66">continued working on my library and so</span> <span data-start="428.66" data-end="431.81">this is what happened I I beat them a</span> <span data-start="431.81" data-end="433.52">little bit maybe at least I can say I'm</span> <span data-start="433.52" data-end="436.28">as fast as with my sequel client so — so</span> <span data-start="436.28" data-end="437.66">the colors have changed but — one the</span> <span data-start="437.66" data-end="440.36">first is to the right now and as you can</span> <span data-start="440.36" data-end="442.25">see it's alpha 3 which means I'm</span> <span data-start="442.25" data-end="443.78">spending time optimizing performance</span> <span data-start="443.78" data-end="445.46">problems nobody cares about instead of</span> <span data-start="445.46" data-end="447.05">finishing so saying I mean it's working</span> <span data-start="447.05" data-end="448.76">but I want to do connection pool and</span> <span data-start="448.76" data-end="450.2">stuff but I just geeked out on this all</span> <span data-start="450.2" data-end="453.5">the time anyway so I told you about the</span> <span data-start="453.5" data-end="455.39">third laugh github and it could be</span> <span data-start="455.39" data-end="456.95">but I don't know I saw I'm</span> <span data-start="456.95" data-end="458.63">but I don't know I saw I'm starting to believe in it because after</span> </p>
<p><span data-start="458.63" data-end="460.73">I submitted my proposal it was accepted</span> <span data-start="460.73" data-end="465.26">this guy came along Brian White and he</span> <span data-start="465.26" data-end="467.21">wrote a new library called Note Maria</span> <span data-start="467.21" data-end="470.77">SQL and Maria SQL is a fork of MySQL and</span> <span data-start="470.77" data-end="473">they're continuing zuv development it's</span> <span data-start="473" data-end="475.88">actually won us a you see original MySQL</span> <span data-start="475.88" data-end="478.46">guy and they also continue to improve</span> <span data-start="478.46" data-end="480.44">the client so the Maria SQL client is</span> <span data-start="480.44" data-end="481.34">actually non-blocking</span> <span data-start="481.34" data-end="482.84">so it fits much better with what notice</span> <span data-start="482.84" data-end="485.69">doing not only that this guy Brian white</span> <span data-start="485.69" data-end="488.06">he's really smart so he knows how to do</span> </p>
<p><span data-start="488.06" data-end="489.68">C's findings much better and these two</span> <span data-start="489.68" data-end="494.96">things combined led to this add stuff</span> <span data-start="494.96" data-end="498.59">stuff here I was thinking I was present</span> <span data-start="498.59" data-end="500.54">like the fastest my sequel library on</span> <span data-start="500.54" data-end="502.12">earth written in JavaScript it's not</span> <span data-start="502.12" data-end="504.95">probably not gonna happen so is this the</span> <span data-start="504.95" data-end="516.1">time to give up should I give up never</span> <span data-start="516.11" data-end="519.03">so I'm working on this new partner and</span> <span data-start="519.03" data-end="520.59">this is undone it's not finished</span> <span data-start="520.59" data-end="522.39">and you shouldn't listen to it but it's</span> <span data-start="522.39" data-end="524.16">interesting because once again this is</span> <span data-start="524.16" data-end="525.66">my old library against my new library</span> <span data-start="525.66" data-end="528.15">it's a new parser it's not integrated as</span> <span data-start="528.15" data-end="529.17">a module or anything yet it's just</span> <span data-start="529.17" data-end="531.27">running a very limited benchmark but it</span> <span data-start="531.27" data-end="533.37">seems like I can get a 2x performance</span> <span data-start="533.37" data-end="535.79">increase or almost 2x and so I have</span> <span data-start="535.79" data-end="539.25">reasonable hopes that I can at least get</span> <span data-start="539.25" data-end="542.4">on speed parity with summary SQL marshal</span> <span data-start="542.4" data-end="544.97">if I find the time to finish this up but</span> <span data-start="544.97" data-end="547.5">should I do it because wouldn't the cert</span> <span data-start="547.5" data-end="549.51">love github kick in and somebody just</span> <span data-start="549.51" data-end="551.46">comes along and does a faster one I mean</span> <span data-start="551.46" data-end="552.78">what's the point</span> <span data-start="552.78" data-end="554.43">so actually I think I should do it</span> <span data-start="554.43" data-end="555.78">because I think we're we're getting</span> <span data-start="555.78" data-end="558.03">close to the end game and because the</span> <span data-start="558.03" data-end="559.35">end game here is that we're gonna run</span> <span data-start="559.35" data-end="561.18">into one last bottleneck and that's just</span> <span data-start="561.18" data-end="563.1">creating the JavaScript objects we're</span> <span data-start="563.1" data-end="565.08">gonna be able in JavaScript now or we</span> <span data-start="565.08" data-end="567.06">are already able on JavaScript to parse</span> <span data-start="567.06" data-end="568.38">these protocols really really quickly</span> <span data-start="568.38" data-end="571.86">but supposed to see libraries or to see</span> <span data-start="571.86" data-end="574.17">bindings and my code has to do the same</span> <span data-start="574.17" data-end="576.03">thing it has to ask v8 to create a new</span> </p>
<p><span data-start="576.03" data-end="577.98">JavaScript object like a row and to give</span> <span data-start="577.98" data-end="579.72">it column values and if I want to use</span> <span data-start="579.72" data-end="581.28">the library set bind or sets available</span> <span data-start="581.28" data-end="582.9">in JavaScript those performance</span> <span data-start="582.9" data-end="584.43">penalties probably going to be the same</span> <span data-start="584.43" data-end="587.31">for me in JavaScript and C++ people so I</span> <span data-start="587.31" data-end="589.2">think we will just end up at a very fast</span> <span data-start="589.2" data-end="591.24">speed where only the eight can make</span> <span data-start="591.24" data-end="593.85">things go faster but we will all get</span> <span data-start="593.85" data-end="597.45">faster C bindings and my module also we</span> <span data-start="597.45" data-end="599.34">already won because my sequel server is</span> <span data-start="599.34" data-end="601.83">already saturated I don't know unless</span> <span data-start="601.83" data-end="603.75">you're serving data from memory and you</span> <span data-start="603.75" data-end="606.78">have really good hardware setup I think</span> <span data-start="606.78" data-end="609.42">a single MySQL client either C bindings</span> <span data-start="609.42" data-end="612.36">also Java Script can fully saturate and</span> <span data-start="612.36" data-end="614.31">my sequel server using one processor on</span> <span data-start="614.31" data-end="616.02">a client so this stuff is getting fast</span> <span data-start="616.02" data-end="620.88">enough so anyway it was kind of cool but</span> <span data-start="620.88" data-end="622.29">what's even cooler is that I found out</span> <span data-start="622.29" data-end="624.6">some stuff on on how to do this stuff so</span> </p>
<p><span data-start="624.6" data-end="626.61">I studied a lot about how to write fast</span> <span data-start="626.61" data-end="628.23">JavaScript and I found out a few things</span> <span data-start="628.23" data-end="630.21">that don't work or at least not for me</span> <span data-start="630.21" data-end="633.09">for my problems one thing unfortunately</span> <span data-start="633.09" data-end="636.06">profiling profiling is cool the v8</span> <span data-start="636.06" data-end="638.19">profiler it can do good things for you</span> <span data-start="638.19" data-end="640.35">but I found that profiling is mostly</span> <span data-start="640.35" data-end="642.18">good for spotting small functions with</span> <span data-start="642.18" data-end="643.8">stupid algorithms performing many</span> <span data-start="643.8" data-end="645.48">iterations so that's the kind of stuff</span> <span data-start="645.48" data-end="647.37">where the profiler will be like hey yes</span> <span data-start="647.37" data-end="648.69">this function and you</span> <span data-start="648.69" data-end="650.16">and all your time in there and then you</span> <span data-start="650.16" data-end="651.66">go you look at that function you fix</span> <span data-start="651.66" data-end="654.3">that function is really nice but if you</span> <span data-start="654.3" data-end="656.43">have a complex function with many</span> <span data-start="656.43" data-end="658.62">primitive operations it's not so nice so</span> <span data-start="658.62" data-end="660.93">for example in my first my sequel module</span> <span data-start="660.93" data-end="664.05">ahead sis my whole part was one method</span> <span data-start="664.05" data-end="667.08">and that sounds stupid I know but stay</span> <span data-start="667.08" data-end="669.24">with me I I was cargo holding that</span> </p>
<p><span data-start="669.24" data-end="671.52">I was looking at Ryan's HTTP parser and</span> <span data-start="671.52" data-end="673.2">that's what he didn't see so I was like</span> <span data-start="673.2" data-end="674.61">that's the way to go one you just which</span> <span data-start="674.61" data-end="676.77">statement that's that's what we need to</span> <span data-start="676.77" data-end="680.1">do and so unfortunately the profiler did</span> <span data-start="680.1" data-end="681.81">not tell me since were stupid because he</span> <span data-start="681.81" data-end="683.61">just saw one big function posited right</span> <span data-start="683.61" data-end="685.23">being really hot and I'm like okay I</span> <span data-start="685.23" data-end="688.02">already know that so I didn't get very</span> <span data-start="688.02" data-end="690.57">far with supporter even as I continued</span> <span data-start="690.57" data-end="692.76">to make my module actually nicer and</span> <span data-start="692.76" data-end="694.5">separate things out into different</span> <span data-start="694.5" data-end="696.36">functions I still find supposed to be</span> <span data-start="696.36" data-end="697.95">lacking sometimes because sometimes I</span> <span data-start="697.95" data-end="699.15">spend all my time and stuff like</span> <span data-start="699.15" data-end="702.09">assigning properties to an object sure I</span> <span data-start="702.09" data-end="703.95">know it's this function is hot but how</span> <span data-start="703.95" data-end="705.45">do I make it faster why is it not fast</span> <span data-start="705.45" data-end="707.61">the profile I only gets you so far</span> <span data-start="707.61" data-end="710.36">use it but for some stuff it's not good</span> <span data-start="710.36" data-end="712.86">also another thing this one is important</span> <span data-start="712.86" data-end="714.27">please listen to this one don't take</span> <span data-start="714.27" data-end="715.83">performance advice from strangers and</span> </p>
<p><span data-start="715.83" data-end="718.77">I'm a stranger because I don't know I</span> <span data-start="718.77" data-end="719.88">don't know what your performance</span> <span data-start="719.88" data-end="721.59">problems are and I don't know what</span> <span data-start="721.59" data-end="723.81">you're trying to solve so any advice I</span> <span data-start="723.81" data-end="725.25">give you is really in the context of my</span> <span data-start="725.25" data-end="727.47">library so only use it for that there's</span> <span data-start="727.47" data-end="728.97">one piece of advice that I think is kind</span> <span data-start="728.97" data-end="730.53">of generic but all the other stuff just</span> <span data-start="730.53" data-end="732.27">ignore ignore all the stuffs of the</span> <span data-start="732.27" data-end="734.28">eight people tell you for optimizing</span> <span data-start="734.28" data-end="735.9">your code and blah blah blah I mean it</span> <span data-start="735.9" data-end="737.34">makes sense but only when you have</span> <span data-start="737.34" data-end="738.99">proven for it to make sense in your</span> <span data-start="738.99" data-end="741.09">problem domain so use this as good ideas</span> <span data-start="741.09" data-end="743.34">and inspiration but don't be a cargo</span> <span data-start="743.34" data-end="745.53">cool T like me like I was taking the big</span> <span data-start="745.53" data-end="746.94">switch statement idea and thinking that</span> <span data-start="746.94" data-end="748.77">was great without ever testing it</span> <span data-start="748.77" data-end="752.64">actually so what does work</span> </p>
<p><span data-start="752.64" data-end="756.66">I think PDD works oh that makes no sense</span> <span data-start="756.66" data-end="758.94">right behavior driven development no I</span> <span data-start="758.94" data-end="761.19">mean benchmark driven development and</span> <span data-start="761.19" data-end="763.11">since what I do all the time</span> <span data-start="763.11" data-end="764.73">benchmark driven development looks like</span> <span data-start="764.73" data-end="766.5">this it's basically very similar to</span> <span data-start="766.5" data-end="770.64">test-driven development so I only</span> <span data-start="770.64" data-end="772.68">suggest to use it when performance is an</span> <span data-start="772.68" data-end="774.6">explicit design call and it generally</span> <span data-start="774.6" data-end="776.16">works best if you writes a benchmark</span> <span data-start="776.16" data-end="779.22">first and not after so how do you do</span> <span data-start="779.22" data-end="781.05">that so basically you create a function</span> <span data-start="781.05" data-end="782.01">benchmark</span> <span data-start="782.01" data-end="783.9">and that's where your code is gonna go</span> <span data-start="783.9" data-end="786.3">in and I mean it's really stupid and</span> <span data-start="786.3" data-end="788.13">simple and then you do this while loop</span> <span data-start="788.13" data-end="790.32">you take some time when you start you</span> <span data-start="790.32" data-end="791.64">run the benchmark and you measure how</span> <span data-start="791.64" data-end="794.1">long it took well when you run this</span> <span data-start="794.1" data-end="796.98">obviously it's gonna say no zero because</span> <span data-start="796.98" data-end="799.71">we're not doing any work yet and if I</span> <span data-start="799.71" data-end="801.06">just add a little bit of code I'm</span> <span data-start="801.06" data-end="802.62">probably gonna stay at zero for a very</span> <span data-start="802.62" data-end="804.21">long time because the JavaScript timer</span> <span data-start="804.21" data-end="806.22">resolution is not very good it's only</span> <span data-start="806.22" data-end="808.05">giving me milliseconds whereas some of</span> <span data-start="808.05" data-end="810.5">those operations happen much faster</span> <span data-start="810.5" data-end="812.7">don't go out and try to find a better</span> <span data-start="812.7" data-end="814.35">timer just make sure that benchmark</span> <span data-start="814.35" data-end="816">function does enough work so you get</span> <span data-start="816" data-end="818.19">several milliseconds as a result it</span> <span data-start="818.19" data-end="820.08">suggests like 3 400 milliseconds is how</span> <span data-start="820.08" data-end="821.46">long your benchmark function should run</span> <span data-start="821.46" data-end="824.52">and that's that's where it will produce</span> <span data-start="824.52" data-end="826.77">good results this way anyway so the next</span> <span data-start="826.77" data-end="828.75">step is you implement a tiny part of</span> <span data-start="828.75" data-end="831.54">your function and that can be something</span> <span data-start="831.54" data-end="832.95">really stale like for example for my my</span> <span data-start="832.95" data-end="835.47">sequel library what I generally always</span> <span data-start="835.47" data-end="836.73">start out with when I repeat this</span> <span data-start="836.73" data-end="839.19">process to write a faster parser is I</span> <span data-start="839.19" data-end="841.02">just parse the headers in my sequel</span> <span data-start="841.02" data-end="842.76">packages so I get like a header that</span> <span data-start="842.76" data-end="844.23">tells me how many bytes are gonna follow</span> <span data-start="844.23" data-end="846.21">and then I skip over all these bytes and</span> <span data-start="846.21" data-end="848.4">just parse millions of packages really</span> <span data-start="848.4" data-end="850.59">fast and this is good enough for my</span> <span data-start="850.59" data-end="852.15">benchmark to slow down from zero to</span> <span data-start="852.15" data-end="854.1">something I can measure and then I start</span> <span data-start="854.1" data-end="856.5">to experiment I'm looking at what can I</span> <span data-start="856.5" data-end="858.03">do what did the v8 people tell me so</span> <span data-start="858.03" data-end="859.47">this way I remember the tips they gave</span> <span data-start="859.47" data-end="861.63">me but a lot of times I find that some</span> <span data-start="861.63" data-end="863.4">of them don't apply at all and some make</span> <span data-start="863.4" data-end="864.99">a big difference but you will never know</span> <span data-start="864.99" data-end="867.15">unless you actually benchmark it so I</span> <span data-start="867.15" data-end="869.01">mix these three except play around I try</span> <span data-start="869.01" data-end="871.59">different things and I repeated and that</span> <span data-start="871.59" data-end="873.78">was a result I get are surprising so I</span> <span data-start="873.78" data-end="875.7">found out that for example in my context</span> <span data-start="875.7" data-end="878.43">from my library try caches okay I can do</span> <span data-start="878.43" data-end="880.59">try caches performance penalties not too</span> <span data-start="880.59" data-end="882.93">bad I can do it big switch statement bad</span> </p>
<p><span data-start="882.93" data-end="884.52">I already knew that told you guys</span> <span data-start="884.52" data-end="886.98">function calls I was surprised I the</span> <span data-start="886.98" data-end="888.21">reason one of the reasons I saw the</span> <span data-start="888.21" data-end="889.47">switch statement would perform well</span> <span data-start="889.47" data-end="891.54">because it's all one function so has to</span> <span data-start="891.54" data-end="893.22">be easier for the compiler turns out I</span> <span data-start="893.22" data-end="894.48">can actually make almost as many</span> <span data-start="894.48" data-end="896.22">function calls as I want in my very hot</span> <span data-start="896.22" data-end="898.38">loop it hardly has any impact because v8</span> <span data-start="898.38" data-end="900.24">is really smart at inlining or doing</span> <span data-start="900.24" data-end="902.16">whatever magic by the way these VMs are</span> <span data-start="902.16" data-end="903.87">magic that's why I need to do this</span> </p>
<p><span data-start="903.87" data-end="905.46">I have no reasonable hope of ever</span> <span data-start="905.46" data-end="906.87">understand what's going on under the</span> <span data-start="906.87" data-end="909.15">hood so I need to like do this trial and</span> <span data-start="909.15" data-end="909.45">error</span> <span data-start="909.45" data-end="912.54">alchemy star another thing I found by</span> <span data-start="912.54" data-end="915.27">experimentation buffering is ok one of</span> <span data-start="915.27" data-end="915.98">the reasons my</span> <span data-start="915.98" data-end="917.54">original switch statement was the huge</span> <span data-start="917.54" data-end="919.91">was because I designed the parser the</span> <span data-start="919.91" data-end="922.4">cargo coding again after R I'm trying to</span> <span data-start="922.4" data-end="924.5">make it part use as little memory as</span> <span data-start="924.5" data-end="926.36">possible so I was trying to never buffer</span> <span data-start="926.36" data-end="928.13">any data so if I was receiving in my</span> <span data-start="928.13" data-end="929.84">sequel package I would always try to</span> <span data-start="929.84" data-end="931.67">parse the amount of bytes are already</span> <span data-start="931.67" data-end="933.38">received without ever storing any up</span> <span data-start="933.38" data-end="935.21">beforehand so what I'm doing now I'm</span> <span data-start="935.21" data-end="937.22">hovering entire packages and this</span> <span data-start="937.22" data-end="938.96">results in much less housekeeping I need</span> <span data-start="938.96" data-end="941.36">to keep less track of sustain less track</span> <span data-start="941.36" data-end="943.1">of where I am in the buffer I can write</span> <span data-start="943.1" data-end="944.57">much easier code that's actually better</span> <span data-start="944.57" data-end="945.89">and I only found this out by</span> <span data-start="945.89" data-end="947.48">benchmarking I thought if I use more</span> <span data-start="947.48" data-end="949.07">memories has to be slower but actually</span> <span data-start="949.07" data-end="950.72">turns out you can use memory in many</span> <span data-start="950.72" data-end="952.55">situations to gain better performance</span> <span data-start="952.55" data-end="954.95">here's my favorite one I think you guys</span> <span data-start="954.95" data-end="958.76">gonna like this one so I hoped I had</span> <span data-start="958.76" data-end="960.47">this function called pause rose in my</span> <span data-start="960.47" data-end="963.08">posture it very much looks like this so</span> <span data-start="963.08" data-end="964.79">it takes two arguments the columns and</span> <span data-start="964.79" data-end="966.77">the parse itself so parse itself is</span> <span data-start="966.77" data-end="969.17">hooked up to the socket which pumps data</span> <span data-start="969.17" data-end="972.68">into it so it's a writable stream but so</span> <span data-start="972.68" data-end="974.36">whenever I have a row data a row</span> <span data-start="974.36" data-end="976.25">buffered up this message gets called and</span> <span data-start="976.25" data-end="977.87">it's basically loops over all the</span> <span data-start="977.87" data-end="979.76">columns which I get beforehand and then</span> </p>
<p><span data-start="979.76" data-end="981.44">I receive two column data so I do this</span> <span data-start="981.44" data-end="983.63">loop and then for every column I have I</span> <span data-start="983.63" data-end="986.15">read one parser that read column value</span> <span data-start="986.15" data-end="989.72">one column value and this is I mean this</span> <span data-start="989.72" data-end="991.28">as simple as get and I have to do this</span> <span data-start="991.28" data-end="994.19">because I won't know the rows i I mean I</span> <span data-start="994.19" data-end="995.78">get to his columns beforehand but</span> <span data-start="995.78" data-end="997.46">they're different for every query so I</span> <span data-start="997.46" data-end="998.9">cannot really optimize his code faster</span> <span data-start="998.9" data-end="1000.4">at least that's what I thought for a</span> <span data-start="1000.4" data-end="1002.26">long time and the profiler was also like</span> <span data-start="1002.26" data-end="1004.21">you're creating an object or something</span> <span data-start="1004.21" data-end="1006.7">but I don't know what can you do so I</span> <span data-start="1006.7" data-end="1008.95">set out to make this faster and so this</span> <span data-start="1008.95" data-end="1010.9">is what I came up with I'll give you</span> <span data-start="1010.9" data-end="1016.45">guys a second to take a look does this</span> <span data-start="1016.45" data-end="1020.38">make sense okay so what this basically</span> <span data-start="1020.38" data-end="1022.69">does is it creates a new pass or it</span> <span data-start="1022.69" data-end="1024.16">creates a new pause row function and</span> <span data-start="1024.16" data-end="1029.65">uses evolve so what comes out of it is</span> <span data-start="1029.65" data-end="1031.06">basically aesthetic functions that</span> <span data-start="1031.06" data-end="1032.77">already knows what column values it's</span> <span data-start="1032.77" data-end="1034.54">going to parse so instead of dynamically</span> <span data-start="1034.54" data-end="1036.28">adding C's values to the object it gives</span> <span data-start="1036.28" data-end="1039.1">supporter or b8 this work to do and so</span> <span data-start="1039.1" data-end="1041.709">we've heard all these things about evil</span> <span data-start="1041.709" data-end="1043.209">being terrible and being slow and blah</span> <span data-start="1043.209" data-end="1043.66">blah blah</span> <span data-start="1043.66" data-end="1050.41">screw that evils awesome here I said it</span> <span data-start="1050.42" data-end="1053.28">this is this is actually the Z trick</span> <span data-start="1053.28" data-end="1055.47">that got me the most performance for my</span> <span data-start="1055.47" data-end="1057.06">recent parser for the new experimental</span> <span data-start="1057.06" data-end="1058.86">parts I'm working on this thing was you</span> <span data-start="1058.86" data-end="1061.71">should get me from parsing 350,000 rows</span> <span data-start="1061.71" data-end="1064.68">per second to 450,000 rows per second it</span> <span data-start="1064.68" data-end="1066.69">makes an amazing difference and again I</span> <span data-start="1066.69" data-end="1068.85">don't recommend this in all contexts I</span> <span data-start="1068.85" data-end="1070.44">did only when it's your problem and</span> <span data-start="1070.44" data-end="1072.33">you've proven evil to you be useful and</span> <span data-start="1072.33" data-end="1073.89">you still need to make sure nobody's</span> <span data-start="1073.89" data-end="1075.45">trolling you this is my sequel server</span> <span data-start="1075.45" data-end="1077.85">sending me back if a column name that is</span> <span data-start="1077.85" data-end="1081.27">escaping my well my code then crazy</span> <span data-start="1081.27" data-end="1084.9">things will happen so anyway if you want</span> <span data-start="1084.9" data-end="1086.49">to level up your game next the next</span> <span data-start="1086.49" data-end="1088.62">thing you can do is you can do data</span> <span data-start="1088.62" data-end="1090.81">analysis and the way to do good data</span> <span data-start="1090.81" data-end="1093.12">analysis is to produce data points as</span> <span data-start="1093.12" data-end="1096.99">tab-separated values and so each line in</span> <span data-start="1096.99" data-end="1098.64">your in your output should be one</span> <span data-start="1098.64" data-end="1100.05">measurement like the duration how long</span> <span data-start="1100.05" data-end="1101.61">your benchmark function was running and</span> <span data-start="1101.61" data-end="1104.01">then tap separated you add as much</span> <span data-start="1104.01" data-end="1105.24">matter information as you can</span> <span data-start="1105.24" data-end="1107.31">so ya add virtual machine' matrix so</span> <span data-start="1107.31" data-end="1109.71">heap used heap total you had operating</span> <span data-start="1109.71" data-end="1111.99">system metrics like process RSS usage</span> <span data-start="1111.99" data-end="1113.37">and everything you can you get your</span> <span data-start="1113.37" data-end="1114.81">hands on that could be relevant to what</span> <span data-start="1114.81" data-end="1116.61">you're doing or relevant because</span> <span data-start="1116.61" data-end="1118.02">sometimes it turns out these things also</span> <span data-start="1118.02" data-end="1121.02">impact and the last one is the most</span> <span data-start="1121.02" data-end="1123.6">important one do not mix data now data</span> <span data-start="1123.6" data-end="1127.17">and analysis it was my biggest criticism</span> <span data-start="1127.17" data-end="1128.76">for all the performance benchmarking</span> <span data-start="1128.76" data-end="1129.48">tools out there</span> </p>
<p><span data-start="1129.48" data-end="1131.01">I give me a framework to write</span> <span data-start="1131.01" data-end="1132.48">benchmarks and performance things in and</span> <span data-start="1132.48" data-end="1134.04">then they will run my benchmark and</span> <span data-start="1134.04" data-end="1136.5">they'll be like the median is this or</span> <span data-start="1136.5" data-end="1138.36">they'll be like this function is 2%</span> <span data-start="1138.36" data-end="1139.11">faster</span> <span data-start="1139.11" data-end="1140.97">well they'll draw me one graph I mean</span> <span data-start="1140.97" data-end="1143.01">it's nice it's convenient it's fast but</span> <span data-start="1143.01" data-end="1145.02">it's nice and convenient and fast like</span> <span data-start="1145.02" data-end="1146.55">something else and since something else</span> <span data-start="1146.55" data-end="1148.11">is running sequel queries from HTML</span> <span data-start="1148.11" data-end="1149.88">templates you can put these things</span> <span data-start="1149.88" data-end="1152.07">together it works you get your done</span> <span data-start="1152.07" data-end="1153.72">really quickly but it's an estimate aim</span> <span data-start="1153.72" data-end="1155.25">and it limits your options of what you</span> <span data-start="1155.25" data-end="1157.68">can do later on so don't mix those two</span> <span data-start="1157.68" data-end="1159.47">steps per two separate files</span> <span data-start="1159.47" data-end="1162.72">here's how to do it best run your</span> <span data-start="1162.72" data-end="1164.28">benchmark print your stuff on standard</span> <span data-start="1164.28" data-end="1166.38">out and then pipe it into T it's a UNIX</span> <span data-start="1166.38" data-end="1168.66">utility and write it in two types of</span> <span data-start="1168.66" data-end="1170.34">rated value file so you can watch the</span> <span data-start="1170.34" data-end="1172.32">output while status coming out now that</span> <span data-start="1172.32" data-end="1174.54">the benchmark has finished running you</span> <span data-start="1174.54" data-end="1176.46">get this pure data in a file and you can</span> <span data-start="1176.46" data-end="1178.23">analyze it and for the analyzing I</span> <span data-start="1178.23" data-end="1179.31">recommend to use a tool that's really</span> <span data-start="1179.31" data-end="1180.54">good for it so that</span> <span data-start="1180.54" data-end="1182.49">see our programming language I'm not</span> <span data-start="1182.49" data-end="1185.4">really an expert but ggplot2 is the</span> <span data-start="1185.4" data-end="1186.57">library you can use to make really</span> <span data-start="1186.57" data-end="1188.13">pretty crafts with it the previous ones</span> <span data-start="1188.13" data-end="1191.85">we're useful that and later on I'll have</span> <span data-start="1191.85" data-end="1193.38">a link where you get really good art</span> <span data-start="1193.38" data-end="1194.91">tutorials it gets you up to speed in a</span> <span data-start="1194.91" data-end="1197.85">few minutes another thing I recommend is</span> <span data-start="1197.85" data-end="1199.65">use make files imagemagick</span> <span data-start="1199.65" data-end="1202.41">to just automate certain things so for</span> <span data-start="1202.41" data-end="1204.84">example R will produce PDFs and then you</span> <span data-start="1204.84" data-end="1206.91">can use make to automatically convert</span> <span data-start="1206.91" data-end="1210.36">the CSV runs ER or the tab separated</span> <span data-start="1210.36" data-end="1212.76">values make it run co-op program I'll</span> <span data-start="1212.76" data-end="1214.86">put PDS and then use image magic to get</span> </p>
<p><span data-start="1214.86" data-end="1217.41">PNG images for the web part of it and</span> <span data-start="1217.41" data-end="1218.97">then there's a tool called Skitch for</span> <span data-start="1218.97" data-end="1221.01">always ten that you can use to make</span> <span data-start="1221.01" data-end="1224.97">annotations so so why do you need to do</span> <span data-start="1224.97" data-end="1226.32">this I'll show you a practical example</span> <span data-start="1226.32" data-end="1229.02">of what I found so I showed you this</span> <span data-start="1229.02" data-end="1230.79">benchmark before and actually not only</span> <span data-start="1230.79" data-end="1232.74">this benchmark but all the benchmarks I</span> <span data-start="1232.74" data-end="1234.27">showed you so far we're kind of</span> <span data-start="1234.27" data-end="1236.19">because I give you little crafts that</span> <span data-start="1236.19" data-end="1237.84">show this thing is faster than listening</span> <span data-start="1237.84" data-end="1239.73">and they don't analyze anything and this</span> <span data-start="1239.73" data-end="1240.84">is what's wrong with most of the</span> <span data-start="1240.84" data-end="1242.37">benchmarks you see out there they don't</span> <span data-start="1242.37" data-end="1244.74">give a very deep so when you go very</span> <span data-start="1244.74" data-end="1246.54">deep you sometimes sometimes it doesn't</span> <span data-start="1246.54" data-end="1247.47">matter but sometimes you find</span> <span data-start="1247.47" data-end="1248.88">interesting things and I did with this</span> <span data-start="1248.88" data-end="1251.91">one this is what I found so this is a</span> <span data-start="1251.91" data-end="1254.43">jitter plot similar to the bar graph but</span> <span data-start="1254.43" data-end="1256.02">it shows me each data points that I</span> <span data-start="1256.02" data-end="1258.69">recorded and see x-axis doesn't matter</span> <span data-start="1258.69" data-end="1260.76">just randomly distributed for their</span> <span data-start="1260.76" data-end="1262.74">library I'm currently testing and what I</span> <span data-start="1262.74" data-end="1265.74">can see is the what is going on why</span> <span data-start="1265.74" data-end="1268.65">do I have two data islands here it makes</span> <span data-start="1268.65" data-end="1270.75">no sense it seems like sometimes my code</span> <span data-start="1270.75" data-end="1272.31">is really fast and sometimes it's really</span> <span data-start="1272.31" data-end="1275.31">slow I was really confused when I saw</span> <span data-start="1275.31" data-end="1276.96">this and I questioned my code for a long</span> <span data-start="1276.96" data-end="1280.08">time so but here's the value of having</span> <span data-start="1280.08" data-end="1281.64">your data separated from your analysis</span> <span data-start="1281.64" data-end="1283.62">you can dig deeper so when you now plot</span> <span data-start="1283.62" data-end="1286.74">this same performance data points over</span> <span data-start="1286.74" data-end="1289.11">the time axis it's not actually time</span> <span data-start="1289.11" data-end="1291.18">it's a iteration number for the</span> <span data-start="1291.18" data-end="1293.88">benchmark you'll see that both libraries</span> <span data-start="1293.88" data-end="1296.22">make a huge performance drop at the same</span> <span data-start="1296.22" data-end="1298.41">point in time or the same iteration and</span> <span data-start="1298.41" data-end="1300.39">then they stay at terrible performance</span> <span data-start="1300.39" data-end="1302.61">there's something happens there again if</span> <span data-start="1302.61" data-end="1304.14">you have more data you can look what</span> <span data-start="1304.14" data-end="1306.57">what happened else at the same moment so</span> <span data-start="1306.57" data-end="1309.63">the next thing I found was here's the</span> <span data-start="1309.63" data-end="1312.42">heap usage for off v8 or the heap total</span> <span data-start="1312.42" data-end="1314.35">so that's a total amount of memory v8</span> <span data-start="1314.35" data-end="1316.69">kids for putting my objects in and at</span> <span data-start="1316.69" data-end="1318.549">the point where my performance goes to</span> <span data-start="1318.549" data-end="1321.13">basically the eight decided I have</span> <span data-start="1321.13" data-end="1323.02">basically the eight decided I have 20 megabytes of heap but I would like I</span> <span data-start="1323.02" data-end="1325.059">don't know 35 and then my performance</span> <span data-start="1325.059" data-end="1327.429">just goes terrible and I find all the</span> <span data-start="1327.429" data-end="1328.72">benchmarks that Ruth is pretty well or</span> <span data-start="1328.72" data-end="1331.36">another craft this is a heap used so you</span> <span data-start="1331.36" data-end="1333.16">can see v8 is actually doing garbage</span> <span data-start="1333.16" data-end="1334.63">collection it doesn't look like I'm</span> <span data-start="1334.63" data-end="1336.91">leaking anything it just said v8 decided</span> <span data-start="1336.91" data-end="1339.76">hey this is where I should get a bigger</span> <span data-start="1339.76" data-end="1341.83">heap and it it seems like the wrong</span> <span data-start="1341.83" data-end="1343.69">decision could still be a problem in my</span> <span data-start="1343.69" data-end="1345.82">code I don't know but these are the</span> <span data-start="1345.82" data-end="1347.35">things you find when you do data</span> <span data-start="1347.35" data-end="1349.71">collection well and you analyze it well</span> <span data-start="1349.71" data-end="1353.919">so ya collect data analyze it find</span> <span data-start="1353.919" data-end="1355.12">problems tweak C code</span> <span data-start="1355.12" data-end="1357.01">repeat that process it takes a ton</span> <span data-start="1357.01" data-end="1360.64">of time there's no like easy fixes but</span> <span data-start="1360.64" data-end="1362.799">that's the process that helped me do</span> <span data-start="1362.799" data-end="1374.91">these my sequel things thank you</span> </p>
<p><span data-start="1374.92" data-end="1384.01">I think we can do questions I'm open</span> <span data-start="1384.01" data-end="1387.49">sourcing this right now so now it's open</span> <span data-start="1387.49" data-end="1409.21">source cool questions okay hey I just</span> <span data-start="1409.21" data-end="1411.04">remember some times where we had to like</span> <span data-start="1411.04" data-end="1412.96">doing this kind of performance</span> <span data-start="1412.96" data-end="1416.44">improvements for other browsers and we</span> <span data-start="1416.44" data-end="1419.65">did really crazy stuff to get it faster</span> <span data-start="1419.65" data-end="1422.58">and then it turns out that other like</span> <span data-start="1422.58" data-end="1426.04">mechanics behind was optimized by p8 or</span> <span data-start="1426.04" data-end="1428.26">other process and so it turns out that</span> <span data-start="1428.26" data-end="1431.08">the original idea was very faster than</span> <span data-start="1431.08" data-end="1432.76">the tweak we did Oh</span> <span data-start="1432.76" data-end="1435.7">how do you handle that okay you're the</span> <span data-start="1435.7" data-end="1438.22">history of all your results and see okay</span> </p>
<p><span data-start="1438.22" data-end="1440.86">I have to rework this for the new v8</span> <span data-start="1440.86" data-end="1444.28">yeah so that's a good point so sometimes</span> <span data-start="1444.28" data-end="1445.87">you do crazy optimizations for example</span> <span data-start="1445.87" data-end="1447.49">my evil sing falls in the crazy</span> <span data-start="1447.49" data-end="1449.5">optimization category and could be that</span> <span data-start="1449.5" data-end="1450.85">the v8 guys figure out how to optimize</span> <span data-start="1450.85" data-end="1452.44">this case and they produce a result</span> <span data-start="1452.44" data-end="1453.85">that's much better than what I'm doing</span> <span data-start="1453.85" data-end="1455.77">was evil and then my evil optimization</span> <span data-start="1455.77" data-end="1458.55">actually turns into a non optimal code</span> <span data-start="1458.55" data-end="1461.08">again hard work do it again look at the</span> <span data-start="1461.08" data-end="1463.81">data it so far I was really lucky I mean</span> <span data-start="1463.81" data-end="1465.25">I was bitching about some virtual</span> <span data-start="1465.25" data-end="1466.39">machines being matching and all but</span> <span data-start="1466.39" data-end="1468.04">they're getting really really fast so I</span> <span data-start="1468.04" data-end="1469.54">get huge performance increases from</span> <span data-start="1469.54" data-end="1471.31">notes here that 4206</span> <span data-start="1471.31" data-end="1474.7">it was insane and 0.6 to 0.8 was also</span> <span data-start="1474.7" data-end="1477.16">with huge improvements new v8 versions</span> <span data-start="1477.16" data-end="1478.93">have helped me but they could also hurt</span> <span data-start="1478.93" data-end="1480.64">me if I'm doing optimizations that are</span> <span data-start="1480.64" data-end="1482.29">really stupid but generally speaking</span> <span data-start="1482.29" data-end="1484.87">evil is the only crazy thing I did for</span> <span data-start="1484.87" data-end="1486.61">most part my code actually turned out to</span> <span data-start="1486.61" data-end="1489.55">be simpler and more modular and not</span> <span data-start="1489.55" data-end="1491.71">worse so I'm not I'm not going crazy to</span> <span data-start="1491.71" data-end="1493.81">just please a VM if I can avoid it</span> <span data-start="1493.81" data-end="1500.41">the evil thing is just fun ok that's it</span> <span data-start="1500.41" data-end="1502.08">thank you very much Felix</span> </p>
</section>