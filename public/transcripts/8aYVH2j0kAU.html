<section>
<p><span data-start="1.43" data-end="22.88"Audience member: Mathieu 'p01' Henri: Thank you, so, hi, first off, thanks a lot for having me, it's</span> <span data-start="22.88" data-end="29.57">my first JSConf 2014, and first time in Berlin, it's really really nice, I really like it.</span> <span data-start="29.57" data-end="36.63">So does my daughter, she's having a blast right now. As he said, my name is Mathieu</span> <span data-start="36.63" data-end="44.18">'p01' Henri, I'm a JavaScript developer, I've been there for nine years now. I mostly work</span> <span data-start="44.18" data-end="51.78">on the desktop router. But most people know me as PO 1, this is the name I've gone by</span> <span data-start="51.78" data-end="56.87">for about 25 years.</span> </p>
<p><span data-start="56.87" data-end="65.079">This is also how I got into opera, I entered a contest and someone contacted me if I wanted</span> <span data-start="65.079" data-end="71.52">to join them, I said, sure, let's go. Then you might be wondering what is the demo scene</span> <span data-start="71.52" data-end="83.43">that I'm talking about. Demo scene was born here in Berlin 30 years ago. \h‑‑ very,</span> <span data-start="83.43" data-end="88.78">very talented hackers, they take commercial software, reverse engineer them, remove the</span> <span data-start="88.78" data-end="101.54">protections so we can use them for free. Back in the '80s we were only\h‑‑ high score</span> <span data-start="101.54" data-end="107.88">tables, if it was a game look Pac M A N or anything, or in the splash\h‑‑ of a program</span> <span data-start="107.88" data-end="109.89">we are cracking.</span> <span data-start="109.89" data-end="116.17">But in '84, Berlin cracking service did something really unique, they added their own introto</span> <span data-start="116.17" data-end="125.52">program they would crack. No emission, no sound, we're showing the emblem\h‑‑ it</span> <span data-start="125.52" data-end="133.989">started a revolution, soon the crack started with this. Became more fancy, it became so</span> <span data-start="133.989" data-end="144.879">cool, these little demos were released independently of cracks. Basically it's a group of creative</span> <span data-start="144.879" data-end="150.299">people that make real‑time audio‑visual animations they try to push the technical</span> <span data-start="150.299" data-end="160.219">and creative limits, it's about pushing the boundaries. Because it's born from that cracking</span> <span data-start="160.219" data-end="167.409">scene, it's very social, very competitive the social part you can really see it in the</span> <span data-start="167.409" data-end="173.79">fact that every year at least 50 events all around the world, mostly in Europe, but also</span> <span data-start="173.79" data-end="180.419">in the states, Japan. Some in Australia as well. We have live concerts, seminars a bit</span> <span data-start="180.419" data-end="187.559">like here, we explain techniques and various things. But, most of all, competitions in</span> <span data-start="187.559" data-end="194.409">many quality I goes, the queen category is the demo competition where you have 65‑megabytes</span> <span data-start="194.409" data-end="201.889">124‑megabytes to make the most amazing real‑time animation you can, this goes down to seven</span> <span data-start="201.889" data-end="213.549">size constraints, 64, and down to insane 264 bytes, it's not just about programming competitions,</span> <span data-start="213.549" data-end="222.999">it's also more artistic competitions like music and\h‑‑ sorry\h‑‑ music and</span> <span data-start="222.999" data-end="230.549">graphics, so graphic competitions and also short movies and animations, and uses many,</span> <span data-start="230.549" data-end="244.51">many platforms. It's also Amega ‑‑ >> Amega! It's also on 8 birth computers,</span> </p>
<p><span data-start="244.51" data-end="254.909">C 64, but it also goes on mobile phone, video game consoles modern ones and old ones like</span> <span data-start="254.909" data-end="262.56">Vetrix, or genesis. But people also make demos on the most crazy platforms, they make demos</span> <span data-start="262.56" data-end="272.759">on Oscoscops, some make their own custom hardware just for the heck of it. This goes far, really</span> <span data-start="272.759" data-end="279.561">far. The most insane, I think in my mind is also demos on OHP, overhead display we saw</span> <span data-start="279.561" data-end="286.509">in high school, junior high school, big lightbulb on mirror, with plastic sheets people make</span> <span data-start="286.509" data-end="293.4">demos with that, it's just bizarre.</span> <span data-start="293.4" data-end="300.889">And\h‑‑ sorry\h‑‑ back then, back in the '80s the main distribution platform</span> <span data-start="300.889" data-end="310.52">for demos was you take a stack of disks, send them by mail and few weeks later you would</span> <span data-start="310.52" data-end="317.15">get your floppy disks back and stamps back with more demos, and it would go on and on,</span> <span data-start="317.15" data-end="326.08">then came the BBSes in the '80s, '90s but now everything is done on the internet. The</span> <span data-start="326.08" data-end="331.29">crazy crazy thing, which is not so crazy for you guys is the web is a viable platform to</span> <span data-start="331.29" data-end="339.659">make demos. And, really it's about pushing limits, and one of them is size, so how could</span> <span data-start="339.659" data-end="348.599">we go about making a small demo on the web? Well, first of all you need to start from</span> <span data-start="348.599" data-end="354.77">an idea, a concept. So, your concept for your small demo can be simple like just an idea</span> <span data-start="354.77" data-end="361.319">or a word or sketches. I have really like to sketch my ideas on small story boards,</span> <span data-start="361.319" data-end="369.12">here you can see a couple of steps like, the top, one, two, three, four, five, steps. And</span> <span data-start="369.12" data-end="377.349">something that I do now a bit more is to make a mood wall. I just go on‑line and save</span> <span data-start="377.349" data-end="384.05">images over time and sometimes I see some images inspire me and that could work well</span> <span data-start="384.05" data-end="389.68">together if I just combine them and animate them this is the mood board for one project</span> </p>
<p><span data-start="389.68" data-end="396.449">I'm working on. We will see where this goes. And once you have your concept, it's time</span> <span data-start="396.449" data-end="398.469">to prototype it.</span> <span data-start="398.469" data-end="404.37">The idea of prototyping is really to see if your concept works, if it's possible in the</span> <span data-start="404.37" data-end="412.06">constraints you have. It's also about finding the right technique to display your demo.</span> <span data-start="412.06" data-end="420.18">The web, first many way to draw things, if you just want to do simple overlays, the DOM</span> <span data-start="420.18" data-end="425.7">is perfect, if you want to do street view kind of things where you have a static observer</span> <span data-start="425.7" data-end="435.12">that looks around CSS 3D is good for that theD canvas is okay, and for heavy duty stuff</span> <span data-start="435.12" data-end="441.87">againGL is king. Here's\h‑‑ web GL is king. I'm going to show you a preview of a</span> <span data-start="441.87" data-end="447.84">project I'm working on. So hopefully this should be finished in a couple of week and</span> <span data-start="447.84" data-end="454.77">we'll have sound sin crow anytion and it should be, yeah, good. Still lots of work to do,</span> <span data-start="454.77" data-end="460.12">but I'll get there. So once you have done your prototypes and you have\h‑‑ you can</span> <span data-start="460.12" data-end="467.219">do your ID, optimize it. When you want to draw things to make animations you will play</span> <span data-start="467.219" data-end="474.139">a bit with numbers and a bit of trigonometry, so, there's a couple of cheep approximations</span> <span data-start="474.139" data-end="481.32">of pie's and fractions of pie's that can save you some bytes. It sounds crazy but when you</span> <span data-start="481.32" data-end="490.289">try to do something in 2 $56 bytes that helps, you need it. Numbers in JavaScript you know</span> <span data-start="490.289" data-end="496.36">they're actually floating\h‑‑ numbers, so the first two at the top, increments by</span> <span data-start="496.36" data-end="504.5">point one will end up with I being equal toll 10.09999 something this is because 0.1 cannot</span> <span data-start="504.5" data-end="513.219">be expressed in power of\h‑‑ power of two. The second loop, since the increment</span> <span data-start="513.219" data-end="519.38">is one over eight, every number in this loop can be expressed exactly so a loop ends with</span> <span data-start="519.38" data-end="525.79">ten, looks like nothing, it means during this loop you can use modular and the modular will</span> <span data-start="525.79" data-end="534.16">launch exactly, so you can, in a cheap way nest two loops by just using the right increment,</span> <span data-start="534.16" data-end="536.55">so that can save you a lot of bytes also.</span> </p>
<p><span data-start="536.55" data-end="543.899">But, really what you should do is try to reduce your function footprint, so one thing that</span> <span data-start="543.899" data-end="553.55">J S told us you should use a function signature. In this we have two functions, next one doesn't</span> <span data-start="553.55" data-end="559.25">need these arguments but by using the same function signature, they will compress better,</span> <span data-start="559.25" data-end="568.22">so, just add a little bit of\h‑‑ but, they will compress better in the end. But,</span> <span data-start="568.22" data-end="573.399">something else you can do is also you can try oshadow things, in the case of functions</span> <span data-start="573.399" data-end="578.519">we have these two functions, two things, we can combine them together, we can make one</span> <span data-start="578.519" data-end="583.041">function that takes two arguments, and if one argument is passed we do something, no</span> <span data-start="583.041" data-end="590.3">argument is passed\h‑‑ we do the second function. The same goes for code blocks, so</span> <span data-start="590.3" data-end="597.07">you can have one loop with us, yeah, but, checks with value of one property, small square</span> <span data-start="597.07" data-end="601.99">and then put the next position, typically that's in two loops, first would complete</span> <span data-start="601.99" data-end="608.959">the position and the second one would do things, but you can do them together . But these things</span> <span data-start="608.959" data-end="615.541">are\h‑‑ they're nice but what you should really do is simplify your idea. Simplify</span> <span data-start="615.541" data-end="620.22">your technique and how you will do things. I had the project a few months back which</span> <span data-start="620.22" data-end="627.25">was called Minami district one thousand buildings in one thousand bites and spin around. It</span> <span data-start="627.25" data-end="634.94">looks a bit like this, one common problem or one big challenge I had was how coI know</span> <span data-start="634.94" data-end="641.019">which window to actually draw for each building, so the common way would be the look at one</span> <span data-start="641.019" data-end="647.3">building and for each window compute the normal vector for the window, but tells me where</span> <span data-start="647.3" data-end="652.371">this window is facing, if a Z coordinate is positive it means it's facing towards the</span> <span data-start="652.371" data-end="659.74">camera if it's negative it's awhat. It's little bit difficult to do with one K. So another</span> <span data-start="659.74" data-end="666.079">way I looked at it is think about how I draw these windows one side of the window to the</span> <span data-start="666.079" data-end="674.2">next one if you follow the numbers, one, two, three, four, if a number actually go towards</span> <span data-start="674.2" data-end="680.32">your right\h‑‑ towards your left, sorry it means that the window is facing the camera,</span> <span data-start="680.32" data-end="684.87">so I draw it, if a difference in X from one edge to the next one is positive I draw it,</span> <span data-start="684.87" data-end="692.11">if it's negative I don't draw it, it's facing away, it was much more compact. So this other</span> <span data-start="692.11" data-end="699.399">project, which I called Matraka I wanted to display some kind of crazy surface crazy object</span> <span data-start="699.399" data-end="706.459">with lighting and I tried many formulas to describe the surface, I tried to use soft</span> <span data-start="706.459" data-end="714.22">code as surface, but, the best one was actually the most simple, it was just Cos X Cos Y.</span> </p>
<p><span data-start="714.22" data-end="722.949">Very small bumps and the very nice thing about this is that since it's very simple formula,</span> <span data-start="722.949" data-end="729.62">it's very simple derivative, and the derivative gives me the curvature of this surface by\h‑‑</span> <span data-start="729.62" data-end="736.149">curvature so I know what is\h‑‑ which light is\h‑‑ so I just take this value</span> <span data-start="736.149" data-end="741.64">and it gives me light office at a given point.</span> <span data-start="741.64" data-end="748.04">If you\h‑‑ in the mood board that I showed you, like one\h‑‑ many, many triangles,</span> <span data-start="748.04" data-end="753.41">and, how you would do that normally is you would process all your triangles together</span> <span data-start="753.41" data-end="757.12">and check the coordinate of the Lee points and solve them, to know which order to\h‑‑</span> <span data-start="757.12" data-end="764.079">if the triangles are small enough, you can think of them as\h‑‑ and just approximate</span> <span data-start="764.079" data-end="770.1">the particular so you just saw the triangle individually and not\h‑‑ and it's much</span> <span data-start="770.1" data-end="772.35">more simple to solve this.</span> </p>
<p><span data-start="772.35" data-end="781.14">But, this simplification are often not enough, you often need to go ahead and fake it and</span> <span data-start="781.14" data-end="788.389">you need to fake many things like graphics you often want to figure out how to light</span> <span data-start="788.389" data-end="797.13">your objects and in 76 Jim came up with this idea of environment map, what it does is basically</span> <span data-start="797.13" data-end="802.21">look at\h‑‑ in every possible direction that the object can be facing check what is</span> <span data-start="802.21" data-end="806.889">your light, what can be seen in every possible direction and makes a measure of it.</span> <span data-start="806.889" data-end="812.899">So, this is the image you see on the left, well, you're basically sitting in the center</span> <span data-start="812.899" data-end="818.649">of the room and looks in every possible direction, and you see in this direction you see the</span> <span data-start="818.649" data-end="824.85">window and this you see a door. And when we want to render this kind of pea pot on the</span> <span data-start="824.85" data-end="831.99">other side you check what is the direction that is the teapot facing at avarice point</span> <span data-start="831.99" data-end="840">of the surface and you pick and imagine, just put it here and you're done. And you can also</span> <span data-start="840" data-end="845.629">extend this idea so when you\h‑‑ the image contains\h‑‑ sorry that contains the color</span> <span data-start="845.629" data-end="852.389">that you would see in every possible direction you can also store your position of your small</span> <span data-start="852.389" data-end="861.449">triangle or your reference of coordinate system, so, you would store the color and also the</span> <span data-start="861.449" data-end="867">position of the small triangle in space as if it was oriented in this direction, so you</span> <span data-start="867" data-end="872.92">have at all possible directions, which means if you want to display a big amount of triangles</span> <span data-start="872.92" data-end="878.569">and have it with light and even with multiple lights you can just do like one little cap</span> <span data-start="878.569" data-end="882.87">and you have the light and position of the triangle and it's almost for free, so you</span> <span data-start="882.87" data-end="890.81">can do all this, all these kinds of cheating and you often want to cast shadows to make</span> <span data-start="890.81" data-end="899.22">things look a bit more realistic and shot shadows, it's nice to make it all soft and</span> <span data-start="899.22" data-end="906.209">more simple way to do it, as your draw your elements in your fame, you draw\h‑‑ on</span> <span data-start="906.209" data-end="912.41">the floor in a separate canvas, smaller resolution like a quarter or divide your resolution by</span> <span data-start="912.41" data-end="919.55">four or sixteen or thirty two, when you're done you just expand your smaller canvas behind</span> <span data-start="919.55" data-end="924.889">your canvas where you draw all your things, and by stretching it it becomes all smooth</span> <span data-start="924.889" data-end="931">and blurry I's very cheep and does the trick, it really does the trick. And once you have</span> <span data-start="931" data-end="937.89">done that, well, good job, you have your visual, it's time to think about the audio. And on</span> <span data-start="937.89" data-end="944.279">the web there's basically two ways to do sound, web audio API and audio element.</span> </p>
<p><span data-start="944.279" data-end="954.24">Audio API is super powerful. It can do real‑time sound analysis but it's a bit very bows, and</span> <span data-start="954.24" data-end="963.91">also regular 1 can and 4 K demos start with a black screen and then the visual kicks in.</span> <span data-start="963.91" data-end="969.639">And that feeds very well with the audio element because we have that much code, less than</span> <span data-start="969.639" data-end="978.68">200 bytes, you can generate sound and play it. That's all you need. So, when you generate</span> <span data-start="978.68" data-end="987.54">sound you is to think about the Nyyuist frequency. The Nyquist frequency, yeah, very Techi oh,</span> <span data-start="987.54" data-end="995.11">it's the lowst frequency at which you can sample or generate music without getting audio</span> <span data-start="995.11" data-end="1001.579">glitches. And it's basically twice the frequency of your highest note in your music, so when</span> <span data-start="1001.579" data-end="1006.91">you generate music, generate at least twice the frequency of your highest note, you can</span> <span data-start="1006.91" data-end="1013.879">generate higher, the lower the frequency, means the less data you need to generate the</span> <span data-start="1013.879" data-end="1020.269">faster your introwill start. You will get slightly lower sound quality, but your intro</span> <span data-start="1020.269" data-end="1027.83">will start maybe five or ten seconds sooner. That can be nice. How do you make music with</span> <span data-start="1027.83" data-end="1028.83">that.</span> </p>
<p><span data-start="1028.83" data-end="1033.64">You start with small building blocks, you need to build instruments, so, if you want</span> <span data-start="1033.64" data-end="1040.38">to do, I don't know, something simple like a\h‑‑ you start with the first line which</span> <span data-start="1040.38" data-end="1049.62">gives you pure noise and the second line\h‑‑ decay, with a second and third line, of course,</span> <span data-start="1049.62" data-end="1056.37">it adds that to your music. And then, it's nice, but, when since we generalsh rate the</span> <span data-start="1056.37" data-end="1062.66">music before the animations, how do we do sin crow anytion with that? It's not that</span> <span data-start="1062.66" data-end="1066.94">hard, when you general rate the sound, you foe exactly at which position in the sound</span> <span data-start="1066.94" data-end="1072.67">you have, so you can store in a separate area, which notes you're actually playing at which</span> <span data-start="1072.67" data-end="1079.63">position and which volume. During your animation, you can check the current time of your audioment,</span> <span data-start="1079.63" data-end="1087.4">multiply by sixty and you know where in your sin crow anytion buffer you need to pick to</span> <span data-start="1087.4" data-end="1092.33">know which notes are playing and then which volume so can do, you can really be in Sync</span> <span data-start="1092.33" data-end="1099.31">with your music, and once you've done that, well done. But you haven't even started to</span> <span data-start="1099.31" data-end="1109.28">come press it. So .. the normal way to come press is with JS packet, look at your code</span> <span data-start="1109.28" data-end="1116.04">as a string, look at the repeat patterns and just replace them by a single character.</span> </p>
<p><span data-start="1116.04" data-end="1122.18">So if we have many archings if declarations they would be registered to just one character</span> <span data-start="1122.18" data-end="1129.03">this is very nice, you get about 25\hpercent compression ratio and mini if Id code or on</span> <span data-start="1129.03" data-end="1136.38">the code I tend to write and you need about 70 bytes to decompress that, so it's pretty</span> <span data-start="1136.38" data-end="1146.18">powerful. But web parcels actually very nice, we can\h‑‑ and this support GZIP in the</span> <span data-start="1146.18" data-end="1154.21">form of PNG images and we can bootstrap PNG images the idea of boot strapping PNG, it</span> <span data-start="1154.21" data-end="1166.42">relatively new, you load your JavaScript code will be gray scale image you save as PNG,</span> <span data-start="1166.42" data-end="1173.1">and when you load that and say, hey, that's foo\h‑‑ I willowed that as HTML, so at</span> <span data-start="1173.1" data-end="1181.72">the end of PNG meta data you add HTML bootstrap that look asbit like this.</span> </p>
<p><span data-start="1181.72" data-end="1189.67">So, what it does is basically it puts an image but loads harsh\h‑‑ per page, the image</span> <span data-start="1189.67" data-end="1199.94">and loads it, puts the fix sells on the canvas\h‑‑ and with that you get about 40\hpercent compression</span> <span data-start="1199.94" data-end="1210.62">ratio, the impact here is about 160, 170 bytes, but it compresses at 40\hpercent so at 1 K</span> <span data-start="1210.62" data-end="1222.43">you get\h‑‑ I've seen 4‑kilo byte intros that were actually 20‑kilo bytes when not</span> <span data-start="1222.43" data-end="1228.95">compressed with this technique. Once you have compressed your demo, it's time to bring it</span> <span data-start="1228.95" data-end="1236.63">to 11, so if you are above your target size, it's time to really get dirty and to arrange</span> <span data-start="1236.63" data-end="1242.31">your code and trick it. You need to move the code around and to try to increase number</span> <span data-start="1242.31" data-end="1248.19">of patterns so that the code come presses better, sometimes just moving things around</span> <span data-start="1248.19" data-end="1254.76">how you set some CSS propertytion or different values, just moving them around makes a difference</span> <span data-start="1254.76" data-end="1258.56">of five to ten bytes in the compressed ratio.</span> <span data-start="1258.56" data-end="1264">So it's\h‑‑ yeah, if you're above your target you need to really shuffle things around</span> <span data-start="1264" data-end="1269.58">and sighe so how it goes, if you're below your target size, also you have enough bytes</span> <span data-start="1269.58" data-end="1275.29">to actually work on the show, so it's nice to try to not give everything away in the</span> <span data-start="1275.29" data-end="1283.05">first ten seconds. So, try to work on the timeline, on the camera, so it's pretty boring</span> <span data-start="1283.05" data-end="1290.09">to see like 3 D objects, distant through\h‑‑ for 2 minutes nice to move the camera around,</span> <span data-start="1290.09" data-end="1296.45">makes it a bit more interesting, try to change your color over time and space, to again make</span> <span data-start="1296.45" data-end="1305.88">things a bit more live and just not give everything away too quickly. So now, I think it's about</span> <span data-start="1305.88" data-end="1315.78">demo time. So, here's a project I did a few months back and\h‑‑ yeah. Here it goes</span> <span data-start="1315.78" data-end="1342.55">this is one kilo byte. just (Applause).</span> <span data-start="1342.55" data-end="1394.821"Audience member: So, now this is your turn. I mentioned many things, but it's actually lots of small</span> <span data-start="1394.821" data-end="1401.64">things, it's not black magic, you can build these things with many, many small things</span> <span data-start="1401.64" data-end="1407.79">and just playing around with things, so don't be afraid, this is not\h‑‑ this is really</span> <span data-start="1407.79" data-end="1415.2">not black magic, you can do it. And it's super rewarding to do these kind of things. As I</span> <span data-start="1415.2" data-end="1422.15">said there's many demo parties, throughout the year. The next one that I can think of</span> <span data-start="1422.15" data-end="1427.86">are function in Budapest in one month. Deadline here in Berlin if one month and Demojs in</span> </p>
<p><span data-start="1427.86" data-end="1435.41">Paris in five weeks you have no excuse to not make something and send them a mail, and,</span> <span data-start="1435.41" data-end="1440.65">some of these democrat mow parties have a live stream where you can watch them compose</span> <span data-start="1440.65" data-end="1447.59">live. And it's awesome. Seeing your demos on the big screen and hearing the audience</span> <span data-start="1447.59" data-end="1454.37">applaud and screen, it's like blowing your mind, do it. It's so cool. Here's a couple</span> <span data-start="1454.37" data-end="1462.32">of web sites to get to know a bit more about the demo scene. Yeah. Just visit them you</span> <span data-start="1462.32" data-end="1474.8">will\h‑‑ the last one, it can take thick skin to take jokes there, so, again, thank</span> </p>
</section>