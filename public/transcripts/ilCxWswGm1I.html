<section>
<p><span data-start="18.74" data-end="21.86">the presentations called test Alejo</span> <span data-start="21.86" data-end="25.23">squeezing ketsu tiny mobile tubes my</span> <span data-start="25.23" data-end="27.3">name is Felix caisson defer and I'm</span> <span data-start="27.3" data-end="29.669">involved in a bunch of projects one of</span> <span data-start="29.669" data-end="32.129">them is note copter note copters the</span> <span data-start="32.129" data-end="33.69">full day went of programming flying</span> <span data-start="33.69" data-end="36.39">robots with JavaScript we started this</span> <span data-start="36.39" data-end="38.07">in Berlin last year at she askin for you</span> <span data-start="38.07" data-end="39.87">and the people I saw with with are</span> <span data-start="39.87" data-end="41.79">actually here there's torsten Robin and</span> </p>
<p><span data-start="41.79" data-end="44.46">Tim and what's really fun is that here</span> <span data-start="44.46" data-end="46.199">Jess conf yes we're actually able to do</span> <span data-start="46.199" data-end="47.82">node cop the event for the activity day</span> <span data-start="47.82" data-end="50.76">tomorrow so I'll not say too much about</span> <span data-start="50.76" data-end="52.339">this I'll just give you a little teaser</span> <span data-start="52.339" data-end="54.18">this is kind of what it's going to look</span> <span data-start="54.18" data-end="56.82">like so if you want to come maybe you</span> <span data-start="56.82" data-end="58.5">can trade with somebody if you haven't</span> <span data-start="58.5" data-end="60.299">signed up already what's this should be</span> <span data-start="60.299" data-end="62.729">fun unfortunately I don't get to play</span> <span data-start="62.729" data-end="65.729">with flying robots for living so have a</span> <span data-start="65.729" data-end="67.71">day job i'm a co-founder at this company</span> <span data-start="67.71" data-end="70.65">at least we have a robot in the logo so</span> <span data-start="70.65" data-end="73.32">that's good so we're called trans loaded</span> <span data-start="73.32" data-end="75.299">and we do file uploading and file</span> <span data-start="75.299" data-end="76.95">processing as a service so we help</span> <span data-start="76.95" data-end="78.78">companies receive user-generated media</span> <span data-start="78.78" data-end="80.58">files and then we convert videos and</span> <span data-start="80.58" data-end="82.53">images and all that stuff and we censor</span> <span data-start="82.53" data-end="84.03">original files in the modified stuff</span> <span data-start="84.03" data-end="87.27">back I've also been involved with a no</span> <span data-start="87.27" data-end="89.25">chess project I was one of the first</span> <span data-start="89.25" data-end="90.96">contributors to no trace and did a lot</span> <span data-start="90.96" data-end="94.32">of early contributions the reason this</span> <span data-start="94.32" data-end="96.899">happened was when we built trans noted</span> <span data-start="96.899" data-end="99.539">we were trying to get upload progress</span> <span data-start="99.539" data-end="102.03">bars for users and back when we did says</span> <span data-start="102.03" data-end="103.82">this was really hard to do in javascript</span> <span data-start="103.82" data-end="106.59">basically the only option you had was to</span> <span data-start="106.59" data-end="108.899">constantly ask your web server hey I'm</span> <span data-start="108.899" data-end="110.579">uploading this file right now how much</span> <span data-start="110.579" data-end="112.259">data have you received so far and so you</span> <span data-start="112.259" data-end="114.479">keep pulling the web server and in order</span> <span data-start="114.479" data-end="115.859">to actually be able to pull the web</span> <span data-start="115.859" data-end="117.6">server like this the web server kind of</span> <span data-start="117.6" data-end="119.159">needs to be aware of that you're going</span> <span data-start="119.159" data-end="120.719">to pull him and said that it keeps track</span> <span data-start="120.719" data-end="122.52">of the upload the streams and this was</span> <span data-start="122.52" data-end="124.259">really hard with the web server said</span> <span data-start="124.259" data-end="125.609">we're outside back then most notably</span> </p>
<p><span data-start="125.609" data-end="130.35">Mabley Apache and we saw nodejs and no</span> <span data-start="130.35" data-end="131.91">chairs was really great because suddenly</span> <span data-start="131.91" data-end="133.44">we could do this really easily on the</span> <span data-start="133.44" data-end="135.84">application level we would just use the</span> <span data-start="135.84" data-end="137.76">normal node HTTP stuff and would be able</span> <span data-start="137.76" data-end="139.95">to stream and upload in and send kind of</span> <span data-start="139.95" data-end="141.69">keep track of the state for the clients</span> <span data-start="141.69" data-end="143.49">asking about the upload progress though</span> <span data-start="143.49" data-end="145.98">that was fun but we were using node way</span> <span data-start="145.98" data-end="148.29">too early so I ended up spending more</span> <span data-start="148.29" data-end="149.79">time contributing to know it and fixing</span> <span data-start="149.79" data-end="150.91">bugs and doing stuff</span> <span data-start="150.91" data-end="152.99">working on the startup but it was fun</span> <span data-start="152.99" data-end="155">these days I don't do much of the note</span> <span data-start="155" data-end="156.98">core anymore but a maintains the modules</span> <span data-start="156.98" data-end="159.08">and maintains a MySQL module which is a</span> <span data-start="159.08" data-end="160.97">pure JavaScript implementation of my</span> <span data-start="160.97" data-end="163.28">sequel protocol and I do formidable</span> <span data-start="163.28" data-end="165.83">which is a module for parsing</span> <span data-start="165.83" data-end="167.36">multi-platform data and I'm going to</span> <span data-start="167.36" data-end="170.21">talk about this in a bit a little bit</span> <span data-start="170.21" data-end="172.19">blasphemy I'm kind of moving away from</span> <span data-start="172.19" data-end="175.73">nodejs these days to go I will not say</span> <span data-start="175.73" data-end="176.96">too much about go but it's really</span> <span data-start="176.96" data-end="178.76">beautiful language so if you want to</span> <span data-start="178.76" data-end="180.23">hear more about it to find me later and</span> </p>
<p><span data-start="180.23" data-end="183.77">I'll talk your ear off and yeah check it</span> <span data-start="183.77" data-end="185.54">out I haven't contributed yet but I plan</span> <span data-start="185.54" data-end="188.84">to and we kind of went to bed very late</span> <span data-start="188.84" data-end="190.58">last night so chances are i'm going to</span> <span data-start="190.58" data-end="192.23">say stupid stuff and incorrect stuff</span> <span data-start="192.23" data-end="194.69">when this happens just let me know so I</span> <span data-start="194.69" data-end="196.43">can kind of clarify afterwards or</span> <span data-start="196.43" data-end="198.92">something so let's get started let's</span> <span data-start="198.92" data-end="201.2">talk about file uploads and let's kind</span> <span data-start="201.2" data-end="203.03">of put things into perspective about how</span> <span data-start="203.03" data-end="204.8">we get file uploads on the internet or</span> <span data-start="204.8" data-end="206.9">can is a history there's so this trip</span> <span data-start="206.9" data-end="210.8">starts in 1971 1971 was great because we</span> <span data-start="210.8" data-end="215.48">get this thing called ftp you have to</span> <span data-start="215.48" data-end="217.1">appreciate how long ever time this was</span> <span data-start="217.1" data-end="220.09">to go so i'll see 114 was published in</span> <span data-start="220.09" data-end="223.25">1971 this was three years before tcp/ip</span> <span data-start="223.25" data-end="226.88">we had ftp which i saw it was insane and</span> <span data-start="226.88" data-end="228.41">two must have taking a lot of foresight</span> <span data-start="228.41" data-end="229.73">i actually don't know what's networking</span> <span data-start="229.73" data-end="232.22">stacks were at that time and what's also</span> <span data-start="232.22" data-end="234.14">amazing that ftp it kind of remains the</span> <span data-start="234.14" data-end="236.48">state of art of internet uploads for 25</span> <span data-start="236.48" data-end="238.28">years so if you wanted to bring files to</span> <span data-start="238.28" data-end="241.57">the internet you'd usually use ftp</span> <span data-start="241.57" data-end="244.67">what's kind of said about it ftp it's</span> <span data-start="244.67" data-end="246.44">not said that it's being replaced but</span> <span data-start="246.44" data-end="247.64">it's kind of sad that it's being</span> <span data-start="247.64" data-end="249.38">replaced by a proprietary technology</span> <span data-start="249.38" data-end="251.69">mostly amazon s3 and I'll kind of talk</span> <span data-start="251.69" data-end="253.76">about this a little bit later but let's</span> <span data-start="253.76" data-end="255.59">fast forward for 25 years basically</span> <span data-start="255.59" data-end="257.69">nothing happens uploads on the web don't</span> <span data-start="257.69" data-end="260.32">change and then 1995 comes around and</span> <span data-start="260.32" data-end="263.18">1925 was a cool year a bunch of things</span> <span data-start="263.18" data-end="265.7">happened PHP happened for the better or</span> <span data-start="265.7" data-end="268.52">worse internet explorer happened for the</span> <span data-start="268.52" data-end="270.74">better or worse javascript happened for</span> <span data-start="270.74" data-end="272.83">the better or worse hopefully the better</span> </p>
<p><span data-start="272.83" data-end="275.54">HTML 2 20 s release there was the first</span> <span data-start="275.54" data-end="277.76">time HTML was standardized and it gave</span> <span data-start="277.76" data-end="280.4">browsers a way to implement it in a more</span> <span data-start="280.4" data-end="282.409">compatible fashion than before</span> <span data-start="282.409" data-end="284.899">and just a day after this there was a</span> <span data-start="284.899" data-end="286.58">new off see coming out which described</span> <span data-start="286.58" data-end="289.309">how to do file uploads through HTML this</span> <span data-start="289.309" data-end="290.899">was later on merchant with the HTML</span> <span data-start="290.899" data-end="293.899">specification and was part of HTML 3 and</span> <span data-start="293.899" data-end="297.83">it's now still part of html5 and this</span> <span data-start="297.83" data-end="301.339">was RC 1867 form-based file upload in</span> <span data-start="301.339" data-end="303.529">HTML you may be familiar with other</span> <span data-start="303.529" data-end="305.269">works FC all services this was done by</span> <span data-start="305.269" data-end="308.029">larry maher center and one notable RFC</span> <span data-start="308.029" data-end="311.599">he has also worked on is RC 2324 does</span> <span data-start="311.599" data-end="314.059">anybody know what is this this is a</span> <span data-start="314.059" data-end="316.969">hypertext coffee pot control protocol so</span> <span data-start="316.969" data-end="319.939">if you've ever received the 418 I'm a</span> <span data-start="319.939" data-end="321.679">teapot status code from a web server</span> <span data-start="321.679" data-end="323.839">that's this evil genius at work it's</span> </p>
<p><span data-start="323.839" data-end="328.099">Larry anyway I admire this RC because it</span> <span data-start="328.099" data-end="329.539">made something that is kind of complex</span> <span data-start="329.539" data-end="331.999">underneath incredibly easy and I kind of</span> <span data-start="331.999" data-end="333.139">want to show you how easy you've all</span> <span data-start="333.139" data-end="334.519">done this before but I kind of want to</span> <span data-start="334.519" data-end="336.289">go through the troll a little bit so</span> <span data-start="336.289" data-end="340.729">let's let's do programming all right so</span> <span data-start="340.729" data-end="342.199">let's say we want to do a file upload</span> <span data-start="342.199" data-end="343.759">and we want to do it like we would do it</span> <span data-start="343.759" data-end="346.55">in 1995 so we're doing this form that</span> <span data-start="346.55" data-end="348.619">HTML thing and we're going to do this</span> <span data-start="348.619" data-end="351.169">form and it's going to get it's a font</span> <span data-start="351.169" data-end="355.55">size okay for everybody okay cool we're</span> <span data-start="355.55" data-end="356.779">going to get it an action let's say</span> <span data-start="356.779" data-end="361.339">we're going to /a action as post no no</span> <span data-start="361.339" data-end="365.199">no no too late last night messages post</span> <span data-start="365.199" data-end="368.99">and the action of / and one of the</span> <span data-start="368.99" data-end="370.789">things GRC defined was an encoding type</span> <span data-start="370.789" data-end="373.759">before we had and it's called</span> <span data-start="373.759" data-end="379.969">multi-platform data like this before we</span> <span data-start="379.969" data-end="381.259">have multi-part formed at us the only</span> <span data-start="381.259" data-end="383.419">way to get form submitted on the web</span> <span data-start="383.419" data-end="385.789">worse by URL encoding them and doing</span> <span data-start="385.789" data-end="387.589">this with files is technically possible</span> <span data-start="387.589" data-end="390.019">but the escaping mechanism would blow up</span> <span data-start="390.019" data-end="392.059">the payload quite a bit so you would</span> <span data-start="392.059" data-end="394.009">have a two or 3x increase in payload</span> <span data-start="394.009" data-end="395.3">size because you have all these e escape</span> <span data-start="395.3" data-end="397.399">sequence is going on and so people they</span> <span data-start="397.399" data-end="399.11">had to come up with a new format to kind</span> <span data-start="399.11" data-end="400.099">of put files into and those whose</span> <span data-start="400.099" data-end="403.459">multi-platform data another thing that</span> <span data-start="403.459" data-end="406.099">they did sa extended the input element</span> <span data-start="406.099" data-end="408.169">and they created this input type called</span> <span data-start="408.169" data-end="412.219">file and we're going to put this gives</span> <span data-start="412.219" data-end="414.63">us a name and say my upload</span> <span data-start="414.63" data-end="417.15">on now we need a little submit button</span> <span data-start="417.15" data-end="421.91">this was actually part of HTML before</span> <span data-start="421.91" data-end="430.02">submit value and some / form okay this</span> <span data-start="430.02" data-end="435.93">should give us a file uploader okay so</span> <span data-start="435.93" data-end="437.61">you've seen this before this is</span> <span data-start="437.61" data-end="439.32">basically the file selection element</span> <span data-start="439.32" data-end="441.39">notoriously difficult to start with CSS</span> <span data-start="441.39" data-end="444.39">but it works and what you can do is you</span> <span data-start="444.39" data-end="446.01">can choose a file and we can select this</span> <span data-start="446.01" data-end="448.68">tiny image here and hit submit and</span> <span data-start="448.68" data-end="450.87">nothing happens why does nothing</span> <span data-start="450.87" data-end="452.04">happened because we haven't written a</span> <span data-start="452.04" data-end="455.97">backend for it so it's 1995 we don't</span> <span data-start="455.97" data-end="457.17">have a lot of options for back in</span> <span data-start="457.17" data-end="459.69">technology so let's use my 1995</span> <span data-start="459.69" data-end="464.4">technology its use PHP let's go and do</span> </p>
<p><span data-start="464.4" data-end="470.27">PHP and what this looks like is this</span> <span data-start="470.27" data-end="476.64">print our files and I'll show you first</span> <span data-start="476.64" data-end="477.69">how it works then I'll talk a bit a</span> <span data-start="477.69" data-end="479.64">little bit about it what we can do now</span> <span data-start="479.64" data-end="486.21">oh there's one mistake form that PHP all</span> <span data-start="486.21" data-end="489.39">right now we need a web server and these</span> <span data-start="489.39" data-end="493.43">days luckily PHP does ship with one and</span> <span data-start="493.43" data-end="497.25">we can do form that PHP and we can</span> <span data-start="497.25" data-end="500.16">select the file and hit submit and</span> <span data-start="500.16" data-end="502.38">what's this is basically doing is we</span> <span data-start="502.38" data-end="503.91">just implemented file uploading so</span> <span data-start="503.91" data-end="506.01">forcing front-end and back-end we were</span> <span data-start="506.01" data-end="508.23">just hitting submit button to payload</span> <span data-start="508.23" data-end="510.33">get encoding multi-platform data PHP</span> <span data-start="510.33" data-end="512.37">automatically picked up on that decoded</span> <span data-start="512.37" data-end="514.14">sub payload and gave us reference to the</span> <span data-start="514.14" data-end="517.229">file on disk as a temporary file there's</span> <span data-start="517.229" data-end="520.11">a lot of problems with this but what I</span> <span data-start="520.11" data-end="522.45">think is amazing is that this to me is</span> <span data-start="522.45" data-end="524.34">the appropriate amount of complexity</span> <span data-start="524.34" data-end="525.75">file uploading should have on the web</span> <span data-start="525.75" data-end="527.37">and anything thats kind of gets more</span> <span data-start="527.37" data-end="529.56">complex is kind of and we've</span> <span data-start="529.56" data-end="531.09">gotten a lot worse with this over time</span> <span data-start="531.09" data-end="533.34">and i'll talk about this so this is this</span> <span data-start="533.34" data-end="535.89">is a really cool in terms of complexity</span> <span data-start="535.89" data-end="537.81">what's not so cool is that features were</span> <span data-start="537.81" data-end="540.03">missing so what's most notable about</span> <span data-start="540.03" data-end="542.34">this is that this wasn't really a</span> <span data-start="542.34" data-end="546.24">scriptable via JavaScript so we most</span> <span data-start="546.24" data-end="547.98">notably had no way to get up</span> <span data-start="547.98" data-end="550.17">progress events so the user was uploaded</span> <span data-start="550.17" data-end="551.7">file and we would get no feedback on</span> <span data-start="551.7" data-end="554.16">what's going on and even worse the</span> <span data-start="554.16" data-end="555.72">process at the time when Damon shown</span> <span data-start="555.72" data-end="557.07">existence the status bar at the bottom</span> <span data-start="557.07" data-end="559.35">so the user had virtually virtually no</span> <span data-start="559.35" data-end="562.02">indication so what happened on the web</span> <span data-start="562.02" data-end="564.86">for a while we can enter the dark ages</span> <span data-start="564.86" data-end="567.87">people look for solutions and the way</span> <span data-start="567.87" data-end="569.28">happy to take anything coming along the</span> <span data-start="569.28" data-end="571.59">way and flash it was and this was a huge</span> <span data-start="571.59" data-end="573.72">step back from what we had in 1995 sure</span> <span data-start="573.72" data-end="575.46">we get file upload progress events but</span> <span data-start="575.46" data-end="576.9">dealing with these flash-based uploaders</span> <span data-start="576.9" data-end="579.15">was just a huge pain in the ass we had</span> <span data-start="579.15" data-end="580.59">to deal with us for a very long time</span> <span data-start="580.59" data-end="584.1">which is unfortunate then like Lisa</span> <span data-start="584.1" data-end="585.57">standard bodies started moving again</span> <span data-start="585.57" data-end="587.19">after kind of taking a break for quite a</span> <span data-start="587.19" data-end="590.1">bit and in 2008 they came up with this</span> <span data-start="590.1" data-end="592.56">xml httprequest level two which is</span> <span data-start="592.56" data-end="595.47">basically HX version 2 and they added a</span> <span data-start="595.47" data-end="596.88">bunch of new features they basically</span> <span data-start="596.88" data-end="598.41">give us the ability to file uploads</span> <span data-start="598.41" data-end="600.69">previously HX could do file uploads they</span> <span data-start="600.69" data-end="602.25">give us progress events for up and down</span> <span data-start="602.25" data-end="604.37">loads they gave us cross-site request</span> <span data-start="604.37" data-end="607.08">which is useful and they gave us a form</span> <span data-start="607.08" data-end="608.64">data interface which actually allows us</span> <span data-start="608.64" data-end="610.71">to create this multi-part formed at our</span> <span data-start="610.71" data-end="613.56">request when using HX very easily and</span> <span data-start="613.56" data-end="616.2">this is now part of the official hhx</span> <span data-start="616.2" data-end="618.09">petrification it was merged into the</span> <span data-start="618.09" data-end="620.13">main spec and it's good to go and in</span> <span data-start="620.13" data-end="622.2">fact it's actually widely implemented at</span> <span data-start="622.2" data-end="624.17">this point so seventy percent of all</span> <span data-start="624.17" data-end="626.52">browsers that people are using have</span> <span data-start="626.52" data-end="629.25">support for this API the most notable</span> <span data-start="629.25" data-end="630.78">exception is always Internet Explorer</span> <span data-start="630.78" data-end="633.6">didn't have it until version 10 but so</span> <span data-start="633.6" data-end="634.71">if you have to support file uploads</span> <span data-start="634.71" data-end="636.15">really well and Internet Explorer you</span> <span data-start="636.15" data-end="638.04">will have to go back to the dark ages or</span> <span data-start="638.04" data-end="640.53">do other unholy things but for all the</span> <span data-start="640.53" data-end="644.04">new stuff it works really well 2009 they</span> <span data-start="644.04" data-end="646.44">released another API as a file API</span> <span data-start="646.44" data-end="648.63">what's the file API does it basically</span> <span data-start="648.63" data-end="650.82">takes these file input elements and</span> <span data-start="650.82" data-end="653.13">gives them a new property called dot</span> <span data-start="653.13" data-end="655.05">files and this is essentially an array</span> <span data-start="655.05" data-end="657.06">of file objects there's a file interface</span> <span data-start="657.06" data-end="659.42">this gives you name and last modified</span> <span data-start="659.42" data-end="661.92">and a bunch of other informations file</span> <span data-start="661.92" data-end="665.34">size of the file and you can kind of</span> <span data-start="665.34" data-end="666.63">play with it it also gives you a way to</span> <span data-start="666.63" data-end="668.85">slice so you can say file that slice</span> <span data-start="668.85" data-end="672.06">right 100 to 200 and this returns a blob</span> <span data-start="672.06" data-end="674.37">what's important about this is the plot</span> <span data-start="674.37" data-end="675.78">that this point doesn't get loaded into</span> <span data-start="675.78" data-end="678.09">memory you just get a reference to it so</span> <span data-start="678.09" data-end="679.17">if you actually want to load it into</span> <span data-start="679.17" data-end="681.03">memory and breathe this data you have to</span> <span data-start="681.03" data-end="681.67">use the file</span> <span data-start="681.67" data-end="683.56">either interface kinda flower reader</span> <span data-start="683.56" data-end="686.5">interface takes a file or a plot object</span> <span data-start="686.5" data-end="688.78">and allows you to read the data in it's</span> <span data-start="688.78" data-end="689.92">a little weird but it works really well</span> <span data-start="689.92" data-end="692.08">and security Isis is also fine because</span> <span data-start="692.08" data-end="694.03">you only get access to files if you user</span> <span data-start="694.03" data-end="695.62">has selected them so you cannot just</span> <span data-start="695.62" data-end="697.8">take random stuff from the hard disk</span> <span data-start="697.8" data-end="701.14">what else so this is available and</span> <span data-start="701.14" data-end="703.24">sixty-five percent of all browsers again</span> <span data-start="703.24" data-end="704.8">the same limitation Internet Explorer</span> <span data-start="704.8" data-end="708.82">version 10 is where it starts so you'd</span> <span data-start="708.82" data-end="710.74">assume that by now everything is kind of</span> <span data-start="710.74" data-end="715.15">very good I'm actually one second get my</span> <span data-start="715.15" data-end="717.76">purse n denote the back so you would</span> <span data-start="717.76" data-end="718.93">assume that by now we have seized</span> <span data-start="718.93" data-end="721.03">powerful API and file uploading on the</span> <span data-start="721.03" data-end="722.62">web should just be amazing and so much</span> <span data-start="722.62" data-end="725.8">fun to do and easy but I don't think</span> <span data-start="725.8" data-end="727.84">that's the case I think we made a huge</span> <span data-start="727.84" data-end="729.4">amount of backwards progress in terms of</span> <span data-start="729.4" data-end="731.95">simplicity in 1995 we had an appropriate</span> <span data-start="731.95" data-end="734.05">amount of simplicity but we don't have</span> <span data-start="734.05" data-end="736.3">this anymore even worse we don't even</span> <span data-start="736.3" data-end="738.19">have two features while to implement we</span> <span data-start="738.19" data-end="739.87">could do these things but we don't have</span> <span data-start="739.87" data-end="742.06">them so let's take one example that I</span> <span data-start="742.06" data-end="744.19">find very important and this is the</span> <span data-start="744.19" data-end="746.98">sample of resume ability right now a lot</span> <span data-start="746.98" data-end="748.9">of file upload us on the web like resume</span> <span data-start="748.9" data-end="751.84">ability and by resume ability I mean you</span> <span data-start="751.84" data-end="753.61">get to ninety-nine ninety-nine percent</span> <span data-start="753.61" data-end="755.14">of an upload something happens and</span> <span data-start="755.14" data-end="757.87">basically the SU hey there was an error</span> <span data-start="757.87" data-end="760.27">can you upload this again and this is a</span> <span data-start="760.27" data-end="762.16">few lucky if you're unlucky the progress</span> <span data-start="762.16" data-end="763.66">bar just stops and doesn't tell me</span> <span data-start="763.66" data-end="766.39">anything it was kind of unacceptable and</span> </p>
<p><span data-start="766.39" data-end="768.25">I believe that this is actually the</span> <span data-start="768.25" data-end="769.81">major reason why millions of cat videos</span> <span data-start="769.81" data-end="773.22">get lost every year on the internet and</span> <span data-start="773.22" data-end="775.3">this is also a problem when you kind of</span> <span data-start="775.3" data-end="777.31">look at the landscape HD cameras are</span> <span data-start="777.31" data-end="778.78">everywhere now if you buy a new device</span> <span data-start="778.78" data-end="780.97">with a camera it will be HD and you get</span> <span data-start="780.97" data-end="783.37">these huge file sizes so a 45 second</span> <span data-start="783.37" data-end="785.77">video clip on iphone 5 is 100 megabytes</span> <span data-start="785.77" data-end="787.87">that's a lot of data and unfortunately</span> <span data-start="787.87" data-end="789.49">our app links are hardly keeping up with</span> <span data-start="789.49" data-end="791.14">this I mean they're a thing so the</span> <span data-start="791.14" data-end="792.46">download is usually faster than the</span> <span data-start="792.46" data-end="794.59">upload and so kind of slow so if you</span> <span data-start="794.59" data-end="796.72">have a Wi-Fi with a backing 5m bit</span> <span data-start="796.72" data-end="799.06">connection uploading this 45-second clip</span> <span data-start="799.06" data-end="801.73">takes you two and a half minutes it only</span> <span data-start="801.73" data-end="804.76">gets worse from here lt10 to be 340 edge</span> <span data-start="804.76" data-end="807.61">66 minutes this is terrible when you</span> <span data-start="807.61" data-end="808.78">consider that we're living in a world</span> <span data-start="808.78" data-end="810.55">where we can measure how 100</span> <span data-start="810.55" data-end="812.11">milliseconds make a difference in user</span> <span data-start="812.11" data-end="813.769">behavior and revenue so</span> <span data-start="813.769" data-end="816.499">you're looking at minutes here you don't</span> <span data-start="816.499" data-end="818.059">want to this up because if you</span> <span data-start="818.059" data-end="819.439">this up people will not come back</span> <span data-start="819.439" data-end="821.089">this up people will not come back to your site and if you run on a</span> <span data-start="821.089" data-end="822.499">business model like Facebook or Twitter</span> <span data-start="822.499" data-end="823.97">where you show these activity streams</span> <span data-start="823.97" data-end="825.649">you really need that content because I</span> <span data-start="825.649" data-end="827.209">don't go on facebook to look at walls of</span> <span data-start="827.209" data-end="828.739">text I look at the pictures people</span> <span data-start="828.739" data-end="830.389">upload and I look at the videos so you</span> <span data-start="830.389" data-end="832.309">really want to nail this so how come</span> <span data-start="832.309" data-end="835.069">does not be a solve problem and how</span> <span data-start="835.069" data-end="837.92">could we even do this so let's say we</span> <span data-start="837.92" data-end="839.299">want a sausage let's say we want to do</span> <span data-start="839.299" data-end="842.049">this how can we resume an HTTP upload</span> <span data-start="842.049" data-end="846.199">well whenever you have an HTTP you kind</span> <span data-start="846.199" data-end="848.029">of consult the ancient scripture and by</span> <span data-start="848.029" data-end="851.709">that i mean our see 2616 HTTP one at one</span> <span data-start="851.709" data-end="853.91">actually HTTP is a lot like ancient</span> <span data-start="853.91" data-end="856.069">scripture and the Bible so people</span> <span data-start="856.069" data-end="857.779">basically think they understand</span> <span data-start="857.779" data-end="859.009">everything and it explains the whole</span> <span data-start="859.009" data-end="860.48">world but they really they're just pick</span> <span data-start="860.48" data-end="861.949">and choose parts that they like and</span> <span data-start="861.949" data-end="867.559">probably even get so strong so um let's</span> <span data-start="867.559" data-end="869.809">htp doesn't say anything about uploads</span> <span data-start="869.809" data-end="871.489">but it says something about this kind of</span> <span data-start="871.489" data-end="873.829">similar range requests what range</span> <span data-start="873.829" data-end="875.209">requests do is they allow you to</span> <span data-start="875.209" data-end="876.889">retrieve a partial file from a web</span> <span data-start="876.889" data-end="878.54">server so you can send a header called</span> <span data-start="878.54" data-end="880.429">range and you can say i want to i don't</span> <span data-start="880.429" data-end="882.589">know first 100 bytes of a file and the</span> <span data-start="882.589" data-end="884.42">web server understands this it will</span> <span data-start="884.42" data-end="886.04">reply with the content range header that</span> <span data-start="886.04" data-end="887.809">kind of acknowledges that it's now</span> <span data-start="887.809" data-end="890.48">transmitting a part of this file so this</span> <span data-start="890.48" data-end="892.49">is good and it looks kind of like it</span> <span data-start="892.49" data-end="894.47">would be useful for uploads so companies</span> <span data-start="894.47" data-end="895.97">have started to use these headers for</span> <span data-start="895.97" data-end="899.629">uploads most notably YouTube they have</span> <span data-start="899.629" data-end="901.759">an API for resumable uploads and it's</span> <span data-start="901.759" data-end="904.059">based on the Google gears protocol and</span> <span data-start="904.059" data-end="907.1">they do a bunch of terrible things say</span> <span data-start="907.1" data-end="909.11">and then the new status code 308 resume</span> <span data-start="909.11" data-end="911.119">incomplete this is in violation of</span> <span data-start="911.119" data-end="913.73">upcoming specifications I guess if you</span> <span data-start="913.73" data-end="915.589">google you can invent status codes and</span> <span data-start="915.589" data-end="917.269">not bother to register them but I think</span> <span data-start="917.269" data-end="918.679">this ball gets him in trouble and it's</span> <span data-start="918.679" data-end="920.179">also an interoperability problem with a</span> <span data-start="920.179" data-end="922.72">lot of libraries and server side stuff</span> <span data-start="922.72" data-end="924.889">they use as I said it's the content</span> <span data-start="924.889" data-end="926.959">range and range chatters and unfortunate</span> <span data-start="926.959" data-end="928.459">part about this is they are also in</span> <span data-start="928.459" data-end="930.379">violation of upcoming specification so</span> <span data-start="930.379" data-end="931.549">they are working on the HTTP</span> <span data-start="931.549" data-end="934.429">specification again the HTTP bit working</span> <span data-start="934.429" data-end="936.169">group and one of the things they define</span> <span data-start="936.169" data-end="938.029">the set put requests which YouTube is</span> <span data-start="938.029" data-end="939.919">using must explicitly not use these</span> <span data-start="939.919" data-end="942.439">headers when they talk to a server so it</span> <span data-start="942.439" data-end="944.299">works but you really shouldn't do it</span> <span data-start="944.299" data-end="946.15">according to specification</span> <span data-start="946.15" data-end="949.33">and they also use put to query would you</span> <span data-start="949.33" data-end="951.43">scatter head for this to get the upload</span> <span data-start="951.43" data-end="954.22">status it's kind of weird API but the</span> <span data-start="954.22" data-end="955.72">last thing is kind of most important</span> <span data-start="955.72" data-end="957.58">they actually have two similar protocol</span> <span data-start="957.58" data-end="958.84">internally that's your use for google</span> <span data-start="958.84" data-end="962.11">drive it's also public API and it</span> <span data-start="962.11" data-end="964.3">actually looks a lot like the YouTube</span> <span data-start="964.3" data-end="966.31">protocol but it's slightly incompatible</span> <span data-start="966.31" data-end="969.22">and what's this says to me is that even</span> </p>
<p><span data-start="969.22" data-end="970.87">Google cannot figure out how to make</span> <span data-start="970.87" data-end="973.39">this work with HTTP they can make it</span> <span data-start="973.39" data-end="975.04">work but they cannot figure out how to</span> <span data-start="975.04" data-end="976.57">do it really well it's not it's not</span> <span data-start="976.57" data-end="980.53">solved so assuming that it's not really</span> <span data-start="980.53" data-end="982.24">solved in HTTP what else is kind of</span> <span data-start="982.24" data-end="984.31">around in terms of prior art there's ms</span> <span data-start="984.31" data-end="985.45">on a three which is big if you're</span> <span data-start="985.45" data-end="986.68">dealing with files on the web right now</span> <span data-start="986.68" data-end="988.75">they have a thing called multi-part API</span> <span data-start="988.75" data-end="990.46">which is the most terrible name ever</span> <span data-start="990.46" data-end="991.66">because it has nothing to do with</span> <span data-start="991.66" data-end="993.49">multi-platform data which is what prod</span> <span data-start="993.49" data-end="997">uploads to the web but or whatever what</span> <span data-start="997" data-end="998.92">it allows you to do is to send files and</span> <span data-start="998.92" data-end="1001.17">chunks so you define the chunk size</span> <span data-start="1001.17" data-end="1003.39">let's say a few megabytes and then you</span> <span data-start="1003.39" data-end="1005.1">cut the file at these chunk intervals</span> <span data-start="1005.1" data-end="1006.36">and you make individual requests</span> <span data-start="1006.36" data-end="1008.87">uploading these chunks of the file and</span> <span data-start="1008.87" data-end="1011.07">protocols not entirely unreasonable I</span> <span data-start="1011.07" data-end="1013.41">mean sir API is a little weird but it's</span> <span data-start="1013.41" data-end="1015.75">doable one thing that's really sucks</span> <span data-start="1015.75" data-end="1017.22">about it this has a five megabyte</span> <span data-start="1017.22" data-end="1020.01">minimum chunk size so if there's a</span> <span data-start="1020.01" data-end="1022.17">network error you have to kind of go</span> <span data-start="1022.17" data-end="1023.67">back five megabytes in the worst case</span> <span data-start="1023.67" data-end="1025.14">and if you're on a mobile connections</span> <span data-start="1025.14" data-end="1026.459">that really has a lot of network errors</span> <span data-start="1026.459" data-end="1028.47">and it is very slow this may mean that</span> <span data-start="1028.47" data-end="1030.209">you never make progress you used to just</span> <span data-start="1030.209" data-end="1031.74">keep repeating the same chunk over and</span> <span data-start="1031.74" data-end="1033.72">over again it's not really ideal maybe</span> <span data-start="1033.72" data-end="1036.69">they can fix it maybe not um biggest</span> <span data-start="1036.69" data-end="1038.4">problem I see with Amazon s3 is that its</span> <span data-start="1038.4" data-end="1040.41">proprietary and this wouldn't be a</span> <span data-start="1040.41" data-end="1042.45">problem by itself but Amazon s3 has kind</span> <span data-start="1042.45" data-end="1044.85">of become such a force that open source</span> <span data-start="1044.85" data-end="1047.12">storage solutions has adopted the api's</span> <span data-start="1047.12" data-end="1050.04">just to be able to be compatible with</span> <span data-start="1050.04" data-end="1051.63">the existing ecosystem of client</span> <span data-start="1051.63" data-end="1053.67">libraries and this is really really bad</span> <span data-start="1053.67" data-end="1055.56">because we used to have an open standard</span> <span data-start="1055.56" data-end="1057.54">and protocol for this this was ftp</span> <span data-start="1057.54" data-end="1059.64">unfortunately ftp is not web technology</span> <span data-start="1059.64" data-end="1063">so nobody is using ftp anymore but now</span> <span data-start="1063" data-end="1065.4">that amazon s3 is kind of dominating the</span> <span data-start="1065.4" data-end="1067.62">way that we exchange files with web</span> <span data-start="1067.62" data-end="1069.96">servers people implement their stuff now</span> <span data-start="1069.96" data-end="1070.98">what happens if they want to make</span> <span data-start="1070.98" data-end="1073.11">changes to the protocol they cannot make</span> <span data-start="1073.11" data-end="1074.25">any changes that are incompatible</span> <span data-start="1074.25" data-end="1075.9">because then they lose the reason why</span> <span data-start="1075.9" data-end="1077.28">they chose to go down this route to</span> <span data-start="1077.28" data-end="1079.2">begin with</span> <span data-start="1079.2" data-end="1080.85">and what essentially happens to see have</span> <span data-start="1080.85" data-end="1082.889">to go to amazon and i think amazon has</span> <span data-start="1082.889" data-end="1084.96">literally zero interest to work on open</span> <span data-start="1084.96" data-end="1086.279">standards and to work with the community</span> <span data-start="1086.279" data-end="1088.019">and to work with anybody unless you pay</span> <span data-start="1088.019" data-end="1089.19">them a lot of money which is a</span> <span data-start="1089.19" data-end="1090.96">reasonable approach to business but it's</span> <span data-start="1090.96" data-end="1092.22">not really good approach to have an open</span> <span data-start="1092.22" data-end="1095.149">web so amazon has we even if the API or</span> <span data-start="1095.149" data-end="1097.23">protocol for resumable uploads was</span> <span data-start="1097.23" data-end="1098.76">create which should never be under</span> <span data-start="1098.76" data-end="1102.389">consideration what should you use if you</span> <span data-start="1102.389" data-end="1103.529">actually want to solve this problem</span> <span data-start="1103.529" data-end="1105.059">today and you just want to solve it with</span> </p>
<p><span data-start="1105.059" data-end="1106.889">JavaScript as inks this library is great</span> <span data-start="1106.889" data-end="1109.23">it's called resumable pjs it's actually</span> <span data-start="1109.23" data-end="1112.11">based on multi-platform data files are</span> <span data-start="1112.11" data-end="1113.88">split into fixed size chunks similar to</span> <span data-start="1113.88" data-end="1115.649">the s3 protocol you can choose your own</span> <span data-start="1115.649" data-end="1118.95">chunk size as as probably the best open</span> <span data-start="1118.95" data-end="1120.389">source solution that's out there right</span> <span data-start="1120.389" data-end="1123.24">now it works really well and say they</span> <span data-start="1123.24" data-end="1125.73">kind of define a protocol so you don't</span> <span data-start="1125.73" data-end="1127.47">have to kind of go through the steps and</span> <span data-start="1127.47" data-end="1130.2">figure out how to do it over HTTP like</span> <span data-start="1130.2" data-end="1131.789">you would do with other JavaScript based</span> <span data-start="1131.789" data-end="1133.919">uploaders unfortunately this is not to</span> <span data-start="1133.919" data-end="1135.84">find us a standard and this is not a</span> <span data-start="1135.84" data-end="1137.7">problem all you care about is solving</span> <span data-start="1137.7" data-end="1139.679">this problem for your little wet damp</span> <span data-start="1139.679" data-end="1142.169">and doing it only in JavaScript but it</span> <span data-start="1142.169" data-end="1143.789">creates a situation where we have seized</span> <span data-start="1143.789" data-end="1146.96">one thousand one week project of</span> <span data-start="1146.96" data-end="1149.58">solutions that barely work and just keep</span> <span data-start="1149.58" data-end="1150.99">repeating this stuff over and over again</span> <span data-start="1150.99" data-end="1152.88">and it just cannot compete with the</span> <span data-start="1152.88" data-end="1154.23">power we would have and the simplicity</span> <span data-start="1154.23" data-end="1156.57">we would have this was a standard so</span> <span data-start="1156.57" data-end="1158.399">what could happen first of all what's</span> <span data-start="1158.399" data-end="1160.32">addition observation is adding resumable</span> <span data-start="1160.32" data-end="1161.94">file uploads should take five minutes</span> <span data-start="1161.94" data-end="1163.47">instead of five hours I think that</span> <span data-start="1163.47" data-end="1165.809">should be the basic goal like the 1995</span> <span data-start="1165.809" data-end="1167.789">level of complexity in demo i was</span> <span data-start="1167.789" data-end="1168.84">showing we should be able to do this</span> <span data-start="1168.84" data-end="1171.72">life right now without using a huge</span> <span data-start="1171.72" data-end="1175.95">amount of external libraries and if it</span> <span data-start="1175.95" data-end="1177.99">said what's the case the future could</span> <span data-start="1177.99" data-end="1180.12">look like this is just but I</span> <span data-start="1180.12" data-end="1182.039">entertained the sword for a second we</span> <span data-start="1182.039" data-end="1183.63">could have a resumable attribute</span> <span data-start="1183.63" data-end="1185.25">informed and this would make a former</span> <span data-start="1185.25" data-end="1187.35">assumably upload a ball and then pull</span> <span data-start="1187.35" data-end="1189.21">the HX stuff you would also just have a</span> <span data-start="1189.21" data-end="1191.19">property called resumable on the HX</span> <span data-start="1191.19" data-end="1193.47">object and would make sure that on HX</span> <span data-start="1193.47" data-end="1195.48">request is resumable and so how can we</span> <span data-start="1195.48" data-end="1197.58">get to this future well unfortunately</span> <span data-start="1197.58" data-end="1199.23">nobody is working on this problem right</span> <span data-start="1199.23" data-end="1201.389">now nobody's working on anything for</span> <span data-start="1201.389" data-end="1203.58">resumable uploads so we kind of thought</span> <span data-start="1203.58" data-end="1205.38">ok let's start this project and we call</span> <span data-start="1205.38" data-end="1207.69">the toss today oh and what toss today oh</span> <span data-start="1207.69" data-end="1209.82">is it's an informal working group to</span> <span data-start="1209.82" data-end="1212.94">resume resumable file uploads over HTTP</span> <span data-start="1212.94" data-end="1214.83">this is a fancy way of saying that we're</span> <span data-start="1214.83" data-end="1215.97">a bunch of people on github and</span> <span data-start="1215.97" data-end="1219.81">everybody can join and help we are also</span> <span data-start="1219.81" data-end="1223.17">a collection of open source project that</span> <span data-start="1223.17" data-end="1225.66">implements the draft specifications we</span> <span data-start="1225.66" data-end="1228.51">do this for HTML iOS and Android as well</span> <span data-start="1228.51" data-end="1230.91">as server side platforms like noches go</span> </p>
<p><span data-start="1230.91" data-end="1233.43">Ruby Python PHP etc and the reason we do</span> <span data-start="1233.43" data-end="1235.86">this at this early point is to just see</span> <span data-start="1235.86" data-end="1237.45">if what we are defining makes sense if</span> <span data-start="1237.45" data-end="1240.21">it's portable and if the end result is</span> <span data-start="1240.21" data-end="1241.41">something that's nice and that we would</span> <span data-start="1241.41" data-end="1245.73">want to use the goal for this is to</span> <span data-start="1245.73" data-end="1247.8">publish this as an internet Engineering</span> </p>
<p><span data-start="1247.8" data-end="1250.17">Task Force standard as an RFC and if we</span> <span data-start="1250.17" data-end="1252.27">could get there to this point the future</span> <span data-start="1252.27" data-end="1253.65">could be really nice because then</span> <span data-start="1253.65" data-end="1255.48">languages could just thought start</span> <span data-start="1255.48" data-end="1257.13">building this into the back end and when</span> <span data-start="1257.13" data-end="1258.48">you use file uploading it will always be</span> <span data-start="1258.48" data-end="1260.04">resumable on the back end you don't have</span> <span data-start="1260.04" data-end="1261.69">to worry about it its built-in same on</span> <span data-start="1261.69" data-end="1263.58">the front end you'll just have the stuff</span> <span data-start="1263.58" data-end="1265.65">available maybe in web browsers maybe</span> <span data-start="1265.65" data-end="1267.42">you have to use the library but it will</span> <span data-start="1267.42" data-end="1268.92">just be much easier and there will be</span> <span data-start="1268.92" data-end="1270.57">one way to do it you will not have to</span> <span data-start="1270.57" data-end="1272.25">ask yourself am I using the right HTTP</span> <span data-start="1272.25" data-end="1275.88">headers am I doing this correctly and we</span> <span data-start="1275.88" data-end="1277.62">can also do this for mobile I mean</span> <span data-start="1277.62" data-end="1279.21">people here don't want to develop mobile</span> <span data-start="1279.21" data-end="1281.55">apps finish our script conference but if</span> <span data-start="1281.55" data-end="1283.47">you do native mobile you also need a way</span> <span data-start="1283.47" data-end="1285">to do this and maybe your company has to</span> <span data-start="1285" data-end="1287.1">shoot all kinds of apps native web and</span> <span data-start="1287.1" data-end="1289.08">native mobile so it's good to have a</span> <span data-start="1289.08" data-end="1290.7">protocol so what does all protocol look</span> <span data-start="1290.7" data-end="1292.43">like I'll just go over it real quickly</span> <span data-start="1292.43" data-end="1294.84">at this point we have this protocol</span> <span data-start="1294.84" data-end="1296.64">where you do post request against a</span> <span data-start="1296.64" data-end="1298.29">well-known URL you can define this</span> <span data-start="1298.29" data-end="1300.39">anything you would like here we use /</span> <span data-start="1300.39" data-end="1303.72">files then you use two headers content</span> <span data-start="1303.72" data-end="1305.1">lengths which is an existing header you</span> <span data-start="1305.1" data-end="1307.56">sub set to 0 and final lengths which is</span> <span data-start="1307.56" data-end="1309.69">a new header we're proposing which we're</span> <span data-start="1309.69" data-end="1311.88">setting to 100 here what this means is</span> <span data-start="1311.88" data-end="1313.83">we're essentially creating an empty file</span> <span data-start="1313.83" data-end="1315.99">on server and with letting the server</span> <span data-start="1315.99" data-end="1317.46">knows that we are intending to upload</span> <span data-start="1317.46" data-end="1319.68">100 bytes into it so its final length of</span> <span data-start="1319.68" data-end="1321.6">this file will be 100 bytes but we're</span> <span data-start="1321.6" data-end="1323.04">not uploading it yet which just asked me</span> <span data-start="1323.04" data-end="1324.75">to server to create the mt resource and</span> <span data-start="1324.75" data-end="1326.34">the server responds with the location</span> <span data-start="1326.34" data-end="1328.98">header saying hey I created this</span> <span data-start="1328.98" data-end="1331.14">resource for you at / files / one for</span> <span data-start="1331.14" data-end="1333.15">example we just get a fully full</span> <span data-start="1333.15" data-end="1335.04">absolute view ALB and then we can start</span> <span data-start="1335.04" data-end="1337.32">the actual upload and the upload would</span> <span data-start="1337.32" data-end="1339.03">be done with a pet request if you're not</span> <span data-start="1339.03" data-end="1340.95">familiar with patch it's a new HTTP</span> <span data-start="1340.95" data-end="1342.9">methods that we specified or released in</span> <span data-start="1342.9" data-end="1345.21">2010 Realtors now heavily adopting it</span> <span data-start="1345.21" data-end="1347.1">and it's meant to modify</span> <span data-start="1347.1" data-end="1349.14">files without completely replacing zamp</span> <span data-start="1349.14" data-end="1350.7">so the tube partial in place</span> <span data-start="1350.7" data-end="1353.25">modification of resources and so we</span> <span data-start="1353.25" data-end="1355.53">would do a pet request again / file / 1</span> <span data-start="1355.53" data-end="1357.5">which is ul we get from the server and</span> <span data-start="1357.5" data-end="1359.789">what we would do by default is try to</span> <span data-start="1359.789" data-end="1361.32">upload the whole thing so we did</span> <span data-start="1361.32" data-end="1363.96">content-length to 100 offset 20 I'll</span> <span data-start="1363.96" data-end="1365.58">talk about this in a second and then we</span> <span data-start="1365.58" data-end="1367.59">just sent a whole file if this succeeds</span> <span data-start="1367.59" data-end="1371.82">we receive a 200 ok status code if this</span> <span data-start="1371.82" data-end="1374.61">doesn't didn't work we have to ask the</span> <span data-start="1374.61" data-end="1376.71">server how much data received because on</span> <span data-start="1376.71" data-end="1379.2">bsd sockets and most most libraries we</span> <span data-start="1379.2" data-end="1381.059">reduce we do not gets information how</span> <span data-start="1381.059" data-end="1382.98">much data was actually sent across the</span> <span data-start="1382.98" data-end="1384.9">wire successfully and if it was received</span> <span data-start="1384.9" data-end="1388.47">do we have to ask the server so we would</span> <span data-start="1388.47" data-end="1390.63">do a head request to doing that so we do</span> <span data-start="1390.63" data-end="1392.61">a head request again / file / one which</span> <span data-start="1392.61" data-end="1394.38">is our ul and thence the server could</span> <span data-start="1394.38" data-end="1396.51">reply with an offset header which would</span> <span data-start="1396.51" data-end="1398.19">tell us how many bytes did you receive</span> <span data-start="1398.19" data-end="1399.96">so in this case the server's like hey I</span> <span data-start="1399.96" data-end="1402">received 70 bites and something terrible</span> <span data-start="1402" data-end="1404.49">happened so now we can use this</span> <span data-start="1404.49" data-end="1406.08">information to do another pet request</span> <span data-start="1406.08" data-end="1408.03">and now we set to Compton like 230 and</span> <span data-start="1408.03" data-end="1410.22">see offset 270 and this basically allows</span> <span data-start="1410.22" data-end="1412.5">us to upload the remaining 30 bites and</span> <span data-start="1412.5" data-end="1414.09">the server will know where to apply them</span> <span data-start="1414.09" data-end="1417.51">it's pretty simple we're also as I</span> <span data-start="1417.51" data-end="1418.98">mentioned lamenting clients and servers</span> <span data-start="1418.98" data-end="1420.809">we have a reference implementation go</span> <span data-start="1420.809" data-end="1423.39">because I want to play with this we have</span> <span data-start="1423.39" data-end="1426.23">the noche s server that was imminent</span> <span data-start="1426.23" data-end="1429.539">contributed by narrow and from return to</span> <span data-start="1429.539" data-end="1432.809">community we have jquery iOS and a</span> </p>
<p><span data-start="1432.809" data-end="1434.88">Python client and if you want to play</span> <span data-start="1434.88" data-end="1436.53">with this in kind of experiment if you</span> <span data-start="1436.53" data-end="1438.059">want to do this for Ruby or some other</span> <span data-start="1438.059" data-end="1439.98">language go ahead and edit to this page</span> <span data-start="1439.98" data-end="1441.45">but really interesting and see more</span> <span data-start="1441.45" data-end="1444.45">stuff we also have an idea for an</span> <span data-start="1444.45" data-end="1446.46">alternative protocol I'll just go over</span> <span data-start="1446.46" data-end="1449.22">this really briefly it would also be</span> <span data-start="1449.22" data-end="1450.96">possible to take a more form centric</span> <span data-start="1450.96" data-end="1452.4">approach and deal with the fact that</span> <span data-start="1452.4" data-end="1454.32">forms consist of multiple fields and</span> <span data-start="1454.32" data-end="1456.99">kind of broaden the scope of this</span> <span data-start="1456.99" data-end="1459.09">project a little bit the benefit of this</span> <span data-start="1459.09" data-end="1460.77">is that we could be compatible with the</span> <span data-start="1460.77" data-end="1462.99">alt request and we could potentially</span> <span data-start="1462.99" data-end="1465.179">make it this more seamless upgrade where</span> <span data-start="1465.179" data-end="1466.77">you don't have to completely change the</span> <span data-start="1466.77" data-end="1469.53">way you upload stuff there's good end up</span> <span data-start="1469.53" data-end="1472.289">more complex but potentially also more</span> <span data-start="1472.289" data-end="1474.179">powerful we'll see if we go this route</span> <span data-start="1474.179" data-end="1475.98">for now the other thing that I showed</span> <span data-start="1475.98" data-end="1477.54">you looks like the most promising</span> <span data-start="1477.54" data-end="1479.37">candidate another thing we're really</span> <span data-start="1479.37" data-end="1480.6">interested in is upload</span> <span data-start="1480.6" data-end="1484.2">acceleration we want to explore how we</span> <span data-start="1484.2" data-end="1486.18">can make file uploads faster and the</span> <span data-start="1486.18" data-end="1488.25">idea behind this is set tcp performance</span> <span data-start="1488.25" data-end="1490.98">over multiple mobile networks is not</span> <span data-start="1490.98" data-end="1493.32">always ideal and this really depends on</span> <span data-start="1493.32" data-end="1495.24">many many factors it depends on the</span> <span data-start="1495.24" data-end="1496.98">congestion window package loss link</span> <span data-start="1496.98" data-end="1499.05">layer latency and it's really complex</span> <span data-start="1499.05" data-end="1501.69">subject I mean you would assume that for</span> <span data-start="1501.69" data-end="1503.85">example the TCP protocol takes care of</span> <span data-start="1503.85" data-end="1505.59">resending lost packages and you can</span> <span data-start="1505.59" data-end="1506.94">build a mental model of the network</span> <span data-start="1506.94" data-end="1508.89">based on this but it's actually not the</span> <span data-start="1508.89" data-end="1510.24">full truth when you go to mobile</span> <span data-start="1510.24" data-end="1512.4">networks for example LTE it will</span> <span data-start="1512.4" data-end="1513.87">actually do similar things on a link</span> <span data-start="1513.87" data-end="1515.64">layer so LTE will actually recent</span> <span data-start="1515.64" data-end="1517.67">packages on the link layer IP packages</span> <span data-start="1517.67" data-end="1519.99">so when you're trying to model this on</span> <span data-start="1519.99" data-end="1522.06">how it TCP work it's just not going to</span> <span data-start="1522.06" data-end="1523.86">work what I'm saying is this is very</span> <span data-start="1523.86" data-end="1526.17">complex but it's also very likely that</span> </p>
<p><span data-start="1526.17" data-end="1527.94">TCP doesn't always choose the optimal</span> <span data-start="1527.94" data-end="1529.56">window size to get optimal throughput</span> <span data-start="1529.56" data-end="1531.48">and so there may be benefits to using</span> <span data-start="1531.48" data-end="1532.89">parallel requests and parallel</span> <span data-start="1532.89" data-end="1534.84">connections for single upload this would</span> <span data-start="1534.84" data-end="1536.4">mean extending our protocol a little bit</span> <span data-start="1536.4" data-end="1538.5">because the server will need to reply</span> <span data-start="1538.5" data-end="1540.15">with multiple offset but it's something</span> <span data-start="1540.15" data-end="1542.49">we want to explore before we want to add</span> <span data-start="1542.49" data-end="1544.11">such complexity we want to study this on</span> <span data-start="1544.11" data-end="1546.36">the real world conditions so we want to</span> <span data-start="1546.36" data-end="1548.04">create a little app or something where</span> <span data-start="1548.04" data-end="1549.39">people can try this out all over the</span> <span data-start="1549.39" data-end="1550.89">world under different network conditions</span> <span data-start="1550.89" data-end="1552.96">and we can actually get a lot of data on</span> <span data-start="1552.96" data-end="1554.64">the different upload methods and see if</span> <span data-start="1554.64" data-end="1556.97">there's actually performance benefit I</span> <span data-start="1556.97" data-end="1559.38">think we can show a little demo of what</span> <span data-start="1559.38" data-end="1564.24">this looks like so on right now when you</span> <span data-start="1564.24" data-end="1567.18">go to toss that I oh and you click on</span> <span data-start="1567.18" data-end="1569.52">demo you have this little demo uploader</span> <span data-start="1569.52" data-end="1571.35">which implements the current protocol</span> <span data-start="1571.35" data-end="1573.81">it's using the jQuery client and the go</span> <span data-start="1573.81" data-end="1576.96">server and we can choose a file here</span> <span data-start="1576.96" data-end="1583.77">that was too big let's choose a smaller</span> <span data-start="1583.77" data-end="1587.58">file</span> <span data-start="1587.59" data-end="1591.52">come on demo gods if resumable uploads</span> <span data-start="1591.52" data-end="1594.58">should work actually hang on a second I</span> <span data-start="1594.58" data-end="1604.22">need to rename this file</span> <span data-start="1604.23" data-end="1607.81">right</span> <span data-start="1607.82" data-end="1610.28">okay so we have this upload here and now</span> <span data-start="1610.28" data-end="1612.14">let's interrupt it we could force a</span> <span data-start="1612.14" data-end="1614.39">network error here but we could also do</span> <span data-start="1614.39" data-end="1615.71">something different closing the browser</span> <span data-start="1615.71" data-end="1617.3">this essentially kills the upload</span> <span data-start="1617.3" data-end="1619.04">connection but it's actually an</span> <span data-start="1619.04" data-end="1620.33">interesting use case because it was</span> <span data-start="1620.33" data-end="1622.43">killed by the user the user became</span> <span data-start="1622.43" data-end="1623.96">impatient and just close the window and</span> <span data-start="1623.96" data-end="1628.64">now if we came back to test today oh and</span> <span data-start="1628.64" data-end="1631.4">we go to demo we click to choose file we</span> <span data-start="1631.4" data-end="1633.47">can select this file again and we're</span> <span data-start="1633.47" data-end="1635.15">lucky it continues to upload right where</span> <span data-start="1635.15" data-end="1637.28">we left off how does this actually work</span> <span data-start="1637.28" data-end="1638.66">how does it know where to resume once</span> <span data-start="1638.66" data-end="1640.28">the browser was closed because that</span> <span data-start="1640.28" data-end="1643.34">state has to be kept somewhere what we</span> <span data-start="1643.34" data-end="1645.38">were doing for this is we were using the</span> <span data-start="1645.38" data-end="1649.04">protocol for one but also when if pile</span> <span data-start="1649.04" data-end="1651.29">is selected we take the file name file</span> <span data-start="1651.29" data-end="1654.62">size and last modified field and we</span> <span data-start="1654.62" data-end="1656.6">combine these into an ID for the file</span> <span data-start="1656.6" data-end="1662.6">and we take CC IDs and we maps them to</span> <span data-start="1662.6" data-end="1664.64">the URLs that we get from the initial</span> <span data-start="1664.64" data-end="1667.1">post request so we creates a file with</span> <span data-start="1667.1" data-end="1668.99">post we get a location header with the</span> </p>
<p><span data-start="1668.99" data-end="1671.57">URL and then we take local storage and</span> <span data-start="1671.57" data-end="1674.12">we use a file id as defined up here and</span> <span data-start="1674.12" data-end="1677.27">we map it to the upload URLs that we got</span> <span data-start="1677.27" data-end="1680.18">and what this basically allows us when</span> <span data-start="1680.18" data-end="1682.61">somebody's like to file again we'll know</span> <span data-start="1682.61" data-end="1684.35">that this file was already the upload</span> <span data-start="1684.35" data-end="1685.79">already started before and we know the</span> <span data-start="1685.79" data-end="1687.65">URL for it so we can do a head request</span> <span data-start="1687.65" data-end="1689.24">to inquire how much data is there and</span> <span data-start="1689.24" data-end="1690.83">where we need to continue this is not</span> <span data-start="1690.83" data-end="1693.05">perfect but it's simple by not perfect I</span> <span data-start="1693.05" data-end="1694.88">mean it's conceivable that somebody has</span> <span data-start="1694.88" data-end="1696.62">a flower was the same name sighs and</span> <span data-start="1696.62" data-end="1698.9">last modified time on his disk and he</span> <span data-start="1698.9" data-end="1700.34">wants to upload both of them on the same</span> <span data-start="1700.34" data-end="1702.98">size I don't think it happens a lot so I</span> <span data-start="1702.98" data-end="1704.87">think it's reasonable for now but if it</span> <span data-start="1704.87" data-end="1706.73">does happen a lot and we need to deal</span> <span data-start="1706.73" data-end="1708.08">with it we can improve this by actually</span> <span data-start="1708.08" data-end="1711.4">using a sha-1 checksum for the file ID</span> <span data-start="1711.4" data-end="1713.93">this is kind of a little slow still but</span> </p>
<p><span data-start="1713.93" data-end="1715.43">I think this is going to get lost faster</span> <span data-start="1715.43" data-end="1718.37">things to stuff like smgs has everybody</span> <span data-start="1718.37" data-end="1720.68">seen a SMS where's the end ok cool</span> <span data-start="1720.68" data-end="1723.53">everybody knows this so this is this and</span> <span data-start="1723.53" data-end="1725.84">other JavaScript engine optimizations</span> <span data-start="1725.84" data-end="1727.88">are going to make check sums viable very</span> <span data-start="1727.88" data-end="1731.36">soon um I think we're almost done here</span> <span data-start="1731.36" data-end="1733.7">beach time ah you should join us if you</span> <span data-start="1733.7" data-end="1735.02">care about resumable uploads and you</span> <span data-start="1735.02" data-end="1736.67">care about doing it right and not just</span> <span data-start="1736.67" data-end="1738.11">doing these one-off solutions anymore</span> <span data-start="1738.11" data-end="1739.64">and kind of fix a WEP a little bit</span> <span data-start="1739.64" data-end="1741.2">better so this is one project to help us</span> <span data-start="1741.2" data-end="1741.85">with</span> <span data-start="1741.85" data-end="1744.02">we're already seeing some interest from</span> <span data-start="1744.02" data-end="1745.61">bigger companies as well for example</span> <span data-start="1745.61" data-end="1747.98">vimeo came out and one of the developers</span> <span data-start="1747.98" data-end="1750.47">is working with us they're using a AP I</span> <span data-start="1750.47" data-end="1752.63">very similar to what YouTube is using</span> <span data-start="1752.63" data-end="1754.37">right now and say sees the same problem</span> <span data-start="1754.37" data-end="1756.26">with it that it's kind of taking HTTP</span> <span data-start="1756.26" data-end="1758.03">and abusing it in a way it's not</span> <span data-start="1758.03" data-end="1759.68">supposed to be used so they are</span> <span data-start="1759.68" data-end="1760.85">interested in working with this one of</span> <span data-start="1760.85" data-end="1762.86">the developers is helping out and I</span> <span data-start="1762.86" data-end="1764.54">think there's a good amount of interest</span> <span data-start="1764.54" data-end="1767.48">from the community of all that's it</span> <span data-start="1767.48" data-end="1774.44">questions</span> </p>
<p><span data-start="1774.45" data-end="1781.11">I have a question can we go to the beach</span> <span data-start="1781.11" data-end="1792.99">now okay so the question is if we also</span> <span data-start="1792.99" data-end="1796.71">include progress events know our our</span> <span data-start="1796.71" data-end="1798.63">protocol is basically just the network</span> <span data-start="1798.63" data-end="1800.85">protocol so the progress depends on the</span> <span data-start="1800.85" data-end="1802.68">API you have if you have JavaScript used</span> <span data-start="1802.68" data-end="1805.23">to javascript stuff of xhr too if you</span> <span data-start="1805.23" data-end="1807.9">are native you use iOS libraries and</span> <span data-start="1807.9" data-end="1810.87">callbacks whatever you have but it's not</span> <span data-start="1810.87" data-end="1820.88">part of all right is there a reasonable</span> <span data-start="1820.88" data-end="1822.75">expectations that the partial upload</span> <span data-start="1822.75" data-end="1825.12">will stick around for a while that's a</span> <span data-start="1825.12" data-end="1826.98">good question so one problem is that</span> <span data-start="1826.98" data-end="1829.05">somebody starts uploading a file then he</span> <span data-start="1829.05" data-end="1830.58">close this browser and he comes back two</span> <span data-start="1830.58" data-end="1831.9">years later and once to resume the</span> <span data-start="1831.9" data-end="1833.46">upload do we keep the partial file</span> <span data-start="1833.46" data-end="1836.15">around for two years I think this goes</span> <span data-start="1836.15" data-end="1837.84">potentially a little outside of the</span> <span data-start="1837.84" data-end="1839.61">protocol itself but i think the protocol</span> <span data-start="1839.61" data-end="1840.87">will include the sections that makes</span> <span data-start="1840.87" data-end="1842.49">recommendations for how long to keep</span> <span data-start="1842.49" data-end="1844.68">files around I don't know if we need a</span> <span data-start="1844.68" data-end="1846.72">way to negotiate this between client and</span> <span data-start="1846.72" data-end="1848.43">server because if the file is not there</span> <span data-start="1848.43" data-end="1850.47">it basically gets a poor for when it</span> <span data-start="1850.47" data-end="1851.85">does the head request and then it just</span> <span data-start="1851.85" data-end="1853.74">starts the upload again so it's not a</span> <span data-start="1853.74" data-end="1855.39">deal breaker so the server can decide</span> <span data-start="1855.39" data-end="1864.39">how long to keep the fault</span> <span data-start="1864.4" data-end="1867.11">okay the question is what happens if i</span> <span data-start="1867.11" data-end="1869.03">send patch requests for somebody else's</span> <span data-start="1869.03" data-end="1872.99">upload the answer to that is first you</span> <span data-start="1872.99" data-end="1875.03">should use this over HTTPS if you care</span> <span data-start="1875.03" data-end="1876.71">about security and then you should use</span> <span data-start="1876.71" data-end="1878.69">your l's when you do the post request</span> <span data-start="1878.69" data-end="1881.18">it's up to you to return a random URL or</span> <span data-start="1881.18" data-end="1884.39">like how to guess URL so just use a uuid</span> <span data-start="1884.39" data-end="1886.97">or something in your return location and</span> </p>
<p><span data-start="1886.97" data-end="1888.44">I think that should make covers a</span> <span data-start="1888.44" data-end="1893.15">problem entirely alright let's go to the</span> </p>
</section>