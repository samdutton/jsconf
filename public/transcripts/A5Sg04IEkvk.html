<section>
<p><span data-start="10.16" data-end="12.96">I'm gonna talk about CoffeeScript which</span> <span data-start="12.96" data-end="15.089">is a little language that is written in</span> <span data-start="15.089" data-end="18.15">itself and compiles to JavaScript so I</span> <span data-start="18.15" data-end="19.8">was pretty interested in a lot of what</span> <span data-start="19.8" data-end="21.27">Crockford was just saying couple minutes</span> <span data-start="21.27" data-end="24.57">ago over in the other in track' about</span> <span data-start="24.57" data-end="26.46">all of the sort of deficiencies and</span> <span data-start="26.46" data-end="27.539">things that people aren't satisfied with</span> <span data-start="27.539" data-end="29.699">in JavaScript and things that could have</span> <span data-start="29.699" data-end="30.96">been done better bad parts that should</span> <span data-start="30.96" data-end="33.239">be left out and you know it should be</span> <span data-start="33.239" data-end="35.309">kind of like a human right but for but</span> <span data-start="35.309" data-end="36.719">for coders that you should have a coders</span> <span data-start="36.719" data-end="38.67">right to have javascript be the language</span> <span data-start="38.67" data-end="41.94">that you want it to be and and because</span> <span data-start="41.94" data-end="44.37">javascript has such a nice clean</span> <span data-start="44.37" data-end="48.03">functional object-oriented lexically</span> <span data-start="48.03" data-end="50.43">scoped core you can build a lot of</span> <span data-start="50.43" data-end="51.75">interesting languages on top of it</span> <span data-start="51.75" data-end="53.309">without having to get too far away from</span> <span data-start="53.309" data-end="56.399">what the core idea of javascript is so</span> <span data-start="56.399" data-end="58.199">could I get a quick show of hands of how</span> <span data-start="58.199" data-end="58.859">many of you have played with</span> </p>
<p><span data-start="58.859" data-end="61.35">CoffeeScript before all right so that's</span> <span data-start="61.35" data-end="63.51">a that's a pretty good mix so I'm gonna</span> <span data-start="63.51" data-end="64.71">go quickly through some of the language</span> <span data-start="64.71" data-end="67.68">features what it does differently than</span> <span data-start="67.68" data-end="69">JavaScript and then also how its</span> <span data-start="69" data-end="70.02">implemented if you want to write</span> <span data-start="70.02" data-end="71.58">something like this for your own</span> <span data-start="71.58" data-end="73.59">language that would be however however</span> <span data-start="73.59" data-end="77.13">you sell fit so let's see here</span> <span data-start="77.13" data-end="79.08">this talk is gonna be pretty rapid-fire</span> <span data-start="79.08" data-end="80.549">it's also just gonna be all codes so we</span> <span data-start="80.549" data-end="82.08">can if you have any questions feel free</span> <span data-start="82.08" data-end="83.43">to raise your hand in the middle and we</span> <span data-start="83.43" data-end="85.32">can change things and recompile it and</span> <span data-start="85.32" data-end="88.259">see see how it works so so there's kind</span> <span data-start="88.259" data-end="90.11">of three main aspects to the idea of</span> <span data-start="90.11" data-end="91.95">doing this you know there's a lot of</span> <span data-start="91.95" data-end="93.99">languages I mean I guess the other one</span> <span data-start="93.99" data-end="94.71">of the other really big ones is</span> <span data-start="94.71" data-end="97.439">objective J which puts Objective C into</span> </p>
<p><span data-start="97.439" data-end="99.27">JavaScript but to do that you have to</span> <span data-start="99.27" data-end="101.85">have kind of an entire runtime but the</span> <span data-start="101.85" data-end="104.85">idea here is not so much to support an</span> <span data-start="104.85" data-end="106.229">existing language like Python or Ruby</span> <span data-start="106.229" data-end="108.63">into JavaScript directly but instead to</span> <span data-start="108.63" data-end="110.939">take the core of JavaScript and to clean</span> <span data-start="110.939" data-end="112.77">out all the syntax that you know looks</span> <span data-start="112.77" data-end="114.09">like Java but you don't really need and</span> <span data-start="114.09" data-end="116.34">to also clean up some of the semantics</span> <span data-start="116.34" data-end="119.189">so things like var how you know you have</span> <span data-start="119.189" data-end="120.299">to use var the first time you declare</span> <span data-start="120.299" data-end="122.549">the variable never again thereafter and</span> <span data-start="122.549" data-end="124.079">you almost always need to use it the</span> <span data-start="124.079" data-end="125.25">first time because you don't want it to</span> <span data-start="125.25" data-end="127.28">be global so things like that go away</span> <span data-start="127.28" data-end="129.869">things like like statements go away</span> <span data-start="129.869" data-end="131.16">everything is an expression in</span> </p>
<p><span data-start="131.16" data-end="133.69">CoffeeScript so you can pass the</span> <span data-start="133.69" data-end="136.12">result of an if statement directly back</span> <span data-start="136.12" data-end="138.4">to you can assign it to a variable you</span> <span data-start="138.4" data-end="140.95">can pass it back to a callback that sort</span> <span data-start="140.95" data-end="143.02">of thing so that's the second aspect we</span> <span data-start="143.02" data-end="144.19">have that we have the cleaned up syntax</span> <span data-start="144.19" data-end="146.32">we have we have cleaned up semantics and</span> <span data-start="146.32" data-end="147.85">there's also extra goodies so language</span> <span data-start="147.85" data-end="150.85">features like slices splats that's the</span> <span data-start="150.85" data-end="152.8">very attic arguments that the Crockford</span> <span data-start="152.8" data-end="155.61">is talking about before you have</span> <span data-start="155.61" data-end="157.54">comprehensions instead of low-level</span> <span data-start="157.54" data-end="160.3">loops and all all kinds of extra goodies</span> <span data-start="160.3" data-end="161.86">that we can there's some things that you</span> <span data-start="161.86" data-end="164.11">can't do like Brian was just talking</span> <span data-start="164.11" data-end="165.55">about like with method missing you can't</span> <span data-start="165.55" data-end="168.25">do that without actually either having</span> <span data-start="168.25" data-end="170.32">an interpreter or having you know or</span> <span data-start="170.32" data-end="171.79">intercepting every single object call</span> <span data-start="171.79" data-end="173.83">that you ever do so those kinds if</span> <span data-start="173.83" data-end="174.4">there's some things that are just</span> <span data-start="174.4" data-end="175.99">impossible but the things that we can do</span> <span data-start="175.99" data-end="180.07">we try to so the gold so that that</span> <span data-start="180.07" data-end="181.6">brings us to the golden rule is that</span> <span data-start="181.6" data-end="183.55">it's just JavaScript it's not it's not</span> <span data-start="183.55" data-end="185.44">it's not a runtime it's not an</span> <span data-start="185.44" data-end="187.18">interpreter there's no special functions</span> <span data-start="187.18" data-end="188.59">really allowed and that's a rule we</span> <span data-start="188.59" data-end="190.42">break slightly but but we're not going</span> <span data-start="190.42" data-end="191.41">to be injecting a whole bunch of</span> </p>
<p><span data-start="191.41" data-end="193.24">CoffeeScript specific library functions</span> <span data-start="193.24" data-end="194.77">into your code in general it just</span> <span data-start="194.77" data-end="196.9">translates into the equivalent</span> <span data-start="196.9" data-end="200.65">JavaScript so it leaves a lot of things</span> <span data-start="200.65" data-end="202.63">out it is a smaller language then then</span> <span data-start="202.63" data-end="204.31">JavaScript is you don't have with you</span> <span data-start="204.31" data-end="205.69">don't have semicolons or semicolon</span> <span data-start="205.69" data-end="206.709">insertion to deal with and you're</span> <span data-start="206.709" data-end="208.6">parsing you don't have to worry about</span> <span data-start="208.6" data-end="210.4">trailing commas there's no difference</span> <span data-start="210.4" data-end="212.17">between the colon inside of the object</span> <span data-start="212.17" data-end="214.09">to assign a property versus variable</span> <span data-start="214.09" data-end="217.15">assignment outside syntax wise no</span> <span data-start="217.15" data-end="218.77">implicit global variables because that's</span> <span data-start="218.77" data-end="221.26">taken care of for you you don't even</span> <span data-start="221.26" data-end="222.58">have to worry about low-level for loops</span> <span data-start="222.58" data-end="223.989">because instead you have comprehensions</span> <span data-start="223.989" data-end="225.34">and if you really really need the</span> <span data-start="225.34" data-end="227.41">low-level loop you can use awhile so</span> <span data-start="227.41" data-end="228.64">that's the one that we do expose and</span> <span data-start="228.64" data-end="230.05">that can be that's the general have to</span> <span data-start="230.05" data-end="232.239">be transformed into into anything else</span> <span data-start="232.239" data-end="234.55">and no difference between turn areas and</span> <span data-start="234.55" data-end="235.87">if else's right so in JavaScript you</span> <span data-start="235.87" data-end="237.16">have an F else that's a statement you</span> <span data-start="237.16" data-end="238.93">can't return that value but a ternary is</span> <span data-start="238.93" data-end="241.15">an expression and you can and there's no</span> <span data-start="241.15" data-end="242.5">real reason that they need to be two</span> <span data-start="242.5" data-end="244.39">separate things so let's start with the</span> <span data-start="244.39" data-end="248.14">basic basically a function so here you</span> <span data-start="248.14" data-end="249.85">have a JavaScript function it's it's</span> <span data-start="249.85" data-end="252.1">assigned to a variable named square it's</span> <span data-start="252.1" data-end="254.019">also named so that if you need to debug</span> <span data-start="254.019" data-end="255.04">it you'll actually have a name in what</span> <span data-start="255.04" data-end="257.41">you say anonymous and you're gonna</span> <span data-start="257.41" data-end="259.15">return you're taking a number X you</span> <span data-start="259.15" data-end="261.7">return X times X and that's that's you</span> <span data-start="261.7" data-end="263.32">know JavaScript 101 so if we were going</span> <span data-start="263.32" data-end="264.61">to transform this into CoffeeScript what</span> <span data-start="264.61" data-end="265.33">would that look like</span> <span data-start="265.33" data-end="266.62">well first off you don't need a</span> <span data-start="266.62" data-end="267.76">semicolon because</span> <span data-start="267.76" data-end="271.22">why bother second you don't need to</span> <span data-start="271.22" data-end="273.889">declare your your VAR you can just</span> <span data-start="273.889" data-end="277.91">assign it we can we can use and this is</span> <span data-start="277.91" data-end="279.41">kind of up to your style the preferred</span> </p>
<p><span data-start="279.41" data-end="280.85">CoffeeScript styles to use colons to</span> <span data-start="280.85" data-end="283.04">assign all over the place instead of</span> <span data-start="283.04" data-end="284.45">equals but they are interchangeable so</span> <span data-start="284.45" data-end="285.98">you can use equal signs instead of</span> <span data-start="285.98" data-end="288.56">objects inside of objects as well so</span> <span data-start="288.56" data-end="290.23">we'll switch this over to a colon</span> <span data-start="290.23" data-end="292.639">returns are implicit inside of a</span> <span data-start="292.639" data-end="294.139">function the last thing that you last</span> <span data-start="294.139" data-end="295.669">expression you evaluate will always be</span> <span data-start="295.669" data-end="296.96">returned so you don't need to return it</span> <span data-start="296.96" data-end="298.91">yourself so we'll take that out and also</span> <span data-start="298.91" data-end="302.81">the semicolon in there it uses Python</span> <span data-start="302.81" data-end="305.39">style block whitespace syntax so you</span> <span data-start="305.39" data-end="307.91">don't need to use Curly's to the limit</span> <span data-start="307.91" data-end="309.77">your your blocks so we'll take off the</span> </p>
<p><span data-start="309.77" data-end="311.18">Curly's and just use the indentation</span> <span data-start="311.18" data-end="314.18">there and finally instead of the</span> <span data-start="314.18" data-end="317.6">function keyword well I guess before we</span> <span data-start="317.6" data-end="320.36">get to that we have square repeated</span> <span data-start="320.36" data-end="322.13">twice and which always looks very</span> <span data-start="322.13" data-end="323.69">redundant so let's take off one of those</span> <span data-start="323.69" data-end="325.37">squares and finally instead of the</span> <span data-start="325.37" data-end="327.139">function keyword what a function looks</span> <span data-start="327.139" data-end="328.55">like is just an arrow pointing from the</span> <span data-start="328.55" data-end="330.889">arguments to the result so we have</span> <span data-start="330.889" data-end="333.74">square as a function of X and it goes to</span> <span data-start="333.74" data-end="336.47">x times X and now that's highlighted as</span> <span data-start="336.47" data-end="338.03">a function and you can also write that</span> <span data-start="338.03" data-end="341.09">on one line like this so you can see how</span> <span data-start="341.09" data-end="342.59">that got transformed square as a</span> <span data-start="342.59" data-end="344.24">function that takes in action it returns</span> <span data-start="344.24" data-end="348.32">x times X so that's a good example and</span> <span data-start="348.32" data-end="351.11">actually let's give this a try so this</span> <span data-start="351.11" data-end="352.64">textmate is hooked up and there's a</span> <span data-start="352.64" data-end="353.9">there's a text made bundle there's a</span> <span data-start="353.9" data-end="355.46">there's an Emacs bundle there's a vim</span> <span data-start="355.46" data-end="356.69">bundle there's bundles for all your</span> <span data-start="356.69" data-end="356.96">needs</span> <span data-start="356.96" data-end="358.669">this one's hooked up so we can compile</span> <span data-start="358.669" data-end="360.8">this and see what it turns into</span> <span data-start="360.8" data-end="363.56">so here we have it back looking more or</span> <span data-start="363.56" data-end="365.539">less like it did the the declaration got</span> <span data-start="365.539" data-end="367.1">pushed up to the top but you have back</span> <span data-start="367.1" data-end="368.539">your JavaScript function and if we run</span> <span data-start="368.539" data-end="373.58">that let's say puts the square of 100</span> <span data-start="373.58" data-end="377">and we get oops I have to do the whole</span> <span data-start="377" data-end="380.86">thing let's do this we get back 10,000</span> <span data-start="380.86" data-end="386.51">all right so um it the sort of the mo is</span> <span data-start="386.51" data-end="388.789">to not change anything about JavaScript</span> <span data-start="388.789" data-end="390.86">that's already you know very clear and</span> <span data-start="390.86" data-end="392.419">very common it's not just changing it</span> <span data-start="392.419" data-end="394.25">for changes sake so so arrays look the</span> <span data-start="394.25" data-end="396.919">same object literals look the same</span> <span data-start="396.919" data-end="398.479">there's a book very nicely done you can</span> <span data-start="398.479" data-end="399.65">see how we're using the same assignment</span> <span data-start="399.65" data-end="401.06">syntax element</span> <span data-start="401.06" data-end="403.28">is an object literal that has hydrogen</span> <span data-start="403.28" data-end="407.18">silicon and uranium properties with if</span> <span data-start="407.18" data-end="408.889">you because it has because we are</span> <span data-start="408.889" data-end="410.84">whitespace sensitive if you do your</span> <span data-start="410.84" data-end="412.28">assignments on multiple lines you don't</span> <span data-start="412.28" data-end="413.33">have to worry about comments you can</span> <span data-start="413.33" data-end="414.77">leave them off you can put them in you</span> <span data-start="414.77" data-end="415.94">can have trailing commas it's all going</span> <span data-start="415.94" data-end="417.59">to compile to the same thing so actually</span> <span data-start="417.59" data-end="419.8">let's do that we compile this to</span> </p>
<p><span data-start="419.8" data-end="422.9">JavaScript and we'll get our commas and</span> <span data-start="422.9" data-end="424.639">you can see even if you have them and</span> <span data-start="424.639" data-end="427.97">it's trailing it's not going to be</span> <span data-start="427.97" data-end="429.08">trailing when you compile it to</span> <span data-start="429.08" data-end="431.36">JavaScript so you won't kill you on that</span> <span data-start="431.36" data-end="435.229">and and property accessing is the same</span> <span data-start="435.229" data-end="436.91">it's dot property so we can say it puts</span> <span data-start="436.91" data-end="438.38">elements dot</span> <span data-start="438.38" data-end="444.59">silicon and we're gonna get back 14 all</span> <span data-start="444.59" data-end="445.3">right</span> <span data-start="445.3" data-end="447.169">on to the next one so this is the</span> <span data-start="447.169" data-end="448.58">whitespace for blocks and tax that I</span> <span data-start="448.58" data-end="450.169">showed you before it of course looks</span> <span data-start="450.169" data-end="452.96">more more Python II when it gets more</span> <span data-start="452.96" data-end="455.93">nested so here's an if here's a block if</span> <span data-start="455.93" data-end="458.15">statement if answer is yes and attempts</span> <span data-start="458.15" data-end="459.44">is less than three then we have a</span> <span data-start="459.44" data-end="462.139">try-catch try try again catch error</span> <span data-start="462.139" data-end="464.84">report error and if you look at what</span> <span data-start="464.84" data-end="466.46">this compiles to in JavaScript just to</span> <span data-start="466.46" data-end="468.02">get a sense of how the whitespace is</span> <span data-start="468.02" data-end="472.34">working it's gonna look like this so you</span> <span data-start="472.34" data-end="473.99">can see how your try catch block got</span> <span data-start="473.99" data-end="475.22">translated and all the curly has got</span> <span data-start="475.22" data-end="477.77">inserted and this also shows some</span> <span data-start="477.77" data-end="480.71">aliases that that you have so all of the</span> </p>
<p><span data-start="480.71" data-end="482.9">JavaScript operators greater than less</span> <span data-start="482.9" data-end="485.69">than triple equals stuff is available</span> <span data-start="485.69" data-end="489.979">but you also have aliases so yes yes yes</span> <span data-start="489.979" data-end="492.86">no on off our aliases for true false</span> <span data-start="492.86" data-end="494.27">like they are in the ml so you can write</span> <span data-start="494.27" data-end="495.5">things out a little bit more naturally</span> <span data-start="495.5" data-end="497.18">if you're depending on what your wording</span> <span data-start="497.18" data-end="499.61">is for your boolean and then also is in</span> <span data-start="499.61" data-end="503.06">isn't for triple equals and not not</span> <span data-start="503.06" data-end="508.97">triple equals which is nice too so a lot</span> <span data-start="508.97" data-end="510.38">of things that are available in block</span> <span data-start="510.38" data-end="512.36">syntax form like this are also available</span> <span data-start="512.36" data-end="515.539">in postfix prefix or postfix so here we</span> <span data-start="515.539" data-end="518.69">have if ignition is on block launch</span> <span data-start="518.69" data-end="520.969">rocket or you could say launch rocket if</span> <span data-start="520.969" data-end="523.159">ignition is on and if we compile this</span> <span data-start="523.159" data-end="526.73">snippet right here we can see that I</span> <span data-start="526.73" data-end="528.83">guess in one case it became the ternary</span> <span data-start="528.83" data-end="531.77">and the other one it's a it's the actual</span> <span data-start="531.77" data-end="533.06">block if but they're doing the same</span> <span data-start="533.06" data-end="534">thing</span> <span data-start="534" data-end="536.04">if ignition is true then you wash the</span> <span data-start="536.04" data-end="538.59">rocket otherwise you don't and then the</span> <span data-start="538.59" data-end="540.45">same thing for the same thing is true</span> <span data-start="540.45" data-end="542.46">for basically for anything where you</span> <span data-start="542.46" data-end="544.71">have a where you have an indented block</span> <span data-start="544.71" data-end="546.24">you can also do a prefix if it's just a</span> <span data-start="546.24" data-end="549.03">single line expression so here we're</span> <span data-start="549.03" data-end="551.22">doing a comprehension so for every song</span> <span data-start="551.22" data-end="552.99">in repertoire we're gonna sing it and</span> <span data-start="552.99" data-end="555.72">then this is the same form but but</span> <span data-start="555.72" data-end="558.68">written as a block all right</span> <span data-start="558.68" data-end="561.99">so getting getting past the sort of the</span> <span data-start="561.99" data-end="564.51">syntax subtractions the you know all the</span> <span data-start="564.51" data-end="567.06">semicolons and punctuation noise towards</span> <span data-start="567.06" data-end="569.19">the expression stuff which i think so</span> </p>
<p><span data-start="569.19" data-end="570.33">I think that everything is an expression</span> <span data-start="570.33" data-end="572.52">is probably the single most important</span> <span data-start="572.52" data-end="574.56">feature of all of this it definitely</span> <span data-start="574.56" data-end="576.24">changes the most in how your code is</span> <span data-start="576.24" data-end="578.61">structured so here we have a</span> <span data-start="578.61" data-end="580.62">comprehension you're going to print out</span> <span data-start="580.62" data-end="583.62">I for I in that array in one two three</span> <span data-start="583.62" data-end="586.23">and so this is this is an example of</span> <span data-start="586.23" data-end="588.93">running a function call you know n times</span> <span data-start="588.93" data-end="591.87">or I times for that entire statement so</span> <span data-start="591.87" data-end="593.4">if we run that we're gonna get one two</span> <span data-start="593.4" data-end="595.85">three I just ran the entire file sorry</span> <span data-start="595.85" data-end="599.61">we're gonna get one two three but you</span> <span data-start="599.61" data-end="601.74">can also so if you wrap if you wrap the</span> <span data-start="601.74" data-end="604.94">comprehension and parentheses or if you</span> <span data-start="604.94" data-end="608.55">call the comprehension or you return it</span> <span data-start="608.55" data-end="609.78">or you assign it to a variable it's</span> <span data-start="609.78" data-end="611.76">going to be converted into an expression</span> <span data-start="611.76" data-end="613.71">for you and so what that means is is</span> <span data-start="613.71" data-end="615.99">that as we're generating the code we we</span> <span data-start="615.99" data-end="617.34">look at the comprehension and we say is</span> <span data-start="617.34" data-end="619.86">it being used is it being returned is it</span> <span data-start="619.86" data-end="622.53">being assigned to and if it is then it</span> <span data-start="622.53" data-end="624.87">gets converted into the result of the</span> <span data-start="624.87" data-end="626.4">computation every single time through</span> <span data-start="626.4" data-end="627.9">the comprehension so this just to be</span> <span data-start="627.9" data-end="629.34">familiar to you if you've used Python</span> <span data-start="629.34" data-end="632.28">before or but it's basically the</span> <span data-start="632.28" data-end="634.89">equivalent of doing on each or a select</span> <span data-start="634.89" data-end="639.27">or a filter so you are taking your</span> <span data-start="639.27" data-end="640.74">you're applying the you're applying the</span> <span data-start="640.74" data-end="642.24">block of code for every time through the</span> <span data-start="642.24" data-end="643.71">loop and then you're taking the array of</span> <span data-start="643.71" data-end="645.21">results and you're turning that array so</span> <span data-start="645.21" data-end="648.96">here we're gonna print out one two three</span> <span data-start="648.96" data-end="651.15">as an array I guess P will make that</span> <span data-start="651.15" data-end="653.57">more clear because P will inspect that</span> <span data-start="653.57" data-end="656.07">so now we'll see one two three as an</span> <span data-start="656.07" data-end="658.11">array as the result of this and so</span> <span data-start="658.11" data-end="659.82">internally what it's doing is its it's</span> <span data-start="659.82" data-end="661.65">pushing the result of every time through</span> <span data-start="661.65" data-end="662.94">onto an array and then returning that</span> <span data-start="662.94" data-end="665.67">when it's done so but this works exactly</span> <span data-start="665.67" data-end="667.59">identically for</span> <span data-start="667.59" data-end="669.09">for anything else so here we're gonna</span> <span data-start="669.09" data-end="673.56">put a try/catch block directly into puts</span> <span data-start="673.56" data-end="676.23">and so if we run that we're gonna try to</span> <span data-start="676.23" data-end="678.48">call a property on a missing object this</span> <span data-start="678.48" data-end="679.98">object is not defined that doesn't exist</span> <span data-start="679.98" data-end="682.17">and then catch the error and then print</span> <span data-start="682.17" data-end="686.67">that out so we have the error is</span> <span data-start="686.67" data-end="689.57">reference error missing is not defined</span> <span data-start="689.57" data-end="693.56">and so internally what happens is</span> <span data-start="693.56" data-end="697.44">basically every every single node in the</span> <span data-start="697.44" data-end="700.26">grammar knows how to return itself so</span> <span data-start="700.26" data-end="702.12">you can ask it to basically if you're an</span> <span data-start="702.12" data-end="704.64">if and it and you're being asked to</span> <span data-start="704.64" data-end="706.74">return it'll return all it'll return</span> <span data-start="706.74" data-end="707.88">from any of the branches that it goes</span> <span data-start="707.88" data-end="710.85">into if you're a for loop I mean if</span> <span data-start="710.85" data-end="712.11">you're if you're a comprehension you ask</span> <span data-start="712.11" data-end="713.67">to be returned you're gonna return the</span> <span data-start="713.67" data-end="715.44">results of going through the array if</span> <span data-start="715.44" data-end="717.03">you're a try-catch you're gonna return</span> <span data-start="717.03" data-end="718.68">the either the try or the catch</span> <span data-start="718.68" data-end="720.45">depending on what gets fired and so</span> <span data-start="720.45" data-end="723.87">based on that anytime you need to</span> <span data-start="723.87" data-end="725.37">convert an expression a javascript</span> <span data-start="725.37" data-end="727.56">expression into a I mean start a</span> </p>
<p><span data-start="727.56" data-end="728.85">JavaScript statement into an expression</span> <span data-start="728.85" data-end="730.89">you can wrap it in a closure so if you</span> <span data-start="730.89" data-end="732.09">wrap it in a closure and then you return</span> <span data-start="732.09" data-end="734.13">the result now you have something that</span> <span data-start="734.13" data-end="736.17">used to be a statement but instead it</span> <span data-start="736.17" data-end="737.67">can be used an expression so that's</span> <span data-start="737.67" data-end="740.34">what's going on internally there the</span> <span data-start="740.34" data-end="741.51">other thing that I didn't mention that</span> <span data-start="741.51" data-end="744.03">this demonstrates is this isn't being</span> <span data-start="744.03" data-end="746.52">syntax highlighted in this but we have</span> <span data-start="746.52" data-end="749.76">string interpolation as is proposed in</span> <span data-start="749.76" data-end="751.86">Ekman script harmony I'm one really fun</span> <span data-start="751.86" data-end="753.72">place to mine for language ideas is</span> <span data-start="753.72" data-end="755.49">there's an echo script harmony wiki that</span> <span data-start="755.49" data-end="756.87">has a whole bunch of things that they're</span> <span data-start="756.87" data-end="758.04">thinking about putting into the next</span> <span data-start="758.04" data-end="759.78">version of JavaScript and this is one of</span> <span data-start="759.78" data-end="763.5">the proposals this is just a quick</span> <span data-start="763.5" data-end="765.27">little demo of how the var works so you</span> <span data-start="765.27" data-end="766.2">might have noticed that we're not</span> <span data-start="766.2" data-end="769.32">declaring var at all but what ends up</span> <span data-start="769.32" data-end="771.6">happening is that you're you're when you</span> <span data-start="771.6" data-end="773.22">when you first use a variable when you</span> <span data-start="773.22" data-end="775.29">first assign to a variable its var</span> <span data-start="775.29" data-end="777.03">declaration is going to get pushed up to</span> <span data-start="777.03" data-end="779.37">the top of the nearest lexical scope so</span> <span data-start="779.37" data-end="782.4">in this case a is going to have you know</span> <span data-start="782.4" data-end="784.14">the equivalent of var a out here because</span> <span data-start="784.14" data-end="785.37">it was first even though it's being</span> <span data-start="785.37" data-end="787.35">referenced in the same exact way inside</span> <span data-start="787.35" data-end="788.49">the function it was first reference</span> <span data-start="788.49" data-end="791.46">outside and then B will have a VAR b</span> <span data-start="791.46" data-end="792.87">inside the function won't be visible</span> <span data-start="792.87" data-end="794.22">from the outside scope so that's how</span> <span data-start="794.22" data-end="796.23">that's handled for you what it means is</span> <span data-start="796.23" data-end="798.09">that you can't you can't shadow</span> <span data-start="798.09" data-end="800.25">variables inside of a function</span> <span data-start="800.25" data-end="801.36">the same name you're always going to be</span> <span data-start="801.36" data-end="803.55">referring to the outside variable and</span> <span data-start="803.55" data-end="805.32">that's similar to languages like Ruby</span> <span data-start="805.32" data-end="806.94">inside of blocks if you refer to a</span> <span data-start="806.94" data-end="808.29">variable the same name it's always going</span> <span data-start="808.29" data-end="809.37">to be the outside one so you have to</span> <span data-start="809.37" data-end="810.51">pick it if your name if you actually</span> <span data-start="810.51" data-end="812.61">mean a different variable because there</span> <span data-start="812.61" data-end="814.83">isn't devar for you and I think that's</span> <span data-start="814.83" data-end="816.18">that's a worthwhile trade-off the other</span> <span data-start="816.18" data-end="817.56">way isn't workable at all if everything</span> <span data-start="817.56" data-end="821.05">shadows then you can't get anything done</span> <span data-start="821.06" data-end="824.94">here's another example of a clean up it</span> <span data-start="824.94" data-end="828.08">we fix Java scripts which statement so</span> <span data-start="828.08" data-end="831.36">so I guess we have chef a long example</span> <span data-start="831.36" data-end="833.01">of what it looks like these are the same</span> <span data-start="833.01" data-end="835.14">sort of implicit blocks you can say when</span> </p>
<p><span data-start="835.14" data-end="838.05">Moe then do an action or you can indent</span> <span data-start="838.05" data-end="842.25">it like this is equivalent but switches</span> <span data-start="842.25" data-end="844.47">internally compile into if-else chains</span> <span data-start="844.47" data-end="847.44">using object identity to match instead</span> <span data-start="847.44" data-end="849.12">of a JavaScript switch case statement</span> <span data-start="849.12" data-end="851.16">because Java scripts which cases are</span> <span data-start="851.16" data-end="852.57">implemented using labels you can only do</span> <span data-start="852.57" data-end="854.13">string comparisons you can't compare</span> <span data-start="854.13" data-end="855.27">anything that's not a string and if you</span> <span data-start="855.27" data-end="857.34">do it'll course it and then also you</span> <span data-start="857.34" data-end="859.67">have to stick and break after every</span> <span data-start="859.67" data-end="861.63">after every case we don't want to fall</span> <span data-start="861.63" data-end="863.31">through so so instead of doing that this</span> <span data-start="863.31" data-end="865.62">becomes an if-else so we can put this</span> <span data-start="865.62" data-end="869.46">back the way it was and give it a try so</span> <span data-start="869.46" data-end="871.32">if we run this actually nothing will</span> <span data-start="871.32" data-end="872.79">happen so then let's call so which</span> <span data-start="872.79" data-end="874.74">stooge which dude is a function that</span> <span data-start="874.74" data-end="876.33">switches on stood when it's Moe then it</span> <span data-start="876.33" data-end="877.92">says it's Moe when it's curly and this</span> <span data-start="877.92" data-end="881.22">is using actual objects not strings so</span> <span data-start="881.22" data-end="885.75">let's say puts which is huge curly and</span> <span data-start="885.75" data-end="887.85">let's run this file and we'll have it's</span> <span data-start="887.85" data-end="888.99">curly oh I'm sorry I was already put</span> <span data-start="888.99" data-end="890.54">saying we can just say which ducha curly</span> <span data-start="890.54" data-end="892.71">we can do the same thing for moe</span> <span data-start="892.71" data-end="896.78">and let's look at what it compiles into</span> <span data-start="896.78" data-end="899.28">so we have our we have our two objects</span> <span data-start="899.28" data-end="902.16">and you can see how we have our function</span> <span data-start="902.16" data-end="904.95">it's a named function if Stooges moe</span> <span data-start="904.95" data-end="907.44">then we return that value you can see</span> <span data-start="907.44" data-end="908.73">how the returns are getting pushed into</span> <span data-start="908.73" data-end="911.13">each into each statement so because the</span> <span data-start="911.13" data-end="913.08">switch that's a good example because the</span> <span data-start="913.08" data-end="914.49">switch was the last thing that happened</span> <span data-start="914.49" data-end="915.75">inside the function you're always going</span> <span data-start="915.75" data-end="918.56">to return a value no matter what you do</span> <span data-start="918.56" data-end="922.14">let's see is 10 22 all right here's that</span> <span data-start="922.14" data-end="929.1">string interpolation so we have dollar</span> <span data-start="929.1" data-end="931.53">sign and and so this this is exactly the</span> <span data-start="931.53" data-end="932.82">same as the proposed harmony syntax</span> <span data-start="932.82" data-end="934.11">dollar sign literal</span> <span data-start="934.11" data-end="936.149">or you can do literally just gets</span> <span data-start="936.149" data-end="938.399">interpolate it directly and then you can</span> <span data-start="938.399" data-end="939.81">with dollar sign with brackets you can</span> <span data-start="939.81" data-end="941.64">do arbitrary expressions inside of your</span> <span data-start="941.64" data-end="946.74">interpolation so let's say Jeremy name</span> <span data-start="946.74" data-end="959.07">is Jeremy there you go and one thing</span> <span data-start="959.07" data-end="960.899">that we add is a pythons chain</span> <span data-start="960.899" data-end="962.97">comparisons so if you have more than one</span> <span data-start="962.97" data-end="965.04">greater than less than comparison in a</span> <span data-start="965.04" data-end="967.079">row it's going to do the correct order</span> <span data-start="967.079" data-end="969.089">of operations to make that value work so</span> <span data-start="969.089" data-end="970.589">healthy is if your cholesterol is less</span> <span data-start="970.589" data-end="975">than 200 and more than 60 so healthy 133</span> <span data-start="975" data-end="977.04">is going to be true and healthy 40 is</span> <span data-start="977.04" data-end="979.35">going to be false and what's going on</span> <span data-start="979.35" data-end="980.7">under the scenes behind the scenes here</span> <span data-start="980.7" data-end="983.88">is this gets converted into 200 is</span> <span data-start="983.88" data-end="986.43">greater and cholesterol is greater than</span> <span data-start="986.43" data-end="988.56">60 and so this is one of those cases</span> <span data-start="988.56" data-end="990.42">where if you're doing some like this in</span> <span data-start="990.42" data-end="991.56">your own language you have to be careful</span> <span data-start="991.56" data-end="993.18">if you ever have to reference a variable</span> <span data-start="993.18" data-end="996.24">multiple times two to compute a result</span> <span data-start="996.24" data-end="997.529">you have to be careful that you don't</span> <span data-start="997.529" data-end="999.329">call if it for example if if what's</span> <span data-start="999.329" data-end="1000.47">going on here's a function call that you</span> <span data-start="1000.47" data-end="1001.55">don't call the function twice because</span> <span data-start="1001.55" data-end="1002.959">then that could have side effects and</span> <span data-start="1002.959" data-end="1004.1">could do something you don't want it to</span> <span data-start="1004.1" data-end="1005.87">do so the way we get around that is if</span> <span data-start="1005.87" data-end="1007.22">cholesterol is actually a function call</span> <span data-start="1007.22" data-end="1010.19">here and you compiled that what's gonna</span> <span data-start="1010.19" data-end="1011.51">happen is you're gonna get a temporary</span> <span data-start="1011.51" data-end="1013.73">variable assigned to cholesterol and</span> <span data-start="1013.73" data-end="1015.199">then referenced in the later one so you</span> <span data-start="1015.199" data-end="1016.64">don't have to so it doesn't get called</span> <span data-start="1016.64" data-end="1017.029">twice</span> <span data-start="1017.029" data-end="1018.89">and that that's the case in general for</span> <span data-start="1018.89" data-end="1020.54">for something we need to have multiple</span> <span data-start="1020.54" data-end="1022.61">references to an expression but you</span> <span data-start="1022.61" data-end="1024.049">don't want to evaluate more than once is</span> <span data-start="1024.049" data-end="1027.53">we'll do a temporary variable in the</span> <span data-start="1027.53" data-end="1032.319">output JavaScript so really quickly</span> <span data-start="1032.319" data-end="1034.37">besides we saw the array comprehensions</span> <span data-start="1034.37" data-end="1036.709">before where you're saying I in a list</span> <span data-start="1036.709" data-end="1038.329">of numbers but you can also do it for</span> <span data-start="1038.329" data-end="1043.309">objects so it's for its for sorry so for</span> <span data-start="1043.309" data-end="1045.65">a number in a list of numbers or for key</span> <span data-start="1045.65" data-end="1048.53">comma value of an object so in this case</span> <span data-start="1048.53" data-end="1049.46">we're gonna look at all the keys and</span> <span data-start="1049.46" data-end="1051.41">this is so this is all being powered by</span> <span data-start="1051.41" data-end="1053.15">nodejs on the back end so we're looking</span> <span data-start="1053.15" data-end="1055.19">at all the keys in the process object</span> <span data-start="1055.19" data-end="1057.41">which is the one of the global objects</span> <span data-start="1057.41" data-end="1058.88">that you have and you're going to get</span> <span data-start="1058.88" data-end="1062.809">back your big list of of node signals</span> <span data-start="1062.809" data-end="1065.27">and such and so that's an object</span> <span data-start="1065.27" data-end="1066.919">comprehension and of course you can have</span> <span data-start="1066.919" data-end="1067.87">a block inside</span> <span data-start="1067.87" data-end="1069.55">doing however much code you need to do</span> <span data-start="1069.55" data-end="1071.02">and then there's also range</span> <span data-start="1071.02" data-end="1072.91">comprehensions so instead of having to</span> <span data-start="1072.91" data-end="1074.559">write out if you if you're if you're if</span> <span data-start="1074.559" data-end="1075.76">you're a for-loop was just gonna be</span> <span data-start="1075.76" data-end="1077.71">numbers and you're going to start at</span> <span data-start="1077.71" data-end="1078.88">zero and go up to a certain amount</span> <span data-start="1078.88" data-end="1080.83">instead of that you can use a range</span> <span data-start="1080.83" data-end="1083.47">literal this is the same as Ruby's range</span> <span data-start="1083.47" data-end="1085.89">literal more or less so two dots is is</span> <span data-start="1085.89" data-end="1088.45">inclusive of the final value and three</span> <span data-start="1088.45" data-end="1091">dots is exclusive and so this is this is</span> <span data-start="1091" data-end="1093.49">going to be the comprehension of I in</span> <span data-start="1093.49" data-end="1095.89">zero to twenty let me take off this by</span> <span data-start="1095.89" data-end="1098.65">two for a minute and then we're going to</span> <span data-start="1098.65" data-end="1100.929">join it so there you have from 0 up to</span> <span data-start="1100.929" data-end="1104.59">20 you can you can do steps so we can</span> <span data-start="1104.59" data-end="1108.64">say by two and that'll give you the even</span> <span data-start="1108.64" data-end="1111.49">numbers and you can also do filters so</span> <span data-start="1111.49" data-end="1113.02">this is where this is where that select</span> <span data-start="1113.02" data-end="1115.6">filter kind of thing comes in so for any</span> <span data-start="1115.6" data-end="1117.28">comprehension you can say when and then</span> <span data-start="1117.28" data-end="1119.26">you have an arbitrary condition to to</span> <span data-start="1119.26" data-end="1122.01">satisfy so in this case let's say when I</span> <span data-start="1122.01" data-end="1124.9">mod two is one and we'll get all the odd</span> <span data-start="1124.9" data-end="1127.48">numbers or a but this when I'm on two</span> <span data-start="1127.48" data-end="1133.179">isn't 0 isn't 0 and now we get all the</span> <span data-start="1133.179" data-end="1137.16">odd numbers between 0 and 20 inclusive</span> <span data-start="1137.16" data-end="1139.3">all right I'm gonna try to get through</span> <span data-start="1139.3" data-end="1142.63">this on time so here's a JavaScript a</span> <span data-start="1142.63" data-end="1144.28">statement again you can tell because of</span> <span data-start="1144.28" data-end="1145.9">the semicolon so this is something</span> <span data-start="1145.9" data-end="1146.92">you've probably done a lot where you</span> <span data-start="1146.92" data-end="1147.97">have a default value you want to assign</span> <span data-start="1147.97" data-end="1149.5">to a property inside at the beginning of</span> <span data-start="1149.5" data-end="1154.42">a function so one of the simplest of</span> <span data-start="1154.42" data-end="1156.4">plus equals and minus equals and divided</span> <span data-start="1156.4" data-end="1158.53">by equals in JavaScript and in languages</span> <span data-start="1158.53" data-end="1159.91">like Ruby you would have instead of</span> <span data-start="1159.91" data-end="1162.21">writing this you would write or equals</span> <span data-start="1162.21" data-end="1165.28">to say that the options or equals the</span> <span data-start="1165.28" data-end="1167.8">default value so one thing that we do to</span> <span data-start="1167.8" data-end="1169">get rid of those you can still use those</span> <span data-start="1169" data-end="1170.41">if you want to they're present it's it's</span> <span data-start="1170.41" data-end="1171.73">all sort of backwards compatible with</span> </p>
<p><span data-start="1171.73" data-end="1173.35">JavaScript you can sort of slip into it</span> <span data-start="1173.35" data-end="1175.09">easily but the cleaner way to say that</span> <span data-start="1175.09" data-end="1178.66">is just assign it to the half expression</span> <span data-start="1178.66" data-end="1181.15">so options that value gets or the</span> <span data-start="1181.15" data-end="1182.95">default value or you could do gets and</span> <span data-start="1182.95" data-end="1186.91">or you could do gets plus and this would</span> <span data-start="1186.91" data-end="1189.28">be like doing a plus equals assigning it</span> <span data-start="1189.28" data-end="1193.72">to plus the default value so let's talk</span> <span data-start="1193.72" data-end="1194.59">about splats</span> <span data-start="1194.59" data-end="1197.8">splats are a nice feature where you know</span> <span data-start="1197.8" data-end="1199.36">if you if you have a splat in your</span> <span data-start="1199.36" data-end="1201.07">argument list will compile that into the</span> <span data-start="1201.07" data-end="1201.73">correct look</span> <span data-start="1201.73" data-end="1204.97">up inside of the arguments array to get</span> <span data-start="1204.97" data-end="1206.26">back what you need so here we've got</span> </p>
<p><span data-start="1206.26" data-end="1208.24">Best Actor the first arguments going to</span> <span data-start="1208.24" data-end="1209.8">be the winner and then every every next</span> <span data-start="1209.8" data-end="1211.03">arguments gonna be a runners-up and</span> <span data-start="1211.03" data-end="1212.02">we're just going to print out who the</span> <span data-start="1212.02" data-end="1214.45">winner is and then pass in three three</span> <span data-start="1214.45" data-end="1218.56">actors and you'll get the expected</span> <span data-start="1218.56" data-end="1222.25">result and if we look at what that</span> <span data-start="1222.25" data-end="1224.32">compiles into you're gonna see that</span> <span data-start="1224.32" data-end="1225.61">we're gonna be so this is one example</span> <span data-start="1225.61" data-end="1227.47">where we do have a reference to a</span> <span data-start="1227.47" data-end="1229.09">special function just to keep the code</span> <span data-start="1229.09" data-end="1231.55">shorter the actual outputting bytes so</span> <span data-start="1231.55" data-end="1232.81">we make a cash reference to a rate</span> <span data-start="1232.81" data-end="1234.16">prototype slice and we're gonna slice</span> <span data-start="1234.16" data-end="1240.25">the runners-up to get that this is kind</span> <span data-start="1240.25" data-end="1241.87">of a fun one the the existential</span> <span data-start="1241.87" data-end="1247">operator if so so or the the logical or</span> <span data-start="1247" data-end="1248.59">there's a lot of falsey values and</span> </p>
<p><span data-start="1248.59" data-end="1250.54">JavaScript things that like zero the</span> <span data-start="1250.54" data-end="1253.57">empty string that that you might be they</span> <span data-start="1253.57" data-end="1254.77">might be confusing to you so if you're</span> <span data-start="1254.77" data-end="1256.57">trying to set a default speed for</span> <span data-start="1256.57" data-end="1260.14">example and you use or if the speed</span> <span data-start="1260.14" data-end="1261.52">happens to be zero which is a perfectly</span> <span data-start="1261.52" data-end="1263.14">valid speed to have it's gonna still get</span> <span data-start="1263.14" data-end="1264.4">the default which isn't what you want so</span> <span data-start="1264.4" data-end="1265.33">what you really want is you want to say</span> <span data-start="1265.33" data-end="1266.95">if it's not  and it's not null</span> <span data-start="1266.95" data-end="1268.93">you know those are that being that not</span> <span data-start="1268.93" data-end="1272.53">exist values then then use it so the</span> <span data-start="1272.53" data-end="1274.09">existential operator which is the</span> <span data-start="1274.09" data-end="1277.47">question mark gives you a way to sort of</span> <span data-start="1277.47" data-end="1280.39">to say if it's  or if it's null</span> <span data-start="1280.39" data-end="1283.09">then you know do one thing or else do</span> <span data-start="1283.09" data-end="1285.15">the other thing so in this case if we</span> <span data-start="1285.15" data-end="1287.98">leave this the way that it is using or</span> <span data-start="1287.98" data-end="1293.29">and run that you're gonna get back 140</span> <span data-start="1293.29" data-end="1295.06">let's see I wouldn't go around your step</span> <span data-start="1295.06" data-end="1298.24">part right you can get back 140 but if</span> <span data-start="1298.24" data-end="1301.96">we use the existential operator you're</span> <span data-start="1301.96" data-end="1303.04">gonna get back to the correct value</span> <span data-start="1303.04" data-end="1304.81">which is it's gonna stay zero because</span> <span data-start="1304.81" data-end="1307.39">there is a valid speed and so you can</span> <span data-start="1307.39" data-end="1308.92">use the existential operator with in</span> <span data-start="1308.92" data-end="1310.75">property chain if you're walking down a</span> <span data-start="1310.75" data-end="1312.67">property chain this is similar to a soak</span> <span data-start="1312.67" data-end="1315.46">in groovy where if that value is</span> <span data-start="1315.46" data-end="1317.35">that property is undefined and</span> <span data-start="1317.35" data-end="1318.43">it's going to stop and you're gonna get</span> <span data-start="1318.43" data-end="1322">back  as the result so in this</span> <span data-start="1322" data-end="1325.3">case we can say put suit name let's get</span> <span data-start="1325.3" data-end="1329.68">rid of this and it's gonna say sue sue</span> <span data-start="1329.68" data-end="1332.64">name that length does exist</span> <span data-start="1332.64" data-end="1335.7">to name dot length dot other does not</span> <span data-start="1335.7" data-end="1338.31">and we'll get back let's see let's keep</span> <span data-start="1338.31" data-end="1342.78">going other dot dot 1.2.3 it's spelled</span> <span data-start="1342.78" data-end="1348.93">wrong you get back an error but if you</span> <span data-start="1348.93" data-end="1350.19">want to soak it up and you want to</span> <span data-start="1350.19" data-end="1352.11">assign this often happens and you want</span> <span data-start="1352.11" data-end="1353.46">to assign if it doesn't exist then just</span> <span data-start="1353.46" data-end="1354.75">give me back  and I don't need</span> <span data-start="1354.75" data-end="1358.8">to to continue then we can say oh let's</span> <span data-start="1358.8" data-end="1361.23">soak up the result of that chain after</span> <span data-start="1361.23" data-end="1362.73">other and you're going to get back</span> <span data-start="1362.73" data-end="1364.44">instead of the instead of the</span> <span data-start="1364.44" data-end="1369.21">big exception so yeah dude is a</span> <span data-start="1369.21" data-end="1373.05">judicious judicious use of soaks can</span> <span data-start="1373.05" data-end="1375.3">help clean up your accessing and I'm</span> <span data-start="1375.3" data-end="1377.43">gonna try to wrap things up there's</span> <span data-start="1377.43" data-end="1381.03">class literals which this this is</span> <span data-start="1381.03" data-end="1382.83">basically a lightweight wrapper around</span> <span data-start="1382.83" data-end="1384.21">so it's this isn't this isn't like a</span> <span data-start="1384.21" data-end="1385.71">full-blown class system with runtime</span> <span data-start="1385.71" data-end="1387.42">objects and stuff all this is is setting</span> <span data-start="1387.42" data-end="1389.1">up is basically you have an object</span> <span data-start="1389.1" data-end="1390.12">literal and you set properties on an</span> <span data-start="1390.12" data-end="1391.68">object right you have a class little</span> <span data-start="1391.68" data-end="1393.12">you're setting objects on the prototype</span> <span data-start="1393.12" data-end="1393.96">you're setting properties on the</span> <span data-start="1393.96" data-end="1395.88">prototype so that when you make a new</span> <span data-start="1395.88" data-end="1397.41">object everything will be set up for you</span> <span data-start="1397.41" data-end="1399.96">correctly and so the two extra things</span> <span data-start="1399.96" data-end="1401.04">that this lets you do that aren't so</span> <span data-start="1401.04" data-end="1403.5">easy in JavaScript is it helps you</span> <span data-start="1403.5" data-end="1404.85">correctly extend the prototype chain</span> <span data-start="1404.85" data-end="1407.07">there's a lot of ways to incorrectly</span> <span data-start="1407.07" data-end="1409.02">except extend the prototype chain where</span> <span data-start="1409.02" data-end="1410.7">you're breaking your inheritance and you</span> <span data-start="1410.7" data-end="1412.89">can only get one level deep but this</span> <span data-start="1412.89" data-end="1414.75">will this this uses something similar to</span> </p>
<p><span data-start="1414.75" data-end="1416.46">Google haratz from the closure library</span> <span data-start="1416.46" data-end="1418.94">if you guys have ever checked that out</span> <span data-start="1418.94" data-end="1421.56">to to basically you can have arbitrarily</span> <span data-start="1421.56" data-end="1423.57">long inheritance chains with with</span> <span data-start="1423.57" data-end="1424.92">everything working correctly including</span> <span data-start="1424.92" data-end="1427.8">super so you can call super and it'll</span> <span data-start="1427.8" data-end="1429.87">reference the function of the same name</span> <span data-start="1429.87" data-end="1432.39">on the immediate ancestor and you can of</span> <span data-start="1432.39" data-end="1433.92">course pass variables to that and do the</span> <span data-start="1433.92" data-end="1435.72">super things that are usually tricky to</span> <span data-start="1435.72" data-end="1438.24">do without a class library in JavaScript</span> <span data-start="1438.24" data-end="1440.88">so here let's say so here we've got a</span> <span data-start="1440.88" data-end="1443.01">sea chantey our Mariners we can make a</span> <span data-start="1443.01" data-end="1446.67">new Mariner and have him sing make a new</span> <span data-start="1446.67" data-end="1448.26">sailor and we can see how sing is</span> <span data-start="1448.26" data-end="1450.69">overridden this is all you know OOP 101</span> <span data-start="1450.69" data-end="1453.75">and then the pirate calls super and then</span> <span data-start="1453.75" data-end="1457.19">says are so loud the pirates sing and</span> <span data-start="1457.19" data-end="1460.83">that's all as expected and let's see I</span> <span data-start="1460.83" data-end="1462.69">think that's that's getting close to the</span> <span data-start="1462.69" data-end="1465.66">end I'm going to wrap things up so in</span> <span data-start="1465.66" data-end="1466.77">terms of implement</span> <span data-start="1466.77" data-end="1469.56">this CoffeeScript was first written in</span> </p>
<p><span data-start="1469.56" data-end="1471.54">Ruby it was a ruby gem because of course</span> <span data-start="1471.54" data-end="1472.98">when you start working on a new language</span> <span data-start="1472.98" data-end="1476.13">you have to start with something and but</span> <span data-start="1476.13" data-end="1477.03">now it's written entirely in</span> <span data-start="1477.03" data-end="1478.44">CoffeeScript so there was a point where</span> <span data-start="1478.44" data-end="1481.8">we we had a working ruby version and</span> <span data-start="1481.8" data-end="1483.42">then wrote a CoffeeScript version that</span> <span data-start="1483.42" data-end="1485.16">was more or less parallel had the ruby</span> <span data-start="1485.16" data-end="1486.81">version compiled that and then had the</span> </p>
<p><span data-start="1486.81" data-end="1488.58">CoffeeScript Version compiled itself and</span> <span data-start="1488.58" data-end="1490.77">then now that's where we are so it's</span> <span data-start="1490.77" data-end="1492.03">like I guess is that there's that</span> <span data-start="1492.03" data-end="1493.44">Wittgenstein staying about pulling up</span> <span data-start="1493.44" data-end="1495.27">the ladder after you you know we can't</span> <span data-start="1495.27" data-end="1496.83">go back now if if the CoffeeScript</span> <span data-start="1496.83" data-end="1498.54">interpreter disappears then there's no</span> <span data-start="1498.54" data-end="1499.89">way to compile it at this point because</span> <span data-start="1499.89" data-end="1502.92">that's that's all that does it so um so</span> <span data-start="1502.92" data-end="1505.05">it was using Ruby and rack and rack is a</span> <span data-start="1505.05" data-end="1507.89">it's a it's a yak style lalr parser</span> <span data-start="1507.89" data-end="1510.48">generator that's that's done in Ruby and</span> </p>
<p><span data-start="1510.48" data-end="1512.67">C but so now that we're in JavaScript it</span> <span data-start="1512.67" data-end="1514.89">uses Jason which a Zack is gonna give a</span> <span data-start="1514.89" data-end="1516.18">talk about shortly I think it's not the</span> <span data-start="1516.18" data-end="1518.19">next one but the one after this which is</span> <span data-start="1518.19" data-end="1520.41">a nice flexible JavaScript parser</span> <span data-start="1520.41" data-end="1522.84">generator so so that's that's the</span> <span data-start="1522.84" data-end="1524.25">current mix it's got a handwritten lexer</span> <span data-start="1524.25" data-end="1526.98">done in CoffeeScript it's got a rewriter</span> <span data-start="1526.98" data-end="1528.75">so the token stream gets rewritten</span> <span data-start="1528.75" data-end="1530.01">before it actually gets sent to the</span> <span data-start="1530.01" data-end="1531.69">parser which is something that lets us</span> <span data-start="1531.69" data-end="1535.65">get go beyond the sort of basic lalr</span> <span data-start="1535.65" data-end="1538.26">grammar we're doing stuff with with the</span> <span data-start="1538.26" data-end="1539.88">with the implicit calls where you can</span> <span data-start="1539.88" data-end="1542.01">see how we're saying you know we have we</span> <span data-start="1542.01" data-end="1543.39">have calls that don't need parentheses</span> <span data-start="1543.39" data-end="1544.47">and then they get matched all the way</span> <span data-start="1544.47" data-end="1546.47">down to the end of the of the block</span> <span data-start="1546.47" data-end="1549.12">doing things like that with uh with the</span> <span data-start="1549.12" data-end="1552.21">significant whitespace and also the rest</span> <span data-start="1552.21" data-end="1554.91">of language features gets a little bit</span> <span data-start="1554.91" data-end="1555.99">tricky if you're trying to fit that into</span> <span data-start="1555.99" data-end="1557.04">you know this would seem like it'll be a</span> <span data-start="1557.04" data-end="1558.87">very large large language try to fit</span> <span data-start="1558.87" data-end="1560.13">into a grammar but if you rewrite the</span> <span data-start="1560.13" data-end="1561.48">token stream in advance to remove</span> <span data-start="1561.48" data-end="1562.86">ambiguities and things that would be</span> <span data-start="1562.86" data-end="1565.05">ambiguous if you decide in advance oh</span> <span data-start="1565.05" data-end="1566.91">this is the way that implicit calls work</span> <span data-start="1566.91" data-end="1568.95">before the parts before the parser ever</span> <span data-start="1568.95" data-end="1570.75">sees it then you can have a much smaller</span> <span data-start="1570.75" data-end="1572.67">parser so including including the</span> <span data-start="1572.67" data-end="1574.05">grammar including the rewriter including</span> <span data-start="1574.05" data-end="1577.1">the lecture it's 1,800 1,800 lines of</span> </p>
<p><span data-start="1577.1" data-end="1579.03">CoffeeScript so it's not it's not very</span> <span data-start="1579.03" data-end="1582.15">big and then and then that and then the</span> <span data-start="1582.15" data-end="1584.07">result of the parsing stages the ast and</span> <span data-start="1584.07" data-end="1585.96">then to generate the JavaScript you just</span> <span data-start="1585.96" data-end="1587.73">call compile at the top level of the ast</span> <span data-start="1587.73" data-end="1589.89">and all walks down and every node you</span> <span data-start="1589.89" data-end="1591.63">know passing information around compiles</span> <span data-start="1591.63" data-end="1594.6">the resulting JavaScript output so all</span> <span data-start="1594.6" data-end="1597.81">of this is available on CoffeeScript org</span> <span data-start="1597.81" data-end="1599.94">it is</span> <span data-start="1599.94" data-end="1603.179">it is sort of a fun project it's not</span> <span data-start="1603.179" data-end="1604.95">it's not supposed to you know I'm not</span> <span data-start="1604.95" data-end="1606.75">trying to sell you one using it for your</span> <span data-start="1606.75" data-end="1608.25">next big web app I think it's fun to</span> <span data-start="1608.25" data-end="1610.559">play around in and the language still</span> <span data-start="1610.559" data-end="1612.09">might change until we go to 1.0 if</span> <span data-start="1612.09" data-end="1613.559">things have settled down a lot recently</span> <span data-start="1613.559" data-end="1615.87">it used to be much more unstable the</span> <span data-start="1615.87" data-end="1617.1">first version didn't have significant</span> <span data-start="1617.1" data-end="1618.45">whitespace and then people were you know</span> <span data-start="1618.45" data-end="1620.309">talking about it and we we decided to</span> <span data-start="1620.309" data-end="1622.35">add it but uh so the language might</span> <span data-start="1622.35" data-end="1623.7">still change and that's the caveat but</span> <span data-start="1623.7" data-end="1625.169">besides that it is being used some</span> <span data-start="1625.169" data-end="1626.25">people are using in production to do</span> <span data-start="1626.25" data-end="1628.59">different things here's a fun example of</span> <span data-start="1628.59" data-end="1630.87">someone who's using it to generate art</span> <span data-start="1630.87" data-end="1632.46">on their website so this is using</span> </p>
<p><span data-start="1632.46" data-end="1633.919">CoffeeScript in Raphael to</span> <span data-start="1633.919" data-end="1635.7">combinatorially combine a whole bunch of</span> <span data-start="1635.7" data-end="1637.7">little sketches that he has going on and</span> <span data-start="1637.7" data-end="1639.809">and then I've got a fun example of this</span> <span data-start="1639.809" data-end="1644.399">of my own which is right here so this</span> <span data-start="1644.399" data-end="1646.679">shows that you don't really lose you're</span> <span data-start="1646.679" data-end="1648.179">not gonna really lose any speed from</span> <span data-start="1648.179" data-end="1650.009">from what JavaScript would be doing if</span> <span data-start="1650.009" data-end="1651.299">you do something in CoffeeScript because</span> <span data-start="1651.299" data-end="1652.379">it's gonna be a one-to-one translation</span> <span data-start="1652.379" data-end="1654.57">so this is v8 powering a strange</span> <span data-start="1654.57" data-end="1657.509">attractor that we can let's see we can</span> <span data-start="1657.509" data-end="1661.039">reseed and draw in different ways and</span> <span data-start="1661.039" data-end="1663.75">the and the processing speed of v8 here</span> <span data-start="1663.75" data-end="1666.12">is is very good it's comparable actually</span> <span data-start="1666.12" data-end="1668.159">to the to the Java processing versions</span> <span data-start="1668.159" data-end="1671.58">of this same of the same sketch so again</span> <span data-start="1671.58" data-end="1673.44">it's all on CoffeeScript org there is an</span> <span data-start="1673.44" data-end="1675.539">interactive compiler you can try it'll</span> <span data-start="1675.539" data-end="1677.549">it'll compile as you type right here</span> <span data-start="1677.549" data-end="1679.649">it's running in the browser there's also</span> <span data-start="1679.649" data-end="1681.96">the entire annotated source right next</span> <span data-start="1681.96" data-end="1683.46">to that so if you want to read what the</span> <span data-start="1683.46" data-end="1684.84">grammar looks like you can pop over to</span> <span data-start="1684.84" data-end="1686.789">that and you can check out what all the</span> <span data-start="1686.789" data-end="1688.71">rules are so here's statements</span> <span data-start="1688.71" data-end="1691.1">expressions all this kind of stuff and</span> <span data-start="1691.1" data-end="1693.809">come talk to me about it after if you</span> <span data-start="1693.809" data-end="1699.11">have any more questions and thanks a lot</span> </p>
</section>