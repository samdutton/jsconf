<section>
<p><span data-start="8.77" data-end="11">those the first question we have for</span> <span data-start="11" data-end="13.04">everybody is who here has heard of</span> <span data-start="13.04" data-end="16.16">couchdb there's not very long ago those</span> <span data-start="16.16" data-end="17.9">hands wouldn't be going up so what you</span> <span data-start="17.9" data-end="21.74">guys Rock just for that yeah and so</span> <span data-start="21.74" data-end="25.15">who's used it a little bit who likes it</span> <span data-start="25.15" data-end="29.15">it's good more hands cool we came to the</span> <span data-start="29.15" data-end="31.97">right place so I'm Chris Anderson I'm</span> <span data-start="31.97" data-end="34.64">one of the couch TV committers I'm kind</span> <span data-start="34.64" data-end="36.47">of interested in the HTTP like restful</span> <span data-start="36.47" data-end="39.649">side of it and we're really nice guys so</span> <span data-start="39.649" data-end="40.82">we can't get to everything in the stock</span> <span data-start="40.82" data-end="42.17">would come find us later and we'll talk</span> <span data-start="42.17" data-end="43.94">all about CouchDB yeah my name is young</span> </p>
<p><span data-start="43.94" data-end="45.77">Nina I work also and catch TBN I'm more</span> <span data-start="45.77" data-end="47.989">into the I used to do mysql was a big</span> <span data-start="47.989" data-end="49.489">pain now I've got this other cool thing</span> <span data-start="49.489" data-end="52.01">working so that's my background and</span> <span data-start="52.01" data-end="53.84">we'll talk about cool things you can do</span> <span data-start="53.84" data-end="57.71">with card should be so so rather than</span> <span data-start="57.71" data-end="58.879">you know because we could give an</span> <span data-start="58.879" data-end="62.3">introductory talk and talk all about you</span> <span data-start="62.3" data-end="64.43">know like the basics of couchdb but you</span> <span data-start="64.43" data-end="65.84">already know that so we're going to talk</span> <span data-start="65.84" data-end="67.909">a little bit about what happens once</span> <span data-start="67.909" data-end="69.47">you're already using couchdb wow you</span> <span data-start="69.47" data-end="71.09">have to think differently writing</span> <span data-start="71.09" data-end="73.25">applications or how your how you can</span> <span data-start="73.25" data-end="76.49">think differently if you want so yeah</span> <span data-start="76.49" data-end="78.46">we're going to focus on programming</span> <span data-start="78.46" data-end="80.95">applications that live at the edge</span> <span data-start="80.95" data-end="83.39">there's two features a couch TV that</span> <span data-start="83.39" data-end="85.39">make this possible one of them is that</span> <span data-start="85.39" data-end="87.32">applications can be documents and the</span> <span data-start="87.32" data-end="89.24">other one is that replication is awesome</span> <span data-start="89.24" data-end="91.04">and when you combine those two you can</span> <span data-start="91.04" data-end="93.14">get applications that live at the edge</span> <span data-start="93.14" data-end="95.119">of the network okay we'll talk all about</span> <span data-start="95.119" data-end="98.09">that good oh yeah go ahead but before we</span> <span data-start="98.09" data-end="99.71">do that a little bit of CouchDB and</span> <span data-start="99.71" data-end="103.22">yalls an expert's so this is this is our</span> <span data-start="103.22" data-end="105.11">bullet points this the agenda that like</span> <span data-start="105.11" data-end="106.939">the things we talked about on KGB so</span> <span data-start="106.939" data-end="108.77">catchy beats a document based database</span> <span data-start="108.77" data-end="110.63">which is not a relational database so</span> <span data-start="110.63" data-end="112.329">you don't have any tables any schemer</span> <span data-start="112.329" data-end="114.71">but you have this thing called documents</span> <span data-start="114.71" data-end="116.81">which you know cases json documents so</span> <span data-start="116.81" data-end="118.63">you all know Jason off of course and</span> <span data-start="118.63" data-end="121.1">what you can do instead of figuring out</span> <span data-start="121.1" data-end="123.229">how to like take your data probe that</span> <span data-start="123.229" data-end="124.85">you get data objects that you use in</span> <span data-start="124.85" data-end="126.71">your language might be JavaScript might</span> <span data-start="126.71" data-end="128.779">be something else you don't figure out</span> <span data-start="128.779" data-end="130.159">how to split that up in tables and rose</span> <span data-start="130.159" data-end="132.469">but instead you just saw that object to</span> <span data-start="132.469" data-end="134.09">get back a key if you want that object</span> <span data-start="134.09" data-end="134.54">back a gift</span> <span data-start="134.54" data-end="135.65">actually be the key and get back your</span> <span data-start="135.65" data-end="137.42">object it's a very simple very simple</span> <span data-start="137.42" data-end="140.9">concept we've got sort of revision</span> <span data-start="140.9" data-end="144.26">control which is not not not what</span> <span data-start="144.26" data-end="145.7">subversion is that's not real version</span> <span data-start="145.7" data-end="147.98">control but we use it as a means to</span> <span data-start="147.98" data-end="149.75">expose multi version concurrency control</span> <span data-start="149.75" data-end="152.39">to the user so that whoever saves first</span> <span data-start="152.39" data-end="153.65">wins you're never going to save over</span> <span data-start="153.65" data-end="155.03">somebody else's work when you're using</span> <span data-start="155.03" data-end="157.939">couch TV right the the trade-off we're</span> <span data-start="157.939" data-end="160.459">making is that we don't want any locking</span> <span data-start="160.459" data-end="162.079">and catch TB so we said want to support</span> <span data-start="162.079" data-end="163.519">high levels of concurrency in a locking</span> <span data-start="163.519" data-end="165.26">system will at some point be busy trying</span> <span data-start="165.26" data-end="166.37">to figure out who's allowed to do what</span> <span data-start="166.37" data-end="168.379">and in catch me we just don't have any</span> <span data-start="168.379" data-end="169.76">locks but you need to be the first one</span> <span data-start="169.76" data-end="171.47">to safe and if you come late you can't</span> <span data-start="171.47" data-end="174.079">save and need to reroute and so on Wow</span> <span data-start="174.079" data-end="176.81">the next thing Oh HTTP right so you</span> <span data-start="176.81" data-end="179.209">already know that the API to catch TV is</span> </p>
<p><span data-start="179.209" data-end="181.34">HTTP but there's some cool things about</span> <span data-start="181.34" data-end="183.2">that one of them is it all the HTTP like</span> <span data-start="183.2" data-end="185.75">middleware and caches and you know load</span> <span data-start="185.75" data-end="187.25">balancers all that just works so if</span> <span data-start="187.25" data-end="189.349">you've deployed things you know into a</span> <span data-start="189.349" data-end="191.87">cluster of HTTP app servers you can you</span> <span data-start="191.87" data-end="193.84">can also deploy a large-scale CouchDB</span> <span data-start="193.84" data-end="196.099">installation okay if you've got</span> <span data-start="196.099" data-end="197.209">operations people running your</span> <span data-start="197.209" data-end="198.349">applications they'll be really happy</span> <span data-start="198.349" data-end="199.639">because they already know how to scale</span> <span data-start="199.639" data-end="201.979">Apache and they know cannot take all the</span> <span data-start="201.979" data-end="203.12">infrastructure they have to scale your</span> <span data-start="203.12" data-end="204.799">web front and put it in front of the</span> <span data-start="204.799" data-end="205.97">database they don't need any like</span> <span data-start="205.97" data-end="207.819">special hardware software to do that and</span> <span data-start="207.819" data-end="209.81">and we'll talk to that one of these</span> <span data-start="209.81" data-end="211.34">bullet points is replication but we'll</span> <span data-start="211.34" data-end="214.01">go into detail on that so right so at</span> <span data-start="214.01" data-end="216.319">this point we've got a oh sorry yeah we</span> <span data-start="216.319" data-end="217.519">can go on and on and this is all</span> <span data-start="217.519" data-end="219.979">technical and whatever but hopefully you</span> <span data-start="219.979" data-end="222.769">know the big point is that couchdb is</span> <span data-start="222.769" data-end="224.87">simple you know like that there's just</span> <span data-start="224.87" data-end="226.459">documents or not relations there's not</span> <span data-start="226.459" data-end="227.93">like you know updating parts of</span> <span data-start="227.93" data-end="229.159">documents and hoping that you know it</span> <span data-start="229.159" data-end="233.269">worked out it's just it's simple so yeah</span> <span data-start="233.269" data-end="235.25">this capable thing is like scalings like</span> <span data-start="235.25" data-end="237.199">the buzzword of 2008 and I hated one</span> <span data-start="237.199" data-end="239.479">started and still hate it so what what</span> <span data-start="239.479" data-end="240.53">kind should be enforces here's the</span> <span data-start="240.53" data-end="242.329">application developer is to make your</span> <span data-start="242.329" data-end="244.729">application in a way that cash we will</span> <span data-start="244.729" data-end="246.56">be able to run it or not just a single</span> <span data-start="246.56" data-end="248.81">instance but on multiple instances so</span> <span data-start="248.81" data-end="251">you can scale up the the computing usage</span> <span data-start="251" data-end="252.259">of your application whatever that is</span> <span data-start="252.259" data-end="254.659">like maybe disk might be memory might be</span> <span data-start="254.659" data-end="257.239">might be a CPU but we can just put in</span> <span data-start="257.239" data-end="258.259">more couch just to make your application</span> <span data-start="258.259" data-end="261.5">faster and better the downside is you</span> <span data-start="261.5" data-end="262.909">cannot do everything and catch to me so</span> <span data-start="262.909" data-end="264.74">we put you in a sort of a straitjacket</span> <span data-start="264.74" data-end="265.83">that you cannot do things</span> <span data-start="265.83" data-end="268.439">don't scale which is still most of the</span> <span data-start="268.439" data-end="269.639">things because we've got big sites</span> <span data-start="269.639" data-end="271.319">that's do scale and other systems and</span> <span data-start="271.319" data-end="273.09">they do use the same straightjacket so</span> <span data-start="273.09" data-end="274.949">and we just use these like in core</span> <span data-start="274.949" data-end="277.139">couchdb and make okay give you a nice</span> <span data-start="277.139" data-end="280.77">like a comfortable place to do scalable</span> <span data-start="280.77" data-end="282.689">applicant on relational database for</span> <span data-start="282.689" data-end="283.83">more reasons than just because we're</span> <span data-start="283.83" data-end="285.659">honoring like really think there's good</span> <span data-start="285.659" data-end="287.879">reasons to leave that stuff out of your</span> <span data-start="287.879" data-end="291.09">you know your one share tier and your in</span> <span data-start="291.09" data-end="293.909">your application so distributed that's</span> <span data-start="293.909" data-end="295.139">the fun part that's what we're really</span> <span data-start="295.139" data-end="297.96">going to get into so couchdb you know it</span> <span data-start="297.96" data-end="299.729">uses like 10 megs of ram when it's under</span> <span data-start="299.729" data-end="301.919">heavy load it's not it's not a big thing</span> <span data-start="301.919" data-end="303.629">to install so you can run it on your</span> <span data-start="303.629" data-end="305.069">smartphone or what I mean you know</span> <span data-start="305.069" data-end="309.449">that's our that's our hope and it'll run</span> <span data-start="309.449" data-end="312.03">on the client side like you know next to</span> <span data-start="312.03" data-end="314.25">the browser so you can have applications</span> <span data-start="314.25" data-end="315.84">that come all the way down to the client</span> <span data-start="315.84" data-end="319.56">it actually does ronald g one yeah see</span> <span data-start="319.56" data-end="321.449">have we got it running or someone who</span> <span data-start="321.449" data-end="324.09">what they these crazy guys crazy guys</span> <span data-start="324.09" data-end="327.15">got it on as you want all right so if</span> <span data-start="327.15" data-end="328.71">you don't believe us some people you</span> <span data-start="328.71" data-end="330">know have already stepped up to the</span> <span data-start="330" data-end="332.55">plate we will name any names but there</span> <span data-start="332.55" data-end="334.08">are people using couchdb and production</span> <span data-start="334.08" data-end="336.06">even though it's still alpha software so</span> <span data-start="336.06" data-end="337.77">they're putting real money behind you I</span> <span data-start="337.77" data-end="340.289">know it like I know if a handful of</span> <span data-start="340.289" data-end="342.3">startups that are based around the</span> <span data-start="342.3" data-end="343.889">contact and some project that has</span> <span data-start="343.889" data-end="345.69">casually be in its core so there's real</span> <span data-start="345.69" data-end="347.159">money going into guys should be already</span> <span data-start="347.159" data-end="349.229">even though like we're kind of not there</span> <span data-start="349.229" data-end="352.05">yet but it's because yeah the you know</span> <span data-start="352.05" data-end="353.43">engineers the top these organizations</span> <span data-start="353.43" data-end="356.33">recognize that our design is simple and</span> </p>
<p><span data-start="356.33" data-end="358.5">I'm not to complicate it but that's not</span> <span data-start="358.5" data-end="359.25">what we're here to talk to you about</span> <span data-start="359.25" data-end="361.469">we're here to talk to you about pure</span> <span data-start="361.469" data-end="362.909">JavaScript applications because we all</span> <span data-start="362.909" data-end="368.279">love JavaScript yeah and there's you</span> <span data-start="368.279" data-end="369.629">know we're going to will go through this</span> <span data-start="369.629" data-end="372.75">in sort of a you know crazy order just</span> <span data-start="372.75" data-end="373.889">because I want to get the big picture</span> <span data-start="373.889" data-end="375.979">costs before we get too technical but</span> <span data-start="375.979" data-end="379.02">what matters about you know you could</span> <span data-start="379.02" data-end="380.61">write a JavaScript application and host</span> <span data-start="380.61" data-end="383.909">it you know inside of a titanium or on</span> <span data-start="383.909" data-end="385.379">your server or you know any number of</span> <span data-start="385.379" data-end="388.589">ways but the cool thing about couch TV</span> <span data-start="388.589" data-end="390.18">being sort of you know it's agnostic as</span> <span data-start="390.18" data-end="392.339">to where it's running is that you get</span> <span data-start="392.339" data-end="394.649">these applications and add the data as</span> <span data-start="394.649" data-end="397.729">well that you can ship around too</span> <span data-start="397.729" data-end="401.909">yeah it's a I've got a lot to say about</span> <span data-start="401.909" data-end="403.199">this but i kinda want spread out through</span> <span data-start="403.199" data-end="407.759">the course of the talk the important</span> <span data-start="407.759" data-end="409.83">thing being that the source code travels</span> <span data-start="409.83" data-end="411.389">with the with the data with the</span> <span data-start="411.389" data-end="413.639">application so that means that you know</span> <span data-start="413.639" data-end="415.349">think if I'd in a way that like</span> <span data-start="415.349" data-end="417.81">functional programming makes code being</span> <span data-start="417.81" data-end="420.419">data to make like code more expressive</span> <span data-start="420.419" data-end="422.46">catch to be max applications being data</span> <span data-start="422.46" data-end="424.71">to make applications more shareable more</span> <span data-start="424.71" data-end="427.529">independent and more more fun so yeah so</span> <span data-start="427.529" data-end="429.12">we hope that you know we end up making</span> <span data-start="429.12" data-end="430.289">it easier for people to hack on the</span> <span data-start="430.289" data-end="433.4">programs they use on a daily basis but</span> <span data-start="433.4" data-end="436.11">in order to understand how to build</span> <span data-start="436.11" data-end="437.849">applications in couch TV will dive a</span> <span data-start="437.849" data-end="440.729">little bit into document modeling so</span> <span data-start="440.729" data-end="442.86">yeah I think I mean a basic document is</span> <span data-start="442.86" data-end="444.81">just like a you know it's a JavaScript</span> <span data-start="444.81" data-end="447.749">object so JSON uh you know with curly</span> <span data-start="447.749" data-end="449.61">braces and that lets you put pretty much</span> <span data-start="449.61" data-end="452.279">anything you want into it the we catch</span> <span data-start="452.279" data-end="453.839">be reserved reserves the underscore</span> <span data-start="453.839" data-end="455.49">namespace everything every attribute to</span> <span data-start="455.49" data-end="456.96">start with an underscore is special to</span> <span data-start="456.96" data-end="458.699">catch TV and everything else you want to</span> <span data-start="458.699" data-end="461.159">put in there can be whatever like you</span> <span data-start="461.159" data-end="462.629">should be familiar with putting whatever</span> <span data-start="462.629" data-end="464.789">into something but that's kind if you</span> <span data-start="464.789" data-end="467.669">come from the relation later okay I'm</span> <span data-start="467.669" data-end="469.319">not a native speaker might say stupid</span> <span data-start="469.319" data-end="475.08">things so I had one talk I said like</span> </p>
<p><span data-start="475.08" data-end="476.879">Coach like culture replication goes both</span> <span data-start="476.879" data-end="478.77">ways and I'm like what did I say no</span> <span data-start="478.77" data-end="480.509">nobody was snickering I'm like I didn't</span> <span data-start="480.509" data-end="485.339">get it anyway so in relational databases</span> <span data-start="485.339" data-end="487.229">yeah you have that fixed schema thing</span> <span data-start="487.229" data-end="488.909">that's totally annoying if you want to</span> <span data-start="488.909" data-end="490.919">just add one field you run alter table</span> <span data-start="490.919" data-end="492.899">statement on like 16 gigabytes of code</span> <span data-start="492.899" data-end="494.069">and you're waiting a week until it's</span> <span data-start="494.069" data-end="496.409">done but in cash to me you use just your</span> <span data-start="496.409" data-end="498.06">not you need to start storing that you</span> <span data-start="498.06" data-end="501.149">know the Darth Vader has a sombrero so</span> <span data-start="501.149" data-end="502.56">you just add the sombrero field to his</span> <span data-start="502.56" data-end="506.669">document it's a and and then you know</span> <span data-start="506.669" data-end="509.009">you've got to do you've got to do some</span> <span data-start="509.009" data-end="510.93">duck typing in your application so that</span> <span data-start="510.93" data-end="513.24">your view will check for that but you</span> <span data-start="513.24" data-end="514.529">know you're already writing if if</span> <span data-start="514.529" data-end="516">statements hopefully when your display</span> <span data-start="516" data-end="518.519">and things anyway so that's okay leave</span> <span data-start="518.519" data-end="523.919">the dock yeah we've got like jason has</span> <span data-start="523.919" data-end="527.069">no type and if you want to program your</span> <span data-start="527.069" data-end="529.74">object of some sort of type and you</span> <span data-start="529.74" data-end="531.66">you want to like be able to like find</span> <span data-start="531.66" data-end="533.16">out what object is doing what or what</span> <span data-start="533.16" data-end="535.649">documents doing what so you're quite</span> <span data-start="535.649" data-end="537.54">flexible Minh and applying just tags to</span> <span data-start="537.54" data-end="539.37">documents and then read just these tags</span> <span data-start="539.37" data-end="541.29">and that's all very flexible you don't</span> <span data-start="541.29" data-end="542.85">have like again not a fixed schema thing</span> </p>
<p><span data-start="542.85" data-end="544.68">I keep raving about that because I</span> <span data-start="544.68" data-end="547.89">really hated not having a schema makes</span> <span data-start="547.89" data-end="549.51">it easy to evolve your application over</span> <span data-start="549.51" data-end="550.8">tell you what yeah we should we should</span> <span data-start="550.8" data-end="552.57">say that like having no schema doesn't</span> <span data-start="552.57" data-end="555.18">make migrations go away so if your data</span> <span data-start="555.18" data-end="556.98">changes that you need to deal with it</span> <span data-start="556.98" data-end="558.209">but you don't have to deal with it up</span> <span data-start="558.209" data-end="559.589">front but you can be a little bit lazy</span> <span data-start="559.589" data-end="564.149">or agile with it so switching gears a</span> <span data-start="564.149" data-end="565.83">little bit about you know from from</span> <span data-start="565.83" data-end="567.2">another point of view about the</span> <span data-start="567.2" data-end="569.79">technical aspect of CouchDB because of</span> <span data-start="569.79" data-end="572.22">the Erlang implementation language it's</span> <span data-start="572.22" data-end="574.5">it's designed for super high concurrency</span> <span data-start="574.5" data-end="578.37">so show fans who he knows la that's so</span> </p>
<p><span data-start="578.37" data-end="581.7">Jake you're not paying attention that's</span> <span data-start="581.7" data-end="584.55">good so Owen was was built for for telco</span> <span data-start="584.55" data-end="586.95">industries and that was designed 20</span> <span data-start="586.95" data-end="588.66">years ago and they had a couple of</span> <span data-start="588.66" data-end="590.61">interesting problems they had these big</span> <span data-start="590.61" data-end="592.26">service that could never be offline they</span> <span data-start="592.26" data-end="594.329">had these like thousands of calls going</span> <span data-start="594.329" data-end="595.56">on at the same time and if there were a</span> <span data-start="595.56" data-end="596.97">problem with one of these calls none of</span> <span data-start="596.97" data-end="598.47">the other could be reflected it's not</span> <span data-start="598.47" data-end="599.82">like you can drop calls if there's the</span> </p>
<p><span data-start="599.82" data-end="601.29">ZEC fold and one of the calls for</span> <span data-start="601.29" data-end="603.66">whatever reason and a couple of other</span> <span data-start="603.66" data-end="605.94">things and they solve that with our line</span> <span data-start="605.94" data-end="608.37">and turns out like today in the web we</span> <span data-start="608.37" data-end="609.87">have similar problems we don't have we</span> <span data-start="609.87" data-end="610.89">have customers all over the world</span> <span data-start="610.89" data-end="612.839">there's no like downtime window at night</span> <span data-start="612.839" data-end="615.54">where we can do maintenance there is no</span> <span data-start="615.54" data-end="617.22">there's so many things going on at the</span> <span data-start="617.22" data-end="618.99">same time so the same it's basically the</span> <span data-start="618.99" data-end="620.31">same problem in all things just the</span> <span data-start="620.31" data-end="621.6">perfect solution for these kinds of</span> <span data-start="621.6" data-end="623.61">problems so it's a good fit for CouchDB</span> <span data-start="623.61" data-end="626.22">so what we get is specifically in our</span> <span data-start="626.22" data-end="629.49">own time with it is we get the ability</span> <span data-start="629.49" data-end="632.25">to handle like huge numbers of client</span> <span data-start="632.25" data-end="634.26">socket requests HTTP requests at the</span> <span data-start="634.26" data-end="636.72">same time and you know as the load goes</span> <span data-start="636.72" data-end="638.16">up you know the latency will go up a</span> <span data-start="638.16" data-end="639.45">little bit but the server doesn't just</span> <span data-start="639.45" data-end="640.95">fall over you know your networks akal</span> <span data-start="640.95" data-end="644.91">fall over before CouchDB does and there</span> <span data-start="644.91" data-end="647.399">was this this benchmark in a patchy to</span> <span data-start="647.399" data-end="649.23">against y'all's which is an all on clone</span> <span data-start="649.23" data-end="652.29">of Apache too and they like they</span> <span data-start="652.29" data-end="653.55">couldn't get a patchy to accept more</span> <span data-start="653.55" data-end="654.779">than two or three thousand concurrent</span> <span data-start="654.779" data-end="656.13">connections before it fell over and they</span> <span data-start="656.13" data-end="658.02">just stopped the benchmark at 85,000 for</span> <span data-start="658.02" data-end="660.089">yours it's not that it's there some</span> <span data-start="660.089" data-end="661.589">magic so that it will take longer that's</span> <span data-start="661.589" data-end="661.939">not</span> <span data-start="661.939" data-end="663.769">it's a finite computing power but if you</span> <span data-start="663.769" data-end="665.779">have a like huge spike on request the</span> <span data-start="665.779" data-end="667.069">handle will have airline will handle</span> <span data-start="667.069" data-end="668.959">that gracefully where's other system</span> <span data-start="668.959" data-end="672.079">very hard getting that right so that's</span> <span data-start="672.079" data-end="673.279">all stuff you don't have to worry about</span> <span data-start="673.279" data-end="674.72">if you're using CouchDB but it stuff</span> <span data-start="674.72" data-end="676.159">that makes it fun for us to make a kind</span> <span data-start="676.159" data-end="678.439">of CB right and another thing that you</span> <span data-start="678.439" data-end="679.609">don't have to worry about when you're</span> <span data-start="679.609" data-end="682.129">using couchdb is how it does this but</span> <span data-start="682.129" data-end="685.069">its replication is really resilient you</span> <span data-start="685.069" data-end="687.319">have data set on this machine a data set</span> <span data-start="687.319" data-end="689.359">on that machine you can make you can</span> <span data-start="689.359" data-end="691.459">bring them in sync with a single HTTP</span> <span data-start="691.459" data-end="693.289">request so say you have an address book</span> <span data-start="693.289" data-end="694.609">on your phone on your home computer on</span> <span data-start="694.609" data-end="696.259">your laptop on New York work computer</span> <span data-start="696.259" data-end="697.849">and you like make changes to one one</span> <span data-start="697.849" data-end="699.649">instance and you want this change to pop</span> <span data-start="699.649" data-end="701.389">up everywhere else and a couple of</span> <span data-start="701.389" data-end="703.579">products to do that mobileme is one that</span> <span data-start="703.579" data-end="705.439">works pretty well and other ones that</span> <span data-start="705.439" data-end="708.199">are sort of that that come up in that</span> <span data-start="708.199" data-end="710.659">space but they always required to</span> <span data-start="710.659" data-end="713.389">require you to go through some kind of</span> <span data-start="713.389" data-end="716.239">vendors through the cloud and we think</span> <span data-start="716.239" data-end="717.619">it's kind of cool if you could just like</span> <span data-start="717.619" data-end="719.209">my phone's just in the same way for that</span> <span data-start="719.209" data-end="720.889">my laptop I can I just not talk about</span> <span data-start="720.889" data-end="723.739">without talking to Apple that would be</span> <span data-start="723.739" data-end="724.789">kind of nice and contributed let's</span> <span data-start="724.789" data-end="726.879">allows you to do just that doing like</span> <span data-start="726.879" data-end="729.529">multi-node synchronization that works</span> <span data-start="729.529" data-end="731.989">solo flawlessly without going through</span> <span data-start="731.989" data-end="734.329">any cloud vendor yeah so Oh ops people</span> <span data-start="734.329" data-end="736.789">really like this because it simplifies a</span> <span data-start="736.789" data-end="740.179">lot of deployment scenarios like one you</span> <span data-start="740.179" data-end="742.579">know so you just have one couch that</span> <span data-start="742.579" data-end="745.339">you've deployed and you know the local</span> <span data-start="745.339" data-end="746.899">starts to get kind of high so okay if</span> <span data-start="746.899" data-end="748.549">you if you like actually be because code</span> <span data-start="748.549" data-end="750.019">should be itself is pretty cool you like</span> <span data-start="750.019" data-end="751.639">in make an application that runs on cash</span> <span data-start="751.639" data-end="753.169">to be and runs on one machine and you</span> <span data-start="753.169" data-end="754.549">know that there will be problems like</span> <span data-start="754.549" data-end="757.069">things break it's just a fact so in that</span> <span data-start="757.069" data-end="758.269">case you just want to have a second</span> <span data-start="758.269" data-end="760.189">couch that it's just there in case that</span> <span data-start="760.189" data-end="761.779">can take over from the other couch so</span> <span data-start="761.779" data-end="763.22">this is just a heart failed over let's</span> <span data-start="763.22" data-end="765.409">just a whole file over or master slave</span> <span data-start="765.409" data-end="767.599">thingy that you can set up with MySQL</span> <span data-start="767.599" data-end="770.659">for example pretty easily and if you're</span> <span data-start="770.659" data-end="772.519">the traditional web thing you have a lot</span> <span data-start="772.519" data-end="774.169">more right reads than rides that's where</span> <span data-start="774.169" data-end="776.599">the next slide comes in you just make</span> <span data-start="776.599" data-end="779.329">your this read cluster that just</span> <span data-start="779.329" data-end="780.499">everybody reads from in this single</span> <span data-start="780.499" data-end="781.819">master thing either replicates with the</span> <span data-start="781.819" data-end="783.139">other ones and that's official be</span> <span data-start="783.139" data-end="784.549">familiar with that so you just throw</span> <span data-start="784.549" data-end="786.229">your engine text or whatever in front of</span> <span data-start="786.229" data-end="787.669">that to load balance there if this one</span> <span data-start="787.669" data-end="789.349">falls out of the cluster no big deal</span> <span data-start="789.349" data-end="791.029">because the web browser will block the</span> <span data-start="791.029" data-end="792.859">requests and but but that's let's no</span> <span data-start="792.859" data-end="794.1">different than mysql replica</span> <span data-start="794.1" data-end="795.66">that's exactly the use case my school</span> <span data-start="795.66" data-end="798.029">that replication was designed for it's</span> <span data-start="798.029" data-end="799.62">important to note that these arrows are</span> <span data-start="799.62" data-end="802.56">triggered replication so what that means</span> <span data-start="802.56" data-end="803.97">is the replicates once and gets</span> <span data-start="803.97" data-end="805.17">everything up to date for each trigger</span> <span data-start="805.17" data-end="806.43">but you could put the trigger on a cron</span> <span data-start="806.43" data-end="808.29">job the idea is we're giving you really</span> <span data-start="808.29" data-end="809.91">simple primitives for moving you know</span> <span data-start="809.91" data-end="811.35">for keeping the data in sync right it's</span> <span data-start="811.35" data-end="812.85">not that you just set up like a magic</span> <span data-start="812.85" data-end="814.079">synchronization thing they also</span> <span data-start="814.079" data-end="816.389">unidirectional so you move one from for</span> <span data-start="816.389" data-end="818.13">one couch to the other and not backwards</span> <span data-start="818.13" data-end="820.11">and if you want to do that you just swap</span> <span data-start="820.11" data-end="821.519">the arguments to the replication call</span> <span data-start="821.519" data-end="823.889">from the source and the target database</span> <span data-start="823.889" data-end="825.6">of this is where this comes in coach to</span> <span data-start="825.6" data-end="827.399">be replication unlike the mysql master</span> <span data-start="827.399" data-end="829.44">slave replication is designed to be an</span> <span data-start="829.44" data-end="831.779">master a multi-master replication so any</span> <span data-start="831.779" data-end="833.85">node that runs the couch TV is a master</span> <span data-start="833.85" data-end="835.319">database as far as contribute</span> <span data-start="835.319" data-end="838.44">replication is concerned and even kind</span> <span data-start="838.44" data-end="839.73">of three masters like you can talk to</span> <span data-start="839.73" data-end="841.47">the MySQL guys and their game yeah just</span> <span data-start="841.47" data-end="843.54">do two to master setups like yeah I've</span> <span data-start="843.54" data-end="845.13">got too much of a right load I like to</span> <span data-start="845.13" data-end="846.769">do like three masters and I can know</span> <span data-start="846.769" data-end="849.18">that I don't go there and like in catch</span> <span data-start="849.18" data-end="851.579">to be you can like it the way it's</span> <span data-start="851.579" data-end="852.75">designed the way you design your</span> <span data-start="852.75" data-end="854.79">application around replication will make</span> <span data-start="854.79" data-end="856.829">sure it will it will work that way yeah</span> </p>
<p><span data-start="856.829" data-end="858.089">I mean there's you know we'll get to</span> <span data-start="858.089" data-end="859.019">some of the things you have to think</span> <span data-start="859.019" data-end="861.42">about especially in terms of like</span> <span data-start="861.42" data-end="864.149">identity and having you know the same</span> <span data-start="864.149" data-end="865.8">same document on all three nodes you</span> <span data-start="865.8" data-end="867.509">gotta avoid update collisions and</span> <span data-start="867.509" data-end="869.49">whatnot but that's application level at</span> <span data-start="869.49" data-end="871.649">the couch to be level it just you know</span> <span data-start="871.649" data-end="873.42">handles that for you so you can have the</span> <span data-start="873.42" data-end="875.85">same data on all three nodes you know</span> <span data-start="875.85" data-end="879.06">pretty easily and you can get even</span> <span data-start="879.06" data-end="880.8">crazier like there's no reason not to</span> <span data-start="880.8" data-end="882.149">just have everybody replicating with</span> <span data-start="882.149" data-end="884.16">everybody all the time this is the world</span> <span data-start="884.16" data-end="885.72">that I'm talking about building</span> </p>
<p><span data-start="885.72" data-end="888.509">JavaScript applications for and that's</span> <span data-start="888.509" data-end="892.74">so you know this is your computer and</span> <span data-start="892.74" data-end="894.42">that's my computer and you send me a</span> <span data-start="894.42" data-end="896.13">message you know you put something in an</span> <span data-start="896.13" data-end="897.959">envelope for me and maybe bounces around</span> <span data-start="897.959" data-end="899.37">a little bit and maybe it gets to me I</span> <span data-start="899.37" data-end="900.329">mean it's not the way you want to write</span> <span data-start="900.329" data-end="901.649">everything but it's kind of fun that you</span> <span data-start="901.649" data-end="904.199">can do that without a centralized you</span> <span data-start="904.199" data-end="907.17">know control point so to the user to</span> <span data-start="907.17" data-end="909.029">somebody who is actually you know using</span> <span data-start="909.029" data-end="910.23">your application it just sort of looks</span> <span data-start="910.23" data-end="912.689">like they drop their message you know</span> <span data-start="912.689" data-end="913.98">into the pond and the ripples are going</span> <span data-start="913.98" data-end="916.649">out yeah I think we didn't mention</span> <span data-start="916.649" data-end="918.209">peer-to-peer but that is that like a</span> <span data-start="918.209" data-end="919.709">true pit to pay set up that you can set</span> <span data-start="919.709" data-end="921.18">up with catch to be just send stuff</span> <span data-start="921.18" data-end="923.25">along and it eventually arrives where it</span> <span data-start="923.25" data-end="924.959">belongs just as long as the two nodes</span> <span data-start="924.959" data-end="925.62">can</span> <span data-start="925.62" data-end="929.7">touch via HTTP so yeah maybe maybe one</span> <span data-start="929.7" data-end="931.41">day I'll be like a scientist and figure</span> <span data-start="931.41" data-end="932.64">out how to get HTTP to go through all</span> <span data-start="932.64" data-end="934.5">the firewalls I would just we just by</span> <span data-start="934.5" data-end="938.73">skype and they so we mentioned document</span> <span data-start="938.73" data-end="941.06">modeling but it comes up again because</span> <span data-start="941.06" data-end="946.44">applications are documents so if all the</span> <span data-start="946.44" data-end="948.48">things that apply to documents apply to</span> <span data-start="948.48" data-end="950.04">applique should we should mention one</span> <span data-start="950.04" data-end="951.51">more feature of documents so JS</span> <span data-start="951.51" data-end="954.36">documents are just Jason blobs or Jason</span> <span data-start="954.36" data-end="956.55">documents of objects and but they also</span> <span data-start="956.55" data-end="958.32">can have attachments just like email can</span> <span data-start="958.32" data-end="960.24">have attachment so you can just assign</span> <span data-start="960.24" data-end="962.43">well attach arbitrary binary stuff to a</span> <span data-start="962.43" data-end="964.44">document as much as you want and so you</span> <span data-start="964.44" data-end="965.88">can just put piles and then files could</span> <span data-start="965.88" data-end="968.76">be for example HTTP for HTML files CSS</span> <span data-start="968.76" data-end="970.62">file JavaScript files and they all get</span> <span data-start="970.62" data-end="972.87">there on your eye so you can point a</span> <span data-start="972.87" data-end="974.67">browser to catch to be inserted HTML</span> <span data-start="974.67" data-end="976.26">file from couch to be into your browser</span> <span data-start="976.26" data-end="977.49">and your browser will render it because</span> <span data-start="977.49" data-end="979.17">coach people know the correct content</span> <span data-start="979.17" data-end="980.88">type to send yeah you can even take like</span> <span data-start="980.88" data-end="982.529">a Holden set of nested directories like</span> <span data-start="982.529" data-end="983.79">if you're building static web pages and</span> <span data-start="983.79" data-end="984.96">just shove it up into a couch TV</span> <span data-start="984.96" data-end="986.91">document and the you know everything</span> <span data-start="986.91" data-end="988.77">will work out the HTML file then will</span> <span data-start="988.77" data-end="990.51">reference like the JavaScript and CSS</span> <span data-start="990.51" data-end="992.1">resources that then get pulled from</span> <span data-start="992.1" data-end="994.56">couch to be again so you get full full</span> </p>
<p><span data-start="994.56" data-end="996.69">JavaScript enabled application serving</span> <span data-start="996.69" data-end="998.01">right out of catch keeping without any</span> <span data-start="998.01" data-end="999.93">sort of middleware layer so yeah so when</span> <span data-start="999.93" data-end="1001.94">you're doing when you're doing document</span> <span data-start="1001.94" data-end="1003.89">based applications you want documents to</span> <span data-start="1003.89" data-end="1006.65">stand alone you want them to sort of</span> <span data-start="1006.65" data-end="1007.88">contain their own context where it's</span> <span data-start="1007.88" data-end="1009.47">like in a relational system what you</span> <span data-start="1009.47" data-end="1011.27">have is you know one table that pulls</span> <span data-start="1011.27" data-end="1012.77">out from a million other tables to get</span> <span data-start="1012.77" data-end="1014.63">the to get the data that you need in</span> <span data-start="1014.63" data-end="1016.52">order to answer your queries but with</span> <span data-start="1016.52" data-end="1018.08">cow should be like you want that to be</span> <span data-start="1018.08" data-end="1019.4">one request you know maybe a couple</span> <span data-start="1019.4" data-end="1021.29">other requests but the context is in the</span> <span data-start="1021.29" data-end="1024.309">document and so that feeds into having</span> <span data-start="1024.309" data-end="1026.87">applications be documents because then</span> <span data-start="1026.87" data-end="1027.92">you've got the duck you've got this</span> <span data-start="1027.92" data-end="1029.66">document that is just the whole</span> <span data-start="1029.66" data-end="1031.699">application right there and that means</span> <span data-start="1031.699" data-end="1033.41">that if you if you replicate it the</span> <span data-start="1033.41" data-end="1034.76">application replicates just like a</span> <span data-start="1034.76" data-end="1036.38">document would so practical use case for</span> <span data-start="1036.38" data-end="1038.089">that that's kind of fun chris has a blog</span> <span data-start="1038.089" data-end="1039.5">that's the couch app running on Jake</span> <span data-start="1039.5" data-end="1041.179">trace aid on that that you can just hit</span> <span data-start="1041.179" data-end="1045.05">right now if Wi-Fi still working I can</span> <span data-start="1045.05" data-end="1046.73">just replicate from Christmas blog to my</span> <span data-start="1046.73" data-end="1048.679">couch to be instance and I have chris's</span> <span data-start="1048.679" data-end="1050.42">blog software running running on my</span> <span data-start="1050.42" data-end="1052.82">computer and I really like Christmas</span> <span data-start="1052.82" data-end="1054.44">blog but I don't like the green color of</span> <span data-start="1054.44" data-end="1055.94">the header bar so I change that to blue</span> <span data-start="1055.94" data-end="1058.25">on my couch to be instance and then I</span> <span data-start="1058.25" data-end="1058.97">have my own</span> <span data-start="1058.97" data-end="1060.679">put my own content and it put publish it</span> <span data-start="1060.679" data-end="1063.62">to my like cash to be public server and</span> <span data-start="1063.62" data-end="1065.03">everybody can read my blog that's I</span> <span data-start="1065.03" data-end="1067.13">actually Chris blog but my content and</span> <span data-start="1067.13" data-end="1069.26">my colors and I got a blog for free</span> <span data-start="1069.26" data-end="1071">which is kind of nice and then Chris</span> <span data-start="1071" data-end="1072.559">sees okay my colors are better or did</span> <span data-start="1072.559" data-end="1073.85">better topography or whatever and you</span> <span data-start="1073.85" data-end="1075.679">can pull out changes back to his couch</span> <span data-start="1075.679" data-end="1077.9">and go all crazy and if you all like to</span> <span data-start="1077.9" data-end="1079.549">get model off of open source development</span> <span data-start="1079.549" data-end="1082.159">that's a lot like it yeah i mean i would</span> <span data-start="1082.159" data-end="1084.5">actually do my development sharing and</span> <span data-start="1084.5" data-end="1086.36">get still but for data sharing like</span> <span data-start="1086.36" data-end="1088.58">especially public data sets the ability</span> <span data-start="1088.58" data-end="1090.14">to replicate it around and then you know</span> <span data-start="1090.14" data-end="1092.24">so you have an application that can you</span> <span data-start="1092.24" data-end="1094.159">know graph the number of traffic tickets</span> <span data-start="1094.159" data-end="1095.99">by you know square mile radius from your</span> <span data-start="1095.99" data-end="1098.12">house or whatever and at someone else</span> <span data-start="1098.12" data-end="1099.679">says well like you know that's kind of</span> <span data-start="1099.679" data-end="1101.179">cool that square mile radius thing but i</span> <span data-start="1101.179" data-end="1103.07">want to see you know like some other</span> <span data-start="1103.07" data-end="1105.169">crime statistic or you know where are</span> <span data-start="1105.169" data-end="1107.12">they putting in new parks so you can</span> <span data-start="1107.12" data-end="1108.5">take the applications on the data and</span> <span data-start="1108.5" data-end="1109.789">remix them really freely because</span> <span data-start="1109.789" data-end="1111.59">everybody's got all the you know</span> <span data-start="1111.59" data-end="1113.929">everything it takes to budge the data as</span> <span data-start="1113.929" data-end="1117.35">well as to handle the you know display</span> <span data-start="1117.35" data-end="1121.19">in it so this is my metal icon for an</span> <span data-start="1121.19" data-end="1123.5">application so your document goes into</span> </p>
<p><span data-start="1123.5" data-end="1126.38">CouchDB and then it gets unfurled into a</span> <span data-start="1126.38" data-end="1129.5">beautiful flower of functionality so</span> <span data-start="1129.5" data-end="1130.909">look out for that if you see it again</span> <span data-start="1130.909" data-end="1133.82">it's an application but how what like</span> <span data-start="1133.82" data-end="1137.51">it's a database so how does it run this</span> <span data-start="1137.51" data-end="1140.179">application and and that's what we're</span> <span data-start="1140.179" data-end="1141.409">going to get into for the next little</span> <span data-start="1141.409" data-end="1144.169">section here so there's a special kind</span> <span data-start="1144.169" data-end="1145.669">of document all the only thing special</span> <span data-start="1145.669" data-end="1147.679">about it is it lives in this namespace</span> <span data-start="1147.679" data-end="1151.1">and couch to be looks in there for the</span> <span data-start="1151.1" data-end="1154.97">application alright so the design</span> <span data-start="1154.97" data-end="1156.59">document we call these design documents</span> <span data-start="1156.59" data-end="1158.36">is just like a regular document the only</span> <span data-start="1158.36" data-end="1160.039">special thing is let's start the idea of</span> <span data-start="1160.039" data-end="1161.6">that or the key of the document stars</span> <span data-start="1161.6" data-end="1165.409">with underscore ID / design / and the</span> <span data-start="1165.409" data-end="1166.97">other thing is that catch will look for</span> <span data-start="1166.97" data-end="1168.679">fields in that document so if it has a</span> <span data-start="1168.679" data-end="1171.799">field views and other than what we got</span> <span data-start="1171.799" data-end="1175.039">there so views validations and like my</span> <span data-start="1175.039" data-end="1178.76">thing one off so so a couch TV it has</span> </p>
<p><span data-start="1178.76" data-end="1180.32">MapReduce that's like a nice buzz word</span> <span data-start="1180.32" data-end="1181.73">that we have but it actually turns out</span> <span data-start="1181.73" data-end="1183.289">to be great for Trent you know for</span> <span data-start="1183.289" data-end="1185.02">transforming inquiry and json documents</span> <span data-start="1185.02" data-end="1187.25">the definitions for the MapReduce</span> <span data-start="1187.25" data-end="1189.799">queries live in the design documents</span> <span data-start="1189.799" data-end="1190.45">that was the first</span> <span data-start="1190.45" data-end="1192.79">got stored in there and then as we've</span> <span data-start="1192.79" data-end="1194.62">been adding features there's document</span> <span data-start="1194.62" data-end="1196.87">validations which are run against</span> <span data-start="1196.87" data-end="1198.67">updates as user saved them to make you</span> <span data-start="1198.67" data-end="1200.14">know make sure they're valid so no</span> <span data-start="1200.14" data-end="1202">schema is pretty cool but at some point</span> <span data-start="1202" data-end="1203.29">you really want to make sure like if</span> <span data-start="1203.29" data-end="1204.46">you're storing a blog post it should</span> <span data-start="1204.46" data-end="1207.01">have an office feel a title and and some</span> <span data-start="1207.01" data-end="1209.08">text body and the validation functions</span> <span data-start="1209.08" data-end="1210.76">can like they inspect every right</span> <span data-start="1210.76" data-end="1212.5">document that comes in on the right and</span> <span data-start="1212.5" data-end="1214.03">then can say okay I like I like a</span> <span data-start="1214.03" data-end="1215.35">document and I Sebadoh like you don't</span> <span data-start="1215.35" data-end="1217.54">know you forget to like put in the title</span> <span data-start="1217.54" data-end="1219.52">or something oh I forgot to mention I</span> <span data-start="1219.52" data-end="1220.78">mean we should just say this although</span> <span data-start="1220.78" data-end="1221.8">maybe it's obvious this is all</span> </p>
<p><span data-start="1221.8" data-end="1224.2">JavaScript code right here the mapreduce</span> <span data-start="1224.2" data-end="1225.55">is written in JavaScript the validations</span> <span data-start="1225.55" data-end="1227.5">are written in JavaScript most of the</span> <span data-start="1227.5" data-end="1228.76">functions that you end up seeing people</span> <span data-start="1228.76" data-end="1230.08">write are less than like five or ten</span> <span data-start="1230.08" data-end="1231.43">lines long it's really simple you know</span> <span data-start="1231.43" data-end="1232.99">you're just checking for a property on a</span> </p>
<p><span data-start="1232.99" data-end="1237.04">JSON object so the API is so simple you</span> <span data-start="1237.04" data-end="1239.23">know we can we can show you api examples</span> <span data-start="1239.23" data-end="1240.73">maybe tomorrow at a track be or</span> <span data-start="1240.73" data-end="1243.82">something and then rendering HTML is one</span> <span data-start="1243.82" data-end="1245.5">of the new features because just having</span> <span data-start="1245.5" data-end="1247.09">Jace on showing up from an API isn't</span> <span data-start="1247.09" data-end="1249.22">restful like that's not enough for a web</span> <span data-start="1249.22" data-end="1251.98">spider to crawl your site or anything so</span> <span data-start="1251.98" data-end="1254.83">we're adding the ability to render HTML</span> <span data-start="1254.83" data-end="1257.17">and we'll get into details of like some</span> <span data-start="1257.17" data-end="1258.67">of the philosophy behind how we do it ok</span> <span data-start="1258.67" data-end="1260.32">for the first two are the first and the</span> <span data-start="1260.32" data-end="1261.79">third thing the render in the MapReduce</span> <span data-start="1261.79" data-end="1263.29">like if if you have a design document</span> <span data-start="1263.29" data-end="1265.33">and you put in these functions and their</span> <span data-start="1265.33" data-end="1267.37">character will recognize new your eyes</span> <span data-start="1267.37" data-end="1268.99">so everything in casually B is a</span> <span data-start="1268.99" data-end="1271.09">resource and this render things and the</span> <span data-start="1271.09" data-end="1272.47">map and reduce our resources and catch</span> <span data-start="1272.47" data-end="1275.08">to be and if you define a MapReduce view</span> <span data-start="1275.08" data-end="1276.55">cut you will recognize that there's a</span> <span data-start="1276.55" data-end="1279.55">new you or I that's like / design your</span> <span data-start="1279.55" data-end="1281.8">document ID your view name and then you</span> <span data-start="1281.8" data-end="1283.87">can query that view or have that stuff</span> <span data-start="1283.87" data-end="1286.39">rendered through HTML through HTTP again</span> <span data-start="1286.39" data-end="1289.69">so that's all the same interface there's</span> <span data-start="1289.69" data-end="1290.77">you know there's some other stuff that</span> <span data-start="1290.77" data-end="1292.57">doesn't quite go into the design</span> <span data-start="1292.57" data-end="1295.36">document but it's still pretty handy</span> <span data-start="1295.36" data-end="1297.94">like installed with every copy of</span> </p>
<p><span data-start="1297.94" data-end="1301.06">CouchDB is jquery and then a jquery cash</span> <span data-start="1301.06" data-end="1302.74">to be plug-in which makes it really easy</span> <span data-start="1302.74" data-end="1304.39">to load documents and save documents and</span> <span data-start="1304.39" data-end="1306.64">run queries and whatnot like thanks John</span> <span data-start="1306.64" data-end="1308.86">for jQuery yeah it turns out to be</span> <span data-start="1308.86" data-end="1313.42">pretty handy so then we you know of</span> <span data-start="1313.42" data-end="1315.61">course is HTTP API so even just with a</span> <span data-start="1315.61" data-end="1317.74">static HTML file and a jquery plugin you</span> <span data-start="1317.74" data-end="1318.73">can do you know</span> <span data-start="1318.73" data-end="1320.41">you can write a full kyuubi application</span> <span data-start="1320.41" data-end="1323.08">the example is futon which is our you</span> <span data-start="1323.08" data-end="1325.12">know our built-in admin client which is</span> <span data-start="1325.12" data-end="1327.34">all just HTML and Ajax right we</span> <span data-start="1327.34" data-end="1328.96">shouldn't mention the age thing so just</span> <span data-start="1328.96" data-end="1331.24">pushing our JavaScript and HTML and</span> </p>
<p><span data-start="1331.24" data-end="1333.25">JavaScript it's not like that fancy so</span> <span data-start="1333.25" data-end="1336.13">we're just pushing static content but so</span> <span data-start="1336.13" data-end="1338.08">this is like why reinvent the wheel but</span> <span data-start="1338.08" data-end="1340.75">in this case you have your data stores</span> <span data-start="1340.75" data-end="1342.73">actually a database so you can use Ajax</span> <span data-start="1342.73" data-end="1343.929">to talk to coach to be into all the</span> <span data-start="1343.929" data-end="1345.64">document modeling things and query the</span> <span data-start="1345.64" data-end="1347.11">views and do the validations on all that</span> <span data-start="1347.11" data-end="1350.34">from your static HTML Javascript</span> <span data-start="1350.34" data-end="1353.41">applications it's pretty neat I think so</span> <span data-start="1353.41" data-end="1355.12">the kind of applications that like like</span> </p>
<p><span data-start="1355.12" data-end="1356.559">I wrote a little Twitter client which</span> <span data-start="1356.559" data-end="1360.64">uses their JSON PAP I I love Jason P so</span> <span data-start="1360.64" data-end="1362.02">you know get the data into the browser</span> <span data-start="1362.02" data-end="1363.58">and then you sort in the couch TV and</span> <span data-start="1363.58" data-end="1365.559">then you can do like if you can do a</span> <span data-start="1365.559" data-end="1367.179">little tag cloud and see what words your</span> <span data-start="1367.179" data-end="1369.7">friends use too much and stuff based on</span> <span data-start="1369.7" data-end="1372.94">queries against couch TV so yeah so</span> <span data-start="1372.94" data-end="1374.53">application like can live in a document</span> <span data-start="1374.53" data-end="1376.27">and then we end up with a new kind of</span> <span data-start="1376.27" data-end="1377.559">replication which is the same old</span> <span data-start="1377.559" data-end="1379.39">replication but it replicates these</span> <span data-start="1379.39" data-end="1381.929">magic applications instead of just data</span> <span data-start="1381.929" data-end="1385.96">so yeah that's what I mean that's what</span> </p>
<p><span data-start="1385.96" data-end="1387.52">I'm passionate about with CouchDB</span> <span data-start="1387.52" data-end="1390.37">because I don't know here's another</span> <span data-start="1390.37" data-end="1392.14">survey question who here in this room</span> <span data-start="1392.14" data-end="1394.21">got started by hitting view source on an</span> <span data-start="1394.21" data-end="1397.299">HTML window and then you know like oh</span> <span data-start="1397.299" data-end="1400.66">yeah it's not that hard so this is a</span> <span data-start="1400.66" data-end="1402.82">view source for applications I mean you</span> <span data-start="1402.82" data-end="1405.19">know it comes down your computer you can</span> <span data-start="1405.19" data-end="1406.66">if you can use it you can get to the</span> <span data-start="1406.66" data-end="1408.549">source you can change it make it better</span> <span data-start="1408.549" data-end="1410.08">deploy it to your own couchdb which</span> <span data-start="1410.08" data-end="1411.16">isn't any different from the place where</span> <span data-start="1411.16" data-end="1415.15">you got it and you know generally let</span> <span data-start="1415.15" data-end="1417.37">the application develop according to</span> <span data-start="1417.37" data-end="1418.9">what the users want not to get too</span> <span data-start="1418.9" data-end="1421.15">philosophical but this is like the the</span> </p>
<p><span data-start="1421.15" data-end="1424.24">Wikipedia idea put on steroids instead</span> <span data-start="1424.24" data-end="1425.59">of just editing content that's available</span> <span data-start="1425.59" data-end="1427.63">for everybody on the central place you</span> <span data-start="1427.63" data-end="1429.46">can edit the application that's showing</span> <span data-start="1429.46" data-end="1431.169">that content in every place you want it</span> <span data-start="1431.169" data-end="1434.169">to be so you not only like be able to</span> <span data-start="1434.169" data-end="1435.73">update like you're not only in control</span> <span data-start="1435.73" data-end="1437.02">of history because you come into the</span> <span data-start="1437.02" data-end="1438.91">Wikipedia but you can also like change</span> <span data-start="1438.91" data-end="1440.65">the display of how that history is being</span> <span data-start="1440.65" data-end="1444.01">shown to you or others yeah so so the</span> <span data-start="1444.01" data-end="1445.51">next thing we've got to talk about is</span> <span data-start="1445.51" data-end="1447.52">just a little bit of the mechanics of</span> <span data-start="1447.52" data-end="1448.84">how you would write one of these</span> <span data-start="1448.84" data-end="1450.34">applications because you know we've been</span> <span data-start="1450.34" data-end="1451.99">kind of high level so far</span> <span data-start="1451.99" data-end="1455.23">there's a there's a little script and</span> <span data-start="1455.23" data-end="1459.17">stuff that I involved in its called</span> <span data-start="1459.17" data-end="1461.3">couch app and all it does is take some</span> <span data-start="1461.3" data-end="1462.65">junk off your file system is sticking</span> <span data-start="1462.65" data-end="1464.72">into couchdb in a design document so</span> <span data-start="1464.72" data-end="1466.31">what we all we mentioned is that you</span> <span data-start="1466.31" data-end="1468.5">write JavaScript put it into the JSON</span> <span data-start="1468.5" data-end="1470.12">document and catch we can figure out how</span> <span data-start="1470.12" data-end="1472.87">to do views and all this validation crap</span> <span data-start="1472.87" data-end="1475.4">you can use futon to look at your</span> <span data-start="1475.4" data-end="1477.29">documents and you get a text area that</span> <span data-start="1477.29" data-end="1479.42">that shows the JSON or the JavaScript</span> <span data-start="1479.42" data-end="1481.55">that is in defines your view turns out</span> <span data-start="1481.55" data-end="1483.89">editing javascript in text area feels</span> <span data-start="1483.89" data-end="1485.15">another thing we want to do especially</span> <span data-start="1485.15" data-end="1486.86">because it's like triple escape to json</span> <span data-start="1486.86" data-end="1489.17">but a few screen you really don't want</span> <span data-start="1489.17" data-end="1490.82">to do that and yet you want to like it's</span> <span data-start="1490.82" data-end="1492.08">code you want to put code in version</span> <span data-start="1492.08" data-end="1494.84">control so what we did is we made a way</span> <span data-start="1494.84" data-end="1497.15">to push filesystem hierarchy into a</span> <span data-start="1497.15" data-end="1498.62">design document so you have native</span> </p>
<p><span data-start="1498.62" data-end="1500.84">JavaScript files let you deal with your</span> <span data-start="1500.84" data-end="1502.67">you can use your editor roi de get</span> <span data-start="1502.67" data-end="1504.26">syntax highlighting context your help</span> <span data-start="1504.26" data-end="1506.12">and whatever other tools you set up in</span> <span data-start="1506.12" data-end="1510.47">textmate or whatever you use and then</span> <span data-start="1510.47" data-end="1512.21">just take all that and push that into a</span> <span data-start="1512.21" data-end="1514.19">format that cash to me then understands</span> <span data-start="1514.19" data-end="1516.44">put in it took in to catch up so so yeah</span> <span data-start="1516.44" data-end="1517.97">so the way this is you know usage</span> <span data-start="1517.97" data-end="1520.97">example it's a couch app clone and then</span> <span data-start="1520.97" data-end="1523.64">a URL and the URL is the URL of the</span> <span data-start="1523.64" data-end="1525.11">running application that you may be</span> <span data-start="1525.11" data-end="1526.25">playing with and you could just kind of</span> <span data-start="1526.25" data-end="1527.66">tell by looking at the URL or maybe you</span> <span data-start="1527.66" data-end="1528.8">know otherwise that's running on couch</span> <span data-start="1528.8" data-end="1530.54">so you're on couch up clone against that</span> <span data-start="1530.54" data-end="1533.03">application and it pulls it down to your</span> <span data-start="1533.03" data-end="1536.3">local file system and you can play with</span> <span data-start="1536.3" data-end="1537.38">it you can change it you can just look</span> <span data-start="1537.38" data-end="1540.17">and see how they did it and you know</span> <span data-start="1540.17" data-end="1542.06">well that's that's use case I talked</span> <span data-start="1542.06" data-end="1543.74">about like I see chris's blog and i</span> <span data-start="1543.74" data-end="1546.2">canna just like pull it'll climb the</span> <span data-start="1546.2" data-end="1547.61">entire block to my file system and see</span> <span data-start="1547.61" data-end="1549.11">how it works that's like the view source</span> <span data-start="1549.11" data-end="1551.27">off yeah so catch up on phone poles the</span> <span data-start="1551.27" data-end="1553.37">just it just pulls the the code it</span> <span data-start="1553.37" data-end="1554.48">doesn't pull the data like my other</span> <span data-start="1554.48" data-end="1556.49">documents so it's a good way to share</span> <span data-start="1556.49" data-end="1558.35">applications around and then once you</span> <span data-start="1558.35" data-end="1559.43">have that file structure and you've</span> <span data-start="1559.43" data-end="1561.59">edited it a little bit it's pretty</span> <span data-start="1561.59" data-end="1564.11">simple to push you just run a couch a</span> <span data-start="1564.11" data-end="1566.3">push and type in the name of your local</span> <span data-start="1566.3" data-end="1568.01">database that you want to see that</span> <span data-start="1568.01" data-end="1570.8">application running in and you'll get</span> <span data-start="1570.8" data-end="1573.71">the application right there after couch</span> <span data-start="1573.71" data-end="1575.24">app gets the files uploaded to the</span> <span data-start="1575.24" data-end="1577.34">design document it'll print the URL for</span> <span data-start="1577.34" data-end="1580.04">you to visit so you can go see what you</span> <span data-start="1580.04" data-end="1582.41">know see if it's running or not and you</span> <span data-start="1582.41" data-end="1584.21">know this is just a file system mapping</span> <span data-start="1584.21" data-end="1585.89">we're hoping to maybe get hooked up to</span> <span data-start="1585.89" data-end="1588.5">the fuse adapter and like otherwise find</span> <span data-start="1588.5" data-end="1590.78">a really you know simple ways to make it</span> <span data-start="1590.78" data-end="1592.88">seamless that you're using this file</span> <span data-start="1592.88" data-end="1595.94">system mapping so that's the mechanics</span> <span data-start="1595.94" data-end="1600.1">now we want to talk a little bit about</span> <span data-start="1600.1" data-end="1602.9">what what it means now that now you can</span> <span data-start="1602.9" data-end="1603.86">run these applications and they're</span> <span data-start="1603.86" data-end="1607.46">bouncing around the edge and hopefully</span> <span data-start="1607.46" data-end="1609.02">if you're lucky they're running on lots</span> <span data-start="1609.02" data-end="1611.48">of little smartphones and laptops and</span> <span data-start="1611.48" data-end="1614.84">who knows what but that's the that's the</span> <span data-start="1614.84" data-end="1616.22">end goal there's a lot of intermediate</span> <span data-start="1616.22" data-end="1619.07">steps to get there so there's a few</span> <span data-start="1619.07" data-end="1620.6">different there's a few different</span> <span data-start="1620.6" data-end="1624.59">deployment models and how distributed</span> <span data-start="1624.59" data-end="1626.45">they are so the first one is a normal</span> <span data-start="1626.45" data-end="1627.86">server like you didn't know like it's a</span> <span data-start="1627.86" data-end="1629.69">server and has URL and you go to it and</span> <span data-start="1629.69" data-end="1631.97">the application is there you can put it</span> <span data-start="1631.97" data-end="1634.37">on your you know your bumper sticker</span> <span data-start="1634.37" data-end="1635.87">this is most like what all of you are</span> <span data-start="1635.87" data-end="1638.9">doing yeah so this is this is the thing</span> <span data-start="1638.9" data-end="1642.05">that we you know I got the familiar with</span> <span data-start="1642.05" data-end="1643.43">through PHP and rails and there's lots</span> <span data-start="1643.43" data-end="1645.98">of other ways to do it but couch up will</span> <span data-start="1645.98" data-end="1647.9">serve that I mean a couch TV design</span> <span data-start="1647.9" data-end="1649.64">document can be served at a particular</span> <span data-start="1649.64" data-end="1652.4">location you can even put some proxy</span> <span data-start="1652.4" data-end="1654.62">stuff in there so that if you didn't</span> <span data-start="1654.62" data-end="1655.97">want people to clone down the source</span> <span data-start="1655.97" data-end="1657.71">code it's you know not that hard to</span> <span data-start="1657.71" data-end="1661.88">change then and you can also do URL</span> <span data-start="1661.88" data-end="1663.71">right rewriting and whatnot in that</span> <span data-start="1663.71" data-end="1666.68">deployment but the downside that we've</span> <span data-start="1666.68" data-end="1668.6">all probably experienced if our site has</span> <span data-start="1668.6" data-end="1670.4">had any kind of heavy traffic with being</span> <span data-start="1670.4" data-end="1673.34">a like a normal server is that you are</span> <span data-start="1673.34" data-end="1675.2">at the middle of it all else on your</span> <span data-start="1675.2" data-end="1676.73">popular and everyone's coming to you and</span> <span data-start="1676.73" data-end="1677.66">they want their data and they want it</span> <span data-start="1677.66" data-end="1680.3">now and so latency gets really important</span> <span data-start="1680.3" data-end="1681.41">and when you have lots of people trying</span> <span data-start="1681.41" data-end="1682.67">to pull from you the latency just goes</span> <span data-start="1682.67" data-end="1684.77">up and up and up and eventually your</span> <span data-start="1684.77" data-end="1687.64">site falls over if it's really bad and</span> <span data-start="1687.64" data-end="1690.29">that's it's not good to be unavailable</span> <span data-start="1690.29" data-end="1692.78">and it's not good to be slow when</span> <span data-start="1692.78" data-end="1694.01">especially at the moments when you're</span> <span data-start="1694.01" data-end="1696.95">getting most popular so if we take so</span> <span data-start="1696.95" data-end="1698.48">that's centralized model we can get a</span> <span data-start="1698.48" data-end="1700.88">little bit distributed with offline mode</span> <span data-start="1700.88" data-end="1703.22">so I mean you're probably familiar a</span> <span data-start="1703.22" data-end="1704.75">little bit with offline mode but maybe</span> <span data-start="1704.75" data-end="1707.15">you I think if you run oh if you create</span> <span data-start="1707.15" data-end="1708.29">a couch to be application you get the</span> <span data-start="1708.29" data-end="1709.7">offline mode for free there's no like</span> <span data-start="1709.7" data-end="1711.56">things you need to install no gears</span> <span data-start="1711.56" data-end="1713.68">programming no SQL in HTML</span> <span data-start="1713.68" data-end="1716.55">that some people seem to be happy about</span> <span data-start="1716.55" data-end="1721.84">sir so what do you like what you can do</span> <span data-start="1721.84" data-end="1724.06">you just run your run a local copy of</span> <span data-start="1724.06" data-end="1725.17">your couch if you say it like the block</span> <span data-start="1725.17" data-end="1727.42">example again so you're riding home from</span> <span data-start="1727.42" data-end="1729.1">jas console you want you want to say</span> <span data-start="1729.1" data-end="1730.51">that the catch to me talk was the most</span> <span data-start="1730.51" data-end="1732.55">awesome stalk you've ever seen and you</span> <span data-start="1732.55" data-end="1734.38">cannot wait so you fire up your blog on</span> <span data-start="1734.38" data-end="1736.12">your on your laptop on in-flight and you</span> <span data-start="1736.12" data-end="1737.8">just type that blog post post it to your</span> <span data-start="1737.8" data-end="1741.04">blog on your local your local times to</span> <span data-start="1741.04" data-end="1742.48">be when you get home you just replicate</span> <span data-start="1742.48" data-end="1743.98">that blog post to your life blog and</span> <span data-start="1743.98" data-end="1747.01">it's published so you could like life</span> <span data-start="1747.01" data-end="1748.96">interact with your blogging software but</span> <span data-start="1748.96" data-end="1750.34">on your local machine and then whenever</span> <span data-start="1750.34" data-end="1754.33">you you are available again you can can</span> <span data-start="1754.33" data-end="1755.56">make it available for everybody else</span> <span data-start="1755.56" data-end="1757.75">well so the other another example like</span> <span data-start="1757.75" data-end="1759.7">like Gmail right it's a great service to</span> <span data-start="1759.7" data-end="1761.35">makes it so not to worry about setting</span> <span data-start="1761.35" data-end="1763.9">up smtp stuff but everybody's hitting it</span> <span data-start="1763.9" data-end="1765.88">all at once then Google's load is going</span> <span data-start="1765.88" data-end="1767.83">to spike whereas if they were using</span> </p>
<p><span data-start="1767.83" data-end="1769.81">CouchDB to provide an offline mode you</span> <span data-start="1769.81" data-end="1771.94">know email client then they don't need</span> <span data-start="1771.94" data-end="1773.86">to worry about latency because if you</span> <span data-start="1773.86" data-end="1775.06">when you go to hit your replication</span> <span data-start="1775.06" data-end="1776.8">requests to bring yourself up to the</span> <span data-start="1776.8" data-end="1779.26">remote or to push to the remote it's not</span> <span data-start="1779.26" data-end="1780.73">a big deal if it takes five seconds for</span> <span data-start="1780.73" data-end="1782.92">that replication flow to start and so</span> <span data-start="1782.92" data-end="1784.63">when you're optimizing for throughput</span> <span data-start="1784.63" data-end="1786.73">and not latency on operations side you</span> <span data-start="1786.73" data-end="1789.25">can get a lot more throughput so offline</span> <span data-start="1789.25" data-end="1791.47">mode can give your users a really snappy</span> <span data-start="1791.47" data-end="1793.27">experience but with more predictable</span> <span data-start="1793.27" data-end="1796.36">lower load on your servers so yeah</span> <span data-start="1796.36" data-end="1798.49">hopefully we'll see this happening a lot</span> </p>
<p><span data-start="1798.49" data-end="1801.37">I mean we already are but in the in the</span> <span data-start="1801.37" data-end="1802.57">future people will understand that</span> <span data-start="1802.57" data-end="1804.52">there's more benefits than just remote</span> <span data-start="1804.52" data-end="1806.77">availability for offline mode the</span> <span data-start="1806.77" data-end="1808.75">biggest thing about cloud computing is</span> <span data-start="1808.75" data-end="1810.91">that it it kind of pretends that the</span> <span data-start="1810.91" data-end="1812.8">network is always available and like</span> <span data-start="1812.8" data-end="1814.81">Wi-Fi here it's pretty good like big</span> <span data-start="1814.81" data-end="1818.14">props to the Ops guys but when you're</span> <span data-start="1818.14" data-end="1819.97">really really really really an internet</span> <span data-start="1819.97" data-end="1821.71">connection it won't be there I won't be</span> <span data-start="1821.71" data-end="1823.54">too expensive that you like like worry</span> <span data-start="1823.54" data-end="1825.19">about like paying 50 bucks for ten</span> <span data-start="1825.19" data-end="1827.35">minutes of internet or like I don't know</span> <span data-start="1827.35" data-end="1830.11">3g or GSM just goes away and like you</span> <span data-start="1830.11" data-end="1831.25">have some other sort of issues so to</span> <span data-start="1831.25" data-end="1832.84">have stuff locally that you can work</span> <span data-start="1832.84" data-end="1835.99">with and sing like the replication is</span> <span data-start="1835.99" data-end="1839.8">pretty resilient again like against like</span> <span data-start="1839.8" data-end="1842.53">networking problems so if it if it</span> <span data-start="1842.53" data-end="1844.3">breaks you can just restart it when</span> <span data-start="1844.3" data-end="1844.999">networks</span> <span data-start="1844.999" data-end="1846.889">back we've definitely replicated like</span> <span data-start="1846.889" data-end="1849.679">from Portland Maryland via his iphone</span> <span data-start="1849.679" data-end="1851.689">how that was like my Wi-Fi in my office</span> <span data-start="1851.689" data-end="1854.239">went down so I attended my like 2g</span> <span data-start="1854.239" data-end="1858.019">iphone through my VPN and then I</span> <span data-start="1858.019" data-end="1860.719">replicated catch at Damian's catch to be</span> <span data-start="1860.719" data-end="1862.969">blog to my machine through that 2g</span> <span data-start="1862.969" data-end="1865.549">iphone and across the world that was</span> <span data-start="1865.549" data-end="1868.909">pretty pretty amazing so then yeah</span> <span data-start="1868.909" data-end="1870.949">offline mode is like replication is good</span> <span data-start="1870.949" data-end="1873.199">for this but what we're really here for</span> <span data-start="1873.199" data-end="1876.379">is the peer-to-peer web we want we want</span> <span data-start="1876.379" data-end="1878.239">the applications to live there soon as</span> <span data-start="1878.239" data-end="1880.669">the kids could hack them because like</span> <span data-start="1880.669" data-end="1883.489">you know I want kids to get in trouble</span> <span data-start="1883.489" data-end="1884.779">for programming too much because they</span> <span data-start="1884.779" data-end="1886.099">took apart their I implant and put it</span> <span data-start="1886.099" data-end="1887.239">back together and the way they like it</span> <span data-start="1887.239" data-end="1891.589">and so you know it's the same thing the</span> <span data-start="1891.589" data-end="1893.479">only challenge here is is trying to find</span> <span data-start="1893.479" data-end="1896.329">you know a way to tunnel the HTTP</span> <span data-start="1896.329" data-end="1898.969">between them but you can right tools to</span> <span data-start="1898.969" data-end="1900.829">get around that or at the worst case you</span> <span data-start="1900.829" data-end="1903.859">know have an ad hoc you know public</span> <span data-start="1903.859" data-end="1905.539">server that you both replicate via then</span> <span data-start="1905.539" data-end="1908.839">that can change over time so yeah in</span> <span data-start="1908.839" data-end="1910.639">this case when you're the application</span> <span data-start="1910.639" data-end="1912.499">developer like it's like developing for</span> <span data-start="1912.499" data-end="1914.449">the desktop you're not running anything</span> <span data-start="1914.449" data-end="1916.579">except for maybe you know a github</span> <span data-start="1916.579" data-end="1918.019">repository people can pull down from</span> <span data-start="1918.019" data-end="1920.059">there or from your you know your starter</span> </p>
<p><span data-start="1920.059" data-end="1923.299">CouchDB they can replicate in and then</span> <span data-start="1923.299" data-end="1925.159">the application from there is out of</span> <span data-start="1925.159" data-end="1926.479">your hands and it will bounce around you</span> <span data-start="1926.479" data-end="1928.129">could drop new changes into the pool and</span> <span data-start="1928.129" data-end="1929.419">you know maybe they'll get picked up or</span> <span data-start="1929.419" data-end="1931.129">maybe they won't depending on what your</span> <span data-start="1931.129" data-end="1933.799">user base is like but I think that the</span> <span data-start="1933.799" data-end="1936.099">idea of building web applications in</span> <span data-start="1936.099" data-end="1938.929">JavaScript and HTML and having them be</span> <span data-start="1938.929" data-end="1941.659">able to go anywhere and you know be</span> <span data-start="1941.659" data-end="1944.599">hacked on by anyone this is this is what</span> <span data-start="1944.599" data-end="1946.489">excites me is what got me a new couch to</span> <span data-start="1946.489" data-end="1948.469">be in the second place I got into it the</span> <span data-start="1948.469" data-end="1949.579">first place for some other stuff but</span> <span data-start="1949.579" data-end="1951.019">then I got really fired up when I</span> <span data-start="1951.019" data-end="1954.799">realized that you could do this so yeah</span> <span data-start="1954.799" data-end="1956.089">that's that's a little bit about</span> <span data-start="1956.089" data-end="1957.919">programming at the edge there's still</span> <span data-start="1957.919" data-end="1959.449">still some other topics we want to cover</span> <span data-start="1959.449" data-end="1962.569">but first I want to just quote from the</span> <span data-start="1962.569" data-end="1964.369">a GPL which is not a license that I</span> <span data-start="1964.369" data-end="1967.489">necessarily think we need it sucks but I</span> <span data-start="1967.489" data-end="1970.959">do think that it describes it describes</span> <span data-start="1970.959" data-end="1973.039">what happens when you write applications</span> <span data-start="1973.039" data-end="1974.779">in this manner it's a public use of a</span> <span data-start="1974.779" data-end="1976.099">modified version on a publicly</span> <span data-start="1976.099" data-end="1977.509">accessible server gives the public a</span> <span data-start="1977.509" data-end="1978.169">success</span> <span data-start="1978.169" data-end="1979.999">the source code what I say is we don't</span> <span data-start="1979.999" data-end="1981.289">need a license to make that happen</span> <span data-start="1981.289" data-end="1983.299">because that's just what happens when</span> <span data-start="1983.299" data-end="1985.85">your code runs in this in this kind of</span> <span data-start="1985.85" data-end="1990.009">couch app public manner so yeah that's a</span> <span data-start="1990.009" data-end="1994.85">just you know make the future so now</span> <span data-start="1994.85" data-end="1997.1">back to the application the document</span> <span data-start="1997.1" data-end="2001.33">programming model context is expensive</span> <span data-start="2001.33" data-end="2003.22">that's what happens you know when these</span> <span data-start="2003.22" data-end="2005.259">big applications fall down it's because</span> <span data-start="2005.259" data-end="2006.609">they're trying to load up like 50</span> <span data-start="2006.609" data-end="2009.039">documents in compare mall in one request</span> <span data-start="2009.039" data-end="2010.629">response cycle and that's just not where</span> <span data-start="2010.629" data-end="2016.09">that belongs there's you gotta decide</span> <span data-start="2016.09" data-end="2018.429">what goes in the request response cycle</span> <span data-start="2018.429" data-end="2020.169">and what doesn't and how we should be</span> <span data-start="2020.169" data-end="2021.82">very conservative about what it lets you</span> <span data-start="2021.82" data-end="2023.529">put into that cycle because we're a</span> <span data-start="2023.529" data-end="2024.669">database and we're not going to let you</span> <span data-start="2024.669" data-end="2026.32">put something into that cycle that's so</span> <span data-start="2026.32" data-end="2029.649">that you could you know do s yourself so</span> <span data-start="2029.649" data-end="2032.529">yeah the context stuff has to come</span> <span data-start="2032.529" data-end="2033.94">outside but there's a lot you can do</span> <span data-start="2033.94" data-end="2037.96">without too much context how you go in</span> <span data-start="2037.96" data-end="2042.159">all right well so rendering documents is</span> </p>
<p><span data-start="2042.159" data-end="2045.07">HTML is accomplished by a JavaScript</span> <span data-start="2045.07" data-end="2047.59">function that gets the JSON document as</span> <span data-start="2047.59" data-end="2049.809">an argument as well as some of the</span> <span data-start="2049.809" data-end="2051.94">headers information so you can switch on</span> <span data-start="2051.94" data-end="2054.7">the accept header to return HTML or XML</span> <span data-start="2054.7" data-end="2059.619">or whatever the test suite returns a PNG</span> <span data-start="2059.619" data-end="2061.359">file from one of these functions just to</span> <span data-start="2061.359" data-end="2065.319">make sure that it works and it's it's</span> <span data-start="2065.319" data-end="2067.75">really simple you doubt put whatever</span> <span data-start="2067.75" data-end="2068.98">string you want and that's what goes to</span> <span data-start="2068.98" data-end="2071.619">the browser so the nice thing is that go</span> <span data-start="2071.619" data-end="2075.369">back one slide you right this one's for</span> <span data-start="2075.369" data-end="2077.53">for your application that when a browser</span> <span data-start="2077.53" data-end="2080.679">hits it you serve with HTML if I can API</span> <span data-start="2080.679" data-end="2082.569">consumer client hits it with the</span> <span data-start="2082.569" data-end="2085.299">application JSON accept header it will</span> <span data-start="2085.299" data-end="2087.01">get JSON if feed reader hits that you</span> <span data-start="2087.01" data-end="2088.99">get the XML all from the same source so</span> <span data-start="2088.99" data-end="2090.669">you get all that for free from just</span> <span data-start="2090.669" data-end="2093.369">using the standard HTTP API so there's</span> <span data-start="2093.369" data-end="2095.349">no nothing else you will need to provide</span> <span data-start="2095.349" data-end="2097.48">a feed for full foil blog for anything</span> <span data-start="2097.48" data-end="2100.15">else I don't let the I also it's fun</span> <span data-start="2100.15" data-end="2101.71">because you can make applications like</span> <span data-start="2101.71" data-end="2102.819">we've been talking about but it's also</span> <span data-start="2102.819" data-end="2104.319">really useful for a couch tb's core</span> <span data-start="2104.319" data-end="2106.51">mission as a database because you can</span> <span data-start="2106.51" data-end="2108.309">make it so that you know you have some</span> <span data-start="2108.309" data-end="2109.66">legacy API that you need to</span> <span data-start="2109.66" data-end="2111.76">but you don't really care about and you</span> <span data-start="2111.76" data-end="2112.75">don't have to maintain a whole other</span> <span data-start="2112.75" data-end="2114.039">infrastructure for translating your</span> <span data-start="2114.039" data-end="2117.849">couchdb install into this legacy API so</span> <span data-start="2117.849" data-end="2119.74">if you implement it in JavaScript then</span> <span data-start="2119.74" data-end="2121">you can put it up on the couch and it'll</span> <span data-start="2121" data-end="2122.319">just live there forever and you never</span> <span data-start="2122.319" data-end="2124.15">have to deal with it again like for</span> <span data-start="2124.15" data-end="2125.92">example back in the day coach to be used</span> <span data-start="2125.92" data-end="2128.349">used to use XML because of JSON and I we</span> <span data-start="2128.349" data-end="2130.109">switch to Jason everybody will say yay</span> <span data-start="2130.109" data-end="2132.88">because only some people said like well</span> <span data-start="2132.88" data-end="2134.98">we like XML we got to still go to use</span> </p>
<p><span data-start="2134.98" data-end="2136.9">XML and that's where we will give them</span> <span data-start="2136.9" data-end="2138.549">this they can like transform the JSON</span> <span data-start="2138.549" data-end="2140.02">transparently into XML they can still</span> <span data-start="2140.02" data-end="2141.97">use that with whatever technology they</span> <span data-start="2141.97" data-end="2144.039">happen to use yeah our spider monkey</span> <span data-start="2144.039" data-end="2145.96">interpreter includes the e 4x bindings</span> <span data-start="2145.96" data-end="2147.63">so you can you can do native XML</span> <span data-start="2147.63" data-end="2152.559">processing as well whereas I said like</span> <span data-start="2152.559" data-end="2153.97">our core mission of being a database we</span> <span data-start="2153.97" data-end="2156.13">do this a part of the straitjacket we</span> <span data-start="2156.13" data-end="2158.559">put you in is that you show one document</span> <span data-start="2158.559" data-end="2160.119">you don't like you don't load up a</span> <span data-start="2160.119" data-end="2161.44">document load up three other documents</span> <span data-start="2161.44" data-end="2163.39">because of it and then change one of</span> <span data-start="2163.39" data-end="2165.549">them and you know do something different</span> <span data-start="2165.549" data-end="2169.92">because of you know like who the user is</span> <span data-start="2169.92" data-end="2174.25">what you do is you yeah you just render</span> <span data-start="2174.25" data-end="2175.9">the the HTML or whatever from the</span> <span data-start="2175.9" data-end="2177.19">document and that means that there's no</span> <span data-start="2177.19" data-end="2180.52">side effects so you can't go you know</span> <span data-start="2180.52" data-end="2183.339">like having a get request so that screws</span> <span data-start="2183.339" data-end="2185.38">up your database over time I that that</span> <span data-start="2185.38" data-end="2187.119">that in turn and hidden from the</span> <span data-start="2187.119" data-end="2188.859">application Mike's like three other get</span> <span data-start="2188.859" data-end="2190.99">requests and five posts and whatnot that</span> <span data-start="2190.99" data-end="2193.48">will totally not be able to like sustain</span> <span data-start="2193.48" data-end="2195.91">a lot bigger load and because there's no</span> <span data-start="2195.91" data-end="2197.92">side effects it's cacheable so that</span> <span data-start="2197.92" data-end="2199.72">means that you throw like a varnish or</span> <span data-start="2199.72" data-end="2201.91">whatever in front of couch db's you know</span> <span data-start="2201.91" data-end="2205.779">an HTTP cache there and now things are</span> <span data-start="2205.779" data-end="2207.7">it automatically sets up the e tags for</span> <span data-start="2207.7" data-end="2210.609">you so when things are the second</span> <span data-start="2210.609" data-end="2211.93">request it just comes out of the cash</span> <span data-start="2211.93" data-end="2216.609">rather than out of cash to be so yeah</span> <span data-start="2216.609" data-end="2220.029">showing a doc simple related what you</span> <span data-start="2220.029" data-end="2222.64">can list views so a view and CouchDB you</span> <span data-start="2222.64" data-end="2225.48">know gives you a sorted list of you know</span> <span data-start="2225.48" data-end="2228.369">documents or parts of documents based on</span> <span data-start="2228.369" data-end="2230.26">whatever key you choose so it's great</span> <span data-start="2230.26" data-end="2231.73">for making like a list of all the blog</span> <span data-start="2231.73" data-end="2234.819">post by date but that's in JSON so if</span> <span data-start="2234.819" data-end="2236.049">you need that to be an HTML you can't</span> <span data-start="2236.049" data-end="2237.64">very well load that whole list up into a</span> </p>
<p><span data-start="2237.64" data-end="2239.02">JavaScript function and process it</span> <span data-start="2239.02" data-end="2240.16">because it could be millions of items</span> <span data-start="2240.16" data-end="2242.37">long so what we</span> <span data-start="2242.37" data-end="2244.29">have is one by you know one row at a</span> <span data-start="2244.29" data-end="2246.81">time processing so you run once to set</span> <span data-start="2246.81" data-end="2247.8">up the head of your document and then</span> <span data-start="2247.8" data-end="2249.54">after that your javascript function gets</span> <span data-start="2249.54" data-end="2251.7">called once for each row and garbage</span> <span data-start="2251.7" data-end="2253.86">collected afterwards so you're never</span> <span data-start="2253.86" data-end="2255.6">gonna all that run some constant space</span> <span data-start="2255.6" data-end="2257.61">you can kind of blob memory for just</span> <span data-start="2257.61" data-end="2259.62">pretty producing an atom feed out of</span> <span data-start="2259.62" data-end="2261.18">your blog posts yeah you can make an</span> <span data-start="2261.18" data-end="2263.25">atom feed you know hundreds of gigabytes</span> <span data-start="2263.25" data-end="2265.32">in size and couchdb would never hit more</span> <span data-start="2265.32" data-end="2268.02">than one row at a time so yeah then</span> <span data-start="2268.02" data-end="2269.45">you're up your clients parts did I guess</span> <span data-start="2269.45" data-end="2271.71">so yeah that's that's the point of that</span> <span data-start="2271.71" data-end="2273.45">you know it's another straightjacket you</span> <span data-start="2273.45" data-end="2276.96">list one row at a time but at in return</span> <span data-start="2276.96" data-end="2279.3">couch TV says well you do well just do</span> <span data-start="2279.3" data-end="2280.23">this all you want you're never going to</span> <span data-start="2280.23" data-end="2283.35">take down your couch note from it so</span> <span data-start="2283.35" data-end="2284.55">sort of the same story with the</span> <span data-start="2284.55" data-end="2286.92">validations they're just an update so</span> <span data-start="2286.92" data-end="2288.69">it's not update is you know the new</span> <span data-start="2288.69" data-end="2290.07">version of a document the old version of</span> <span data-start="2290.07" data-end="2292.26">the document if it exists and the user</span> <span data-start="2292.26" data-end="2294.93">who's making the update and when you</span> <span data-start="2294.93" data-end="2296.55">have that information you know your</span> </p>
<p><span data-start="2296.55" data-end="2298.14">JavaScript function either throws an</span> <span data-start="2298.14" data-end="2300.48">error it doesn't and if but it doesn't</span> <span data-start="2300.48" data-end="2301.89">go loading up a bunch of other stuff it</span> <span data-start="2301.89" data-end="2303.24">doesn't it doesn't pull in context to</span> <span data-start="2303.24" data-end="2307.77">make those decisions right you're doing</span> <span data-start="2307.77" data-end="2310.62">the slides so oh alright yeah so what do</span> <span data-start="2310.62" data-end="2312.05">you do what do you do when you need to</span> <span data-start="2312.05" data-end="2314.55">when you need to make those when you</span> <span data-start="2314.55" data-end="2317.1">need to make those updates you know when</span> <span data-start="2317.1" data-end="2318.27">you need business logic when you need</span> <span data-start="2318.27" data-end="2320.88">stuff that actually needs to look at</span> <span data-start="2320.88" data-end="2322.86">lots of documents you've got to do it in</span> <span data-start="2322.86" data-end="2325.02">you know sort of outside of the request</span> <span data-start="2325.02" data-end="2327.6">response cycle couchdb has lots of ways</span> <span data-start="2327.6" data-end="2329.55">that make it easy to subscribe to</span> <span data-start="2329.55" data-end="2331.2">updates to the database you can write a</span> <span data-start="2331.2" data-end="2333.51">an OS process just like a ruby scripter</span> <span data-start="2333.51" data-end="2334.56">what everything gets pinged every time</span> <span data-start="2334.56" data-end="2336.45">someone does something you can react to</span> <span data-start="2336.45" data-end="2338.73">that we're adding comet hooks so if you</span> <span data-start="2338.73" data-end="2340.8">know that eventually at some point</span> <span data-start="2340.8" data-end="2342.48">someone today is going to is going to</span> <span data-start="2342.48" data-end="2345.3">post a document of this URL you can just</span> <span data-start="2345.3" data-end="2348.45">hang there on a get request and you know</span> <span data-start="2348.45" data-end="2350.28">only when that change comes through then</span> <span data-start="2350.28" data-end="2351.48">the response comes back to your browser</span> <span data-start="2351.48" data-end="2354.23">so you can do instant notifications and</span> <span data-start="2354.23" data-end="2356.28">you know you could also use that from</span> <span data-start="2356.28" data-end="2357.9">background scripts if you want to start</span> <span data-start="2357.9" data-end="2361.89">an asynchronous process based on it so</span> <span data-start="2361.89" data-end="2364.53">if you think back I'll do what will</span> </p>
<p><span data-start="2364.53" data-end="2366.33">Chris said the the taking everything</span> <span data-start="2366.33" data-end="2368.76">that would hurt your application front</span> <span data-start="2368.76" data-end="2370.8">and is getting taken out of the request</span> <span data-start="2370.8" data-end="2373.26">response cycle if you get to like the</span> <span data-start="2373.26" data-end="2375.63">big ones yahoo facebook flickr</span> <span data-start="2375.63" data-end="2377.28">they tried that a lot that they just</span> <span data-start="2377.28" data-end="2379.08">have to serve static content and</span> <span data-start="2379.08" data-end="2380.43">everything is preprocessed or this</span> <span data-start="2380.43" data-end="2382.98">process as synchronously that's the way</span> <span data-start="2382.98" data-end="2385.29">to run big sides and that's like again</span> <span data-start="2385.29" data-end="2387.45">we only put things in that you can run</span> <span data-start="2387.45" data-end="2389.64">big sites but we own also make it that's</span> <span data-start="2389.64" data-end="2391.77">totally easy to do that it makes sense</span> <span data-start="2391.77" data-end="2394.94">to run it on a single like small side so</span> <span data-start="2394.94" data-end="2398.1">the sort of the last point and this is</span> <span data-start="2398.1" data-end="2401.91">more something to think about is how do</span> <span data-start="2401.91" data-end="2403.89">you manage user identity in a system</span> <span data-start="2403.89" data-end="2404.88">like this in the in the peer-to-peer</span> <span data-start="2404.88" data-end="2406.71">system because you can't ask the server</span> <span data-start="2406.71" data-end="2408.6">to validate that you know that they are</span> <span data-start="2408.6" data-end="2410.55">who they say they are because you don't</span> <span data-start="2410.55" data-end="2412.23">know what was the server when that</span> <span data-start="2412.23" data-end="2415.94">validation was made so you've got to</span> <span data-start="2415.94" data-end="2417.9">thought about this for a while and then</span> </p>
<p><span data-start="2417.9" data-end="2419.04">I thought I was crazy because the only</span> <span data-start="2419.04" data-end="2420.54">answer I could come up with was by using</span> <span data-start="2420.54" data-end="2423.33">you know sort of the gpg yeah the web of</span> <span data-start="2423.33" data-end="2428.01">trust gpg style signed documents and and</span> <span data-start="2428.01" data-end="2429.75">we know hold that oh well that works</span> <span data-start="2429.75" data-end="2431.73">yeah well then the users I mean it just</span> <span data-start="2431.73" data-end="2433.8">hasn't caught on and that's not that's</span> <span data-start="2433.8" data-end="2435.75">not like an indictment of the technology</span> <span data-start="2435.75" data-end="2437.13">but it's really hard to make the</span> <span data-start="2437.13" data-end="2438.93">metaphor easy for people so i'm working</span> <span data-start="2438.93" data-end="2440.43">on that end but while I was sitting</span> <span data-start="2440.43" data-end="2441.75">around thinking I was crazy i talked to</span> <span data-start="2441.75" data-end="2443.85">some people who know lotus notes really</span> <span data-start="2443.85" data-end="2445.41">well and that's what Lotus does so I</span> <span data-start="2445.41" data-end="2447.51">guess it's not that crazy sort of</span> <span data-start="2447.51" data-end="2450.48">similar the deployment and it might not</span> <span data-start="2450.48" data-end="2452.01">be like trip to gap cryptographically</span> <span data-start="2452.01" data-end="2455.01">like super secure so if you like if you</span> <span data-start="2455.01" data-end="2456.69">run your corporation get a bunch of</span> <span data-start="2456.69" data-end="2458.31">messages that is signed with the key and</span> <span data-start="2458.31" data-end="2460.86">you know okay that guy's jack and jack</span> <span data-start="2460.86" data-end="2462.96">like send me send me these messages and</span> </p>
<p><span data-start="2462.96" data-end="2464.46">I know they all these other measures</span> <span data-start="2464.46" data-end="2466.02">messages that I'm now getting our sign</span> <span data-start="2466.02" data-end="2467.67">with the same key I'm pretty sure the</span> <span data-start="2467.67" data-end="2469.05">same person centered that send the</span> <span data-start="2469.05" data-end="2470.43">earlier messages and if I know the</span> <span data-start="2470.43" data-end="2472.29">earlier messages we're coming from Jack</span> <span data-start="2472.29" data-end="2474.03">I know the new messages that are also</span> <span data-start="2474.03" data-end="2476.97">from jag so this is like there's the web</span> <span data-start="2476.97" data-end="2478.47">of trust thing is something we take out</span> <span data-start="2478.47" data-end="2479.91">of there that's not implicit in the</span> <span data-start="2479.91" data-end="2481.41">technology which makes it a lot simpler</span> <span data-start="2481.41" data-end="2484.05">so if you like really need to be like</span> <span data-start="2484.05" data-end="2487.02">cryptographically sure that that there's</span> <span data-start="2487.02" data-end="2490.8">no identity behind a message you might</span> <span data-start="2490.8" data-end="2492.48">need to like introduce a little more</span> <span data-start="2492.48" data-end="2494.4">more headache for the user but for the</span> <span data-start="2494.4" data-end="2495.69">general user it might look like Jack</span> <span data-start="2495.69" data-end="2498.42">that's Jack it's all right yeah so I've</span> <span data-start="2498.42" data-end="2500.61">been kind of like diving in researching</span> <span data-start="2500.61" data-end="2502.2">like loading up all the old crypto</span> <span data-start="2502.2" data-end="2504.06">libraries and JavaScript and like</span> <span data-start="2504.06" data-end="2505.83">nothing really was quite done there's</span> <span data-start="2505.83" data-end="2506.94">some good implementations of the</span> <span data-start="2506.94" data-end="2507.85">algorithms but</span> <span data-start="2507.85" data-end="2510.31">like of the of a ski armored versions of</span> <span data-start="2510.31" data-end="2511.93">the key pairs and whatnot so if anybody</span> <span data-start="2511.93" data-end="2514.06">here knows JavaScript crypto better than</span> </p>
<p><span data-start="2514.06" data-end="2516.1">I do which is probably not I don't know</span> <span data-start="2516.1" data-end="2517.18">it that well but I did some research</span> <span data-start="2517.18" data-end="2518.62">like let's talk because I want to make</span> <span data-start="2518.62" data-end="2520.3">this happen and I spent like two weeks</span> <span data-start="2520.3" data-end="2524.38">researching it I think that I mean it's</span> <span data-start="2524.38" data-end="2525.67">just right there it's low-hanging fruit</span> <span data-start="2525.67" data-end="2526.57">and once we have that then that</span> <span data-start="2526.57" data-end="2527.92">peer-to-peer apps thing is going to be</span> <span data-start="2527.92" data-end="2532.12">totally ready to go so yeah we didn't</span> <span data-start="2532.12" data-end="2534.4">get to do much in the way of actual</span> <span data-start="2534.4" data-end="2536.44">putting color on the screen and because</span> <span data-start="2536.44" data-end="2538.06">we wanted to like give you the feel for</span> <span data-start="2538.06" data-end="2541.33">a CouchDB and what it can do but I think</span> <span data-start="2541.33" data-end="2543.16">we're going to do a track be thing</span> <span data-start="2543.16" data-end="2544.93">tomorrow hopefully so if you want to</span> <span data-start="2544.93" data-end="2547.75">come c code will you know put that up on</span> <span data-start="2547.75" data-end="2549.73">the screen and mess up our code examples</span> <span data-start="2549.73" data-end="2554.38">a lot probably but yeah that's oh and</span> <span data-start="2554.38" data-end="2557.11">one last thing we're giving out free</span> <span data-start="2557.11" data-end="2560.35">hosting for CouchDB we have were you</span> <span data-start="2560.35" data-end="2562.6">know maybe I don't know if we've got</span> <span data-start="2562.6" data-end="2564.43">this this this project where we try to</span> <span data-start="2564.43" data-end="2565.93">like sell couchdb for people who are</span> <span data-start="2565.93" data-end="2568.36">interested in it and we sort of just set</span> <span data-start="2568.36" data-end="2569.71">it up so we're not charging for it and</span> <span data-start="2569.71" data-end="2571.42">we like need people to break it so</span> <span data-start="2571.42" data-end="2574.72">please like sign up and break it yeah so</span> <span data-start="2574.72" data-end="2577.15">yeah so hosting couch i oh and invite</span> <span data-start="2577.15" data-end="2581.59">code for today is stone dash horse so</span> <span data-start="2581.59" data-end="2584.14">you know just think of the statue and</span> <span data-start="2584.14" data-end="2585.88">find us on Twitter and find us in the</span> <span data-start="2585.88" data-end="2589.96">hallways and yeah thanks for listening</span> <span data-start="2589.96" data-end="2596.65">thanks oh well it's a good question is</span> <span data-start="2596.65" data-end="2600.55">kind of two parts so the question is how</span> <span data-start="2600.55" data-end="2603.22">do you get you know with MapReduce you</span> <span data-start="2603.22" data-end="2607.21">can build up context but um or how can</span> <span data-start="2607.21" data-end="2608.29">you build up contacts the other one is</span> <span data-start="2608.29" data-end="2609.73">can use that context and validation</span> <span data-start="2609.73" data-end="2612.82">function so you can't use the context in</span> <span data-start="2612.82" data-end="2614.14">a validation function it's just one</span> <span data-start="2614.14" data-end="2615.97">document just one update the old version</span> <span data-start="2615.97" data-end="2618.34">of the new version so you're basically</span> <span data-start="2618.34" data-end="2621.04">validating for well-formed pneus with a</span> <span data-start="2621.04" data-end="2622.33">little bit of the user context there to</span> <span data-start="2622.33" data-end="2623.32">make sure that they're not lying about</span> <span data-start="2623.32" data-end="2626.08">being the author if you decide to do</span> <span data-start="2626.08" data-end="2628.15">that in your function but you can do</span> <span data-start="2628.15" data-end="2631.06">join like queries in MapReduce by</span> <span data-start="2631.06" data-end="2633.76">collating rose that you want to have</span> <span data-start="2633.76" data-end="2635.41">next to each other you can just give</span> <span data-start="2635.41" data-end="2637.32">them similar keys to little collate</span> <span data-start="2637.32" data-end="2641.05">contiguously so you can you can pull out</span> <span data-start="2641.05" data-end="2641.71">for instance up</span> <span data-start="2641.71" data-end="2643.3">blog post in all of its comments and a</span> <span data-start="2643.3" data-end="2645.339">single query by setting up your indexes</span> <span data-start="2645.339" data-end="2652.6">correctly</span> <span data-start="2652.61" data-end="2655.19">oh well it just wouldn't that's like an</span> <span data-start="2655.19" data-end="2657.17">application concerned as far as couchdb</span> <span data-start="2657.17" data-end="2659.93">looks at it so yeah you can have you are</span> <span data-start="2659.93" data-end="2662.24">eyes as parts of year so this is quote</span> <span data-start="2662.24" data-end="2663.95">from Jacob kaplan miles from the django</span> <span data-start="2663.95" data-end="2666.74">team and he said like django made a SP</span> <span data-start="2666.74" data-end="2668.3">look out of date because django was made</span> <span data-start="2668.3" data-end="2670.58">for the web and like asp was pretending</span> <span data-start="2670.58" data-end="2672.86">the web didn't exist and he also said</span> <span data-start="2672.86" data-end="2675.26">like HP makes makes Jango looks outdated</span> <span data-start="2675.26" data-end="2676.94">because cash to me is not made for the</span> <span data-start="2676.94" data-end="2678.71">web it's made off the web and the web</span> <span data-start="2678.71" data-end="2680.96">doesn't have like there's no integra</span> <span data-start="2680.96" data-end="2683.03">france there's just links so catch me</span> <span data-start="2683.03" data-end="2684.83">has jostling sketch is made of what all</span> <span data-start="2684.83" data-end="2690.769">the web gives us</span> <span data-start="2690.779" data-end="2694.769">yeah if you have secret data you know if</span> <span data-start="2694.769" data-end="2696.059">you file your doubt is public then you</span> <span data-start="2696.059" data-end="2697.529">can just use your validation function</span> <span data-start="2697.529" data-end="2699.15">put cow should be right there on port 80</span> <span data-start="2699.15" data-end="2701.459">and say only let you know only let</span> <span data-start="2701.459" data-end="2703.529">admins update or whatever but if you</span> <span data-start="2703.529" data-end="2704.969">have secret data then you need to use a</span> <span data-start="2704.969" data-end="2713.83">proxy</span> <span data-start="2713.84" data-end="2715.64">what I grade he did that there's a</span> <span data-start="2715.64" data-end="2716.79">patient zero that we</span> <span data-start="2716.79" data-end="2718.86">neither chance to look at yet but like</span> <span data-start="2718.86" data-end="2721.02">he did it in a weekend afternoon or</span> <span data-start="2721.02" data-end="2722.52">something that was really really quick</span> <span data-start="2722.52" data-end="2724.32">that he width of his own authentication</span> <span data-start="2724.32" data-end="2726">scheme soaked actually be the code base</span> <span data-start="2726" data-end="2727.92">it's a very very modular you can like if</span> <span data-start="2727.92" data-end="2729.12">you happen like you all like the</span> </p>
<p><span data-start="2729.12" data-end="2730.74">JavaScript but if you happened to not</span> <span data-start="2730.74" data-end="2731.91">like the JavaScript you could all that</span> <span data-start="2731.91" data-end="2733.5">although that in Python or Ruby or PHP</span> <span data-start="2733.5" data-end="2735.78">or whatever yeah I wouldn't see why but</span> <span data-start="2735.78" data-end="2737.91">you can very easily swap things out you</span> <span data-start="2737.91" data-end="2740.34">can write your own URL extensions you</span> <span data-start="2740.34" data-end="2741.9">can write external a nexus we've got a</span> <span data-start="2741.9" data-end="2743.94">project that integrates with leucine so</span> <span data-start="2743.94" data-end="2746.31">you get full-text search all that is</span> <span data-start="2746.31" data-end="2748.11">very very simple to understand we should</span> <span data-start="2748.11" data-end="2749.52">mention too that the code base the couch</span> <span data-start="2749.52" data-end="2751.23">TV airline code base is a great way to</span> <span data-start="2751.23" data-end="2752.97">learn erling because CouchDB has a</span> <span data-start="2752.97" data-end="2755.37">well-defined HTTP API as soon as you're</span> <span data-start="2755.37" data-end="2756.99">comfortable with that API you look at</span> <span data-start="2756.99" data-end="2757.74">the code base and you'll start seeing</span> <span data-start="2757.74" data-end="2759.15">things that you are understanding</span> <span data-start="2759.15" data-end="2765.36">recognize</span> <span data-start="2765.37" data-end="2768.29">there's multiple ways to do backup one</span> <span data-start="2768.29" data-end="2770">is just having a second node to</span> <span data-start="2770" data-end="2773.33">replicate to to do real like a host</span> <span data-start="2773.33" data-end="2778.55">setup or host backup you can from a live</span> <span data-start="2778.55" data-end="2780.05">cow should be instance you can just run</span> <span data-start="2780.05" data-end="2782.51">our shrink or CP on the database file on</span> <span data-start="2782.51" data-end="2784.97">disk to your e to your backup target</span> <span data-start="2784.97" data-end="2787.57">location and then reload that into a</span> <span data-start="2787.57" data-end="2790.49">running so over again so couch tb's file</span> <span data-start="2790.49" data-end="2792.89">structure or the file is append only so</span> <span data-start="2792.89" data-end="2795.2">your art if you are sync it you'll never</span> <span data-start="2795.2" data-end="2796.97">theirs will never get an inconsistent</span> <span data-start="2796.97" data-end="2798.5">file we don't ever we don't ever touch</span> <span data-start="2798.5" data-end="2800.45">anything we've already written as</span> <span data-start="2800.45" data-end="2802.01">there's no complex tools we need to</span> <span data-start="2802.01" data-end="2803.21">write you can just use the file system</span> <span data-start="2803.21" data-end="2806.15">tools such a backup so yeah and then</span> <span data-start="2806.15" data-end="2807.68">once you are synced over then you'd use</span> <span data-start="2807.68" data-end="2809.75">replication to bring up to it bring it</span> <span data-start="2809.75" data-end="2811.49">up to date with any updates that came in</span> <span data-start="2811.49" data-end="2818.609">while the rsync was running</span> <span data-start="2818.619" data-end="2820.869">it takes about six months like the first</span> <span data-start="2820.869" data-end="2822.819">few months I was like Damian cats as the</span> <span data-start="2822.819" data-end="2824.079">guy behind couch TV was talking like</span> <span data-start="2824.079" data-end="2825.609">what kind should be sucks it can't even</span> <span data-start="2825.609" data-end="2827.859">do this and he's like I think about what</span> <span data-start="2827.859" data-end="2828.999">you what are you trying to do here like</span> <span data-start="2828.999" data-end="2830.23">okay I'm trying to do this and this is</span> <span data-start="2830.23" data-end="2831.519">how it works and i will start doing</span> <span data-start="2831.519" data-end="2835.15">nested sets and mysql and it can't work</span> </p>
<p><span data-start="2835.15" data-end="2836.41">I can't walk it out how to do it in a</span> <span data-start="2836.41" data-end="2838.359">MapReduce view and I get pic take a step</span> <span data-start="2838.359" data-end="2840.46">back do it like this and then use the</span> <span data-start="2840.46" data-end="2842.289">view like that like yeah that's solely</span> <span data-start="2842.289" data-end="2843.94">up is a super works and that's not</span> <span data-start="2843.94" data-end="2845.499">nearly as complex that's what I've been</span> <span data-start="2845.499" data-end="2847.569">trying to do with the mysql database so</span> <span data-start="2847.569" data-end="2849.4">you need to unlearn a lot of things that</span> <span data-start="2849.4" data-end="2851.019">you're familiar with from a relational</span> <span data-start="2851.019" data-end="2853.63">database it turns out the document me</span> <span data-start="2853.63" data-end="2855.13">tougher comes from the real world so</span> <span data-start="2855.13" data-end="2856.539">everything that we have like on paper</span> <span data-start="2856.539" data-end="2858.819">receipts dog all these are documents and</span> <span data-start="2858.819" data-end="2860.319">they have the same properties that car</span> <span data-start="2860.319" data-end="2861.549">should be documents have they are</span> <span data-start="2861.549" data-end="2863.289">self-contained like my business card is</span> <span data-start="2863.289" data-end="2865.45">a document that has that it doesn't say</span> <span data-start="2865.45" data-end="2867.19">if x equals model I just don't have a</span> <span data-start="2867.19" data-end="2869.259">fax machine I don't make that explicit</span> <span data-start="2869.259" data-end="2873.279">so specifically how I was able to start</span> <span data-start="2873.279" data-end="2875.619">playing with it is i had a rails app and</span> <span data-start="2875.619" data-end="2876.999">what I did is I had my main model you</span> <span data-start="2876.999" data-end="2879.549">know like my user model and I just load</span> <span data-start="2879.549" data-end="2881.2">them all and loop through one at a time</span> <span data-start="2881.2" data-end="2883.119">and you know I was already kind of</span> <span data-start="2883.119" data-end="2884.739">halfway converting them to JSON for</span> <span data-start="2884.739" data-end="2886.089">other reasons of my API so then I just</span> <span data-start="2886.089" data-end="2887.47">started dumping that JSON and CouchDB</span> <span data-start="2887.47" data-end="2888.849">and that gave me enough of a grip to</span> <span data-start="2888.849" data-end="2889.779">where I could start playing with it</span> <span data-start="2889.779" data-end="2891.249">because that user models going to pull</span> <span data-start="2891.249" data-end="2892.539">up stuff from other tables if it needs</span> <span data-start="2892.539" data-end="2895.18">to to make your JSON so yeah so just</span> <span data-start="2895.18" data-end="2897.46">denormalize in your old code and push</span> <span data-start="2897.46" data-end="2899.739">the push the documents or rather normal</span> <span data-start="2899.739" data-end="2902.17">i yeah pull it all together and then</span> <span data-start="2902.17" data-end="2911.259">push the documents in the CouchDB</span> <span data-start="2911.269" data-end="2915.619">oh yeah each database is one file so</span> <span data-start="2915.619" data-end="2916.939">there's a couple of things you can do so</span> <span data-start="2916.939" data-end="2918.979">if you have like a user application</span> <span data-start="2918.979" data-end="2920.39">where you don't need cross-reference</span> <span data-start="2920.39" data-end="2923.299">user data such as an email each user get</span> <span data-start="2923.299" data-end="2925.64">to sell its own database so you've got a</span> <span data-start="2925.64" data-end="2927.019">bunch of files and like a tree was</span> <span data-start="2927.019" data-end="2928.13">tested with over a million data</span> <span data-start="2928.13" data-end="2929.899">databases in a single server so that's</span> <span data-start="2929.899" data-end="2933.229">not a problem and even very big</span> <span data-start="2933.229" data-end="2934.999">databases we've got there's one project</span> <span data-start="2934.999" data-end="2937.459">what Chris was doing 19 million</span> <span data-start="2937.459" data-end="2939.079">documents like we got a thousand</span> <span data-start="2939.079" data-end="2941.019">documents a second and then we add zup</span> <span data-start="2941.019" data-end="2944.329">for day and the insert rate after after</span> <span data-start="2944.329" data-end="2946.64">a day of inserting a total of like 86</span> <span data-start="2946.64" data-end="2949.249">million documents then degrade so well</span> <span data-start="2949.249" data-end="2951.589">integrated but like was not hardly at</span> <span data-start="2951.589" data-end="2953.569">all I mean you know it's order log in</span> <span data-start="2953.569" data-end="2957.919">for inserts so so yeah and we've got</span> <span data-start="2957.919" data-end="2959.419">installation that I have like around 200</span> <span data-start="2959.419" data-end="2961.339">gigabytes of data and single database</span> <span data-start="2961.339" data-end="2963.619">and they work just snappy the only it's</span> <span data-start="2963.619" data-end="2965.269">a bit of a pain to like copy all that</span> <span data-start="2965.269" data-end="2966.649">data back and forth and you might not be</span> <span data-start="2966.649" data-end="2968.299">comfortable with that but it works and</span> <span data-start="2968.299" data-end="2970.219">there's compaction so the file is depend</span> <span data-start="2970.219" data-end="2971.779">only but occasionally you know when it</span> <span data-start="2971.779" data-end="2973.13">starts to fill up your disk you need to</span> <span data-start="2973.13" data-end="2975.259">start compaction which which copy is</span> <span data-start="2975.259" data-end="2977.149">only the live data out of the old file</span> <span data-start="2977.149" data-end="2979.249">into a new file sort of like vacuum and</span> <span data-start="2979.249" data-end="2980.589">in postgres or see polite or</span> <span data-start="2980.589" data-end="2986.34">generational garbage collection right</span> <span data-start="2986.35" data-end="2988.36">so the catch to be API is so simple that</span> <span data-start="2988.36" data-end="2990.43">some guy the guy said meebo.com like the</span> <span data-start="2990.43" data-end="2993.31">web IM client folks they took courage to</span> <span data-start="2993.31" data-end="2994.96">be until we need sharting like we really</span> <span data-start="2994.96" data-end="2996.43">need it and they just build it in an</span> <span data-start="2996.43" data-end="2998.29">engine X module and a twisted Python</span> <span data-start="2998.29" data-end="3000.9">client to merge views and I'm like well</span> <span data-start="3000.9" data-end="3002.19">we've got the shouting thing and we're</span> <span data-start="3002.19" data-end="3003.54">like that's pretty cool can we see some</span> <span data-start="3003.54" data-end="3005.01">source and I got we got to talk to our</span> <span data-start="3005.01" data-end="3007.59">lawyers about that I can't do and a week</span> <span data-start="3007.59" data-end="3008.64">later or two week later they came back</span> <span data-start="3008.64" data-end="3010.02">okay we pull it up a google code on the</span> <span data-start="3010.02" data-end="3011.85">apache to license so everybody cutting</span> <span data-start="3011.85" data-end="3013.95">now use that like in production stuff</span> <span data-start="3013.95" data-end="3016.8">and it was really really simple to do</span> <span data-start="3016.8" data-end="3026.589">just because of our like HTTP API</span> <span data-start="3026.599" data-end="3029.41">you</span> <span data-start="3029.42" data-end="3031.64">so you have people people will teach you</span> <span data-start="3031.64" data-end="3032.63">not to put</span> <span data-start="3032.63" data-end="3034.07">falls into your database because it's</span> <span data-start="3034.07" data-end="3036.59">bad idea and the way you'll be using</span> <span data-start="3036.59" data-end="3038.63">relational database is like going</span> <span data-start="3038.63" data-end="3040.67">through a middleware layer like swapping</span> <span data-start="3040.67" data-end="3042.2">from Colonel n to use the land for three</span> <span data-start="3042.2" data-end="3044.24">times before it hits the HTTP socket</span> <span data-start="3044.24" data-end="3045.65">against sent to the client that's a</span> <span data-start="3045.65" data-end="3048.62">really bad idea unless you like a very</span> <span data-start="3048.62" data-end="3050.12">lightweight binary stuff that can like</span> <span data-start="3050.12" data-end="3051.86">that you need the management for button</span> <span data-start="3051.86" data-end="3053.6">couchdb it gets streamed from this</span> <span data-start="3053.6" data-end="3055.73">directly to the user so it's not a bad</span> <span data-start="3055.73" data-end="3057.41">idea to put binary stuff in to catch to</span> <span data-start="3057.41" data-end="3059.93">be and when I did the de binary</span> <span data-start="3059.93" data-end="3061.91">attachment API that stand alone I</span> <span data-start="3061.91" data-end="3064.61">stopped benchmark testing it with the</span> <span data-start="3064.61" data-end="3066.35">eight gigabyte movie father just put in</span> <span data-start="3066.35" data-end="3068.78">and out there were no problems i went</span> <span data-start="3068.78" data-end="3069.95">through i'm at grambler hunting lately</span> <span data-start="3069.95" data-end="3071.66">and i was able to make the files a</span> <span data-start="3071.66" data-end="3073.46">little you know it does some bookkeeping</span> <span data-start="3073.46" data-end="3074.87">in the file and i was able to pull some</span> <span data-start="3074.87" data-end="3077.03">of the sparseness out so he had the the</span> <span data-start="3077.03" data-end="3078.35">programming is about trade-offs and the</span> <span data-start="3078.35" data-end="3079.91">trade-off that catch me makes is it</span> <span data-start="3079.91" data-end="3082.37">trades reliability speed and whatever</span> <span data-start="3082.37" data-end="3083.9">else is in care should be for disk space</span> <span data-start="3083.9" data-end="3086.9">because disk is cheap so you need like</span> <span data-start="3086.9" data-end="3089.33">if you're in a very like tight disc</span> <span data-start="3089.33" data-end="3090.98">environment casual you might not be the</span> <span data-start="3090.98" data-end="3093.41">best choice well yeah that's our gambit</span> <span data-start="3093.41" data-end="3103.28">because this cuz disc is getting free so</span> <span data-start="3103.29" data-end="3106.42">you</span> <span data-start="3106.43" data-end="3109.44">no that's not</span> <span data-start="3109.44" data-end="3110.91">the concern of cash to be but the fun</span> <span data-start="3110.91" data-end="3112.53">line file system yeah but it's also it's</span> <span data-start="3112.53" data-end="3114.81">pretty resilient in terms of you know as</span> <span data-start="3114.81" data-end="3116.73">long as you don't get hit by a cosmic</span> <span data-start="3116.73" data-end="3119.849">array right in a b-tree index and you</span> <span data-start="3119.849" data-end="3121.44">don't try you know a lot of the lot of</span> <span data-start="3121.44" data-end="3122.91">the data in the file if there's</span> <span data-start="3122.91" data-end="3124.23">specially if there's a high update rate</span> <span data-start="3124.23" data-end="3125.819">and not just new documents well that</span> <span data-start="3125.819" data-end="3127.47">data is you know redundant at a certain</span> <span data-start="3127.47" data-end="3135.54">point</span> <span data-start="3135.55" data-end="3143.27">you</span> <span data-start="3143.28" data-end="3145.5">the one thing that you need to keep in</span> <span data-start="3145.5" data-end="3146.21">mind with college</span> <span data-start="3146.21" data-end="3148.4">that's true for all other applications</span> <span data-start="3148.4" data-end="3150.2">they are not optimized for single</span> <span data-start="3150.2" data-end="3152.27">maximum speed but for concurrency so</span> <span data-start="3152.27" data-end="3153.859">we'll be able to hurt like you get the</span> <span data-start="3153.859" data-end="3155.54">same throughput but you can host a lot</span> <span data-start="3155.54" data-end="3159.74">more concurrent users so the problem</span> <span data-start="3159.74" data-end="3162.95">with lady is that's it's single core so</span> <span data-start="3162.95" data-end="3164.119">you need to run a lot of ladies on the</span> <span data-start="3164.119" data-end="3165.74">multi-core line is pretty good on the</span> <span data-start="3165.74" data-end="3169.28">multi-core what we did what I did</span> <span data-start="3169.28" data-end="3171.02">benchmarking for a client is put in a</span> <span data-start="3171.02" data-end="3173.51">varnish in front of couchdb and because</span> <span data-start="3173.51" data-end="3175.4">varnish is a lot faster htp handling and</span> <span data-start="3175.4" data-end="3177.02">also does a little bit of caching I got</span> <span data-start="3177.02" data-end="3178.609">like twenty percent more read read and</span> <span data-start="3178.609" data-end="3179.99">write out of just guide should be would</span> <span data-start="3179.99" data-end="3181.609">launch on the same node so their</span> <span data-start="3181.609" data-end="3183.2">advantages of complaint combining these</span> <span data-start="3183.2" data-end="3185.39">if you just want to use engine X to</span> <span data-start="3185.39" data-end="3187.22">serve static content and you don't have</span> <span data-start="3187.22" data-end="3189.92">a database in the back end so so if you</span> <span data-start="3189.92" data-end="3191.42">lead the data management part of that</span> <span data-start="3191.42" data-end="3193.4">which is pretty neat then you just use</span> <span data-start="3193.4" data-end="3194.48">casually but you can also use a</span> <span data-start="3194.48" data-end="3195.89">combination to make it like lightning</span> <span data-start="3195.89" data-end="3198.05">fast or the replication so you have done</span> <span data-start="3198.05" data-end="3207.24">it set of data</span> <span data-start="3207.25" data-end="3209.24">that we've got you tags on all our</span> <span data-start="3209.24" data-end="3213.44">attachments also the yeah I mean there's</span> <span data-start="3213.44" data-end="3215.75">no there's no real reason not to I mean</span> <span data-start="3215.75" data-end="3216.95">we are the little cost should be</span> <span data-start="3216.95" data-end="3218.15">architecture is set up to be</span> <span data-start="3218.15" data-end="3219.98">stream-based so we don't reckon a buffer</span> <span data-start="3219.98" data-end="3221.84">your 40 goodbye detachment in RAM and</span> <span data-start="3221.84" data-end="3223.85">then and then send it out to the client</span> <span data-start="3223.85" data-end="3226.76">so yeah we may not be as lightning quick</span> <span data-start="3226.76" data-end="3228.56">as some of those other ones because</span> <span data-start="3228.56" data-end="3229.85">we're not optimizing for a single</span> <span data-start="3229.85" data-end="3231.86">request latency but we should be able to</span> <span data-start="3231.86" data-end="3234.17">you know not slow the disk down too much</span> <span data-start="3234.17" data-end="3236">well it's it's still fast enough for</span> <span data-start="3236" data-end="3237.77">like the average user so instead of like</span> <span data-start="3237.77" data-end="3239.15">10 millisecond would take a whole 100</span> <span data-start="3239.15" data-end="3240.74">milliseconds but it's still faster than</span> <span data-start="3240.74" data-end="3242.24">you I can see it because it's you know</span> <span data-start="3242.24" data-end="3243.53">trying to get a lot of 10 milliseconds</span> <span data-start="3243.53" data-end="3245.15">in a row because you can have 50 100</span> <span data-start="3245.15" data-end="3246.5">millisecond ones at the same time you're</span> <span data-start="3246.5" data-end="3247.64">like you need to take these numbers with</span> <span data-start="3247.64" data-end="3248.93">a grain of salt or couch be might be</span> <span data-start="3248.93" data-end="3250.28">like this is just pulled out of the air</span> <span data-start="3250.28" data-end="3251.87">so catchy we might be 10 100 times</span> <span data-start="3251.87" data-end="3254.18">slower but that just like it makes no</span> <span data-start="3254.18" data-end="3255.5">difference for the user and you have</span> <span data-start="3255.5" data-end="3257.06">kinda have a lot more users and you have</span> <span data-start="3257.06" data-end="3258.92">the same data throughput so yeah I'm</span> <span data-start="3258.92" data-end="3261.8">come out tomorrow will be across the</span> <span data-start="3261.8" data-end="3263.99">hall I hope and will show you will show</span> <span data-start="3263.99" data-end="3265.97">you JavaScript and will be around all</span> <span data-start="3265.97" data-end="3278.92">today just grab us great thanks</span> </p>
</section>