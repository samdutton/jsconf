<section>
<p><span data-start="15.369" data-end="22.22">so this the talk title there's a little</span> <span data-start="22.22" data-end="26">bit of a bait-and-switch that's probably</span> <span data-start="26" data-end="27.919">good enough anyway first and foremost if</span> <span data-start="27.919" data-end="29.449">you're having trouble seeing it the</span> <span data-start="29.449" data-end="31.189">presentations online if you're not</span> <span data-start="31.189" data-end="32.3">having trouble seeing it</span> <span data-start="32.3" data-end="33.8">don't go there there are a lot of images</span> <span data-start="33.8" data-end="36.5">and I don't want you to bog down the you</span> </p>
<p><span data-start="36.5" data-end="38.66">Wi-Fi anyway so this is actually more</span> <span data-start="38.66" data-end="40.28">accurate so I'm gonna be dressing jQuery</span> <span data-start="40.28" data-end="42.71">directly and I think it sounds like it's</span> <span data-start="42.71" data-end="45.079">kind of a popular opinion here to bag on</span> <span data-start="45.079" data-end="48.02">jQuery hopefully that doesn't sour you</span> <span data-start="48.02" data-end="51.079">on the talk to be more accurate this is</span> <span data-start="51.079" data-end="55.46">sort of faster better leaner jQuery in</span> <span data-start="55.46" data-end="58.25">certain aspects the slide just it just</span> <span data-start="58.25" data-end="59.75">doesn't really fit well long slide looks</span> <span data-start="59.75" data-end="61.76">kind of ugly so this is my personal</span> <span data-start="61.76" data-end="63.469">information that's where you can find me</span> <span data-start="63.469" data-end="66.47">on Twitter that's my blog github there</span> <span data-start="66.47" data-end="68.119">is more stuff on my blog about this and</span> <span data-start="68.119" data-end="70.28">I'll talk about that in a little bit but</span> <span data-start="70.28" data-end="72.38">generally on the internet you can find</span> <span data-start="72.38" data-end="76.07">me at John bender I work full time at</span> </p>
<p><span data-start="76.07" data-end="77.84">Adobe on jQuery Mobile I say that only</span> <span data-start="77.84" data-end="80.36">because I'm very lucky to have a job</span> <span data-start="80.36" data-end="81.74">work in an open source I'm very grateful</span> <span data-start="81.74" data-end="84.17">and Adobe pays me to work on a great</span> <span data-start="84.17" data-end="87.53">project so I'm happy to be doing that so</span> <span data-start="87.53" data-end="88.759">what is the motivation for this talk so</span> <span data-start="88.759" data-end="89.84">this is something I feel like I have to</span> <span data-start="89.84" data-end="92.479">cover a lot of people ask me like why do</span> <span data-start="92.479" data-end="94.31">we care what does this matter so just to</span> <span data-start="94.31" data-end="95.33">make sure that you don't leave the door</span> <span data-start="95.33" data-end="97.099">in the next five minutes let's talk a</span> <span data-start="97.099" data-end="98.42">little bit about the motivation first of</span> <span data-start="98.42" data-end="100.429">all math is pretty awesome</span> <span data-start="100.429" data-end="101.81">so I've had kind of a tumultuous</span> <span data-start="101.81" data-end="104.39">relationship with it and I think a lot</span> <span data-start="104.39" data-end="105.89">of people have I think a lot of times</span> <span data-start="105.89" data-end="107.27">you come to math in terms of like</span> <span data-start="107.27" data-end="109.34">calculus or geometry and these things</span> <span data-start="109.34" data-end="111.53">aren't necessarily very interesting but</span> <span data-start="111.53" data-end="113.179">once you find something you really love</span> <span data-start="113.179" data-end="115.009">and you find a way to kind of apply</span> <span data-start="115.009" data-end="117.349">formalism to it math takes on a kind of</span> <span data-start="117.349" data-end="118.97">a different shape so that's a little bit</span> <span data-start="118.97" data-end="122.72">what this presentation is about jquery's</span> <span data-start="122.72" data-end="123.95">5 so this is not something I need to</span> <span data-start="123.95" data-end="126.619">repeat too often but jQuery gets used by</span> <span data-start="126.619" data-end="128.179">a lot of websites according to Alexa</span> <span data-start="128.179" data-end="130.429">rankings for whatever value you give</span> <span data-start="130.429" data-end="132.89">that the top 10 thousand websites</span> <span data-start="132.89" data-end="134.51">something like 50 percent of them 50</span> <span data-start="134.51" data-end="136.7">plus percent of them use jQuery the top</span> <span data-start="136.7" data-end="138.92">million it's like 45 percent so there's</span> <span data-start="138.92" data-end="141.47">a lot of people using jQuery so if we if</span> <span data-start="141.47" data-end="143.06">we get a big benefit out of this if the</span> <span data-start="143.06" data-end="145.069">application of category theory and</span> <span data-start="145.069" data-end="145.64">formalism</span> <span data-start="145.64" data-end="148.01">to jQuery provides some sort of benefit</span> <span data-start="148.01" data-end="148.61">there</span> <span data-start="148.61" data-end="151.51">they brought her brought her win there</span> <span data-start="151.51" data-end="154.61">everybody likes performance so this the</span> <span data-start="154.61" data-end="156.2">large a large portion of the benefit</span> <span data-start="156.2" data-end="157.52">that we get out of applying category</span> <span data-start="157.52" data-end="159.89">theory to jQuery is performance right so</span> <span data-start="159.89" data-end="161">everybody likes presentations about</span> <span data-start="161" data-end="162.83">performance uh incidentally that's</span> <span data-start="162.83" data-end="165.23">tachometer that says nothing at all</span> <span data-start="165.23" data-end="169.67">about how fast you're going so jQuery</span> <span data-start="169.67" data-end="170.93">let's talk a little bit about the</span> <span data-start="170.93" data-end="172.16">problem we're gonna kind of solve within</span> <span data-start="172.16" data-end="174.29">jQuery uh</span> <span data-start="174.29" data-end="176.03">so jQuery if you've ever used it before</span> <span data-start="176.03" data-end="177.35">which I'm sure how many of you have not</span> <span data-start="177.35" data-end="179.54">used jQuery okay</span> <span data-start="179.54" data-end="180.56">there's a couple of you all right good</span> </p>
<p><span data-start="180.56" data-end="181.94">I'll make this quick but I'll cover it</span> <span data-start="181.94" data-end="183.74">so would jQuery what you're generally</span> <span data-start="183.74" data-end="184.79">doing is you're getting elements out of</span> <span data-start="184.79" data-end="186.38">the Dom using something like this a</span> <span data-start="186.38" data-end="188.45">selector with a dollar function and then</span> <span data-start="188.45" data-end="191.09">you may call some method foo on it this</span> <span data-start="191.09" data-end="193.04">could be anything add classes remove</span> <span data-start="193.04" data-end="196.01">classes change properties and it's</span> <span data-start="196.01" data-end="197.57">chainable so it's a fluent interface and</span> <span data-start="197.57" data-end="199.1">this will become relevant later</span> <span data-start="199.1" data-end="202.64">so the internals of these jQuery methods</span> <span data-start="202.64" data-end="205.76">all have the form so if you're defining</span> <span data-start="205.76" data-end="207.91">foo they all take the form on the jQuery</span> <span data-start="207.91" data-end="210.59">prototype so if you're if you're</span> <span data-start="210.59" data-end="212.51">invoking it on a jQuery object it's not</span> <span data-start="212.51" data-end="214.1">actually calling anything on the jQuery</span> <span data-start="214.1" data-end="215.63">object it does a prototype lookup right</span> <span data-start="215.63" data-end="216.739">so it goes up the prototype chain to</span> <span data-start="216.739" data-end="219.049">find that function but they're all</span> <span data-start="219.049" data-end="220.94">invoked on a jQuery object right so the</span> <span data-start="220.94" data-end="222.53">the context in which they're operating</span> <span data-start="222.53" data-end="224.51">is a jQuery object and that's very</span> <span data-start="224.51" data-end="225.739">important that'll become relevant later</span> <span data-start="225.739" data-end="228.53">but generally what they do is they loop</span> <span data-start="228.53" data-end="230.39">over that set of elements or they don't</span> <span data-start="230.39" data-end="231.769">and they do some manipulation to it</span> <span data-start="231.769" data-end="234.38">that's that's the general shape of a</span> <span data-start="234.38" data-end="238.07">jQuery method more specifically there's</span> <span data-start="238.07" data-end="239.959">a large set of jQuery methods that deal</span> <span data-start="239.959" data-end="241.43">directly and manipulating the Dom</span> <span data-start="241.43" data-end="243.049">elements inside a jQuery set there are</span> <span data-start="243.049" data-end="244.66">some that don't so for example first</span> <span data-start="244.66" data-end="247.67">just truncates the set right it doesn't</span> <span data-start="247.67" data-end="250.43">do anything to Dom elements in it these</span> <span data-start="250.43" data-end="253.07">things do a whole lot of work so the</span> <span data-start="253.07" data-end="254.269">first thing they do is they generally</span> <span data-start="254.269" data-end="255.739">handle arguments so if you've ever used</span> <span data-start="255.739" data-end="257.45">a jQuery again if you've used jQuery</span> <span data-start="257.45" data-end="259.58">before you know that most methods have</span> <span data-start="259.58" data-end="261.739">like a gigantic type Union for each of</span> <span data-start="261.739" data-end="264.11">their arguments right they take strings</span> <span data-start="264.11" data-end="265.669">they take Dom elements they take</span> <span data-start="265.669" data-end="267.32">functions for callbacks they take other</span> <span data-start="267.32" data-end="270.08">jQuery objects they do a lot of argument</span> <span data-start="270.08" data-end="271.82">handling inside the method so this can</span> <span data-start="271.82" data-end="274.479">be complex extremely complex of times</span> <span data-start="274.479" data-end="276.83">additionally they also loop over the set</span> <span data-start="276.83" data-end="277.76">right so if you're going to manipulate</span> <span data-start="277.76" data-end="279.8">the Dom elements in the set you have to</span> <span data-start="279.8" data-end="282.38">loop over it and deal with it in some</span> <span data-start="282.38" data-end="284.63">some fashion or another and then that's</span> <span data-start="284.63" data-end="285.65">sort of the third thing that they do</span> <span data-start="285.65" data-end="288.11">they do some Dom element emulation right</span> <span data-start="288.11" data-end="290.06">that's mixed in there so this is kind of</span> <span data-start="290.06" data-end="293.33">this isn't bad per se especially with an</span> <span data-start="293.33" data-end="295.55">example that's what like five lines but</span> <span data-start="295.55" data-end="297.74">when you actually if you look if the 20</span> <span data-start="297.74" data-end="298.94">or so people who are in here earlier</span> <span data-start="298.94" data-end="300.05">have actually looked at the jQuery</span> <span data-start="300.05" data-end="301.49">source a lot of the methods are actually</span> <span data-start="301.49" data-end="304.01">quite large they're very complex so this</span> <span data-start="304.01" data-end="306.53">mixing this sort of mashing together of</span> <span data-start="306.53" data-end="308.09">the functionality of handling the</span> <span data-start="308.09" data-end="310.25">arguments doing the looping and dealing</span> <span data-start="310.25" data-end="312.94">with the Dom element alteration can get</span> <span data-start="312.94" data-end="315.98">untenable times so this is this is kind</span> <span data-start="315.98" data-end="317.75">of the problem we're gonna solve and</span> <span data-start="317.75" data-end="318.92">we're gonna solve it by applying some</span> <span data-start="318.92" data-end="320.75">category theory now when I say I'm gonna</span> <span data-start="320.75" data-end="322.46">work in category theory I'm not working</span> <span data-start="322.46" data-end="324.17">in monads okay I know everybody knows</span> <span data-start="324.17" data-end="326.75">has heard of a monad before learning how</span> <span data-start="326.75" data-end="328.79">to understand monads and Haskell is kind</span> <span data-start="328.79" data-end="331.25">of a cool and popular topic if you're a</span> <span data-start="331.25" data-end="332.99">programmer I'm gonna talk about a much</span> <span data-start="332.99" data-end="335.36">more basic introductory level type stuff</span> <span data-start="335.36" data-end="337.64">hopefully if you know JavaScript at all</span> <span data-start="337.64" data-end="338.81">you'll be able to get pretty much all of</span> <span data-start="338.81" data-end="341.72">this a little bit of background to guys</span> </p>
<p><span data-start="341.72" data-end="344.33">Alan burger McClane we're working with</span> <span data-start="344.33" data-end="346.1">groups we was working with algebras and</span> <span data-start="346.1" data-end="347.63">what they noticed was there's this</span> <span data-start="347.63" data-end="349.79">common there are these commonalities</span> <span data-start="349.79" data-end="351.56">between algebra is this stuff that they</span> <span data-start="351.56" data-end="353.45">were working in so like any programmer</span> <span data-start="353.45" data-end="355.76">worth their salt they took what they</span> <span data-start="355.76" data-end="356.84">were seeing that was the same and they</span> <span data-start="356.84" data-end="358.22">abstracted it out and this sort of</span> <span data-start="358.22" data-end="360.8">became the genesis for category theory</span> <span data-start="360.8" data-end="363.82">wild and crazy guys that they were so</span> <span data-start="363.82" data-end="366.61">because working in algebra is exciting</span> <span data-start="366.61" data-end="369.47">but that is what eventually became</span> <span data-start="369.47" data-end="371.24">category theory they just did what you</span> <span data-start="371.24" data-end="372.86">do every day when you see two things</span> <span data-start="372.86" data-end="375.17">that are doing the exact same operation</span> <span data-start="375.17" data-end="376.7">they pulled it out they made it</span> <span data-start="376.7" data-end="380.48">available so what is a category</span> <span data-start="380.48" data-end="381.68">specifically let's start by defining</span> <span data-start="381.68" data-end="383.62">what we're gonna be building here today</span> <span data-start="383.62" data-end="386.63">first it's two concrete things the set</span> <span data-start="386.63" data-end="390.38">of objects just concretely things and</span> <span data-start="390.38" data-end="392.24">it's a set of morphisms which are</span> <span data-start="392.24" data-end="394.61">actions or operations on the objects</span> <span data-start="394.61" data-end="397.43">right so a good example and then there's</span> <span data-start="397.43" data-end="401.24">two laws first law is identity so</span> <span data-start="401.24" data-end="403.61">identity is very simple for every object</span> <span data-start="403.61" data-end="407.3">in a category and just to be clear so</span> <span data-start="407.3" data-end="409.34">you can think of objects and morphisms</span> <span data-start="409.34" data-end="411.17">as the relationship between nouns and</span> <span data-start="411.17" data-end="413">verbs kind of right I think that that</span> <span data-start="413" data-end="414.29">analogy gets overused a lot in</span> <span data-start="414.29" data-end="416.659">programming but it's very optimistic</span> <span data-start="416.659" data-end="419.729">so the identity law is very simple it</span> <span data-start="419.729" data-end="422.039">just says that for every object in a</span> <span data-start="422.039" data-end="423.93">category there has to be some function</span> <span data-start="423.93" data-end="425.25">that will deal with that object and</span> <span data-start="425.25" data-end="427.199">return it as and not do anything so in</span> </p>
<p><span data-start="427.199" data-end="429.36">JavaScript this is very simple it takes</span> <span data-start="429.36" data-end="431.25">an argument returns argument unaltered</span> <span data-start="431.25" data-end="433.889">so that's identity the second is</span> <span data-start="433.889" data-end="435.21">composition this is the second law it</span> <span data-start="435.21" data-end="437.159">has to be here it has to provide for a</span> <span data-start="437.159" data-end="440.129">composition very simple if you had some</span> <span data-start="440.129" data-end="441.9">function G that takes today and gives</span> <span data-start="441.9" data-end="443.669">you a B you have some function f that</span> <span data-start="443.669" data-end="445.919">takes a B gives you C if you smoosh</span> <span data-start="445.919" data-end="447.09">those things together</span> <span data-start="447.09" data-end="448.59">you will end up with a function that</span> <span data-start="448.59" data-end="450.81">takes an A and gives you a see how many</span> <span data-start="450.81" data-end="454.02">of you have used underscore GS ok the</span> <span data-start="454.02" data-end="455.819">compose function that's that's what</span> <span data-start="455.819" data-end="456.93">we're looking at here so in JavaScript</span> <span data-start="456.93" data-end="458.819">again it's very simple take two</span> <span data-start="458.819" data-end="461.25">functions create a new function that</span> <span data-start="461.25" data-end="463.289">takes a single argument and then pipes</span> <span data-start="463.289" data-end="464.43">those through each of those functions</span> <span data-start="464.43" data-end="466.349">again you're just gluing the two things</span> <span data-start="466.349" data-end="467.539">together you're composing them</span> <span data-start="467.539" data-end="470.759">composition so this is the the fourth</span> <span data-start="470.759" data-end="473.699">thing that you need for a category so</span> <span data-start="473.699" data-end="475.05">let's start off we got two categories to</span> <span data-start="475.05" data-end="475.919">go through the first one we're gonna</span> <span data-start="475.919" data-end="478.11">cover as HTML now what I'm asking you to</span> <span data-start="478.11" data-end="478.949">do for the first part of this</span> <span data-start="478.949" data-end="481.199">presentation is sort of blindly follow</span> <span data-start="481.199" data-end="482.789">me through the formalism here and then</span> <span data-start="482.789" data-end="483.719">at the end we'll get to the really</span> <span data-start="483.719" data-end="485.19">awesome stuff like the performance</span> <span data-start="485.19" data-end="486.629">benefits and things the concrete things</span> <span data-start="486.629" data-end="488.219">that you could take home and talk to</span> <span data-start="488.219" data-end="490.199">your friends about if you were to talk</span> <span data-start="490.199" data-end="494.219">to your friends about category 3 so hTML</span> <span data-start="494.219" data-end="495.779">is our first category that the objects</span> <span data-start="495.779" data-end="498.629">in HTML very simple they're just Dom</span> <span data-start="498.629" data-end="500.58">elements stuff you get using the jquery</span> <span data-start="500.58" data-end="502.5">or not the jquery the javascript api for</span> <span data-start="502.5" data-end="505.889">the dom right so query selector returns</span> <span data-start="505.889" data-end="507.419">a single element from the dom based on a</span> <span data-start="507.419" data-end="508.77">selector right so the thing that you</span> <span data-start="508.77" data-end="510.75">would get from this this is these are</span> <span data-start="510.75" data-end="513.81">the objects of the category HTML when I</span> <span data-start="513.81" data-end="515.43">say objects I mean all possible</span> <span data-start="515.43" data-end="517.32">representations every possible Dom</span> <span data-start="517.32" data-end="519.089">element Everest fits into this set of</span> <span data-start="519.089" data-end="522.57">object it's a large set in morphisms of</span> </p>
<p><span data-start="522.57" data-end="524.76">HTML the verbs the actions are just</span> <span data-start="524.76" data-end="527.31">JavaScript functions that take HTML</span> <span data-start="527.31" data-end="529.56">elements and return them ok and in this</span> <span data-start="529.56" data-end="530.85">case we're gonna say a single element</span> <span data-start="530.85" data-end="532.89">and we're also sort of hand-waving here</span> <span data-start="532.89" data-end="534.6">right JavaScript doesn't have a type</span> <span data-start="534.6" data-end="537.42">system I mean there are compile to</span> <span data-start="537.42" data-end="539.31">JavaScript languages that do but in this</span> <span data-start="539.31" data-end="541.079">case we're talking about JavaScript and</span> <span data-start="541.079" data-end="542.699">we're gonna hand wave and say that to</span> <span data-start="542.699" data-end="545.16">play in HTML to play part in our game</span> <span data-start="545.16" data-end="547.649">here you have to take only HTML elements</span> <span data-start="547.649" data-end="548.259">and return</span> </p>
<p><span data-start="548.259" data-end="550.179">HTML oh man you can't take an HTML</span> <span data-start="550.179" data-end="551.949">element and return a string that</span> <span data-start="551.949" data-end="555.699">wouldn't be part of our category HTML so</span> <span data-start="555.699" data-end="557.97">an example very simple takes an element</span> <span data-start="557.97" data-end="561.129">sets the attribute class to Foo very</span> <span data-start="561.129" data-end="562.54">simple and then returns that same</span> <span data-start="562.54" data-end="564.069">element that is just alter okay</span> <span data-start="564.069" data-end="566.439">super simple so identity what is</span> <span data-start="566.439" data-end="567.279">identity</span> <span data-start="567.279" data-end="570.639">what is that identity function in HTML</span> <span data-start="570.639" data-end="573.549">again same thing the only difference is</span> <span data-start="573.549" data-end="575.529">we're forcing it to take a Dom element</span> <span data-start="575.529" data-end="576.97">and return one that's the only</span> <span data-start="576.97" data-end="577.299">difference</span> <span data-start="577.299" data-end="579.549">same thing with composed composes</span> <span data-start="579.549" data-end="581.499">exceptionally simple again the only</span> <span data-start="581.499" data-end="583.149">difference is Dom element not just any</span> <span data-start="583.149" data-end="585.97">random thing so that's it that's all</span> <span data-start="585.97" data-end="588.97">hTML is so we just in about two minutes</span> <span data-start="588.97" data-end="591.279">to find our first category how many of</span> <span data-start="591.279" data-end="593.499">you are totally unclear about the things</span> </p>
<p><span data-start="593.499" data-end="595.689">I just said okay right this is how</span> <span data-start="595.689" data-end="598.059">simple category theory is right it's not</span> <span data-start="598.059" data-end="600.639">at a very basic level it's so abstract</span> <span data-start="600.639" data-end="602.35">it's extremely simple right so we can</span> <span data-start="602.35" data-end="603.519">apply it to a lot of things and it's</span> <span data-start="603.519" data-end="605.919">applied all over the place in math and</span> <span data-start="605.919" data-end="607.809">and science and chemistry and all sorts</span> <span data-start="607.809" data-end="609.91">of wild places so let's look at one</span> <span data-start="609.91" data-end="611.019">that's a little more complex so let's</span> <span data-start="611.019" data-end="612.489">look at our second category the second</span> <span data-start="612.489" data-end="614.679">part of our formalism here is our</span> <span data-start="614.679" data-end="617.47">category jQuery so the objects of jQuery</span> <span data-start="617.47" data-end="620.47">are surprise surprise jQuery objects</span> <span data-start="620.47" data-end="624.039">okay so any jQuery object it could be</span> <span data-start="624.039" data-end="625.72">the empty jQuery object it could be one</span> <span data-start="625.72" data-end="627.22">with many elements the single element</span> <span data-start="627.22" data-end="628.239">doesn't matter so in the case of our</span> <span data-start="628.239" data-end="632.169">example here it's just one element well</span> <span data-start="632.169" data-end="633.639">ostensibly one element less you're</span> <span data-start="633.639" data-end="635.289">throwing ideas around your Dom like a</span> <span data-start="635.289" data-end="638.679">madman it's just it's just any Dom</span> <span data-start="638.679" data-end="641.919">elements wrap by jQuery object the</span> <span data-start="641.919" data-end="643.539">morphisms of jQuery are as you would</span> <span data-start="643.539" data-end="646.239">expect jQuery methods so anything on</span> <span data-start="646.239" data-end="648.429">vocht on a jQuery object that</span> <span data-start="648.429" data-end="651.279">manipulates the jQuery object is a</span> <span data-start="651.279" data-end="654.069">jQuery morphism very simple identity</span> <span data-start="654.069" data-end="656.949">just as you would expect very simple but</span> <span data-start="656.949" data-end="658.749">there's a slight twist so it has to be</span> <span data-start="658.749" data-end="662.169">defined on the jQuery objects prototype</span> <span data-start="662.169" data-end="664.6">jQuery dot FN okay we're stipulating</span> <span data-start="664.6" data-end="667.689">that because the requirement here</span> <span data-start="667.689" data-end="669.489">remember we said earlier that identity</span> <span data-start="669.489" data-end="671.049">had to take an argument and return one</span> <span data-start="671.049" data-end="673.119">right here so so here what we're doing</span> <span data-start="673.119" data-end="675.939">is we're sort of twisting that a little</span> <span data-start="675.939" data-end="677.769">bit we're sort I'm gonna hand wave and</span> <span data-start="677.769" data-end="679.029">say that the first argument is actually</span> <span data-start="679.029" data-end="681.49">the context of this value in this case</span> <span data-start="681.49" data-end="683.439">and if you know JavaScript well enough</span> <span data-start="683.439" data-end="684.579">you know that you can actually use</span> <span data-start="684.579" data-end="687.579">function dot apply and explicitly set</span> <span data-start="687.579" data-end="688.899">that this value so you can actually kind</span> <span data-start="688.899" data-end="690.999">of treat it like an argument but I'm</span> <span data-start="690.999" data-end="692.259">gonna hand wave here and say it's not</span> <span data-start="692.259" data-end="693.639">taking any arguments it's just gonna</span> <span data-start="693.639" data-end="695.319">deal with this and that's our first</span> <span data-start="695.319" data-end="698.559">argument so how does this work just as</span> <span data-start="698.559" data-end="700.72">you would expect you invoke ID on a</span> <span data-start="700.72" data-end="702.339">jQuery object and you get back the exact</span> <span data-start="702.339" data-end="704.759">same jQuery object okay simple</span> <span data-start="704.759" data-end="706.899">composition now composition is a little</span> <span data-start="706.899" data-end="710.769">more complex again then for HTML take</span> <span data-start="710.769" data-end="712.959">two jQuery methods now these aren't just</span> <span data-start="712.959" data-end="714.879">random functions anywhere these are</span> <span data-start="714.879" data-end="716.379">jQuery methods things that are Diet</span> <span data-start="716.379" data-end="718.059">defined on the jQuery prototype and</span> <span data-start="718.059" data-end="720.309">we're gonna take we're gonna recreate a</span> <span data-start="720.309" data-end="722.499">new function that will eventually be</span> <span data-start="722.499" data-end="724.24">assigned again to the jQuery prototype</span> <span data-start="724.24" data-end="725.589">and I'll show you an example in a second</span> <span data-start="725.589" data-end="727.54">but this is very simple it just going to</span> <span data-start="727.54" data-end="729.939">take the context of this value and it's</span> <span data-start="729.939" data-end="730.959">gonna pipe it through each of these</span> <span data-start="730.959" data-end="733.269">functions using apply does anybody</span> <span data-start="733.269" data-end="735.779">unclear on how apply works in JavaScript</span> <span data-start="735.779" data-end="738.699">awesome this is the perfect crowd for</span> <span data-start="738.699" data-end="742.36">this presentation all right it's so real</span> <span data-start="742.36" data-end="744.519">quick example if you have two jQuery</span> <span data-start="744.519" data-end="746.23">methods each of them dealing with this</span> <span data-start="746.23" data-end="748.569">value okay just like if you if you write</span> <span data-start="748.569" data-end="750.339">jQuery methods and they don't deal with</span> <span data-start="750.339" data-end="752.319">this value something's wrong so this is</span> <span data-start="752.319" data-end="753.759">this is what did you a query method is</span> <span data-start="753.759" data-end="756.369">you're composing them using our compose</span> <span data-start="756.369" data-end="758.199">function like this and we get a new one</span> <span data-start="758.199" data-end="760.839">gf and that ordering there is correct so</span> </p>
<p><span data-start="760.839" data-end="763.089">G will go first then F will go and what</span> <span data-start="763.089" data-end="764.619">we're saying is that as a result these</span> <span data-start="764.619" data-end="765.779">two things are functionally equivalent</span> <span data-start="765.779" data-end="768.249">we've smashed the two jQuery methods</span> <span data-start="768.249" data-end="770.35">together so that the G and the F for the</span> <span data-start="770.35" data-end="774.189">same as the composed version okay I want</span> <span data-start="774.189" data-end="776.129">you to remember this slide specifically</span> <span data-start="776.129" data-end="778.059">remember that when I say that the</span> <span data-start="778.059" data-end="779.769">composed version is identical to the</span> <span data-start="779.769" data-end="780.879">chained version that we're making an</span> <span data-start="780.879" data-end="782.079">example of here I'm gonna use that later</span> <span data-start="782.079" data-end="783.429">we're gonna talk about loop fusion okay</span> <span data-start="783.429" data-end="787.629">great anybody not anybody anybody not</span> <span data-start="787.629" data-end="789.369">gonna remember that GF is the same thing</span> <span data-start="789.369" data-end="793.029">as chained G DNF great this is a great</span> <span data-start="793.029" data-end="794.11">crowd cuz none of you raise your hands</span> <span data-start="794.11" data-end="797.049">so the last thing we're talking about is</span> <span data-start="797.049" data-end="799.089">a functor also if you have a better</span> <span data-start="799.089" data-end="802.779">slide background for a slide that says</span> <span data-start="802.779" data-end="804.73">functor on it you let me know I could</span> <span data-start="804.73" data-end="807.549">not find one I thought it was just a</span> <span data-start="807.549" data-end="811.329">really cool picture so a functor is a</span> <span data-start="811.329" data-end="813.639">purely category theoretic contract all</span> <span data-start="813.639" data-end="815.5">it does well all it does</span> <span data-start="815.5" data-end="817.24">little complex but all it really does is</span> <span data-start="817.24" data-end="819.22">get you from one category to another so</span> <span data-start="819.22" data-end="821.2">if you're playing around in HTML you're</span> <span data-start="821.2" data-end="823.6">using raw JavaScript functions to deal</span> <span data-start="823.6" data-end="825.49">with HTML elements and you want to get</span> <span data-start="825.49" data-end="827.14">into jQuery for whatever reason you want</span> <span data-start="827.14" data-end="828.46">to take that stuff you're working on and</span> <span data-start="828.46" data-end="830.89">get into jQuery you need a functor well</span> <span data-start="830.89" data-end="833.26">you don't need a functor I'm giving you</span> <span data-start="833.26" data-end="834.43">a functor as a consequence of this</span> <span data-start="834.43" data-end="835.36">because we're talking about category</span> <span data-start="835.36" data-end="837.4">theory but the point is that's what it</span> <span data-start="837.4" data-end="840.25">does so we're gonna go from HTML to</span> <span data-start="840.25" data-end="841.78">jQuery this is not bi-directional it's</span> <span data-start="841.78" data-end="843.34">unidirectional so we're only going from</span> </p>
<p><span data-start="843.34" data-end="845.92">HTML the jQuery so we need three things</span> <span data-start="845.92" data-end="848.26">for this honker first we need something</span> <span data-start="848.26" data-end="850.27">that translates objects in HTML to</span> <span data-start="850.27" data-end="852.76">objects in jQuery okay the second thing</span> <span data-start="852.76" data-end="854.02">we need is we need something that takes</span> <span data-start="854.02" data-end="856.3">the morphisms in HTML so those HTML</span> <span data-start="856.3" data-end="858.49">altering regular JavaScript functions</span> <span data-start="858.49" data-end="860.2">and turns them into jQuery methods or</span> <span data-start="860.2" data-end="862.09">the morphisms in jQuery and the last</span> <span data-start="862.09" data-end="863.8">thing we need to do there's a little bit</span> <span data-start="863.8" data-end="864.85">more detail to this but for the</span> <span data-start="864.85" data-end="866.47">presentation the last thing that we're</span> <span data-start="866.47" data-end="868.27">gonna do is we're gonna prove the laughs</span> <span data-start="868.27" data-end="869.8">law which is that it preserves</span> <span data-start="869.8" data-end="873.07">composition of morphisms okay that</span> <span data-start="873.07" data-end="875.17">sounds really abstract but it's actually</span> <span data-start="875.17" data-end="877.45">very simple so we'll talk about that so</span> <span data-start="877.45" data-end="879.94">for the objects very simple extremely</span> <span data-start="879.94" data-end="883.24">simple little known fact or depending on</span> <span data-start="883.24" data-end="886.66">who you are if you take a regular Dom</span> <span data-start="886.66" data-end="888.7">element you just if you sit you send</span> <span data-start="888.7" data-end="889.96">that as an argument to the dollar</span> <span data-start="889.96" data-end="891.7">function you get back a jquery set that</span> <span data-start="891.7" data-end="893.8">wraps that thing right so we've taken</span> <span data-start="893.8" data-end="896.11">our HTML objects and we transported them</span> <span data-start="896.11" data-end="898.06">into jquery quite simply all we had to</span> <span data-start="898.06" data-end="900.01">use was the dollar function okay so</span> <span data-start="900.01" data-end="902.08">that's the first part second part we got</span> <span data-start="902.08" data-end="904.51">to take the morphisms those jquery or</span> <span data-start="904.51" data-end="906.339">the HTML altering functions and turn</span> <span data-start="906.339" data-end="909.01">them into jQuery methods so if we take</span> <span data-start="909.01" data-end="912.19">our example set foo that just alters</span> <span data-start="912.19" data-end="915.55">that element adds the the classes foo we</span> <span data-start="915.55" data-end="916.839">what we really want to do is we want to</span> <span data-start="916.839" data-end="919.66">take something that that accepts as a</span> <span data-start="919.66" data-end="922.45">single argument an HTML element and we</span> <span data-start="922.45" data-end="925.42">want to turn it into this jQuery method</span> <span data-start="925.42" data-end="927.46">set foo this invocation right so this is</span> <span data-start="927.46" data-end="928.39">that we're sort of changing the</span> <span data-start="928.39" data-end="931.12">invocation pattern so how do we do that</span> <span data-start="931.12" data-end="933.67">well one really easy way to do that is</span> <span data-start="933.67" data-end="936.58">map so inside a jQuery method you have</span> <span data-start="936.58" data-end="938.5">to this and when you use map it just</span> <span data-start="938.5" data-end="940.93">iterates over that set of Dom elements</span> <span data-start="940.93" data-end="942.13">that's inside the jQuery object and</span> <span data-start="942.13" data-end="944.14">hands them off to whatever function you</span> <span data-start="944.14" data-end="946.48">gave it right so in this case I've kind</span> <span data-start="946.48" data-end="948.07">of hand waved and say and I've said it's</span> <span data-start="948.07" data-end="949.24">okay that the index</span> <span data-start="949.24" data-end="951.76">is an extra argument so that's that's</span> <span data-start="951.76" data-end="952.45">fine for now</span> <span data-start="952.45" data-end="956.56">but the with that all we had to do to</span> <span data-start="956.56" data-end="959.2">basically take our set foo which was</span> <span data-start="959.2" data-end="961.36">only concerned with HTML elements and</span> <span data-start="961.36" data-end="962.89">turn it into what amounts to a jQuery</span> <span data-start="962.89" data-end="965.589">morphism is apply map right so if you've</span> <span data-start="965.589" data-end="967">ever done list operations in other</span> <span data-start="967" data-end="968.17">languages obviously you're probably</span> <span data-start="968.17" data-end="969.52">familiar with map and it's very much the</span> <span data-start="969.52" data-end="972.07">same thing a list is actually this it's</span> <span data-start="972.07" data-end="974.38">a functor for all lists so that's all</span> <span data-start="974.38" data-end="976.51">its really doing here we so map becomes</span> <span data-start="976.51" data-end="977.86">our second bit so we have our two pieces</span> <span data-start="977.86" data-end="980.14">or two concrete pieces first the mapping</span> <span data-start="980.14" data-end="982.06">from the HTML objects to jQuery objects</span> <span data-start="982.06" data-end="985.149">and second a mapping from HTML morphisms</span> <span data-start="985.149" data-end="986.92">to jQuery morphisms okay so the last</span> <span data-start="986.92" data-end="990.31">thing is the WHA and this is the this is</span> <span data-start="990.31" data-end="991.45">there actually the really important part</span> <span data-start="991.45" data-end="994.36">this actually tells us almost everything</span> <span data-start="994.36" data-end="995.5">about the two categories we're gonna</span> <span data-start="995.5" data-end="998.23">care about so first remember we said</span> <span data-start="998.23" data-end="999.43">that when we smoosh these two things</span> <span data-start="999.43" data-end="1002.64">together using compose to get GAF that</span> <span data-start="1002.64" data-end="1004.38">that was functionally equivalent to the</span> <span data-start="1004.38" data-end="1006.839">chain right okay the functor law</span> <span data-start="1006.839" data-end="1009.57">requires that in the case that in the</span> <span data-start="1009.57" data-end="1012.36">case where we use the underlying HTML</span> <span data-start="1012.36" data-end="1014.64">morphism so again remember I said that</span> <span data-start="1014.64" data-end="1017.31">in jQuery methods inside them is sort of</span> <span data-start="1017.31" data-end="1020.16">living this HTML altering thing right so</span> <span data-start="1020.16" data-end="1021.57">if we pull that out and we stuck those</span> <span data-start="1021.57" data-end="1024.24">together by themselves and we map that</span> <span data-start="1024.24" data-end="1025.8">over the jQuery set that would actually</span> <span data-start="1025.8" data-end="1027.809">be functionally equivalent to gnf right</span> <span data-start="1027.809" data-end="1029.64">so it's the equivalent HTML morphism so</span> <span data-start="1029.64" data-end="1031.92">what this is saying is that and and</span> <span data-start="1031.92" data-end="1033.9">interestingly enough that top thing is</span> <span data-start="1033.9" data-end="1036.9">two loops and the bottom thing is one</span> <span data-start="1036.9" data-end="1039.3">loop so that's a loop fusion right so</span> <span data-start="1039.3" data-end="1042.03">and it's still bounded by n but that's</span> <span data-start="1042.03" data-end="1043.74">less loops which is good it's less</span> <span data-start="1043.74" data-end="1045.12">operating you're creating less heat in</span> <span data-start="1045.12" data-end="1047.819">your processor so to speak anyway that's</span> <span data-start="1047.819" data-end="1049.02">what it's saying it's saying that the</span> <span data-start="1049.02" data-end="1051.3">raw composition using a map is the same</span> <span data-start="1051.3" data-end="1052.77">thing as chaining those two methods</span> <span data-start="1052.77" data-end="1054.84">that's the law that it here's the law</span> <span data-start="1054.84" data-end="1059.16">that that's what you get for free more</span> <span data-start="1059.16" data-end="1061.2">broadly speaking what this is actually</span> <span data-start="1061.2" data-end="1062.55">saying is that there's a really kind of</span> <span data-start="1062.55" data-end="1064.65">tight relationship between the category</span> </p>
<p><span data-start="1064.65" data-end="1066.44">HTML in the category jQuery or</span> <span data-start="1066.44" data-end="1069.72">colloquially between stuff that</span> <span data-start="1069.72" data-end="1071.76">manipulates HTML and stuff that</span> <span data-start="1071.76" data-end="1073.11">manipulates jQuery objects which you I</span> <span data-start="1073.11" data-end="1074.46">think you kind of understand intuitively</span> <span data-start="1074.46" data-end="1077.429">so this functor that that takes HTML and</span> <span data-start="1077.429" data-end="1080.059">turns it into jQuery the morphisms</span> <span data-start="1080.059" data-end="1082.86">actually there's a set of them</span> <span data-start="1082.86" data-end="1084.72">that depend on jQuery right so we</span> <span data-start="1084.72" data-end="1086.61">remember we said that inside the jQuery</span> <span data-start="1086.61" data-end="1088.11">methods that alter so let's take ad</span> <span data-start="1088.11" data-end="1089.94">class for example and well while and I</span> <span data-start="1089.94" data-end="1091.5">have another class here I have another</span> <span data-start="1091.5" data-end="1093.48">example here a second inside that is</span> <span data-start="1093.48" data-end="1095.76">living something that alters HTML</span> <span data-start="1095.76" data-end="1097.62">elements right so it does two things</span> <span data-start="1097.62" data-end="1099.63">really it alters the jQuery object then</span> <span data-start="1099.63" data-end="1101.79">it also alters HTML elements so in some</span> <span data-start="1101.79" data-end="1103.799">on some level it's dependent on some</span> <span data-start="1103.799" data-end="1105.27">external thing that could just be</span> <span data-start="1105.27" data-end="1107.61">altering the HTML elements so that's the</span> <span data-start="1107.61" data-end="1108.96">relationship that we got here so a</span> <span data-start="1108.96" data-end="1110.4">little if you wanted to do kind of the</span> <span data-start="1110.4" data-end="1112.26">ghetto map version or math version of</span> <span data-start="1112.26" data-end="1115.5">this it would be map plus some these</span> <span data-start="1115.5" data-end="1117.69">morphisms these HTML altering functions</span> <span data-start="1117.69" data-end="1120.87">equals some subset of the jQuery methods</span> <span data-start="1120.87" data-end="1122.549">that you've used every day right so you</span> <span data-start="1122.549" data-end="1125.429">can get all of those from map plus the</span> </p>
<p><span data-start="1125.429" data-end="1127.26">HTML morphisms so that's the</span> <span data-start="1127.26" data-end="1130.77">relationship as an example so inside foo</span> <span data-start="1130.77" data-end="1133.11">now that we have map and this thing that</span> <span data-start="1133.11" data-end="1135.66">alters HTML elements like I said there's</span> <span data-start="1135.66" data-end="1137.76">tons of there's tons of methods that do</span> <span data-start="1137.76" data-end="1140.13">this so add class after HTML prop they</span> <span data-start="1140.13" data-end="1142.11">all look like this on the inside now it</span> <span data-start="1142.11" data-end="1143.01">might be a little bit different they</span> <span data-start="1143.01" data-end="1145.26">might use each they might use while that</span> <span data-start="1145.26" data-end="1146.669">might use a for loop to loop over the</span> <span data-start="1146.669" data-end="1148.95">jQuery set but they all do this and then</span> <span data-start="1148.95" data-end="1152.22">alter the underlying HTML element so if</span> <span data-start="1152.22" data-end="1153.96">they're doing remember that they're</span> <span data-start="1153.96" data-end="1155.07">doing all these three things together</span> <span data-start="1155.07" data-end="1157.32">which is bad but what we've said is that</span> <span data-start="1157.32" data-end="1158.82">this relationship means that we can</span> <span data-start="1158.82" data-end="1160.65">actually pull out that HTML part right</span> <span data-start="1160.65" data-end="1164.1">so the relationship the functor between</span> <span data-start="1164.1" data-end="1165.57">these two things is actually telling us</span> <span data-start="1165.57" data-end="1168.179">that we can take that basic underlying</span> <span data-start="1168.179" data-end="1171.059">alteration and then the jQuery method</span> <span data-start="1171.059" data-end="1172.95">can only deal with arguments and looping</span> <span data-start="1172.95" data-end="1175.679">and leave the alteration to the Foo okay</span> <span data-start="1175.679" data-end="1177.45">leave it to the HTML morphism so we've</span> <span data-start="1177.45" data-end="1179.61">actually the formalism the category</span> <span data-start="1179.61" data-end="1182.37">theory aside from giving us loop fusion</span> <span data-start="1182.37" data-end="1183.72">has also given us a way to better</span> <span data-start="1183.72" data-end="1185.669">architect jQuery at an underlying level</span> <span data-start="1185.669" data-end="1187.549">when you're manipulating the Dom okay</span> <span data-start="1187.549" data-end="1190.83">and that's awesome so we're really happy</span> <span data-start="1190.83" data-end="1192.66">because this sort of solved our problem</span> <span data-start="1192.66" data-end="1194.28">the formalism the application of the</span> <span data-start="1194.28" data-end="1195.929">formalism has sort of solved our problem</span> <span data-start="1195.929" data-end="1203.429">for us great so I've just spent ok so I</span> <span data-start="1203.429" data-end="1205.02">just spent 20 minutes convincing you</span> <span data-start="1205.02" data-end="1206.91">just to blindly follow me through math</span> <span data-start="1206.91" data-end="1208.74">and formalism right so let's talk about</span> <span data-start="1208.74" data-end="1211.32">why you actually care first of all a</span> <span data-start="1211.32" data-end="1213.9">common idiom in so let's let the suit</span> <span data-start="1213.9" data-end="1215.49">okay and and I need you to assume for a</span> <span data-start="1215.49" data-end="1216.27">moment one thing</span> <span data-start="1216.27" data-end="1219.059">let's assume for a moment that jQuery in</span> <span data-start="1219.059" data-end="1221.25">an alternate universe or let's say an</span> <span data-start="1221.25" data-end="1222.42">alternate universe where I came to</span> <span data-start="1222.42" data-end="1225.809">jQuery before a year ago and I got I got</span> <span data-start="1225.809" data-end="1227.52">all gung-ho about category theory and I</span> <span data-start="1227.52" data-end="1228.78">decided I'm gonna go to jQuery and</span> <span data-start="1228.78" data-end="1230.34">separate all these out so the jQuery was</span> <span data-start="1230.34" data-end="1231.72">now providing the underlying</span> <span data-start="1231.72" data-end="1234.059">manipulation not as a part of the jQuery</span> <span data-start="1234.059" data-end="1235.47">method but as a part of a separate thing</span> <span data-start="1235.47" data-end="1237.78">that gets used in the jQuery method so</span> <span data-start="1237.78" data-end="1239">what would you get out of this</span> <span data-start="1239" data-end="1241.47">first of all rewrapping so rewrapping is</span> <span data-start="1241.47" data-end="1244.14">a pretty common idiom in JavaScript that</span> <span data-start="1244.14" data-end="1246.24">uses jQuery right so if you bind to a</span> <span data-start="1246.24" data-end="1248.55">function if you when you want to get the</span> <span data-start="1248.55" data-end="1251.25">target of the like a an event you use</span> <span data-start="1251.25" data-end="1253.71">event dot target and that is actually an</span> <span data-start="1253.71" data-end="1256.17">underlying thing that's an HTML element</span> <span data-start="1256.17" data-end="1257.7">right so you end up rewrapping this I</span> <span data-start="1257.7" data-end="1259.08">think you could use this in this case</span> <span data-start="1259.08" data-end="1261.51">also but if you didn't have to do that</span> <span data-start="1261.51" data-end="1263.88">or if you had foo the thing that</span> <span data-start="1263.88" data-end="1265.679">manipulated HTML elements directly you</span> <span data-start="1265.679" data-end="1267.3">wouldn't have to rewrap it right you</span> <span data-start="1267.3" data-end="1269.429">could just call foo directly on the HTML</span> <span data-start="1269.429" data-end="1271.41">element right simple you can simplify</span> <span data-start="1271.41" data-end="1272.55">your code a little bit there's a little</span> <span data-start="1272.55" data-end="1274.77">less cruft not a big deal just something</span> <span data-start="1274.77" data-end="1276.84">to keep in mind so Fusion remember we</span> <span data-start="1276.84" data-end="1279.87">said that this law meant that a chain</span> <span data-start="1279.87" data-end="1281.67">was the same thing as composing the</span> <span data-start="1281.67" data-end="1284.179">underlying alteration right so an</span> <span data-start="1284.179" data-end="1286.95">example if you have to remove attributes</span> <span data-start="1286.95" data-end="1289.11">in a chain that's actually you can</span> <span data-start="1289.11" data-end="1291.36">actually fuse this manually and this is</span> <span data-start="1291.36" data-end="1294.059">manual loop fusion using the underlying</span> <span data-start="1294.059" data-end="1295.26">thing that alters elements because</span> <span data-start="1295.26" data-end="1298.83">remember each each loops over the set of</span> <span data-start="1298.83" data-end="1300.9">jQuery the jQuery said and gives you</span> <span data-start="1300.9" data-end="1303.03">each HTML element so you can then</span> <span data-start="1303.03" data-end="1304.95">manipulate that directly so now you've</span> <span data-start="1304.95" data-end="1306.72">gone from two loops to one loop which is</span> <span data-start="1306.72" data-end="1310.53">good you avoid doing you know variable</span> <span data-start="1310.53" data-end="1312.559">incrementing you do you avoid doing</span> <span data-start="1312.559" data-end="1314.52">array access and a whole host other</span> <span data-start="1314.52" data-end="1317.82">things which in and of itself isn't like</span> <span data-start="1317.82" data-end="1319.32">mind blowing and I don't expect you to</span> <span data-start="1319.32" data-end="1322.01">read that up there but the blue bar is</span> <span data-start="1322.01" data-end="1325.65">when you're using loop fusion when</span> <span data-start="1325.65" data-end="1327.42">you're using the fused version and the</span> <span data-start="1327.42" data-end="1328.679">red bar is when you're not so when</span> <span data-start="1328.679" data-end="1329.73">you're just doing change so there's a</span> <span data-start="1329.73" data-end="1331.89">performance benefit that huge but it's</span> <span data-start="1331.89" data-end="1335.94">there I'm gonna say it's between 10 and</span> <span data-start="1335.94" data-end="1338.4">15% it's not it's more like 5 but that's</span> <span data-start="1338.4" data-end="1340.559">fine so we get some performance benefit</span> <span data-start="1340.559" data-end="1341.82">out of doing the loop fusion so that</span> <span data-start="1341.82" data-end="1343.5">that has a benefit getting getting</span> <span data-start="1343.5" data-end="1345.27">access to that that underlying thing</span> <span data-start="1345.27" data-end="1348.83">allows you to kind of smoosh these loops</span> <span data-start="1348.83" data-end="1353.1">invocation so in in jQuery methods there</span> <span data-start="1353.1" data-end="1356.49">are almost always an enormous number of</span> <span data-start="1356.49" data-end="1358.26">invocation patterns that you can use to</span> <span data-start="1358.26" data-end="1361.02">work with the same method so one example</span> <span data-start="1361.02" data-end="1362.64">the one I always kind of use and it's</span> <span data-start="1362.64" data-end="1364.14">actually a pretty simple example is</span> <span data-start="1364.14" data-end="1366.36">remove attribute so this example is</span> <span data-start="1366.36" data-end="1368.73">functionally equivalent to this you can</span> <span data-start="1368.73" data-end="1370.23">either change two of them or you can use</span> <span data-start="1370.23" data-end="1372.72">a white space separated list of</span> <span data-start="1372.72" data-end="1374.73">attributes that you want to remove so</span> <span data-start="1374.73" data-end="1377.07">and that's cool because it means you can</span> <span data-start="1377.07" data-end="1378.96">call remove attribute less but there's a</span> <span data-start="1378.96" data-end="1380.88">price to pay for doing that string</span> <span data-start="1380.88" data-end="1382.23">parsing right and then removing the</span> <span data-start="1382.23" data-end="1384.57">attributes okay that's not for free part</span> <span data-start="1384.57" data-end="1386.13">of jQuery is bent is that it has always</span> <span data-start="1386.13" data-end="1387.63">been about ease of use and not</span> <span data-start="1387.63" data-end="1388.95">necessarily always about performance but</span> <span data-start="1388.95" data-end="1389.76">those thing kind of things have a</span> <span data-start="1389.76" data-end="1393.3">trade-off right so if you just go in to</span> <span data-start="1393.3" data-end="1395.01">remove attribute and you tear out that</span> <span data-start="1395.01" data-end="1397.71">feature you get a pretty big performance</span> <span data-start="1397.71" data-end="1399.42">win in this case I'm gonna go ahead and</span> <span data-start="1399.42" data-end="1402.18">say it's twenty percent but it you can</span> <span data-start="1402.18" data-end="1404.82">see okay the the unfriendly version of</span> <span data-start="1404.82" data-end="1407.07">remove attribute is the red bar okay and</span> <span data-start="1407.07" data-end="1408.66">the friendly one is the the blue bar</span> <span data-start="1408.66" data-end="1411.48">it's faster okay it's better in terms of</span> <span data-start="1411.48" data-end="1413.16">performance now it's not better in terms</span> <span data-start="1413.16" data-end="1415.29">of usability right but if we if we</span> <span data-start="1415.29" data-end="1418.08">provided that remove attribute to</span> <span data-start="1418.08" data-end="1419.85">manipulate Dom elements and we just left</span> <span data-start="1419.85" data-end="1421.77">off all the invocation patterns you get</span> <span data-start="1421.77" data-end="1424.59">the performance benefit and you wouldn't</span> <span data-start="1424.59" data-end="1426.63">lose the other invocation pattern it's</span> <span data-start="1426.63" data-end="1429.3">just sort of a new new a newly exposed</span> </p>
<p><span data-start="1429.3" data-end="1431.39">API it wouldn't even increase the size</span> <span data-start="1431.39" data-end="1433.92">so that's one other benefit is</span> <span data-start="1433.92" data-end="1435.87">simplifying the manipulation of Dom</span> <span data-start="1435.87" data-end="1437.79">elements when you don't because you're</span> <span data-start="1437.79" data-end="1439.77">paying the if you're using jQuery and</span> <span data-start="1439.77" data-end="1442.23">you just use the chain version you're</span> <span data-start="1442.23" data-end="1443.82">paying the price for the other version</span> <span data-start="1443.82" data-end="1447.06">in terms of performance okay so what you</span> <span data-start="1447.06" data-end="1448.08">ideally would want to do is leave that</span> <span data-start="1448.08" data-end="1449.82">in place and provide a second API in</span> <span data-start="1449.82" data-end="1452.3">terms of the underlying HTML morphism</span> <span data-start="1452.3" data-end="1455.61">dog food inside jQuery there are tons of</span> <span data-start="1455.61" data-end="1457.47">methods that use other jQuery methods</span> <span data-start="1457.47" data-end="1459.06">for example and this is a very simple</span> <span data-start="1459.06" data-end="1461.19">example or simplified version of it but</span> <span data-start="1461.19" data-end="1464.31">replaced with uses at least two other</span> <span data-start="1464.31" data-end="1466.92">jQuery methods so it uses before and</span> <span data-start="1466.92" data-end="1468.9">remove or a pendant remove that means</span> <span data-start="1468.9" data-end="1471.48">that as if you optimize these things</span> <span data-start="1471.48" data-end="1473.73">there's or if you were to use the</span> <span data-start="1473.73" data-end="1475.95">underlying simplified version inside of</span> <span data-start="1475.95" data-end="1477.81">jQuery methods even just not exposing it</span> <span data-start="1477.81" data-end="1479.58">at all let's say we just decided to</span> <span data-start="1479.58" data-end="1481.71">react attack jQuery the jQuery methods</span> <span data-start="1481.71" data-end="1482.61">like this by them</span> <span data-start="1482.61" data-end="1484.44">selves you would actually see a</span> <span data-start="1484.44" data-end="1488.16">performance benefit faster the the split</span> <span data-start="1488.16" data-end="1490.17">version is on the bottom it's the red</span> <span data-start="1490.17" data-end="1492">and it's faster than the blue version</span> <span data-start="1492" data-end="1493.71">above it so you get you get a</span> <span data-start="1493.71" data-end="1495.179">performance benefit without actually</span> <span data-start="1495.179" data-end="1496.71">even providing anything new to anyone</span> <span data-start="1496.71" data-end="1498.6">else so jQuery would benefit this from</span> <span data-start="1498.6" data-end="1502.17">this in terms of performance laughs and</span> <span data-start="1502.17" data-end="1504.66">probably most importantly if you need a</span> <span data-start="1504.66" data-end="1506.88">performance escape hatch in your jQuery</span> <span data-start="1506.88" data-end="1508.74">code for whatever reason now I want to I</span> <span data-start="1508.74" data-end="1510.66">want to caveat most of this right now</span> <span data-start="1510.66" data-end="1513.09">with one thing most JavaScript</span> <span data-start="1513.09" data-end="1515.24">performance problems in the browser are</span> <span data-start="1515.24" data-end="1517.559">almost entirely due to things like</span> <span data-start="1517.559" data-end="1519.84">reflows and Dom manipulation all</span> </p>
<p><span data-start="1519.84" data-end="1520.98">JavaScript spends most of its time</span> <span data-start="1520.98" data-end="1522.78">inside the browser the execution time is</span> <span data-start="1522.78" data-end="1524.49">inside the browser it's not at the</span> <span data-start="1524.49" data-end="1526.71">JavaScript level and so that's why I</span> <span data-start="1526.71" data-end="1528.9">want to say before you run out and tell</span> <span data-start="1528.9" data-end="1530.429">everyone that we can fix the the world's</span> <span data-start="1530.429" data-end="1531.75">problems with these things that has to</span> <span data-start="1531.75" data-end="1533.01">be taken into consideration right at</span> <span data-start="1533.01" data-end="1534.09">some point javascript may actually</span> <span data-start="1534.09" data-end="1536.28">become bottleneck for you but most the</span> <span data-start="1536.28" data-end="1538.53">time it's in the Dom so before before I</span> <span data-start="1538.53" data-end="1539.85">give you a big performance number which</span> <span data-start="1539.85" data-end="1542.25">this is I wanted to caveat that so if we</span> <span data-start="1542.25" data-end="1544.38">if we expose this thing and you needed</span> <span data-start="1544.38" data-end="1546.809">it as a performance escape hatch for</span> <span data-start="1546.809" data-end="1548.79">example if you're doing a bunch of</span> <span data-start="1548.79" data-end="1550.89">element appending in your your your</span> <span data-start="1550.89" data-end="1554.07">jQuery code and this for whatever reason</span> <span data-start="1554.07" data-end="1556.59">was slowing down what you were doing you</span> <span data-start="1556.59" data-end="1559.38">could take this and convert it into a</span> <span data-start="1559.38" data-end="1561.72">while loop using the underlying append</span> <span data-start="1561.72" data-end="1563.94">right so the the previous example just</span> <span data-start="1563.94" data-end="1565.559">uses regular jQuery append right works</span> <span data-start="1565.559" data-end="1567.27">on a jQuery object the underlying one</span> <span data-start="1567.27" data-end="1569.88">requires HTML elements so if you do this</span> <span data-start="1569.88" data-end="1572.61">with like a tight while loop and you</span> <span data-start="1572.61" data-end="1574.83">take the if you extract the elements out</span> <span data-start="1574.83" data-end="1576.6">of the jquery set and then you append</span> <span data-start="1576.6" data-end="1577.799">whatever element you're appending</span> <span data-start="1577.799" data-end="1579.84">manually using this append you get a</span> <span data-start="1579.84" data-end="1582.75">gigantic performance improvement okay</span> <span data-start="1582.75" data-end="1583.86">and this is what I mean in terms of an</span> <span data-start="1583.86" data-end="1586.65">escape hatch now I don't know what the I</span> <span data-start="1586.65" data-end="1587.85">don't know what the percentage is I</span> <span data-start="1587.85" data-end="1589.11">think you're I think you can tell that</span> <span data-start="1589.11" data-end="1590.85">that's a big difference so the big one</span> <span data-start="1590.85" data-end="1592.32">at the top is the simplified one that</span> <span data-start="1592.32" data-end="1595.59">just uses the HTML morphism directly so</span> <span data-start="1595.59" data-end="1597.53">that's really pretty awesome again</span> <span data-start="1597.53" data-end="1599.94">assuming your bottleneck is in that</span> <span data-start="1599.94" data-end="1602.91">append it's really awesome and I think</span> <span data-start="1602.91" data-end="1605.4">that that's it's you know it's a single</span> <span data-start="1605.4" data-end="1606.78">threaded runtime you can always shave</span> <span data-start="1606.78" data-end="1608.28">some time off but how much time do you</span> <span data-start="1608.28" data-end="1609.6">want to spend on it personally and this</span> <span data-start="1609.6" data-end="1610.59">is something that I've discussed with</span> <span data-start="1610.59" data-end="1612.179">the folks in the jquery project too is</span> <span data-start="1612.179" data-end="1613.59">that they have a lot of things that they</span> <span data-start="1613.59" data-end="1614.79">need to do so it doesn't necessarily</span> <span data-start="1614.79" data-end="1615.78">make sense for them to spend all their</span> <span data-start="1615.78" data-end="1616.44">time on this</span> <span data-start="1616.44" data-end="1618.03">when most bottlenecks live outside of</span> <span data-start="1618.03" data-end="1621.87">the code so in light of the fact that</span> <span data-start="1621.87" data-end="1624">this is actually pretty cool and then I</span> <span data-start="1624" data-end="1624.87">like the idea</span> <span data-start="1624.87" data-end="1627.15">clearly I'm here presenting about it and</span> <span data-start="1627.15" data-end="1629.67">it doesn't seem like something that's</span> <span data-start="1629.67" data-end="1631.23">really reasonable for jQuery to do up</span> <span data-start="1631.23" data-end="1633.27">front I i work on the jquery team so i</span> <span data-start="1633.27" data-end="1634.68">have contact with the jquery core folks</span> <span data-start="1634.68" data-end="1636.12">if they have a lot of stuff on their</span> <span data-start="1636.12" data-end="1638.04">plate so I decided what I'm gonna do is</span> </p>
<p><span data-start="1638.04" data-end="1639.36">I'm gonna do this myself I'm gonna</span> <span data-start="1639.36" data-end="1640.62">provide it as a separate library I'm</span> <span data-start="1640.62" data-end="1642.03">basically gonna steal the code out of</span> <span data-start="1642.03" data-end="1644.07">jQuery and provide those underlying</span> <span data-start="1644.07" data-end="1646.56">manipulations as sort of a Dom</span> <span data-start="1646.56" data-end="1648.66">manipulation macro set of macros just</span> <span data-start="1648.66" data-end="1650.43">some functions that make manipulation</span> <span data-start="1650.43" data-end="1652.02">easier if you don't need anything else</span> <span data-start="1652.02" data-end="1655.08">from jQuery also I have to give credit</span> <span data-start="1655.08" data-end="1658.02">to the folks who made Gilmore's this is</span> <span data-start="1658.02" data-end="1660.75">one of their images I think it's a great</span> <span data-start="1660.75" data-end="1664.35">picture fits with this slide so I also</span> <span data-start="1664.35" data-end="1668.07">don't want to get sued for using it so</span> <span data-start="1668.07" data-end="1669.18">this is available on github</span> </p>
<p><span data-start="1669.18" data-end="1671.82">I'm not hitting the cat I wasn't even</span> <span data-start="1671.82" data-end="1673.05">sure I wanted to do this when you guys</span> <span data-start="1673.05" data-end="1675.05">sent out the email about hitting the cat</span> <span data-start="1675.05" data-end="1677.28">it's not private anymore actually it's</span> <span data-start="1677.28" data-end="1678.69">public and you can take a look at it and</span> <span data-start="1678.69" data-end="1679.5">play around with it there's a couple</span> <span data-start="1679.5" data-end="1681.21">things that it's meant to do first of</span> <span data-start="1681.21" data-end="1683.34">all it's focused the goal is not to do</span> <span data-start="1683.34" data-end="1685.83">anything other than make very Dom</span> <span data-start="1685.83" data-end="1688.38">manipulation methods using the names</span> <span data-start="1688.38" data-end="1689.79">that you're used to from using jQuery</span> <span data-start="1689.79" data-end="1691.41">okay so the idea is that there's</span> <span data-start="1691.41" data-end="1692.91">supposed to be a pretty close one to one</span> <span data-start="1692.91" data-end="1694.44">relationship so when you say I want to</span> <span data-start="1694.44" data-end="1695.58">empty something you don't have to think</span> <span data-start="1695.58" data-end="1696.69">about what the name of the method is</span> <span data-start="1696.69" data-end="1698.85">right it's just empty and they're</span> <span data-start="1698.85" data-end="1700.76">provided just as methods by themselves</span> <span data-start="1700.76" data-end="1703.29">and generally speaking they return the</span> <span data-start="1703.29" data-end="1704.67">element that they're manipulating so you</span> <span data-start="1704.67" data-end="1706.73">can do that composition if you want to</span> <span data-start="1706.73" data-end="1709.86">it's functional so you know I am</span> <span data-start="1709.86" data-end="1711.6">providing the goal is just to provide</span> <span data-start="1711.6" data-end="1713.01">the method sort of the internals of</span> <span data-start="1713.01" data-end="1715.83">jQuery and sort of expose them but I'm</span> <span data-start="1715.83" data-end="1717.96">not you know crazy I think if you wanted</span> <span data-start="1717.96" data-end="1719.28">to use this as a standard library I'm</span> <span data-start="1719.28" data-end="1721.23">kind of trying to make that possible so</span> <span data-start="1721.23" data-end="1722.7">first of all for most there's a</span> <span data-start="1722.7" data-end="1724.14">namespace under which all these methods</span> <span data-start="1724.14" data-end="1725.94">live okay so you're just empty the</span> <span data-start="1725.94" data-end="1727.26">element it's very simple and it's</span> <span data-start="1727.26" data-end="1729.21">functional it's you just pass the things</span> <span data-start="1729.21" data-end="1731.16">in there's no objects it's not</span> <span data-start="1731.16" data-end="1733.26">object-oriented it's just a method you</span> <span data-start="1733.26" data-end="1735.42">can otherwise you can wrap it in a dhama</span> <span data-start="1735.42" data-end="1738.36">and in a in a wheeled Dom object and</span> <span data-start="1738.36" data-end="1740.64">then do things like chaining so there's</span> <span data-start="1740.64" data-end="1742.17">a nice kind of fluent interface if</span> <span data-start="1742.17" data-end="1743.22">that's what you feel like doing if you</span> <span data-start="1743.22" data-end="1744.69">want to use the Sustainable library and</span> <span data-start="1744.69" data-end="1746.91">lastly there's a very simple selecting</span> <span data-start="1746.91" data-end="1748.47">interface it defaults to query selector</span> <span data-start="1748.47" data-end="1750.3">where it's supported but you can plug in</span> <span data-start="1750.3" data-end="1751.26">things like</span> <span data-start="1751.26" data-end="1752.94">in this case is everybody know what</span> <span data-start="1752.94" data-end="1755.28">sizzle is okay so for those that you</span> <span data-start="1755.28" data-end="1757.5">don't at a jQuery selection engine it's</span> <span data-start="1757.5" data-end="1758.88">called sizzle and it's provided as a</span> <span data-start="1758.88" data-end="1760.35">separate library just gets used in</span> <span data-start="1760.35" data-end="1764.07">jQuery it's modular so every single one</span> <span data-start="1764.07" data-end="1767.22">of the methods I think this is old but</span> <span data-start="1767.22" data-end="1769.29">there's like 17 or 18 methods right now</span> <span data-start="1769.29" data-end="1770.64">they'll probably be more every single</span> <span data-start="1770.64" data-end="1772.68">one of them is an AMD module so I and</span> <span data-start="1772.68" data-end="1774.27">this is more for the build that I have</span> <span data-start="1774.27" data-end="1776.46">in place to to constructed and provided</span> <span data-start="1776.46" data-end="1778.2">as a single file but you don't have to</span> <span data-start="1778.2" data-end="1779.43">you don't have to keep any of them right</span> </p>
<p><span data-start="1779.43" data-end="1781.02">I wanted to see its kind of experimented</span> <span data-start="1781.02" data-end="1783.57">in radical modularity it's well tested</span> <span data-start="1783.57" data-end="1786.39">so I have a fork of jQuery where this is</span> <span data-start="1786.39" data-end="1787.77">actually being used in each of the</span> <span data-start="1787.77" data-end="1789.69">methods that they're mapped to so and I</span> <span data-start="1789.69" data-end="1791.13">runs and it runs in the test suite</span> <span data-start="1791.13" data-end="1793.32">jQuery test suite in passes so that was</span> <span data-start="1793.32" data-end="1794.79">one of my goals I want it to be jQuery</span> <span data-start="1794.79" data-end="1800.12">but not jQuery sort of its small</span> <span data-start="1800.12" data-end="1802.41">smallish I haven't made any effort at</span> <span data-start="1802.41" data-end="1803.55">all to keep it small in terms of</span> <span data-start="1803.55" data-end="1806.309">minification but with the Dom stuff like</span> <span data-start="1806.309" data-end="1808.62">the user friendly stuff it's about 1.5 K</span> <span data-start="1808.62" data-end="1810.87">and it's about 1.2 K with howdini the</span> <span data-start="1810.87" data-end="1812.04">user friendly stuff so the jQuery</span> <span data-start="1812.04" data-end="1812.94">version of this it's probably a little</span> <span data-start="1812.94" data-end="1814.83">bit less than that and it's some point</span> </p>
<p><span data-start="1814.83" data-end="1816.27">I'll go through and make it smaller I'll</span> <span data-start="1816.27" data-end="1817.44">- I'll make a pass to make it a little</span> <span data-start="1817.44" data-end="1818.94">bit tinier and it might get a little bit</span> <span data-start="1818.94" data-end="1822.21">bigger because I add methods lastly if</span> <span data-start="1822.21" data-end="1823.86">you're interested in in more of this I</span> <span data-start="1823.86" data-end="1826.38">have obviously Weald is on github you</span> <span data-start="1826.38" data-end="1828.15">can find it under my name space that's</span> <span data-start="1828.15" data-end="1830.85">the link my blog has other really nerdy</span> <span data-start="1830.85" data-end="1832.26">stuff about category theory so there's</span> <span data-start="1832.26" data-end="1833.55">actually a natural transformation that</span> <span data-start="1833.55" data-end="1835.02">lives inside of jQuery which is kind of</span> <span data-start="1835.02" data-end="1836.46">cool there's almost no benefit from it</span> <span data-start="1836.46" data-end="1838.65">but it's fun anyway</span> <span data-start="1838.65" data-end="1842.61">and I am sort of getting this together</span> <span data-start="1842.61" data-end="1844.83">in terms of like writing a paper about</span> <span data-start="1844.83" data-end="1847.47">it I have no illusions about it ever</span> <span data-start="1847.47" data-end="1848.4">getting published but there is</span> <span data-start="1848.4" data-end="1850.17">performance information there there's a</span> <span data-start="1850.17" data-end="1852.15">lot of links to J's perf there if you're</span> <span data-start="1852.15" data-end="1855.27">interested and that is category theory</span> <span data-start="1855.27" data-end="1860.62">and jQuery</span> </p>
</section>