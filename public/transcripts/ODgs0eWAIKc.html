<section>
<p><span data-start="17.61" data-end="20.3">thanks for coming down here everybody</span> <span data-start="20.3" data-end="23.07">we're from Bloomberg we got four guys</span> <span data-start="23.07" data-end="24.99">here we're going to be presenting what</span> <span data-start="24.99" data-end="28.14">we do with JavaScript we haven't really</span> <span data-start="28.14" data-end="30.39">talked about anything we we do publicly</span> <span data-start="30.39" data-end="33.12">before and we figured it would be a good</span> <span data-start="33.12" data-end="35.1">idea just to kind of show the JavaScript</span> <span data-start="35.1" data-end="37.38">community what we do every day at work</span> <span data-start="37.38" data-end="44.89">which involves a lot of JavaScript so</span> <span data-start="44.9" data-end="48.239">thank you so as you see homegrown</span> <span data-start="48.239" data-end="50.7">server-side scripting so what we do you</span> <span data-start="50.7" data-end="52.53">know as this implies we do a lot of</span> <span data-start="52.53" data-end="55.17">server-side script so first off about me</span> <span data-start="55.17" data-end="57.39">if you looked at the schedule I am not</span> <span data-start="57.39" data-end="59.79">arming I am ng prep rocky Armand is</span> <span data-start="59.79" data-end="63.87">right there so I'm a programmer nardi</span> <span data-start="63.87" data-end="66.78">been there for eight years I work on</span> <span data-start="66.78" data-end="69.06">core infrastructure and making rd</span> <span data-start="69.06" data-end="71.43">productive which is one of the key</span> <span data-start="71.43" data-end="72.63">points here because that's where</span> <span data-start="72.63" data-end="76.53">javascript has helped us a lot so how</span> <span data-start="76.53" data-end="78.3">many people here have heard of Bloomberg</span> <span data-start="78.3" data-end="81.69">before okay so is that how many people</span> <span data-start="81.69" data-end="83.34">fur to Bloomberg because of the TV</span> <span data-start="83.34" data-end="86.909">station or the radio station okay that's</span> <span data-start="86.909" data-end="90.59">good so first employee is Mike Bloomberg</span> <span data-start="90.59" data-end="93.45">he's now the mayor of New York City they</span> <span data-start="93.45" data-end="95.34">wrote the first line of code in 1981</span> <span data-start="95.34" data-end="97.85">that was way before Windows even existed</span> <span data-start="97.85" data-end="100.11">the TV station didn't start until</span> <span data-start="100.11" data-end="101.79">nineteen ninety-four I say this because</span> <span data-start="101.79" data-end="103.71">a lot of people just they view our</span> <span data-start="103.71" data-end="105.869">company as a media company and not as a</span> <span data-start="105.869" data-end="108.09">software company so we want to get</span> <span data-start="108.09" data-end="110.07">across that you know we have a lot of</span> <span data-start="110.07" data-end="112.68">code you know that when the TV station</span> <span data-start="112.68" data-end="114.869">started we've been writing code for 13</span> <span data-start="114.869" data-end="116.909">years already and as of right now we</span> <span data-start="116.909" data-end="120.619">have 30 years of code in our code base</span> <span data-start="120.619" data-end="123.96">that's a lot of code and to let</span> <span data-start="123.96" data-end="125.939">everybody know we have thousands of</span> <span data-start="125.939" data-end="127.92">programmers you know it's a lot of</span> <span data-start="127.92" data-end="129.209">people don't know that if you don't know</span> <span data-start="129.209" data-end="130.86">anything about the financial world but</span> <span data-start="130.86" data-end="134.04">in our offices in New York London and</span> <span data-start="134.04" data-end="137.459">even Tokyo we have a lot of people and</span> <span data-start="137.459" data-end="140.37">making those people productive saves you</span> <span data-start="140.37" data-end="142.23">know e equals real dollars to the</span> <span data-start="142.23" data-end="148.34">company</span> <span data-start="148.35" data-end="152.37">so let's talk about code for a second</span> <span data-start="152.37" data-end="155.2">coat accumulates over time the more</span> <span data-start="155.2" data-end="156.7">programmers you have the faster it</span> <span data-start="156.7" data-end="159.31">accumulates and this is especially true</span> <span data-start="159.31" data-end="161.5">of compiled code you wind up with tons</span> <span data-start="161.5" data-end="164.92">of code and what we found is that makes</span> <span data-start="164.92" data-end="167.95">your company very very slow when I first</span> <span data-start="167.95" data-end="169.96">started there about eight years ago the</span> <span data-start="169.96" data-end="172.6">the development cycle like it almost</span> <span data-start="172.6" data-end="175.21">felt like a sweatshop because the work</span> <span data-start="175.21" data-end="177.4">that people did there like compiling all</span> <span data-start="177.4" data-end="178.72">this code going through this like</span> <span data-start="178.72" data-end="180.97">laborious cycle of testing things and</span> <span data-start="180.97" data-end="183.76">rolling things out it really made people</span> <span data-start="183.76" data-end="187.06">not like their jobs and it also took up</span> <span data-start="187.06" data-end="190.45">a large amount at a time so the other</span> <span data-start="190.45" data-end="192.07">part of this is that not everybody can</span> <span data-start="192.07" data-end="194.35">write clean compiled code I mean you</span> <span data-start="194.35" data-end="196.03">guys see just even in the JavaScript</span> <span data-start="196.03" data-end="197.47">world like what the difference is</span> <span data-start="197.47" data-end="198.82">between good JavaScript and bad</span> </p>
<p><span data-start="198.82" data-end="201.22">JavaScript now you extend extend that to</span> <span data-start="201.22" data-end="204.46">c c++ even Fortran whatever anything</span> <span data-start="204.46" data-end="206.53">compiled and you have all kinds of</span> <span data-start="206.53" data-end="208.18">issues that you wouldn't even have in</span> <span data-start="208.18" data-end="210.37">JavaScript like memory corruption memory</span> <span data-start="210.37" data-end="212.14">leaks things like that and and when you</span> <span data-start="212.14" data-end="214.69">have 30 years of code accumulated that</span> <span data-start="214.69" data-end="216.48">stuff can be fatal to your company here</span> <span data-start="216.48" data-end="219.85">so we discovered that JavaScript makes</span> <span data-start="219.85" data-end="223.57">people productive so about five years</span> <span data-start="223.57" data-end="228.73">ago we decided to use JavaScript to</span> <span data-start="228.73" data-end="234.97">write all of our app UI glue we the</span> <span data-start="234.97" data-end="236.77">infrastructure team we build complex</span> <span data-start="236.77" data-end="239.35">bindings that hook into like all of the</span> <span data-start="239.35" data-end="241.03">all the legacy Bloomberg infrastructure</span> <span data-start="241.03" data-end="243.22">and for the most part app development</span> <span data-start="243.22" data-end="245.79">teams are focused on writing product and</span> <span data-start="245.79" data-end="249.43">they write JavaScript that's like a</span> <span data-start="249.43" data-end="251.02">thousand two thousand plus people</span> <span data-start="251.02" data-end="252.61">writing Java server side JavaScript</span> <span data-start="252.61" data-end="256.109">every day in order to make this</span> <span data-start="256.109" data-end="258.91">realistic you need a complete end-to-end</span> <span data-start="258.91" data-end="262.15">solution you can't depend on piecemeal</span> <span data-start="262.15" data-end="263.86">things that kind of work together or</span> <span data-start="263.86" data-end="266.11">having a complex workflow that you have</span> <span data-start="266.11" data-end="268.75">to teach to every new person come in</span> <span data-start="268.75" data-end="270.64">coming in you have to make every person</span> <span data-start="270.64" data-end="272.35">productive from almost the moment they</span> <span data-start="272.35" data-end="275.75">start so what we wound up developing</span> <span data-start="275.75" data-end="279.11">is you know you can kind of think of it</span> <span data-start="279.11" data-end="283.61">as like a grandfather to nodejs back in</span> <span data-start="283.61" data-end="287.3">2005 we made this switch and we have</span> <span data-start="287.3" data-end="289.01">everything that goes along with this to</span> <span data-start="289.01" data-end="290.57">make people too productive we built our</span> <span data-start="290.57" data-end="293.42">own desktop ide we have an entire</span> <span data-start="293.42" data-end="295.01">deployment system with permission</span> <span data-start="295.01" data-end="298.01">handling roll out back outs exception</span> <span data-start="298.01" data-end="300.2">handling routing errors to the right</span> <span data-start="300.2" data-end="303.95">people debuggers memory debuggers code</span> <span data-start="303.95" data-end="305.75">profilers all of this stuff is built</span> <span data-start="305.75" data-end="307.82">into our environment and it all works</span> <span data-start="307.82" data-end="312.29">around jas so like I said in 2005 we</span> <span data-start="312.29" data-end="314.84">started with spider monkey we decided to</span> <span data-start="314.84" data-end="316.64">go with spider monkey because at the</span> <span data-start="316.64" data-end="318.41">time in 2005 that was really the only</span> <span data-start="318.41" data-end="321.95">the only good option and at the time it</span> <span data-start="321.95" data-end="325.16">was about spider monkey 1.6 which if you</span> <span data-start="325.16" data-end="326.87">guys use spider monkey at all if anybody</span> <span data-start="326.87" data-end="328.25">here works on server side stuff it's</span> <span data-start="328.25" data-end="334.99">pretty old now we decided to go with an</span> <span data-start="334.99" data-end="338.66">object-based UI toolkit to a lot of</span> <span data-start="338.66" data-end="341.15">people this will be familiar because it</span> <span data-start="341.15" data-end="343.58">actually started out as GDK it started</span> <span data-start="343.58" data-end="345.41">out as like the general concept of GDK</span> <span data-start="345.41" data-end="348.25">of course it was completely carved out</span> <span data-start="348.25" data-end="350.9">the the guts were taken out of it and</span> <span data-start="350.9" data-end="352.64">replaced with all of the code that we</span> <span data-start="352.64" data-end="354.29">needed in order to make it work in our</span> <span data-start="354.29" data-end="357.23">client server environment but the idea</span> <span data-start="357.23" data-end="359">remains the same it's a GUI tool kit</span> <span data-start="359" data-end="364.22">built around G object I doubt anybody I</span> <span data-start="364.22" data-end="365.84">mean some maybe some people in here I've</span> <span data-start="365.84" data-end="368.06">heard of gob I'll you'll see an example</span> <span data-start="368.06" data-end="370.91">of it later gob was a small project that</span> <span data-start="370.91" data-end="373.16">somebody made on the internet it isn't</span> <span data-start="373.16" data-end="376.1">really used anymore but it it was</span> <span data-start="376.1" data-end="378.2">something that we actually wanted it was</span> <span data-start="378.2" data-end="380.72">a way to write effective G object code</span> <span data-start="380.72" data-end="384.53">without all the croft and all the it's</span> <span data-start="384.53" data-end="386.12">really tedious like lots and lots of</span> <span data-start="386.12" data-end="387.59">lines of c in order just to write a</span> <span data-start="387.59" data-end="390.2">simple object gob kind of hides that all</span> <span data-start="390.2" data-end="392.45">the way and it's a preprocessor that</span> <span data-start="392.45" data-end="394.25">just generates the G object code and</span> <span data-start="394.25" data-end="395.18">what you're left with is like a</span> <span data-start="395.18" data-end="397.82">basically a c-sharp like syntax you</span> <span data-start="397.82" data-end="401.78">declare classes your properties signals</span> <span data-start="401.78" data-end="404.27">things like this and when you use the</span> <span data-start="404.27" data-end="405.79">preprocessor it actual</span> <span data-start="405.79" data-end="409.54">looks pretty nice we had to implement</span> <span data-start="409.54" data-end="411.79">our own equivalent G object</span> <span data-start="411.79" data-end="413.8">introspection layer so when we took G</span> <span data-start="413.8" data-end="416.44">object G object was just G object the</span> <span data-start="416.44" data-end="418.72">gnome community didn't have any work in</span> <span data-start="418.72" data-end="421.9">there related to introspecting these</span> <span data-start="421.9" data-end="424.45">things or hooking it up to scripting</span> <span data-start="424.45" data-end="425.83">languages they were just starting to</span> <span data-start="425.83" data-end="428.71">mess around with serious Python</span> <span data-start="428.71" data-end="432.1">integration stuff like that G object</span> <span data-start="432.1" data-end="433.75">introspection was actually started the</span> <span data-start="433.75" data-end="436.72">same year that we did this but we</span> <span data-start="436.72" data-end="438.91">essentially forked at that time you know</span> <span data-start="438.91" data-end="440.17">even though we're built on top of G</span> <span data-start="440.17" data-end="442.09">object it's everything it's been all</span> <span data-start="442.09" data-end="445.3">hacked now to to work the way we wanted</span> <span data-start="445.3" data-end="447.85">to so we're no longer really derived</span> <span data-start="447.85" data-end="450.43">from that you know we we can't take any</span> <span data-start="450.43" data-end="451.78">of their code anymore because it just</span> <span data-start="451.78" data-end="455.71">doesn't apply to our code base we had to</span> <span data-start="455.71" data-end="457.51">implement our own equivalent of ggas</span> <span data-start="457.51" data-end="459.7">which is a fairly recent project which</span> <span data-start="459.7" data-end="462.31">came about at the same time that all of</span> <span data-start="462.31" data-end="464.41">this server-side scripting stuff started</span> <span data-start="464.41" data-end="467.23">to pick off pick up that project started</span> <span data-start="467.23" data-end="469.48">in 08 and again we have this completed</span> <span data-start="469.48" data-end="473.41">in 05 so give you an example of what</span> <span data-start="473.41" data-end="475.42">some of this stuff looks like this is</span> <span data-start="475.42" data-end="478">gob syntax if you've anybody here</span> <span data-start="478" data-end="479.53">programs in c-sharp you know you'll see</span> <span data-start="479.53" data-end="482.98">that this looks pretty similar the as</span> <span data-start="482.98" data-end="485.01">far as the outer class definition goes</span> <span data-start="485.01" data-end="487.66">inside the curly braces to still see</span> <span data-start="487.66" data-end="490.9">your C++ but we really we liked the idea</span> <span data-start="490.9" data-end="493.96">of gob and so we took gob and kind of</span> <span data-start="493.96" data-end="497.95">made it our own we used the open-source</span> <span data-start="497.95" data-end="500.92">one that exists for a little while but</span> <span data-start="500.92" data-end="503.62">it had a lot of things that were missing</span> <span data-start="503.62" data-end="505.99">so we decided to reimplement our own so</span> <span data-start="505.99" data-end="508.09">we had a guy that wrote our own in oak</span> <span data-start="508.09" data-end="510.55">camo and now it's a lot more complex we</span> <span data-start="510.55" data-end="513.07">have support for C sharp type attributes</span> <span data-start="513.07" data-end="515.68">and lots of other nice language features</span> <span data-start="515.68" data-end="519.34">that again just all preprocess into C</span> <span data-start="519.34" data-end="522.79">code that's built around G object so</span> <span data-start="522.79" data-end="526.18">this this is what my group does we write</span> <span data-start="526.18" data-end="528.01">a lot of these objects we we have a team</span> <span data-start="528.01" data-end="530.32">core team that builds all these things</span> <span data-start="530.32" data-end="534.25">and the app developers use all this so</span> <span data-start="534.25" data-end="536.17">here's an example of this previous</span> <span data-start="536.17" data-end="537.34">object</span> <span data-start="537.34" data-end="539.56">you wrap it and because of the generic</span> <span data-start="539.56" data-end="541.93">bindings which are equivalent to jjs it</span> <span data-start="541.93" data-end="544.51">shows up in JavaScript like this and you</span> <span data-start="544.51" data-end="546.22">can see that you know the bindings are</span> <span data-start="546.22" data-end="548.8">can be pretty smart whatever logic you</span> <span data-start="548.8" data-end="551.86">want to bake in there you can we we want</span> <span data-start="551.86" data-end="555.07">to catch errors before they occur so you</span> <span data-start="555.07" data-end="556.93">know when if you if an object if a</span> <span data-start="556.93" data-end="558.67">native code object takes an integer and</span> <span data-start="558.67" data-end="560.65">it gets something that's that can't fit</span> <span data-start="560.65" data-end="562.06">inside of an integer it's going to throw</span> <span data-start="562.06" data-end="564.07">rather than trying to coerce it or clamp</span> <span data-start="564.07" data-end="566.26">it or something like that that's a</span> <span data-start="566.26" data-end="568.09">general theme throughout all the</span> <span data-start="568.09" data-end="570.4">bindings you want it to throw as early</span> <span data-start="570.4" data-end="572.41">as possible so app developers can fix</span> <span data-start="572.41" data-end="575.26">whatever the problem is so one of the</span> <span data-start="575.26" data-end="577.78">problems is so you create a server-side</span> <span data-start="577.78" data-end="580.42">scripting environment that's great now</span> <span data-start="580.42" data-end="582.4">people can write JavaScript code but</span> <span data-start="582.4" data-end="584.23">javascript by itself on the server side</span> <span data-start="584.23" data-end="586.78">obviously isn't that useful you need to</span> <span data-start="586.78" data-end="588.1">be able to do things with it you need to</span> <span data-start="588.1" data-end="589.39">be able to get data you need to be able</span> <span data-start="589.39" data-end="591.76">to affect whatever environment you're</span> <span data-start="591.76" data-end="596.47">running in so we at Bloomberg have over</span> <span data-start="596.47" data-end="597.82">the 30 years that they've been in</span> <span data-start="597.82" data-end="599.92">business they they've had a legacy data</span> <span data-start="599.92" data-end="602.86">catalog that allows programmers to</span> <span data-start="602.86" data-end="605.77">access almost every point of data that's</span> <span data-start="605.77" data-end="607.69">available for every security in the</span> <span data-start="607.69" data-end="611.14">known world so you can take any unique</span> <span data-start="611.14" data-end="613.75">security identifier you know the example</span> <span data-start="613.75" data-end="616.57">like a stock ticker AAPL for Apple and</span> <span data-start="616.57" data-end="619.27">you can request one of like thousands of</span> <span data-start="619.27" data-end="620.95">different data points if you need that</span> <span data-start="620.95" data-end="622.51">in your app you can say I want the last</span> <span data-start="622.51" data-end="624.22">price i want the bid i want to ask you</span> <span data-start="624.22" data-end="626.23">could ask about options stuff about</span> <span data-start="626.23" data-end="628.66">credit default swaps about whatever all</span> <span data-start="628.66" data-end="631.6">of these things have unique codes and</span> <span data-start="631.6" data-end="633.67">you can request that data point it's a</span> <span data-start="633.67" data-end="635.83">couple lines of code and you know it's</span> <span data-start="635.83" data-end="637.9">not hard for people off the street to to</span> <span data-start="637.9" data-end="641.77">learn this we built a our own homegrown</span> <span data-start="641.77" data-end="643.99">generic seema schemas service</span> <span data-start="643.99" data-end="646.6">architecture app developers that the</span> <span data-start="646.6" data-end="648.04">asterisk I had and I when I said app</span> <span data-start="648.04" data-end="650.02">developers write JavaScript they write</span> <span data-start="650.02" data-end="651.9">that JavaScript for their for their GUI</span> <span data-start="651.9" data-end="655.03">code for their apps but they're also</span> <span data-start="655.03" data-end="656.86">responsible for any of these services</span> <span data-start="656.86" data-end="658.51">that their app might talk to to do more</span> <span data-start="658.51" data-end="661.12">complex tasks because while javascript</span> <span data-start="661.12" data-end="663.31">is great and server-side javascript is</span> <span data-start="663.31" data-end="666.45">great if you're doing heavy duty</span> <span data-start="666.45" data-end="668.62">computation number crunching things like</span> <span data-start="668.62" data-end="669.6">that you</span> <span data-start="669.6" data-end="670.8">don't want to do it in JavaScript you</span> <span data-start="670.8" data-end="673.92">want to farm it off to some native code</span> <span data-start="673.92" data-end="675.509">that can do the right thing maybe talk</span> <span data-start="675.509" data-end="676.769">to different databases different</span> <span data-start="676.769" data-end="679.709">machines and to the JavaScript it just</span> <span data-start="679.709" data-end="681.6">gets a response back with the data that</span> <span data-start="681.6" data-end="685.41">needs we have our own in-house database</span> <span data-start="685.41" data-end="687.66">that we've written because other</span> <span data-start="687.66" data-end="690.54">database products you know obviously we</span> <span data-start="690.54" data-end="693.089">have those too we have oracle and sequel</span> <span data-start="693.089" data-end="694.92">server are basically db2 every database</span> <span data-start="694.92" data-end="698.49">in on the man but there was holes that</span> <span data-start="698.49" data-end="700.319">needed to be filled for the really</span> <span data-start="700.319" data-end="702.509">really high performing applications you</span> <span data-start="702.509" data-end="705.87">know apps with really really high read</span> <span data-start="705.87" data-end="709.35">rates where you of course you can build</span> <span data-start="709.35" data-end="711.089">the same thing in any of these other</span> <span data-start="711.089" data-end="714.089">databases but the amount of hardware and</span> <span data-start="714.089" data-end="715.92">the amount of money investment you would</span> <span data-start="715.92" data-end="718.199">need in order to achieve the same read</span> <span data-start="718.199" data-end="721.74">rate made you know this little niche for</span> <span data-start="721.74" data-end="725.94">an in-house database so for super high</span> <span data-start="725.94" data-end="728.19">read rate fixed record access we have</span> <span data-start="728.19" data-end="730.38">our own database which is bound directly</span> <span data-start="730.38" data-end="731.819">into the engine that people can access</span> <span data-start="731.819" data-end="734.79">so like i said here's here's an example</span> <span data-start="734.79" data-end="738">of you know if I just sit down I want to</span> <span data-start="738" data-end="739.829">write an application and I want the last</span> <span data-start="739.829" data-end="741.029">price of apple because I want to stick</span> <span data-start="741.029" data-end="743.91">it on my screen this is an example of</span> <span data-start="743.91" data-end="746.97">talking to our data catalog it's very</span> <span data-start="746.97" data-end="749.519">easy for people you can give it any</span> <span data-start="749.519" data-end="751.23">security that's available in our system</span> <span data-start="751.23" data-end="755.189">these this PR 0 0 5 this that's the</span> <span data-start="755.189" data-end="756.81">unique identifier I was mentioning about</span> <span data-start="756.81" data-end="759.029">the the security the different data</span> <span data-start="759.029" data-end="761.459">points that just happens to be the data</span> <span data-start="761.459" data-end="764.79">point for last price you make a request</span> <span data-start="764.79" data-end="768.209">and you get back both in string form and</span> <span data-start="768.209" data-end="770.73">as a number if the data point is a</span> <span data-start="770.73" data-end="772.88">number because sometimes there's</span> <span data-start="772.88" data-end="774.75">formatting and things like that that are</span> <span data-start="774.75" data-end="776.37">built in that would be in the string but</span> <span data-start="776.37" data-end="780.63">not in the raw number so everybody's</span> <span data-start="780.63" data-end="783.54">probably seen x SD before so assuming</span> <span data-start="783.54" data-end="785.189">that you have somebody writes out an x</span> </p>
<p><span data-start="785.189" data-end="787.589">SD generates one of these services on</span> <span data-start="787.589" data-end="789.779">our back-end builds it deploys it it's</span> <span data-start="789.779" data-end="792.689">out there you know have a simple request</span> <span data-start="792.689" data-end="795.72">response pair this is bound also</span> <span data-start="795.72" data-end="798.36">generically into our JavaScript we have</span> <span data-start="798.36" data-end="801.54">a generic catalog that's available from</span> <span data-start="801.54" data-end="802.86">the engine so I</span> <span data-start="802.86" data-end="804.42">say I want to talk to this service</span> <span data-start="804.42" data-end="807.18">version 1 point 0 and immediately the</span> <span data-start="807.18" data-end="808.89">objects I'm working with in JavaScript</span> <span data-start="808.89" data-end="812.43">represent the x SD schema and as you can</span> <span data-start="812.43" data-end="815.7">see the x SD schema like the bindings</span> <span data-start="815.7" data-end="817.62">take care of translating JSON into</span> <span data-start="817.62" data-end="820.14">whatever the x SD scheme is so it's very</span> <span data-start="820.14" data-end="822.93">very simple for app devs to start using</span> <span data-start="822.93" data-end="826.2">this stuff and and get data into their</span> <span data-start="826.2" data-end="830.55">application catalog is externally</span> <span data-start="830.55" data-end="832.74">maintained everything is schema</span> <span data-start="832.74" data-end="835.35">diversion to met to manage roll out ever</span> <span data-start="835.35" data-end="837.66">since it levels the playing field now</span> <span data-start="837.66" data-end="840.06">every developer in the company can look</span> <span data-start="840.06" data-end="842.19">at the schema for anything and see what</span> <span data-start="842.19" data-end="843.57">it is you don't have to go hunting</span> <span data-start="843.57" data-end="845.67">around for somebody's native code in</span> <span data-start="845.67" data-end="846.75">like a different group that you never</span> <span data-start="846.75" data-end="850.14">talked to before the services because</span> <span data-start="850.14" data-end="851.81">it's this generic framework you</span> <span data-start="851.81" data-end="853.86">externally configure them to run either</span> <span data-start="853.86" data-end="856.86">in process or out of process and also</span> <span data-start="856.86" data-end="859.2">the transport is configurable we</span> <span data-start="859.2" data-end="862.14">obviously depend a lot on speed so the</span> <span data-start="862.14" data-end="864.69">majority of stuff in our system works</span> <span data-start="864.69" data-end="867.54">via shared memory that we try to use as</span> <span data-start="867.54" data-end="871.29">little sockets and TCP as necessary</span> <span data-start="871.29" data-end="872.91">because everything passing around</span> <span data-start="872.91" data-end="874.41">locally on the same machine was shared</span> <span data-start="874.41" data-end="877.65">memory is a lot faster but for</span> <span data-start="877.65" data-end="879.72">compatibility we you know it also</span> <span data-start="879.72" data-end="882.45">supports things like soap so we have</span> <span data-start="882.45" data-end="884.97">apps that are written in our homegrown</span> <span data-start="884.97" data-end="887.75">server-side JavaScript that talk to</span> <span data-start="887.75" data-end="891.15">services in external banks that are just</span> <span data-start="891.15" data-end="893.43">windows soap web services to get data</span> <span data-start="893.43" data-end="895.61">directly into our server side JavaScript</span> <span data-start="895.61" data-end="898.38">so it's very very convenient it all</span> <span data-start="898.38" data-end="900.18">works do the same infrastructure there's</span> <span data-start="900.18" data-end="901.44">there's no difference to the app</span> <span data-start="901.44" data-end="905.66">developer there's always a blood</span> <span data-start="905.66" data-end="907.71">marshaling data to JavaScript sucks</span> <span data-start="907.71" data-end="910.92">anybody that writes a server-side engine</span> <span data-start="910.92" data-end="914.19">or deals with sticking data into</span> </p>
<p><span data-start="914.19" data-end="916.47">JavaScript you really really don't want</span> <span data-start="916.47" data-end="918.3">to work with large amounts of data in</span> <span data-start="918.3" data-end="921.42">JavaScript because everything you have</span> <span data-start="921.42" data-end="923.19">obviously if you're pulling it from</span> <span data-start="923.19" data-end="925.05">somewhere it's already in the most</span> <span data-start="925.05" data-end="927.18">efficient implementation and possible if</span> <span data-start="927.18" data-end="929.28">you've done that work you know we want</span> <span data-start="929.28" data-end="932.67">to have constraints we we enforce we</span> <span data-start="932.67" data-end="934.74">like push on to our app developers a</span> <span data-start="934.74" data-end="936.3">limited heap size so</span> <span data-start="936.3" data-end="937.83">you're running in this reusable</span> <span data-start="937.83" data-end="939.69">container your JavaScript app gets</span> <span data-start="939.69" data-end="942.12">invoked for all intents and purposes you</span> <span data-start="942.12" data-end="944.19">you have a fixed heap if you go if you</span> <span data-start="944.19" data-end="946.65">cross that heat boundary your app is</span> <span data-start="946.65" data-end="947.76">going to throw an exception you're going</span> <span data-start="947.76" data-end="949.89">to get an out of memory exception and</span> <span data-start="949.89" data-end="951.81">and the way we enforce this is</span> <span data-start="951.81" data-end="954.27">interesting but it's separate from this</span> <span data-start="954.27" data-end="957.57">talk and speed is the the final thing</span> <span data-start="957.57" data-end="960.21">the majority of our fastest applications</span> <span data-start="960.21" data-end="963.36">run end and from from the time the user</span> <span data-start="963.36" data-end="965.85">types it in so where the stuff is on the</span> <span data-start="965.85" data-end="968.19">screen in like 18 milliseconds 20</span> <span data-start="968.19" data-end="970.98">milliseconds 30 milliseconds we try to</span> <span data-start="970.98" data-end="973.35">handle any event in under 100</span> <span data-start="973.35" data-end="977.46">milliseconds so to us speed is one of</span> <span data-start="977.46" data-end="979.35">the greatest concerns because of data</span> <span data-start="979.35" data-end="982.7">center usage hardware usage power</span> <span data-start="982.7" data-end="984.99">consumption things like this that you</span> <span data-start="984.99" data-end="986.13">have to deal with when you have a large</span> <span data-start="986.13" data-end="990.24">data center so we have had to do a lot</span> <span data-start="990.24" data-end="991.89">of optimizations that a lot of people</span> <span data-start="991.89" data-end="994.89">don't have haven't had to do like our</span> <span data-start="994.89" data-end="998.61">environment has lots of caching built in</span> <span data-start="998.61" data-end="1000.77">compiling things to byte code executing</span> <span data-start="1000.77" data-end="1003.68">cash byte code and anywhere we can gain</span> <span data-start="1003.68" data-end="1005.54">a couple milliseconds back like we've</span> <span data-start="1005.54" data-end="1010.01">tried to take it the JavaScript we</span> <span data-start="1010.01" data-end="1011.89">ideally wanted it to just be rich glue</span> <span data-start="1011.89" data-end="1014.3">people can write complex apps with</span> <span data-start="1014.3" data-end="1016.82">handlers signals from GUI widgets and</span> <span data-start="1016.82" data-end="1019.64">access to data sources without having to</span> <span data-start="1019.64" data-end="1022.22">stick all of the data into JavaScript so</span> <span data-start="1022.22" data-end="1024.53">here's a dumb simple example of</span> <span data-start="1024.53" data-end="1027.92">something this is a real test screen</span> <span data-start="1027.92" data-end="1030.17">just showing like some data in our GUI</span> <span data-start="1030.17" data-end="1032.33">environment being shoved up onto the</span> <span data-start="1032.33" data-end="1034.25">screen it's all the members of the the</span> </p>
<p><span data-start="1034.25" data-end="1038.06">Dow Jones index in a list this is the</span> <span data-start="1038.06" data-end="1039.65">actual JavaScript code for that entire</span> <span data-start="1039.65" data-end="1042.88">screen this is a very simplistic example</span> <span data-start="1042.88" data-end="1044.99">because there's no interaction with this</span> <span data-start="1044.99" data-end="1046.43">UI it's just grabbing a bunch of data</span> <span data-start="1046.43" data-end="1048.29">and throwing it up onto the screen but</span> <span data-start="1048.29" data-end="1049.76">the key thing to take away from this is</span> <span data-start="1049.76" data-end="1053.12">we we've discovered through running all</span> <span data-start="1053.12" data-end="1055.37">of our stuff that when you get data</span> <span data-start="1055.37" data-end="1057.68">responses back you want to try to deal</span> <span data-start="1057.68" data-end="1059.93">with them with tools that prevent them</span> <span data-start="1059.93" data-end="1061.67">from marshaling into JavaScript so when</span> <span data-start="1061.67" data-end="1063.92">we get back this data set of all the</span> <span data-start="1063.92" data-end="1066.65">members in the index we use this thing</span> <span data-start="1066.65" data-end="1067.98">that we call a mapper to</span> <span data-start="1067.98" data-end="1070.77">and pop populated into the grid and the</span> <span data-start="1070.77" data-end="1074.27">mapper just is predefined to say which</span> <span data-start="1074.27" data-end="1077.07">which fields in the series in the</span> <span data-start="1077.07" data-end="1078.87">response get mapped to which columns in</span> <span data-start="1078.87" data-end="1082.65">this grid just using generic expats now</span> <span data-start="1082.65" data-end="1085.559">you know from here design time and what</span> <span data-start="1085.559" data-end="1088.38">does it mean to write JavaScript design</span> <span data-start="1088.38" data-end="1090.51">time and it's just not editing</span> </p>
<p><span data-start="1090.51" data-end="1094.41">JavaScript we built full IDE this is all</span> <span data-start="1094.41" data-end="1098.01">homegrown we have support for debugging</span> <span data-start="1098.01" data-end="1100.11">profiling all this stuff in here and</span> <span data-start="1100.11" data-end="1103.26">this runs live in our environment so at</span> <span data-start="1103.26" data-end="1106.71">this point I'm going to show you guys an</span> <span data-start="1106.71" data-end="1116.49">example of how this stuff works</span> <span data-start="1116.5" data-end="1163.79">of course we have to resume it</span> <span data-start="1163.8" data-end="1185.21">this was set up before but ok no</span> <span data-start="1185.22" data-end="1188.88">okay so I threw this together before</span> <span data-start="1188.88" data-end="1190.98">this is just some simple example people</span> <span data-start="1190.98" data-end="1193.049">like pictures rather than words this is</span> <span data-start="1193.049" data-end="1194.88">just an image widget thrown on the</span> <span data-start="1194.88" data-end="1197.7">screen as well as a flag which is just a</span> <span data-start="1197.7" data-end="1199.559">specialized version of an image where a</span> <span data-start="1199.559" data-end="1201.33">programmer could set a country code on</span> <span data-start="1201.33" data-end="1203.73">it instead of having to remember some</span> <span data-start="1203.73" data-end="1208.71">image resource so just to kind of show</span> <span data-start="1208.71" data-end="1212.52">you the interaction in here so say I</span> <span data-start="1212.52" data-end="1215.07">drag a button in here this works exactly</span> <span data-start="1215.07" data-end="1218.82">like an ID that any other ID you would</span> <span data-start="1218.82" data-end="1220.95">expect except as you can see the code is</span> </p>
<p><span data-start="1220.95" data-end="1223.65">JavaScript everything that's powering</span> <span data-start="1223.65" data-end="1227.37">this screen is JavaScript there's</span> <span data-start="1227.37" data-end="1230.669">autocomplete in here there's error</span> <span data-start="1230.669" data-end="1231.9">checking it tells you when you have</span> <span data-start="1231.9" data-end="1234.33">syntax errors in your code all this</span> <span data-start="1234.33" data-end="1236.01">stuff and this is hooked into our</span> <span data-start="1236.01" data-end="1238.14">service layer and our database layer so</span> <span data-start="1238.14" data-end="1240.24">when you when you say application</span> <span data-start="1240.24" data-end="1241.409">services create and you give it a</span> <span data-start="1241.409" data-end="1244.23">servant service name the it populates</span> <span data-start="1244.23" data-end="1246.27">the intellisense data with the stuff</span> <span data-start="1246.27" data-end="1248.549">from the schema for that service so it's</span> <span data-start="1248.549" data-end="1251.19">very developer friendly for for getting</span> <span data-start="1251.19" data-end="1254.429">access to your data and the other thing</span> <span data-start="1254.429" data-end="1257.19">is that it's very environment tries to</span> <span data-start="1257.19" data-end="1259.409">protect against our so here I'll show</span> <span data-start="1259.409" data-end="1262.74">that you see that down in here the image</span> <span data-start="1262.74" data-end="1264.57">that I had dragged into that app is</span> <span data-start="1264.57" data-end="1267.059">named image and so I'm going to set the</span> <span data-start="1267.059" data-end="1270.83">picture on that that image to a string</span> <span data-start="1270.83" data-end="1275.47">now</span> <span data-start="1275.48" data-end="1278.21">you'll see here that from the IDE you're</span> <span data-start="1278.21" data-end="1280.88">running you're running this app live</span> <span data-start="1280.88" data-end="1282.92">within our actual software that's</span> <span data-start="1282.92" data-end="1285.71">sitting on client desktops so there's no</span> <span data-start="1285.71" data-end="1287.69">trickery here you know it's it's running</span> <span data-start="1287.69" data-end="1289.28">live so everything you see is exactly</span> <span data-start="1289.28" data-end="1290.03">what you're going to get when you</span> <span data-start="1290.03" data-end="1292.25">publish publish this up and you'll see</span> <span data-start="1292.25" data-end="1295.16">when I click this because I'm a</span> <span data-start="1295.16" data-end="1297.26">developer I get this nice little pop-up</span> <span data-start="1297.26" data-end="1298.94">telling me that oh you did something</span> <span data-start="1298.94" data-end="1302.24">evil and I go and look in here and it</span> <span data-start="1302.24" data-end="1304.97">tells me integrated into the GUI that</span> <span data-start="1304.97" data-end="1307.01">you know I got this JavaScript exception</span> <span data-start="1307.01" data-end="1310.16">because I tried to assign a string you</span> <span data-start="1310.16" data-end="1311.66">know that doesn't course to a number to</span> <span data-start="1311.66" data-end="1317.81">something that expects a number and you</span> <span data-start="1317.81" data-end="1320.9">can see something that works in here you</span> <span data-start="1320.9" data-end="1327.95">know i'm going to set so instead i want</span> <span data-start="1327.95" data-end="1332.06">this handler to change the flag to a</span> <span data-start="1332.06" data-end="1336.37">different country now you can see this</span> <span data-start="1336.37" data-end="1338.63">this is the workflow that we switched</span> <span data-start="1338.63" data-end="1341.69">everybody to instead of compiling code</span> <span data-start="1341.69" data-end="1345.41">linking code debugging native binary the</span> <span data-start="1345.41" data-end="1349.04">dbx gdb whatever everybody programs like</span> <span data-start="1349.04" data-end="1352.25">this now and this increased productivity</span> <span data-start="1352.25" data-end="1354.74">probably like an order of five orders of</span> <span data-start="1354.74" data-end="1355.82">magnitude I mean it's like ridiculous</span> <span data-start="1355.82" data-end="1358.79">how much more product comes out of the</span> <span data-start="1358.79" data-end="1361.28">entire rd of thousands of people because</span> <span data-start="1361.28" data-end="1366.05">of this environment and I'll show you</span> <span data-start="1366.05" data-end="1369.05">what we do now so say I want to take</span> <span data-start="1369.05" data-end="1371.03">this app and I want to publish this app</span> <span data-start="1371.03" data-end="1373.43">so that a client can run it I'm on the</span> <span data-start="1373.43" data-end="1374.99">phone with a guy in a bank right now and</span> </p>
<p><span data-start="1374.99" data-end="1377.3">I want to demo something to him so I</span> <span data-start="1377.3" data-end="1381.05">like my app right now I'm going to</span> <span data-start="1381.05" data-end="1388.78">publish it</span> <span data-start="1388.79" data-end="1391.05">the other thing to note about this ID is</span> <span data-start="1391.05" data-end="1393.24">that there's no local files this entire</span> <span data-start="1393.24" data-end="1395.13">thing is inside of the cloud n.e.r.d</span> <span data-start="1395.13" data-end="1397.17">developer anywhere in the world can log</span> <span data-start="1397.17" data-end="1399.09">in to our terminal access the</span> <span data-start="1399.09" data-end="1400.62">development environment and all of their</span> <span data-start="1400.62" data-end="1402.14">work that they're editing and publishing</span> <span data-start="1402.14" data-end="1404.91">testing it all goes into our backend</span> <span data-start="1404.91" data-end="1411.15">there's no local storage here it makes</span> <span data-start="1411.15" data-end="1412.53">it very convenient for people just to</span> <span data-start="1412.53" data-end="1414.12">pick up work wherever they are and also</span> <span data-start="1414.12" data-end="1420.84">work on laptops so I published this</span> <span data-start="1420.84" data-end="1422.82">thing now I had a version in here before</span> <span data-start="1422.82" data-end="1424.95">but I published it this is our</span> <span data-start="1424.95" data-end="1427.05">deployment system so right now this</span> <span data-start="1427.05" data-end="1429.56">thing is released to me on development</span> <span data-start="1429.56" data-end="1434.49">so I'm going to come shove this right to</span> <span data-start="1434.49" data-end="1437.85">prod I have superuser access to do this</span> <span data-start="1437.85" data-end="1440.28">so nobody you know doesn't normally work</span> <span data-start="1440.28" data-end="1445.2">this way and I'm going to assign a</span> <span data-start="1445.2" data-end="1447.24">mnemonic to it so that I could actually</span> <span data-start="1447.24" data-end="1449.64">run this in our real software and i'm</span> <span data-start="1449.64" data-end="1454.2">going to call it JSC f so this thing is</span> <span data-start="1454.2" data-end="1457.14">now deployed this if if i added a client</span> <span data-start="1457.14" data-end="1458.79">to that list if they come in here and</span> <span data-start="1458.79" data-end="1461.97">just run JSDF they get this application</span> <span data-start="1461.97" data-end="1466.47">that i just wrote which to show this to</span> <span data-start="1466.47" data-end="1468.87">people like to talk to them about a</span> <span data-start="1468.87" data-end="1470.28">workflow that they want and then to</span> <span data-start="1470.28" data-end="1473.64">prototype it during a lunch break and go</span> <span data-start="1473.64" data-end="1475.32">back and show them exactly what they</span> <span data-start="1475.32" data-end="1478.02">were just talking about an hour before</span> <span data-start="1478.02" data-end="1480">is really powerful and it's actually</span> <span data-start="1480" data-end="1482.79">helped us win a lot of business but i'll</span> <span data-start="1482.79" data-end="1483.96">show you some of the tools that we built</span> <span data-start="1483.96" data-end="1485.22">around this because just building</span> <span data-start="1485.22" data-end="1486.48">something isn't good enough you need to</span> <span data-start="1486.48" data-end="1489.99">be able to test it and debug it so say i</span> <span data-start="1489.99" data-end="1492.15">go back in here and i change it back to</span> <span data-start="1492.15" data-end="1494.34">what i have before this is going to</span> <span data-start="1494.34" data-end="1497.19">throw an exception i can set a</span> <span data-start="1497.19" data-end="1499.86">breakpoint here i could come in here and</span> <span data-start="1499.86" data-end="1504.39">debug so it was very interesting to</span> <span data-start="1504.39" data-end="1507.81">actually get this working debugging live</span> <span data-start="1507.81" data-end="1509.97">inside of server-side javascript it</span> <span data-start="1509.97" data-end="1512.91">actually involves two processes that the</span> <span data-start="1512.91" data-end="1517.09">one the debug e is actually opening up a</span> <span data-start="1517.09" data-end="1519.049">blocking socket connection to the</span> <span data-start="1519.049" data-end="1521.389">debugger so that's how we implement the</span> <span data-start="1521.389" data-end="1523.97">stopping you know that if that socket</span> <span data-start="1523.97" data-end="1525.59">read blocks then that's how the debug</span> <span data-start="1525.59" data-end="1528.559">use waiting so now when I click on the</span> <span data-start="1528.559" data-end="1533.21">button you'll see that my my break point</span> <span data-start="1533.21" data-end="1535.46">fired over here and just like any other</span> <span data-start="1535.46" data-end="1537.889">idea you know I can go in I see the</span> </p>
<p><span data-start="1537.889" data-end="1540.08">JavaScript variable image its type I see</span> <span data-start="1540.08" data-end="1542.48">all of the the members on that</span> <span data-start="1542.48" data-end="1544.73">JavaScript variable and what their</span> <span data-start="1544.73" data-end="1546.889">values are I can come in here and run</span> <span data-start="1546.889" data-end="1550.309">code I can in run code in the context of</span> <span data-start="1550.309" data-end="1551.69">the jas context that's currently</span> <span data-start="1551.69" data-end="1552.95">executing right now if I want to change</span> <span data-start="1552.95" data-end="1555.289">something you know so this is pretty</span> <span data-start="1555.289" data-end="1556.85">powerful and of course if I continue</span> <span data-start="1556.85" data-end="1559.549">when it's going to blow up this system</span> <span data-start="1559.549" data-end="1562.46">in production if I run if Iran that app</span> <span data-start="1562.46" data-end="1564.08">and it did that in production and it</span> <span data-start="1564.08" data-end="1566">crashed it kicks into the whole</span> <span data-start="1566" data-end="1567.74">notification system we have so that the</span> <span data-start="1567.74" data-end="1568.909">programmers that publish this</span> <span data-start="1568.909" data-end="1571.85">automatically get notification walk</span> <span data-start="1571.85" data-end="1574.37">backs JavaScript and in native code of</span> <span data-start="1574.37" data-end="1575.929">where the application failed it</span> <span data-start="1575.929" data-end="1577.429">automatically puts tickets into our bug</span> <span data-start="1577.429" data-end="1579.049">tracking system things like that so it's</span> <span data-start="1579.049" data-end="1582.44">a very self healing system now once this</span> <span data-start="1582.44" data-end="1586.1">is available we have other tools you</span> <span data-start="1586.1" data-end="1587.539">know how do you look at the performance</span> <span data-start="1587.539" data-end="1592.22">of your app so here this this is very</span> <span data-start="1592.22" data-end="1594.47">in-depth information about our back-end</span> <span data-start="1594.47" data-end="1597.26">for running this JavaScript application</span> <span data-start="1597.26" data-end="1600.83">it took 14 point 46 milliseconds of CPU</span> <span data-start="1600.83" data-end="1603.46">time to run this a bunch of different</span> <span data-start="1603.46" data-end="1606.139">data databases and things that were</span> <span data-start="1606.139" data-end="1608.179">accessed you know we have built-in</span> <span data-start="1608.179" data-end="1612.2">timers and checks in here to figure out</span> <span data-start="1612.2" data-end="1614.899">where the time is being spent if we were</span> <span data-start="1614.899" data-end="1617.299">talking to any services things like that</span> <span data-start="1617.299" data-end="1620.99">we we can look at the actual scheme adre</span> <span data-start="1620.99" data-end="1622.88">quest going out to the services and not</span> <span data-start="1622.88" data-end="1624.409">just see the requests and how long they</span> <span data-start="1624.409" data-end="1626.539">took dive into them and actually see the</span> <span data-start="1626.539" data-end="1629.32">payloads of the requests which is pretty</span> <span data-start="1629.32" data-end="1633.019">interesting for people in addition to</span> <span data-start="1633.019" data-end="1639.26">that memory debugging so people need to</span> <span data-start="1639.26" data-end="1644.059">know how many how their JavaScript usage</span> <span data-start="1644.059" data-end="1645.889">like how many objects they're creating</span> <span data-start="1645.889" data-end="1647.51">because these apps can be long-lived</span> <span data-start="1647.51" data-end="1649.22">apps so they need to know</span> <span data-start="1649.22" data-end="1651.169">am i keeping objects alive is everything</span> <span data-start="1651.169" data-end="1653.03">being deceived is there a bug in the</span> <span data-start="1653.03" data-end="1654.77">native code of one of these objects</span> <span data-start="1654.77" data-end="1656.69">that's causing the reference to stay</span> <span data-start="1656.69" data-end="1660.47">around for it to leak so this is running</span> <span data-start="1660.47" data-end="1662.12">live right now so if I go over here and</span> <span data-start="1662.12" data-end="1674.57">kill this this should update it doesn't</span> <span data-start="1674.57" data-end="1677.72">update a nap but anyway the point is you</span> <span data-start="1677.72" data-end="1679.789">can come in inspect everything you can</span> <span data-start="1679.789" data-end="1685.33">see okay wrap it up you could see code</span> <span data-start="1685.33" data-end="1688.49">this is saying this indicates that it's</span> <span data-start="1688.49" data-end="1690.919">from native code I'm not running in</span> <span data-start="1690.919" data-end="1692.33">something that's supported right now but</span> <span data-start="1692.33" data-end="1695.02">we actually get native code walk backs</span> </p>
<p><span data-start="1695.02" data-end="1697.309">JavaScript walk backs of where this</span> <span data-start="1697.309" data-end="1701.6">stuff broke so that's it we run out of</span> <span data-start="1701.6" data-end="1703.429">time I mean this is like a lot of stuff</span> <span data-start="1703.429" data-end="1705.95">to try to cram into 20 minutes but we</span> <span data-start="1705.95" data-end="1707.21">kind of wanted to show everybody you</span> <span data-start="1707.21" data-end="1708.919">know we've been doing this for years we</span> <span data-start="1708.919" data-end="1710.84">have a lot of time and effort invested</span> <span data-start="1710.84" data-end="1712.49">into this tool chain and making</span> <span data-start="1712.49" data-end="1715.46">everybody productive in it so we hope</span> <span data-start="1715.46" data-end="1717.5">that some of these ideas can carry over</span> <span data-start="1717.5" data-end="1721.789">into the nodejs world and I look forward</span> <span data-start="1721.789" data-end="1725.51">to seeing nodejs got a competitor spider</span> <span data-start="1725.51" data-end="1727.789">monkey because we use spider monkey we</span> <span data-start="1727.789" data-end="1731.45">can't use v8 for a bunch of reasons but</span> <span data-start="1731.45" data-end="1733.85">spider monkey hasn't been really</span> <span data-start="1733.85" data-end="1736.22">entering into the server side arena it's</span> <span data-start="1736.22" data-end="1738.23">going to be soon there they're fitting</span> <span data-start="1738.23" data-end="1739.909">it with a v8 harness to get it into a</span> <span data-start="1739.909" data-end="1742.22">spider node so we'll see what that</span> </p>
</section>