<section>
<p><span data-start="3.529" data-end="10.469">hey everybody how's it going hi hi hi hi</span> <span data-start="10.469" data-end="15.21">hey hi hi so this is a talk called</span> <span data-start="15.21" data-end="17.58">making modern web sites my name is</span> <span data-start="17.58" data-end="19.05">Patrick Kettner this is me if you ever</span> <span data-start="19.05" data-end="20.4">see me online i'm pretty much ease that</span> <span data-start="20.4" data-end="22.109">appetite everywhere i like to take</span> <span data-start="22.109" data-end="24.39">pictures of cakes my girlfriend makes</span> <span data-start="24.39" data-end="25.32">them for me she's over there she's</span> <span data-start="25.32" data-end="27.119">really cool she want to say hi I also</span> <span data-start="27.119" data-end="29.279">work at Microsoft and I work</span> <span data-start="29.279" data-end="31.109">specifically on edge I'm a program</span> <span data-start="31.109" data-end="33.36">manager for interop so basically if</span> <span data-start="33.36" data-end="35.7">something in edge is shitty it's</span> <span data-start="35.7" data-end="37.44">probably my fault or my problem to get</span> <span data-start="37.44" data-end="39.09">it fixed so feel free to complain to me</span> <span data-start="39.09" data-end="41.399">either in person or online that being</span> <span data-start="41.399" data-end="42.629">said edges and shitty it's a really</span> <span data-start="42.629" data-end="44.85">great browser to check it out so anyway</span> </p>
<p><span data-start="44.85" data-end="45.899">I don't here to talk about I jumping to</span> <span data-start="45.899" data-end="47.399">talk about website specifically making</span> <span data-start="47.399" data-end="49.02">websites and specifically help making</span> <span data-start="49.02" data-end="51.03">websites is hard at least to make good</span> <span data-start="51.03" data-end="54.21">websites and it really really hard and</span> <span data-start="54.21" data-end="56.34">it didn't used to be when I was a kid so</span> <span data-start="56.34" data-end="58.02">my first websites looked a lot like this</span> <span data-start="58.02" data-end="59.76">this not quite this very first website</span> <span data-start="59.76" data-end="61.98">but it was you know throw up some stuff</span> </p>
<p><span data-start="61.98" data-end="64.14">HTML on a page and it's done and it's</span> <span data-start="64.14" data-end="65.4">better than most things in the world is</span> <span data-start="65.4" data-end="66.479">most of the things websites in the world</span> <span data-start="66.479" data-end="70.17">didn't exist yet um but now there's just</span> <span data-start="70.17" data-end="72">a ton of new features that get added to</span> <span data-start="72" data-end="74.07">the web platform every single day and</span> <span data-start="74.07" data-end="75.45">it's kind of overwhelming and you just</span> <span data-start="75.45" data-end="76.56">kind of feel like you have to know</span> <span data-start="76.56" data-end="78.03">everything and it sucks and you just</span> <span data-start="78.03" data-end="79.619">kind of want to make it stop but you</span> <span data-start="79.619" data-end="81.99">don't though you don't want to make it</span> <span data-start="81.99" data-end="83.759">stop you want to make it better and we</span> <span data-start="83.759" data-end="86.43">make it better by using tools there's a</span> <span data-start="86.43" data-end="88.17">lot of tools out there because there's a</span> <span data-start="88.17" data-end="89.67">lot of different feature sets I actually</span> <span data-start="89.67" data-end="91.32">work on one specifically on the lead</span> <span data-start="91.32" data-end="94.259">maintainer for moderniser it's the most</span> <span data-start="94.259" data-end="95.67">second use JavaScript library on the web</span> <span data-start="95.67" data-end="97.92">after jquery if you don't know it's</span> <span data-start="97.92" data-end="99.09">basically like a feature detection</span> <span data-start="99.09" data-end="101.4">library rather than do like you a sniff</span> <span data-start="101.4" data-end="102.75">user agent sniffing you're able to check</span> <span data-start="102.75" data-end="103.92">to see if a feature exists and if it</span> <span data-start="103.92" data-end="106.799">does do something it's cool um it's</span> <span data-start="106.799" data-end="108.96">really popular justin bieber actually</span> <span data-start="108.96" data-end="110.46">hasn't moderniser hoodie for some reason</span> <span data-start="110.46" data-end="112.14">this is an actual photo he really owns</span> <span data-start="112.14" data-end="113.61">that it costs like five hundred dollars</span> <span data-start="113.61" data-end="114.81">it's from France I don't know why they</span> <span data-start="114.81" data-end="116.219">have it but modernizes on it but that</span> <span data-start="116.219" data-end="119.159">was fine um yeah anyway so moderniser</span> <span data-start="119.159" data-end="120.719">actually came out with version 3</span> <span data-start="120.719" data-end="123.06">recently version 2 was in 2011 so</span> <span data-start="123.06" data-end="124.92">version 3 getting shipped finally was</span> <span data-start="124.92" data-end="126.869">kind of a big deal for me I was a very</span> <span data-start="126.869" data-end="129.509">prolonged pregnancy um we just shipped</span> <span data-start="129.509" data-end="131.61">it and if you haven't looked at</span> <span data-start="131.61" data-end="132.9">moderniser since we shipped it in</span> </p>
<p><span data-start="132.9" data-end="133.63">September</span> <span data-start="133.63" data-end="135.16">you might be familiar with this this is</span> <span data-start="135.16" data-end="137.89">the website it served as well since 2011</span> <span data-start="137.89" data-end="140.23">it was you know it was fine at the time</span> <span data-start="140.23" data-end="142.33">it got kind of aged so we ended up</span> <span data-start="142.33" data-end="144.13">spending a lot of time wanting to update</span> <span data-start="144.13" data-end="146.14">this and make it better we did a whole</span> <span data-start="146.14" data-end="147.67">lot of work that old team did a whole</span> <span data-start="147.67" data-end="149.14">bunch of work and eventually we came up</span> <span data-start="149.14" data-end="151.84">with this which is the new website and</span> <span data-start="151.84" data-end="153.52">it was cool it took a lot of energy took</span> <span data-start="153.52" data-end="154.96">a lot of work and no one gives a</span> <span data-start="154.96" data-end="158.47">about it other than me um no one really</span> <span data-start="158.47" data-end="160.69">cares at best modernizer just doesn't</span> <span data-start="160.69" data-end="162.34">get in the way like if you're wanting a</span> <span data-start="162.34" data-end="164.23">new fee if somebody's no one's going to</span> <span data-start="164.23" data-end="165.58">modernize accom every morning when they</span> <span data-start="165.58" data-end="166.72">wake up they're only doing it because</span> <span data-start="166.72" data-end="167.92">they want to make better websites they</span> <span data-start="167.92" data-end="169.33">want to get a tool and get out of the</span> <span data-start="169.33" data-end="171.52">way we're up pit stop at best along</span> <span data-start="171.52" data-end="173.32">their way but we still want to make our</span> <span data-start="173.32" data-end="176.53">users happy and we do that by making it</span> <span data-start="176.53" data-end="178.27">really really fast and having a whole</span> <span data-start="178.27" data-end="180.46">lot of fun features in it so like I said</span> <span data-start="180.46" data-end="181.78">this was the website but what I'm going</span> <span data-start="181.78" data-end="183.19">to be talking about mostly the download</span> <span data-start="183.19" data-end="185.05">page which is a kind of a complicated</span> <span data-start="185.05" data-end="188.68">app which looks like this so um this is</span> <span data-start="188.68" data-end="190.12">the new website and this is the</span> <span data-start="190.12" data-end="191.59">gentleman who designed the new website</span> <span data-start="191.59" data-end="193.06">guy named Joe critchley out of England</span> <span data-start="193.06" data-end="195.85">he's great and like most designers when</span> <span data-start="195.85" data-end="197.56">he went and created a new website he</span> <span data-start="197.56" data-end="199.99">wanted to make it look pretty with the</span> <span data-start="199.99" data-end="201.16">thoughts because a lot of the website</span> <span data-start="201.16" data-end="204.06">fonts are kind of boring and so he used</span> <span data-start="204.06" data-end="206.92">the fun face API palm faces you know</span> <span data-start="206.92" data-end="208.96">loads got some phones is great and makes</span> <span data-start="208.96" data-end="210.22">your website look called news and fancy</span> <span data-start="210.22" data-end="210.94">unless you have a slow internet</span> <span data-start="210.94" data-end="212.29">connection like I'm sure all of you are</span> <span data-start="212.29" data-end="213.34">aware right now in which case the</span> <span data-start="213.34" data-end="215.26">website looks like this which sucks</span> <span data-start="215.26" data-end="216.7">because the websites completely broken</span> <span data-start="216.7" data-end="219.01">you can't do anything on it but it</span> <span data-start="219.01" data-end="220.75">actually does work it's just looks</span> <span data-start="220.75" data-end="222.7">broken everything functions you just</span> <span data-start="222.7" data-end="224.59">have to be a mind reader or use like the</span> <span data-start="224.59" data-end="226.03">accessibility API to be able to access</span> <span data-start="226.03" data-end="228.82">it and so the way to get around that is</span> <span data-start="228.82" data-end="230.709">uh there's a great new API called the</span> <span data-start="230.709" data-end="232.48">font loading module if you're not aware</span> <span data-start="232.48" data-end="234.7">this is a new JavaScript API that's been</span> <span data-start="234.7" data-end="237.76">added a while back in chrome and what it</span> <span data-start="237.76" data-end="241.39">looks like is this you have a new</span> <span data-start="241.39" data-end="243.85">document fonts property that has a dot</span> <span data-start="243.85" data-end="246.04">ready method and that gives you a</span> <span data-start="246.04" data-end="248.68">promise that promise gets fired with the</span> <span data-start="248.68" data-end="250.48">results once the fonts have been loaded</span> <span data-start="250.48" data-end="251.65">previously if you wanted to know if a</span> <span data-start="251.65" data-end="253.99">font had been loaded you had to wait</span> <span data-start="253.99" data-end="257.17">until the actual load event fired then</span> <span data-start="257.17" data-end="258.25">you had to wait for it to partisan the</span> <span data-start="258.25" data-end="259.51">only we could know that is if you like</span> <span data-start="259.51" data-end="261.16">injected into canvas and check the width</span> <span data-start="261.16" data-end="262.78">of the character length in campus by</span> <span data-start="262.78" data-end="264.22">pixels it was terrible this is great</span> <span data-start="264.22" data-end="267.22">this is God's end and so</span> <span data-start="267.22" data-end="269.59">the only problem with it oh so sorry so</span> <span data-start="269.59" data-end="271.45">rather than having a font definition</span> <span data-start="271.45" data-end="272.8">that looks like this where you define</span> <span data-start="272.8" data-end="275.2">your web site your website fonts after</span> <span data-start="275.2" data-end="277.66">your custom fonts you end up having two</span> <span data-start="277.66" data-end="279.43">different declarations like this one</span> <span data-start="279.43" data-end="281.65">with your body at the top where you have</span> <span data-start="281.65" data-end="283.66">your website plants website fonts rather</span> <span data-start="283.66" data-end="285.73">and then underneath it you have the</span> <span data-start="285.73" data-end="288.07">fonts loaded class which is where what</span> <span data-start="288.07" data-end="289.47">gets added when the fonts loaded so</span> <span data-start="289.47" data-end="291.76">instead of this it looks like this and</span> <span data-start="291.76" data-end="293.08">then after a couple seconds it look goes</span> <span data-start="293.08" data-end="294.73">like that a little clot dance and</span> <span data-start="294.73" data-end="296.17">otherwise it's great it's great API</span> <span data-start="296.17" data-end="297.97">makes your website's load a lot faster</span> <span data-start="297.97" data-end="300.34">the only problem is the support it's</span> <span data-start="300.34" data-end="301.81">only supported in chrome and firefox</span> <span data-start="301.81" data-end="304.03">right now and working at Microsoft I</span> <span data-start="304.03" data-end="305.35">can't really ship something that doesn't</span> <span data-start="305.35" data-end="306.52">work good in the browser or at least</span> <span data-start="306.52" data-end="308.53">work in the browser it also doesn't work</span> <span data-start="308.53" data-end="310.63">in Safari or mobile iOS so it's not</span> <span data-start="310.63" data-end="312.43">really ideal but there is a thing a</span> <span data-start="312.43" data-end="314.62">polyfill called font face observer by</span> </p>
<p><span data-start="314.62" data-end="316.93">Bram Stein it's great rather than your</span> <span data-start="316.93" data-end="317.98">code look like this you just make a</span> <span data-start="317.98" data-end="320.65">minor change and you import the font</span> <span data-start="320.65" data-end="323.44">face observer and otherwise your code</span> <span data-start="323.44" data-end="324.94">books the same we just add a class at</span> <span data-start="324.94" data-end="327.7">the bottom inside of once the fonts been</span> <span data-start="327.7" data-end="329.02">loaded we had class to the body and</span> <span data-start="329.02" data-end="339.53">you're good but breaking news</span> <span data-start="339.54" data-end="344.68">visit it breaking news um so there's</span> <span data-start="344.68" data-end="346.449">actually a new CSS property called font</span> <span data-start="346.449" data-end="348.31">display it does the exact same thing</span> <span data-start="348.31" data-end="349.78">it'll swap out your fonts as soon as the</span> <span data-start="349.78" data-end="353.11">fonts Brett loaded rather then you know</span> <span data-start="353.11" data-end="354.729">like blocking or waiting till the next</span> <span data-start="354.729" data-end="356.05">red light or anything it's a great API</span> <span data-start="356.05" data-end="358.03">it's brand new like literally brand new</span> <span data-start="358.03" data-end="360.07">it's December first like a couple of</span> <span data-start="360.07" data-end="361.3">days ago we just gotta do Chrome Canary</span> <span data-start="361.3" data-end="363.37">so probably a year from now everything I</span> <span data-start="363.37" data-end="364.69">just said is complete nonsense you won't</span> <span data-start="364.69" data-end="366.07">need to do it but this is great best</span> <span data-start="366.07" data-end="367.539">feature anyway back to what I was saying</span> <span data-start="367.539" data-end="370.18">so uh this is what like I said this is</span> <span data-start="370.18" data-end="371.86">kind of this weird Dancy thing that</span> <span data-start="371.86" data-end="373.389">happens when the fonts load it's not</span> <span data-start="373.389" data-end="375.07">ideal especially if you have real design</span> <span data-start="375.07" data-end="377.979">focus people um so rather than setting a</span> <span data-start="377.979" data-end="380.74">class you also the option to do like set</span> <span data-start="380.74" data-end="382.09">a property and local storage then the</span> <span data-start="382.09" data-end="384.01">next time it loads you can check if that</span> <span data-start="384.01" data-end="385">local storage is already there at the</span> <span data-start="385" data-end="386.139">very top your body it's at the class</span> <span data-start="386.139" data-end="387.49">immediately and your fonts are</span> <span data-start="387.49" data-end="389.38">constantly that one fun it's better and</span> <span data-start="389.38" data-end="392.02">if it's cash properly and the user in</span> <span data-start="392.02" data-end="393.31">clear part of the cash or the browser</span> <span data-start="393.31" data-end="395.71">and clear part of the cash and the point</span> <span data-start="395.71" data-end="396.789">being this is always basically an</span> <span data-start="396.789" data-end="398.38">educated guess we don't know for a fact</span> <span data-start="398.38" data-end="399.789">whether or not that fonts going to be</span> <span data-start="399.789" data-end="402.16">there without that skip unless we use</span> <span data-start="402.16" data-end="404.26">something like service worker so service</span> <span data-start="404.26" data-end="405.49">workers are really cool they're kind of</span> <span data-start="405.49" data-end="407.55">a big deal if you've never heard of them</span> <span data-start="407.55" data-end="410.02">as anybody not heard of service workers</span> <span data-start="410.02" data-end="413.74">before no great cool so it's gives you</span> <span data-start="413.74" data-end="415.419">adds a whole lot of new features to the</span> <span data-start="415.419" data-end="417.01">web platform stuff like offline</span> <span data-start="417.01" data-end="418.72">experiences push notifications</span> <span data-start="418.72" data-end="422.349">background sync and much much more but</span> <span data-start="422.349" data-end="423.37">the two parts that I'm going to be</span> <span data-start="423.37" data-end="425.74">discussing our kind of more fundamental</span> <span data-start="425.74" data-end="428.199">pieces fetch in cash so they're both New</span> <span data-start="428.199" data-end="430.72">api's fetches sort of network proxy any</span> <span data-start="430.72" data-end="432.31">network requests that goes out through</span> <span data-start="432.31" data-end="434.349">the browser whether it be from CSS xhr</span> </p>
<p><span data-start="434.349" data-end="436.12">JavaScript anything at all as long as</span> <span data-start="436.12" data-end="437.56">it's from your same domain it'll go</span> <span data-start="437.56" data-end="438.909">through fetch you have the opportunity</span> <span data-start="438.909" data-end="441.099">to catch that request modify it send it</span> <span data-start="441.099" data-end="443.47">on do whatever you want cash is like the</span> <span data-start="443.47" data-end="444.61">browser cache only it's completely</span> <span data-start="444.61" data-end="446.26">programmable so you're able to control</span> <span data-start="446.26" data-end="449.26">what goes into it so we avoid that whole</span> <span data-start="449.26" data-end="451.87">is it or is it not cached thing so</span> <span data-start="451.87" data-end="453.639">modernizer the website was completely</span> <span data-start="453.639" data-end="456.61">built on requirejs modules because it's</span> <span data-start="456.61" data-end="459.25">old and so every one of these like check</span> <span data-start="459.25" data-end="460.96">boxy things and anything that is</span> <span data-start="460.96" data-end="462.46">anything you can click on pretty much is</span> <span data-start="462.46" data-end="465.4">its own module there's 259 modules today</span> <span data-start="465.4" data-end="467.289">though probably like 262 once I start</span> <span data-start="467.289" data-end="468.55">getting back to my house and merging</span> <span data-start="468.55" data-end="471.159">commits that came in and any single one</span> <span data-start="471.159" data-end="472.21">of those modules could end up being</span> <span data-start="472.21" data-end="473.11">dozens of requests</span> <span data-start="473.11" data-end="475.75">and as a result we have to we want to</span> <span data-start="475.75" data-end="478.09">add it to our service worker and the way</span> <span data-start="478.09" data-end="480.1">we do that is like this we do navigator</span> <span data-start="480.1" data-end="481.48">that service worker dot register a new</span> </p>
<p><span data-start="481.48" data-end="483.01">API you pass it a string that represents</span> <span data-start="483.01" data-end="486.1">the path to a JavaScript file that</span> <span data-start="486.1" data-end="487.12">javascript file looks something like</span> <span data-start="487.12" data-end="488.86">this this is an example of us</span> <span data-start="488.86" data-end="492.13">prefetching are Totally Rad sans font we</span> <span data-start="492.13" data-end="493.93">have we set up a cash up here which is</span> <span data-start="493.93" data-end="495.37">just an object with the name space</span> <span data-start="495.37" data-end="496.78">because you can have multiple caches if</span> <span data-start="496.78" data-end="497.83">you want to delete one and keep another</span> <span data-start="497.83" data-end="500.5">then we add an event listener for the</span> <span data-start="500.5" data-end="504.55">install event the uninstall is when the</span> <span data-start="504.55" data-end="505.78">service worker has been installed into</span> <span data-start="505.78" data-end="507.1">the browser then we go out and we</span> <span data-start="507.1" data-end="510.91">prefetch each one of these URLs so you</span> <span data-start="510.91" data-end="514.57">can pre straightforward and so later on</span> <span data-start="514.57" data-end="516.16">we'll have this which is the fetch event</span> <span data-start="516.16" data-end="517.54">and the fetch event is that network</span> <span data-start="517.54" data-end="518.83">proxy thing that I mentioned before</span> <span data-start="518.83" data-end="521.98">every time that a fetch event happens</span> <span data-start="521.98" data-end="523.39">which is any network request it goes</span> <span data-start="523.39" data-end="524.71">through here we check to see if the</span> <span data-start="524.71" data-end="527.23">response is already cached if it is we</span> <span data-start="527.23" data-end="528.58">respond with that so it happens</span> <span data-start="528.58" data-end="530.32">immediately rather than going you know</span> <span data-start="530.32" data-end="532.18">over to server farm somewhere in coming</span> <span data-start="532.18" data-end="534.04">back to a computer and just read it</span> <span data-start="534.04" data-end="535.87">straight off the disk and if it's not</span> <span data-start="535.87" data-end="537.22">there we go and we fetch it and then we</span> <span data-start="537.22" data-end="538.75">cash the response so that if requested</span> <span data-start="538.75" data-end="540.43">again in the future it's there it's</span> <span data-start="540.43" data-end="542.86">great it's simple um the problem again</span> <span data-start="542.86" data-end="544.51">the support is not very great it's</span> <span data-start="544.51" data-end="545.86">pretty much only in Chrome it's going to</span> <span data-start="545.86" data-end="548.35">be in Firefox in a couple of weeks in</span> <span data-start="548.35" data-end="551.92">early January so we need it sucks we</span> <span data-start="551.92" data-end="553.87">need like some kind of hero we need some</span> <span data-start="553.87" data-end="555.34">kind of Savior we need a douchebag and</span> <span data-start="555.34" data-end="557.89">we need app cache um so a couple of</span> <span data-start="557.89" data-end="561.01">years ago Jake Archibald gave a talk at</span> <span data-start="561.01" data-end="563.11">jas comp called app cache is a douchebag</span> <span data-start="563.11" data-end="565.18">it's a awesome talk if you've never seen</span> <span data-start="565.18" data-end="567.13">it it gives a lot of background into</span> <span data-start="567.13" data-end="569.07">what app cache is that was the original</span> <span data-start="569.07" data-end="572.08">kind of fork off of Google gears that</span> <span data-start="572.08" data-end="573.7">was supposed to be how we were going to</span> <span data-start="573.7" data-end="575.29">make offline applications the problem</span> <span data-start="575.29" data-end="577.81">was it's a douche bag and it sucks a lot</span> <span data-start="577.81" data-end="580.03">um service workers way better if you</span> <span data-start="580.03" data-end="581.02">have the opportunity to only make</span> <span data-start="581.02" data-end="582.28">something for cromer to make something</span> <span data-start="582.28" data-end="583.39">specifically using a service worker</span> <span data-start="583.39" data-end="584.83">don't even look at app cache it's</span> <span data-start="584.83" data-end="587.71">horrible but it is supported everywhere</span> <span data-start="587.71" data-end="589.09">pretty much any browser you'd want to</span> <span data-start="589.09" data-end="591.87">develop something for supports it and so</span> <span data-start="591.87" data-end="594.46">it come and it happens to cover our use</span> <span data-start="594.46" data-end="596.62">which is basically caching everything</span> <span data-start="596.62" data-end="597.64">and then returning it immediately if</span> <span data-start="597.64" data-end="600.01">it's there so the way that it works is</span> <span data-start="600.01" data-end="602.82">you just have a plain text file that's a</span> <span data-start="602.82" data-end="604.81">manifest looks something like this</span> <span data-start="604.81" data-end="606.91">you'll have a comment up at the top</span> <span data-start="606.91" data-end="609.01">do cash and validation because it app</span> <span data-start="609.01" data-end="610.51">cat the browser will check to see if any</span> <span data-start="610.51" data-end="612.88">new version of the manifest is byte for</span> <span data-start="612.88" data-end="614.41">byte the same and if it isn't it will</span> <span data-start="614.41" data-end="615.76">redownload everything which is what we</span> <span data-start="615.76" data-end="617.29">want to have happen when we do releases</span> <span data-start="617.29" data-end="619.78">we list a couple of static files you</span> <span data-start="619.78" data-end="622.03">want to have downloaded and then I have</span> <span data-start="622.03" data-end="624.1">this double under assets thing that's</span> <span data-start="624.1" data-end="625.03">something that gets programmatically</span> <span data-start="625.03" data-end="626.44">addict we're injecting a whole bunch of</span> <span data-start="626.44" data-end="628.36">like the individual modules that we're</span> <span data-start="628.36" data-end="629.53">creating for the website that way we</span> <span data-start="629.53" data-end="631.24">don't have to maintain a list of them in</span> <span data-start="631.24" data-end="632.62">multiple places it just gets added in</span> <span data-start="632.62" data-end="634.42">like a gulp script then the only other</span> <span data-start="634.42" data-end="636.22">important thing is down here the network</span> <span data-start="636.22" data-end="637.72">asterisk what that means is that as</span> <span data-start="637.72" data-end="639.31">you're browsing everything that comes</span> <span data-start="639.31" data-end="640.87">from your domain gets added to the app</span> <span data-start="640.87" data-end="643.03">cache automatically so um it looks</span> <span data-start="643.03" data-end="644.59">something like this you just have a</span> <span data-start="644.59" data-end="647.14">manifest attribute on your browser and</span> <span data-start="647.14" data-end="651.91">right there and it's OOP sorry again</span> <span data-start="651.91" data-end="653.32">service worker is much better than app</span> <span data-start="653.32" data-end="654.61">cache though so we don't want to have to</span> <span data-start="654.61" data-end="656.53">inject it unless we need it app cache is</span> <span data-start="656.53" data-end="657.85">a douche bag it completely takes over</span> <span data-start="657.85" data-end="660.1">your entire page you're certain all your</span> <span data-start="660.1" data-end="661.38">serviceworker responses would be</span> <span data-start="661.38" data-end="664.18">confusing a lot more difficult to reason</span> <span data-start="664.18" data-end="665.38">about you get into a weird state that</span> <span data-start="665.38" data-end="667.27">you'll run do so yo news app cache if</span> <span data-start="667.27" data-end="668.71">service worker isn't there we do this</span> <span data-start="668.71" data-end="670.63">registration like this if service worker</span> <span data-start="670.63" data-end="672.31">isn't navigator then we register it and</span> <span data-start="672.31" data-end="673.69">if it isn't we check to see if app cache</span> </p>
<p><span data-start="673.69" data-end="675.49">I was on the window and if it is we at</span> <span data-start="675.49" data-end="677.05">the app cache the problem is you can't</span> <span data-start="677.05" data-end="679.78">add it by JavaScript to that page you</span> <span data-start="679.78" data-end="682.66">have to UM the manifest file has to be</span> <span data-start="682.66" data-end="684.73">there on page load and so what we can do</span> <span data-start="684.73" data-end="686.41">to get around this is load it in an</span> <span data-start="686.41" data-end="688.57">iframe we create another basically a</span> <span data-start="688.57" data-end="691.87">dummy page and add a that has an app</span> <span data-start="691.87" data-end="694.24">cache on it we load that I frame on the</span> <span data-start="694.24" data-end="695.8">page and we inject it into the page and</span> <span data-start="695.8" data-end="698.23">then everything's loaded it's great so</span> <span data-start="698.23" data-end="699.76">this is a duck like an example dummy</span> <span data-start="699.76" data-end="701.95">file it's all that's doing is loading</span> <span data-start="701.95" data-end="703.69">the app cache and it's injected to it</span> <span data-start="703.69" data-end="705.43">and we go from loading the moderniser</span> <span data-start="705.43" data-end="707.68">website on the wonderful provided Wi-Fi</span> <span data-start="707.68" data-end="709.48">here went from 20 seconds to 190</span> <span data-start="709.48" data-end="712.06">milliseconds on reload so it's</span> <span data-start="712.06" data-end="715.15">substantial savings anytime I'm on an</span> <span data-start="715.15" data-end="717.88">airplane anytime and i'm on a train or</span> <span data-start="717.88" data-end="720.76">at Amelia Island at jjs conf it's always</span> <span data-start="720.76" data-end="722.26">wonderful if the websites properly using</span> <span data-start="722.26" data-end="723.82">this stuff so check it out if you</span> <span data-start="723.82" data-end="726.04">haven't but again service workers are</span> <span data-start="726.04" data-end="727.69">much better than app cache service</span> <span data-start="727.69" data-end="729.19">workers are the future web workers are</span> <span data-start="729.19" data-end="731.77">the future um that's web workers if</span> <span data-start="731.77" data-end="733.33">you're not familiar with web workers</span> <span data-start="733.33" data-end="734.44">they've been around actually for a long</span> <span data-start="734.44" data-end="738.43">time November of 2008 they shipped in</span> <span data-start="738.43" data-end="740.08">chrome version 2 in 2009 when it looked</span> <span data-start="740.08" data-end="740.86">like that</span> <span data-start="740.86" data-end="742.5">it's been around for a very long time</span> <span data-start="742.5" data-end="745.54">they're they're pretty similar web</span> <span data-start="745.54" data-end="747.31">worker sorry to service workers in the</span> <span data-start="747.31" data-end="748.87">way that you interact with them but the</span> <span data-start="748.87" data-end="749.8">purpose for them are completely</span> <span data-start="749.8" data-end="752.56">different web workers are a solution to</span> <span data-start="752.56" data-end="753.67">the problem with the browser that</span> <span data-start="753.67" data-end="755.83">everything is single threaded because</span> <span data-start="755.83" data-end="757.99">layout is constantly fighting for</span> <span data-start="757.99" data-end="760.27">resources on top of all of your logic if</span> <span data-start="760.27" data-end="761.47">you have a whole lot of different stuff</span> <span data-start="761.47" data-end="762.91">going on at once it creates this really</span> <span data-start="762.91" data-end="766.72">ugly janky experience that sucks and</span> <span data-start="766.72" data-end="769.42">it's not a good website in a tux so what</span> <span data-start="769.42" data-end="770.5">you're able to do is you're able to take</span> <span data-start="770.5" data-end="772.12">tasks and offload them to a background</span> <span data-start="772.12" data-end="774.46">thread so that your uh your UI is able</span> <span data-start="774.46" data-end="775.93">to constantly update in the way that you</span> <span data-start="775.93" data-end="777.61">want it to but you can still do those</span> <span data-start="777.61" data-end="781.39">heavy crunching things it's great so</span> <span data-start="781.39" data-end="783.04">super expensive functions become really</span> <span data-start="783.04" data-end="784.69">cheap and one of the things that we</span> <span data-start="784.69" data-end="786.34">ended up doing with it was creating</span> <span data-start="786.34" data-end="788.41">dynamic file size calculation so if you</span> <span data-start="788.41" data-end="790.15">look again this is that website that</span> </p>
<p><span data-start="790.15" data-end="791.95">I've shown you a number of times up in</span> <span data-start="791.95" data-end="794.11">the left hand corner it actually says</span> <span data-start="794.11" data-end="796">the number of kilobytes and bites of</span> <span data-start="796" data-end="798.46">every file that you have that's been</span> <span data-start="798.46" data-end="800.5">created so as you check stuff it updates</span> <span data-start="800.5" data-end="803.23">with those values now this is a hundred</span> <span data-start="803.23" data-end="804.64">percent client-side there's nothing</span> <span data-start="804.64" data-end="805.93">talking to a server because I want this</span> <span data-start="805.93" data-end="807.76">to work completely offline the way that</span> <span data-start="807.76" data-end="809.5">we do that was through a web worker we</span> <span data-start="809.5" data-end="812.61">register that web worker with a little</span> <span data-start="812.61" data-end="814.75">we call gzip worker and it's just a</span> <span data-start="814.75" data-end="816.85">basic function that gets a JSON object</span> <span data-start="816.85" data-end="819.25">and that passes it to that JSON object</span> <span data-start="819.25" data-end="821.35">to a worker and in father's a call back</span> <span data-start="821.35" data-end="823.33">to update the UI later on inside the</span> <span data-start="823.33" data-end="826.33">gzip file we import a couple of node</span> <span data-start="826.33" data-end="828.67">modules Packo which is a javascript</span> <span data-start="828.67" data-end="830.71">implementation of the deflate algorithm</span> <span data-start="830.71" data-end="832.33">for g zipping and then pretty bytes</span> <span data-start="832.33" data-end="834.07">which takes something like a hundred</span> <span data-start="834.07" data-end="836.14">bytes and makes it into point zero zero</span> <span data-start="836.14" data-end="837.61">point one kilobytes and makes it more</span> <span data-start="837.61" data-end="840.07">human readable and pretty so we just</span> <span data-start="840.07" data-end="842.23">listen to the message we parse the build</span> <span data-start="842.23" data-end="844.39">out of it we so we would pass the entire</span> <span data-start="844.39" data-end="847.39">build of moderniser to this function and</span> <span data-start="847.39" data-end="850.57">then we would take that string we pass</span> <span data-start="850.57" data-end="851.89">it into pretty bytes pretty by its</span> <span data-start="851.89" data-end="853.48">figures out how small or sorry we get</span> <span data-start="853.48" data-end="854.68">the original size of it through pretty</span> <span data-start="854.68" data-end="856.69">bytes then we also pass pretty bites the</span> <span data-start="856.69" data-end="859">gzipped and pack o deflate which is a</span> <span data-start="859" data-end="861.58">gzipped minified version of it with the</span> <span data-start="861.58" data-end="863.11">average server level which is six and</span> <span data-start="863.11" data-end="867.37">that gives us the size of the files so</span> <span data-start="867.37" data-end="868.72">you see originally was to point 64</span> <span data-start="868.72" data-end="870.64">kilobytes gzip it's down to 1.18 for</span> <span data-start="870.64" data-end="871.6">these first three things that are</span> <span data-start="871.6" data-end="874.16">clicked um</span> <span data-start="874.17" data-end="876.45">now there is not that's not the only</span> <span data-start="876.45" data-end="878.07">other worker we because we want to be</span> <span data-start="878.07" data-end="879.389">able to update that on the fly we have</span> <span data-start="879.389" data-end="881.49">to build stuff constantly which means we</span> <span data-start="881.49" data-end="883.05">can't wait for someone to click on the</span> <span data-start="883.05" data-end="885.149">build button we want to be able to build</span> <span data-start="885.149" data-end="886.68">in the background and what we the way we</span> <span data-start="886.68" data-end="888.75">do that again is through a web worker so</span> <span data-start="888.75" data-end="890.43">we have a separate worker for building</span> <span data-start="890.43" data-end="892.17">it's very similar registered the exact</span> <span data-start="892.17" data-end="895.38">same way and we post a message with the</span> <span data-start="895.38" data-end="897.87">config file that config so all of the</span> <span data-start="897.87" data-end="899.49">modernizer require modules are built</span> <span data-start="899.49" data-end="902.459">through one big Jason config um that</span> <span data-start="902.459" data-end="904.589">gets passed into the worker and the</span> <span data-start="904.589" data-end="906.99">worker loads up the moderniser requires</span> <span data-start="906.99" data-end="910.949">a s based builder and then that does the</span> <span data-start="910.949" data-end="912.959">on it then it registers for on message</span> <span data-start="912.959" data-end="914.459">and then that does the building of</span> <span data-start="914.459" data-end="917.13">moderniser and it reports back with the</span> <span data-start="917.13" data-end="919.11">final string so basically you're just</span> <span data-start="919.11" data-end="920.459">passing this along it's exactly like you</span> <span data-start="920.459" data-end="921.87">would imagine use pass on a config file</span> <span data-start="921.87" data-end="922.889">you get out of string the only</span> <span data-start="922.889" data-end="924.24">difference is that it's on a background</span> <span data-start="924.24" data-end="925.32">thread so we can be doing this</span> <span data-start="925.32" data-end="927.029">constantly in the background and you</span> <span data-start="927.029" data-end="930.029">wouldn't even notice so by the time that</span> <span data-start="930.029" data-end="931.86">somebody actually clicks that big pink</span> <span data-start="931.86" data-end="933.6">build button in the corner it's already</span> <span data-start="933.6" data-end="935.329">been built usually for several seconds</span> <span data-start="935.329" data-end="937.529">but they might be asking what if their</span> <span data-start="937.529" data-end="938.64">browser doesn't support web workers</span> <span data-start="938.64" data-end="940.649">first of all it's been around forever so</span> <span data-start="940.649" data-end="942.209">pretty much all browsers support them</span> <span data-start="942.209" data-end="943.829">they're all so many should use them if</span> <span data-start="943.829" data-end="944.76">they don't it's not that a good deal</span> <span data-start="944.76" data-end="947.579">they click on the build button and then</span> <span data-start="947.579" data-end="949.98">we just build then that's you know it's</span> <span data-start="949.98" data-end="951.209">fine there are not older browser they're</span> <span data-start="951.209" data-end="953.79">used to shitty experiences you know we</span> <span data-start="953.79" data-end="955.5">can just click on the button and go on</span> <span data-start="955.5" data-end="957.69">so that bill button actually doesn't</span> <span data-start="957.69" data-end="958.98">give you a file it opens up a pop-up</span> <span data-start="958.98" data-end="961.41">most of the time um with a couple of</span> <span data-start="961.41" data-end="962.699">options one of them is to copy to</span> <span data-start="962.699" data-end="964.529">clipboard there is to download copy to</span> <span data-start="964.529" data-end="966.779">clipboard again is something that has</span> <span data-start="966.779" data-end="968.1">been really difficult to do right on the</span> <span data-start="968.1" data-end="970.89">web for a very long time leaves a thing</span> <span data-start="970.89" data-end="972.51">called zero clipboard it's a pretty</span> <span data-start="972.51" data-end="974.49">simple API you just load it up and you</span> <span data-start="974.49" data-end="976.38">give it a listen for click event it</span> <span data-start="976.38" data-end="977.91">gives you the clipboard data you add it</span> <span data-start="977.91" data-end="979.44">to sorry you add your own data to a</span> <span data-start="979.44" data-end="980.819">clipboard and it's done it's pretty</span> <span data-start="980.819" data-end="981.899">straightforward the only crappy thing</span> <span data-start="981.899" data-end="983.339">the really crappy thing is it's built by</span> <span data-start="983.339" data-end="986.04">it's powered by flash it's one little</span> <span data-start="986.04" data-end="987.329">flash control that's put on anything you</span> <span data-start="987.329" data-end="988.86">want copy and that's how it works that's</span> <span data-start="988.86" data-end="990.63">how github stuff works that's how the</span> <span data-start="990.63" data-end="992.639">monitors are set work's currently and it</span> <span data-start="992.639" data-end="994.319">sucks flash sucks you don't want to use</span> <span data-start="994.319" data-end="996">flash because who wants to have flash</span> <span data-start="996" data-end="997.889">installed in my machine so we have a</span> <span data-start="997.889" data-end="999.36">modernized detective to see whether or</span> <span data-start="999.36" data-end="1000.889">not flash is installed and working as a</span> <span data-start="1000.889" data-end="1003.47">not blocked or click to play and if it</span> <span data-start="1003.47" data-end="1005">isn't then we load zero clipboard and if</span> <span data-start="1005" data-end="1007.73">it isn't if it is being blocked then we</span> <span data-start="1007.73" data-end="1009.139">it's something else and it's something</span> <span data-start="1009.139" data-end="1011.899">else is just a textarea box we just load</span> <span data-start="1011.899" data-end="1014.089">up as plain old Texas Reeboks inject the</span> <span data-start="1014.089" data-end="1015.92">values into it and then automatically</span> <span data-start="1015.92" data-end="1018.44">select it then that kind of command to</span> <span data-start="1018.44" data-end="1021.41">copy Club to copy to clipboard just</span> <span data-start="1021.41" data-end="1023.029">becomes a request to go ahead and copy</span> <span data-start="1023.029" data-end="1024.679">this to clipboard later on if degrades</span> <span data-start="1024.679" data-end="1027.079">pretty gracefully but another breaking</span> <span data-start="1027.079" data-end="1028.49">news did it because the video doesn't</span> <span data-start="1028.49" data-end="1032.72">work clipboard j/s is a new way to do</span> <span data-start="1032.72" data-end="1035">this that was added after I started</span> <span data-start="1035" data-end="1037.04">writing this it doesn't use flash it</span> <span data-start="1037.04" data-end="1038.6">uses some of the exec command stuff</span> <span data-start="1038.6" data-end="1039.709">that's been built in the browser forever</span> <span data-start="1039.709" data-end="1041.24">that actually started working in chrome</span> <span data-start="1041.24" data-end="1042.949">recently and it does the fall backs</span> <span data-start="1042.949" data-end="1044.179">automatically for you if i were to</span> <span data-start="1044.179" data-end="1045.53">rebuild this I'd probably just use this</span> <span data-start="1045.53" data-end="1047.36">that being said zero clipboard can be</span> <span data-start="1047.36" data-end="1048.62">great if you need more browser support</span> <span data-start="1048.62" data-end="1050.69">especially on older browsers excuse me</span> <span data-start="1050.69" data-end="1053.6">um the other option after copy to</span> <span data-start="1053.6" data-end="1055.88">clipboard is download download is</span> <span data-start="1055.88" data-end="1057.74">something obviously most of the people</span> <span data-start="1057.74" data-end="1058.97">probably just to get a file they don't</span> <span data-start="1058.97" data-end="1059.96">really want to copy it or pace at</span> <span data-start="1059.96" data-end="1061.669">themselves and so since this is a</span> <span data-start="1061.669" data-end="1063.08">hundred percent client-side we view this</span> <span data-start="1063.08" data-end="1065.419">using a couple different api's file</span> <span data-start="1065.419" data-end="1067.46">blobs URLs and the download attribute</span> <span data-start="1067.46" data-end="1069.08">now file blobs are pretty</span> <span data-start="1069.08" data-end="1070.419">straightforward you just give it a</span> <span data-start="1070.419" data-end="1072.62">string and it gives it creates a binary</span> <span data-start="1072.62" data-end="1074.15">representation in memory that you're</span> <span data-start="1074.15" data-end="1077.09">able to pass into a another API called</span> <span data-start="1077.09" data-end="1079.64">create object URL which turns it into a</span> <span data-start="1079.64" data-end="1083.21">blob URI so those instead of like HTTP</span> <span data-start="1083.21" data-end="1084.59">colon forward slash words has something</span> <span data-start="1084.59" data-end="1086.09">its blob colon forward slash where says</span> <span data-start="1086.09" data-end="1087.83">something and you get a reference to</span> <span data-start="1087.83" data-end="1089.21">that file that's been created on the</span> <span data-start="1089.21" data-end="1091.16">client side and then finally we have a</span> <span data-start="1091.16" data-end="1093.799">download attribute that lets it download</span> <span data-start="1093.799" data-end="1095.96">with instead of a random gibberish</span> <span data-start="1095.96" data-end="1097.669">looking string it gives it a nice pretty</span> <span data-start="1097.669" data-end="1099.98">moderniser got custom jas name so it</span> <span data-start="1099.98" data-end="1100.91">ends up looking like this in our</span> <span data-start="1100.91" data-end="1102.62">template we set an HR up to that href</span> <span data-start="1102.62" data-end="1104.53">downloaded download and a download works</span> <span data-start="1104.53" data-end="1106.61">you should get a pop-up and it says</span> <span data-start="1106.61" data-end="1107.99">moderniser custom download without ever</span> <span data-start="1107.99" data-end="1110.72">talking to the server it's great so blob</span> <span data-start="1110.72" data-end="1112.22">constructing is really well supported</span> <span data-start="1112.22" data-end="1113.84">blob URLs are pretty well supported</span> <span data-start="1113.84" data-end="1115.309">download attributes aren't and that</span> <span data-start="1115.309" data-end="1116.33">makes it a really kind of crappy</span> <span data-start="1116.33" data-end="1118.49">experience so for us we considered it a</span> <span data-start="1118.49" data-end="1120.83">no-go if they don't support it otherwise</span> <span data-start="1120.83" data-end="1122.09">they get this really random gibberish</span> <span data-start="1122.09" data-end="1123.59">file it doesn't work on certain versions</span> <span data-start="1123.59" data-end="1125.96">or older versions of websites oh sorry</span> <span data-start="1125.96" data-end="1128.87">up browsers specifically ie it makes a</span> <span data-start="1128.87" data-end="1130.52">lot more confusing experience and a lot</span> <span data-start="1130.52" data-end="1131.9">of people that are using our website are</span> <span data-start="1131.9" data-end="1133.82">for newer web developers and so we</span> <span data-start="1133.82" data-end="1137.419">wanted to try to avoid that so what we</span> <span data-start="1137.419" data-end="1139.82">ended up doing was kind of thinking</span> <span data-start="1139.82" data-end="1141.47">about how we structure this page</span> <span data-start="1141.47" data-end="1144.23">if you'll notice this pretty much is a</span> <span data-start="1144.23" data-end="1147.26">giant list of check boxes and a submit</span> <span data-start="1147.26" data-end="1149.39">button this is really just a form when</span> <span data-start="1149.39" data-end="1150.409">you get down to it even though it was</span> <span data-start="1150.409" data-end="1151.85">kind of a web application so we decided</span> <span data-start="1151.85" data-end="1154.13">to just people just let people post the</span> <span data-start="1154.13" data-end="1157.85">form what that so basically what we do</span> <span data-start="1157.85" data-end="1159.37">is we instead of having this template</span> <span data-start="1159.37" data-end="1162.74">anger peg we end up checking to see if</span> <span data-start="1162.74" data-end="1164.059">it supports everything if it is we set</span> <span data-start="1164.059" data-end="1165.89">it to that anchor tag and if it isn't we</span> <span data-start="1165.89" data-end="1169.33">just changed that download button to a</span> <span data-start="1169.33" data-end="1171.44">input type submit and that becomes a</span> <span data-start="1171.44" data-end="1173.179">form that just submit and they submit</span> <span data-start="1173.179" data-end="1175.25">that form and they get a post it post to</span> <span data-start="1175.25" data-end="1176.21">the server and the server itself</span> <span data-start="1176.21" data-end="1178.25">processes the file sends it back it all</span> <span data-start="1178.25" data-end="1180.26">works this is a possible because we're</span> <span data-start="1180.26" data-end="1181.909">using decent markup decent markup is</span> <span data-start="1181.909" data-end="1184.22">actually supported in all browsers for</span> <span data-start="1184.22" data-end="1186.2">the most part it's when you use HTML</span> <span data-start="1186.2" data-end="1188.84">properly and what's cool about using the</span> <span data-start="1188.84" data-end="1191.63">decent markup is that when you use we</span> <span data-start="1191.63" data-end="1192.95">like we have a whole lot of CSS on the</span> <span data-start="1192.95" data-end="1193.97">site but you don't actually need to use</span> <span data-start="1193.97" data-end="1196.88">it websites that works completely</span> <span data-start="1196.88" data-end="1200.35">without CSS like completely without CSS</span> <span data-start="1200.35" data-end="1202.4">everything functions you can check off</span> <span data-start="1202.4" data-end="1203.929">new stuff and it calculates the new</span> <span data-start="1203.929" data-end="1205.34">values and everything functions</span> <span data-start="1205.34" data-end="1208.73">completely right it's great um then on</span> <span data-start="1208.73" data-end="1210.47">top of that not is since we're doing all</span> <span data-start="1210.47" data-end="1211.73">this stuff and basically just a form we</span> <span data-start="1211.73" data-end="1214.159">don't even need JavaScript anymore it</span> <span data-start="1214.159" data-end="1216.59">actually functions completely in links</span> <span data-start="1216.59" data-end="1220.039">the old text based browser um so you can</span> <span data-start="1220.039" data-end="1222.82">actually have this web so sorry oh god</span> <span data-start="1222.82" data-end="1226.49">um yeah you can have the browser do</span> <span data-start="1226.49" data-end="1227.75">stuff and you don't get the file size</span> <span data-start="1227.75" data-end="1229.13">calculations you don't get the dynamic</span> <span data-start="1229.13" data-end="1230.419">counting but you're not really expecting</span> <span data-start="1230.419" data-end="1232.46">to have that experience on here you just</span> <span data-start="1232.46" data-end="1234.23">hit you hit the build button once you're</span> <span data-start="1234.23" data-end="1238.4">done download it save to disk save the</span> <span data-start="1238.4" data-end="1243.53">file and there we go cat moderniser and</span> <span data-start="1243.53" data-end="1245.96">it's there in gzip and my terminal</span> <span data-start="1245.96" data-end="1249.61">broken it's there it works it's great so</span> <span data-start="1249.61" data-end="1251.63">it's awesome it's a hundred percent</span> <span data-start="1251.63" data-end="1253.46">client-side unless it can't then it can</span> <span data-start="1253.46" data-end="1254.659">fall back and it still works it works</span> <span data-start="1254.659" data-end="1256.549">pretty much all browsers because we have</span> <span data-start="1256.549" data-end="1258.08">a couple of little tiny pieces in the</span> <span data-start="1258.08" data-end="1259.73">server side even though it's mostly</span> <span data-start="1259.73" data-end="1262.22">static files like this is basically our</span> <span data-start="1262.22" data-end="1264.679">entire server config we use happy it's</span> <span data-start="1264.679" data-end="1266.69">like 20 lines plus a couple other little</span> <span data-start="1266.69" data-end="1268.97">cleanup things but all we're doing is</span> <span data-start="1268.97" data-end="1270.35">reading out of the distribution</span> <span data-start="1270.35" data-end="1273.049">directory and getting your path applying</span> <span data-start="1273.049" data-end="1274.19">it to that in serving that file and</span> <span data-start="1274.19" data-end="1275.09">that's it it's</span> <span data-start="1275.09" data-end="1276.68">clean its I've everything works since</span> <span data-start="1276.68" data-end="1278.9">wonderful but again it's almost one</span> <span data-start="1278.9" data-end="1279.8">hundred percent because we wanted to</span> <span data-start="1279.8" data-end="1281.84">support that post environment so what we</span> <span data-start="1281.84" data-end="1283.04">end up doing is creating a little</span> <span data-start="1283.04" data-end="1284.57">function that we build from a posted</span> <span data-start="1284.57" data-end="1286.43">query we grab the payload of the post</span> <span data-start="1286.43" data-end="1288.41">and we send it through the moderniser</span> </p>
<p><span data-start="1288.41" data-end="1292.94">API on the server side apply the contact</span> <span data-start="1292.94" data-end="1297.41">contact just that header Jesus Creek to</span> <span data-start="1297.41" data-end="1299.66">it to get the file back and then add</span> <span data-start="1299.66" data-end="1301.61">that to the route config and we're good</span> <span data-start="1301.61" data-end="1303.65">it works for all browsers like really</span> <span data-start="1303.65" data-end="1305.09">all browsers it literally works in</span> <span data-start="1305.09" data-end="1306.86">mosaic if you open it in mosaic I tried</span> <span data-start="1306.86" data-end="1309.08">it today it's awesome it's really cool</span> <span data-start="1309.08" data-end="1311.54">um the internet is awesome HTML is</span> <span data-start="1311.54" data-end="1312.59">awesome you able to make some really</span> <span data-start="1312.59" data-end="1315.71">cool stuff but again no one cares we</span> <span data-start="1315.71" data-end="1317.18">have all these tools they don't really</span> <span data-start="1317.18" data-end="1319.07">care whether or not the website is great</span> <span data-start="1319.07" data-end="1320.81">or held it work went into it if it</span> <span data-start="1320.81" data-end="1322.28">doesn't fit their workflow they don't</span> <span data-start="1322.28" data-end="1323.72">want to go out of their way saving</span> <span data-start="1323.72" data-end="1325.94">developers to download a new website or</span> <span data-start="1325.94" data-end="1327.41">to download your site to see the site to</span> <span data-start="1327.41" data-end="1328.4">get the build every single time they</span> <span data-start="1328.4" data-end="1329.57">want to make a change they just want it</span> <span data-start="1329.57" data-end="1331.01">to work for their tool chain to get out</span> <span data-start="1331.01" data-end="1332.87">of the way so one of the biggest</span> <span data-start="1332.87" data-end="1334.34">requests we had was to make it work for</span> </p>
<p><span data-start="1334.34" data-end="1336.98">NPM and Bower and people always said you</span> <span data-start="1336.98" data-end="1338.18">know I want a bower install we had</span> <span data-start="1338.18" data-end="1339.71">dozens of issues on github with people</span> <span data-start="1339.71" data-end="1340.76">saying that why can't we Bower install</span> <span data-start="1340.76" data-end="1343.01">it I want NPM install it and the problem</span> <span data-start="1343.01" data-end="1344.36">is that there isn't a file everything's</span> <span data-start="1344.36" data-end="1345.92">modular there used to be one single</span> <span data-start="1345.92" data-end="1347.54">moderniser file that's not been the case</span> <span data-start="1347.54" data-end="1350.06">for years and so we say you can't and</span> <span data-start="1350.06" data-end="1352.13">they say but I want to and so again no</span> <span data-start="1352.13" data-end="1355.97">one cares um it's the problem is that we</span> <span data-start="1355.97" data-end="1357.8">can't really like art process the reason</span> <span data-start="1357.8" data-end="1359.18">why pushing back against it is we can't</span> <span data-start="1359.18" data-end="1361.22">really precompile these things and push</span> <span data-start="1361.22" data-end="1364.25">it because again they're 259 modules you</span> <span data-start="1364.25" data-end="1366.8">figure out the math it's like sick yeah</span> <span data-start="1366.8" data-end="1368.06">it's there's not real I don't think</span> <span data-start="1368.06" data-end="1369.29">there's a name for how big that number</span> <span data-start="1369.29" data-end="1371.96">is it's ridiculously big 616 decimal</span> <span data-start="1371.96" data-end="1375.8">places yeah we would blow up n p.m. we</span> <span data-start="1375.8" data-end="1376.97">would take it all down if we tried to</span> <span data-start="1376.97" data-end="1378.83">publish everything to it but no one</span> <span data-start="1378.83" data-end="1380.18">cares that we can't do that they just</span> <span data-start="1380.18" data-end="1381.89">wanted to work they just want it to do</span> <span data-start="1381.89" data-end="1384.14">it because it works so we're like we</span> <span data-start="1384.14" data-end="1385.61">have to solve this we figure the server</span> <span data-start="1385.61" data-end="1387.14">is already building polls that doing</span> <span data-start="1387.14" data-end="1389.66">builds for posts posted things and</span> <span data-start="1389.66" data-end="1391.25">there's already a unique way to identify</span> <span data-start="1391.25" data-end="1393.32">individual you build the moderniser</span> <span data-start="1393.32" data-end="1395.3">using the header that's at the top of</span> <span data-start="1395.3" data-end="1397.22">any file that's ever been built so we</span> <span data-start="1397.22" data-end="1398.69">ended up doing is making it so that you</span> <span data-start="1398.69" data-end="1401.93">can NPM install that URL and the same</span> <span data-start="1401.93" data-end="1404.39">server that serves the HTTP HTML for</span> <span data-start="1404.39" data-end="1406.52">moderniser actually will respond with a</span> <span data-start="1406.52" data-end="1408.63">tarball for Bauer or for NP</span> <span data-start="1408.63" data-end="1413.04">and so that again 99.99 static files</span> <span data-start="1413.04" data-end="1415.08">this is the one other edge case if we</span> <span data-start="1415.08" data-end="1417.39">get to the handler for the download page</span> <span data-start="1417.39" data-end="1419.52">it checks the safer user agent is Bauer</span> <span data-start="1419.52" data-end="1421.14">if it does it builds for Bauer check to</span> <span data-start="1421.14" data-end="1422.7">save your user agents NPM it builds from</span> <span data-start="1422.7" data-end="1424.62">p.m. otherwise it serves the HTML for</span> <span data-start="1424.62" data-end="1427.5">the page so modernizer is using a user</span> <span data-start="1427.5" data-end="1429">agent sniff to give you a good feature</span> <span data-start="1429" data-end="1431.19">and that's embarrassing but it works and</span> <span data-start="1431.19" data-end="1433.92">there's no other better way so um yeah</span> <span data-start="1433.92" data-end="1435.54">so this is it really all that's in there</span> <span data-start="1435.54" data-end="1437.55">for a build for Bauer we just grab this</span> <span data-start="1437.55" data-end="1440.15">a great node a package called archiver</span> <span data-start="1440.15" data-end="1443.13">create a tarball and then create the</span> <span data-start="1443.13" data-end="1444.69">bower jason file which is just like a</span> <span data-start="1444.69" data-end="1445.95">static file with a couple little pieces</span> <span data-start="1445.95" data-end="1448.05">in it the name if you've ever used Bauer</span> <span data-start="1448.05" data-end="1450.12">it's like a it's like it's package.json</span> <span data-start="1450.12" data-end="1451.38">you know the name of the file stuff like</span> <span data-start="1451.38" data-end="1453.69">that where it came from and then we</span> <span data-start="1453.69" data-end="1457.83">append the actual build and we reply</span> <span data-start="1457.83" data-end="1460.29">with a big target and so if you Bower</span> <span data-start="1460.29" data-end="1461.7">install that you get a tarball back it</span> <span data-start="1461.7" data-end="1463.29">works same thing with NPM there's as you</span> <span data-start="1463.29" data-end="1464.61">can tell there's basically no difference</span> <span data-start="1464.61" data-end="1466.04">the only difference is inside of this</span> <span data-start="1466.04" data-end="1468.78">package ace of a creation of the JSON</span> <span data-start="1468.78" data-end="1470.85">file and it's a little bit different and</span> <span data-start="1470.85" data-end="1471.99">the name spacing is actually different</span> <span data-start="1471.99" data-end="1474.3">on NPM these are in not accurate but</span> <span data-start="1474.3" data-end="1477.27">otherwise it's the same and so you might</span> <span data-start="1477.27" data-end="1478.5">have noticed that we're actually loading</span> <span data-start="1478.5" data-end="1480.27">the moderniser module in there and it's</span> <span data-start="1480.27" data-end="1481.38">kind of confusing where it's like I</span> <span data-start="1481.38" data-end="1482.82">thought you said it was an on NPM and</span> <span data-start="1482.82" data-end="1484.26">the problem is that there is a</span> <span data-start="1484.26" data-end="1485.97">moderniser module but it's actually for</span> <span data-start="1485.97" data-end="1489.06">the CLI command line tool so most of the</span> <span data-start="1489.06" data-end="1490.38">time when people are talking about we're</span> <span data-start="1490.38" data-end="1491.79">wanting to require moderniser they don't</span> <span data-start="1491.79" data-end="1493.2">actually mean the command line tool they</span> <span data-start="1493.2" data-end="1494.67">mean a build-up moderniser but they can</span> <span data-start="1494.67" data-end="1495.81">load on their website and just get it to</span> <span data-start="1495.81" data-end="1497.01">work and get their day done and get over</span> <span data-start="1497.01" data-end="1499.38">it so this is what the command line</span> <span data-start="1499.38" data-end="1501.93">thing looks like and it's useful for us</span> <span data-start="1501.93" data-end="1502.92">because we've been able to build all</span> <span data-start="1502.92" data-end="1504.39">these tools off of it it works great you</span> <span data-start="1504.39" data-end="1506.13">just can end up creating a file and blah</span> <span data-start="1506.13" data-end="1508.47">it's very flexible but it's not super</span> <span data-start="1508.47" data-end="1512.31">friendly especially if you are new to</span> <span data-start="1512.31" data-end="1513.69">web browsers like a lot of people are</span> <span data-start="1513.69" data-end="1515.1">they're not familiar with the CLI they</span> <span data-start="1515.1" data-end="1516.51">don't want to use the CLI one of the two</span> <span data-start="1516.51" data-end="1518.85">and so we were like let's try to make</span> <span data-start="1518.85" data-end="1520.05">this better rather than passing a lot of</span> <span data-start="1520.05" data-end="1521.37">flags we had an interface that we liked</span> <span data-start="1521.37" data-end="1523.62">and so we want to reuse it and so we did</span> </p>
<p><span data-start="1523.62" data-end="1528.24">I created a command line version of our</span> <span data-start="1528.24" data-end="1531.12">website that works completely in the</span> <span data-start="1531.12" data-end="1532.77">browser or sorry in the command line you</span> <span data-start="1532.77" data-end="1534.99">do all that stuff you can it build and</span> <span data-start="1534.99" data-end="1537.3">you can open it on code pen and it opens</span> <span data-start="1537.3" data-end="1540.36">in the browser and yeah you can check to</span> <span data-start="1540.36" data-end="1541.65">see if it works it works</span> <span data-start="1541.65" data-end="1543.96">it's cool and what's cool about that is</span> <span data-start="1543.96" data-end="1546.18">that so if people are necessarily</span> <span data-start="1546.18" data-end="1547.8">comfortable with building in the browser</span> <span data-start="1547.8" data-end="1549.69">or sorry building on the command line we</span> <span data-start="1549.69" data-end="1550.95">can give them basically the exact same</span> <span data-start="1550.95" data-end="1552">experience and it's a great kind of</span> <span data-start="1552" data-end="1554.16">introduction to it it's cool we're able</span> <span data-start="1554.16" data-end="1555.84">to basically use the vast majority of</span> <span data-start="1555.84" data-end="1558.33">our code because react is cool rape is</span> <span data-start="1558.33" data-end="1559.98">awesome it makes it via the reuse the</span> <span data-start="1559.98" data-end="1560.91">stuff and were able to port it directly</span> <span data-start="1560.91" data-end="1563.4">to react blessed which is a the</span> <span data-start="1563.4" data-end="1564.9">command-line API that we're using and</span> <span data-start="1564.9" data-end="1566.55">it's a really cool hack it really works</span> <span data-start="1566.55" data-end="1570.72">really well and yeah so that's pretty</span> <span data-start="1570.72" data-end="1573">much what I have to say but just want to</span> <span data-start="1573" data-end="1574.44">leave with this no one really cares how</span> <span data-start="1574.44" data-end="1576.21">cool your website is if it doesn't work</span> <span data-start="1576.21" data-end="1577.62">or if it takes a long time to get there</span> <span data-start="1577.62" data-end="1579.18">if you have really slow animations if</span> <span data-start="1579.18" data-end="1580.26">you do all these things people just</span> <span data-start="1580.26" data-end="1581.64">wanna get their work done most of the</span> <span data-start="1581.64" data-end="1582.66">time especially when you're working on a</span> <span data-start="1582.66" data-end="1585.39">tool but so what our goal is to get out</span> <span data-start="1585.39" data-end="1587.4">of the way in the best way possible make</span> <span data-start="1587.4" data-end="1589.38">it the most enjoyable experiences but as</span> <span data-start="1589.38" data-end="1591.26">possible to get out of the way quickly</span> <span data-start="1591.26" data-end="1594.03">don't let that stop you from making</span> <span data-start="1594.03" data-end="1595.71">awesome stuff and don't let that stop</span> <span data-start="1595.71" data-end="1597.18">you from using new shiny features you</span> <span data-start="1597.18" data-end="1599.4">can use a lot of really cool stuff and</span> <span data-start="1599.4" data-end="1600.75">still make it really fast and work</span> <span data-start="1600.75" data-end="1602.64">really well and just have a lot of fun</span> </p>
</section>