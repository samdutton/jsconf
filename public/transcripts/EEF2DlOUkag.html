<section>
<p><span data-start="26.64" data-end="38.07">Thank you, so what I am going to talk about here today is how to build a WYSIWYM editor</span> <span data-start="38.07" data-end="41.23">in the browser.</span> <span data-start="41.23" data-end="46.39">By what you see is what you mean, we usually mean something like what you see is what you</span> <span data-start="46.39" data-end="52.53">get, WYSIWYG where you have a visual representation of you content and can just edit that in the</span> <span data-start="52.53" data-end="60.26">obvious classical way, but instead of editing things like</span> <span data-start="60.26" data-end="68.89">font size margins you are editing semantic information so you get reduced cleaner representation</span> <span data-start="68.89" data-end="75.91">of the document where you say this is a paragraph, this is a link, and not this is Georgia 15</span> <span data-start="75.91" data-end="79.27">pixels italic.</span> <span data-start="79.27" data-end="85.28">This is usually beneficial when you want to have users edit content and you then later</span> <span data-start="85.28" data-end="91.32">want to use it in a different layout in a different context or you want to inspect it,</span> <span data-start="91.32" data-end="97.99">and transform it somehow, it's very useful to have semantic information about the content</span> <span data-start="97.99" data-end="101.66">rather than just layout information.</span> </p>
<p><span data-start="101.66" data-end="109.95">So, my newest project is called ProseMirror I am going to be talking about CodeMirror</span> <span data-start="109.95" data-end="118.64">and ProseMirror you shouldn't confuse them, ProseMirror is a semantic rich text editor,</span> <span data-start="118.64" data-end="124.71">so something like a WYSIWYG but for clean content.</span> <span data-start="124.71" data-end="132.93">This was recently launched and open sourced and it's my attempt to build an editor where</span> <span data-start="132.93" data-end="140.07">you can define a schema for you content and have the editor automatically enforce that</span> <span data-start="140.07" data-end="145.91">and provide the user with editing actions that stay within your schema so if you have</span> <span data-start="145.91" data-end="152.07">for example your Github you have you document model that includes references to issues and</span> <span data-start="152.07" data-end="158.13">commits you can't extend your document model to have first clause now it's links to commits</span> <span data-start="158.13" data-end="165.75">or links to users or whatever and have your users actually be working with a data model</span> <span data-start="165.75" data-end="170.209">that corresponds to what you actually want to work with.</span> </p>
<p><span data-start="170.209" data-end="179.01">ProseMirror also supports collaborative editing and is generally I hope the future of in-browser</span> <span data-start="179.01" data-end="181.959">prose writing.</span> <span data-start="181.959" data-end="188.18">So yeah I am going to be talking about how it's implemented and a major factor in any</span> <span data-start="188.18" data-end="197.29">kind of rich text editing implementation is the browser API called contentEditable.</span> <span data-start="197.29" data-end="206.5">This is what enables many browser almost all in-browser WYSIWYGs to exist at all if you</span> <span data-start="206.5" data-end="215.79">talk to people who have worked with it you will get complaints and lots of horrible stories.</span> <span data-start="215.79" data-end="220.129">So let me give a bit of background history.</span> <span data-start="220.129" data-end="227.62">So the year is 1979, Microsoft is on a roll when it comes to browser they just ported</span> <span data-start="227.62" data-end="233.569">JavaScript, introduced dynamic DOM manipulation then I guess I don't really know what happened</span> <span data-start="233.569" data-end="239.01">but assume someone there said let's make our browser and editor so people can write HTML</span> <span data-start="239.01" data-end="242.76">in the browser it's a very commendable idea.</span> <span data-start="242.76" data-end="251.44">What they ended up doing in IE 4 is introducing a feature called designMode a property you</span> <span data-start="251.44" data-end="258.669">set on your document which makes the whole document editable what it means is still not</span> <span data-start="258.669" data-end="265.289">completely clear there's no spec that covers this you can type into it you can back space</span> <span data-start="265.289" data-end="275.53">out stuff and a companion to this API is document.exec command which your scripts can call string</span> <span data-start="275.53" data-end="284">like bold or italic or insert ordered list or delete to perform other editing actions</span> <span data-start="284" data-end="285.75">on the document.</span> </p>
<p><span data-start="285.75" data-end="294.83">What you could do since IE 4 is create a frame, set to it be editable and then bind some key</span> <span data-start="294.83" data-end="304.3">binding and buttons some various exec command codes you would have a basic WYSIWYG editor.</span> <span data-start="304.3" data-end="311.13">This has worked since 1997, then in 2000 they added a second feature very simple to that</span> <span data-start="311.13" data-end="317.28">called contentEditable this is the same as designMode but per DOM node instead of the</span> <span data-start="317.28" data-end="318.59">whole document.</span> <span data-start="318.59" data-end="324.7">You don't have to create an iFrame you can just in your existing content set the switch</span> <span data-start="324.7" data-end="330.349">to make it editable to let your users add something to a piece of your page then save</span> <span data-start="330.349" data-end="333.39">it somehow.</span> <span data-start="333.39" data-end="334.39">Other</span> <span data-start="334.39" data-end="340.159">important thing you could do since this feature was introduced was set pieces of an editable</span> <span data-start="340.159" data-end="346.849">DOM node to be non editable you could set it back to false to be inside of the node,</span> <span data-start="346.849" data-end="353.27">that means that well the users can edit text round it but they can't move their cursor</span> <span data-start="353.27" data-end="355.57">into that node and start editing there.</span> </p>
<p><span data-start="355.57" data-end="360.28">This is also a big improvement, it allows you to protect some part of your document</span> <span data-start="360.28" data-end="366.76">or insert widgets that are not necessarily editable.</span> <span data-start="366.76" data-end="372.81">So, this was pretty much before the big JavaScript boom but people were slowly starting to use</span> <span data-start="372.81" data-end="381.81">this at some point it become really wide spread, I think CK editors from the early 2000s not</span> <span data-start="381.81" data-end="388.2">sure when tiny MC started they were libraries reping this and people using content management</span> <span data-start="388.2" data-end="390.27">systems.</span> <span data-start="390.27" data-end="399.52">At Mozilla there was a feeling we have to do something like this, it's a useful feature,</span> <span data-start="399.52" data-end="404.73">but they didn't quite like what Microsoft had done, and this was the browser war so</span> <span data-start="404.73" data-end="410.2">it was not like there was a very good communication of standards process.</span> </p>
<p><span data-start="410.2" data-end="415.279">They spent sometime trying to come up with a better solution but they never really agreed</span> <span data-start="415.279" data-end="416.88">on something.</span> <span data-start="416.88" data-end="422.14">So in the end they said ok we'll just do what Internet Explorer does so we're no longer</span> <span data-start="422.14" data-end="425.75">left out when it comes to rich text editor in-browser.</span> <span data-start="425.75" data-end="432.93">So they copied this feature, of course it didn't exactly copy it they some parts of</span> <span data-start="432.93" data-end="437.83">it were no use they left those out, they thought they knew better solutions for some other</span> <span data-start="437.83" data-end="443.74">parts for example where IE would add text if you made something bold, they said no we</span> <span data-start="443.74" data-end="447.539">have CSS that font width on them.</span> </p>
<p><span data-start="447.539" data-end="458.55">IE had the feature on both major browsers then and a few years later, actually took</span> <span data-start="458.55" data-end="467.83">until 2007 which is past the JavaScript boom that Firefox also added support for contentEditable,</span> <span data-start="467.83" data-end="474.24">and then the other browsers Safari, Chrome, Opera, all also took up the feature and implemented</span> <span data-start="474.24" data-end="482.05">it one way or another and now it's kind of considered part of the expected API in a modern</span> <span data-start="482.05" data-end="487.62">graphical browser.</span> <span data-start="487.62" data-end="491.09">So why is this a good thing?</span> <span data-start="491.09" data-end="496.65">The other controls that we have to implement editing in a browser are text area and text</span> <span data-start="496.65" data-end="497.83">input.</span> <span data-start="497.83" data-end="505.01">Both of which are constrained to atomic blobs of plain text you can't really do many of</span> <span data-start="505.01" data-end="511.48">the things you want to do with them like doing rich text in them is a non starter and even</span> <span data-start="511.48" data-end="516.83">adding some helpful widgets or syntax highlighting is almost impossible to do on top of text</span> <span data-start="516.83" data-end="519.2">area.</span> </p>
<p><span data-start="519.2" data-end="525.58">So it's great then we have an alternative that we can do solid rich text editing or</span> <span data-start="525.58" data-end="531.81">more or less solid rich text editing in a browser, things like content management systems</span> <span data-start="531.81" data-end="539.05">that exist entirely online, earlier code editors were also based on this.</span> <span data-start="539.05" data-end="542.69">This is wonderful.</span> </p>
<p><span data-start="542.69" data-end="554.91">Except of course, it has problems a major thing HTML scope is not gigantic, you might</span> <span data-start="554.91" data-end="565.13">not want that whole scope for example, first version of CodeMirror it was based on contentEditable</span> <span data-start="565.13" data-end="571.71">images links whole tables into the editor I had to somehow deal with this.</span> <span data-start="571.71" data-end="578.45">So you can do that you can filter content, you properly want to filter the content anyway,</span> <span data-start="578.45" data-end="584.02">it comes out of this by default, it's very, very ugly.</span> <span data-start="584.02" data-end="592.55">So that modern WYSIWYG browsers have pretty advanced mechanisms for cleaning out the HTML</span> <span data-start="592.55" data-end="599.98">inside of the editor, but then there's still all the browser differences, there's no spec,</span> <span data-start="599.98" data-end="601.22">each browser.</span> </p>
<p><span data-start="601.22" data-end="607.83">This is a very big scope of what editing HTML really means, there's cursor motion through</span> <span data-start="607.83" data-end="613.13">tables, adding columns to table, what happens when you present enter in a definition list,</span> <span data-start="613.13" data-end="618.11">what exactly is the cursor position if it's moving across the boundaries of block elements,</span> <span data-start="618.11" data-end="619.92">what is a valid cursor position.</span> </p>
<p><span data-start="619.92" data-end="627.83">These are all valid questions, they came up with slightly different answers to them.</span> <span data-start="627.83" data-end="629.58">Then there's bugs.</span> <span data-start="629.58" data-end="630.58">Many</span> <span data-start="630.58" data-end="631.58">bugs.</span> <span data-start="631.58" data-end="636.64">The feeling I get is that no-one really maybe except for the few engineers that started</span> <span data-start="636.64" data-end="641.55">this thing, no-one really felt like implementing this but it was something that is needed and</span> <span data-start="641.55" data-end="647">expected and so all the browser vendors had to somehow ad this dragon of a sub browser</span> <span data-start="647" data-end="654.47">that interacted with everything in all kinds of horrible ways, bugs with language and bug</span> <span data-start="654.47" data-end="660.05">trackers for years an years it seems no-one really cared all that much.</span> </p>
<p><span data-start="660.05" data-end="666.56">The situation has recently improved, currently on modern browsers you can really make some</span> <span data-start="666.56" data-end="671.8">assumptions about what is going to happen to your HTML as the user is editing it, didn't</span> <span data-start="671.8" data-end="677.32">used to be the case in CodeMirror 1, I have just piles and piles of workarounds to deal</span> <span data-start="677.32" data-end="679.03">with all these weird issues.</span> <span data-start="679.03" data-end="687.69">It was only a text editor, it will be a lot worse if you actually support rich content.</span> <span data-start="687.69" data-end="696.68">So, people really got annoyed with this and then there is a generation of editors, it</span> <span data-start="696.68" data-end="703.46">started with code editors, who just say, "Ok, we're not going to touch this at all, we'll</span> <span data-start="703.46" data-end="710.19">figure something out ourselves, we implement everything, so we implement our own selection,</span> <span data-start="710.19" data-end="716.92">just the DOM is not actually editable, we pretend it is by capturing events and changing</span> <span data-start="716.92" data-end="724.62">your documents you see on the screen in response to these events."</span> </p>
<p><span data-start="724.62" data-end="731.8">The first one to pull this off was the Ace code editor at that point I was still messing</span> <span data-start="731.8" data-end="738.12">about with contentEditable in my own code editing, I thought ok this is clearly superior,</span> <span data-start="738.12" data-end="744.79">I just dropped content editor and never went back.</span> <span data-start="744.79" data-end="752.81">Google docs, uses this, what you see blinking on the green is a little gif that's hidden</span> <span data-start="752.81" data-end="760.61">and shown periodically, you can very far, on desk top browsers you can get a good editing</span> <span data-start="760.61" data-end="765.56">experience using this technique.</span> <span data-start="765.56" data-end="771.55">At some point you do run into problems, if you maintain your own selection entirely,</span> <span data-start="771.55" data-end="777.49">you get all the complexity of bi directional text on your plate you have to implement what</span> <span data-start="777.49" data-end="782.6">the cursor is supposed to be doing, if it moves right to left, then enters left to right</span> <span data-start="782.6" data-end="792.96">text and there is an island of.. if you are mixing Arabic or Hebrew or other scripts you</span> <span data-start="792.96" data-end="799.04">get islands inside of your paragraphs that are running in different directions, people</span> <span data-start="799.04" data-end="800.04">need like this.</span> </p>
<p><span data-start="800.04" data-end="805.36">Like Arabic or Hebrew writers really need this to be work, you can't do much with your</span> <span data-start="805.36" data-end="812.03">editor if it doesn't work, it's gigantically difficult to get it right.</span> <span data-start="812.03" data-end="817.779">The content menu should shows cut and paste, if you click on it, if you have a non-editable</span> <span data-start="817.779" data-end="825.35">gif there, it won't know.</span> <span data-start="825.35" data-end="830.05">You can find the hex for this, the hex for this is to pop-up a tiny transparent text</span> <span data-start="830.05" data-end="836.49">area under the cursor when the user right clicks and hooks up the right thing when he</span> <span data-start="836.49" data-end="843.48">cuts or pastes, you can get it to work but it's painful or awkward.</span> <span data-start="843.48" data-end="850.41">Then, mobile interfaces, touch interfaces became widespread and the integration Between</span> <span data-start="850.41" data-end="860.84">the selection and touch interface is very deep and very subtle, producing a native selection,</span> <span data-start="860.84" data-end="865.4">a native field to manipulate the selection when you are not actually letting the browser</span> <span data-start="865.4" data-end="872.32">know about the selection is almost impossible, I don't think anyone has pulled it off yet.</span> </p>
<p><span data-start="872.32" data-end="876.3">So this may not be the right solution either.</span> <span data-start="876.3" data-end="883.38">So maybe let's meet in the middle and this is the idea that prompted ProseMirror, give</span> <span data-start="883.38" data-end="891.71">the editor the visible DOM, when the user does something and it generates an event,</span> <span data-start="891.71" data-end="901.27">we step in and say doing do anything browser, we'll handle this and get — isolate this from</span> <span data-start="901.27" data-end="908.74">a lot of the horrors of contentEditable, the random manipulation by the DOM is no longer</span> <span data-start="908.74" data-end="915.38">happens, it allows us to define the model and be the</span> <span data-start="915.38" data-end="923.39">only one touching that, in the older approach the DOM is your document model.</span> </p>
<p><span data-start="923.39" data-end="930.16">You don't keep your own copy of the data you let the DOM determine what the document looks</span> <span data-start="930.16" data-end="935.15">like, you don't know what the browser will do with this, it's like building on quicksand,</span> <span data-start="935.15" data-end="941.68">things might change, notes that you somehow depending on existing might be replaced by</span> <span data-start="941.68" data-end="953.79">a copy, having full control offer your document model is a very useful thing to do and I think</span> <span data-start="953.79" data-end="964.779">some of the other WYSIWYGs that have cropped up recently are also moving in this direction.</span> <span data-start="964.779" data-end="965.779">.</span> <span data-start="965.779" data-end="969.39">Yeah, ProseMirror is designed from the ground up with the assumption that we have a document</span> <span data-start="969.39" data-end="976.16">model and then there is a DOM, the DOM is a view on the document model, the document</span> <span data-start="976.16" data-end="983.42">is solid we have it entirely, when it's changed we update the DOM ourselves and show the user</span> <span data-start="983.42" data-end="994.25">the pseudo editable thing, it's supposed to be editable but we don't let them edict directly,</span> <span data-start="994.25" data-end="1001.13">the selection is not a real selection you can manipulate on a touch interface, bi directional</span> <span data-start="1001.13" data-end="1005.41">cursor motion by bi directional text can be left through the browser, we dent want to</span> <span data-start="1005.41" data-end="1009.27">think about that, that saves complexity.</span> </p>
<p><span data-start="1009.27" data-end="1014.62">Of course implementing our own document model and all possible changes is also a lot of</span> <span data-start="1014.62" data-end="1020.62">complexity, but this is complexity I think you want as a text editor, you want to define</span> <span data-start="1020.62" data-end="1024.02">it in one predictable, well-defined way.</span> <span data-start="1024.02" data-end="1032.93">You want to make them customisable, you want to cut out the browser when it comes to that.</span> <span data-start="1032.93" data-end="1040.13">So I'm going to go into ProseMirror document model for a bit, three base much like the</span> <span data-start="1040.13" data-end="1048.24">DOM, if you have a document with a list of three items, it looks something like this.</span> <span data-start="1048.24" data-end="1055.59">You get a list now or three item notes, paragraph notes with some text content in it.</span> <span data-start="1055.59" data-end="1060.73">One thing that it does very differently from the DOM it's a persistent data structure,</span> <span data-start="1060.73" data-end="1066.4">so if you update it you create a new version and the old version is untouched, so you just</span> <span data-start="1066.4" data-end="1068.929">don't go in there and start adding children, I don't know where.</span> <span data-start="1068.929" data-end="1078.53">There is a well-defined set of possible updates and you apply an update to get a new document.</span> <span data-start="1078.53" data-end="1083">This is not as expensive as it sounds, it can do data sharing if you an item to this</span> <span data-start="1083" data-end="1091.09">list here, you just reuse the old item notes and make a copy of the document and the list</span> <span data-start="1091.09" data-end="1096.63">notes, the fourth child in the list notes, you are only copying two notes rather than</span> <span data-start="1096.63" data-end="1100.55">your whole document structure.</span> <span data-start="1100.55" data-end="1105.83">Another thing that ProseMirror does differently from the DOM, when you have in line content</span> <span data-start="1105.83" data-end="1114.25">this is how you represent a paragraph with a bees of link and note text in it, you create</span> <span data-start="1114.25" data-end="1120.9">a subtree with for example a strong note and you put the content that's strong under that.</span> </p>
<p><span data-start="1120.9" data-end="1127.38">ProseMirror actually makes linear, where in line paragraph content is always a sequence</span> <span data-start="1127.38" data-end="1134.27">of pieces of text with styling information and images or notes that can appear here,</span> <span data-start="1134.27" data-end="1138.88">they don't nest, beyond the paragraph level there is no nesting you can see how this is</span> <span data-start="1138.88" data-end="1140.77">harder to read than this.</span> <span data-start="1140.77" data-end="1145.95">It's the same when you are dealing with it in code, a lot of the things you want to do</span> <span data-start="1145.95" data-end="1150.9">are much easier on this, for example, verifying that you are not emphasising a piece of text</span> <span data-start="1150.9" data-end="1158.32">twice, it's trivial and this tree representation is a pain in the.. tree representation similarly</span> <span data-start="1158.32" data-end="1165.46">if we want to represent positions in the paragraph we can just a character offset and we</span> <span data-start="1165.46" data-end="1168.52">don't have to worry about tree relations.</span> </p>
<p><span data-start="1168.52" data-end="1175.8">So this was a big win and made it easier to define a lot of things.</span> <span data-start="1175.8" data-end="1179.19">So let's see what happens when ProseMirror captures events.</span> <span data-start="1179.19" data-end="1185.08">You have your editor, it's rendered a piece of editable DOM corresponding to the document</span> <span data-start="1185.08" data-end="1192.59">it has itself in memory software, and someone presses 'A', we capture an event for that</span> <span data-start="1192.59" data-end="1195.92">and create a change object.</span> <span data-start="1195.92" data-end="1202.39">Changes in ProseMirror are first class objects which you can store and pass around and we'll</span> <span data-start="1202.39" data-end="1204">come back to that later.</span> <span data-start="1204" data-end="1208.99">Then we apply the change object to our current documents, get the new documents, make that</span> <span data-start="1208.99" data-end="1216.6">the current documents and schedule a DOM update, similarly if you press 'Backspace', you just</span> <span data-start="1216.6" data-end="1222.65">compute what you want to be deleting with backspace, create a change, take the content</span> <span data-start="1222.65" data-end="1229.26">of the clipboard, pass it into our document format and replace the selection with this</span> <span data-start="1229.26" data-end="1235.26">document fragment to get another change object.</span> <span data-start="1235.26" data-end="1240.429">Updating the DOM is then done by, as I scheduling updates using request information frames,</span> <span data-start="1240.429" data-end="1246.799">the next time the browser does an actual redraw it will first run are code which is responsible</span> <span data-start="1246.799" data-end="1252.39">for making sure the DOM reflects the current document the nice thing about the persistent</span> <span data-start="1252.39" data-end="1259.13">dock searches we can do pretty much react, we can div the document with the current document</span> <span data-start="1259.13" data-end="1264.54">and make the changes only that are necessary to the DOM to move to the new document, this</span> <span data-start="1264.54" data-end="1273.559">is insanely efficient and fast, we can just do one point to compare, ok, nothing changed</span> <span data-start="1273.559" data-end="1276.24">here and move on to the next note.</span> </p>
<p><span data-start="1276.24" data-end="1288.42">Of course it's not entirely perfect, in some cases parses do not fire good events, — you</span> <span data-start="1288.42" data-end="1295.58">write click and choose another spelling of this world, then it will just modify the DOM</span> <span data-start="1295.58" data-end="1300.7">and then say, "Input", meaning something changed, you don't know anything about it.</span> <span data-start="1300.7" data-end="1306.3">So, we have to deal with that and in this case we just take the part of the DOM, like</span> <span data-start="1306.3" data-end="1311.559">the block elements around the cursor, reparse those, div those with our understanding of</span> <span data-start="1311.559" data-end="1317.559">what those parts of that document look like and arrive at change from that, fortunately</span> <span data-start="1317.559" data-end="1324.74">I've only run into this problem for simple textual changes and deriving a simple text</span> <span data-start="1324.74" data-end="1333.21">change is safe, nothing weird can happen there, so far this is working well I'm still expecting</span> <span data-start="1333.21" data-end="1337.4">at some point to run into more problems here.</span> <span data-start="1337.4" data-end="1348.1">So, having all these persistent objects representing everything in a nice value way, we can define</span> <span data-start="1348.1" data-end="1356.41">a kind of algebra of changes, the basic operation is applying the change to a document.</span> </p>
<p><span data-start="1356.41" data-end="1361.78">Here we have a blue thing for a document and an orange thing for a change and we apply</span> <span data-start="1361.78" data-end="1368.29">that getting a new document, in this case we delete the part in 0 paragraph between</span> <span data-start="1368.29" data-end="1378.809">character off set 2 and 8, we get a new document object and also a map.</span> <span data-start="1378.809" data-end="1386.34">A map is a position map, it's a way to associate positions in the pre-change version of the</span> <span data-start="1386.34" data-end="1391.47">document with positions in the post change document, in this case we can query this map</span> <span data-start="1391.47" data-end="1398.63">to ask cursor position in the first paragraph at position 11 in the old document, where</span> <span data-start="1398.63" data-end="1399.75">is this in the new document.</span> <span data-start="1399.75" data-end="1406.16">It will say, "It's positioned 05", meaning the fifth character in the first.. this is</span> <span data-start="1406.16" data-end="1411.47">mainly used for making the cursor move as the document changes, so it shouldn't jump</span> <span data-start="1411.47" data-end="1413.64">around but stay in its position.</span> </p>
<p><span data-start="1413.64" data-end="1416.72">There is a bunch of nice things you can</span> <span data-start="1416.72" data-end="1422.56">do with this, like checking pieces of the document you just create two positions in</span> <span data-start="1422.56" data-end="1428.059">the document around the part you are interested in, you keep mapping those to the new document</span> <span data-start="1428.059" data-end="1434.78">and you end up knowing where the text you are checking ended up, it's also essential</span> <span data-start="1434.78" data-end="1441.43">for collaborative editing, it allows us by mapping the positions associated with the</span> <span data-start="1441.43" data-end="1447.49">change object to move changes from one document to another version of that document.</span> <span data-start="1447.49" data-end="1455.7">So, for example, if we had beyond this delete operation we had another change object saying,</span> <span data-start="1455.7" data-end="1465.22">"Insert a character at position 11", we can now say that same change but applied to the</span> <span data-start="1465.22" data-end="1472.45">second document is, insert the same character at position 5, so if you have a collaborative</span> <span data-start="1472.45" data-end="1480.36">editing set up and two users make it concurrently, one of them will end up going first and the</span> <span data-start="1480.36" data-end="1486.78">other one will have this change that they have made, but that they're not able to apply</span> <span data-start="1486.78" data-end="1489.94">to the current document because the document changed in the meantime.</span> </p>
<p><span data-start="1489.94" data-end="1495.67">They can use this approach to take the change that the other user made, move their own changeover</span> <span data-start="1495.67" data-end="1501.77">it and then apply it and retry pushing it to the server, so it's kind of like, get to</span> <span data-start="1501.77" data-end="1507.35">base, you try to push, you get a conflict, you try to rebase locally and then you try</span> <span data-start="1507.35" data-end="1512.77">to repush again, it works quite well, there is quite a bit to it actually, you can find</span> <span data-start="1512.77" data-end="1520.222">a long discrimination on my blog, it works quite well, it's a relatively simple and solid</span> <span data-start="1520.222" data-end="1521.78">way to do collaborative editing.</span> <span data-start="1521.78" data-end="1528.34">There is more applications of this, say change tracking, if you just keep a history of all</span> <span data-start="1528.34" data-end="1532.929">your changes, you can always find out where a piece of the document originated, stuff</span> <span data-start="1532.929" data-end="1534.47">like that.</span> <span data-start="1534.47" data-end="1540.27">I'm sure there is more, we haven't really explored this far yet, but it's a nice place</span> <span data-start="1540.27" data-end="1542.28">to, nice basis to build on.</span> <span data-start="1542.28" data-end="1547.77">Then I want to, very briefly talk about the future.</span> <span data-start="1547.77" data-end="1555.09">So, the W 3 C is working on an update to this contentEditable standard which would allow</span> <span data-start="1555.09" data-end="1561.33">a new mode of contentEditable, where you are supposed to do exactly this, the document</span> <span data-start="1561.33" data-end="1568.57">isn't editable, you are supposed to capture events and edit the inventory yourself, then</span> <span data-start="1568.57" data-end="1572.82">they will also have to define a few more events for stuff like the spell checking issue that</span> </p>
<p><span data-start="1572.82" data-end="1580.96">I showed before and a bunch more like this, but yeah, that would be nice because it relives</span> <span data-start="1580.96" data-end="1588.5">the browser vendors of maintaining this whole horrible blob of code and it gives editor</span> <span data-start="1588.5" data-end="1594.73">implementers a view of how to implement a robust solid editor, without going insane</span> <span data-start="1594.73" data-end="1597.75">in the process.</span> </p>
<p><span data-start="1597.75" data-end="1602.41">Of course, you never know when W 3 C standard will actually end up in browsers, but I'm</span> <span data-start="1602.41" data-end="1606.809">told that browsers are enthusiastic about this, probably for the reasons I mentioned,</span> <span data-start="1606.809" data-end="1611.08">it will probably be happening, but the specification isn't finished yet, it will probably be a</span> <span data-start="1611.08" data-end="1613.38">long time.</span> <span data-start="1613.38" data-end="1620.42">This is the URLs, the ProseMirror.net and Github.com/ProseMirror.</span> <span data-start="1620.42" data-end="1631.679">Feel free to play with it, it's not finished yet but it works as it is, the major big thing</span> <span data-start="1631.679" data-end="1638.03">that has to improve is the API or language for defining your own document schemers and</span> <span data-start="1638.03" data-end="1644.02">having flexible for all the things you might want in your document schemer.</span> <span data-start="1644.02" data-end="1651.2">We are having a meet up on Monday around this project here in Berlin, if you think you might</span> <span data-start="1651.2" data-end="1658.76">be interested, go to discuss.ProseMirror.net, a discussion forum and one of the topics is</span> <span data-start="1658.76" data-end="1659.76">this</span> <span data-start="1659.76" data-end="1662.65">meet up, you are welcome to apply as well.</span> </p>
<p><span data-start="1662.65" data-end="1664.71">That's it, thank you for listening.</span> </p>
</section>