1
00:00:31,840 --> 00:00:34,780

I'm Mary I'm going to talk about pistol

2
00:00:34,780 --> 00:00:37,360
 which is a game i wrote in

3
00:00:37,360 --> 00:00:42,130
which is a game i wrote in
JavaScript you played a pistol in

4
00:00:42,130 --> 00:00:45,150
this game and i'll start off with a demo

5
00:00:45,150 --> 00:00:50,590
to show how it works so you're the

6
00:00:50,590 --> 00:00:54,010
little women on the bottom there and you

7
00:00:54,010 --> 00:00:55,900
have to kill all of these policemen in

8
00:00:55,900 --> 00:01:35,580
the level

9
00:01:35,590 --> 00:01:51,640
see you get the idea okay um so I read

10
00:01:51,640 --> 00:01:53,679
it in JavaScript and it's based on a

11
00:01:53,679 --> 00:01:55,689
framework called the render engine which

12
00:01:55,689 --> 00:01:57,459
is written by a man called breakfast or

13
00:01:57,459 --> 00:02:00,640
e it's really cool it runs in the canvas

14
00:02:00,640 --> 00:02:04,000
element and it works in any modern web

15
00:02:04,000 --> 00:02:06,850
browser but I'm not going to talk about

16
00:02:06,850 --> 00:02:10,200
any of that I'm going to talk about

17
00:02:10,200 --> 00:02:12,579
fakery which i think is essential to

18
00:02:12,579 --> 00:02:16,060
making games collision detection so the

19
00:02:16,060 --> 00:02:18,760
code that i use to figure out what the

20
00:02:18,760 --> 00:02:21,370
two objects were colliding artificial

21
00:02:21,370 --> 00:02:23,440
intelligence so the code that runs the

22
00:02:23,440 --> 00:02:26,019
enemies and at the end a little bit

23
00:02:26,019 --> 00:02:31,410
about falling in love so fakery first up

24
00:02:31,410 --> 00:02:33,790
recently over this book called Tinker

25
00:02:33,790 --> 00:02:35,769
Tailor Soldier Spy which is by a man

26
00:02:35,769 --> 00:02:40,389
called John the Carrie and I became kind

27
00:02:40,389 --> 00:02:41,620
of completely obsessed with the book

28
00:02:41,620 --> 00:02:44,350
I've read it several times and it's

29
00:02:44,350 --> 00:02:47,739
about mi6 the British secret service and

30
00:02:47,739 --> 00:02:51,280
they discover that they've got a Russian

31
00:02:51,280 --> 00:02:53,790
agent working inside the organization

32
00:02:53,790 --> 00:02:55,870
and they don't know who he is and

33
00:02:55,870 --> 00:02:58,630
they've got to find him and the name for

34
00:02:58,630 --> 00:03:03,579
such a person is a mall and the way this

35
00:03:03,579 --> 00:03:06,329
person works as they pretend to be in a

36
00:03:06,329 --> 00:03:08,590
kind of helping the organization they're

37
00:03:08,590 --> 00:03:10,329
a part of but actually they're working

38
00:03:10,329 --> 00:03:14,579
against it and I think if you're a mall

39
00:03:14,579 --> 00:03:16,780
then you've got to keep like two

40
00:03:16,780 --> 00:03:19,930
realities in your head first of all this

41
00:03:19,930 --> 00:03:22,419
kind of fake reality which you're trying

42
00:03:22,419 --> 00:03:23,709
to convince all the people around you

43
00:03:23,709 --> 00:03:24,579
that you're working for British

44
00:03:24,579 --> 00:03:27,130
interests to bring down the Russians or

45
00:03:27,130 --> 00:03:29,889
whatever arm but actually underneath is

46
00:03:29,889 --> 00:03:32,139
this real reality where in fact you're

47
00:03:32,139 --> 00:03:33,669
trying to feed information back to the

48
00:03:33,669 --> 00:03:36,609
Russians or trying to sabotage British

49
00:03:36,609 --> 00:03:39,370
operations and I think making games you

50
00:03:39,370 --> 00:03:41,590
have to do exactly the same thing to

51
00:03:41,590 --> 00:03:43,090
keep these two realities in your head

52
00:03:43,090 --> 00:03:45,939
where there's the kind of fake reality

53
00:03:45,939 --> 00:03:47,829
we are trying to conjure these illusions

54
00:03:47,829 --> 00:03:49,120
in the players head so

55
00:03:49,120 --> 00:03:51,040
you want them to believe that there

56
00:03:51,040 --> 00:03:53,950
really a grenade has just gone off by

57
00:03:53,950 --> 00:03:57,310
their head or that they're trying to

58
00:03:57,310 --> 00:03:59,590
kill policemen in some crazy utopian

59
00:03:59,590 --> 00:04:01,690
world or whatever but then underneath

60
00:04:01,690 --> 00:04:03,340
that you've got the real reality which

61
00:04:03,340 --> 00:04:05,170
is just pixels moving around on a screen

62
00:04:05,170 --> 00:04:09,250
so you a single red pixel might model

63
00:04:09,250 --> 00:04:12,010
something like a fireball coming out of

64
00:04:12,010 --> 00:04:13,989
an exploding barrel or a piece of

65
00:04:13,989 --> 00:04:17,650
shrapnel from a grenade or a flame

66
00:04:17,650 --> 00:04:20,079
licking up out of a bin that has a fire

67
00:04:20,079 --> 00:04:24,280
burning inside it and so I'm going to

68
00:04:24,280 --> 00:04:26,050
talk about a few of the bits of fakery

69
00:04:26,050 --> 00:04:30,850
that I did in pistol slap and first up

70
00:04:30,850 --> 00:04:34,300
particles so of particle is just a name

71
00:04:34,300 --> 00:04:36,220
for a single pixel which has a certain

72
00:04:36,220 --> 00:04:40,630
color and a set of behaviors and I use

73
00:04:40,630 --> 00:04:42,070
particles for a bunch of different

74
00:04:42,070 --> 00:04:45,250
things in the game so the five walls

75
00:04:45,250 --> 00:04:46,810
that are thrown out by an exploding

76
00:04:46,810 --> 00:04:50,350
barrel the fragments of shrapnel that a

77
00:04:50,350 --> 00:04:52,479
produced foot by grenade when it

78
00:04:52,479 --> 00:04:55,210
explodes the shrapnel that's thrown up

79
00:04:55,210 --> 00:04:56,889
by a mortar round when it hits the

80
00:04:56,889 --> 00:04:59,830
ground the flashes that come out of the

81
00:04:59,830 --> 00:05:02,169
muzzle of a gun when it's fired the

82
00:05:02,169 --> 00:05:04,450
sparks that have thrown out by firework

83
00:05:04,450 --> 00:05:06,190
exploding the flames that come out of a

84
00:05:06,190 --> 00:05:09,070
barrel that's on fire the debris that

85
00:05:09,070 --> 00:05:11,590
comes out when a bullet hits a wall and

86
00:05:11,590 --> 00:05:13,599
there's like this shower of sparks that

87
00:05:13,599 --> 00:05:16,840
come out or the drops of blood that spew

88
00:05:16,840 --> 00:05:18,250
out of an enemy when they're hit with a

89
00:05:18,250 --> 00:05:23,560
bullet so this is a fire done with

90
00:05:23,560 --> 00:05:26,740
particles and there's four basic rules

91
00:05:26,740 --> 00:05:29,610
that control each of these particles

92
00:05:29,610 --> 00:05:33,310
number one they have a fixed life so in

93
00:05:33,310 --> 00:05:35,590
the game in pistol slide seven hundred

94
00:05:35,590 --> 00:05:38,740
milliseconds number two they have a

95
00:05:38,740 --> 00:05:41,349
fixed color cycle so they go from yellow

96
00:05:41,349 --> 00:05:45,760
to red via orange number three days

97
00:05:45,760 --> 00:05:47,800
start with a random speed so that's how

98
00:05:47,800 --> 00:05:49,960
you get that high up red particle at the

99
00:05:49,960 --> 00:05:52,389
top because that had a higher speed than

100
00:05:52,389 --> 00:05:57,010
average and number four if your fire is

101
00:05:57,010 --> 00:05:59,110
burning between here and here then each

102
00:05:59,110 --> 00:06:00,760
new particle is spawned at a random

103
00:06:00,760 --> 00:06:03,100
place along that line

104
00:06:03,100 --> 00:06:04,750
and I use the same rules to produce

105
00:06:04,750 --> 00:06:08,890
these particles which for when a grenade

106
00:06:08,890 --> 00:06:10,570
goes off so you can't quite see it on

107
00:06:10,570 --> 00:06:12,670
the slide there but a grenade has gone

108
00:06:12,670 --> 00:06:14,190
off in the bottom right-hand corner of

109
00:06:14,190 --> 00:06:16,600
the screen and then it's throwing out

110
00:06:16,600 --> 00:06:19,330
all these particles but in grenade

111
00:06:19,330 --> 00:06:20,950
particle or rather grenade shrapnel

112
00:06:20,950 --> 00:06:23,800
particles have a bit of extra behavior

113
00:06:23,800 --> 00:06:25,690
which is when they hit a solid object

114
00:06:25,690 --> 00:06:29,080
then you get these plumes of yellow near

115
00:06:29,080 --> 00:06:31,420
the bottom there so pieces of shrapnel

116
00:06:31,420 --> 00:06:33,670
hit the floor and then thrown up more

117
00:06:33,670 --> 00:06:35,920
more particles which are all yellow and

118
00:06:35,920 --> 00:06:38,500
kind of simulate the idea of spa a

119
00:06:38,500 --> 00:06:43,480
shower of sparks next bit of fakery in

120
00:06:43,480 --> 00:06:46,900
pistol is parallax scrolling so

121
00:06:46,900 --> 00:06:50,530
this is a way of faking depths in a 2d

122
00:06:50,530 --> 00:06:52,810
game so if you and it's basically just

123
00:06:52,810 --> 00:06:55,270
blind sliding sliding over each other so

124
00:06:55,270 --> 00:06:57,790
if you imagine that my two hands at my

125
00:06:57,790 --> 00:07:01,870
to a two bits of parallax layers then

126
00:07:01,870 --> 00:07:05,590
there's three things that control when

127
00:07:05,590 --> 00:07:07,960
you look at my hands how far away they

128
00:07:07,960 --> 00:07:11,350
are in your brain so number one is this

129
00:07:11,350 --> 00:07:12,790
hand because it's slightly further away

130
00:07:12,790 --> 00:07:16,090
looks a tiny bit smaller number two if I

131
00:07:16,090 --> 00:07:19,540
move them at what I promise you is equal

132
00:07:19,540 --> 00:07:21,610
pace have passed each other then this

133
00:07:21,610 --> 00:07:23,140
one looks like it's moving very slightly

134
00:07:23,140 --> 00:07:26,380
slower number three when these hands

135
00:07:26,380 --> 00:07:28,570
cross each other this one because it's

136
00:07:28,570 --> 00:07:32,260
nearer to you obscures this hand so i

137
00:07:32,260 --> 00:07:35,410
use those three things to generate this

138
00:07:35,410 --> 00:07:38,320
illusion of depth in the game so you can

139
00:07:38,320 --> 00:07:40,690
see that in this in this movie I've

140
00:07:40,690 --> 00:07:43,720
taken out all the enemies so that large

141
00:07:43,720 --> 00:07:47,050
you can't see it so the building is

142
00:07:47,050 --> 00:07:48,670
really close and it's moving faster

143
00:07:48,670 --> 00:07:50,320
those lanterns are further away and

144
00:07:50,320 --> 00:07:53,140
they're moving more slowly and anis

145
00:07:53,140 --> 00:07:55,780
three street lamps they'd all be the

146
00:07:55,780 --> 00:07:58,020
same size if they were all up close but

147
00:07:58,020 --> 00:08:00,820
I've drawn them smaller and made them

148
00:08:00,820 --> 00:08:02,500
move more slowly which makes them look

149
00:08:02,500 --> 00:08:07,540
like they're further away final bit of

150
00:08:07,540 --> 00:08:08,710
folk who I'm going to talk about his

151
00:08:08,710 --> 00:08:12,760
performance I think pistols that looks

152
00:08:12,760 --> 00:08:15,520
like something on the nez so a game from

153
00:08:15,520 --> 00:08:16,990
30 years ago

154
00:08:16,990 --> 00:08:18,340
but you know it's running on a modern

155
00:08:18,340 --> 00:08:20,890
computer and part of the reason well

156
00:08:20,890 --> 00:08:22,810
there's many reasons for this probably

157
00:08:22,810 --> 00:08:25,150
i'm a terrible programmer and i can't

158
00:08:25,150 --> 00:08:28,450
draw very well but also there's not much

159
00:08:28,450 --> 00:08:30,960
performance available in the browser

160
00:08:30,960 --> 00:08:34,800
though WebGL is looking pretty amazing

161
00:08:34,800 --> 00:08:37,540
and so i spent a lot of time optimizing

162
00:08:37,540 --> 00:08:46,720
coat however yeah brilliant I find that

163
00:08:46,720 --> 00:08:49,060
when you try and make code run faster

164
00:08:49,060 --> 00:08:51,220
it's often a specific thing to that

165
00:08:51,220 --> 00:08:52,900
piece of code that turns out to be the

166
00:08:52,900 --> 00:08:54,790
problem so I dive into lots of different

167
00:08:54,790 --> 00:08:56,890
bits of code and and say okay what's

168
00:08:56,890 --> 00:08:58,180
wrong with this wise it's though and

169
00:08:58,180 --> 00:09:00,370
then fix the problem but then there was

170
00:09:00,370 --> 00:09:01,990
a general technique that I used again

171
00:09:01,990 --> 00:09:04,540
and again and was able to apply to lots

172
00:09:04,540 --> 00:09:05,860
of different pieces of code that we're

173
00:09:05,860 --> 00:09:08,080
trying to achieve very different things

174
00:09:08,080 --> 00:09:11,770
and that was the concept of denial so

175
00:09:11,770 --> 00:09:15,970
essentially what can you ignore and then

176
00:09:15,970 --> 00:09:18,400
if you can ignore it then it means you'd

177
00:09:18,400 --> 00:09:19,960
have to spend any processing power on it

178
00:09:19,960 --> 00:09:21,490
and you can use that processing power on

179
00:09:21,490 --> 00:09:25,840
something else so there's two ways to

180
00:09:25,840 --> 00:09:27,940
look at this if you imagine you're an

181
00:09:27,940 --> 00:09:30,700
object in the game then do you have to

182
00:09:30,700 --> 00:09:34,170
do your thing or can you just not bother

183
00:09:34,170 --> 00:09:38,110
so if I'm an enemy do I need to move

184
00:09:38,110 --> 00:09:40,630
around or if I'm a fire do i need to

185
00:09:40,630 --> 00:09:42,640
bother burning or if I'm a firework

186
00:09:42,640 --> 00:09:44,800
launcher do I need to launch or if I'm

187
00:09:44,800 --> 00:09:46,360
an enemy do I need to have a brain or

188
00:09:46,360 --> 00:09:48,880
can I just stand there or if I'm a piece

189
00:09:48,880 --> 00:09:51,070
of ordnance like a bullet or a piece of

190
00:09:51,070 --> 00:09:54,180
shrapnel do I need to continue to exist

191
00:09:54,180 --> 00:09:56,920
and the other way to look at it is if

192
00:09:56,920 --> 00:09:58,480
I'm an object in the game then there's

193
00:09:58,480 --> 00:09:59,980
quite often I have to look at other

194
00:09:59,980 --> 00:10:02,110
objects in the game and make decisions

195
00:10:02,110 --> 00:10:04,780
about them so this must happen most

196
00:10:04,780 --> 00:10:07,540
often happens with the enemies so if I'm

197
00:10:07,540 --> 00:10:10,930
an enemy then and I'm trying to avoid

198
00:10:10,930 --> 00:10:12,850
killing my my buddies who are on the

199
00:10:12,850 --> 00:10:15,880
same side as me do I need to check out

200
00:10:15,880 --> 00:10:17,380
where they all are or can I just look at

201
00:10:17,380 --> 00:10:18,850
a subset of the other enemies in the

202
00:10:18,850 --> 00:10:20,650
level or if I'm looking for a piece of

203
00:10:20,650 --> 00:10:22,930
cover and I'm an enemy do I have to

204
00:10:22,930 --> 00:10:24,580
consider all of the park benches in the

205
00:10:24,580 --> 00:10:27,880
level or just a subset or if I'm hearing

206
00:10:27,880 --> 00:10:29,320
all of these sounds of gunshots going

207
00:10:29,320 --> 00:10:30,400
off around me

208
00:10:30,400 --> 00:10:32,050
do I have to respond to them all or can

209
00:10:32,050 --> 00:10:33,580
I ignore some of them because they're so

210
00:10:33,580 --> 00:10:37,120
far away and the way to decide on all of

211
00:10:37,120 --> 00:10:39,910
these questions is whether something's

212
00:10:39,910 --> 00:10:43,000
on or off camera so if it's off camera I

213
00:10:43,000 --> 00:10:45,460
probably don't have to care but if it's

214
00:10:45,460 --> 00:10:48,760
on camera I do have to care so the

215
00:10:48,760 --> 00:10:50,080
question is how do you decide whether

216
00:10:50,080 --> 00:10:52,180
something's on or off camera and for

217
00:10:52,180 --> 00:10:54,220
that we'll have to come back to it

218
00:10:54,220 --> 00:10:55,840
because I need to talk about collision

219
00:10:55,840 --> 00:10:59,260
detection first so collision detection

220
00:10:59,260 --> 00:11:01,960
is a code that figures out whether

221
00:11:01,960 --> 00:11:06,000
someone object is hitting another object

222
00:11:06,000 --> 00:11:09,340
and I did is kind of two-pronged

223
00:11:09,340 --> 00:11:11,770
approach to this and first of all the

224
00:11:11,770 --> 00:11:13,930
first approach is assuming that the

225
00:11:13,930 --> 00:11:15,820
world is a great which might look like

226
00:11:15,820 --> 00:11:19,780
this so in this game magic game would

227
00:11:19,780 --> 00:11:23,320
just black squares then if two objects

228
00:11:23,320 --> 00:11:24,820
are in the same grid square they're

229
00:11:24,820 --> 00:11:26,980
colliding and if they're not in the same

230
00:11:26,980 --> 00:11:28,660
grid square they're not colliding so

231
00:11:28,660 --> 00:11:31,570
those two guys in the top-left different

232
00:11:31,570 --> 00:11:34,000
grid squares not colliding whereas the

233
00:11:34,000 --> 00:11:36,130
guys in the bottom right same grid

234
00:11:36,130 --> 00:11:38,830
square so they're colliding but the

235
00:11:38,830 --> 00:11:41,530
world's not a grid so we need an extra

236
00:11:41,530 --> 00:11:44,740
approach and this is called bounding

237
00:11:44,740 --> 00:11:47,170
boxes so in this slide the two key

238
00:11:47,170 --> 00:11:49,930
objects are the large black circles and

239
00:11:49,930 --> 00:11:51,850
each of them has got a bounding box

240
00:11:51,850 --> 00:11:54,070
which is just a rectangle which fits as

241
00:11:54,070 --> 00:11:56,640
closely as possible around the object

242
00:11:56,640 --> 00:11:59,560
and if the two bounding boxes of those

243
00:11:59,560 --> 00:12:01,690
two objects are intersecting then the

244
00:12:01,690 --> 00:12:03,190
two objects are colliding and if they're

245
00:12:03,190 --> 00:12:05,320
not intersecting the two objects are not

246
00:12:05,320 --> 00:12:11,110
colliding so now I'm going to talk about

247
00:12:11,110 --> 00:12:13,960
some of the specific approaches to

248
00:12:13,960 --> 00:12:17,170
collision detection they use for

249
00:12:17,170 --> 00:12:19,210
particular objects and starting off with

250
00:12:19,210 --> 00:12:25,240
bullets so in this slide the black

251
00:12:25,240 --> 00:12:27,280
rectangles the small black rectangles

252
00:12:27,280 --> 00:12:29,620
are a single bullet at different points

253
00:12:29,620 --> 00:12:31,840
in time so the grenade I'm sorry the

254
00:12:31,840 --> 00:12:35,680
bullet starts off at a position a moves

255
00:12:35,680 --> 00:12:37,750
through position B and in Suffolk

256
00:12:37,750 --> 00:12:40,210
position C and when the bullets at

257
00:12:40,210 --> 00:12:41,680
position aid and it's not collided with

258
00:12:41,680 --> 00:12:44,360
anything whereas when its up position C

259
00:12:44,360 --> 00:12:45,740
then it's colliding with that large

260
00:12:45,740 --> 00:12:48,529
white rectangle so we can just use

261
00:12:48,529 --> 00:12:50,510
bounding boxes here to figure out that

262
00:12:50,510 --> 00:12:53,630
it's colliding at position C and we

263
00:12:53,630 --> 00:12:55,339
would be done because when a bullet hits

264
00:12:55,339 --> 00:12:56,510
something it's just removed from the

265
00:12:56,510 --> 00:12:58,970
game but there's a bit of extra stuff

266
00:12:58,970 --> 00:13:01,640
because actually it's when a bullet hits

267
00:13:01,640 --> 00:13:02,959
something it's not just removed from the

268
00:13:02,959 --> 00:13:04,519
game there's also a shower of sparks

269
00:13:04,519 --> 00:13:07,700
that come out of the object it hit so we

270
00:13:07,700 --> 00:13:09,320
need to find position B because that's

271
00:13:09,320 --> 00:13:10,700
where the shower of sparks is going to

272
00:13:10,700 --> 00:13:13,070
come from and so the thing about writing

273
00:13:13,070 --> 00:13:16,430
a game is that you don't actually see

274
00:13:16,430 --> 00:13:20,540
your objects move through every pixel on

275
00:13:20,540 --> 00:13:24,860
their path from A to C so I see or

276
00:13:24,860 --> 00:13:26,990
rather they've game engine seized the

277
00:13:26,990 --> 00:13:29,839
bullet at position a and then it next

278
00:13:29,839 --> 00:13:32,209
sees it a position C and it's passed

279
00:13:32,209 --> 00:13:34,100
through positioned be but it we didn't

280
00:13:34,100 --> 00:13:36,800
see it so you need to figure out where

281
00:13:36,800 --> 00:13:38,990
position B is and the way you do this is

282
00:13:38,990 --> 00:13:40,910
you draw a line between position a in

283
00:13:40,910 --> 00:13:43,190
position C and then you take the four

284
00:13:43,190 --> 00:13:45,589
lines that define the edges of the large

285
00:13:45,589 --> 00:13:48,740
white rectangle and you say okay which

286
00:13:48,740 --> 00:13:50,930
of those lines is the line a to c

287
00:13:50,930 --> 00:13:53,060
intersecting with oh it's the left-hand

288
00:13:53,060 --> 00:13:55,910
side so you know which two lines are

289
00:13:55,910 --> 00:13:57,170
intersecting and then you can find

290
00:13:57,170 --> 00:14:00,990
intersection point and you're done

291
00:14:01,000 --> 00:14:03,949
grenades so grenades are a little bit

292
00:14:03,949 --> 00:14:06,560
different because when they hit an

293
00:14:06,560 --> 00:14:07,970
object they don't just disappear they

294
00:14:07,970 --> 00:14:10,850
bounce so for this we'll need position B

295
00:14:10,850 --> 00:14:14,060
but we already know how to do that but

296
00:14:14,060 --> 00:14:15,199
we also need to find out the new

297
00:14:15,199 --> 00:14:16,850
trajectory that the grenade is going to

298
00:14:16,850 --> 00:14:19,190
go on after it hits the large white

299
00:14:19,190 --> 00:14:21,470
rectangle so it's the same thing again

300
00:14:21,470 --> 00:14:24,470
it started off at position a and it ends

301
00:14:24,470 --> 00:14:26,990
up a position C we find position B to

302
00:14:26,990 --> 00:14:28,610
figure out where to bounce it from and

303
00:14:28,610 --> 00:14:30,199
then we just need to find that gray line

304
00:14:30,199 --> 00:14:32,269
that's sort of pointing diagonally down

305
00:14:32,269 --> 00:14:34,550
in that direction and the way you do

306
00:14:34,550 --> 00:14:37,579
this is that you know which side it hits

307
00:14:37,579 --> 00:14:39,680
so it's that left hand side and so you

308
00:14:39,680 --> 00:14:42,410
just reflect the bullet vector sorry the

309
00:14:42,410 --> 00:14:44,779
grenade vector in the side that it hits

310
00:14:44,779 --> 00:14:47,329
so this is my side this is the vector I

311
00:14:47,329 --> 00:14:50,829
reflect it like that and then i'm done

312
00:14:50,829 --> 00:14:53,240
but there's an extra bit of complication

313
00:14:53,240 --> 00:14:56,990
with grenades excuse me because grenades

314
00:14:56,990 --> 00:14:58,130
have an area where

315
00:14:58,130 --> 00:15:00,200
so when you draw that line a to see if

316
00:15:00,200 --> 00:15:02,270
you've got a bullet you just draw it

317
00:15:02,270 --> 00:15:04,250
from the single pixel at position a to

318
00:15:04,250 --> 00:15:07,370
the single pixel at position C but with

319
00:15:07,370 --> 00:15:09,170
the grenade you need to figure out where

320
00:15:09,170 --> 00:15:10,520
to draw that line from so let's say we

321
00:15:10,520 --> 00:15:12,230
pick the top left-hand corner of where

322
00:15:12,230 --> 00:15:14,480
the grenade is so I draw a line from the

323
00:15:14,480 --> 00:15:16,220
top left-hand corner of position a to

324
00:15:16,220 --> 00:15:18,380
the top left-hand corner of position C

325
00:15:18,380 --> 00:15:21,590
and that gives me line one but we're bit

326
00:15:21,590 --> 00:15:23,600
 because line ones not actually

327
00:15:23,600 --> 00:15:24,830
because line ones not actually
intersecting with a large white

328
00:15:24,830 --> 00:15:28,580
rectangle okay no big deal we'll just

329
00:15:28,580 --> 00:15:29,390
draw that line from the bottom

330
00:15:29,390 --> 00:15:33,710
right-hand corner right so draw the line

331
00:15:33,710 --> 00:15:35,150
from the bottom right-hand corner of

332
00:15:35,150 --> 00:15:36,920
position a to the bottom right-hand

333
00:15:36,920 --> 00:15:39,350
corner of position C gives us line to

334
00:15:39,350 --> 00:15:43,370
that lines intersecting we're done but

335
00:15:43,370 --> 00:15:45,410
what about this so the grenades

336
00:15:45,410 --> 00:15:46,790
approaching from a different angle in

337
00:15:46,790 --> 00:15:49,280
this scenario and we draw that same line

338
00:15:49,280 --> 00:15:51,350
bottom line right-hand corner of

339
00:15:51,350 --> 00:15:53,090
position a to bottom right hand corner

340
00:15:53,090 --> 00:15:55,670
of position see that gives us line 10

341
00:15:55,670 --> 00:15:57,740
know when it's totally not intersecting

342
00:15:57,740 --> 00:16:02,630
again so need a bit of a rethink and so

343
00:16:02,630 --> 00:16:03,860
you need to use a different strategy for

344
00:16:03,860 --> 00:16:05,960
grenades and this is called sweeping

345
00:16:05,960 --> 00:16:08,660
according to the internet so it's the

346
00:16:08,660 --> 00:16:10,520
same scenario grenade start setup

347
00:16:10,520 --> 00:16:12,890
position a ends up at position C which

348
00:16:12,890 --> 00:16:14,330
is where we detect the collision and

349
00:16:14,330 --> 00:16:16,490
then to find out where the grenade

350
00:16:16,490 --> 00:16:18,170
actually entered the object and

351
00:16:18,170 --> 00:16:19,850
therefore find out where position B is

352
00:16:19,850 --> 00:16:21,320
where we need to bounce the grenade from

353
00:16:21,320 --> 00:16:23,810
then you just take the grave when it's a

354
00:16:23,810 --> 00:16:25,970
position C and move it back along its

355
00:16:25,970 --> 00:16:29,450
trajectory to position d but we need to

356
00:16:29,450 --> 00:16:30,830
keep going because there's still no

357
00:16:30,830 --> 00:16:32,900
intersection with a side so then we keep

358
00:16:32,900 --> 00:16:34,850
going we move the grenade from position

359
00:16:34,850 --> 00:16:38,390
d back along to position e now we've got

360
00:16:38,390 --> 00:16:40,040
the intersection now we've got

361
00:16:40,040 --> 00:16:42,110
positioned be we know it about Soren aid

362
00:16:42,110 --> 00:16:47,810
from we're done ace so with all this in

363
00:16:47,810 --> 00:16:49,400
mind then we can now figure out whether

364
00:16:49,400 --> 00:16:52,430
something's on or off camera and the

365
00:16:52,430 --> 00:16:55,130
strategy is bounding boxes so all of the

366
00:16:55,130 --> 00:16:57,230
objects in the game have a bounding box

367
00:16:57,230 --> 00:17:00,710
and the view the camera is just a single

368
00:17:00,710 --> 00:17:02,210
large band new box somewhere in the

369
00:17:02,210 --> 00:17:07,430
world and so we can just say ok bin is

370
00:17:07,430 --> 00:17:10,670
your bounding box intersecting with the

371
00:17:10,670 --> 00:17:11,929
views bounding box if it

372
00:17:11,929 --> 00:17:14,360
is then you're on camera if it's not

373
00:17:14,360 --> 00:17:17,089
you're off camera but we run into a

374
00:17:17,089 --> 00:17:18,799
performance problem here again because

375
00:17:18,799 --> 00:17:21,799
this check of bounding box against

376
00:17:21,799 --> 00:17:23,179
another bounding box to see whether

377
00:17:23,179 --> 00:17:25,490
they're intersecting it's not slow but

378
00:17:25,490 --> 00:17:27,980
it's not fast either so we need to make

379
00:17:27,980 --> 00:17:30,499
it faster for moving objects does not

380
00:17:30,499 --> 00:17:32,299
like you can do apart from just try and

381
00:17:32,299 --> 00:17:34,820
write code efficiently but with unmoving

382
00:17:34,820 --> 00:17:37,269
objects then it's quite easy because

383
00:17:37,269 --> 00:17:39,830
they're bounding boxes don't change so

384
00:17:39,830 --> 00:17:41,899
this means when you load the level then

385
00:17:41,899 --> 00:17:44,269
all of the unmoving objects like bins or

386
00:17:44,269 --> 00:17:47,539
park benches or the floor or the fences

387
00:17:47,539 --> 00:17:50,570
at both ends of the level they're

388
00:17:50,570 --> 00:17:51,889
bounding boxes are not going to change

389
00:17:51,889 --> 00:17:54,950
throughout the entire game so when the

390
00:17:54,950 --> 00:17:56,629
level loads you just say to each object

391
00:17:56,629 --> 00:17:59,230
right totally generate a bounding box

392
00:17:59,230 --> 00:18:03,710
and then store it so this means when you

393
00:18:03,710 --> 00:18:07,220
do that check of the view bounding box

394
00:18:07,220 --> 00:18:08,990
against an object bounding box it

395
00:18:08,990 --> 00:18:10,309
doesn't have to generate its bounding

396
00:18:10,309 --> 00:18:11,960
box it can just go and fetch it from

397
00:18:11,960 --> 00:18:14,419
memory so that's a performance

398
00:18:14,419 --> 00:18:16,220
improvement but you can actually take it

399
00:18:16,220 --> 00:18:20,720
a bit further because the answer to

400
00:18:20,720 --> 00:18:23,029
whether a particular unmoving object is

401
00:18:23,029 --> 00:18:25,730
on or off camera doesn't change all the

402
00:18:25,730 --> 00:18:27,889
time so if the camera hasn't moved the

403
00:18:27,889 --> 00:18:30,169
answer is still the same so I let's

404
00:18:30,169 --> 00:18:33,289
imagine some scenario where i say been a

405
00:18:33,289 --> 00:18:36,649
you on camera and he fetches his

406
00:18:36,649 --> 00:18:38,929
bounding box which he's got pre-stored

407
00:18:38,929 --> 00:18:41,320
and then he compares it against the

408
00:18:41,320 --> 00:18:44,419
bounding box of the camera and he comes

409
00:18:44,419 --> 00:18:46,309
back the answer and says yes I'm on

410
00:18:46,309 --> 00:18:48,919
camera and then I come back two seconds

411
00:18:48,919 --> 00:18:51,019
later and the camera hasn't moved in

412
00:18:51,019 --> 00:18:55,009
that time and so I say I've been I need

413
00:18:55,009 --> 00:18:56,809
to ask you again are you on camera and

414
00:18:56,809 --> 00:18:59,570
he says like dude you totally just asked

415
00:18:59,570 --> 00:19:02,360
me that I've already stored the result

416
00:19:02,360 --> 00:19:03,889
to your last request so I'm just going

417
00:19:03,889 --> 00:19:05,629
to give the answer from that cash and

418
00:19:05,629 --> 00:19:07,639
then you don't need to you only need to

419
00:19:07,639 --> 00:19:09,679
clear the cache when the camera moves

420
00:19:09,679 --> 00:19:11,629
which only happens when the pistol slap

421
00:19:11,629 --> 00:19:13,909
moves which is relatively speaking not

422
00:19:13,909 --> 00:19:16,850
that often so this means that you can

423
00:19:16,850 --> 00:19:18,470
check with the objects run off camera

424
00:19:18,470 --> 00:19:21,950
are extremely cheaply performance wise

425
00:19:21,950 --> 00:19:25,600
and that was a big big win

426
00:19:25,600 --> 00:19:29,440
so penultimate topic artificial

427
00:19:29,440 --> 00:19:31,660
intelligence so this is the code that

428
00:19:31,660 --> 00:19:36,580
runs the enemies and the technique I

429
00:19:36,580 --> 00:19:40,240
used is called behavior trees and a

430
00:19:40,240 --> 00:19:41,740
behavior tree is just a special type of

431
00:19:41,740 --> 00:19:45,610
state machine except it's in a tree

432
00:19:45,610 --> 00:19:51,010
structure obviously and so because it's

433
00:19:51,010 --> 00:19:53,710
a state machine then that means the

434
00:19:53,710 --> 00:19:55,960
objects that it controls have states so

435
00:19:55,960 --> 00:19:58,150
one of the states that a enemy and

436
00:19:58,150 --> 00:20:00,340
pistol star can be in is fighting and

437
00:20:00,340 --> 00:20:03,789
another state can be in a shooting but

438
00:20:03,789 --> 00:20:05,049
these states are slightly different from

439
00:20:05,049 --> 00:20:07,390
each other because fighting is like it's

440
00:20:07,390 --> 00:20:09,520
you're not actually the enemies when

441
00:20:09,520 --> 00:20:11,559
they are in the fight state they're not

442
00:20:11,559 --> 00:20:13,240
actually doing anything it's more like a

443
00:20:13,240 --> 00:20:15,309
gateway to a set of states whether

444
00:20:15,309 --> 00:20:18,340
actually achieve some useful function

445
00:20:18,340 --> 00:20:20,830
whereas fighting oh sorry shooting is

446
00:20:20,830 --> 00:20:23,940
actually doing something so when of

447
00:20:23,940 --> 00:20:25,840
enemy is in the chute state it's

448
00:20:25,840 --> 00:20:27,549
actually firing actual bullets with an

449
00:20:27,549 --> 00:20:31,690
actual gun so in this diagram of a

450
00:20:31,690 --> 00:20:35,970
totally generic behavior tree then

451
00:20:35,970 --> 00:20:40,030
fighting would be the fork point so in

452
00:20:40,030 --> 00:20:42,280
the middle layer and shooting would be

453
00:20:42,280 --> 00:20:45,669
an example of a leaf node so the general

454
00:20:45,669 --> 00:20:47,860
rule is if you're at a fork point you're

455
00:20:47,860 --> 00:20:49,929
deciding what to do next whereas if

456
00:20:49,929 --> 00:20:51,669
you're at a leaf node that you're

457
00:20:51,669 --> 00:20:53,650
actually deciding to achieve something

458
00:20:53,650 --> 00:20:55,750
and do some selection in the game like

459
00:20:55,750 --> 00:21:01,270
shooting a bullet now there's two wait

460
00:21:01,270 --> 00:21:03,880
there's two rules that govern movement

461
00:21:03,880 --> 00:21:06,100
around the behavior tree and the first

462
00:21:06,100 --> 00:21:09,400
one is can I do this so before moving to

463
00:21:09,400 --> 00:21:12,309
a state then the code always asks am I

464
00:21:12,309 --> 00:21:14,770
allowed to do this so it might say am I

465
00:21:14,770 --> 00:21:16,750
allowed to fight and the code comes back

466
00:21:16,750 --> 00:21:18,610
and says yet there's totally an enemy

467
00:21:18,610 --> 00:21:20,799
there and he's got guns so you should

468
00:21:20,799 --> 00:21:24,640
totally fight him or we're shooting can

469
00:21:24,640 --> 00:21:28,030
I shoot yeah you've totally got bullets

470
00:21:28,030 --> 00:21:30,820
you've got a gun do it and then the

471
00:21:30,820 --> 00:21:32,590
other thing that governs movement around

472
00:21:32,590 --> 00:21:35,440
the behavior tree is a strategy and this

473
00:21:35,440 --> 00:21:37,690
is a method for choosing where you're

474
00:21:37,690 --> 00:21:39,040
going to move next

475
00:21:39,040 --> 00:21:42,730
in the tree so in this we're in the

476
00:21:42,730 --> 00:21:45,430
fight state and we need a strategy for

477
00:21:45,430 --> 00:21:47,230
choosing whether to try and shoot or try

478
00:21:47,230 --> 00:21:48,940
and throw a grenade and the two

479
00:21:48,940 --> 00:21:50,440
strategies that I used in pistol start

480
00:21:50,440 --> 00:21:51,760
there are a bunch of others that you can

481
00:21:51,760 --> 00:21:53,800
use a behavior trees but this was enough

482
00:21:53,800 --> 00:21:56,650
for pistol the first strategy i use

483
00:21:56,650 --> 00:22:02,440
was prioritization and in this then you

484
00:22:02,440 --> 00:22:06,010
just start at the left and you run the

485
00:22:06,010 --> 00:22:09,040
first sub branch that you can run so i'm

486
00:22:09,040 --> 00:22:12,310
in the fight state and I say okay start

487
00:22:12,310 --> 00:22:14,230
at left can I shoot the answer comes

488
00:22:14,230 --> 00:22:17,110
back know so I say all right then can I

489
00:22:17,110 --> 00:22:18,820
throw a grenade the answer comes back

490
00:22:18,820 --> 00:22:21,040
yes so I moved to the throw grenade

491
00:22:21,040 --> 00:22:23,380
state I throw a grenade and then I move

492
00:22:23,380 --> 00:22:25,720
back up to the parent state so that's

493
00:22:25,720 --> 00:22:27,850
prioritization so you choose the first

494
00:22:27,850 --> 00:22:30,040
one that can run and then you go back to

495
00:22:30,040 --> 00:22:32,710
the parent the other strategy is

496
00:22:32,710 --> 00:22:34,750
sequential ization which is where you

497
00:22:34,750 --> 00:22:37,390
run every sub branch that you can so you

498
00:22:37,390 --> 00:22:38,830
might end up running all of the sub

499
00:22:38,830 --> 00:22:41,950
branches or nun or some so I'm in the

500
00:22:41,950 --> 00:22:44,290
fight state the strategy is sequential

501
00:22:44,290 --> 00:22:48,460
ization um I say can I shoot and answer

502
00:22:48,460 --> 00:22:50,170
comes back yes so I moved to the shoot

503
00:22:50,170 --> 00:22:53,110
state I shoot and then I move straight

504
00:22:53,110 --> 00:22:54,850
on to the throw grenades dating can I

505
00:22:54,850 --> 00:22:57,250
and say can I throw a grenade the answer

506
00:22:57,250 --> 00:22:58,660
comes back yeah you can totally throw a

507
00:22:58,660 --> 00:23:00,700
grenade so I throw a grenade and then

508
00:23:00,700 --> 00:23:03,610
move back to the fight state so with all

509
00:23:03,610 --> 00:23:05,860
that in mind here is the only side with

510
00:23:05,860 --> 00:23:09,220
any code on it it's JSON so it's not

511
00:23:09,220 --> 00:23:13,870
even real code but it's pretty much all

512
00:23:13,870 --> 00:23:16,390
of the code that all of the behavior

513
00:23:16,390 --> 00:23:20,170
tree for pistol and we're going to

514
00:23:20,170 --> 00:23:24,970
go through it so I'm on line one I'm in

515
00:23:24,970 --> 00:23:28,120
the idle state the strategy is the idle

516
00:23:28,120 --> 00:23:30,760
state is prioritized so this means i

517
00:23:30,760 --> 00:23:32,380
need to find the first child that can

518
00:23:32,380 --> 00:23:35,230
run and then run it but actually the

519
00:23:35,230 --> 00:23:37,210
idle state only has one child and that's

520
00:23:37,210 --> 00:23:41,830
line three fight so i say can I fight

521
00:23:41,830 --> 00:23:43,960
and the code comes back and says yeah

522
00:23:43,960 --> 00:23:45,640
there's totally an enemy day you can

523
00:23:45,640 --> 00:23:49,330
fight so I moved to the fight state the

524
00:23:49,330 --> 00:23:51,580
strategy again is prioritized so now

525
00:23:51,580 --> 00:23:52,960
I've got three children to choose

526
00:23:52,960 --> 00:23:55,750
so I check out the first one on line

527
00:23:55,750 --> 00:23:58,539
five find cover so I say can I find

528
00:23:58,539 --> 00:24:00,640
cover and the code comes back and says

529
00:24:00,640 --> 00:24:03,429
yeah there's there's have been between

530
00:24:03,429 --> 00:24:06,340
you and the enemy you can run and hide

531
00:24:06,340 --> 00:24:08,649
behind that so I moved to the fine cover

532
00:24:08,649 --> 00:24:11,200
state and the strategy of the fine cover

533
00:24:11,200 --> 00:24:14,230
stay on line five is sequential ization

534
00:24:14,230 --> 00:24:16,059
so this means i'm going to run all the

535
00:24:16,059 --> 00:24:19,029
children that apply and then move back

536
00:24:19,029 --> 00:24:21,970
up so i go to line seven and say can I

537
00:24:21,970 --> 00:24:23,890
turn towards the player and the code

538
00:24:23,890 --> 00:24:25,510
comes back and says yet you're turned

539
00:24:25,510 --> 00:24:27,789
away from him so are you should totally

540
00:24:27,789 --> 00:24:29,980
turn towards him so I moved to the turn

541
00:24:29,980 --> 00:24:31,779
towards player state turn towards player

542
00:24:31,779 --> 00:24:33,610
and then I move right on to line eight

543
00:24:33,610 --> 00:24:35,350
and say can I stand and the code says

544
00:24:35,350 --> 00:24:36,549
yeah you can stand because you're

545
00:24:36,549 --> 00:24:38,320
crouched at the moment so I moved to the

546
00:24:38,320 --> 00:24:40,299
stand state and then I stand up and then

547
00:24:40,299 --> 00:24:42,190
I move the line nine and I say can I run

548
00:24:42,190 --> 00:24:43,960
for cover which just comes back yes and

549
00:24:43,960 --> 00:24:45,850
so I run for cover and then I really

550
00:24:45,850 --> 00:24:48,250
moved to line 10 and I say can I shoot

551
00:24:48,250 --> 00:24:50,500
and again you've got bullets you've got

552
00:24:50,500 --> 00:24:52,630
guns you can totally shoot so I moved to

553
00:24:52,630 --> 00:24:55,149
the shoot state and then I shoot and

554
00:24:55,149 --> 00:24:56,830
then I go back up to the fine cover

555
00:24:56,830 --> 00:24:59,320
state now I'm probably not in cover

556
00:24:59,320 --> 00:25:03,700
still so the answer on line five can I

557
00:25:03,700 --> 00:25:06,880
find cover will come back yes you can so

558
00:25:06,880 --> 00:25:08,049
I'm going to keep on looping through

559
00:25:08,049 --> 00:25:10,779
this fine cover state until i get to

560
00:25:10,779 --> 00:25:12,399
cover and let's say I actually make it

561
00:25:12,399 --> 00:25:13,720
there and I don't get killed on the way

562
00:25:13,720 --> 00:25:16,539
then eventually i'll come back up to

563
00:25:16,539 --> 00:25:18,610
line five and say can i find cover and

564
00:25:18,610 --> 00:25:20,740
the answer comes back no you can't

565
00:25:20,740 --> 00:25:22,270
because you're already in cover you're

566
00:25:22,270 --> 00:25:24,850
already duck down behind that bin so now

567
00:25:24,850 --> 00:25:26,740
i say okay back up to the fight state

568
00:25:26,740 --> 00:25:29,740
line three and then i say i minused i'm

569
00:25:29,740 --> 00:25:32,770
using the prioritized strategy so I

570
00:25:32,770 --> 00:25:35,500
check out find cover again still can't

571
00:25:35,500 --> 00:25:37,090
find cover because I'm still duck down

572
00:25:37,090 --> 00:25:39,549
behind that bin and so I go to line 13

573
00:25:39,549 --> 00:25:41,860
the throw grenades day and I say can I

574
00:25:41,860 --> 00:25:43,360
throw a grenade and it said the code

575
00:25:43,360 --> 00:25:44,350
comes back I says yeah you've got

576
00:25:44,350 --> 00:25:46,630
grenades throw one so I throw one and

577
00:25:46,630 --> 00:25:48,399
then back up to the fight state again

578
00:25:48,399 --> 00:25:50,470
line three now it's going to be fine

579
00:25:50,470 --> 00:25:52,480
cover can't do that because still in

580
00:25:52,480 --> 00:25:54,130
cover throw grenade can't do that

581
00:25:54,130 --> 00:25:55,510
anymore because you've just thrown one

582
00:25:55,510 --> 00:25:58,059
and so then you move the line 14 can I

583
00:25:58,059 --> 00:26:02,289
shoot a new shoot so that's basically

584
00:26:02,289 --> 00:26:03,880
how the AI and pistols that works

585
00:26:03,880 --> 00:26:05,169
there's a bit of extra stuff but it's

586
00:26:05,169 --> 00:26:07,380
not that instructive

587
00:26:07,380 --> 00:26:13,559
now why is this cool I think number one

588
00:26:13,559 --> 00:26:16,120
with that behavior tree then you can

589
00:26:16,120 --> 00:26:17,980
move around that JSON really really

590
00:26:17,980 --> 00:26:19,929
easily so you can change the behavior of

591
00:26:19,929 --> 00:26:24,760
the AI with minimal code changes so

592
00:26:24,760 --> 00:26:25,870
obviously there's a bunch of code which

593
00:26:25,870 --> 00:26:28,059
does inferences about where the bins are

594
00:26:28,059 --> 00:26:29,710
and and whether you've got any bullets

595
00:26:29,710 --> 00:26:31,270
and all of that stuff but that's all

596
00:26:31,270 --> 00:26:33,670
nicely tucked away inside you know

597
00:26:33,670 --> 00:26:35,980
modularized and it's it's it's it's kind

598
00:26:35,980 --> 00:26:39,809
of not dependent on other bits of code

599
00:26:39,809 --> 00:26:46,210
and second of all I think that you can

600
00:26:46,210 --> 00:26:48,370
actually read that Jason and understand

601
00:26:48,370 --> 00:26:50,350
it so I showed this Jason to my mom when

602
00:26:50,350 --> 00:26:52,780
I was trying to talk about pistols on

603
00:26:52,780 --> 00:26:54,610
what I've been working on in my spare

604
00:26:54,610 --> 00:26:57,000
time and I think she totally got it I

605
00:26:57,000 --> 00:27:01,630
think and so I think this means you can

606
00:27:01,630 --> 00:27:04,059
collaborate on a I with non-programmers

607
00:27:04,059 --> 00:27:05,530
and I think it's always good to be able

608
00:27:05,530 --> 00:27:09,340
to do that so penultimate topic before i

609
00:27:09,340 --> 00:27:13,450
talk about falling in love i want to wet

610
00:27:13,450 --> 00:27:18,640
discovery when i wrote pistol was

611
00:27:18,640 --> 00:27:20,950
the first game i've written and it was

612
00:27:20,950 --> 00:27:22,480
the first major javascript project I'd

613
00:27:22,480 --> 00:27:25,120
done and I'd never done any hadn't done

614
00:27:25,120 --> 00:27:27,760
much a I work and hadn't done anything

615
00:27:27,760 --> 00:27:29,260
to do with collision detection as far as

616
00:27:29,260 --> 00:27:32,530
I can remember and I didn't really read

617
00:27:32,530 --> 00:27:36,010
up that much in advance and probably if

618
00:27:36,010 --> 00:27:37,330
it'd been something i was doing for work

619
00:27:37,330 --> 00:27:39,610
i would have felt obliged to do that and

620
00:27:39,610 --> 00:27:43,210
so I would have done but because it was

621
00:27:43,210 --> 00:27:47,740
for fun then I kind of just want didn't

622
00:27:47,740 --> 00:27:49,570
want to spoil a surprise and so I

623
00:27:49,570 --> 00:27:51,610
figured out that grenade sweeping stuff

624
00:27:51,610 --> 00:27:56,580
and um figured out you know why my

625
00:27:56,580 --> 00:27:58,600
enemies were running around madly

626
00:27:58,600 --> 00:28:02,380
shooting each other and didn't Google

627
00:28:02,380 --> 00:28:04,840
March and didn't read any books in

628
00:28:04,840 --> 00:28:07,090
advance just because that process of

629
00:28:07,090 --> 00:28:09,340
discovering how to do something even

630
00:28:09,340 --> 00:28:10,600
when you know someone else has already

631
00:28:10,600 --> 00:28:12,910
solved this problem I think is like one

632
00:28:12,910 --> 00:28:14,350
of the most joyous feelings in the whole

633
00:28:14,350 --> 00:28:17,260
world and so that's why I didn't want to

634
00:28:17,260 --> 00:28:19,870
spoil a surprise so I suppose up what

635
00:28:19,870 --> 00:28:20,470
I'm saying is

636
00:28:20,470 --> 00:28:22,710
read new books and don't learn anything

637
00:28:22,710 --> 00:28:26,590
except by doing um and so the final

638
00:28:26,590 --> 00:28:34,570
topic is falling in love and this is not

639
00:28:34,570 --> 00:28:39,620
really about code that much so apologies

640
00:28:39,630 --> 00:28:44,200
one evening maybe a few months ago I was

641
00:28:44,200 --> 00:28:47,230
in my kitchen writing some code with

642
00:28:47,230 --> 00:28:50,049
pistols up and I had this ticket to go

643
00:28:50,049 --> 00:28:51,850
and see this band called wolf parade who

644
00:28:51,850 --> 00:28:56,470
are really really good and and they were

645
00:28:56,470 --> 00:28:57,880
playing down the road for me where i

646
00:28:57,880 --> 00:29:00,669
live in berlin and i was really into the

647
00:29:00,669 --> 00:29:02,140
cone i really wanted to stay in and

648
00:29:02,140 --> 00:29:04,330
write it but then I sort of forced my

649
00:29:04,330 --> 00:29:06,730
tore myself away and then dashed down

650
00:29:06,730 --> 00:29:08,980
the road went to this gig and then after

651
00:29:08,980 --> 00:29:10,720
that ended up going up with some friends

652
00:29:10,720 --> 00:29:14,049
and and and and and and drinking quite a

653
00:29:14,049 --> 00:29:15,760
lot and stuff and then i came home at

654
00:29:15,760 --> 00:29:18,929
sort of seven or eight in the morning as

655
00:29:18,929 --> 00:29:22,030
its kind of still drunk basically and

656
00:29:22,030 --> 00:29:23,830
sat down and carried on picked up where

657
00:29:23,830 --> 00:29:29,020
I left off with the code um and I'm in a

658
00:29:29,020 --> 00:29:33,610
band as a sort of separate thing and so

659
00:29:33,610 --> 00:29:35,559
when I write songs then more and more

660
00:29:35,559 --> 00:29:37,419
often recently than I started to write

661
00:29:37,419 --> 00:29:38,950
about my real life rather than about

662
00:29:38,950 --> 00:29:41,260
more generic things and so I wrote a

663
00:29:41,260 --> 00:29:43,360
song about the fact that I'd been

664
00:29:43,360 --> 00:29:45,460
writing the code for pistol sight in my

665
00:29:45,460 --> 00:29:47,409
kitchen and then run out to sea wolf

666
00:29:47,409 --> 00:29:49,750
parade and then got drunk on gimlets

667
00:29:49,750 --> 00:29:52,090
with my friends and and and gone some

668
00:29:52,090 --> 00:29:56,049
clubs and stuff and um then when I

669
00:29:56,049 --> 00:29:58,059
figured out grenade sweeping then I was

670
00:29:58,059 --> 00:30:00,220
in a bar called for vigne a really nice

671
00:30:00,220 --> 00:30:03,669
bar and fell in drinking Hemingway's so

672
00:30:03,669 --> 00:30:04,870
whenever I think about the grenade

673
00:30:04,870 --> 00:30:06,880
sweeping code I think about the taste of

674
00:30:06,880 --> 00:30:08,380
Hemingway's which is a it's a really

675
00:30:08,380 --> 00:30:10,150
nice cocktail by the way it's got great

676
00:30:10,150 --> 00:30:11,740
fruit juice and some sort of red thing

677
00:30:11,740 --> 00:30:17,190
and gin and so

678
00:30:17,190 --> 00:30:19,500
I sort of felt like crystals that was

679
00:30:19,500 --> 00:30:21,830
becoming in time as my life and then

680
00:30:21,830 --> 00:30:24,330
some of the bits of graffiti in the

681
00:30:24,330 --> 00:30:27,600
level it is level singular at the moment

682
00:30:27,600 --> 00:30:30,600
in the level in pistol shot are from my

683
00:30:30,600 --> 00:30:32,850
diary or things that I'd seen around

684
00:30:32,850 --> 00:30:35,970
Berlin and then recently I found myself

685
00:30:35,970 --> 00:30:38,490
at a party talkin about pistols that to

686
00:30:38,490 --> 00:30:41,340
a stranger who was a non programmer and

687
00:30:41,340 --> 00:30:43,260
he seemed to sort of find it interesting

688
00:30:43,260 --> 00:30:45,990
I hope and so I suppose what I'm trying

689
00:30:45,990 --> 00:30:49,170
to say is that pistol start become more

690
00:30:49,170 --> 00:30:50,850
and more entwined with my life or more

691
00:30:50,850 --> 00:30:53,040
like what more importantly programming

692
00:30:53,040 --> 00:30:55,020
has been coming twined with my life and

693
00:30:55,020 --> 00:30:57,540
I think falling in love like with a

694
00:30:57,540 --> 00:31:03,720
person is so thrilling because they show

695
00:31:03,720 --> 00:31:05,250
you these possibilities that you'd never

696
00:31:05,250 --> 00:31:07,710
even realized existed so they show you

697
00:31:07,710 --> 00:31:10,590
new ways of thinking about things or new

698
00:31:10,590 --> 00:31:12,810
perspectives and so it sets off all of

699
00:31:12,810 --> 00:31:14,040
these endorphins in your brain that are

700
00:31:14,040 --> 00:31:18,090
just super exciting and so I felt like

701
00:31:18,090 --> 00:31:20,700
the same thing happened with pistols lat

702
00:31:20,700 --> 00:31:22,230
in the sense that it become entwined

703
00:31:22,230 --> 00:31:24,450
with my life and and different parts of

704
00:31:24,450 --> 00:31:26,250
my life had started to inform each other

705
00:31:26,250 --> 00:31:28,500
because of it so you know the songs I

706
00:31:28,500 --> 00:31:30,000
was writing and the code i was writing

707
00:31:30,000 --> 00:31:31,800
and their friendships i was having in

708
00:31:31,800 --> 00:31:34,140
the bars i was going to and and and the

709
00:31:34,140 --> 00:31:35,820
graffiti i was saying all kind of became

710
00:31:35,820 --> 00:31:39,330
entwined and so i suppose in summary

711
00:31:39,330 --> 00:31:40,950
what i mean is that pistol made me

712
00:31:40,950 --> 00:31:57,680
fall in love with programming thanks

713
00:31:57,690 --> 00:32:02,170
any questions my name or pistol

714
00:32:02,170 --> 00:32:07,320
name what the story of me uh okay um

715
00:32:07,320 --> 00:32:12,550
basically it was a joke um I started

716
00:32:12,550 --> 00:32:18,280
writing the code last summer and I was

717
00:32:18,280 --> 00:32:20,020
thinking about the most ridiculous names

718
00:32:20,020 --> 00:32:21,760
that I could have and I thought will

719
00:32:21,760 --> 00:32:23,500
surely I've got to combine sex and

720
00:32:23,500 --> 00:32:26,860
violence into a single phrase and then I

721
00:32:26,860 --> 00:32:28,510
thought okay yeah pistol sup brilliant

722
00:32:28,510 --> 00:32:31,060
and so then I when I was talking about

723
00:32:31,060 --> 00:32:33,040
the fact i was writing this game to my

724
00:32:33,040 --> 00:32:34,780
friends they said what's it going to be

725
00:32:34,780 --> 00:32:37,180
called and I said as a joke pistol

726
00:32:37,180 --> 00:32:39,220
and then I tried to change it later but

727
00:32:39,220 --> 00:32:41,080
they were all like no no no no no that's

728
00:32:41,080 --> 00:32:44,370
the best thing about it so it's stuck um

729
00:32:44,370 --> 00:32:47,950
so you can play a pistol calm if

730
00:32:47,950 --> 00:32:51,970
you want to anyone else how are you

731
00:32:51,970 --> 00:32:53,230
choosing him Sylvester for your

732
00:32:53,230 --> 00:32:56,290
javascript file sorry say that again I

733
00:32:56,290 --> 00:32:58,060
was going through your code how was how

734
00:32:58,060 --> 00:32:59,350
did you choose the name Sylvester for

735
00:32:59,350 --> 00:33:01,210
your main javascript file oh she does

736
00:33:01,210 --> 00:33:03,820
not mind that so made by a man called

737
00:33:03,820 --> 00:33:05,590
James Coughlan who's an excellent

738
00:33:05,590 --> 00:33:08,830
JavaScript developer it's a library for

739
00:33:08,830 --> 00:33:12,850
doing mathematical calculations based on

740
00:33:12,850 --> 00:33:16,690
vectors I don't know how he chose it so

741
00:33:16,690 --> 00:33:19,060
you'd have to ask him but he blogs at

742
00:33:19,060 --> 00:33:22,150
jeg coughlin com he's a super genius he

743
00:33:22,150 --> 00:33:25,210
should totally check her eyes code did

744
00:33:25,210 --> 00:33:27,460
you look at box TD for your uh your

745
00:33:27,460 --> 00:33:30,790
physics framework yeah so um I found out

746
00:33:30,790 --> 00:33:32,770
about box2d at the Berlin JavaScript

747
00:33:32,770 --> 00:33:34,810
group quite recently and I was like god

748
00:33:34,810 --> 00:33:37,300
dammit all of those nights crying into

749
00:33:37,300 --> 00:33:39,760
my gimlets about you know the fact that

750
00:33:39,760 --> 00:33:42,220
my grenades were still bouncing

751
00:33:42,220 --> 00:33:47,590
into bins and not on them so I nearly

752
00:33:47,590 --> 00:33:49,360
killed myself at that point but then I

753
00:33:49,360 --> 00:33:51,340
thought it's a fine I'll just totally

754
00:33:51,340 --> 00:33:54,280
integrate it so I spent a very difficult

755
00:33:54,280 --> 00:33:58,900
week integrating box2d with the game but

756
00:33:58,900 --> 00:34:00,970
found out that actually there were some

757
00:34:00,970 --> 00:34:03,700
things that because I'd written them

758
00:34:03,700 --> 00:34:06,070
specifically for my game were better in

759
00:34:06,070 --> 00:34:08,080
my collision section code but this is

760
00:34:08,080 --> 00:34:09,760
not to say that box2d sucks

761
00:34:09,760 --> 00:34:12,760
it's awesome obviously but it solves a

762
00:34:12,760 --> 00:34:14,830
much greater more general class of

763
00:34:14,830 --> 00:34:18,040
problems and so I found that I wanted

764
00:34:18,040 --> 00:34:20,950
specific behavior for different objects

765
00:34:20,950 --> 00:34:23,260
and so I found I kept my code in the end

766
00:34:23,260 --> 00:34:25,990
but box2d is totally great so if

767
00:34:25,990 --> 00:34:28,300
anyone's writing a game used that not my

768
00:34:28,300 --> 00:34:29,530
collision detection code because it

769
00:34:29,530 --> 00:34:45,220
sucks anyone else nope okay thanks did

