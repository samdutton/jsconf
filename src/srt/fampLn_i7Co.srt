1
00:00:08,420 --> 00:00:10,950

hi thanks for having me and thank you

2
00:00:10,950 --> 00:00:13,769
for tolerating me talking about CSS at

3
00:00:13,769 --> 00:00:16,440
javascript conferences it really is my

4
00:00:16,440 --> 00:00:18,330
favorite thing to do to come and talk

5
00:00:18,330 --> 00:00:20,609
about this stuff to you guys because I

6
00:00:20,609 --> 00:00:23,519
feel like I found my people so thank you

7
00:00:23,519 --> 00:00:26,609
for your patience with that today I'm

8
00:00:26,609 --> 00:00:29,640
going to talk about CSS Lin for massive

9
00:00:29,640 --> 00:00:33,030
websites so I my name is Nicole Sullivan

10
00:00:33,030 --> 00:00:36,690
and I tweet at stubborn Ella here it's

11
00:00:36,690 --> 00:00:38,160
probably the best way to reach me it

12
00:00:38,160 --> 00:00:39,840
turns out I reply much more quickly to

13
00:00:39,840 --> 00:00:44,640
140 characters than gigantic emails so I

14
00:00:44,640 --> 00:00:48,420
work for generally bigger companies when

15
00:00:48,420 --> 00:00:50,010
they realize that their CSS has gone

16
00:00:50,010 --> 00:00:51,660
completely mad and completely out of

17
00:00:51,660 --> 00:00:53,969
control so right now I'm consulting with

18
00:00:53,969 --> 00:00:56,399
Salesforce and box.net in a few other

19
00:00:56,399 --> 00:01:00,870
places basically trying to pair their

20
00:01:00,870 --> 00:01:02,460
CSS down to something more reasonable

21
00:01:02,460 --> 00:01:04,710
and I asked this last year and I'll do

22
00:01:04,710 --> 00:01:06,720
it again how many people have found that

23
00:01:06,720 --> 00:01:07,950
they were building something and the

24
00:01:07,950 --> 00:01:10,020
most painful part of it was writing the

25
00:01:10,020 --> 00:01:13,350
CSS as opposed to the JavaScript yeah

26
00:01:13,350 --> 00:01:16,320
that can happen definitely especially if

27
00:01:16,320 --> 00:01:18,150
you're more comfortable coming from the

28
00:01:18,150 --> 00:01:19,979
programming angle the CSS can seem

29
00:01:19,979 --> 00:01:22,560
really unintuitive but I think we can

30
00:01:22,560 --> 00:01:25,979
make that better so a little bit about

31
00:01:25,979 --> 00:01:29,549
CSS much like JavaScript it will let you

32
00:01:29,549 --> 00:01:31,650
do absolutely anything no matter how

33
00:01:31,650 --> 00:01:33,960
stupid it is no matter how about an idea

34
00:01:33,960 --> 00:01:36,600
it is so you can get very excited likely

35
00:01:36,600 --> 00:01:37,950
full and yet you can be completely

36
00:01:37,950 --> 00:01:41,400
breaking everything the point of it is

37
00:01:41,400 --> 00:01:43,229
that we don't have to do stupid things

38
00:01:43,229 --> 00:01:46,079
just because we can we can resist we can

39
00:01:46,079 --> 00:01:49,710
decide that we're not going to do the

40
00:01:49,710 --> 00:01:50,880
thing that's going to end up with really

41
00:01:50,880 --> 00:01:54,270
bad results so what is object-oriented

42
00:01:54,270 --> 00:01:57,060
CSS it's sort of a nutty idea that we

43
00:01:57,060 --> 00:01:59,159
can build CSS with engineering best

44
00:01:59,159 --> 00:02:01,980
practices in mind no it's not like 12

45
00:02:01,980 --> 00:02:04,520
correlation it's not like you can just

46
00:02:04,520 --> 00:02:06,990
apply something from programming to a

47
00:02:06,990 --> 00:02:08,760
declarative language and think it's just

48
00:02:08,760 --> 00:02:10,110
going to automatically work there's a

49
00:02:10,110 --> 00:02:12,840
thought process involved but over CSS is

50
00:02:12,840 --> 00:02:17,070
about sort of saying we can do better we

51
00:02:17,070 --> 00:02:18,870
can take a look at engineering best

52
00:02:18,870 --> 00:02:20,460
practices and figure out how that's

53
00:02:20,460 --> 00:02:22,620
going to make our CSS development better

54
00:02:22,620 --> 00:02:25,470
and we absolutely can it is definitely

55
00:02:25,470 --> 00:02:27,780
possible to make your CSS development

56
00:02:27,780 --> 00:02:30,660
more logical more reasonable but I'll

57
00:02:30,660 --> 00:02:32,400
warn you their language doesn't give you

58
00:02:32,400 --> 00:02:34,170
any help with that at all there are

59
00:02:34,170 --> 00:02:37,530
basically no constructs built into the

60
00:02:37,530 --> 00:02:40,860
language which will which will help you

61
00:02:40,860 --> 00:02:42,630
make anything object-oriented or even

62
00:02:42,630 --> 00:02:45,900
remotely good programming really so the

63
00:02:45,900 --> 00:02:47,160
only thing that really will make that

64
00:02:47,160 --> 00:02:51,450
happen is developer discipline basically

65
00:02:51,450 --> 00:02:53,520
deciding what your team CSS is going to

66
00:02:53,520 --> 00:02:58,200
look like and sticking to it so why

67
00:02:58,200 --> 00:03:01,710
bother optimizing CSS story on stepanov

68
00:03:01,710 --> 00:03:03,270
and I have done some research and I'm

69
00:03:03,270 --> 00:03:04,200
going to share with you some of the

70
00:03:04,200 --> 00:03:07,650
results that we got about what happens

71
00:03:07,650 --> 00:03:10,640
when CSS is unoptimized and our

72
00:03:10,640 --> 00:03:13,440
experimental results from the Alexa top

73
00:03:13,440 --> 00:03:16,530
1000 websites the basic reasons are

74
00:03:16,530 --> 00:03:18,080
because it blocks progressive rendering

75
00:03:18,080 --> 00:03:21,900
so if you've ever can the microphone be

76
00:03:21,900 --> 00:03:26,100
a little less loud and bothering myself

77
00:03:26,100 --> 00:03:28,140
with it I can't imagine how you guys

78
00:03:28,140 --> 00:03:31,620
feel all right so if you want to go

79
00:03:31,620 --> 00:03:34,440
visit this this some page that I have a

80
00:03:34,440 --> 00:03:36,420
link to you absolutely can it basically

81
00:03:36,420 --> 00:03:38,820
shows how CSS blocks progressive

82
00:03:38,820 --> 00:03:42,840
rendering except in Opera it it

83
00:03:42,840 --> 00:03:44,850
basically will show a blank page to the

84
00:03:44,850 --> 00:03:47,910
user which will be completely white with

85
00:03:47,910 --> 00:03:49,860
nothing on it until it's downloaded and

86
00:03:49,860 --> 00:03:52,739
processed all the CSS files the only

87
00:03:52,739 --> 00:03:54,540
browser that doesn't do that as opera so

88
00:03:54,540 --> 00:03:57,330
compare it visit this URL compare it on

89
00:03:57,330 --> 00:03:59,340
opera versus other browsers and you'll

90
00:03:59,340 --> 00:04:00,750
see that we're actually giving users a

91
00:04:00,750 --> 00:04:03,209
pretty bad experience when our CSS is

92
00:04:03,209 --> 00:04:06,150
too big or we have too many files the

93
00:04:06,150 --> 00:04:07,410
other reason is because it's verbose

94
00:04:07,410 --> 00:04:09,360
there's really nothing we can do to make

95
00:04:09,360 --> 00:04:12,269
CSS smaller so whereas in JavaScript you

96
00:04:12,269 --> 00:04:13,890
can make all our variables shorter we

97
00:04:13,890 --> 00:04:14,480
can

98
00:04:14,480 --> 00:04:16,489
sit in all kinds of interesting ways for

99
00:04:16,489 --> 00:04:18,139
CSS that just doesn't work there's no

100
00:04:18,139 --> 00:04:21,290
way to do TD colon on calling you and

101
00:04:21,290 --> 00:04:22,669
haven't know that that means text

102
00:04:22,669 --> 00:04:25,699
decoration underline so it's important

103
00:04:25,699 --> 00:04:27,110
to actually write it small from the

104
00:04:27,110 --> 00:04:30,590
get-go but sort of more importantly is

105
00:04:30,590 --> 00:04:32,270
what it does to your team's development

106
00:04:32,270 --> 00:04:35,360
and the sort of mess it can cause with

107
00:04:35,360 --> 00:04:38,000
the way that your team works one client

108
00:04:38,000 --> 00:04:40,430
that I worked with basically they were

109
00:04:40,430 --> 00:04:42,169
startup and I think this happens a lot

110
00:04:42,169 --> 00:04:43,760
especially for startups is that you're

111
00:04:43,760 --> 00:04:45,560
so busy trying to get the next feature

112
00:04:45,560 --> 00:04:47,270
out there trying to meet the next

113
00:04:47,270 --> 00:04:51,410
release and to you know to kind of beat

114
00:04:51,410 --> 00:04:53,120
your competitor and to be the next one

115
00:04:53,120 --> 00:04:54,800
to have the cool thing that's going to

116
00:04:54,800 --> 00:04:56,810
bring users to your site that you don't

117
00:04:56,810 --> 00:04:58,520
necessarily have the time to reflect and

118
00:04:58,520 --> 00:04:59,930
to pull back and to say is our

119
00:04:59,930 --> 00:05:02,570
architecture making sense so basically

120
00:05:02,570 --> 00:05:04,699
it can happen that that a client can get

121
00:05:04,699 --> 00:05:06,530
themselves painted so badly into a

122
00:05:06,530 --> 00:05:08,360
corner that a feature that should take

123
00:05:08,360 --> 00:05:10,190
two days to release actually takes two

124
00:05:10,190 --> 00:05:11,720
weeks because they spend that much time

125
00:05:11,720 --> 00:05:13,880
just trying to get the new feature not

126
00:05:13,880 --> 00:05:15,530
to break when it's inserted in the news

127
00:05:15,530 --> 00:05:17,240
in their actual site with their actual

128
00:05:17,240 --> 00:05:20,479
CSS so I think yeah there are definitely

129
00:05:20,479 --> 00:05:22,280
performance benefits to getting your CSS

130
00:05:22,280 --> 00:05:24,500
figured out but the biggest benefit is

131
00:05:24,500 --> 00:05:26,960
spending less time writing CSS and more

132
00:05:26,960 --> 00:05:28,550
time writing stuff that's going to

133
00:05:28,550 --> 00:05:33,410
actually add value for your users so

134
00:05:33,410 --> 00:05:35,750
last year Facebook decided that they

135
00:05:35,750 --> 00:05:38,840
were going to go on a diet they realized

136
00:05:38,840 --> 00:05:41,270
that their site speed was not what they

137
00:05:41,270 --> 00:05:43,070
wanted it to be and they made a big

138
00:05:43,070 --> 00:05:46,160
commitment to fixing that and CSS was

139
00:05:46,160 --> 00:05:50,000
sort of one part of of that puzzle and

140
00:05:50,000 --> 00:05:51,919
they hired me to come in and look at

141
00:05:51,919 --> 00:05:55,550
their CSS at that point just before i

142
00:05:55,550 --> 00:05:57,229
started i went to velocity conference

143
00:05:57,229 --> 00:05:58,760
and i heard two of their engineers david

144
00:05:58,760 --> 00:06:01,250
and chang hao talk about their haste

145
00:06:01,250 --> 00:06:04,430
based packaging system it is a really

146
00:06:04,430 --> 00:06:07,430
neat idea basically they parse their

147
00:06:07,430 --> 00:06:09,470
logs and they figure out which files are

148
00:06:09,470 --> 00:06:11,330
requested together most frequently and

149
00:06:11,330 --> 00:06:12,949
they build those into packages

150
00:06:12,949 --> 00:06:14,330
automatically based on the previous

151
00:06:14,330 --> 00:06:16,789
week's logs which means there's none of

152
00:06:16,789 --> 00:06:18,680
this sort of wait should I combine these

153
00:06:18,680 --> 00:06:20,360
two JavaScript files should I combine

154
00:06:20,360 --> 00:06:22,640
these two CSS files they know what to

155
00:06:22,640 --> 00:06:24,560
combine and what not to combine based on

156
00:06:24,560 --> 00:06:25,310
their actual

157
00:06:25,310 --> 00:06:29,030
usage patterns really super cool idea

158
00:06:29,030 --> 00:06:31,730
which had unintended sort of unintended

159
00:06:31,730 --> 00:06:35,390
bad consequences after a year of using

160
00:06:35,390 --> 00:06:36,620
the system they had one point nine

161
00:06:36,620 --> 00:06:40,790
megabytes of CSS and 706 CSS files it

162
00:06:40,790 --> 00:06:43,070
basically made it far too easy to do the

163
00:06:43,070 --> 00:06:45,170
wrong thing and so everybody did the

164
00:06:45,170 --> 00:06:48,530
wrong thing this was what I sort of

165
00:06:48,530 --> 00:06:50,420
started out with when you know when I

166
00:06:50,420 --> 00:06:52,760
went to consult with them now their

167
00:06:52,760 --> 00:06:55,460
performance group had a lot of different

168
00:06:55,460 --> 00:06:57,080
angles they were working at they were

169
00:06:57,080 --> 00:07:00,290
working on big pipe and X HP and a bunch

170
00:07:00,290 --> 00:07:02,420
of other things some automated spriting

171
00:07:02,420 --> 00:07:04,010
which works similarly to the packaging

172
00:07:04,010 --> 00:07:05,900
system where they're actually figuring

173
00:07:05,900 --> 00:07:07,490
out which images are requested together

174
00:07:07,490 --> 00:07:09,410
and sticking them into sprites modifying

175
00:07:09,410 --> 00:07:11,920
the CSS automatically really cool stuff

176
00:07:11,920 --> 00:07:14,980
lots of different pieces coming together

177
00:07:14,980 --> 00:07:17,480
the end result was that they reduce

178
00:07:17,480 --> 00:07:19,310
their response time in half in only six

179
00:07:19,310 --> 00:07:21,890
months that's a pretty important gain

180
00:07:21,890 --> 00:07:23,870
and I'm going to talk to you a little

181
00:07:23,870 --> 00:07:27,200
bit about how I did the CSS piece of

182
00:07:27,200 --> 00:07:29,660
that puzzle and definitely check out

183
00:07:29,660 --> 00:07:31,400
their engineering blog to hear more

184
00:07:31,400 --> 00:07:37,460
about the other parts of the equation so

185
00:07:37,460 --> 00:07:38,630
today we're going to talk about the

186
00:07:38,630 --> 00:07:41,030
state of CSS performance building a

187
00:07:41,030 --> 00:07:43,400
component library integrating components

188
00:07:43,400 --> 00:07:45,800
with an existing site and then things

189
00:07:45,800 --> 00:07:48,050
machine sorry things machines do well

190
00:07:48,050 --> 00:07:51,920
that people kind of suck at I'm going to

191
00:07:51,920 --> 00:07:53,570
tell you first about sort of how I did

192
00:07:53,570 --> 00:07:55,340
this stuff by hand at Facebook because

193
00:07:55,340 --> 00:07:58,070
at that point I didn't realize that some

194
00:07:58,070 --> 00:07:59,960
of this could be automated and then talk

195
00:07:59,960 --> 00:08:04,190
a bit about automating it so the state

196
00:08:04,190 --> 00:08:07,160
of CSS performance it really isn't it

197
00:08:07,160 --> 00:08:09,170
isn't a very pretty sight right now

198
00:08:09,170 --> 00:08:11,570
stoyan stefanov and I this summer did

199
00:08:11,570 --> 00:08:13,910
some research where we pulled down the

200
00:08:13,910 --> 00:08:17,990
Alexa top 1000 website can we fix this

201
00:08:17,990 --> 00:08:23,030
this is awful it keeps moving sorry

202
00:08:23,030 --> 00:08:24,440
about that I'd rather fix it and get it

203
00:08:24,440 --> 00:08:33,010
over with

204
00:08:33,020 --> 00:08:38,070
it should be okay but every time I

205
00:08:38,070 --> 00:08:39,690
breathe I can hear it and I don't like

206
00:08:39,690 --> 00:08:43,589
that okay let's try again no it's still

207
00:08:43,589 --> 00:08:47,700
bad can I just bend it away from me like

208
00:08:47,700 --> 00:08:49,589
that is that okay can you guys hear me

209
00:08:49,589 --> 00:08:53,339
if I bend it away yay okay good all

210
00:08:53,339 --> 00:08:56,100
right so strand Stefan I've and I pulled

211
00:08:56,100 --> 00:08:58,680
down the Alexa top 1,000 websites and we

212
00:08:58,680 --> 00:09:00,360
ran some tests on them because what kind

213
00:09:00,360 --> 00:09:01,589
of wanted to see well we've been in this

214
00:09:01,589 --> 00:09:03,450
performance game for a while how are

215
00:09:03,450 --> 00:09:05,040
things how are people doing how are

216
00:09:05,040 --> 00:09:07,890
these websites performing what we found

217
00:09:07,890 --> 00:09:11,250
was was not great so I'll talk a little

218
00:09:11,250 --> 00:09:13,800
bit about the basics then how I used

219
00:09:13,800 --> 00:09:15,959
grip on the facebook website and then

220
00:09:15,959 --> 00:09:18,209
visual inventory and eliminating

221
00:09:18,209 --> 00:09:20,700
inconsistencies so the first thing is

222
00:09:20,700 --> 00:09:23,820
for the Alexa top 1000 we basically

223
00:09:23,820 --> 00:09:27,080
grabbed each one of the Alexis sites

224
00:09:27,080 --> 00:09:29,670
started Fiddler's loaded each site and

225
00:09:29,670 --> 00:09:31,820
that exported the results from fiddler

226
00:09:31,820 --> 00:09:34,560
stoian has published the PHP that we use

227
00:09:34,560 --> 00:09:35,760
to do that so if you're interested in

228
00:09:35,760 --> 00:09:37,110
running your own tests you can feel free

229
00:09:37,110 --> 00:09:38,790
to grab that and use it it's available

230
00:09:38,790 --> 00:09:42,959
as well on on my slides what we found is

231
00:09:42,959 --> 00:09:45,390
that forty two percent aren't even gzip

232
00:09:45,390 --> 00:09:48,930
in forty-four percent have more than two

233
00:09:48,930 --> 00:09:52,709
CSS files fifty-six percent are still

234
00:09:52,709 --> 00:09:54,510
serving CSS with cookies so unless

235
00:09:54,510 --> 00:09:55,709
you're doing some kind of crazy

236
00:09:55,709 --> 00:09:57,390
pre-processing there's really no reason

237
00:09:57,390 --> 00:09:59,190
to send cookies back and forth every

238
00:09:59,190 --> 00:10:01,680
single time with every request for the

239
00:10:01,680 --> 00:10:05,459
CSS on your site sixty-two percent don't

240
00:10:05,459 --> 00:10:07,560
minify the way that we determined that

241
00:10:07,560 --> 00:10:09,180
was if they got more than a ten percent

242
00:10:09,180 --> 00:10:11,040
improvement from running the Yui

243
00:10:11,040 --> 00:10:13,020
compressor on their site we considered

244
00:10:13,020 --> 00:10:15,540
them not minified if you run it over and

245
00:10:15,540 --> 00:10:16,709
over you will get some smaller

246
00:10:16,709 --> 00:10:18,720
diminishing gains but we didn't want to

247
00:10:18,720 --> 00:10:21,060
count those really small sites in that

248
00:10:21,060 --> 00:10:25,050
in that figure we also found that 21%

249
00:10:25,050 --> 00:10:30,839
have greater than 100k of CSS so these

250
00:10:30,839 --> 00:10:32,700
things that I've just showed you can use

251
00:10:32,700 --> 00:10:34,920
why slow or PageSpeed to figure out if

252
00:10:34,920 --> 00:10:36,450
we're your site is at their stuff that

253
00:10:36,450 --> 00:10:38,760
we've known about for a long time but as

254
00:10:38,760 --> 00:10:40,260
it turns out we're still we're still

255
00:10:40,260 --> 00:10:43,470
kind of screwing up but when you want to

256
00:10:43,470 --> 00:10:44,720
test more advanced stuff

257
00:10:44,720 --> 00:10:47,990
I find that grep is the best way to do

258
00:10:47,990 --> 00:10:50,389
it basically I want to be able to look

259
00:10:50,389 --> 00:10:52,399
at all my style sheets in one go the

260
00:10:52,399 --> 00:10:53,750
thing with the results at store and then

261
00:10:53,750 --> 00:10:54,730
I got is that they actually

262
00:10:54,730 --> 00:10:57,259
underestimate the problem because any

263
00:10:57,259 --> 00:10:59,300
site that actually uses a packaging

264
00:10:59,300 --> 00:11:01,129
system like the haste packaging system

265
00:11:01,129 --> 00:11:04,639
that Facebook created is going to show a

266
00:11:04,639 --> 00:11:06,230
much lower amount because we're only

267
00:11:06,230 --> 00:11:07,550
going to ever see what they're pulling

268
00:11:07,550 --> 00:11:10,430
down on one page so using grep you can

269
00:11:10,430 --> 00:11:12,470
get the bigger picture of how

270
00:11:12,470 --> 00:11:13,970
inefficient your site is sort of

271
00:11:13,970 --> 00:11:19,040
globally so of the Alexa top 1000 we

272
00:11:19,040 --> 00:11:22,339
found the worst site had 733 floated

273
00:11:22,339 --> 00:11:26,720
elements that's absolutely gigantic but

274
00:11:26,720 --> 00:11:28,519
fourteen percent had greater than 100

275
00:11:28,519 --> 00:11:33,350
and who wait sorry thirteen percent had

276
00:11:33,350 --> 00:11:34,699
greater than one hundred and fifty six

277
00:11:34,699 --> 00:11:37,339
percent had greater than ten elements so

278
00:11:37,339 --> 00:11:40,699
that's that's pretty broken what does it

279
00:11:40,699 --> 00:11:42,290
mean if you find that you have too many

280
00:11:42,290 --> 00:11:43,879
floats like say you've heard me say you

281
00:11:43,879 --> 00:11:45,379
can go and grab your style sheets and

282
00:11:45,379 --> 00:11:46,850
you go back and you try it and you think

283
00:11:46,850 --> 00:11:48,949
you have too many it means that you need

284
00:11:48,949 --> 00:11:52,339
a grid system you need a one consistent

285
00:11:52,339 --> 00:11:54,980
way of laying out your pages and then

286
00:11:54,980 --> 00:11:57,019
the interior parts of your pages that

287
00:11:57,019 --> 00:11:58,519
work site wide so that you basically

288
00:11:58,519 --> 00:12:00,829
don't repeat that layout stuff in every

289
00:12:00,829 --> 00:12:07,100
single object more importantly you're

290
00:12:07,100 --> 00:12:09,379
going to need to realize that the cost

291
00:12:09,379 --> 00:12:11,149
for newbies joining your team is much

292
00:12:11,149 --> 00:12:12,980
much higher when you have the layout

293
00:12:12,980 --> 00:12:14,779
information mixed in with all the rest

294
00:12:14,779 --> 00:12:17,600
of the CSS it's like a I don't know if

295
00:12:17,600 --> 00:12:18,709
this is the right word for it but I

296
00:12:18,709 --> 00:12:20,180
think of it as kind of separation of

297
00:12:20,180 --> 00:12:22,250
concerns we're trying to get each object

298
00:12:22,250 --> 00:12:24,860
that we build to solve one problem solve

299
00:12:24,860 --> 00:12:27,110
it really well and not try to do the job

300
00:12:27,110 --> 00:12:32,449
of other objects in the page you can

301
00:12:32,449 --> 00:12:35,509
also grip for h1 to h6 this will tell

302
00:12:35,509 --> 00:12:36,949
you how many headings in your page and

303
00:12:36,949 --> 00:12:37,939
tell you a lot about the kind of

304
00:12:37,939 --> 00:12:40,819
duplication that you have going on so

305
00:12:40,819 --> 00:12:42,139
stoian and I found that the worst

306
00:12:42,139 --> 00:12:46,959
website had 511 declarations of h1 to h6

307
00:12:46,959 --> 00:12:49,790
but more importantly I think is this

308
00:12:49,790 --> 00:12:52,639
number down here fifty-six percent have

309
00:12:52,639 --> 00:12:54,380
greater than 10 so more than half has

310
00:12:54,380 --> 00:12:57,740
greater than 10 greater than 10 heading

311
00:12:57,740 --> 00:12:58,060
deck

312
00:12:58,060 --> 00:13:00,670
erations why is that a big deal well

313
00:13:00,670 --> 00:13:02,680
think about it this way most sites are

314
00:13:02,680 --> 00:13:04,720
not going to use font sizes smaller than

315
00:13:04,720 --> 00:13:07,150
say 10 pixels because smaller than that

316
00:13:07,150 --> 00:13:09,190
is sort of good for mice to read not

317
00:13:09,190 --> 00:13:12,310
humans and then unless they're you know

318
00:13:12,310 --> 00:13:14,020
designer e site they're probably not

319
00:13:14,020 --> 00:13:16,960
using greater than 24 pixels so that

320
00:13:16,960 --> 00:13:21,400
leaves 14 pixels 14 different font size

321
00:13:21,400 --> 00:13:24,550
that are usable then we look at the fact

322
00:13:24,550 --> 00:13:26,260
that you're not going to usually want to

323
00:13:26,260 --> 00:13:29,290
increment by just one pixel so if you

324
00:13:29,290 --> 00:13:31,900
put 13 pixels and 14 pixels on the same

325
00:13:31,900 --> 00:13:34,300
site either the user won't be able the

326
00:13:34,300 --> 00:13:36,070
best case scenario is that the user

327
00:13:36,070 --> 00:13:36,970
won't be able to tell the difference

328
00:13:36,970 --> 00:13:38,980
between the two of them but the worst

329
00:13:38,980 --> 00:13:40,420
case scenario is that they notice

330
00:13:40,420 --> 00:13:42,130
there's a subtle difference and they

331
00:13:42,130 --> 00:13:43,990
kind of thinks it should mean something

332
00:13:43,990 --> 00:13:45,730
but they're not sure and they're not

333
00:13:45,730 --> 00:13:47,740
really getting it so if we consider that

334
00:13:47,740 --> 00:13:49,450
we want to increment by in most cases

335
00:13:49,450 --> 00:13:51,340
two pixels at a time that leaves

336
00:13:51,340 --> 00:13:53,200
actually only seven different usable

337
00:13:53,200 --> 00:13:56,590
font sizes on any one website so in that

338
00:13:56,590 --> 00:13:58,030
case we're seeing that more than half

339
00:13:58,030 --> 00:14:00,190
have greater than the number that they

340
00:14:00,190 --> 00:14:03,880
really need to have when i worked at

341
00:14:03,880 --> 00:14:06,190
facebook the first thing i found when i

342
00:14:06,190 --> 00:14:07,690
grep their style sheets was that they

343
00:14:07,690 --> 00:14:13,890
had 958 different h1 to h6 declarations

344
00:14:13,890 --> 00:14:16,780
after we redid their style sheets it was

345
00:14:16,780 --> 00:14:19,390
down to 25 so yeah that's larger than

346
00:14:19,390 --> 00:14:21,250
the absolute number of seven that we

347
00:14:21,250 --> 00:14:23,170
think we should have but it's still so

348
00:14:23,170 --> 00:14:25,030
much better than then where sites are

349
00:14:25,030 --> 00:14:29,170
starting from currently so the worst

350
00:14:29,170 --> 00:14:33,430
site in the Alexa top 1,000 had 889 font

351
00:14:33,430 --> 00:14:38,320
size declarations this is sort of this

352
00:14:38,320 --> 00:14:39,730
is another way of looking at headings

353
00:14:39,730 --> 00:14:41,920
you can look at h1 to h6 but it's also

354
00:14:41,920 --> 00:14:43,540
possible that people aren't using the

355
00:14:43,540 --> 00:14:46,150
correct elements they are just you know

356
00:14:46,150 --> 00:14:48,700
sticking font size changes on a div or

357
00:14:48,700 --> 00:14:50,770
that they've put it in a class so

358
00:14:50,770 --> 00:14:52,570
gripping for font size actually tells

359
00:14:52,570 --> 00:14:57,160
you an even more exact picture of how

360
00:14:57,160 --> 00:15:00,850
many how many declarations you have and

361
00:15:00,850 --> 00:15:02,290
how many more than you should have and

362
00:15:02,290 --> 00:15:03,850
this number is even more interesting

363
00:15:03,850 --> 00:15:06,040
because when we grab for font size

364
00:15:06,040 --> 00:15:08,560
rather than h1 to h6 we find that we've

365
00:15:08,560 --> 00:15:10,810
got seventy eight percent of sites out

366
00:15:10,810 --> 00:15:11,800
there in the Alexa

367
00:15:11,800 --> 00:15:14,950
top 1000 having more more declarations

368
00:15:14,950 --> 00:15:18,670
than they really need to have so if you

369
00:15:18,670 --> 00:15:19,990
have too many headings what does that

370
00:15:19,990 --> 00:15:22,209
mean basically that you need site-wide

371
00:15:22,209 --> 00:15:23,800
said heading objects that you need

372
00:15:23,800 --> 00:15:25,899
headings that you can plug in anywhere

373
00:15:25,899 --> 00:15:27,850
and they're just going to work you don't

374
00:15:27,850 --> 00:15:32,500
want to have a giant pink h3 and some

375
00:15:32,500 --> 00:15:34,240
user comes along well sorry by user I

376
00:15:34,240 --> 00:15:36,010
mean people who are going to build HTML

377
00:15:36,010 --> 00:15:38,320
after you're done with the CSS comes

378
00:15:38,320 --> 00:15:40,240
along and says great on my new page i

379
00:15:40,240 --> 00:15:42,760
also need a giant pink h3 they grabbed

380
00:15:42,760 --> 00:15:44,410
it they pasted it in their new page and

381
00:15:44,410 --> 00:15:46,899
it completely explodes this is what we

382
00:15:46,899 --> 00:15:48,579
need to avoid if we want to be able to

383
00:15:48,579 --> 00:15:50,230
have site-wide headings and avoid that

384
00:15:50,230 --> 00:15:55,540
kind of duplication so the worst website

385
00:15:55,540 --> 00:15:58,870
in the Alexa top 1,000 had 518 margin

386
00:15:58,870 --> 00:16:01,269
resets so by margin resets I mean they

387
00:16:01,269 --> 00:16:05,260
set margin 20 basically that's the exact

388
00:16:05,260 --> 00:16:06,579
thing that you would do with a reset

389
00:16:06,579 --> 00:16:08,589
style sheet they're doing it over and

390
00:16:08,589 --> 00:16:10,480
over and over again throughout the site

391
00:16:10,480 --> 00:16:12,579
and I see this a lot with with sites

392
00:16:12,579 --> 00:16:16,209
that don't use a reset dot CSS my

393
00:16:16,209 --> 00:16:19,360
preference is the Yui reset because it's

394
00:16:19,360 --> 00:16:20,920
really solid and it doesn't do a lot of

395
00:16:20,920 --> 00:16:22,209
extra stuff that you don't necessarily

396
00:16:22,209 --> 00:16:26,140
want to have happen oops I think I was

397
00:16:26,140 --> 00:16:27,760
supposed to have a number here I forgot

398
00:16:27,760 --> 00:16:29,760
to get it out of my out of my research

399
00:16:29,760 --> 00:16:32,529
it was slightly less than the margins I

400
00:16:32,529 --> 00:16:33,940
don't remember the exact number but it

401
00:16:33,940 --> 00:16:35,860
was on the order of like 600 or

402
00:16:35,860 --> 00:16:40,029
something like that okay so if you have

403
00:16:40,029 --> 00:16:43,630
too many spacing tweaks reset CSS is

404
00:16:43,630 --> 00:16:45,430
definitely your answer to get rid of the

405
00:16:45,430 --> 00:16:47,890
the margin zero padding zero but if you

406
00:16:47,890 --> 00:16:49,570
find all over your site you're saying

407
00:16:49,570 --> 00:16:51,490
okay this but actually add two pixels

408
00:16:51,490 --> 00:16:54,100
here and that but had five pixels there

409
00:16:54,100 --> 00:16:55,420
you're also going to need some

410
00:16:55,420 --> 00:16:57,640
abstracted spacing classes which work

411
00:16:57,640 --> 00:16:59,770
basically like mix-ins and you can apply

412
00:16:59,770 --> 00:17:02,110
them to existing objects to change your

413
00:17:02,110 --> 00:17:07,059
spacing so you may not even know really

414
00:17:07,059 --> 00:17:10,059
what your site is made out of a lot of

415
00:17:10,059 --> 00:17:11,410
people don't I also think a lot of

416
00:17:11,410 --> 00:17:12,970
people have trouble seeing their site

417
00:17:12,970 --> 00:17:14,740
for what it really is they're so busy

418
00:17:14,740 --> 00:17:16,780
looking at it and each feature means so

419
00:17:16,780 --> 00:17:18,850
much to them because they built it with

420
00:17:18,850 --> 00:17:20,740
their own hands that they really can't

421
00:17:20,740 --> 00:17:22,900
see the repeating patterns in their own

422
00:17:22,900 --> 00:17:25,240
so the way to start to see it is to do a

423
00:17:25,240 --> 00:17:28,540
visual inventory a good way to think of

424
00:17:28,540 --> 00:17:30,760
it as kind of like Lego so that these

425
00:17:30,760 --> 00:17:33,160
crazy people built an entire car out of

426
00:17:33,160 --> 00:17:34,990
Lego I couldn't believe it turns out if

427
00:17:34,990 --> 00:17:36,880
they're just really neat stuff built

428
00:17:36,880 --> 00:17:39,840
with Lego I like Lego Einstein as well

429
00:17:39,840 --> 00:17:43,270
this guy brick artist com he's doing

430
00:17:43,270 --> 00:17:45,340
actual art and sculpture out of Lego

431
00:17:45,340 --> 00:17:48,210
like this poor thing that lost its arm

432
00:17:48,210 --> 00:17:50,410
needed this one as well which reminds me

433
00:17:50,410 --> 00:17:52,330
of how I feel when I see one point nine

434
00:17:52,330 --> 00:17:55,150
megabytes of CSS there's a sort of panic

435
00:17:55,150 --> 00:17:57,280
moment where I think oh dear God can I

436
00:17:57,280 --> 00:17:58,960
actually optimize one point nine

437
00:17:58,960 --> 00:18:01,510
megabytes to see as that and just okay

438
00:18:01,510 --> 00:18:04,300
start do the first bit oh but this guy

439
00:18:04,300 --> 00:18:07,240
stuff is really neat the thing to keep

440
00:18:07,240 --> 00:18:08,710
in mind is that no matter what we've

441
00:18:08,710 --> 00:18:10,750
built out of the Lego the fundamental

442
00:18:10,750 --> 00:18:12,490
building blocks are the same for all of

443
00:18:12,490 --> 00:18:14,080
them and so what we're trying to do with

444
00:18:14,080 --> 00:18:16,180
our site is to say sure yeah we have a

445
00:18:16,180 --> 00:18:18,160
Lego Einstein but what are the bricks

446
00:18:18,160 --> 00:18:19,630
look like what are the little building

447
00:18:19,630 --> 00:18:22,830
blocks that we made it out of look like

448
00:18:22,830 --> 00:18:25,090
so we want to do exactly the same thing

449
00:18:25,090 --> 00:18:28,930
with CSS you are going to be tempted how

450
00:18:28,930 --> 00:18:30,610
many people do back-end code as well as

451
00:18:30,610 --> 00:18:33,760
javascript in front and stuff okay you

452
00:18:33,760 --> 00:18:35,830
especially are going to absolutely be

453
00:18:35,830 --> 00:18:37,930
tempted to have PHP objects have a

454
00:18:37,930 --> 00:18:40,360
one-to-one correlation with CSS objects

455
00:18:40,360 --> 00:18:42,100
and you're going to want to say you know

456
00:18:42,100 --> 00:18:45,160
pound my really fancy feature and then

457
00:18:45,160 --> 00:18:47,650
all the CSS that goes with it don't do

458
00:18:47,650 --> 00:18:50,920
it it's a trap each layer in the

459
00:18:50,920 --> 00:18:54,520
architecture needs to have its own you

460
00:18:54,520 --> 00:18:55,810
know its own way of functioning

461
00:18:55,810 --> 00:18:58,210
basically well it's kind of like if you

462
00:18:58,210 --> 00:18:59,800
took the DB schema and try to configure

463
00:18:59,800 --> 00:19:02,140
apache with it just you can't do it

464
00:19:02,140 --> 00:19:04,390
right but yet we expect the PHP

465
00:19:04,390 --> 00:19:06,550
architecture to inform the CSS

466
00:19:06,550 --> 00:19:11,250
architecture and it works just as poorly

467
00:19:11,250 --> 00:19:14,440
Owen well so I think fit to be fair

468
00:19:14,440 --> 00:19:16,480
you're whichever layer you're most

469
00:19:16,480 --> 00:19:18,640
comfortable with you kind of project it

470
00:19:18,640 --> 00:19:20,680
onto the other layers because when i was

471
00:19:20,680 --> 00:19:22,300
at facebook i often wanted to make the

472
00:19:22,300 --> 00:19:24,910
PHP match the CSS luckily i worked with

473
00:19:24,910 --> 00:19:26,860
really smart developers who didn't let

474
00:19:26,860 --> 00:19:28,840
me get away with that but that was sort

475
00:19:28,840 --> 00:19:30,550
of my first instinct so i think it goes

476
00:19:30,550 --> 00:19:34,420
both ways so let me show you practical

477
00:19:34,420 --> 00:19:36,760
example is everyone familiar with this

478
00:19:36,760 --> 00:19:38,380
it's a stream story on the facebook

479
00:19:38,380 --> 00:19:42,700
website so in the PHP this might be one

480
00:19:42,700 --> 00:19:44,890
object stream story and it's built and

481
00:19:44,890 --> 00:19:47,140
it has comments and so there's you know

482
00:19:47,140 --> 00:19:48,910
me saying something at the top and a

483
00:19:48,910 --> 00:19:50,440
couple of people liking it and then me

484
00:19:50,440 --> 00:19:54,460
talking to myself below it and in the

485
00:19:54,460 --> 00:19:56,380
PHP that all fits together as one object

486
00:19:56,380 --> 00:20:01,270
right in the CSS layer it isn't one

487
00:20:01,270 --> 00:20:03,220
object at all it's actually a bunch of

488
00:20:03,220 --> 00:20:05,710
smaller objects and if we break it down

489
00:20:05,710 --> 00:20:07,570
to that level our sites will start to

490
00:20:07,570 --> 00:20:09,790
look like repeating patterns so here's

491
00:20:09,790 --> 00:20:12,360
what I found in this in this particular

492
00:20:12,360 --> 00:20:16,090
object we have one heading so it's my

493
00:20:16,090 --> 00:20:17,950
initial thing that I said and then we

494
00:20:17,950 --> 00:20:20,710
have five media blocks a media block is

495
00:20:20,710 --> 00:20:22,900
basically an image to the left and some

496
00:20:22,900 --> 00:20:24,520
stuff that describes it to the right if

497
00:20:24,520 --> 00:20:26,380
I had to pick one thing that the web was

498
00:20:26,380 --> 00:20:29,610
made out of visually speaking it's that

499
00:20:29,610 --> 00:20:33,510
we have a comments list an action list a

500
00:20:33,510 --> 00:20:36,010
paragraph and a couple of links styles

501
00:20:36,010 --> 00:20:37,600
in normal link style and a highlight

502
00:20:37,600 --> 00:20:40,090
link style so you can imagine how if you

503
00:20:40,090 --> 00:20:41,710
start to break things down to this level

504
00:20:41,710 --> 00:20:43,210
and it's about taking these little

505
00:20:43,210 --> 00:20:44,410
components and arranging them in

506
00:20:44,410 --> 00:20:46,480
different ways with our grids all the

507
00:20:46,480 --> 00:20:48,460
sudden most sites are actually built out

508
00:20:48,460 --> 00:20:50,530
of exactly the same stuff and there's

509
00:20:50,530 --> 00:20:53,770
this tiny little thin layer of chrome

510
00:20:53,770 --> 00:20:55,840
which does colors and images which is

511
00:20:55,840 --> 00:20:57,760
different but other than that our sites

512
00:20:57,760 --> 00:21:02,230
are the same repeating patterns so it's

513
00:21:02,230 --> 00:21:03,640
all about pattern matching but you have

514
00:21:03,640 --> 00:21:05,530
to be willing to take a step back you

515
00:21:05,530 --> 00:21:07,660
have to be willing to it might help

516
00:21:07,660 --> 00:21:08,980
maybe if you have somebody who's never

517
00:21:08,980 --> 00:21:10,270
looked at your site help you do it

518
00:21:10,270 --> 00:21:12,430
because it can be really hard when

519
00:21:12,430 --> 00:21:14,680
you're sort of in the trenches to to

520
00:21:14,680 --> 00:21:18,220
figure this out also most sites get the

521
00:21:18,220 --> 00:21:20,140
granular already wrong and the

522
00:21:20,140 --> 00:21:21,760
architecture is basically set up to fail

523
00:21:21,760 --> 00:21:23,680
if you find your CSS is growing and

524
00:21:23,680 --> 00:21:25,210
growing and growing over time and

525
00:21:25,210 --> 00:21:26,310
getting more and more unmanageable

526
00:21:26,310 --> 00:21:28,210
probably your architecture and your

527
00:21:28,210 --> 00:21:30,490
grandma granularity is wrong and we

528
00:21:30,490 --> 00:21:32,200
basically can't to fight it back you

529
00:21:32,200 --> 00:21:33,790
have to get the basic part right in

530
00:21:33,790 --> 00:21:37,870
order to make it grow nicely so I want

531
00:21:37,870 --> 00:21:40,060
to make you try it just that you'll have

532
00:21:40,060 --> 00:21:41,800
a little experience with it what objects

533
00:21:41,800 --> 00:21:52,620
do you see here

534
00:21:52,630 --> 00:21:54,700
one of you has to actually speak I'm

535
00:21:54,700 --> 00:21:56,770
really truly going to wait for for

536
00:21:56,770 --> 00:21:58,840
someone to suggest an object in the page

537
00:21:58,840 --> 00:22:00,910
or I could call on you wouldn't it be

538
00:22:00,910 --> 00:22:09,030
awful hmm dialog box rounded-corners box

539
00:22:09,030 --> 00:22:11,770
what you mean yeah like a pop-up exactly

540
00:22:11,770 --> 00:22:14,260
he said a dialog box so it's true there

541
00:22:14,260 --> 00:22:18,700
is in this a pop-up right now we want to

542
00:22:18,700 --> 00:22:20,740
be sure to separate out its pop-up pneus

543
00:22:20,740 --> 00:22:22,060
the fact that it's in the center of the

544
00:22:22,060 --> 00:22:23,440
page and it has like a white

545
00:22:23,440 --> 00:22:26,200
transparency like partial opacity that

546
00:22:26,200 --> 00:22:28,150
covers the rest of the page from the

547
00:22:28,150 --> 00:22:30,370
fact that this one happens to have blue

548
00:22:30,370 --> 00:22:32,560
rounded corner box with a slight gray

549
00:22:32,560 --> 00:22:34,150
shadow around it because that's a

550
00:22:34,150 --> 00:22:35,590
separate object that's actually the

551
00:22:35,590 --> 00:22:43,330
contour tabs yep tabs are container you

552
00:22:43,330 --> 00:22:44,800
might very well want to have them

553
00:22:44,800 --> 00:22:46,630
somewhere else you might have an

554
00:22:46,630 --> 00:22:48,190
instance where you need tabs in a page

555
00:22:48,190 --> 00:22:49,810
you need tabs in a different kind of

556
00:22:49,810 --> 00:22:51,430
rounded corner box you definitely want

557
00:22:51,430 --> 00:22:52,930
to separate out the tabs into their own

558
00:22:52,930 --> 00:23:03,440
object good job

559
00:23:03,450 --> 00:23:07,120
yes there are buttons absolutely there

560
00:23:07,120 --> 00:23:08,290
are a couple different buttons and in

561
00:23:08,290 --> 00:23:10,060
fact when you when you hover over them

562
00:23:10,060 --> 00:23:11,470
they have a couple of different states

563
00:23:11,470 --> 00:23:13,060
sew buttons are an important object to

564
00:23:13,060 --> 00:23:19,720
separate out sorry input fields yep

565
00:23:19,720 --> 00:23:21,370
we've got input fields we've got a text

566
00:23:21,370 --> 00:23:24,220
area and an input we've also got labels

567
00:23:24,220 --> 00:23:26,140
so those would be separate objects or

568
00:23:26,140 --> 00:23:27,700
maybe together depending on if there

569
00:23:27,700 --> 00:23:32,740
were different possible layouts link

570
00:23:32,740 --> 00:23:34,870
styles yeah exactly we've got one link

571
00:23:34,870 --> 00:23:36,850
style which is the basic link style the

572
00:23:36,850 --> 00:23:38,650
change in the blue and then up at the

573
00:23:38,650 --> 00:23:40,660
top the help we have a sort of low light

574
00:23:40,660 --> 00:23:47,320
link style as well good job there are a

575
00:23:47,320 --> 00:23:52,990
couple more sorry yeah there's a heading

576
00:23:52,990 --> 00:23:55,510
absolutely one important thing to notice

577
00:23:55,510 --> 00:23:57,100
about the heading is that it has a

578
00:23:57,100 --> 00:23:59,080
little image to the left of it and you

579
00:23:59,080 --> 00:24:00,520
know the media block we just saw in the

580
00:24:00,520 --> 00:24:02,830
previous example all of a sudden if we

581
00:24:02,830 --> 00:24:04,960
have a medial block object which exists

582
00:24:04,960 --> 00:24:06,550
which we can just use without having to

583
00:24:06,550 --> 00:24:08,650
write any CSS and we have a heading

584
00:24:08,650 --> 00:24:10,450
object that we can just use without

585
00:24:10,450 --> 00:24:12,910
writing any CSS all we do is insert our

586
00:24:12,910 --> 00:24:14,410
image and are heading into the media

587
00:24:14,410 --> 00:24:17,370
block and we have that that basic layout

588
00:24:17,370 --> 00:24:26,530
yep one more sure in the back it could

589
00:24:26,530 --> 00:24:29,050
be yeah so we have a list here for sure

590
00:24:29,050 --> 00:24:31,770
my thought is that it might be a

591
00:24:31,770 --> 00:24:34,150
definition list just because it sort of

592
00:24:34,150 --> 00:24:36,010
got like thing and then something that

593
00:24:36,010 --> 00:24:38,260
goes with it but it could also be an

594
00:24:38,260 --> 00:24:41,950
unordered list yeah absolutely so that's

595
00:24:41,950 --> 00:24:44,380
perfect you guys are definitely seeing

596
00:24:44,380 --> 00:24:48,610
what this stuff is made of and how to

597
00:24:48,610 --> 00:24:50,920
sort of break it down you'll definitely

598
00:24:50,920 --> 00:24:52,360
have more trouble doing that with your

599
00:24:52,360 --> 00:24:54,250
own sites because you're just more

600
00:24:54,250 --> 00:24:55,690
familiar with it and that actually makes

601
00:24:55,690 --> 00:24:59,230
it harder so when I go through the steps

602
00:24:59,230 --> 00:25:02,470
to a good visual inventory and show you

603
00:25:02,470 --> 00:25:04,260
a little bit about about how that works

604
00:25:04,260 --> 00:25:06,430
first you want to pick pages in your

605
00:25:06,430 --> 00:25:08,170
cider that are kind of representative of

606
00:25:08,170 --> 00:25:11,200
the whole you may have a site with

607
00:25:11,200 --> 00:25:13,240
thousands of pages you definitely don't

608
00:25:13,240 --> 00:25:13,960
want to go through

609
00:25:13,960 --> 00:25:17,830
all the thousands of them then you want

610
00:25:17,830 --> 00:25:19,330
to go through the same exercise we did

611
00:25:19,330 --> 00:25:20,740
with the pop-up but you want to do it

612
00:25:20,740 --> 00:25:23,429
with every single piece of your site

613
00:25:23,429 --> 00:25:25,899
copy them into a separate document and

614
00:25:25,899 --> 00:25:27,220
the reason for doing that is because

615
00:25:27,220 --> 00:25:28,630
you're going to want to group them by

616
00:25:28,630 --> 00:25:30,580
type you want to going to want to group

617
00:25:30,580 --> 00:25:32,169
all the headings together and all the

618
00:25:32,169 --> 00:25:33,850
links Styles together and all the tabs

619
00:25:33,850 --> 00:25:35,649
together and the other boxes together

620
00:25:35,649 --> 00:25:38,350
and the popups together that way you

621
00:25:38,350 --> 00:25:41,049
sort of get the idea when you have

622
00:25:41,049 --> 00:25:42,820
duplication and when you have things

623
00:25:42,820 --> 00:25:45,669
that are subtle variations on basically

624
00:25:45,669 --> 00:25:49,809
the same thing what you have when you're

625
00:25:49,809 --> 00:25:51,159
done with this is sort of the very

626
00:25:51,159 --> 00:25:52,990
beginning of a brand new way of coding

627
00:25:52,990 --> 00:25:56,770
the CSS for your website I want to show

628
00:25:56,770 --> 00:25:59,679
you an example of visual inventory

629
00:25:59,679 --> 00:26:02,799
results that i did so i basically go

630
00:26:02,799 --> 00:26:06,070
through an entire site or well in this

631
00:26:06,070 --> 00:26:08,080
case i did 12 pages we were able to find

632
00:26:08,080 --> 00:26:10,120
12 pages that sort of fairly represented

633
00:26:10,120 --> 00:26:13,059
the larger site and you find all of the

634
00:26:13,059 --> 00:26:14,710
headings and text treatments so this is

635
00:26:14,710 --> 00:26:17,230
an excerpt from the headings and text

636
00:26:17,230 --> 00:26:20,200
treatments one thing to notice is if you

637
00:26:20,200 --> 00:26:22,029
look more closely I think there were

638
00:26:22,029 --> 00:26:24,190
eight or seven or eight different ways

639
00:26:24,190 --> 00:26:27,490
of doing dates in just 12 pages so it

640
00:26:27,490 --> 00:26:29,710
can be really important to put them all

641
00:26:29,710 --> 00:26:31,090
together because all of a sudden you're

642
00:26:31,090 --> 00:26:32,169
going to find all these inconsistencies

643
00:26:32,169 --> 00:26:34,960
and when I give this kind of thing to a

644
00:26:34,960 --> 00:26:37,000
client the designers have this moment

645
00:26:37,000 --> 00:26:39,520
where they go oh no we screwed up bad

646
00:26:39,520 --> 00:26:41,980
right because when it's all separated

647
00:26:41,980 --> 00:26:43,600
out into different pages it can be

648
00:26:43,600 --> 00:26:46,090
really easy to think oh we have a pretty

649
00:26:46,090 --> 00:26:47,980
visually consistent site but when

650
00:26:47,980 --> 00:26:49,270
they're right next to each other and you

651
00:26:49,270 --> 00:26:51,549
can see that you used 12 pixels six six

652
00:26:51,549 --> 00:26:54,730
six six and 12 pixel 333 and all of the

653
00:26:54,730 --> 00:26:57,370
others right away you sort of can't you

654
00:26:57,370 --> 00:27:03,370
can't argue with that so once you have

655
00:27:03,370 --> 00:27:05,320
that once you have taken your visual

656
00:27:05,320 --> 00:27:07,029
inventory and you've eliminated the

657
00:27:07,029 --> 00:27:08,890
inconsistencies you've removed all of

658
00:27:08,890 --> 00:27:10,360
the cases where you have something which

659
00:27:10,360 --> 00:27:13,570
is exactly the same or is just a very

660
00:27:13,570 --> 00:27:16,779
subtle variation on the same you can

661
00:27:16,779 --> 00:27:18,159
start building your component library

662
00:27:18,159 --> 00:27:20,620
and so we're building the Lego that are

663
00:27:20,620 --> 00:27:22,000
going to be used to build all of the

664
00:27:22,000 --> 00:27:26,770
features of our site that might be

665
00:27:26,770 --> 00:27:27,380
heading

666
00:27:27,380 --> 00:27:30,440
lists contours backgrounds text

667
00:27:30,440 --> 00:27:32,270
treatments tabs carousels there are a

668
00:27:32,270 --> 00:27:34,340
lot of different things buttons all the

669
00:27:34,340 --> 00:27:36,170
all the bits we found form element

670
00:27:36,170 --> 00:27:38,990
spacing classes but they have to be

671
00:27:38,990 --> 00:27:40,430
built well we want to look at the

672
00:27:40,430 --> 00:27:42,470
anatomy of a good component what makes a

673
00:27:42,470 --> 00:27:44,480
good component so an example from

674
00:27:44,480 --> 00:27:46,430
facebook is the media object that i

675
00:27:46,430 --> 00:27:48,110
talked about with the image to the left

676
00:27:48,110 --> 00:27:49,610
and the stuff that describes it to the

677
00:27:49,610 --> 00:27:54,020
right what I realized when I was looking

678
00:27:54,020 --> 00:27:55,880
at the facebook website is that they had

679
00:27:55,880 --> 00:27:58,010
all of these different pieces and if you

680
00:27:58,010 --> 00:27:59,240
use Facebook they'll be pretty familiar

681
00:27:59,240 --> 00:28:01,820
to you but they're actually all the same

682
00:28:01,820 --> 00:28:04,610
object the image might vary the image

683
00:28:04,610 --> 00:28:06,140
width might vary but it's the same thing

684
00:28:06,140 --> 00:28:09,710
happening over and over again so the

685
00:28:09,710 --> 00:28:10,940
first thing to do when you're building a

686
00:28:10,940 --> 00:28:12,530
component is to say all right what do we

687
00:28:12,530 --> 00:28:13,970
know about this component what do we

688
00:28:13,970 --> 00:28:18,560
know for sure it can be nested right we

689
00:28:18,560 --> 00:28:21,530
can see from this one here that it can

690
00:28:21,530 --> 00:28:23,510
have a media block nested inside of

691
00:28:23,510 --> 00:28:25,250
itself so that's a really important

692
00:28:25,250 --> 00:28:27,620
thing to know about it it has an

693
00:28:27,620 --> 00:28:29,690
optional right button the little X to

694
00:28:29,690 --> 00:28:31,580
close it so it had actually has three

695
00:28:31,580 --> 00:28:33,260
regions the left right and then the

696
00:28:33,260 --> 00:28:36,530
center area and it must absolutely clear

697
00:28:36,530 --> 00:28:39,260
fix we won't wouldn't want something

698
00:28:39,260 --> 00:28:42,850
sort of sliding up into the media block

699
00:28:42,850 --> 00:28:45,080
perhaps more importantly we need to

700
00:28:45,080 --> 00:28:47,060
define what we don't know about the

701
00:28:47,060 --> 00:28:50,410
media object this is where we make our

702
00:28:50,410 --> 00:28:53,030
our components flexible where we make

703
00:28:53,030 --> 00:28:55,460
them work in situations that we didn't

704
00:28:55,460 --> 00:28:58,640
originally intend them to keep in mind

705
00:28:58,640 --> 00:29:00,800
that you're not writing your CSS for

706
00:29:00,800 --> 00:29:02,660
where your project is now to build that

707
00:29:02,660 --> 00:29:04,790
the designs you have now you're writing

708
00:29:04,790 --> 00:29:06,500
your CSS to build the designs you're

709
00:29:06,500 --> 00:29:08,630
going to have in six months time that

710
00:29:08,630 --> 00:29:09,830
you have no idea what they're going to

711
00:29:09,830 --> 00:29:11,900
look like yet so you're building the

712
00:29:11,900 --> 00:29:15,220
pieces that will make the features later

713
00:29:15,220 --> 00:29:17,900
so what don't we know about this the

714
00:29:17,900 --> 00:29:20,150
image width and decoration very you can

715
00:29:20,150 --> 00:29:21,620
have big images they can have hover

716
00:29:21,620 --> 00:29:23,450
effects you can have tiny icons we

717
00:29:23,450 --> 00:29:24,890
really don't know what the image is

718
00:29:24,890 --> 00:29:27,110
going to look like the right contents

719
00:29:27,110 --> 00:29:29,470
also unknown you can have lists in there

720
00:29:29,470 --> 00:29:31,940
you can have paragraphs basically

721
00:29:31,940 --> 00:29:34,130
anything can go inside of it that's how

722
00:29:34,130 --> 00:29:35,990
we know where the boundary of our object

723
00:29:35,990 --> 00:29:39,110
stops because I could say you know media

724
00:29:39,110 --> 00:29:40,550
object Lane

725
00:29:40,550 --> 00:29:42,890
blue but what I really want to say is I

726
00:29:42,890 --> 00:29:44,720
know the media object doesn't care what

727
00:29:44,720 --> 00:29:46,700
goes inside of it so the boundary of the

728
00:29:46,700 --> 00:29:48,950
media object is the body area where you

729
00:29:48,950 --> 00:29:50,570
can place any Content that you like

730
00:29:50,570 --> 00:29:55,550
including other objects and then the

731
00:29:55,550 --> 00:29:57,020
final thing is that the width is unknown

732
00:29:57,020 --> 00:29:58,400
you'll notice that these are all

733
00:29:58,400 --> 00:30:00,350
different widths now if I said that the

734
00:30:00,350 --> 00:30:04,040
media object had to be 250 pixels it

735
00:30:04,040 --> 00:30:05,540
could only be used in a space that

736
00:30:05,540 --> 00:30:08,600
allowed 250 pixels by making the media

737
00:30:08,600 --> 00:30:10,700
objects something flexible even if it's

738
00:30:10,700 --> 00:30:12,560
going to then fit into a fixed width

739
00:30:12,560 --> 00:30:14,450
layout I've made it something that can

740
00:30:14,450 --> 00:30:18,170
be used anywhere we also want to

741
00:30:18,170 --> 00:30:20,120
separate chrome from structure it's a

742
00:30:20,120 --> 00:30:21,530
little hard to see on this slide but

743
00:30:21,530 --> 00:30:23,150
these two media objects actually have a

744
00:30:23,150 --> 00:30:25,010
different background color now the

745
00:30:25,010 --> 00:30:26,960
typical way we've written CSS is that we

746
00:30:26,960 --> 00:30:29,180
have one thing that we really like like

747
00:30:29,180 --> 00:30:31,190
oh good the code for this is perfect we

748
00:30:31,190 --> 00:30:32,840
say well but we need a blue one so we

749
00:30:32,840 --> 00:30:35,120
copy paste the entire CSS over and then

750
00:30:35,120 --> 00:30:36,440
we change the white background color to

751
00:30:36,440 --> 00:30:38,570
a blue background color you absolutely

752
00:30:38,570 --> 00:30:39,560
don't want to do that with your

753
00:30:39,560 --> 00:30:41,660
components you want to basically take

754
00:30:41,660 --> 00:30:43,640
off that layer which is just chrome and

755
00:30:43,640 --> 00:30:46,160
apply that sort of like a mix in to the

756
00:30:46,160 --> 00:30:51,500
base object it's really simple if we

757
00:30:51,500 --> 00:30:52,850
look at the code of the media object is

758
00:30:52,850 --> 00:30:54,830
just a few lines of code it's a div

759
00:30:54,830 --> 00:30:57,770
basically a rapper element with an A in

760
00:30:57,770 --> 00:30:59,960
it a link and then image inside of that

761
00:30:59,960 --> 00:31:02,210
and then we have a body area which is

762
00:31:02,210 --> 00:31:04,640
where our content of our media object

763
00:31:04,640 --> 00:31:10,550
will be the CSS is also really simple we

764
00:31:10,550 --> 00:31:12,620
basically have a new formatting context

765
00:31:12,620 --> 00:31:14,210
which is the overflow hidden overflow

766
00:31:14,210 --> 00:31:15,830
visible zoom one there are a few

767
00:31:15,830 --> 00:31:17,300
different ways you can get a new

768
00:31:17,300 --> 00:31:19,310
formatting context and the more

769
00:31:19,310 --> 00:31:21,290
application like your site is you will

770
00:31:21,290 --> 00:31:22,550
want to use a different one than this

771
00:31:22,550 --> 00:31:24,080
but this works well for just sort of

772
00:31:24,080 --> 00:31:27,500
plain websites and then it's pretty

773
00:31:27,500 --> 00:31:29,780
simple a few floats and of some margins

774
00:31:29,780 --> 00:31:31,670
and padding's to make everything line up

775
00:31:31,670 --> 00:31:33,590
nicely and we're done it's a really

776
00:31:33,590 --> 00:31:37,580
simple object this is my stream story

777
00:31:37,580 --> 00:31:40,460
from the facebook website and this is my

778
00:31:40,460 --> 00:31:42,320
stream story with all the examples where

779
00:31:42,320 --> 00:31:44,630
a media object was used highlighted in

780
00:31:44,630 --> 00:31:47,810
red so just this one object we were able

781
00:31:47,810 --> 00:31:50,120
to have a huge impact in the amount of

782
00:31:50,120 --> 00:31:52,250
code on the website each of these before

783
00:31:52,250 --> 00:31:54,380
was coded individually

784
00:31:54,380 --> 00:31:56,180
each of them before was a separate

785
00:31:56,180 --> 00:31:58,040
instance and all of that floating and

786
00:31:58,040 --> 00:31:59,720
margins was all repeated over and over

787
00:31:59,720 --> 00:32:01,490
again so we got a huge performance

788
00:32:01,490 --> 00:32:05,480
benefit just from this tiny change one

789
00:32:05,480 --> 00:32:06,830
thing that people will say as well isn't

790
00:32:06,830 --> 00:32:08,390
your HTML going to be a little bigger

791
00:32:08,390 --> 00:32:10,280
because in the case with the icons maybe

792
00:32:10,280 --> 00:32:12,170
we could have one less div or something

793
00:32:12,170 --> 00:32:15,590
like that you know in a perfect world

794
00:32:15,590 --> 00:32:17,270
where everything was coded perfectly

795
00:32:17,270 --> 00:32:19,760
maybe that would be true but in the real

796
00:32:19,760 --> 00:32:21,320
world where stuff gets coated with all

797
00:32:21,320 --> 00:32:25,050
kinds of different levels of quality

798
00:32:25,060 --> 00:32:26,810
implementing the media block actually

799
00:32:26,810 --> 00:32:30,530
reduced the HTML size of a stream story

800
00:32:30,530 --> 00:32:35,660
by about fifty percent so what makes a

801
00:32:35,660 --> 00:32:38,030
good component what do we need we need

802
00:32:38,030 --> 00:32:40,610
correct granularity to solve only one

803
00:32:40,610 --> 00:32:43,610
problem with our object we needed to be

804
00:32:43,610 --> 00:32:45,520
flexible and define what we don't know

805
00:32:45,520 --> 00:32:47,680
define how it's going to work in

806
00:32:47,680 --> 00:32:49,430
circumstances we didn't originally

807
00:32:49,430 --> 00:32:52,490
protect predict we want low specificity

808
00:32:52,490 --> 00:32:54,680
we want to make all the rules the same

809
00:32:54,680 --> 00:32:56,450
strength and we want our objects not to

810
00:32:56,450 --> 00:33:00,440
interfere with the existing website we

811
00:33:00,440 --> 00:33:02,750
want to define our encapsulation which

812
00:33:02,750 --> 00:33:05,690
means which of the sub nodes belong to

813
00:33:05,690 --> 00:33:07,340
this object and which of the sub nodes

814
00:33:07,340 --> 00:33:09,230
don't so if you have a rounded corner

815
00:33:09,230 --> 00:33:11,000
box if you have a little element to make

816
00:33:11,000 --> 00:33:13,370
your corners obviously that corner

817
00:33:13,370 --> 00:33:15,530
belongs to the object it's a part of

818
00:33:15,530 --> 00:33:16,910
your not going to have a corner floating

819
00:33:16,910 --> 00:33:18,920
around by itself so in that case you

820
00:33:18,920 --> 00:33:20,720
want to use encapsulation you want to

821
00:33:20,720 --> 00:33:25,010
use the Cascade to to basically target

822
00:33:25,010 --> 00:33:26,960
that exact element only when it's inside

823
00:33:26,960 --> 00:33:29,900
of its parent but modularity on the

824
00:33:29,900 --> 00:33:31,640
other hand means that we want to say

825
00:33:31,640 --> 00:33:33,950
that ok this is the body of our media

826
00:33:33,950 --> 00:33:35,390
object we don't know what someone's

827
00:33:35,390 --> 00:33:36,800
going to put in there we don't want to

828
00:33:36,800 --> 00:33:38,120
define what someone's going to put in

829
00:33:38,120 --> 00:33:40,490
there that's where the the edge of our

830
00:33:40,490 --> 00:33:43,130
object is and the next is predictability

831
00:33:43,130 --> 00:33:46,250
if you have a giant pink heading you

832
00:33:46,250 --> 00:33:47,780
want it to be a giant pink heading no

833
00:33:47,780 --> 00:33:50,060
matter where its pasted in the site you

834
00:33:50,060 --> 00:33:52,310
need to make it so that your CSS is

835
00:33:52,310 --> 00:33:56,910
predictable otherwise it can't be reused

836
00:33:56,920 --> 00:33:59,390
so next up let's talk about integrating

837
00:33:59,390 --> 00:34:04,760
components with an existing site imagine

838
00:34:04,760 --> 00:34:07,790
that we've built a library of little

839
00:34:07,790 --> 00:34:08,300
component

840
00:34:08,300 --> 00:34:10,040
so we have contours we have backgrounds

841
00:34:10,040 --> 00:34:11,830
we have content objects we have a whole

842
00:34:11,830 --> 00:34:14,780
library of different things we can then

843
00:34:14,780 --> 00:34:17,060
mix and match those in order to build

844
00:34:17,060 --> 00:34:19,370
new and interesting sites that we didn't

845
00:34:19,370 --> 00:34:21,679
or pages or features that we didn't know

846
00:34:21,679 --> 00:34:23,830
about when we first started building our

847
00:34:23,830 --> 00:34:28,640
are citing so I'd like to show you an

848
00:34:28,640 --> 00:34:59,520
example let me pop out of here

849
00:34:59,530 --> 00:35:18,940
there we go

850
00:35:18,950 --> 00:35:21,089
so I'd like to show you an example from

851
00:35:21,089 --> 00:35:25,200
congregate com this is the library that

852
00:35:25,200 --> 00:35:28,380
I built from that for them based on how

853
00:35:28,380 --> 00:35:31,440
their website already looked so it was

854
00:35:31,440 --> 00:35:32,940
based on you know going through their

855
00:35:32,940 --> 00:35:34,410
website and finding all the different

856
00:35:34,410 --> 00:35:36,299
pieces we eliminated a bunch of

857
00:35:36,299 --> 00:35:38,010
inconsistencies we found about two

858
00:35:38,010 --> 00:35:39,930
hundred and ninety nine different

859
00:35:39,930 --> 00:35:41,460
heading styles which is relatively

860
00:35:41,460 --> 00:35:43,260
smaller compared to most of the sites i

861
00:35:43,260 --> 00:35:44,790
work on they were relatively visually

862
00:35:44,790 --> 00:35:47,520
consistent but we were able to pare that

863
00:35:47,520 --> 00:35:50,339
down to I think between 30 and 40

864
00:35:50,339 --> 00:35:52,230
different heading styles and and text

865
00:35:52,230 --> 00:35:53,660
treatments that they were going to keep

866
00:35:53,660 --> 00:35:55,829
so here we have all the different

867
00:35:55,829 --> 00:35:57,930
headings their sites interesting in that

868
00:35:57,930 --> 00:36:00,030
it has areas which are on a dark

869
00:36:00,030 --> 00:36:01,530
background in areas that are on a light

870
00:36:01,530 --> 00:36:03,900
background so we had to make the objects

871
00:36:03,900 --> 00:36:06,480
work whichever place they happen to fall

872
00:36:06,480 --> 00:36:08,190
on so we never wanted to end it up end

873
00:36:08,190 --> 00:36:11,099
up with a dark age 5 heading on a dark

874
00:36:11,099 --> 00:36:12,780
background so we made sure that wouldn't

875
00:36:12,780 --> 00:36:15,480
happen we built them link styles so they

876
00:36:15,480 --> 00:36:17,400
have a default link style a low light

877
00:36:17,400 --> 00:36:22,470
link mid mid light and highlight text

878
00:36:22,470 --> 00:36:24,030
treatments so they had a bunch of

879
00:36:24,030 --> 00:36:25,410
different text treatments that they use

880
00:36:25,410 --> 00:36:28,230
in different cases the media block

881
00:36:28,230 --> 00:36:32,430
obviously they needed one of those let

882
00:36:32,430 --> 00:36:35,640
me see they also had ads so they needed

883
00:36:35,640 --> 00:36:37,829
to be able to send her a line left a

884
00:36:37,829 --> 00:36:39,540
line or write a line ads they needed

885
00:36:39,540 --> 00:36:41,400
different add shapes and sizes so we

886
00:36:41,400 --> 00:36:44,490
abstracted that out they had different

887
00:36:44,490 --> 00:36:46,200
images so they had some with thicker

888
00:36:46,200 --> 00:36:48,809
borders some with thinner borders they

889
00:36:48,809 --> 00:36:51,030
needed spacing classes as well it turned

890
00:36:51,030 --> 00:36:53,069
out in a lot of cases they need to tweak

891
00:36:53,069 --> 00:36:55,020
the amount of space between between

892
00:36:55,020 --> 00:36:56,910
different objects and what I didn't want

893
00:36:56,910 --> 00:36:58,890
for them to do is to build that into the

894
00:36:58,890 --> 00:37:00,450
CSS and to end up with a really

895
00:37:00,450 --> 00:37:02,309
unpredictable system where you never

896
00:37:02,309 --> 00:37:04,349
really knew what what your object was

897
00:37:04,349 --> 00:37:06,240
going to behave like so we built them

898
00:37:06,240 --> 00:37:08,849
away to tweak spacing without breaking

899
00:37:08,849 --> 00:37:12,150
the site they had dividers as well so

900
00:37:12,150 --> 00:37:14,609
just ways of creating horizontal space

901
00:37:14,609 --> 00:37:16,940
between two part portions of the page

902
00:37:16,940 --> 00:37:19,530
and containers so a lot of different

903
00:37:19,530 --> 00:37:22,109
rounded corner boxes and you know hover

904
00:37:22,109 --> 00:37:31,190
containers and and things like that

905
00:37:31,200 --> 00:37:36,160
so that's an example of of the results

906
00:37:36,160 --> 00:37:39,010
of visual inventory so first we saw the

907
00:37:39,010 --> 00:37:40,180
visual inventory with all the

908
00:37:40,180 --> 00:37:43,000
inconsistencies and everything else sort

909
00:37:43,000 --> 00:37:44,410
of played out so everyone could see it

910
00:37:44,410 --> 00:37:46,210
and then we built this component library

911
00:37:46,210 --> 00:37:49,230
based on the simplified version of that

912
00:37:49,230 --> 00:37:51,580
the big thing for me this summer and it

913
00:37:51,580 --> 00:37:54,030
was sort of a big realization was that

914
00:37:54,030 --> 00:37:56,380
what I was doing is basically cleaning

915
00:37:56,380 --> 00:37:58,390
up after people's crazy code and I

916
00:37:58,390 --> 00:37:59,980
really like that for me that's a fun

917
00:37:59,980 --> 00:38:03,790
thing to do um why is everybody

918
00:38:03,790 --> 00:38:06,760
snickering I guess there have to be

919
00:38:06,760 --> 00:38:09,190
people who like a optimization anyway um

920
00:38:09,190 --> 00:38:11,590
so if you had a really nasty messy

921
00:38:11,590 --> 00:38:14,380
closet and stuff was everywhere it was

922
00:38:14,380 --> 00:38:17,590
overflowing you couldn't even you

923
00:38:17,590 --> 00:38:19,000
couldn't even basically fit anything

924
00:38:19,000 --> 00:38:22,330
else in what I realized is that ok i

925
00:38:22,330 --> 00:38:24,670
have this neat and orderly CSS that I've

926
00:38:24,670 --> 00:38:26,920
built but how do I do it how do I make

927
00:38:26,920 --> 00:38:29,950
it so that they can have both and what I

928
00:38:29,950 --> 00:38:31,360
realized is that by writing my

929
00:38:31,360 --> 00:38:33,490
components with really low specificity I

930
00:38:33,490 --> 00:38:35,260
could basically tuck my components in

931
00:38:35,260 --> 00:38:37,120
the background of their site and they

932
00:38:37,120 --> 00:38:38,740
wouldn't mess up the existing site

933
00:38:38,740 --> 00:38:40,750
because they're not very strong I don't

934
00:38:40,750 --> 00:38:42,910
have really long selector strings if I

935
00:38:42,910 --> 00:38:45,580
have an h1 it's just h1 and that's it

936
00:38:45,580 --> 00:38:48,700
and maybe dot H 1 but simple simple

937
00:38:48,700 --> 00:38:51,100
selector strings so i tuck my neat and

938
00:38:51,100 --> 00:38:53,230
orderly CSS in the background behind

939
00:38:53,230 --> 00:38:57,190
there you know well depends on the site

940
00:38:57,190 --> 00:38:58,960
but it can be a crazy mess EC has that's

941
00:38:58,960 --> 00:39:01,900
right and by doing that we start being

942
00:39:01,900 --> 00:39:04,770
able to build new components with the

943
00:39:04,770 --> 00:39:08,650
with the sorry build new features with

944
00:39:08,650 --> 00:39:11,110
the good components straightaway so any

945
00:39:11,110 --> 00:39:13,000
new pages any new features get built

946
00:39:13,000 --> 00:39:14,620
with components straight from the get-go

947
00:39:14,620 --> 00:39:17,350
then we look at sort of the 8020 rule

948
00:39:17,350 --> 00:39:20,530
which is to say probably eighty percent

949
00:39:20,530 --> 00:39:22,060
of your page views are from twenty

950
00:39:22,060 --> 00:39:24,640
percent of your of your actual pages so

951
00:39:24,640 --> 00:39:26,110
then we start going in and cleaning up

952
00:39:26,110 --> 00:39:28,540
just those most traffic pages or most

953
00:39:28,540 --> 00:39:30,580
trafficked features we rip all the code

954
00:39:30,580 --> 00:39:32,140
out for one of them and replace it

955
00:39:32,140 --> 00:39:34,630
completely with components and do that

956
00:39:34,630 --> 00:39:37,350
over and over again and as you do it

957
00:39:37,350 --> 00:39:39,550
your CSS gets smaller and smaller

958
00:39:39,550 --> 00:39:41,370
because you can remove the

959
00:39:41,370 --> 00:39:44,400
the existing CSS the broken CSS feature

960
00:39:44,400 --> 00:39:46,440
by feature rather than having to redo

961
00:39:46,440 --> 00:39:48,570
your entire site in one go it's

962
00:39:48,570 --> 00:39:50,490
basically not possible to redo most

963
00:39:50,490 --> 00:39:52,830
sites in one go we do sort of iterative

964
00:39:52,830 --> 00:39:55,530
iterative development now we don't rip

965
00:39:55,530 --> 00:39:57,210
out and replace an entire site with

966
00:39:57,210 --> 00:40:00,450
another site so this allows us to do

967
00:40:00,450 --> 00:40:02,310
sort of iterative development where we

968
00:40:02,310 --> 00:40:03,900
can have you know eighty percent of our

969
00:40:03,900 --> 00:40:06,450
site super fast super performant really

970
00:40:06,450 --> 00:40:08,310
easy to use and yes sure there's twenty

971
00:40:08,310 --> 00:40:10,260
percent of our pages which are crafty

972
00:40:10,260 --> 00:40:11,670
and old and no one has touched in a

973
00:40:11,670 --> 00:40:13,380
while but the first time someone needs

974
00:40:13,380 --> 00:40:15,150
to make a modification to that page what

975
00:40:15,150 --> 00:40:17,160
do they do they replace the old junk

976
00:40:17,160 --> 00:40:19,290
with components and you have another

977
00:40:19,290 --> 00:40:21,330
page which is in the superfast portion

978
00:40:21,330 --> 00:40:27,600
of the site so then the important thing

979
00:40:27,600 --> 00:40:28,860
to keep in mind is after you've done

980
00:40:28,860 --> 00:40:30,960
that is that you delete the the obsolete

981
00:40:30,960 --> 00:40:34,680
CSS don't leave the the junky old CSS

982
00:40:34,680 --> 00:40:36,180
sort of running around in there once

983
00:40:36,180 --> 00:40:37,590
it's no longer used make sure you take

984
00:40:37,590 --> 00:40:41,520
it out so then I want to talk to you

985
00:40:41,520 --> 00:40:43,080
about things machines do well that

986
00:40:43,080 --> 00:40:45,240
people kind of suck at I had done this

987
00:40:45,240 --> 00:40:46,980
by hand for a bunch of clients and

988
00:40:46,980 --> 00:40:49,170
finally I was just like I don't want to

989
00:40:49,170 --> 00:40:51,510
do this by hand anymore so I started

990
00:40:51,510 --> 00:40:54,720
thinking about how the more predictable

991
00:40:54,720 --> 00:40:58,350
things were the more I could the more I

992
00:40:58,350 --> 00:41:00,030
could do them without ever needing to

993
00:41:00,030 --> 00:41:01,320
look at their CSS it was a big

994
00:41:01,320 --> 00:41:03,420
revelation to realize that I didn't need

995
00:41:03,420 --> 00:41:06,600
to take someone's junkie messed up

996
00:41:06,600 --> 00:41:10,710
broken CSS and move it migrated to

997
00:41:10,710 --> 00:41:12,660
something good I could just replace it

998
00:41:12,660 --> 00:41:14,160
with the right thing by doing the

999
00:41:14,160 --> 00:41:16,320
tucking in the background method and so

1000
00:41:16,320 --> 00:41:19,050
in realizing that I thought well huh

1001
00:41:19,050 --> 00:41:20,700
actually this is something that I don't

1002
00:41:20,700 --> 00:41:22,260
have to do at all it seems like a

1003
00:41:22,260 --> 00:41:25,290
machine could be able to do this as well

1004
00:41:25,290 --> 00:41:26,820
there's sort of cross browser testing

1005
00:41:26,820 --> 00:41:28,530
every time we add something to a site

1006
00:41:28,530 --> 00:41:30,900
every time we change a feature we have

1007
00:41:30,900 --> 00:41:32,730
to be testing on every single browser

1008
00:41:32,730 --> 00:41:35,040
and especially with CSS it's not like

1009
00:41:35,040 --> 00:41:36,840
you just get to test once at the end if

1010
00:41:36,840 --> 00:41:38,100
you're doing it right you're probably

1011
00:41:38,100 --> 00:41:40,440
testing with you know every few changes

1012
00:41:40,440 --> 00:41:42,060
you make your testing because if

1013
00:41:42,060 --> 00:41:44,370
something gets really messy it's really

1014
00:41:44,370 --> 00:41:46,770
hard to get it back from there so we

1015
00:41:46,770 --> 00:41:48,480
were wasting just a ton of time with the

1016
00:41:48,480 --> 00:41:52,980
with this sort of cross browser testing

1017
00:41:52,990 --> 00:41:57,079
how much time do I have left okay

1018
00:41:57,079 --> 00:41:59,119
awesome so there are basically two main

1019
00:41:59,119 --> 00:42:00,559
pieces there's linting and there's

1020
00:42:00,559 --> 00:42:04,519
testing if we want to test the rendering

1021
00:42:04,519 --> 00:42:06,920
it gets much simpler when we have an

1022
00:42:06,920 --> 00:42:08,510
object that we know how it's supposed to

1023
00:42:08,510 --> 00:42:10,900
behave so let's look at the media object

1024
00:42:10,900 --> 00:42:13,730
basically we know that the width of the

1025
00:42:13,730 --> 00:42:16,400
wrapper should never be wider than the

1026
00:42:16,400 --> 00:42:18,890
width of the the three containing

1027
00:42:18,890 --> 00:42:20,599
elements and we know that the height of

1028
00:42:20,599 --> 00:42:22,400
the wrapper should always be the height

1029
00:42:22,400 --> 00:42:24,589
of the tallest child element because if

1030
00:42:24,589 --> 00:42:26,569
it's taller what happened it means that

1031
00:42:26,569 --> 00:42:28,670
something dropped below and so all of a

1032
00:42:28,670 --> 00:42:30,049
sudden we can start to think about

1033
00:42:30,049 --> 00:42:32,630
testing these objects in a way that

1034
00:42:32,630 --> 00:42:34,190
means that we don't have to go look in

1035
00:42:34,190 --> 00:42:36,049
every single browser it starts to be

1036
00:42:36,049 --> 00:42:40,670
automated linting can give us more

1037
00:42:40,670 --> 00:42:43,760
information as well simple things I

1038
00:42:43,760 --> 00:42:45,769
started looking at all the old websites

1039
00:42:45,769 --> 00:42:47,630
that talked about like the broken box

1040
00:42:47,630 --> 00:42:49,369
model and things like that and realizing

1041
00:42:49,369 --> 00:42:50,660
that most of what it was saying was

1042
00:42:50,660 --> 00:42:53,299
actually machine testable so you

1043
00:42:53,299 --> 00:42:55,010
shouldn't declare width and padding on

1044
00:42:55,010 --> 00:42:57,289
the same element or with and borders on

1045
00:42:57,289 --> 00:42:59,269
the same element I can parse through the

1046
00:42:59,269 --> 00:43:01,609
CSS and and figure out if someone's done

1047
00:43:01,609 --> 00:43:03,710
that without ever actually having to

1048
00:43:03,710 --> 00:43:06,259
look at the site and say oh this thing

1049
00:43:06,259 --> 00:43:07,940
is larger than a hundred percent clearly

1050
00:43:07,940 --> 00:43:10,819
there's a box model error as well font

1051
00:43:10,819 --> 00:43:12,799
size increments being more than two

1052
00:43:12,799 --> 00:43:14,690
pixels at a time and never being

1053
00:43:14,690 --> 00:43:16,849
repeated I can test that automatically

1054
00:43:16,849 --> 00:43:19,069
so I don't have to go through and do it

1055
00:43:19,069 --> 00:43:23,779
by hand the key to it is having simple

1056
00:43:23,779 --> 00:43:25,549
objects that solve one and only one

1057
00:43:25,549 --> 00:43:28,609
problem we can't unit test something if

1058
00:43:28,609 --> 00:43:30,170
everything in the kitchen sink is thrown

1059
00:43:30,170 --> 00:43:32,630
in so even in a visual way we have to

1060
00:43:32,630 --> 00:43:34,130
break things down so that each object

1061
00:43:34,130 --> 00:43:39,410
does one clearly testable thing grids

1062
00:43:39,410 --> 00:43:42,710
for example are the same as you know as

1063
00:43:42,710 --> 00:43:44,539
the media object we can test if they're

1064
00:43:44,539 --> 00:43:46,279
broken we can test if they're dropping

1065
00:43:46,279 --> 00:43:48,769
below because the height of the wrapper

1066
00:43:48,769 --> 00:43:50,509
should never be taller than the tallest

1067
00:43:50,509 --> 00:43:54,200
of its child nodes so looking at that

1068
00:43:54,200 --> 00:43:59,210
kind of testing as well so today we

1069
00:43:59,210 --> 00:44:00,890
talked about the state of CSS

1070
00:44:00,890 --> 00:44:02,589
performance building a component library

1071
00:44:02,589 --> 00:44:04,789
integrating components with an existing

1072
00:44:04,789 --> 00:44:05,600
site and thing

1073
00:44:05,600 --> 00:44:07,520
machines do well that people kind of

1074
00:44:07,520 --> 00:44:09,380
suck at well so I'm writing my first

1075
00:44:09,380 --> 00:44:11,630
JavaScript ever so i can tell you i kind

1076
00:44:11,630 --> 00:44:13,430
of stuck at that in order to build the

1077
00:44:13,430 --> 00:44:16,810
CSS lint tool but it's a ton of fun and

1078
00:44:16,810 --> 00:44:19,190
it's starting to test some really basic

1079
00:44:19,190 --> 00:44:21,050
stuff like broken box models and font

1080
00:44:21,050 --> 00:44:25,190
sizes and stuff like that so if the

1081
00:44:25,190 --> 00:44:27,110
premise is right if what i'm saying is

1082
00:44:27,110 --> 00:44:28,940
the way site should actually be built to

1083
00:44:28,940 --> 00:44:30,980
me we should see results I care a lot

1084
00:44:30,980 --> 00:44:33,610
about standards accessibility and

1085
00:44:33,610 --> 00:44:35,660
performance and all kinds of things but

1086
00:44:35,660 --> 00:44:38,180
what matters to me is did it change

1087
00:44:38,180 --> 00:44:40,010
something for my user is there user

1088
00:44:40,010 --> 00:44:43,580
experience actually better so I wanted

1089
00:44:43,580 --> 00:44:44,900
to show you some of the results of the

1090
00:44:44,900 --> 00:44:48,290
Facebook optimization they found that

1091
00:44:48,290 --> 00:44:50,000
due to these efforts we cut our average

1092
00:44:50,000 --> 00:44:51,860
CSS bytes per page by nineteen percent

1093
00:44:51,860 --> 00:44:55,340
after gzip and HTML bites by per page by

1094
00:44:55,340 --> 00:44:57,920
forty four percent before gzip and there

1095
00:44:57,920 --> 00:44:59,360
are some more notes about other

1096
00:44:59,360 --> 00:45:00,920
performance projects on the on the

1097
00:45:00,920 --> 00:45:03,560
engineering blog but to me that sort of

1098
00:45:03,560 --> 00:45:06,050
speaks for itself we have vastly less

1099
00:45:06,050 --> 00:45:08,740
code to deal with as developers and

1100
00:45:08,740 --> 00:45:11,060
obviously the site is going to be faster

1101
00:45:11,060 --> 00:45:12,590
because they're just pushing a lot less

1102
00:45:12,590 --> 00:45:16,820
over the wire so these are my contact

1103
00:45:16,820 --> 00:45:18,500
details thank you so much for having me

1104
00:45:18,500 --> 00:45:20,630
here you can get me at at stubborn Ella

1105
00:45:20,630 --> 00:45:23,060
as well if you're interested in more of

1106
00:45:23,060 --> 00:45:24,710
these sort of building of components

1107
00:45:24,710 --> 00:45:27,080
check out the open source project on

