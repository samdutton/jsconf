1
00:00:19,220 --> 00:00:21,570

so this isn't going to be like

2
00:00:21,570 --> 00:00:23,490
generating sounds and cool stuff like

3
00:00:23,490 --> 00:00:25,170
that you can find those on the internet

4
00:00:25,170 --> 00:00:29,070
this is going to be kind of ramp tea I

5
00:00:29,070 --> 00:00:36,570
hope I don't make the mics crackle so my

6
00:00:36,570 --> 00:00:38,910
name is Blaine bublitz you can find me

7
00:00:38,910 --> 00:00:41,610
on github at faded if you can't remember

8
00:00:41,610 --> 00:00:49,400
that it's fat ed and I started a company

9
00:00:49,400 --> 00:00:52,080
it's not last December this December

10
00:00:52,080 --> 00:00:54,030
before with my business partner Louie

11
00:00:54,030 --> 00:00:55,260
you might have saw us talk earlier it's

12
00:00:55,260 --> 00:00:56,940
called ice dev we do javascript

13
00:00:56,940 --> 00:01:00,059
consulting and html5 gaming we're always

14
00:01:00,059 --> 00:01:02,220
looking for awesome fun projects so if

15
00:01:02,220 --> 00:01:04,710
you have anything hit me up we also have

16
00:01:04,710 --> 00:01:08,460
fantastic shirts to give away limited

17
00:01:08,460 --> 00:01:14,070
edition and I want to give all of them

18
00:01:14,070 --> 00:01:18,420
away so find me and and take a shirt we

19
00:01:18,420 --> 00:01:19,799
have an open source game engine called

20
00:01:19,799 --> 00:01:22,859
frozen j/s and we've been working on it

21
00:01:22,859 --> 00:01:24,570
really hard for the last five months

22
00:01:24,570 --> 00:01:26,939
we've put out four versions in that time

23
00:01:26,939 --> 00:01:30,299
and we're really proud of it we want to

24
00:01:30,299 --> 00:01:32,250
actually start like making games for

25
00:01:32,250 --> 00:01:34,859
money but right now we're consulting go

26
00:01:34,859 --> 00:01:38,039
use it submit issues tell us what's

27
00:01:38,039 --> 00:01:40,619
wrong with it stuff like that we also

28
00:01:40,619 --> 00:01:42,390
have awesome stickers that look like

29
00:01:42,390 --> 00:01:47,039
that so get them too and I run

30
00:01:47,039 --> 00:01:49,229
hackathons Ian Phoenix where I'm from

31
00:01:49,229 --> 00:01:52,409
and we did an html5 game hackathon in

32
00:01:52,409 --> 00:01:55,920
December Arduino in March and if you

33
00:01:55,920 --> 00:01:57,719
want to have awesome time and you're in

34
00:01:57,719 --> 00:01:59,909
Phoenix or close to Fenix you should

35
00:01:59,909 --> 00:02:01,530
definitely come out because we have tons

36
00:02:01,530 --> 00:02:04,950
of prizes and also always looking for

37
00:02:04,950 --> 00:02:10,229
sponsors so gather round everybody well

38
00:02:10,229 --> 00:02:13,260
I tell you a story of ancient times when

39
00:02:13,260 --> 00:02:15,209
the proprietary once ruled the world and

40
00:02:15,209 --> 00:02:18,390
made us do horrible things like embed an

41
00:02:18,390 --> 00:02:23,180
object until one day the html5 warriors

42
00:02:23,180 --> 00:02:26,900
vanquished them and delivered unto us

43
00:02:26,900 --> 00:02:29,290
multimedia

44
00:02:29,290 --> 00:02:32,219
most of you explored the sunnylands of

45
00:02:32,219 --> 00:02:36,549
the audio and video tag but very few

46
00:02:36,549 --> 00:02:38,829
ventured into things such as web audio

47
00:02:38,829 --> 00:02:44,019
and codecs and mobile I decided to take

48
00:02:44,019 --> 00:02:45,549
on this challenge so I dawn my

49
00:02:45,549 --> 00:02:50,170
adventurers gear and before I even began

50
00:02:50,170 --> 00:02:52,599
my quest the great wizard bulto Gnaeus

51
00:02:52,599 --> 00:02:55,810
uttered these words to me sound will age

52
00:02:55,810 --> 00:03:00,849
you I i told him that i was going to be

53
00:03:00,849 --> 00:03:05,709
working on sound and he was right sounds

54
00:03:05,709 --> 00:03:07,239
are important we can all agree that

55
00:03:07,239 --> 00:03:09,669
sounds are important if you've ever

56
00:03:09,669 --> 00:03:11,620
watched a movie or a TV show or play the

57
00:03:11,620 --> 00:03:13,239
game with the sound off it's not the

58
00:03:13,239 --> 00:03:16,540
same when I was little I was scared of

59
00:03:16,540 --> 00:03:20,950
Chucky so I turned off the air I muted

60
00:03:20,950 --> 00:03:22,599
it and it's just a stupid doll running

61
00:03:22,599 --> 00:03:24,310
around with a knife in his hand it's

62
00:03:24,310 --> 00:03:26,980
kind of funny actually and I didn't plug

63
00:03:26,980 --> 00:03:28,569
in the speaker thing so we're going to

64
00:03:28,569 --> 00:03:32,230
do this really loud I kind of wanted to

65
00:03:32,230 --> 00:03:36,519
play a game sounds are iconic if you can

66
00:03:36,519 --> 00:03:38,379
hear these and you know them shout out

67
00:03:38,379 --> 00:03:54,289
what you think they are yeah sonic nice

68
00:03:54,299 --> 00:03:56,560
if I can die and there's pack men out

69
00:03:56,560 --> 00:04:02,949
there yeah mega man dying yes so we all

70
00:04:02,949 --> 00:04:05,519
right but a lot of us recognize them

71
00:04:05,519 --> 00:04:08,049
they they really they bring you back to

72
00:04:08,049 --> 00:04:09,250
a moment they bring you back to memories

73
00:04:09,250 --> 00:04:11,709
sounds are iconic and they they add a

74
00:04:11,709 --> 00:04:15,849
lot sounds are also very hard ask

75
00:04:15,849 --> 00:04:18,970
anybody that does sound not just in the

76
00:04:18,970 --> 00:04:25,000
browser but sounds are hard I don't know

77
00:04:25,000 --> 00:04:26,500
why we haven't made it but why we

78
00:04:26,500 --> 00:04:30,789
haven't made it easier so my perspective

79
00:04:30,789 --> 00:04:32,740
is from frozen j/s which we've been

80
00:04:32,740 --> 00:04:34,990
working on so it's coming from a games

81
00:04:34,990 --> 00:04:37,240
perspective a lot of this talk will be

82
00:04:37,240 --> 00:04:39,820
influenced by that and hopefully you can

83
00:04:39,820 --> 00:04:41,680
take it and apply it to web apps stuff

84
00:04:41,680 --> 00:04:43,469
like that

85
00:04:43,469 --> 00:04:45,759
but i just wanted to point out that it's

86
00:04:45,759 --> 00:04:49,990
towards games i guess so let's take a

87
00:04:49,990 --> 00:04:51,879
look at like I said Web Audio verse

88
00:04:51,879 --> 00:04:54,219
html5 audio like how to implement kind

89
00:04:54,219 --> 00:04:56,800
of the same things in each codex how to

90
00:04:56,800 --> 00:05:00,180
deal with codex that's you'll see and

91
00:05:00,180 --> 00:05:04,569
mobile and that's where the ranting

92
00:05:04,569 --> 00:05:09,039
comes in so so the first implementation

93
00:05:09,039 --> 00:05:12,879
of frozen it had a sound implementation

94
00:05:12,879 --> 00:05:18,699
but it was just Web Audio so that was

95
00:05:18,699 --> 00:05:19,900
like the best foot forward this that's

96
00:05:19,900 --> 00:05:25,180
the technology that we want to use but

97
00:05:25,180 --> 00:05:27,310
it didn't have any fall back sword

98
00:05:27,310 --> 00:05:28,900
enough nothing happen if you didn't have

99
00:05:28,900 --> 00:05:32,560
web audio so my partner Louie

100
00:05:32,560 --> 00:05:34,060
implemented it at the first

101
00:05:34,060 --> 00:05:35,439
implementation and he did something

102
00:05:35,439 --> 00:05:37,360
really he did something right right he

103
00:05:37,360 --> 00:05:39,550
started with Web Audio like this

104
00:05:39,550 --> 00:05:41,139
technology that they've developed for

105
00:05:41,139 --> 00:05:43,270
for us for four games and stuff it says

106
00:05:43,270 --> 00:05:46,000
in spec he did something horribly

107
00:05:46,000 --> 00:05:48,550
horribly horribly wrong he only

108
00:05:48,550 --> 00:05:51,279
implemented Web Audio and expected that

109
00:05:51,279 --> 00:05:53,770
the browser vendors actually cared

110
00:05:53,770 --> 00:05:56,919
enough to get it out quickly so you can

111
00:05:56,919 --> 00:06:00,879
see by this can i use thing that chrome

112
00:06:00,879 --> 00:06:04,690
has had it for a long time and it just

113
00:06:04,690 --> 00:06:07,330
got into Safari and iOS Safari which is

114
00:06:07,330 --> 00:06:08,949
really cool and it looks like it's

115
00:06:08,949 --> 00:06:10,300
coming in Firefox it's actually a

116
00:06:10,300 --> 00:06:14,139
nightly on flag right now and who knows

117
00:06:14,139 --> 00:06:16,810
about ie it might it might not I don't

118
00:06:16,810 --> 00:06:19,930
know and there's bugs open for firefox

119
00:06:19,930 --> 00:06:22,960
Android I I definitely encourage you to

120
00:06:22,960 --> 00:06:24,789
go there plus 1 then at least show

121
00:06:24,789 --> 00:06:26,650
people or show the browser vendors that

122
00:06:26,650 --> 00:06:28,479
we are that we want them that we need

123
00:06:28,479 --> 00:06:33,039
them or that we need these api's so if

124
00:06:33,039 --> 00:06:36,180
we start with Web Audio what do we get

125
00:06:36,180 --> 00:06:39,789
things like very high performance low

126
00:06:39,789 --> 00:06:42,400
latency so like you can fire a

127
00:06:42,400 --> 00:06:44,500
thousandth of a second right like just

128
00:06:44,500 --> 00:06:46,960
crazy amounts of sound processing and

129
00:06:46,960 --> 00:06:49,990
playing and all this stuff it actually

130
00:06:49,990 --> 00:06:53,080
uses buffers instead of resource loading

131
00:06:53,080 --> 00:06:56,200
so so the html5 audio tag goes through

132
00:06:56,200 --> 00:06:58,720
a resource loading process and streams

133
00:06:58,720 --> 00:07:01,900
the the data down and plays it but Web

134
00:07:01,900 --> 00:07:03,010
Audio if we're just going to play a

135
00:07:03,010 --> 00:07:06,060
sound it we grab the whole buffer in and

136
00:07:06,060 --> 00:07:10,810
we know when when we have it and so so

137
00:07:10,810 --> 00:07:13,540
start with web audio but fall back like

138
00:07:13,540 --> 00:07:14,670
I said he did something horribly wrong

139
00:07:14,670 --> 00:07:17,410
the browser vendors don't move as fast

140
00:07:17,410 --> 00:07:22,240
as we would like and to make games and

141
00:07:22,240 --> 00:07:25,210
apps we want to support browsers so do

142
00:07:25,210 --> 00:07:27,400
fall back to html5 audio for browser

143
00:07:27,400 --> 00:07:30,430
support I just wanted to show you some

144
00:07:30,430 --> 00:07:32,200
of the things that you would want to do

145
00:07:32,200 --> 00:07:34,780
in web web audio and then that you can

146
00:07:34,780 --> 00:07:38,860
fall back on html5 audio it's things

147
00:07:38,860 --> 00:07:41,050
like initializing like preparing right

148
00:07:41,050 --> 00:07:43,660
it's getting their new audio context

149
00:07:43,660 --> 00:07:45,640
it's actually prefixed right now in in

150
00:07:45,640 --> 00:07:48,130
chrome and safari so it's WebKit audio

151
00:07:48,130 --> 00:07:50,830
context hopefully they move away from

152
00:07:50,830 --> 00:07:52,660
that and then html5 out of your just

153
00:07:52,660 --> 00:07:54,400
moving up an audio object I like descent

154
00:07:54,400 --> 00:07:56,380
syntax better than document create

155
00:07:56,380 --> 00:08:02,590
element audio so use this one instead to

156
00:08:02,590 --> 00:08:05,560
load us a resource for web audio like I

157
00:08:05,560 --> 00:08:07,150
said we have to get this buffer ahead of

158
00:08:07,150 --> 00:08:12,250
time and then after we have the buffer

159
00:08:12,250 --> 00:08:14,410
we can decode it into our audio stream

160
00:08:14,410 --> 00:08:20,560
or yeah and then we can use it so we

161
00:08:20,560 --> 00:08:22,360
just make an AJAX request out we grab it

162
00:08:22,360 --> 00:08:24,160
you just have to make sure that your

163
00:08:24,160 --> 00:08:26,620
response type is array buffer if it's

164
00:08:26,620 --> 00:08:31,620
not shit's going to get man and

165
00:08:31,620 --> 00:08:34,180
and then when we get it back we just

166
00:08:34,180 --> 00:08:36,360
pass it to the decode audio data and

167
00:08:36,360 --> 00:08:39,160
we'll get a buffer and that'll that does

168
00:08:39,160 --> 00:08:41,200
it a sink so you have to do your two

169
00:08:41,200 --> 00:08:43,570
callbacks one per on error on success it

170
00:08:43,570 --> 00:08:47,880
on air that's how you load an html5

171
00:08:47,880 --> 00:08:51,880
audio tech set its source and it starts

172
00:08:51,880 --> 00:08:53,560
downloading because preload is such a

173
00:08:53,560 --> 00:08:58,600
true by default to play it you for Web

174
00:08:58,600 --> 00:09:00,580
Audio you create a buffer source you got

175
00:09:00,580 --> 00:09:01,870
to have some place to stick this buffer

176
00:09:01,870 --> 00:09:03,760
now that you have it and then you just

177
00:09:03,760 --> 00:09:05,860
connect it to a destination that's like

178
00:09:05,860 --> 00:09:09,730
speakers and in in headphones your

179
00:09:09,730 --> 00:09:11,410
browser your audio context keeps track

180
00:09:11,410 --> 00:09:13,060
of that and then you just want to start

181
00:09:13,060 --> 00:09:19,269
it you start it on a second so that's

182
00:09:19,269 --> 00:09:22,540
how you play in web audio just a note

183
00:09:22,540 --> 00:09:25,959
note on is the old API and I believe

184
00:09:25,959 --> 00:09:30,720
that Safari only supports the old API

185
00:09:30,720 --> 00:09:36,190
html5 audio is just calling play for

186
00:09:36,190 --> 00:09:37,690
volume again it's a little more

187
00:09:37,690 --> 00:09:39,490
complicated because like Web Audio has

188
00:09:39,490 --> 00:09:42,760
this node system and use plug nodes

189
00:09:42,760 --> 00:09:44,769
together so you're actually creating a

190
00:09:44,769 --> 00:09:46,620
game which is like a volume thing

191
00:09:46,620 --> 00:09:49,180
connecting your source to that so that

192
00:09:49,180 --> 00:09:51,339
it knows about the volume and then you

193
00:09:51,339 --> 00:09:52,930
take the volume node and connect that to

194
00:09:52,930 --> 00:09:54,610
the destination instead of the source

195
00:09:54,610 --> 00:09:56,560
directly because otherwise it's just the

196
00:09:56,560 --> 00:09:59,740
default level and then you can just set

197
00:09:59,740 --> 00:10:01,690
the game value and that changes the

198
00:10:01,690 --> 00:10:03,880
volume an additional five audio just

199
00:10:03,880 --> 00:10:06,850
volume so you're probably saying like

200
00:10:06,850 --> 00:10:08,920
that's so complicated why is there so

201
00:10:08,920 --> 00:10:12,970
much boilerplate for Web Audio it's

202
00:10:12,970 --> 00:10:15,819
really because they implemented this the

203
00:10:15,819 --> 00:10:17,649
API so that they can extend it later

204
00:10:17,649 --> 00:10:19,360
like they really paid attention to that

205
00:10:19,360 --> 00:10:21,490
the whole node thing so they can add any

206
00:10:21,490 --> 00:10:25,750
note and just plug it in but so if it's

207
00:10:25,750 --> 00:10:26,920
so complicated why do you want to do it

208
00:10:26,920 --> 00:10:29,290
we get a ton of extras so yeah we can

209
00:10:29,290 --> 00:10:31,389
fall back for those simple things but we

210
00:10:31,389 --> 00:10:33,670
can't do things like we can't create

211
00:10:33,670 --> 00:10:38,290
sounds in the html5 audio tag we don't

212
00:10:38,290 --> 00:10:40,329
have transitions it's just like cut off

213
00:10:40,329 --> 00:10:42,699
start another one and you can't do any

214
00:10:42,699 --> 00:10:43,990
kind of processing or anything on the

215
00:10:43,990 --> 00:10:46,949
fly so Web Audio is definitely the best

216
00:10:46,949 --> 00:10:50,560
way to go and like I said future

217
00:10:50,560 --> 00:10:53,470
features stuff like that so i guess the

218
00:10:53,470 --> 00:10:59,079
goal is to turn this into that and i

219
00:10:59,079 --> 00:11:00,940
think i have a link at the end to go go

220
00:11:00,940 --> 00:11:06,040
to this it's pretty cool all right so

221
00:11:06,040 --> 00:11:11,170
let's talk about codex this is a pain

222
00:11:11,170 --> 00:11:14,790
point not not as big as the next one but

223
00:11:14,790 --> 00:11:17,290
you can see all the not supported I hope

224
00:11:17,290 --> 00:11:18,370
you can see all their not supported

225
00:11:18,370 --> 00:11:22,390
there is a lot it is not fun at all if

226
00:11:22,390 --> 00:11:25,260
you notice

227
00:11:25,270 --> 00:11:31,130
ie does not support wave all right

228
00:11:31,130 --> 00:11:35,570
moving on so something that you can use

229
00:11:35,570 --> 00:11:37,700
that they expose this API as part of the

230
00:11:37,700 --> 00:11:40,280
spec we can check if our browser can

231
00:11:40,280 --> 00:11:43,940
play a codec it the function is called

232
00:11:43,940 --> 00:11:47,540
can play type alright so yeah that's a

233
00:11:47,540 --> 00:11:49,880
cool that's cool function name but I

234
00:11:49,880 --> 00:11:52,580
don't know about you all you but I don't

235
00:11:52,580 --> 00:11:54,950
like getting strings back from my

236
00:11:54,950 --> 00:12:01,320
functions that say maybe or probably

237
00:12:01,330 --> 00:12:04,910
like 0 to 1 come on we have floating

238
00:12:04,910 --> 00:12:09,410
points so if it if the browser thinks it

239
00:12:09,410 --> 00:12:12,560
may be can play it returns maybe if it

240
00:12:12,560 --> 00:12:15,710
thinks that it probably can play like

241
00:12:15,710 --> 00:12:17,200
what does that even mean I don't know

242
00:12:17,200 --> 00:12:21,800
like why can so web M only has one Kodak

243
00:12:21,800 --> 00:12:24,080
right now so why is that a maybe if it

244
00:12:24,080 --> 00:12:25,670
doesn't have that codec it shouldn't be

245
00:12:25,670 --> 00:12:30,320
able to play so I I don't like it but

246
00:12:30,320 --> 00:12:34,370
it's in the spec so to get full browser

247
00:12:34,370 --> 00:12:37,900
support because I e doesn't support wave

248
00:12:37,900 --> 00:12:42,760
we need mp3 and everybody likes mp3's

249
00:12:42,760 --> 00:12:46,010
mp3 so bored by chrome IE Safari some of

250
00:12:46,010 --> 00:12:47,780
the Firefox is like weird edge things

251
00:12:47,780 --> 00:12:52,130
like if it's a brand new firefox on a

252
00:12:52,130 --> 00:12:55,400
platform that has mp3 codec installed

253
00:12:55,400 --> 00:12:58,430
it'll go out to the operating system and

254
00:12:58,430 --> 00:13:01,040
use it but it doesn't come with it so

255
00:13:01,040 --> 00:13:03,770
that's a big pain so expect to use web M

256
00:13:03,770 --> 00:13:07,070
log on firefox also chromium does not

257
00:13:07,070 --> 00:13:10,370
have it so if you if any of you use

258
00:13:10,370 --> 00:13:12,980
chromium you don't have mp3s and opera

259
00:13:12,980 --> 00:13:14,960
doesn't and that'll be based off

260
00:13:14,960 --> 00:13:17,930
chromium so it still won't and like I

261
00:13:17,930 --> 00:13:19,670
said Chrome Safari they also support

262
00:13:19,670 --> 00:13:23,060
this stuff but I e is the main thing so

263
00:13:23,060 --> 00:13:25,850
you probably want to start with mp3 so

264
00:13:25,850 --> 00:13:29,840
how do we decide which codec to pick and

265
00:13:29,840 --> 00:13:33,830
use to to play our sound we can have an

266
00:13:33,830 --> 00:13:36,050
array that has both of our sounds in it

267
00:13:36,050 --> 00:13:37,080
with a different

268
00:13:37,080 --> 00:13:39,060
tight a different type and a different

269
00:13:39,060 --> 00:13:42,960
extension if we start with mp3 as the

270
00:13:42,960 --> 00:13:45,000
first one and web them as a second one

271
00:13:45,000 --> 00:13:47,280
we can just go we can just iterate over

272
00:13:47,280 --> 00:13:49,800
them returning early of course when we

273
00:13:49,800 --> 00:13:51,960
hit one that doesn't return empty string

274
00:13:51,960 --> 00:13:54,210
we check if it can play type and then we

275
00:13:54,210 --> 00:13:56,550
just assign it to the source and I have

276
00:13:56,550 --> 00:13:58,530
comments at the bottom telling like what

277
00:13:58,530 --> 00:14:00,360
browsers would have which extension and

278
00:14:00,360 --> 00:14:03,750
all of my examples I just did a fiddle

279
00:14:03,750 --> 00:14:04,860
and then I kept building on the fiddle

280
00:14:04,860 --> 00:14:12,570
so like the links are at the bottom so

281
00:14:12,570 --> 00:14:17,460
what if we try to do an mp3 when it

282
00:14:17,460 --> 00:14:22,110
tells us maybe and it doesn't work it

283
00:14:22,110 --> 00:14:24,560
just errors out like big error is

284
00:14:24,560 --> 00:14:27,840
horrible but we can listen for the error

285
00:14:27,840 --> 00:14:30,480
event and if we do that we can then

286
00:14:30,480 --> 00:14:32,040
filter out our current ones since we

287
00:14:32,040 --> 00:14:37,230
know it errored and we can try the next

288
00:14:37,230 --> 00:14:38,910
one right so we filter it out and then

289
00:14:38,910 --> 00:14:41,280
we just do our same iteration over and

290
00:14:41,280 --> 00:14:43,410
get the next one that's available if

291
00:14:43,410 --> 00:14:45,300
you're doing a bunch of like different

292
00:14:45,300 --> 00:14:47,940
codecs because of file size or whatever

293
00:14:47,940 --> 00:14:51,900
that this is very helpful because you

294
00:14:51,900 --> 00:14:57,620
just keep trying

295
00:14:57,630 --> 00:15:00,480
so I said we had maybe and I said we had

296
00:15:00,480 --> 00:15:03,950
probably and now we're catching errors

297
00:15:03,950 --> 00:15:08,250
but the errors happen after we try to

298
00:15:08,250 --> 00:15:09,690
get something so we're doing a round

299
00:15:09,690 --> 00:15:13,770
trip to the server which sucks so what

300
00:15:13,770 --> 00:15:16,170
we probably want to do is try all the

301
00:15:16,170 --> 00:15:19,880
probably's first then try all the maybes

302
00:15:19,880 --> 00:15:22,770
so what we can do is we can go over our

303
00:15:22,770 --> 00:15:25,950
whole array of sounds find all the

304
00:15:25,950 --> 00:15:27,570
probably's put them at the beginning of

305
00:15:27,570 --> 00:15:29,970
our of a new array find all the maybes

306
00:15:29,970 --> 00:15:31,950
and shove them at the end anything that

307
00:15:31,950 --> 00:15:33,810
gives us an empty string just ignore it

308
00:15:33,810 --> 00:15:39,450
and then our set source kind of becomes

309
00:15:39,450 --> 00:15:40,890
a little easier and we also don't need

310
00:15:40,890 --> 00:15:46,140
to filter so you then you do set source

311
00:15:46,140 --> 00:15:49,380
and you just shift off and you're trying

312
00:15:49,380 --> 00:15:50,940
all the probably's then you try all the

313
00:15:50,940 --> 00:15:53,310
maybes so that's really that's that's

314
00:15:53,310 --> 00:15:56,190
good that's the least likely to make a

315
00:15:56,190 --> 00:15:58,950
second round trip to the server which is

316
00:15:58,950 --> 00:16:04,260
good turn it into a function call it

317
00:16:04,260 --> 00:16:06,530
load it just needs up an audio object

318
00:16:06,530 --> 00:16:09,120
injects the filename into our array and

319
00:16:09,120 --> 00:16:11,790
gives us all of that boilerplate we just

320
00:16:11,790 --> 00:16:13,920
wrote and then it returns the audio

321
00:16:13,920 --> 00:16:15,780
object out so then we can just call play

322
00:16:15,780 --> 00:16:17,970
and we know that we have one that that's

323
00:16:17,970 --> 00:16:20,130
either working or completely didn't work

324
00:16:20,130 --> 00:16:28,260
at all so in frozen we have some plugins

325
00:16:28,260 --> 00:16:30,120
and when we use them to manage resources

326
00:16:30,120 --> 00:16:34,050
I was really proud I had a lot of fun

327
00:16:34,050 --> 00:16:35,400
with and I'm really proud of like the

328
00:16:35,400 --> 00:16:40,670
load sound implementation plugin it

329
00:16:40,670 --> 00:16:43,740
defaults to web audio sounds if you

330
00:16:43,740 --> 00:16:44,850
don't have web audio it falls back to

331
00:16:44,850 --> 00:16:46,470
html5 audio if you don't have HTML five

332
00:16:46,470 --> 00:16:50,160
audio it falls back to an no opt version

333
00:16:50,160 --> 00:16:53,640
like a just empty play and empty load

334
00:16:53,640 --> 00:16:55,260
all this stuff so you can just write the

335
00:16:55,260 --> 00:16:59,810
same code and if you call this extension

336
00:16:59,810 --> 00:17:04,500
with a file name without and if you call

337
00:17:04,500 --> 00:17:05,880
log in with a file name without an

338
00:17:05,880 --> 00:17:10,439
extension it will auto complete the

339
00:17:10,439 --> 00:17:11,400
extension so it

340
00:17:11,400 --> 00:17:13,470
will do the maybes or the probably than

341
00:17:13,470 --> 00:17:19,329
the maybes and get you the best sound

342
00:17:19,339 --> 00:17:24,570
alright so don't codex what do you guys

343
00:17:24,570 --> 00:17:32,220
expect play to do alright and load all

344
00:17:32,220 --> 00:17:40,200
right me too so these are the specs and

345
00:17:40,200 --> 00:17:42,440
I just copy and pasted them because it's

346
00:17:42,440 --> 00:17:46,860
the spec you can see me do load supposed

347
00:17:46,860 --> 00:17:50,730
to load media play is supposed to load

348
00:17:50,730 --> 00:17:56,340
if it's not loaded and play it's

349
00:17:56,340 --> 00:18:01,320
supposed to load we don't need no

350
00:18:01,320 --> 00:18:05,100
stinkin spec here chrome works chrome

351
00:18:05,100 --> 00:18:09,680
loads chrome plays Firefox plays loads I

352
00:18:09,680 --> 00:18:14,850
even plays and loads Opera Safari how

353
00:18:14,850 --> 00:18:20,580
about mobile safari no but chrome on

354
00:18:20,580 --> 00:18:25,470
Android no there is hope though firefox

355
00:18:25,470 --> 00:18:27,960
on android it plays and loads and

356
00:18:27,960 --> 00:18:31,500
Firefox OS plays and look what what's

357
00:18:31,500 --> 00:18:34,740
wrong with this you guys lost all of it

358
00:18:34,740 --> 00:18:41,400
it was beautiful anyways there's

359
00:18:41,400 --> 00:18:46,560
beautiful beautiful logos up there so I

360
00:18:46,560 --> 00:18:50,070
OS is excuse on there like developer

361
00:18:50,070 --> 00:18:53,880
documentation copied and pasted I don't

362
00:18:53,880 --> 00:18:55,890
care if you read all that but read that

363
00:18:55,890 --> 00:19:03,210
God yeah read this

364
00:19:03,220 --> 00:19:06,769
so preload and autoplay are disabled

365
00:19:06,769 --> 00:19:11,179
javascript play and load methods are

366
00:19:11,179 --> 00:19:14,600
also in active until the user initiates

367
00:19:14,600 --> 00:19:19,759
playback so in my java script that I

368
00:19:19,759 --> 00:19:22,549
wrote on my web page that a user chose

369
00:19:22,549 --> 00:19:27,159
to go to I cannot play or load a sound

370
00:19:27,159 --> 00:19:32,240
without them touching the page and then

371
00:19:32,240 --> 00:19:37,129
Android on the same bandwagon it's

372
00:19:37,129 --> 00:19:39,649
intended was their response to a bug and

373
00:19:39,649 --> 00:19:42,440
then 30 days later that bug was closed

374
00:19:42,440 --> 00:19:44,720
so then somebody opened another issue

375
00:19:44,720 --> 00:19:48,440
saying the exact same thing and there's

376
00:19:48,440 --> 00:19:51,769
the source of that quote I in my other

377
00:19:51,769 --> 00:19:53,029
slides where I point to the body I point

378
00:19:53,029 --> 00:19:57,100
to the new bug it will cost data usage

379
00:19:57,100 --> 00:19:59,840
remember that quote we will get back to

380
00:19:59,840 --> 00:20:04,940
it meanwhile you can download terabytes

381
00:20:04,940 --> 00:20:13,730
of images unrestricted try it and don't

382
00:20:13,730 --> 00:20:15,950
even display the images download them in

383
00:20:15,950 --> 00:20:20,240
the background okay so they're going to

384
00:20:20,240 --> 00:20:21,860
stick us with this weird requirement

385
00:20:21,860 --> 00:20:24,289
that's off spec in terrible so how do we

386
00:20:24,289 --> 00:20:28,700
work around it we do a we bind to touch

387
00:20:28,700 --> 00:20:30,049
start because we're on mobile because

388
00:20:30,049 --> 00:20:33,700
mobile is the problem and we call load

389
00:20:33,700 --> 00:20:36,679
be so we intercept this user interaction

390
00:20:36,679 --> 00:20:37,909
and then we just remove it because we

391
00:20:37,909 --> 00:20:40,759
only need to do it once per audio

392
00:20:40,759 --> 00:20:44,779
element you can't do it on one and then

393
00:20:44,779 --> 00:20:46,159
it works for all of them it's each

394
00:20:46,159 --> 00:20:51,110
individual one all right so this is our

395
00:20:51,110 --> 00:20:52,429
work around this is what they tell us to

396
00:20:52,429 --> 00:20:58,850
do so all's good right we intercept user

397
00:20:58,850 --> 00:21:04,899
input and this these sounds are loaded

398
00:21:04,899 --> 00:21:08,690
but nothing is actually how it seems you

399
00:21:08,690 --> 00:21:11,359
intercept user input and call load and

400
00:21:11,359 --> 00:21:14,600
it loads them a second time that means

401
00:21:14,600 --> 00:21:16,039
on Chrome on

402
00:21:16,039 --> 00:21:22,700
android it already loaded them it they

403
00:21:22,700 --> 00:21:26,570
are saving data usage by already loading

404
00:21:26,570 --> 00:21:29,299
the files and telling you that they

405
00:21:29,299 --> 00:21:33,979
don't load so we can do better because

406
00:21:33,979 --> 00:21:36,229
we now know this because i thought that

407
00:21:36,229 --> 00:21:37,820
i could write some code and it would

408
00:21:37,820 --> 00:21:38,929
work the way i thought and then i

409
00:21:38,929 --> 00:21:42,769
debugged it and it wasn't we can set the

410
00:21:42,769 --> 00:21:46,729
volume to 0 we can play the sound so

411
00:21:46,729 --> 00:21:50,539
that it doesn't load and then we can

412
00:21:50,539 --> 00:21:52,940
pause the sound immediately that we can

413
00:21:52,940 --> 00:22:01,859
turn the volume back up is it solved

414
00:22:01,869 --> 00:22:04,129
it's actually a solved as we can get it

415
00:22:04,129 --> 00:22:07,070
so they're still late there there's

416
00:22:07,070 --> 00:22:10,879
still some latency because it pulls it

417
00:22:10,879 --> 00:22:13,429
it feels like it pulls down some but not

418
00:22:13,429 --> 00:22:15,769
all or something it's weird like this

419
00:22:15,769 --> 00:22:17,299
doesn't give you a lot of information as

420
00:22:17,299 --> 00:22:20,179
you can see it doesn't even show that is

421
00:22:20,179 --> 00:22:22,639
loaded it likes shows pending and it

422
00:22:22,639 --> 00:22:25,099
doesn't and even when you call load it

423
00:22:25,099 --> 00:22:27,590
doesn't show load loaded so there's

424
00:22:27,590 --> 00:22:30,289
weird and it's still latent so that's

425
00:22:30,289 --> 00:22:32,059
the best we can do but at least we're

426
00:22:32,059 --> 00:22:34,580
not loading things twice which is good

427
00:22:34,580 --> 00:22:39,830
for the user right alright so we have a

428
00:22:39,830 --> 00:22:44,509
new hope and that is disabled gesture

429
00:22:44,509 --> 00:22:48,159
requirement for media playback yes do it

430
00:22:48,159 --> 00:22:51,830
if you have chrome on on Chrome for

431
00:22:51,830 --> 00:22:55,519
Android you can go and enable this and

432
00:22:55,519 --> 00:22:57,229
do it please please please please please

433
00:22:57,229 --> 00:23:00,200
it will make everybody's life easier and

434
00:23:00,200 --> 00:23:02,710
hopefully because they have this this

435
00:23:02,710 --> 00:23:05,269
this flag now I'm hoping that they

436
00:23:05,269 --> 00:23:07,599
actually try to move that into

437
00:23:07,599 --> 00:23:13,249
unflagging which is a good thing so I

438
00:23:13,249 --> 00:23:14,899
can't go a whole talk without talking

439
00:23:14,899 --> 00:23:16,429
about streams you know like there's this

440
00:23:16,429 --> 00:23:20,720
node thing and like they say streams I'm

441
00:23:20,720 --> 00:23:23,869
just kidding so audio stream so so audio

442
00:23:23,869 --> 00:23:25,429
streams are like playing once out and

443
00:23:25,429 --> 00:23:26,419
playing another son at the same time

444
00:23:26,419 --> 00:23:29,549
right I'm getting really close to you

445
00:23:29,549 --> 00:23:34,350
and so we want to layer these sounds

446
00:23:34,350 --> 00:23:37,460
right we want to create a kind of a

447
00:23:37,460 --> 00:23:41,100
sound scene of like person walking and a

448
00:23:41,100 --> 00:23:42,840
clock ticking and a gun firing right we

449
00:23:42,840 --> 00:23:43,889
want to layer all these things to make

450
00:23:43,889 --> 00:23:45,929
it an immersive experience we need it

451
00:23:45,929 --> 00:23:48,889
like that's how you make a good game on

452
00:23:48,889 --> 00:23:54,619
mobile no you start playing a sound and

453
00:23:54,619 --> 00:23:56,730
then you start playing another sound and

454
00:23:56,730 --> 00:24:00,869
it cuts you off the first one and then

455
00:24:00,869 --> 00:24:02,100
you play another one it cuts it off and

456
00:24:02,100 --> 00:24:04,710
these are individual elements or like

457
00:24:04,710 --> 00:24:06,179
separate elements it's not the same one

458
00:24:06,179 --> 00:24:07,769
that you're playing again it's a totally

459
00:24:07,769 --> 00:24:09,350
different one it just cuts it off it's

460
00:24:09,350 --> 00:24:13,649
like we cannot create html5 games or

461
00:24:13,649 --> 00:24:17,190
even like really good web apps that that

462
00:24:17,190 --> 00:24:20,159
need sound for emerging without fixing

463
00:24:20,159 --> 00:24:22,909
these fundamental things on mobile and

464
00:24:22,909 --> 00:24:25,649
there's no reason for them to be there

465
00:24:25,649 --> 00:24:29,999
firefox doesn't have them there is hope

466
00:24:29,999 --> 00:24:33,690
again the return of the jedi mean Web

467
00:24:33,690 --> 00:24:38,340
Audio it is in chrome again in chrome

468
00:24:38,340 --> 00:24:41,609
beta 28 so install it and enable it

469
00:24:41,609 --> 00:24:45,450
again flags are awesome Web Audio they

470
00:24:45,450 --> 00:24:46,919
let you play as many streams as you want

471
00:24:46,919 --> 00:24:52,639
the same time and it feels fantastic

472
00:24:52,639 --> 00:24:54,989
some of the games that we wrote actually

473
00:24:54,989 --> 00:24:56,999
are amazing now on mobile because you

474
00:24:56,999 --> 00:25:00,869
can actually hear the sounds so we're

475
00:25:00,869 --> 00:25:02,730
much better than before we need sound

476
00:25:02,730 --> 00:25:03,809
like I said we need for immersion

477
00:25:03,809 --> 00:25:06,119
feedback feedback like if you shoot a

478
00:25:06,119 --> 00:25:07,739
gun you might not see a bullet fly out

479
00:25:07,739 --> 00:25:09,389
but you'll hear it right and brand

480
00:25:09,389 --> 00:25:12,119
recognition like those sounds at the

481
00:25:12,119 --> 00:25:14,609
beginning the iconic sounds right say

482
00:25:14,609 --> 00:25:19,950
stuff like that sounds are that's why we

483
00:25:19,950 --> 00:25:24,059
need them so we start with Web Audio for

484
00:25:24,059 --> 00:25:25,289
all the awesome reasons that I already

485
00:25:25,289 --> 00:25:29,789
said we fall back to html5 audio because

486
00:25:29,789 --> 00:25:32,279
it's there on pretty much everything and

487
00:25:32,279 --> 00:25:34,489
it can get us kind of the way there

488
00:25:34,489 --> 00:25:39,210
there are some for some trade-offs don't

489
00:25:39,210 --> 00:25:41,279
fall back to flash we all know that

490
00:25:41,279 --> 00:25:43,350
flash sucks where JavaScript errs

491
00:25:43,350 --> 00:25:45,630
there's no support on mobile pretty much

492
00:25:45,630 --> 00:25:48,179
right andand SF is a resource hog why do

493
00:25:48,179 --> 00:25:50,460
you want the fans spinning up for a web

494
00:25:50,460 --> 00:25:53,640
browser game for your user you don't if

495
00:25:53,640 --> 00:25:56,669
at all possible so let's push Web Audio

496
00:25:56,669 --> 00:25:58,799
instead don't do flash screw that don't

497
00:25:58,799 --> 00:26:00,690
write libraries for that push Web Audio

498
00:26:00,690 --> 00:26:04,620
go a comment on the issues and +1 them

499
00:26:04,620 --> 00:26:06,510
and get get get them to get that in

500
00:26:06,510 --> 00:26:08,549
there faster and enable it in Chrome

501
00:26:08,549 --> 00:26:11,370
it's awesome they're still areas we need

502
00:26:11,370 --> 00:26:13,530
to improve like I said about Android and

503
00:26:13,530 --> 00:26:16,409
iOS enough we need to fix those can play

504
00:26:16,409 --> 00:26:18,270
type like maybe it should be a floating

505
00:26:18,270 --> 00:26:22,440
point 0 to 1 and we need some better

506
00:26:22,440 --> 00:26:24,419
abstractions for like Web Audio and like

507
00:26:24,419 --> 00:26:25,590
even creating sound stuff like that

508
00:26:25,590 --> 00:26:28,200
there are some cool stuff out there such

509
00:26:28,200 --> 00:26:30,690
as this awesome list I found howler

510
00:26:30,690 --> 00:26:32,880
actually the right as those finish up

511
00:26:32,880 --> 00:26:34,679
the talk it looks really nice and then

512
00:26:34,679 --> 00:26:37,140
there's some that are not not fall back

513
00:26:37,140 --> 00:26:39,720
libraries but actually let you do the

514
00:26:39,720 --> 00:26:42,960
sum of the sound creation and stuff some

515
00:26:42,960 --> 00:26:44,760
game engines with good sound

516
00:26:44,760 --> 00:26:47,340
implementations I have to say frozen

517
00:26:47,340 --> 00:26:49,980
because I did it sound Jess looks

518
00:26:49,980 --> 00:26:51,570
excellent i actually found that one will

519
00:26:51,570 --> 00:26:54,030
ball researching or making my slides

520
00:26:54,030 --> 00:26:55,919
i'll probably be taking a lot of their

521
00:26:55,919 --> 00:27:00,539
advice issues go participate go forth

522
00:27:00,539 --> 00:27:04,500
and participate some tutorials and stuff

523
00:27:04,500 --> 00:27:06,890
to eat you off the ground with web audio

524
00:27:06,890 --> 00:27:09,929
the specs because everybody likes

525
00:27:09,929 --> 00:27:14,450
reading specs yeah images and I'm blind

526
00:27:14,450 --> 00:27:17,789
all my awesome links and that's where my

527
00:27:17,789 --> 00:27:23,720
slide deck is at

528
00:27:23,730 --> 00:27:39,389
thanks

