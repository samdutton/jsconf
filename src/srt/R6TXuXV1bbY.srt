1
00:00:07,990 --> 00:00:13,400

yeah fairlight performance I've always

2
00:00:13,400 --> 00:00:18,290
been really into parallax I mean it's

3
00:00:18,290 --> 00:00:21,050
really it's really hit these days to hit

4
00:00:21,050 --> 00:00:23,060
on it and there's times when they that's

5
00:00:23,060 --> 00:00:26,480
done really poorly but I like the effect

6
00:00:26,480 --> 00:00:30,380
and like personally I i like i like long

7
00:00:30,380 --> 00:00:32,300
single pages and i hate it when I'm like

8
00:00:32,300 --> 00:00:33,320
working on a project and someone's like

9
00:00:33,320 --> 00:00:34,760
well let's break it up into multiple

10
00:00:34,760 --> 00:00:37,690
pages and I'm like because I was that

11
00:00:37,690 --> 00:00:41,030
baccardo Jason he he's in Massachusetts

12
00:00:41,030 --> 00:00:43,789
he said something like a click is the

13
00:00:43,789 --> 00:00:46,429
decision but scrolling is a continuation

14
00:00:46,429 --> 00:00:48,199
and I feel the same way like usability

15
00:00:48,199 --> 00:00:50,300
wise i just feel like scrolling is like

16
00:00:50,300 --> 00:00:52,309
extremely low barrier to entry right

17
00:00:52,309 --> 00:00:54,050
it's just like i'm continuing and then

18
00:00:54,050 --> 00:00:55,190
when you augment that's rollin

19
00:00:55,190 --> 00:00:56,539
experience with parallax i think it's

20
00:00:56,539 --> 00:00:59,030
cool but anyways there's many ways to

21
00:00:59,030 --> 00:01:02,719
fall into a pit of badness with parallax

22
00:01:02,719 --> 00:01:05,479
and so i'm going to show some examples

23
00:01:05,479 --> 00:01:06,979
where that's happened and try and talk

24
00:01:06,979 --> 00:01:10,250
about techniques to avoid that sort of

25
00:01:10,250 --> 00:01:13,219
situation but like i said i've been into

26
00:01:13,219 --> 00:01:16,700
it for a while in 2001 i just pointed to

27
00:01:16,700 --> 00:01:18,500
this site because i thought was pretty

28
00:01:18,500 --> 00:01:21,140
rad so like it's like this one and it's

29
00:01:21,140 --> 00:01:22,640
italian site and I think it's just

30
00:01:22,640 --> 00:01:25,549
selling shoes but like they kind of got

31
00:01:25,549 --> 00:01:27,320
this thing floating in front you know

32
00:01:27,320 --> 00:01:29,299
its parallax is what we're going to talk

33
00:01:29,299 --> 00:01:34,070
about but first I think there's a little

34
00:01:34,070 --> 00:01:35,659
bit of terminology we could discuss I

35
00:01:35,659 --> 00:01:39,020
recently asked kind of like how we could

36
00:01:39,020 --> 00:01:41,000
break up some of these things because

37
00:01:41,000 --> 00:01:43,490
parallax generally gets use the word

38
00:01:43,490 --> 00:01:46,280
gets used for anything for any site that

39
00:01:46,280 --> 00:01:48,590
has an effect on scroll and I think we

40
00:01:48,590 --> 00:01:50,450
could make it up a little bit more so

41
00:01:50,450 --> 00:01:52,750
let's try it out this way parallax

42
00:01:52,750 --> 00:01:55,329
moving elements in different Z layers

43
00:01:55,329 --> 00:02:00,039
along with the natural scroll pace so

44
00:02:00,039 --> 00:02:05,210
come on come on yeah this a classic

45
00:02:05,210 --> 00:02:08,509
example and really the first example was

46
00:02:08,509 --> 00:02:10,129
the nike better world site so this was

47
00:02:10,129 --> 00:02:11,850
designed by ian cole

48
00:02:11,850 --> 00:02:16,170
whole a Kian coil out of the UK and he

49
00:02:16,170 --> 00:02:17,670
is generally the designer credited with

50
00:02:17,670 --> 00:02:19,560
creating the parallax technique and at

51
00:02:19,560 --> 00:02:23,400
least popularizing it on this site so

52
00:02:23,400 --> 00:02:26,450
that's generally parallax peeler is

53
00:02:26,450 --> 00:02:29,640
another site another kind of technique

54
00:02:29,640 --> 00:02:32,070
that we've seen more recently a good

55
00:02:32,070 --> 00:02:35,130
example is here and this is actually I

56
00:02:35,130 --> 00:02:37,200
think where the name is kind of coming

57
00:02:37,200 --> 00:02:40,010
from this is a concept video from the

58
00:02:40,010 --> 00:02:44,250
Canadian agency tehan and lacs but as

59
00:02:44,250 --> 00:02:47,640
you kind of scroll down the the article

60
00:02:47,640 --> 00:02:49,800
kind of peels out of the way so you peel

61
00:02:49,800 --> 00:02:53,460
through content in fact this technique

62
00:02:53,460 --> 00:02:56,100
also I believe might have debuted on

63
00:02:56,100 --> 00:02:59,370
edits quarterly com which was as well

64
00:02:59,370 --> 00:03:03,570
designed by Ian coil so the man really

65
00:03:03,570 --> 00:03:05,250
likes augmenting the scroll experience

66
00:03:05,250 --> 00:03:09,120
with some good stuff alright lastly

67
00:03:09,120 --> 00:03:12,420
scroll jacking scroll jacking we've seen

68
00:03:12,420 --> 00:03:13,740
a little bit more recently this is kind

69
00:03:13,740 --> 00:03:15,300
of taking over in the natural scroll of

70
00:03:15,300 --> 00:03:18,450
the user to display an alternative page

71
00:03:18,450 --> 00:03:21,060
velocity a classic example of this is

72
00:03:21,060 --> 00:03:26,910
the Milwaukee Police newscom which takes

73
00:03:26,910 --> 00:03:31,080
a while but it's so worth it come on I

74
00:03:31,080 --> 00:03:36,090
really yeah let's try it so all right

75
00:03:36,090 --> 00:03:39,990
it's going to scroll a little bit uh-huh

76
00:03:39,990 --> 00:03:44,010
that's good actually oh it's working

77
00:03:44,010 --> 00:03:46,110
pretty nice bring it up on your own

78
00:03:46,110 --> 00:03:50,070
sometime in in many cases it scrolls to

79
00:03:50,070 --> 00:03:53,040
like halfway through the content so

80
00:03:53,040 --> 00:03:54,420
showing like two pieces all at once

81
00:03:54,420 --> 00:03:58,650
that's a good example so they add some

82
00:03:58,650 --> 00:04:00,270
work to do but honestly i think that the

83
00:04:00,270 --> 00:04:02,100
design is done well but it's a little

84
00:04:02,100 --> 00:04:03,420
tricky to pull it off when you want to

85
00:04:03,420 --> 00:04:06,690
completely yeah overtake the scroll like

86
00:04:06,690 --> 00:04:09,240
that alright so that's a little bit of

87
00:04:09,240 --> 00:04:12,000
terminology but we're talking about

88
00:04:12,000 --> 00:04:13,230
performance and so we're really talking

89
00:04:13,230 --> 00:04:15,210
about jank jank is like you are

90
00:04:15,210 --> 00:04:16,470
scrolling everything's supposed to be

91
00:04:16,470 --> 00:04:18,090
smooth you're supposed to be able to

92
00:04:18,090 --> 00:04:21,780
scroll at 60fps if you know a basic site

93
00:04:21,780 --> 00:04:23,280
can do that but the more you throw out

94
00:04:23,280 --> 00:04:25,200
the page and the more you kind of inter

95
00:04:25,200 --> 00:04:26,850
with JavaScript the more you're going to

96
00:04:26,850 --> 00:04:30,810
introduce jank so typically when there

97
00:04:30,810 --> 00:04:32,820
is jank during a scroll it's caused by a

98
00:04:32,820 --> 00:04:36,330
thing that we usually like to call paint

99
00:04:36,330 --> 00:04:40,320
storms paint storms the term has kind of

100
00:04:40,320 --> 00:04:41,310
been around for a while and it generally

101
00:04:41,310 --> 00:04:44,160
means there is just excess painting like

102
00:04:44,160 --> 00:04:45,890
more painting that should be happening

103
00:04:45,890 --> 00:04:49,710
to the page and show so I'm going to

104
00:04:49,710 --> 00:04:51,660
kind of try and visualize this actually

105
00:04:51,660 --> 00:04:57,870
looks like when I come back to this

106
00:04:57,870 --> 00:05:02,670
example over here and I just open up the

107
00:05:02,670 --> 00:05:07,110
devtools what I have you hit escape and

108
00:05:07,110 --> 00:05:08,550
you kind of bring up this drawer down

109
00:05:08,550 --> 00:05:10,140
here which usually has a console but has

110
00:05:10,140 --> 00:05:11,970
a few other things inside the rendering

111
00:05:11,970 --> 00:05:15,930
tab there's show paint rectangles show

112
00:05:15,930 --> 00:05:17,700
composited layer borders and show FPS

113
00:05:17,700 --> 00:05:19,170
counter and I'm going to make good use

114
00:05:19,170 --> 00:05:23,100
of the show paint rectangles now and

115
00:05:23,100 --> 00:05:26,270
basically we're seeing these green

116
00:05:26,270 --> 00:05:29,670
overlays happening on the screen all the

117
00:05:29,670 --> 00:05:34,080
time if I take let's see this is just a

118
00:05:34,080 --> 00:05:35,790
static page and I'm just going to open

119
00:05:35,790 --> 00:05:39,030
it up the same thing we have green over

120
00:05:39,030 --> 00:05:41,040
on me on the scroll bar because the

121
00:05:41,040 --> 00:05:44,220
scrollbars is having to be redrawn but

122
00:05:44,220 --> 00:05:45,840
the content itself is not being redrawn

123
00:05:45,840 --> 00:05:51,000
right so similarly I'll take a inception

124
00:05:51,000 --> 00:05:56,640
explained looks like it's over here cool

125
00:05:56,640 --> 00:06:00,660
site kind of parallax II kind of effect

126
00:06:00,660 --> 00:06:03,720
on a lot of this and if I take a look at

127
00:06:03,720 --> 00:06:06,360
what's happening so they have orange

128
00:06:06,360 --> 00:06:08,100
borders around all of the composited

129
00:06:08,100 --> 00:06:10,890
layers and green for what's being

130
00:06:10,890 --> 00:06:12,870
painted and so as I scroll you can just

131
00:06:12,870 --> 00:06:14,790
see kind of blinking green everywhere so

132
00:06:14,790 --> 00:06:18,060
this is a pretty visual example of paint

133
00:06:18,060 --> 00:06:25,380
storms yeah but in order to understand

134
00:06:25,380 --> 00:06:28,020
kind of like paint and what that means I

135
00:06:28,020 --> 00:06:30,840
want to kind of quickly review all the

136
00:06:30,840 --> 00:06:32,490
different operations that happen in the

137
00:06:32,490 --> 00:06:34,020
browser kind of the rendering pipeline

138
00:06:34,020 --> 00:06:38,040
inside the browser this is a view

139
00:06:38,040 --> 00:06:39,990
from inside of the chrome devtools

140
00:06:39,990 --> 00:06:43,740
timeline but at this point all browsers

141
00:06:43,740 --> 00:06:47,640
have generally these same steps so first

142
00:06:47,640 --> 00:06:50,880
up is the recalculate style operation at

143
00:06:50,880 --> 00:06:54,180
this point we get all the style rules of

144
00:06:54,180 --> 00:06:56,280
the page so they are in external style

145
00:06:56,280 --> 00:07:01,140
sheets inline styles even the user agent

146
00:07:01,140 --> 00:07:03,630
style sheet that you know says what a

147
00:07:03,630 --> 00:07:05,820
button is supposed to look like then we

148
00:07:05,820 --> 00:07:07,320
evaluate all the selectors of all that

149
00:07:07,320 --> 00:07:09,470
stuff match it against the current job

150
00:07:09,470 --> 00:07:11,940
this is exactly where selector matching

151
00:07:11,940 --> 00:07:15,630
happens of total recalculate style costs

152
00:07:15,630 --> 00:07:17,520
usually selector matching is about ten

153
00:07:17,520 --> 00:07:20,760
percent but probably even less so it's

154
00:07:20,760 --> 00:07:23,580
not it's not too big of a concern then

155
00:07:23,580 --> 00:07:25,140
we calculate the computed style for

156
00:07:25,140 --> 00:07:26,640
every a single element just kind of like

157
00:07:26,640 --> 00:07:27,870
when you call get computed style in

158
00:07:27,870 --> 00:07:29,970
JavaScript the browser does that for

159
00:07:29,970 --> 00:07:31,980
everything that's on the page based on

160
00:07:31,980 --> 00:07:35,640
what's in the style then we lay it out

161
00:07:35,640 --> 00:07:38,630
and this is literally just what is the

162
00:07:38,630 --> 00:07:41,460
geometry of the page laying out all the

163
00:07:41,460 --> 00:07:45,270
boxes and all the dibs then we paint it

164
00:07:45,270 --> 00:07:48,480
painting is figuring out what the pixels

165
00:07:48,480 --> 00:07:50,370
should look like so any sort of visual

166
00:07:50,370 --> 00:07:52,440
effects that are up need to be applied

167
00:07:52,440 --> 00:07:55,910
to figure that out painting oftentimes

168
00:07:55,910 --> 00:07:59,850
is what hurts when we were scrolling a

169
00:07:59,850 --> 00:08:01,410
second ago and all that green that's all

170
00:08:01,410 --> 00:08:05,010
paint so paint oftentimes is capturing a

171
00:08:05,010 --> 00:08:06,060
lot of time inside the browser

172
00:08:06,060 --> 00:08:08,280
especially in highly interactive

173
00:08:08,280 --> 00:08:10,890
scrolling environments on low-end

174
00:08:10,890 --> 00:08:13,710
devices paint is the thing that makes

175
00:08:13,710 --> 00:08:15,630
the experience feel slow it is the thing

176
00:08:15,630 --> 00:08:17,790
that drops the frame rate many times not

177
00:08:17,790 --> 00:08:21,270
JavaScript and then show a little bit

178
00:08:21,270 --> 00:08:24,390
about how to debug with the show paint

179
00:08:24,390 --> 00:08:26,760
rex which we saw and also continuous

180
00:08:26,760 --> 00:08:28,610
paint mode which is a way to find out

181
00:08:28,610 --> 00:08:30,990
oval things being painted what is the

182
00:08:30,990 --> 00:08:34,590
most expensive so of all of those

183
00:08:34,590 --> 00:08:36,240
operations that are happening inside the

184
00:08:36,240 --> 00:08:37,470
browser how do you kind of map those

185
00:08:37,470 --> 00:08:41,160
into the CSS that we write so here I

186
00:08:41,160 --> 00:08:43,620
kind of have just a snippet of CSS and

187
00:08:43,620 --> 00:08:48,070
here's a brief look so the selector

188
00:08:48,070 --> 00:08:51,070
the cost that we have of the selector is

189
00:08:51,070 --> 00:08:52,810
really manifested in recalculation of

190
00:08:52,810 --> 00:08:56,320
style just figuring out what elements

191
00:08:56,320 --> 00:08:58,630
that style applies that select replies

192
00:08:58,630 --> 00:09:01,450
do then we have a height the height

193
00:09:01,450 --> 00:09:04,540
effects the layout of the page the way

194
00:09:04,540 --> 00:09:06,460
of a div and then all the divs following

195
00:09:06,460 --> 00:09:08,590
it usually and then a tech shadow

196
00:09:08,590 --> 00:09:10,690
doesn't affect any sort of geometry of

197
00:09:10,690 --> 00:09:12,100
how things are laid out it's just a

198
00:09:12,100 --> 00:09:14,110
visual effect right so effects only

199
00:09:14,110 --> 00:09:16,360
paint and so you can kind of look at all

200
00:09:16,360 --> 00:09:18,520
of the CSS properties and figure out

201
00:09:18,520 --> 00:09:23,410
what they account for so if we kind of

202
00:09:23,410 --> 00:09:25,980
take all the operations that happen

203
00:09:25,980 --> 00:09:30,070
transfer moment opacity can actually

204
00:09:30,070 --> 00:09:32,950
they do not affect the layout they do

205
00:09:32,950 --> 00:09:34,630
not affect paint and really can actually

206
00:09:34,630 --> 00:09:36,580
be handled completely at the compositor

207
00:09:36,580 --> 00:09:41,740
level things visual effects happen like

208
00:09:41,740 --> 00:09:43,600
a box shadow bore radius background

209
00:09:43,600 --> 00:09:46,060
outline even outline actually is just a

210
00:09:46,060 --> 00:09:47,200
visual effect and does not affect

211
00:09:47,200 --> 00:09:50,590
geometry so those only require being

212
00:09:50,590 --> 00:09:52,840
painted and then composited and then

213
00:09:52,840 --> 00:09:56,680
these guys these are all kind of the

214
00:09:56,680 --> 00:09:59,230
things that cost the most changing the

215
00:09:59,230 --> 00:10:00,640
width changing the margin the border

216
00:10:00,640 --> 00:10:03,130
left and top and we're talking about

217
00:10:03,130 --> 00:10:04,720
parallax these are usually the ones that

218
00:10:04,720 --> 00:10:06,760
we're talking about anytime that you

219
00:10:06,760 --> 00:10:09,220
change left on top you're going to have

220
00:10:09,220 --> 00:10:10,480
to the browser is going to have to lay

221
00:10:10,480 --> 00:10:13,210
it out then paint it because it has a

222
00:10:13,210 --> 00:10:14,710
new size everything beneath it has

223
00:10:14,710 --> 00:10:16,810
changed and then do any sort of

224
00:10:16,810 --> 00:10:19,870
compositing so the more work that you're

225
00:10:19,870 --> 00:10:23,740
doing the slower of a frame rate and the

226
00:10:23,740 --> 00:10:26,740
worse the user experience gets so I took

227
00:10:26,740 --> 00:10:29,980
a look at all of the CSS properties that

228
00:10:29,980 --> 00:10:31,390
are animated there's actually

229
00:10:31,390 --> 00:10:32,830
instrumentation inside of chrome to

230
00:10:32,830 --> 00:10:35,890
figure out what CSS properties are

231
00:10:35,890 --> 00:10:38,080
getting animated through transitions and

232
00:10:38,080 --> 00:10:41,230
keyframe animation and so this is a dab

233
00:10:41,230 --> 00:10:44,080
dump kind of the left two columns width

234
00:10:44,080 --> 00:10:46,150
and height gets animated the most and

235
00:10:46,150 --> 00:10:48,970
the next one I put kind of what they

236
00:10:48,970 --> 00:10:51,220
require so pretty much you know

237
00:10:51,220 --> 00:10:53,590
everything requires layout and then

238
00:10:53,590 --> 00:10:57,640
paint and then compositing whereas color

239
00:10:57,640 --> 00:10:59,510
and bordeaux-style just paint

240
00:10:59,510 --> 00:11:03,380
pacity just compositing so basically

241
00:11:03,380 --> 00:11:05,330
when we think about the things that we

242
00:11:05,330 --> 00:11:07,640
can do change in elements that the

243
00:11:07,640 --> 00:11:10,340
browser can transition extremely fast

244
00:11:10,340 --> 00:11:12,410
there's about four things we can change

245
00:11:12,410 --> 00:11:15,920
the size the position the rotation and

246
00:11:15,920 --> 00:11:19,550
the opacity these just map to us

247
00:11:19,550 --> 00:11:22,690
changing that the scale of a transform

248
00:11:22,690 --> 00:11:25,640
translation the rotation and just the

249
00:11:25,640 --> 00:11:29,000
straight-up opacity across browsers I've

250
00:11:29,000 --> 00:11:31,190
spoken with the Firefox engineers this

251
00:11:31,190 --> 00:11:34,400
is consistent on Chrome on on safari on

252
00:11:34,400 --> 00:11:38,420
Opera and I use a little I ease pretty

253
00:11:38,420 --> 00:11:40,750
good at hardware accelerated everything

254
00:11:40,750 --> 00:11:45,440
so they're better than this really but

255
00:11:45,440 --> 00:11:47,270
these are the four things that are on

256
00:11:47,270 --> 00:11:50,960
the super super fast path so whenever

257
00:11:50,960 --> 00:11:52,220
you're doing any sort of visual effects

258
00:11:52,220 --> 00:11:53,890
that are animated any transitions any

259
00:11:53,890 --> 00:11:58,070
animations try and use only these things

260
00:11:58,070 --> 00:12:01,130
and transforms and opacity transitioning

261
00:12:01,130 --> 00:12:03,320
anything else is going to require layout

262
00:12:03,320 --> 00:12:04,790
and paint on every single frame and it's

263
00:12:04,790 --> 00:12:06,950
going to slow things down so kind of at

264
00:12:06,950 --> 00:12:09,230
your own risk I should point out at this

265
00:12:09,230 --> 00:12:14,450
point layer promoting with translate Z

266
00:12:14,450 --> 00:12:19,100
or 3d might be required depends on a lot

267
00:12:19,100 --> 00:12:22,190
of things the compositor architecture

268
00:12:22,190 --> 00:12:23,810
inside of browsers is really freaking

269
00:12:23,810 --> 00:12:27,860
complicated generally it's like it's

270
00:12:27,860 --> 00:12:30,890
required these days in browsers on

271
00:12:30,890 --> 00:12:34,220
desktop browsers on low DPI devices not

272
00:12:34,220 --> 00:12:35,930
required on mobile not required on

273
00:12:35,930 --> 00:12:38,710
retina devices on retina desktop devices

274
00:12:38,710 --> 00:12:42,920
but that's kind of how that is and at

275
00:12:42,920 --> 00:12:45,280
this point I should also point out that

276
00:12:45,280 --> 00:12:47,570
we've kind of known these as hacks for a

277
00:12:47,570 --> 00:12:50,660
while a while and now there's a new CSS

278
00:12:50,660 --> 00:12:52,880
property called will change that is the

279
00:12:52,880 --> 00:12:54,650
kind of standardized version of this

280
00:12:54,650 --> 00:12:56,570
that gives the browser a lot more

281
00:12:56,570 --> 00:12:58,880
semantics to optimize the experience

282
00:12:58,880 --> 00:13:02,960
there and show that in a little bit I

283
00:13:02,960 --> 00:13:06,050
should point out of this at this point I

284
00:13:06,050 --> 00:13:08,420
should bring up background position and

285
00:13:08,420 --> 00:13:12,710
background attachment these two get used

286
00:13:12,710 --> 00:13:13,220
a lot

287
00:13:13,220 --> 00:13:15,350
in kind of a parallax experience you

288
00:13:15,350 --> 00:13:18,800
have like a like you have a div and as

289
00:13:18,800 --> 00:13:20,449
you scroll you kind of want to move the

290
00:13:20,449 --> 00:13:23,860
background up as you're scrolling down

291
00:13:23,860 --> 00:13:28,490
or background attachment here you've set

292
00:13:28,490 --> 00:13:31,939
it to fixed the solution here which kind

293
00:13:31,939 --> 00:13:37,459
of sucks in some cases is taking it out

294
00:13:37,459 --> 00:13:39,589
of a background and throwing it into its

295
00:13:39,589 --> 00:13:41,689
own image element promoting that into a

296
00:13:41,689 --> 00:13:42,889
layer and then changing that around with

297
00:13:42,889 --> 00:13:48,500
transforms I don't like that this is

298
00:13:48,500 --> 00:13:50,209
like a recommendation it feels like a

299
00:13:50,209 --> 00:13:51,649
terrible hack that you have to do to

300
00:13:51,649 --> 00:13:52,939
overcome the brows that the browser

301
00:13:52,939 --> 00:13:56,379
should be smart enough to do this in

302
00:13:56,379 --> 00:14:00,410
most cases on mobile so Chrome Safari

303
00:14:00,410 --> 00:14:02,540
and Firefox on mobile handle this

304
00:14:02,540 --> 00:14:04,790
optimization for you on desktop they're

305
00:14:04,790 --> 00:14:07,699
less smart again so watch out for that

306
00:14:07,699 --> 00:14:09,439
it's something that you can test for

307
00:14:09,439 --> 00:14:14,120
with the profiler and experiment with so

308
00:14:14,120 --> 00:14:16,579
next when we're talking about parallax

309
00:14:16,579 --> 00:14:20,870
you kind of have to you know know when

310
00:14:20,870 --> 00:14:22,730
the browser when the user has scrolled

311
00:14:22,730 --> 00:14:25,509
and so we need to handle that input so

312
00:14:25,509 --> 00:14:29,329
as a few ways and usually it comes down

313
00:14:29,329 --> 00:14:32,930
to a touch start handler mouse wheel or

314
00:14:32,930 --> 00:14:36,680
Scroll basically touch start and mouse

315
00:14:36,680 --> 00:14:39,589
wheel are the semantics of those

316
00:14:39,589 --> 00:14:41,149
elements inside the browser are such

317
00:14:41,149 --> 00:14:45,379
that if you call event.preventdefault at

318
00:14:45,379 --> 00:14:47,509
any time inside that handler the browser

319
00:14:47,509 --> 00:14:49,879
has to say nope I'm not scrolling the

320
00:14:49,879 --> 00:14:52,550
page at all so basically the browser has

321
00:14:52,550 --> 00:14:55,579
to just wait for you to do your entire

322
00:14:55,579 --> 00:14:59,360
handler before it updates anything

323
00:14:59,360 --> 00:15:01,129
scroll it has a little bit more

324
00:15:01,129 --> 00:15:03,319
flexibility with so basically let's say

325
00:15:03,319 --> 00:15:06,769
you have your phone you touch it you're

326
00:15:06,769 --> 00:15:08,120
like doing a fling to scroll the page

327
00:15:08,120 --> 00:15:10,129
right you touch it it's received by the

328
00:15:10,129 --> 00:15:12,470
compositor gosselin is like hey is there

329
00:15:12,470 --> 00:15:15,709
any JavaScript attached to a the place

330
00:15:15,709 --> 00:15:18,529
where I am touching if there's not great

331
00:15:18,529 --> 00:15:19,639
it's going to update the screen it's

332
00:15:19,639 --> 00:15:21,740
going to scroll the page let's say that

333
00:15:21,740 --> 00:15:23,449
there is a touch start handler and the

334
00:15:23,449 --> 00:15:26,480
sonic handler is bound to the body

335
00:15:26,480 --> 00:15:29,510
uh it's like oh okay I need to go

336
00:15:29,510 --> 00:15:31,100
execute that before I do anything else

337
00:15:31,100 --> 00:15:34,430
before I update the screen I'm just

338
00:15:34,430 --> 00:15:36,290
going to execute all that JavaScript

339
00:15:36,290 --> 00:15:38,510
that's attached the handler this is a

340
00:15:38,510 --> 00:15:40,760
cross in a separate thread and that so

341
00:15:40,760 --> 00:15:42,199
it's hopping across threads and when

342
00:15:42,199 --> 00:15:43,490
it's finally done with that can finally

343
00:15:43,490 --> 00:15:47,480
go back and update the screen this can

344
00:15:47,480 --> 00:15:51,130
take hundreds of milliseconds and

345
00:15:51,130 --> 00:15:54,139
hundreds of milliseconds in some cases

346
00:15:54,139 --> 00:15:57,230
like doesn't sound so bad in a page load

347
00:15:57,230 --> 00:15:59,779
thing you might like hundreds of

348
00:15:59,779 --> 00:16:02,120
milliseconds and sound so bad but when

349
00:16:02,120 --> 00:16:04,010
we're talking about input handling it's

350
00:16:04,010 --> 00:16:09,949
much worse this is a benchmark that some

351
00:16:09,949 --> 00:16:12,829
folks at Google made and it basically

352
00:16:12,829 --> 00:16:15,709
helps visualize what latency and jank

353
00:16:15,709 --> 00:16:17,810
kind of look like so I'm just going to

354
00:16:17,810 --> 00:16:20,990
drag this box around and basically

355
00:16:20,990 --> 00:16:23,240
there's no added latency here it feels

356
00:16:23,240 --> 00:16:25,389
pretty snappy as I'm dragging it around

357
00:16:25,389 --> 00:16:29,170
this one has ten frames of latency right

358
00:16:29,170 --> 00:16:32,449
does not feel as good it feels worse for

359
00:16:32,449 --> 00:16:35,079
me and then it feels for you i go to say

360
00:16:35,079 --> 00:16:38,769
similarly down here jank this is fine

361
00:16:38,769 --> 00:16:42,560
this one see periodically it just kind

362
00:16:42,560 --> 00:16:44,990
of like hangs it's sticking with me as

363
00:16:44,990 --> 00:16:49,250
far as as far as its latency but every

364
00:16:49,250 --> 00:16:53,540
once awhile just jenks pretty hard all

365
00:16:53,540 --> 00:16:57,410
right so the the the latency that we

366
00:16:57,410 --> 00:16:58,610
were experiencing in the top right

367
00:16:58,610 --> 00:17:02,600
corner was 160 milliseconds doesn't

368
00:17:02,600 --> 00:17:04,880
sound like held a lot but you feel it

369
00:17:04,880 --> 00:17:06,890
like crazy especially with your finger

370
00:17:06,890 --> 00:17:10,730
on a touchscreen device all right so

371
00:17:10,730 --> 00:17:12,579
some things you can do to minimize that

372
00:17:12,579 --> 00:17:15,939
bind your event listeners low in the Dom

373
00:17:15,939 --> 00:17:18,980
this basically means don't use event

374
00:17:18,980 --> 00:17:22,549
delegation for touchstart don't use

375
00:17:22,549 --> 00:17:28,750
event delegation yeah for touch sign

376
00:17:28,750 --> 00:17:32,419
browsers aren't smart enough to know oh

377
00:17:32,419 --> 00:17:33,950
yeah he's using an event delegation to

378
00:17:33,950 --> 00:17:35,450
really just watch this one selector

379
00:17:35,450 --> 00:17:37,010
that's bound down here it's going to

380
00:17:37,010 --> 00:17:37,990
like have 2x

381
00:17:37,990 --> 00:17:41,410
the entire handler because you set the

382
00:17:41,410 --> 00:17:43,809
hit region of that handler on everything

383
00:17:43,809 --> 00:17:45,790
so it's going to it's going to execute

384
00:17:45,790 --> 00:17:47,970
that before it gets to anything else

385
00:17:47,970 --> 00:17:51,400
bind late so like don't have handlers

386
00:17:51,400 --> 00:17:53,920
set up for non visible objects browser

387
00:17:53,920 --> 00:17:55,240
is not always that smart figuring out

388
00:17:55,240 --> 00:17:57,429
that that element is not visible so I

389
00:17:57,429 --> 00:17:59,070
might have to start executing it anyways

390
00:17:59,070 --> 00:18:02,410
if the visible if you know that the

391
00:18:02,410 --> 00:18:04,150
element is gone outside of the viewport

392
00:18:04,150 --> 00:18:07,900
kill the handler and speed up in the

393
00:18:07,900 --> 00:18:11,350
handlers you've got you want to minimize

394
00:18:11,350 --> 00:18:13,750
that input latency to be really really

395
00:18:13,750 --> 00:18:18,270
tiny so kind of in summary for this is

396
00:18:18,270 --> 00:18:21,220
just avoid JavaScript handlers for

397
00:18:21,220 --> 00:18:23,020
scroll and touch as much as you can

398
00:18:23,020 --> 00:18:24,970
because they just affect the user

399
00:18:24,970 --> 00:18:27,450
experience incredibly if you can't

400
00:18:27,450 --> 00:18:29,920
profile them and make them tiny as

401
00:18:29,920 --> 00:18:31,800
possible you know those annoying

402
00:18:31,800 --> 00:18:35,620
JavaScript micro optimizations that are

403
00:18:35,620 --> 00:18:38,260
annoying this is actually a time when it

404
00:18:38,260 --> 00:18:40,540
might make sense to start applying them

405
00:18:40,540 --> 00:18:42,850
because it's really citizens between a

406
00:18:42,850 --> 00:18:45,309
user touching something with their

407
00:18:45,309 --> 00:18:47,170
finger and then seeing that something

408
00:18:47,170 --> 00:18:52,780
update all right so then the question is

409
00:18:52,780 --> 00:18:55,150
is it possible to avoid JavaScript

410
00:18:55,150 --> 00:18:58,780
completely for parallax because we've

411
00:18:58,780 --> 00:19:01,620
never really had that before and luckily

412
00:19:01,620 --> 00:19:05,770
there is now this is a technique that I

413
00:19:05,770 --> 00:19:07,929
became familiar with through actually

414
00:19:07,929 --> 00:19:09,700
the chromium bug tracker but Scott

415
00:19:09,700 --> 00:19:11,320
kellam is a great guys and he's in

416
00:19:11,320 --> 00:19:13,570
Brooklyn does a lot of great work with

417
00:19:13,570 --> 00:19:15,100
SAS he came up with us a while ago and

418
00:19:15,100 --> 00:19:16,470
he's actually building on some research

419
00:19:16,470 --> 00:19:21,429
from Keith Keith Clark Keith Clark over

420
00:19:21,429 --> 00:19:27,150
in the UK someone let me open this up so

421
00:19:27,150 --> 00:19:32,520
here's basically a bunch of kiddies and

422
00:19:32,520 --> 00:19:36,610
well it's just parallax right but let me

423
00:19:36,610 --> 00:19:42,580
kind of compare this with what we were

424
00:19:42,580 --> 00:19:46,840
seeing over in Inception explained this

425
00:19:46,840 --> 00:19:52,220
loads up

426
00:19:52,230 --> 00:19:58,930
alright so in Inception explained as I

427
00:19:58,930 --> 00:20:01,240
scroll like this is the paint store mean

428
00:20:01,240 --> 00:20:04,660
I'm getting and if I look in a timeline

429
00:20:04,660 --> 00:20:09,460
as I scroll we're getting frame times

430
00:20:09,460 --> 00:20:12,940
that are about 150 milliseconds per

431
00:20:12,940 --> 00:20:16,150
frame there's a lot of work going on now

432
00:20:16,150 --> 00:20:18,220
I know that this demo is a bit more

433
00:20:18,220 --> 00:20:21,220
simplistic but the fantastic thing is

434
00:20:21,220 --> 00:20:23,470
that there's zero paint storming we have

435
00:20:23,470 --> 00:20:27,010
movement completely here straight up

436
00:20:27,010 --> 00:20:29,560
parallax movement and no pain storm at

437
00:20:29,560 --> 00:20:31,960
all we are just you know updating the

438
00:20:31,960 --> 00:20:36,940
scroll bar and that's about it so this

439
00:20:36,940 --> 00:20:39,340
is really cool because never has before

440
00:20:39,340 --> 00:20:41,520
this kind of technique has been evolved

441
00:20:41,520 --> 00:20:44,260
there's never been a pure CSS wave of

442
00:20:44,260 --> 00:20:48,760
doing this the technique here is it's

443
00:20:48,760 --> 00:20:50,800
pretty cool so we'll call this the

444
00:20:50,800 --> 00:20:53,290
kellam Keith technique we're basically

445
00:20:53,290 --> 00:20:55,960
taking all of the elements of the page

446
00:20:55,960 --> 00:20:59,790
and we're putting them into Z layers

447
00:20:59,790 --> 00:21:03,010
it's using 3d transforms which have

448
00:21:03,010 --> 00:21:05,800
constructed a technique you know 3d

449
00:21:05,800 --> 00:21:07,390
transforms comes with a way just as we

450
00:21:07,390 --> 00:21:10,840
heart of establishing depth and def is

451
00:21:10,840 --> 00:21:14,220
exactly what we need for parallax so a

452
00:21:14,220 --> 00:21:17,350
really nice way of seeing this I come

453
00:21:17,350 --> 00:21:18,190
over here and this is kind of the

454
00:21:18,190 --> 00:21:20,350
fullscreen example I'm going to open up

455
00:21:20,350 --> 00:21:22,680
the dev tools and there's a new

456
00:21:22,680 --> 00:21:25,870
experimental panel over here called

457
00:21:25,870 --> 00:21:32,230
layers and so we can see my layers

458
00:21:32,230 --> 00:21:35,200
moving around on the right-hand side but

459
00:21:35,200 --> 00:21:38,380
cooler than that I can also kind of tilt

460
00:21:38,380 --> 00:21:41,920
it and we can see the depth of them as

461
00:21:41,920 --> 00:21:44,530
they kind of move around so we are

462
00:21:44,530 --> 00:21:46,930
literally actually moving these in 3d

463
00:21:46,930 --> 00:21:50,260
space and we're locking the viewport of

464
00:21:50,260 --> 00:21:52,210
the browser to a particular perspective

465
00:21:52,210 --> 00:21:54,070
and moving this around which

466
00:21:54,070 --> 00:21:57,040
semantically you know feels great

467
00:21:57,040 --> 00:21:59,230
because it is like exactly the 3d

468
00:21:59,230 --> 00:22:01,420
experience that we are trying to

469
00:22:01,420 --> 00:22:02,680
give to the user and now we've actually

470
00:22:02,680 --> 00:22:04,540
constructed it in 3d space inside the

471
00:22:04,540 --> 00:22:09,880
browser so it's pretty cool I want to

472
00:22:09,880 --> 00:22:12,400
show a few more things just taking a few

473
00:22:12,400 --> 00:22:14,200
sites that have done these sorts of

474
00:22:14,200 --> 00:22:15,400
techniques and see if we can make them a

475
00:22:15,400 --> 00:22:19,240
little bit better the first is this

476
00:22:19,240 --> 00:22:20,890
great kind of interactive experience

477
00:22:20,890 --> 00:22:22,270
that the New York Times put together a

478
00:22:22,270 --> 00:22:25,150
little bit ago so it's tomato can blues

479
00:22:25,150 --> 00:22:29,110
and as I scroll down this page we have

480
00:22:29,110 --> 00:22:32,400
these kind of guys that that's scroll by

481
00:22:32,400 --> 00:22:35,530
but as I kind of scroll this by like

482
00:22:35,530 --> 00:22:37,330
like up here it's smooth right like this

483
00:22:37,330 --> 00:22:40,060
feels fine and then I come down as I did

484
00:22:40,060 --> 00:22:42,700
you did you did you do and it's like

485
00:22:42,700 --> 00:22:45,670
like I'm just going my fingers but it

486
00:22:45,670 --> 00:22:48,720
just like juggs as these are moving out

487
00:22:48,720 --> 00:22:51,990
so let's look and see what's happening

488
00:22:51,990 --> 00:22:55,870
all right I come in I'll inspect element

489
00:22:55,870 --> 00:22:59,680
and as I scroll we're looking over in

490
00:22:59,680 --> 00:23:01,030
the elements and we see some things

491
00:23:01,030 --> 00:23:05,020
updating and it looks like we have a top

492
00:23:05,020 --> 00:23:07,420
and a and a transform scale that's

493
00:23:07,420 --> 00:23:11,110
actually changing so what someone's

494
00:23:11,110 --> 00:23:15,560
guess at something that is wrong here

495
00:23:15,570 --> 00:23:20,290
yeah just do the transform we kind of if

496
00:23:20,290 --> 00:23:23,590
we avoid the top completely the browser

497
00:23:23,590 --> 00:23:25,240
is probably going to be able to make

498
00:23:25,240 --> 00:23:27,400
this a little bit better so what I did

499
00:23:27,400 --> 00:23:30,550
is this is using the scroller library

500
00:23:30,550 --> 00:23:34,660
which is pretty good and what I did is I

501
00:23:34,660 --> 00:23:37,390
went in and I just made my own copy of

502
00:23:37,390 --> 00:23:41,950
this page and in it this is kind of a

503
00:23:41,950 --> 00:23:44,500
mess I basically temporarily said let's

504
00:23:44,500 --> 00:23:46,330
just take out the top let's transform

505
00:23:46,330 --> 00:23:49,620
only lets manipulate only the transforms

506
00:23:49,620 --> 00:23:54,790
here is my yeah forget it this too hard

507
00:23:54,790 --> 00:23:58,210
to read we said let's do only the

508
00:23:58,210 --> 00:24:03,280
transforms I'll take that away and come

509
00:24:03,280 --> 00:24:05,560
back over here and so this is my updated

510
00:24:05,560 --> 00:24:08,530
version I just told scroller instead of

511
00:24:08,530 --> 00:24:10,180
manipulating top and transform at the

512
00:24:10,180 --> 00:24:11,830
same time just transform it's about it

513
00:24:11,830 --> 00:24:15,419
and as I scroll down

514
00:24:15,429 --> 00:24:27,500
yeah before after yeah so I was a quick

515
00:24:27,500 --> 00:24:30,590
one the next they have here is carousel

516
00:24:30,590 --> 00:24:32,360
carousels and app recently released by

517
00:24:32,360 --> 00:24:34,760
Dropbox has this nice kind of experience

518
00:24:34,760 --> 00:24:38,779
right here pretty good but let's open it

519
00:24:38,779 --> 00:24:43,820
up and take a look I think that I'm the

520
00:24:43,820 --> 00:24:44,929
thing that I didn't show in these two

521
00:24:44,929 --> 00:24:48,440
experiences really is I mean I guess we

522
00:24:48,440 --> 00:24:50,149
can all see it and feel it but I like to

523
00:24:50,149 --> 00:25:00,799
show it to if as I scroll the page what

524
00:25:00,799 --> 00:25:03,649
we want to see oops we're going to see

525
00:25:03,649 --> 00:25:08,210
on the timeline is yeah so I just

526
00:25:08,210 --> 00:25:09,919
captured a quick timeline recording

527
00:25:09,919 --> 00:25:12,399
we're looking at the frame times here

528
00:25:12,399 --> 00:25:15,610
huge frames going way above our 30 FPS

529
00:25:15,610 --> 00:25:19,010
threshold compared to the after where it

530
00:25:19,010 --> 00:25:21,620
is saying really small all the work that

531
00:25:21,620 --> 00:25:24,230
we're doing is happening far underneath

532
00:25:24,230 --> 00:25:28,059
60fps so looking over here on carousel

533
00:25:28,059 --> 00:25:30,590
you can see the entire page is green

534
00:25:30,590 --> 00:25:32,870
right looks like we're just changing a

535
00:25:32,870 --> 00:25:35,090
few things on the page but the entire

536
00:25:35,090 --> 00:25:38,120
page is getting updated for some reason

537
00:25:38,120 --> 00:25:43,220
if i run a timeline and i scroll you can

538
00:25:43,220 --> 00:25:45,590
see it's doing a lot of work so like any

539
00:25:45,590 --> 00:25:47,360
device that is a little bit weaker than

540
00:25:47,360 --> 00:25:50,090
mine is going to be running this much

541
00:25:50,090 --> 00:25:54,110
lower I'm running it at 20 to 30 fps and

542
00:25:54,110 --> 00:25:56,809
any other machine would be a slower

543
00:25:56,809 --> 00:25:58,630
machine we've been running it much lower

544
00:25:58,630 --> 00:26:01,610
so let's see if we can fix this I'm

545
00:26:01,610 --> 00:26:03,830
going to open up elements and I want to

546
00:26:03,830 --> 00:26:05,149
basically get an understanding of why

547
00:26:05,149 --> 00:26:07,580
how these are being changed so i'll just

548
00:26:07,580 --> 00:26:10,730
select it and so it looks like we have

549
00:26:10,730 --> 00:26:12,710
just the transform is being updated okay

550
00:26:12,710 --> 00:26:14,720
that's cool so here we don't have that

551
00:26:14,720 --> 00:26:16,730
problem of top being manipulated it's

552
00:26:16,730 --> 00:26:19,850
all just transforms let's figure out

553
00:26:19,850 --> 00:26:22,399
where it's being manipulated I'm going

554
00:26:22,399 --> 00:26:27,160
to break on attribute modifications

555
00:26:27,160 --> 00:26:30,610
sizes are shaking but when we say bagon

556
00:26:30,610 --> 00:26:32,620
that rebuke modifications a great bonus

557
00:26:32,620 --> 00:26:35,470
here is that it will break in the

558
00:26:35,470 --> 00:26:37,630
JavaScript where the inline style is

559
00:26:37,630 --> 00:26:40,990
being changed so let's drop that in and

560
00:26:40,990 --> 00:26:48,970
I'll scroll again and cool so now we're

561
00:26:48,970 --> 00:26:52,120
broken inside of the minified jquery but

562
00:26:52,120 --> 00:26:53,830
our call stack is telling us a little

563
00:26:53,830 --> 00:26:57,610
bit more coming down we have jQuery

564
00:26:57,610 --> 00:27:00,220
jQuery jQuery and then this looks like

565
00:27:00,220 --> 00:27:04,660
actual application code animates step we

566
00:27:04,660 --> 00:27:06,250
look in here and it looks like this is

567
00:27:06,250 --> 00:27:07,540
where it constructs the transform

568
00:27:07,540 --> 00:27:10,570
adjustment and so what I'm going to try

569
00:27:10,570 --> 00:27:14,860
out is let's just add a translate Z into

570
00:27:14,860 --> 00:27:17,260
this what this is going to do is say hey

571
00:27:17,260 --> 00:27:19,240
we are animating all these things with

572
00:27:19,240 --> 00:27:21,180
transforms I want to operate them as

573
00:27:21,180 --> 00:27:25,990
individual layers on the page I'm just

574
00:27:25,990 --> 00:27:27,940
going to change that JavaScript I hit

575
00:27:27,940 --> 00:27:31,390
command s and my console tells me

576
00:27:31,390 --> 00:27:33,760
recompilation update succeeded so I just

577
00:27:33,760 --> 00:27:36,790
updated that JavaScript I'm going to

578
00:27:36,790 --> 00:27:39,790
come out of the breakpoint just is just

579
00:27:39,790 --> 00:27:45,070
going to continuous and now as I scroll

580
00:27:45,070 --> 00:27:47,280
I'm going to hit my break point again

581
00:27:47,280 --> 00:27:56,770
good and there we go cool so here if I

582
00:27:56,770 --> 00:28:02,050
take I'll open up the unmodified example

583
00:28:02,050 --> 00:28:08,580
right next to this here is the before

584
00:28:08,580 --> 00:28:20,760
think yep before and timeline the after

585
00:28:20,760 --> 00:28:24,910
so yeah it's not so bad a lot less

586
00:28:24,910 --> 00:28:27,280
working them the next thing that I could

587
00:28:27,280 --> 00:28:29,770
do actually is because translate Z is

588
00:28:29,770 --> 00:28:32,380
kind of on its way out as a hack a

589
00:28:32,380 --> 00:28:35,140
better thing to heed we could do is just

590
00:28:35,140 --> 00:28:37,360
straight up views will change so i'll do

591
00:28:37,360 --> 00:28:39,110
that now

592
00:28:39,110 --> 00:28:45,640
something like this thing will change

593
00:28:45,640 --> 00:28:48,530
and then we basically say what we're

594
00:28:48,530 --> 00:28:50,750
going to change we are going to change

595
00:28:50,750 --> 00:28:54,470
the transform of this element will hit

596
00:28:54,470 --> 00:28:58,670
command us update that and well it's

597
00:28:58,670 --> 00:29:02,000
basically the same but that's that's the

598
00:29:02,000 --> 00:29:05,330
kind of effect that we want so we're

599
00:29:05,330 --> 00:29:07,730
looking good here as far as a few

600
00:29:07,730 --> 00:29:11,419
library recommendations scroller and

601
00:29:11,419 --> 00:29:14,750
stellar scroller is probably the most

602
00:29:14,750 --> 00:29:17,179
popular and the author has put a lot of

603
00:29:17,179 --> 00:29:19,850
good work into it stellar is from a

604
00:29:19,850 --> 00:29:22,820
developer outside of Melbourne they're

605
00:29:22,820 --> 00:29:25,190
both great they're not very well suited

606
00:29:25,190 --> 00:29:28,429
for mobile work but they do a good job

607
00:29:28,429 --> 00:29:31,160
being as perform as possible on on

608
00:29:31,160 --> 00:29:35,390
desktop for mobile for mobile only

609
00:29:35,390 --> 00:29:39,169
things i would recommend the Kalam Keith

610
00:29:39,169 --> 00:29:40,870
technique that we looked at earlier

611
00:29:40,870 --> 00:29:43,520
which does a great job the other

612
00:29:43,520 --> 00:29:46,100
question is like dude should you provide

613
00:29:46,100 --> 00:29:47,540
a parallax experience on mobile I would

614
00:29:47,540 --> 00:29:49,940
probably recommend that you likely don't

615
00:29:49,940 --> 00:29:53,030
need to hit it enhances the desktop

616
00:29:53,030 --> 00:29:54,140
experience and you could probably just

617
00:29:54,140 --> 00:29:56,260
kill it from mobile so to sum up

618
00:29:56,260 --> 00:29:59,350
browsers can hit a bath bath and

619
00:29:59,350 --> 00:30:02,059
optimizing these animations if they are

620
00:30:02,059 --> 00:30:04,160
just set up declare declaratively and

621
00:30:04,160 --> 00:30:06,500
CSS the fastest thing you can be

622
00:30:06,500 --> 00:30:08,390
animated it's transform and opacity you

623
00:30:08,390 --> 00:30:11,929
might need to layer promote so watch out

624
00:30:11,929 --> 00:30:14,299
for that try it see if it changes if it

625
00:30:14,299 --> 00:30:17,150
doesn't change don't leave it you can if

626
00:30:17,150 --> 00:30:19,880
you just promote everything it consumes

627
00:30:19,880 --> 00:30:21,650
a lot of GPU memory and that will either

628
00:30:21,650 --> 00:30:24,559
crash a browser or just make everything

629
00:30:24,559 --> 00:30:30,140
really really slow so a good guideline

630
00:30:30,140 --> 00:30:33,320
for that is don't have more than 30 to

631
00:30:33,320 --> 00:30:36,620
40 layers on mobile and try not to use

632
00:30:36,620 --> 00:30:39,080
JavaScript but if you do make it as lean

633
00:30:39,080 --> 00:30:42,910
and mean as possible a few techniques

634
00:30:42,910 --> 00:30:45,710
for keeping your JavaScript fast is

635
00:30:45,710 --> 00:30:48,020
using requestanimationframe minimizing

636
00:30:48,020 --> 00:30:52,369
only the elements manipulated

637
00:30:52,369 --> 00:30:56,549
this not doing what this site did this

638
00:30:56,549 --> 00:30:59,340
is like kind of the classic one this

639
00:30:59,340 --> 00:31:02,789
blow up a few years ago and they did a

640
00:31:02,789 --> 00:31:16,769
really nice job come on come on what the

641
00:31:16,769 --> 00:31:20,759
site decided to do was as you scroll

642
00:31:20,759 --> 00:31:22,830
down there kind of moving elements

643
00:31:22,830 --> 00:31:24,899
around and they literally update the top

644
00:31:24,899 --> 00:31:27,419
and left property for every element in

645
00:31:27,419 --> 00:31:30,330
the Dom as you scroll so basically the

646
00:31:30,330 --> 00:31:32,279
viewport the user viewport stays fixed

647
00:31:32,279 --> 00:31:33,840
and they are just moving the entire

648
00:31:33,840 --> 00:31:37,529
document with left and top as you as you

649
00:31:37,529 --> 00:31:41,639
move your mouse all right and minimize

650
00:31:41,639 --> 00:31:43,139
your hand lacoste and that's it for me

651
00:31:43,139 --> 00:31:44,639
I'm going to wrap up and let's get on to

652
00:31:44,639 --> 00:31:46,529
Jen so I'm excited thank you guys very

653
00:31:46,529 --> 00:31:53,149
much

