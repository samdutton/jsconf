1
00:00:00,320 --> 00:00:02,070

[Music]

2
00:00:02,070 --> 00:00:03,840
[Applause]

3
00:00:03,840 --> 00:00:05,660
[Music]

4
00:00:05,660 --> 00:00:07,410
[Applause]

5
00:00:07,410 --> 00:00:09,280
[Music]

6
00:00:09,280 --> 00:00:11,020
[Applause]

7
00:00:11,020 --> 00:00:12,780
[Music]

8
00:00:12,780 --> 00:00:16,860
[Applause]

9
00:00:16,870 --> 00:00:22,079
[Music]

10
00:00:22,079 --> 00:00:25,570
good morning everyone who's ready for 10

11
00:00:25,570 --> 00:00:27,460
tips to get you can use today to get

12
00:00:27,460 --> 00:00:35,200
rich cool so cross browser browser

13
00:00:35,200 --> 00:00:37,350
extensions

14
00:00:37,350 --> 00:00:41,170
I'm posh Matt claypot go by posh there

15
00:00:41,170 --> 00:00:47,890
are hundred million Matt's I have been

16
00:00:47,890 --> 00:00:49,870
at Mozilla where I've been a developer

17
00:00:49,870 --> 00:00:51,610
advocate for three years but I've been

18
00:00:51,610 --> 00:00:54,250
at Mozilla for eight years which in tech

19
00:00:54,250 --> 00:00:58,660
years is one hundred thousand years you

20
00:00:58,660 --> 00:01:00,670
may know me as the creator of does honey

21
00:01:00,670 --> 00:01:07,090
badger care comm yeah I work for Mozilla

22
00:01:07,090 --> 00:01:09,969
we are a non-profit who makes a product

23
00:01:09,969 --> 00:01:12,280
you may have heard of called Firefox we

24
00:01:12,280 --> 00:01:14,829
are committed to an independent and open

25
00:01:14,829 --> 00:01:17,049
web and we've been doing that for quite

26
00:01:17,049 --> 00:01:20,440
some time 20-some odd years if you

27
00:01:20,440 --> 00:01:22,420
haven't used Firefox recently try it

28
00:01:22,420 --> 00:01:24,970
there now I've done my job the rest of

29
00:01:24,970 --> 00:01:28,540
this is just gravy cool so I am here

30
00:01:28,540 --> 00:01:30,549
today to talk to you about cross browser

31
00:01:30,549 --> 00:01:32,590
browser extensions so we're gonna start

32
00:01:32,590 --> 00:01:34,360
with the eighth grade book the eighth

33
00:01:34,360 --> 00:01:35,650
grade book report version of this which

34
00:01:35,650 --> 00:01:42,909
is what is an extension an extension is

35
00:01:42,909 --> 00:01:44,950
a bundle of code and data that modifies

36
00:01:44,950 --> 00:01:47,890
or augments the functionality of a piece

37
00:01:47,890 --> 00:01:51,220
of software that's so generic has to be

38
00:01:51,220 --> 00:01:53,380
useless but we can compare and contrast

39
00:01:53,380 --> 00:01:55,210
to other things to learn a little bit

40
00:01:55,210 --> 00:01:58,150
more what's an extension versus what's a

41
00:01:58,150 --> 00:02:00,280
plug-in a plug-in is a thing that

42
00:02:00,280 --> 00:02:03,460
doesn't exist anymore but you may have

43
00:02:03,460 --> 00:02:05,320
flash on your system which is sort of

44
00:02:05,320 --> 00:02:07,060
the last remaining plug in plugins

45
00:02:07,060 --> 00:02:10,390
provide sort of extra capabilities to a

46
00:02:10,390 --> 00:02:12,400
browser but they act in a way that's

47
00:02:12,400 --> 00:02:14,680
completely disjoint from the browser the

48
00:02:14,680 --> 00:02:16,510
browser goes hey here's a rectangle on

49
00:02:16,510 --> 00:02:19,510
the screen you can use that and we'll

50
00:02:19,510 --> 00:02:22,150
leave you alone and they say great I'm

51
00:02:22,150 --> 00:02:24,280
gonna overrun my buffers and compromise

52
00:02:24,280 --> 00:02:25,209
your browser

53
00:02:25,209 --> 00:02:29,890
and that's how plugins work so that's we

54
00:02:29,890 --> 00:02:32,140
confused with extensions and extensions

55
00:02:32,140 --> 00:02:34,150
versus add-ons for the longest time at

56
00:02:34,150 --> 00:02:35,709
Mozilla we have sort of referred to

57
00:02:35,709 --> 00:02:38,890
extensions as add-ons and we we use that

58
00:02:38,890 --> 00:02:41,680
is this big catch-all term because we

59
00:02:41,680 --> 00:02:44,530
also use the word themes which is in a

60
00:02:44,530 --> 00:02:45,730
way it's the visual you know visually

61
00:02:45,730 --> 00:02:47,530
change the browser or dictionaries or

62
00:02:47,530 --> 00:02:49,239
language packs and all those things so

63
00:02:49,239 --> 00:02:51,549
really when I if you ever hear you say

64
00:02:51,549 --> 00:02:53,439
add-on instead of extension I kind of

65
00:02:53,439 --> 00:02:55,299
usually just mean extension but

66
00:02:55,299 --> 00:02:58,480
extensions are a subset of add-ons as

67
00:02:58,480 --> 00:03:00,310
you can see from that subset symbol I

68
00:03:00,310 --> 00:03:05,980
have read math ever so we're gonna start

69
00:03:05,980 --> 00:03:07,989
with a brief history of extensions just

70
00:03:07,989 --> 00:03:10,120
to tell you how we got to where we are

71
00:03:10,120 --> 00:03:11,260
today

72
00:03:11,260 --> 00:03:14,889
spoiler today we got to a pretty cool

73
00:03:14,889 --> 00:03:16,599
place what is with all things with the

74
00:03:16,599 --> 00:03:18,730
web I want you really to be excited for

75
00:03:18,730 --> 00:03:20,739
eighteen months from now or two years

76
00:03:20,739 --> 00:03:23,230
from now but I'm here to get people

77
00:03:23,230 --> 00:03:25,030
already curious and excited about

78
00:03:25,030 --> 00:03:27,250
extensions so they can start playing

79
00:03:27,250 --> 00:03:29,799
with things as the ecosystem matures so

80
00:03:29,799 --> 00:03:33,040
a brief history of extensions fun fact

81
00:03:33,040 --> 00:03:36,690
not opera but Internet Explorer had

82
00:03:36,690 --> 00:03:40,030
extensions first granted they were

83
00:03:40,030 --> 00:03:40,840
ActiveX

84
00:03:40,840 --> 00:03:46,449
plugins and they took a form of com

85
00:03:46,449 --> 00:03:49,209
codes they're really C++ bundles that

86
00:03:49,209 --> 00:03:52,389
you attach to IE but if you ever used

87
00:03:52,389 --> 00:03:56,319
the computer with 12 toolbars those

88
00:03:56,319 --> 00:04:01,599
extensions so really in 1999 IE 5

89
00:04:01,599 --> 00:04:03,370
actually broke the ground here and said

90
00:04:03,370 --> 00:04:05,769
we are going to allow extensibility in

91
00:04:05,769 --> 00:04:06,579
the browser

92
00:04:06,579 --> 00:04:08,829
turns out the browser is a pretty cool

93
00:04:08,829 --> 00:04:10,989
thing we haven't decided to commit

94
00:04:10,989 --> 00:04:15,729
antitrust yet but we're about to but so

95
00:04:15,729 --> 00:04:17,680
first we're in the extend phase of

96
00:04:17,680 --> 00:04:21,190
embrace extend extinguish and so

97
00:04:21,190 --> 00:04:24,150
extensions were born not to be outdone

98
00:04:24,150 --> 00:04:27,849
five years later the Mozilla project

99
00:04:27,849 --> 00:04:29,680
which formed out of the ashes of

100
00:04:29,680 --> 00:04:32,289
Netscape fun fact they're still Netscape

101
00:04:32,289 --> 00:04:34,599
code in Firefox the good stuff that's

102
00:04:34,599 --> 00:04:38,920
left behind all the bad stuff in replace

103
00:04:38,930 --> 00:04:41,370
the Mozilla project had this big

104
00:04:41,370 --> 00:04:43,650
monolithic suite that was a male browser

105
00:04:43,650 --> 00:04:45,450
and a composer and all of these things

106
00:04:45,450 --> 00:04:47,970
and some went in there was like what if

107
00:04:47,970 --> 00:04:50,850
we just shipped a good web browser so

108
00:04:50,850 --> 00:04:52,980
they took the Mozilla suite and they

109
00:04:52,980 --> 00:04:54,630
took all the stuff that wasn't the

110
00:04:54,630 --> 00:04:55,800
browser out and they made this thing

111
00:04:55,800 --> 00:04:58,170
called Firefox and that came out in 2004

112
00:04:58,170 --> 00:05:00,930
and in the Mozilla suite there was a

113
00:05:00,930 --> 00:05:02,970
concept of extensions so in version 1 a

114
00:05:02,970 --> 00:05:06,260
Firefox there is a concept of extensions

115
00:05:06,260 --> 00:05:09,540
opera 5 years later after that in their

116
00:05:09,540 --> 00:05:11,220
version 10 so this is opera in the

117
00:05:11,220 --> 00:05:15,270
Presto era still they were using they

118
00:05:15,270 --> 00:05:18,960
released a model for extensions right

119
00:05:18,960 --> 00:05:20,880
behind them two years after their launch

120
00:05:20,880 --> 00:05:22,800
google chrome camera on the chrome icon

121
00:05:22,800 --> 00:05:26,100
was shiny I really like that I just I

122
00:05:26,100 --> 00:05:28,080
mean it looks a little bit more GLaDOS

123
00:05:28,080 --> 00:05:32,520
but it's also like IIIi missed I missed

124
00:05:32,520 --> 00:05:36,030
the skeuomorphic icons they released

125
00:05:36,030 --> 00:05:38,430
their extension model this is sort of

126
00:05:38,430 --> 00:05:39,990
actually a really important moment in

127
00:05:39,990 --> 00:05:42,420
extensions and you're gonna see why in a

128
00:05:42,420 --> 00:05:47,520
little bit also in 2010 Safari had

129
00:05:47,520 --> 00:05:49,530
actually released their own version of

130
00:05:49,530 --> 00:05:51,930
extensions which is really not just

131
00:05:51,930 --> 00:05:54,300
similar to Chrome's version and we're

132
00:05:54,300 --> 00:05:55,980
gonna touch upon that again a bit more

133
00:05:55,980 --> 00:05:59,490
later as well so first we're going to

134
00:05:59,490 --> 00:06:02,010
talk about in detail Firefox extensions

135
00:06:02,010 --> 00:06:03,660
and that's because I work for Mozilla

136
00:06:03,660 --> 00:06:06,420
and that's literally my job is to talk

137
00:06:06,420 --> 00:06:08,490
to you about Firefox extensions I also

138
00:06:08,490 --> 00:06:10,650
think they've come the furthest apart

139
00:06:10,650 --> 00:06:12,630
from perhaps sort of the IE two edge

140
00:06:12,630 --> 00:06:15,960
transition Firefox extensions I think

141
00:06:15,960 --> 00:06:17,630
have come probably the furthest from

142
00:06:17,630 --> 00:06:21,420
what they were to what they are so

143
00:06:21,420 --> 00:06:26,930
Firefox 1 it's fun fun fact to this day

144
00:06:26,930 --> 00:06:30,810
news outlets just use this version box

145
00:06:30,810 --> 00:06:33,830
logo which was drawn I think on a napkin

146
00:06:33,830 --> 00:06:36,060
no offense to the original drawers but

147
00:06:36,060 --> 00:06:38,190
you know it's it has a certain 2004 is

148
00:06:38,190 --> 00:06:41,160
gonna say quad to it I registered

149
00:06:41,160 --> 00:06:43,350
Firefox logo com so people can find the

150
00:06:43,350 --> 00:06:47,760
good version anyway Firefox one had

151
00:06:47,760 --> 00:06:50,190
extensions but how did they work they

152
00:06:50,190 --> 00:06:52,349
use something called zoo

153
00:06:52,349 --> 00:06:54,750
quick Shah has if you've ever heard of

154
00:06:54,750 --> 00:06:59,150
Zul or use the Zul on purpose

155
00:06:59,150 --> 00:07:02,819
hey ah the zoo was super cool right this

156
00:07:02,819 --> 00:07:08,039
is 2004 XML is going to save the web XML

157
00:07:08,039 --> 00:07:11,159
HTML xhtml is where we're going I picked

158
00:07:11,159 --> 00:07:14,520
up my O'Reilly copy of the XSLT handbook

159
00:07:14,520 --> 00:07:18,060
because that was where we were headed

160
00:07:18,060 --> 00:07:20,009
everyone loved making a small mistake

161
00:07:20,009 --> 00:07:22,949
and getting a yellow screen instead of a

162
00:07:22,949 --> 00:07:26,430
webpage so we were so jazzed by that XML

163
00:07:26,430 --> 00:07:28,530
is the future why not build not just the

164
00:07:28,530 --> 00:07:31,110
web pages in XML but actually the entire

165
00:07:31,110 --> 00:07:34,289
user interface of the browser in XML

166
00:07:34,289 --> 00:07:36,780
which is actually true to this day we're

167
00:07:36,780 --> 00:07:38,969
slowly working to fix that but on the

168
00:07:38,969 --> 00:07:40,800
entire interface of Firefox actually

169
00:07:40,800 --> 00:07:43,199
rendered by a web renderer that knows

170
00:07:43,199 --> 00:07:46,139
how to use XML and XSLT and things like

171
00:07:46,139 --> 00:07:48,360
that so the Firefox UI is actually a web

172
00:07:48,360 --> 00:07:51,449
page sort of and then it uses that same

173
00:07:51,449 --> 00:07:53,129
engine to render the web pages

174
00:07:53,129 --> 00:07:56,430
themselves it's powered by zoo and zoo

175
00:07:56,430 --> 00:08:03,900
stands for XML user interface language

176
00:08:03,900 --> 00:08:06,150
so it's the extensible markup language

177
00:08:06,150 --> 00:08:10,349
user interface language and this allows

178
00:08:10,349 --> 00:08:12,060
you to define actually relatively

179
00:08:12,060 --> 00:08:13,740
sophisticated kind of early web

180
00:08:13,740 --> 00:08:15,270
component things they're super neat

181
00:08:15,270 --> 00:08:18,210
there's a binding language you define

182
00:08:18,210 --> 00:08:20,339
all this behavior and you can define

183
00:08:20,339 --> 00:08:22,379
this behavior in C++ and JavaScript and

184
00:08:22,379 --> 00:08:24,690
define a structure in XML and then apply

185
00:08:24,690 --> 00:08:27,479
it to a page using CSS you say like the

186
00:08:27,479 --> 00:08:30,210
behavior of this element in CSS is

187
00:08:30,210 --> 00:08:32,370
defined by this cieth this C++ file

188
00:08:32,370 --> 00:08:36,269
super wacky totally works but a little

189
00:08:36,269 --> 00:08:39,029
little stale and so extensions worked

190
00:08:39,029 --> 00:08:41,820
the same way when you wanted to extend

191
00:08:41,820 --> 00:08:44,730
Firefox you provided a bundle of Zul and

192
00:08:44,730 --> 00:08:45,990
that bundle of Zul was roughly

193
00:08:45,990 --> 00:08:48,029
structured the same way the browser was

194
00:08:48,029 --> 00:08:50,339
right if you wanted to change the the

195
00:08:50,339 --> 00:08:52,500
skin of the browser you put some files

196
00:08:52,500 --> 00:08:54,240
in a folder called skin it was looked a

197
00:08:54,240 --> 00:08:55,410
lot but like most like the modding

198
00:08:55,410 --> 00:08:57,720
community and in fact it was really just

199
00:08:57,720 --> 00:09:01,860
a big stack of patches monkey patches so

200
00:09:01,860 --> 00:09:03,380
you had the browser

201
00:09:03,380 --> 00:09:07,040
and then an extension and then another

202
00:09:07,040 --> 00:09:09,170
extension that may have been dimly aware

203
00:09:09,170 --> 00:09:10,820
that the other extension exists maybe to

204
00:09:10,820 --> 00:09:11,870
touch to different parts of the browser

205
00:09:11,870 --> 00:09:15,740
and then another extension and this

206
00:09:15,740 --> 00:09:18,440
diagram sort of shows what might happen

207
00:09:18,440 --> 00:09:20,510
in that situation and the answer is

208
00:09:20,510 --> 00:09:22,070
they're gonna stomp all over each other

209
00:09:22,070 --> 00:09:24,260
right unless you know how to behave

210
00:09:24,260 --> 00:09:25,820
unless you know how to cooperate

211
00:09:25,820 --> 00:09:27,920
you're gonna redefine a method that

212
00:09:27,920 --> 00:09:30,080
another was already redefined and maybe

213
00:09:30,080 --> 00:09:32,060
you did an alias the most recent version

214
00:09:32,060 --> 00:09:36,050
etc and you got a lot of griddle flaky

215
00:09:36,050 --> 00:09:37,130
crashy

216
00:09:37,130 --> 00:09:40,160
buggy extensions but we had extensions

217
00:09:40,160 --> 00:09:42,530
and some sanctions actually and the only

218
00:09:42,530 --> 00:09:43,670
two thousand were one of the defining

219
00:09:43,670 --> 00:09:46,040
things about Firefox right ad blockers

220
00:09:46,040 --> 00:09:48,710
and conte and you know user scripts and

221
00:09:48,710 --> 00:09:50,990
grease monkey it was it was a really

222
00:09:50,990 --> 00:09:52,250
really awesome time and people have

223
00:09:52,250 --> 00:09:54,910
figured out how to tame these sort of

224
00:09:54,910 --> 00:09:58,130
grody extensions that could do anything

225
00:09:58,130 --> 00:10:02,810
but didn't really know how to behave so

226
00:10:02,810 --> 00:10:06,920
we had phenomenal cosmic power it's not

227
00:10:06,920 --> 00:10:09,200
I love Aladdin boat but unfortunately

228
00:10:09,200 --> 00:10:12,290
it's whether you want it or not matter

229
00:10:12,290 --> 00:10:14,870
how simple your extension was maybe your

230
00:10:14,870 --> 00:10:16,880
extent should just turn the word cloud -

231
00:10:16,880 --> 00:10:21,560
but right doesn't matter you still could

232
00:10:21,560 --> 00:10:24,140
invoke all of the C++ powers of Firefox

233
00:10:24,140 --> 00:10:26,780
and you know RM dash RF the entire user

234
00:10:26,780 --> 00:10:31,370
hard drive because maybe maybe you were

235
00:10:31,370 --> 00:10:33,170
executing the word but as opposed to

236
00:10:33,170 --> 00:10:35,960
just replacing it so really kind of

237
00:10:35,960 --> 00:10:39,260
dangerous and fortunately it was the

238
00:10:39,260 --> 00:10:43,430
naive era of the late to Thor late early

239
00:10:43,430 --> 00:10:46,130
2000s right and so we weren't exploiting

240
00:10:46,130 --> 00:10:48,290
literally everything we possibly could

241
00:10:48,290 --> 00:10:50,390
yet and we survived with this model for

242
00:10:50,390 --> 00:10:51,740
a long time without severe security

243
00:10:51,740 --> 00:10:56,750
problems safe fortunately in the year

244
00:10:56,750 --> 00:11:00,440
2010 inspired by some of the other sdk

245
00:11:00,440 --> 00:11:01,400
work that was coming out of other

246
00:11:01,400 --> 00:11:03,500
browsers for building extensions that

247
00:11:03,500 --> 00:11:05,060
sort of looked like JavaScript and

248
00:11:05,060 --> 00:11:06,350
looked like something that web

249
00:11:06,350 --> 00:11:09,020
developers could use we launched

250
00:11:09,020 --> 00:11:10,760
originally called jetpack and then

251
00:11:10,760 --> 00:11:12,770
became called the add-ons SDK and

252
00:11:12,770 --> 00:11:15,290
originally launched in 2010 I mean any

253
00:11:15,290 --> 00:11:17,030
of you familiar with that

254
00:11:17,030 --> 00:11:21,060
okay cool wonwoo perfect um good news

255
00:11:21,060 --> 00:11:23,820
I'm here to explain it so the SDK was

256
00:11:23,820 --> 00:11:26,400
informed and influenced by everything

257
00:11:26,400 --> 00:11:28,260
that had happened on the web since 2004

258
00:11:28,260 --> 00:11:31,830
the explosion of Ajax event models all

259
00:11:31,830 --> 00:11:33,780
this wonderful stuff as well as these

260
00:11:33,780 --> 00:11:37,620
other extension models so it had an API

261
00:11:37,620 --> 00:11:39,930
surface right we weren't just stomping

262
00:11:39,930 --> 00:11:41,220
over everything you could actually have

263
00:11:41,220 --> 00:11:42,990
a there's no specific endpoint from

264
00:11:42,990 --> 00:11:44,160
messing with tabs and a specific

265
00:11:44,160 --> 00:11:46,860
endpoint for you know maybe opening a

266
00:11:46,860 --> 00:11:49,230
port to another process on your computer

267
00:11:49,230 --> 00:11:52,500
and it was really well defined and then

268
00:11:52,500 --> 00:11:55,560
it wasn't really updated right we're

269
00:11:55,560 --> 00:11:58,050
like we did it we shipped an API and we

270
00:11:58,050 --> 00:12:00,240
were really really slow to ship

271
00:12:00,240 --> 00:12:02,250
incremental updates to the API that kept

272
00:12:02,250 --> 00:12:04,890
up with the times this was what happens

273
00:12:04,890 --> 00:12:07,470
when you have a labs team and then you

274
00:12:07,470 --> 00:12:09,060
disband the labs team after have you

275
00:12:09,060 --> 00:12:12,120
shipped which is sort of a shame not

276
00:12:12,120 --> 00:12:13,200
it's I don't want to denigrate my

277
00:12:13,200 --> 00:12:16,380
colleagues but we sort of in from the

278
00:12:16,380 --> 00:12:18,810
position of 2018 can look back and go

279
00:12:18,810 --> 00:12:20,760
like oh yeah okay we could have done

280
00:12:20,760 --> 00:12:24,210
that better and so we had this wonderful

281
00:12:24,210 --> 00:12:26,430
API surface which was miles ahead of

282
00:12:26,430 --> 00:12:29,340
where we had been and then we had this

283
00:12:29,340 --> 00:12:31,920
function called component utilities dot

284
00:12:31,920 --> 00:12:36,750
import and this was phenomenal cosmic

285
00:12:36,750 --> 00:12:42,030
power um this would let you pull in all

286
00:12:42,030 --> 00:12:44,250
of the abilities that Zoo add-ons had

287
00:12:44,250 --> 00:12:46,400
all of them so you have this nice little

288
00:12:46,400 --> 00:12:47,730
componentized

289
00:12:47,730 --> 00:12:49,440
API surface bundle that you could reason

290
00:12:49,440 --> 00:12:51,480
about and then they can construct a call

291
00:12:51,480 --> 00:12:53,970
to see you dot import and do anything

292
00:12:53,970 --> 00:12:57,420
they wanted again which meant that we

293
00:12:57,420 --> 00:12:59,190
didn't necessarily have to update the

294
00:12:59,190 --> 00:13:00,690
api's because people could just pull in

295
00:13:00,690 --> 00:13:02,460
the superpowers they needed as opposed

296
00:13:02,460 --> 00:13:04,530
to getting the API however once again

297
00:13:04,530 --> 00:13:06,810
phenomenal cosmic powers whether you

298
00:13:06,810 --> 00:13:08,790
want them or not and whether you know

299
00:13:08,790 --> 00:13:11,670
how to use them safely or not sort of

300
00:13:11,670 --> 00:13:13,770
the discussion of safety and computer

301
00:13:13,770 --> 00:13:15,090
programming is the thing we talk about

302
00:13:15,090 --> 00:13:17,070
all the time now but back then it was

303
00:13:17,070 --> 00:13:18,420
still sort of assumed that you would

304
00:13:18,420 --> 00:13:20,460
just you know will just write safe code

305
00:13:20,460 --> 00:13:25,830
we find meanwhile like I said chrome

306
00:13:25,830 --> 00:13:29,240
headship its extension API

307
00:13:29,240 --> 00:13:32,149
and Chrome extensions how many of you

308
00:13:32,149 --> 00:13:33,490
for written or use a Chrome extension

309
00:13:33,490 --> 00:13:37,899
yeah okay cool they are based on HTML

310
00:13:37,899 --> 00:13:41,959
they use CSS and JavaScript web

311
00:13:41,959 --> 00:13:44,809
technology so which is great because web

312
00:13:44,809 --> 00:13:47,499
developers are probably the most common

313
00:13:47,499 --> 00:13:50,179
implementers of extensions and the early

314
00:13:50,179 --> 00:13:51,649
days it seemed like maybe browser makers

315
00:13:51,649 --> 00:13:52,790
we're gonna be able to get extensions

316
00:13:52,790 --> 00:13:54,019
and it was like oh no wait web

317
00:13:54,019 --> 00:13:55,189
developers are the audience we're

318
00:13:55,189 --> 00:13:58,399
looking for more importantly permissions

319
00:13:58,399 --> 00:14:01,670
so you couldn't just invoke superpowers

320
00:14:01,670 --> 00:14:03,829
when you wanted them if you wanted to be

321
00:14:03,829 --> 00:14:07,550
able to capture the page at install time

322
00:14:07,550 --> 00:14:09,619
you had to say I'm gonna use this

323
00:14:09,619 --> 00:14:11,059
superpower that lets me take a picture

324
00:14:11,059 --> 00:14:14,119
of the page and so maybe the users

325
00:14:14,119 --> 00:14:15,170
prompted about that maybe they're not

326
00:14:15,170 --> 00:14:17,990
but if later on someone compromises your

327
00:14:17,990 --> 00:14:19,429
extension and wants to capture the page

328
00:14:19,429 --> 00:14:22,610
if it's not a feature of the extension

329
00:14:22,610 --> 00:14:25,009
it doesn't happen the API you do they're

330
00:14:25,009 --> 00:14:27,860
not there or errors out and you are

331
00:14:27,860 --> 00:14:29,209
protected from malicious behavior

332
00:14:29,209 --> 00:14:31,730
because you sort of whitelist upfront

333
00:14:31,730 --> 00:14:33,589
say here all the things that I'm going

334
00:14:33,589 --> 00:14:35,179
to do if you've ever installed an

335
00:14:35,179 --> 00:14:36,649
Android application you get that big

336
00:14:36,649 --> 00:14:39,009
long list and you go sure sure whatever

337
00:14:39,009 --> 00:14:42,860
and that's the same model right you it

338
00:14:42,860 --> 00:14:44,839
does lead to people asking for

339
00:14:44,839 --> 00:14:46,639
everything up front and that can be sort

340
00:14:46,639 --> 00:14:49,220
of a messy situation where users start

341
00:14:49,220 --> 00:14:51,110
properly informed of what they're

342
00:14:51,110 --> 00:14:54,439
consenting to but compared to I have

343
00:14:54,439 --> 00:14:57,259
this special plug that lets me do it

344
00:14:57,259 --> 00:15:02,360
wherever I want way way better and so in

345
00:15:02,360 --> 00:15:04,069
the year 2018

346
00:15:04,069 --> 00:15:06,470
now with our updated logos chrome and

347
00:15:06,470 --> 00:15:09,230
opera and brave and beaker and chromium

348
00:15:09,230 --> 00:15:11,720
based browsers in general I'm gonna use

349
00:15:11,720 --> 00:15:13,279
Chrome and opera as the representatives

350
00:15:13,279 --> 00:15:14,569
of those are my apologies if your

351
00:15:14,569 --> 00:15:18,019
favorite is not there were the

352
00:15:18,019 --> 00:15:24,439
beneficiaries so 2015 we publish a blog

353
00:15:24,439 --> 00:15:25,850
post called the feature of developing

354
00:15:25,850 --> 00:15:27,709
Firefox add-ons member add-ons means

355
00:15:27,709 --> 00:15:30,799
extensions in this situation and we were

356
00:15:30,799 --> 00:15:33,049
implementing a new extension API called

357
00:15:33,049 --> 00:15:35,209
web extensions largely compatible with

358
00:15:35,209 --> 00:15:36,769
the model used by Chrome and opera to

359
00:15:36,769 --> 00:15:38,329
make it easier to develop extensions

360
00:15:38,329 --> 00:15:42,680
across multiple browsers so yeah

361
00:15:42,680 --> 00:15:44,720
we decided that we were going to adopt

362
00:15:44,720 --> 00:15:47,480
another browsers extension model how

363
00:15:47,480 --> 00:15:49,069
many of you knew that Firefox uses

364
00:15:49,069 --> 00:15:51,649
Chrome's extension model yeah cool so

365
00:15:51,649 --> 00:15:53,600
this isn't once again doing my job must

366
00:15:53,600 --> 00:15:57,529
be very satisfied here so now we have

367
00:15:57,529 --> 00:15:59,029
extensions that can run in these two

368
00:15:59,029 --> 00:16:05,480
places and here then we allow a couple

369
00:16:05,480 --> 00:16:07,639
of the parties went to the w3c and said

370
00:16:07,639 --> 00:16:10,610
hey what if there was an API surface for

371
00:16:10,610 --> 00:16:12,319
extensions that was standardized the

372
00:16:12,319 --> 00:16:14,300
same way there are api surfaces for the

373
00:16:14,300 --> 00:16:18,519
web that are standardized and we sort of

374
00:16:18,519 --> 00:16:20,749
haven't made a ton of progress here

375
00:16:20,749 --> 00:16:22,730
however the browser extension community

376
00:16:22,730 --> 00:16:25,160
group was founded with the goal of

377
00:16:25,160 --> 00:16:28,970
creating a cross browser set of API for

378
00:16:28,970 --> 00:16:31,579
building browser extensions sort of a

379
00:16:31,579 --> 00:16:34,600
browser level version of web APs and

380
00:16:34,600 --> 00:16:37,550
that edge came on the scene and they

381
00:16:37,550 --> 00:16:39,920
were like Microsoft edge extensions

382
00:16:39,920 --> 00:16:41,779
which are different from IE extensions

383
00:16:41,779 --> 00:16:45,829
and they also adapted a model based on

384
00:16:45,829 --> 00:16:48,920
this nebulous notion of these cross

385
00:16:48,920 --> 00:16:50,389
browser browser extensions so now we

386
00:16:50,389 --> 00:16:53,029
have extensions that work in these

387
00:16:53,029 --> 00:16:56,149
places so that's where we are present

388
00:16:56,149 --> 00:16:58,999
damn we have these extensions called

389
00:16:58,999 --> 00:17:01,759
browser extensions or web extensions or

390
00:17:01,759 --> 00:17:04,250
just extensions it's hard to say

391
00:17:04,250 --> 00:17:05,569
maybe you just call them Chrome

392
00:17:05,569 --> 00:17:07,579
extensions and they have this

393
00:17:07,579 --> 00:17:09,620
architecture this is the most detailed

394
00:17:09,620 --> 00:17:13,010
image in the entire slide deck but if

395
00:17:13,010 --> 00:17:15,110
you can kind of see we've got a manifest

396
00:17:15,110 --> 00:17:17,149
and that manifest says here's everything

397
00:17:17,149 --> 00:17:19,640
I can do and then a big list of things

398
00:17:19,640 --> 00:17:22,100
you can do you can spawn background

399
00:17:22,100 --> 00:17:23,809
scripts and content scripts and browser

400
00:17:23,809 --> 00:17:25,250
actions or to the buttons in your

401
00:17:25,250 --> 00:17:28,399
toolbar and page actions which interact

402
00:17:28,399 --> 00:17:29,870
with on the page you're looking at and

403
00:17:29,870 --> 00:17:32,330
option pages which you know give you

404
00:17:32,330 --> 00:17:34,340
preferences UI and then you can actually

405
00:17:34,340 --> 00:17:36,440
manipulate web pages themselves and make

406
00:17:36,440 --> 00:17:39,559
it resources they can access manifest

407
00:17:39,559 --> 00:17:42,350
looks a little bit like this it's a JSON

408
00:17:42,350 --> 00:17:44,630
file and it just lists if you've ever

409
00:17:44,630 --> 00:17:46,659
seen a package JSON or an app manifest

410
00:17:46,659 --> 00:17:49,870
use will look very very very familiar

411
00:17:49,870 --> 00:17:52,970
we've gone to manifest version 2 it'll

412
00:17:52,970 --> 00:17:55,860
probably be at version 2 forever

413
00:17:55,860 --> 00:17:58,140
but you define a bunch of properties

414
00:17:58,140 --> 00:18:00,120
about your extension sure name what it

415
00:18:00,120 --> 00:18:03,059
does who you are and then you define all

416
00:18:03,059 --> 00:18:04,529
of your capabilities right you say I

417
00:18:04,529 --> 00:18:06,120
have a background page that lives here

418
00:18:06,120 --> 00:18:08,070
in this file I request the following

419
00:18:08,070 --> 00:18:09,779
permissions these permissions apply to

420
00:18:09,779 --> 00:18:13,350
the following reg ex on URLs so you

421
00:18:13,350 --> 00:18:14,700
could even say I don't want to activate

422
00:18:14,700 --> 00:18:18,059
for you no evil com I want to activate

423
00:18:18,059 --> 00:18:22,710
for my website dump is and then you have

424
00:18:22,710 --> 00:18:26,010
the scripts themselves I'm gonna show

425
00:18:26,010 --> 00:18:29,960
you the fancy es 6e version of this but

426
00:18:29,960 --> 00:18:34,019
you can within a script actually invoke

427
00:18:34,019 --> 00:18:36,029
these api's so this one's actually

428
00:18:36,029 --> 00:18:38,450
looking for a user clicks the button on

429
00:18:38,450 --> 00:18:41,519
the page or in the browser you know you

430
00:18:41,519 --> 00:18:42,570
install extension to get those little

431
00:18:42,570 --> 00:18:44,159
buttons that populate and then you want

432
00:18:44,159 --> 00:18:45,450
to then you have too many of them you

433
00:18:45,450 --> 00:18:49,139
drag them off those actions all can be

434
00:18:49,139 --> 00:18:51,179
listened to and then you actually can

435
00:18:51,179 --> 00:18:55,169
see if we're manipulating tabs right now

436
00:18:55,169 --> 00:18:57,000
so I'm creating a tag gross example.org

437
00:18:57,000 --> 00:18:59,100
and then which actually don't help

438
00:18:59,100 --> 00:19:00,809
example.org is safe and registered I

439
00:19:00,809 --> 00:19:04,769
know com is may fix that and then we can

440
00:19:04,769 --> 00:19:07,260
actually go run scripts injecting them

441
00:19:07,260 --> 00:19:09,360
into those tabs or we can load other

442
00:19:09,360 --> 00:19:11,760
scripts from a well defined URL and load

443
00:19:11,760 --> 00:19:13,529
them into those tabs or mess with that

444
00:19:13,529 --> 00:19:16,350
tab or whatever right this one if

445
00:19:16,350 --> 00:19:18,600
someone clicks the button I open a new

446
00:19:18,600 --> 00:19:22,110
tab and I go extract the text content of

447
00:19:22,110 --> 00:19:24,240
the first header on that page and

448
00:19:24,240 --> 00:19:26,220
actually can extract it from the page

449
00:19:26,220 --> 00:19:30,570
and bring it back to my extension which

450
00:19:30,570 --> 00:19:31,980
goes you know I keep talking about

451
00:19:31,980 --> 00:19:34,580
background pages and things like that

452
00:19:34,580 --> 00:19:38,159
these extension API while awesome sort

453
00:19:38,159 --> 00:19:41,070
of just predate the idea of workers

454
00:19:41,070 --> 00:19:42,450
right now we have service workers and

455
00:19:42,450 --> 00:19:44,250
page workers and shared workers and

456
00:19:44,250 --> 00:19:46,529
audio worklets and paint worklets and

457
00:19:46,529 --> 00:19:48,990
all these things and all that technology

458
00:19:48,990 --> 00:19:51,710
and all that idea of a sort of Dom free

459
00:19:51,710 --> 00:19:56,159
thread just postdates the creation of

460
00:19:56,159 --> 00:19:58,350
these extension API so we uh we actually

461
00:19:58,350 --> 00:20:00,539
had the concept of pages versus workers

462
00:20:00,539 --> 00:20:02,490
and what that means is that when your

463
00:20:02,490 --> 00:20:03,870
background script is running it's

464
00:20:03,870 --> 00:20:06,779
actually running in the context of a web

465
00:20:06,779 --> 00:20:08,880
page that isn't loaded in a tab

466
00:20:08,880 --> 00:20:11,190
it's just sort of virtual webpage that

467
00:20:11,190 --> 00:20:13,800
has a bunch of script tags in it the

468
00:20:13,800 --> 00:20:15,060
advantage of this is you get access to

469
00:20:15,060 --> 00:20:17,250
every single Dom API right so which is

470
00:20:17,250 --> 00:20:18,630
very very valuable you know you have

471
00:20:18,630 --> 00:20:20,460
access to fetch how you can assume that

472
00:20:20,460 --> 00:20:21,840
if you can do it from a webpage you can

473
00:20:21,840 --> 00:20:24,120
do it from an extension the downside is

474
00:20:24,120 --> 00:20:26,520
it's a little clumsy err you have to

475
00:20:26,520 --> 00:20:28,320
worry about the overhead of knowing you

476
00:20:28,320 --> 00:20:30,960
know that you share this shared global

477
00:20:30,960 --> 00:20:32,990
window object and things like that

478
00:20:32,990 --> 00:20:35,520
so you know in a manifest you might see

479
00:20:35,520 --> 00:20:37,230
something that looks like this where you

480
00:20:37,230 --> 00:20:40,740
say polyfill background or you can

481
00:20:40,740 --> 00:20:42,690
actually define just say hey you'll use

482
00:20:42,690 --> 00:20:45,810
this page and a page effectively looks

483
00:20:45,810 --> 00:20:48,390
like this it's a very very short stub a

484
00:20:48,390 --> 00:20:50,370
lot of times you just see script tags

485
00:20:50,370 --> 00:20:52,080
people omit everything else because I

486
00:20:52,080 --> 00:20:54,420
don't actually care and you get these

487
00:20:54,420 --> 00:20:56,910
scripts loaded

488
00:20:56,910 --> 00:20:59,120
this doesn't look valuable at all

489
00:20:59,120 --> 00:21:02,040
however you can immediately take

490
00:21:02,040 --> 00:21:03,480
advantage of things that web pages can

491
00:21:03,480 --> 00:21:05,850
do so in the intervening time we now

492
00:21:05,850 --> 00:21:08,820
have es6 modules right and if you're

493
00:21:08,820 --> 00:21:10,560
building a browser extension you know

494
00:21:10,560 --> 00:21:12,210
what's gonna run in a browser and you

495
00:21:12,210 --> 00:21:14,040
know which browser it's gonna run in so

496
00:21:14,040 --> 00:21:15,620
maybe you can do something like this and

497
00:21:15,620 --> 00:21:19,680
you can load a polyfill and you can load

498
00:21:19,680 --> 00:21:21,360
a Dom library maybe jQuery maybe

499
00:21:21,360 --> 00:21:22,680
something else and you can actually do

500
00:21:22,680 --> 00:21:24,840
some computation on some Dom object

501
00:21:24,840 --> 00:21:26,220
maybe you have template tags in there

502
00:21:26,220 --> 00:21:27,570
and you're pulling on template

503
00:21:27,570 --> 00:21:30,240
information and you can use es6 modules

504
00:21:30,240 --> 00:21:32,700
right so this way you can say as opposed

505
00:21:32,700 --> 00:21:33,960
to just loading a static background

506
00:21:33,960 --> 00:21:36,750
script pretend it's a sweet no actually

507
00:21:36,750 --> 00:21:38,520
do a script type module and now you have

508
00:21:38,520 --> 00:21:41,160
access to es modules within extensions

509
00:21:41,160 --> 00:21:43,170
and we're nice and modern and it's way

510
00:21:43,170 --> 00:21:45,330
way more pleasant to use speaking of

511
00:21:45,330 --> 00:21:47,280
modernity and pleasantness to use well

512
00:21:47,280 --> 00:21:49,200
that's got way bigger than I anticipated

513
00:21:49,200 --> 00:21:52,470
all right slides so happens when you

514
00:21:52,470 --> 00:21:54,240
make a diagram like five minutes before

515
00:21:54,240 --> 00:21:57,030
your presentation this is sort of a

516
00:21:57,030 --> 00:21:58,950
lightweight architecture here the

517
00:21:58,950 --> 00:22:00,120
background script acts for the

518
00:22:00,120 --> 00:22:02,670
background page acts as the core of an

519
00:22:02,670 --> 00:22:04,320
extension sure the manifest starts

520
00:22:04,320 --> 00:22:06,180
everything up but if you need to

521
00:22:06,180 --> 00:22:09,390
coordinate between you know a script

522
00:22:09,390 --> 00:22:11,340
injected into a page and a dev tools

523
00:22:11,340 --> 00:22:13,380
panel and the button on the page it may

524
00:22:13,380 --> 00:22:14,550
be a panel that tips down out of that

525
00:22:14,550 --> 00:22:16,530
and a side bar and an options page

526
00:22:16,530 --> 00:22:18,330
because you want to use every single

527
00:22:18,330 --> 00:22:20,790
feature at this exact same time you can

528
00:22:20,790 --> 00:22:22,410
do that but you need to coordinate

529
00:22:22,410 --> 00:22:25,500
via the background script and so there's

530
00:22:25,500 --> 00:22:28,080
this notion of opening ports it's not

531
00:22:28,080 --> 00:22:31,830
networking ports it's the same port that

532
00:22:31,830 --> 00:22:34,470
a worker would have or an iframe has

533
00:22:34,470 --> 00:22:36,210
right so you have a postmessage channel

534
00:22:36,210 --> 00:22:38,520
and you can say hey i want to talk you

535
00:22:38,520 --> 00:22:40,650
know I want to open a port from my

536
00:22:40,650 --> 00:22:42,000
content script back to my background

537
00:22:42,000 --> 00:22:44,160
process and I open a port from my dev

538
00:22:44,160 --> 00:22:45,630
tools panel back to my background script

539
00:22:45,630 --> 00:22:47,970
and I open a browser action port and all

540
00:22:47,970 --> 00:22:50,070
these little ports all let you just do

541
00:22:50,070 --> 00:22:51,420
message passing just like you would with

542
00:22:51,420 --> 00:22:54,210
workers and you can coordinate and sort

543
00:22:54,210 --> 00:22:55,590
of respond you can even do kind of a

544
00:22:55,590 --> 00:22:57,600
redux a pattern where everyone's sending

545
00:22:57,600 --> 00:22:58,770
their changes back to the background

546
00:22:58,770 --> 00:23:00,000
page and the background page is the

547
00:23:00,000 --> 00:23:01,830
source of truth and that maintains the

548
00:23:01,830 --> 00:23:03,840
state of your extension it's it

549
00:23:03,840 --> 00:23:05,130
ultimately makes a pretty nice

550
00:23:05,130 --> 00:23:10,620
architecture so this slide I don't you

551
00:23:10,620 --> 00:23:12,540
can see these two little lines at the

552
00:23:12,540 --> 00:23:14,910
bottom of my one of those is my time and

553
00:23:14,910 --> 00:23:17,310
one of those is my slides so you go to

554
00:23:17,310 --> 00:23:19,100
the blue lines just advancing

555
00:23:19,100 --> 00:23:21,270
interactively forward even as I waste

556
00:23:21,270 --> 00:23:24,720
time explaining it to you and the other

557
00:23:24,720 --> 00:23:27,840
slide is where I am in my slides but it

558
00:23:27,840 --> 00:23:30,240
counts some slides which means that this

559
00:23:30,240 --> 00:23:33,600
slide is my oh I'm moving away faster or

560
00:23:33,600 --> 00:23:35,940
slower than I need to slide this is a

561
00:23:35,940 --> 00:23:40,320
good tip so this is an exhaustive list

562
00:23:40,320 --> 00:23:44,910
of every currently supported API I'm not

563
00:23:44,910 --> 00:23:46,290
actually gonna read them out to you

564
00:23:46,290 --> 00:23:49,050
or am I alarms bookmarks bar interaction

565
00:23:49,050 --> 00:23:50,400
browser settings browser data clipboard

566
00:23:50,400 --> 00:23:51,990
commands contents credential identities

567
00:23:51,990 --> 00:23:53,340
cookies dev tools inspector window dev

568
00:23:53,340 --> 00:23:54,930
tools Network dev tools panels DNS

569
00:23:54,930 --> 00:23:56,550
downloads events extension extension

570
00:23:56,550 --> 00:23:59,910
tights fine history I 18n identity idle

571
00:23:59,910 --> 00:24:01,530
management menus notification zombie box

572
00:24:01,530 --> 00:24:03,750
page action permissions PK pkcs 11

573
00:24:03,750 --> 00:24:05,790
privacy proxy runtime search session

574
00:24:05,790 --> 00:24:07,860
sidebar access storage tabs theme top

575
00:24:07,860 --> 00:24:10,080
sites x - web navigation web requests

576
00:24:10,080 --> 00:24:13,299
and windows

577
00:24:13,309 --> 00:24:19,289
and now I'm ahead of time right feels

578
00:24:19,289 --> 00:24:23,399
real good so um so you're saying to

579
00:24:23,399 --> 00:24:24,869
yourself this is wonderful I can do all

580
00:24:24,869 --> 00:24:27,299
these things and all browsers that

581
00:24:27,299 --> 00:24:29,549
support extensions oh my gosh I did not

582
00:24:29,549 --> 00:24:33,809
know this well not really though Chris

583
00:24:33,809 --> 00:24:34,979
is really the current state of the world

584
00:24:34,979 --> 00:24:37,559
also this is I realized right before my

585
00:24:37,559 --> 00:24:39,239
talk that this is a lesson about how pot

586
00:24:39,239 --> 00:24:40,949
is bad at Venn diagrams and should never

587
00:24:40,949 --> 00:24:43,949
do them again because it looks like they

588
00:24:43,949 --> 00:24:47,399
share nothing but really I meant to

589
00:24:47,399 --> 00:24:49,409
label the circles so I'm never gonna

590
00:24:49,409 --> 00:24:50,639
yeah this is the last Venn diagram

591
00:24:50,639 --> 00:24:53,339
you'll ever see for me this green circle

592
00:24:53,339 --> 00:24:56,579
is Firefox Firefox loves green this red

593
00:24:56,579 --> 00:24:59,549
circle is chrome and opera and the blue

594
00:24:59,549 --> 00:25:02,789
circle is edge and in reality you know

595
00:25:02,789 --> 00:25:04,799
also the problem with real Venn diagrams

596
00:25:04,799 --> 00:25:07,199
is the actual overlap here is ninety

597
00:25:07,199 --> 00:25:10,349
percent right it's not zero percent they

598
00:25:10,349 --> 00:25:12,469
share a lot of the same common core and

599
00:25:12,469 --> 00:25:15,899
their extensions are there protection

600
00:25:15,899 --> 00:25:17,519
capabilities that exist in one browser

601
00:25:17,519 --> 00:25:19,829
and no others and two browsers and no

602
00:25:19,829 --> 00:25:23,789
others etc however this may look a lot

603
00:25:23,789 --> 00:25:26,369
like the web right if I pulled this up

604
00:25:26,369 --> 00:25:28,440
and said here's what web pages can do

605
00:25:28,440 --> 00:25:29,969
and pull it up this exact same slide

606
00:25:29,969 --> 00:25:34,440
you'd say I agree and so in the words of

607
00:25:34,440 --> 00:25:37,019
Steve Jobs what do you do about this

608
00:25:37,019 --> 00:25:39,239
well we have a really sweet solution for

609
00:25:39,239 --> 00:25:44,350
you feature detection

610
00:25:44,360 --> 00:25:48,110
and that's that's the truth right the

611
00:25:48,110 --> 00:25:50,929
the one the one bond we as browser

612
00:25:50,929 --> 00:25:55,279
vendors make to you is if the keys there

613
00:25:55,279 --> 00:25:57,200
you should be able to use it right if

614
00:25:57,200 --> 00:26:00,200
it's not there it's it's not there um we

615
00:26:00,200 --> 00:26:04,159
try not to throw a not implemented error

616
00:26:04,159 --> 00:26:06,590
we try to make it say right if this API

617
00:26:06,590 --> 00:26:09,649
exists in this namespace then you can

618
00:26:09,649 --> 00:26:13,370
use it of course you know we're flawed

619
00:26:13,370 --> 00:26:16,460
human beings you know pity us the wood

620
00:26:16,460 --> 00:26:21,380
browser makers so here's where we are if

621
00:26:21,380 --> 00:26:27,460
you use largely speaking the chrome dot

622
00:26:27,460 --> 00:26:31,190
versions of extension api's everyone

623
00:26:31,190 --> 00:26:33,080
because compatibility is the new class

624
00:26:33,080 --> 00:26:37,190
toast will support it right so if you if

625
00:26:37,190 --> 00:26:39,980
you say chrome dot edge and Firefox

626
00:26:39,980 --> 00:26:41,299
would be like we don't you mean it's

627
00:26:41,299 --> 00:26:45,340
cool it's cool it's fine not a problem

628
00:26:45,340 --> 00:26:47,809
however we've also renamed that entire

629
00:26:47,809 --> 00:26:51,139
namespace to browser dot you can see

630
00:26:51,139 --> 00:26:52,820
that of course chrome has no idea what

631
00:26:52,820 --> 00:26:54,679
we're talking about at the moment we're

632
00:26:54,679 --> 00:26:56,149
still hanging out chat and see what's

633
00:26:56,149 --> 00:26:59,630
going on and this spec actually defines

634
00:26:59,630 --> 00:27:01,519
all of these api's to go from a call

635
00:27:01,519 --> 00:27:03,679
back model to a promise based model

636
00:27:03,679 --> 00:27:06,130
which is super rad

637
00:27:06,130 --> 00:27:08,240
however only Firefox says this at the

638
00:27:08,240 --> 00:27:10,639
moment edge initially closed the bud

639
00:27:10,639 --> 00:27:11,990
that said they didn't support promises

640
00:27:11,990 --> 00:27:13,760
as works as intended but they reopened

641
00:27:13,760 --> 00:27:15,590
it because that just super super awesome

642
00:27:15,590 --> 00:27:17,320
at responding to user feedback

643
00:27:17,320 --> 00:27:20,059
obviously we're working all this out and

644
00:27:20,059 --> 00:27:21,590
we'd love to even get Chrome's

645
00:27:21,590 --> 00:27:22,880
extension model updated to support

646
00:27:22,880 --> 00:27:25,370
promises so we can write pretty async

647
00:27:25,370 --> 00:27:27,580
await and module II looking for things

648
00:27:27,580 --> 00:27:30,649
however there is a polyfill called the

649
00:27:30,649 --> 00:27:32,809
web extension polyfill and this will go

650
00:27:32,809 --> 00:27:34,610
back and go into chrome and say hey all

651
00:27:34,610 --> 00:27:36,769
those callback based extensions that are

652
00:27:36,769 --> 00:27:38,929
on the chrome dot we're gonna polyfill

653
00:27:38,929 --> 00:27:41,000
all those to be promise based on the

654
00:27:41,000 --> 00:27:46,730
browser dot edge however we forgot to

655
00:27:46,730 --> 00:27:48,919
say that right edge doesn't edge does

656
00:27:48,919 --> 00:27:52,130
support chrome dot but when we detect

657
00:27:52,130 --> 00:27:55,389
browser dot but we assume it's promises

658
00:27:55,389 --> 00:27:57,680
and yet we're fixing it okay

659
00:27:57,680 --> 00:28:01,190
so that's 100% of absolutely everything

660
00:28:01,190 --> 00:28:03,380
that I have to say about extensions

661
00:28:03,380 --> 00:28:07,830
there's absolutely nothing else to cover

662
00:28:07,830 --> 00:28:10,780
[Applause]

663
00:28:10,780 --> 00:28:15,470
so in 2010 version 5 of a safari

664
00:28:15,470 --> 00:28:19,040
launched support for extensions and they

665
00:28:19,040 --> 00:28:21,740
actually did a really really really good

666
00:28:21,740 --> 00:28:22,700
job

667
00:28:22,700 --> 00:28:25,060
what they didn't do was get a massive

668
00:28:25,060 --> 00:28:28,460
market dominating market share that made

669
00:28:28,460 --> 00:28:30,650
everyone use their model this is not

670
00:28:30,650 --> 00:28:33,200
their fault the dissent that's anyone's

671
00:28:33,200 --> 00:28:37,100
fault and Safari has a really cool

672
00:28:37,100 --> 00:28:41,870
JavaScript CSS HTML extension API that's

673
00:28:41,870 --> 00:28:44,750
based on the idea of pages versus

674
00:28:44,750 --> 00:28:47,450
workers and really it's just but it's a

675
00:28:47,450 --> 00:28:50,350
completely independent parallel

676
00:28:50,350 --> 00:28:54,590
evolution so now we have something looks

677
00:28:54,590 --> 00:28:57,550
like this but this is an API is this is

678
00:28:57,550 --> 00:29:00,080
capabilities right if you want to mess

679
00:29:00,080 --> 00:29:02,450
with tab as you can it just looks a

680
00:29:02,450 --> 00:29:03,620
little different it looks completely

681
00:29:03,620 --> 00:29:06,230
different but it's possible all right so

682
00:29:06,230 --> 00:29:08,450
now it's Safari that self dot browser

683
00:29:08,450 --> 00:29:09,950
window dot open tab versus the browser

684
00:29:09,950 --> 00:29:13,790
tabs dot create but you can see that if

685
00:29:13,790 --> 00:29:15,560
you took a look at this capability layer

686
00:29:15,560 --> 00:29:17,930
and said oh we can speak we can read a

687
00:29:17,930 --> 00:29:19,580
driver that speaks Safari and you

688
00:29:19,580 --> 00:29:24,470
absolutely can that's a future looking

689
00:29:24,470 --> 00:29:26,900
thing I'm describing to you and none of

690
00:29:26,900 --> 00:29:29,870
you should be looking for today cool we

691
00:29:29,870 --> 00:29:31,040
all cool but then we're all excited

692
00:29:31,040 --> 00:29:33,200
about the future right the future is

693
00:29:33,200 --> 00:29:36,830
amazing cool so today what are we doing

694
00:29:36,830 --> 00:29:37,280
today

695
00:29:37,280 --> 00:29:38,480
we're gonna start building extensions

696
00:29:38,480 --> 00:29:44,150
every single one of us lock the doors

697
00:29:44,160 --> 00:29:47,500
mozilla offers a tool called web - xed

698
00:29:47,500 --> 00:29:49,630
which comes from when we called the API

699
00:29:49,630 --> 00:29:51,790
web extensions it's a super nice

700
00:29:51,790 --> 00:29:53,950
command-line tool lets you scaffold that

701
00:29:53,950 --> 00:29:56,380
you lint lets you launch a browser and

702
00:29:56,380 --> 00:29:59,049
do live coding when the distension OTO

703
00:29:59,049 --> 00:30:01,140
reloads in the browser it's super fancy

704
00:30:01,140 --> 00:30:05,290
chrome and edge and Firefox all support

705
00:30:05,290 --> 00:30:06,880
what's called temporary or unpacked

706
00:30:06,880 --> 00:30:08,530
extension loading where you say this

707
00:30:08,530 --> 00:30:10,929
folder over here is an extension and as

708
00:30:10,929 --> 00:30:12,070
long as you're a developer the browser

709
00:30:12,070 --> 00:30:14,770
says I believe you and runs it and then

710
00:30:14,770 --> 00:30:17,169
you can do live updating or go hit a

711
00:30:17,169 --> 00:30:18,549
reload button and actually start

712
00:30:18,549 --> 00:30:19,510
building these extensions and

713
00:30:19,510 --> 00:30:20,830
experimenting with what works and what

714
00:30:20,830 --> 00:30:23,890
doesn't and where the edge cases are or

715
00:30:23,890 --> 00:30:25,470
if you've already built an extension

716
00:30:25,470 --> 00:30:29,590
probably for Chrome you can port if you

717
00:30:29,590 --> 00:30:31,270
have a router the extension that works

718
00:30:31,270 --> 00:30:34,480
in chrome it will 99.9% work in Firefox

719
00:30:34,480 --> 00:30:39,100
it will 68.4% work an edge but don't

720
00:30:39,100 --> 00:30:41,230
want to do it is to try so well we have

721
00:30:41,230 --> 00:30:42,880
a tool called extension test com it

722
00:30:42,880 --> 00:30:44,440
takes a CRX file you don't even have to

723
00:30:44,440 --> 00:30:46,900
give it this code just pack CRX file it

724
00:30:46,900 --> 00:30:48,640
opens it up it runs a compatibility

725
00:30:48,640 --> 00:30:50,620
suite against it just got ecstatically

726
00:30:50,620 --> 00:30:52,990
analyzes for API usage and goes cool you

727
00:30:52,990 --> 00:30:55,840
use the following for api's that don't

728
00:30:55,840 --> 00:30:59,020
work in firefox but or hey this totally

729
00:30:59,020 --> 00:31:00,880
works and you should just go submit it

730
00:31:00,880 --> 00:31:04,270
to us where I wrote this tool it's

731
00:31:04,270 --> 00:31:05,919
entirely on me if it doesn't work you

732
00:31:05,919 --> 00:31:08,530
can come find me and I'm also working on

733
00:31:08,530 --> 00:31:10,630
adding edge compatibility data so we'll

734
00:31:10,630 --> 00:31:11,830
say yes it should definitely work in

735
00:31:11,830 --> 00:31:13,660
Firefox and yes this should definitely

736
00:31:13,660 --> 00:31:15,720
work an edge as opposed to just Firefox

737
00:31:15,720 --> 00:31:19,020
so yeah today we can do you can do that

738
00:31:19,020 --> 00:31:23,410
also you can complain I actually an you

739
00:31:23,410 --> 00:31:25,470
enly mean this I'm a developer advocate

740
00:31:25,470 --> 00:31:28,270
my job is not to market to you but to

741
00:31:28,270 --> 00:31:30,370
listen to you if I come back and say my

742
00:31:30,370 --> 00:31:32,950
talk went great I did not do my job but

743
00:31:32,950 --> 00:31:35,140
if I came back and say I on the first

744
00:31:35,140 --> 00:31:38,020
day of J's confer stage a has coffee in

745
00:31:38,020 --> 00:31:40,270
the morning told everyone that I know

746
00:31:40,270 --> 00:31:41,740
about extensions that you should

747
00:31:41,740 --> 00:31:43,000
complain to me hmm

748
00:31:43,000 --> 00:31:45,549
and then you all find me during this

749
00:31:45,549 --> 00:31:46,960
week and talk to me about whether you've

750
00:31:46,960 --> 00:31:48,340
tried to build an extension and it went

751
00:31:48,340 --> 00:31:50,080
horribly wrong or what the heck were you

752
00:31:50,080 --> 00:31:51,970
thinking or why is this also terrible

753
00:31:51,970 --> 00:31:53,650
I'm gonna listen to you and I'm gonna

754
00:31:53,650 --> 00:31:54,490
come back

755
00:31:54,490 --> 00:31:56,350
and this all this stuff is actually in

756
00:31:56,350 --> 00:31:59,080
flux right Firefox has a fully staffed

757
00:31:59,080 --> 00:32:01,540
we're hiring engineering team working on

758
00:32:01,540 --> 00:32:04,240
extensions extend extension api's we

759
00:32:04,240 --> 00:32:05,830
think it's one of the ways that users

760
00:32:05,830 --> 00:32:08,740
can take a browser and make it theirs

761
00:32:08,740 --> 00:32:10,900
and have agency over the web and it's

762
00:32:10,900 --> 00:32:13,900
super important to us that users be able

763
00:32:13,900 --> 00:32:15,520
to do that because we believe that we

764
00:32:15,520 --> 00:32:18,510
are a user agent and not a publisher or

765
00:32:18,510 --> 00:32:22,030
government agent so you have to find me

766
00:32:22,030 --> 00:32:23,980
and tell me what's terrible so I can

767
00:32:23,980 --> 00:32:25,929
make it less terrible you want to find

768
00:32:25,929 --> 00:32:29,410
me in person I am at Potch and that's

769
00:32:29,410 --> 00:32:31,420
actually the end of the talk so you can

770
00:32:31,420 --> 00:32:33,429
read there's a huge huge table on mdn

771
00:32:33,429 --> 00:32:34,600
that has all the api compatibility

772
00:32:34,600 --> 00:32:37,000
there's all these tools find me we

773
00:32:37,000 --> 00:32:38,440
publish stuff on our hacks blog and

774
00:32:38,440 --> 00:32:40,360
these slides will be available at that

775
00:32:40,360 --> 00:32:42,440
URL thank you very much for your time

