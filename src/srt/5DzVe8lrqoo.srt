1
00:00:00,110 --> 00:00:03,659

well this was awesome so thanks all for

2
00:00:03,659 --> 00:00:07,290
coming this has been a really awesome to

3
00:00:07,290 --> 00:00:09,690
sit here for a whole day and hear people

4
00:00:09,690 --> 00:00:13,080
talk about your thing I've never

5
00:00:13,080 --> 00:00:14,370
actually said through a happy talk

6
00:00:14,370 --> 00:00:19,199
before by someone else than me so it was

7
00:00:19,199 --> 00:00:22,320
so weird like people giving advice and

8
00:00:22,320 --> 00:00:23,880
suggestions and things I didn't think

9
00:00:23,880 --> 00:00:28,199
about it was like hmm okay ah I'm going

10
00:00:28,199 --> 00:00:30,539
to talk about 80 which we officially

11
00:00:30,539 --> 00:00:34,320
launched this morning and the slides are

12
00:00:34,320 --> 00:00:38,309
just for visual entertainment it's a new

13
00:00:38,309 --> 00:00:42,510
thing I I switched to index cards as my

14
00:00:42,510 --> 00:00:46,230
new my new system for giving talks so

15
00:00:46,230 --> 00:00:48,360
you don't get distracted but I think

16
00:00:48,360 --> 00:00:49,950
I've done a bad job distracting people

17
00:00:49,950 --> 00:00:53,280
with my slides today so the the theme

18
00:00:53,280 --> 00:00:56,910
for a pH is really a productive

19
00:00:56,910 --> 00:01:04,939
resentment of my users basically

20
00:01:04,939 --> 00:01:09,960
everything in 8 is kind of like a

21
00:01:09,960 --> 00:01:12,770
you to request from someone you're like

22
00:01:12,770 --> 00:01:15,479
can we do this I'm like you know what no

23
00:01:15,479 --> 00:01:19,259
I'm gonna break everything now um but

24
00:01:19,259 --> 00:01:24,509
but basically the the the we hit a

25
00:01:24,509 --> 00:01:27,060
critical mass a few months ago with the

26
00:01:27,060 --> 00:01:28,470
frame welcome to the community and it

27
00:01:28,470 --> 00:01:33,000
got so big that and that my OCD was

28
00:01:33,000 --> 00:01:34,920
flaring up because I'm not used to

29
00:01:34,920 --> 00:01:37,200
having over a hundred unread

30
00:01:37,200 --> 00:01:39,060
notifications in my github account like

31
00:01:39,060 --> 00:01:40,140
you know you wake up in the morning it

32
00:01:40,140 --> 00:01:42,090
is over a hundred them and like my own

33
00:01:42,090 --> 00:01:45,329
city is like I can't deal with it so I

34
00:01:45,329 --> 00:01:46,500
start thinking about okay I need to

35
00:01:46,500 --> 00:01:48,090
start moving things to other people like

36
00:01:48,090 --> 00:01:50,579
like clearly like I'm not keeping up the

37
00:01:50,579 --> 00:01:52,500
team is not keeping up we need more

38
00:01:52,500 --> 00:01:55,439
people and at some point you know even

39
00:01:55,439 --> 00:01:57,329
it comes like Walmart will say um yeah

40
00:01:57,329 --> 00:01:58,619
we're not going to spend 20 million

41
00:01:58,619 --> 00:02:01,579
dollars on open source for one project

42
00:02:01,579 --> 00:02:03,479
so we need to get people on the outside

43
00:02:03,479 --> 00:02:07,200
to to come and participate so I start

44
00:02:07,200 --> 00:02:09,649
thinking about okay how do I keep

45
00:02:09,649 --> 00:02:12,660
leading this this framework without

46
00:02:12,660 --> 00:02:13,800
doing all the work we

47
00:02:13,800 --> 00:02:16,230
man modularizing it and moving stuff out

48
00:02:16,230 --> 00:02:18,510
so it's no longer part of the the core

49
00:02:18,510 --> 00:02:20,160
framework so I people can work on it and

50
00:02:20,160 --> 00:02:22,920
their areas of heavy that I really don't

51
00:02:22,920 --> 00:02:25,410
like not because they're bad it's just

52
00:02:25,410 --> 00:02:27,720
like I don't like working on them views

53
00:02:27,720 --> 00:02:33,360
anything to do with fun in no I don't

54
00:02:33,360 --> 00:02:35,190
want work on it I'm really sick of the

55
00:02:35,190 --> 00:02:37,380
proxy stuff like you know after last

56
00:02:37,380 --> 00:02:38,700
black friday like I don't want to any

57
00:02:38,700 --> 00:02:41,400
proxy anymore it's a really important

58
00:02:41,400 --> 00:02:42,960
functionality people love but I don't

59
00:02:42,960 --> 00:02:45,810
want to work on anymore all the file

60
00:02:45,810 --> 00:02:48,030
system stuff serving static resources

61
00:02:48,030 --> 00:02:50,460
and directories these are thing I really

62
00:02:50,460 --> 00:02:52,560
don't want to deal with anymore but

63
00:02:52,560 --> 00:02:54,030
those are also areas where people have

64
00:02:54,030 --> 00:02:55,920
requests and they have and they're all

65
00:02:55,920 --> 00:02:58,200
unfortunately very reasonable they're

66
00:02:58,200 --> 00:03:00,060
all requests that makes sense that will

67
00:03:00,060 --> 00:03:02,550
make things better sometimes they're

68
00:03:02,550 --> 00:03:05,310
bugs and I really I have no interest in

69
00:03:05,310 --> 00:03:06,810
doing this anymore like I've been doing

70
00:03:06,810 --> 00:03:08,580
a lot of this stuff for four years now

71
00:03:08,580 --> 00:03:11,070
and I would like to do other things so

72
00:03:11,070 --> 00:03:14,930
how do I move those pieces out without

73
00:03:14,930 --> 00:03:17,190
having to constantly babysit them

74
00:03:17,190 --> 00:03:18,750
because if it's a core part of the

75
00:03:18,750 --> 00:03:20,880
framework then I can't just give someone

76
00:03:20,880 --> 00:03:22,950
else it and hope everything is okay and

77
00:03:22,950 --> 00:03:24,900
then you know make things that upgrades

78
00:03:24,900 --> 00:03:28,110
will just happen so so version 8 is

79
00:03:28,110 --> 00:03:31,590
really focused on enabling more people

80
00:03:31,590 --> 00:03:33,900
to do more things both in the core

81
00:03:33,900 --> 00:03:36,480
functionality and also outside so it's

82
00:03:36,480 --> 00:03:40,410
really a release that is meant to to

83
00:03:40,410 --> 00:03:41,940
allow me to say you know what you like

84
00:03:41,940 --> 00:03:43,860
that go do it I don't have to do it

85
00:03:43,860 --> 00:03:47,190
anymore you can do it now and so today

86
00:03:47,190 --> 00:03:50,160
I'm going to touch some of the the key

87
00:03:50,160 --> 00:03:52,709
new features and changes that I think

88
00:03:52,709 --> 00:03:55,650
will enable that transformation of how

89
00:03:55,650 --> 00:03:57,000
we work in the end are in the in the

90
00:03:57,000 --> 00:04:01,080
ecosystem the the release notes are

91
00:04:01,080 --> 00:04:06,480
quite long and the like I think like

92
00:04:06,480 --> 00:04:09,630
it's like 70 or 80,000 key hub changes

93
00:04:09,630 --> 00:04:11,790
addition and removing in this release so

94
00:04:11,790 --> 00:04:14,510
it's it's gigantic I think that 140

95
00:04:14,510 --> 00:04:19,320
issues as part of it so I can go and you

96
00:04:19,320 --> 00:04:22,020
know like last year nah februari with I

97
00:04:22,020 --> 00:04:26,470
really stupor no it's not crazy

98
00:04:26,470 --> 00:04:30,600
different quests februari I went to

99
00:04:30,600 --> 00:04:32,680
Washington State and I want to be and

100
00:04:32,680 --> 00:04:34,930
yet office and I give a like an hour's

101
00:04:34,930 --> 00:04:37,210
ten-minute talk going through like every

102
00:04:37,210 --> 00:04:39,790
happy to feature there's so I'm not

103
00:04:39,790 --> 00:04:41,050
going to try to do that today I'm going

104
00:04:41,050 --> 00:04:45,490
to keep this shorter but I kind of want

105
00:04:45,490 --> 00:04:47,380
to go through like the main thing so the

106
00:04:47,380 --> 00:04:50,620
biggest change the most obvious change

107
00:04:50,620 --> 00:04:54,520
is that we now have a unified API so if

108
00:04:54,520 --> 00:04:57,700
before we had a server API and a plug-in

109
00:04:57,700 --> 00:05:03,220
API and a pack API and I know that that

110
00:05:03,220 --> 00:05:05,940
confused the hell out of most people

111
00:05:05,940 --> 00:05:09,370
that's all gone we now have a server API

112
00:05:09,370 --> 00:05:12,190
and that's one server API is available

113
00:05:12,190 --> 00:05:14,380
everywhere whether it's when you're

114
00:05:14,380 --> 00:05:16,540
creating a server if you have a survey

115
00:05:16,540 --> 00:05:18,940
with multiple connections which was the

116
00:05:18,940 --> 00:05:23,020
pack in previous version so if you want

117
00:05:23,020 --> 00:05:25,780
to open both an API port and a web port

118
00:05:25,780 --> 00:05:27,580
on the same installation which is a very

119
00:05:27,580 --> 00:05:29,470
common thing to do or an HTTP and HTTPS

120
00:05:29,470 --> 00:05:31,200
where you redirect from one another

121
00:05:31,200 --> 00:05:33,460
that's just a server and you can add as

122
00:05:33,460 --> 00:05:34,690
many connections you want to the server

123
00:05:34,690 --> 00:05:36,580
so server and pack have been completely

124
00:05:36,580 --> 00:05:38,740
unified I think package mean one

125
00:05:38,740 --> 00:05:41,590
confusing concept for people in previous

126
00:05:41,590 --> 00:05:43,120
version he was like the one of the thing

127
00:05:43,120 --> 00:05:45,130
is like nobody could really explain what

128
00:05:45,130 --> 00:05:48,400
what pack is so that's gone it's one API

129
00:05:48,400 --> 00:05:51,580
now and then on a plugin side we had

130
00:05:51,580 --> 00:05:54,220
almost identical api's between what the

131
00:05:54,220 --> 00:05:55,690
server gives you and what the plugin

132
00:05:55,690 --> 00:05:57,700
gives you but not exactly and they're

133
00:05:57,700 --> 00:05:59,260
like you know area where they overlap in

134
00:05:59,260 --> 00:06:00,790
areas where you're different so that's

135
00:06:00,790 --> 00:06:03,610
all cleaned up now it's one API and

136
00:06:03,610 --> 00:06:06,160
actually if you require happy only

137
00:06:06,160 --> 00:06:08,169
exposes server now that's it that's the

138
00:06:08,169 --> 00:06:09,940
only thing you can do is create a new

139
00:06:09,940 --> 00:06:14,260
server new server that's it so the

140
00:06:14,260 --> 00:06:16,000
unified API is going to I think it's

141
00:06:16,000 --> 00:06:17,320
going to make things much easier I think

142
00:06:17,320 --> 00:06:19,780
it's like if you've been using happy for

143
00:06:19,780 --> 00:06:22,900
a while there is some breaking changes

144
00:06:22,900 --> 00:06:24,820
in the way configuration is done now but

145
00:06:24,820 --> 00:06:26,550
they're all pretty simple you know some

146
00:06:26,550 --> 00:06:31,360
arguments moved into options you you add

147
00:06:31,360 --> 00:06:33,130
your your connection by called

148
00:06:33,130 --> 00:06:34,919
connection and by the way there's

149
00:06:34,919 --> 00:06:37,390
nobody's happy about the name connection

150
00:06:37,390 --> 00:06:39,070
like the function in connection in the

151
00:06:39,070 --> 00:06:39,969
new version

152
00:06:39,969 --> 00:06:41,739
uh and yet nobody has been able to come

153
00:06:41,739 --> 00:06:43,989
up with anything better so if you come

154
00:06:43,989 --> 00:06:46,689
up with anything better I'm happy to add

155
00:06:46,689 --> 00:06:48,519
an alias to the function and then slowly

156
00:06:48,519 --> 00:06:50,259
we'll move away from the connection name

157
00:06:50,259 --> 00:06:52,899
but so far it's the best we got so deal

158
00:06:52,899 --> 00:07:00,009
with it all right so dr. unified API all

159
00:07:00,009 --> 00:07:06,579
right um I got a little look crazy with

160
00:07:06,579 --> 00:07:11,439
Photoshop um second change is we i think

161
00:07:11,439 --> 00:07:13,479
is the most important one i think it's

162
00:07:13,479 --> 00:07:15,939
also the ones to make my life easiest in

163
00:07:15,939 --> 00:07:18,099
terms of requests in that cascading

164
00:07:18,099 --> 00:07:20,860
config so in previous version you had

165
00:07:20,860 --> 00:07:23,679
your pack and fig and your server config

166
00:07:23,679 --> 00:07:27,459
and your route config and your state

167
00:07:27,459 --> 00:07:31,299
config and some of them overlap some of

168
00:07:31,299 --> 00:07:33,549
them didn't it was really case by case

169
00:07:33,549 --> 00:07:36,549
which one is the global config and which

170
00:07:36,549 --> 00:07:39,009
one is the proud config and which one

171
00:07:39,009 --> 00:07:41,939
you can override in which one you can't

172
00:07:41,939 --> 00:07:45,519
it wasn't very clear and then if you're

173
00:07:45,519 --> 00:07:47,709
in a plug in some of those configs got

174
00:07:47,709 --> 00:07:50,559
overridden by the plug in config you for

175
00:07:50,559 --> 00:07:53,649
bind all for pap so it was like all

176
00:07:53,649 --> 00:07:57,039
those fine style ways which config works

177
00:07:57,039 --> 00:07:59,619
which makes sense you know if you're

178
00:07:59,619 --> 00:08:00,849
building something over four years and

179
00:08:00,849 --> 00:08:02,259
you know people keep asking oh can i

180
00:08:02,259 --> 00:08:04,179
override that for that route okay i'll

181
00:08:04,179 --> 00:08:07,179
go and add that in so i got a whole

182
00:08:07,179 --> 00:08:10,149
bunch of these requests accumulated and

183
00:08:10,149 --> 00:08:11,799
I was like you know what this is just

184
00:08:11,799 --> 00:08:14,589
we're doing it wrong and so the new

185
00:08:14,589 --> 00:08:16,059
system is basically you create a server

186
00:08:16,059 --> 00:08:18,249
you can do provide defaults for

187
00:08:18,249 --> 00:08:21,129
everything so you can cry defaults for

188
00:08:21,129 --> 00:08:22,899
new connections and within those

189
00:08:22,899 --> 00:08:26,469
connection default for cookies in the

190
00:08:26,469 --> 00:08:28,119
state defaults and you can provide

191
00:08:28,119 --> 00:08:30,759
defaults for routes you can default

192
00:08:30,759 --> 00:08:32,110
everything you want and when you get in

193
00:08:32,110 --> 00:08:34,779
connection you can override the server

194
00:08:34,779 --> 00:08:36,490
disconnect configuration with the

195
00:08:36,490 --> 00:08:38,500
connection configuration and in the

196
00:08:38,500 --> 00:08:40,389
route you can override everything so

197
00:08:40,389 --> 00:08:42,969
it's cascading where they're at the end

198
00:08:42,969 --> 00:08:46,660
you get one route config and in practice

199
00:08:46,660 --> 00:08:48,550
it turns out that almost none of the

200
00:08:48,550 --> 00:08:51,819
settings we had or do with the server or

201
00:08:51,819 --> 00:08:53,560
the connection there all right configure

202
00:08:53,560 --> 00:08:56,800
patient but they're all define high up

203
00:08:56,800 --> 00:08:59,380
and what this is really enabling is now

204
00:08:59,380 --> 00:09:01,029
plugins can take much more control over

205
00:09:01,029 --> 00:09:02,620
things they don't you don't have to

206
00:09:02,620 --> 00:09:03,880
write a plug-in where you say hey if

207
00:09:03,880 --> 00:09:05,740
you're using my plugin this is how you

208
00:09:05,740 --> 00:09:07,960
have to configure server first that's

209
00:09:07,960 --> 00:09:09,760
really annoying because the plug-in

210
00:09:09,760 --> 00:09:11,950
should be its own in captured in the

211
00:09:11,950 --> 00:09:14,290
solution you don't want we have to keep

212
00:09:14,290 --> 00:09:16,029
you know making outside requirements of

213
00:09:16,029 --> 00:09:17,440
your developers you just say hey I just

214
00:09:17,440 --> 00:09:19,270
just require me you know that's all you

215
00:09:19,270 --> 00:09:22,990
need to do so the cascading config now

216
00:09:22,990 --> 00:09:25,270
everything and things I move things so

217
00:09:25,270 --> 00:09:27,430
it's little obnoxious in terms of now

218
00:09:27,430 --> 00:09:29,020
you have this option structure that has

219
00:09:29,020 --> 00:09:30,610
connections in it and then there's route

220
00:09:30,610 --> 00:09:33,190
in it so things move the little little

221
00:09:33,190 --> 00:09:35,350
side way in terms of the the JSON tree

222
00:09:35,350 --> 00:09:38,200
but now you can actually understand

223
00:09:38,200 --> 00:09:40,480
exactly what you're influencing so if a

224
00:09:40,480 --> 00:09:43,180
setting is about a route and you're

225
00:09:43,180 --> 00:09:46,000
putting it as a default in the server it

226
00:09:46,000 --> 00:09:48,400
should say this is for my routes so when

227
00:09:48,400 --> 00:09:49,510
you're reading your config you

228
00:09:49,510 --> 00:09:51,160
understand what is that going to impact

229
00:09:51,160 --> 00:09:52,870
it's not something you have to go to the

230
00:09:52,870 --> 00:09:58,510
manual to to understand the another one

231
00:09:58,510 --> 00:10:00,040
that's been like I got a lot of requests

232
00:10:00,040 --> 00:10:04,120
for is promised to support and honestly

233
00:10:04,120 --> 00:10:06,580
I've I never even looked what promises

234
00:10:06,580 --> 00:10:09,370
was until like a month ago and not

235
00:10:09,370 --> 00:10:10,750
because I have anything against it but

236
00:10:10,750 --> 00:10:12,400
because I don't have any reason for it

237
00:10:12,400 --> 00:10:14,260
so I keep hearing oh it solves the

238
00:10:14,260 --> 00:10:16,210
callback you know callback nightmare and

239
00:10:16,210 --> 00:10:17,680
all that stuff and I was like okay I

240
00:10:17,680 --> 00:10:19,750
don't have those problems so i'm just

241
00:10:19,750 --> 00:10:21,820
going to ignore it and I've ignore it

242
00:10:21,820 --> 00:10:24,730
today successfully for a long time until

243
00:10:24,730 --> 00:10:27,010
you know a lot of people ask for it and

244
00:10:27,010 --> 00:10:30,190
at some point I said you know what like

245
00:10:30,190 --> 00:10:31,690
let's see what actually means to add

246
00:10:31,690 --> 00:10:33,760
native support for promises so I looked

247
00:10:33,760 --> 00:10:35,589
at the different requests I talked to a

248
00:10:35,589 --> 00:10:38,260
bunch of people since the community grew

249
00:10:38,260 --> 00:10:40,360
significantly we have now we have some

250
00:10:40,360 --> 00:10:42,339
core commuters who are using promises

251
00:10:42,339 --> 00:10:44,110
all the time so now we have people

252
00:10:44,110 --> 00:10:49,380
inside of the of the core group that are

253
00:10:49,380 --> 00:10:51,760
promoting use of coal callbacks which we

254
00:10:51,760 --> 00:10:55,480
didn't have before it was very homogenic

255
00:10:55,480 --> 00:10:56,680
environment before you know I was just

256
00:10:56,680 --> 00:10:58,120
like you know just the wall more people

257
00:10:58,120 --> 00:10:59,800
if we don't use it internally then we

258
00:10:59,800 --> 00:11:03,490
don't use it so in promises support we

259
00:11:03,490 --> 00:11:04,959
now have native support for in two

260
00:11:04,959 --> 00:11:06,940
places one is you

261
00:11:06,940 --> 00:11:08,980
I reply with a promise so if you're the

262
00:11:08,980 --> 00:11:10,390
handler you can reply with the promise

263
00:11:10,390 --> 00:11:12,760
and when that promise resolved it will

264
00:11:12,760 --> 00:11:16,180
actually continue the process people

265
00:11:16,180 --> 00:11:18,580
have done plugins to accomplish that but

266
00:11:18,580 --> 00:11:21,040
they're all very awkward and clergy and

267
00:11:21,040 --> 00:11:22,480
they don't really work well if something

268
00:11:22,480 --> 00:11:23,980
breaks in the middle of the process you

269
00:11:23,980 --> 00:11:25,570
end up with this promise that nobody's

270
00:11:25,570 --> 00:11:28,480
really paying attention to at the end so

271
00:11:28,480 --> 00:11:30,040
now we have native support for that we

272
00:11:30,040 --> 00:11:31,300
also have native support for server

273
00:11:31,300 --> 00:11:33,190
methods so if you like server methods

274
00:11:33,190 --> 00:11:35,550
unica now set sir amended return a

275
00:11:35,550 --> 00:11:41,680
promise as well and talking about server

276
00:11:41,680 --> 00:11:48,610
methods we in I think 71 or 72 I fixed a

277
00:11:48,610 --> 00:11:50,950
bug that removed undocumented

278
00:11:50,950 --> 00:11:53,980
functionality that you can use server

279
00:11:53,980 --> 00:11:56,050
method without callbacks so you can use

280
00:11:56,050 --> 00:11:59,110
blocking server methods it's all

281
00:11:59,110 --> 00:12:00,400
documented it's not allowed to do you

282
00:12:00,400 --> 00:12:03,100
can't do that but it worked because the

283
00:12:03,100 --> 00:12:04,360
way the code was written it just works

284
00:12:04,360 --> 00:12:06,070
so people were using it and using it

285
00:12:06,070 --> 00:12:08,230
very happily and then I broke it in a

286
00:12:08,230 --> 00:12:11,320
non mais release so like I did 71 and I

287
00:12:11,320 --> 00:12:13,930
broke you know everybody's code and when

288
00:12:13,930 --> 00:12:15,250
they came and complained I said well I'm

289
00:12:15,250 --> 00:12:17,560
sorry but the documentation make it very

290
00:12:17,560 --> 00:12:22,720
Mexico shouldn't have done that but I

291
00:12:22,720 --> 00:12:24,340
didn't quite expect the response like I

292
00:12:24,340 --> 00:12:25,930
mean the role lot of people who complain

293
00:12:25,930 --> 00:12:28,510
about so in 80 now we have official

294
00:12:28,510 --> 00:12:31,810
support for server methods so now we

295
00:12:31,810 --> 00:12:34,150
have promises callbacks or no callbacks

296
00:12:34,150 --> 00:12:37,180
and you can use all three of those with

297
00:12:37,180 --> 00:12:39,250
caching and happy internally we'll wrap

298
00:12:39,250 --> 00:12:42,280
it correctly to make sure that it for

299
00:12:42,280 --> 00:12:43,710
its own purposes it's getting the

300
00:12:43,710 --> 00:12:46,750
consistent signature for the function so

301
00:12:46,750 --> 00:12:52,720
we got that in another one that's all

302
00:12:52,720 --> 00:12:57,210
about me I really really want to move

303
00:12:57,210 --> 00:13:01,810
the proxy the the file system and the

304
00:13:01,810 --> 00:13:04,330
views out of out of happy core all right

305
00:13:04,330 --> 00:13:05,740
I mean if it was up to me I would make

306
00:13:05,740 --> 00:13:07,540
it that you have to you know install it

307
00:13:07,540 --> 00:13:09,760
yourself but I know you know those are

308
00:13:09,760 --> 00:13:11,410
really really core functionality in the

309
00:13:11,410 --> 00:13:12,850
framework and people love it that you

310
00:13:12,850 --> 00:13:14,140
don't have to do anything but I'm still

311
00:13:14,140 --> 00:13:15,970
happy and get all this out of the box it

312
00:13:15,970 --> 00:13:18,760
adds almost no cost so if it's they're

313
00:13:18,760 --> 00:13:20,680
not using it it doesn't really cost

314
00:13:20,680 --> 00:13:22,089
and like any any resources for you

315
00:13:22,089 --> 00:13:23,290
unless you like doing embedding the

316
00:13:23,290 --> 00:13:24,700
embedded devices in which case I think

317
00:13:24,700 --> 00:13:25,720
happy you might not be the ideal

318
00:13:25,720 --> 00:13:27,810
solution for an embedded device

319
00:13:27,810 --> 00:13:34,120
framework but i really wanted out i want

320
00:13:34,120 --> 00:13:35,320
to give to other people and wanted out

321
00:13:35,320 --> 00:13:38,589
so in version 7 i got most of it out so

322
00:13:38,589 --> 00:13:40,540
we have three new modules inert for

323
00:13:40,540 --> 00:13:49,000
static files h2o2 for proxy and vision

324
00:13:49,000 --> 00:13:50,920
for the view manager so we get all those

325
00:13:50,920 --> 00:13:52,660
out but the way it was it was still

326
00:13:52,660 --> 00:13:55,120
happy require them and then happy itself

327
00:13:55,120 --> 00:13:57,310
called functions and integrated him with

328
00:13:57,310 --> 00:13:58,959
the system so when you called server

329
00:13:58,959 --> 00:14:01,270
that views it was a native happy

330
00:14:01,270 --> 00:14:03,040
function that called you know a vision

331
00:14:03,040 --> 00:14:05,920
function and and I rely I've been

332
00:14:05,920 --> 00:14:07,810
wanting to move that stuff out for a

333
00:14:07,810 --> 00:14:12,430
long time so what we have now is a new

334
00:14:12,430 --> 00:14:14,890
feature called decorate so in server

335
00:14:14,890 --> 00:14:16,510
decorate you can decorate the server or

336
00:14:16,510 --> 00:14:18,640
the reply interface and make it your own

337
00:14:18,640 --> 00:14:20,410
so for example if you keep finding

338
00:14:20,410 --> 00:14:22,330
yourself doing reply and then for

339
00:14:22,330 --> 00:14:24,940
success you always return some JSON

340
00:14:24,940 --> 00:14:26,440
structure that says you know success

341
00:14:26,440 --> 00:14:30,130
equal true and you know message equal

342
00:14:30,130 --> 00:14:31,959
hooray and whatever it is and you keep

343
00:14:31,959 --> 00:14:33,839
doing that again again again you can now

344
00:14:33,839 --> 00:14:37,120
call server declare and you can

345
00:14:37,120 --> 00:14:38,709
basically decorate the reply interface

346
00:14:38,709 --> 00:14:41,140
to include the success method so now you

347
00:14:41,140 --> 00:14:42,880
can call reply that success and that's

348
00:14:42,880 --> 00:14:44,950
it you don't have to constantly repeat

349
00:14:44,950 --> 00:14:47,080
that code the same thing with a server

350
00:14:47,080 --> 00:14:49,420
you can i decorate server so you can add

351
00:14:49,420 --> 00:14:52,270
features so in happy eight if you look

352
00:14:52,270 --> 00:14:54,130
at the source code of a p8 there is no

353
00:14:54,130 --> 00:14:57,580
replied proxy or reply that file there

354
00:14:57,580 --> 00:15:00,730
is no file directory handlers anymore in

355
00:15:00,730 --> 00:15:02,620
the source code it's still there but

356
00:15:02,620 --> 00:15:04,480
what happy is doing it's not happy is

357
00:15:04,480 --> 00:15:06,310
requiring those three modules I

358
00:15:06,310 --> 00:15:07,870
mentioned those are now full plugins

359
00:15:07,870 --> 00:15:10,510
they're just plain plugins happy

360
00:15:10,510 --> 00:15:12,690
requiring them automatically for you and

361
00:15:12,690 --> 00:15:15,880
that and those plugins decorate happy

362
00:15:15,880 --> 00:15:18,190
without extra functionality what's cool

363
00:15:18,190 --> 00:15:19,899
about besides me you know not having to

364
00:15:19,899 --> 00:15:22,060
do it anymore is the fact that now you

365
00:15:22,060 --> 00:15:25,750
are an equal footing with what I was

366
00:15:25,750 --> 00:15:27,970
able to do before internally you cannot

367
00:15:27,970 --> 00:15:30,279
do anything you want outside so all the

368
00:15:30,279 --> 00:15:33,660
power that we before was you know under

369
00:15:33,660 --> 00:15:35,910
score internal variable internal

370
00:15:35,910 --> 00:15:38,100
facilities that you know it sound like

371
00:15:38,100 --> 00:15:40,260
you know I I use them in other modules

372
00:15:40,260 --> 00:15:42,660
because it were all mine there's none of

373
00:15:42,660 --> 00:15:44,490
that anymore so those plugins are now

374
00:15:44,490 --> 00:15:49,850
built completely on on public API and

375
00:15:49,850 --> 00:15:54,570
and there's a new feature that I'm going

376
00:15:54,570 --> 00:15:56,390
to use all the time a lot of people but

377
00:15:56,390 --> 00:15:58,800
you cannot create a server with a

378
00:15:58,800 --> 00:16:01,290
minimal flag and it will not load those

379
00:16:01,290 --> 00:16:03,270
plugins by default so you can actually

380
00:16:03,270 --> 00:16:06,210
create a server that has nothing it

381
00:16:06,210 --> 00:16:08,250
doesn't have files or directories or or

382
00:16:08,250 --> 00:16:10,830
views or any of that stuff you can

383
00:16:10,830 --> 00:16:12,690
create a completely bare bone happy

384
00:16:12,690 --> 00:16:15,000
server and that means you can now create

385
00:16:15,000 --> 00:16:18,030
your own Fork of the file system plug-in

386
00:16:18,030 --> 00:16:20,640
and and change the native functionality

387
00:16:20,640 --> 00:16:25,380
the way you want to be a more advanced

388
00:16:25,380 --> 00:16:28,230
concept is called realm realm is new and

389
00:16:28,230 --> 00:16:29,880
happy eight I think it's the only really

390
00:16:29,880 --> 00:16:34,440
new concept in the release and and what

391
00:16:34,440 --> 00:16:37,590
realms are it's really like this is a

392
00:16:37,590 --> 00:16:39,240
very primitive version of what I my

393
00:16:39,240 --> 00:16:42,030
vision is in future versions but what

394
00:16:42,030 --> 00:16:44,730
realms are is is a way to send box

395
00:16:44,730 --> 00:16:47,360
plugins to their own ecosystem

396
00:16:47,360 --> 00:16:50,720
completely so you'll be able to define a

397
00:16:50,720 --> 00:16:53,940
final state a cookie in a plug-in does

398
00:16:53,940 --> 00:16:55,980
not leak outside the plug-in it will

399
00:16:55,980 --> 00:16:58,440
have zero impact on any other plugins

400
00:16:58,440 --> 00:17:00,510
you might have so you can have a plug-in

401
00:17:00,510 --> 00:17:02,400
that adds a bunch of routes define some

402
00:17:02,400 --> 00:17:05,430
cookies add extensions and now that will

403
00:17:05,430 --> 00:17:08,340
apply to any other plug-in so you can

404
00:17:08,340 --> 00:17:10,860
have two plugins that have the same cook

405
00:17:10,860 --> 00:17:13,860
you define what are the same in the same

406
00:17:13,860 --> 00:17:15,480
name because that that's because HTTP

407
00:17:15,480 --> 00:17:17,700
still going to send the same one but but

408
00:17:17,700 --> 00:17:19,590
you'll be able to define things that

409
00:17:19,590 --> 00:17:22,710
will not leak or overlap between between

410
00:17:22,710 --> 00:17:24,720
different plugins and with the

411
00:17:24,720 --> 00:17:26,370
extensions really important because our

412
00:17:26,370 --> 00:17:29,100
people have been adding extensions to

413
00:17:29,100 --> 00:17:31,050
their plug-in functionality and the

414
00:17:31,050 --> 00:17:32,310
problem is it's very inefficient because

415
00:17:32,310 --> 00:17:34,080
now those extensions are running on

416
00:17:34,080 --> 00:17:35,970
every other route in the Indy in the

417
00:17:35,970 --> 00:17:38,640
server and so to avoid that you're going

418
00:17:38,640 --> 00:17:41,160
to get a config that says only if I mark

419
00:17:41,160 --> 00:17:43,560
this as my route in some settings then

420
00:17:43,560 --> 00:17:45,300
run this extension on so you basically

421
00:17:45,300 --> 00:17:46,580
with every other

422
00:17:46,580 --> 00:17:48,289
you come in and you say hey is this red

423
00:17:48,289 --> 00:17:50,000
part of my plug-in or it's not I'm not

424
00:17:50,000 --> 00:17:52,519
going to run this extension on it's just

425
00:17:52,519 --> 00:17:54,169
more function calls and some calls are

426
00:17:54,169 --> 00:17:57,409
expensive in JavaScript so we're trying

427
00:17:57,409 --> 00:18:00,140
to avoid that so that's the future what

428
00:18:00,140 --> 00:18:04,539
room is right now is just a way to do a

429
00:18:04,539 --> 00:18:08,450
two layer configuration so when you do

430
00:18:08,450 --> 00:18:10,130
server when you have the server object

431
00:18:10,130 --> 00:18:12,080
server has a realm and it's a container

432
00:18:12,080 --> 00:18:13,340
that has a few properties you can look a

433
00:18:13,340 --> 00:18:14,510
documentation see what's in there is

434
00:18:14,510 --> 00:18:16,399
some settings in there and then the plug

435
00:18:16,399 --> 00:18:17,990
area for plugins to put whatever they

436
00:18:17,990 --> 00:18:22,370
want in there when you call register the

437
00:18:22,370 --> 00:18:24,440
server that the register function gets

438
00:18:24,440 --> 00:18:27,679
has its own realm that's different from

439
00:18:27,679 --> 00:18:30,710
the root server on that server there's

440
00:18:30,710 --> 00:18:32,630
also served that route which is the root

441
00:18:32,630 --> 00:18:35,389
server that realm so in any place you

442
00:18:35,389 --> 00:18:38,450
are you have access to two realms the

443
00:18:38,450 --> 00:18:40,250
server realm which is the root realm and

444
00:18:40,250 --> 00:18:43,970
then your own plugin realm everything

445
00:18:43,970 --> 00:18:46,370
you add inside the plugin will be

446
00:18:46,370 --> 00:18:49,399
faulted the local realm this is how for

447
00:18:49,399 --> 00:18:51,559
example the view manager works so if you

448
00:18:51,559 --> 00:18:54,320
define a view manager in two plugins and

449
00:18:54,320 --> 00:18:55,639
you load them and they each have their

450
00:18:55,639 --> 00:18:58,669
own templates with same name but but

451
00:18:58,669 --> 00:19:01,850
conflicting meaning today it works fine

452
00:19:01,850 --> 00:19:03,500
because internally happy will go and

453
00:19:03,500 --> 00:19:05,389
resolve it with basically a private

454
00:19:05,389 --> 00:19:08,840
version of realms in 80 it's done

455
00:19:08,840 --> 00:19:12,200
basically by putting the view manager in

456
00:19:12,200 --> 00:19:14,000
the right realm and then the rouse

457
00:19:14,000 --> 00:19:16,010
default to that so I'm not expecting

458
00:19:16,010 --> 00:19:17,419
older like completely follow what I'm

459
00:19:17,419 --> 00:19:18,769
saying right now I've been playing with

460
00:19:18,769 --> 00:19:21,399
this for you know for six months now but

461
00:19:21,399 --> 00:19:23,720
if you really want to see how it works

462
00:19:23,720 --> 00:19:25,850
and how it's being used go to the vision

463
00:19:25,850 --> 00:19:29,779
module which is the view manager and see

464
00:19:29,779 --> 00:19:31,010
how it's implemented it's basically

465
00:19:31,010 --> 00:19:35,360
using realms all the way it's it's

466
00:19:35,360 --> 00:19:37,580
really why fully had to expose the

467
00:19:37,580 --> 00:19:40,940
concept outlet in public API in future

468
00:19:40,940 --> 00:19:41,960
version what I really want to do is

469
00:19:41,960 --> 00:19:43,820
enhance it to allow you to completely

470
00:19:43,820 --> 00:19:45,559
sandbox your plugin as much as its

471
00:19:45,559 --> 00:19:47,690
reasonable within one server so that's

472
00:19:47,690 --> 00:19:52,460
that's realms another one another big

473
00:19:52,460 --> 00:19:54,470
change that I mean it's probably not

474
00:19:54,470 --> 00:19:55,970
gonna be a breakage for most people but

475
00:19:55,970 --> 00:19:57,889
I think it's been causing a lot of pain

476
00:19:57,889 --> 00:20:00,309
who people is logging

477
00:20:00,309 --> 00:20:03,379
longing it's been very very noisy and

478
00:20:03,379 --> 00:20:05,210
it's been very hard for people to say

479
00:20:05,210 --> 00:20:07,220
hey look the longer facility is nice but

480
00:20:07,220 --> 00:20:09,139
like happy generating so much logging

481
00:20:09,139 --> 00:20:11,090
noise that if I'm trying to also add my

482
00:20:11,090 --> 00:20:13,309
app noise to it and then the filtering

483
00:20:13,309 --> 00:20:16,129
is it's just too much going on so we did

484
00:20:16,129 --> 00:20:18,080
a couple things one we split log into

485
00:20:18,080 --> 00:20:19,429
internal logging now has its own and

486
00:20:19,429 --> 00:20:22,519
meet emitter event then your app logging

487
00:20:22,519 --> 00:20:24,730
so those are two split now so if you

488
00:20:24,730 --> 00:20:27,409
subscribe to request you're only going

489
00:20:27,409 --> 00:20:28,940
to get when you call request log you'll

490
00:20:28,940 --> 00:20:30,350
get those events you're not going to get

491
00:20:30,350 --> 00:20:31,519
all the internal stuff at happy

492
00:20:31,519 --> 00:20:34,549
generates I got rid of about half of the

493
00:20:34,549 --> 00:20:36,139
internal logging that works just stupid

494
00:20:36,139 --> 00:20:39,350
not adding any value clean up all the

495
00:20:39,350 --> 00:20:42,620
other the tags for the event so now you

496
00:20:42,620 --> 00:20:44,570
can actually and also document all of

497
00:20:44,570 --> 00:20:46,789
them so now there's a page and I api doc

498
00:20:46,789 --> 00:20:49,389
that tells you every single event that

499
00:20:49,389 --> 00:20:52,159
happy will admit internally and you can

500
00:20:52,159 --> 00:20:54,529
now see if you want to subscribe it or

501
00:20:54,529 --> 00:20:57,139
not and what to do about it's a lot

502
00:20:57,139 --> 00:21:00,980
quieter and and the last one it's a it's

503
00:21:00,980 --> 00:21:02,629
a small one that read has been waiting

504
00:21:02,629 --> 00:21:05,960
for for a long time and that's the bring

505
00:21:05,960 --> 00:21:08,629
your own bring your own listener so

506
00:21:08,629 --> 00:21:12,649
basically we have the node HTTP server

507
00:21:12,649 --> 00:21:15,200
and you know first of all their their

508
00:21:15,200 --> 00:21:16,789
their new ones now they're you know

509
00:21:16,789 --> 00:21:18,830
there's one for speedy HTTP two people

510
00:21:18,830 --> 00:21:20,330
want to have different implementation of

511
00:21:20,330 --> 00:21:23,029
this of the of the HDP listener and as

512
00:21:23,029 --> 00:21:24,440
long as they've compatible API with a

513
00:21:24,440 --> 00:21:26,840
node one why shouldn't you able to use

514
00:21:26,840 --> 00:21:29,059
it up until now happy create its own it

515
00:21:29,059 --> 00:21:31,549
was internal it only exposes after the

516
00:21:31,549 --> 00:21:33,110
fact so if you did serve that listener

517
00:21:33,110 --> 00:21:35,750
you can get the actual node object but

518
00:21:35,750 --> 00:21:37,519
there was no way to affect that but and

519
00:21:37,519 --> 00:21:40,909
also happy kinda like you know required

520
00:21:40,909 --> 00:21:43,639
to start it its own listener it will not

521
00:21:43,639 --> 00:21:45,080
allow you to do anything with it and

522
00:21:45,080 --> 00:21:46,909
their environments where your your

523
00:21:46,909 --> 00:21:49,250
deployment requires you to actually do

524
00:21:49,250 --> 00:21:50,899
something else if you have an

525
00:21:50,899 --> 00:21:53,169
environment like the yellow environment

526
00:21:53,169 --> 00:21:56,120
it's a platform feature so you provide

527
00:21:56,120 --> 00:21:58,309
the platform with a HTTP server and the

528
00:21:58,309 --> 00:21:59,929
platform called listen on it with their

529
00:21:59,929 --> 00:22:02,000
own their own port then they find and

530
00:22:02,000 --> 00:22:03,649
that allows them to hook it in the right

531
00:22:03,649 --> 00:22:05,299
routing tables and the route load

532
00:22:05,299 --> 00:22:09,169
balancers and security purposes so now

533
00:22:09,169 --> 00:22:11,360
you can do that and my hope is that

534
00:22:11,360 --> 00:22:13,430
beyond just the deployment feature

535
00:22:13,430 --> 00:22:15,530
well this will give people it also means

536
00:22:15,530 --> 00:22:17,420
that people can experiment with

537
00:22:17,420 --> 00:22:21,740
alternative forms of transport so you

538
00:22:21,740 --> 00:22:24,350
can try to run happy with speedy to with

539
00:22:24,350 --> 00:22:26,750
speedy over it with a CP 2 and see see

540
00:22:26,750 --> 00:22:29,980
what that looks like without having

541
00:22:29,980 --> 00:22:32,120
happy to die natively support those

542
00:22:32,120 --> 00:22:36,380
features and again the goal is really to

543
00:22:36,380 --> 00:22:38,150
enable people to do more on their own

544
00:22:38,150 --> 00:22:40,190
without having to come back and request

545
00:22:40,190 --> 00:22:44,030
core features and can kind of make the

546
00:22:44,030 --> 00:22:46,820
surface area of course smaller easier to

547
00:22:46,820 --> 00:22:54,800
maintain and and also not put me as an

548
00:22:54,800 --> 00:22:56,540
opinion that matters of how you want to

549
00:22:56,540 --> 00:22:59,660
build your app allow you to design the

550
00:22:59,660 --> 00:23:01,730
features the way you want them and and

551
00:23:01,730 --> 00:23:03,980
between all those new facilities and

552
00:23:03,980 --> 00:23:06,290
changes I think that you now finally

553
00:23:06,290 --> 00:23:08,900
have the power to kind of fully make

554
00:23:08,900 --> 00:23:11,330
this framework your own and and decide

555
00:23:11,330 --> 00:23:14,780
how you're going to deploy it so at the

556
00:23:14,780 --> 00:23:17,420
beginning most of these changes like all

557
00:23:17,420 --> 00:23:19,660
these changes came from basically

558
00:23:19,660 --> 00:23:24,140
productive resentment of you know people

559
00:23:24,140 --> 00:23:26,560
asking for more and more and more and

560
00:23:26,560 --> 00:23:30,620
and because it's accumulated because

561
00:23:30,620 --> 00:23:32,270
there are so many open issue at some

562
00:23:32,270 --> 00:23:34,250
point I think I'd like 80 open happy

563
00:23:34,250 --> 00:23:36,740
issues at some point it actually was

564
00:23:36,740 --> 00:23:38,660
productive because I was able to stop

565
00:23:38,660 --> 00:23:40,760
and say okay here's the big picture of

566
00:23:40,760 --> 00:23:42,260
what people are asking for and I was

567
00:23:42,260 --> 00:23:43,760
able to start seeing patterns of word

568
00:23:43,760 --> 00:23:45,440
but the community is asking for it also

569
00:23:45,440 --> 00:23:47,510
get you both time usually a you know I

570
00:23:47,510 --> 00:23:49,190
used to close issues within like a day

571
00:23:49,190 --> 00:23:51,470
so there's no discussion involved like

572
00:23:51,470 --> 00:23:53,240
someone asks for something I say I don't

573
00:23:53,240 --> 00:23:56,510
think so I close it and that's it so it

574
00:23:56,510 --> 00:23:58,460
because I I my also doesn't allow me to

575
00:23:58,460 --> 00:23:59,780
leave an issue open for more than five

576
00:23:59,780 --> 00:24:01,670
minutes it's just like it's there I can

577
00:24:01,670 --> 00:24:04,730
deal with it so this more this way by

578
00:24:04,730 --> 00:24:08,270
basically being overwhelmed give people

579
00:24:08,270 --> 00:24:10,280
more time to discuss it and also we open

580
00:24:10,280 --> 00:24:11,630
some discussed channels so people can

581
00:24:11,630 --> 00:24:13,970
actually have long-term that are not

582
00:24:13,970 --> 00:24:16,730
closing five minutes all that accumulate

583
00:24:16,730 --> 00:24:18,290
together and and really give a good

584
00:24:18,290 --> 00:24:19,970
picture of where the happy communities

585
00:24:19,970 --> 00:24:24,890
today and and so this release is kinda

586
00:24:24,890 --> 00:24:26,780
like my office

587
00:24:26,780 --> 00:24:29,630
you'll hand over of a lot of

588
00:24:29,630 --> 00:24:31,130
functionalities back to the community

589
00:24:31,130 --> 00:24:32,690
and say hey you know what this is no

590
00:24:32,690 --> 00:24:34,130
longer to be me who's going to make a

591
00:24:34,130 --> 00:24:36,440
decision we actually have a community

592
00:24:36,440 --> 00:24:39,530
that runs the project and decides on

593
00:24:39,530 --> 00:24:42,470
those things and my my influence going

594
00:24:42,470 --> 00:24:44,600
to be on the semantics of the plug-in

595
00:24:44,600 --> 00:24:48,890
API but beyond that that's just the the

596
00:24:48,890 --> 00:24:51,290
the mechanism but all the meaningful

597
00:24:51,290 --> 00:24:54,080
work is now fully open and empower other

598
00:24:54,080 --> 00:24:56,240
people to really take control and

599
00:24:56,240 --> 00:24:58,700
experiment with things that before we're

600
00:24:58,700 --> 00:25:00,740
hard to do if we don't like that the

601
00:25:00,740 --> 00:25:02,960
command-line CLI is a good one where we

602
00:25:02,960 --> 00:25:04,310
didn't have an innovation on the command

603
00:25:04,310 --> 00:25:07,130
line and the manifest in probably over a

604
00:25:07,130 --> 00:25:09,860
year and a half now and it's been like

605
00:25:09,860 --> 00:25:10,880
an area that like I should I had no

606
00:25:10,880 --> 00:25:12,890
interest in working on also it's an area

607
00:25:12,890 --> 00:25:15,020
where it's kind of hard to to experiment

608
00:25:15,020 --> 00:25:16,070
with because people using it for their

609
00:25:16,070 --> 00:25:17,870
production that's like the closest part

610
00:25:17,870 --> 00:25:20,750
of the framework to your ops people so

611
00:25:20,750 --> 00:25:22,040
they often I'm going to want that

612
00:25:22,040 --> 00:25:23,900
constantly breaking changes and how the

613
00:25:23,900 --> 00:25:25,820
config file is done because that's

614
00:25:25,820 --> 00:25:27,860
painful so that's an area that you know

615
00:25:27,860 --> 00:25:29,300
we move it out and now there's

616
00:25:29,300 --> 00:25:31,790
opportunity for people to experiment and

617
00:25:31,790 --> 00:25:33,620
try new things and see what works for

618
00:25:33,620 --> 00:25:37,040
them and offer competing solutions for

619
00:25:37,040 --> 00:25:39,230
how to deploy this so that those are the

620
00:25:39,230 --> 00:25:42,470
main things I'm happy to take question

621
00:25:42,470 --> 00:25:46,790
if you have afterwards but please try it

622
00:25:46,790 --> 00:25:50,420
out enjoy report bugs ask any questions

623
00:25:50,420 --> 00:25:52,880
you want never be shy of asking an

624
00:25:52,880 --> 00:25:54,320
opening issues you know open issues for

625
00:25:54,320 --> 00:25:55,880
whatever you feel like opening issues or

626
00:25:55,880 --> 00:25:57,710
issues are free the only cost kids have

627
00:25:57,710 --> 00:25:59,060
some storage money so we don't care

628
00:25:59,060 --> 00:26:04,550
about that and yep use it so thank you

629
00:26:04,550 --> 00:26:08,310
very much and thanks for coming

