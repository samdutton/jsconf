1
00:00:18,620 --> 00:00:21,030

thank you for having me yeah I changed

2
00:00:21,030 --> 00:00:22,860
the title of almost every talk I do I

3
00:00:22,860 --> 00:00:24,390
can't help but fiddle and fiddle until

4
00:00:24,390 --> 00:00:26,940
the last minute anyway it's amazing to

5
00:00:26,940 --> 00:00:28,620
be here obviously speaking at track day

6
00:00:28,620 --> 00:00:31,470
is an honor and beyond intimidating so

7
00:00:31,470 --> 00:00:33,540
I'm really pleased to get a chance to

8
00:00:33,540 --> 00:00:35,760
try it today I'm gonna talk about a

9
00:00:35,760 --> 00:00:38,809
project that I did with Trulia it was a

10
00:00:38,809 --> 00:00:41,220
sort of a broad project they realized

11
00:00:41,220 --> 00:00:43,140
that they're you I had gotten a bit out

12
00:00:43,140 --> 00:00:43,890
of control

13
00:00:43,890 --> 00:00:46,739
and luckily they agreed to let me

14
00:00:46,739 --> 00:00:48,210
actually talk to you guys and even show

15
00:00:48,210 --> 00:00:49,950
you some cool yummy data today so I'm

16
00:00:49,950 --> 00:00:52,170
pretty excited about that we did a

17
00:00:52,170 --> 00:00:53,850
project where we sort of reinvented what

18
00:00:53,850 --> 00:00:55,920
a style guide meant for them a sort of

19
00:00:55,920 --> 00:00:57,660
modern version of what that could be

20
00:00:57,660 --> 00:01:00,360
and at the same time we factored their

21
00:01:00,360 --> 00:01:03,030
app to use more efficient HTML and to

22
00:01:03,030 --> 00:01:06,420
move them over to using sass or rather s

23
00:01:06,420 --> 00:01:09,330
CSS for the particular flavor that they

24
00:01:09,330 --> 00:01:11,250
chose so I'm going to talk a little bit

25
00:01:11,250 --> 00:01:14,130
about that about how we you know how we

26
00:01:14,130 --> 00:01:15,840
were able to use style guides as a way

27
00:01:15,840 --> 00:01:17,759
to improve their performance

28
00:01:17,759 --> 00:01:19,860
and to get some other good benefits that

29
00:01:19,860 --> 00:01:23,250
that I think they really liked so first

30
00:01:23,250 --> 00:01:25,370
I have to go back and talk about what

31
00:01:25,370 --> 00:01:28,530
what style guides used to mean and so

32
00:01:28,530 --> 00:01:30,690
this is an example of a style guide that

33
00:01:30,690 --> 00:01:33,840
was done for AOL in 2007 the thing is a

34
00:01:33,840 --> 00:01:35,790
beast it's beautiful it's amazing it's

35
00:01:35,790 --> 00:01:37,830
gorgeous it's like a you know it's like

36
00:01:37,830 --> 00:01:40,320
a piece of art but I would say not

37
00:01:40,320 --> 00:01:43,229
really that useful for the web so it has

38
00:01:43,229 --> 00:01:45,270
things like this with very detailed

39
00:01:45,270 --> 00:01:47,130
diagrams of their logo and exactly the

40
00:01:47,130 --> 00:01:48,360
amount of space that's supposed to be

41
00:01:48,360 --> 00:01:50,610
between each of the triangles and the

42
00:01:50,610 --> 00:01:52,860
actual text of the logo and how much

43
00:01:52,860 --> 00:01:54,960
space should be above and below the logo

44
00:01:54,960 --> 00:01:56,820
and all kinds of things that do not

45
00:01:56,820 --> 00:01:58,260
matter when you're making a website at

46
00:01:58,260 --> 00:02:00,000
all because most of those decisions are

47
00:02:00,000 --> 00:02:02,250
made long before we ever get involved

48
00:02:02,250 --> 00:02:03,210
right

49
00:02:03,210 --> 00:02:04,979
it also contains really super useful

50
00:02:04,979 --> 00:02:06,600
stuff like how the logo should be

51
00:02:06,600 --> 00:02:09,950
positioned on a hat

52
00:02:09,960 --> 00:02:12,820
or they're warm and cool pallets which

53
00:02:12,820 --> 00:02:14,710
you know it is it's beautiful look at

54
00:02:14,710 --> 00:02:16,330
that right somebody spent a fair bit of

55
00:02:16,330 --> 00:02:17,920
time actually making that but what that

56
00:02:17,920 --> 00:02:20,050
doesn't tell me is that top left yellow

57
00:02:20,050 --> 00:02:21,850
am I supposed to use it for type or is

58
00:02:21,850 --> 00:02:23,200
it mental need to be a background color

59
00:02:23,200 --> 00:02:25,210
or is it the color of a box or a

60
00:02:25,210 --> 00:02:28,240
gradient it's beautiful but in the web

61
00:02:28,240 --> 00:02:32,140
world I think not so useful also it's

62
00:02:32,140 --> 00:02:34,300
fantastic that the thesis font family is

63
00:02:34,300 --> 00:02:36,430
warm and intuitive but I don't care I

64
00:02:36,430 --> 00:02:38,080
just need to know when I'm trying to put

65
00:02:38,080 --> 00:02:39,610
something together in the app what font

66
00:02:39,610 --> 00:02:41,350
I'm supposed to use and where and and

67
00:02:41,350 --> 00:02:42,970
how to make those decisions without

68
00:02:42,970 --> 00:02:44,410
having to go knocking on the designers

69
00:02:44,410 --> 00:02:46,300
door every two minutes to ask them

70
00:02:46,300 --> 00:02:48,250
another question about how the thing was

71
00:02:48,250 --> 00:02:51,160
supposed to be built um so what I think

72
00:02:51,160 --> 00:02:52,720
about why these sorts of style guides

73
00:02:52,720 --> 00:02:54,790
don't work is because they take months

74
00:02:54,790 --> 00:02:56,800
to produce they're basically out of date

75
00:02:56,800 --> 00:02:59,080
before they're ever PDF to and put on

76
00:02:59,080 --> 00:03:01,000
people's desks because this is how this

77
00:03:01,000 --> 00:03:02,590
kind of beautiful thing is meant to be

78
00:03:02,590 --> 00:03:04,300
used right it's meant to be delivered to

79
00:03:04,300 --> 00:03:07,270
you like a present or something and I

80
00:03:07,270 --> 00:03:08,560
don't think that that works right

81
00:03:08,560 --> 00:03:10,420
because a design is fluid I mean I can't

82
00:03:10,420 --> 00:03:12,040
tell you maybe people can show me by a

83
00:03:12,040 --> 00:03:13,420
raise of hands a number of times that a

84
00:03:13,420 --> 00:03:15,220
designer has said this is the final

85
00:03:15,220 --> 00:03:17,740
final final design it's never gonna

86
00:03:17,740 --> 00:03:19,780
change after that's right and then a

87
00:03:19,780 --> 00:03:21,460
week later someone's like well you know

88
00:03:21,460 --> 00:03:23,110
that radius could be a little bit

89
00:03:23,110 --> 00:03:26,110
different and so I think that we need a

90
00:03:26,110 --> 00:03:28,450
more fluid and more living kind of a

91
00:03:28,450 --> 00:03:30,340
style guide we need something that works

92
00:03:30,340 --> 00:03:33,310
with code and so oh and the other issue

93
00:03:33,310 --> 00:03:34,060
with them is that they're really

94
00:03:34,060 --> 00:03:36,310
designer centric you know it's useful

95
00:03:36,310 --> 00:03:38,260
for design to talk about what design

96
00:03:38,260 --> 00:03:40,210
means at AOL but it's not useful for

97
00:03:40,210 --> 00:03:43,120
their web team or their engineers to be

98
00:03:43,120 --> 00:03:44,560
a part of the equation at all

99
00:03:44,560 --> 00:03:46,600
so in my opinion we have to kill that

100
00:03:46,600 --> 00:03:48,220
kind of style guide and that vision of a

101
00:03:48,220 --> 00:03:49,510
style guide because it's stopping us

102
00:03:49,510 --> 00:03:51,670
from using something that could be an

103
00:03:51,670 --> 00:03:54,720
amazingly useful tool but isn't because

104
00:03:54,720 --> 00:03:56,860
because it's too limited by what it's

105
00:03:56,860 --> 00:03:59,620
been in the past so we believe in

106
00:03:59,620 --> 00:04:02,680
creating living style guides which are a

107
00:04:02,680 --> 00:04:04,990
little bit different first of all

108
00:04:04,990 --> 00:04:06,670
they're a guide to existing Styles

109
00:04:06,670 --> 00:04:08,470
they're not some pie-in-the-sky wouldn't

110
00:04:08,470 --> 00:04:10,360
it be lovely if our Styles were all like

111
00:04:10,360 --> 00:04:12,459
this their guide to what really exists

112
00:04:12,459 --> 00:04:14,980
on the site at that moment and that's

113
00:04:14,980 --> 00:04:16,510
important because that's the only way

114
00:04:16,510 --> 00:04:18,100
that you can start to iterate is if you

115
00:04:18,100 --> 00:04:20,489
actually know where you're at now

116
00:04:20,489 --> 00:04:22,950
it also lives in code so it evolves with

117
00:04:22,950 --> 00:04:25,200
a site or app this is super important if

118
00:04:25,200 --> 00:04:27,180
you have a PDF style guide it can't

119
00:04:27,180 --> 00:04:29,280
evolve that the site is constantly

120
00:04:29,280 --> 00:04:30,540
changing and responding to new

121
00:04:30,540 --> 00:04:32,520
constraints your app is adding new

122
00:04:32,520 --> 00:04:34,980
features and you know something that

123
00:04:34,980 --> 00:04:37,290
doesn't live in code isn't going to keep

124
00:04:37,290 --> 00:04:39,540
up to date so in my opinion it even

125
00:04:39,540 --> 00:04:41,280
needs to use the exact same partials

126
00:04:41,280 --> 00:04:42,570
that you're using to build out your site

127
00:04:42,570 --> 00:04:44,520
need to be used to build your style

128
00:04:44,520 --> 00:04:46,470
guide that way there's no like extra

129
00:04:46,470 --> 00:04:49,200
step in keeping things going I also

130
00:04:49,200 --> 00:04:50,700
think it needs to be a collaboration

131
00:04:50,700 --> 00:04:52,770
tool for design and engineering to have

132
00:04:52,770 --> 00:04:54,389
better conversations because it feels

133
00:04:54,389 --> 00:04:56,090
like a lot of times we're sort of

134
00:04:56,090 --> 00:04:59,160
butting heads you know we're you know

135
00:04:59,160 --> 00:05:00,479
one side blames the other and the other

136
00:05:00,479 --> 00:05:02,040
side blames the other and it turns out

137
00:05:02,040 --> 00:05:03,330
that like in terms of the performance

138
00:05:03,330 --> 00:05:05,520
equation it's actually a little bit of

139
00:05:05,520 --> 00:05:09,180
everybody's fault and so I think a good

140
00:05:09,180 --> 00:05:11,550
style guide leads to better UI layer

141
00:05:11,550 --> 00:05:14,610
code more informed design choices and a

142
00:05:14,610 --> 00:05:16,229
better performing site which may sound

143
00:05:16,229 --> 00:05:18,060
like a stretch but I'm going to show you

144
00:05:18,060 --> 00:05:19,950
some examples of how that worked at

145
00:05:19,950 --> 00:05:23,280
Trulia so Trulia was the ideal kind of

146
00:05:23,280 --> 00:05:24,990
client to work with on something like

147
00:05:24,990 --> 00:05:27,240
this mainly because they were motivated

148
00:05:27,240 --> 00:05:30,060
to switch to SAS smart engineers really

149
00:05:30,060 --> 00:05:31,770
excited about the project so that always

150
00:05:31,770 --> 00:05:34,200
makes it easier but also they had a ton

151
00:05:34,200 --> 00:05:35,970
of technical debt you know like a lot of

152
00:05:35,970 --> 00:05:38,539
companies I feel like there's this some

153
00:05:38,539 --> 00:05:41,039
kind of like a successful company thing

154
00:05:41,039 --> 00:05:42,539
you get to a certain point where you

155
00:05:42,539 --> 00:05:44,340
have to actually deal with all the

156
00:05:44,340 --> 00:05:46,020
technical debt you acquired to actually

157
00:05:46,020 --> 00:05:48,389
achieve that success and that's sort of

158
00:05:48,389 --> 00:05:50,729
an ideal candidate for looking at a

159
00:05:50,729 --> 00:05:52,889
style guide and looking at a UI refactor

160
00:05:52,889 --> 00:05:54,270
and looking at performance issues

161
00:05:54,270 --> 00:05:55,860
because they have so much to gain from

162
00:05:55,860 --> 00:05:58,500
it not only in terms of the actual user

163
00:05:58,500 --> 00:06:00,870
experience but honestly on a site with a

164
00:06:00,870 --> 00:06:02,850
ton of legacy it just stinks to be a

165
00:06:02,850 --> 00:06:04,560
developer right you're not having a lot

166
00:06:04,560 --> 00:06:08,130
of fun working with that so this is an

167
00:06:08,130 --> 00:06:09,630
example that one of their engineering

168
00:06:09,630 --> 00:06:11,130
managers sent me when we were first

169
00:06:11,130 --> 00:06:12,840
talking about the project about why they

170
00:06:12,840 --> 00:06:14,580
wanted to get involved in it and I know

171
00:06:14,580 --> 00:06:17,010
it's really tiny sorry I just have a PNG

172
00:06:17,010 --> 00:06:18,900
of it but it says I've got the blues and

173
00:06:18,900 --> 00:06:20,820
the reason it says that is because every

174
00:06:20,820 --> 00:06:22,650
single blue on that page is actually a

175
00:06:22,650 --> 00:06:27,649
subtly different hex value

176
00:06:27,659 --> 00:06:29,939
so what Trulia chose to do is to convert

177
00:06:29,939 --> 00:06:31,979
their SRP their search results page

178
00:06:31,979 --> 00:06:33,809
mainly because it was already slated for

179
00:06:33,809 --> 00:06:35,249
a redesign so it's sort of a good

180
00:06:35,249 --> 00:06:37,469
candidate to start off building the

181
00:06:37,469 --> 00:06:39,449
style guide and I'm kind of gonna jump

182
00:06:39,449 --> 00:06:41,159
to the conclusion first so you know why

183
00:06:41,159 --> 00:06:43,080
you should care because I think that

184
00:06:43,080 --> 00:06:45,989
that matters the first thing is to think

185
00:06:45,989 --> 00:06:47,759
about real user measurements so if any

186
00:06:47,759 --> 00:06:49,919
of if you get any take away from what

187
00:06:49,919 --> 00:06:51,779
I'm talking about today and decide to

188
00:06:51,779 --> 00:06:54,689
try a style guide I would say first

189
00:06:54,689 --> 00:06:56,610
thing first you have to have a sense of

190
00:06:56,610 --> 00:06:58,169
what matters to your users and what

191
00:06:58,169 --> 00:06:59,849
matters you know what is the thing

192
00:06:59,849 --> 00:07:01,199
you're trying to improve so you can tell

193
00:07:01,199 --> 00:07:03,719
if you actually got there or not so

194
00:07:03,719 --> 00:07:04,979
Trulia has a bunch of metrics that

195
00:07:04,979 --> 00:07:06,599
matter to them but you know like

196
00:07:06,599 --> 00:07:08,939
Facebook's metric is how closely your

197
00:07:08,939 --> 00:07:11,129
social network on Facebook matches your

198
00:07:11,129 --> 00:07:12,989
social network in real life like that's

199
00:07:12,989 --> 00:07:14,519
excellent right because that really fits

200
00:07:14,519 --> 00:07:16,919
for their business but for everybody

201
00:07:16,919 --> 00:07:17,939
it's gonna be different

202
00:07:17,939 --> 00:07:20,849
it's it's not gonna be the same thing um

203
00:07:20,849 --> 00:07:23,159
so truly have found that their new HTML

204
00:07:23,159 --> 00:07:25,110
was about 48 percent smaller than it had

205
00:07:25,110 --> 00:07:27,839
been before we used a style guide they

206
00:07:27,839 --> 00:07:31,439
had a 21% faster load time this one I'm

207
00:07:31,439 --> 00:07:34,019
particularly happy with 60% faster time

208
00:07:34,019 --> 00:07:35,759
to first byte you know it's the worst

209
00:07:35,759 --> 00:07:37,319
possible user experience when they're

210
00:07:37,319 --> 00:07:39,209
sort of waiting for things to happen and

211
00:07:39,209 --> 00:07:40,829
they have that blank screen with nothing

212
00:07:40,829 --> 00:07:43,619
going on so 60 60 percent improvement

213
00:07:43,619 --> 00:07:47,039
and first bite really made me happy they

214
00:07:47,039 --> 00:07:49,019
were also able to reduce their unused

215
00:07:49,019 --> 00:07:52,469
CSS by about 135 Kb right so that's like

216
00:07:52,469 --> 00:07:54,809
that's more than a site's worth of CSS

217
00:07:54,809 --> 00:07:58,559
that wasn't even being used at all in

218
00:07:58,559 --> 00:08:00,449
terms of their results their search

219
00:08:00,449 --> 00:08:02,579
results page views went up by about 11%

220
00:08:02,579 --> 00:08:05,279
so that's huge right imagine the project

221
00:08:05,279 --> 00:08:07,079
product manager who you could say like I

222
00:08:07,079 --> 00:08:08,879
have this new fancy feature and if we do

223
00:08:08,879 --> 00:08:10,949
it the page views will go up by 11%

224
00:08:10,949 --> 00:08:14,219
they'd be like me me right but if you

225
00:08:14,219 --> 00:08:15,629
tell them it's the feature that's gonna

226
00:08:15,629 --> 00:08:17,039
be invisible and that if we do our job

227
00:08:17,039 --> 00:08:18,479
right no one will ever see that it ever

228
00:08:18,479 --> 00:08:20,039
happened then all the sudden they're

229
00:08:20,039 --> 00:08:22,469
like yeah kind of skeptical right but I

230
00:08:22,469 --> 00:08:23,459
think it's really important to remember

231
00:08:23,459 --> 00:08:25,169
that performance is a feature and when

232
00:08:25,169 --> 00:08:27,239
we do things that improve performance

233
00:08:27,239 --> 00:08:29,729
particularly in the UI layer we get

234
00:08:29,729 --> 00:08:32,729
really good user benefit and and it

235
00:08:32,729 --> 00:08:35,759
behaves like a new feature I found this

236
00:08:35,759 --> 00:08:37,079
one interesting too this is actually

237
00:08:37,079 --> 00:08:38,300
their property detail page

238
00:08:38,300 --> 00:08:40,580
and their pageviews went up by about 3%

239
00:08:40,580 --> 00:08:42,050
what's interesting there's we didn't

240
00:08:42,050 --> 00:08:44,240
touch that page it just happens to be in

241
00:08:44,240 --> 00:08:47,390
the flow to get to to get from the

242
00:08:47,390 --> 00:08:50,000
search results page right so even if you

243
00:08:50,000 --> 00:08:52,580
can just fix your top three pages in

244
00:08:52,580 --> 00:08:54,050
your site you can still get look across

245
00:08:54,050 --> 00:08:57,649
the board improvement in performance um

246
00:08:57,649 --> 00:08:59,300
truly also cares about some other things

247
00:08:59,300 --> 00:09:00,800
click throughs leads customer

248
00:09:00,800 --> 00:09:02,329
satisfaction and stuff like that and

249
00:09:02,329 --> 00:09:03,410
that's gonna be different for everyone

250
00:09:03,410 --> 00:09:06,050
what you care about you don't but every

251
00:09:06,050 --> 00:09:07,790
single one of those metrics actually

252
00:09:07,790 --> 00:09:11,060
bumped up after we started refactoring

253
00:09:11,060 --> 00:09:12,500
their site and implementing a style

254
00:09:12,500 --> 00:09:15,170
guide so you might kind of wonder if

255
00:09:15,170 --> 00:09:16,610
what does a style guide really have to

256
00:09:16,610 --> 00:09:19,220
do with this I think the important thing

257
00:09:19,220 --> 00:09:20,930
is that CSS actually is responsible for

258
00:09:20,930 --> 00:09:23,540
a ton of performance issues it blocks

259
00:09:23,540 --> 00:09:25,700
progressive rendering that's your blank

260
00:09:25,700 --> 00:09:27,440
white page until finally everything

261
00:09:27,440 --> 00:09:30,709
shows up it pulls in a ton of background

262
00:09:30,709 --> 00:09:32,269
images and if you've ever looked at a

263
00:09:32,269 --> 00:09:34,040
waterflow you'll see that a good chunk

264
00:09:34,040 --> 00:09:35,240
of what's happening on the web is

265
00:09:35,240 --> 00:09:38,779
actually images and content images aside

266
00:09:38,779 --> 00:09:39,980
that's a little bit different like

267
00:09:39,980 --> 00:09:42,260
that's a decision about you know where

268
00:09:42,260 --> 00:09:44,120
you want your product to be or something

269
00:09:44,120 --> 00:09:46,850
like that that's probably not my not my

270
00:09:46,850 --> 00:09:48,829
domain but if it's background images

271
00:09:48,829 --> 00:09:49,910
that's something when you can really

272
00:09:49,910 --> 00:09:52,370
make a big improvement

273
00:09:52,370 --> 00:09:54,770
CSS also correlates directly to render

274
00:09:54,770 --> 00:09:56,690
speed and it's gonna slow down your

275
00:09:56,690 --> 00:09:58,459
JavaScript and not necessarily in a way

276
00:09:58,459 --> 00:10:00,290
that you can be like that there that

277
00:10:00,290 --> 00:10:02,180
piece of CSS that slowed down my

278
00:10:02,180 --> 00:10:03,829
JavaScript but more in a way where like

279
00:10:03,829 --> 00:10:05,600
you click on something and it's just not

280
00:10:05,600 --> 00:10:07,610
instantaneous you know it's like a I

281
00:10:07,610 --> 00:10:11,209
don't know just sluggish I guess it also

282
00:10:11,209 --> 00:10:13,310
can cause janky scrolling and animations

283
00:10:13,310 --> 00:10:15,230
and that can be important too because

284
00:10:15,230 --> 00:10:16,279
there's nothing worse than something

285
00:10:16,279 --> 00:10:17,600
that's supposed to slide smoothly and

286
00:10:17,600 --> 00:10:19,160
actually jitters its way across the

287
00:10:19,160 --> 00:10:22,940
screen so a style guide can really help

288
00:10:22,940 --> 00:10:25,760
with this what we want to have is this

289
00:10:25,760 --> 00:10:27,350
like imagine we needed to have a rubber

290
00:10:27,350 --> 00:10:29,510
ducky component in our app and this was

291
00:10:29,510 --> 00:10:31,610
exactly what we needed we needed a blue

292
00:10:31,610 --> 00:10:35,240
eyed orange beaked rubber ducky um this

293
00:10:35,240 --> 00:10:37,519
makes a lot of sense but what we often

294
00:10:37,519 --> 00:10:39,440
have is much more like this right

295
00:10:39,440 --> 00:10:41,360
we have proliferation of rubber rubber

296
00:10:41,360 --> 00:10:43,490
ducky components until we end up having

297
00:10:43,490 --> 00:10:45,050
a something that just doesn't really

298
00:10:45,050 --> 00:10:46,680
make sense

299
00:10:46,680 --> 00:10:49,440
um so the first thing to do and I've

300
00:10:49,440 --> 00:10:50,850
talked about this before so I'm gonna go

301
00:10:50,850 --> 00:10:53,790
over it pretty quickly but feel free to

302
00:10:53,790 --> 00:10:55,140
see me afterwards if it's something you

303
00:10:55,140 --> 00:10:56,670
haven't heard about before and oh and

304
00:10:56,670 --> 00:10:59,250
I'll get more into it but the first

305
00:10:59,250 --> 00:11:00,450
thing you need to do is know what kind

306
00:11:00,450 --> 00:11:01,830
of duplication you have because that's

307
00:11:01,830 --> 00:11:03,450
gonna be your clues for what missing

308
00:11:03,450 --> 00:11:06,810
abstractions you need right everywhere

309
00:11:06,810 --> 00:11:08,850
that you find that your CSS is growing

310
00:11:08,850 --> 00:11:10,950
larger accidentally means oh crap

311
00:11:10,950 --> 00:11:12,540
there's an abstraction that's needed

312
00:11:12,540 --> 00:11:13,980
here that people don't have so they're

313
00:11:13,980 --> 00:11:16,860
writing it over and over you can use

314
00:11:16,860 --> 00:11:19,410
grep CSS lint has a secondary branch

315
00:11:19,410 --> 00:11:21,089
that'll do some duplication stuff where

316
00:11:21,089 --> 00:11:22,920
there's a new ruby gem out called CSS

317
00:11:22,920 --> 00:11:25,380
CSS which is a good way of figuring out

318
00:11:25,380 --> 00:11:28,290
what your your duplication was for truly

319
00:11:28,290 --> 00:11:31,529
oh we used grep it's easy it allowed us

320
00:11:31,529 --> 00:11:33,390
to include like all sort of the most

321
00:11:33,390 --> 00:11:35,550
crufty CSS because the more you put in

322
00:11:35,550 --> 00:11:37,680
the better you'll get a sense of what

323
00:11:37,680 --> 00:11:40,020
kind of bad duplication you have and

324
00:11:40,020 --> 00:11:42,450
where your abstractions are missing um

325
00:11:42,450 --> 00:11:43,920
so we grep for various selectors

326
00:11:43,920 --> 00:11:45,720
properties and values and a bunch of

327
00:11:45,720 --> 00:11:48,270
other stuff we also don't worry about it

328
00:11:48,270 --> 00:11:49,920
being perfect we just think about orders

329
00:11:49,920 --> 00:11:52,470
of magnitude so this is roughly what

330
00:11:52,470 --> 00:11:53,940
we're doing we're you know concatenate

331
00:11:53,940 --> 00:11:55,770
in all the CSS together and then we're

332
00:11:55,770 --> 00:11:58,410
running a very simple grep command now

333
00:11:58,410 --> 00:11:59,610
you can imagine that you could replace

334
00:11:59,610 --> 00:12:01,709
font size with some fancy regex that was

335
00:12:01,709 --> 00:12:02,850
going to make sure that there wasn't

336
00:12:02,850 --> 00:12:05,040
font size in a selector name or

337
00:12:05,040 --> 00:12:07,020
something like that I wouldn't bother I

338
00:12:07,020 --> 00:12:08,850
don't think it actually matters if you

339
00:12:08,850 --> 00:12:11,160
match you know a few extra elements then

340
00:12:11,160 --> 00:12:12,600
you then you should have if a hex value

341
00:12:12,600 --> 00:12:15,180
looks like an ID it just it honestly

342
00:12:15,180 --> 00:12:16,470
doesn't matter it's an orders of

343
00:12:16,470 --> 00:12:19,110
magnitude thing so here's some of the

344
00:12:19,110 --> 00:12:22,140
data that Trulia let me share and just

345
00:12:22,140 --> 00:12:24,900
super super cool that they did take a

346
00:12:24,900 --> 00:12:25,830
look at the margin and padding

347
00:12:25,830 --> 00:12:27,900
declarations so they've got three

348
00:12:27,900 --> 00:12:29,190
thousand nine hundred ninety three

349
00:12:29,190 --> 00:12:30,959
margin declarations in four thousand

350
00:12:30,959 --> 00:12:33,290
four hundred and also ninety three

351
00:12:33,290 --> 00:12:36,630
padding declarations that's so high

352
00:12:36,630 --> 00:12:39,209
right but that's actually fairly typical

353
00:12:39,209 --> 00:12:41,070
for what we find when we start digging

354
00:12:41,070 --> 00:12:43,860
into a UI that's been in existence for a

355
00:12:43,860 --> 00:12:45,899
few years and I see a few of you shaking

356
00:12:45,899 --> 00:12:47,430
your heads that I would say go grab your

357
00:12:47,430 --> 00:12:50,010
own style sheets before you judge you

358
00:12:50,010 --> 00:12:52,529
might be surprised at what you find

359
00:12:52,529 --> 00:12:54,720
again headings too and font sizes like

360
00:12:54,720 --> 00:12:57,990
those numbers they're they're high but

361
00:12:57,990 --> 00:12:59,310
they're they're just so much higher than

362
00:12:59,310 --> 00:12:59,930
they need to be

363
00:12:59,930 --> 00:13:02,660
to make a good UI that UI layer that's

364
00:13:02,660 --> 00:13:05,270
easy to work with another one that I

365
00:13:05,270 --> 00:13:07,399
always grep for is pound important right

366
00:13:07,399 --> 00:13:09,350
because this is like I don't know it's

367
00:13:09,350 --> 00:13:11,510
like the canary in the mine right the

368
00:13:11,510 --> 00:13:13,190
number of importance that you have is

369
00:13:13,190 --> 00:13:14,630
basically like people are getting to the

370
00:13:14,630 --> 00:13:15,800
point where they can't get done what

371
00:13:15,800 --> 00:13:16,850
they need to get done and so they're

372
00:13:16,850 --> 00:13:18,200
like I'll just throw that in there and

373
00:13:18,200 --> 00:13:19,190
we'll see what happens

374
00:13:19,190 --> 00:13:22,730
truly I had about 500 importance and

375
00:13:22,730 --> 00:13:24,260
that said to me like this is the moment

376
00:13:24,260 --> 00:13:26,029
we have to refactor this now it

377
00:13:26,029 --> 00:13:30,140
shouldn't wait even six months yeah and

378
00:13:30,140 --> 00:13:31,430
so there's some other numbers and I'll

379
00:13:31,430 --> 00:13:33,320
you know I'll post my slides later so

380
00:13:33,320 --> 00:13:36,740
you can check out the details so the

381
00:13:36,740 --> 00:13:38,149
other thing that we look for is not just

382
00:13:38,149 --> 00:13:39,860
code duplication but design and

383
00:13:39,860 --> 00:13:41,779
consistency often they'll be you know

384
00:13:41,779 --> 00:13:44,420
hundreds I mean for typography it'll be

385
00:13:44,420 --> 00:13:45,529
like three or four hundred different

386
00:13:45,529 --> 00:13:47,480
ways of having text treatments on the

387
00:13:47,480 --> 00:13:47,930
page

388
00:13:47,930 --> 00:13:49,790
there's no way to build that efficiently

389
00:13:49,790 --> 00:13:51,320
in code if you're given designs that

390
00:13:51,320 --> 00:13:54,230
have that many variations so we actually

391
00:13:54,230 --> 00:13:56,450
built a typography tool that allows us

392
00:13:56,450 --> 00:14:00,830
to find those variations and I'm going

393
00:14:00,830 --> 00:14:02,570
to try command F one and see if that

394
00:14:02,570 --> 00:14:08,060
works so we built a tool and it's right

395
00:14:08,060 --> 00:14:10,190
now a Firebug extension though we're

396
00:14:10,190 --> 00:14:11,750
we're definitely going to move it over

397
00:14:11,750 --> 00:14:16,220
to Chrome so we go into the Trulia web

398
00:14:16,220 --> 00:14:18,020
page and we click persist so that we can

399
00:14:18,020 --> 00:14:19,700
do several pages because this is again

400
00:14:19,700 --> 00:14:20,600
the kind of thing where you're going to

401
00:14:20,600 --> 00:14:22,040
want to have a lot of data not a little

402
00:14:22,040 --> 00:14:24,680
because it helps make decisions then you

403
00:14:24,680 --> 00:14:26,600
click generate report and it's gonna

404
00:14:26,600 --> 00:14:28,130
show you and I know it's really small

405
00:14:28,130 --> 00:14:29,990
sorry about that but all this stuff in

406
00:14:29,990 --> 00:14:32,240
the middle doesn't matter at all on the

407
00:14:32,240 --> 00:14:33,890
right hand side it shows you the actual

408
00:14:33,890 --> 00:14:35,720
font and the the wording that was found

409
00:14:35,720 --> 00:14:37,970
I mean that in the left-hand column it's

410
00:14:37,970 --> 00:14:39,770
gonna show you account for how many

411
00:14:39,770 --> 00:14:41,900
times that was found and then if I do a

412
00:14:41,900 --> 00:14:44,180
search and get to the search results

413
00:14:44,180 --> 00:14:48,860
page I can generate the report again and

414
00:14:48,860 --> 00:14:50,750
then you know we would do it for

415
00:14:50,750 --> 00:14:52,610
multiple pages if we were doing it on an

416
00:14:52,610 --> 00:14:55,400
actual site what's really cool about it

417
00:14:55,400 --> 00:14:57,050
is that you know I've had a lot of

418
00:14:57,050 --> 00:14:58,820
conversations with designers that end up

419
00:14:58,820 --> 00:15:00,920
feeling kind of unproductive where we're

420
00:15:00,920 --> 00:15:02,540
trying to say okay you can't have all of

421
00:15:02,540 --> 00:15:05,450
the typography you have to pick some it

422
00:15:05,450 --> 00:15:07,940
turns out if you put five designers in a

423
00:15:07,940 --> 00:15:09,800
room and you say do you want 13 pixels

424
00:15:09,800 --> 00:15:11,900
or 14 pixel font size they can debate

425
00:15:11,900 --> 00:15:13,050
that for like

426
00:15:13,050 --> 00:15:17,040
I do not have more but if you say do you

427
00:15:17,040 --> 00:15:19,830
want 13 pixels or 14 pixels and you've

428
00:15:19,830 --> 00:15:22,380
used 13 pixels 1400 times and you've

429
00:15:22,380 --> 00:15:25,440
used 14 pixels 23 times all the sudden

430
00:15:25,440 --> 00:15:27,180
there's data to back up those decisions

431
00:15:27,180 --> 00:15:28,950
they don't have to have you know make

432
00:15:28,950 --> 00:15:30,420
these amorphous and we wouldn't make

433
00:15:30,420 --> 00:15:32,910
decisions without data right so but we

434
00:15:32,910 --> 00:15:34,440
can help them have the data that they

435
00:15:34,440 --> 00:15:35,790
need to make the decisions that they

436
00:15:35,790 --> 00:15:39,390
have to make so that's something that's

437
00:15:39,390 --> 00:15:49,730
worked out well

438
00:15:49,740 --> 00:15:53,730
okay and so the output of that is you

439
00:15:53,730 --> 00:15:55,080
know a bunch of font sizes with their

440
00:15:55,080 --> 00:15:57,780
counts and really super useful for

441
00:15:57,780 --> 00:15:59,910
making decisions we also break it down

442
00:15:59,910 --> 00:16:01,650
by color in their counts you know you

443
00:16:01,650 --> 00:16:03,720
could spend days debating which is the

444
00:16:03,720 --> 00:16:05,280
exact right shade of blue but when you

445
00:16:05,280 --> 00:16:06,600
see that one of them was used thirteen

446
00:16:06,600 --> 00:16:08,010
hundred times and the others just a

447
00:16:08,010 --> 00:16:10,230
handful all the sudden the the blue

448
00:16:10,230 --> 00:16:12,540
decision is is quick like that right so

449
00:16:12,540 --> 00:16:14,550
that's that's where we're trying to go

450
00:16:14,550 --> 00:16:15,840
and you know what even if they decide

451
00:16:15,840 --> 00:16:17,580
that they actually are trying to move

452
00:16:17,580 --> 00:16:19,860
towards something that isn't isn't where

453
00:16:19,860 --> 00:16:21,330
the site is at now so they're saying

454
00:16:21,330 --> 00:16:23,550
well maybe we want that bright blue even

455
00:16:23,550 --> 00:16:24,930
though it's the least used now because

456
00:16:24,930 --> 00:16:26,970
that's where our design is going then in

457
00:16:26,970 --> 00:16:28,650
the engineering side you have an exact

458
00:16:28,650 --> 00:16:30,990
map of every time I find these five

459
00:16:30,990 --> 00:16:33,360
blues I should replace it with this blue

460
00:16:33,360 --> 00:16:34,980
and you don't have to have that back and

461
00:16:34,980 --> 00:16:37,230
forth discussion with design every

462
00:16:37,230 --> 00:16:38,460
single time you're trying to make an

463
00:16:38,460 --> 00:16:41,430
improvement to the performance um so we

464
00:16:41,430 --> 00:16:43,020
basically use some heuristics and some

465
00:16:43,020 --> 00:16:45,180
common sense to break it down and give

466
00:16:45,180 --> 00:16:48,030
them a list of the different typography

467
00:16:48,030 --> 00:16:49,590
they need and this is simplified

468
00:16:49,590 --> 00:16:51,090
obviously this is going to be for all

469
00:16:51,090 --> 00:16:53,280
the different components of the site but

470
00:16:53,280 --> 00:16:56,430
they get that and they can use that we

471
00:16:56,430 --> 00:16:58,170
also do it for buttons and so this is

472
00:16:58,170 --> 00:16:59,580
all the buttons that we found on the

473
00:16:59,580 --> 00:17:02,700
Trulia site right which is really really

474
00:17:02,700 --> 00:17:05,970
a lot like that it's just way too many

475
00:17:05,970 --> 00:17:08,160
shades of yellow and green and and blue

476
00:17:08,160 --> 00:17:10,470
and it's like every product manager just

477
00:17:10,470 --> 00:17:11,760
decided that they were gonna do their

478
00:17:11,760 --> 00:17:13,680
very own thing and luckily nobody made

479
00:17:13,680 --> 00:17:15,540
anything blink or magenta but it was

480
00:17:15,540 --> 00:17:18,930
pretty close so for each of those we

481
00:17:18,930 --> 00:17:20,610
basically sit with design and have them

482
00:17:20,610 --> 00:17:22,530
make some decisions for each thing they

483
00:17:22,530 --> 00:17:24,180
can choose to build it they can choose

484
00:17:24,180 --> 00:17:25,320
to replace it with something they've

485
00:17:25,320 --> 00:17:27,089
already decided to build or as a very

486
00:17:27,089 --> 00:17:28,910
distant third they can choose to

487
00:17:28,910 --> 00:17:31,770
redesign that thing we try not to choose

488
00:17:31,770 --> 00:17:33,540
the redesign option because it's far

489
00:17:33,540 --> 00:17:35,460
better to say let's just build it how it

490
00:17:35,460 --> 00:17:37,050
is now and then we can iterate with

491
00:17:37,050 --> 00:17:38,730
something real rather than have like

492
00:17:38,730 --> 00:17:40,950
long drawn-out design discussions about

493
00:17:40,950 --> 00:17:42,390
where the meaning of the button is that

494
00:17:42,390 --> 00:17:45,720
kind of thing um so you want to do this

495
00:17:45,720 --> 00:17:48,030
for all different component types and

496
00:17:48,030 --> 00:17:50,150
when you have you'll have something like

497
00:17:50,150 --> 00:17:55,560
this style guide

498
00:17:55,570 --> 00:18:01,910
so this is oops there we go so this is

499
00:18:01,910 --> 00:18:05,240
the this is the Trulia style guide that

500
00:18:05,240 --> 00:18:06,830
we built and so you'll see it's got you

501
00:18:06,830 --> 00:18:07,730
know all the different kinds of

502
00:18:07,730 --> 00:18:09,950
typography it gives an example of

503
00:18:09,950 --> 00:18:11,510
exactly what you'd need to put in the

504
00:18:11,510 --> 00:18:13,970
code in order to achieve that look and

505
00:18:13,970 --> 00:18:15,890
feel and so it becomes like little Lego

506
00:18:15,890 --> 00:18:17,540
right you're grabbing one of these and

507
00:18:17,540 --> 00:18:18,590
you're combining it with one of those

508
00:18:18,590 --> 00:18:20,540
and you put it all inside of a box like

509
00:18:20,540 --> 00:18:22,490
that and you can build whole different

510
00:18:22,490 --> 00:18:25,760
UIs that nobody planned on just by using

511
00:18:25,760 --> 00:18:27,230
these existing little pieces of

512
00:18:27,230 --> 00:18:29,510
functionality and so if I click on

513
00:18:29,510 --> 00:18:31,610
buttons you'll see that they were able

514
00:18:31,610 --> 00:18:34,580
to simplify down to oh and a at the top

515
00:18:34,580 --> 00:18:36,290
we tend to list all the different class

516
00:18:36,290 --> 00:18:37,820
names so that it's real clear to

517
00:18:37,820 --> 00:18:39,980
everybody what every piece of the UI is

518
00:18:39,980 --> 00:18:43,070
for and so then you'll see they were

519
00:18:43,070 --> 00:18:44,720
able to simplify down just into a

520
00:18:44,720 --> 00:18:47,300
primary button default button and then

521
00:18:47,300 --> 00:18:49,340
this sort of reddish danger button for

522
00:18:49,340 --> 00:18:52,310
delete and things like that so just by

523
00:18:52,310 --> 00:18:53,780
making these kinds of decisions they

524
00:18:53,780 --> 00:18:56,030
were able to really make it work better

525
00:18:56,030 --> 00:18:57,860
for them honestly there are tons of

526
00:18:57,860 --> 00:18:59,510
different component types including like

527
00:18:59,510 --> 00:19:01,580
whitespace classes and tabs and toggles

528
00:19:01,580 --> 00:19:03,380
and all the normal stuff that websites

529
00:19:03,380 --> 00:19:05,960
are made out of one important thing to

530
00:19:05,960 --> 00:19:08,090
keep in mind though is that you want to

531
00:19:08,090 --> 00:19:09,980
separate out the code that's for making

532
00:19:09,980 --> 00:19:12,110
your button have button as' which is you

533
00:19:12,110 --> 00:19:14,630
know solving all the ie bugs removing

534
00:19:14,630 --> 00:19:17,780
all the weird styling that that you're

535
00:19:17,780 --> 00:19:20,180
gonna have on buttons by default and put

536
00:19:20,180 --> 00:19:22,340
that into one class and then anything

537
00:19:22,340 --> 00:19:25,190
that makes it red or orange or whatever

538
00:19:25,190 --> 00:19:27,290
you want to put into another class it's

539
00:19:27,290 --> 00:19:28,760
sort of a worst case scenario where

540
00:19:28,760 --> 00:19:30,320
you've stuffed all that into one class

541
00:19:30,320 --> 00:19:31,760
and then every time you make a new kind

542
00:19:31,760 --> 00:19:32,930
of button you're having to say yeah but

543
00:19:32,930 --> 00:19:34,430
it's not like that yeah but it's not

544
00:19:34,430 --> 00:19:35,030
like that

545
00:19:35,030 --> 00:19:36,890
that's a lot of work and will lead to

546
00:19:36,890 --> 00:19:53,740
pretty inefficient code

547
00:19:53,750 --> 00:19:57,350
okay cool so that said how do we build a

548
00:19:57,350 --> 00:19:59,240
component well what's what's part of a

549
00:19:59,240 --> 00:20:02,000
component how is that going to work we

550
00:20:02,000 --> 00:20:04,400
have a specific component structure and

551
00:20:04,400 --> 00:20:05,780
part of the reason why we have it this

552
00:20:05,780 --> 00:20:07,550
way is because we want to break the

553
00:20:07,550 --> 00:20:11,360
dependency of styles on views basically

554
00:20:11,360 --> 00:20:15,980
when you tied it what did I do

555
00:20:15,980 --> 00:20:23,360
oh so basically when you have when you

556
00:20:23,360 --> 00:20:25,220
have your Styles dependent on your views

557
00:20:25,220 --> 00:20:27,140
there's no way for your CSS to be

558
00:20:27,140 --> 00:20:29,090
efficient at all so we kind of try to we

559
00:20:29,090 --> 00:20:32,060
could try to break that that link so

560
00:20:32,060 --> 00:20:33,740
what we have is a components directory

561
00:20:33,740 --> 00:20:35,570
and inside of that we're gonna have all

562
00:20:35,570 --> 00:20:37,310
the different kind of components boxes

563
00:20:37,310 --> 00:20:40,160
and form pieces and grids and lists and

564
00:20:40,160 --> 00:20:42,380
links and everything separated out that

565
00:20:42,380 --> 00:20:44,420
way if later in one of those turns out

566
00:20:44,420 --> 00:20:45,980
to be unnecessary it's super simple

567
00:20:45,980 --> 00:20:47,750
because it's very self-contained and

568
00:20:47,750 --> 00:20:50,450
everything you need to make a component

569
00:20:50,450 --> 00:20:52,310
is is right there

570
00:20:52,310 --> 00:20:54,380
we also found we'd like to have smaller

571
00:20:54,380 --> 00:20:56,420
files and I have to admit I went kicking

572
00:20:56,420 --> 00:20:57,890
and screaming to this because I kind of

573
00:20:57,890 --> 00:20:59,480
like to have everything all in one place

574
00:20:59,480 --> 00:21:01,430
and just kind of keep it all in my head

575
00:21:01,430 --> 00:21:04,700
and then my team grew and I realized

576
00:21:04,700 --> 00:21:06,320
that's ridiculous and we had crazy merge

577
00:21:06,320 --> 00:21:08,870
conflicts and so breaking things out

578
00:21:08,870 --> 00:21:10,430
into smaller files made that a little

579
00:21:10,430 --> 00:21:13,160
bit easier and so this is a snippet from

580
00:21:13,160 --> 00:21:14,750
the Box component you'll see that we

581
00:21:14,750 --> 00:21:18,350
have some sass for it and we have a

582
00:21:18,350 --> 00:21:19,760
small handlebars which is just the

583
00:21:19,760 --> 00:21:21,770
partial to make a box and then we have

584
00:21:21,770 --> 00:21:22,940
another handlebars which is its

585
00:21:22,940 --> 00:21:25,280
documentation and then we have a skin

586
00:21:25,280 --> 00:21:26,840
folder where we put in all those little

587
00:21:26,840 --> 00:21:28,880
like colors and borders and and stuff

588
00:21:28,880 --> 00:21:31,340
like that so keeping things a little bit

589
00:21:31,340 --> 00:21:34,490
organized some components are going to

590
00:21:34,490 --> 00:21:36,260
have associated JavaScript a lot of them

591
00:21:36,260 --> 00:21:38,510
don't but some will and so we keep that

592
00:21:38,510 --> 00:21:41,390
in the component folder as well we tend

593
00:21:41,390 --> 00:21:43,820
to have a component named Jas and then

594
00:21:43,820 --> 00:21:45,620
just saw a small file which is anything

595
00:21:45,620 --> 00:21:47,390
we need to initialize that particular

596
00:21:47,390 --> 00:21:49,610
component just trying to keep things

597
00:21:49,610 --> 00:21:51,410
clean I think there are a few places

598
00:21:51,410 --> 00:21:54,080
where we've made mistakes though I don't

599
00:21:54,080 --> 00:21:55,970
love having all the skins be in separate

600
00:21:55,970 --> 00:21:57,350
files often they end up incredibly

601
00:21:57,350 --> 00:21:58,820
simple so it feels like a lot of

602
00:21:58,820 --> 00:22:00,530
overhead to have those all be separate

603
00:22:00,530 --> 00:22:02,630
on the other hand if you're going to do

604
00:22:02,630 --> 00:22:04,280
some kind of fancy build process where

605
00:22:04,280 --> 00:22:05,690
you make sure stuffs being used before

606
00:22:05,690 --> 00:22:07,010
you build it into your style

607
00:22:07,010 --> 00:22:08,780
Sheetz having it separate could be an

608
00:22:08,780 --> 00:22:12,260
advantage so we basically and this is

609
00:22:12,260 --> 00:22:14,240
this was a terrible idea we have a giant

610
00:22:14,240 --> 00:22:16,160
JSON file that references all our

611
00:22:16,160 --> 00:22:17,840
components and it's a huge pain in the

612
00:22:17,840 --> 00:22:19,580
butt to work with and if a comma gets

613
00:22:19,580 --> 00:22:21,410
left out it's it's not working very

614
00:22:21,410 --> 00:22:23,450
nicely so we're gonna find a better way

615
00:22:23,450 --> 00:22:24,980
to do this which may just be smaller

616
00:22:24,980 --> 00:22:27,410
JSON files per component or something

617
00:22:27,410 --> 00:22:29,540
like that but that's one part that I

618
00:22:29,540 --> 00:22:31,100
think we definitely haven't solved that

619
00:22:31,100 --> 00:22:34,400
well yet we also import our component

620
00:22:34,400 --> 00:22:36,740
SAS files all into one larger one that

621
00:22:36,740 --> 00:22:38,660
we do separate out stuff related to

622
00:22:38,660 --> 00:22:41,300
spriting because it's a bit slower and

623
00:22:41,300 --> 00:22:43,100
we set up watchers to build everything

624
00:22:43,100 --> 00:22:45,560
automatically whenever the handlebar SAS

625
00:22:45,560 --> 00:22:47,720
or JavaScript are changed that was just

626
00:22:47,720 --> 00:22:49,880
basically a it stinks to have to

627
00:22:49,880 --> 00:22:52,040
constantly be saving this and reloading

628
00:22:52,040 --> 00:22:54,200
things and all that kind of thing so it

629
00:22:54,200 --> 00:22:57,170
saved us a bunch of time you're probably

630
00:22:57,170 --> 00:22:58,730
pretty comfortable with Watchers and

631
00:22:58,730 --> 00:23:00,290
build processes and templating so I'm

632
00:23:00,290 --> 00:23:01,820
not going to spend a ton of time on that

633
00:23:01,820 --> 00:23:03,860
I don't think that would be as much of a

634
00:23:03,860 --> 00:23:05,660
value add as as sort of talking about

635
00:23:05,660 --> 00:23:08,420
how we structure our SAS and to begin

636
00:23:08,420 --> 00:23:10,910
with that I need to tell you how I

637
00:23:10,910 --> 00:23:13,850
screwed it up to get started so the

638
00:23:13,850 --> 00:23:15,560
first thing was trying to make a gray

639
00:23:15,560 --> 00:23:18,620
rounded corner box and sort of realizing

640
00:23:18,620 --> 00:23:20,360
that sometimes your SAS output is a lot

641
00:23:20,360 --> 00:23:22,010
larger than you might think that it is

642
00:23:22,010 --> 00:23:24,590
that said I love SAS I wouldn't go back

643
00:23:24,590 --> 00:23:25,910
and we were able to make these

644
00:23:25,910 --> 00:23:28,490
performance improvements using SAS on

645
00:23:28,490 --> 00:23:30,410
the site but we did have to be sort of

646
00:23:30,410 --> 00:23:31,940
constantly vigilant and checking the

647
00:23:31,940 --> 00:23:34,160
output and making sure that SAS wasn't

648
00:23:34,160 --> 00:23:35,600
outputting something crazy because we'd

649
00:23:35,600 --> 00:23:38,930
combined things we didn't realize so a

650
00:23:38,930 --> 00:23:40,640
box is gonna need a clear fix right

651
00:23:40,640 --> 00:23:41,750
because you don't want

652
00:23:41,750 --> 00:23:43,580
if something's floated inside the box it

653
00:23:43,580 --> 00:23:45,410
just stick out the side or and you want

654
00:23:45,410 --> 00:23:47,840
it to trap margins and and things like

655
00:23:47,840 --> 00:23:49,730
that so we need both clear fix and

656
00:23:49,730 --> 00:23:53,270
actually new formatting context so let's

657
00:23:53,270 --> 00:23:55,610
think about what includes this is this

658
00:23:55,610 --> 00:23:57,860
is an example of a mixin to include over

659
00:23:57,860 --> 00:23:59,540
float clear fix and this is the

660
00:23:59,540 --> 00:24:01,460
overflow:hidden overflow:visible zoom

661
00:24:01,460 --> 00:24:03,200
one there are a ton of different ways to

662
00:24:03,200 --> 00:24:05,140
do clear fix this is just one of them

663
00:24:05,140 --> 00:24:07,910
and so then I can say below in my cool

664
00:24:07,910 --> 00:24:10,310
thing at include clear fix overflow and

665
00:24:10,310 --> 00:24:12,260
I'm automatically going to get all those

666
00:24:12,260 --> 00:24:14,900
property value pairs from clear fix

667
00:24:14,900 --> 00:24:18,380
copied down into my cool thing now I

668
00:24:18,380 --> 00:24:20,420
think you can imagine how this goes awry

669
00:24:20,420 --> 00:24:22,580
when you have my cool thing 1 2 3 & 4

670
00:24:22,580 --> 00:24:24,440
and you end up copying those property

671
00:24:24,440 --> 00:24:26,470
value pairs kind of all over the place

672
00:24:26,470 --> 00:24:29,180
especially in big teams especially when

673
00:24:29,180 --> 00:24:30,920
it's not all next to each other like

674
00:24:30,920 --> 00:24:33,530
that it definitely happens that we end

675
00:24:33,530 --> 00:24:35,990
up with a lot of sort of property value

676
00:24:35,990 --> 00:24:37,820
pair duplication and it doesn't me

677
00:24:37,820 --> 00:24:38,900
sometimes that's still going to be the

678
00:24:38,900 --> 00:24:40,760
right choice it's just about sort of

679
00:24:40,760 --> 00:24:42,790
being aware of it and making sure that

680
00:24:42,790 --> 00:24:45,080
it's the right trade-off in terms of

681
00:24:45,080 --> 00:24:50,030
file size and maintainability next up I

682
00:24:50,030 --> 00:24:51,800
want to talk about making tabs and and

683
00:24:51,800 --> 00:24:54,310
how I definitely screwed up making tabs

684
00:24:54,310 --> 00:24:58,910
so in the oCSS world tabs are just a

685
00:24:58,910 --> 00:25:01,580
kind of box and so I would just say tabs

686
00:25:01,580 --> 00:25:04,760
add extend box in SAS language in order

687
00:25:04,760 --> 00:25:06,590
to get all of a sort of box goodness

688
00:25:06,590 --> 00:25:10,460
without having to rewrite that and then

689
00:25:10,460 --> 00:25:12,380
I started writing the code specifically

690
00:25:12,380 --> 00:25:15,320
for tabs and I went a little bit nuts um

691
00:25:15,320 --> 00:25:18,890
it feels so good to make your SAS match

692
00:25:18,890 --> 00:25:21,380
your match your HTML exactly I'm like oh

693
00:25:21,380 --> 00:25:23,330
my god this is awesome which is

694
00:25:23,330 --> 00:25:24,740
ridiculous because I'm the queen of

695
00:25:24,740 --> 00:25:27,020
teeny-tiny selectors right but look what

696
00:25:27,020 --> 00:25:29,720
this output it it's terrible right so I

697
00:25:29,720 --> 00:25:32,120
saw this and I'm like oh wow right

698
00:25:32,120 --> 00:25:34,340
because you know there's only one a

699
00:25:34,340 --> 00:25:37,130
inside of that's basically making a tab

700
00:25:37,130 --> 00:25:39,020
I didn't need to say box head tab

701
00:25:39,020 --> 00:25:41,720
control Li a like that's such overkill

702
00:25:41,720 --> 00:25:43,460
that's not the selector that we need it

703
00:25:43,460 --> 00:25:45,800
all but for some reason writing SAS at

704
00:25:45,800 --> 00:25:47,690
least for me it felt really really good

705
00:25:47,690 --> 00:25:50,240
to do this so I have to sort of

706
00:25:50,240 --> 00:25:52,070
constantly watch myself and keep the

707
00:25:52,070 --> 00:25:53,810
result file open in another window so

708
00:25:53,810 --> 00:25:58,750
that I'm aware of my sort of bad habits

709
00:25:58,750 --> 00:26:01,010
another thing to notice is that SAS will

710
00:26:01,010 --> 00:26:03,050
output your line numbers and your and

711
00:26:03,050 --> 00:26:04,610
the file that it came from which is

712
00:26:04,610 --> 00:26:06,830
super helpful for debugging as well in

713
00:26:06,830 --> 00:26:08,120
the chrome dev tools you can actually

714
00:26:08,120 --> 00:26:10,670
get it to follow back the chain and give

715
00:26:10,670 --> 00:26:13,070
you the actual SAS file which is really

716
00:26:13,070 --> 00:26:16,370
useful so yeah super tempting to make

717
00:26:16,370 --> 00:26:18,560
the SAS match your HTML don't do it it's

718
00:26:18,560 --> 00:26:21,860
a really bad idea the SAS community came

719
00:26:21,860 --> 00:26:23,000
up with something called the inception

720
00:26:23,000 --> 00:26:24,950
rule and that

721
00:26:24,950 --> 00:26:27,830
to never go more than three levels deep

722
00:26:27,830 --> 00:26:29,930
and I think this is pretty good rule I

723
00:26:29,930 --> 00:26:31,550
would say two to three levels deep is

724
00:26:31,550 --> 00:26:32,990
probably as far as you want to go in

725
00:26:32,990 --> 00:26:35,270
most cases but yeah I think that's

726
00:26:35,270 --> 00:26:39,020
that's a helpful rule so how do we use

727
00:26:39,020 --> 00:26:42,860
SAS and also have good architecture the

728
00:26:42,860 --> 00:26:43,970
first thing is to build simple

729
00:26:43,970 --> 00:26:46,790
components first you're going to use

730
00:26:46,790 --> 00:26:47,930
those simple components when you're

731
00:26:47,930 --> 00:26:49,820
making the more complex ones so people

732
00:26:49,820 --> 00:26:51,320
often want to like jump in and like

733
00:26:51,320 --> 00:26:53,390
build tabs and accordions and all kinds

734
00:26:53,390 --> 00:26:56,120
of more complex UI stuff but it's better

735
00:26:56,120 --> 00:26:59,060
to save that until later we start with

736
00:26:59,060 --> 00:27:00,710
something like this it's a variables

737
00:27:00,710 --> 00:27:02,480
file and we look at it as kind of a

738
00:27:02,480 --> 00:27:05,390
configuration file for our SAS

739
00:27:05,390 --> 00:27:07,070
now you'll see warning warning warning

740
00:27:07,070 --> 00:27:09,080
never use this in your code this is

741
00:27:09,080 --> 00:27:11,240
because we do two layers of SAS SAS

742
00:27:11,240 --> 00:27:14,450
variables I don't like the idea of using

743
00:27:14,450 --> 00:27:16,880
like a dollar blue class throughout all

744
00:27:16,880 --> 00:27:19,640
of my SAS because like I said final

745
00:27:19,640 --> 00:27:21,440
final final design never seems to

746
00:27:21,440 --> 00:27:23,810
actually be the final design but we

747
00:27:23,810 --> 00:27:25,940
still liked the the power of getting to

748
00:27:25,940 --> 00:27:29,390
have these names which described exactly

749
00:27:29,390 --> 00:27:31,340
what we were getting out of it so we

750
00:27:31,340 --> 00:27:33,680
decided to do a two tiered approach to

751
00:27:33,680 --> 00:27:35,810
SAS variables the first one is this

752
00:27:35,810 --> 00:27:37,730
where we define all the basic colors and

753
00:27:37,730 --> 00:27:39,770
give them color names that match exactly

754
00:27:39,770 --> 00:27:42,500
what they do but rather than using these

755
00:27:42,500 --> 00:27:45,110
inside the inside the components

756
00:27:45,110 --> 00:27:47,030
themselves what we do is create this

757
00:27:47,030 --> 00:27:49,910
next level so this is four links and we

758
00:27:49,910 --> 00:27:51,470
have link color and that would be dollar

759
00:27:51,470 --> 00:27:53,450
blue and we have link hover color and

760
00:27:53,450 --> 00:27:55,250
that would be dollar green and that

761
00:27:55,250 --> 00:27:57,860
allows us to basically have the the nice

762
00:27:57,860 --> 00:28:00,140
easy readable thing and the consistency

763
00:28:00,140 --> 00:28:01,460
right because we know we're not going to

764
00:28:01,460 --> 00:28:02,750
have a hex value in there that's

765
00:28:02,750 --> 00:28:04,940
slightly different but it doesn't pepper

766
00:28:04,940 --> 00:28:07,220
our style sheets with variable names

767
00:28:07,220 --> 00:28:08,690
that are incredibly likely to change

768
00:28:08,690 --> 00:28:12,320
later so we do that for a bunch of

769
00:28:12,320 --> 00:28:14,570
different typography and we're using all

770
00:28:14,570 --> 00:28:16,370
the data that we're getting out of the

771
00:28:16,370 --> 00:28:18,560
of the component finder typography tool

772
00:28:18,560 --> 00:28:21,710
to end up building that so we do

773
00:28:21,710 --> 00:28:23,090
something like this where we have you

774
00:28:23,090 --> 00:28:24,920
know our h3 and we're going to include

775
00:28:24,920 --> 00:28:27,980
font size of 24 pixels one thing we

776
00:28:27,980 --> 00:28:29,090
found is that we're really loving

777
00:28:29,090 --> 00:28:32,710
working with REMS but

778
00:28:32,710 --> 00:28:35,019
it's a pain to be perfectly honest I

779
00:28:35,019 --> 00:28:36,220
don't want to be constantly thinking and

780
00:28:36,220 --> 00:28:37,570
calculating and not knowing what I'm

781
00:28:37,570 --> 00:28:41,110
getting out of it and so a girl who I

782
00:28:41,110 --> 00:28:44,289
work with Mobe whale on Twitter actually

783
00:28:44,289 --> 00:28:47,049
created these these mix-ins which have

784
00:28:47,049 --> 00:28:49,149
been really helpful for us it's a font

785
00:28:49,149 --> 00:28:51,129
size mixin and a calculate REM mixin

786
00:28:51,129 --> 00:28:53,529
this means that we can just input pixel

787
00:28:53,529 --> 00:28:55,480
values and it outputs the most modern

788
00:28:55,480 --> 00:28:57,159
version that we can with a pixel

789
00:28:57,159 --> 00:28:59,769
fallback and so we found that this is

790
00:28:59,769 --> 00:29:02,590
super helpful basically in the code you

791
00:29:02,590 --> 00:29:05,619
say @include font size of 16 pixels and

792
00:29:05,619 --> 00:29:08,559
that's going to both output 16 pixels as

793
00:29:08,559 --> 00:29:10,960
a backup value and output the REM value

794
00:29:10,960 --> 00:29:14,930
for better browsers that can support it

795
00:29:14,940 --> 00:29:17,230
so we do that for all different kinds of

796
00:29:17,230 --> 00:29:19,210
things I think at first we've sort of

797
00:29:19,210 --> 00:29:20,919
focused on colors and stuff like that

798
00:29:20,919 --> 00:29:22,090
but more and more we're pulling

799
00:29:22,090 --> 00:29:24,909
different things out of out of our files

800
00:29:24,909 --> 00:29:26,830
and putting it into variables it ends up

801
00:29:26,830 --> 00:29:29,409
feeling like it ends up feeling like a

802
00:29:29,409 --> 00:29:31,450
big configuration file where you can get

803
00:29:31,450 --> 00:29:33,369
things to turn out without making very

804
00:29:33,369 --> 00:29:35,529
many changes and in fact I think one of

805
00:29:35,529 --> 00:29:37,059
the things that Trulia designers really

806
00:29:37,059 --> 00:29:38,590
liked about it is that they saw this

807
00:29:38,590 --> 00:29:40,450
variable file and felt like they could

808
00:29:40,450 --> 00:29:42,100
really dig in and you know they're like

809
00:29:42,100 --> 00:29:43,659
wait I'm gonna change the color gray and

810
00:29:43,659 --> 00:29:44,919
started actually submitting pull

811
00:29:44,919 --> 00:29:47,440
requests which is awesome right because

812
00:29:47,440 --> 00:29:48,519
there's no reason to use engineering

813
00:29:48,519 --> 00:29:51,129
resources for you know a change in a

814
00:29:51,129 --> 00:29:53,499
color gray but if they'd had to dig into

815
00:29:53,499 --> 00:29:55,240
the deep components in order to do that

816
00:29:55,240 --> 00:29:56,830
they might not have felt like they could

817
00:29:56,830 --> 00:30:00,309
so that was pretty awesome so we also do

818
00:30:00,309 --> 00:30:01,840
things like declare the baseline height

819
00:30:01,840 --> 00:30:03,700
and base font size base font family

820
00:30:03,700 --> 00:30:05,470
things like that and those can be used

821
00:30:05,470 --> 00:30:08,619
by other other components later that

822
00:30:08,619 --> 00:30:10,869
want to be you know doing vertical

823
00:30:10,869 --> 00:30:13,960
rhythm and stuff like that so we do it

824
00:30:13,960 --> 00:30:15,490
for lists as well

825
00:30:15,490 --> 00:30:17,590
lists are super important and they're

826
00:30:17,590 --> 00:30:19,419
like you end up having more or less than

827
00:30:19,419 --> 00:30:20,950
pretty much anything else on your site

828
00:30:20,950 --> 00:30:23,169
and so yeah like that list up there

829
00:30:23,169 --> 00:30:24,999
homes for sale it's got a little gray

830
00:30:24,999 --> 00:30:27,580
line in between the items that list is

831
00:30:27,580 --> 00:30:29,740
on almost every site in the universe

832
00:30:29,740 --> 00:30:32,169
right it's just the color gray of the

833
00:30:32,169 --> 00:30:34,509
line will vary so there's a lot of this

834
00:30:34,509 --> 00:30:36,909
stuff I kind of feel like about 80% of

835
00:30:36,909 --> 00:30:38,559
all apps and sites are the same and then

836
00:30:38,559 --> 00:30:39,999
there's like a thin little layer which

837
00:30:39,999 --> 00:30:41,950
is actually what makes them them look

838
00:30:41,950 --> 00:30:45,220
different um so we do it for links as

839
00:30:45,220 --> 00:30:46,450
well so they ended up with

840
00:30:46,450 --> 00:30:48,249
default links and low-light links and

841
00:30:48,249 --> 00:30:50,350
forward links and backlinks and now they

842
00:30:50,350 --> 00:30:51,879
have those and they can plug them in in

843
00:30:51,879 --> 00:30:53,230
different places and make stuff out of

844
00:30:53,230 --> 00:30:55,539
them without needing to reinvent the

845
00:30:55,539 --> 00:30:57,159
wheel and recode their link color

846
00:30:57,159 --> 00:31:00,220
everywhere so we have a little

847
00:31:00,220 --> 00:31:02,259
teeny-tiny handlebars file per component

848
00:31:02,259 --> 00:31:04,570
that just basically applies the class

849
00:31:04,570 --> 00:31:06,220
names of all the different skins so that

850
00:31:06,220 --> 00:31:08,340
it can output properly to the library

851
00:31:08,340 --> 00:31:11,049
and then we're gonna again have

852
00:31:11,049 --> 00:31:13,179
variables for links so that later if we

853
00:31:13,179 --> 00:31:14,739
want to change them there's no need to

854
00:31:14,739 --> 00:31:16,899
like really dig into the into the

855
00:31:16,899 --> 00:31:20,320
component we also found that it helped

856
00:31:20,320 --> 00:31:21,909
to build three different layout

857
00:31:21,909 --> 00:31:24,669
mechanisms one wasn't enough and I think

858
00:31:24,669 --> 00:31:25,899
a lot of people will be like oh do you

859
00:31:25,899 --> 00:31:27,429
like grids or do you like inline and I

860
00:31:27,429 --> 00:31:29,950
say I actually think you need both in

861
00:31:29,950 --> 00:31:34,090
different contexts so we build grids a24

862
00:31:34,090 --> 00:31:36,549
based system this is super useful like

863
00:31:36,549 --> 00:31:40,029
if you have a lot of floats and

864
00:31:40,029 --> 00:31:42,609
positioning and widths in your in your

865
00:31:42,609 --> 00:31:44,590
CSS when you go and grep it that means

866
00:31:44,590 --> 00:31:46,210
that you need a grid system probably

867
00:31:46,210 --> 00:31:49,090
rather badly and so having a grid system

868
00:31:49,090 --> 00:31:50,859
means that people who don't necessarily

869
00:31:50,859 --> 00:31:53,049
understand every in and out of CSS

870
00:31:53,049 --> 00:31:55,179
layout can start making new cool pages

871
00:31:55,179 --> 00:31:57,460
without having to get exactly how every

872
00:31:57,460 --> 00:32:00,549
bit of CSS works so the way that we did

873
00:32:00,549 --> 00:32:02,289
that shoots getting cut off at the top

874
00:32:02,289 --> 00:32:04,210
but I'll tell you about it and we

875
00:32:04,210 --> 00:32:06,039
created a grid where you can input the

876
00:32:06,039 --> 00:32:07,720
number of columns that you want because

877
00:32:07,720 --> 00:32:09,369
we found that from site to site it

878
00:32:09,369 --> 00:32:11,590
actually varied and some people were ok

879
00:32:11,590 --> 00:32:14,259
with 12 but a lot actually needed 24 we

880
00:32:14,259 --> 00:32:16,840
had one request for 61 but I said no

881
00:32:16,840 --> 00:32:18,489
because it's divisible by approximately

882
00:32:18,489 --> 00:32:22,210
nothing umm so yeah the number of

883
00:32:22,210 --> 00:32:23,649
columns are gonna have is going to vary

884
00:32:23,649 --> 00:32:26,320
and so this takes two parameters number

885
00:32:26,320 --> 00:32:29,139
of columns and your gutter size and so

886
00:32:29,139 --> 00:32:30,639
those are those are things that you can

887
00:32:30,639 --> 00:32:32,320
basically output any grid system you

888
00:32:32,320 --> 00:32:36,159
want and those again are in variables so

889
00:32:36,159 --> 00:32:37,659
that you can change them without needing

890
00:32:37,659 --> 00:32:39,279
to muck into the guts of how that

891
00:32:39,279 --> 00:32:42,700
component is working finally we also

892
00:32:42,700 --> 00:32:44,590
have a media block which lets you layout

893
00:32:44,590 --> 00:32:47,109
images with text and an inline list that

894
00:32:47,109 --> 00:32:48,429
lets you layout things when you need

895
00:32:48,429 --> 00:32:50,109
vertical alignment and so with those

896
00:32:50,109 --> 00:32:52,869
three pieces of layout you hardly ever

897
00:32:52,869 --> 00:32:56,180
have to write anymore floats again

898
00:32:56,180 --> 00:32:58,070
the biggest thing with style guides is

899
00:32:58,070 --> 00:32:59,390
that you're making it easier to do the

900
00:32:59,390 --> 00:33:00,770
right thing than it is to do the wrong

901
00:33:00,770 --> 00:33:02,630
thing people are always going to have a

902
00:33:02,630 --> 00:33:05,120
tendency to go back to views based CSS

903
00:33:05,120 --> 00:33:06,470
anytime they can because it's the

904
00:33:06,470 --> 00:33:07,790
comfortable path it's how we've been

905
00:33:07,790 --> 00:33:10,280
doing it for a long time but having a

906
00:33:10,280 --> 00:33:12,080
style guide helps break that connection

907
00:33:12,080 --> 00:33:13,580
between your view and your button so

908
00:33:13,580 --> 00:33:15,710
that your button can live in a modal or

909
00:33:15,710 --> 00:33:18,290
it can live in a page or really anywhere

910
00:33:18,290 --> 00:33:21,830
that you need it to so the takeaways are

911
00:33:21,830 --> 00:33:23,600
that well clearly this was a group

912
00:33:23,600 --> 00:33:25,370
effort a lot of things change to make

913
00:33:25,370 --> 00:33:27,710
these metrics move design style guide

914
00:33:27,710 --> 00:33:30,260
SAS UI layer improvements as well as a

915
00:33:30,260 --> 00:33:33,170
bit of server-side cleanup and I think

916
00:33:33,170 --> 00:33:34,490
the other takeaway is that SAS really

917
00:33:34,490 --> 00:33:36,110
can be made to be performant we just had

918
00:33:36,110 --> 00:33:37,610
to be super vigilant about what the

919
00:33:37,610 --> 00:33:39,470
output is going to be like and make sure

920
00:33:39,470 --> 00:33:40,910
it makes sense to be sending that over

921
00:33:40,910 --> 00:33:43,760
the wire and finally good performance as

922
00:33:43,760 --> 00:33:46,070
a feature if you can get an 11%

923
00:33:46,070 --> 00:33:48,310
pageviews bump from just a page that

924
00:33:48,310 --> 00:33:51,200
that's changed performance wise I think

925
00:33:51,200 --> 00:33:52,610
that that's well worth taking to a

926
00:33:52,610 --> 00:33:53,690
product manager and having a

927
00:33:53,690 --> 00:33:56,660
conversation about all of the code that

928
00:33:56,660 --> 00:33:58,450
I talked about is available on github

929
00:33:58,450 --> 00:34:02,330
it's under oo CSS under my username

930
00:34:02,330 --> 00:34:04,550
stubborn Ella and I will tweet and post

931
00:34:04,550 --> 00:34:07,430
the slides so that you can get that URL

