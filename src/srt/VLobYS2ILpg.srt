1
00:00:16,370 --> 00:00:22,650
well hello everyone my name is Reynoso will develop from 

2
00:00:22,650 --> 00:00:27,509
front-end I worked at mercadolibre a little over a year ago I think a

3
00:00:27,509 --> 00:00:31,649
little my role as a front-end developer in the free market, both good me and

4
00:00:31,649 --> 00:00:35,370
my colleagues have a lot of responsibility because everything

5
00:00:35,370 --> 00:00:39,239
we do ends up impacting an unimaginable number of users for whom

6
00:00:39,239 --> 00:00:43,440
do not know free market we are the platform the leader in commerce in

7
00:00:43,440 --> 00:00:47,730
latin america and we have a lot of visits all the time so everything

8
00:00:47,730 --> 00:00:53,750
what we end up doing impacts an amount as I was saying incredible

9
00:00:53,750 --> 00:00:58,130
So I think we have a motto or try to live a motto a

10
00:00:58,130 --> 00:01:03,210
goal you feel please and all things and most

11
00:01:03,210 --> 00:01:05,700
important for us to always put the needs of the user

12
00:01:05,700 --> 00:01:10,159
first even above ours as developers

13
00:01:10,159 --> 00:01:14,149
and speaking of users and always for more first a little bit comes

14
00:01:14,149 --> 00:01:18,829
related so I want to tell you there I think talking about users and

15
00:01:18,829 --> 00:01:24,079
happy users I think well I think we all know what a user is

16
00:01:24,079 --> 00:01:28,670
happy we all want to be happy users and a happy user I think that

17
00:01:28,670 --> 00:01:32,149
they love to have a website or fast, that is, even if they are part of a website or

18
00:01:32,149 --> 00:01:36,289
fast a happy user but we really know

19
00:01:36,289 --> 00:01:40,670
which is a fast website we call a fast website

20
00:01:40,670 --> 00:01:44,600
here I distinguish from two categories on the one hand that the site is literally

21
00:01:44,600 --> 00:01:49,310
fast, that is, let's say fast loading, the loading times are short and for the

22
00:01:49,310 --> 00:01:52,189
another side is that the user perceives that the site is fast which does not mean

23
00:01:52,189 --> 00:01:57,350
the site is fast but the user something happens to him what

24
00:01:57,350 --> 00:02:03,920
understand that the site itself is fast and now that keyword comes in which is

25
00:02:03,920 --> 00:02:07,620
perception speaking a little bit of perception I

26
00:02:07,620 --> 00:02:12,900
would like us to go back to the year 993 jakob nielsen which is a group of

27
00:02:12,900 --> 00:02:17,010
toys for those who don't know him they told us one of his books a little bit

28
00:02:17,010 --> 00:02:22,170
about limits in perception, that is, how the user reacts over time to

29
00:02:22,170 --> 00:02:26,520
the response for example an application or a website

30
00:02:26,520 --> 00:02:30,680
about these times in perception are breaking points

31
00:02:30,680 --> 00:02:36,330
the first one is 100 milliseconds 0.1 seconds which is in which the user goes

32
00:02:36,330 --> 00:02:39,750
to feel that the response you are receiving is instantaneous

33
00:02:39,750 --> 00:02:43,770
then we have a second which is from this point where we start a little

34
00:02:43,770 --> 00:02:48,750
to give the user's attention his train of thought is going to start to stray

35
00:02:48,750 --> 00:02:52,540
and and then it's already the 10 second limit

36
00:02:52,540 --> 00:02:56,560
that if we really still have a user who is interested in complying

37
00:02:56,560 --> 00:03:00,370
with the aim that I was wanting to do grace we will have lost

38
00:03:00,370 --> 00:03:04,420
completely already start to even feel frustration about what you're having

39
00:03:04,420 --> 00:03:07,989
performed I think we were all there I don't know who has endured and for today 10

40
00:03:07,989 --> 00:03:13,090
seconds with a blank page then us understanding what they are

41
00:03:13,090 --> 00:03:16,870
our limits and how the user understands and reacts to this I think that

42
00:03:16,870 --> 00:03:20,050
a little bit we can realize where where we want more or less serves

43
00:03:20,050 --> 00:03:25,490
showing him some kind of visual acid I think this happens around the

44
00:03:25,490 --> 00:03:30,069
second the second we have to give the user give give

45
00:03:30,069 --> 00:03:33,550
a wake up call that something is happening

46
00:03:33,550 --> 00:03:37,489
ok understood more or less perception and

47
00:03:37,489 --> 00:03:42,230
the times we have in our pothole let's say and let's see how we can

48
00:03:42,230 --> 00:03:47,269
optimize for that we have to we have to understand what is going on we have

49
00:03:47,269 --> 00:03:51,230
that knowing what is happening with rendering here is a little bit that is

50
00:03:51,230 --> 00:03:54,530
what is render impact we know we are talking

51
00:03:54,530 --> 00:03:58,760
so well what are we really talking about in very general terms

52
00:03:58,760 --> 00:04:02,030
basically that is for example we organize an action click a link

53
00:04:02,030 --> 00:04:07,550
whatever we get a url and we give sit on what happens up to what the

54
00:04:07,550 --> 00:04:11,540
browser performs until complete rendering on screen to our page

55
00:04:11,540 --> 00:04:16,519
web for example in very general terms but

56
00:04:16,519 --> 00:04:20,480
it is simply the path that the browser takes is a series of

57
00:04:20,480 --> 00:04:26,000
events that meet to reach this goal and that's in very terms

58
00:04:26,000 --> 00:04:30,950
generic but what is this all about let's do the steps one by one are

59
00:04:30,950 --> 00:04:35,210
seven steps they perform to fulfill the rendering puff and now we are going to see

60
00:04:35,210 --> 00:04:37,730
there how to give criticism to the render impact that only they have also

61
00:04:37,730 --> 00:04:43,490
heard first thing basically going to do is

62
00:04:43,490 --> 00:04:46,939
generate a network request out a lot of things don't happen there's a in that

63
00:04:46,939 --> 00:04:50,990
place you have a cpi connection it is good then finally send

64
00:04:50,990 --> 00:04:56,119
http request here between a little and a little we have

65
00:04:56,119 --> 00:04:59,419
about 600 milliseconds in which we don't have too much control

66
00:04:59,419 --> 00:05:03,280
about what's going on ok let's imagine everything is fine with

67
00:05:03,280 --> 00:05:07,560
the request the service what it is going to do is give us an answer

68
00:05:07,560 --> 00:05:13,500
depending on our role a little as you want to have a little part in what

69
00:05:13,500 --> 00:05:18,180
the answer may take time but well let's imagine it helps Serbian already

70
00:05:18,180 --> 00:05:22,710
replied gave us in html now a few advance what would be the critic

71
00:05:22,710 --> 00:05:26,150
rendering for the critical part that the user sorry that the browser

72
00:05:26,150 --> 00:05:31,020
meets to reach the goal of rendering on screen and all this

73
00:05:31,020 --> 00:05:35,990
starts with the html processing I imagine we have the answer that we

74
00:05:35,990 --> 00:05:39,830
gave are 8000 is super simple what the browser is going to be it is going to be processed

75
00:05:39,830 --> 00:05:45,499
from top to bottom what you need to do is translate it the

76
00:05:45,499 --> 00:05:50,569
browser what it will do then is generate the gift to everyone I think we know

77
00:05:50,569 --> 00:05:54,569
what is it is a node map in which

78
00:05:54,569 --> 00:05:58,830
going to put together all those connections what it will be then is

79
00:05:58,830 --> 00:06:01,289
translate for example is in any such encounter begins

80
00:06:01,289 --> 00:06:05,520
voluntary title markets etc converts them into new maps in the

81
00:06:05,520 --> 00:06:10,379
Sunday there will come a point that for example find a tag of the link with

82
00:06:10,379 --> 00:06:16,020
a reference an external css resource what you're going to do at this point is going to

83
00:06:16,020 --> 00:06:20,580
slow down this process which is doing the html processing and once you

84
00:06:20,580 --> 00:06:26,369
receives the response from the css then it will begin to process what happened here is

85
00:06:26,369 --> 00:06:33,250
what the browser understands is what do you need that to render in

86
00:06:33,250 --> 00:06:36,639
screen so what it does is brake absolutely what it's doing is to

87
00:06:36,639 --> 00:06:43,060
what we call blogging and then start processing and it works

88
00:06:43,060 --> 00:06:47,020
pretty similar with html to have all the rules all the instructions

89
00:06:47,020 --> 00:06:51,250
and it is going to be turning them into other more good others like the one that is the

90
00:06:51,250 --> 00:06:58,040
session in which it is good will also end with everything processed in nodes

91
00:06:58,040 --> 00:07:01,370
one is that I end that one is going to go back to the previous process or is going to

92
00:07:01,370 --> 00:07:07,640
continue processing the html surely the other css is in a process

93
00:07:07,640 --> 00:07:11,780
it will re-process it will come back until it ends other things than what

94
00:07:11,780 --> 00:07:16,430
in the render they are good there is also a script that is both an external resource and

95
00:07:16,430 --> 00:07:24,450
something internal and pretty mental for example and a such for example good once you

96
00:07:24,450 --> 00:07:29,040
it has finished processing the html what will happen is the following

97
00:07:29,040 --> 00:07:33,960
is going to start generating around wheat that we only hear the

98
00:07:33,960 --> 00:07:37,380
name already tells us a lot on the one hand that there are 3 is going to tell us that their

99
00:07:37,380 --> 00:07:42,720
node map too and the randers is the part of it is actually what is going

100
00:07:42,720 --> 00:07:48,030
to finish rounding what is visible on the screen so here in the render

101
00:07:48,030 --> 00:07:50,520
tree what you are going to do is combine the other two trees that you generated

102
00:07:50,520 --> 00:07:55,710
previously and going to combine or unify relationships

103
00:07:55,710 --> 00:08:00,750
they have each other for that in the randers and they will end up locating

104
00:08:00,750 --> 00:08:03,780
all the things that are going to be visible and I insist what is inside

105
00:08:03,780 --> 00:08:07,380
body and well there are some parks that are included for example that will never

106
00:08:07,380 --> 00:08:11,840
be render leds on screens i don't know all write all you are

107
00:08:11,840 --> 00:08:17,010
etcetera and apart as its name says it is what it is to render on screen and

108
00:08:17,010 --> 00:08:20,670
we are also combining the ss instructions there are things that are going to

109
00:08:20,670 --> 00:08:26,400
exclude with elements of which they are in the gift by excluding from rendering the

110
00:08:26,400 --> 00:08:29,370
render tree like everything you have display not for example it will not end

111
00:08:29,370 --> 00:08:33,090
appearing changes one is that it already has everything processed that

112
00:08:33,090 --> 00:08:36,570
This is what will end up rendering on the screen, a stage of the

113
00:08:36,570 --> 00:08:40,380
layout and it is also known as read flow which basically what is going to

114
00:08:40,380 --> 00:08:44,320
do is size everything in the newport is going to

115
00:08:44,320 --> 00:08:48,700
interpret all according to the rules that all elements have applied

116
00:08:48,700 --> 00:08:54,790
going to calculate the positions etcetera and all the sizes all this part of

117
00:08:54,790 --> 00:08:57,550
processing once you have it ready and super cooked what you will do

118
00:08:57,550 --> 00:09:01,240
is to paint it on screen it sounds very simple but these good times can

119
00:09:01,240 --> 00:09:04,330
take more or less we know there are properties etc that are a little bit more

120
00:09:04,330 --> 00:09:09,750
expensive to paint than others but well ultimately everything will end up painted

121
00:09:09,750 --> 00:09:13,540
ok until we understand a bit what it is

122
00:09:13,540 --> 00:09:16,720
the process ends here, finally we will have content

123
00:09:16,720 --> 00:09:19,990
visual on the screen one is that we understand that this is all

124
00:09:19,990 --> 00:09:23,190
we understood which also with that part is critical that is to say everything that was

125
00:09:23,190 --> 00:09:28,300
after the answer forwards there is everything that does not itself

126
00:09:28,300 --> 00:09:32,020
to render on screen once we already understand more or less

127
00:09:32,020 --> 00:09:35,920
how these steps work and develop we can see how we can

128
00:09:35,920 --> 00:09:38,220
optimize

129
00:09:38,430 --> 00:09:42,040
[Music] these are a couple of tips, that is,

130
00:09:42,040 --> 00:09:46,590
very basic things surely many of these things are already doing

131
00:09:46,590 --> 00:09:53,010
but well they will end up helping us to save some moments in the load by

132
00:09:53,010 --> 00:09:57,660
one side let's try to pack our assets we already know that if it is long dorca

133
00:09:57,660 --> 00:10:01,410
Once you find something, what you are going to do is stop everything and go find it.

134
00:10:01,410 --> 00:10:04,200
we give it as few opportunities as possible so that we will finish it

135
00:10:04,200 --> 00:10:08,220
saving a little time, surely what is happening today is that we have the

136
00:10:08,220 --> 00:10:11,640
winds on the one hand our own things on the other and the truth that no

137
00:10:11,640 --> 00:10:15,140
we are benefiting, preferably having everything packaged in the minimum quantity

138
00:10:15,140 --> 00:10:21,529
possible and that nobody now less request on the other hand

139
00:10:21,529 --> 00:10:26,540
this is great the remains are not yet many standards but it is good

140
00:10:26,540 --> 00:10:30,439
so that they investigate them so that they are taking them into account basically what

141
00:10:30,439 --> 00:10:33,319
they are going to do is indicate value when using things that we are going to end up needing

142
00:10:33,319 --> 00:10:36,670
in the future, so one of the processes will be anticipated

143
00:10:36,670 --> 00:10:41,360
investigate pri with the dns perfetti and pri what now we are going to see a

144
00:10:41,360 --> 00:10:46,329
they can give us a little hand well this is super audio

145
00:10:46,329 --> 00:10:51,129
let's try whenever we can what obviously goes through this basically is

146
00:10:51,129 --> 00:10:56,230
the advice let's not write on the gel and lastly

147
00:10:56,230 --> 00:11:00,730
means more difficult we see where possible all our assets this we

148
00:11:00,730 --> 00:11:03,850
going to save bytes by whatever or translate in time

149
00:11:03,850 --> 00:11:06,480
okay

150
00:11:07,300 --> 00:11:11,870
Hence, as the criticism of the impact follows, we saw a little like

151
00:11:11,870 --> 00:11:15,070
optimize it but well I promised them that I would

152
00:11:15,070 --> 00:11:19,450
come to talk about dss and how it is impacted in performance so if

153
00:11:19,450 --> 00:11:22,660
they remember a little bit of what I told them at the beginning of the two classes

154
00:11:22,660 --> 00:11:26,759
of quick websites the first part would come as meeting the

155
00:11:26,759 --> 00:11:31,589
first point is to make the site really faster and I

156
00:11:31,589 --> 00:11:34,350
I think the part of is essence that I am going to tell you now plays for the second

157
00:11:34,350 --> 00:11:38,490
side that is to deceive the user's perception a little to make him

158
00:11:38,490 --> 00:11:42,400
believe that the site really really is a little bit faster

159
00:11:42,400 --> 00:11:48,120
this is where the day comes to save us criticize the css

160
00:11:49,699 --> 00:11:54,329
this is a technique before starting to tell you well what

161
00:11:54,329 --> 00:12:00,209
are treated I would like to make a clarification because many times we are

162
00:12:00,209 --> 00:12:03,029
the first one that we are repeating criticizing all the time and it is super

163
00:12:03,029 --> 00:12:08,459
confusing on the other hand we are talking about they criticize css they are criticizing peace not

164
00:12:08,459 --> 00:12:11,699
there are a lot of things that end up mixing so much what

165
00:12:11,699 --> 00:12:17,130
we are really talking then to critical path basically

166
00:12:17,130 --> 00:12:20,730
We are talking about the path that the browser travels to meet the

167
00:12:20,730 --> 00:12:24,870
objective of rendering css or just the name tells us we are within the path

168
00:12:24,870 --> 00:12:30,960
of the route and on the other hand critic ss is the technique we have to improve

169
00:12:30,960 --> 00:12:33,720
that journey we always try to think of it as

170
00:12:33,720 --> 00:12:38,100
that one goes above the other improving and improving the path and also

171
00:12:38,100 --> 00:12:41,910
we test is critical they sound like super negative it sounds like a bad thing but not

172
00:12:41,910 --> 00:12:46,050
It is the truth that it is not, it is simply a synonym of what

173
00:12:46,050 --> 00:12:50,460
it would be a vital necessary thing if you want you can think of it as vital

174
00:12:50,460 --> 00:12:55,290
ccs instead of criticizing so as not to get so confused with the names but

175
00:12:55,290 --> 00:12:59,570
well now let's see why it is called criticism etc

176
00:12:59,570 --> 00:13:02,990
think for example well this is the product page on mercadolibre that

177
00:13:02,990 --> 00:13:07,670
is what the user is going to give in the first stage this what I like to call it the

178
00:13:07,670 --> 00:13:12,080
initial screen what the user is the first thing they will see when they enter

179
00:13:12,080 --> 00:13:17,780
the page that is looking at this in the publishing world is known as the voice

180
00:13:17,780 --> 00:13:21,920
folk only also know it that way basically what we want

181
00:13:21,920 --> 00:13:25,370
do with this technique if this is the first thing you will see the

182
00:13:25,370 --> 00:13:29,990
user is the only thing we should load for which our styles

183
00:13:29,990 --> 00:13:34,520
critics or our vital or necessary styles are these only the ones that

184
00:13:34,520 --> 00:13:37,379
meet this part this portion of the view port

185
00:13:37,379 --> 00:13:41,819
that's why I think the translation would be like the necessary styles for our

186
00:13:41,819 --> 00:13:46,350
view of the web so hello let's imagine we already defined which

187
00:13:46,350 --> 00:13:51,720
these are the styles we have super cooked are these then I said

188
00:13:51,720 --> 00:13:55,490
the only thing we have to send to the browser so that we can learn and be

189
00:13:55,490 --> 00:13:59,790
then the only thing we should load in the head are the only styles the

190
00:13:59,790 --> 00:14:03,180
critical styles now and then if we think about

191
00:14:03,180 --> 00:14:07,770
a second if we see a little bit of when we talk about rendering peace and what

192
00:14:07,770 --> 00:14:13,200
block if we have these styles in a separate band but no file

193
00:14:13,200 --> 00:14:17,880
external we would be a little behind in the times so I think that

194
00:14:17,880 --> 00:14:21,420
what we are going to have to do is the oversold many people don't

195
00:14:21,420 --> 00:14:25,800
like it and they always told us not to do that is to put styles online in

196
00:14:25,800 --> 00:14:31,790
the gel this must be the reaction of many

197
00:14:32,050 --> 00:14:37,920
because before moving on why about the rest of our styles

198
00:14:37,950 --> 00:14:43,149
before that let's see why we think the second thing basically what we don't want

199
00:14:43,149 --> 00:14:46,209
is that the browser has absolutely everything necessary

200
00:14:46,209 --> 00:14:50,410
if we leaving the styles in girl it will already have everything in the first html that

201
00:14:50,410 --> 00:14:54,670
receive so the rendering time is going to be much less

202
00:14:54,670 --> 00:14:58,450
Now what happens with the rest of our styles, that is, if the user

203
00:14:58,450 --> 00:15:02,950
put to interact will see content that was without studying which is not what

204
00:15:02,950 --> 00:15:07,870
What we want here is where the game comes in a little javascript magic that

205
00:15:07,870 --> 00:15:11,589
basically what we want to do is help us because only

206
00:15:11,589 --> 00:15:15,279
we put in the critical styles in the head what we are going to do is that when

207
00:15:15,279 --> 00:15:19,360
the page finishes everything to download is to look for the rest of our styles and

208
00:15:19,360 --> 00:15:23,950
put them in the browser what you're going to do is going to interpret the change and

209
00:15:23,950 --> 00:15:28,510
simply what you are going to do is go find them reuse on screen

210
00:15:28,510 --> 00:15:31,240
etcetera which is why by the time the user has already started to

211
00:15:31,240 --> 00:15:34,769
interact there will be final content

212
00:15:36,670 --> 00:15:44,049
but we don't care about us so the user for him what

213
00:15:44,049 --> 00:15:47,949
he is watching the end he is not interested in the rest because he is not interacting

214
00:15:47,949 --> 00:15:53,769
with that ok what are we going to gain so what is a little bit of what

215
00:15:53,769 --> 00:15:57,639
we were talking about before we will gain the perception of the charge time of the

216
00:15:57,639 --> 00:16:04,269
page the user as I was saying what you will see is content that is for him is

217
00:16:04,269 --> 00:16:08,379
In the end, even if it is not, we are not deceiving a little, but well, he does not know

218
00:16:08,379 --> 00:16:11,210
going to account there are a couple of things we have to

219
00:16:11,210 --> 00:16:15,740
also take into account on the one hand we are depending on the hash creep for

220
00:16:15,740 --> 00:16:18,200
which probably some user base in which we are leaving

221
00:16:18,200 --> 00:16:22,430
outside now a well know what we have to do in these cases but

222
00:16:22,430 --> 00:16:27,020
well let's keep in mind and on the other hand on the other hand if always in first

223
00:16:27,020 --> 00:16:30,710
our styles online our critical styles online not

224
00:16:30,710 --> 00:16:33,110
we are going to be putting what is super important which is the browser cache

225
00:16:33,110 --> 00:16:39,200
which basically is going to allow us to speed up the subsequent visits and the

226
00:16:39,200 --> 00:16:42,530
user already has downloaded in the final styles, the ideal is that

227
00:16:42,530 --> 00:16:45,140
Let's always show that because it will be much faster than the browser.

228
00:16:45,140 --> 00:16:48,080
go find the user's machine even though we are always printing

229
00:16:48,080 --> 00:16:50,870
online styles that will never be nearly proficient

230
00:16:50,870 --> 00:16:54,320
let's say so what we have to do is save that data from silverio

231
00:16:54,320 --> 00:16:58,100
carbon headquarters that is if javier the critical styles is now also

232
00:16:58,100 --> 00:17:02,080
let's see how we are going to do ok up to this point I think we were

233
00:17:02,080 --> 00:17:05,410
seeing a little bit what the theory of the technique would be like now we are going to see a

234
00:17:05,410 --> 00:17:09,550
little bit of the ways we have to put it into practice first let's see how

235
00:17:09,550 --> 00:17:14,610
we are going to load these critical styles there is a productions on one hand the

236
00:17:14,610 --> 00:17:18,870
javascript script now i'm going to show you a little bit of an implementation

237
00:17:18,870 --> 00:17:23,190
cast although it would be the basic thing that we have to do but also the plugins like

238
00:17:23,190 --> 00:17:29,370
logs and if it did it is that it is surely well known they can search it is something

239
00:17:29,370 --> 00:17:33,270
very simple basically what we are doing is listening to the windows logo

240
00:17:33,270 --> 00:17:37,650
and in the color what we are going to do is create a link element put a couple of

241
00:17:37,650 --> 00:17:41,460
attributes so that the browser understands that they are style sheets with the step to

242
00:17:41,460 --> 00:17:46,830
our final styles audio and finally learn it that to the help we give is

243
00:17:46,830 --> 00:17:52,380
nothing very complicated on the other hand remember that the challenge

244
00:17:52,380 --> 00:17:57,270
I was telling you a little bit about Richard people this is great pri what is neither

245
00:17:57,270 --> 00:18:01,200
It is nowhere near standard but can be exploited in the later

246
00:18:01,200 --> 00:18:05,039
versions of chrome also this is something to go putting as improvement

247
00:18:05,039 --> 00:18:07,600
progressive without we're going to have to have a powder

248
00:18:07,600 --> 00:18:12,220
he is very good man I love you if he loves us they will get to know him is a

249
00:18:12,220 --> 00:18:14,640
normal link basically the only change is king

250
00:18:14,640 --> 00:18:20,080
which will be instead of this situation and what will happen to our styles

251
00:18:20,080 --> 00:18:23,950
finals and what the players interpreted as it is a prologue what

252
00:18:23,950 --> 00:18:27,549
you are going to do is then go find synchronously and not what was the

253
00:18:27,549 --> 00:18:31,330
render well we also have to indicate that it is because this also works

254
00:18:31,330 --> 00:18:36,309
for for javascript if it didn't reach me and it has events so

255
00:18:36,309 --> 00:18:39,610
What we are going to do is simply the moment I finish loading that that

256
00:18:39,610 --> 00:18:43,990
file we just discard it being a black stage when interpreting it

257
00:18:43,990 --> 00:18:49,059
it is a sheet you stretch it is going to process it was going to work quietly like how

258
00:18:49,059 --> 00:18:53,520
Normally, it is great to investigate the and you can apply the

259
00:18:53,520 --> 00:18:57,700
use it and well also with the space before

260
00:18:57,700 --> 00:19:00,580
now we also have to do a type of check if the user already has

261
00:19:00,580 --> 00:19:04,630
our final styles for this we are going to make a cookie we no longer had

262
00:19:04,630 --> 00:19:09,400
much more option than doing it from the server side, check me up to

263
00:19:09,400 --> 00:19:14,290
the case of the example we are using php but it is used for anything

264
00:19:14,290 --> 00:19:17,910
basically if you already have the cookie and if the cookie is the same as our version

265
00:19:17,910 --> 00:19:22,180
because I also don't know this way we have versioned styles we want it to always have

266
00:19:22,180 --> 00:19:26,680
grab the latest version what are we going to do if you already have it because you already visited

267
00:19:26,680 --> 00:19:29,320
you already saw the critical styles we put our links to our

268
00:19:29,320 --> 00:19:34,540
final styles but what we have to do is basically the technique we put

269
00:19:34,540 --> 00:19:38,200
our critical styles online and well we do pretty much the same

270
00:19:38,200 --> 00:19:43,240
check by javascript we load our critical styles and save in the

271
00:19:43,240 --> 00:19:48,300
cusp you already have has your styles seen

272
00:19:48,300 --> 00:19:53,040
and well also lastly what I was saying before we depend on hacker

273
00:19:53,040 --> 00:19:56,280
and therefore we have to have a forum for users who do not have

274
00:19:56,280 --> 00:19:59,400
javascript enabled because if not we are going to give you a poor experience

275
00:19:59,400 --> 00:20:03,870
they will give half of the things so nothing just a script from our

276
00:20:03,870 --> 00:20:09,600
our final styles and ready ok now that they are no less we saw how

277
00:20:09,600 --> 00:20:13,730
load them let's see the most tedious part that

278
00:20:13,730 --> 00:20:18,170
I think it is the generation of these critical styles that I distinguish from two

279
00:20:18,170 --> 00:20:22,700
categories by one we have the automatic magic tools

280
00:20:22,700 --> 00:20:26,880
as I like to tell you they can be good reviews and that's

281
00:20:26,880 --> 00:20:32,560
penthouse penthouse also has an online and critical generator basically

282
00:20:32,560 --> 00:20:35,470
are its dnpm modules so implement them in our golf what

283
00:20:35,470 --> 00:20:40,090
usual should be super simple what they do in theory basically that

284
00:20:40,090 --> 00:20:43,930
just a series of super configurable parameters and from that they extract the

285
00:20:43,930 --> 00:20:47,440
styles on our page so very magically

286
00:20:47,440 --> 00:20:51,909
on the other hand if we use a pre processor

287
00:20:51,909 --> 00:20:57,580
can be salt and light suns or whatever and we have a good code does if

288
00:20:57,580 --> 00:21:01,840
our styles are super motorized on sundays it is all separated in parayas

289
00:21:01,840 --> 00:21:06,220
It is all very componentized, what we are going to do is simply tell you

290
00:21:06,220 --> 00:21:09,879
understand us what are our critical styles for the view type

291
00:21:09,879 --> 00:21:13,740
add bouquets and we generate our own band that of the styles

292
00:21:13,740 --> 00:21:17,770
of the components that are going to be seen in a web default

293
00:21:17,770 --> 00:21:23,020
in my experience the second option is the best one is basically the best one

294
00:21:23,020 --> 00:21:26,700
scale for projects at least in large projects than where we apply it

295
00:21:26,700 --> 00:21:30,370
it simply requires having a good code base or being well

296
00:21:30,370 --> 00:21:34,030
thought from the beginning and then it just comes out just because

297
00:21:34,030 --> 00:21:39,340
quietly it will be generating I know later on the other side of the

298
00:21:39,340 --> 00:21:43,690
automated tools are very good it seems to me not for a type of

299
00:21:43,690 --> 00:21:47,919
Simple projects with very static pages with little maintenance

300
00:21:47,919 --> 00:21:52,629
styles where because apart is very tied to the url for example in

301
00:21:52,629 --> 00:21:55,690
free market we have super dynamic networks for which many do not

302
00:21:55,690 --> 00:21:59,139
They serve and also the size of the view so in some cases it is super

303
00:21:59,139 --> 00:22:04,360
limiting for them I already advanced a little bit now we are going to talk about how

304
00:22:04,360 --> 00:22:07,789
we implement critical css in mercadolibre

305
00:22:07,789 --> 00:22:13,340
we started to think a little bit of criticism at the end of last year I'm going to tell you

306
00:22:13,340 --> 00:22:17,299
a little about the first experience we had in implementing it and I will tell you

307
00:22:17,299 --> 00:22:22,549
it was not good but afterwards good so that everything is not so bad I tell you that

308
00:22:22,549 --> 00:22:26,419
then we also implemented on several other sides with a little bit of an experience

309
00:22:26,419 --> 00:22:32,370
a little happier but hey let's see where we did it this first time

310
00:22:32,370 --> 00:22:36,900
surely capable then I don't know if this part looks good well obviously

311
00:22:36,900 --> 00:22:41,730
free dial are search listings and it's a good mobile that was

312
00:22:41,730 --> 00:22:44,860
where we had the greatest need to improve performance

313
00:22:44,860 --> 00:22:49,929
At first glance it seems very simple.The critical styles that

314
00:22:49,929 --> 00:22:54,070
we should have but what does the list look for that is super dynamic

315
00:22:54,070 --> 00:22:59,640
we have different types of views we have filters we have

316
00:22:59,640 --> 00:23:03,150
other times another type of view we have banners we have official stores

317
00:23:03,150 --> 00:23:07,380
we have a lot of variables and next to supercables that can be combined so it is very

318
00:23:07,380 --> 00:23:10,780
random and ccoo where can user take out

319
00:23:10,780 --> 00:23:16,780
so well there at that point when we started to do the implementation the

320
00:23:16,780 --> 00:23:20,200
truth is that I had we are about to start the redesign which is the version

321
00:23:20,200 --> 00:23:23,460
that we had just seen was the previous version

322
00:23:23,460 --> 00:23:27,840
and besides the workflow we had was not very oiled

323
00:23:27,840 --> 00:23:31,380
it was very green no no that did not allow us to have the tools

324
00:23:31,380 --> 00:23:36,289
automated and puts the modular styles hoisted anywhere near we had them

325
00:23:36,289 --> 00:23:41,700
So it is something that we did very well in a decline which is why I think

326
00:23:41,700 --> 00:23:46,690
we make the worst possible decision we generate our styles online

327
00:23:46,690 --> 00:23:53,560
when a super artisan way of own code we had on our own

328
00:23:53,560 --> 00:23:57,220
bookcase and then we just got into that blender

329
00:23:57,220 --> 00:24:02,860
online that is one crossed and we ended up with more than 20

330
00:24:02,860 --> 00:24:06,670
different compilations for all the versions that we found later we

331
00:24:06,670 --> 00:24:09,310
we find that once we leave production we continue

332
00:24:09,310 --> 00:24:13,000
finding steps that we had not contemplated at first but well

333
00:24:13,000 --> 00:24:19,390
you will imagine that this resulted in a total mess and equally at this point yes that

334
00:24:19,390 --> 00:24:22,720
is one of those traces of this point we were happy the truth that we

335
00:24:22,720 --> 00:24:26,110
everything was going more or less well the problem actually started when

336
00:24:26,110 --> 00:24:30,520
we started to put fixes officers in our old code so we had

337
00:24:30,520 --> 00:24:33,280
we absolutely regenerate all our critical styles for all

338
00:24:33,280 --> 00:24:37,630
houses because we didn't really know where to hit and we ended up well

339
00:24:37,630 --> 00:24:42,050
with the worst experience from from the point of

340
00:24:42,050 --> 00:24:46,520
development view that we had at least since I am in free market

341
00:24:46,520 --> 00:24:52,010
[Music] and well nothing

342
00:24:52,010 --> 00:24:56,809
basically became impossible to maintain for that's the end point

343
00:24:56,809 --> 00:25:02,840
What does incredible results mean for us as well,

344
00:25:02,840 --> 00:25:07,759
experience the lips version was quite bad and well this is a

345
00:25:07,759 --> 00:25:12,120
before and after comparison basically

346
00:25:12,120 --> 00:25:17,880
we started to see content in the critical version at 1.4 seconds while

347
00:25:17,880 --> 00:25:22,290
that in the previous version we only started at 2.5 to see the logo and

348
00:25:22,290 --> 00:25:27,110
as you will see it is going to end there are already 56 better

349
00:25:27,110 --> 00:25:31,010
As I will see you finish the four points 5

350
00:25:31,010 --> 00:25:34,820
while the previous finished version receive 4.9 which is a

351
00:25:34,820 --> 00:25:38,419
only 8% real-time loading improvements

352
00:25:38,419 --> 00:25:42,379
that means well you get ahead a 56 percent improvement in perception

353
00:25:42,379 --> 00:25:45,859
load time is not the actual load of the site is we enter the second

354
00:25:45,859 --> 00:25:51,649
category and from a business point of view we improved the rate of 2%

355
00:25:51,649 --> 00:25:54,769
conversion that may sound super little but in mercadolibre the bar which is a

356
00:25:54,769 --> 00:26:00,379
heap where it is very rare that something that we implement at this level of

357
00:26:00,379 --> 00:26:04,230
front-end for example ended up creating both in conversion

358
00:26:04,230 --> 00:26:09,630
so well then what we saw was a little bit about criticism the css and

359
00:26:09,630 --> 00:26:14,130
like that along with other optimizations layoffs will basically end us

360
00:26:14,130 --> 00:26:18,929
in a total profit it was very for the users because for them the page

361
00:26:18,929 --> 00:26:24,600
loaded 56 percent faster it was a good one for us for the company in

362
00:26:24,600 --> 00:26:29,160
general because we ended up selling more for us it was not so much a win as

363
00:26:29,160 --> 00:26:32,580
developers because I already told you that we had a bit of a hard time but well I think

364
00:26:32,580 --> 00:26:36,690
that inside everything ended up making a win so nothing crazy I would like it to

365
00:26:36,690 --> 00:26:40,950
take from this talk that I told you is a little bit like what it is about

366
00:26:40,950 --> 00:26:44,850
the technique as they can take their own projects but above all

367
00:26:44,850 --> 00:26:48,600
things I would like you to take a little bit on the focus set to speed or

368
00:26:48,600 --> 00:26:53,370
how important it is that we think about dispatch and performance and how this

369
00:26:53,370 --> 00:26:56,190
ends up also impacting the experience to our users that yes

370
00:26:56,190 --> 00:26:59,400
remember in the motto at the beginning should be what we always put

