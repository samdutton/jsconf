1
00:00:00,320 --> 00:00:02,070

[Music]

2
00:00:02,070 --> 00:00:03,840
[Applause]

3
00:00:03,840 --> 00:00:05,660
[Music]

4
00:00:05,660 --> 00:00:07,410
[Applause]

5
00:00:07,410 --> 00:00:09,280
[Music]

6
00:00:09,280 --> 00:00:11,020
[Applause]

7
00:00:11,020 --> 00:00:12,780
[Music]

8
00:00:12,780 --> 00:00:16,860
[Applause]

9
00:00:16,870 --> 00:00:24,409
[Music]

10
00:00:24,419 --> 00:00:28,719
thank you Sam welcome to my talk The

11
00:00:28,719 --> 00:00:31,239
Annoying site also known as the power of

12
00:00:31,239 --> 00:00:35,440
the web platform so my name is Feroz I

13
00:00:35,440 --> 00:00:37,930
work on web torrent which is a torrent

14
00:00:37,930 --> 00:00:41,110
library for the web and I also built web

15
00:00:41,110 --> 00:00:42,879
torrent desktop which is an electron app

16
00:00:42,879 --> 00:00:45,790
built with some friends and it was one

17
00:00:45,790 --> 00:00:47,920
of the first electron apps and it just

18
00:00:47,920 --> 00:00:50,470
recently passed 1.5 million total

19
00:00:50,470 --> 00:00:52,989
downloads which is pretty cool and

20
00:00:52,989 --> 00:00:54,730
standard yes as well so javascript

21
00:00:54,730 --> 00:00:56,890
linter that catches programmer errors

22
00:00:56,890 --> 00:00:58,540
and the forces consists of code style in

23
00:00:58,540 --> 00:01:00,850
your projects and it's also good at

24
00:01:00,850 --> 00:01:02,920
angering people which is just good fun

25
00:01:02,920 --> 00:01:05,710
sometimes and if they're doing open

26
00:01:05,710 --> 00:01:08,259
source since 2014 full-time since 2015

27
00:01:08,259 --> 00:01:10,509
and you probably use some of my NPM

28
00:01:10,509 --> 00:01:13,210
packages and my open source work is

29
00:01:13,210 --> 00:01:15,040
supported by many generous patreon

30
00:01:15,040 --> 00:01:17,049
donors at the moment so thank you to all

31
00:01:17,049 --> 00:01:20,890
of those people I just wanted to give a

32
00:01:20,890 --> 00:01:21,880
quick shout out to my most recent

33
00:01:21,880 --> 00:01:23,200
project that I've been working on called

34
00:01:23,200 --> 00:01:25,240
bit MIDI if you follow me on Twitter

35
00:01:25,240 --> 00:01:26,530
you've probably seen me tweeting about

36
00:01:26,530 --> 00:01:29,290
it so it's like a wayback machine for

37
00:01:29,290 --> 00:01:31,630
MIDI files how many people here know

38
00:01:31,630 --> 00:01:33,130
what a MIDI file is raise your hand okay

39
00:01:33,130 --> 00:01:36,400
cool so alright cool so it's it's used

40
00:01:36,400 --> 00:01:37,420
by a lot of people in the music industry

41
00:01:37,420 --> 00:01:40,299
but my first exposure to it was in like

42
00:01:40,299 --> 00:01:42,340
my first days of browsing the web it was

43
00:01:42,340 --> 00:01:44,920
often used with the BG sound HTML tag

44
00:01:44,920 --> 00:01:46,450
for playing audio in the background

45
00:01:46,450 --> 00:01:47,650
automatically when you land on a web

46
00:01:47,650 --> 00:01:49,960
page the good old days back when the web

47
00:01:49,960 --> 00:01:52,479
was fun and quirky and so anyway I

48
00:01:52,479 --> 00:01:54,189
wanted to play some of those I looked

49
00:01:54,189 --> 00:01:57,070
online for basically a collection of zip

50
00:01:57,070 --> 00:01:58,780
file as it filed full of Middies and I

51
00:01:58,780 --> 00:02:00,310
couldn't play it back in any program so

52
00:02:00,310 --> 00:02:02,229
I thought it would be fun to use web

53
00:02:02,229 --> 00:02:05,590
assembly to take a mini player in C and

54
00:02:05,590 --> 00:02:07,780
make it work on the web and then host

55
00:02:07,780 --> 00:02:09,159
all these MIDI files and so that's what

56
00:02:09,159 --> 00:02:10,450
it is you can go there and you can play

57
00:02:10,450 --> 00:02:12,700
around with it it's been good fun it

58
00:02:12,700 --> 00:02:14,379
also gets a perfect Lighthouse score in

59
00:02:14,379 --> 00:02:15,549
Chrome Canary which I'm really proud of

60
00:02:15,549 --> 00:02:17,409
so it's really lightweight really fast

61
00:02:17,409 --> 00:02:19,930
and works on mobile and it's great okay

62
00:02:19,930 --> 00:02:23,020
so it's story time I've been getting a

63
00:02:23,020 --> 00:02:25,120
lot of weird spam in my inbox lately

64
00:02:25,120 --> 00:02:25,480
here's one

65
00:02:25,480 --> 00:02:27,480
the emails you can see on the projector

66
00:02:27,480 --> 00:02:34,090
so yeah stock manufacturers from Zi

67
00:02:34,090 --> 00:02:35,980
Jiang China are trying to sell me what

68
00:02:35,980 --> 00:02:39,159
they call sublimation socks which I

69
00:02:39,159 --> 00:02:42,010
think there's been printed socks and I

70
00:02:42,010 --> 00:02:43,450
don't know it's been waste so much of my

71
00:02:43,450 --> 00:02:44,980
time and it always ends up in my inbox

72
00:02:44,980 --> 00:02:46,390
for some reason it doesn't get filtered

73
00:02:46,390 --> 00:02:48,519
out properly so I was thinking is there

74
00:02:48,519 --> 00:02:50,440
some way that I could waste the spammers

75
00:02:50,440 --> 00:02:53,650
time in return how many of you felt that

76
00:02:53,650 --> 00:02:55,540
before like you know some people they

77
00:02:55,540 --> 00:02:57,730
respond to the spam emails themselves

78
00:02:57,730 --> 00:02:59,590
you know and try to lure the spammers

79
00:02:59,590 --> 00:03:02,019
into like a lengthy conversation and at

80
00:03:02,019 --> 00:03:03,910
the end they like say surprise I'm not

81
00:03:03,910 --> 00:03:05,650
gonna fall for what you did but the

82
00:03:05,650 --> 00:03:06,700
thing is like that way it would waste a

83
00:03:06,700 --> 00:03:08,530
lot of my time as well so I'm not going

84
00:03:08,530 --> 00:03:12,609
to do that so I was wondering what if

85
00:03:12,609 --> 00:03:14,500
there was some way that I could just

86
00:03:14,500 --> 00:03:17,260
send a link to this spammer and to all

87
00:03:17,260 --> 00:03:20,049
future spammers and teach them a lesson

88
00:03:20,049 --> 00:03:24,640
you know waste their time in return so

89
00:03:24,640 --> 00:03:26,739
in the good old days browsing the web

90
00:03:26,739 --> 00:03:29,709
was more dangerous if you visited a web

91
00:03:29,709 --> 00:03:32,040
page anything could happen

92
00:03:32,040 --> 00:03:36,519
so this is an infamous trick on the

93
00:03:36,519 --> 00:03:39,099
early web it was often known as the

94
00:03:39,099 --> 00:03:41,349
infinite alert loop raise your hand if

95
00:03:41,349 --> 00:03:42,370
you've been caught in one of these

96
00:03:42,370 --> 00:03:45,040
before okay oh my gosh

97
00:03:45,040 --> 00:03:46,299
way more people than I would have

98
00:03:46,299 --> 00:03:48,760
guessed in the past so in the past when

99
00:03:48,760 --> 00:03:50,590
this actually worked the only way to

100
00:03:50,590 --> 00:03:53,980
escape from this infinite alert loop was

101
00:03:53,980 --> 00:03:56,380
to force quit your web browser which

102
00:03:56,380 --> 00:03:58,030
would cause you to lose any unsaved work

103
00:03:58,030 --> 00:04:00,430
and that included all of the unsubmitted

104
00:04:00,430 --> 00:04:03,099
forms that you had in your browser and

105
00:04:03,099 --> 00:04:06,239
so modern browsers are unfortunately

106
00:04:06,239 --> 00:04:09,280
multi-process and so alert doesn't block

107
00:04:09,280 --> 00:04:10,810
the browser process anymore which means

108
00:04:10,810 --> 00:04:13,419
that you can just ex out the tab if it

109
00:04:13,419 --> 00:04:18,910
opens up an alert so I open up issues on

110
00:04:18,910 --> 00:04:20,320
all the major browsers explaining to

111
00:04:20,320 --> 00:04:21,729
them that this broke an important use

112
00:04:21,729 --> 00:04:25,240
case for me but for some reason they

113
00:04:25,240 --> 00:04:26,650
closed all my issues immediately as

114
00:04:26,650 --> 00:04:33,130
won't fix this is a good xkcd about you

115
00:04:33,130 --> 00:04:34,900
know strange workflows in these cases

116
00:04:34,900 --> 00:04:38,820
that I like

117
00:04:38,830 --> 00:04:41,450
so in the good old days we had Internet

118
00:04:41,450 --> 00:04:44,750
Explorer we had ActiveX so as I

119
00:04:44,750 --> 00:04:46,280
mentioned visiting a web page had real

120
00:04:46,280 --> 00:04:48,260
risk associated with it you have to

121
00:04:48,260 --> 00:04:50,000
watch out for danger click on a fake

122
00:04:50,000 --> 00:04:51,770
media player and an ActiveX control

123
00:04:51,770 --> 00:04:54,020
would run and it was game over so this

124
00:04:54,020 --> 00:04:55,460
actually is not a real media player this

125
00:04:55,460 --> 00:04:57,290
is actually with a thing where with one

126
00:04:57,290 --> 00:04:58,820
click you start running native code on

127
00:04:58,820 --> 00:05:03,770
your computer obvious right so if only

128
00:05:03,770 --> 00:05:05,690
ActiveX still ran automatically I could

129
00:05:05,690 --> 00:05:07,340
build a really annoying website to send

130
00:05:07,340 --> 00:05:14,600
to this spammer so I think of the web as

131
00:05:14,600 --> 00:05:16,370
evolving through three distinct phases

132
00:05:16,370 --> 00:05:17,870
so there was the early days when the web

133
00:05:17,870 --> 00:05:19,460
was really the Wild West you could do

134
00:05:19,460 --> 00:05:20,570
infinite alert loops he could run

135
00:05:20,570 --> 00:05:22,880
ActiveX and then we we sort of grew up a

136
00:05:22,880 --> 00:05:24,230
little bit we realized security is

137
00:05:24,230 --> 00:05:26,240
important people started using Firefox

138
00:05:26,240 --> 00:05:29,720
Chrome was released in 2008 so the 2000s

139
00:05:29,720 --> 00:05:31,670
were sort of focused on reining back

140
00:05:31,670 --> 00:05:33,170
what the web could do and sort of saying

141
00:05:33,170 --> 00:05:34,880
okay look look let's just really sandbox

142
00:05:34,880 --> 00:05:36,020
the heck out of this thing and make it

143
00:05:36,020 --> 00:05:37,370
really limited and make it just display

144
00:05:37,370 --> 00:05:39,380
documents and not own your computer when

145
00:05:39,380 --> 00:05:41,030
you visit a website but now I think

146
00:05:41,030 --> 00:05:42,770
we're going into this third phase which

147
00:05:42,770 --> 00:05:44,630
is we need powerful features in the web

148
00:05:44,630 --> 00:05:45,830
we need the web to be able to compete

149
00:05:45,830 --> 00:05:47,540
with mobile mobile apps we need

150
00:05:47,540 --> 00:05:49,310
basically as much functionality as

151
00:05:49,310 --> 00:05:51,710
possible to move into the browser so

152
00:05:51,710 --> 00:05:52,790
that I don't need to make a native app

153
00:05:52,790 --> 00:05:54,710
and there are still exceptions to this

154
00:05:54,710 --> 00:05:55,940
where you do need a native app and this

155
00:05:55,940 --> 00:05:57,200
is where you see people often reaching

156
00:05:57,200 --> 00:05:59,120
for electron where you know they have a

157
00:05:59,120 --> 00:06:00,830
website that can do 95% of what they

158
00:06:00,830 --> 00:06:02,390
need but there's like one thing you know

159
00:06:02,390 --> 00:06:05,960
I want to be able to do you know have

160
00:06:05,960 --> 00:06:07,010
something running in the background in

161
00:06:07,010 --> 00:06:08,150
the tray or whatever and you know

162
00:06:08,150 --> 00:06:09,290
there's these few use cases where the

163
00:06:09,290 --> 00:06:11,180
web still can't can't support it but

164
00:06:11,180 --> 00:06:12,560
basically you know you can do almost

165
00:06:12,560 --> 00:06:13,610
everything you need in the web today

166
00:06:13,610 --> 00:06:15,170
which is great we have a lot of powerful

167
00:06:15,170 --> 00:06:19,250
features so a good news for me annoying

168
00:06:19,250 --> 00:06:21,950
website I went to you know I'm glad I'm

169
00:06:21,950 --> 00:06:23,330
glad that the web platform has become

170
00:06:23,330 --> 00:06:25,730
really powerful we have all these new

171
00:06:25,730 --> 00:06:27,650
api's that have been added back to the

172
00:06:27,650 --> 00:06:29,270
web and we can do things like

173
00:06:29,270 --> 00:06:31,460
serviceworker web audio web payments

174
00:06:31,460 --> 00:06:34,820
push notifications web assembly WebGL

175
00:06:34,820 --> 00:06:37,340
WebRTC Web VR and you know all these are

176
00:06:37,340 --> 00:06:38,930
fun to play with and all these have

177
00:06:38,930 --> 00:06:40,670
delightful edge cases that the browser

178
00:06:40,670 --> 00:06:42,260
vendors didn't think about when making

179
00:06:42,260 --> 00:06:43,490
them and we're gonna have a lot of fun

180
00:06:43,490 --> 00:06:46,120
with that today

181
00:06:46,120 --> 00:06:47,950
the web also has a lot of ancient api's

182
00:06:47,950 --> 00:06:49,240
that can't be removed for backwards

183
00:06:49,240 --> 00:06:50,740
compatibility reasons and some of these

184
00:06:50,740 --> 00:06:52,600
api's are so old that I'm sure that many

185
00:06:52,600 --> 00:06:54,120
of you have never heard of them and

186
00:06:54,120 --> 00:06:57,760
they're they're sort of just sitting

187
00:06:57,760 --> 00:06:59,170
there nicely in the browser waiting to

188
00:06:59,170 --> 00:07:00,520
be discovered waiting to be used

189
00:07:00,520 --> 00:07:02,830
in the various ways so I decided to take

190
00:07:02,830 --> 00:07:04,480
a look at each one of these api's one at

191
00:07:04,480 --> 00:07:05,800
a time and try to do the worst possible

192
00:07:05,800 --> 00:07:10,090
thing with them I like this quote by

193
00:07:10,090 --> 00:07:12,160
Paul Boucher it's every system has two

194
00:07:12,160 --> 00:07:13,870
sets of rules the rules as they are

195
00:07:13,870 --> 00:07:16,180
intended or commonly perceived and the

196
00:07:16,180 --> 00:07:18,450
actual rules also known as reality in

197
00:07:18,450 --> 00:07:20,740
most complex systems the gap between

198
00:07:20,740 --> 00:07:22,890
these two sets of rules is huge

199
00:07:22,890 --> 00:07:24,940
sometimes we catch a glimpse of the

200
00:07:24,940 --> 00:07:27,670
truth and discover the actual rules of a

201
00:07:27,670 --> 00:07:30,130
system once the actual rules are known

202
00:07:30,130 --> 00:07:32,050
it may become possible to perform

203
00:07:32,050 --> 00:07:34,120
miracles which are things that violate

204
00:07:34,120 --> 00:07:37,419
the perceived rules so what Paul is

205
00:07:37,419 --> 00:07:39,820
calling miracles are also known as hacks

206
00:07:39,820 --> 00:07:42,880
and so the definition of hacking that I

207
00:07:42,880 --> 00:07:44,500
like a lot is taking advantage of the

208
00:07:44,500 --> 00:07:46,210
gap between the written rules and the

209
00:07:46,210 --> 00:07:49,240
actual rules so if there's no gap then

210
00:07:49,240 --> 00:07:50,380
it's not possible to do something

211
00:07:50,380 --> 00:07:51,580
surprising because everybody already

212
00:07:51,580 --> 00:07:53,980
knows what's possible it's not possible

213
00:07:53,980 --> 00:07:56,440
to hack fortunately the web is full of

214
00:07:56,440 --> 00:07:58,120
places where the written rules also

215
00:07:58,120 --> 00:07:59,830
known as the specs diverge from the

216
00:07:59,830 --> 00:08:01,300
actual rules also known as the

217
00:08:01,300 --> 00:08:03,340
implementations we experience this every

218
00:08:03,340 --> 00:08:05,620
day on the web as well developers so I

219
00:08:05,620 --> 00:08:07,030
didn't think it would be very hard to

220
00:08:07,030 --> 00:08:08,410
find some edge cases and some of these

221
00:08:08,410 --> 00:08:11,919
powerful new api's so I started looking

222
00:08:11,919 --> 00:08:13,390
through various web API is looking for

223
00:08:13,390 --> 00:08:15,010
anything that might help me make a

224
00:08:15,010 --> 00:08:16,419
really annoying website to send to this

225
00:08:16,419 --> 00:08:16,840
spammer

226
00:08:16,840 --> 00:08:20,169
and I found some really weird ones as

227
00:08:20,169 --> 00:08:22,120
you can see up here some of these like

228
00:08:22,120 --> 00:08:24,190
the plaintext tag are just absurd how

229
00:08:24,190 --> 00:08:25,180
many of you have heard of the plaintext

230
00:08:25,180 --> 00:08:27,460
tag raise your hand okay yeah like three

231
00:08:27,460 --> 00:08:31,240
four people it's absurd it it renders

232
00:08:31,240 --> 00:08:32,740
everything that appears after it as

233
00:08:32,740 --> 00:08:35,289
plaintext and there's no way to close it

234
00:08:35,289 --> 00:08:38,589
so if you include it then all the HTML

235
00:08:38,589 --> 00:08:39,789
tags afterwards will just show up in the

236
00:08:39,789 --> 00:08:44,350
page I don't know what that's for but

237
00:08:44,350 --> 00:08:46,839
anyway there's also a string prototype

238
00:08:46,839 --> 00:08:48,430
big and quote which are they're not

239
00:08:48,430 --> 00:08:50,020
really good for annoying annoying

240
00:08:50,020 --> 00:08:51,280
purposes but they're just they're just

241
00:08:51,280 --> 00:08:54,459
silly like if you call big on a string

242
00:08:54,459 --> 00:08:57,490
it just adds a big HTML tag on both

243
00:08:57,490 --> 00:08:58,870
sides of the stream

244
00:08:58,870 --> 00:09:00,430
and quote just adds double quotes on

245
00:09:00,430 --> 00:09:04,630
both sides yeah I looked up with the big

246
00:09:04,630 --> 00:09:06,550
tag does it actually just it makes the

247
00:09:06,550 --> 00:09:09,760
the size of the text one size bigger

248
00:09:09,760 --> 00:09:14,620
than the parent div around it really

249
00:09:14,620 --> 00:09:19,180
useful okay so in all this searching I I

250
00:09:19,180 --> 00:09:21,810
finally found what I was looking for I

251
00:09:21,810 --> 00:09:27,820
found it seriously the best api's window

252
00:09:27,820 --> 00:09:29,820
moved to and their friends

253
00:09:29,820 --> 00:09:33,070
these methods allow you to move and to

254
00:09:33,070 --> 00:09:36,130
resize a browser window I thought there

255
00:09:36,130 --> 00:09:37,839
was no way that these ap eyes would

256
00:09:37,839 --> 00:09:40,080
still be allowed in modern web browsers

257
00:09:40,080 --> 00:09:43,029
sure enough when I I tried them they

258
00:09:43,029 --> 00:09:45,760
didn't work immediately and the reason

259
00:09:45,760 --> 00:09:48,010
is actually kind of surprising it's the

260
00:09:48,010 --> 00:09:50,200
same origin policy can you think about

261
00:09:50,200 --> 00:09:52,690
why moving a window would have anything

262
00:09:52,690 --> 00:09:58,519
to do with the same origin policy huh

263
00:09:58,529 --> 00:10:02,350
sort of no it's actually so it's

264
00:10:02,350 --> 00:10:03,910
actually more and more that if you think

265
00:10:03,910 --> 00:10:04,960
about like when you're using your

266
00:10:04,960 --> 00:10:07,210
browser you usually have multiple tabs

267
00:10:07,210 --> 00:10:09,940
open right and so if one site like say

268
00:10:09,940 --> 00:10:12,130
this site here bit MIDI were to try to

269
00:10:12,130 --> 00:10:13,810
resize the window I would also be

270
00:10:13,810 --> 00:10:15,700
resizing the Wikipedia tab which is

271
00:10:15,700 --> 00:10:19,210
implicitly it's sort of affecting domain

272
00:10:19,210 --> 00:10:20,740
on another origin and that's just not

273
00:10:20,740 --> 00:10:22,210
allowed even though it's kind of a silly

274
00:10:22,210 --> 00:10:23,589
thing it's like I'm just resizing it you

275
00:10:23,589 --> 00:10:24,520
wouldn't think that's a big deal but

276
00:10:24,520 --> 00:10:25,839
actually any kind of you know

277
00:10:25,839 --> 00:10:27,550
cross-origin communication without the

278
00:10:27,550 --> 00:10:29,170
site explicitly opting into it is a

279
00:10:29,170 --> 00:10:30,820
violation of the same-origin policy so

280
00:10:30,820 --> 00:10:32,290
at least that's how I explained to

281
00:10:32,290 --> 00:10:34,120
myself why the API didn't work but I

282
00:10:34,120 --> 00:10:36,610
figured out a workaround for it so if

283
00:10:36,610 --> 00:10:39,070
you open a new window using window dot

284
00:10:39,070 --> 00:10:42,160
open then you get this little window

285
00:10:42,160 --> 00:10:43,839
that pops up and you can see the

286
00:10:43,839 --> 00:10:45,550
parameters there are it's a really weird

287
00:10:45,550 --> 00:10:47,680
API the first two parameters don't work

288
00:10:47,680 --> 00:10:51,340
anymore so you just pass empty strings

289
00:10:51,350 --> 00:10:53,720
the the third one is like a

290
00:10:53,720 --> 00:10:57,410
comma-separated list of of properties I

291
00:10:57,410 --> 00:10:59,350
don't know why it's not an object but

292
00:10:59,350 --> 00:11:01,100
anyway that's what you do and then you

293
00:11:01,100 --> 00:11:03,290
get this little window that pops up and

294
00:11:03,290 --> 00:11:06,170
okay so that's cool now let's try to

295
00:11:06,170 --> 00:11:10,900
move it around so when I wrote this code

296
00:11:10,900 --> 00:11:14,450
and I ran it it didn't work again but I

297
00:11:14,450 --> 00:11:15,710
noticed a little thing in the browser

298
00:11:15,710 --> 00:11:19,030
that said pop-up window is blocked so

299
00:11:19,030 --> 00:11:21,140
you know I did a little research figure

300
00:11:21,140 --> 00:11:23,150
it out okay so what we need to do here

301
00:11:23,150 --> 00:11:24,350
is we need to trigger this window

302
00:11:24,350 --> 00:11:26,180
opening in response to a user initiated

303
00:11:26,180 --> 00:11:29,600
event so in other words like a click or

304
00:11:29,600 --> 00:11:31,760
a key a key press if we do that we're

305
00:11:31,760 --> 00:11:34,540
allowed to open up windows so this works

306
00:11:34,540 --> 00:11:39,780
now let's add the fun part

307
00:11:39,790 --> 00:11:47,160
right so let's see it

308
00:11:47,170 --> 00:11:51,380
so I have a little demo here can you see

309
00:11:51,380 --> 00:11:53,060
that yeah okay cool so if I click this

310
00:11:53,060 --> 00:11:57,110
button you get a window that moves on

311
00:11:57,110 --> 00:11:58,580
its own and if you try to grab it and

312
00:11:58,580 --> 00:12:02,840
move it around it fights you and if you

313
00:12:02,840 --> 00:12:04,370
if you try to right-click on it to the

314
00:12:04,370 --> 00:12:06,020
little right-click thing also the menu

315
00:12:06,020 --> 00:12:11,090
moves too so okay we're off to a good

316
00:12:11,090 --> 00:12:13,220
start this is pretty annoying can we do

317
00:12:13,220 --> 00:12:17,060
anything else and so I thought I should

318
00:12:17,060 --> 00:12:19,370
intercept oh sorry you can see my my

319
00:12:19,370 --> 00:12:20,990
slides here and need to fix that okay

320
00:12:20,990 --> 00:12:24,890
there we go so I thought let's intercept

321
00:12:24,890 --> 00:12:26,630
all user initiated events and let's open

322
00:12:26,630 --> 00:12:28,910
a window on any possible interaction

323
00:12:28,910 --> 00:12:32,240
with the site at all the best part about

324
00:12:32,240 --> 00:12:33,880
this is this includes things like

325
00:12:33,880 --> 00:12:37,390
command W if you try to close the tab

326
00:12:37,390 --> 00:12:40,370
this includes escape if you try to like

327
00:12:40,370 --> 00:12:42,500
you know close if a pop-up window comes

328
00:12:42,500 --> 00:12:44,000
up and you're like escape I need to get

329
00:12:44,000 --> 00:12:45,440
out of this it'll actually open another

330
00:12:45,440 --> 00:12:49,400
pop-up window yeah so you doesn't work

331
00:12:49,400 --> 00:12:51,110
on scroll unfortunately or on any of

332
00:12:51,110 --> 00:12:52,430
those other types of really common

333
00:12:52,430 --> 00:12:54,350
events but like mouse move would be

334
00:12:54,350 --> 00:12:55,340
really ridiculous

335
00:12:55,340 --> 00:12:58,430
but it works on mouse click touch on

336
00:12:58,430 --> 00:13:01,930
touch devices and all keystroke events

337
00:13:01,930 --> 00:13:04,310
so let's just use that little function

338
00:13:04,310 --> 00:13:05,630
we just wrote called intercept user

339
00:13:05,630 --> 00:13:07,310
input and when that happens we will

340
00:13:07,310 --> 00:13:08,990
prevent that whatever the default thing

341
00:13:08,990 --> 00:13:10,550
the browser was going to do and well

342
00:13:10,550 --> 00:13:12,290
instead call up this little open window

343
00:13:12,290 --> 00:13:18,380
function to open a window so one other

344
00:13:18,380 --> 00:13:22,220
trick we should add is so the pop-up

345
00:13:22,220 --> 00:13:24,440
windows can sort of go behind the main

346
00:13:24,440 --> 00:13:25,910
browser window if the user clicks on the

347
00:13:25,910 --> 00:13:27,290
main window and then they'll be moving

348
00:13:27,290 --> 00:13:28,700
in the background which wouldn't be

349
00:13:28,700 --> 00:13:29,780
nearly as annoying as if they were

350
00:13:29,780 --> 00:13:31,400
moving and they were all on the front of

351
00:13:31,400 --> 00:13:33,920
what you're doing so we can just on any

352
00:13:33,920 --> 00:13:35,540
click we can just call this little focus

353
00:13:35,540 --> 00:13:37,640
windows function to bring all the

354
00:13:37,640 --> 00:13:39,920
windows to the front you have to do this

355
00:13:39,920 --> 00:13:41,839
in response to a user event like a click

356
00:13:41,839 --> 00:13:45,580
or something but it works really nicely

357
00:13:45,580 --> 00:13:48,899
ok gets worse

358
00:13:48,899 --> 00:13:51,269
what if we bounce the windows off the

359
00:13:51,269 --> 00:13:54,509
screen edges and so this little bit of

360
00:13:54,509 --> 00:13:55,529
code here you probably gonna be able to

361
00:13:55,529 --> 00:13:57,779
read it fast enough but it just detects

362
00:13:57,779 --> 00:13:59,040
when the window hits an edge and then it

363
00:13:59,040 --> 00:14:01,100
just inverts the direction

364
00:14:01,100 --> 00:14:03,480
okay let's also play a random video in

365
00:14:03,480 --> 00:14:06,569
the window so I have some good ones here

366
00:14:06,569 --> 00:14:10,170
that I found the great part too is so

367
00:14:10,170 --> 00:14:11,759
browsers have started to try to prevent

368
00:14:11,759 --> 00:14:14,100
autoplay Auto playing video that

369
00:14:14,100 --> 00:14:17,249
includes audio and if you try to do that

370
00:14:17,249 --> 00:14:18,980
then the video just will get blocked

371
00:14:18,980 --> 00:14:22,199
however we're setting up this site so

372
00:14:22,199 --> 00:14:23,579
that the user will be tempted to

373
00:14:23,579 --> 00:14:25,350
interact with it in some way initially

374
00:14:25,350 --> 00:14:27,569
we're gonna put like a cute cat or

375
00:14:27,569 --> 00:14:28,769
something and say you know click the cat

376
00:14:28,769 --> 00:14:31,649
to get started or something we need some

377
00:14:31,649 --> 00:14:33,269
way that entice them to do an initial

378
00:14:33,269 --> 00:14:34,559
event in order to get these pop-ups

379
00:14:34,559 --> 00:14:35,699
going and then once they've done that

380
00:14:35,699 --> 00:14:37,379
we'll also be able to play sound because

381
00:14:37,379 --> 00:14:40,649
they've interacted with the site so so

382
00:14:40,649 --> 00:14:42,509
now we've sort of used this API but can

383
00:14:42,509 --> 00:14:43,740
we do more is there anything else we can

384
00:14:43,740 --> 00:14:47,220
add any other API as we can use of

385
00:14:47,220 --> 00:14:51,329
course yes so I'm gonna get into a few

386
00:14:51,329 --> 00:14:55,379
more api's but first one thing is one

387
00:14:55,379 --> 00:14:56,579
thing is worth discussing which is the

388
00:14:56,579 --> 00:14:57,990
permission model for all of these api's

389
00:14:57,990 --> 00:15:00,059
as I was looking into them I realized

390
00:15:00,059 --> 00:15:02,490
there's basically four models that the

391
00:15:02,490 --> 00:15:04,740
browser uses for permissioning each of

392
00:15:04,740 --> 00:15:07,800
these api's so i think of them in this

393
00:15:07,800 --> 00:15:09,480
way so the first one is the API just

394
00:15:09,480 --> 00:15:12,360
always works so API is like that are

395
00:15:12,360 --> 00:15:13,920
well actually I won't tell you the API

396
00:15:13,920 --> 00:15:15,059
as we'll see them as we go so there's so

397
00:15:15,059 --> 00:15:16,110
many P as you can just always use

398
00:15:16,110 --> 00:15:18,029
there's some that you can only use if

399
00:15:18,029 --> 00:15:20,399
you're on an HTTP domain you probably

400
00:15:20,399 --> 00:15:21,779
probably if you've used the Service

401
00:15:21,779 --> 00:15:22,740
Worker you know you have to be on a

402
00:15:22,740 --> 00:15:24,300
secure origin because it's a very

403
00:15:24,300 --> 00:15:26,540
powerful API same thing with geolocation

404
00:15:26,540 --> 00:15:28,800
then there are api's which require user

405
00:15:28,800 --> 00:15:30,480
interaction so this is to play sound for

406
00:15:30,480 --> 00:15:34,230
example and then the most sensitive API

407
00:15:34,230 --> 00:15:36,389
is require explicit user permission and

408
00:15:36,389 --> 00:15:37,529
that's what you've seen with the little

409
00:15:37,529 --> 00:15:38,939
prompt that comes up saying like can I

410
00:15:38,939 --> 00:15:42,029
use your webcam for example so as I go

411
00:15:42,029 --> 00:15:43,949
through these I'm going to hopefully

412
00:15:43,949 --> 00:15:45,600
I'll remember to mention which of these

413
00:15:45,600 --> 00:15:47,629
models each of the api's falls under

414
00:15:47,629 --> 00:15:50,730
okay so the first one we can do is we

415
00:15:50,730 --> 00:15:53,790
can copy text spam text to the user's

416
00:15:53,790 --> 00:15:57,120
clipboard so here we have an array of

417
00:15:57,120 --> 00:16:01,499
interesting ASCII art and we can just

418
00:16:01,499 --> 00:16:02,610
call clipboard

419
00:16:02,610 --> 00:16:04,019
I guess that's actually yeah that's a

420
00:16:04,019 --> 00:16:06,149
method that I that I wrote but anyway

421
00:16:06,149 --> 00:16:07,560
you call it and it copies text to the

422
00:16:07,560 --> 00:16:09,779
users clipboard this API requires a user

423
00:16:09,779 --> 00:16:13,680
in user interaction with a site so if

424
00:16:13,680 --> 00:16:14,579
they click at all we're just going to

425
00:16:14,579 --> 00:16:16,500
fill their clipboard with the cat and

426
00:16:16,500 --> 00:16:17,910
then also a link to our site so if they

427
00:16:17,910 --> 00:16:19,560
accidentally paste it into slack you

428
00:16:19,560 --> 00:16:24,839
know it'll go viral like that okay one

429
00:16:24,839 --> 00:16:28,350
more so we got speaking to the user this

430
00:16:28,350 --> 00:16:29,880
one is great this one's actually really

431
00:16:29,880 --> 00:16:31,950
great so we can we can use this speech

432
00:16:31,950 --> 00:16:35,100
synthesis API which lets you pass text

433
00:16:35,100 --> 00:16:37,410
to a special function and then it will

434
00:16:37,410 --> 00:16:38,750
read it to the user

435
00:16:38,750 --> 00:16:40,860
and so I have these nice phrases here

436
00:16:40,860 --> 00:16:41,820
that I found which are extremely

437
00:16:41,820 --> 00:16:43,079
annoying when read in a computerized

438
00:16:43,079 --> 00:16:47,519
voice especially the a all the A's there

439
00:16:47,519 --> 00:16:51,329
that one is great the best thing about

440
00:16:51,329 --> 00:16:53,190
this API is that it can auto play right

441
00:16:53,190 --> 00:16:55,170
away without user interaction as soon as

442
00:16:55,170 --> 00:16:57,570
you land on the page on top of that it's

443
00:16:57,570 --> 00:16:59,760
also unmute Abul so if you right-click

444
00:16:59,760 --> 00:17:01,769
on the tab and you try to say mute this

445
00:17:01,769 --> 00:17:07,470
site it doesn't affect this API so I see

446
00:17:07,470 --> 00:17:09,089
the chrome engineers in the audience

447
00:17:09,089 --> 00:17:10,500
opening up issues right now I'll try to

448
00:17:10,500 --> 00:17:12,510
go slowly say you have time to keep

449
00:17:12,510 --> 00:17:15,319
opening issues as we go through these

450
00:17:15,319 --> 00:17:21,049
yeah so anyway there's a great API

451
00:17:21,049 --> 00:17:23,010
here's a fun one you've probably seen

452
00:17:23,010 --> 00:17:25,230
before you can ask the user are you sure

453
00:17:25,230 --> 00:17:27,360
you want to leave this page when they're

454
00:17:27,360 --> 00:17:29,760
trying to close your website so you just

455
00:17:29,760 --> 00:17:31,950
listen to the before unload event and if

456
00:17:31,950 --> 00:17:34,169
you set this event return value to true

457
00:17:34,169 --> 00:17:36,000
then when the user tries to close the

458
00:17:36,000 --> 00:17:37,049
tab it's gonna say are you sure you want

459
00:17:37,049 --> 00:17:38,850
to leave you have unsaved changes you've

460
00:17:38,850 --> 00:17:40,020
probably seen this used on like Google

461
00:17:40,020 --> 00:17:41,730
Docs or something if you if it hasn't

462
00:17:41,730 --> 00:17:44,760
sent up the changes to the server yet so

463
00:17:44,760 --> 00:17:47,580
let's just make them have to do an extra

464
00:17:47,580 --> 00:17:49,610
click to close each of these pop-ups

465
00:17:49,610 --> 00:17:52,110
browsers have actually started to lock

466
00:17:52,110 --> 00:17:53,250
this one down a little bit so you need

467
00:17:53,250 --> 00:17:54,780
to at least interact with the site once

468
00:17:54,780 --> 00:17:56,850
before this is allowed to pop up which

469
00:17:56,850 --> 00:18:00,270
is annoying but it's still pretty good

470
00:18:00,270 --> 00:18:04,470
so I'll try it anyway this is a good one

471
00:18:04,470 --> 00:18:08,100
so we can register protocol handlers so

472
00:18:08,100 --> 00:18:09,840
we attempted to register all possible

473
00:18:09,840 --> 00:18:12,580
protocols that the user might

474
00:18:12,580 --> 00:18:14,650
on their computer and then if they oh

475
00:18:14,650 --> 00:18:16,390
this one actually had required explicit

476
00:18:16,390 --> 00:18:18,280
user permission so it's probably

477
00:18:18,280 --> 00:18:20,110
unlikely that they're going to say yes

478
00:18:20,110 --> 00:18:22,450
but maybe in the frenzy of them trying

479
00:18:22,450 --> 00:18:23,500
to close all these windows going on

480
00:18:23,500 --> 00:18:24,040
their screen

481
00:18:24,040 --> 00:18:25,210
they might just give us permission to

482
00:18:25,210 --> 00:18:26,860
handle all their Bitcoin transactions

483
00:18:26,860 --> 00:18:30,940
which would be great might as well try

484
00:18:30,940 --> 00:18:34,810
right while we're at it let's ask for

485
00:18:34,810 --> 00:18:37,990
the camera and the mic one cool thing

486
00:18:37,990 --> 00:18:39,280
about this code is if you look towards

487
00:18:39,280 --> 00:18:41,560
the bottom there's a little function

488
00:18:41,560 --> 00:18:45,430
called tracked apply constraints and

489
00:18:45,430 --> 00:18:48,250
you'll see that I've passed torch true

490
00:18:48,250 --> 00:18:51,600
to it torch is actually the term that

491
00:18:51,600 --> 00:18:54,640
describes the camera flash so if they do

492
00:18:54,640 --> 00:18:56,410
give us permission we'll just turn their

493
00:18:56,410 --> 00:18:59,620
flash on on their mobile device it's

494
00:18:59,620 --> 00:19:05,380
nice this one's good we can vibrate the

495
00:19:05,380 --> 00:19:07,840
device this actually works on Chrome

496
00:19:07,840 --> 00:19:11,410
chrome on Android and we just to make it

497
00:19:11,410 --> 00:19:13,480
even better we pick a random duration

498
00:19:13,480 --> 00:19:17,070
for each of the vibrates so it goes like

499
00:19:17,070 --> 00:19:20,320
really and consistently this one

500
00:19:20,320 --> 00:19:22,090
unfortunately now also requires a user

501
00:19:22,090 --> 00:19:24,460
interaction and it also doesn't work in

502
00:19:24,460 --> 00:19:25,720
iframes anymore because there were ads

503
00:19:25,720 --> 00:19:27,490
that were actually like an ad would in

504
00:19:27,490 --> 00:19:28,720
the iframe would just start causing

505
00:19:28,720 --> 00:19:30,160
buzzes on your phone to attract

506
00:19:30,160 --> 00:19:32,500
attention to the ad so they stopped that

507
00:19:32,500 --> 00:19:34,030
but anyway if they interact at all with

508
00:19:34,030 --> 00:19:35,230
their site which they're going to do

509
00:19:35,230 --> 00:19:36,520
then we will be able to start buzzing

510
00:19:36,520 --> 00:19:38,950
their phone which is nice you're

511
00:19:38,950 --> 00:19:40,060
starting to notice a pattern here

512
00:19:40,060 --> 00:19:42,550
basically like the idea was like you

513
00:19:42,550 --> 00:19:43,480
know let's put some of these api's

514
00:19:43,480 --> 00:19:45,580
behind a user interaction and then you

515
00:19:45,580 --> 00:19:46,780
know that way it can't be abused but the

516
00:19:46,780 --> 00:19:48,430
thing is one user interaction maybe

517
00:19:48,430 --> 00:19:50,260
shouldn't be allowed to cause all of

518
00:19:50,260 --> 00:19:51,700
these api's to run at the same time

519
00:19:51,700 --> 00:19:57,430
right okay we got more Safari has a

520
00:19:57,430 --> 00:19:59,770
feature called picture-in-picture which

521
00:19:59,770 --> 00:20:03,400
allows a video site to pop a video out

522
00:20:03,400 --> 00:20:05,320
that hovers on top of all of your

523
00:20:05,320 --> 00:20:07,090
windows on your desktop so you can like

524
00:20:07,090 --> 00:20:08,410
watch a lecture or something while

525
00:20:08,410 --> 00:20:12,250
you're working on other things so what

526
00:20:12,250 --> 00:20:13,600
we do here is we start an invisible

527
00:20:13,600 --> 00:20:16,090
muted video so that it's ready to go and

528
00:20:16,090 --> 00:20:17,410
then as soon as there's an initial user

529
00:20:17,410 --> 00:20:20,260
interaction with the site we we trigger

530
00:20:20,260 --> 00:20:21,130
the picture-in-picture

531
00:20:21,130 --> 00:20:23,140
and then that pops the video out onto

532
00:20:23,140 --> 00:20:24,910
the desktop and actually chrome is

533
00:20:24,910 --> 00:20:26,410
adding this API to

534
00:20:26,410 --> 00:20:30,890
future versions so that's good for us

535
00:20:30,900 --> 00:20:38,650
this one this next one is amazing this

536
00:20:38,650 --> 00:20:41,650
actually works so we can actually just

537
00:20:41,650 --> 00:20:43,600
take away the cursor that's great now

538
00:20:43,600 --> 00:20:45,070
they can't even now they can't even

539
00:20:45,070 --> 00:20:46,180
chase down the windows and try to hit

540
00:20:46,180 --> 00:20:52,680
the X button it's very disorienting

541
00:20:52,690 --> 00:20:54,880
I also saw another actually somewhat

542
00:20:54,880 --> 00:20:56,350
someone did something even more clever

543
00:20:56,350 --> 00:20:58,230
you can actually set custom images as

544
00:20:58,230 --> 00:21:02,020
the cursor and I saw this great site

545
00:21:02,020 --> 00:21:04,330
where someone actually made it so that

546
00:21:04,330 --> 00:21:07,570
like they basically offset the cursor I

547
00:21:07,570 --> 00:21:08,920
wish I had a video of it but anyway they

548
00:21:08,920 --> 00:21:10,930
offset the cursor down by like 100

549
00:21:10,930 --> 00:21:12,700
pixels in each direction and then they

550
00:21:12,700 --> 00:21:14,140
pop something up that you try to close

551
00:21:14,140 --> 00:21:15,790
but when you actually close it you're

552
00:21:15,790 --> 00:21:17,440
actually enabling a permission prompt

553
00:21:17,440 --> 00:21:19,840
because your real cursor is up higher

554
00:21:19,840 --> 00:21:24,750
it's actually great yeah

555
00:21:24,750 --> 00:21:28,930
Security's hard ok so here's another one

556
00:21:28,930 --> 00:21:30,460
and we can this is a great one too

557
00:21:30,460 --> 00:21:31,540
because I don't know if you've seen

558
00:21:31,540 --> 00:21:33,130
websites where it says if you go to

559
00:21:33,130 --> 00:21:34,510
download a file and then you get the

560
00:21:34,510 --> 00:21:35,800
little countdown timer it's like

561
00:21:35,800 --> 00:21:37,780
downloading in five four three two one

562
00:21:37,780 --> 00:21:40,630
and then the file downloads well what

563
00:21:40,630 --> 00:21:42,130
that what's going on is actually you're

564
00:21:42,130 --> 00:21:44,320
allowed to download one file without any

565
00:21:44,320 --> 00:21:46,240
user interaction if you think about it

566
00:21:46,240 --> 00:21:47,230
right because it's it's counting down

567
00:21:47,230 --> 00:21:48,490
and then it downloads a file and you

568
00:21:48,490 --> 00:21:50,140
haven't even clicked anything so we're

569
00:21:50,140 --> 00:21:51,640
allowed to trigger a file download one

570
00:21:51,640 --> 00:21:52,960
file download immediately without any

571
00:21:52,960 --> 00:21:55,060
user interaction but then further file

572
00:21:55,060 --> 00:21:56,740
downloads have to happen in response to

573
00:21:56,740 --> 00:21:58,060
a user initiated event or otherwise the

574
00:21:58,060 --> 00:22:00,100
browser blocks them and then asks the

575
00:22:00,100 --> 00:22:02,500
user it says like the site is trying to

576
00:22:02,500 --> 00:22:03,790
download multiple files would you like

577
00:22:03,790 --> 00:22:06,670
to allow it so we can just call this

578
00:22:06,670 --> 00:22:08,790
right away and give them a give them

579
00:22:08,790 --> 00:22:11,440
various cat pictures in their downloads

580
00:22:11,440 --> 00:22:14,830
folder and remember each pop-up window

581
00:22:14,830 --> 00:22:21,700
can do this

582
00:22:21,710 --> 00:22:24,840
okay this one is really nice so if they

583
00:22:24,840 --> 00:22:26,610
go to hit command W so I mentioned

584
00:22:26,610 --> 00:22:28,590
earlier that that you can you can handle

585
00:22:28,590 --> 00:22:30,389
you can run events when that happens but

586
00:22:30,389 --> 00:22:32,610
I can't think it's chrome actually

587
00:22:32,610 --> 00:22:34,710
doesn't let you call event dot prevent

588
00:22:34,710 --> 00:22:36,840
default on command W because they don't

589
00:22:36,840 --> 00:22:37,769
want you to be able to intercept that

590
00:22:37,769 --> 00:22:39,419
however there's a good trick that

591
00:22:39,419 --> 00:22:43,919
actually works around this so if you in

592
00:22:43,919 --> 00:22:46,139
response to then pushing command you

593
00:22:46,139 --> 00:22:48,750
open a modal dialog like an alert then

594
00:22:48,750 --> 00:22:50,940
the W actually doesn't it doesn't do the

595
00:22:50,940 --> 00:22:52,409
full shortcut anymore because the the

596
00:22:52,409 --> 00:22:53,669
the dialog has opened up and now it just

597
00:22:53,669 --> 00:22:55,409
sees it as a W so all you got to do is

598
00:22:55,409 --> 00:22:56,940
when they push command you just open a

599
00:22:56,940 --> 00:22:58,769
pop-up and then you open up an alert and

600
00:22:58,769 --> 00:23:01,980
then W doesn't work so that's nice and

601
00:23:01,980 --> 00:23:03,809
we can also very varied a little bit for

602
00:23:03,809 --> 00:23:05,039
good fun so in some of that some of the

603
00:23:05,039 --> 00:23:06,480
time we can call window dot print which

604
00:23:06,480 --> 00:23:10,049
asks if they want to print the page and

605
00:23:10,049 --> 00:23:12,149
that's nice and it doesn't actually it

606
00:23:12,149 --> 00:23:13,470
doesn't require any user interaction you

607
00:23:13,470 --> 00:23:17,230
can just call that as much as you want

608
00:23:17,240 --> 00:23:20,399
let's also just throw in a random modal

609
00:23:20,399 --> 00:23:22,259
alert every 30 seconds just for more

610
00:23:22,259 --> 00:23:26,490
chaos you can also full-screen the

611
00:23:26,490 --> 00:23:29,549
browser this happens on user interaction

612
00:23:29,549 --> 00:23:31,110
as well so we need to have a click but

613
00:23:31,110 --> 00:23:34,860
throw that in there all right

614
00:23:34,860 --> 00:23:36,419
so many of these like I think I'm gonna

615
00:23:36,419 --> 00:23:39,149
run out of time okay so this is a good

616
00:23:39,149 --> 00:23:41,399
one I didn't come up this one but you

617
00:23:41,399 --> 00:23:43,289
can there's actually these URLs which if

618
00:23:43,289 --> 00:23:44,700
you send a get request to them they'll

619
00:23:44,700 --> 00:23:46,230
actually log the user out of the the

620
00:23:46,230 --> 00:23:49,049
given website and what's amazing is you

621
00:23:49,049 --> 00:23:50,370
can actually send get requests

622
00:23:50,370 --> 00:23:51,929
cross-origin right think about it like

623
00:23:51,929 --> 00:23:53,370
every time you've included an image tag

624
00:23:53,370 --> 00:23:54,720
you can include an image to a

625
00:23:54,720 --> 00:23:56,190
third-party website and that image will

626
00:23:56,190 --> 00:23:57,539
load just fine and what is that doing

627
00:23:57,539 --> 00:23:59,429
that's making a get request now of

628
00:23:59,429 --> 00:24:00,840
course if you try to make a if you try

629
00:24:00,840 --> 00:24:02,190
to load one of these URLs as an image

630
00:24:02,190 --> 00:24:03,450
it's not going to show an image but

631
00:24:03,450 --> 00:24:05,009
it'll still make the get request the

632
00:24:05,009 --> 00:24:06,299
data will come back they'll be logged

633
00:24:06,299 --> 00:24:10,080
out and then no image will show so let's

634
00:24:10,080 --> 00:24:11,789
just try to do this a lot of these

635
00:24:11,789 --> 00:24:12,809
actually some of these half of these

636
00:24:12,809 --> 00:24:14,549
don't work anymore but it does actually

637
00:24:14,549 --> 00:24:16,740
log you out of google still and a few

638
00:24:16,740 --> 00:24:20,220
other sites so this is the commercial

639
00:24:20,220 --> 00:24:22,409
code to do that we just we just use I

640
00:24:22,409 --> 00:24:23,850
think xhr here or something like that

641
00:24:23,850 --> 00:24:27,929
yeah and it works

642
00:24:27,929 --> 00:24:30,190
here's another one I discovered so let's

643
00:24:30,190 --> 00:24:33,070
disable the back button this is really

644
00:24:33,070 --> 00:24:34,450
fun look at what it's doing it says if

645
00:24:34,450 --> 00:24:36,640
the user goes back they'll trigger pop

646
00:24:36,640 --> 00:24:38,170
state so if the user goes back just send

647
00:24:38,170 --> 00:24:46,330
them forward it's works and then here's

648
00:24:46,330 --> 00:24:48,340
the thing though so the back button has

649
00:24:48,340 --> 00:24:49,900
like a long press feature where you can

650
00:24:49,900 --> 00:24:51,520
hold down the back button and it'll show

651
00:24:51,520 --> 00:24:54,370
you multiple like previous sites you can

652
00:24:54,370 --> 00:24:56,500
go back to like a whole list of them we

653
00:24:56,500 --> 00:24:57,760
don't want them to be able to use that

654
00:24:57,760 --> 00:25:00,520
to actually skip past this code that

655
00:25:00,520 --> 00:25:02,350
we've written here so what we do is when

656
00:25:02,350 --> 00:25:03,730
they first land on the site we fill the

657
00:25:03,730 --> 00:25:06,850
history with extra entries so we just

658
00:25:06,850 --> 00:25:08,980
push state a bunch of extra URLs in that

659
00:25:08,980 --> 00:25:11,230
are our own site and then we push back

660
00:25:11,230 --> 00:25:13,030
the original URL back on so they can't

661
00:25:13,030 --> 00:25:14,140
tell that we've actually gone through

662
00:25:14,140 --> 00:25:16,150
and you know iterated like added like 20

663
00:25:16,150 --> 00:25:18,220
entries to the list and so now they

664
00:25:18,220 --> 00:25:19,809
can't actually hold down either and and

665
00:25:19,809 --> 00:25:26,950
try to go back okay we got more we can

666
00:25:26,950 --> 00:25:34,160
do some embarrassing searches

667
00:25:34,170 --> 00:25:38,290
try to keep it pg so what we do here is

668
00:25:38,290 --> 00:25:40,690
we can actually once in a while when we

669
00:25:40,690 --> 00:25:42,520
open up a pop-up window we'll make one

670
00:25:42,520 --> 00:25:44,680
of those pop-ups actually point to being

671
00:25:44,680 --> 00:25:48,730
searched and I chose being cuz you know

672
00:25:48,730 --> 00:25:54,400
it's pretty funny on its own but you

673
00:25:54,400 --> 00:25:55,420
know to mean heaven being in your

674
00:25:55,420 --> 00:25:58,660
history now I'm just kidding anyway so

675
00:25:58,660 --> 00:26:00,160
so yeah basically this is the code it's

676
00:26:00,160 --> 00:26:01,360
a little too much to see what's going on

677
00:26:01,360 --> 00:26:02,620
but basically it just opens a pop-up

678
00:26:02,620 --> 00:26:04,120
window and then the interesting thing is

679
00:26:04,120 --> 00:26:05,770
so if you open up a pop-up window and

680
00:26:05,770 --> 00:26:07,900
it's on another domain like Bing com

681
00:26:07,900 --> 00:26:10,120
then you I'm no longer allowed to

682
00:26:10,120 --> 00:26:11,770
control it and move it around because

683
00:26:11,770 --> 00:26:14,860
it's on another origin right however as

684
00:26:14,860 --> 00:26:16,060
long as you have a reference to the

685
00:26:16,060 --> 00:26:18,400
window you know in other words we were

686
00:26:18,400 --> 00:26:19,900
the worse side was the one that opened

687
00:26:19,900 --> 00:26:21,340
the window so we have a handle we have a

688
00:26:21,340 --> 00:26:23,050
variable that references that window we

689
00:26:23,050 --> 00:26:24,730
can't actually okay we can't actually

690
00:26:24,730 --> 00:26:26,500
like reach into the page or do anything

691
00:26:26,500 --> 00:26:27,880
to it or move it around but we can do is

692
00:26:27,880 --> 00:26:29,650
set window dot location on it and

693
00:26:29,650 --> 00:26:31,450
redirect it back to ourselves so we can

694
00:26:31,450 --> 00:26:32,770
redirect you to Bing so that the search

695
00:26:32,770 --> 00:26:34,930
gets added to your history and then we

696
00:26:34,930 --> 00:26:36,340
can redirect you back to our own site so

697
00:26:36,340 --> 00:26:37,750
the window can start to move again and

698
00:26:37,750 --> 00:26:39,220
then redirect you to another search and

699
00:26:39,220 --> 00:26:41,230
then just keep looping like this so the

700
00:26:41,230 --> 00:26:42,400
window Bing windows will actually freeze

701
00:26:42,400 --> 00:26:43,930
once in a while while they're loading

702
00:26:43,930 --> 00:26:45,400
the Bing site but then once we once

703
00:26:45,400 --> 00:26:47,170
they've loaded we redirect them back to

704
00:26:47,170 --> 00:26:48,220
our own domain so that we can continue

705
00:26:48,220 --> 00:26:51,940
moving them around your screen ok this

706
00:26:51,940 --> 00:26:54,100
is ok I think this is the last one this

707
00:26:54,100 --> 00:26:56,950
one is extremely surprising this

708
00:26:56,950 --> 00:26:58,270
probably sit was going to surprise a lot

709
00:26:58,270 --> 00:27:04,300
of you so sites that link to two sites

710
00:27:04,300 --> 00:27:06,280
that include links that open in a new

711
00:27:06,280 --> 00:27:09,870
tab using target equals underscore blank

712
00:27:09,870 --> 00:27:12,190
will actually still open links in a new

713
00:27:12,190 --> 00:27:14,830
window however that new window that has

714
00:27:14,830 --> 00:27:17,950
been opened has a variable set called

715
00:27:17,950 --> 00:27:21,250
window opener and that references the

716
00:27:21,250 --> 00:27:23,980
window that opened it this only happens

717
00:27:23,980 --> 00:27:25,600
if your so if your site has been opened

718
00:27:25,600 --> 00:27:27,010
in a new tab you can check window dot

719
00:27:27,010 --> 00:27:29,080
opener and that will be a pointer to

720
00:27:29,080 --> 00:27:31,920
that window that opened to you okay so

721
00:27:31,920 --> 00:27:33,880
like I said before they're like having a

722
00:27:33,880 --> 00:27:35,110
pointer to a window on another origin

723
00:27:35,110 --> 00:27:36,430
doesn't necessarily help you you can't

724
00:27:36,430 --> 00:27:37,780
really do anything but what you can do

725
00:27:37,780 --> 00:27:40,780
is redirect it so if anybody links to

726
00:27:40,780 --> 00:27:43,960
our site the annoying site and it opens

727
00:27:43,960 --> 00:27:45,220
in a new tab and a lot of site

728
00:27:45,220 --> 00:27:46,659
do this for example facebook Messenger

729
00:27:46,659 --> 00:27:47,650
does this when you click a link it'll

730
00:27:47,650 --> 00:27:49,570
open in a new tab will redirect Facebook

731
00:27:49,570 --> 00:27:53,470
to ourselves in response so this is how

732
00:27:53,470 --> 00:27:54,570
you do that

733
00:27:54,570 --> 00:27:56,590
it's actually really crazy that you can

734
00:27:56,590 --> 00:27:57,820
do this so you can imagine like hooking

735
00:27:57,820 --> 00:27:59,470
a link to go to another site and then

736
00:27:59,470 --> 00:28:01,150
you know that site that was previously

737
00:28:01,150 --> 00:28:02,590
like a trusted site now redirects to a

738
00:28:02,590 --> 00:28:03,789
phishing site or something it's really

739
00:28:03,789 --> 00:28:05,770
bad however there was a way to work

740
00:28:05,770 --> 00:28:08,559
around this you can add rel equals no

741
00:28:08,559 --> 00:28:10,210
opener to all of your links that open in

742
00:28:10,210 --> 00:28:12,700
new tabs and then that new tab will not

743
00:28:12,700 --> 00:28:14,919
have window door opener set they can't

744
00:28:14,919 --> 00:28:15,789
do this by default because it's a

745
00:28:15,789 --> 00:28:16,780
breaking change but you should

746
00:28:16,780 --> 00:28:18,070
definitely do this and all your links to

747
00:28:18,070 --> 00:28:21,669
open in a new window okay cool so let's

748
00:28:21,669 --> 00:28:22,840
see it let's put it all together and

749
00:28:22,840 --> 00:28:29,350
let's see what we got all right okay so

750
00:28:29,350 --> 00:28:32,799
I have chrome here actually let's start

751
00:28:32,799 --> 00:28:34,179
in Safari Safari actually it's more

752
00:28:34,179 --> 00:28:34,960
funny in Safari

753
00:28:34,960 --> 00:28:39,900
all right okay so here we go

754
00:28:39,900 --> 00:28:43,630
so it's telling you to hold down space

755
00:28:43,630 --> 00:28:45,610
for three seconds because that triggers

756
00:28:45,610 --> 00:28:47,950
a bunch of repeated events I could also

757
00:28:47,950 --> 00:28:49,480
just click once but I think it's funnier

758
00:28:49,480 --> 00:28:52,350
if I hold down space so let's do that

759
00:28:52,350 --> 00:29:00,130
okay so some stuffs happening well yeah

760
00:29:00,130 --> 00:29:01,570
I don't think my speakers not plugged in

761
00:29:01,570 --> 00:29:02,980
but yeah they have I've sound going

762
00:29:02,980 --> 00:29:24,750
right now

763
00:29:24,760 --> 00:29:27,490
so the more let me turn the volume down

764
00:29:27,490 --> 00:29:31,360
a little bit okay so the more that I hit

765
00:29:31,360 --> 00:29:33,750
escape the more actually windows open up

766
00:29:33,750 --> 00:29:36,400
so if I like own a scene out like my

767
00:29:36,400 --> 00:29:41,180
computer's actually frozen there we go

768
00:29:41,190 --> 00:29:43,120
all right let me try to catch them these

769
00:29:43,120 --> 00:29:44,200
I think if you miss and you actually

770
00:29:44,200 --> 00:29:45,640
click on the window then you open up

771
00:29:45,640 --> 00:29:48,160
more pop-ups so so I'll try to do

772
00:29:48,160 --> 00:29:51,220
command W instead which to see it opens

773
00:29:51,220 --> 00:29:52,270
up this alert window with like a lot of

774
00:29:52,270 --> 00:29:55,390
cats in it and I think I can hit X when

775
00:29:55,390 --> 00:29:56,260
that happens though that's actually

776
00:29:56,260 --> 00:29:58,480
useful oh now it's trying to print so

777
00:29:58,480 --> 00:29:59,860
I'll just I don't wanna print anything

778
00:29:59,860 --> 00:30:01,840
now let's try command W again

779
00:30:01,840 --> 00:30:04,120
okay so I've hidden command W over and

780
00:30:04,120 --> 00:30:05,440
over again but I'm getting and this is

781
00:30:05,440 --> 00:30:06,520
see this actually blocked the opening

782
00:30:06,520 --> 00:30:09,910
here what if I try to go okay I can't

783
00:30:09,910 --> 00:30:10,929
even hit the window here but if I try to

784
00:30:10,929 --> 00:30:14,020
go back I got all the annoying sight if

785
00:30:14,020 --> 00:30:16,710
I check my notice here too this is the

786
00:30:16,710 --> 00:30:19,419
floating floating picture and picture

787
00:30:19,419 --> 00:30:21,429
window down here and my downloads folder

788
00:30:21,429 --> 00:30:29,890
has been filled yeah so this is kind of

789
00:30:29,890 --> 00:30:32,080
a disaster the easiest way to get out of

790
00:30:32,080 --> 00:30:34,000
it is to just you know quit the browser

791
00:30:34,000 --> 00:30:35,530
that actually works but it's gonna ask

792
00:30:35,530 --> 00:30:38,230
me if I'm sure and then the best part is

793
00:30:38,230 --> 00:30:39,580
if you open up the browser again it's

794
00:30:39,580 --> 00:30:44,230
going to recover all the windows so yeah

795
00:30:44,230 --> 00:30:45,880
if I if I'm silly enough to try to hit

796
00:30:45,880 --> 00:30:47,110
command W to close that one of these

797
00:30:47,110 --> 00:30:48,340
it's going to start it's gonna kick it

798
00:30:48,340 --> 00:30:49,809
off and there we go

799
00:30:49,809 --> 00:30:51,700
so you actually have to go by hand and

800
00:30:51,700 --> 00:30:53,620
mouse click on all the X's and hope hope

801
00:30:53,620 --> 00:30:58,750
that you don't miss yeah anyway so this

802
00:30:58,750 --> 00:31:02,049
oh did you hear that

803
00:31:02,049 --> 00:31:04,090
so I use the speech synthesis API to

804
00:31:04,090 --> 00:31:05,620
whenever I try to close a tab it

805
00:31:05,620 --> 00:31:09,760
actually says please don't go let me see

806
00:31:09,760 --> 00:31:14,789
if I could do that again Stan page

807
00:31:14,799 --> 00:31:18,680
all right

808
00:31:18,690 --> 00:31:23,029
[Music]

809
00:31:23,039 --> 00:31:25,149
I'm trying to exit it right now hold on

810
00:31:25,149 --> 00:31:32,499
okay okay cool it stopped all right and

811
00:31:32,499 --> 00:31:34,119
of course this works across browser to I

812
00:31:34,119 --> 00:31:35,080
can prove it you know I mean obviously

813
00:31:35,080 --> 00:31:40,600
it's gonna work here to frozen for some

814
00:31:40,600 --> 00:31:42,940
reason probably has trauma from the last

815
00:31:42,940 --> 00:31:47,470
time I did it okay this right now okay

816
00:31:47,470 --> 00:31:50,590
so anyway yeah so that's like that like

817
00:31:50,590 --> 00:31:51,820
that site is actually live on the

818
00:31:51,820 --> 00:31:58,450
annoying site calm so yeah you can send

819
00:31:58,450 --> 00:32:01,690
it to your friends today they won't be

820
00:32:01,690 --> 00:32:04,720
your friends afterwards so I actually

821
00:32:04,720 --> 00:32:09,429
sent this to the spammer and I think it

822
00:32:09,429 --> 00:32:11,409
was successful I never got any more spam

823
00:32:11,409 --> 00:32:15,519
from him and I have a few more demos I

824
00:32:15,519 --> 00:32:18,489
don't know if I have time I have to have

825
00:32:18,489 --> 00:32:19,809
like it maybe an extra two minutes to

826
00:32:19,809 --> 00:32:22,419
show for me or things okay cool alright

827
00:32:22,419 --> 00:32:25,090
okay cool so I have some other so this

828
00:32:25,090 --> 00:32:26,379
isn't I didn't add these to the annoying

829
00:32:26,379 --> 00:32:30,429
site but these are just sort of fun fun

830
00:32:30,429 --> 00:32:32,859
demos that I thought would be cool to

831
00:32:32,859 --> 00:32:33,190
show you

832
00:32:33,190 --> 00:32:37,480
so I think I think it's this one okay so

833
00:32:37,480 --> 00:32:39,639
one thing we can do with the move the

834
00:32:39,639 --> 00:32:41,679
window moving API is we can make like

835
00:32:41,679 --> 00:32:43,539
actually interesting games using the

836
00:32:43,539 --> 00:32:45,039
window using the windows so we can like

837
00:32:45,039 --> 00:32:48,759
have Windows that have physics so like

838
00:32:48,759 --> 00:32:50,559
if I actually if this was mine what

839
00:32:50,559 --> 00:32:53,350
happened there yeah so if I you can like

840
00:32:53,350 --> 00:32:58,990
play with it with my mouse

841
00:32:59,000 --> 00:33:01,080
it's really basic physics it's just

842
00:33:01,080 --> 00:33:02,520
gravity and then you know detecting the

843
00:33:02,520 --> 00:33:04,800
edges of the windows so I think it would

844
00:33:04,800 --> 00:33:05,910
be fun to make a game with this if

845
00:33:05,910 --> 00:33:08,250
anybody wants to like try to do this go

846
00:33:08,250 --> 00:33:10,560
for it then we can actually have really

847
00:33:10,560 --> 00:33:12,000
use cases for these API so that they

848
00:33:12,000 --> 00:33:17,370
can't take them away yeah so this is a

849
00:33:17,370 --> 00:33:19,070
fun one okay and then I have another one

850
00:33:19,070 --> 00:33:21,450
so this is a fun one so this one

851
00:33:21,450 --> 00:33:22,980
actually is a window which will find

852
00:33:22,980 --> 00:33:24,600
your mouse wherever it is and follow it

853
00:33:24,600 --> 00:33:27,780
around so if I if I move my mouse it

854
00:33:27,780 --> 00:33:29,910
tries to block whatever I'm doing so if

855
00:33:29,910 --> 00:33:31,680
I try to like close something up here

856
00:33:31,680 --> 00:33:32,550
you know it's gonna it's just gonna

857
00:33:32,550 --> 00:33:34,830
follow me around and try to block me and

858
00:33:34,830 --> 00:33:35,460
here's the best part

859
00:33:35,460 --> 00:33:37,110
if I move really fast and I escape the

860
00:33:37,110 --> 00:33:39,600
window look what it does it still finds

861
00:33:39,600 --> 00:33:42,660
me again so this is really explain how

862
00:33:42,660 --> 00:33:44,490
this works that's pretty cool so what's

863
00:33:44,490 --> 00:33:45,750
going on is every time we move my mouse

864
00:33:45,750 --> 00:33:47,190
and mouse move event is triggered and

865
00:33:47,190 --> 00:33:49,140
that will allow the window to recenter

866
00:33:49,140 --> 00:33:51,480
itself around the new position on the

867
00:33:51,480 --> 00:33:53,460
screen right but if I move really

868
00:33:53,460 --> 00:33:55,290
quickly and I leave the window then what

869
00:33:55,290 --> 00:33:57,420
happens is you know it's it's now not

870
00:33:57,420 --> 00:33:59,160
got a nice move event in awhile and so

871
00:33:59,160 --> 00:34:01,080
it realizes that it's lost the mouse and

872
00:34:01,080 --> 00:34:02,760
it needs to search for it and will

873
00:34:02,760 --> 00:34:03,900
notice it doing right now is you see how

874
00:34:03,900 --> 00:34:04,950
it's jumping back and forth left and

875
00:34:04,950 --> 00:34:07,740
right what is suing is it hasn't gotten

876
00:34:07,740 --> 00:34:08,940
a mouse move event in a while and so

877
00:34:08,940 --> 00:34:10,560
it's moving off the mouse and then

878
00:34:10,560 --> 00:34:12,690
moving back on the mouse and even though

879
00:34:12,690 --> 00:34:14,040
it's not the mouse that's moved it's the

880
00:34:14,040 --> 00:34:15,690
window that's moved under the mouse it

881
00:34:15,690 --> 00:34:17,159
still triggers a massive move event and

882
00:34:17,159 --> 00:34:18,510
so that allows this little

883
00:34:18,510 --> 00:34:19,860
back-and-forth motion allows me to

884
00:34:19,860 --> 00:34:21,300
detect that the mouse is still where I

885
00:34:21,300 --> 00:34:23,010
thought it was it just hasn't moved so I

886
00:34:23,010 --> 00:34:24,570
go off on oh it's still there okay cool

887
00:34:24,570 --> 00:34:26,129
stay there but it does this every so

888
00:34:26,129 --> 00:34:27,659
often and then but if I escape

889
00:34:27,659 --> 00:34:29,310
completely then it does a little back

890
00:34:29,310 --> 00:34:30,570
and forth and I can hear I can actually

891
00:34:30,570 --> 00:34:31,740
show you in slow motion so I have a

892
00:34:31,740 --> 00:34:33,600
version that runs at very much slower

893
00:34:33,600 --> 00:34:35,159
speeds so if I move the mouse you'll see

894
00:34:35,159 --> 00:34:36,629
it's gonna it's gonna follow the mouse

895
00:34:36,629 --> 00:34:37,800
this is running at much slower speed

896
00:34:37,800 --> 00:34:41,250
okay now if I hold still you'll see it's

897
00:34:41,250 --> 00:34:44,340
gonna go off on and it's like oh you're

898
00:34:44,340 --> 00:34:45,990
still there okay I'll stay here for a

899
00:34:45,990 --> 00:34:48,450
while and then I'll test again off on

900
00:34:48,450 --> 00:34:50,210
but now if I escape watch what happens

901
00:34:50,210 --> 00:34:52,590
it does basically like a binary search

902
00:34:52,590 --> 00:34:54,480
so it's gonna try the left half of it so

903
00:34:54,480 --> 00:34:56,730
it does back and forth it sees okay the

904
00:34:56,730 --> 00:34:57,990
mouse isn't there now so now I'm gonna

905
00:34:57,990 --> 00:34:59,400
try the left side of the screen and try

906
00:34:59,400 --> 00:35:01,320
the right side of the screen oh there

907
00:35:01,320 --> 00:35:01,800
you are

908
00:35:01,800 --> 00:35:09,410
found you

909
00:35:09,420 --> 00:35:10,630
cool

910
00:35:10,630 --> 00:35:12,480
alright last one since I'm out of time

911
00:35:12,480 --> 00:35:15,430
this one is okay I haven't actually told

912
00:35:15,430 --> 00:35:17,440
anyone about this one yet you guys are

913
00:35:17,440 --> 00:35:20,020
the first to see it and I'm I'm not

914
00:35:20,020 --> 00:35:21,430
gonna probably gonna show the code until

915
00:35:21,430 --> 00:35:23,079
I do something fun with it I'm gonna

916
00:35:23,079 --> 00:35:26,230
make a game with it but what I can do is

917
00:35:26,230 --> 00:35:29,619
with a single keyboard event I can open

918
00:35:29,619 --> 00:35:31,720
up an unlimited number of Windows not

919
00:35:31,720 --> 00:35:32,859
just one I can open up an unlimited

920
00:35:32,859 --> 00:35:33,849
number that's not supposed to be

921
00:35:33,849 --> 00:35:38,200
possible and yet Oh what happened

922
00:35:38,200 --> 00:35:42,190
Oh probably you might compete I don't

923
00:35:42,190 --> 00:35:44,109
know what's going on here this happened

924
00:35:44,109 --> 00:35:55,300
a moment ago two rows really unhappy

925
00:35:55,300 --> 00:36:00,070
with me oh it stopped there okay well

926
00:36:00,070 --> 00:36:02,290
anyway when it doesn't freeze it

927
00:36:02,290 --> 00:36:05,730
actually tiles the screen with Windows

928
00:36:05,730 --> 00:36:08,200
anyway that's it that's pretty much my

929
00:36:08,200 --> 00:36:12,130
talk if you want to reach out to me for

930
00:36:12,130 --> 00:36:13,450
us on Twitter I'm going to post my

931
00:36:13,450 --> 00:36:14,950
slides there afterwards and my websites

932
00:36:14,950 --> 00:36:16,950
frosted org thank you very much

