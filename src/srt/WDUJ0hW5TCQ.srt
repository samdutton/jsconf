1
00:00:05,450 --> 00:00:07,490

what you want to do is you want to get

2
00:00:07,490 --> 00:00:10,660
this thing that is in your swag bag

3
00:00:10,660 --> 00:00:13,340
assembled if you are like me and

4
00:00:13,340 --> 00:00:16,160
basically incapable of using your

5
00:00:16,160 --> 00:00:18,110
fingers for anything but typing and

6
00:00:18,110 --> 00:00:22,640
holding food in Switzerland that's

7
00:00:22,640 --> 00:00:24,759
really handy to be able to hold food

8
00:00:24,759 --> 00:00:27,500
traditions and stuff anyway so you can

9
00:00:27,500 --> 00:00:29,660
assemble it right now or you're going to

10
00:00:29,660 --> 00:00:31,820
assemble it later when I assemble it in

11
00:00:31,820 --> 00:00:35,149
front of you so gather around kits if

12
00:00:35,149 --> 00:00:37,520
you need some help tinkering right um

13
00:00:37,520 --> 00:00:39,830
with that out of the way so how does

14
00:00:39,830 --> 00:00:42,050
that this begin and I'd like to sort of

15
00:00:42,050 --> 00:00:44,210
as this is the last call I'd like to

16
00:00:44,210 --> 00:00:46,930
sort of go back in history of it so in

17
00:00:46,930 --> 00:00:50,210
2011 was so a very very small meetup

18
00:00:50,210 --> 00:00:52,730
group in effort which is eastern Germany

19
00:00:52,730 --> 00:00:54,670
where i lived at the time for studies

20
00:00:54,670 --> 00:00:58,040
invited me to speak about some random

21
00:00:58,040 --> 00:01:01,370
stuff i think it was html5 as a flesh

22
00:01:01,370 --> 00:01:03,500
replacement or something and that was

23
00:01:03,500 --> 00:01:05,590
brilliant and that got me into sort of

24
00:01:05,590 --> 00:01:08,149
in delete this entire community thing

25
00:01:08,149 --> 00:01:10,729
and then in November I think I got an

26
00:01:10,729 --> 00:01:14,810
email with the headline Jace conv us

27
00:01:14,810 --> 00:01:18,170
last call speaker invitation and I was

28
00:01:18,170 --> 00:01:19,969
in public but that didn't prevent me

29
00:01:19,969 --> 00:01:26,030
going full bananas about that so thank

30
00:01:26,030 --> 00:01:28,100
you so much for putting up this one and

31
00:01:28,100 --> 00:01:30,109
I like to take this opportunity to thank

32
00:01:30,109 --> 00:01:32,359
all the communities that I got to visit

33
00:01:32,359 --> 00:01:34,579
over the last couple of years and all

34
00:01:34,579 --> 00:01:37,310
the people I met and all the fun we had

35
00:01:37,310 --> 00:01:40,240
and all the the tough decisions and

36
00:01:40,240 --> 00:01:44,899
chats we had and right with this one

37
00:01:44,899 --> 00:01:46,520
we're going to dive in into the actual

38
00:01:46,520 --> 00:01:47,779
topic so we're going to talk about

39
00:01:47,779 --> 00:01:50,630
virtual reality and here are two

40
00:01:50,630 --> 00:01:55,490
examples the the woman has fun and it's

41
00:01:55,490 --> 00:01:57,200
pretty astound because she thinks she

42
00:01:57,200 --> 00:01:59,779
stands right below a chopper over some

43
00:01:59,779 --> 00:02:01,729
random city and then there's this other

44
00:02:01,729 --> 00:02:04,039
guy who walks through an apartment that

45
00:02:04,039 --> 00:02:07,999
doesn't even exist yet so you can see

46
00:02:07,999 --> 00:02:10,190
from the actions at least of the lady

47
00:02:10,190 --> 00:02:11,750
the guy is a Swiss guy so he has zero

48
00:02:11,750 --> 00:02:17,280
facial expressions just like me that

49
00:02:17,280 --> 00:02:20,850
true anyway so it's really amazing and

50
00:02:20,850 --> 00:02:24,360
it actually gets it sun sets it set free

51
00:02:24,360 --> 00:02:27,120
a lot of emotions and feelings because

52
00:02:27,120 --> 00:02:29,280
it tricks a very low level of our brain

53
00:02:29,280 --> 00:02:31,709
activity to think that we are in a place

54
00:02:31,709 --> 00:02:35,280
that we actually aren't and originally

55
00:02:35,280 --> 00:02:37,290
this demo was designed for a small

56
00:02:37,290 --> 00:02:39,420
number of people because I thought who's

57
00:02:39,420 --> 00:02:41,489
gonna have a cardboard I mean come on a

58
00:02:41,489 --> 00:02:43,020
lot of people haven't even heard about

59
00:02:43,020 --> 00:02:45,540
that so I tested with six people and it

60
00:02:45,540 --> 00:02:48,239
was working nicely and like ah I'm done

61
00:02:48,239 --> 00:02:50,280
so i can just you know pack for

62
00:02:50,280 --> 00:02:51,810
cardboards and have a little live demo

63
00:02:51,810 --> 00:02:54,660
with a few selected volunteers now the

64
00:02:54,660 --> 00:02:57,170
situation is slightly different and

65
00:02:57,170 --> 00:02:59,730
let's hope it doesn't end like it ended

66
00:02:59,730 --> 00:03:05,269
in the movie right so without much more

67
00:03:05,269 --> 00:03:09,480
other talking here is how you assemble

68
00:03:09,480 --> 00:03:11,790
this one pull it from the cover it's

69
00:03:11,790 --> 00:03:13,140
going to be a bit like these airport

70
00:03:13,140 --> 00:03:15,900
airline dance right you pull it out of

71
00:03:15,900 --> 00:03:19,920
the cover you can put the cover away for

72
00:03:19,920 --> 00:03:23,190
later reuse of the cardboard device open

73
00:03:23,190 --> 00:03:28,079
up the lib that wasn't so smooth right

74
00:03:28,079 --> 00:03:35,130
and get this flap over fold it over fix

75
00:03:35,130 --> 00:03:40,680
it with the velcro to both sides take

76
00:03:40,680 --> 00:03:43,920
your phone go to that web address and I

77
00:03:43,920 --> 00:03:45,959
really hope it doesn't crash or we

78
00:03:45,959 --> 00:03:49,519
satisfy saturate the entire uplink and

79
00:03:49,519 --> 00:03:54,660
now we get this so if you can't use your

80
00:03:54,660 --> 00:03:56,310
phone or if it doesn't work with your

81
00:03:56,310 --> 00:03:58,350
cardboard device you can check it out

82
00:03:58,350 --> 00:04:00,660
here as well so we click to start the

83
00:04:00,660 --> 00:04:04,070
demo which connects us to the server

84
00:04:04,070 --> 00:04:07,140
that then goes into loading forever

85
00:04:07,140 --> 00:04:09,600
because we do that it will saturate the

86
00:04:09,600 --> 00:04:11,760
the upload oh god there's a lot of

87
00:04:11,760 --> 00:04:15,269
people already and you put in the the

88
00:04:15,269 --> 00:04:18,780
phone in here and you can pick it up

89
00:04:18,780 --> 00:04:21,390
like that and ladies and gentlemen a

90
00:04:21,390 --> 00:04:25,009
moment of silence I'm going in

91
00:04:25,009 --> 00:04:30,300
and as all the horses oh my god and you

92
00:04:30,300 --> 00:04:38,610
can move like me so let's see wow that's

93
00:04:38,610 --> 00:04:47,129
a ton of people horse jas multi-user hi

94
00:04:47,129 --> 00:04:52,409
there how's it going some people are

95
00:04:52,409 --> 00:04:54,689
having trouble moving I guess or we ask

96
00:04:54,689 --> 00:05:05,449
me screwing up the network ah alright

97
00:05:05,449 --> 00:05:14,849
that was it um no have fun but please so

98
00:05:14,849 --> 00:05:17,719
that has been at least 20 people Wow

99
00:05:17,719 --> 00:05:22,919
right so this slide is a bit nice and it

100
00:05:22,919 --> 00:05:26,249
doesn't have this like so voila if it

101
00:05:26,249 --> 00:05:27,569
would have crashed i would have gone

102
00:05:27,569 --> 00:05:30,629
like sorry so it's really nice because

103
00:05:30,629 --> 00:05:35,439
this photo is pretty much multipurpose

104
00:05:35,449 --> 00:05:37,979
alright so what what is in there what is

105
00:05:37,979 --> 00:05:42,149
behind that demo well first of all we

106
00:05:42,149 --> 00:05:44,250
have to get 3d content on screen and

107
00:05:44,250 --> 00:05:46,199
we're going to use WebGL for that

108
00:05:46,199 --> 00:05:47,759
because it's the perfect technology for

109
00:05:47,759 --> 00:05:50,909
putting 3d content on screen and then we

110
00:05:50,909 --> 00:05:52,710
have to get this entire sensor thing

111
00:05:52,710 --> 00:05:54,060
working it also works with the oculus

112
00:05:54,060 --> 00:05:56,819
rift in certain browsers actually it

113
00:05:56,819 --> 00:05:58,229
will probably work with other hardware

114
00:05:58,229 --> 00:06:00,949
as well it works with the gear VR

115
00:06:00,949 --> 00:06:03,270
theoretically I haven't ever seen that

116
00:06:03,270 --> 00:06:06,120
practically working and we use we're

117
00:06:06,120 --> 00:06:07,740
going to use web PR for it which is a

118
00:06:07,740 --> 00:06:11,099
standards proposal or spec draft that is

119
00:06:11,099 --> 00:06:15,089
in development right now we also need

120
00:06:15,089 --> 00:06:17,009
high speed networking in the browser and

121
00:06:17,009 --> 00:06:21,870
WebRTC kinda comes in handy ly here so

122
00:06:21,870 --> 00:06:24,899
let's talk about WebGL what is WebGL

123
00:06:24,899 --> 00:06:27,689
well first of all everything that we're

124
00:06:27,689 --> 00:06:28,979
going to draw on screen is made of

125
00:06:28,979 --> 00:06:31,770
pixels in WebGL because we like to

126
00:06:31,770 --> 00:06:33,990
invent new words we invented the word

127
00:06:33,990 --> 00:06:35,909
verdicts and multiple things are

128
00:06:35,909 --> 00:06:37,380
vertices because irregular

129
00:06:37,380 --> 00:06:39,770
worlds are fun for non-native speakers

130
00:06:39,770 --> 00:06:42,870
so here we see four points these four

131
00:06:42,870 --> 00:06:44,730
points are not just 2d points but

132
00:06:44,730 --> 00:06:46,380
actually have a set coordinate that can

133
00:06:46,380 --> 00:06:48,150
go into the screen or out of the screen

134
00:06:48,150 --> 00:06:51,690
so it's a 3d point if you wish and we

135
00:06:51,690 --> 00:06:54,180
have four of them now drawing points by

136
00:06:54,180 --> 00:06:56,010
themselves isn't very terribly

137
00:06:56,010 --> 00:06:58,410
interesting and actually making surfaces

138
00:06:58,410 --> 00:07:00,690
from them it's very very inefficient if

139
00:07:00,690 --> 00:07:02,910
you do it in JavaScript so we have a

140
00:07:02,910 --> 00:07:05,610
thing that's called faces and faces are

141
00:07:05,610 --> 00:07:08,550
basically just vertices connected to

142
00:07:08,550 --> 00:07:12,510
form certain well shapes can be quads or

143
00:07:12,510 --> 00:07:14,370
can be triangles triangles are handy

144
00:07:14,370 --> 00:07:15,810
because you can pretty much approximate

145
00:07:15,810 --> 00:07:19,380
every shape with triangles so we have

146
00:07:19,380 --> 00:07:21,540
these two and we put them into two typed

147
00:07:21,540 --> 00:07:25,260
arrays float32 so that we have a bit of

148
00:07:25,260 --> 00:07:27,930
precision and we have two lists one is

149
00:07:27,930 --> 00:07:29,790
what all our points and the other one is

150
00:07:29,790 --> 00:07:34,200
with our faces and now what well now

151
00:07:34,200 --> 00:07:35,850
we're going to put them on to what's

152
00:07:35,850 --> 00:07:38,250
called the GPU or the graphics card in

153
00:07:38,250 --> 00:07:41,010
your device that doesn't have to be one

154
00:07:41,010 --> 00:07:42,720
of these bulky cards it can actually be

155
00:07:42,720 --> 00:07:44,700
just the chip that you have in your

156
00:07:44,700 --> 00:07:47,730
phone so we see blue boxes here we see

157
00:07:47,730 --> 00:07:50,430
green boxes here and we see red box one

158
00:07:50,430 --> 00:07:53,850
red box the colors mean the blue ones

159
00:07:53,850 --> 00:07:56,970
are actually running on the cpu and are

160
00:07:56,970 --> 00:07:59,610
in JavaScript but the first thing we're

161
00:07:59,610 --> 00:08:01,080
going to do is we take these two arrays

162
00:08:01,080 --> 00:08:03,090
and put them into what's called a GL

163
00:08:03,090 --> 00:08:05,100
buffer which is nothing else than a

164
00:08:05,100 --> 00:08:07,050
bunch of memory on the graphics card

165
00:08:07,050 --> 00:08:09,030
that's what the greenboxes mean we are

166
00:08:09,030 --> 00:08:10,980
now crossing the border towards the

167
00:08:10,980 --> 00:08:13,410
graphics card we can also use this to

168
00:08:13,410 --> 00:08:15,990
mine bitcoins I mean do other

169
00:08:15,990 --> 00:08:17,550
interesting things actually you can't

170
00:08:17,550 --> 00:08:19,350
mine bitcoins I heard I know that I

171
00:08:19,350 --> 00:08:21,330
tried but apparently there's

172
00:08:21,330 --> 00:08:23,070
blacklisting going on when you try to do

173
00:08:23,070 --> 00:08:26,040
that and then it goes into these buffers

174
00:08:26,040 --> 00:08:28,680
then go into what's called a vertex

175
00:08:28,680 --> 00:08:30,870
trader what does this thing do well a

176
00:08:30,870 --> 00:08:33,000
vertex shader is basically a program

177
00:08:33,000 --> 00:08:34,620
that runs on the GPU and its really

178
00:08:34,620 --> 00:08:37,410
really fast and pushes these points

179
00:08:37,410 --> 00:08:39,240
around if needed so for instance if this

180
00:08:39,240 --> 00:08:41,430
point is there and my camera is turning

181
00:08:41,430 --> 00:08:43,860
the point has to sort of move right so

182
00:08:43,860 --> 00:08:45,420
that's what the vertex shader can do for

183
00:08:45,420 --> 00:08:48,030
us that generates what's called

184
00:08:48,030 --> 00:08:49,830
rasterized fragment so actually that

185
00:08:49,830 --> 00:08:50,850
goes into a rest

186
00:08:50,850 --> 00:08:53,370
which rested into fragments so that's

187
00:08:53,370 --> 00:08:54,839
more or less the actual pixels that

188
00:08:54,839 --> 00:08:57,360
we're going to color in later on now how

189
00:08:57,360 --> 00:08:59,009
do we going to color them in right we

190
00:08:59,009 --> 00:09:00,690
have to sort of know that well that's

191
00:09:00,690 --> 00:09:02,790
what a fragment shader does it's another

192
00:09:02,790 --> 00:09:05,880
piece of program on the GPU that colors

193
00:09:05,880 --> 00:09:08,399
in every single pixel using images or

194
00:09:08,399 --> 00:09:10,709
using some sort of math and it's also

195
00:09:10,709 --> 00:09:12,420
really fast because it's highly parallel

196
00:09:12,420 --> 00:09:18,420
and that generates this textured piece

197
00:09:18,420 --> 00:09:21,480
off of concrete wall as a knock on brick

198
00:09:21,480 --> 00:09:24,300
wall and now the last question the

199
00:09:24,300 --> 00:09:26,459
question remaining might be what is then

200
00:09:26,459 --> 00:09:29,639
this shader code thing it is code that

201
00:09:29,639 --> 00:09:32,790
we can write and upload to the GPU but

202
00:09:32,790 --> 00:09:34,139
we can't write it in JavaScript

203
00:09:34,139 --> 00:09:36,360
unfortunately we have to write it in GL

204
00:09:36,360 --> 00:09:39,660
slang which is glsl GL shader language

205
00:09:39,660 --> 00:09:43,259
it's AC dialect that's used in WebGL and

206
00:09:43,259 --> 00:09:45,300
OpenGL and then we can actually

207
00:09:45,300 --> 00:09:46,800
influence this program in this program

208
00:09:46,800 --> 00:09:52,709
and write our own Bitcoin mining right

209
00:09:52,709 --> 00:09:54,779
but this is pretty birdie and pretty

210
00:09:54,779 --> 00:09:57,089
verbose so there's libraries on top of

211
00:09:57,089 --> 00:10:00,079
it one as we'd like to sort of push

212
00:10:00,079 --> 00:10:02,990
Microsoft's open source strategy so

213
00:10:02,990 --> 00:10:06,000
Babylon Jas is a brilliant library and

214
00:10:06,000 --> 00:10:08,880
engine on top of WebGL that runs in the

215
00:10:08,880 --> 00:10:10,319
browser quite nicely and is primarily

216
00:10:10,319 --> 00:10:11,850
aimed at games but you can do other

217
00:10:11,850 --> 00:10:13,769
things with it as well I think they

218
00:10:13,769 --> 00:10:16,920
build a flight simulator in it and then

219
00:10:16,920 --> 00:10:19,589
another one that's popular it's 3gs so

220
00:10:19,589 --> 00:10:22,500
this is what three.js does 3j is pretty

221
00:10:22,500 --> 00:10:25,410
much is having the concept of what you

222
00:10:25,410 --> 00:10:26,730
would do when you would try to shoot a

223
00:10:26,730 --> 00:10:28,050
movie you have it seen which is

224
00:10:28,050 --> 00:10:30,420
basically just an empty stage you have a

225
00:10:30,420 --> 00:10:33,060
camera that films this stage hi camera

226
00:10:33,060 --> 00:10:36,209
and then you just put people on to other

227
00:10:36,209 --> 00:10:37,860
things onto the stage and then you have

228
00:10:37,860 --> 00:10:39,810
to sort of move them around and stuff so

229
00:10:39,810 --> 00:10:40,800
this is more or less what we are doing

230
00:10:40,800 --> 00:10:42,480
here we have a scene we have a camera we

231
00:10:42,480 --> 00:10:44,040
have a renderer this doesn't quite fit

232
00:10:44,040 --> 00:10:46,110
the metaphor but ignore that and then we

233
00:10:46,110 --> 00:10:47,910
have a box which is a mesh which

234
00:10:47,910 --> 00:10:49,560
basically is a bunch of faces and

235
00:10:49,560 --> 00:10:52,470
vertices and textures and stuff put

236
00:10:52,470 --> 00:10:54,839
together put that onto the scene render

237
00:10:54,839 --> 00:10:57,240
it do it in a request animation frame

238
00:10:57,240 --> 00:11:00,089
and you should get 60 frames per second

239
00:11:00,089 --> 00:11:02,550
if you do it right a lot of people do it

240
00:11:02,550 --> 00:11:03,710
wrong including me

241
00:11:03,710 --> 00:11:08,840
sometimes so besides that the next thing

242
00:11:08,840 --> 00:11:10,910
then would be to go into web PR and

243
00:11:10,910 --> 00:11:13,550
there's a bevy r dot info has a bunch of

244
00:11:13,550 --> 00:11:18,500
resources on what you can do with web PR

245
00:11:18,500 --> 00:11:20,300
and how the specification currently

246
00:11:20,300 --> 00:11:22,790
stands it also links to resources on how

247
00:11:22,790 --> 00:11:26,510
you can get started and let's go a bit

248
00:11:26,510 --> 00:11:29,510
back ends in time why am I so

249
00:11:29,510 --> 00:11:32,120
enthusiastic about web PR or virtual

250
00:11:32,120 --> 00:11:35,240
reality in general virtual reality isn't

251
00:11:35,240 --> 00:11:38,120
a new thing it I think the first one

252
00:11:38,120 --> 00:11:40,790
that I found was the first research was

253
00:11:40,790 --> 00:11:44,720
published in 1962 that was long before I

254
00:11:44,720 --> 00:11:47,270
was born and probably some of you as

255
00:11:47,270 --> 00:11:51,560
well and in 1968 we got the thing on the

256
00:11:51,560 --> 00:11:54,050
on the slide which is called the demo

257
00:11:54,050 --> 00:11:57,170
class sort and I find that a very very

258
00:11:57,170 --> 00:11:59,330
well coined term because it's kind of

259
00:11:59,330 --> 00:12:02,470
cool but on the other hand look at it

260
00:12:02,470 --> 00:12:05,630
and no I wouldn't try that one

261
00:12:05,630 --> 00:12:07,880
especially because you can't just I mean

262
00:12:07,880 --> 00:12:09,950
every one of us nowadays I mean this is

263
00:12:09,950 --> 00:12:12,260
1968 everyone has one of those at home

264
00:12:12,260 --> 00:12:16,160
right no you don't first of all it takes

265
00:12:16,160 --> 00:12:19,070
a lot of space in a second it's freaking

266
00:12:19,070 --> 00:12:22,580
creepy if I might say it looks a bit

267
00:12:22,580 --> 00:12:23,960
like they would be shooting something

268
00:12:23,960 --> 00:12:26,810
into his head with yeah whatever it's

269
00:12:26,810 --> 00:12:28,520
horrible but it was really really cool

270
00:12:28,520 --> 00:12:29,990
and it was the first head mounted

271
00:12:29,990 --> 00:12:35,120
display for virtual reality 1968 then

272
00:12:35,120 --> 00:12:37,310
this happened a couple of years ago the

273
00:12:37,310 --> 00:12:39,470
oculus rift this is the dk2 which is

274
00:12:39,470 --> 00:12:41,840
currently available soon to be replaced

275
00:12:41,840 --> 00:12:45,890
by the customer version one in q1 2016

276
00:12:45,890 --> 00:12:49,130
so this one as you might might wonder

277
00:12:49,130 --> 00:12:51,710
about it this is multi thousand dollars

278
00:12:51,710 --> 00:12:53,080
right this is really really expensive

279
00:12:53,080 --> 00:12:58,930
this one is I think 250 or 350 right now

280
00:12:58,930 --> 00:13:02,450
but oculus actually published the

281
00:13:02,450 --> 00:13:04,850
specifications like the requirements and

282
00:13:04,850 --> 00:13:06,680
hardware that you gotta have and they

283
00:13:06,680 --> 00:13:09,380
are really really beefy most computers

284
00:13:09,380 --> 00:13:11,660
won't be able to you can't run it on a

285
00:13:11,660 --> 00:13:13,850
macbook you can't run it off your imac

286
00:13:13,850 --> 00:13:14,840
because they are not going

287
00:13:14,840 --> 00:13:17,510
for Mac OS X right now they do kinda run

288
00:13:17,510 --> 00:13:20,260
it on Linux which pisses me off and

289
00:13:20,260 --> 00:13:23,330
Debian can do everything but not vr like

290
00:13:23,330 --> 00:13:26,030
well I actually it works fun fact it

291
00:13:26,030 --> 00:13:28,790
works out of the box ish if you know the

292
00:13:28,790 --> 00:13:32,360
right you know current options anyway so

293
00:13:32,360 --> 00:13:35,290
this is three hundred fifty dollars plus

294
00:13:35,290 --> 00:13:37,430
approximately a thousand dollars in

295
00:13:37,430 --> 00:13:39,230
hardware that you have to get specific

296
00:13:39,230 --> 00:13:40,880
for this purpose obviously you can use

297
00:13:40,880 --> 00:13:42,380
it for other games and stuff as well but

298
00:13:42,380 --> 00:13:45,140
it's kind of specific still but then

299
00:13:45,140 --> 00:13:48,010
this happened and I don't mean today

300
00:13:48,010 --> 00:13:52,010
right so when I ordered my first

301
00:13:52,010 --> 00:13:53,930
cardboard from China it cost me

302
00:13:53,930 --> 00:13:56,110
including shipping which was free

303
00:13:56,110 --> 00:13:58,880
shipping to Switzerland that is two

304
00:13:58,880 --> 00:14:06,710
dollars to I get 0.75 espresso in Zurich

305
00:14:06,710 --> 00:14:11,810
for that so espresso or cardboard and I

306
00:14:11,810 --> 00:14:17,450
said I cardboard and I never regret that

307
00:14:17,450 --> 00:14:19,940
so that's pretty cool obviously it's

308
00:14:19,940 --> 00:14:21,530
it's kind of cheating because you have

309
00:14:21,530 --> 00:14:23,710
to have a phone that is capable of

310
00:14:23,710 --> 00:14:26,690
running 3d content so it's not really

311
00:14:26,690 --> 00:14:28,550
that cheap but on the other hand if you

312
00:14:28,550 --> 00:14:30,500
look at it how many people do have a

313
00:14:30,500 --> 00:14:32,900
more or less recent smartphone how many

314
00:14:32,900 --> 00:14:35,480
people do have a dedicated gamer pc

315
00:14:35,480 --> 00:14:39,470
right so yeah it's it's a thing and

316
00:14:39,470 --> 00:14:42,650
actually we saw it working with working

317
00:14:42,650 --> 00:14:47,660
reasonably well with iphone 3g so that's

318
00:14:47,660 --> 00:14:49,730
alright dish it's not the same

319
00:14:49,730 --> 00:14:51,380
experience as with the oculus the oculus

320
00:14:51,380 --> 00:14:53,780
comes with a motion tracker as well so

321
00:14:53,780 --> 00:14:56,060
you can literally have the motion

322
00:14:56,060 --> 00:14:57,910
tracker set up like this and then go

323
00:14:57,910 --> 00:15:01,880
around things and sort of bow down or

324
00:15:01,880 --> 00:15:04,220
try to get up on your toes you can't

325
00:15:04,220 --> 00:15:05,450
really do that with a cardboard because

326
00:15:05,450 --> 00:15:07,040
it doesn't have any sense of where in

327
00:15:07,040 --> 00:15:11,540
space you are but to be honest ninety

328
00:15:11,540 --> 00:15:13,070
percent of the times it doesn't matter

329
00:15:13,070 --> 00:15:15,890
right you can do a lot of mind-blowing

330
00:15:15,890 --> 00:15:18,980
things without that and that is amazing

331
00:15:18,980 --> 00:15:21,590
and that's accessible as well and

332
00:15:21,590 --> 00:15:24,230
there's a personal story for me behind

333
00:15:24,230 --> 00:15:26,540
the cardboard which is I have a family

334
00:15:26,540 --> 00:15:27,310
member

335
00:15:27,310 --> 00:15:29,920
who is unfortunately suffering a pretty

336
00:15:29,920 --> 00:15:33,850
extreme case of social anxiety so he

337
00:15:33,850 --> 00:15:36,060
really doesn't get out of the house much

338
00:15:36,060 --> 00:15:39,850
and that's particularly annoying for him

339
00:15:39,850 --> 00:15:43,990
because he sees how everyone in the

340
00:15:43,990 --> 00:15:45,790
family sort of gets around the world and

341
00:15:45,790 --> 00:15:48,339
gets to see nice places and and has all

342
00:15:48,339 --> 00:15:50,260
these memories and all we can do is we

343
00:15:50,260 --> 00:15:52,990
can bring them back as photos or videos

344
00:15:52,990 --> 00:15:55,450
but the problem with videos or photos is

345
00:15:55,450 --> 00:15:57,880
like this one you stand in front of a

346
00:15:57,880 --> 00:16:01,180
flat thing that's more or less static it

347
00:16:01,180 --> 00:16:02,950
doesn't react to you it doesn't give you

348
00:16:02,950 --> 00:16:04,360
the same feelings it doesn't give you

349
00:16:04,360 --> 00:16:06,790
the same experience I'm not saying that

350
00:16:06,790 --> 00:16:08,650
virtual reality and particularly the

351
00:16:08,650 --> 00:16:10,960
cardboard does give you the same but

352
00:16:10,960 --> 00:16:12,760
it's a pretty pretty good substitute

353
00:16:12,760 --> 00:16:15,070
right if you can't have this particular

354
00:16:15,070 --> 00:16:17,800
thing for whatever reason physical

355
00:16:17,800 --> 00:16:20,500
disability mental disability or just

356
00:16:20,500 --> 00:16:23,050
because I'm pretty sure time travel

357
00:16:23,050 --> 00:16:24,070
isn't going to be around for another

358
00:16:24,070 --> 00:16:30,610
five years probably so ancient Rome hard

359
00:16:30,610 --> 00:16:33,250
to get there Pompeii before it was

360
00:16:33,250 --> 00:16:35,650
destroyed by the vesuvio how to get

361
00:16:35,650 --> 00:16:39,100
there even actually the train connection

362
00:16:39,100 --> 00:16:41,140
to Pompeii is really really bad if you

363
00:16:41,140 --> 00:16:43,630
ever plan on going there so even getting

364
00:16:43,630 --> 00:16:46,450
there today is pretty hard that aside

365
00:16:46,450 --> 00:16:49,270
this opens up this possibility and I

366
00:16:49,270 --> 00:16:53,830
gave him a cardboard and I took a photo

367
00:16:53,830 --> 00:16:55,870
sphere so that's basically a panorama

368
00:16:55,870 --> 00:16:58,450
image but you also do it up and down so

369
00:16:58,450 --> 00:17:00,850
you get a full sphere covering the space

370
00:17:00,850 --> 00:17:04,990
around you of a place in Zurich one on

371
00:17:04,990 --> 00:17:06,819
the mountain while Swiss people will

372
00:17:06,819 --> 00:17:11,199
kill me now on a hill 500 meters as

373
00:17:11,199 --> 00:17:15,819
opposed I walk that home and and swim it

374
00:17:15,819 --> 00:17:18,449
back anyway um

375
00:17:18,449 --> 00:17:20,890
I'm not even kidding i figured this one

376
00:17:20,890 --> 00:17:23,470
out this summer like it's so hot i don't

377
00:17:23,470 --> 00:17:24,970
want to get into the bus you don't have

378
00:17:24,970 --> 00:17:28,350
to you can float down the river yeah and

379
00:17:28,350 --> 00:17:33,070
i did and and one day I didn't get out

380
00:17:33,070 --> 00:17:34,840
in time and I was there in the stream

381
00:17:34,840 --> 00:17:38,049
I'm like oh this is so nice what where r

382
00:17:38,049 --> 00:17:41,410
waves coming from in a river and while I

383
00:17:41,410 --> 00:17:43,929
was thinking about that the answer made

384
00:17:43,929 --> 00:17:47,980
itself very clear if you don't get it

385
00:17:47,980 --> 00:17:50,200
yourself stones very close to the

386
00:17:50,200 --> 00:17:54,210
surface is the answer in strong current

387
00:17:54,210 --> 00:17:58,480
so yeah that was fun and and he got on

388
00:17:58,480 --> 00:18:00,429
this he put on the the google cardboard

389
00:18:00,429 --> 00:18:02,919
and you should have seen the facial

390
00:18:02,919 --> 00:18:06,100
expressions and it was a pure joy and

391
00:18:06,100 --> 00:18:09,039
that got pretty close to my heart and

392
00:18:09,039 --> 00:18:11,530
that's why I really really really like

393
00:18:11,530 --> 00:18:14,799
where this is going right with that

394
00:18:14,799 --> 00:18:17,679
other way Bev pro3 Jas is not that hard

395
00:18:17,679 --> 00:18:20,200
actually other library is not a hot not

396
00:18:20,200 --> 00:18:21,640
that hard as well but you would have to

397
00:18:21,640 --> 00:18:23,950
probably roll your own until the library

398
00:18:23,950 --> 00:18:25,600
sketchup i'm not sure if Bobby long has

399
00:18:25,600 --> 00:18:28,030
already done the work for VR but

400
00:18:28,030 --> 00:18:30,309
probably they have already so you get a

401
00:18:30,309 --> 00:18:32,020
V artifact you put in the renderer that

402
00:18:32,020 --> 00:18:33,820
you got beforehand you have the are

403
00:18:33,820 --> 00:18:35,770
controls that read the sensor data from

404
00:18:35,770 --> 00:18:38,890
your phone or the euless position

405
00:18:38,890 --> 00:18:41,110
sensor you update these on each frame

406
00:18:41,110 --> 00:18:44,140
and you render again on each frame voila

407
00:18:44,140 --> 00:18:48,220
that's it and the cool thing about web

408
00:18:48,220 --> 00:18:51,159
we are especially is like VR is a thing

409
00:18:51,159 --> 00:18:52,990
for native apps right now and for

410
00:18:52,990 --> 00:18:54,490
Windows applications and there's the

411
00:18:54,490 --> 00:18:57,610
oculus demo where you can meet with a

412
00:18:57,610 --> 00:19:00,220
friend virtually and check out netflix

413
00:19:00,220 --> 00:19:05,890
like Netflix and chill remotely Netflix

414
00:19:05,890 --> 00:19:08,909
and chill as a service if you wish and

415
00:19:08,909 --> 00:19:12,909
which is the thing probably 4 2016 but

416
00:19:12,909 --> 00:19:15,159
both both platforms like the cardboard

417
00:19:15,159 --> 00:19:17,049
and the oculus rift share the same API

418
00:19:17,049 --> 00:19:19,960
alright not don't but the browser's make

419
00:19:19,960 --> 00:19:21,640
sure that you have one API that you've

420
00:19:21,640 --> 00:19:23,080
got to address and you get pretty much

421
00:19:23,080 --> 00:19:24,400
all the heart we're done so it's

422
00:19:24,400 --> 00:19:26,770
abstract away the hardware it's already

423
00:19:26,770 --> 00:19:28,510
available in Firefox nightly builds and

424
00:19:28,510 --> 00:19:31,870
it's available as a very secure

425
00:19:31,870 --> 00:19:34,900
the distributed chromium built on a

426
00:19:34,900 --> 00:19:38,620
Google Drive so yeah I'm the person who

427
00:19:38,620 --> 00:19:41,890
destroys everyone's idea of security

428
00:19:41,890 --> 00:19:45,190
downloaded from Google Drive it's really

429
00:19:45,190 --> 00:19:46,690
low cost to get into it so we are

430
00:19:46,690 --> 00:19:49,360
actually using it at work and have

431
00:19:49,360 --> 00:19:50,950
paying customers for it which is cool

432
00:19:50,950 --> 00:19:54,010
and the community behind it is amazing

433
00:19:54,010 --> 00:19:55,990
there is a slap channel that's open for

434
00:19:55,990 --> 00:19:57,490
invites there's a lot of people on

435
00:19:57,490 --> 00:19:59,710
Twitter the website I are actually

436
00:19:59,710 --> 00:20:01,570
earlier has a lot of resources on how to

437
00:20:01,570 --> 00:20:03,040
get in touch with them there's mailing

438
00:20:03,040 --> 00:20:05,230
lists as well and the spec is being

439
00:20:05,230 --> 00:20:09,160
proposed and drafted on github and as I

440
00:20:09,160 --> 00:20:11,050
say it allows you to reach people in a

441
00:20:11,050 --> 00:20:13,570
very very deep level because it goes far

442
00:20:13,570 --> 00:20:16,720
below what we consciously feel and see

443
00:20:16,720 --> 00:20:19,750
and think I've been in a demo where I

444
00:20:19,750 --> 00:20:21,460
was on the bottom of the ocean and then

445
00:20:21,460 --> 00:20:23,020
someone asked me to make a step forward

446
00:20:23,020 --> 00:20:25,690
but there was just an abbess in front of

447
00:20:25,690 --> 00:20:28,330
me and seriously I couldn't step forward

448
00:20:28,330 --> 00:20:30,130
I'm like my brain kept telling me like

449
00:20:30,130 --> 00:20:31,809
yeah you know you are in the room and

450
00:20:31,809 --> 00:20:33,160
nothing's going to happen but then

451
00:20:33,160 --> 00:20:34,570
another part of the brain that I

452
00:20:34,570 --> 00:20:36,160
couldn't control when old golem and were

453
00:20:36,160 --> 00:20:43,150
like no don't kill us so I obeyed and

454
00:20:43,150 --> 00:20:46,870
didn't step forward so that's really

455
00:20:46,870 --> 00:20:48,820
cool and the last thing that we're going

456
00:20:48,820 --> 00:20:50,950
to touch is the third ingredient why

457
00:20:50,950 --> 00:20:53,230
does it say to then write whatever the

458
00:20:53,230 --> 00:20:56,230
third ingredient AKA 2 because 2 is the

459
00:20:56,230 --> 00:21:00,250
new 3 WebRTC so WebRTC is quite nice

460
00:21:00,250 --> 00:21:02,010
because we don't need a server right

461
00:21:02,010 --> 00:21:05,980
well except for signaling theoretically

462
00:21:05,980 --> 00:21:07,450
you can do it without a server but you

463
00:21:07,450 --> 00:21:09,940
sort of still have to have a server so

464
00:21:09,940 --> 00:21:14,540
but still WebRTC is pretty cool right ah

465
00:21:14,550 --> 00:21:19,990
except you want to do mobile so yeah I

466
00:21:19,990 --> 00:21:22,030
would have to build a sort of fall back

467
00:21:22,030 --> 00:21:23,710
and as the only fallback option I would

468
00:21:23,710 --> 00:21:26,950
have really have web sockets so while

469
00:21:26,950 --> 00:21:28,870
WebRTC are quite nice and sort of give

470
00:21:28,870 --> 00:21:30,340
themselves to this particular issue

471
00:21:30,340 --> 00:21:32,770
because they allow me to pick reliable

472
00:21:32,770 --> 00:21:34,690
or unreliable which is more sensible

473
00:21:34,690 --> 00:21:36,340
actually unreliable is more sensible for

474
00:21:36,340 --> 00:21:38,350
this case because if a package with

475
00:21:38,350 --> 00:21:39,910
information of where you look and where

476
00:21:39,910 --> 00:21:42,040
you are in 3d space gets lost it doesn't

477
00:21:42,040 --> 00:21:43,030
really matter because there's another

478
00:21:43,030 --> 00:21:44,320
one because you're pretty much

479
00:21:44,320 --> 00:21:46,029
still moving most of the time and if

480
00:21:46,029 --> 00:21:47,289
you're not then there's only a very

481
00:21:47,289 --> 00:21:49,870
small Delta between the two web sockets

482
00:21:49,870 --> 00:21:51,580
on the other hand are kind of TCP ish

483
00:21:51,580 --> 00:21:53,830
and because they hijack the connection

484
00:21:53,830 --> 00:21:55,470
you already have to the web server HTTP

485
00:21:55,470 --> 00:21:58,269
connection and they are reliable but

486
00:21:58,269 --> 00:22:00,399
that makes them slower I guess and you

487
00:22:00,399 --> 00:22:04,090
have to have a central server is that

488
00:22:04,090 --> 00:22:06,730
doesn't make any sense to you don't

489
00:22:06,730 --> 00:22:08,529
worry about it the only important kate

490
00:22:08,529 --> 00:22:11,409
key takeaway is it doesn't really matter

491
00:22:11,409 --> 00:22:13,149
that much for this particular case but

492
00:22:13,149 --> 00:22:14,409
actually if you want something that's

493
00:22:14,409 --> 00:22:15,720
really really really quick and

494
00:22:15,720 --> 00:22:18,490
decentralized WebRTC is the way to go

495
00:22:18,490 --> 00:22:20,889
unless you have to support browsers that

496
00:22:20,889 --> 00:22:24,789
don't play nicely so how much data do we

497
00:22:24,789 --> 00:22:27,070
actually get on the wire because for

498
00:22:27,070 --> 00:22:28,419
this to matter we have to figure out how

499
00:22:28,419 --> 00:22:30,220
much data we're transferring so we're

500
00:22:30,220 --> 00:22:32,039
transferring positions and orientations

501
00:22:32,039 --> 00:22:34,509
basically right so where is the paid

502
00:22:34,509 --> 00:22:37,149
person looking at and where are they in

503
00:22:37,149 --> 00:22:41,620
space so that's x y&z and rotations

504
00:22:41,620 --> 00:22:45,100
around these three axes so that's for

505
00:22:45,100 --> 00:22:47,649
instance these randomly picked six

506
00:22:47,649 --> 00:22:49,899
floating-point numbers so that's six

507
00:22:49,899 --> 00:22:52,690
times a float 32 variable because that's

508
00:22:52,690 --> 00:22:55,509
what type arrays give us so that's 192

509
00:22:55,509 --> 00:22:57,820
bits and we run with 60 frames per

510
00:22:57,820 --> 00:23:00,700
second hopefully and that makes up for

511
00:23:00,700 --> 00:23:05,409
11.5 kilobit per second I guess we're

512
00:23:05,409 --> 00:23:10,809
safe right so how about latency and

513
00:23:10,809 --> 00:23:13,090
speed so I measured this one will round

514
00:23:13,090 --> 00:23:15,490
trip times and I figure out web sockets

515
00:23:15,490 --> 00:23:17,409
are actually quite slow ish in this

516
00:23:17,409 --> 00:23:18,970
particular work quite so sure on this

517
00:23:18,970 --> 00:23:21,850
particular Wi-Fi that I was on versus

518
00:23:21,850 --> 00:23:23,710
web RTC which was really fast because it

519
00:23:23,710 --> 00:23:25,299
wasn't really going that that far out

520
00:23:25,299 --> 00:23:28,570
over the Wi-Fi so now I proposed to talk

521
00:23:28,570 --> 00:23:31,330
that set multiply of a PR virtual

522
00:23:31,330 --> 00:23:33,279
reality using oculus rift and Google

523
00:23:33,279 --> 00:23:35,679
cardboard and web RTC we got virtual

524
00:23:35,679 --> 00:23:37,720
reality we got oculus rift and Google

525
00:23:37,720 --> 00:23:41,259
cardboard mmm and I would have to build

526
00:23:41,259 --> 00:23:43,509
a sort of WebRTC implementation

527
00:23:43,509 --> 00:23:48,179
including a fallback to web sockets yeah

528
00:23:48,179 --> 00:23:53,409
sorry I lied it turned out that web

529
00:23:53,409 --> 00:23:54,970
sockets are actually fast enough for

530
00:23:54,970 --> 00:23:56,769
this so what you've seen is actually not

531
00:23:56,769 --> 00:23:57,820
using web

532
00:23:57,820 --> 00:24:00,550
but it's on github so feel free to you

533
00:24:00,550 --> 00:24:03,610
know fork it and make FR DC and you get

534
00:24:03,610 --> 00:24:07,850
swiss chocolates sent from me probably

535
00:24:07,860 --> 00:24:11,590
over WebRTC obviously so how does the

536
00:24:11,590 --> 00:24:15,550
code then actually look like well the

537
00:24:15,550 --> 00:24:17,560
server doesn't do that much it has to do

538
00:24:17,560 --> 00:24:19,780
two things really it has to manage the

539
00:24:19,780 --> 00:24:21,310
list of players that are available and

540
00:24:21,310 --> 00:24:22,780
their state which means position and

541
00:24:22,780 --> 00:24:24,160
rotation so that it can send this

542
00:24:24,160 --> 00:24:25,750
information to the other players and

543
00:24:25,750 --> 00:24:28,810
then the player send updates and the

544
00:24:28,810 --> 00:24:30,550
server basically just broadcast them to

545
00:24:30,550 --> 00:24:33,130
all the other players and that means we

546
00:24:33,130 --> 00:24:35,190
have more or less for different messages

547
00:24:35,190 --> 00:24:38,710
we have the player moving so a player is

548
00:24:38,710 --> 00:24:39,880
moving and we're just going to broadcast

549
00:24:39,880 --> 00:24:42,310
that to the other players we have a

550
00:24:42,310 --> 00:24:44,110
player that just joined the game so we

551
00:24:44,110 --> 00:24:45,970
have a connect message and we have a

552
00:24:45,970 --> 00:24:47,950
player disconnect so a player player has

553
00:24:47,950 --> 00:24:50,020
closed the website or has failed to

554
00:24:50,020 --> 00:24:51,820
connect or something like that so that's

555
00:24:51,820 --> 00:24:53,230
pretty much it actually there's a fourth

556
00:24:53,230 --> 00:24:54,870
message now because I know that there's

557
00:24:54,870 --> 00:24:57,310
we're going to see why there's a limit

558
00:24:57,310 --> 00:24:58,780
to the number of players in this game

559
00:24:58,780 --> 00:25:01,330
and I'm like yeah I have these four

560
00:25:01,330 --> 00:25:03,070
people up here and it's going to be fine

561
00:25:03,070 --> 00:25:06,610
and then this happened and I had to

562
00:25:06,610 --> 00:25:08,470
actually use the the fourth one to say

563
00:25:08,470 --> 00:25:12,550
so I service for try again later on the

564
00:25:12,550 --> 00:25:14,950
next J is called maybe and the product

565
00:25:14,950 --> 00:25:16,930
called for efficiency shall be binary

566
00:25:16,930 --> 00:25:19,240
because I don't want to waste space on

567
00:25:19,240 --> 00:25:22,150
the wire so to make it as small as

568
00:25:22,150 --> 00:25:23,860
possible we do a bit of binary packing

569
00:25:23,860 --> 00:25:25,930
so here we have our message format it

570
00:25:25,930 --> 00:25:28,450
has three informations one is the header

571
00:25:28,450 --> 00:25:30,700
which tells what kind of info what kind

572
00:25:30,700 --> 00:25:34,270
of message this is and what player this

573
00:25:34,270 --> 00:25:37,150
message sent originally the player has

574
00:25:37,150 --> 00:25:38,950
to be identifiable so that the other

575
00:25:38,950 --> 00:25:40,690
players can then update the right player

576
00:25:40,690 --> 00:25:44,020
in the world and I figure out so we have

577
00:25:44,020 --> 00:25:47,410
four message types I'm going to use to

578
00:25:47,410 --> 00:25:50,230
bits but the smallest thing I can get in

579
00:25:50,230 --> 00:25:52,960
as a type array is an 8-bit you and

580
00:25:52,960 --> 00:25:56,080
eight so I got a packet a bit and just

581
00:25:56,080 --> 00:26:00,040
use six bits for player ID now do the

582
00:26:00,040 --> 00:26:03,040
math six pit means I have maximum thick

583
00:26:03,040 --> 00:26:07,660
64 players plenty right has ample

584
00:26:07,660 --> 00:26:11,530
players hi more than sixty four people

585
00:26:11,530 --> 00:26:13,660
um so yeah that's why we have this

586
00:26:13,660 --> 00:26:15,960
additional message that says unused here

587
00:26:15,960 --> 00:26:18,040
so and then we have a position

588
00:26:18,040 --> 00:26:20,500
information and we have a rotation

589
00:26:20,500 --> 00:26:22,690
information we might not fill these in

590
00:26:22,690 --> 00:26:24,400
if it's a disconnect you don't really

591
00:26:24,400 --> 00:26:26,230
have to send a position and orientation

592
00:26:26,230 --> 00:26:28,090
so we just leave them empty but that's

593
00:26:28,090 --> 00:26:29,560
more or less that's what it boils down

594
00:26:29,560 --> 00:26:34,620
to so we have six float float 32 s and

595
00:26:34,620 --> 00:26:39,670
11 you and eight that means we have not

596
00:26:39,670 --> 00:26:41,410
too much data but actually there's

597
00:26:41,410 --> 00:26:43,540
there's more on the wire so this is the

598
00:26:43,540 --> 00:26:45,820
WebSocket protocol and I couldn't be

599
00:26:45,820 --> 00:26:47,410
arsed to actually figure out what these

600
00:26:47,410 --> 00:26:51,340
mean but they are on the wire right so

601
00:26:51,340 --> 00:26:53,860
that's 16 bit on the wire that sort of

602
00:26:53,860 --> 00:26:55,870
pad around our actual message our actual

603
00:26:55,870 --> 00:26:58,780
message is 200 bits long that means we

604
00:26:58,780 --> 00:27:00,100
have two hundred sixteen bits on the

605
00:27:00,100 --> 00:27:03,010
wire that's 27 bytes in total per

606
00:27:03,010 --> 00:27:05,560
package that's not too bad so let's look

607
00:27:05,560 --> 00:27:10,660
at how that looks in code right so can

608
00:27:10,660 --> 00:27:14,560
you read that okay sweet I wasn't sure

609
00:27:14,560 --> 00:27:16,900
so I zoomed in a bit and the server is

610
00:27:16,900 --> 00:27:20,110
quite boring yeah here this is this is

611
00:27:20,110 --> 00:27:23,890
what surprises like this do to you so

612
00:27:23,890 --> 00:27:25,660
this is an express application to serve

613
00:27:25,660 --> 00:27:27,520
the actual web content like the client

614
00:27:27,520 --> 00:27:30,250
application as well and then it creates

615
00:27:30,250 --> 00:27:35,140
a WebSocket server here and inside there

616
00:27:35,140 --> 00:27:37,240
it loads a couple of modules it creates

617
00:27:37,240 --> 00:27:39,070
the server on top of the HTTP server

618
00:27:39,070 --> 00:27:41,230
because how WebSocket works is you have

619
00:27:41,230 --> 00:27:42,910
an HTTP connection the client asks like

620
00:27:42,910 --> 00:27:45,070
hey shall we upgrade to web socket and

621
00:27:45,070 --> 00:27:48,310
then the server goes yeah and web socket

622
00:27:48,310 --> 00:27:51,910
magic happens and we have a a player

623
00:27:51,910 --> 00:27:54,130
state this object whole is basically a

624
00:27:54,130 --> 00:27:56,020
dictionary holding all the players that

625
00:27:56,020 --> 00:27:58,060
are in the game and a global counter of

626
00:27:58,060 --> 00:27:59,680
how many players we have to assign them

627
00:27:59,680 --> 00:28:02,590
an ID this one just kids gets a random

628
00:28:02,590 --> 00:28:04,690
position in 3d space always on the

629
00:28:04,690 --> 00:28:06,370
ground starting on the ground this one

630
00:28:06,370 --> 00:28:08,170
makes the actual packet that's a bit

631
00:28:08,170 --> 00:28:10,630
more interesting so if we don't pass in

632
00:28:10,630 --> 00:28:12,490
a position or rotation we're going to

633
00:28:12,490 --> 00:28:14,800
create a default one just 20 everything

634
00:28:14,800 --> 00:28:17,050
out and then we use an array buffer and

635
00:28:17,050 --> 00:28:19,900
the data view of that array buffer the

636
00:28:19,900 --> 00:28:21,580
array buffer because they are a buffer

637
00:28:21,580 --> 00:28:22,260
is a

638
00:28:22,260 --> 00:28:24,780
did platform-specific and how things are

639
00:28:24,780 --> 00:28:26,730
getting ordered but the data view is in

640
00:28:26,730 --> 00:28:28,170
the data view is actually consistent and

641
00:28:28,170 --> 00:28:30,090
we're going to use the data view to put

642
00:28:30,090 --> 00:28:32,790
things in so first of all at position 0

643
00:28:32,790 --> 00:28:34,080
which is the beginning of the package

644
00:28:34,080 --> 00:28:36,270
we're going to put in the header at

645
00:28:36,270 --> 00:28:38,670
position 1 which is one bite we're going

646
00:28:38,670 --> 00:28:40,980
to put in the X and then it five bites

647
00:28:40,980 --> 00:28:45,170
by five bites well I float32 is 32 bits

648
00:28:45,170 --> 00:28:49,740
32 / 8 is 4 so 4 byte per each of those

649
00:28:49,740 --> 00:28:51,870
four floats and then we're going to put

650
00:28:51,870 --> 00:28:53,790
in position all the three components of

651
00:28:53,790 --> 00:28:55,080
position or the three components of

652
00:28:55,080 --> 00:28:57,450
rotation and we're done and we have a a

653
00:28:57,450 --> 00:29:00,170
buffer that we can send over the network

654
00:29:00,170 --> 00:29:03,030
this one is a closer that generates a

655
00:29:03,030 --> 00:29:04,380
broadcast handler for this particular

656
00:29:04,380 --> 00:29:06,690
socket which is a player and the player

657
00:29:06,690 --> 00:29:09,300
object associated to it and it goes

658
00:29:09,300 --> 00:29:11,700
through pretty much all the others so

659
00:29:11,700 --> 00:29:13,140
this is where broadcasting happens so

660
00:29:13,140 --> 00:29:15,780
basically a socket that's associated

661
00:29:15,780 --> 00:29:19,200
with a player sends us some data since

662
00:29:19,200 --> 00:29:20,910
awesome message and then we go through

663
00:29:20,910 --> 00:29:22,500
all the players that we are having and

664
00:29:22,500 --> 00:29:25,110
if it happens to be that the socket of

665
00:29:25,110 --> 00:29:27,240
this particular player happens to be the

666
00:29:27,240 --> 00:29:28,800
socket that sent this message we're just

667
00:29:28,800 --> 00:29:30,060
not going to send it back because it

668
00:29:30,060 --> 00:29:32,580
doesn't make sense to relay the messages

669
00:29:32,580 --> 00:29:34,200
that i send to me right that's

670
00:29:34,200 --> 00:29:35,700
additional network traffic that we can

671
00:29:35,700 --> 00:29:37,800
avoid and then this one actually sends

672
00:29:37,800 --> 00:29:41,190
to the socket a message which gets

673
00:29:41,190 --> 00:29:43,980
passed in here in binary and that's

674
00:29:43,980 --> 00:29:45,600
pretty much all that we have here's an

675
00:29:45,600 --> 00:29:49,700
initial announcement so if a player gets

676
00:29:49,700 --> 00:29:52,140
I don't know even sure what this one

677
00:29:52,140 --> 00:29:53,790
does but the comment says what it does

678
00:29:53,790 --> 00:29:56,730
it announces a player to another is okay

679
00:29:56,730 --> 00:29:58,050
obviously we don't announce the player

680
00:29:58,050 --> 00:30:00,180
to the player itself doesn't make sense

681
00:30:00,180 --> 00:30:01,770
because the player already knows that he

682
00:30:01,770 --> 00:30:05,370
had stored the game we send a packet

683
00:30:05,370 --> 00:30:07,170
which means here we have a connect

684
00:30:07,170 --> 00:30:09,690
message which is just this binary

685
00:30:09,690 --> 00:30:11,520
message type that we saw in the slides

686
00:30:11,520 --> 00:30:14,550
which stands for Kinect shift that by

687
00:30:14,550 --> 00:30:16,980
six bit making it the most significant

688
00:30:16,980 --> 00:30:19,800
bits the first two bits of this on the

689
00:30:19,800 --> 00:30:22,110
highest order and then we send oh

690
00:30:22,110 --> 00:30:26,520
it wraps badly we send the position and

691
00:30:26,520 --> 00:30:28,980
we send that into binary so this is the

692
00:30:28,980 --> 00:30:31,020
initial message that we're going to have

693
00:30:31,020 --> 00:30:32,700
to make that says like this player has

694
00:30:32,700 --> 00:30:34,590
joined this now here

695
00:30:34,590 --> 00:30:37,679
right and then we send to the 2d player

696
00:30:37,679 --> 00:30:39,720
that has just connected we send all the

697
00:30:39,720 --> 00:30:42,539
other players connection positions so

698
00:30:42,539 --> 00:30:44,880
that initializes the game and then this

699
00:30:44,880 --> 00:30:48,390
is the actual beef of the application so

700
00:30:48,390 --> 00:30:50,520
if whenever someone connects to the

701
00:30:50,520 --> 00:30:54,059
server we check if we already have 63

702
00:30:54,059 --> 00:30:56,039
players if that is the case then sorry

703
00:30:56,039 --> 00:30:58,260
we can't accommodate you and we send a

704
00:30:58,260 --> 00:31:00,270
message with ty project to this

705
00:31:00,270 --> 00:31:02,400
particular play and say bye close the

706
00:31:02,400 --> 00:31:03,659
connection so that he can't bother us

707
00:31:03,659 --> 00:31:07,470
anymore and end of story if that doesn't

708
00:31:07,470 --> 00:31:10,860
happen then we we go to the get get the

709
00:31:10,860 --> 00:31:13,049
current ID increment the ID for the next

710
00:31:13,049 --> 00:31:15,750
player and here we set up the player

711
00:31:15,750 --> 00:31:18,659
object for woopsy first with a socket

712
00:31:18,659 --> 00:31:20,520
that we got and the we could generate a

713
00:31:20,520 --> 00:31:21,870
random position so the position gets

714
00:31:21,870 --> 00:31:23,850
generated by the server not by the

715
00:31:23,850 --> 00:31:27,299
client when it joins we sent that we get

716
00:31:27,299 --> 00:31:29,399
a broadcast hander so whenever this new

717
00:31:29,399 --> 00:31:31,169
player sends us a message we're going to

718
00:31:31,169 --> 00:31:33,419
broadcast this to all the others kind of

719
00:31:33,419 --> 00:31:36,990
makes sense and yeah if it actually the

720
00:31:36,990 --> 00:31:39,270
socket closes which means the player has

721
00:31:39,270 --> 00:31:40,649
disconnected we sent the disconnect

722
00:31:40,649 --> 00:31:42,600
message to all the other players so they

723
00:31:42,600 --> 00:31:44,669
know that this player has been just

724
00:31:44,669 --> 00:31:46,730
going to remove them from the game world

725
00:31:46,730 --> 00:31:49,380
then we announce the the players to each

726
00:31:49,380 --> 00:31:51,330
other that's pretty much it and then we

727
00:31:51,330 --> 00:31:52,890
just start the web server and listen and

728
00:31:52,890 --> 00:31:56,279
done so that's a bit more than 100 lines

729
00:31:56,279 --> 00:31:57,809
but if you would compress that that's

730
00:31:57,809 --> 00:31:59,820
much less there's a lot of white space

731
00:31:59,820 --> 00:32:03,779
and blah so that's the server side of

732
00:32:03,779 --> 00:32:08,220
things

733
00:32:08,230 --> 00:32:12,850
Wow right yeah it has to load because it

734
00:32:12,850 --> 00:32:16,390
never saw this before Google slides you

735
00:32:16,390 --> 00:32:18,880
are so weird sometimes so on the client

736
00:32:18,880 --> 00:32:21,880
which is the last bit that's left we got

737
00:32:21,880 --> 00:32:23,679
to have to do a bit more first of all we

738
00:32:23,679 --> 00:32:25,090
have to initialize everything that's

739
00:32:25,090 --> 00:32:26,350
rendering related right we have to

740
00:32:26,350 --> 00:32:28,390
render that we have to load the textures

741
00:32:28,390 --> 00:32:31,179
we have to load the horse 3d model we

742
00:32:31,179 --> 00:32:33,250
have to do the actual render loop we

743
00:32:33,250 --> 00:32:34,690
have to receive messages from the server

744
00:32:34,690 --> 00:32:36,340
and we have to send messages to the

745
00:32:36,340 --> 00:32:38,520
server whenever we are having enough

746
00:32:38,520 --> 00:32:40,720
motion or hours and because it does make

747
00:32:40,720 --> 00:32:42,760
sense to continuously send a message if

748
00:32:42,760 --> 00:32:44,950
I haven't moved why would I send a

749
00:32:44,950 --> 00:32:49,929
message and that looks like this how am

750
00:32:49,929 --> 00:32:52,440
i doing what time I have no idea I'm

751
00:32:52,440 --> 00:32:54,370
probably going to have a couple more

752
00:32:54,370 --> 00:32:58,540
minutes client and the clients main

753
00:32:58,540 --> 00:33:02,559
logic is a good question is in jayus

754
00:33:02,559 --> 00:33:07,179
exactly a bunch of smaller modules and

755
00:33:07,179 --> 00:33:11,710
here what we're doing is primarily there

756
00:33:11,710 --> 00:33:13,330
is a parameter because you might have an

757
00:33:13,330 --> 00:33:15,700
older cardboard where you don't have a

758
00:33:15,700 --> 00:33:17,380
button so you can select a different

759
00:33:17,380 --> 00:33:18,940
thing and then you actually get all to

760
00:33:18,940 --> 00:33:20,500
move which means you constantly move

761
00:33:20,500 --> 00:33:22,929
around which is quite handy and nice for

762
00:33:22,929 --> 00:33:24,580
people who have the cheaper version of

763
00:33:24,580 --> 00:33:26,500
the cardboard then we initialize the

764
00:33:26,500 --> 00:33:28,030
game world which does all the the

765
00:33:28,030 --> 00:33:29,770
rendering initialization which returns

766
00:33:29,770 --> 00:33:31,299
promised once we're done with that we

767
00:33:31,299 --> 00:33:32,740
initialize the network which opens up

768
00:33:32,740 --> 00:33:34,570
the socket and does all the the

769
00:33:34,570 --> 00:33:38,230
messaging there and whenever we're

770
00:33:38,230 --> 00:33:41,559
getting a emotion event from this game

771
00:33:41,559 --> 00:33:43,480
world module that's that's written and

772
00:33:43,480 --> 00:33:45,220
that's a custom module basically that

773
00:33:45,220 --> 00:33:47,679
just tracks if the VR controls have

774
00:33:47,679 --> 00:33:49,240
updated the position or if I have

775
00:33:49,240 --> 00:33:51,400
pressed the button so i move if that

776
00:33:51,400 --> 00:33:53,919
happens i send a local update with my

777
00:33:53,919 --> 00:33:56,380
position over the network all right and

778
00:33:56,380 --> 00:33:58,480
then we have this overlay that you saw

779
00:33:58,480 --> 00:34:01,179
that says tap to start it requests full

780
00:34:01,179 --> 00:34:03,070
screen it locks the orientation because

781
00:34:03,070 --> 00:34:05,140
that's that's actually an annoying thing

782
00:34:05,140 --> 00:34:06,820
so if you don't lock the orientation and

783
00:34:06,820 --> 00:34:08,950
go like this then it might automatically

784
00:34:08,950 --> 00:34:12,850
rotate and look and you vomit to

785
00:34:12,850 --> 00:34:16,330
avoid that you were laughing but it's

786
00:34:16,330 --> 00:34:18,340
it's not that much of well you can say

787
00:34:18,340 --> 00:34:20,980
it's a bucket full of fun

788
00:34:20,980 --> 00:34:23,980
but it's not that cool so I lock the

789
00:34:23,980 --> 00:34:25,480
orientation to prevent that and allow

790
00:34:25,480 --> 00:34:27,010
you to sort of do these things where you

791
00:34:27,010 --> 00:34:30,700
go into portrait mode as well which is a

792
00:34:30,700 --> 00:34:33,040
bit browser specific but hey that's what

793
00:34:33,040 --> 00:34:37,000
you get and then we just start moving if

794
00:34:37,000 --> 00:34:39,070
you have to move because you can't press

795
00:34:39,070 --> 00:34:41,350
a button and then there's some event

796
00:34:41,350 --> 00:34:44,950
handlers and that's it for here so

797
00:34:44,950 --> 00:34:46,419
that's not very interesting so what's

798
00:34:46,419 --> 00:34:47,950
going on in this game world then and

799
00:34:47,950 --> 00:34:49,690
that's where the virtual reality things

800
00:34:49,690 --> 00:34:51,100
go on if you're interested in networking

801
00:34:51,100 --> 00:34:55,240
cool check out networking guess I'd like

802
00:34:55,240 --> 00:34:56,830
to dive in into this one I wrote a

803
00:34:56,830 --> 00:34:58,420
wrapper around three J's because I'm

804
00:34:58,420 --> 00:35:02,080
really really lazy I mean efficient so I

805
00:35:02,080 --> 00:35:03,310
don't have to deal with most of the

806
00:35:03,310 --> 00:35:06,790
things internally and what I do is I and

807
00:35:06,790 --> 00:35:08,260
we're going to go through the code as it

808
00:35:08,260 --> 00:35:12,070
flows in in it this one is a little

809
00:35:12,070 --> 00:35:15,310
longer we initialize a world and put the

810
00:35:15,310 --> 00:35:16,660
camera in the middle which is the

811
00:35:16,660 --> 00:35:19,420
coordinate origin at zero which is the

812
00:35:19,420 --> 00:35:22,780
set distance we put up a certain

813
00:35:22,780 --> 00:35:25,000
distance until which we were going to

814
00:35:25,000 --> 00:35:26,470
render and then we have a render

815
00:35:26,470 --> 00:35:27,840
callback that does the actual rendering

816
00:35:27,840 --> 00:35:30,880
we put a light in so that it's not dark

817
00:35:30,880 --> 00:35:34,300
makes sense and we put a box which is

818
00:35:34,300 --> 00:35:36,910
this j/s box that you might have seen if

819
00:35:36,910 --> 00:35:38,350
you were around that one or floating

820
00:35:38,350 --> 00:35:40,600
around the world which uses the JSP and

821
00:35:40,600 --> 00:35:42,400
G file as a texture which is why I

822
00:35:42,400 --> 00:35:45,369
looked like a J's logo as a box then we

823
00:35:45,369 --> 00:35:47,050
have a sphere which is sort of the the

824
00:35:47,050 --> 00:35:50,560
aura around that box and it's

825
00:35:50,560 --> 00:35:53,080
transparent and it has a pink color

826
00:35:53,080 --> 00:35:55,810
because JavaScript and Pink's sort of go

827
00:35:55,810 --> 00:35:58,119
together or yellow really but yeah

828
00:35:58,119 --> 00:36:01,540
yellow is boring then we have the ground

829
00:36:01,540 --> 00:36:05,080
which is just a plain plain shape that

830
00:36:05,080 --> 00:36:06,340
stretches everything and then we have a

831
00:36:06,340 --> 00:36:08,530
box with a bunch of images around and

832
00:36:08,530 --> 00:36:10,780
that was the sky in the horizon you were

833
00:36:10,780 --> 00:36:12,460
seeing we are faking that it's not

834
00:36:12,460 --> 00:36:14,109
really sort of like there's clouds now

835
00:36:14,109 --> 00:36:17,260
screw that that would drop your iPhone's

836
00:36:17,260 --> 00:36:18,970
frame rate so we're going to skip that a

837
00:36:18,970 --> 00:36:22,330
bit and yeah then we just put it into

838
00:36:22,330 --> 00:36:24,760
the world we get a camera we load the

839
00:36:24,760 --> 00:36:27,700
wonderful horse look at my horse my

840
00:36:27,700 --> 00:36:31,180
horse is amazing it's in virtual reality

841
00:36:31,180 --> 00:36:35,079
hmm so I can fly around with it and then

842
00:36:35,079 --> 00:36:37,059
we just initialize the VR controls and

843
00:36:37,059 --> 00:36:39,069
the Uwharrie effect I had more or less

844
00:36:39,069 --> 00:36:41,650
it and in the render loop scroll Scroll

845
00:36:41,650 --> 00:36:43,750
scroll the render Luke we're checking if

846
00:36:43,750 --> 00:36:46,990
we are going very imaginative name and

847
00:36:46,990 --> 00:36:48,760
if we happen to be and if we're going

848
00:36:48,760 --> 00:36:50,890
out of bounds then we sort of make sure

849
00:36:50,890 --> 00:36:53,800
that you can't get out of bounds and we

850
00:36:53,800 --> 00:36:55,900
update the the rotator the orientation

851
00:36:55,900 --> 00:36:58,119
of you and we rotate the power up so

852
00:36:58,119 --> 00:37:00,460
that it spins a bit and we render the

853
00:37:00,460 --> 00:37:02,559
scene and if we happen to be actually

854
00:37:02,559 --> 00:37:05,280
moving enough for it to be visible and

855
00:37:05,280 --> 00:37:09,130
we're moving then we sort of sending

856
00:37:09,130 --> 00:37:10,839
that information on calling this this

857
00:37:10,839 --> 00:37:12,579
event listener and the network actually

858
00:37:12,579 --> 00:37:15,609
actually sends it over and yeah check

859
00:37:15,609 --> 00:37:17,430
out the code it's quite fun you can

860
00:37:17,430 --> 00:37:22,510
extend it whatever you wish and we did

861
00:37:22,510 --> 00:37:28,600
it

862
00:37:28,610 --> 00:37:30,890
you can totally wire me the money on my

863
00:37:30,890 --> 00:37:35,030
Swiss bank account later so what's next

864
00:37:35,030 --> 00:37:37,160
well very quickly first of all you can

865
00:37:37,160 --> 00:37:40,150
do it via web RTC implementation of that

866
00:37:40,150 --> 00:37:42,590
you can actually build game mechanics

867
00:37:42,590 --> 00:37:43,970
into it because right now it's just fun

868
00:37:43,970 --> 00:37:45,620
to fly around with a horse but not that

869
00:37:45,620 --> 00:37:47,540
much like scoring or something you can

870
00:37:47,540 --> 00:37:49,340
use the gamepad API which is quite fun

871
00:37:49,340 --> 00:37:51,110
as well particularly with oculus rift

872
00:37:51,110 --> 00:37:52,730
and there's things like the leap motion

873
00:37:52,730 --> 00:37:54,380
of my which allow you to actually use

874
00:37:54,380 --> 00:37:55,910
your hands and virtual reality which

875
00:37:55,910 --> 00:37:57,910
gives a better feeling of presence

